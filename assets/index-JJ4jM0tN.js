var mI=Object.defineProperty;var pI=(n,e,t)=>e in n?mI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ug=(n,e,t)=>pI(n,typeof e!="symbol"?e+"":e,t);function gI(n,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function KS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cg={exports:{}},Ku={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb;function yI(){if(hb)return Ku;hb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:a,key:c,ref:s!==void 0?s:null,props:l}}return Ku.Fragment=e,Ku.jsx=t,Ku.jsxs=t,Ku}var fb;function _I(){return fb||(fb=1,cg.exports=yI()),cg.exports}var T=_I(),hg={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db;function vI(){if(db)return Ze;db=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function w(U){return U===null||typeof U!="object"?null:(U=S&&U[S]||U["@@iterator"],typeof U=="function"?U:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,k={};function K(U,ie,Te){this.props=U,this.context=ie,this.refs=k,this.updater=Te||O}K.prototype.isReactComponent={},K.prototype.setState=function(U,ie){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ie,"setState")},K.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function H(){}H.prototype=K.prototype;function X(U,ie,Te){this.props=U,this.context=ie,this.refs=k,this.updater=Te||O}var se=X.prototype=new H;se.constructor=X,q(se,K.prototype),se.isPureReactComponent=!0;var ue=Array.isArray;function G(){}var A={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function x(U,ie,Te){var oe=Te.ref;return{$$typeof:n,type:U,key:ie,ref:oe!==void 0?oe:null,props:Te}}function N(U,ie){return x(U.type,ie,U.props)}function M(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function V(U){var ie={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Te){return ie[Te]})}var D=/\/+/g;function me(U,ie){return typeof U=="object"&&U!==null&&U.key!=null?V(""+U.key):ie.toString(36)}function ye(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(G,G):(U.status="pending",U.then(function(ie){U.status==="pending"&&(U.status="fulfilled",U.value=ie)},function(ie){U.status==="pending"&&(U.status="rejected",U.reason=ie)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function z(U,ie,Te,oe,Ee){var be=typeof U;(be==="undefined"||be==="boolean")&&(U=null);var Ne=!1;if(U===null)Ne=!0;else switch(be){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(U.$$typeof){case n:case e:Ne=!0;break;case y:return Ne=U._init,z(Ne(U._payload),ie,Te,oe,Ee)}}if(Ne)return Ee=Ee(U),Ne=oe===""?"."+me(U,0):oe,ue(Ee)?(Te="",Ne!=null&&(Te=Ne.replace(D,"$&/")+"/"),z(Ee,ie,Te,"",function(yt){return yt})):Ee!=null&&(M(Ee)&&(Ee=N(Ee,Te+(Ee.key==null||U&&U.key===Ee.key?"":(""+Ee.key).replace(D,"$&/")+"/")+Ne)),ie.push(Ee)),1;Ne=0;var Be=oe===""?".":oe+":";if(ue(U))for(var $e=0;$e<U.length;$e++)oe=U[$e],be=Be+me(oe,$e),Ne+=z(oe,ie,Te,be,Ee);else if($e=w(U),typeof $e=="function")for(U=$e.call(U),$e=0;!(oe=U.next()).done;)oe=oe.value,be=Be+me(oe,$e++),Ne+=z(oe,ie,Te,be,Ee);else if(be==="object"){if(typeof U.then=="function")return z(ye(U),ie,Te,oe,Ee);throw ie=String(U),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function ne(U,ie,Te){if(U==null)return U;var oe=[],Ee=0;return z(U,oe,"","",function(be){return ie.call(Te,be,Ee++)}),oe}function ce(U){if(U._status===-1){var ie=U._result;ie=ie(),ie.then(function(Te){(U._status===0||U._status===-1)&&(U._status=1,U._result=Te)},function(Te){(U._status===0||U._status===-1)&&(U._status=2,U._result=Te)}),U._status===-1&&(U._status=0,U._result=ie)}if(U._status===1)return U._result.default;throw U._result}var De=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Ue={map:ne,forEach:function(U,ie,Te){ne(U,function(){ie.apply(this,arguments)},Te)},count:function(U){var ie=0;return ne(U,function(){ie++}),ie},toArray:function(U){return ne(U,function(ie){return ie})||[]},only:function(U){if(!M(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return Ze.Activity=E,Ze.Children=Ue,Ze.Component=K,Ze.Fragment=t,Ze.Profiler=s,Ze.PureComponent=X,Ze.StrictMode=a,Ze.Suspense=m,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(U){return A.H.useMemoCache(U)}},Ze.cache=function(U){return function(){return U.apply(null,arguments)}},Ze.cacheSignal=function(){return null},Ze.cloneElement=function(U,ie,Te){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var oe=q({},U.props),Ee=U.key;if(ie!=null)for(be in ie.key!==void 0&&(Ee=""+ie.key),ie)!R.call(ie,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ie.ref===void 0||(oe[be]=ie[be]);var be=arguments.length-2;if(be===1)oe.children=Te;else if(1<be){for(var Ne=Array(be),Be=0;Be<be;Be++)Ne[Be]=arguments[Be+2];oe.children=Ne}return x(U.type,Ee,oe)},Ze.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},Ze.createElement=function(U,ie,Te){var oe,Ee={},be=null;if(ie!=null)for(oe in ie.key!==void 0&&(be=""+ie.key),ie)R.call(ie,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(Ee[oe]=ie[oe]);var Ne=arguments.length-2;if(Ne===1)Ee.children=Te;else if(1<Ne){for(var Be=Array(Ne),$e=0;$e<Ne;$e++)Be[$e]=arguments[$e+2];Ee.children=Be}if(U&&U.defaultProps)for(oe in Ne=U.defaultProps,Ne)Ee[oe]===void 0&&(Ee[oe]=Ne[oe]);return x(U,be,Ee)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(U){return{$$typeof:d,render:U}},Ze.isValidElement=M,Ze.lazy=function(U){return{$$typeof:y,_payload:{_status:-1,_result:U},_init:ce}},Ze.memo=function(U,ie){return{$$typeof:g,type:U,compare:ie===void 0?null:ie}},Ze.startTransition=function(U){var ie=A.T,Te={};A.T=Te;try{var oe=U(),Ee=A.S;Ee!==null&&Ee(Te,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(G,De)}catch(be){De(be)}finally{ie!==null&&Te.types!==null&&(ie.types=Te.types),A.T=ie}},Ze.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ze.use=function(U){return A.H.use(U)},Ze.useActionState=function(U,ie,Te){return A.H.useActionState(U,ie,Te)},Ze.useCallback=function(U,ie){return A.H.useCallback(U,ie)},Ze.useContext=function(U){return A.H.useContext(U)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(U,ie){return A.H.useDeferredValue(U,ie)},Ze.useEffect=function(U,ie){return A.H.useEffect(U,ie)},Ze.useEffectEvent=function(U){return A.H.useEffectEvent(U)},Ze.useId=function(){return A.H.useId()},Ze.useImperativeHandle=function(U,ie,Te){return A.H.useImperativeHandle(U,ie,Te)},Ze.useInsertionEffect=function(U,ie){return A.H.useInsertionEffect(U,ie)},Ze.useLayoutEffect=function(U,ie){return A.H.useLayoutEffect(U,ie)},Ze.useMemo=function(U,ie){return A.H.useMemo(U,ie)},Ze.useOptimistic=function(U,ie){return A.H.useOptimistic(U,ie)},Ze.useReducer=function(U,ie,Te){return A.H.useReducer(U,ie,Te)},Ze.useRef=function(U){return A.H.useRef(U)},Ze.useState=function(U){return A.H.useState(U)},Ze.useSyncExternalStore=function(U,ie,Te){return A.H.useSyncExternalStore(U,ie,Te)},Ze.useTransition=function(){return A.H.useTransition()},Ze.version="19.2.4",Ze}var mb;function Md(){return mb||(mb=1,hg.exports=vI()),hg.exports}var P=Md();const YS=KS(P),EI=gI({__proto__:null,default:YS},[P]);var fg={exports:{}},Yu={},dg={exports:{}},mg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function TI(){return pb||(pb=1,(function(n){function e(z,ne){var ce=z.length;z.push(ne);e:for(;0<ce;){var De=ce-1>>>1,Ue=z[De];if(0<s(Ue,ne))z[De]=ne,z[ce]=Ue,ce=De;else break e}}function t(z){return z.length===0?null:z[0]}function a(z){if(z.length===0)return null;var ne=z[0],ce=z.pop();if(ce!==ne){z[0]=ce;e:for(var De=0,Ue=z.length,U=Ue>>>1;De<U;){var ie=2*(De+1)-1,Te=z[ie],oe=ie+1,Ee=z[oe];if(0>s(Te,ce))oe<Ue&&0>s(Ee,Te)?(z[De]=Ee,z[oe]=ce,De=oe):(z[De]=Te,z[ie]=ce,De=ie);else if(oe<Ue&&0>s(Ee,ce))z[De]=Ee,z[oe]=ce,De=oe;else break e}}return ne}function s(z,ne){var ce=z.sortIndex-ne.sortIndex;return ce!==0?ce:z.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],y=1,E=null,S=3,w=!1,O=!1,q=!1,k=!1,K=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function se(z){for(var ne=t(g);ne!==null;){if(ne.callback===null)a(g);else if(ne.startTime<=z)a(g),ne.sortIndex=ne.expirationTime,e(m,ne);else break;ne=t(g)}}function ue(z){if(q=!1,se(z),!O)if(t(m)!==null)O=!0,G||(G=!0,V());else{var ne=t(g);ne!==null&&ye(ue,ne.startTime-z)}}var G=!1,A=-1,R=5,x=-1;function N(){return k?!0:!(n.unstable_now()-x<R)}function M(){if(k=!1,G){var z=n.unstable_now();x=z;var ne=!0;try{e:{O=!1,q&&(q=!1,H(A),A=-1),w=!0;var ce=S;try{t:{for(se(z),E=t(m);E!==null&&!(E.expirationTime>z&&N());){var De=E.callback;if(typeof De=="function"){E.callback=null,S=E.priorityLevel;var Ue=De(E.expirationTime<=z);if(z=n.unstable_now(),typeof Ue=="function"){E.callback=Ue,se(z),ne=!0;break t}E===t(m)&&a(m),se(z)}else a(m);E=t(m)}if(E!==null)ne=!0;else{var U=t(g);U!==null&&ye(ue,U.startTime-z),ne=!1}}break e}finally{E=null,S=ce,w=!1}ne=void 0}}finally{ne?V():G=!1}}}var V;if(typeof X=="function")V=function(){X(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,me=D.port2;D.port1.onmessage=M,V=function(){me.postMessage(null)}}else V=function(){K(M,0)};function ye(z,ne){A=K(function(){z(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(z){switch(S){case 1:case 2:case 3:var ne=3;break;default:ne=S}var ce=S;S=ne;try{return z()}finally{S=ce}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(z,ne){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ce=S;S=z;try{return ne()}finally{S=ce}},n.unstable_scheduleCallback=function(z,ne,ce){var De=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?De+ce:De):ce=De,z){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ce+Ue,z={id:y++,callback:ne,priorityLevel:z,startTime:ce,expirationTime:Ue,sortIndex:-1},ce>De?(z.sortIndex=ce,e(g,z),t(m)===null&&z===t(g)&&(q?(H(A),A=-1):q=!0,ye(ue,ce-De))):(z.sortIndex=Ue,e(m,z),O||w||(O=!0,G||(G=!0,V()))),z},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(z){var ne=S;return function(){var ce=S;S=ne;try{return z.apply(this,arguments)}finally{S=ce}}}})(mg)),mg}var gb;function bI(){return gb||(gb=1,dg.exports=TI()),dg.exports}var pg={exports:{}},Zn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb;function SI(){if(yb)return Zn;yb=1;var n=Md();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(m,g,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:m,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Zn.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,y)},Zn.flushSync=function(m){var g=c.T,y=a.p;try{if(c.T=null,a.p=2,m)return m()}finally{c.T=g,a.p=y,a.d.f()}},Zn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(m,g))},Zn.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},Zn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,E=d(y,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?a.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:w}):y==="script"&&a.d.X(m,{crossOrigin:E,integrity:S,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Zn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);a.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(m)},Zn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,E=d(y,g.crossOrigin);a.d.L(m,y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Zn.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=d(g.as,g.crossOrigin);a.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(m)},Zn.requestFormReset=function(m){a.d.r(m)},Zn.unstable_batchedUpdates=function(m,g){return m(g)},Zn.useFormState=function(m,g,y){return c.H.useFormState(m,g,y)},Zn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zn.version="19.2.4",Zn}var _b;function QS(){if(_b)return pg.exports;_b=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pg.exports=SI(),pg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb;function AI(){if(vb)return Yu;vb=1;var n=bI(),e=Md(),t=QS();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(a(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,u=i;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),r;if(p===u)return m(f),i;p=p.sibling}throw Error(a(188))}if(o.return!==u.return)o=f,u=p;else{for(var v=!1,C=f.child;C;){if(C===o){v=!0,o=f,u=p;break}if(C===u){v=!0,u=f,o=p;break}C=C.sibling}if(!v){for(C=p.child;C;){if(C===o){v=!0,o=p,u=f;break}if(C===u){v=!0,u=p,o=f;break}C=C.sibling}if(!v)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function y(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=y(r),i!==null)return i;r=r.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),X=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function V(r){return r===null||typeof r!="object"?null:(r=M&&r[M]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function me(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case q:return"Fragment";case K:return"Profiler";case k:return"StrictMode";case ue:return"Suspense";case G:return"SuspenseList";case x:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case O:return"Portal";case X:return r.displayName||"Context";case H:return(r._context.displayName||"Context")+".Consumer";case se:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case A:return i=r.displayName||null,i!==null?i:me(r.type)||"Memo";case R:i=r._payload,r=r._init;try{return me(r(i))}catch{}}return null}var ye=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},De=[],Ue=-1;function U(r){return{current:r}}function ie(r){0>Ue||(r.current=De[Ue],De[Ue]=null,Ue--)}function Te(r,i){Ue++,De[Ue]=r.current,r.current=i}var oe=U(null),Ee=U(null),be=U(null),Ne=U(null);function Be(r,i){switch(Te(be,i),Te(Ee,r),Te(oe,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?PT(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=PT(i),r=VT(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ie(oe),Te(oe,r)}function $e(){ie(oe),ie(Ee),ie(be)}function yt(r){r.memoizedState!==null&&Te(Ne,r);var i=oe.current,o=VT(i,r.type);i!==o&&(Te(Ee,r),Te(oe,o))}function Lt(r){Ee.current===r&&(ie(oe),ie(Ee)),Ne.current===r&&(ie(Ne),Fu._currentValue=ce)}var dt,tn;function fn(r){if(dt===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);dt=i&&i[1]||"",tn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dt+r+tn}var Hr=!1;function an(r,i){if(!r||Hr)return"";Hr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ae){var te=ae}Reflect.construct(r,[],pe)}else{try{pe.call()}catch(ae){te=ae}r.call(pe.prototype)}}else{try{throw Error()}catch(ae){te=ae}(pe=r())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),v=p[0],C=p[1];if(v&&C){var j=v.split(`
`),Z=C.split(`
`);for(f=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(u===j.length||f===Z.length)for(u=j.length-1,f=Z.length-1;1<=u&&0<=f&&j[u]!==Z[f];)f--;for(;1<=u&&0<=f;u--,f--)if(j[u]!==Z[f]){if(u!==1||f!==1)do if(u--,f--,0>f||j[u]!==Z[f]){var le=`
`+j[u].replace(" at new "," at ");return r.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",r.displayName)),le}while(1<=u&&0<=f);break}}}finally{Hr=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?fn(o):""}function Bn(r,i){switch(r.tag){case 26:case 27:case 5:return fn(r.type);case 16:return fn("Lazy");case 13:return r.child!==i&&i!==null?fn("Suspense Fallback"):fn("Suspense");case 19:return fn("SuspenseList");case 0:case 15:return an(r.type,!1);case 11:return an(r.type.render,!1);case 1:return an(r.type,!0);case 31:return fn("Activity");default:return""}}function Sr(r){try{var i="",o=null;do i+=Bn(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Pt=Object.prototype.hasOwnProperty,lt=n.unstable_scheduleCallback,Nn=n.unstable_cancelCallback,wi=n.unstable_shouldYield,ui=n.unstable_requestPaint,qt=n.unstable_now,sn=n.unstable_getCurrentPriorityLevel,ar=n.unstable_ImmediatePriority,Ar=n.unstable_UserBlockingPriority,gn=n.unstable_NormalPriority,F=n.unstable_LowPriority,he=n.unstable_IdlePriority,we=n.log,ve=n.unstable_setDisableYieldValue,xe=null,Re=null;function mt(r){if(typeof we=="function"&&ve(r),Re&&typeof Re.setStrictMode=="function")try{Re.setStrictMode(xe,r)}catch{}}var Fe=Math.clz32?Math.clz32:st,ht=Math.log,Me=Math.LN2;function st(r){return r>>>=0,r===0?32:31-(ht(r)/Me|0)|0}var $t=256,Dn=262144,Ct=4194304;function On(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Mn(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,p=r.suspendedLanes,v=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~p,u!==0?f=On(u):(v&=C,v!==0?f=On(v):o||(o=C&~r,o!==0&&(f=On(o))))):(C=u&~p,C!==0?f=On(C):v!==0?f=On(v):o||(o=u&~r,o!==0&&(f=On(o)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,o=i&-i,p>=o||p===32&&(o&4194048)!==0)?i:f}function wr(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Co(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qi(){var r=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),r}function sr(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Ci(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function tu(r,i,o,u,f,p){var v=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var C=r.entanglements,j=r.expirationTimes,Z=r.hiddenUpdates;for(o=v&~o;0<o;){var le=31-Fe(o),pe=1<<le;C[le]=0,j[le]=-1;var te=Z[le];if(te!==null)for(Z[le]=null,le=0;le<te.length;le++){var ae=te[le];ae!==null&&(ae.lane&=-536870913)}o&=~pe}u!==0&&Xi(r,u,0),p!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=p&~(v&~i))}function Xi(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Fe(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function L(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Fe(o),f=1<<u;f&i|r[u]&i&&(r[u]|=i),o&=~f}}function $(r,i){var o=i&-i;return o=(o&42)!==0?1:ee(o),(o&(r.suspendedLanes|i))!==0?0:o}function ee(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function _e(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Se(){var r=ne.p;return r!==0?r:(r=window.event,r===void 0?32:ib(r.type))}function Pe(r,i){var o=ne.p;try{return ne.p=r,i()}finally{ne.p=o}}var Le=Math.random().toString(36).slice(2),Ae="__reactFiber$"+Le,Ie="__reactProps$"+Le,ke="__reactContainer$"+Le,Ye="__reactEvents$"+Le,He="__reactListeners$"+Le,We="__reactHandles$"+Le,ut="__reactResources$"+Le,jt="__reactMarker$"+Le;function Wt(r){delete r[Ae],delete r[Ie],delete r[Ye],delete r[He],delete r[We]}function Kt(r){var i=r[Ae];if(i)return i;for(var o=r.parentNode;o;){if(i=o[ke]||o[Ae]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=HT(r);r!==null;){if(o=r[Ae])return o;r=HT(r)}return i}r=o,o=r.parentNode}return null}function rt(r){if(r=r[Ae]||r[ke]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function Yt(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function jn(r){var i=r[ut];return i||(i=r[ut]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Qt(r){r[jt]=!0}var hr=new Set,Wn={};function fr(r,i){Jn(r,i),Jn(r+"Capture",i)}function Jn(r,i){for(Wn[r]=i,r=0;r<i.length;r++)hr.add(i[r])}var Cr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ri={},Ii={};function ft(r){return Pt.call(Ii,r)?!0:Pt.call(Ri,r)?!1:Cr.test(r)?Ii[r]=!0:(Ri[r]=!0,!1)}function on(r,i,o){if(ft(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function Tn(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function Ut(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function it(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Rr(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Da(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,p=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,p.call(this,v)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function xt(r){if(!r._valueTracker){var i=Rr(r)?"checked":"value";r._valueTracker=Da(r,i,""+r[i])}}function Ms(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=Rr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function xi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ps=/[\n"\\]/g;function dr(r){return r.replace(Ps,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ro(r,i,o,u,f,p,v,C){r.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?r.type=v:r.removeAttribute("type"),i!=null?v==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+it(i)):r.value!==""+it(i)&&(r.value=""+it(i)):v!=="submit"&&v!=="reset"||r.removeAttribute("value"),i!=null?nu(r,v,it(i)):o!=null?nu(r,v,it(o)):u!=null&&r.removeAttribute("value"),f==null&&p!=null&&(r.defaultChecked=!!p),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+it(C):r.removeAttribute("name")}function Zc(r,i,o,u,f,p,v,C){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){xt(r);return}o=o!=null?""+it(o):"",i=i!=null?""+it(i):o,C||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.name=v),xt(r)}function nu(r,i,o){i==="number"&&xi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Oa(r,i,o,u){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+it(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function eh(r,i,o){if(i!=null&&(i=""+it(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+it(o):""}function Ma(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(ye(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=it(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),xt(r)}function mr(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var th=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ru(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||th.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function iu(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&ru(r,f,u)}else for(var p in i)i.hasOwnProperty(p)&&ru(r,p,i[p])}function Io(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xo(r){return Pa.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ci(){}var au=null;function Fr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Va=null,Ni=null;function Vs(r){var i=rt(r);if(i&&(r=i.stateNode)){var o=r[Ie]||null;e:switch(r=i.stateNode,i.type){case"input":if(Ro(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+dr(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var f=u[Ie]||null;if(!f)throw Error(a(90));Ro(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&Ms(u)}break e;case"textarea":eh(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Oa(r,!!o.multiple,i,!1)}}}var No=!1;function ka(r,i,o){if(No)return r(i,o);No=!0;try{var u=r(i);return u}finally{if(No=!1,(Va!==null||Ni!==null)&&(Qh(),Va&&(i=Va,r=Ni,Ni=Va=null,Vs(i),r)))for(i=0;i<r.length;i++)Vs(r[i])}}function hi(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Ie]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ks=!1;if(qr)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){ks=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{ks=!1}var Di=null,su=null,Ls=null;function ou(){if(Ls)return Ls;var r,i=su,o=i.length,u,f="value"in Di?Di.value:Di.textContent,p=f.length;for(r=0;r<o&&i[r]===f[r];r++);var v=o-r;for(u=1;u<=v&&i[o-u]===f[p-u];u++);return Ls=f.slice(r,1<u?1-u:void 0)}function js(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Wi(){return!0}function fi(){return!1}function Hn(r){function i(o,u,f,p,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(o=r[C],this[C]=o?o(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Wi:fi,this.isPropagationStopped=fi,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),i}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=Hn(Ji),La=E({},Ji,{view:0,detail:0}),lu=Hn(La),ja,Do,Mi,Oo=E({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Mi&&(Mi&&r.type==="mousemove"?(ja=r.screenX-Mi.screenX,Do=r.screenY-Mi.screenY):Do=ja=0,Mi=r),ja)},movementY:function(r){return"movementY"in r?r.movementY:Do}}),uu=Hn(Oo),Us=E({},Oo,{dataTransfer:0}),rh=Hn(Us),ih=E({},La,{relatedTarget:0}),zs=Hn(ih),cu=E({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),ah=Hn(cu),Mo=E({},Ji,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),sh=Hn(Mo),oh=E({},Ji,{data:0}),Pi=Hn(oh),lh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hh(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=ch[r])?!!i[r]:!1}function Ua(){return hh}var or=E({},La,{key:function(r){if(r.key){var i=lh[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=js(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?uh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(r){return r.type==="keypress"?js(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?js(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),fh=Hn(or),dh=E({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zi=Hn(dh),h=E({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),_=Hn(h),b=E({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Hn(b),W=E({},Oo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),re=Hn(W),Ce=E({},Ji,{newState:0,oldState:0}),tt=Hn(Ce),yn=[9,13,27,32],Nt=qr&&"CompositionEvent"in window,nn=null;qr&&"documentMode"in document&&(nn=document.documentMode);var Gr=qr&&"TextEvent"in window&&!nn,Vi=qr&&(!Nt||nn&&8<nn&&11>=nn),di=" ",mi=!1;function Bs(r,i){switch(r){case"keyup":return yn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Po(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Vo=!1;function jC(r,i){switch(r){case"compositionend":return Po(i);case"keypress":return i.which!==32?null:(mi=!0,di);case"textInput":return r=i.data,r===di&&mi?null:r;default:return null}}function UC(r,i){if(Vo)return r==="compositionend"||!Nt&&Bs(r,i)?(r=ou(),Ls=su=Di=null,Vo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Vi&&i.locale!=="ko"?null:i.data;default:return null}}var zC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G_(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!zC[r.type]:i==="textarea"}function $_(r,i,o,u){Va?Ni?Ni.push(u):Ni=[u]:Va=u,i=nf(i,"onChange"),0<i.length&&(o=new Oi("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var hu=null,fu=null;function BC(r){IT(r,0)}function mh(r){var i=Yt(r);if(Ms(i))return r}function K_(r,i){if(r==="change")return i}var Y_=!1;if(qr){var gm;if(qr){var ym="oninput"in document;if(!ym){var Q_=document.createElement("div");Q_.setAttribute("oninput","return;"),ym=typeof Q_.oninput=="function"}gm=ym}else gm=!1;Y_=gm&&(!document.documentMode||9<document.documentMode)}function X_(){hu&&(hu.detachEvent("onpropertychange",W_),fu=hu=null)}function W_(r){if(r.propertyName==="value"&&mh(fu)){var i=[];$_(i,fu,r,Fr(r)),ka(BC,i)}}function HC(r,i,o){r==="focusin"?(X_(),hu=i,fu=o,hu.attachEvent("onpropertychange",W_)):r==="focusout"&&X_()}function FC(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return mh(fu)}function qC(r,i){if(r==="click")return mh(i)}function GC(r,i){if(r==="input"||r==="change")return mh(i)}function $C(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Ir=typeof Object.is=="function"?Object.is:$C;function du(r,i){if(Ir(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Pt.call(i,f)||!Ir(r[f],i[f]))return!1}return!0}function J_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Z_(r,i){var o=J_(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=J_(o)}}function ev(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?ev(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function tv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=xi(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=xi(r.document)}return i}function _m(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var KC=qr&&"documentMode"in document&&11>=document.documentMode,ko=null,vm=null,mu=null,Em=!1;function nv(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Em||ko==null||ko!==xi(u)||(u=ko,"selectionStart"in u&&_m(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),mu&&du(mu,u)||(mu=u,u=nf(vm,"onSelect"),0<u.length&&(i=new Oi("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=ko)))}function Hs(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Lo={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionrun:Hs("Transition","TransitionRun"),transitionstart:Hs("Transition","TransitionStart"),transitioncancel:Hs("Transition","TransitionCancel"),transitionend:Hs("Transition","TransitionEnd")},Tm={},rv={};qr&&(rv=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Fs(r){if(Tm[r])return Tm[r];if(!Lo[r])return r;var i=Lo[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in rv)return Tm[r]=i[o];return r}var iv=Fs("animationend"),av=Fs("animationiteration"),sv=Fs("animationstart"),YC=Fs("transitionrun"),QC=Fs("transitionstart"),XC=Fs("transitioncancel"),ov=Fs("transitionend"),lv=new Map,bm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bm.push("scrollEnd");function pi(r,i){lv.set(r,i),fr(i,[r])}var ph=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},$r=[],jo=0,Sm=0;function gh(){for(var r=jo,i=Sm=jo=0;i<r;){var o=$r[i];$r[i++]=null;var u=$r[i];$r[i++]=null;var f=$r[i];$r[i++]=null;var p=$r[i];if($r[i++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}p!==0&&uv(o,f,p)}}function yh(r,i,o,u){$r[jo++]=r,$r[jo++]=i,$r[jo++]=o,$r[jo++]=u,Sm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Am(r,i,o,u){return yh(r,i,o,u),_h(r)}function qs(r,i){return yh(r,null,null,i),_h(r)}function uv(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(f=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,f&&i!==null&&(f=31-Fe(o),r=p.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=o|536870912),p):null}function _h(r){if(50<ku)throw ku=0,Mp=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Uo={};function WC(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(r,i,o,u){return new WC(r,i,o,u)}function wm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ea(r,i){var o=r.alternate;return o===null?(o=xr(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function cv(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function vh(r,i,o,u,f,p){var v=0;if(u=r,typeof r=="function")wm(r)&&(v=1);else if(typeof r=="string")v=nI(r,o,oe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case x:return r=xr(31,o,i,f),r.elementType=x,r.lanes=p,r;case q:return Gs(o.children,f,p,i);case k:v=8,f|=24;break;case K:return r=xr(12,o,i,f|2),r.elementType=K,r.lanes=p,r;case ue:return r=xr(13,o,i,f),r.elementType=ue,r.lanes=p,r;case G:return r=xr(19,o,i,f),r.elementType=G,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case X:v=10;break e;case H:v=9;break e;case se:v=11;break e;case A:v=14;break e;case R:v=16,u=null;break e}v=29,o=Error(a(130,r===null?"null":typeof r,"")),u=null}return i=xr(v,o,i,f),i.elementType=r,i.type=u,i.lanes=p,i}function Gs(r,i,o,u){return r=xr(7,r,u,i),r.lanes=o,r}function Cm(r,i,o){return r=xr(6,r,null,i),r.lanes=o,r}function hv(r){var i=xr(18,null,null,0);return i.stateNode=r,i}function Rm(r,i,o){return i=xr(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var fv=new WeakMap;function Kr(r,i){if(typeof r=="object"&&r!==null){var o=fv.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Sr(i)},fv.set(r,i),i)}return{value:r,source:i,stack:Sr(i)}}var zo=[],Bo=0,Eh=null,pu=0,Yr=[],Qr=0,za=null,ki=1,Li="";function ta(r,i){zo[Bo++]=pu,zo[Bo++]=Eh,Eh=r,pu=i}function dv(r,i,o){Yr[Qr++]=ki,Yr[Qr++]=Li,Yr[Qr++]=za,za=r;var u=ki;r=Li;var f=32-Fe(u)-1;u&=~(1<<f),o+=1;var p=32-Fe(i)+f;if(30<p){var v=f-f%5;p=(u&(1<<v)-1).toString(32),u>>=v,f-=v,ki=1<<32-Fe(i)+f|o<<f|u,Li=p+r}else ki=1<<p|o<<f|u,Li=r}function Im(r){r.return!==null&&(ta(r,1),dv(r,1,0))}function xm(r){for(;r===Eh;)Eh=zo[--Bo],zo[Bo]=null,pu=zo[--Bo],zo[Bo]=null;for(;r===za;)za=Yr[--Qr],Yr[Qr]=null,Li=Yr[--Qr],Yr[Qr]=null,ki=Yr[--Qr],Yr[Qr]=null}function mv(r,i){Yr[Qr++]=ki,Yr[Qr++]=Li,Yr[Qr++]=za,ki=i.id,Li=i.overflow,za=r}var Fn=null,Jt=null,St=!1,Ba=null,Xr=!1,Nm=Error(a(519));function Ha(r){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gu(Kr(i,r)),Nm}function pv(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[Ae]=r,i[Ie]=u,o){case"dialog":gt("cancel",i),gt("close",i);break;case"iframe":case"object":case"embed":gt("load",i);break;case"video":case"audio":for(o=0;o<ju.length;o++)gt(ju[o],i);break;case"source":gt("error",i);break;case"img":case"image":case"link":gt("error",i),gt("load",i);break;case"details":gt("toggle",i);break;case"input":gt("invalid",i),Zc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":gt("invalid",i);break;case"textarea":gt("invalid",i),Ma(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||OT(i.textContent,o)?(u.popover!=null&&(gt("beforetoggle",i),gt("toggle",i)),u.onScroll!=null&&gt("scroll",i),u.onScrollEnd!=null&&gt("scrollend",i),u.onClick!=null&&(i.onclick=ci),i=!0):i=!1,i||Ha(r,!0)}function gv(r){for(Fn=r.return;Fn;)switch(Fn.tag){case 5:case 31:case 13:Xr=!1;return;case 27:case 3:Xr=!0;return;default:Fn=Fn.return}}function Ho(r){if(r!==Fn)return!1;if(!St)return gv(r),St=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Yp(r.type,r.memoizedProps)),o=!o),o&&Jt&&Ha(r),gv(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Jt=BT(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Jt=BT(r)}else i===27?(i=Jt,ns(r.type)?(r=Zp,Zp=null,Jt=r):Jt=i):Jt=Fn?Jr(r.stateNode.nextSibling):null;return!0}function $s(){Jt=Fn=null,St=!1}function Dm(){var r=Ba;return r!==null&&(_r===null?_r=r:_r.push.apply(_r,r),Ba=null),r}function gu(r){Ba===null?Ba=[r]:Ba.push(r)}var Om=U(null),Ks=null,na=null;function Fa(r,i,o){Te(Om,i._currentValue),i._currentValue=o}function ra(r){r._currentValue=Om.current,ie(Om)}function Mm(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function Pm(r,i,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var p=f.dependencies;if(p!==null){var v=f.child;p=p.firstContext;e:for(;p!==null;){var C=p;p=f;for(var j=0;j<i.length;j++)if(C.context===i[j]){p.lanes|=o,C=p.alternate,C!==null&&(C.lanes|=o),Mm(p.return,o,r),u||(v=null);break e}p=C.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(a(341));v.lanes|=o,p=v.alternate,p!==null&&(p.lanes|=o),Mm(v,o,r),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===r){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Fo(r,i,o,u){r=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var C=f.type;Ir(f.pendingProps.value,v.value)||(r!==null?r.push(C):r=[C])}}else if(f===Ne.current){if(v=f.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Fu):r=[Fu])}f=f.return}r!==null&&Pm(i,r,o,u),i.flags|=262144}function Th(r){for(r=r.firstContext;r!==null;){if(!Ir(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ys(r){Ks=r,na=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function qn(r){return yv(Ks,r)}function bh(r,i){return Ks===null&&Ys(r),yv(r,i)}function yv(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},na===null){if(r===null)throw Error(a(308));na=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else na=na.next=i;return o}var JC=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},ZC=n.unstable_scheduleCallback,eR=n.unstable_NormalPriority,bn={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vm(){return{controller:new JC,data:new Map,refCount:0}}function yu(r){r.refCount--,r.refCount===0&&ZC(eR,function(){r.controller.abort()})}var _u=null,km=0,qo=0,Go=null;function tR(r,i){if(_u===null){var o=_u=[];km=0,qo=Up(),Go={status:"pending",value:void 0,then:function(u){o.push(u)}}}return km++,i.then(_v,_v),i}function _v(){if(--km===0&&_u!==null){Go!==null&&(Go.status="fulfilled");var r=_u;_u=null,qo=0,Go=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function nR(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var vv=z.S;z.S=function(r,i){nT=qt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&tR(r,i),vv!==null&&vv(r,i)};var Qs=U(null);function Lm(){var r=Qs.current;return r!==null?r:Gt.pooledCache}function Sh(r,i){i===null?Te(Qs,Qs.current):Te(Qs,i.pool)}function Ev(){var r=Lm();return r===null?null:{parent:bn._currentValue,pool:r}}var $o=Error(a(460)),jm=Error(a(474)),Ah=Error(a(542)),wh={then:function(){}};function Tv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function bv(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(ci,ci),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Av(r),r;default:if(typeof i.status=="string")i.then(ci,ci);else{if(r=Gt,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Av(r),r}throw Ws=i,$o}}function Xs(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ws=o,$o):o}}var Ws=null;function Sv(){if(Ws===null)throw Error(a(459));var r=Ws;return Ws=null,r}function Av(r){if(r===$o||r===Ah)throw Error(a(483))}var Ko=null,vu=0;function Ch(r){var i=vu;return vu+=1,Ko===null&&(Ko=[]),bv(Ko,r,i)}function Eu(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Rh(r,i){throw i.$$typeof===S?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function wv(r){function i(Y,B){if(r){var J=Y.deletions;J===null?(Y.deletions=[B],Y.flags|=16):J.push(B)}}function o(Y,B){if(!r)return null;for(;B!==null;)i(Y,B),B=B.sibling;return null}function u(Y){for(var B=new Map;Y!==null;)Y.key!==null?B.set(Y.key,Y):B.set(Y.index,Y),Y=Y.sibling;return B}function f(Y,B){return Y=ea(Y,B),Y.index=0,Y.sibling=null,Y}function p(Y,B,J){return Y.index=J,r?(J=Y.alternate,J!==null?(J=J.index,J<B?(Y.flags|=67108866,B):J):(Y.flags|=67108866,B)):(Y.flags|=1048576,B)}function v(Y){return r&&Y.alternate===null&&(Y.flags|=67108866),Y}function C(Y,B,J,fe){return B===null||B.tag!==6?(B=Cm(J,Y.mode,fe),B.return=Y,B):(B=f(B,J),B.return=Y,B)}function j(Y,B,J,fe){var qe=J.type;return qe===q?le(Y,B,J.props.children,fe,J.key):B!==null&&(B.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===R&&Xs(qe)===B.type)?(B=f(B,J.props),Eu(B,J),B.return=Y,B):(B=vh(J.type,J.key,J.props,null,Y.mode,fe),Eu(B,J),B.return=Y,B)}function Z(Y,B,J,fe){return B===null||B.tag!==4||B.stateNode.containerInfo!==J.containerInfo||B.stateNode.implementation!==J.implementation?(B=Rm(J,Y.mode,fe),B.return=Y,B):(B=f(B,J.children||[]),B.return=Y,B)}function le(Y,B,J,fe,qe){return B===null||B.tag!==7?(B=Gs(J,Y.mode,fe,qe),B.return=Y,B):(B=f(B,J),B.return=Y,B)}function pe(Y,B,J){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Cm(""+B,Y.mode,J),B.return=Y,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return J=vh(B.type,B.key,B.props,null,Y.mode,J),Eu(J,B),J.return=Y,J;case O:return B=Rm(B,Y.mode,J),B.return=Y,B;case R:return B=Xs(B),pe(Y,B,J)}if(ye(B)||V(B))return B=Gs(B,Y.mode,J,null),B.return=Y,B;if(typeof B.then=="function")return pe(Y,Ch(B),J);if(B.$$typeof===X)return pe(Y,bh(Y,B),J);Rh(Y,B)}return null}function te(Y,B,J,fe){var qe=B!==null?B.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return qe!==null?null:C(Y,B,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return J.key===qe?j(Y,B,J,fe):null;case O:return J.key===qe?Z(Y,B,J,fe):null;case R:return J=Xs(J),te(Y,B,J,fe)}if(ye(J)||V(J))return qe!==null?null:le(Y,B,J,fe,null);if(typeof J.then=="function")return te(Y,B,Ch(J),fe);if(J.$$typeof===X)return te(Y,B,bh(Y,J),fe);Rh(Y,J)}return null}function ae(Y,B,J,fe,qe){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Y=Y.get(J)||null,C(B,Y,""+fe,qe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case w:return Y=Y.get(fe.key===null?J:fe.key)||null,j(B,Y,fe,qe);case O:return Y=Y.get(fe.key===null?J:fe.key)||null,Z(B,Y,fe,qe);case R:return fe=Xs(fe),ae(Y,B,J,fe,qe)}if(ye(fe)||V(fe))return Y=Y.get(J)||null,le(B,Y,fe,qe,null);if(typeof fe.then=="function")return ae(Y,B,J,Ch(fe),qe);if(fe.$$typeof===X)return ae(Y,B,J,bh(B,fe),qe);Rh(B,fe)}return null}function je(Y,B,J,fe){for(var qe=null,Rt=null,ze=B,at=B=0,vt=null;ze!==null&&at<J.length;at++){ze.index>at?(vt=ze,ze=null):vt=ze.sibling;var It=te(Y,ze,J[at],fe);if(It===null){ze===null&&(ze=vt);break}r&&ze&&It.alternate===null&&i(Y,ze),B=p(It,B,at),Rt===null?qe=It:Rt.sibling=It,Rt=It,ze=vt}if(at===J.length)return o(Y,ze),St&&ta(Y,at),qe;if(ze===null){for(;at<J.length;at++)ze=pe(Y,J[at],fe),ze!==null&&(B=p(ze,B,at),Rt===null?qe=ze:Rt.sibling=ze,Rt=ze);return St&&ta(Y,at),qe}for(ze=u(ze);at<J.length;at++)vt=ae(ze,Y,at,J[at],fe),vt!==null&&(r&&vt.alternate!==null&&ze.delete(vt.key===null?at:vt.key),B=p(vt,B,at),Rt===null?qe=vt:Rt.sibling=vt,Rt=vt);return r&&ze.forEach(function(os){return i(Y,os)}),St&&ta(Y,at),qe}function Ke(Y,B,J,fe){if(J==null)throw Error(a(151));for(var qe=null,Rt=null,ze=B,at=B=0,vt=null,It=J.next();ze!==null&&!It.done;at++,It=J.next()){ze.index>at?(vt=ze,ze=null):vt=ze.sibling;var os=te(Y,ze,It.value,fe);if(os===null){ze===null&&(ze=vt);break}r&&ze&&os.alternate===null&&i(Y,ze),B=p(os,B,at),Rt===null?qe=os:Rt.sibling=os,Rt=os,ze=vt}if(It.done)return o(Y,ze),St&&ta(Y,at),qe;if(ze===null){for(;!It.done;at++,It=J.next())It=pe(Y,It.value,fe),It!==null&&(B=p(It,B,at),Rt===null?qe=It:Rt.sibling=It,Rt=It);return St&&ta(Y,at),qe}for(ze=u(ze);!It.done;at++,It=J.next())It=ae(ze,Y,at,It.value,fe),It!==null&&(r&&It.alternate!==null&&ze.delete(It.key===null?at:It.key),B=p(It,B,at),Rt===null?qe=It:Rt.sibling=It,Rt=It);return r&&ze.forEach(function(dI){return i(Y,dI)}),St&&ta(Y,at),qe}function Ft(Y,B,J,fe){if(typeof J=="object"&&J!==null&&J.type===q&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case w:e:{for(var qe=J.key;B!==null;){if(B.key===qe){if(qe=J.type,qe===q){if(B.tag===7){o(Y,B.sibling),fe=f(B,J.props.children),fe.return=Y,Y=fe;break e}}else if(B.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===R&&Xs(qe)===B.type){o(Y,B.sibling),fe=f(B,J.props),Eu(fe,J),fe.return=Y,Y=fe;break e}o(Y,B);break}else i(Y,B);B=B.sibling}J.type===q?(fe=Gs(J.props.children,Y.mode,fe,J.key),fe.return=Y,Y=fe):(fe=vh(J.type,J.key,J.props,null,Y.mode,fe),Eu(fe,J),fe.return=Y,Y=fe)}return v(Y);case O:e:{for(qe=J.key;B!==null;){if(B.key===qe)if(B.tag===4&&B.stateNode.containerInfo===J.containerInfo&&B.stateNode.implementation===J.implementation){o(Y,B.sibling),fe=f(B,J.children||[]),fe.return=Y,Y=fe;break e}else{o(Y,B);break}else i(Y,B);B=B.sibling}fe=Rm(J,Y.mode,fe),fe.return=Y,Y=fe}return v(Y);case R:return J=Xs(J),Ft(Y,B,J,fe)}if(ye(J))return je(Y,B,J,fe);if(V(J)){if(qe=V(J),typeof qe!="function")throw Error(a(150));return J=qe.call(J),Ke(Y,B,J,fe)}if(typeof J.then=="function")return Ft(Y,B,Ch(J),fe);if(J.$$typeof===X)return Ft(Y,B,bh(Y,J),fe);Rh(Y,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,B!==null&&B.tag===6?(o(Y,B.sibling),fe=f(B,J),fe.return=Y,Y=fe):(o(Y,B),fe=Cm(J,Y.mode,fe),fe.return=Y,Y=fe),v(Y)):o(Y,B)}return function(Y,B,J,fe){try{vu=0;var qe=Ft(Y,B,J,fe);return Ko=null,qe}catch(ze){if(ze===$o||ze===Ah)throw ze;var Rt=xr(29,ze,null,Y.mode);return Rt.lanes=fe,Rt.return=Y,Rt}finally{}}}var Js=wv(!0),Cv=wv(!1),qa=!1;function Um(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ga(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function $a(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Dt&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=_h(r),uv(r,null,o),i}return yh(r,u,i,o),_h(r)}function Tu(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,L(r,o)}}function Bm(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?f=p=i:p=p.next=i}else f=p=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var Hm=!1;function bu(){if(Hm){var r=Go;if(r!==null)throw r}}function Su(r,i,o,u){Hm=!1;var f=r.updateQueue;qa=!1;var p=f.firstBaseUpdate,v=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var j=C,Z=j.next;j.next=null,v===null?p=Z:v.next=Z,v=j;var le=r.alternate;le!==null&&(le=le.updateQueue,C=le.lastBaseUpdate,C!==v&&(C===null?le.firstBaseUpdate=Z:C.next=Z,le.lastBaseUpdate=j))}if(p!==null){var pe=f.baseState;v=0,le=Z=j=null,C=p;do{var te=C.lane&-536870913,ae=te!==C.lane;if(ae?(_t&te)===te:(u&te)===te){te!==0&&te===qo&&(Hm=!0),le!==null&&(le=le.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var je=r,Ke=C;te=i;var Ft=o;switch(Ke.tag){case 1:if(je=Ke.payload,typeof je=="function"){pe=je.call(Ft,pe,te);break e}pe=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Ke.payload,te=typeof je=="function"?je.call(Ft,pe,te):je,te==null)break e;pe=E({},pe,te);break e;case 2:qa=!0}}te=C.callback,te!==null&&(r.flags|=64,ae&&(r.flags|=8192),ae=f.callbacks,ae===null?f.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:C.tag,payload:C.payload,callback:C.callback,next:null},le===null?(Z=le=ae,j=pe):le=le.next=ae,v|=te;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;ae=C,C=ae.next,ae.next=null,f.lastBaseUpdate=ae,f.shared.pending=null}}while(!0);le===null&&(j=pe),f.baseState=j,f.firstBaseUpdate=Z,f.lastBaseUpdate=le,p===null&&(f.shared.lanes=0),Wa|=v,r.lanes=v,r.memoizedState=pe}}function Rv(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function Iv(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Rv(o[r],i)}var Yo=U(null),Ih=U(0);function xv(r,i){r=fa,Te(Ih,r),Te(Yo,i),fa=r|i.baseLanes}function Fm(){Te(Ih,fa),Te(Yo,Yo.current)}function qm(){fa=Ih.current,ie(Yo),ie(Ih)}var Nr=U(null),Wr=null;function Ka(r){var i=r.alternate;Te(_n,_n.current&1),Te(Nr,r),Wr===null&&(i===null||Yo.current!==null||i.memoizedState!==null)&&(Wr=r)}function Gm(r){Te(_n,_n.current),Te(Nr,r),Wr===null&&(Wr=r)}function Nv(r){r.tag===22?(Te(_n,_n.current),Te(Nr,r),Wr===null&&(Wr=r)):Ya()}function Ya(){Te(_n,_n.current),Te(Nr,Nr.current)}function Dr(r){ie(Nr),Wr===r&&(Wr=null),ie(_n)}var _n=U(0);function xh(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Wp(o)||Jp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ia=0,nt=null,Bt=null,Sn=null,Nh=!1,Qo=!1,Zs=!1,Dh=0,Au=0,Xo=null,rR=0;function dn(){throw Error(a(321))}function $m(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!Ir(r[o],i[o]))return!1;return!0}function Km(r,i,o,u,f,p){return ia=p,nt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,z.H=r===null||r.memoizedState===null?dE:lp,Zs=!1,p=o(u,f),Zs=!1,Qo&&(p=Ov(i,o,u,f)),Dv(r),p}function Dv(r){z.H=Ru;var i=Bt!==null&&Bt.next!==null;if(ia=0,Sn=Bt=nt=null,Nh=!1,Au=0,Xo=null,i)throw Error(a(300));r===null||An||(r=r.dependencies,r!==null&&Th(r)&&(An=!0))}function Ov(r,i,o,u){nt=r;var f=0;do{if(Qo&&(Xo=null),Au=0,Qo=!1,25<=f)throw Error(a(301));if(f+=1,Sn=Bt=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}z.H=mE,p=i(o,u)}while(Qo);return p}function iR(){var r=z.H,i=r.useState()[0];return i=typeof i.then=="function"?wu(i):i,r=r.useState()[0],(Bt!==null?Bt.memoizedState:null)!==r&&(nt.flags|=1024),i}function Ym(){var r=Dh!==0;return Dh=0,r}function Qm(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Xm(r){if(Nh){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Nh=!1}ia=0,Sn=Bt=nt=null,Qo=!1,Au=Dh=0,Xo=null}function lr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?nt.memoizedState=Sn=r:Sn=Sn.next=r,Sn}function vn(){if(Bt===null){var r=nt.alternate;r=r!==null?r.memoizedState:null}else r=Bt.next;var i=Sn===null?nt.memoizedState:Sn.next;if(i!==null)Sn=i,Bt=r;else{if(r===null)throw nt.alternate===null?Error(a(467)):Error(a(310));Bt=r,r={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Sn===null?nt.memoizedState=Sn=r:Sn=Sn.next=r}return Sn}function Oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wu(r){var i=Au;return Au+=1,Xo===null&&(Xo=[]),r=bv(Xo,r,i),i=nt,(Sn===null?i.memoizedState:Sn.next)===null&&(i=i.alternate,z.H=i===null||i.memoizedState===null?dE:lp),r}function Mh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return wu(r);if(r.$$typeof===X)return qn(r)}throw Error(a(438,String(r)))}function Wm(r){var i=null,o=nt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=nt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Oh(),nt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=N;return i.index++,o}function aa(r,i){return typeof i=="function"?i(r):i}function Ph(r){var i=vn();return Jm(i,Bt,r)}function Jm(r,i,o){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var f=r.baseQueue,p=u.pending;if(p!==null){if(f!==null){var v=f.next;f.next=p.next,p.next=v}i.baseQueue=f=p,u.pending=null}if(p=r.baseState,f===null)r.memoizedState=p;else{i=f.next;var C=v=null,j=null,Z=i,le=!1;do{var pe=Z.lane&-536870913;if(pe!==Z.lane?(_t&pe)===pe:(ia&pe)===pe){var te=Z.revertLane;if(te===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),pe===qo&&(le=!0);else if((ia&te)===te){Z=Z.next,te===qo&&(le=!0);continue}else pe={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},j===null?(C=j=pe,v=p):j=j.next=pe,nt.lanes|=te,Wa|=te;pe=Z.action,Zs&&o(p,pe),p=Z.hasEagerState?Z.eagerState:o(p,pe)}else te={lane:pe,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},j===null?(C=j=te,v=p):j=j.next=te,nt.lanes|=pe,Wa|=pe;Z=Z.next}while(Z!==null&&Z!==i);if(j===null?v=p:j.next=C,!Ir(p,r.memoizedState)&&(An=!0,le&&(o=Go,o!==null)))throw o;r.memoizedState=p,r.baseState=v,r.baseQueue=j,u.lastRenderedState=p}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Zm(r){var i=vn(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,p=i.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do p=r(p,v.action),v=v.next;while(v!==f);Ir(p,i.memoizedState)||(An=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,u]}function Mv(r,i,o){var u=nt,f=vn(),p=St;if(p){if(o===void 0)throw Error(a(407));o=o()}else o=i();var v=!Ir((Bt||f).memoizedState,o);if(v&&(f.memoizedState=o,An=!0),f=f.queue,np(kv.bind(null,u,f,r),[r]),f.getSnapshot!==i||v||Sn!==null&&Sn.memoizedState.tag&1){if(u.flags|=2048,Wo(9,{destroy:void 0},Vv.bind(null,u,f,o,i),null),Gt===null)throw Error(a(349));p||(ia&127)!==0||Pv(u,i,o)}return o}function Pv(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=nt.updateQueue,i===null?(i=Oh(),nt.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function Vv(r,i,o,u){i.value=o,i.getSnapshot=u,Lv(i)&&jv(r)}function kv(r,i,o){return o(function(){Lv(i)&&jv(r)})}function Lv(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!Ir(r,o)}catch{return!0}}function jv(r){var i=qs(r,2);i!==null&&vr(i,r,2)}function ep(r){var i=lr();if(typeof r=="function"){var o=r;if(r=o(),Zs){mt(!0);try{o()}finally{mt(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:r},i}function Uv(r,i,o,u){return r.baseState=o,Jm(r,Bt,typeof u=="function"?u:aa)}function aR(r,i,o,u,f){if(Lh(r))throw Error(a(485));if(r=i.action,r!==null){var p={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};z.T!==null?o(!0):p.isTransition=!1,u(p),o=i.pending,o===null?(p.next=i.pending=p,zv(i,p)):(p.next=o.next,i.pending=o.next=p)}}function zv(r,i){var o=i.action,u=i.payload,f=r.state;if(i.isTransition){var p=z.T,v={};z.T=v;try{var C=o(f,u),j=z.S;j!==null&&j(v,C),Bv(r,i,C)}catch(Z){tp(r,i,Z)}finally{p!==null&&v.types!==null&&(p.types=v.types),z.T=p}}else try{p=o(f,u),Bv(r,i,p)}catch(Z){tp(r,i,Z)}}function Bv(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Hv(r,i,u)},function(u){return tp(r,i,u)}):Hv(r,i,o)}function Hv(r,i,o){i.status="fulfilled",i.value=o,Fv(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,zv(r,o)))}function tp(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Fv(i),i=i.next;while(i!==u)}r.action=null}function Fv(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function qv(r,i){return i}function Gv(r,i){if(St){var o=Gt.formState;if(o!==null){e:{var u=nt;if(St){if(Jt){t:{for(var f=Jt,p=Xr;f.nodeType!==8;){if(!p){f=null;break t}if(f=Jr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Jt=Jr(f.nextSibling),u=f.data==="F!";break e}}Ha(u)}u=!1}u&&(i=o[0])}}return o=lr(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qv,lastRenderedState:i},o.queue=u,o=cE.bind(null,nt,u),u.dispatch=o,u=ep(!1),p=op.bind(null,nt,!1,u.queue),u=lr(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,o=aR.bind(null,nt,f,p,o),f.dispatch=o,u.memoizedState=r,[i,o,!1]}function $v(r){var i=vn();return Kv(i,Bt,r)}function Kv(r,i,o){if(i=Jm(r,i,qv)[0],r=Ph(aa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=wu(i)}catch(v){throw v===$o?Ah:v}else u=i;i=vn();var f=i.queue,p=f.dispatch;return o!==i.memoizedState&&(nt.flags|=2048,Wo(9,{destroy:void 0},sR.bind(null,f,o),null)),[u,p,r]}function sR(r,i){r.action=i}function Yv(r){var i=vn(),o=Bt;if(o!==null)return Kv(i,o,r);vn(),i=i.memoizedState,o=vn();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function Wo(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=nt.updateQueue,i===null&&(i=Oh(),nt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function Qv(){return vn().memoizedState}function Vh(r,i,o,u){var f=lr();nt.flags|=r,f.memoizedState=Wo(1|i,{destroy:void 0},o,u===void 0?null:u)}function kh(r,i,o,u){var f=vn();u=u===void 0?null:u;var p=f.memoizedState.inst;Bt!==null&&u!==null&&$m(u,Bt.memoizedState.deps)?f.memoizedState=Wo(i,p,o,u):(nt.flags|=r,f.memoizedState=Wo(1|i,p,o,u))}function Xv(r,i){Vh(8390656,8,r,i)}function np(r,i){kh(2048,8,r,i)}function oR(r){nt.flags|=4;var i=nt.updateQueue;if(i===null)i=Oh(),nt.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function Wv(r){var i=vn().memoizedState;return oR({ref:i,nextImpl:r}),function(){if((Dt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Jv(r,i){return kh(4,2,r,i)}function Zv(r,i){return kh(4,4,r,i)}function eE(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function tE(r,i,o){o=o!=null?o.concat([r]):null,kh(4,4,eE.bind(null,i,r),o)}function rp(){}function nE(r,i){var o=vn();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&$m(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function rE(r,i){var o=vn();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&$m(i,u[1]))return u[0];if(u=r(),Zs){mt(!0);try{r()}finally{mt(!1)}}return o.memoizedState=[u,i],u}function ip(r,i,o){return o===void 0||(ia&1073741824)!==0&&(_t&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=iT(),nt.lanes|=r,Wa|=r,o)}function iE(r,i,o,u){return Ir(o,i)?o:Yo.current!==null?(r=ip(r,o,u),Ir(r,i)||(An=!0),r):(ia&42)===0||(ia&1073741824)!==0&&(_t&261930)===0?(An=!0,r.memoizedState=o):(r=iT(),nt.lanes|=r,Wa|=r,i)}function aE(r,i,o,u,f){var p=ne.p;ne.p=p!==0&&8>p?p:8;var v=z.T,C={};z.T=C,op(r,!1,i,o);try{var j=f(),Z=z.S;if(Z!==null&&Z(C,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var le=nR(j,u);Cu(r,i,le,Pr(r))}else Cu(r,i,u,Pr(r))}catch(pe){Cu(r,i,{then:function(){},status:"rejected",reason:pe},Pr())}finally{ne.p=p,v!==null&&C.types!==null&&(v.types=C.types),z.T=v}}function lR(){}function ap(r,i,o,u){if(r.tag!==5)throw Error(a(476));var f=sE(r).queue;aE(r,f,i,ce,o===null?lR:function(){return oE(r),o(u)})}function sE(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:ce},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function oE(r){var i=sE(r);i.next===null&&(i=r.alternate.memoizedState),Cu(r,i.next.queue,{},Pr())}function sp(){return qn(Fu)}function lE(){return vn().memoizedState}function uE(){return vn().memoizedState}function uR(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Pr();r=Ga(o);var u=$a(i,r,o);u!==null&&(vr(u,i,o),Tu(u,i,o)),i={cache:Vm()},r.payload=i;return}i=i.return}}function cR(r,i,o){var u=Pr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Lh(r)?hE(i,o):(o=Am(r,i,o,u),o!==null&&(vr(o,r,u),fE(o,i,u)))}function cE(r,i,o){var u=Pr();Cu(r,i,o,u)}function Cu(r,i,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Lh(r))hE(i,f);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,C=p(v,o);if(f.hasEagerState=!0,f.eagerState=C,Ir(C,v))return yh(r,i,f,0),Gt===null&&gh(),!1}catch{}finally{}if(o=Am(r,i,f,u),o!==null)return vr(o,r,u),fE(o,i,u),!0}return!1}function op(r,i,o,u){if(u={lane:2,revertLane:Up(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Lh(r)){if(i)throw Error(a(479))}else i=Am(r,o,u,2),i!==null&&vr(i,r,2)}function Lh(r){var i=r.alternate;return r===nt||i!==null&&i===nt}function hE(r,i){Qo=Nh=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function fE(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,L(r,o)}}var Ru={readContext:qn,use:Mh,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn,useHostTransitionStatus:dn,useFormState:dn,useActionState:dn,useOptimistic:dn,useMemoCache:dn,useCacheRefresh:dn};Ru.useEffectEvent=dn;var dE={readContext:qn,use:Mh,useCallback:function(r,i){return lr().memoizedState=[r,i===void 0?null:i],r},useContext:qn,useEffect:Xv,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Vh(4194308,4,eE.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Vh(4194308,4,r,i)},useInsertionEffect:function(r,i){Vh(4,2,r,i)},useMemo:function(r,i){var o=lr();i=i===void 0?null:i;var u=r();if(Zs){mt(!0);try{r()}finally{mt(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=lr();if(o!==void 0){var f=o(i);if(Zs){mt(!0);try{o(i)}finally{mt(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=cR.bind(null,nt,r),[u.memoizedState,r]},useRef:function(r){var i=lr();return r={current:r},i.memoizedState=r},useState:function(r){r=ep(r);var i=r.queue,o=cE.bind(null,nt,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:rp,useDeferredValue:function(r,i){var o=lr();return ip(o,r,i)},useTransition:function(){var r=ep(!1);return r=aE.bind(null,nt,r.queue,!0,!1),lr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=nt,f=lr();if(St){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),Gt===null)throw Error(a(349));(_t&127)!==0||Pv(u,i,o)}f.memoizedState=o;var p={value:o,getSnapshot:i};return f.queue=p,Xv(kv.bind(null,u,p,r),[r]),u.flags|=2048,Wo(9,{destroy:void 0},Vv.bind(null,u,p,o,i),null),o},useId:function(){var r=lr(),i=Gt.identifierPrefix;if(St){var o=Li,u=ki;o=(u&~(1<<32-Fe(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Dh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=rR++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:sp,useFormState:Gv,useActionState:Gv,useOptimistic:function(r){var i=lr();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=op.bind(null,nt,!0,o),o.dispatch=i,[r,i]},useMemoCache:Wm,useCacheRefresh:function(){return lr().memoizedState=uR.bind(null,nt)},useEffectEvent:function(r){var i=lr(),o={impl:r};return i.memoizedState=o,function(){if((Dt&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},lp={readContext:qn,use:Mh,useCallback:nE,useContext:qn,useEffect:np,useImperativeHandle:tE,useInsertionEffect:Jv,useLayoutEffect:Zv,useMemo:rE,useReducer:Ph,useRef:Qv,useState:function(){return Ph(aa)},useDebugValue:rp,useDeferredValue:function(r,i){var o=vn();return iE(o,Bt.memoizedState,r,i)},useTransition:function(){var r=Ph(aa)[0],i=vn().memoizedState;return[typeof r=="boolean"?r:wu(r),i]},useSyncExternalStore:Mv,useId:lE,useHostTransitionStatus:sp,useFormState:$v,useActionState:$v,useOptimistic:function(r,i){var o=vn();return Uv(o,Bt,r,i)},useMemoCache:Wm,useCacheRefresh:uE};lp.useEffectEvent=Wv;var mE={readContext:qn,use:Mh,useCallback:nE,useContext:qn,useEffect:np,useImperativeHandle:tE,useInsertionEffect:Jv,useLayoutEffect:Zv,useMemo:rE,useReducer:Zm,useRef:Qv,useState:function(){return Zm(aa)},useDebugValue:rp,useDeferredValue:function(r,i){var o=vn();return Bt===null?ip(o,r,i):iE(o,Bt.memoizedState,r,i)},useTransition:function(){var r=Zm(aa)[0],i=vn().memoizedState;return[typeof r=="boolean"?r:wu(r),i]},useSyncExternalStore:Mv,useId:lE,useHostTransitionStatus:sp,useFormState:Yv,useActionState:Yv,useOptimistic:function(r,i){var o=vn();return Bt!==null?Uv(o,Bt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Wm,useCacheRefresh:uE};mE.useEffectEvent=Wv;function up(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var cp={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Pr(),f=Ga(u);f.payload=i,o!=null&&(f.callback=o),i=$a(r,f,u),i!==null&&(vr(i,r,u),Tu(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Pr(),f=Ga(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=$a(r,f,u),i!==null&&(vr(i,r,u),Tu(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Pr(),u=Ga(o);u.tag=2,i!=null&&(u.callback=i),i=$a(r,u,o),i!==null&&(vr(i,r,o),Tu(i,r,o))}};function pE(r,i,o,u,f,p,v){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,v):i.prototype&&i.prototype.isPureReactComponent?!du(o,u)||!du(f,p):!0}function gE(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&cp.enqueueReplaceState(i,i.state,null)}function eo(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=E({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}function yE(r){ph(r)}function _E(r){console.error(r)}function vE(r){ph(r)}function jh(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function EE(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function hp(r,i,o){return o=Ga(o),o.tag=3,o.payload={element:null},o.callback=function(){jh(r,i)},o}function TE(r){return r=Ga(r),r.tag=3,r}function bE(r,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;r.payload=function(){return f(p)},r.callback=function(){EE(i,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(r.callback=function(){EE(i,o,u),typeof f!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function hR(r,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Fo(i,o,f,!0),o=Nr.current,o!==null){switch(o.tag){case 31:case 13:return Wr===null?Xh():o.alternate===null&&mn===0&&(mn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===wh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),kp(r,u,f)),!1;case 22:return o.flags|=65536,u===wh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),kp(r,u,f)),!1}throw Error(a(435,o.tag))}return kp(r,u,f),Xh(),!1}if(St)return i=Nr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Nm&&(r=Error(a(422),{cause:u}),gu(Kr(r,o)))):(u!==Nm&&(i=Error(a(423),{cause:u}),gu(Kr(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Kr(u,o),f=hp(r.stateNode,u,f),Bm(r,f),mn!==4&&(mn=2)),!1;var p=Error(a(520),{cause:u});if(p=Kr(p,o),Vu===null?Vu=[p]:Vu.push(p),mn!==4&&(mn=2),i===null)return!0;u=Kr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=hp(o.stateNode,u,r),Bm(o,r),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ja===null||!Ja.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=TE(f),bE(f,r,o,u),Bm(o,f),!1}o=o.return}while(o!==null);return!1}var fp=Error(a(461)),An=!1;function Gn(r,i,o,u){i.child=r===null?Cv(i,null,o,u):Js(i,r.child,o,u)}function SE(r,i,o,u,f){o=o.render;var p=i.ref;if("ref"in u){var v={};for(var C in u)C!=="ref"&&(v[C]=u[C])}else v=u;return Ys(i),u=Km(r,i,o,v,p,f),C=Ym(),r!==null&&!An?(Qm(r,i,f),sa(r,i,f)):(St&&C&&Im(i),i.flags|=1,Gn(r,i,u,f),i.child)}function AE(r,i,o,u,f){if(r===null){var p=o.type;return typeof p=="function"&&!wm(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,wE(r,i,p,u,f)):(r=vh(o.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(p=r.child,!Ep(r,f)){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:du,o(v,u)&&r.ref===i.ref)return sa(r,i,f)}return i.flags|=1,r=ea(p,u),r.ref=i.ref,r.return=i,i.child=r}function wE(r,i,o,u,f){if(r!==null){var p=r.memoizedProps;if(du(p,u)&&r.ref===i.ref)if(An=!1,i.pendingProps=u=p,Ep(r,f))(r.flags&131072)!==0&&(An=!0);else return i.lanes=r.lanes,sa(r,i,f)}return dp(r,i,o,u,f)}function CE(r,i,o,u){var f=u.children,p=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,r!==null){for(u=i.child=r.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~p}else u=0,i.child=null;return RE(r,i,p,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Sh(i,p!==null?p.cachePool:null),p!==null?xv(i,p):Fm(),Nv(i);else return u=i.lanes=536870912,RE(r,i,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(Sh(i,p.cachePool),xv(i,p),Ya(),i.memoizedState=null):(r!==null&&Sh(i,null),Fm(),Ya());return Gn(r,i,f,o),i.child}function Iu(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function RE(r,i,o,u,f){var p=Lm();return p=p===null?null:{parent:bn._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},r!==null&&Sh(i,null),Fm(),Nv(i),r!==null&&Fo(r,i,u,!0),i.childLanes=f,null}function Uh(r,i){return i=Bh({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function IE(r,i,o){return Js(i,r.child,null,o),r=Uh(i,i.pendingProps),r.flags|=2,Dr(i),i.memoizedState=null,r}function fR(r,i,o){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(St){if(u.mode==="hidden")return r=Uh(i,u),i.lanes=536870912,Iu(null,r);if(Gm(i),(r=Jt)?(r=zT(r,Xr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:za!==null?{id:ki,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},o=hv(r),o.return=i,i.child=o,Fn=i,Jt=null)):r=null,r===null)throw Ha(i);return i.lanes=536870912,null}return Uh(i,u)}var p=r.memoizedState;if(p!==null){var v=p.dehydrated;if(Gm(i),f)if(i.flags&256)i.flags&=-257,i=IE(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(a(558));else if(An||Fo(r,i,o,!1),f=(o&r.childLanes)!==0,An||f){if(u=Gt,u!==null&&(v=$(u,o),v!==0&&v!==p.retryLane))throw p.retryLane=v,qs(r,v),vr(u,r,v),fp;Xh(),i=IE(r,i,o)}else r=p.treeContext,Jt=Jr(v.nextSibling),Fn=i,St=!0,Ba=null,Xr=!1,r!==null&&mv(i,r),i=Uh(i,u),i.flags|=4096;return i}return r=ea(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function zh(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function dp(r,i,o,u,f){return Ys(i),o=Km(r,i,o,u,void 0,f),u=Ym(),r!==null&&!An?(Qm(r,i,f),sa(r,i,f)):(St&&u&&Im(i),i.flags|=1,Gn(r,i,o,f),i.child)}function xE(r,i,o,u,f,p){return Ys(i),i.updateQueue=null,o=Ov(i,u,o,f),Dv(r),u=Ym(),r!==null&&!An?(Qm(r,i,p),sa(r,i,p)):(St&&u&&Im(i),i.flags|=1,Gn(r,i,o,p),i.child)}function NE(r,i,o,u,f){if(Ys(i),i.stateNode===null){var p=Uo,v=o.contextType;typeof v=="object"&&v!==null&&(p=qn(v)),p=new o(u,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=cp,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=u,p.state=i.memoizedState,p.refs={},Um(i),v=o.contextType,p.context=typeof v=="object"&&v!==null?qn(v):Uo,p.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(up(i,o,v,u),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&cp.enqueueReplaceState(p,p.state,null),Su(i,u,p,f),bu(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){p=i.stateNode;var C=i.memoizedProps,j=eo(o,C);p.props=j;var Z=p.context,le=o.contextType;v=Uo,typeof le=="object"&&le!==null&&(v=qn(le));var pe=o.getDerivedStateFromProps;le=typeof pe=="function"||typeof p.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,le||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(C||Z!==v)&&gE(i,p,u,v),qa=!1;var te=i.memoizedState;p.state=te,Su(i,u,p,f),bu(),Z=i.memoizedState,C||te!==Z||qa?(typeof pe=="function"&&(up(i,o,pe,u),Z=i.memoizedState),(j=qa||pE(i,o,j,u,te,Z,v))?(le||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Z),p.props=u,p.state=Z,p.context=v,u=j):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{p=i.stateNode,zm(r,i),v=i.memoizedProps,le=eo(o,v),p.props=le,pe=i.pendingProps,te=p.context,Z=o.contextType,j=Uo,typeof Z=="object"&&Z!==null&&(j=qn(Z)),C=o.getDerivedStateFromProps,(Z=typeof C=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==pe||te!==j)&&gE(i,p,u,j),qa=!1,te=i.memoizedState,p.state=te,Su(i,u,p,f),bu();var ae=i.memoizedState;v!==pe||te!==ae||qa||r!==null&&r.dependencies!==null&&Th(r.dependencies)?(typeof C=="function"&&(up(i,o,C,u),ae=i.memoizedState),(le=qa||pE(i,o,le,u,te,ae,j)||r!==null&&r.dependencies!==null&&Th(r.dependencies))?(Z||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,ae,j),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,ae,j)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ae),p.props=u,p.state=ae,p.context=j,u=le):(typeof p.componentDidUpdate!="function"||v===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),u=!1)}return p=u,zh(r,i),u=(i.flags&128)!==0,p||u?(p=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,r!==null&&u?(i.child=Js(i,r.child,null,f),i.child=Js(i,null,o,f)):Gn(r,i,o,f),i.memoizedState=p.state,r=i.child):r=sa(r,i,f),r}function DE(r,i,o,u){return $s(),i.flags|=256,Gn(r,i,o,u),i.child}var mp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pp(r){return{baseLanes:r,cachePool:Ev()}}function gp(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=Mr),r}function OE(r,i,o){var u=i.pendingProps,f=!1,p=(i.flags&128)!==0,v;if((v=p)||(v=r!==null&&r.memoizedState===null?!1:(_n.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,r===null){if(St){if(f?Ka(i):Ya(),(r=Jt)?(r=zT(r,Xr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:za!==null?{id:ki,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},o=hv(r),o.return=i,i.child=o,Fn=i,Jt=null)):r=null,r===null)throw Ha(i);return Jp(r)?i.lanes=32:i.lanes=536870912,null}var C=u.children;return u=u.fallback,f?(Ya(),f=i.mode,C=Bh({mode:"hidden",children:C},f),u=Gs(u,f,o,null),C.return=i,u.return=i,C.sibling=u,i.child=C,u=i.child,u.memoizedState=pp(o),u.childLanes=gp(r,v,o),i.memoizedState=mp,Iu(null,u)):(Ka(i),yp(i,C))}var j=r.memoizedState;if(j!==null&&(C=j.dehydrated,C!==null)){if(p)i.flags&256?(Ka(i),i.flags&=-257,i=_p(r,i,o)):i.memoizedState!==null?(Ya(),i.child=r.child,i.flags|=128,i=null):(Ya(),C=u.fallback,f=i.mode,u=Bh({mode:"visible",children:u.children},f),C=Gs(C,f,o,null),C.flags|=2,u.return=i,C.return=i,u.sibling=C,i.child=u,Js(i,r.child,null,o),u=i.child,u.memoizedState=pp(o),u.childLanes=gp(r,v,o),i.memoizedState=mp,i=Iu(null,u));else if(Ka(i),Jp(C)){if(v=C.nextSibling&&C.nextSibling.dataset,v)var Z=v.dgst;v=Z,u=Error(a(419)),u.stack="",u.digest=v,gu({value:u,source:null,stack:null}),i=_p(r,i,o)}else if(An||Fo(r,i,o,!1),v=(o&r.childLanes)!==0,An||v){if(v=Gt,v!==null&&(u=$(v,o),u!==0&&u!==j.retryLane))throw j.retryLane=u,qs(r,u),vr(v,r,u),fp;Wp(C)||Xh(),i=_p(r,i,o)}else Wp(C)?(i.flags|=192,i.child=r.child,i=null):(r=j.treeContext,Jt=Jr(C.nextSibling),Fn=i,St=!0,Ba=null,Xr=!1,r!==null&&mv(i,r),i=yp(i,u.children),i.flags|=4096);return i}return f?(Ya(),C=u.fallback,f=i.mode,j=r.child,Z=j.sibling,u=ea(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&65011712,Z!==null?C=ea(Z,C):(C=Gs(C,f,o,null),C.flags|=2),C.return=i,u.return=i,u.sibling=C,i.child=u,Iu(null,u),u=i.child,C=r.child.memoizedState,C===null?C=pp(o):(f=C.cachePool,f!==null?(j=bn._currentValue,f=f.parent!==j?{parent:j,pool:j}:f):f=Ev(),C={baseLanes:C.baseLanes|o,cachePool:f}),u.memoizedState=C,u.childLanes=gp(r,v,o),i.memoizedState=mp,Iu(r.child,u)):(Ka(i),o=r.child,r=o.sibling,o=ea(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(v=i.deletions,v===null?(i.deletions=[r],i.flags|=16):v.push(r)),i.child=o,i.memoizedState=null,o)}function yp(r,i){return i=Bh({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Bh(r,i){return r=xr(22,r,null,i),r.lanes=0,r}function _p(r,i,o){return Js(i,r.child,null,o),r=yp(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function ME(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),Mm(r.return,i,o)}function vp(r,i,o,u,f,p){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f,v.treeForkCount=p)}function PE(r,i,o){var u=i.pendingProps,f=u.revealOrder,p=u.tail;u=u.children;var v=_n.current,C=(v&2)!==0;if(C?(v=v&1|2,i.flags|=128):v&=1,Te(_n,v),Gn(r,i,u,o),u=St?pu:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ME(r,o,i);else if(r.tag===19)ME(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&xh(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),vp(i,!1,f,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&xh(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}vp(i,!0,o,null,p,u);break;case"together":vp(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function sa(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Wa|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Fo(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=ea(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=ea(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Ep(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Th(r)))}function dR(r,i,o){switch(i.tag){case 3:Be(i,i.stateNode.containerInfo),Fa(i,bn,r.memoizedState.cache),$s();break;case 27:case 5:yt(i);break;case 4:Be(i,i.stateNode.containerInfo);break;case 10:Fa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Gm(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ka(i),i.flags|=128,null):(o&i.child.childLanes)!==0?OE(r,i,o):(Ka(i),r=sa(r,i,o),r!==null?r.sibling:null);Ka(i);break;case 19:var f=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Fo(r,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return PE(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Te(_n,_n.current),u)break;return null;case 22:return i.lanes=0,CE(r,i,o,i.pendingProps);case 24:Fa(i,bn,r.memoizedState.cache)}return sa(r,i,o)}function VE(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)An=!0;else{if(!Ep(r,o)&&(i.flags&128)===0)return An=!1,dR(r,i,o);An=(r.flags&131072)!==0}else An=!1,St&&(i.flags&1048576)!==0&&dv(i,pu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=Xs(i.elementType),i.type=r,typeof r=="function")wm(r)?(u=eo(r,u),i.tag=1,i=NE(null,i,r,u,o)):(i.tag=0,i=dp(null,i,r,u,o));else{if(r!=null){var f=r.$$typeof;if(f===se){i.tag=11,i=SE(null,i,r,u,o);break e}else if(f===A){i.tag=14,i=AE(null,i,r,u,o);break e}}throw i=me(r)||r,Error(a(306,i,""))}}return i;case 0:return dp(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=eo(u,i.pendingProps),NE(r,i,u,f,o);case 3:e:{if(Be(i,i.stateNode.containerInfo),r===null)throw Error(a(387));u=i.pendingProps;var p=i.memoizedState;f=p.element,zm(r,i),Su(i,u,null,o);var v=i.memoizedState;if(u=v.cache,Fa(i,bn,u),u!==p.cache&&Pm(i,[bn],o,!0),bu(),u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=DE(r,i,u,o);break e}else if(u!==f){f=Kr(Error(a(424)),i),gu(f),i=DE(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Jt=Jr(r.firstChild),Fn=i,St=!0,Ba=null,Xr=!0,o=Cv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if($s(),u===f){i=sa(r,i,o);break e}Gn(r,i,u,o)}i=i.child}return i;case 26:return zh(r,i),r===null?(o=$T(i.type,null,i.pendingProps,null))?i.memoizedState=o:St||(o=i.type,r=i.pendingProps,u=rf(be.current).createElement(o),u[Ae]=i,u[Ie]=r,$n(u,o,r),Qt(u),i.stateNode=u):i.memoizedState=$T(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return yt(i),r===null&&St&&(u=i.stateNode=FT(i.type,i.pendingProps,be.current),Fn=i,Xr=!0,f=Jt,ns(i.type)?(Zp=f,Jt=Jr(u.firstChild)):Jt=f),Gn(r,i,i.pendingProps.children,o),zh(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&St&&((f=u=Jt)&&(u=FR(u,i.type,i.pendingProps,Xr),u!==null?(i.stateNode=u,Fn=i,Jt=Jr(u.firstChild),Xr=!1,f=!0):f=!1),f||Ha(i)),yt(i),f=i.type,p=i.pendingProps,v=r!==null?r.memoizedProps:null,u=p.children,Yp(f,p)?u=null:v!==null&&Yp(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Km(r,i,iR,null,null,o),Fu._currentValue=f),zh(r,i),Gn(r,i,u,o),i.child;case 6:return r===null&&St&&((r=o=Jt)&&(o=qR(o,i.pendingProps,Xr),o!==null?(i.stateNode=o,Fn=i,Jt=null,r=!0):r=!1),r||Ha(i)),null;case 13:return OE(r,i,o);case 4:return Be(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Js(i,null,u,o):Gn(r,i,u,o),i.child;case 11:return SE(r,i,i.type,i.pendingProps,o);case 7:return Gn(r,i,i.pendingProps,o),i.child;case 8:return Gn(r,i,i.pendingProps.children,o),i.child;case 12:return Gn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Fa(i,i.type,u.value),Gn(r,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,Ys(i),f=qn(f),u=u(f),i.flags|=1,Gn(r,i,u,o),i.child;case 14:return AE(r,i,i.type,i.pendingProps,o);case 15:return wE(r,i,i.type,i.pendingProps,o);case 19:return PE(r,i,o);case 31:return fR(r,i,o);case 22:return CE(r,i,o,i.pendingProps);case 24:return Ys(i),u=qn(bn),r===null?(f=Lm(),f===null&&(f=Gt,p=Vm(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),i.memoizedState={parent:u,cache:f},Um(i),Fa(i,bn,f)):((r.lanes&o)!==0&&(zm(r,i),Su(i,null,null,o),bu()),f=r.memoizedState,p=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Fa(i,bn,u)):(u=p.cache,Fa(i,bn,u),u!==f.cache&&Pm(i,[bn],o,!0))),Gn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function oa(r){r.flags|=4}function Tp(r,i,o,u,f){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(f&335544128)===f)if(r.stateNode.complete)r.flags|=8192;else if(lT())r.flags|=8192;else throw Ws=wh,jm}else r.flags&=-16777217}function kE(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!WT(i))if(lT())r.flags|=8192;else throw Ws=wh,jm}function Hh(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Qi():536870912,r.lanes|=i,tl|=i)}function xu(r,i){if(!St)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Zt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function mR(r,i,o){var u=i.pendingProps;switch(xm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(i),null;case 1:return Zt(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ra(bn),$e(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Ho(i)?oa(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Dm())),Zt(i),null;case 26:var f=i.type,p=i.memoizedState;return r===null?(oa(i),p!==null?(Zt(i),kE(i,p)):(Zt(i),Tp(i,f,null,u,o))):p?p!==r.memoizedState?(oa(i),Zt(i),kE(i,p)):(Zt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&oa(i),Zt(i),Tp(i,f,r,u,o)),null;case 27:if(Lt(i),o=be.current,f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&oa(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Zt(i),null}r=oe.current,Ho(i)?pv(i):(r=FT(f,u,o),i.stateNode=r,oa(i))}return Zt(i),null;case 5:if(Lt(i),f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&oa(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Zt(i),null}if(p=oe.current,Ho(i))pv(i);else{var v=rf(be.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}p[Ae]=i,p[Ie]=u;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=p;e:switch($n(p,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&oa(i)}}return Zt(i),Tp(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&oa(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(r=be.current,Ho(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,f=Fn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Ae]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||OT(r.nodeValue,o)),r||Ha(i,!0)}else r=rf(r).createTextNode(u),r[Ae]=i,i.stateNode=r}return Zt(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=Ho(i),o!==null){if(r===null){if(!u)throw Error(a(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(557));r[Ae]=i}else $s(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Zt(i),r=!1}else o=Dm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(Dr(i),i):(Dr(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Zt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Ho(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Ae]=i}else $s(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Zt(i),f=!1}else f=Dm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Dr(i),i):(Dr(i),null)}return Dr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),Hh(i,i.updateQueue),Zt(i),null);case 4:return $e(),r===null&&Fp(i.stateNode.containerInfo),Zt(i),null;case 10:return ra(i.type),Zt(i),null;case 19:if(ie(_n),u=i.memoizedState,u===null)return Zt(i),null;if(f=(i.flags&128)!==0,p=u.rendering,p===null)if(f)xu(u,!1);else{if(mn!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(p=xh(r),p!==null){for(i.flags|=128,xu(u,!1),r=p.updateQueue,i.updateQueue=r,Hh(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)cv(o,r),o=o.sibling;return Te(_n,_n.current&1|2),St&&ta(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&qt()>Kh&&(i.flags|=128,f=!0,xu(u,!1),i.lanes=4194304)}else{if(!f)if(r=xh(p),r!==null){if(i.flags|=128,f=!0,r=r.updateQueue,i.updateQueue=r,Hh(i,r),xu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!St)return Zt(i),null}else 2*qt()-u.renderingStartTime>Kh&&o!==536870912&&(i.flags|=128,f=!0,xu(u,!1),i.lanes=4194304);u.isBackwards?(p.sibling=i.child,i.child=p):(r=u.last,r!==null?r.sibling=p:i.child=p,u.last=p)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=qt(),r.sibling=null,o=_n.current,Te(_n,f?o&1|2:o&1),St&&ta(i,u.treeForkCount),r):(Zt(i),null);case 22:case 23:return Dr(i),qm(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Zt(i),i.subtreeFlags&6&&(i.flags|=8192)):Zt(i),o=i.updateQueue,o!==null&&Hh(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&ie(Qs),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ra(bn),Zt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function pR(r,i){switch(xm(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return ra(bn),$e(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Lt(i),null;case 31:if(i.memoizedState!==null){if(Dr(i),i.alternate===null)throw Error(a(340));$s()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(Dr(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));$s()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ie(_n),null;case 4:return $e(),null;case 10:return ra(i.type),null;case 22:case 23:return Dr(i),qm(),r!==null&&ie(Qs),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return ra(bn),null;case 25:return null;default:return null}}function LE(r,i){switch(xm(i),i.tag){case 3:ra(bn),$e();break;case 26:case 27:case 5:Lt(i);break;case 4:$e();break;case 31:i.memoizedState!==null&&Dr(i);break;case 13:Dr(i);break;case 19:ie(_n);break;case 10:ra(i.type);break;case 22:case 23:Dr(i),qm(),r!==null&&ie(Qs);break;case 24:ra(bn)}}function Nu(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var p=o.create,v=o.inst;u=p(),v.destroy=u}o=o.next}while(o!==f)}}catch(C){kt(i,i.return,C)}}function Qa(r,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&r)===r){var v=u.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,f=i;var j=o,Z=C;try{Z()}catch(le){kt(f,j,le)}}}u=u.next}while(u!==p)}}catch(le){kt(i,i.return,le)}}function jE(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{Iv(i,o)}catch(u){kt(r,r.return,u)}}}function UE(r,i,o){o.props=eo(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){kt(r,i,u)}}function Du(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){kt(r,i,f)}}function ji(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){kt(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){kt(r,i,f)}else o.current=null}function zE(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){kt(r,r.return,f)}}function bp(r,i,o){try{var u=r.stateNode;LR(u,r.type,o,i),u[Ie]=i}catch(f){kt(r,r.return,f)}}function BE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ns(r.type)||r.tag===4}function Sp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||BE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ns(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ap(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=ci));else if(u!==4&&(u===27&&ns(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(Ap(r,i,o),r=r.sibling;r!==null;)Ap(r,i,o),r=r.sibling}function Fh(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&ns(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Fh(r,i,o),r=r.sibling;r!==null;)Fh(r,i,o),r=r.sibling}function HE(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);$n(i,u,o),i[Ae]=r,i[Ie]=o}catch(p){kt(r,r.return,p)}}var la=!1,wn=!1,wp=!1,FE=typeof WeakSet=="function"?WeakSet:Set,Un=null;function gR(r,i){if(r=r.containerInfo,$p=hf,r=tv(r),_m(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,C=-1,j=-1,Z=0,le=0,pe=r,te=null;t:for(;;){for(var ae;pe!==o||f!==0&&pe.nodeType!==3||(C=v+f),pe!==p||u!==0&&pe.nodeType!==3||(j=v+u),pe.nodeType===3&&(v+=pe.nodeValue.length),(ae=pe.firstChild)!==null;)te=pe,pe=ae;for(;;){if(pe===r)break t;if(te===o&&++Z===f&&(C=v),te===p&&++le===u&&(j=v),(ae=pe.nextSibling)!==null)break;pe=te,te=pe.parentNode}pe=ae}o=C===-1||j===-1?null:{start:C,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for(Kp={focusedElem:r,selectionRange:o},hf=!1,Un=i;Un!==null;)if(i=Un,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Un=r;else for(;Un!==null;){switch(i=Un,p=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)f=r[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=i,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var je=eo(o.type,f);r=u.getSnapshotBeforeUpdate(je,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ke){kt(o,o.return,Ke)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Xp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Xp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,Un=r;break}Un=i.return}}function qE(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ca(r,o),u&4&&Nu(5,o);break;case 1:if(ca(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(v){kt(o,o.return,v)}else{var f=eo(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(v){kt(o,o.return,v)}}u&64&&jE(o),u&512&&Du(o,o.return);break;case 3:if(ca(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Iv(r,i)}catch(v){kt(o,o.return,v)}}break;case 27:i===null&&u&4&&HE(o);case 26:case 5:ca(r,o),i===null&&u&4&&zE(o),u&512&&Du(o,o.return);break;case 12:ca(r,o);break;case 31:ca(r,o),u&4&&KE(r,o);break;case 13:ca(r,o),u&4&&YE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=wR.bind(null,o),GR(r,o))));break;case 22:if(u=o.memoizedState!==null||la,!u){i=i!==null&&i.memoizedState!==null||wn,f=la;var p=wn;la=u,(wn=i)&&!p?ha(r,o,(o.subtreeFlags&8772)!==0):ca(r,o),la=f,wn=p}break;case 30:break;default:ca(r,o)}}function GE(r){var i=r.alternate;i!==null&&(r.alternate=null,GE(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Wt(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var rn=null,pr=!1;function ua(r,i,o){for(o=o.child;o!==null;)$E(r,i,o),o=o.sibling}function $E(r,i,o){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount(xe,o)}catch{}switch(o.tag){case 26:wn||ji(o,i),ua(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:wn||ji(o,i);var u=rn,f=pr;ns(o.type)&&(rn=o.stateNode,pr=!1),ua(r,i,o),zu(o.stateNode),rn=u,pr=f;break;case 5:wn||ji(o,i);case 6:if(u=rn,f=pr,rn=null,ua(r,i,o),rn=u,pr=f,rn!==null)if(pr)try{(rn.nodeType===9?rn.body:rn.nodeName==="HTML"?rn.ownerDocument.body:rn).removeChild(o.stateNode)}catch(p){kt(o,i,p)}else try{rn.removeChild(o.stateNode)}catch(p){kt(o,i,p)}break;case 18:rn!==null&&(pr?(r=rn,jT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),ul(r)):jT(rn,o.stateNode));break;case 4:u=rn,f=pr,rn=o.stateNode.containerInfo,pr=!0,ua(r,i,o),rn=u,pr=f;break;case 0:case 11:case 14:case 15:Qa(2,o,i),wn||Qa(4,o,i),ua(r,i,o);break;case 1:wn||(ji(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&UE(o,i,u)),ua(r,i,o);break;case 21:ua(r,i,o);break;case 22:wn=(u=wn)||o.memoizedState!==null,ua(r,i,o),wn=u;break;default:ua(r,i,o)}}function KE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ul(r)}catch(o){kt(i,i.return,o)}}}function YE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ul(r)}catch(o){kt(i,i.return,o)}}function yR(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new FE),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new FE),i;default:throw Error(a(435,r.tag))}}function qh(r,i){var o=yR(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var f=CR.bind(null,r,u);u.then(f,f)}})}function gr(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=r,v=i,C=v;e:for(;C!==null;){switch(C.tag){case 27:if(ns(C.type)){rn=C.stateNode,pr=!1;break e}break;case 5:rn=C.stateNode,pr=!1;break e;case 3:case 4:rn=C.stateNode.containerInfo,pr=!0;break e}C=C.return}if(rn===null)throw Error(a(160));$E(p,v,f),rn=null,pr=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)QE(i,r),i=i.sibling}var gi=null;function QE(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:gr(i,r),yr(r),u&4&&(Qa(3,r,r.return),Nu(3,r),Qa(5,r,r.return));break;case 1:gr(i,r),yr(r),u&512&&(wn||o===null||ji(o,o.return)),u&64&&la&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=gi;if(gr(i,r),yr(r),u&512&&(wn||o===null||ji(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[jt]||p[Ae]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),$n(p,u,o),p[Ae]=r,Qt(p),u=p;break e;case"link":var v=QT("link","href",f).get(u+(o.href||""));if(v){for(var C=0;C<v.length;C++)if(p=v[C],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(C,1);break t}}p=f.createElement(u),$n(p,u,o),f.head.appendChild(p);break;case"meta":if(v=QT("meta","content",f).get(u+(o.content||""))){for(C=0;C<v.length;C++)if(p=v[C],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(C,1);break t}}p=f.createElement(u),$n(p,u,o),f.head.appendChild(p);break;default:throw Error(a(468,u))}p[Ae]=r,Qt(p),u=p}r.stateNode=u}else XT(f,r.type,r.stateNode);else r.stateNode=YT(f,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?XT(f,r.type,r.stateNode):YT(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&bp(r,r.memoizedProps,o.memoizedProps)}break;case 27:gr(i,r),yr(r),u&512&&(wn||o===null||ji(o,o.return)),o!==null&&u&4&&bp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(gr(i,r),yr(r),u&512&&(wn||o===null||ji(o,o.return)),r.flags&32){f=r.stateNode;try{mr(f,"")}catch(je){kt(r,r.return,je)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,bp(r,f,o!==null?o.memoizedProps:f)),u&1024&&(wp=!0);break;case 6:if(gr(i,r),yr(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(je){kt(r,r.return,je)}}break;case 3:if(of=null,f=gi,gi=af(i.containerInfo),gr(i,r),gi=f,yr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ul(i.containerInfo)}catch(je){kt(r,r.return,je)}wp&&(wp=!1,XE(r));break;case 4:u=gi,gi=af(r.stateNode.containerInfo),gr(i,r),yr(r),gi=u;break;case 12:gr(i,r),yr(r);break;case 31:gr(i,r),yr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,qh(r,u)));break;case 13:gr(i,r),yr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&($h=qt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,qh(r,u)));break;case 22:f=r.memoizedState!==null;var j=o!==null&&o.memoizedState!==null,Z=la,le=wn;if(la=Z||f,wn=le||j,gr(i,r),wn=le,la=Z,yr(r),u&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||j||la||wn||to(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){j=o=i;try{if(p=j.stateNode,f)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=j.stateNode;var pe=j.memoizedProps.style,te=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;C.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(je){kt(j,j.return,je)}}}else if(i.tag===6){if(o===null){j=i;try{j.stateNode.nodeValue=f?"":j.memoizedProps}catch(je){kt(j,j.return,je)}}}else if(i.tag===18){if(o===null){j=i;try{var ae=j.stateNode;f?UT(ae,!0):UT(j.stateNode,!1)}catch(je){kt(j,j.return,je)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,qh(r,o))));break;case 19:gr(i,r),yr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,qh(r,u)));break;case 30:break;case 21:break;default:gr(i,r),yr(r)}}function yr(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(BE(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,p=Sp(r);Fh(r,p,f);break;case 5:var v=o.stateNode;o.flags&32&&(mr(v,""),o.flags&=-33);var C=Sp(r);Fh(r,C,v);break;case 3:case 4:var j=o.stateNode.containerInfo,Z=Sp(r);Ap(r,Z,j);break;default:throw Error(a(161))}}catch(le){kt(r,r.return,le)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function XE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;XE(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function ca(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)qE(r,i.alternate,i),i=i.sibling}function to(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Qa(4,i,i.return),to(i);break;case 1:ji(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&UE(i,i.return,o),to(i);break;case 27:zu(i.stateNode);case 26:case 5:ji(i,i.return),to(i);break;case 22:i.memoizedState===null&&to(i);break;case 30:to(i);break;default:to(i)}r=r.sibling}}function ha(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,p=i,v=p.flags;switch(p.tag){case 0:case 11:case 15:ha(f,p,o),Nu(4,p);break;case 1:if(ha(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){kt(u,u.return,Z)}if(u=p,f=u.updateQueue,f!==null){var C=u.stateNode;try{var j=f.shared.hiddenCallbacks;if(j!==null)for(f.shared.hiddenCallbacks=null,f=0;f<j.length;f++)Rv(j[f],C)}catch(Z){kt(u,u.return,Z)}}o&&v&64&&jE(p),Du(p,p.return);break;case 27:HE(p);case 26:case 5:ha(f,p,o),o&&u===null&&v&4&&zE(p),Du(p,p.return);break;case 12:ha(f,p,o);break;case 31:ha(f,p,o),o&&v&4&&KE(f,p);break;case 13:ha(f,p,o),o&&v&4&&YE(f,p);break;case 22:p.memoizedState===null&&ha(f,p,o),Du(p,p.return);break;case 30:break;default:ha(f,p,o)}i=i.sibling}}function Cp(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&yu(o))}function Rp(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&yu(r))}function yi(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)WE(r,i,o,u),i=i.sibling}function WE(r,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:yi(r,i,o,u),f&2048&&Nu(9,i);break;case 1:yi(r,i,o,u);break;case 3:yi(r,i,o,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&yu(r)));break;case 12:if(f&2048){yi(r,i,o,u),r=i.stateNode;try{var p=i.memoizedProps,v=p.id,C=p.onPostCommit;typeof C=="function"&&C(v,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(j){kt(i,i.return,j)}}else yi(r,i,o,u);break;case 31:yi(r,i,o,u);break;case 13:yi(r,i,o,u);break;case 23:break;case 22:p=i.stateNode,v=i.alternate,i.memoizedState!==null?p._visibility&2?yi(r,i,o,u):Ou(r,i):p._visibility&2?yi(r,i,o,u):(p._visibility|=2,Jo(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Cp(v,i);break;case 24:yi(r,i,o,u),f&2048&&Rp(i.alternate,i);break;default:yi(r,i,o,u)}}function Jo(r,i,o,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=r,v=i,C=o,j=u,Z=v.flags;switch(v.tag){case 0:case 11:case 15:Jo(p,v,C,j,f),Nu(8,v);break;case 23:break;case 22:var le=v.stateNode;v.memoizedState!==null?le._visibility&2?Jo(p,v,C,j,f):Ou(p,v):(le._visibility|=2,Jo(p,v,C,j,f)),f&&Z&2048&&Cp(v.alternate,v);break;case 24:Jo(p,v,C,j,f),f&&Z&2048&&Rp(v.alternate,v);break;default:Jo(p,v,C,j,f)}i=i.sibling}}function Ou(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,f=u.flags;switch(u.tag){case 22:Ou(o,u),f&2048&&Cp(u.alternate,u);break;case 24:Ou(o,u),f&2048&&Rp(u.alternate,u);break;default:Ou(o,u)}i=i.sibling}}var Mu=8192;function Zo(r,i,o){if(r.subtreeFlags&Mu)for(r=r.child;r!==null;)JE(r,i,o),r=r.sibling}function JE(r,i,o){switch(r.tag){case 26:Zo(r,i,o),r.flags&Mu&&r.memoizedState!==null&&rI(o,gi,r.memoizedState,r.memoizedProps);break;case 5:Zo(r,i,o);break;case 3:case 4:var u=gi;gi=af(r.stateNode.containerInfo),Zo(r,i,o),gi=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Mu,Mu=16777216,Zo(r,i,o),Mu=u):Zo(r,i,o));break;default:Zo(r,i,o)}}function ZE(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Pu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Un=u,tT(u,r)}ZE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)eT(r),r=r.sibling}function eT(r){switch(r.tag){case 0:case 11:case 15:Pu(r),r.flags&2048&&Qa(9,r,r.return);break;case 3:Pu(r);break;case 12:Pu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Gh(r)):Pu(r);break;default:Pu(r)}}function Gh(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Un=u,tT(u,r)}ZE(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Qa(8,i,i.return),Gh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Gh(i));break;default:Gh(i)}r=r.sibling}}function tT(r,i){for(;Un!==null;){var o=Un;switch(o.tag){case 0:case 11:case 15:Qa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:yu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Un=u;else e:for(o=r;Un!==null;){u=Un;var f=u.sibling,p=u.return;if(GE(u),u===o){Un=null;break e}if(f!==null){f.return=p,Un=f;break e}Un=p}}}var _R={getCacheForType:function(r){var i=qn(bn),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return qn(bn).controller.signal}},vR=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Gt=null,pt=null,_t=0,Vt=0,Or=null,Xa=!1,el=!1,Ip=!1,fa=0,mn=0,Wa=0,no=0,xp=0,Mr=0,tl=0,Vu=null,_r=null,Np=!1,$h=0,nT=0,Kh=1/0,Yh=null,Ja=null,Pn=0,Za=null,nl=null,da=0,Dp=0,Op=null,rT=null,ku=0,Mp=null;function Pr(){return(Dt&2)!==0&&_t!==0?_t&-_t:z.T!==null?Up():Se()}function iT(){if(Mr===0)if((_t&536870912)===0||St){var r=Dn;Dn<<=1,(Dn&3932160)===0&&(Dn=262144),Mr=r}else Mr=536870912;return r=Nr.current,r!==null&&(r.flags|=32),Mr}function vr(r,i,o){(r===Gt&&(Vt===2||Vt===9)||r.cancelPendingCommit!==null)&&(rl(r,0),es(r,_t,Mr,!1)),Ci(r,o),((Dt&2)===0||r!==Gt)&&(r===Gt&&((Dt&2)===0&&(no|=o),mn===4&&es(r,_t,Mr,!1)),Ui(r))}function aT(r,i,o){if((Dt&6)!==0)throw Error(a(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||wr(r,i),f=u?bR(r,i):Vp(r,i,!0),p=u;do{if(f===0){el&&!u&&es(r,i,0,!1);break}else{if(o=r.current.alternate,p&&!ER(o)){f=Vp(r,i,!1),p=!1;continue}if(f===2){if(p=i,r.errorRecoveryDisabledLanes&p)var v=0;else v=r.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var C=r;f=Vu;var j=C.current.memoizedState.isDehydrated;if(j&&(rl(C,v).flags|=256),v=Vp(C,v,!1),v!==2){if(Ip&&!j){C.errorRecoveryDisabledLanes|=p,no|=p,f=4;break e}p=_r,_r=f,p!==null&&(_r===null?_r=p:_r.push.apply(_r,p))}f=v}if(p=!1,f!==2)continue}}if(f===1){rl(r,0),es(r,i,0,!0);break}e:{switch(u=r,p=f,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:es(u,i,Mr,!Xa);break e;case 2:_r=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=$h+300-qt(),10<f)){if(es(u,i,Mr,!Xa),Mn(u,0,!0)!==0)break e;da=i,u.timeoutHandle=kT(sT.bind(null,u,o,_r,Yh,Np,i,Mr,no,tl,Xa,p,"Throttled",-0,0),f);break e}sT(u,o,_r,Yh,Np,i,Mr,no,tl,Xa,p,null,-0,0)}}break}while(!0);Ui(r)}function sT(r,i,o,u,f,p,v,C,j,Z,le,pe,te,ae){if(r.timeoutHandle=-1,pe=i.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ci},JE(i,p,pe);var je=(p&62914560)===p?$h-qt():(p&4194048)===p?nT-qt():0;if(je=iI(pe,je),je!==null){da=p,r.cancelPendingCommit=je(mT.bind(null,r,i,p,o,u,f,v,C,j,le,pe,null,te,ae)),es(r,p,v,!Z);return}}mT(r,i,p,o,u,f,v,C,j)}function ER(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!Ir(p(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function es(r,i,o,u){i&=~xp,i&=~no,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var p=31-Fe(f),v=1<<p;u[p]=-1,f&=~v}o!==0&&Xi(r,o,i)}function Qh(){return(Dt&6)===0?(Lu(0),!1):!0}function Pp(){if(pt!==null){if(Vt===0)var r=pt.return;else r=pt,na=Ks=null,Xm(r),Ko=null,vu=0,r=pt;for(;r!==null;)LE(r.alternate,r),r=r.return;pt=null}}function rl(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,zR(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),da=0,Pp(),Gt=r,pt=o=ea(r.current,null),_t=i,Vt=0,Or=null,Xa=!1,el=wr(r,i),Ip=!1,tl=Mr=xp=no=Wa=mn=0,_r=Vu=null,Np=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-Fe(u),p=1<<f;i|=r[f],u&=~p}return fa=i,gh(),o}function oT(r,i){nt=null,z.H=Ru,i===$o||i===Ah?(i=Sv(),Vt=3):i===jm?(i=Sv(),Vt=4):Vt=i===fp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Or=i,pt===null&&(mn=1,jh(r,Kr(i,r.current)))}function lT(){var r=Nr.current;return r===null?!0:(_t&4194048)===_t?Wr===null:(_t&62914560)===_t||(_t&536870912)!==0?r===Wr:!1}function uT(){var r=z.H;return z.H=Ru,r===null?Ru:r}function cT(){var r=z.A;return z.A=_R,r}function Xh(){mn=4,Xa||(_t&4194048)!==_t&&Nr.current!==null||(el=!0),(Wa&134217727)===0&&(no&134217727)===0||Gt===null||es(Gt,_t,Mr,!1)}function Vp(r,i,o){var u=Dt;Dt|=2;var f=uT(),p=cT();(Gt!==r||_t!==i)&&(Yh=null,rl(r,i)),i=!1;var v=mn;e:do try{if(Vt!==0&&pt!==null){var C=pt,j=Or;switch(Vt){case 8:Pp(),v=6;break e;case 3:case 2:case 9:case 6:Nr.current===null&&(i=!0);var Z=Vt;if(Vt=0,Or=null,il(r,C,j,Z),o&&el){v=0;break e}break;default:Z=Vt,Vt=0,Or=null,il(r,C,j,Z)}}TR(),v=mn;break}catch(le){oT(r,le)}while(!0);return i&&r.shellSuspendCounter++,na=Ks=null,Dt=u,z.H=f,z.A=p,pt===null&&(Gt=null,_t=0,gh()),v}function TR(){for(;pt!==null;)hT(pt)}function bR(r,i){var o=Dt;Dt|=2;var u=uT(),f=cT();Gt!==r||_t!==i?(Yh=null,Kh=qt()+500,rl(r,i)):el=wr(r,i);e:do try{if(Vt!==0&&pt!==null){i=pt;var p=Or;t:switch(Vt){case 1:Vt=0,Or=null,il(r,i,p,1);break;case 2:case 9:if(Tv(p)){Vt=0,Or=null,fT(i);break}i=function(){Vt!==2&&Vt!==9||Gt!==r||(Vt=7),Ui(r)},p.then(i,i);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:Tv(p)?(Vt=0,Or=null,fT(i)):(Vt=0,Or=null,il(r,i,p,7));break;case 5:var v=null;switch(pt.tag){case 26:v=pt.memoizedState;case 5:case 27:var C=pt;if(v?WT(v):C.stateNode.complete){Vt=0,Or=null;var j=C.sibling;if(j!==null)pt=j;else{var Z=C.return;Z!==null?(pt=Z,Wh(Z)):pt=null}break t}}Vt=0,Or=null,il(r,i,p,5);break;case 6:Vt=0,Or=null,il(r,i,p,6);break;case 8:Pp(),mn=6;break e;default:throw Error(a(462))}}SR();break}catch(le){oT(r,le)}while(!0);return na=Ks=null,z.H=u,z.A=f,Dt=o,pt!==null?0:(Gt=null,_t=0,gh(),mn)}function SR(){for(;pt!==null&&!wi();)hT(pt)}function hT(r){var i=VE(r.alternate,r,fa);r.memoizedProps=r.pendingProps,i===null?Wh(r):pt=i}function fT(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=xE(o,i,i.pendingProps,i.type,void 0,_t);break;case 11:i=xE(o,i,i.pendingProps,i.type.render,i.ref,_t);break;case 5:Xm(i);default:LE(o,i),i=pt=cv(i,fa),i=VE(o,i,fa)}r.memoizedProps=r.pendingProps,i===null?Wh(r):pt=i}function il(r,i,o,u){na=Ks=null,Xm(i),Ko=null,vu=0;var f=i.return;try{if(hR(r,f,i,o,_t)){mn=1,jh(r,Kr(o,r.current)),pt=null;return}}catch(p){if(f!==null)throw pt=f,p;mn=1,jh(r,Kr(o,r.current)),pt=null;return}i.flags&32768?(St||u===1?r=!0:el||(_t&536870912)!==0?r=!1:(Xa=r=!0,(u===2||u===9||u===3||u===6)&&(u=Nr.current,u!==null&&u.tag===13&&(u.flags|=16384))),dT(i,r)):Wh(i)}function Wh(r){var i=r;do{if((i.flags&32768)!==0){dT(i,Xa);return}r=i.return;var o=mR(i.alternate,i,fa);if(o!==null){pt=o;return}if(i=i.sibling,i!==null){pt=i;return}pt=i=r}while(i!==null);mn===0&&(mn=5)}function dT(r,i){do{var o=pR(r.alternate,r);if(o!==null){o.flags&=32767,pt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){pt=r;return}pt=r=o}while(r!==null);mn=6,pt=null}function mT(r,i,o,u,f,p,v,C,j){r.cancelPendingCommit=null;do Jh();while(Pn!==0);if((Dt&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=Sm,tu(r,o,p,v,C,j),r===Gt&&(pt=Gt=null,_t=0),nl=i,Za=r,da=o,Dp=p,Op=f,rT=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,RR(gn,function(){return vT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=z.T,z.T=null,f=ne.p,ne.p=2,v=Dt,Dt|=4;try{gR(r,i,o)}finally{Dt=v,ne.p=f,z.T=u}}Pn=1,pT(),gT(),yT()}}function pT(){if(Pn===1){Pn=0;var r=Za,i=nl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=z.T,z.T=null;var u=ne.p;ne.p=2;var f=Dt;Dt|=4;try{QE(i,r);var p=Kp,v=tv(r.containerInfo),C=p.focusedElem,j=p.selectionRange;if(v!==C&&C&&C.ownerDocument&&ev(C.ownerDocument.documentElement,C)){if(j!==null&&_m(C)){var Z=j.start,le=j.end;if(le===void 0&&(le=Z),"selectionStart"in C)C.selectionStart=Z,C.selectionEnd=Math.min(le,C.value.length);else{var pe=C.ownerDocument||document,te=pe&&pe.defaultView||window;if(te.getSelection){var ae=te.getSelection(),je=C.textContent.length,Ke=Math.min(j.start,je),Ft=j.end===void 0?Ke:Math.min(j.end,je);!ae.extend&&Ke>Ft&&(v=Ft,Ft=Ke,Ke=v);var Y=Z_(C,Ke),B=Z_(C,Ft);if(Y&&B&&(ae.rangeCount!==1||ae.anchorNode!==Y.node||ae.anchorOffset!==Y.offset||ae.focusNode!==B.node||ae.focusOffset!==B.offset)){var J=pe.createRange();J.setStart(Y.node,Y.offset),ae.removeAllRanges(),Ke>Ft?(ae.addRange(J),ae.extend(B.node,B.offset)):(J.setEnd(B.node,B.offset),ae.addRange(J))}}}}for(pe=[],ae=C;ae=ae.parentNode;)ae.nodeType===1&&pe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<pe.length;C++){var fe=pe[C];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}hf=!!$p,Kp=$p=null}finally{Dt=f,ne.p=u,z.T=o}}r.current=i,Pn=2}}function gT(){if(Pn===2){Pn=0;var r=Za,i=nl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=z.T,z.T=null;var u=ne.p;ne.p=2;var f=Dt;Dt|=4;try{qE(r,i.alternate,i)}finally{Dt=f,ne.p=u,z.T=o}}Pn=3}}function yT(){if(Pn===4||Pn===3){Pn=0,ui();var r=Za,i=nl,o=da,u=rT;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Pn=5:(Pn=0,nl=Za=null,_T(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Ja=null),_e(o),i=i.stateNode,Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot(xe,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=z.T,f=ne.p,ne.p=2,z.T=null;try{for(var p=r.onRecoverableError,v=0;v<u.length;v++){var C=u[v];p(C.value,{componentStack:C.stack})}}finally{z.T=i,ne.p=f}}(da&3)!==0&&Jh(),Ui(r),f=r.pendingLanes,(o&261930)!==0&&(f&42)!==0?r===Mp?ku++:(ku=0,Mp=r):ku=0,Lu(0)}}function _T(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,yu(i)))}function Jh(){return pT(),gT(),yT(),vT()}function vT(){if(Pn!==5)return!1;var r=Za,i=Dp;Dp=0;var o=_e(da),u=z.T,f=ne.p;try{ne.p=32>o?32:o,z.T=null,o=Op,Op=null;var p=Za,v=da;if(Pn=0,nl=Za=null,da=0,(Dt&6)!==0)throw Error(a(331));var C=Dt;if(Dt|=4,eT(p.current),WE(p,p.current,v,o),Dt=C,Lu(0,!1),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot(xe,p)}catch{}return!0}finally{ne.p=f,z.T=u,_T(r,i)}}function ET(r,i,o){i=Kr(o,i),i=hp(r.stateNode,i,2),r=$a(r,i,2),r!==null&&(Ci(r,2),Ui(r))}function kt(r,i,o){if(r.tag===3)ET(r,r,o);else for(;i!==null;){if(i.tag===3){ET(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ja===null||!Ja.has(u))){r=Kr(o,r),o=TE(2),u=$a(i,o,2),u!==null&&(bE(o,u,i,r),Ci(u,2),Ui(u));break}}i=i.return}}function kp(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new vR;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(Ip=!0,f.add(o),r=AR.bind(null,r,i,o),i.then(r,r))}function AR(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Gt===r&&(_t&o)===o&&(mn===4||mn===3&&(_t&62914560)===_t&&300>qt()-$h?(Dt&2)===0&&rl(r,0):xp|=o,tl===_t&&(tl=0)),Ui(r)}function TT(r,i){i===0&&(i=Qi()),r=qs(r,i),r!==null&&(Ci(r,i),Ui(r))}function wR(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),TT(r,o)}function CR(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),TT(r,o)}function RR(r,i){return lt(r,i)}var Zh=null,al=null,Lp=!1,ef=!1,jp=!1,ts=0;function Ui(r){r!==al&&r.next===null&&(al===null?Zh=al=r:al=al.next=r),ef=!0,Lp||(Lp=!0,xR())}function Lu(r,i){if(!jp&&ef){jp=!0;do for(var o=!1,u=Zh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var v=u.suspendedLanes,C=u.pingedLanes;p=(1<<31-Fe(42|r)+1)-1,p&=f&~(v&~C),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,wT(u,p))}else p=_t,p=Mn(u,u===Gt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||wr(u,p)||(o=!0,wT(u,p));u=u.next}while(o);jp=!1}}function IR(){bT()}function bT(){ef=Lp=!1;var r=0;ts!==0&&UR()&&(r=ts);for(var i=qt(),o=null,u=Zh;u!==null;){var f=u.next,p=ST(u,i);p===0?(u.next=null,o===null?Zh=f:o.next=f,f===null&&(al=o)):(o=u,(r!==0||(p&3)!==0)&&(ef=!0)),u=f}Pn!==0&&Pn!==5||Lu(r),ts!==0&&(ts=0)}function ST(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var v=31-Fe(p),C=1<<v,j=f[v];j===-1?((C&o)===0||(C&u)!==0)&&(f[v]=Co(C,i)):j<=i&&(r.expiredLanes|=C),p&=~C}if(i=Gt,o=_t,o=Mn(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Vt===2||Vt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Nn(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||wr(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&Nn(u),_e(o)){case 2:case 8:o=Ar;break;case 32:o=gn;break;case 268435456:o=he;break;default:o=gn}return u=AT.bind(null,r),o=lt(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&Nn(u),r.callbackPriority=2,r.callbackNode=null,2}function AT(r,i){if(Pn!==0&&Pn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Jh()&&r.callbackNode!==o)return null;var u=_t;return u=Mn(r,r===Gt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(aT(r,u,i),ST(r,qt()),r.callbackNode!=null&&r.callbackNode===o?AT.bind(null,r):null)}function wT(r,i){if(Jh())return null;aT(r,i,!0)}function xR(){BR(function(){(Dt&6)!==0?lt(ar,IR):bT()})}function Up(){if(ts===0){var r=qo;r===0&&(r=$t,$t<<=1,($t&261888)===0&&($t=256)),ts=r}return ts}function CT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:xo(""+r)}function RT(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function NR(r,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var p=CT((f[Ie]||null).action),v=u.submitter;v&&(i=(i=v[Ie]||null)?CT(i.formAction):v.getAttribute("formAction"),i!==null&&(p=i,v=null));var C=new Oi("action","action",null,u,f);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ts!==0){var j=v?RT(f,v):new FormData(f);ap(o,{pending:!0,data:j,method:f.method,action:p},null,j)}}else typeof p=="function"&&(C.preventDefault(),j=v?RT(f,v):new FormData(f),ap(o,{pending:!0,data:j,method:f.method,action:p},p,j))},currentTarget:f}]})}}for(var zp=0;zp<bm.length;zp++){var Bp=bm[zp],DR=Bp.toLowerCase(),OR=Bp[0].toUpperCase()+Bp.slice(1);pi(DR,"on"+OR)}pi(iv,"onAnimationEnd"),pi(av,"onAnimationIteration"),pi(sv,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(YC,"onTransitionRun"),pi(QC,"onTransitionStart"),pi(XC,"onTransitionCancel"),pi(ov,"onTransitionEnd"),Jn("onMouseEnter",["mouseout","mouseover"]),Jn("onMouseLeave",["mouseout","mouseover"]),Jn("onPointerEnter",["pointerout","pointerover"]),Jn("onPointerLeave",["pointerout","pointerover"]),fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fr("onBeforeInput",["compositionend","keypress","textInput","paste"]),fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ju));function IT(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var v=u.length-1;0<=v;v--){var C=u[v],j=C.instance,Z=C.currentTarget;if(C=C.listener,j!==p&&f.isPropagationStopped())break e;p=C,f.currentTarget=Z;try{p(f)}catch(le){ph(le)}f.currentTarget=null,p=j}else for(v=0;v<u.length;v++){if(C=u[v],j=C.instance,Z=C.currentTarget,C=C.listener,j!==p&&f.isPropagationStopped())break e;p=C,f.currentTarget=Z;try{p(f)}catch(le){ph(le)}f.currentTarget=null,p=j}}}}function gt(r,i){var o=i[Ye];o===void 0&&(o=i[Ye]=new Set);var u=r+"__bubble";o.has(u)||(xT(i,r,2,!1),o.add(u))}function Hp(r,i,o){var u=0;i&&(u|=4),xT(o,r,u,i)}var tf="_reactListening"+Math.random().toString(36).slice(2);function Fp(r){if(!r[tf]){r[tf]=!0,hr.forEach(function(o){o!=="selectionchange"&&(MR.has(o)||Hp(o,!1,r),Hp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[tf]||(i[tf]=!0,Hp("selectionchange",!1,i))}}function xT(r,i,o,u){switch(ib(i)){case 2:var f=oI;break;case 8:f=lI;break;default:f=ig}o=f.bind(null,i,o,r),f=void 0,!ks||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function qp(r,i,o,u,f){var p=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var C=u.stateNode.containerInfo;if(C===f)break;if(v===4)for(v=u.return;v!==null;){var j=v.tag;if((j===3||j===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;C!==null;){if(v=Kt(C),v===null)return;if(j=v.tag,j===5||j===6||j===26||j===27){u=p=v;continue e}C=C.parentNode}}u=u.return}ka(function(){var Z=p,le=Fr(o),pe=[];e:{var te=lv.get(r);if(te!==void 0){var ae=Oi,je=r;switch(r){case"keypress":if(js(o)===0)break e;case"keydown":case"keyup":ae=fh;break;case"focusin":je="focus",ae=zs;break;case"focusout":je="blur",ae=zs;break;case"beforeblur":case"afterblur":ae=zs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=uu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=_;break;case iv:case av:case sv:ae=ah;break;case ov:ae=I;break;case"scroll":case"scrollend":ae=lu;break;case"wheel":ae=re;break;case"copy":case"cut":case"paste":ae=sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Zi;break;case"toggle":case"beforetoggle":ae=tt}var Ke=(i&4)!==0,Ft=!Ke&&(r==="scroll"||r==="scrollend"),Y=Ke?te!==null?te+"Capture":null:te;Ke=[];for(var B=Z,J;B!==null;){var fe=B;if(J=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||J===null||Y===null||(fe=hi(B,Y),fe!=null&&Ke.push(Uu(B,fe,J))),Ft)break;B=B.return}0<Ke.length&&(te=new ae(te,je,null,o,le),pe.push({event:te,listeners:Ke}))}}if((i&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",te&&o!==au&&(je=o.relatedTarget||o.fromElement)&&(Kt(je)||je[ke]))break e;if((ae||te)&&(te=le.window===le?le:(te=le.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(je=o.relatedTarget||o.toElement,ae=Z,je=je?Kt(je):null,je!==null&&(Ft=l(je),Ke=je.tag,je!==Ft||Ke!==5&&Ke!==27&&Ke!==6)&&(je=null)):(ae=null,je=Z),ae!==je)){if(Ke=uu,fe="onMouseLeave",Y="onMouseEnter",B="mouse",(r==="pointerout"||r==="pointerover")&&(Ke=Zi,fe="onPointerLeave",Y="onPointerEnter",B="pointer"),Ft=ae==null?te:Yt(ae),J=je==null?te:Yt(je),te=new Ke(fe,B+"leave",ae,o,le),te.target=Ft,te.relatedTarget=J,fe=null,Kt(le)===Z&&(Ke=new Ke(Y,B+"enter",je,o,le),Ke.target=J,Ke.relatedTarget=Ft,fe=Ke),Ft=fe,ae&&je)t:{for(Ke=PR,Y=ae,B=je,J=0,fe=Y;fe;fe=Ke(fe))J++;fe=0;for(var qe=B;qe;qe=Ke(qe))fe++;for(;0<J-fe;)Y=Ke(Y),J--;for(;0<fe-J;)B=Ke(B),fe--;for(;J--;){if(Y===B||B!==null&&Y===B.alternate){Ke=Y;break t}Y=Ke(Y),B=Ke(B)}Ke=null}else Ke=null;ae!==null&&NT(pe,te,ae,Ke,!1),je!==null&&Ft!==null&&NT(pe,Ft,je,Ke,!0)}}e:{if(te=Z?Yt(Z):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var Rt=K_;else if(G_(te))if(Y_)Rt=GC;else{Rt=FC;var ze=HC}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Io(Z.elementType)&&(Rt=K_):Rt=qC;if(Rt&&(Rt=Rt(r,Z))){$_(pe,Rt,o,le);break e}ze&&ze(r,te,Z),r==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&nu(te,"number",te.value)}switch(ze=Z?Yt(Z):window,r){case"focusin":(G_(ze)||ze.contentEditable==="true")&&(ko=ze,vm=Z,mu=null);break;case"focusout":mu=vm=ko=null;break;case"mousedown":Em=!0;break;case"contextmenu":case"mouseup":case"dragend":Em=!1,nv(pe,o,le);break;case"selectionchange":if(KC)break;case"keydown":case"keyup":nv(pe,o,le)}var at;if(Nt)e:{switch(r){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else Vo?Bs(r,o)&&(vt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(vt="onCompositionStart");vt&&(Vi&&o.locale!=="ko"&&(Vo||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Vo&&(at=ou()):(Di=le,su="value"in Di?Di.value:Di.textContent,Vo=!0)),ze=nf(Z,vt),0<ze.length&&(vt=new Pi(vt,r,null,o,le),pe.push({event:vt,listeners:ze}),at?vt.data=at:(at=Po(o),at!==null&&(vt.data=at)))),(at=Gr?jC(r,o):UC(r,o))&&(vt=nf(Z,"onBeforeInput"),0<vt.length&&(ze=new Pi("onBeforeInput","beforeinput",null,o,le),pe.push({event:ze,listeners:vt}),ze.data=at)),NR(pe,r,Z,o,le)}IT(pe,i)})}function Uu(r,i,o){return{instance:r,listener:i,currentTarget:o}}function nf(r,i){for(var o=i+"Capture",u=[];r!==null;){var f=r,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=hi(r,o),f!=null&&u.unshift(Uu(r,f,p)),f=hi(r,i),f!=null&&u.push(Uu(r,f,p))),r.tag===3)return u;r=r.return}return[]}function PR(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function NT(r,i,o,u,f){for(var p=i._reactName,v=[];o!==null&&o!==u;){var C=o,j=C.alternate,Z=C.stateNode;if(C=C.tag,j!==null&&j===u)break;C!==5&&C!==26&&C!==27||Z===null||(j=Z,f?(Z=hi(o,p),Z!=null&&v.unshift(Uu(o,Z,j))):f||(Z=hi(o,p),Z!=null&&v.push(Uu(o,Z,j)))),o=o.return}v.length!==0&&r.push({event:i,listeners:v})}var VR=/\r\n?/g,kR=/\u0000|\uFFFD/g;function DT(r){return(typeof r=="string"?r:""+r).replace(VR,`
`).replace(kR,"")}function OT(r,i){return i=DT(i),DT(r)===i}function Ht(r,i,o,u,f,p){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||mr(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&mr(r,""+u);break;case"className":Tn(r,"class",u);break;case"tabIndex":Tn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(r,o,u);break;case"style":iu(r,u,p);break;case"data":if(i!=="object"){Tn(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=xo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&Ht(r,i,"name",f.name,f,null),Ht(r,i,"formEncType",f.formEncType,f,null),Ht(r,i,"formMethod",f.formMethod,f,null),Ht(r,i,"formTarget",f.formTarget,f,null)):(Ht(r,i,"encType",f.encType,f,null),Ht(r,i,"method",f.method,f,null),Ht(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=xo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=ci);break;case"onScroll":u!=null&&gt("scroll",r);break;case"onScrollEnd":u!=null&&gt("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=xo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":gt("beforetoggle",r),gt("toggle",r),on(r,"popover",u);break;case"xlinkActuate":Ut(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ut(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ut(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ut(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ut(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ut(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ut(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ut(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ut(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":on(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=nh.get(o)||o,on(r,o,u))}}function Gp(r,i,o,u,f,p){switch(o){case"style":iu(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof u=="string"?mr(r,u):(typeof u=="number"||typeof u=="bigint")&&mr(r,""+u);break;case"onScroll":u!=null&&gt("scroll",r);break;case"onScrollEnd":u!=null&&gt("scrollend",r);break;case"onClick":u!=null&&(r.onclick=ci);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),p=r[Ie]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(i,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):on(r,o,u)}}}function $n(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gt("error",r),gt("load",r);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var v=o[p];if(v!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ht(r,i,p,v,o,null)}}f&&Ht(r,i,"srcSet",o.srcSet,o,null),u&&Ht(r,i,"src",o.src,o,null);return;case"input":gt("invalid",r);var C=p=v=f=null,j=null,Z=null;for(u in o)if(o.hasOwnProperty(u)){var le=o[u];if(le!=null)switch(u){case"name":f=le;break;case"type":v=le;break;case"checked":j=le;break;case"defaultChecked":Z=le;break;case"value":p=le;break;case"defaultValue":C=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(137,i));break;default:Ht(r,i,u,le,o,null)}}Zc(r,p,C,j,Z,v,f,!1);return;case"select":gt("invalid",r),u=v=p=null;for(f in o)if(o.hasOwnProperty(f)&&(C=o[f],C!=null))switch(f){case"value":p=C;break;case"defaultValue":v=C;break;case"multiple":u=C;default:Ht(r,i,f,C,o,null)}i=p,o=v,r.multiple=!!u,i!=null?Oa(r,!!u,i,!1):o!=null&&Oa(r,!!u,o,!0);return;case"textarea":gt("invalid",r),p=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(C=o[v],C!=null))switch(v){case"value":u=C;break;case"defaultValue":f=C;break;case"children":p=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(a(91));break;default:Ht(r,i,v,C,o,null)}Ma(r,u,f,p);return;case"option":for(j in o)if(o.hasOwnProperty(j)&&(u=o[j],u!=null))switch(j){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ht(r,i,j,u,o,null)}return;case"dialog":gt("beforetoggle",r),gt("toggle",r),gt("cancel",r),gt("close",r);break;case"iframe":case"object":gt("load",r);break;case"video":case"audio":for(u=0;u<ju.length;u++)gt(ju[u],r);break;case"image":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"embed":case"source":case"link":gt("error",r),gt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(u=o[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ht(r,i,Z,u,o,null)}return;default:if(Io(i)){for(le in o)o.hasOwnProperty(le)&&(u=o[le],u!==void 0&&Gp(r,i,le,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&Ht(r,i,C,u,o,null))}function LR(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,v=null,C=null,j=null,Z=null,le=null;for(ae in o){var pe=o[ae];if(o.hasOwnProperty(ae)&&pe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":j=pe;default:u.hasOwnProperty(ae)||Ht(r,i,ae,null,u,pe)}}for(var te in u){var ae=u[te];if(pe=o[te],u.hasOwnProperty(te)&&(ae!=null||pe!=null))switch(te){case"type":p=ae;break;case"name":f=ae;break;case"checked":Z=ae;break;case"defaultChecked":le=ae;break;case"value":v=ae;break;case"defaultValue":C=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,i));break;default:ae!==pe&&Ht(r,i,te,ae,u,pe)}}Ro(r,v,C,j,Z,le,p,f);return;case"select":ae=v=C=te=null;for(p in o)if(j=o[p],o.hasOwnProperty(p)&&j!=null)switch(p){case"value":break;case"multiple":ae=j;default:u.hasOwnProperty(p)||Ht(r,i,p,null,u,j)}for(f in u)if(p=u[f],j=o[f],u.hasOwnProperty(f)&&(p!=null||j!=null))switch(f){case"value":te=p;break;case"defaultValue":C=p;break;case"multiple":v=p;default:p!==j&&Ht(r,i,f,p,u,j)}i=C,o=v,u=ae,te!=null?Oa(r,!!o,te,!1):!!u!=!!o&&(i!=null?Oa(r,!!o,i,!0):Oa(r,!!o,o?[]:"",!1));return;case"textarea":ae=te=null;for(C in o)if(f=o[C],o.hasOwnProperty(C)&&f!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ht(r,i,C,null,u,f)}for(v in u)if(f=u[v],p=o[v],u.hasOwnProperty(v)&&(f!=null||p!=null))switch(v){case"value":te=f;break;case"defaultValue":ae=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==p&&Ht(r,i,v,f,u,p)}eh(r,te,ae);return;case"option":for(var je in o)if(te=o[je],o.hasOwnProperty(je)&&te!=null&&!u.hasOwnProperty(je))switch(je){case"selected":r.selected=!1;break;default:Ht(r,i,je,null,u,te)}for(j in u)if(te=u[j],ae=o[j],u.hasOwnProperty(j)&&te!==ae&&(te!=null||ae!=null))switch(j){case"selected":r.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Ht(r,i,j,te,u,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in o)te=o[Ke],o.hasOwnProperty(Ke)&&te!=null&&!u.hasOwnProperty(Ke)&&Ht(r,i,Ke,null,u,te);for(Z in u)if(te=u[Z],ae=o[Z],u.hasOwnProperty(Z)&&te!==ae&&(te!=null||ae!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,i));break;default:Ht(r,i,Z,te,u,ae)}return;default:if(Io(i)){for(var Ft in o)te=o[Ft],o.hasOwnProperty(Ft)&&te!==void 0&&!u.hasOwnProperty(Ft)&&Gp(r,i,Ft,void 0,u,te);for(le in u)te=u[le],ae=o[le],!u.hasOwnProperty(le)||te===ae||te===void 0&&ae===void 0||Gp(r,i,le,te,u,ae);return}}for(var Y in o)te=o[Y],o.hasOwnProperty(Y)&&te!=null&&!u.hasOwnProperty(Y)&&Ht(r,i,Y,null,u,te);for(pe in u)te=u[pe],ae=o[pe],!u.hasOwnProperty(pe)||te===ae||te==null&&ae==null||Ht(r,i,pe,te,u,ae)}function MT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jR(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],p=f.transferSize,v=f.initiatorType,C=f.duration;if(p&&C&&MT(v)){for(v=0,C=f.responseEnd,u+=1;u<o.length;u++){var j=o[u],Z=j.startTime;if(Z>C)break;var le=j.transferSize,pe=j.initiatorType;le&&MT(pe)&&(j=j.responseEnd,v+=le*(j<C?1:(C-Z)/(j-Z)))}if(--u,i+=8*(p+v)/(f.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var $p=null,Kp=null;function rf(r){return r.nodeType===9?r:r.ownerDocument}function PT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VT(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Yp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Qp=null;function UR(){var r=window.event;return r&&r.type==="popstate"?r===Qp?!1:(Qp=r,!0):(Qp=null,!1)}var kT=typeof setTimeout=="function"?setTimeout:void 0,zR=typeof clearTimeout=="function"?clearTimeout:void 0,LT=typeof Promise=="function"?Promise:void 0,BR=typeof queueMicrotask=="function"?queueMicrotask:typeof LT<"u"?function(r){return LT.resolve(null).then(r).catch(HR)}:kT;function HR(r){setTimeout(function(){throw r})}function ns(r){return r==="head"}function jT(r,i){var o=i,u=0;do{var f=o.nextSibling;if(r.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(f),ul(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")zu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,zu(o);for(var p=o.firstChild;p;){var v=p.nextSibling,C=p.nodeName;p[jt]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=v}}else o==="body"&&zu(r.ownerDocument.body);o=f}while(o);ul(i)}function UT(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Xp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Xp(o),Wt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function FR(r,i,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[jt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=Jr(r.nextSibling),r===null)break}return null}function qR(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Jr(r.nextSibling),r===null))return null;return r}function zT(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Jr(r.nextSibling),r===null))return null;return r}function Wp(r){return r.data==="$?"||r.data==="$~"}function Jp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function GR(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Jr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Zp=null;function BT(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return Jr(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function HT(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function FT(r,i,o){switch(i=rf(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function zu(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Wt(r)}var Zr=new Map,qT=new Set;function af(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ma=ne.d;ne.d={f:$R,r:KR,D:YR,C:QR,L:XR,m:WR,X:ZR,S:JR,M:eI};function $R(){var r=ma.f(),i=Qh();return r||i}function KR(r){var i=rt(r);i!==null&&i.tag===5&&i.type==="form"?oE(i):ma.r(r)}var sl=typeof document>"u"?null:document;function GT(r,i,o){var u=sl;if(u&&typeof i=="string"&&i){var f=dr(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),qT.has(f)||(qT.add(f),r={rel:r,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),$n(i,"link",r),Qt(i),u.head.appendChild(i)))}}function YR(r){ma.D(r),GT("dns-prefetch",r,null)}function QR(r,i){ma.C(r,i),GT("preconnect",r,i)}function XR(r,i,o){ma.L(r,i,o);var u=sl;if(u&&r&&i){var f='link[rel="preload"][as="'+dr(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+dr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+dr(o.imageSizes)+'"]')):f+='[href="'+dr(r)+'"]';var p=f;switch(i){case"style":p=ol(r);break;case"script":p=ll(r)}Zr.has(p)||(r=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Zr.set(p,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(Bu(p))||i==="script"&&u.querySelector(Hu(p))||(i=u.createElement("link"),$n(i,"link",r),Qt(i),u.head.appendChild(i)))}}function WR(r,i){ma.m(r,i);var o=sl;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+dr(u)+'"][href="'+dr(r)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ll(r)}if(!Zr.has(p)&&(r=E({rel:"modulepreload",href:r},i),Zr.set(p,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Hu(p)))return}u=o.createElement("link"),$n(u,"link",r),Qt(u),o.head.appendChild(u)}}}function JR(r,i,o){ma.S(r,i,o);var u=sl;if(u&&r){var f=jn(u).hoistableStyles,p=ol(r);i=i||"default";var v=f.get(p);if(!v){var C={loading:0,preload:null};if(v=u.querySelector(Bu(p)))C.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Zr.get(p))&&eg(r,o);var j=v=u.createElement("link");Qt(j),$n(j,"link",r),j._p=new Promise(function(Z,le){j.onload=Z,j.onerror=le}),j.addEventListener("load",function(){C.loading|=1}),j.addEventListener("error",function(){C.loading|=2}),C.loading|=4,sf(v,i,u)}v={type:"stylesheet",instance:v,count:1,state:C},f.set(p,v)}}}function ZR(r,i){ma.X(r,i);var o=sl;if(o&&r){var u=jn(o).hoistableScripts,f=ll(r),p=u.get(f);p||(p=o.querySelector(Hu(f)),p||(r=E({src:r,async:!0},i),(i=Zr.get(f))&&tg(r,i),p=o.createElement("script"),Qt(p),$n(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function eI(r,i){ma.M(r,i);var o=sl;if(o&&r){var u=jn(o).hoistableScripts,f=ll(r),p=u.get(f);p||(p=o.querySelector(Hu(f)),p||(r=E({src:r,async:!0,type:"module"},i),(i=Zr.get(f))&&tg(r,i),p=o.createElement("script"),Qt(p),$n(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function $T(r,i,o,u){var f=(f=be.current)?af(f):null;if(!f)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=ol(o.href),o=jn(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=ol(o.href);var p=jn(f).hoistableStyles,v=p.get(r);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,v),(p=f.querySelector(Bu(r)))&&!p._p&&(v.instance=p,v.state.loading=5),Zr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Zr.set(r,o),p||tI(f,r,o,v.state))),i&&u===null)throw Error(a(528,""));return v}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ll(o),o=jn(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function ol(r){return'href="'+dr(r)+'"'}function Bu(r){return'link[rel="stylesheet"]['+r+"]"}function KT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function tI(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),$n(i,"link",o),Qt(i),r.head.appendChild(i))}function ll(r){return'[src="'+dr(r)+'"]'}function Hu(r){return"script[async]"+r}function YT(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+dr(o.href)+'"]');if(u)return i.instance=u,Qt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Qt(u),$n(u,"style",f),sf(u,o.precedence,r),i.instance=u;case"stylesheet":f=ol(o.href);var p=r.querySelector(Bu(f));if(p)return i.state.loading|=4,i.instance=p,Qt(p),p;u=KT(o),(f=Zr.get(f))&&eg(u,f),p=(r.ownerDocument||r).createElement("link"),Qt(p);var v=p;return v._p=new Promise(function(C,j){v.onload=C,v.onerror=j}),$n(p,"link",u),i.state.loading|=4,sf(p,o.precedence,r),i.instance=p;case"script":return p=ll(o.src),(f=r.querySelector(Hu(p)))?(i.instance=f,Qt(f),f):(u=o,(f=Zr.get(p))&&(u=E({},o),tg(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),Qt(f),$n(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,sf(u,o.precedence,r));return i.instance}function sf(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,v=0;v<u.length;v++){var C=u[v];if(C.dataset.precedence===i)p=C;else if(p!==f)break}p?p.parentNode.insertBefore(r,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function eg(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function tg(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var of=null;function QT(r,i,o){if(of===null){var u=new Map,f=of=new Map;f.set(o,u)}else f=of,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var p=o[f];if(!(p[jt]||p[Ae]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(i)||"";v=r+v;var C=u.get(v);C?C.push(p):u.set(v,[p])}}return u}function XT(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function nI(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function WT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function rI(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=ol(u.href),p=i.querySelector(Bu(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=lf.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=p,Qt(p);return}p=i.ownerDocument||i,u=KT(u),(f=Zr.get(f))&&eg(u,f),p=p.createElement("link"),Qt(p);var v=p;v._p=new Promise(function(C,j){v.onload=C,v.onerror=j}),$n(p,"link",u),o.instance=p}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=lf.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var ng=0;function iI(r,i){return r.stylesheets&&r.count===0&&cf(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&cf(r,r.stylesheets),r.unsuspend){var p=r.unsuspend;r.unsuspend=null,p()}},6e4+i);0<r.imgBytes&&ng===0&&(ng=62500*jR());var f=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&cf(r,r.stylesheets),r.unsuspend)){var p=r.unsuspend;r.unsuspend=null,p()}},(r.imgBytes>ng?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function lf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var uf=null;function cf(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,uf=new Map,i.forEach(aI,r),uf=null,lf.call(r))}function aI(r,i){if(!(i.state.loading&4)){var o=uf.get(r);if(o)var u=o.get(null);else{o=new Map,uf.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var v=f[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=i.instance,v=f.getAttribute("data-precedence"),p=o.get(v)||u,p===u&&o.set(null,f),o.set(v,f),this.count++,u=lf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var Fu={$$typeof:X,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function sI(r,i,o,u,f,p,v,C,j){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sr(0),this.hiddenUpdates=sr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function JT(r,i,o,u,f,p,v,C,j,Z,le,pe){return r=new sI(r,i,o,v,j,Z,le,pe,C),i=1,p===!0&&(i|=24),p=xr(3,null,null,i),r.current=p,p.stateNode=r,i=Vm(),i.refCount++,r.pooledCache=i,i.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:i},Um(p),r}function ZT(r){return r?(r=Uo,r):Uo}function eb(r,i,o,u,f,p){f=ZT(f),u.context===null?u.context=f:u.pendingContext=f,u=Ga(i),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=$a(r,u,i),o!==null&&(vr(o,r,i),Tu(o,r,i))}function tb(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function rg(r,i){tb(r,i),(r=r.alternate)&&tb(r,i)}function nb(r){if(r.tag===13||r.tag===31){var i=qs(r,67108864);i!==null&&vr(i,r,67108864),rg(r,67108864)}}function rb(r){if(r.tag===13||r.tag===31){var i=Pr();i=ee(i);var o=qs(r,i);o!==null&&vr(o,r,i),rg(r,i)}}var hf=!0;function oI(r,i,o,u){var f=z.T;z.T=null;var p=ne.p;try{ne.p=2,ig(r,i,o,u)}finally{ne.p=p,z.T=f}}function lI(r,i,o,u){var f=z.T;z.T=null;var p=ne.p;try{ne.p=8,ig(r,i,o,u)}finally{ne.p=p,z.T=f}}function ig(r,i,o,u){if(hf){var f=ag(u);if(f===null)qp(r,i,u,ff,o),ab(r,u);else if(cI(f,r,i,o,u))u.stopPropagation();else if(ab(r,u),i&4&&-1<uI.indexOf(r)){for(;f!==null;){var p=rt(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=On(p.pendingLanes);if(v!==0){var C=p;for(C.pendingLanes|=2,C.entangledLanes|=2;v;){var j=1<<31-Fe(v);C.entanglements[1]|=j,v&=~j}Ui(p),(Dt&6)===0&&(Kh=qt()+500,Lu(0))}}break;case 31:case 13:C=qs(p,2),C!==null&&vr(C,p,2),Qh(),rg(p,2)}if(p=ag(u),p===null&&qp(r,i,u,ff,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else qp(r,i,u,null,o)}}function ag(r){return r=Fr(r),sg(r)}var ff=null;function sg(r){if(ff=null,r=Kt(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return ff=r,null}function ib(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sn()){case ar:return 2;case Ar:return 8;case gn:case F:return 32;case he:return 268435456;default:return 32}default:return 32}}var og=!1,rs=null,is=null,as=null,qu=new Map,Gu=new Map,ss=[],uI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ab(r,i){switch(r){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":qu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gu.delete(i.pointerId)}}function $u(r,i,o,u,f,p){return r===null||r.nativeEvent!==p?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},i!==null&&(i=rt(i),i!==null&&nb(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function cI(r,i,o,u,f){switch(i){case"focusin":return rs=$u(rs,r,i,o,u,f),!0;case"dragenter":return is=$u(is,r,i,o,u,f),!0;case"mouseover":return as=$u(as,r,i,o,u,f),!0;case"pointerover":var p=f.pointerId;return qu.set(p,$u(qu.get(p)||null,r,i,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Gu.set(p,$u(Gu.get(p)||null,r,i,o,u,f)),!0}return!1}function sb(r){var i=Kt(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,Pe(r.priority,function(){rb(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,Pe(r.priority,function(){rb(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function df(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=ag(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);au=u,o.target.dispatchEvent(u),au=null}else return i=rt(o),i!==null&&nb(i),r.blockedOn=o,!1;i.shift()}return!0}function ob(r,i,o){df(r)&&o.delete(i)}function hI(){og=!1,rs!==null&&df(rs)&&(rs=null),is!==null&&df(is)&&(is=null),as!==null&&df(as)&&(as=null),qu.forEach(ob),Gu.forEach(ob)}function mf(r,i){r.blockedOn===i&&(r.blockedOn=null,og||(og=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,hI)))}var pf=null;function lb(r){pf!==r&&(pf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){pf===r&&(pf=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(sg(u||o)===null)continue;break}var p=rt(o);p!==null&&(r.splice(i,3),i-=3,ap(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function ul(r){function i(j){return mf(j,r)}rs!==null&&mf(rs,r),is!==null&&mf(is,r),as!==null&&mf(as,r),qu.forEach(i),Gu.forEach(i);for(var o=0;o<ss.length;o++){var u=ss[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ss.length&&(o=ss[0],o.blockedOn===null);)sb(o),o.blockedOn===null&&ss.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],v=f[Ie]||null;if(typeof p=="function")v||lb(o);else if(v){var C=null;if(p&&p.hasAttribute("formAction")){if(f=p,v=p[Ie]||null)C=v.formAction;else if(sg(f)!==null)continue}else C=v.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),lb(o)}}}function ub(){function r(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function lg(r){this._internalRoot=r}gf.prototype.render=lg.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=Pr();eb(o,u,r,i,null,null)},gf.prototype.unmount=lg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;eb(r.current,2,null,r,null,null),Qh(),i[ke]=null}};function gf(r){this._internalRoot=r}gf.prototype.unstable_scheduleHydration=function(r){if(r){var i=Se();r={blockedOn:null,target:r,priority:i};for(var o=0;o<ss.length&&i!==0&&i<ss[o].priority;o++);ss.splice(o,0,r),o===0&&sb(r)}};var cb=e.version;if(cb!=="19.2.4")throw Error(a(527,cb,"19.2.4"));ne.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=g(i),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var fI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yf.isDisabled&&yf.supportsFiber)try{xe=yf.inject(fI),Re=yf}catch{}}return Yu.createRoot=function(r,i){if(!s(r))throw Error(a(299));var o=!1,u="",f=yE,p=_E,v=vE;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=JT(r,1,!1,null,null,o,u,null,f,p,v,ub),r[ke]=i.current,Fp(r),new lg(i)},Yu.hydrateRoot=function(r,i,o){if(!s(r))throw Error(a(299));var u=!1,f="",p=yE,v=_E,C=vE,j=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.formState!==void 0&&(j=o.formState)),i=JT(r,1,!0,i,o??null,u,f,j,p,v,C,ub),i.context=ZT(null),o=i.current,u=Pr(),u=ee(u),f=Ga(u),f.callback=null,$a(o,f,u),o=u,i.current.lanes=o,Ci(i,o),Ui(i),r[ke]=i.current,Fp(r),new gf(i)},Yu.version="19.2.4",Yu}var Eb;function wI(){if(Eb)return fg.exports;Eb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fg.exports=AI(),fg.exports}var CI=wI();const RI=KS(CI);var gg={exports:{}},yg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb;function II(){if(Tb)return yg;Tb=1;var n=Md();function e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var t=typeof Object.is=="function"?Object.is:e,a=n.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return yg.useSyncExternalStoreWithSelector=function(m,g,y,E,S){var w=s(null);if(w.current===null){var O={hasValue:!1,value:null};w.current=O}else O=w.current;w=c(function(){function k(ue){if(!K){if(K=!0,H=ue,ue=E(ue),S!==void 0&&O.hasValue){var G=O.value;if(S(G,ue))return X=G}return X=ue}if(G=X,t(H,ue))return G;var A=E(ue);return S!==void 0&&S(G,A)?(H=ue,G):(H=ue,X=A)}var K=!1,H,X,se=y===void 0?null:y;return[function(){return k(g())},se===null?void 0:function(){return k(se())}]},[g,y,E,S]);var q=a(m,w[0],w[1]);return l(function(){O.hasValue=!0,O.value=q},[q]),d(q),q},yg}var bb;function xI(){return bb||(bb=1,gg.exports=II()),gg.exports}var NI=xI();function DI(n){n()}function OI(){let n=null,e=null;return{clear(){n=null,e=null},notify(){DI(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let a=n;for(;a;)t.push(a),a=a.next;return t},subscribe(t){let a=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!a||n===null||(a=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var Sb={notify(){},get:()=>[]};function MI(n,e){let t,a=Sb,s=0,l=!1;function c(q){y();const k=a.subscribe(q);let K=!1;return()=>{K||(K=!0,k(),E())}}function d(){a.notify()}function m(){O.onStateChange&&O.onStateChange()}function g(){return l}function y(){s++,t||(t=n.subscribe(m),a=OI())}function E(){s--,t&&s===0&&(t(),t=void 0,a.clear(),a=Sb)}function S(){l||(l=!0,y())}function w(){l&&(l=!1,E())}const O={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:m,isSubscribed:g,trySubscribe:S,tryUnsubscribe:w,getListeners:()=>a};return O}var PI=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VI=PI(),kI=()=>typeof navigator<"u"&&navigator.product==="ReactNative",LI=kI(),jI=()=>VI||LI?P.useLayoutEffect:P.useEffect,UI=jI(),_g=Symbol.for("react-redux-context"),vg=typeof globalThis<"u"?globalThis:{};function zI(){if(!P.createContext)return{};const n=vg[_g]??(vg[_g]=new Map);let e=n.get(P.createContext);return e||(e=P.createContext(null),n.set(P.createContext,e)),e}var Ss=zI();function BI(n){const{children:e,context:t,serverState:a,store:s}=n,l=P.useMemo(()=>{const m=MI(s);return{store:s,subscription:m,getServerState:a?()=>a:void 0}},[s,a]),c=P.useMemo(()=>s.getState(),[s]);UI(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==s.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,c]);const d=t||Ss;return P.createElement(d.Provider,{value:l},e)}var HI=BI;function xy(n=Ss){return function(){return P.useContext(n)}}var XS=xy();function WS(n=Ss){const e=n===Ss?XS:xy(n),t=()=>{const{store:a}=e();return a};return Object.assign(t,{withTypes:()=>t}),t}var FI=WS();function qI(n=Ss){const e=n===Ss?FI:WS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var GI=qI(),$I=(n,e)=>n===e;function KI(n=Ss){const e=n===Ss?XS:xy(n),t=(a,s={})=>{const{equalityFn:l=$I}=typeof s=="function"?{equalityFn:s}:s,c=e(),{store:d,subscription:m,getServerState:g}=c;P.useRef(!0);const y=P.useCallback({[a.name](S){return a(S)}}[a.name],[a]),E=NI.useSyncExternalStoreWithSelector(m.addNestedSub,d.getState,g||d.getState,y,l);return P.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var YI=KI();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var JS=n=>{throw TypeError(n)},QI=(n,e,t)=>e.has(n)||JS("Cannot "+t),Eg=(n,e,t)=>(QI(n,e,"read from private field"),t?t.call(n):e.get(n)),XI=(n,e,t)=>e.has(n)?JS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Ab="popstate";function WI(n={}){function e(s,l){let{pathname:c="/",search:d="",hash:m=""}=xa(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),gc("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=s.location.href,g=m.indexOf("#");d=g===-1?m:m.slice(0,g)}return d+"#"+(typeof l=="string"?l:$i(l))}function a(s,l){cn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return ZI(e,t,a,n)}function ct(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function cn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JI(){return Math.random().toString(36).substring(2,10)}function wb(n,e){return{usr:n.state,key:n.key,idx:e}}function gc(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?xa(e):e,state:t,key:e&&e.key||a||JI()}}function $i({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function xa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function ZI(n,e,t,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,d="POP",m=null,g=y();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function y(){return(c.state||{idx:null}).idx}function E(){d="POP";let k=y(),K=k==null?null:k-g;g=k,m&&m({action:d,location:q.location,delta:K})}function S(k,K){d="PUSH";let H=gc(q.location,k,K);t&&t(H,k),g=y()+1;let X=wb(H,g),se=q.createHref(H);try{c.pushState(X,"",se)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;s.location.assign(se)}l&&m&&m({action:d,location:q.location,delta:1})}function w(k,K){d="REPLACE";let H=gc(q.location,k,K);t&&t(H,k),g=y();let X=wb(H,g),se=q.createHref(H);c.replaceState(X,"",se),l&&m&&m({action:d,location:q.location,delta:0})}function O(k){return ZS(k)}let q={get action(){return d},get location(){return n(s,c)},listen(k){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(Ab,E),m=k,()=>{s.removeEventListener(Ab,E),m=null}},createHref(k){return e(s,k)},createURL:O,encodeLocation(k){let K=O(k);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:S,replace:w,go(k){return c.go(k)}};return q}function ZS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ct(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:$i(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}var Zu,Cb=class{constructor(n){if(XI(this,Zu,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Eg(this,Zu).has(n))return Eg(this,Zu).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Eg(this,Zu).set(n,e)}};Zu=new WeakMap;var ex=new Set(["lazy","caseSensitive","path","id","index","children"]);function tx(n){return ex.has(n)}var nx=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function rx(n){return nx.has(n)}function ix(n){return n.index===!0}function yc(n,e,t=[],a={},s=!1){return n.map((l,c)=>{let d=[...t,String(c)],m=typeof l.id=="string"?l.id:d.join("-");if(ct(l.index!==!0||!l.children,"Cannot specify children on an index route"),ct(s||!a[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),ix(l)){let g={...l,id:m};return a[m]=Rb(g,e(g)),g}else{let g={...l,id:m,children:void 0};return a[m]=Rb(g,e(g)),l.children&&(g.children=yc(l.children,e,d,a,s)),g}})}function Rb(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function cs(n,e,t="/"){return ec(n,e,t,!1)}function ec(n,e,t,a){let s=typeof e=="string"?xa(e):e,l=ii(s.pathname||"/",t);if(l==null)return null;let c=eA(n);sx(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=yx(l);d=px(c[m],g,a)}return d}function ax(n,e){let{route:t,pathname:a,params:s}=n;return{id:t.id,pathname:a,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function eA(n,e=[],t=[],a="",s=!1){let l=(c,d,m=s,g)=>{let y={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(a)&&m)return;ct(y.relativePath.startsWith(a),`Absolute route path "${y.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(a.length)}let E=Bi([a,y.relativePath]),S=t.concat(y);c.children&&c.children.length>0&&(ct(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),eA(c.children,e,S,E,m)),!(c.path==null&&!c.index)&&e.push({path:E,score:dx(E,c.index),routesMeta:S})};return n.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))l(c,d);else for(let g of tA(c.path))l(c,d,!0,g)}),e}function tA(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=tA(a.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),s&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function sx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mx(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var ox=/^:[\w-]+$/,lx=3,ux=2,cx=1,hx=10,fx=-2,Ib=n=>n==="*";function dx(n,e){let t=n.split("/"),a=t.length;return t.some(Ib)&&(a+=fx),e&&(a+=ux),t.filter(s=>!Ib(s)).reduce((s,l)=>s+(ox.test(l)?lx:l===""?cx:hx),a)}function mx(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function px(n,e,t=!1){let{routesMeta:a}=n,s={},l="/",c=[];for(let d=0;d<a.length;++d){let m=a[d],g=d===a.length-1,y=l==="/"?e:e.slice(l.length)||"/",E=rd({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),S=m.route;if(!E&&g&&t&&!a[a.length-1].route.index&&(E=rd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:Bi([l,E.pathname]),pathnameBase:Ex(Bi([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Bi([l,E.pathnameBase]))}return c}function rd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=gx(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((g,{paramName:y,isOptional:E},S)=>{if(y==="*"){let O=d[S]||"";c=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const w=d[S];return E&&!w?g[y]=void 0:g[y]=(w||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function gx(n,e=!1,t=!0){cn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(a.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function yx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ii(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function _x({basename:n,pathname:e}){return e==="/"?n:Bi([n,e])}var nA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ny=n=>nA.test(n);function vx(n,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof n=="string"?xa(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=xb(t.substring(1),"/"):l=xb(t,e)):l=e,{pathname:l,search:Tx(a),hash:bx(s)}}function xb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Tg(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Pd(n){let e=rA(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function Vd(n,e,t,a=!1){let s;typeof n=="string"?s=xa(n):(s={...n},ct(!s.pathname||!s.pathname.includes("?"),Tg("?","pathname","search",s)),ct(!s.pathname||!s.pathname.includes("#"),Tg("#","pathname","hash",s)),ct(!s.search||!s.search.includes("#"),Tg("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!a&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;s.pathname=S.join("/")}d=E>=0?e[E]:"/"}let m=vx(s,d),g=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var Bi=n=>n.join("/").replace(/\/\/+/g,"/"),Ex=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Tx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,bx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Dc=class{constructor(n,e,t,a=!1){this.status=n,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function _c(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Oc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var iA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function aA(n,e){let t=n;if(typeof t!="string"||!nA.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,s=!1;if(iA)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=ii(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:s=!0}catch{cn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:t}}var ps=Symbol("Uninstrumented");function Sx(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let d of c)l[d]&&t[d].push(l[d])}}));let a={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=Tl(t.lazy,e.lazy,()=>{});s&&(a.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],d=t[`lazy.${l}`];if(typeof c=="function"&&d.length>0){let m=Tl(d,c,()=>{});m&&(a.lazy=Object.assign(a.lazy||{},{[l]:m}))}})}return["loader","action"].forEach(s=>{let l=e[s];if(typeof l=="function"&&t[s].length>0){let c=l[ps]??l,d=Tl(t[s],c,(...m)=>Nb(m[0]));d&&(s==="loader"&&c.hydrate===!0&&(d.hydrate=!0),d[ps]=c,a[s]=d)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(a.middleware=e.middleware.map(s=>{let l=s[ps]??s,c=Tl(t.middleware,l,(...d)=>Nb(d[0]));return c?(c[ps]=l,c):s})),a}function Ax(n,e){let t={navigate:[],fetch:[]};if(e.forEach(a=>a({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&t[c].push(s[c])}})),t.navigate.length>0){let a=n.navigate[ps]??n.navigate,s=Tl(t.navigate,a,(...l)=>{let[c,d]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?$i(c):".",...Db(n,d??{})}});s&&(s[ps]=a,n.navigate=s)}if(t.fetch.length>0){let a=n.fetch[ps]??n.fetch,s=Tl(t.fetch,a,(...l)=>{let[c,,d,m]=l;return{href:d??".",fetcherKey:c,...Db(n,m??{})}});s&&(s[ps]=a,n.fetch=s)}return n}function Tl(n,e,t){return n.length===0?null:async(...a)=>{let s=await sA(n,t(...a),()=>e(...a),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function sA(n,e,t,a){let s=n[a],l;if(s){let c,d=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=sA(n,e,t,a-1),l=await c,ct(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(d,e)}catch(m){console.error("An instrumentation function threw an error:",m)}c||await d(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Nb(n){let{request:e,context:t,params:a,unstable_pattern:s}=n;return{request:wx(e),params:{...a},unstable_pattern:s,context:Cx(t)}}function Db(n,e){return{currentUrl:$i(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function wx(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function Cx(n){if(Ix(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var Rx=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ix(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===Rx}var oA=["POST","PUT","PATCH","DELETE"],xx=new Set(oA),Nx=["GET",...oA],Dx=new Set(Nx),lA=new Set([301,302,303,307,308]),Ox=new Set([307,308]),bg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Mx={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Qu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Px=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),uA="remix-router-transitions",cA=Symbol("ResetLoaderData");function Vx(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";ct(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=n.hydrationRouteProperties||[],s=n.mapRouteProperties||Px,l=s;if(n.unstable_instrumentations){let L=n.unstable_instrumentations;l=$=>({...s($),...Sx(L.map(ee=>ee.route).filter(Boolean),$)})}let c={},d=yc(n.routes,l,void 0,c),m,g=n.basename||"/";g.startsWith("/")||(g=`/${g}`);let y=n.dataStrategy||zx,E={...n.future},S=null,w=new Set,O=null,q=null,k=null,K=n.hydrationData!=null,H=cs(d,n.history.location,g),X=!1,se=null,ue;if(H==null&&!n.patchRoutesOnNavigation){let L=ei(404,{pathname:n.history.location.pathname}),{matches:$,route:ee}=_f(d);ue=!0,H=$,se={[ee.id]:L}}else if(H&&!n.hydrationData&&Qi(H,d,n.history.location.pathname).active&&(H=null),H)if(H.some(L=>L.route.lazy))ue=!1;else if(!H.some(L=>Dy(L.route)))ue=!0;else{let L=n.hydrationData?n.hydrationData.loaderData:null,$=n.hydrationData?n.hydrationData.errors:null;if($){let ee=H.findIndex(_e=>$[_e.route.id]!==void 0);ue=H.slice(0,ee+1).every(_e=>!$g(_e.route,L,$))}else ue=H.every(ee=>!$g(ee.route,L,$))}else{ue=!1,H=[];let L=Qi(null,d,n.history.location.pathname);L.active&&L.matches&&(X=!0,H=L.matches)}let G,A={historyAction:n.history.action,location:n.history.location,matches:H,initialized:ue,navigation:bg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||se,fetchers:new Map,blockers:new Map},R="POP",x=null,N=!1,M,V=!1,D=new Map,me=null,ye=!1,z=!1,ne=new Set,ce=new Map,De=0,Ue=-1,U=new Map,ie=new Set,Te=new Map,oe=new Map,Ee=new Set,be=new Map,Ne,Be=null;function $e(){if(S=n.history.listen(({action:L,location:$,delta:ee})=>{if(Ne){Ne(),Ne=void 0;return}cn(be.size===0||ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let _e=Dn({currentLocation:A.location,nextLocation:$,historyAction:L});if(_e&&ee!=null){let Se=new Promise(Pe=>{Ne=Pe});n.history.go(ee*-1),$t(_e,{state:"blocked",location:$,proceed(){$t(_e,{state:"proceeding",proceed:void 0,reset:void 0,location:$}),Se.then(()=>n.history.go(ee))},reset(){let Pe=new Map(A.blockers);Pe.set(_e,Qu),dt({blockers:Pe})}}),x==null||x.resolve(),x=null;return}return an(L,$)}),t){iN(e,D);let L=()=>aN(e,D);e.addEventListener("pagehide",L),me=()=>e.removeEventListener("pagehide",L)}return A.initialized||an("POP",A.location,{initialHydration:!0}),G}function yt(){S&&S(),me&&me(),w.clear(),M&&M.abort(),A.fetchers.forEach((L,$)=>ve($)),A.blockers.forEach((L,$)=>st($))}function Lt(L){return w.add(L),()=>w.delete(L)}function dt(L,$={}){L.matches&&(L.matches=L.matches.map(Se=>{let Pe=c[Se.route.id],Le=Se.route;return Le.element!==Pe.element||Le.errorElement!==Pe.errorElement||Le.hydrateFallbackElement!==Pe.hydrateFallbackElement?{...Se,route:Pe}:Se})),A={...A,...L};let ee=[],_e=[];A.fetchers.forEach((Se,Pe)=>{Se.state==="idle"&&(Ee.has(Pe)?ee.push(Pe):_e.push(Pe))}),Ee.forEach(Se=>{!A.fetchers.has(Se)&&!ce.has(Se)&&ee.push(Se)}),[...w].forEach(Se=>Se(A,{deletedFetchers:ee,newErrors:L.errors??null,viewTransitionOpts:$.viewTransitionOpts,flushSync:$.flushSync===!0})),ee.forEach(Se=>ve(Se)),_e.forEach(Se=>A.fetchers.delete(Se))}function tn(L,$,{flushSync:ee}={}){var Ye,He;let _e=A.actionData!=null&&A.navigation.formMethod!=null&&tr(A.navigation.formMethod)&&A.navigation.state==="loading"&&((Ye=L.state)==null?void 0:Ye._isRedirect)!==!0,Se;$.actionData?Object.keys($.actionData).length>0?Se=$.actionData:Se=null:_e?Se=A.actionData:Se=null;let Pe=$.loaderData?Bb(A.loaderData,$.loaderData,$.matches||[],$.errors):A.loaderData,Le=A.blockers;Le.size>0&&(Le=new Map(Le),Le.forEach((We,ut)=>Le.set(ut,Qu)));let Ae=ye?!1:Co(L,$.matches||A.matches),Ie=N===!0||A.navigation.formMethod!=null&&tr(A.navigation.formMethod)&&((He=L.state)==null?void 0:He._isRedirect)!==!0;m&&(d=m,m=void 0),ye||R==="POP"||(R==="PUSH"?n.history.push(L,L.state):R==="REPLACE"&&n.history.replace(L,L.state));let ke;if(R==="POP"){let We=D.get(A.location.pathname);We&&We.has(L.pathname)?ke={currentLocation:A.location,nextLocation:L}:D.has(L.pathname)&&(ke={currentLocation:L,nextLocation:A.location})}else if(V){let We=D.get(A.location.pathname);We?We.add(L.pathname):(We=new Set([L.pathname]),D.set(A.location.pathname,We)),ke={currentLocation:A.location,nextLocation:L}}dt({...$,actionData:Se,loaderData:Pe,historyAction:R,location:L,initialized:!0,navigation:bg,revalidation:"idle",restoreScrollPosition:Ae,preventScrollReset:Ie,blockers:Le},{viewTransitionOpts:ke,flushSync:ee===!0}),R="POP",N=!1,V=!1,ye=!1,z=!1,x==null||x.resolve(),x=null,Be==null||Be.resolve(),Be=null}async function fn(L,$){if(x==null||x.resolve(),x=null,typeof L=="number"){x||(x=Gb());let ut=x.promise;return n.history.go(L),ut}let ee=Gg(A.location,A.matches,g,L,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:_e,submission:Se,error:Pe}=Ob(!1,ee,$),Le=A.location,Ae=gc(A.location,_e,$&&$.state);Ae={...Ae,...n.history.encodeLocation(Ae)};let Ie=$&&$.replace!=null?$.replace:void 0,ke="PUSH";Ie===!0?ke="REPLACE":Ie===!1||Se!=null&&tr(Se.formMethod)&&Se.formAction===A.location.pathname+A.location.search&&(ke="REPLACE");let Ye=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,He=($&&$.flushSync)===!0,We=Dn({currentLocation:Le,nextLocation:Ae,historyAction:ke});if(We){$t(We,{state:"blocked",location:Ae,proceed(){$t(We,{state:"proceeding",proceed:void 0,reset:void 0,location:Ae}),fn(L,$)},reset(){let ut=new Map(A.blockers);ut.set(We,Qu),dt({blockers:ut})}});return}await an(ke,Ae,{submission:Se,pendingError:Pe,preventScrollReset:Ye,replace:$&&$.replace,enableViewTransition:$&&$.viewTransition,flushSync:He,callSiteDefaultShouldRevalidate:$&&$.unstable_defaultShouldRevalidate})}function Hr(){Be||(Be=Gb()),Ar(),dt({revalidation:"loading"});let L=Be.promise;return A.navigation.state==="submitting"?L:A.navigation.state==="idle"?(an(A.historyAction,A.location,{startUninterruptedRevalidation:!0}),L):(an(R||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:V===!0}),L)}async function an(L,$,ee){M&&M.abort(),M=null,R=L,ye=(ee&&ee.startUninterruptedRevalidation)===!0,wr(A.location,A.matches),N=(ee&&ee.preventScrollReset)===!0,V=(ee&&ee.enableViewTransition)===!0;let _e=m||d,Se=ee&&ee.overrideNavigation,Pe=ee!=null&&ee.initialHydration&&A.matches&&A.matches.length>0&&!X?A.matches:cs(_e,$,g),Le=(ee&&ee.flushSync)===!0;if(Pe&&A.initialized&&!z&&Yx(A.location,$)&&!(ee&&ee.submission&&tr(ee.submission.formMethod))){tn($,{matches:Pe},{flushSync:Le});return}let Ae=Qi(Pe,_e,$.pathname);if(Ae.active&&Ae.matches&&(Pe=Ae.matches),!Pe){let{error:Wt,notFoundMatches:Kt,route:rt}=Ct($.pathname);tn($,{matches:Kt,loaderData:{},errors:{[rt.id]:Wt}},{flushSync:Le});return}M=new AbortController;let Ie=ml(n.history,$,M.signal,ee&&ee.submission),ke=n.getContext?await n.getContext():new Cb,Ye;if(ee&&ee.pendingError)Ye=[hs(Pe).route.id,{type:"error",error:ee.pendingError}];else if(ee&&ee.submission&&tr(ee.submission.formMethod)){let Wt=await Bn(Ie,$,ee.submission,Pe,ke,Ae.active,ee&&ee.initialHydration===!0,{replace:ee.replace,flushSync:Le});if(Wt.shortCircuited)return;if(Wt.pendingActionResult){let[Kt,rt]=Wt.pendingActionResult;if(Vr(rt)&&_c(rt.error)&&rt.error.status===404){M=null,tn($,{matches:Wt.matches,loaderData:{},errors:{[Kt]:rt.error}});return}}Pe=Wt.matches||Pe,Ye=Wt.pendingActionResult,Se=Sg($,ee.submission),Le=!1,Ae.active=!1,Ie=ml(n.history,Ie.url,Ie.signal)}let{shortCircuited:He,matches:We,loaderData:ut,errors:jt}=await Sr(Ie,$,Pe,ke,Ae.active,Se,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,Le,Ye,ee&&ee.callSiteDefaultShouldRevalidate);He||(M=null,tn($,{matches:We||Pe,...Hb(Ye),loaderData:ut,errors:jt}))}async function Bn(L,$,ee,_e,Se,Pe,Le,Ae={}){Ar();let Ie=nN($,ee);if(dt({navigation:Ie},{flushSync:Ae.flushSync===!0}),Pe){let He=await sr(_e,$.pathname,L.signal);if(He.type==="aborted")return{shortCircuited:!0};if(He.type==="error"){if(He.partialMatches.length===0){let{matches:ut,route:jt}=_f(d);return{matches:ut,pendingActionResult:[jt.id,{type:"error",error:He.error}]}}let We=hs(He.partialMatches).route.id;return{matches:He.partialMatches,pendingActionResult:[We,{type:"error",error:He.error}]}}else if(He.matches)_e=He.matches;else{let{notFoundMatches:We,error:ut,route:jt}=Ct($.pathname);return{matches:We,pendingActionResult:[jt.id,{type:"error",error:ut}]}}}let ke,Ye=Mf(_e,$);if(!Ye.route.action&&!Ye.route.lazy)ke={type:"error",error:ei(405,{method:L.method,pathname:$.pathname,routeId:Ye.route.id})};else{let He=Al(l,c,L,_e,Ye,Le?[]:a,Se),We=await sn(L,He,Se,null);if(ke=We[Ye.route.id],!ke){for(let ut of _e)if(We[ut.route.id]){ke=We[ut.route.id];break}}if(L.signal.aborted)return{shortCircuited:!0}}if(so(ke)){let He;return Ae&&Ae.replace!=null?He=Ae.replace:He=jb(ke.response.headers.get("Location"),new URL(L.url),g,n.history)===A.location.pathname+A.location.search,await qt(L,ke,!0,{submission:ee,replace:He}),{shortCircuited:!0}}if(Vr(ke)){let He=hs(_e,Ye.route.id);return(Ae&&Ae.replace)!==!0&&(R="PUSH"),{matches:_e,pendingActionResult:[He.route.id,ke,Ye.route.id]}}return{matches:_e,pendingActionResult:[Ye.route.id,ke]}}async function Sr(L,$,ee,_e,Se,Pe,Le,Ae,Ie,ke,Ye,He,We){let ut=Pe||Sg($,Le),jt=Le||Ae||qb(ut),Wt=!ye&&!ke;if(Se){if(Wt){let on=Pt(He);dt({navigation:ut,...on!==void 0?{actionData:on}:{}},{flushSync:Ye})}let ft=await sr(ee,$.pathname,L.signal);if(ft.type==="aborted")return{shortCircuited:!0};if(ft.type==="error"){if(ft.partialMatches.length===0){let{matches:Tn,route:Ut}=_f(d);return{matches:Tn,loaderData:{},errors:{[Ut.id]:ft.error}}}let on=hs(ft.partialMatches).route.id;return{matches:ft.partialMatches,loaderData:{},errors:{[on]:ft.error}}}else if(ft.matches)ee=ft.matches;else{let{error:on,notFoundMatches:Tn,route:Ut}=Ct($.pathname);return{matches:Tn,loaderData:{},errors:{[Ut.id]:on}}}}let Kt=m||d,{dsMatches:rt,revalidatingFetchers:Yt}=Mb(L,_e,l,c,n.history,A,ee,jt,$,ke?[]:a,ke===!0,z,ne,Ee,Te,ie,Kt,g,n.patchRoutesOnNavigation!=null,He,We);if(Ue=++De,!n.dataStrategy&&!rt.some(ft=>ft.shouldLoad)&&!rt.some(ft=>ft.route.middleware&&ft.route.middleware.length>0)&&Yt.length===0){let ft=Fe();return tn($,{matches:ee,loaderData:{},errors:He&&Vr(He[1])?{[He[0]]:He[1].error}:null,...Hb(He),...ft?{fetchers:new Map(A.fetchers)}:{}},{flushSync:Ye}),{shortCircuited:!0}}if(Wt){let ft={};if(!Se){ft.navigation=ut;let on=Pt(He);on!==void 0&&(ft.actionData=on)}Yt.length>0&&(ft.fetchers=lt(Yt)),dt(ft,{flushSync:Ye})}Yt.forEach(ft=>{Re(ft.key),ft.controller&&ce.set(ft.key,ft.controller)});let jn=()=>Yt.forEach(ft=>Re(ft.key));M&&M.signal.addEventListener("abort",jn);let{loaderResults:Qt,fetcherResults:hr}=await ar(rt,Yt,L,_e);if(L.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",jn),Yt.forEach(ft=>ce.delete(ft.key));let Wn=vf(Qt);if(Wn)return await qt(L,Wn.result,!0,{replace:Ie}),{shortCircuited:!0};if(Wn=vf(hr),Wn)return ie.add(Wn.key),await qt(L,Wn.result,!0,{replace:Ie}),{shortCircuited:!0};let{loaderData:fr,errors:Jn}=zb(A,ee,Qt,He,Yt,hr);ke&&A.errors&&(Jn={...A.errors,...Jn});let Cr=Fe(),Ri=ht(Ue),Ii=Cr||Ri||Yt.length>0;return{matches:ee,loaderData:fr,errors:Jn,...Ii?{fetchers:new Map(A.fetchers)}:{}}}function Pt(L){if(L&&!Vr(L[1]))return{[L[0]]:L[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function lt(L){return L.forEach($=>{let ee=A.fetchers.get($.key),_e=Xu(void 0,ee?ee.data:void 0);A.fetchers.set($.key,_e)}),new Map(A.fetchers)}async function Nn(L,$,ee,_e){Re(L);let Se=(_e&&_e.flushSync)===!0,Pe=m||d,Le=Gg(A.location,A.matches,g,ee,$,_e==null?void 0:_e.relative),Ae=cs(Pe,Le,g),Ie=Qi(Ae,Pe,Le);if(Ie.active&&Ie.matches&&(Ae=Ie.matches),!Ae){F(L,$,ei(404,{pathname:Le}),{flushSync:Se});return}let{path:ke,submission:Ye,error:He}=Ob(!0,Le,_e);if(He){F(L,$,He,{flushSync:Se});return}let We=n.getContext?await n.getContext():new Cb,ut=(_e&&_e.preventScrollReset)===!0;if(Ye&&tr(Ye.formMethod)){await wi(L,$,ke,Ae,We,Ie.active,Se,ut,Ye,_e&&_e.unstable_defaultShouldRevalidate);return}Te.set(L,{routeId:$,path:ke}),await ui(L,$,ke,Ae,We,Ie.active,Se,ut,Ye)}async function wi(L,$,ee,_e,Se,Pe,Le,Ae,Ie,ke){Ar(),Te.delete(L);let Ye=A.fetchers.get(L);gn(L,rN(Ie,Ye),{flushSync:Le});let He=new AbortController,We=ml(n.history,ee,He.signal,Ie);if(Pe){let it=await sr(_e,new URL(We.url).pathname,We.signal,L);if(it.type==="aborted")return;if(it.type==="error"){F(L,$,it.error,{flushSync:Le});return}else if(it.matches)_e=it.matches;else{F(L,$,ei(404,{pathname:ee}),{flushSync:Le});return}}let ut=Mf(_e,ee);if(!ut.route.action&&!ut.route.lazy){let it=ei(405,{method:Ie.formMethod,pathname:ee,routeId:$});F(L,$,it,{flushSync:Le});return}ce.set(L,He);let jt=De,Wt=Al(l,c,We,_e,ut,a,Se),Kt=await sn(We,Wt,Se,L),rt=Kt[ut.route.id];if(!rt){for(let it of Wt)if(Kt[it.route.id]){rt=Kt[it.route.id];break}}if(We.signal.aborted){ce.get(L)===He&&ce.delete(L);return}if(Ee.has(L)){if(so(rt)||Vr(rt)){gn(L,pa(void 0));return}}else{if(so(rt))if(ce.delete(L),Ue>jt){gn(L,pa(void 0));return}else return ie.add(L),gn(L,Xu(Ie)),qt(We,rt,!1,{fetcherSubmission:Ie,preventScrollReset:Ae});if(Vr(rt)){F(L,$,rt.error);return}}let Yt=A.navigation.location||A.location,jn=ml(n.history,Yt,He.signal),Qt=m||d,hr=A.navigation.state!=="idle"?cs(Qt,A.navigation.location,g):A.matches;ct(hr,"Didn't find any matches after fetcher action");let Wn=++De;U.set(L,Wn);let fr=Xu(Ie,rt.data);A.fetchers.set(L,fr);let{dsMatches:Jn,revalidatingFetchers:Cr}=Mb(jn,Se,l,c,n.history,A,hr,Ie,Yt,a,!1,z,ne,Ee,Te,ie,Qt,g,n.patchRoutesOnNavigation!=null,[ut.route.id,rt],ke);Cr.filter(it=>it.key!==L).forEach(it=>{let Rr=it.key,Da=A.fetchers.get(Rr),xt=Xu(void 0,Da?Da.data:void 0);A.fetchers.set(Rr,xt),Re(Rr),it.controller&&ce.set(Rr,it.controller)}),dt({fetchers:new Map(A.fetchers)});let Ri=()=>Cr.forEach(it=>Re(it.key));He.signal.addEventListener("abort",Ri);let{loaderResults:Ii,fetcherResults:ft}=await ar(Jn,Cr,jn,Se);if(He.signal.aborted)return;if(He.signal.removeEventListener("abort",Ri),U.delete(L),ce.delete(L),Cr.forEach(it=>ce.delete(it.key)),A.fetchers.has(L)){let it=pa(rt.data);A.fetchers.set(L,it)}let on=vf(Ii);if(on)return qt(jn,on.result,!1,{preventScrollReset:Ae});if(on=vf(ft),on)return ie.add(on.key),qt(jn,on.result,!1,{preventScrollReset:Ae});let{loaderData:Tn,errors:Ut}=zb(A,hr,Ii,void 0,Cr,ft);ht(Wn),A.navigation.state==="loading"&&Wn>Ue?(ct(R,"Expected pending action"),M&&M.abort(),tn(A.navigation.location,{matches:hr,loaderData:Tn,errors:Ut,fetchers:new Map(A.fetchers)})):(dt({errors:Ut,loaderData:Bb(A.loaderData,Tn,hr,Ut),fetchers:new Map(A.fetchers)}),z=!1)}async function ui(L,$,ee,_e,Se,Pe,Le,Ae,Ie){let ke=A.fetchers.get(L);gn(L,Xu(Ie,ke?ke.data:void 0),{flushSync:Le});let Ye=new AbortController,He=ml(n.history,ee,Ye.signal);if(Pe){let rt=await sr(_e,new URL(He.url).pathname,He.signal,L);if(rt.type==="aborted")return;if(rt.type==="error"){F(L,$,rt.error,{flushSync:Le});return}else if(rt.matches)_e=rt.matches;else{F(L,$,ei(404,{pathname:ee}),{flushSync:Le});return}}let We=Mf(_e,ee);ce.set(L,Ye);let ut=De,jt=Al(l,c,He,_e,We,a,Se),Kt=(await sn(He,jt,Se,L))[We.route.id];if(ce.get(L)===Ye&&ce.delete(L),!He.signal.aborted){if(Ee.has(L)){gn(L,pa(void 0));return}if(so(Kt))if(Ue>ut){gn(L,pa(void 0));return}else{ie.add(L),await qt(He,Kt,!1,{preventScrollReset:Ae});return}if(Vr(Kt)){F(L,$,Kt.error);return}gn(L,pa(Kt.data))}}async function qt(L,$,ee,{submission:_e,fetcherSubmission:Se,preventScrollReset:Pe,replace:Le}={}){ee||(x==null||x.resolve(),x=null),$.response.headers.has("X-Remix-Revalidate")&&(z=!0);let Ae=$.response.headers.get("Location");ct(Ae,"Expected a Location header on the redirect Response"),Ae=jb(Ae,new URL(L.url),g,n.history);let Ie=gc(A.location,Ae,{_isRedirect:!0});if(t){let jt=!1;if($.response.headers.has("X-Remix-Reload-Document"))jt=!0;else if(Ny(Ae)){const Wt=ZS(Ae,!0);jt=Wt.origin!==e.location.origin||ii(Wt.pathname,g)==null}if(jt){Le?e.location.replace(Ae):e.location.assign(Ae);return}}M=null;let ke=Le===!0||$.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ye,formAction:He,formEncType:We}=A.navigation;!_e&&!Se&&Ye&&He&&We&&(_e=qb(A.navigation));let ut=_e||Se;if(Ox.has($.response.status)&&ut&&tr(ut.formMethod))await an(ke,Ie,{submission:{...ut,formAction:Ae},preventScrollReset:Pe||N,enableViewTransition:ee?V:void 0});else{let jt=Sg(Ie,_e);await an(ke,Ie,{overrideNavigation:jt,fetcherSubmission:Se,preventScrollReset:Pe||N,enableViewTransition:ee?V:void 0})}}async function sn(L,$,ee,_e){var Le;let Se,Pe={};try{Se=await Hx(y,L,$,_e,ee,!1)}catch(Ae){return $.filter(Ie=>Ie.shouldLoad).forEach(Ie=>{Pe[Ie.route.id]={type:"error",error:Ae}}),Pe}if(L.signal.aborted)return Pe;if(!tr(L.method))for(let Ae of $){if(((Le=Se[Ae.route.id])==null?void 0:Le.type)==="error")break;!Se.hasOwnProperty(Ae.route.id)&&!A.loaderData.hasOwnProperty(Ae.route.id)&&(!A.errors||!A.errors.hasOwnProperty(Ae.route.id))&&Ae.shouldCallHandler()&&(Se[Ae.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Ae.route.id}`)})}for(let[Ae,Ie]of Object.entries(Se))if(Jx(Ie)){let ke=Ie.result;Pe[Ae]={type:"redirect",response:$x(ke,L,Ae,$,g)}}else Pe[Ae]=await Gx(Ie);return Pe}async function ar(L,$,ee,_e){let Se=sn(ee,L,_e,null),Pe=Promise.all($.map(async Ie=>{if(Ie.matches&&Ie.match&&Ie.request&&Ie.controller){let Ye=(await sn(Ie.request,Ie.matches,_e,Ie.key))[Ie.match.route.id];return{[Ie.key]:Ye}}else return Promise.resolve({[Ie.key]:{type:"error",error:ei(404,{pathname:Ie.path})}})})),Le=await Se,Ae=(await Pe).reduce((Ie,ke)=>Object.assign(Ie,ke),{});return{loaderResults:Le,fetcherResults:Ae}}function Ar(){z=!0,Te.forEach((L,$)=>{ce.has($)&&ne.add($),Re($)})}function gn(L,$,ee={}){A.fetchers.set(L,$),dt({fetchers:new Map(A.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function F(L,$,ee,_e={}){let Se=hs(A.matches,$);ve(L),dt({errors:{[Se.route.id]:ee},fetchers:new Map(A.fetchers)},{flushSync:(_e&&_e.flushSync)===!0})}function he(L){return oe.set(L,(oe.get(L)||0)+1),Ee.has(L)&&Ee.delete(L),A.fetchers.get(L)||Mx}function we(L,$){Re(L,$==null?void 0:$.reason),gn(L,pa(null))}function ve(L){let $=A.fetchers.get(L);ce.has(L)&&!($&&$.state==="loading"&&U.has(L))&&Re(L),Te.delete(L),U.delete(L),ie.delete(L),Ee.delete(L),ne.delete(L),A.fetchers.delete(L)}function xe(L){let $=(oe.get(L)||0)-1;$<=0?(oe.delete(L),Ee.add(L)):oe.set(L,$),dt({fetchers:new Map(A.fetchers)})}function Re(L,$){let ee=ce.get(L);ee&&(ee.abort($),ce.delete(L))}function mt(L){for(let $ of L){let ee=he($),_e=pa(ee.data);A.fetchers.set($,_e)}}function Fe(){let L=[],$=!1;for(let ee of ie){let _e=A.fetchers.get(ee);ct(_e,`Expected fetcher: ${ee}`),_e.state==="loading"&&(ie.delete(ee),L.push(ee),$=!0)}return mt(L),$}function ht(L){let $=[];for(let[ee,_e]of U)if(_e<L){let Se=A.fetchers.get(ee);ct(Se,`Expected fetcher: ${ee}`),Se.state==="loading"&&(Re(ee),U.delete(ee),$.push(ee))}return mt($),$.length>0}function Me(L,$){let ee=A.blockers.get(L)||Qu;return be.get(L)!==$&&be.set(L,$),ee}function st(L){A.blockers.delete(L),be.delete(L)}function $t(L,$){let ee=A.blockers.get(L)||Qu;ct(ee.state==="unblocked"&&$.state==="blocked"||ee.state==="blocked"&&$.state==="blocked"||ee.state==="blocked"&&$.state==="proceeding"||ee.state==="blocked"&&$.state==="unblocked"||ee.state==="proceeding"&&$.state==="unblocked",`Invalid blocker state transition: ${ee.state} -> ${$.state}`);let _e=new Map(A.blockers);_e.set(L,$),dt({blockers:_e})}function Dn({currentLocation:L,nextLocation:$,historyAction:ee}){if(be.size===0)return;be.size>1&&cn(!1,"A router only supports one blocker at a time");let _e=Array.from(be.entries()),[Se,Pe]=_e[_e.length-1],Le=A.blockers.get(Se);if(!(Le&&Le.state==="proceeding")&&Pe({currentLocation:L,nextLocation:$,historyAction:ee}))return Se}function Ct(L){let $=ei(404,{pathname:L}),ee=m||d,{matches:_e,route:Se}=_f(ee);return{notFoundMatches:_e,route:Se,error:$}}function On(L,$,ee){if(O=L,k=$,q=ee||null,!K&&A.navigation===bg){K=!0;let _e=Co(A.location,A.matches);_e!=null&&dt({restoreScrollPosition:_e})}return()=>{O=null,k=null,q=null}}function Mn(L,$){return q&&q(L,$.map(_e=>ax(_e,A.loaderData)))||L.key}function wr(L,$){if(O&&k){let ee=Mn(L,$);O[ee]=k()}}function Co(L,$){if(O){let ee=Mn(L,$),_e=O[ee];if(typeof _e=="number")return _e}return null}function Qi(L,$,ee){if(n.patchRoutesOnNavigation)if(L){if(Object.keys(L[0].params).length>0)return{active:!0,matches:ec($,ee,g,!0)}}else return{active:!0,matches:ec($,ee,g,!0)||[]};return{active:!1,matches:null}}async function sr(L,$,ee,_e){if(!n.patchRoutesOnNavigation)return{type:"success",matches:L};let Se=L;for(;;){let Pe=m==null,Le=m||d,Ae=c;try{await n.patchRoutesOnNavigation({signal:ee,path:$,matches:Se,fetcherKey:_e,patch:(Ye,He)=>{ee.aborted||Pb(Ye,He,Le,Ae,l,!1)}})}catch(Ye){return{type:"error",error:Ye,partialMatches:Se}}finally{Pe&&!ee.aborted&&(d=[...d])}if(ee.aborted)return{type:"aborted"};let Ie=cs(Le,$,g),ke=null;if(Ie){if(Object.keys(Ie[0].params).length===0)return{type:"success",matches:Ie};if(ke=ec(Le,$,g,!0),!(ke&&Se.length<ke.length&&Ci(Se,ke.slice(0,Se.length))))return{type:"success",matches:Ie}}if(ke||(ke=ec(Le,$,g,!0)),!ke||Ci(Se,ke))return{type:"success",matches:null};Se=ke}}function Ci(L,$){return L.length===$.length&&L.every((ee,_e)=>ee.route.id===$[_e].route.id)}function tu(L){c={},m=yc(L,l,void 0,c)}function Xi(L,$,ee=!1){let _e=m==null;Pb(L,$,m||d,c,l,ee),_e&&(d=[...d],dt({}))}return G={get basename(){return g},get future(){return E},get state(){return A},get routes(){return d},get window(){return e},initialize:$e,subscribe:Lt,enableScrollRestoration:On,navigate:fn,fetch:Nn,revalidate:Hr,createHref:L=>n.history.createHref(L),encodeLocation:L=>n.history.encodeLocation(L),getFetcher:he,resetFetcher:we,deleteFetcher:xe,dispose:yt,getBlocker:Me,deleteBlocker:st,patchRoutes:Xi,_internalFetchControllers:ce,_internalSetRoutes:tu,_internalSetStateDoNotUseOrYouWillBreakYourApp(L){dt(L)}},n.unstable_instrumentations&&(G=Ax(G,n.unstable_instrumentations.map(L=>L.router).filter(Boolean))),G}function kx(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Gg(n,e,t,a,s,l){let c,d;if(s){c=[];for(let g of e)if(c.push(g),g.route.id===s){d=g;break}}else c=e,d=e[e.length-1];let m=Vd(a||".",Pd(c),ii(n.pathname,t)||n.pathname,l==="path");if(a==null&&(m.search=n.search,m.hash=n.hash),(a==null||a===""||a===".")&&d){let g=My(m.search);if(d.route.index&&!g)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let y=new URLSearchParams(m.search),E=y.getAll("index");y.delete("index"),E.filter(w=>w).forEach(w=>y.append("index",w));let S=y.toString();m.search=S?`?${S}`:""}}return t!=="/"&&(m.pathname=_x({basename:t,pathname:m.pathname})),$i(m)}function Ob(n,e,t){if(!t||!kx(t))return{path:e};if(t.formMethod&&!tN(t.formMethod))return{path:e,error:ei(405,{method:t.formMethod})};let a=()=>({path:e,error:ei(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=gA(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!tr(l))return a();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((S,[w,O])=>`${S}${w}=${O}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!tr(l))return a();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return a()}}}ct(typeof FormData=="function","FormData is not available in this environment");let d,m;if(t.formData)d=Yg(t.formData),m=t.formData;else if(t.body instanceof FormData)d=Yg(t.body),m=t.body;else if(t.body instanceof URLSearchParams)d=t.body,m=Ub(d);else if(t.body==null)d=new URLSearchParams,m=new FormData;else try{d=new URLSearchParams(t.body),m=Ub(d)}catch{return a()}let g={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(tr(g.formMethod))return{path:e,submission:g};let y=xa(e);return n&&y.search&&My(y.search)&&d.append("index",""),y.search=`?${d}`,{path:$i(y),submission:g}}function Mb(n,e,t,a,s,l,c,d,m,g,y,E,S,w,O,q,k,K,H,X,se){var ye;let ue=X?Vr(X[1])?X[1].error:X[1].data:void 0,G=s.createURL(l.location),A=s.createURL(m),R;if(y&&l.errors){let z=Object.keys(l.errors)[0];R=c.findIndex(ne=>ne.route.id===z)}else if(X&&Vr(X[1])){let z=X[0];R=c.findIndex(ne=>ne.route.id===z)-1}let x=X?X[1].statusCode:void 0,N=x&&x>=400,M={currentUrl:G,currentParams:((ye=l.matches[0])==null?void 0:ye.params)||{},nextUrl:A,nextParams:c[0].params,...d,actionResult:ue,actionStatus:x},V=Oc(c),D=c.map((z,ne)=>{let{route:ce}=z,De=null;if(R!=null&&ne>R?De=!1:ce.lazy?De=!0:Dy(ce)?y?De=$g(ce,l.loaderData,l.errors):Lx(l.loaderData,l.matches[ne],z)&&(De=!0):De=!1,De!==null)return Kg(t,a,n,V,z,g,e,De);let Ue=!1;typeof se=="boolean"?Ue=se:N?Ue=!1:(E||G.pathname+G.search===A.pathname+A.search||G.search!==A.search||jx(l.matches[ne],z))&&(Ue=!0);let U={...M,defaultShouldRevalidate:Ue},ie=sc(z,U);return Kg(t,a,n,V,z,g,e,ie,U,se)}),me=[];return O.forEach((z,ne)=>{if(y||!c.some(Ee=>Ee.route.id===z.routeId)||w.has(ne))return;let ce=l.fetchers.get(ne),De=ce&&ce.state!=="idle"&&ce.data===void 0,Ue=cs(k,z.path,K);if(!Ue){if(H&&De)return;me.push({key:ne,routeId:z.routeId,path:z.path,matches:null,match:null,request:null,controller:null});return}if(q.has(ne))return;let U=Mf(Ue,z.path),ie=new AbortController,Te=ml(s,z.path,ie.signal),oe=null;if(S.has(ne))S.delete(ne),oe=Al(t,a,Te,Ue,U,g,e);else if(De)E&&(oe=Al(t,a,Te,Ue,U,g,e));else{let Ee;typeof se=="boolean"?Ee=se:N?Ee=!1:Ee=E;let be={...M,defaultShouldRevalidate:Ee};sc(U,be)&&(oe=Al(t,a,Te,Ue,U,g,e,be))}oe&&me.push({key:ne,routeId:z.routeId,path:z.path,matches:oe,match:U,request:Te,controller:ie})}),{dsMatches:D,revalidatingFetchers:me}}function Dy(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function $g(n,e,t){if(n.lazy)return!0;if(!Dy(n))return!1;let a=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!a&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!a&&!s}function Lx(n,e,t){let a=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return a||s}function jx(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function sc(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Pb(n,e,t,a,s,l){let c;if(n){let g=a[n];ct(g,`No route found to patch children into: routeId = ${n}`),g.children||(g.children=[]),c=g.children}else c=t;let d=[],m=[];if(e.forEach(g=>{let y=c.find(E=>hA(g,E));y?m.push({existingRoute:y,newRoute:g}):d.push(g)}),d.length>0){let g=yc(d,s,[n||"_","patch",String((c==null?void 0:c.length)||"0")],a);c.push(...g)}if(l&&m.length>0)for(let g=0;g<m.length;g++){let{existingRoute:y,newRoute:E}=m[g],S=y,[w]=yc([E],s,[],{},!0);Object.assign(S,{element:w.element?w.element:S.element,errorElement:w.errorElement?w.errorElement:S.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:S.hydrateFallbackElement})}}function hA(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,a)=>{var s;return(s=e.children)==null?void 0:s.some(l=>hA(t,l))}):!1}var Vb=new WeakMap,fA=({key:n,route:e,manifest:t,mapRouteProperties:a})=>{let s=t[e.id];if(ct(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=Vb.get(s);c||(c={},Vb.set(s,c));let d=c[n];if(d)return d;let m=(async()=>{let g=tx(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(g)cn(!g,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(E)cn(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let S=await l();S!=null&&(Object.assign(s,{[n]:S}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(S=>S===void 0)&&(s.lazy=void 0))})();return c[n]=m,m},kb=new WeakMap;function Ux(n,e,t,a,s){let l=t[n.id];if(ct(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let y=kb.get(l);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let E=(async()=>{ct(typeof n.lazy=="function","No lazy route function found");let S=await n.lazy(),w={};for(let O in S){let q=S[O];if(q===void 0)continue;let k=rx(O),H=l[O]!==void 0&&O!=="hasErrorBoundary";k?cn(!k,"Route property "+O+" is not a supported property to be returned from a lazy route function. This property will be ignored."):H?cn(!H,`Route "${l.id}" has a static property "${O}" defined but its lazy function is also returning a value for this property. The lazy route property "${O}" will be ignored.`):w[O]=q}Object.assign(l,w),Object.assign(l,{...a(l),lazy:void 0})})();return kb.set(l,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(n.lazy),d=[],m;for(let y of c){if(s&&s.includes(y))continue;let E=fA({key:y,route:n,manifest:t,mapRouteProperties:a});E&&(d.push(E),y===e&&(m=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),m==null||m.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:m}}async function Lb(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function zx(n){return n.matches.some(e=>e.route.middleware)?dA(n,()=>Lb(n)):Lb(n)}function dA(n,e){return Bx(n,e,a=>{if(eN(a))throw a;return a},Xx,t);function t(a,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:a}}));{let{matches:c}=n,d=Math.min(Math.max(c.findIndex(g=>g.route.id===s),0),Math.max(c.findIndex(g=>g.shouldCallHandler()),0)),m=hs(c,c[d].route.id).route.id;return Promise.resolve({[m]:{type:"error",result:a}})}}}async function Bx(n,e,t,a,s){let{matches:l,request:c,params:d,context:m,unstable_pattern:g}=n,y=l.flatMap(S=>S.route.middleware?S.route.middleware.map(w=>[S.route.id,w]):[]);return await mA({request:c,params:d,context:m,unstable_pattern:g},y,e,t,a,s)}async function mA(n,e,t,a,s,l,c=0){let{request:d}=n;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let m=e[c];if(!m)return await t();let[g,y]=m,E,S=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await mA(n,e,t,a,s,l,c+1)},E.value}catch(w){return E={value:await l(w,g,E)},E.value}};try{let w=await y(n,S),O=w!=null?a(w):void 0;return s(O)?O:E?O??E.value:(E={value:await S()},E.value)}catch(w){return await l(w,g,E)}}function pA(n,e,t,a,s){let l=fA({key:"middleware",route:a.route,manifest:e,mapRouteProperties:n}),c=Ux(a.route,tr(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Kg(n,e,t,a,s,l,c,d,m=null,g){let y=!1,E=pA(n,e,t,s,l);return{...s,_lazyPromises:E,shouldLoad:d,shouldRevalidateArgs:m,shouldCallHandler(S){return y=!0,m?typeof g=="boolean"?sc(s,{...m,defaultShouldRevalidate:g}):typeof S=="boolean"?sc(s,{...m,defaultShouldRevalidate:S}):sc(s,m):d},resolve(S){let{lazy:w,loader:O,middleware:q}=s.route,k=y||d||S&&!tr(t.method)&&(w||O),K=q&&q.length>0&&!O&&!w;return k&&(tr(t.method)||!K)?Fx({request:t,unstable_pattern:a,match:s,lazyHandlerPromise:E==null?void 0:E.handler,lazyRoutePromise:E==null?void 0:E.route,handlerOverride:S,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Al(n,e,t,a,s,l,c,d=null){return a.map(m=>m.route.id!==s.route.id?{...m,shouldLoad:!1,shouldRevalidateArgs:d,shouldCallHandler:()=>!1,_lazyPromises:pA(n,e,t,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Kg(n,e,t,Oc(a),m,l,c,!0,d))}async function Hx(n,e,t,a,s,l){t.some(g=>{var y;return(y=g._lazyPromises)==null?void 0:y.middleware})&&await Promise.all(t.map(g=>{var y;return(y=g._lazyPromises)==null?void 0:y.middleware}));let c={request:e,unstable_pattern:Oc(t),params:t[0].params,context:s,matches:t},m=await n({...c,fetcherKey:a,runClientMiddleware:g=>{let y=c;return dA(y,()=>g({...y,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(g=>{var y,E;return[(y=g._lazyPromises)==null?void 0:y.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return m}async function Fx({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let d,m,g=tr(n.method),y=g?"action":"loader",E=S=>{let w,O=new Promise((K,H)=>w=H);m=()=>w(),n.signal.addEventListener("abort",m);let q=K=>typeof S!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${y}" [routeId: ${t.route.id}]`)):S({request:n,unstable_pattern:e,params:t.params,context:c},...K!==void 0?[K]:[]),k=(async()=>{try{return{type:"data",result:await(l?l(H=>q(H)):q())}}catch(K){return{type:"error",result:K}}})();return Promise.race([k,O])};try{let S=g?t.route.action:t.route.loader;if(a||s)if(S){let w,[O]=await Promise.all([E(S).catch(q=>{w=q}),a,s]);if(w!==void 0)throw w;d=O}else{await a;let w=g?t.route.action:t.route.loader;if(w)[d]=await Promise.all([E(w),s]);else if(y==="action"){let O=new URL(n.url),q=O.pathname+O.search;throw ei(405,{method:n.method,pathname:q,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(S)d=await E(S);else{let w=new URL(n.url),O=w.pathname+w.search;throw ei(404,{pathname:O})}}catch(S){return{type:"error",result:S}}finally{m&&n.signal.removeEventListener("abort",m)}return d}async function qx(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function Gx(n){var a,s,l,c,d;let{result:e,type:t}=n;if(Oy(e)){let m;try{m=await qx(e)}catch(g){return{type:"error",error:g}}return t==="error"?{type:"error",error:new Dc(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:"data",data:m,statusCode:e.status,headers:e.headers}}return t==="error"?Fb(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:Qx(e),statusCode:_c(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:_c(e)?e.status:void 0}:Fb(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function $x(n,e,t,a,s){let l=n.headers.get("Location");if(ct(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!Ny(l)){let c=a.slice(0,a.findIndex(d=>d.route.id===t)+1);l=Gg(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function jb(n,e,t,a){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(Ny(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let d=ii(c.pathname,t)!=null;if(c.origin===e.origin&&d)return c.pathname+c.search+c.hash}try{let l=a.createURL(n);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function ml(n,e,t,a){let s=n.createURL(gA(e)).toString(),l={signal:t};if(a&&tr(a.formMethod)){let{formMethod:c,formEncType:d}=a;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(a.json)):d==="text/plain"?l.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?l.body=Yg(a.formData):l.body=a.formData}return new Request(s,l)}function Yg(n){let e=new URLSearchParams;for(let[t,a]of n.entries())e.append(t,typeof a=="string"?a:a.name);return e}function Ub(n){let e=new FormData;for(let[t,a]of n.entries())e.append(t,a);return e}function Kx(n,e,t,a=!1,s=!1){let l={},c=null,d,m=!1,g={},y=t&&Vr(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let S=E.route.id,w=e[S];if(ct(!so(w),"Cannot handle redirect results in processLoaderData"),Vr(w)){let O=w.error;if(y!==void 0&&(O=y,y=void 0),c=c||{},s)c[S]=O;else{let q=hs(n,S);c[q.route.id]==null&&(c[q.route.id]=O)}a||(l[S]=cA),m||(m=!0,d=_c(w.error)?w.error.status:500),w.headers&&(g[S]=w.headers)}else l[S]=w.data,w.statusCode&&w.statusCode!==200&&!m&&(d=w.statusCode),w.headers&&(g[S]=w.headers)}),y!==void 0&&t&&(c={[t[0]]:y},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:g}}function zb(n,e,t,a,s,l){let{loaderData:c,errors:d}=Kx(e,t,a);return s.filter(m=>!m.matches||m.matches.some(g=>g.shouldLoad)).forEach(m=>{let{key:g,match:y,controller:E}=m;if(E&&E.signal.aborted)return;let S=l[g];if(ct(S,"Did not find corresponding fetcher result"),Vr(S)){let w=hs(n.matches,y==null?void 0:y.route.id);d&&d[w.route.id]||(d={...d,[w.route.id]:S.error}),n.fetchers.delete(g)}else if(so(S))ct(!1,"Unhandled fetcher revalidation redirect");else{let w=pa(S.data);n.fetchers.set(g,w)}}),{loaderData:c,errors:d}}function Bb(n,e,t,a){let s=Object.entries(e).filter(([,l])=>l!==cA).reduce((l,[c,d])=>(l[c]=d,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),a&&a.hasOwnProperty(c))break}return s}function Hb(n){return n?Vr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function hs(n,e){return(e?n.slice(0,n.findIndex(a=>a.route.id===e)+1):[...n]).reverse().find(a=>a.route.hasErrorBoundary===!0)||n[0]}function _f(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ei(n,{pathname:e,routeId:t,method:a,type:s,message:l}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(c="Bad Request",a&&e&&t?d=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(c="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",d=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",a&&e&&t?d=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new Dc(n||500,c,new Error(d),!0)}function vf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[a,s]=e[t];if(so(s))return{key:a,result:s}}}function gA(n){let e=typeof n=="string"?xa(n):n;return $i({...e,hash:""})}function Yx(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function Qx(n){var e,t;return new Dc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function Xx(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&Wx(t))}function Wx(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function Jx(n){return Oy(n.result)&&lA.has(n.result.status)}function Vr(n){return n.type==="error"}function so(n){return(n&&n.type)==="redirect"}function Fb(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function Oy(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function Zx(n){return lA.has(n)}function eN(n){return Oy(n)&&Zx(n.status)&&n.headers.has("Location")}function tN(n){return Dx.has(n.toUpperCase())}function tr(n){return xx.has(n.toUpperCase())}function My(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Mf(n,e){let t=typeof e=="string"?xa(e).search:e.search;if(n[n.length-1].route.index&&My(t||""))return n[n.length-1];let a=rA(n);return a[a.length-1]}function qb(n){let{formMethod:e,formAction:t,formEncType:a,text:s,formData:l,json:c}=n;if(!(!e||!t||!a)){if(s!=null)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:a,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:c,text:void 0}}}function Sg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function nN(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Xu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function rN(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function pa(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function iN(n,e){try{let t=n.sessionStorage.getItem(uA);if(t){let a=JSON.parse(t);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function aN(n,e){if(e.size>0){let t={};for(let[a,s]of e)t[a]=[...s];try{n.sessionStorage.setItem(uA,JSON.stringify(t))}catch(a){cn(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function Gb(){let n,e,t=new Promise((a,s)=>{n=async l=>{a(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Eo=P.createContext(null);Eo.displayName="DataRouter";var Mc=P.createContext(null);Mc.displayName="DataRouterState";var yA=P.createContext(!1);function sN(){return P.useContext(yA)}var Py=P.createContext({isTransitioning:!1});Py.displayName="ViewTransition";var _A=P.createContext(new Map);_A.displayName="Fetchers";var oN=P.createContext(null);oN.displayName="Await";var zr=P.createContext(null);zr.displayName="Navigation";var kd=P.createContext(null);kd.displayName="Location";var si=P.createContext({outlet:null,matches:[],isDataRoute:!1});si.displayName="Route";var Vy=P.createContext(null);Vy.displayName="RouteError";var vA="REACT_ROUTER_ERROR",lN="REDIRECT",uN="ROUTE_ERROR_RESPONSE";function cN(n){if(n.startsWith(`${vA}:${lN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function hN(n){if(n.startsWith(`${vA}:${uN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Dc(e.status,e.statusText,e.data)}catch{}}function fN(n,{relative:e}={}){ct(Gl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=P.useContext(zr),{hash:s,pathname:l,search:c}=Pc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Bi([t,l])),a.createHref({pathname:d,search:c,hash:s})}function Gl(){return P.useContext(kd)!=null}function oi(){return ct(Gl(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(kd).location}var EA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TA(n){P.useContext(zr).static||P.useLayoutEffect(n)}function To(){let{isDataRoute:n}=P.useContext(si);return n?RN():dN()}function dN(){ct(Gl(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Eo),{basename:e,navigator:t}=P.useContext(zr),{matches:a}=P.useContext(si),{pathname:s}=oi(),l=JSON.stringify(Pd(a)),c=P.useRef(!1);return TA(()=>{c.current=!0}),P.useCallback((m,g={})=>{if(cn(c.current,EA),!c.current)return;if(typeof m=="number"){t.go(m);return}let y=Vd(m,JSON.parse(l),s,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Bi([e,y.pathname])),(g.replace?t.replace:t.push)(y,g.state,g)},[e,t,l,s,n])}var mN=P.createContext(null);function pN(n){let e=P.useContext(si).outlet;return P.useMemo(()=>e&&P.createElement(mN.Provider,{value:n},e),[e,n])}function Ld(){let{matches:n}=P.useContext(si),e=n[n.length-1];return e?e.params:{}}function Pc(n,{relative:e}={}){let{matches:t}=P.useContext(si),{pathname:a}=oi(),s=JSON.stringify(Pd(t));return P.useMemo(()=>Vd(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function gN(n,e,t,a,s){ct(Gl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=P.useContext(zr),{matches:c}=P.useContext(si),d=c[c.length-1],m=d?d.params:{},g=d?d.pathname:"/",y=d?d.pathnameBase:"/",E=d&&d.route;{let H=E&&E.path||"";SA(g,!E||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let S=oi(),w;w=S;let O=w.pathname||"/",q=O;if(y!=="/"){let H=y.replace(/^\//,"").split("/");q="/"+O.replace(/^\//,"").split("/").slice(H.length).join("/")}let k=cs(n,{pathname:q});return cn(E||k!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),cn(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),TN(k&&k.map(H=>Object.assign({},H,{params:Object.assign({},m,H.params),pathname:Bi([y,l.encodeLocation?l.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?y:Bi([y,l.encodeLocation?l.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),c,t,a,s)}function yN(){let n=CN(),e=_c(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,c)}var _N=P.createElement(yN,null),bA=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=hN(n.digest);t&&(n=t)}let e=n!==void 0?P.createElement(si.Provider,{value:this.props.routeContext},P.createElement(Vy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?P.createElement(vN,{error:n},e):e}};bA.contextType=yA;var Ag=new WeakMap;function vN({children:n,error:e}){let{basename:t}=P.useContext(zr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=cN(e.digest);if(a){let s=Ag.get(e);if(s)throw s;let l=aA(a.location,t);if(iA&&!Ag.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw Ag.set(e,c),c}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function EN({routeContext:n,match:e,children:t}){let a=P.useContext(Eo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(si.Provider,{value:n},t)}function TN(n,e=[],t=null,a=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let y=l.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);ct(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,m=-1;if(t)for(let y=0;y<l.length;y++){let E=l[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=y),E.route.id){let{loaderData:S,errors:w}=t,O=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!w||w[E.route.id]===void 0);if(E.route.lazy||O){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=t&&a?(y,E)=>{var S,w;a(y,{location:t.location,params:((w=(S=t.matches)==null?void 0:S[0])==null?void 0:w.params)??{},unstable_pattern:Oc(t.matches),errorInfo:E})}:void 0;return l.reduceRight((y,E,S)=>{let w,O=!1,q=null,k=null;t&&(w=c&&E.route.id?c[E.route.id]:void 0,q=E.route.errorElement||_N,d&&(m<0&&S===0?(SA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,k=null):m===S&&(O=!0,k=E.route.hydrateFallbackElement||null)));let K=e.concat(l.slice(0,S+1)),H=()=>{let X;return w?X=q:O?X=k:E.route.Component?X=P.createElement(E.route.Component,null):E.route.element?X=E.route.element:X=y,P.createElement(EN,{match:E,routeContext:{outlet:y,matches:K,isDataRoute:t!=null},children:X})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?P.createElement(bA,{location:t.location,revalidation:t.revalidation,component:q,error:w,children:H(),routeContext:{outlet:null,matches:K,isDataRoute:!0},onError:g}):H()},null)}function ky(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bN(n){let e=P.useContext(Eo);return ct(e,ky(n)),e}function SN(n){let e=P.useContext(Mc);return ct(e,ky(n)),e}function AN(n){let e=P.useContext(si);return ct(e,ky(n)),e}function Ly(n){let e=AN(n),t=e.matches[e.matches.length-1];return ct(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function wN(){return Ly("useRouteId")}function CN(){var a;let n=P.useContext(Vy),e=SN("useRouteError"),t=Ly("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function RN(){let{router:n}=bN("useNavigate"),e=Ly("useNavigate"),t=P.useRef(!1);return TA(()=>{t.current=!0}),P.useCallback(async(s,l={})=>{cn(t.current,EA),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var $b={};function SA(n,e,t){!e&&!$b[n]&&($b[n]=!0,cn(!1,t))}var Kb={};function Yb(n,e){!n&&!Kb[e]&&(Kb[e]=!0,console.warn(e))}var IN="useOptimistic",Qb=EI[IN],xN=()=>{};function NN(n){return Qb?Qb(n):[n,xN]}function DN(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&cn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:P.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&cn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:P.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&cn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:P.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var ON=["HydrateFallback","hydrateFallbackElement"],MN=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}};function PN({router:n,flushSync:e,onError:t,unstable_useTransitions:a}){a=sN()||a;let[l,c]=P.useState(n.state),[d,m]=NN(l),[g,y]=P.useState(),[E,S]=P.useState({isTransitioning:!1}),[w,O]=P.useState(),[q,k]=P.useState(),[K,H]=P.useState(),X=P.useRef(new Map),se=P.useCallback((R,{deletedFetchers:x,newErrors:N,flushSync:M,viewTransitionOpts:V})=>{N&&t&&Object.values(N).forEach(me=>{var ye;return t(me,{location:R.location,params:((ye=R.matches[0])==null?void 0:ye.params)??{},unstable_pattern:Oc(R.matches)})}),R.fetchers.forEach((me,ye)=>{me.data!==void 0&&X.current.set(ye,me.data)}),x.forEach(me=>X.current.delete(me)),Yb(M===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let D=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(Yb(V==null||D,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!V||!D){e&&M?e(()=>c(R)):a===!1?c(R):P.startTransition(()=>{a===!0&&m(me=>Xb(me,R)),c(R)});return}if(e&&M){e(()=>{q&&(w==null||w.resolve(),q.skipTransition()),S({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let me=n.window.document.startViewTransition(()=>{e(()=>c(R))});me.finished.finally(()=>{e(()=>{O(void 0),k(void 0),y(void 0),S({isTransitioning:!1})})}),e(()=>k(me));return}q?(w==null||w.resolve(),q.skipTransition(),H({state:R,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(y(R),S({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[n.window,e,q,w,a,m,t]);P.useLayoutEffect(()=>n.subscribe(se),[n,se]),P.useEffect(()=>{E.isTransitioning&&!E.flushSync&&O(new MN)},[E]),P.useEffect(()=>{if(w&&g&&n.window){let R=g,x=w.promise,N=n.window.document.startViewTransition(async()=>{a===!1?c(R):P.startTransition(()=>{a===!0&&m(M=>Xb(M,R)),c(R)}),await x});N.finished.finally(()=>{O(void 0),k(void 0),y(void 0),S({isTransitioning:!1})}),k(N)}},[g,w,n.window,a,m]),P.useEffect(()=>{w&&g&&d.location.key===g.location.key&&w.resolve()},[w,q,d.location,g]),P.useEffect(()=>{!E.isTransitioning&&K&&(y(K.state),S({isTransitioning:!0,flushSync:!1,currentLocation:K.currentLocation,nextLocation:K.nextLocation}),H(void 0))},[E.isTransitioning,K]);let ue=P.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:R=>n.navigate(R),push:(R,x,N)=>n.navigate(R,{state:x,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(R,x,N)=>n.navigate(R,{replace:!0,state:x,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[n]),G=n.basename||"/",A=P.useMemo(()=>({router:n,navigator:ue,static:!1,basename:G,onError:t}),[n,ue,G,t]);return P.createElement(P.Fragment,null,P.createElement(Eo.Provider,{value:A},P.createElement(Mc.Provider,{value:d},P.createElement(_A.Provider,{value:X.current},P.createElement(Py.Provider,{value:E},P.createElement(LN,{basename:G,location:d.location,navigationType:d.historyAction,navigator:ue,unstable_useTransitions:a},P.createElement(VN,{routes:n.routes,future:n.future,state:d,onError:t})))))),null)}function Xb(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var VN=P.memo(kN);function kN({routes:n,future:e,state:t,onError:a}){return gN(n,void 0,t,a,e)}function ys({to:n,replace:e,state:t,relative:a}){ct(Gl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(zr);cn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=P.useContext(si),{pathname:c}=oi(),d=To(),m=Vd(n,Pd(l),c,a==="path"),g=JSON.stringify(m);return P.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:a})},[d,g,a,e,t]),null}function AA(n){return pN(n.context)}function LN({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){ct(!Gl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:d,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[d,s,l,c]);typeof t=="string"&&(t=xa(t));let{pathname:g="/",search:y="",hash:E="",state:S=null,key:w="default"}=t,O=P.useMemo(()=>{let q=ii(g,d);return q==null?null:{location:{pathname:q,search:y,hash:E,state:S,key:w},navigationType:a}},[d,g,y,E,S,w,a]);return cn(O!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:P.createElement(zr.Provider,{value:m},P.createElement(kd.Provider,{children:e,value:O}))}var Pf="get",Vf="application/x-www-form-urlencoded";function jd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function jN(n){return jd(n)&&n.tagName.toLowerCase()==="button"}function UN(n){return jd(n)&&n.tagName.toLowerCase()==="form"}function zN(n){return jd(n)&&n.tagName.toLowerCase()==="input"}function BN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function HN(n,e){return n.button===0&&(!e||e==="_self")&&!BN(n)}function Qg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let a=n[t];return e.concat(Array.isArray(a)?a.map(s=>[t,s]):[[t,a]])},[]))}function FN(n,e){let t=Qg(n);return e&&e.forEach((a,s)=>{t.has(s)||e.getAll(s).forEach(l=>{t.append(s,l)})}),t}var Ef=null;function qN(){if(Ef===null)try{new FormData(document.createElement("form"),0),Ef=!1}catch{Ef=!0}return Ef}var GN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wg(n){return n!=null&&!GN.has(n)?(cn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vf}"`),null):n}function $N(n,e){let t,a,s,l,c;if(UN(n)){let d=n.getAttribute("action");a=d?ii(d,e):null,t=n.getAttribute("method")||Pf,s=wg(n.getAttribute("enctype"))||Vf,l=new FormData(n)}else if(jN(n)||zN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(a=m?ii(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Pf,s=wg(n.getAttribute("formenctype"))||wg(d.getAttribute("enctype"))||Vf,l=new FormData(d,n),!qN()){let{name:g,type:y,value:E}=n;if(y==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,E)}}else{if(jd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Pf,a=null,s=Vf,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function KN(n,e,t,a){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:e&&ii(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function YN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function XN(n,e,t){let a=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await YN(l,t);return c.links?c.links():[]}return[]}));return eD(a.flat(1).filter(QN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Wb(n,e,t,a,s,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>{var y;return t[g].pathname!==m.pathname||((y=t[g].route.path)==null?void 0:y.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{var E;let y=a.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function WN(n,e,{includeHydrateFallback:t}={}){return JN(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function JN(n){return[...new Set(n)]}function ZN(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function eD(n,e){let t=new Set;return new Set(e),n.reduce((a,s)=>{let l=JSON.stringify(ZN(s));return t.has(l)||(t.add(l),a.push({key:l,link:s})),a},[])}function wA(){let n=P.useContext(Eo);return jy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function tD(){let n=P.useContext(Mc);return jy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Uy=P.createContext(void 0);Uy.displayName="FrameworkContext";function CA(){let n=P.useContext(Uy);return jy(n,"You must render this element inside a <HydratedRouter> element"),n}function nD(n,e){let t=P.useContext(Uy),[a,s]=P.useState(!1),[l,c]=P.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:E}=e,S=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let q=K=>{K.forEach(H=>{c(H.isIntersecting)})},k=new IntersectionObserver(q,{threshold:.5});return S.current&&k.observe(S.current),()=>{k.disconnect()}}},[n]),P.useEffect(()=>{if(a){let q=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(q)}}},[a]);let w=()=>{s(!0)},O=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:Wu(d,w),onBlur:Wu(m,O),onMouseEnter:Wu(g,w),onMouseLeave:Wu(y,O),onTouchStart:Wu(E,w)}]:[!1,S,{}]}function Wu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function rD({page:n,...e}){let{router:t}=wA(),a=P.useMemo(()=>cs(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?P.createElement(aD,{page:n,matches:a,...e}):null}function iD(n){let{manifest:e,routeModules:t}=CA(),[a,s]=P.useState([]);return P.useEffect(()=>{let l=!1;return XN(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),a}function aD({page:n,matches:e,...t}){let a=oi(),{future:s,manifest:l,routeModules:c}=CA(),{basename:d}=wA(),{loaderData:m,matches:g}=tD(),y=P.useMemo(()=>Wb(n,e,g,l,a,"data"),[n,e,g,l,a]),E=P.useMemo(()=>Wb(n,e,g,l,a,"assets"),[n,e,g,l,a]),S=P.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let q=new Set,k=!1;if(e.forEach(H=>{var se;let X=l.routes[H.route.id];!X||!X.hasLoader||(!y.some(ue=>ue.route.id===H.route.id)&&H.route.id in m&&((se=c[H.route.id])!=null&&se.shouldRevalidate)||X.hasClientLoader?k=!0:q.add(H.route.id))}),q.size===0)return[];let K=KN(n,d,s.unstable_trailingSlashAwareDataRequests,"data");return k&&q.size>0&&K.searchParams.set("_routes",e.filter(H=>q.has(H.route.id)).map(H=>H.route.id).join(",")),[K.pathname+K.search]},[d,s.unstable_trailingSlashAwareDataRequests,m,a,l,y,e,n,c]),w=P.useMemo(()=>WN(E,l),[E,l]),O=iD(E);return P.createElement(P.Fragment,null,S.map(q=>P.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...t})),w.map(q=>P.createElement("link",{key:q,rel:"modulepreload",href:q,...t})),O.map(({key:q,link:k})=>P.createElement("link",{key:q,nonce:t.nonce,...k,crossOrigin:k.crossOrigin??t.crossOrigin})))}function sD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var oD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oD&&(window.__reactRouterVersion="7.13.0")}catch{}function lD(n,e){return Vx({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:WI({window:e==null?void 0:e.window}),hydrationData:uD(),routes:n,mapRouteProperties:DN,hydrationRouteProperties:ON,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function uD(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:cD(n.errors)}),n}function cD(n){if(!n)return null;let e=Object.entries(n),t={};for(let[a,s]of e)if(s&&s.__type==="RouteErrorResponse")t[a]=new Dc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[a]=c}catch{}}if(t[a]==null){let l=new Error(s.message);l.stack="",t[a]=l}}else t[a]=s;return t}var RA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IA=P.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:S,...w},O){let{basename:q,unstable_useTransitions:k}=P.useContext(zr),K=typeof g=="string"&&RA.test(g),H=aA(g,q);g=H.to;let X=fN(g,{relative:s}),[se,ue,G]=nD(a,w),A=mD(g,{replace:c,state:d,target:m,preventScrollReset:y,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:S,unstable_useTransitions:k});function R(N){e&&e(N),N.defaultPrevented||A(N)}let x=P.createElement("a",{...w,...G,href:H.absoluteURL||X,onClick:H.isExternal||l?e:R,ref:sD(O,ue),target:m,"data-discover":!K&&t==="render"?"true":void 0});return se&&!K?P.createElement(P.Fragment,null,x,P.createElement(rD,{page:X})):x});IA.displayName="Link";var hD=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:m,...g},y){let E=Pc(c,{relative:g.relative}),S=oi(),w=P.useContext(Mc),{navigator:O,basename:q}=P.useContext(zr),k=w!=null&&ED(E)&&d===!0,K=O.encodeLocation?O.encodeLocation(E).pathname:E.pathname,H=S.pathname,X=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(H=H.toLowerCase(),X=X?X.toLowerCase():null,K=K.toLowerCase()),X&&q&&(X=ii(X,q)||X);const se=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let ue=H===K||!s&&H.startsWith(K)&&H.charAt(se)==="/",G=X!=null&&(X===K||!s&&X.startsWith(K)&&X.charAt(K.length)==="/"),A={isActive:ue,isPending:G,isTransitioning:k},R=ue?e:void 0,x;typeof a=="function"?x=a(A):x=[a,ue?"active":null,G?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(A):l;return P.createElement(IA,{...g,"aria-current":R,className:x,ref:y,style:N,to:c,viewTransition:d},typeof m=="function"?m(A):m)});hD.displayName="NavLink";var fD=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:l,method:c=Pf,action:d,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:S,...w},O)=>{let{unstable_useTransitions:q}=P.useContext(zr),k=_D(),K=vD(d,{relative:g}),H=c.toLowerCase()==="get"?"get":"post",X=typeof d=="string"&&RA.test(d),se=ue=>{if(m&&m(ue),ue.defaultPrevented)return;ue.preventDefault();let G=ue.nativeEvent.submitter,A=(G==null?void 0:G.getAttribute("formmethod"))||c,R=()=>k(G||ue.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:l,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:S});q&&t!==!1?P.startTransition(()=>R()):R()};return P.createElement("form",{ref:O,method:H,action:K,onSubmit:a?m:se,...w,"data-discover":!X&&n==="render"?"true":void 0})});fD.displayName="Form";function dD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xA(n){let e=P.useContext(Eo);return ct(e,dD(n)),e}function mD(n,{target:e,replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:m}={}){let g=To(),y=oi(),E=Pc(n,{relative:l});return P.useCallback(S=>{if(HN(S,e)){S.preventDefault();let w=t!==void 0?t:$i(y)===$i(E),O=()=>g(n,{replace:w,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});m?P.startTransition(()=>O()):O()}},[y,g,E,t,a,e,n,s,l,c,d,m])}function pD(n){cn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(Qg(n)),t=P.useRef(!1),a=oi(),s=P.useMemo(()=>FN(a.search,t.current?null:e.current),[a.search]),l=To(),c=P.useCallback((d,m)=>{const g=Qg(typeof d=="function"?d(new URLSearchParams(s)):d);t.current=!0,l("?"+g,m)},[l,s]);return[s,c]}var gD=0,yD=()=>`__${String(++gD)}__`;function _D(){let{router:n}=xA("useSubmit"),{basename:e}=P.useContext(zr),t=wN(),a=n.fetch,s=n.navigate;return P.useCallback(async(l,c={})=>{let{action:d,method:m,encType:g,formData:y,body:E}=$N(l,e);if(c.navigate===!1){let S=c.fetcherKey||yD();await a(S,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:E,formMethod:c.method||m,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:E,formMethod:c.method||m,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,s,e,t])}function vD(n,{relative:e}={}){let{basename:t}=P.useContext(zr),a=P.useContext(si);ct(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...Pc(n||".",{relative:e})},c=oi();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(y=>y==="")){d.delete("index"),m.filter(E=>E).forEach(E=>d.append("index",E));let y=d.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Bi([t,l.pathname])),$i(l)}function ED(n,{relative:e}={}){let t=P.useContext(Py);ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=xA("useViewTransitionState"),s=Pc(n,{relative:e});if(!t.isTransitioning)return!1;let l=ii(t.currentLocation.pathname,a)||t.currentLocation.pathname,c=ii(t.nextLocation.pathname,a)||t.nextLocation.pathname;return rd(s.pathname,c)!=null||rd(s.pathname,l)!=null}var NA=QS();function TD(n){return P.createElement(PN,{flushSync:NA.flushSync,...n})}const bD=P.createContext(void 0),li=()=>GI(),ot=YI.withTypes(),SD=({children:n})=>{const e=ot(t=>t.auth.loading);return T.jsx(bD.Provider,{value:{isLoading:e},children:n})},AD=()=>{};var Jb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let s=n.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},wD=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const s=n[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],d=n[t++],m=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(m>>10)),e[a++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},OA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,d=c?n[s+1]:0,m=s+2<n.length,g=m?n[s+2]:0,y=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,w=g&63;m||(w=64,c||(S=64)),a.push(t[y],t[E],t[S],t[w])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(DA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new CD;const S=l<<2|d>>4;if(a.push(S),g!==64){const w=d<<4&240|g>>2;if(a.push(w),E!==64){const O=g<<6&192|E;a.push(O)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class CD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RD=function(n){const e=DA(n);return OA.encodeByteArray(e,!0)},id=function(n){return RD(n).replace(/\./g,"")},MA=function(n){try{return OA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=()=>ID().__FIREBASE_DEFAULTS__,ND=()=>{if(typeof process>"u"||typeof Jb>"u")return;const n=Jb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},DD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&MA(n[1]);return e&&JSON.parse(e)},Ud=()=>{try{return AD()||xD()||ND()||DD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},PA=n=>{var e,t;return(t=(e=Ud())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},OD=n=>{const e=PA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},VA=()=>{var n;return(n=Ud())==null?void 0:n.config},kA=n=>{var e;return(e=Ud())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[id(JSON.stringify(t)),id(JSON.stringify(c)),""].join(".")}const oc={};function VD(){const n={prod:[],emulator:[]};for(const e of Object.keys(oc))oc[e]?n.emulator.push(e):n.prod.push(e);return n}function kD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Zb=!1;function jA(n,e){if(typeof window>"u"||typeof document>"u"||!$l(window.location.host)||oc[n]===e||oc[n]||Zb)return;oc[n]=e;function t(S){return`__firebase__banner__${S}`}const a="__firebase__banner",l=VD().prod.length>0;function c(){const S=document.getElementById(a);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Zb=!0,c()},S}function y(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=kD(a),w=t("text"),O=document.getElementById(w)||document.createElement("span"),q=t("learnmore"),k=document.getElementById(q)||document.createElement("a"),K=t("preprendIcon"),H=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const X=S.element;d(X),y(k,q);const se=g();m(H,K),X.append(H,O,k,se),document.body.appendChild(X)}l?(O.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ir())}function jD(){var e;const n=(e=Ud())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function BD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HD(){const n=ir();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FD(){return!jD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qD(){try{return typeof indexedDB=="object"}catch{return!1}}function GD(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="FirebaseError";class Na extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=$D,Object.setPrototypeOf(this,Na.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vc.prototype.create)}}class Vc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?KD(l,a):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new Na(s,d,a)}}function KD(n,e){return n.replace(YD,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const YD=/\{\$([^}]+)}/g;function QD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function mo(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=n[s],c=e[s];if(e0(l)&&e0(c)){if(!mo(l,c))return!1}else if(l!==c)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function e0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function XD(n,e){const t=new WD(n,e);return t.subscribe.bind(t)}class WD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");JD(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=Cg),s.error===void 0&&(s.error=Cg),s.complete===void 0&&(s.complete=Cg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Cg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(n){return n&&n._delegate?n._delegate:n}class po{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new MD;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(t2(e))try{this.getOrInitializeService({instanceIdentifier:ao})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ao){return this.instances.has(e)}getOptions(e=ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&c.resolve(s)}return s}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const l=this.instances.get(a);return l&&e(l,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:e2(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ao){return this.component?this.component.multipleInstances?e:ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function e2(n){return n===ao?void 0:n}function t2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Et||(Et={}));const r2={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},i2=Et.INFO,a2={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},s2=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),s=a2[e];if(s)console[s](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zy{constructor(e){this.name=e,this._logLevel=i2,this._logHandler=s2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...e),this._logHandler(this,Et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...e),this._logHandler(this,Et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...e),this._logHandler(this,Et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...e),this._logHandler(this,Et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...e),this._logHandler(this,Et.ERROR,...e)}}const o2=(n,e)=>e.some(t=>n instanceof t);let t0,n0;function l2(){return t0||(t0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u2(){return n0||(n0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UA=new WeakMap,Xg=new WeakMap,zA=new WeakMap,Rg=new WeakMap,By=new WeakMap;function c2(n){const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(_s(n.result)),s()},c=()=>{a(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&UA.set(t,n)}).catch(()=>{}),By.set(e,n),e}function h2(n){if(Xg.has(n))return;const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{a(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Xg.set(n,e)}let Wg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _s(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function f2(n){Wg=n(Wg)}function d2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(Ig(this),e,...t);return zA.set(a,e.sort?e.sort():[e]),_s(a)}:u2().includes(n)?function(...e){return n.apply(Ig(this),e),_s(UA.get(this))}:function(...e){return _s(n.apply(Ig(this),e))}}function m2(n){return typeof n=="function"?d2(n):(n instanceof IDBTransaction&&h2(n),o2(n,l2())?new Proxy(n,Wg):n)}function _s(n){if(n instanceof IDBRequest)return c2(n);if(Rg.has(n))return Rg.get(n);const e=m2(n);return e!==n&&(Rg.set(n,e),By.set(e,n)),e}const Ig=n=>By.get(n);function p2(n,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),d=_s(c);return a&&c.addEventListener("upgradeneeded",m=>{a(_s(c.result),m.oldVersion,m.newVersion,_s(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),s&&m.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const g2=["get","getKey","getAll","getAllKeys","count"],y2=["put","add","delete","clear"],xg=new Map;function r0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xg.get(e))return xg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=y2.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||g2.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,s?"readwrite":"readonly");let g=m.store;return a&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&m.done]))[0]};return xg.set(e,l),l}f2(n=>({...n,get:(e,t,a)=>r0(e,t)||n.get(e,t,a),has:(e,t)=>!!r0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(v2(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function v2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jg="@firebase/app",i0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new zy("@firebase/app"),E2="@firebase/app-compat",T2="@firebase/analytics-compat",b2="@firebase/analytics",S2="@firebase/app-check-compat",A2="@firebase/app-check",w2="@firebase/auth",C2="@firebase/auth-compat",R2="@firebase/database",I2="@firebase/data-connect",x2="@firebase/database-compat",N2="@firebase/functions",D2="@firebase/functions-compat",O2="@firebase/installations",M2="@firebase/installations-compat",P2="@firebase/messaging",V2="@firebase/messaging-compat",k2="@firebase/performance",L2="@firebase/performance-compat",j2="@firebase/remote-config",U2="@firebase/remote-config-compat",z2="@firebase/storage",B2="@firebase/storage-compat",H2="@firebase/firestore",F2="@firebase/ai",q2="@firebase/firestore-compat",G2="firebase",$2="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="[DEFAULT]",K2={[Jg]:"fire-core",[E2]:"fire-core-compat",[b2]:"fire-analytics",[T2]:"fire-analytics-compat",[A2]:"fire-app-check",[S2]:"fire-app-check-compat",[w2]:"fire-auth",[C2]:"fire-auth-compat",[R2]:"fire-rtdb",[I2]:"fire-data-connect",[x2]:"fire-rtdb-compat",[N2]:"fire-fn",[D2]:"fire-fn-compat",[O2]:"fire-iid",[M2]:"fire-iid-compat",[P2]:"fire-fcm",[V2]:"fire-fcm-compat",[k2]:"fire-perf",[L2]:"fire-perf-compat",[j2]:"fire-rc",[U2]:"fire-rc-compat",[z2]:"fire-gcs",[B2]:"fire-gcs-compat",[H2]:"fire-fst",[q2]:"fire-fst-compat",[F2]:"fire-vertex","fire-js":"fire-js",[G2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new Map,Y2=new Map,ey=new Map;function a0(n,e){try{n.container.addComponent(e)}catch(t){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ml(n){const e=n.name;if(ey.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;ey.set(e,n);for(const t of ad.values())a0(t,n);for(const t of Y2.values())a0(t,n);return!0}function Hy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _i(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new Vc("app","Firebase",Q2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new po("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=$2;function BA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a={name:Zg,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw vs.create("bad-app-name",{appName:String(s)});if(t||(t=VA()),!t)throw vs.create("no-options");const l=ad.get(s);if(l){if(mo(t,l.options)&&mo(a,l.config))return l;throw vs.create("duplicate-app",{appName:s})}const c=new n2(s);for(const m of ey.values())c.addComponent(m);const d=new X2(t,a,c);return ad.set(s,d),d}function HA(n=Zg){const e=ad.get(n);if(!e&&n===Zg&&VA())return BA();if(!e)throw vs.create("no-app",{appName:n});return e}function Es(n,e,t){let a=K2[n]??n;t&&(a+=`-${t}`);const s=a.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Aa.warn(c.join(" "));return}Ml(new po(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="firebase-heartbeat-database",J2=1,vc="firebase-heartbeat-store";let Ng=null;function FA(){return Ng||(Ng=p2(W2,J2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vc)}catch(t){console.warn(t)}}}}).catch(n=>{throw vs.create("idb-open",{originalErrorMessage:n.message})})),Ng}async function Z2(n){try{const t=(await FA()).transaction(vc),a=await t.objectStore(vc).get(qA(n));return await t.done,a}catch(e){if(e instanceof Na)Aa.warn(e.message);else{const t=vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Aa.warn(t.message)}}}async function s0(n,e){try{const a=(await FA()).transaction(vc,"readwrite");await a.objectStore(vc).put(e,qA(n)),await a.done}catch(t){if(t instanceof Na)Aa.warn(t.message);else{const a=vs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Aa.warn(a.message)}}}function qA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=1024,tO=30;class nO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iO(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=o0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>tO){const c=aO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Aa.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=o0(),{heartbeatsToSend:a,unsentEntries:s}=rO(this._heartbeatsCache.heartbeats),l=id(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Aa.warn(t),""}}}function o0(){return new Date().toISOString().substring(0,10)}function rO(n,e=eO){const t=[];let a=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),l0(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),l0(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class iO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qD()?GD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Z2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return s0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return s0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function l0(n){return id(JSON.stringify({version:2,heartbeats:n})).length}function aO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(n){Ml(new po("platform-logger",e=>new _2(e),"PRIVATE")),Ml(new po("heartbeat",e=>new nO(e),"PRIVATE")),Es(Jg,i0,n),Es(Jg,i0,"esm2020"),Es("fire-js","")}sO("");var u0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ts,GA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,R){function x(){}x.prototype=R.prototype,A.F=R.prototype,A.prototype=new x,A.prototype.constructor=A,A.D=function(N,M,V){for(var D=Array(arguments.length-2),me=2;me<arguments.length;me++)D[me-2]=arguments[me];return R.prototype[M].apply(N,D)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,R,x){x||(x=0);const N=Array(16);if(typeof R=="string")for(var M=0;M<16;++M)N[M]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(M=0;M<16;++M)N[M]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=A.g[0],x=A.g[1],M=A.g[2];let V=A.g[3],D;D=R+(V^x&(M^V))+N[0]+3614090360&4294967295,R=x+(D<<7&4294967295|D>>>25),D=V+(M^R&(x^M))+N[1]+3905402710&4294967295,V=R+(D<<12&4294967295|D>>>20),D=M+(x^V&(R^x))+N[2]+606105819&4294967295,M=V+(D<<17&4294967295|D>>>15),D=x+(R^M&(V^R))+N[3]+3250441966&4294967295,x=M+(D<<22&4294967295|D>>>10),D=R+(V^x&(M^V))+N[4]+4118548399&4294967295,R=x+(D<<7&4294967295|D>>>25),D=V+(M^R&(x^M))+N[5]+1200080426&4294967295,V=R+(D<<12&4294967295|D>>>20),D=M+(x^V&(R^x))+N[6]+2821735955&4294967295,M=V+(D<<17&4294967295|D>>>15),D=x+(R^M&(V^R))+N[7]+4249261313&4294967295,x=M+(D<<22&4294967295|D>>>10),D=R+(V^x&(M^V))+N[8]+1770035416&4294967295,R=x+(D<<7&4294967295|D>>>25),D=V+(M^R&(x^M))+N[9]+2336552879&4294967295,V=R+(D<<12&4294967295|D>>>20),D=M+(x^V&(R^x))+N[10]+4294925233&4294967295,M=V+(D<<17&4294967295|D>>>15),D=x+(R^M&(V^R))+N[11]+2304563134&4294967295,x=M+(D<<22&4294967295|D>>>10),D=R+(V^x&(M^V))+N[12]+1804603682&4294967295,R=x+(D<<7&4294967295|D>>>25),D=V+(M^R&(x^M))+N[13]+4254626195&4294967295,V=R+(D<<12&4294967295|D>>>20),D=M+(x^V&(R^x))+N[14]+2792965006&4294967295,M=V+(D<<17&4294967295|D>>>15),D=x+(R^M&(V^R))+N[15]+1236535329&4294967295,x=M+(D<<22&4294967295|D>>>10),D=R+(M^V&(x^M))+N[1]+4129170786&4294967295,R=x+(D<<5&4294967295|D>>>27),D=V+(x^M&(R^x))+N[6]+3225465664&4294967295,V=R+(D<<9&4294967295|D>>>23),D=M+(R^x&(V^R))+N[11]+643717713&4294967295,M=V+(D<<14&4294967295|D>>>18),D=x+(V^R&(M^V))+N[0]+3921069994&4294967295,x=M+(D<<20&4294967295|D>>>12),D=R+(M^V&(x^M))+N[5]+3593408605&4294967295,R=x+(D<<5&4294967295|D>>>27),D=V+(x^M&(R^x))+N[10]+38016083&4294967295,V=R+(D<<9&4294967295|D>>>23),D=M+(R^x&(V^R))+N[15]+3634488961&4294967295,M=V+(D<<14&4294967295|D>>>18),D=x+(V^R&(M^V))+N[4]+3889429448&4294967295,x=M+(D<<20&4294967295|D>>>12),D=R+(M^V&(x^M))+N[9]+568446438&4294967295,R=x+(D<<5&4294967295|D>>>27),D=V+(x^M&(R^x))+N[14]+3275163606&4294967295,V=R+(D<<9&4294967295|D>>>23),D=M+(R^x&(V^R))+N[3]+4107603335&4294967295,M=V+(D<<14&4294967295|D>>>18),D=x+(V^R&(M^V))+N[8]+1163531501&4294967295,x=M+(D<<20&4294967295|D>>>12),D=R+(M^V&(x^M))+N[13]+2850285829&4294967295,R=x+(D<<5&4294967295|D>>>27),D=V+(x^M&(R^x))+N[2]+4243563512&4294967295,V=R+(D<<9&4294967295|D>>>23),D=M+(R^x&(V^R))+N[7]+1735328473&4294967295,M=V+(D<<14&4294967295|D>>>18),D=x+(V^R&(M^V))+N[12]+2368359562&4294967295,x=M+(D<<20&4294967295|D>>>12),D=R+(x^M^V)+N[5]+4294588738&4294967295,R=x+(D<<4&4294967295|D>>>28),D=V+(R^x^M)+N[8]+2272392833&4294967295,V=R+(D<<11&4294967295|D>>>21),D=M+(V^R^x)+N[11]+1839030562&4294967295,M=V+(D<<16&4294967295|D>>>16),D=x+(M^V^R)+N[14]+4259657740&4294967295,x=M+(D<<23&4294967295|D>>>9),D=R+(x^M^V)+N[1]+2763975236&4294967295,R=x+(D<<4&4294967295|D>>>28),D=V+(R^x^M)+N[4]+1272893353&4294967295,V=R+(D<<11&4294967295|D>>>21),D=M+(V^R^x)+N[7]+4139469664&4294967295,M=V+(D<<16&4294967295|D>>>16),D=x+(M^V^R)+N[10]+3200236656&4294967295,x=M+(D<<23&4294967295|D>>>9),D=R+(x^M^V)+N[13]+681279174&4294967295,R=x+(D<<4&4294967295|D>>>28),D=V+(R^x^M)+N[0]+3936430074&4294967295,V=R+(D<<11&4294967295|D>>>21),D=M+(V^R^x)+N[3]+3572445317&4294967295,M=V+(D<<16&4294967295|D>>>16),D=x+(M^V^R)+N[6]+76029189&4294967295,x=M+(D<<23&4294967295|D>>>9),D=R+(x^M^V)+N[9]+3654602809&4294967295,R=x+(D<<4&4294967295|D>>>28),D=V+(R^x^M)+N[12]+3873151461&4294967295,V=R+(D<<11&4294967295|D>>>21),D=M+(V^R^x)+N[15]+530742520&4294967295,M=V+(D<<16&4294967295|D>>>16),D=x+(M^V^R)+N[2]+3299628645&4294967295,x=M+(D<<23&4294967295|D>>>9),D=R+(M^(x|~V))+N[0]+4096336452&4294967295,R=x+(D<<6&4294967295|D>>>26),D=V+(x^(R|~M))+N[7]+1126891415&4294967295,V=R+(D<<10&4294967295|D>>>22),D=M+(R^(V|~x))+N[14]+2878612391&4294967295,M=V+(D<<15&4294967295|D>>>17),D=x+(V^(M|~R))+N[5]+4237533241&4294967295,x=M+(D<<21&4294967295|D>>>11),D=R+(M^(x|~V))+N[12]+1700485571&4294967295,R=x+(D<<6&4294967295|D>>>26),D=V+(x^(R|~M))+N[3]+2399980690&4294967295,V=R+(D<<10&4294967295|D>>>22),D=M+(R^(V|~x))+N[10]+4293915773&4294967295,M=V+(D<<15&4294967295|D>>>17),D=x+(V^(M|~R))+N[1]+2240044497&4294967295,x=M+(D<<21&4294967295|D>>>11),D=R+(M^(x|~V))+N[8]+1873313359&4294967295,R=x+(D<<6&4294967295|D>>>26),D=V+(x^(R|~M))+N[15]+4264355552&4294967295,V=R+(D<<10&4294967295|D>>>22),D=M+(R^(V|~x))+N[6]+2734768916&4294967295,M=V+(D<<15&4294967295|D>>>17),D=x+(V^(M|~R))+N[13]+1309151649&4294967295,x=M+(D<<21&4294967295|D>>>11),D=R+(M^(x|~V))+N[4]+4149444226&4294967295,R=x+(D<<6&4294967295|D>>>26),D=V+(x^(R|~M))+N[11]+3174756917&4294967295,V=R+(D<<10&4294967295|D>>>22),D=M+(R^(V|~x))+N[2]+718787259&4294967295,M=V+(D<<15&4294967295|D>>>17),D=x+(V^(M|~R))+N[9]+3951481745&4294967295,A.g[0]=A.g[0]+R&4294967295,A.g[1]=A.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+V&4294967295}a.prototype.v=function(A,R){R===void 0&&(R=A.length);const x=R-this.blockSize,N=this.C;let M=this.h,V=0;for(;V<R;){if(M==0)for(;V<=x;)s(this,A,V),V+=this.blockSize;if(typeof A=="string"){for(;V<R;)if(N[M++]=A.charCodeAt(V++),M==this.blockSize){s(this,N),M=0;break}}else for(;V<R;)if(N[M++]=A[V++],M==this.blockSize){s(this,N),M=0;break}}this.h=M,this.o+=R},a.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var R=1;R<A.length-8;++R)A[R]=0;R=this.o*8;for(var x=A.length-8;x<A.length;++x)A[x]=R&255,R/=256;for(this.v(A),A=Array(16),R=0,x=0;x<4;++x)for(let N=0;N<32;N+=8)A[R++]=this.g[x]>>>N&255;return A};function l(A,R){var x=d;return Object.prototype.hasOwnProperty.call(x,A)?x[A]:x[A]=R(A)}function c(A,R){this.h=R;const x=[];let N=!0;for(let M=A.length-1;M>=0;M--){const V=A[M]|0;N&&V==R||(x[M]=V,N=!1)}this.g=x}var d={};function m(A){return-128<=A&&A<128?l(A,function(R){return new c([R|0],R<0?-1:0)}):new c([A|0],A<0?-1:0)}function g(A){if(isNaN(A)||!isFinite(A))return E;if(A<0)return k(g(-A));const R=[];let x=1;for(let N=0;A>=x;N++)R[N]=A/x|0,x*=4294967296;return new c(R,0)}function y(A,R){if(A.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(A.charAt(0)=="-")return k(y(A.substring(1),R));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=g(Math.pow(R,8));let N=E;for(let V=0;V<A.length;V+=8){var M=Math.min(8,A.length-V);const D=parseInt(A.substring(V,V+M),R);M<8?(M=g(Math.pow(R,M)),N=N.j(M).add(g(D))):(N=N.j(x),N=N.add(g(D)))}return N}var E=m(0),S=m(1),w=m(16777216);n=c.prototype,n.m=function(){if(q(this))return-k(this).m();let A=0,R=1;for(let x=0;x<this.g.length;x++){const N=this.i(x);A+=(N>=0?N:4294967296+N)*R,R*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(O(this))return"0";if(q(this))return"-"+k(this).toString(A);const R=g(Math.pow(A,6));var x=this;let N="";for(;;){const M=se(x,R).g;x=K(x,M.j(R));let V=((x.g.length>0?x.g[0]:x.h)>>>0).toString(A);if(x=M,O(x))return V+N;for(;V.length<6;)V="0"+V;N=V+N}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function O(A){if(A.h!=0)return!1;for(let R=0;R<A.g.length;R++)if(A.g[R]!=0)return!1;return!0}function q(A){return A.h==-1}n.l=function(A){return A=K(this,A),q(A)?-1:O(A)?0:1};function k(A){const R=A.g.length,x=[];for(let N=0;N<R;N++)x[N]=~A.g[N];return new c(x,~A.h).add(S)}n.abs=function(){return q(this)?k(this):this},n.add=function(A){const R=Math.max(this.g.length,A.g.length),x=[];let N=0;for(let M=0;M<=R;M++){let V=N+(this.i(M)&65535)+(A.i(M)&65535),D=(V>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);N=D>>>16,V&=65535,D&=65535,x[M]=D<<16|V}return new c(x,x[x.length-1]&-2147483648?-1:0)};function K(A,R){return A.add(k(R))}n.j=function(A){if(O(this)||O(A))return E;if(q(this))return q(A)?k(this).j(k(A)):k(k(this).j(A));if(q(A))return k(this.j(k(A)));if(this.l(w)<0&&A.l(w)<0)return g(this.m()*A.m());const R=this.g.length+A.g.length,x=[];for(var N=0;N<2*R;N++)x[N]=0;for(N=0;N<this.g.length;N++)for(let M=0;M<A.g.length;M++){const V=this.i(N)>>>16,D=this.i(N)&65535,me=A.i(M)>>>16,ye=A.i(M)&65535;x[2*N+2*M]+=D*ye,H(x,2*N+2*M),x[2*N+2*M+1]+=V*ye,H(x,2*N+2*M+1),x[2*N+2*M+1]+=D*me,H(x,2*N+2*M+1),x[2*N+2*M+2]+=V*me,H(x,2*N+2*M+2)}for(A=0;A<R;A++)x[A]=x[2*A+1]<<16|x[2*A];for(A=R;A<2*R;A++)x[A]=0;return new c(x,0)};function H(A,R){for(;(A[R]&65535)!=A[R];)A[R+1]+=A[R]>>>16,A[R]&=65535,R++}function X(A,R){this.g=A,this.h=R}function se(A,R){if(O(R))throw Error("division by zero");if(O(A))return new X(E,E);if(q(A))return R=se(k(A),R),new X(k(R.g),k(R.h));if(q(R))return R=se(A,k(R)),new X(k(R.g),R.h);if(A.g.length>30){if(q(A)||q(R))throw Error("slowDivide_ only works with positive integers.");for(var x=S,N=R;N.l(A)<=0;)x=ue(x),N=ue(N);var M=G(x,1),V=G(N,1);for(N=G(N,2),x=G(x,2);!O(N);){var D=V.add(N);D.l(A)<=0&&(M=M.add(x),V=D),N=G(N,1),x=G(x,1)}return R=K(A,M.j(R)),new X(M,R)}for(M=E;A.l(R)>=0;){for(x=Math.max(1,Math.floor(A.m()/R.m())),N=Math.ceil(Math.log(x)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),V=g(x),D=V.j(R);q(D)||D.l(A)>0;)x-=N,V=g(x),D=V.j(R);O(V)&&(V=S),M=M.add(V),A=K(A,D)}return new X(M,A)}n.B=function(A){return se(this,A).h},n.and=function(A){const R=Math.max(this.g.length,A.g.length),x=[];for(let N=0;N<R;N++)x[N]=this.i(N)&A.i(N);return new c(x,this.h&A.h)},n.or=function(A){const R=Math.max(this.g.length,A.g.length),x=[];for(let N=0;N<R;N++)x[N]=this.i(N)|A.i(N);return new c(x,this.h|A.h)},n.xor=function(A){const R=Math.max(this.g.length,A.g.length),x=[];for(let N=0;N<R;N++)x[N]=this.i(N)^A.i(N);return new c(x,this.h^A.h)};function ue(A){const R=A.g.length+1,x=[];for(let N=0;N<R;N++)x[N]=A.i(N)<<1|A.i(N-1)>>>31;return new c(x,A.h)}function G(A,R){const x=R>>5;R%=32;const N=A.g.length-x,M=[];for(let V=0;V<N;V++)M[V]=R>0?A.i(V+x)>>>R|A.i(V+x+1)<<32-R:A.i(V+x);return new c(M,A.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,GA=a,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,Ts=c}).apply(typeof u0<"u"?u0:typeof self<"u"?self:typeof window<"u"?window:{});var Tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $A,tc,KA,kf,ty,YA,QA,XA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tf=="object"&&Tf];for(var _=0;_<h.length;++_){var b=h[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var a=t(this);function s(h,_){if(_)e:{var b=a;h=h.split(".");for(var I=0;I<h.length-1;I++){var W=h[I];if(!(W in b))break e;b=b[W]}h=h[h.length-1],I=b[h],_=_(I),_!=I&&_!=null&&e(b,h,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(_){var b=[],I;for(I in _)Object.prototype.hasOwnProperty.call(_,I)&&b.push([I,_[I]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,b){return h.call.apply(h.bind,arguments)}function g(h,_,b){return g=m,g.apply(null,arguments)}function y(h,_){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function E(h,_){function b(){}b.prototype=_.prototype,h.Z=_.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(I,W,re){for(var Ce=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)Ce[tt-2]=arguments[tt];return _.prototype[W].apply(I,Ce)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const _=h.length;if(_>0){const b=Array(_);for(let I=0;I<_;I++)b[I]=h[I];return b}return[]}function O(h,_){for(let I=1;I<arguments.length;I++){const W=arguments[I];var b=typeof W;if(b=b!="object"?b:W?Array.isArray(W)?"array":b:"null",b=="array"||b=="object"&&typeof W.length=="number"){b=h.length||0;const re=W.length||0;h.length=b+re;for(let Ce=0;Ce<re;Ce++)h[b+Ce]=W[Ce]}else h.push(W)}}class q{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function k(h){c.setTimeout(()=>{throw h},0)}function K(){var h=A;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class H{constructor(){this.h=this.g=null}add(_,b){const I=X.get();I.set(_,b),this.h?this.h.next=I:this.g=I,this.h=I}}var X=new q(()=>new se,h=>h.reset());class se{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,G=!1,A=new H,R=()=>{const h=Promise.resolve(void 0);ue=()=>{h.then(x)}};function x(){for(var h;h=K();){try{h.h.call(h.g)}catch(b){k(b)}var _=X;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}G=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};c.addEventListener("test",b,_),c.removeEventListener("test",b,_)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function me(h,_){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}E(me,M),me.prototype.init=function(h,_){const b=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(b=="mouseover"?_=h.fromElement:b=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),z=0;function ne(h,_,b,I,W){this.listener=h,this.proxy=null,this.src=_,this.type=b,this.capture=!!I,this.ha=W,this.key=++z,this.da=this.fa=!1}function ce(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function De(h,_,b){for(const I in h)_.call(b,h[I],I,h)}function Ue(h,_){for(const b in h)_.call(void 0,h[b],b,h)}function U(h){const _={};for(const b in h)_[b]=h[b];return _}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(h,_){let b,I;for(let W=1;W<arguments.length;W++){I=arguments[W];for(b in I)h[b]=I[b];for(let re=0;re<ie.length;re++)b=ie[re],Object.prototype.hasOwnProperty.call(I,b)&&(h[b]=I[b])}}function oe(h){this.src=h,this.g={},this.h=0}oe.prototype.add=function(h,_,b,I,W){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const Ce=be(h,_,I,W);return Ce>-1?(_=h[Ce],b||(_.fa=!1)):(_=new ne(_,this.src,re,!!I,W),_.fa=b,h.push(_)),_};function Ee(h,_){const b=_.type;if(b in h.g){var I=h.g[b],W=Array.prototype.indexOf.call(I,_,void 0),re;(re=W>=0)&&Array.prototype.splice.call(I,W,1),re&&(ce(_),h.g[b].length==0&&(delete h.g[b],h.h--))}}function be(h,_,b,I){for(let W=0;W<h.length;++W){const re=h[W];if(!re.da&&re.listener==_&&re.capture==!!b&&re.ha==I)return W}return-1}var Ne="closure_lm_"+(Math.random()*1e6|0),Be={};function $e(h,_,b,I,W){if(Array.isArray(_)){for(let re=0;re<_.length;re++)$e(h,_[re],b,I,W);return null}return b=Sr(b),h&&h[ye]?h.J(_,b,d(I)?!!I.capture:!1,W):yt(h,_,b,!1,I,W)}function yt(h,_,b,I,W,re){if(!_)throw Error("Invalid event type");const Ce=d(W)?!!W.capture:!!W;let tt=an(h);if(tt||(h[Ne]=tt=new oe(h)),b=tt.add(_,b,I,Ce,re),b.proxy)return b;if(I=Lt(),b.proxy=I,I.src=h,I.listener=b,h.addEventListener)V||(W=Ce),W===void 0&&(W=!1),h.addEventListener(_.toString(),I,W);else if(h.attachEvent)h.attachEvent(fn(_.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Lt(){function h(b){return _.call(h.src,h.listener,b)}const _=Hr;return h}function dt(h,_,b,I,W){if(Array.isArray(_))for(var re=0;re<_.length;re++)dt(h,_[re],b,I,W);else I=d(I)?!!I.capture:!!I,b=Sr(b),h&&h[ye]?(h=h.i,re=String(_).toString(),re in h.g&&(_=h.g[re],b=be(_,b,I,W),b>-1&&(ce(_[b]),Array.prototype.splice.call(_,b,1),_.length==0&&(delete h.g[re],h.h--)))):h&&(h=an(h))&&(_=h.g[_.toString()],h=-1,_&&(h=be(_,b,I,W)),(b=h>-1?_[h]:null)&&tn(b))}function tn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ye])Ee(_.i,h);else{var b=h.type,I=h.proxy;_.removeEventListener?_.removeEventListener(b,I,h.capture):_.detachEvent?_.detachEvent(fn(b),I):_.addListener&&_.removeListener&&_.removeListener(I),(b=an(_))?(Ee(b,h),b.h==0&&(b.src=null,_[Ne]=null)):ce(h)}}}function fn(h){return h in Be?Be[h]:Be[h]="on"+h}function Hr(h,_){if(h.da)h=!0;else{_=new me(_,this);const b=h.listener,I=h.ha||h.src;h.fa&&tn(h),h=b.call(I,_)}return h}function an(h){return h=h[Ne],h instanceof oe?h:null}var Bn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Sr(h){return typeof h=="function"?h:(h[Bn]||(h[Bn]=function(_){return h.handleEvent(_)}),h[Bn])}function Pt(){N.call(this),this.i=new oe(this),this.M=this,this.G=null}E(Pt,N),Pt.prototype[ye]=!0,Pt.prototype.removeEventListener=function(h,_,b,I){dt(this,h,_,b,I)};function lt(h,_){var b,I=h.G;if(I)for(b=[];I;I=I.G)b.push(I);if(h=h.M,I=_.type||_,typeof _=="string")_=new M(_,h);else if(_ instanceof M)_.target=_.target||h;else{var W=_;_=new M(I,h),Te(_,W)}W=!0;let re,Ce;if(b)for(Ce=b.length-1;Ce>=0;Ce--)re=_.g=b[Ce],W=Nn(re,I,!0,_)&&W;if(re=_.g=h,W=Nn(re,I,!0,_)&&W,W=Nn(re,I,!1,_)&&W,b)for(Ce=0;Ce<b.length;Ce++)re=_.g=b[Ce],W=Nn(re,I,!1,_)&&W}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const b=h.g[_];for(let I=0;I<b.length;I++)ce(b[I]);delete h.g[_],h.h--}}this.G=null},Pt.prototype.J=function(h,_,b,I){return this.i.add(String(h),_,!1,b,I)},Pt.prototype.K=function(h,_,b,I){return this.i.add(String(h),_,!0,b,I)};function Nn(h,_,b,I){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let W=!0;for(let re=0;re<_.length;++re){const Ce=_[re];if(Ce&&!Ce.da&&Ce.capture==b){const tt=Ce.listener,yn=Ce.ha||Ce.src;Ce.fa&&Ee(h.i,Ce),W=tt.call(yn,I)!==!1&&W}}return W&&!I.defaultPrevented}function wi(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function ui(h){h.g=wi(()=>{h.g=null,h.i&&(h.i=!1,ui(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class qt extends N{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ui(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sn(h){N.call(this),this.h=h,this.g={}}E(sn,N);var ar=[];function Ar(h){De(h.g,function(_,b){this.g.hasOwnProperty(b)&&tn(_)},h),h.g={}}sn.prototype.N=function(){sn.Z.N.call(this),Ar(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=c.JSON.stringify,F=c.JSON.parse,he=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function we(){}function ve(){}var xe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Re(){M.call(this,"d")}E(Re,M);function mt(){M.call(this,"c")}E(mt,M);var Fe={},ht=null;function Me(){return ht=ht||new Pt}Fe.Ia="serverreachability";function st(h){M.call(this,Fe.Ia,h)}E(st,M);function $t(h){const _=Me();lt(_,new st(_))}Fe.STAT_EVENT="statevent";function Dn(h,_){M.call(this,Fe.STAT_EVENT,h),this.stat=_}E(Dn,M);function Ct(h){const _=Me();lt(_,new Dn(_,h))}Fe.Ja="timingevent";function On(h,_){M.call(this,Fe.Ja,h),this.size=_}E(On,M);function Mn(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function wr(){this.g=!0}wr.prototype.ua=function(){this.g=!1};function Co(h,_,b,I,W,re){h.info(function(){if(h.g)if(re){var Ce="",tt=re.split("&");for(let Nt=0;Nt<tt.length;Nt++){var yn=tt[Nt].split("=");if(yn.length>1){const nn=yn[0];yn=yn[1];const Gr=nn.split("_");Ce=Gr.length>=2&&Gr[1]=="type"?Ce+(nn+"="+yn+"&"):Ce+(nn+"=redacted&")}}}else Ce=null;else Ce=re;return"XMLHTTP REQ ("+I+") [attempt "+W+"]: "+_+`
`+b+`
`+Ce})}function Qi(h,_,b,I,W,re,Ce){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+W+"]: "+_+`
`+b+`
`+re+" "+Ce})}function sr(h,_,b,I){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+tu(h,b)+(I?" "+I:"")})}function Ci(h,_){h.info(function(){return"TIMEOUT: "+_})}wr.prototype.info=function(){};function tu(h,_){if(!h.g)return _;if(!_)return null;try{const re=JSON.parse(_);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var b=re[h];if(!(b.length<2)){var I=b[1];if(Array.isArray(I)&&!(I.length<1)){var W=I[0];if(W!="noop"&&W!="stop"&&W!="close")for(let Ce=1;Ce<I.length;Ce++)I[Ce]=""}}}}return gn(re)}catch{return _}}var Xi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},L={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$;function ee(){}E(ee,we),ee.prototype.g=function(){return new XMLHttpRequest},$=new ee;function _e(h){return encodeURIComponent(String(h))}function Se(h){var _=1;h=h.split(":");const b=[];for(;_>0&&h.length;)b.push(h.shift()),_--;return h.length&&b.push(h.join(":")),b}function Pe(h,_,b,I){this.j=h,this.i=_,this.l=b,this.S=I||1,this.V=new sn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}var Ae={},Ie={};function ke(h,_,b){h.M=1,h.A=Ms(Ut(_)),h.u=b,h.R=!0,Ye(h,null)}function Ye(h,_){h.F=Date.now(),jt(h),h.B=Ut(h.A);var b=h.B,I=h.S;Array.isArray(I)||(I=[String(I)]),Io(b.i,"t",I),h.C=0,b=h.j.L,h.h=new Le,h.g=ch(h.j,b?_:null,!h.u),h.P>0&&(h.O=new qt(g(h.Y,h,h.g),h.P)),_=h.V,b=h.g,I=h.ba;var W="readystatechange";Array.isArray(W)||(W&&(ar[0]=W.toString()),W=ar);for(let re=0;re<W.length;re++){const Ce=$e(b,W[re],I||_.handleEvent,!1,_.h||_);if(!Ce)break;_.g[Ce.key]=Ce}_=h.J?U(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),$t(),Co(h.i,h.v,h.B,h.l,h.S,h.u)}Pe.prototype.ba=function(h){h=h.target;const _=this.O;_&&fi(h)==3?_.j():this.Y(h)},Pe.prototype.Y=function(h){try{if(h==this.g)e:{const tt=fi(this.g),yn=this.g.ya(),Nt=this.g.ca();if(!(tt<3)&&(tt!=3||this.g&&(this.h.h||this.g.la()||Hn(this.g)))){this.K||tt!=4||yn==7||(yn==8||Nt<=0?$t(3):$t(2)),Kt(this);var _=this.g.ca();this.X=_;var b=He(this);if(this.o=_==200,Qi(this.i,this.v,this.B,this.l,this.S,tt,_),this.o){if(this.U&&!this.L){t:{if(this.g){var I,W=this.g;if((I=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(I)){var re=I;break t}}re=null}if(h=re)sr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jn(this,h);else{this.o=!1,this.m=3,Ct(12),Yt(this),rt(this);break e}}if(this.R){h=!0;let nn;for(;!this.K&&this.C<b.length;)if(nn=ut(this,b),nn==Ie){tt==4&&(this.m=4,Ct(14),h=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==Ae){this.m=4,Ct(15),sr(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else sr(this.i,this.l,nn,null),jn(this,nn);if(We(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||b.length!=0||this.h.h||(this.m=1,Ct(16),h=!1),this.o=this.o&&h,!h)sr(this.i,this.l,b,"[Invalid Chunked Response]"),Yt(this),rt(this);else if(b.length>0&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.aa&&!Ce.P&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),cu(Ce),Ce.P=!0,Ct(11))}}else sr(this.i,this.l,b,null),jn(this,b);tt==4&&Yt(this),this.o&&!this.K&&(tt==4?sh(this.j,this):(this.o=!1,jt(this)))}else Ji(this.g),_==400&&b.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Yt(this),rt(this)}}}catch{}finally{}};function He(h){if(!We(h))return h.g.la();const _=Hn(h.g);if(_==="")return"";let b="";const I=_.length,W=fi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Yt(h),rt(h),"";h.h.i=new c.TextDecoder}for(let re=0;re<I;re++)h.h.h=!0,b+=h.h.i.decode(_[re],{stream:!(W&&re==I-1)});return _.length=0,h.h.g+=b,h.C=0,h.h.g}function We(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ut(h,_){var b=h.C,I=_.indexOf(`
`,b);return I==-1?Ie:(b=Number(_.substring(b,I)),isNaN(b)?Ae:(I+=1,I+b>_.length?Ie:(_=_.slice(I,I+b),h.C=I+b,_)))}Pe.prototype.cancel=function(){this.K=!0,Yt(this)};function jt(h){h.T=Date.now()+h.H,Wt(h,h.H)}function Wt(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Mn(g(h.aa,h),_)}function Kt(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Pe.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ci(this.i,this.B),this.M!=2&&($t(),Ct(17)),Yt(this),this.m=2,rt(this)):Wt(this,this.T-h)};function rt(h){h.j.I==0||h.K||sh(h.j,h)}function Yt(h){Kt(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Ar(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function jn(h,_){try{var b=h.j;if(b.I!=0&&(b.g==h||Jn(b.h,h))){if(!h.L&&Jn(b.h,h)&&b.I==3){try{var I=b.Ba.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var W=I;if(W[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)Mo(b),ja(b);else break e;zs(b),Ct(18)}}else b.xa=W[1],0<b.xa-b.K&&W[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Mn(g(b.Va,b),6e3));fr(b.h)<=1&&b.ta&&(b.ta=void 0)}else Pi(b,11)}else if((h.L||b.g==h)&&Mo(b),!D(_))for(W=b.Ba.g.parse(_),_=0;_<W.length;_++){let Nt=W[_];const nn=Nt[0];if(!(nn<=b.K))if(b.K=nn,Nt=Nt[1],b.I==2)if(Nt[0]=="c"){b.M=Nt[1],b.ba=Nt[2];const Gr=Nt[3];Gr!=null&&(b.ka=Gr,b.j.info("VER="+b.ka));const Vi=Nt[4];Vi!=null&&(b.za=Vi,b.j.info("SVER="+b.za));const di=Nt[5];di!=null&&typeof di=="number"&&di>0&&(I=1.5*di,b.O=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const mi=h.g;if(mi){const Bs=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var re=I.h;re.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Cr(re,re.h),re.h=null))}if(I.G){const Po=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Po&&(I.wa=Po,xt(I.J,I.G,Po))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),I=b;var Ce=h;if(I.na=uh(I,I.L?I.ba:null,I.W),Ce.L){Ri(I.h,Ce);var tt=Ce,yn=I.O;yn&&(tt.H=yn),tt.D&&(Kt(tt),jt(tt)),I.g=Ce}else ih(I);b.i.length>0&&Mi(b)}else Nt[0]!="stop"&&Nt[0]!="close"||Pi(b,7);else b.I==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?Pi(b,7):lu(b):Nt[0]!="noop"&&b.l&&b.l.qa(Nt),b.A=0)}}$t(4)}catch{}}var Qt=class{constructor(h,_){this.g=h,this.map=_}};function hr(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function fr(h){return h.h?1:h.g?h.g.size:0}function Jn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Cr(h,_){h.g?h.g.add(_):h.h=_}function Ri(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}hr.prototype.cancel=function(){if(this.i=Ii(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ii(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const b of h.g.values())_=_.concat(b.G);return _}return w(h.i)}var ft=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function on(h,_){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const I=h[b].indexOf("=");let W,re=null;I>=0?(W=h[b].substring(0,I),re=h[b].substring(I+1)):W=h[b],_(W,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Tn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof Tn?(this.l=h.l,it(this,h.j),this.o=h.o,this.g=h.g,Rr(this,h.u),this.h=h.h,Da(this,nh(h.i)),this.m=h.m):h&&(_=String(h).match(ft))?(this.l=!1,it(this,_[1]||"",!0),this.o=xi(_[2]||""),this.g=xi(_[3]||"",!0),Rr(this,_[4]),this.h=xi(_[5]||"",!0),Da(this,_[6]||"",!0),this.m=xi(_[7]||"")):(this.l=!1,this.i=new Ma(null,this.l))}Tn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Ps(_,Ro,!0),":");var b=this.g;return(b||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Ps(_,Ro,!0),"@"),h.push(_e(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Ps(b,b.charAt(0)=="/"?nu:Zc,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Ps(b,eh)),h.join("")},Tn.prototype.resolve=function(h){const _=Ut(this);let b=!!h.j;b?it(_,h.j):b=!!h.o,b?_.o=h.o:b=!!h.g,b?_.g=h.g:b=h.u!=null;var I=h.h;if(b)Rr(_,h.u);else if(b=!!h.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var W=_.h.lastIndexOf("/");W!=-1&&(I=_.h.slice(0,W+1)+I)}if(W=I,W==".."||W==".")I="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){I=W.lastIndexOf("/",0)==0,W=W.split("/");const re=[];for(let Ce=0;Ce<W.length;){const tt=W[Ce++];tt=="."?I&&Ce==W.length&&re.push(""):tt==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),I&&Ce==W.length&&re.push("")):(re.push(tt),I=!0)}I=re.join("/")}else I=W}return b?_.h=I:b=h.i.toString()!=="",b?Da(_,nh(h.i)):b=!!h.m,b&&(_.m=h.m),_};function Ut(h){return new Tn(h)}function it(h,_,b){h.j=b?xi(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Rr(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Da(h,_,b){_ instanceof Ma?(h.i=_,xo(h.i,h.l)):(b||(_=Ps(_,Oa)),h.i=new Ma(_,h.l))}function xt(h,_,b){h.i.set(_,b)}function Ms(h){return xt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function xi(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ps(h,_,b){return typeof h=="string"?(h=encodeURI(h).replace(_,dr),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dr(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ro=/[#\/\?@]/g,Zc=/[#\?:]/g,nu=/[#\?]/g,Oa=/[#\?@]/g,eh=/#/g;function Ma(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function mr(h){h.g||(h.g=new Map,h.h=0,h.i&&on(h.i,function(_,b){h.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=Ma.prototype,n.add=function(h,_){mr(this),this.i=null,h=Pa(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(_),this.h+=1,this};function th(h,_){mr(h),_=Pa(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ru(h,_){return mr(h),_=Pa(h,_),h.g.has(_)}n.forEach=function(h,_){mr(this),this.g.forEach(function(b,I){b.forEach(function(W){h.call(_,W,I,this)},this)},this)};function iu(h,_){mr(h);let b=[];if(typeof _=="string")ru(h,_)&&(b=b.concat(h.g.get(Pa(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)b=b.concat(h[_]);return b}n.set=function(h,_){return mr(this),this.i=null,h=Pa(this,h),ru(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=iu(this,h),h.length>0?String(h[0]):_):_};function Io(h,_,b){th(h,_),b.length>0&&(h.i=null,h.g.set(Pa(h,_),w(b)),h.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let I=0;I<_.length;I++){var b=_[I];const W=_e(b);b=iu(this,b);for(let re=0;re<b.length;re++){let Ce=W;b[re]!==""&&(Ce+="="+_e(b[re])),h.push(Ce)}}return this.i=h.join("&")};function nh(h){const _=new Ma;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Pa(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function xo(h,_){_&&!h.j&&(mr(h),h.i=null,h.g.forEach(function(b,I){const W=I.toLowerCase();I!=W&&(th(this,I),Io(this,W,b))},h)),h.j=_}function ci(h,_){const b=new wr;if(c.Image){const I=new Image;I.onload=y(Fr,b,"TestLoadImage: loaded",!0,_,I),I.onerror=y(Fr,b,"TestLoadImage: error",!1,_,I),I.onabort=y(Fr,b,"TestLoadImage: abort",!1,_,I),I.ontimeout=y(Fr,b,"TestLoadImage: timeout",!1,_,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else _(!1)}function au(h,_){const b=new wr,I=new AbortController,W=setTimeout(()=>{I.abort(),Fr(b,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:I.signal}).then(re=>{clearTimeout(W),re.ok?Fr(b,"TestPingServer: ok",!0,_):Fr(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(W),Fr(b,"TestPingServer: error",!1,_)})}function Fr(h,_,b,I,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),I(b)}catch{}}function Va(){this.g=new he}function Ni(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ni,we),Ni.prototype.g=function(){return new Vs(this.i,this.h)};function Vs(h,_){Pt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Vs,Pt),n=Vs.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,hi(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ka(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;No(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function No(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?ka(this):hi(this),this.readyState==3&&No(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,ka(this))},n.Na=function(h){this.g&&(this.response=h,ka(this))},n.ga=function(){this.g&&ka(this)};function ka(h){h.readyState=4,h.l=null,h.j=null,h.B=null,hi(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=_.next();return h.join(`\r
`)};function hi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function qr(h){let _="";return De(h,function(b,I){_+=I,_+=":",_+=b,_+=`\r
`}),_}function ks(h,_,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=qr(b),typeof h=="string"?b!=null&&_e(b):xt(h,_,b))}function zt(h){Pt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(zt,Pt);var Di=/^https?$/i,su=["POST","PUT"];n=zt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(re){Ls(this,re);return}if(h=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var W in I)b.set(W,I[W]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const re of I.keys())b.set(re,I.get(re));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(re=>re.toLowerCase()=="content-type"),W=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(su,_,void 0)>=0)||I||W||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Ce]of b)this.g.setRequestHeader(re,Ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Ls(this,re)}};function Ls(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,ou(h),Wi(h)}function ou(h){h.A||(h.A=!0,lt(h,"complete"),lt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,lt(this,"complete"),lt(this,"abort"),Wi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wi(this,!0)),zt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?js(this):this.Xa())},n.Xa=function(){js(this)};function js(h){if(h.h&&typeof l<"u"){if(h.v&&fi(h)==4)setTimeout(h.Ca.bind(h),0);else if(lt(h,"readystatechange"),fi(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var I;if(I=re===0){let Ce=String(h.D).match(ft)[1]||null;!Ce&&c.self&&c.self.location&&(Ce=c.self.location.protocol.slice(0,-1)),I=!Di.test(Ce?Ce.toLowerCase():"")}b=I}if(b)lt(h,"complete"),lt(h,"success");else{h.o=6;try{var W=fi(h)>2?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.ca()+"]",ou(h)}}finally{Wi(h)}}}}function Wi(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,_||lt(h,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function fi(h){return h.g?h.g.readyState:0}n.ca=function(){try{return fi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),F(_)}};function Hn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ji(h){const _={};h=(h.g&&fi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(D(h[I]))continue;var b=Se(h[I]);const W=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const re=_[W]||[];_[W]=re,re.push(b)}Ue(_,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(h,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||_}function La(h){this.za=0,this.i=[],this.j=new wr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oi("baseRetryDelayMs",5e3,h),this.Za=Oi("retryDelaySeedMs",1e4,h),this.Ta=Oi("forwardChannelMaxRetries",2,h),this.va=Oi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new hr(h&&h.concurrentRequestLimit),this.Ba=new Va,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=La.prototype,n.ka=8,n.I=1,n.connect=function(h,_,b,I){Ct(0),this.W=h,this.H=_||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.J=uh(this,null,this.W),Mi(this)};function lu(h){if(Do(h),h.I==3){var _=h.V++,b=Ut(h.J);if(xt(b,"SID",h.M),xt(b,"RID",_),xt(b,"TYPE","terminate"),Us(h,b),_=new Pe(h,h.j,_),_.M=2,_.A=Ms(Ut(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!b&&c.Image&&(new Image().src=_.A,b=!0),b||(_.g=ch(_.j,null),_.g.ea(_.A)),_.F=Date.now(),jt(_)}lh(h)}function ja(h){h.g&&(cu(h),h.g.cancel(),h.g=null)}function Do(h){ja(h),h.v&&(c.clearTimeout(h.v),h.v=null),Mo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Mi(h){if(!Wn(h.h)&&!h.m){h.m=!0;var _=h.Ea;ue||R(),G||(ue(),G=!0),A.add(_,h),h.D=0}}function Oo(h,_){return fr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Mn(g(h.Ea,h,_),oh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const W=new Pe(this,this.j,h);let re=this.o;if(this.U&&(re?(re=U(re),Te(re,this.U)):re=this.U),this.u!==null||this.R||(W.J=re,re=null),this.S)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(_+=I,_>4096){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=rh(this,W,_),b=Ut(this.J),xt(b,"RID",h),xt(b,"CVER",22),this.G&&xt(b,"X-HTTP-Session-Id",this.G),Us(this,b),re&&(this.R?_="headers="+_e(qr(re))+"&"+_:this.u&&ks(b,this.u,re)),Cr(this.h,W),this.Ra&&xt(b,"TYPE","init"),this.S?(xt(b,"$req",_),xt(b,"SID","null"),W.U=!0,ke(W,b,null)):ke(W,b,_),this.I=2}}else this.I==3&&(h?uu(this,h):this.i.length==0||Wn(this.h)||uu(this))};function uu(h,_){var b;_?b=_.l:b=h.V++;const I=Ut(h.J);xt(I,"SID",h.M),xt(I,"RID",b),xt(I,"AID",h.K),Us(h,I),h.u&&h.o&&ks(I,h.u,h.o),b=new Pe(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),_&&(h.i=_.G.concat(h.i)),_=rh(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Cr(h.h,b),ke(b,I,_)}function Us(h,_){h.H&&De(h.H,function(b,I){xt(_,I,b)}),h.l&&De({},function(b,I){xt(_,I,b)})}function rh(h,_,b){b=Math.min(h.i.length,b);const I=h.l?g(h.l.Ka,h.l,h):null;e:{var W=h.i;let tt=-1;for(;;){const yn=["count="+b];tt==-1?b>0?(tt=W[0].g,yn.push("ofs="+tt)):tt=0:yn.push("ofs="+tt);let Nt=!0;for(let nn=0;nn<b;nn++){var re=W[nn].g;const Gr=W[nn].map;if(re-=tt,re<0)tt=Math.max(0,W[nn].g-100),Nt=!1;else try{re="req"+re+"_"||"";try{var Ce=Gr instanceof Map?Gr:Object.entries(Gr);for(const[Vi,di]of Ce){let mi=di;d(di)&&(mi=gn(di)),yn.push(re+Vi+"="+encodeURIComponent(mi))}}catch(Vi){throw yn.push(re+"type="+encodeURIComponent("_badmap")),Vi}}catch{I&&I(Gr)}}if(Nt){Ce=yn.join("&");break e}}Ce=void 0}return h=h.i.splice(0,b),_.G=h,Ce}function ih(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;ue||R(),G||(ue(),G=!0),A.add(_,h),h.A=0}}function zs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Mn(g(h.Da,h),oh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ah(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Mn(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),ja(this),ah(this))};function cu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ah(h){h.g=new Pe(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Ut(h.na);xt(_,"RID","rpc"),xt(_,"SID",h.M),xt(_,"AID",h.K),xt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&xt(_,"TO",h.ia),xt(_,"TYPE","xmlhttp"),Us(h,_),h.u&&h.o&&ks(_,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Ms(Ut(_)),b.u=null,b.R=!0,Ye(b,h)}n.Va=function(){this.C!=null&&(this.C=null,ja(this),zs(this),Ct(19))};function Mo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function sh(h,_){var b=null;if(h.g==_){Mo(h),cu(h),h.g=null;var I=2}else if(Jn(h.h,_))b=_.G,Ri(h.h,_),I=1;else return;if(h.I!=0){if(_.o)if(I==1){b=_.u?_.u.length:0,_=Date.now()-_.F;var W=h.D;I=Me(),lt(I,new On(I,b)),Mi(h)}else ih(h);else if(W=_.m,W==3||W==0&&_.X>0||!(I==1&&Oo(h,_)||I==2&&zs(h)))switch(b&&b.length>0&&(_=h.h,_.i=_.i.concat(b)),W){case 1:Pi(h,5);break;case 4:Pi(h,10);break;case 3:Pi(h,6);break;default:Pi(h,2)}}}function oh(h,_){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*_}function Pi(h,_){if(h.j.info("Error code "+_),_==2){var b=g(h.bb,h),I=h.Ua;const W=!I;I=new Tn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||it(I,"https"),Ms(I),W?ci(I.toString(),b):au(I.toString(),b)}else Ct(2);h.I=0,h.l&&h.l.pa(_),lh(h),Do(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function lh(h){if(h.I=0,h.ja=[],h.l){const _=Ii(h.h);(_.length!=0||h.i.length!=0)&&(O(h.ja,_),O(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function uh(h,_,b){var I=b instanceof Tn?Ut(b):new Tn(b);if(I.g!="")_&&(I.g=_+"."+I.g),Rr(I,I.u);else{var W=c.location;I=W.protocol,_=_?_+"."+W.hostname:W.hostname,W=+W.port;const re=new Tn(null);I&&it(re,I),_&&(re.g=_),W&&Rr(re,W),b&&(re.h=b),I=re}return b=h.G,_=h.wa,b&&_&&xt(I,b,_),xt(I,"VER",h.ka),Us(h,I),I}function ch(h,_,b){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new zt(new Ni({ab:b})):new zt(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function hh(){}n=hh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ua(){}Ua.prototype.g=function(h,_){return new or(h,_)};function or(h,_){Pt.call(this),this.g=new La(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!D(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!D(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Zi(this)}E(or,Pt),or.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},or.prototype.close=function(){lu(this.g)},or.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=gn(h),h=b);_.i.push(new Qt(_.Ya++,h)),_.I==3&&Mi(_)},or.prototype.N=function(){this.g.l=null,delete this.j,lu(this.g),delete this.g,or.Z.N.call(this)};function fh(h){Re.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const b in _){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}E(fh,Re);function dh(){mt.call(this),this.status=1}E(dh,mt);function Zi(h){this.g=h}E(Zi,hh),Zi.prototype.ra=function(){lt(this.g,"a")},Zi.prototype.qa=function(h){lt(this.g,new fh(h))},Zi.prototype.pa=function(h){lt(this.g,new dh)},Zi.prototype.oa=function(){lt(this.g,"b")},Ua.prototype.createWebChannel=Ua.prototype.g,or.prototype.send=or.prototype.o,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,XA=function(){return new Ua},QA=function(){return Me()},YA=Fe,ty={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xi.NO_ERROR=0,Xi.TIMEOUT=8,Xi.HTTP_ERROR=6,kf=Xi,L.COMPLETE="complete",KA=L,ve.EventType=xe,xe.OPEN="a",xe.CLOSE="b",xe.ERROR="c",xe.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,tc=ve,zt.prototype.listenOnce=zt.prototype.K,zt.prototype.getLastError=zt.prototype.Ha,zt.prototype.getLastErrorCode=zt.prototype.ya,zt.prototype.getStatus=zt.prototype.ca,zt.prototype.getResponseJson=zt.prototype.La,zt.prototype.getResponseText=zt.prototype.la,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Fa,$A=zt}).apply(typeof Tf<"u"?Tf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nr.UNAUTHENTICATED=new nr(null),nr.GOOGLE_CREDENTIALS=new nr("google-credentials-uid"),nr.FIRST_PARTY=new nr("first-party-uid"),nr.MOCK_USER=new nr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl="12.8.0";function oO(n){Yl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new zy("@firebase/firestore");function pl(){return go.logLevel}function Ve(n,...e){if(go.logLevel<=Et.DEBUG){const t=e.map(Fy);go.debug(`Firestore (${Yl}): ${n}`,...t)}}function wa(n,...e){if(go.logLevel<=Et.ERROR){const t=e.map(Fy);go.error(`Firestore (${Yl}): ${n}`,...t)}}function Pl(n,...e){if(go.logLevel<=Et.WARN){const t=e.map(Fy);go.warn(`Firestore (${Yl}): ${n}`,...t)}}function Fy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,WA(n,a,t)}function WA(n,e,t){let a=`FIRESTORE (${Yl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw wa(a),new Error(a)}function Mt(n,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,n||WA(e,s,a)}function et(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Na{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nr.UNAUTHENTICATED)))}shutdown(){}}class uO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class cO{constructor(e){this.t=e,this.currentUser=nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Mt(this.o===void 0,42304);let a=this.i;const s=m=>this.i!==a?(a=this.i,t(m)):Promise.resolve();let l=new Ta;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ta,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},d=m=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ta)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Mt(typeof a.accessToken=="string",31837,{l:a}),new JA(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string",2055,{h:e}),new nr(e)}}class hO{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=nr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class fO{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new hO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class c0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_i(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Mt(this.o===void 0,3512);const a=l=>{l.error!=null&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const s=l=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new c0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new c0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=mO(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function Tt(n,e){return n<e?-1:n>e?1:0}function ny(n,e){const t=Math.min(n.length,e.length);for(let a=0;a<t;a++){const s=n.charAt(a),l=e.charAt(a);if(s!==l)return Dg(s)===Dg(l)?Tt(s,l):Dg(s)?1:-1}return Tt(n.length,e.length)}const pO=55296,gO=57343;function Dg(n){const e=n.charCodeAt(0);return e>=pO&&e<=gO}function Vl(n,e,t){return n.length===e.length&&n.every(((a,s)=>t(a,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="__name__";class zi{constructor(e,t,a){t===void 0?t=0:t>e.length&&Qe(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Qe(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=zi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Tt(e.length,t.length)}static compareSegments(e,t){const a=zi.isNumericId(e),s=zi.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?zi.extractNumericId(e).compare(zi.extractNumericId(t)):ny(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ts.fromString(e.substring(4,e.length-2))}}class Xt extends zi{construct(e,t,a){return new Xt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Oe(de.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((s=>s.length>0)))}return new Xt(t)}static emptyPath(){return new Xt([])}}const yO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends zi{construct(e,t,a){return new Qn(e,t,a)}static isValidIdentifier(e){return yO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h0}static keyField(){return new Qn([h0])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new Oe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Oe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Oe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=m,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(a+=d,s++):(l(),s++)}if(l(),c)throw new Oe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(t)}static emptyPath(){return new Qn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Xt.fromString(e))}static fromName(e){return new Ge(Xt.fromString(e).popFirst(5))}static empty(){return new Ge(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Xt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(n,e,t){if(!t)throw new Oe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _O(n,e,t,a){if(e===!0&&a===!0)throw new Oe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function f0(n){if(!Ge.isDocumentKey(n))throw new Oe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function d0(n){if(Ge.isDocumentKey(n))throw new Oe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ew(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function zd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Qe(12329,{type:typeof n})}function jr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zd(n);throw new Oe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Lc(n,e){if(!ew(n))throw new Oe(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const s=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){t=`JSON missing required field: '${a}'`;break}const c=n[a];if(s&&typeof c!==s){t=`JSON field '${a}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new Oe(de.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=-62135596800,p0=1e6;class en{static now(){return en.fromMillis(Date.now())}static fromDate(e){return en.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*p0);return new en(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<m0)throw new Oe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p0}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:en._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lc(e,en._jsonSchema))return new en(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-m0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}en._jsonSchemaVersion="firestore/timestamp/1.0",en._jsonSchema={type:xn("string",en._jsonSchemaVersion),seconds:xn("number"),nanoseconds:xn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{static fromTimestamp(e){return new Je(e)}static min(){return new Je(new en(0,0))}static max(){return new Je(new en(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=-1;function vO(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,s=Je.fromTimestamp(a===1e9?new en(t+1,0):new en(t,a));return new As(s,Ge.empty(),e)}function EO(n){return new As(n.readTime,n.key,Ec)}class As{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new As(Je.min(),Ge.empty(),Ec)}static max(){return new As(Je.max(),Ge.empty(),Ec)}}function TO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ge.comparator(n.documentKey,e.documentKey),t!==0?t:Tt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==bO)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge(((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.reject(t)}static resolve(e){return new ge(((t,a)=>{t(e)}))}static reject(e){return new ge(((t,a)=>{a(e)}))}static waitFor(e){return new ge(((t,a)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(m=>a(m)))})),c=!0,l===s&&t()}))}static or(e){let t=ge.resolve(!1);for(const a of e)t=t.next((s=>s?ge.resolve(s):a()));return t}static forEach(e,t){const a=[];return e.forEach(((s,l)=>{a.push(t.call(this,s,l))})),this.waitFor(a)}static mapArray(e,t){return new ge(((a,s)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((y=>{c[g]=y,++d,d===l&&a(c)}),(y=>s(y)))}}))}static doWhile(e,t){return new ge(((a,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):a()};l()}))}}function AO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=-1;function Hd(n){return n==null}function sd(n){return n===0&&1/n==-1/0}function wO(n){return typeof n=="number"&&Number.isInteger(n)&&!sd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="";function CO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=g0(e)),e=RO(n.get(t),e);return g0(e)}function RO(n,e){let t=e;const a=n.length;for(let s=0;s<a;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case tw:t+="";break;default:t+=l}}return t}function g0(n){return n+tw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ds(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t){this.comparator=e,this.root=t||Yn.EMPTY}insert(e,t){return new hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bf(this.root,e,this.comparator,!1)}getReverseIterator(){return new bf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bf(this.root,e,this.comparator,!0)}}class bf{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yn{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??Yn.RED,this.left=s??Yn.EMPTY,this.right=l??Yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new Yn(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Yn.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Qe(27949);return e+(this.isRed()?0:1)}}Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe(57766)}get value(){throw Qe(16141)}get color(){throw Qe(16727)}get left(){throw Qe(29726)}get right(){throw Qe(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new Yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _0(this.data.getIterator())}getIteratorFrom(e){return new _0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Vn(this.comparator);return t.data=e,t}}class _0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new kr([])}unionWith(e){let t=new Vn(Qn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new kr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vl(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new rw("Invalid base64 string: "+l):l}})(e);return new Xn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new Xn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const IO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(n){if(Mt(!!n,39018),typeof n=="string"){let e=0;const t=IO.exec(n);if(Mt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:En(n.seconds),nanos:En(n.nanos)}}function En(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cs(n){return typeof n=="string"?Xn.fromBase64String(n):Xn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="server_timestamp",aw="__type__",sw="__previous_value__",ow="__local_write_time__";function $y(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[aw])==null?void 0:a.stringValue)===iw}function Fd(n){const e=n.mapValue.fields[sw];return $y(e)?Fd(e):e}function Tc(n){const e=ws(n.mapValue.fields[ow].timestampValue);return new en(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,t,a,s,l,c,d,m,g,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=y,this.apiKey=E}}const od="(default)";class bc{constructor(e,t){this.projectId=e,this.database=t||od}static empty(){return new bc("","")}get isDefaultDatabase(){return this.database===od}isEqual(e){return e instanceof bc&&e.projectId===this.projectId&&e.database===this.database}}function NO(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Oe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="__type__",DO="__max__",Sf={mapValue:{}},uw="__vector__",ld="value";function Rs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$y(n)?4:MO(n)?9007199254740991:OO(n)?10:11:Qe(28295,{value:n})}function Ki(n,e){if(n===e)return!0;const t=Rs(n);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tc(n).isEqual(Tc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=ws(s.timestampValue),d=ws(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return Cs(s.bytesValue).isEqual(Cs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return En(s.geoPointValue.latitude)===En(l.geoPointValue.latitude)&&En(s.geoPointValue.longitude)===En(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return En(s.integerValue)===En(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=En(s.doubleValue),d=En(l.doubleValue);return c===d?sd(c)===sd(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Vl(n.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if(y0(c)!==y0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Ki(c[m],d[m])))return!1;return!0})(n,e);default:return Qe(52216,{left:n})}}function Sc(n,e){return(n.values||[]).find((t=>Ki(t,e)))!==void 0}function kl(n,e){if(n===e)return 0;const t=Rs(n),a=Rs(e);if(t!==a)return Tt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=En(l.integerValue||l.doubleValue),m=En(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return v0(n.timestampValue,e.timestampValue);case 4:return v0(Tc(n),Tc(e));case 5:return ny(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=Cs(l),m=Cs(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const y=Tt(d[g],m[g]);if(y!==0)return y}return Tt(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Tt(En(l.latitude),En(c.latitude));return d!==0?d:Tt(En(l.longitude),En(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return E0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,w,O,q;const d=l.fields||{},m=c.fields||{},g=(S=d[ld])==null?void 0:S.arrayValue,y=(w=m[ld])==null?void 0:w.arrayValue,E=Tt(((O=g==null?void 0:g.values)==null?void 0:O.length)||0,((q=y==null?void 0:y.values)==null?void 0:q.length)||0);return E!==0?E:E0(g,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Sf.mapValue&&c===Sf.mapValue)return 0;if(l===Sf.mapValue)return 1;if(c===Sf.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let E=0;E<m.length&&E<y.length;++E){const S=ny(m[E],y[E]);if(S!==0)return S;const w=kl(d[m[E]],g[y[E]]);if(w!==0)return w}return Tt(m.length,y.length)})(n.mapValue,e.mapValue);default:throw Qe(23264,{he:t})}}function v0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Tt(n,e);const t=ws(n),a=ws(e),s=Tt(t.seconds,a.seconds);return s!==0?s:Tt(t.nanos,a.nanos)}function E0(n,e){const t=n.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=kl(t[s],a[s]);if(l)return l}return Tt(t.length,a.length)}function Ll(n){return ry(n)}function ry(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const a=ws(t);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Cs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ge.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=ry(l);return a+"]"})(n.arrayValue):"mapValue"in n?(function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of a)l?l=!1:s+=",",s+=`${c}:${ry(t.fields[c])}`;return s+"}"})(n.mapValue):Qe(61005,{value:n})}function Lf(n){switch(Rs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fd(n);return e?16+Lf(e):16;case 5:return 2*n.stringValue.length;case 6:return Cs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((s,l)=>s+Lf(l)),0)})(n.arrayValue);case 10:case 11:return(function(a){let s=0;return Ds(a.fields,((l,c)=>{s+=l.length+Lf(c)})),s})(n.mapValue);default:throw Qe(13486,{value:n})}}function T0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iy(n){return!!n&&"integerValue"in n}function Ky(n){return!!n&&"arrayValue"in n}function b0(n){return!!n&&"nullValue"in n}function S0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jf(n){return!!n&&"mapValue"in n}function OO(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[lw])==null?void 0:a.stringValue)===uw}function lc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ds(n.mapValue.fields,((t,a)=>e.mapValue.fields[t]=lc(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lc(n.arrayValue.values[t]);return e}return{...n}}function MO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===DO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.value=e}static empty(){return new Tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lc(t)}setAll(e){let t=Qn.emptyPath(),a={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,a,s),a={},s=[],t=d.popLast()}c?a[d.lastSegment()]=lc(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];jf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){Ds(t,((s,l)=>e[s]=l));for(const s of a)delete e[s]}clone(){return new Tr(lc(this.value))}}function cw(n){const e=[];return Ds(n.fields,((t,a)=>{const s=new Qn([t]);if(jf(a)){const l=cw(a.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t,a,s,l,c,d){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new rr(e,0,Je.min(),Je.min(),Je.min(),Tr.empty(),0)}static newFoundDocument(e,t,a,s){return new rr(e,1,t,Je.min(),a,s,0)}static newNoDocument(e,t){return new rr(e,2,t,Je.min(),Je.min(),Tr.empty(),0)}static newUnknownDocument(e,t){return new rr(e,3,t,Je.min(),Je.min(),Tr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.position=e,this.inclusive=t}}function A0(n,e,t){let a=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?a=Ge.comparator(Ge.fromName(c.referenceValue),t.key):a=kl(c,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function w0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ki(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t="asc"){this.field=e,this.dir=t}}function PO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{}class In extends hw{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new kO(e,t,a):t==="array-contains"?new UO(e,a):t==="in"?new zO(e,a):t==="not-in"?new BO(e,a):t==="array-contains-any"?new HO(e,a):new In(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new LO(e,a):new jO(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(kl(t,this.value)):t!==null&&Rs(this.value)===Rs(t)&&this.matchesComparison(kl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends hw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Si(e,t)}matches(e){return fw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fw(n){return n.op==="and"}function dw(n){return VO(n)&&fw(n)}function VO(n){for(const e of n.filters)if(e instanceof Si)return!1;return!0}function ay(n){if(n instanceof In)return n.field.canonicalString()+n.op.toString()+Ll(n.value);if(dw(n))return n.filters.map((e=>ay(e))).join(",");{const e=n.filters.map((t=>ay(t))).join(",");return`${n.op}(${e})`}}function mw(n,e){return n instanceof In?(function(a,s){return s instanceof In&&a.op===s.op&&a.field.isEqual(s.field)&&Ki(a.value,s.value)})(n,e):n instanceof Si?(function(a,s){return s instanceof Si&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce(((l,c,d)=>l&&mw(c,s.filters[d])),!0):!1})(n,e):void Qe(19439)}function pw(n){return n instanceof In?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ll(t.value)}`})(n):n instanceof Si?(function(t){return t.op.toString()+" {"+t.getFilters().map(pw).join(" ,")+"}"})(n):"Filter"}class kO extends In{constructor(e,t,a){super(e,t,a),this.key=Ge.fromName(a.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class LO extends In{constructor(e,t){super(e,"in",t),this.keys=gw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jO extends In{constructor(e,t){super(e,"not-in",t),this.keys=gw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function gw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>Ge.fromName(a.referenceValue)))}class UO extends In{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ky(t)&&Sc(t.arrayValue,this.value)}}class zO extends In{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Sc(this.value.arrayValue,t)}}class BO extends In{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Sc(this.value.arrayValue,t)}}class HO extends In{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ky(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>Sc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,t=null,a=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function C0(n,e=null,t=[],a=[],s=null,l=null,c=null){return new FO(n,e,t,a,s,l,c)}function Yy(n){const e=et(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>ay(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),Hd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>Ll(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>Ll(a))).join(",")),e.Te=t}return e.Te}function Qy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!PO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!w0(n.startAt,e.startAt)&&w0(n.endAt,e.endAt)}function sy(n){return Ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t=null,a=[],s=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function qO(n,e,t,a,s,l,c,d){return new jc(n,e,t,a,s,l,c,d)}function qd(n){return new jc(n)}function R0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function GO(n){return Ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function yw(n){return n.collectionGroup!==null}function uc(n){const e=et(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Vn(Qn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new cd(l,a))})),t.has(Qn.keyField().canonicalString())||e.Ie.push(new cd(Qn.keyField(),a))}return e.Ie}function Hi(n){const e=et(n);return e.Ee||(e.Ee=$O(e,uc(n))),e.Ee}function $O(n,e){if(n.limitType==="F")return C0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new cd(s.field,l)}));const t=n.endAt?new ud(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new ud(n.startAt.position,n.startAt.inclusive):null;return C0(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function oy(n,e){const t=n.filters.concat([e]);return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ly(n,e,t){return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gd(n,e){return Qy(Hi(n),Hi(e))&&n.limitType===e.limitType}function _w(n){return`${Yy(Hi(n))}|lt:${n.limitType}`}function gl(n){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((s=>pw(s))).join(", ")}]`),Hd(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>Ll(s))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>Ll(s))).join(",")),`Target(${a})`})(Hi(n))}; limitType=${n.limitType})`}function $d(n,e){return e.isFoundDocument()&&(function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):Ge.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(n,e)&&(function(a,s){for(const l of uc(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(a,s){return!(a.startAt&&!(function(c,d,m){const g=A0(c,d,m);return c.inclusive?g<=0:g<0})(a.startAt,uc(a),s)||a.endAt&&!(function(c,d,m){const g=A0(c,d,m);return c.inclusive?g>=0:g>0})(a.endAt,uc(a),s))})(n,e)}function KO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vw(n){return(e,t)=>{let a=!1;for(const s of uc(n)){const l=YO(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function YO(n,e,t){const a=n.field.isKeyField()?Ge.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?kl(m,g):Qe(42886)})(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return Qe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,((t,a)=>{for(const[s,l]of a)e(s,l)}))}isEmpty(){return nw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=new hn(Ge.comparator);function Ca(){return QO}const Ew=new hn(Ge.comparator);function nc(...n){let e=Ew;for(const t of n)e=e.insert(t.key,t);return e}function Tw(n){let e=Ew;return n.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function oo(){return cc()}function bw(){return cc()}function cc(){return new bo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const XO=new hn(Ge.comparator),WO=new Vn(Ge.comparator);function bt(...n){let e=WO;for(const t of n)e=e.add(t);return e}const JO=new Vn(Tt);function ZO(){return JO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sd(e)?"-0":e}}function Sw(n){return{integerValue:""+n}}function eM(n,e){return wO(e)?Sw(e):Xy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this._=void 0}}function tM(n,e,t){return n instanceof hd?(function(s,l){const c={fields:{[aw]:{stringValue:iw},[ow]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&$y(l)&&(l=Fd(l)),l&&(c.fields[sw]=l),{mapValue:c}})(t,e):n instanceof Ac?ww(n,e):n instanceof wc?Cw(n,e):(function(s,l){const c=Aw(s,l),d=I0(c)+I0(s.Ae);return iy(c)&&iy(s.Ae)?Sw(d):Xy(s.serializer,d)})(n,e)}function nM(n,e,t){return n instanceof Ac?ww(n,e):n instanceof wc?Cw(n,e):t}function Aw(n,e){return n instanceof fd?(function(a){return iy(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class hd extends Kd{}class Ac extends Kd{constructor(e){super(),this.elements=e}}function ww(n,e){const t=Rw(e);for(const a of n.elements)t.some((s=>Ki(s,a)))||t.push(a);return{arrayValue:{values:t}}}class wc extends Kd{constructor(e){super(),this.elements=e}}function Cw(n,e){let t=Rw(e);for(const a of n.elements)t=t.filter((s=>!Ki(s,a)));return{arrayValue:{values:t}}}class fd extends Kd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function I0(n){return En(n.integerValue||n.doubleValue)}function Rw(n){return Ky(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function rM(n,e){return n.field.isEqual(e.field)&&(function(a,s){return a instanceof Ac&&s instanceof Ac||a instanceof wc&&s instanceof wc?Vl(a.elements,s.elements,Ki):a instanceof fd&&s instanceof fd?Ki(a.Ae,s.Ae):a instanceof hd&&s instanceof hd})(n.transform,e.transform)}class iM{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Yd{}function Iw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Wy(n.key,Ur.none()):new Uc(n.key,n.data,Ur.none());{const t=n.data,a=Tr.empty();let s=new Vn(Qn.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?a.delete(l):a.set(l,c),s=s.add(l)}return new Os(n.key,a,new kr(s.toArray()),Ur.none())}}function aM(n,e,t){n instanceof Uc?(function(s,l,c){const d=s.value.clone(),m=N0(s.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Os?(function(s,l,c){if(!Uf(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=N0(s.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(xw(s)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function hc(n,e,t,a){return n instanceof Uc?(function(l,c,d,m){if(!Uf(l.precondition,c))return d;const g=l.value.clone(),y=D0(l.fieldTransforms,m,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,a):n instanceof Os?(function(l,c,d,m){if(!Uf(l.precondition,c))return d;const g=D0(l.fieldTransforms,m,c),y=c.data;return y.setAll(xw(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,a):(function(l,c,d){return Uf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function sM(n,e){let t=null;for(const a of n.fieldTransforms){const s=e.data.field(a.field),l=Aw(a.transform,s||null);l!=null&&(t===null&&(t=Tr.empty()),t.set(a.field,l))}return t||null}function x0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&Vl(a,s,((l,c)=>rM(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Uc extends Yd{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Os extends Yd{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function xw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}})),e}function N0(n,e,t){const a=new Map;Mt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,d=e.data.field(l.field);a.set(l.field,nM(c,d,t[s]))}return a}function D0(n,e,t){const a=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);a.set(s.field,tM(l,c,e))}return a}class Wy extends Yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oM extends Yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&aM(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=hc(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=hc(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=bw();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const m=Iw(c,d);m!==null&&a.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(Je.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),bt())}isEqual(e){return this.batchId===e.batchId&&Vl(this.mutations,e.mutations,((t,a)=>x0(t,a)))&&Vl(this.baseMutations,e.baseMutations,((t,a)=>x0(t,a)))}}class Jy{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){Mt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let s=(function(){return XO})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,a[c].version);return new Jy(e,t,a,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,At;function hM(n){switch(n){case de.OK:return Qe(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Qe(15467,{code:n})}}function Nw(n){if(n===void 0)return wa("GRPC error has no .code"),de.UNKNOWN;switch(n){case Cn.OK:return de.OK;case Cn.CANCELLED:return de.CANCELLED;case Cn.UNKNOWN:return de.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return de.INTERNAL;case Cn.UNAVAILABLE:return de.UNAVAILABLE;case Cn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Cn.NOT_FOUND:return de.NOT_FOUND;case Cn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Cn.ABORTED:return de.ABORTED;case Cn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Cn.DATA_LOSS:return de.DATA_LOSS;default:return Qe(39323,{code:n})}}(At=Cn||(Cn={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new Ts([4294967295,4294967295],0);function O0(n){const e=fM().encode(n),t=new GA;return t.update(e),new Uint8Array(t.digest())}function M0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ts([t,a],0),new Ts([s,l],0)]}class Zy{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new rc(`Invalid padding: ${t}`);if(a<0)throw new rc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new rc(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new rc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ts.fromNumber(this.ge)}ye(e,t,a){let s=e.add(t.multiply(Ts.fromNumber(a)));return s.compare(dM)===1&&(s=new Ts([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=O0(e),[a,s]=M0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);if(!this.we(c))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Zy(l,s,t);return a.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=O0(e),[a,s]=M0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class rc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,zc.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Qd(Je.min(),s,new hn(Tt),Ca(),bt())}}class zc{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new zc(a,t,bt(),bt(),bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t,a,s){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=s}}class Dw{constructor(e,t){this.targetId=e,this.Ce=t}}class Ow{constructor(e,t,a=Xn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class P0{constructor(){this.ve=0,this.Fe=V0(),this.Me=Xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=bt(),t=bt(),a=bt();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:Qe(38017,{changeType:l})}})),new zc(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=V0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Mt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class mM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ca(),this.He=Af(),this.Je=Af(),this.Ze=new hn(Tt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Qe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,a=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(sy(l))if(a===0){const c=new Ge(l.path);this.et(t,c,rr.newNoDocument(c,Je.min()))}else Mt(a===1,20013,{expectedCount:a});else{const c=this._t(t);if(c!==a){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=Cs(a).toUint8Array()}catch(m){if(m instanceof rw)return Pl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Zy(c,s,l)}catch(m){return Pl(m instanceof rc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let s=0;return a.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&sy(d.target)){const m=new Ge(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,rr.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let a=bt();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(a=a.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new Qd(e,t,this.Ze,this.je,a);return this.je=Ca(),this.He=Af(),this.Je=Af(),this.Ze=new hn(Tt),s}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new P0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Vn(Tt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Vn(Tt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new P0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Af(){return new hn(Ge.comparator)}function V0(){return new hn(Ge.comparator)}const pM={asc:"ASCENDING",desc:"DESCENDING"},gM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yM={and:"AND",or:"OR"};class _M{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function uy(n,e){return n.useProto3Json||Hd(e)?e:{value:e}}function dd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vM(n,e){return dd(n,e.toTimestamp())}function Fi(n){return Mt(!!n,49232),Je.fromTimestamp((function(t){const a=ws(t);return new en(a.seconds,a.nanos)})(n))}function e_(n,e){return cy(n,e).canonicalString()}function cy(n,e){const t=(function(s){return new Xt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Pw(n){const e=Xt.fromString(n);return Mt(Uw(e),10190,{key:e.toString()}),e}function hy(n,e){return e_(n.databaseId,e.path)}function Og(n,e){const t=Pw(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(kw(t))}function Vw(n,e){return e_(n.databaseId,e)}function EM(n){const e=Pw(n);return e.length===4?Xt.emptyPath():kw(e)}function fy(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kw(n){return Mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function k0(n,e,t){return{name:hy(n,e),fields:t.value.mapValue.fields}}function TM(n,e){let t;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Qe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(Mt(y===void 0||typeof y=="string",58123),Xn.fromBase64String(y||"")):(Mt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Xn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const y=g.code===void 0?de.UNKNOWN:Nw(g.code);return new Oe(y,g.message||"")})(c);t=new Ow(a,s,l,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=Og(n,a.document.name),l=Fi(a.document.updateTime),c=a.document.createTime?Fi(a.document.createTime):Je.min(),d=new Tr({mapValue:{fields:a.document.fields}}),m=rr.newFoundDocument(s,l,c,d),g=a.targetIds||[],y=a.removedTargetIds||[];t=new zf(g,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=Og(n,a.document),l=a.readTime?Fi(a.readTime):Je.min(),c=rr.newNoDocument(s,l),d=a.removedTargetIds||[];t=new zf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=Og(n,a.document),l=a.removedTargetIds||[];t=new zf([],l,s,null)}else{if(!("filter"in e))return Qe(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,c=new cM(s,l),d=a.targetId;t=new Dw(d,c)}}return t}function bM(n,e){let t;if(e instanceof Uc)t={update:k0(n,e.key,e.value)};else if(e instanceof Wy)t={delete:hy(n,e.key)};else if(e instanceof Os)t={update:k0(n,e.key,e.data),updateMask:DM(e.fieldMask)};else{if(!(e instanceof oM))return Qe(16599,{dt:e.type});t={verify:hy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,c){const d=c.transform;if(d instanceof hd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ac)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof wc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof fd)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Qe(20930,{transform:c.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:vM(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Qe(27497)})(n,e.precondition)),t}function SM(n,e){return n&&n.length>0?(Mt(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?Fi(s.updateTime):Fi(l);return c.isEqual(Je.min())&&(c=Fi(l)),new iM(c,s.transformResults||[])})(t,e)))):[]}function AM(n,e){return{documents:[Vw(n,e.path)]}}function wM(n,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=Vw(n,s);const l=(function(g){if(g.length!==0)return jw(Si.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((y=>(function(S){return{field:yl(S.field),direction:IM(S.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=uy(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:s}}function CM(n){let e=EM(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){Mt(a===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(E){const S=Lw(E);return S instanceof Si&&dw(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(O){return new cd(_l(O.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,Hd(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(E){const S=!!E.before,w=E.values||[];return new ud(w,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,w=E.values||[];return new ud(w,S)})(t.endAt)),qO(e,s,c,l,d,"F",m,g)}function RM(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Lw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=_l(t.unaryFilter.field);return In.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=_l(t.unaryFilter.field);return In.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=_l(t.unaryFilter.field);return In.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=_l(t.unaryFilter.field);return In.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qe(61313);default:return Qe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return In.create(_l(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qe(58110);default:return Qe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Si.create(t.compositeFilter.filters.map((a=>Lw(a))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Qe(1026)}})(t.compositeFilter.op))})(n):Qe(30097,{filter:n})}function IM(n){return pM[n]}function xM(n){return gM[n]}function NM(n){return yM[n]}function yl(n){return{fieldPath:n.canonicalString()}}function _l(n){return Qn.fromServerFormat(n.fieldPath)}function jw(n){return n instanceof In?(function(t){if(t.op==="=="){if(S0(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NAN"}};if(b0(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(S0(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NAN"}};if(b0(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(t.field),op:xM(t.op),value:t.value}}})(n):n instanceof Si?(function(t){const a=t.getFilters().map((s=>jw(s)));return a.length===1?a[0]:{compositeFilter:{op:NM(t.op),filters:a}}})(n):Qe(54877,{filter:n})}function DM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Uw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function zw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t,a,s,l=Je.min(),c=Je.min(),d=Xn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.yt=e}}function MM(n){const e=CM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ly(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this.Sn=new VM}addToCollectionParentIndex(e,t){return this.Sn.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(As.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(As.min())}updateCollectionGroup(e,t,a){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class VM{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new Vn(Xt.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new Vn(Xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bw=41943040;class Er{static withCacheSize(e){return new Er(e,Er.DEFAULT_COLLECTION_PERCENTILE,Er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er.DEFAULT_COLLECTION_PERCENTILE=10,Er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Er.DEFAULT=new Er(Bw,Er.DEFAULT_COLLECTION_PERCENTILE,Er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Er.DISABLED=new Er(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new jl(0)}static ar(){return new jl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="LruGarbageCollector",kM=1048576;function U0([n,e],[t,a]){const s=Tt(n,t);return s===0?Tt(e,a):s}class LM{constructor(e){this.Pr=e,this.buffer=new Vn(U0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();U0(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jM{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ve(j0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xl(t)?Ve(j0,"Ignoring IndexedDB error during garbage collection: ",t):await Ql(t)}await this.Ar(3e5)}))}}class UM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return ge.resolve(Bd.ce);const a=new LM(t);return this.Vr.forEachTarget(e,(s=>a.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>a.Er(s))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(L0)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),L0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,s,l,c,d,m,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(a=E,d=Date.now(),this.removeTargets(e,a,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(g=Date.now(),pl()<=Et.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-y}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function zM(n,e){return new UM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.changes=new bo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?ge.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(a=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(a!==null&&hc(a.mutation,s,kr.empty(),en.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,bt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=bt()){const s=oo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,a).next((l=>{let c=nc();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const a=oo();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,bt())))}populateOverlays(e,t,a){const s=[];return a.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,a,s){let l=Ca();const c=cc(),d=(function(){return cc()})();return t.forEach(((m,g)=>{const y=a.get(g.key);s.has(g.key)&&(y===void 0||y.mutation instanceof Os)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),hc(y.mutation,g,y.mutation.getFieldMask(),en.now())):c.set(g.key,kr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,y)=>c.set(g,y))),t.forEach(((g,y)=>d.set(g,new HM(y,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const a=cc();let s=new hn(((c,d)=>c-d)),l=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let y=a.get(m)||kr.empty();y=d.applyToLocalView(g,y),a.set(m,y);const E=(s.get(d.batchId)||bt()).add(m);s=s.insert(d.batchId,E)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,y=m.value,E=bw();y.forEach((S=>{if(!l.has(S)){const w=Iw(t.get(S),a.get(S));w!==null&&E.set(S,w),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ge.waitFor(c)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,s){return GO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):ge.resolve(oo());let d=Ec,m=l;return c.next((g=>ge.forEach(g,((y,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(y)?ge.resolve():this.remoteDocumentCache.getEntry(e,y).next((S=>{m=m.insert(y,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,bt()))).next((y=>({batchId:d,changes:Tw(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next((a=>{let s=nc();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let c=nc();return this.indexManager.getCollectionParents(e,l).next((d=>ge.forEach(d,(m=>{const g=(function(E,S){return new jc(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,a,s).next((y=>{y.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s)))).next((c=>{l.forEach(((m,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,rr.newInvalidDocument(y)))}));let d=nc();return c.forEach(((m,g)=>{const y=l.get(m);y!==void 0&&hc(y.mutation,g,kr.empty(),en.now()),$d(t,g)&&(d=d.insert(m,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ge.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Fi(s.createTime)}})(t)),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:MM(s.bundledQuery),readTime:Fi(s.readTime)}})(t)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this.overlays=new hn(Ge.comparator),this.Lr=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const a=oo();return ge.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((s,l)=>{this.bt(e,t,l)})),ge.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.Lr.get(a);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),ge.resolve()}getOverlaysForCollection(e,t,a){const s=oo(),l=t.length+1,c=new Ge(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>a&&s.set(m.getKey(),m)}return ge.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new hn(((g,y)=>g-y));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let y=l.get(g.largestBatchId);y===null&&(y=oo(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const d=oo(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,y)=>d.set(g,y))),!(d.size()>=s)););return ge.resolve(d)}bt(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(a.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(a.key,new uM(t,a));let l=this.Lr.get(t);l===void 0&&(l=bt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.sessionToken=Xn.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.kr=new Vn(zn.Kr),this.qr=new Vn(zn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new zn(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new zn(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new Ge(new Xt([])),a=new zn(t,e),s=new zn(t,e+1),l=[];return this.qr.forEachInRange([a,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ge(new Xt([])),a=new zn(t,e),s=new zn(t,e+1);let l=bt();return this.qr.forEachInRange([a,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new zn(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class zn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ge.comparator(e.key,t.key)||Tt(e.Hr,t.Hr)}static Ur(e,t){return Tt(e.Hr,t.Hr)||Ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Vn(zn.Kr)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new lM(l,t,a,s);this.mutationQueue.push(c);for(const d of s)this.Jr=this.Jr.add(new zn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(e,t){return ge.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.Xr(a),l=s<0?0:s;return ge.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?Gy:this.Yn-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new zn(t,0),s=new zn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,s],(c=>{const d=this.Zr(c.Hr);l.push(d)})),ge.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Vn(Tt);return t.forEach((s=>{const l=new zn(s,0),c=new zn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{a=a.add(d.Hr)}))})),ge.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;Ge.isDocumentKey(l)||(l=l.child(""));const c=new zn(new Ge(l),0);let d=new Vn(Tt);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!a.isPrefixOf(g)&&(g.length===s&&(d=d.add(m.Hr)),!0)}),c),ge.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((a=>{const s=this.Zr(a);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Mt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return ge.forEach(t.mutations,(s=>{const l=new zn(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new zn(t,0),s=this.Jr.firstAfterOrEqual(a);return ge.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.ti=e,this.docs=(function(){return new hn(Ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return ge.resolve(a?a.document.mutableCopy():rr.newInvalidDocument(t))}getEntries(e,t){let a=Ca();return t.forEach((s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():rr.newInvalidDocument(s))})),ge.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=Ca();const c=t.path,d=new Ge(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||TO(EO(y),a)<=0||(s.has(y.key)||$d(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ge.resolve(l)}getAllFromCollectionGroup(e,t,a,s){Qe(9500)}ni(e,t){return ge.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new QM(this)}getSize(e){return ge.resolve(this.size)}}class QM extends BM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(a)})),ge.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.persistence=e,this.ri=new bo((t=>Yy(t)),Qy),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.ii=0,this.si=new t_,this.targetCount=0,this.oi=jl._r()}forEachTarget(e,t){return this.ri.forEach(((a,s)=>t(s))),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),ge.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new jl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.lr(t),ge.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&a.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),ge.waitFor(l).next((()=>s))}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return ge.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),ge.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),ge.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return ge.resolve(a)}containsKey(e,t){return ge.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t){this._i={},this.overlays={},this.ai=new Bd(0),this.ui=!1,this.ui=!0,this.ci=new $M,this.referenceDelegate=e(this),this.li=new XM(this),this.indexManager=new PM,this.remoteDocumentCache=(function(s){return new YM(s)})((a=>this.referenceDelegate.hi(a))),this.serializer=new OM(t),this.Pi=new qM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new KM(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){Ve("MemoryPersistence","Starting transaction:",e);const s=new WM(this.ai.next());return this.referenceDelegate.Ti(),a(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return ge.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class WM extends SO{constructor(e){super(),this.currentSequenceNumber=e}}class n_{constructor(e){this.persistence=e,this.Ri=new t_,this.Ai=null}static Vi(e){return new n_(e)}get di(){if(this.Ai)return this.Ai;throw Qe(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),ge.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.di,(a=>{const s=Ge.fromPath(a);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Je.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ge.or([()=>ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class md{constructor(e,t){this.persistence=e,this.fi=new bo((a=>CO(a.path)),((a,s)=>a.isEqual(s))),this.garbageCollector=zM(this,t)}static Vi(e,t){return new md(e,t)}Ti(){}Ii(e){return ge.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return ge.forEach(this.fi,((a,s)=>this.wr(e,a,s).next((l=>l?ge.resolve():t(s)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(a++,l.removeEntry(c,Je.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ge.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),ge.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ge.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lf(e.data.value)),t}wr(e,t,a){return ge.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return ge.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=s}static Es(e,t){let a=bt(),s=bt();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new r_(e,t.fromCache,a,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return FD()?8:AO(ir())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,a).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new JM;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,a,s){return a.documentReadCount<this.Vs?(pl()<=Et.DEBUG&&Ve("QueryEngine","SDK will not create cache indexes for query:",gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ge.resolve()):(pl()<=Et.DEBUG&&Ve("QueryEngine","Query:",gl(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.ds*s?(pl()<=Et.DEBUG&&Ve("QueryEngine","The SDK decides to create cache indexes for query:",gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(t))):ge.resolve())}gs(e,t){if(R0(t))return ge.resolve(null);let a=Hi(t);return this.indexManager.getIndexType(e,a).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=ly(t,null,"F"),a=Hi(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const c=bt(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,a).next((m=>{const g=this.bs(t,d);return this.Ss(t,g,c,m.readTime)?this.gs(e,ly(t,null,"F")):this.Ds(e,g,t,m)}))))})))))}ps(e,t,a,s){return R0(t)||s.isEqual(Je.min())?ge.resolve(null):this.fs.getDocuments(e,a).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,a,s)?ge.resolve(null):(pl()<=Et.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),gl(t)),this.Ds(e,c,t,vO(s,Ec)).next((d=>d)))}))}bs(e,t){let a=new Vn(vw(e));return t.forEach(((s,l)=>{$d(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,a){return pl()<=Et.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",gl(t)),this.fs.getDocumentsMatchingQuery(e,t,As.min(),a)}Ds(e,t,a,s){return this.fs.getDocumentsMatchingQuery(e,a,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="LocalStore",e4=3e8;class t4{constructor(e,t,a,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new hn(Tt),this.Fs=new bo((l=>Yy(l)),Qy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function n4(n,e,t,a){return new t4(n,e,t,a)}async function Fw(n,e){const t=et(n);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const c=[],d=[];let m=bt();for(const g of s){c.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){d.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(a,m).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function r4(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,y){const E=g.batch,S=E.keys();let w=ge.resolve();return S.forEach((O=>{w=w.next((()=>y.getEntry(m,O))).next((q=>{const k=g.docVersions.get(O);Mt(k!==null,48541),q.version.compareTo(k)<0&&(E.applyToRemoteDocument(q,g),q.isValidDocument()&&(q.setReadTime(g.commitVersion),y.addEntry(q)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(m,E)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(d){let m=bt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(a,s)))}))}function qw(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function i4(n,e){const t=et(n),a=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((y,E)=>{const S=s.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(l,y.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,y.addedDocuments,E))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(Xn.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,a)),s=s.insert(E,w),(function(q,k,K){return q.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=e4?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(S,w,y)&&d.push(t.li.updateTargetData(l,w))}));let m=Ca(),g=bt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(a4(l,c,e.documentUpdates).next((y=>{m=y.Bs,g=y.Ls}))),!a.isEqual(Je.min())){const y=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));d.push(y)}return ge.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.vs=s,l)))}function a4(n,e,t){let a=bt(),s=bt();return t.forEach((l=>a=a.add(l))),e.getEntries(n,a).next((l=>{let c=Ca();return t.forEach(((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),m.isNoDocument()&&m.version.isEqual(Je.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):Ve(i_,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{Bs:c,Ls:s}}))}function s4(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Gy),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function o4(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let s;return t.li.getTargetData(a,e).next((l=>l?(s=l,ge.resolve(s)):t.li.allocateTargetId(a).next((c=>(s=new gs(e,c,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,s).next((()=>s)))))))})).then((a=>{const s=t.vs.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function dy(n,e,t){const a=et(n),s=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(c=>a.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Xl(c))throw c;Ve(i_,`Failed to update sequence numbers for target ${e}: ${c}`)}a.vs=a.vs.remove(e),a.Fs.delete(s.target)}function z0(n,e,t){const a=et(n);let s=Je.min(),l=bt();return a.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,y){const E=et(m),S=E.Fs.get(y);return S!==void 0?ge.resolve(E.vs.get(S)):E.li.getTargetData(g,y)})(a,c,Hi(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>a.Cs.getDocumentsMatchingQuery(c,e,t?s:Je.min(),t?l:bt()))).next((d=>(l4(a,KO(e),d),{documents:d,ks:l})))))}function l4(n,e,t){let a=n.Ms.get(e)||Je.min();t.forEach(((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),n.Ms.set(e,a)}class B0{constructor(){this.activeTargetIds=ZO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u4{constructor(){this.vo=new B0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new B0,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="ConnectivityMonitor";class F0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ve(H0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ve(H0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf=null;function my(){return wf===null?wf=(function(){return 268435456+Math.round(2147483648*Math.random())})():wf++,"0x"+wf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="RestConnection",h4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class f4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${s}`,this.$o=this.databaseId.database===od?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Wo(e,t,a,s,l){const c=my(),d=this.Qo(e,t.toUriEncodedString());Ve(Mg,`Sending RPC '${e}' ${c}:`,d,a);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,s,l);const{host:g}=new URL(d),y=$l(g);return this.zo(e,d,m,a,y).then((E=>(Ve(Mg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Pl(Mg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",a),E}))}jo(e,t,a,s,l,c){return this.Wo(e,t,a,s,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),a&&a.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const a=h4[e];let s=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="WebChannelConnection",Ju=(n,e,t)=>{n.listen(e,(a=>{try{t(a)}catch(s){setTimeout((()=>{throw s}),0)}}))};class wl extends f4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!wl.c_){const e=QA();Ju(e,YA.STAT_EVENT,(t=>{t.stat===ty.PROXY?Ve(er,"STAT_EVENT: detected buffering proxy"):t.stat===ty.NOPROXY&&Ve(er,"STAT_EVENT: detected no buffering proxy")})),wl.c_=!0}}zo(e,t,a,s,l){const c=my();return new Promise(((d,m)=>{const g=new $A;g.setWithCredentials(!0),g.listenOnce(KA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case kf.NO_ERROR:const E=g.getResponseJson();Ve(er,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case kf.TIMEOUT:Ve(er,`RPC '${e}' ${c} timed out`),m(new Oe(de.DEADLINE_EXCEEDED,"Request time out"));break;case kf.HTTP_ERROR:const S=g.getStatus();if(Ve(er,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let w=g.getResponseJson();Array.isArray(w)&&(w=w[0]);const O=w==null?void 0:w.error;if(O&&O.status&&O.message){const q=(function(K){const H=K.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(H)>=0?H:de.UNKNOWN})(O.status);m(new Oe(q,O.message))}else m(new Oe(de.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Oe(de.UNAVAILABLE,"Connection failed."));break;default:Qe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Ve(er,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(s);Ve(er,`RPC '${e}' ${c} sending request:`,s),g.send(t,"POST",y,a,15)}))}T_(e,t,a){const s=my(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,a),d.encodeInitMessageHeaders=!0;const g=l.join("");Ve(er,`Creating RPC '${e}' stream ${s}: ${g}`,d);const y=c.createWebChannel(g,d);this.I_(y);let E=!1,S=!1;const w=new d4({Ho:O=>{S?Ve(er,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(E||(Ve(er,`Opening RPC '${e}' stream ${s} transport.`),y.open(),E=!0),Ve(er,`RPC '${e}' stream ${s} sending:`,O),y.send(O))},Jo:()=>y.close()});return Ju(y,tc.EventType.OPEN,(()=>{S||(Ve(er,`RPC '${e}' stream ${s} transport opened.`),w.i_())})),Ju(y,tc.EventType.CLOSE,(()=>{S||(S=!0,Ve(er,`RPC '${e}' stream ${s} transport closed`),w.o_(),this.E_(y))})),Ju(y,tc.EventType.ERROR,(O=>{S||(S=!0,Pl(er,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),w.o_(new Oe(de.UNAVAILABLE,"The operation could not be completed")))})),Ju(y,tc.EventType.MESSAGE,(O=>{var q;if(!S){const k=O.data[0];Mt(!!k,16349);const K=k,H=(K==null?void 0:K.error)||((q=K[0])==null?void 0:q.error);if(H){Ve(er,`RPC '${e}' stream ${s} received error:`,H);const X=H.status;let se=(function(A){const R=Cn[A];if(R!==void 0)return Nw(R)})(X),ue=H.message;se===void 0&&(se=de.INTERNAL,ue="Unknown error status: "+X+" with message "+H.message),S=!0,w.o_(new Oe(se,ue)),y.close()}else Ve(er,`RPC '${e}' stream ${s} received:`,k),w.__(k)}})),wl.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return XA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(n){return new wl(n)}function Pg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(n){return new _M(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wl.c_=!1;class Gw{constructor(e,t,a=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-a);s>0&&Ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="PersistentStream";class $w{constructor(e,t,a,s,l,c,d,m){this.Ci=e,this.b_=a,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Gw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(wa(t.toString()),wa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,s])=>{this.D_===t&&this.G_(a,s)}),(a=>{e((()=>{const s=new Oe(de.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(s)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{a((()=>this.z_(s)))})),this.stream.onMessage((s=>{a((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ve(q0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ve(q0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class p4 extends $w{constructor(e,t,a,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=TM(this.serializer,e),a=(function(l){if(!("targetChange"in l))return Je.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Je.min():c.readTime?Fi(c.readTime):Je.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=fy(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=sy(m)?{documents:AM(l,m)}:{query:wM(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Mw(l,c.resumeToken);const g=uy(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Je.min())>0){d.readTime=dd(l,c.snapshotVersion.toTimestamp());const g=uy(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const a=RM(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=fy(this.serializer),t.removeTarget=e,this.K_(t)}}class g4 extends $w{constructor(e,t,a,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=SM(e.writeResults,e.commitTime),a=Fi(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=fy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>bM(this.serializer,a)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{}class _4 extends y4{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Oe(de.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,cy(t,a),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Oe(de.UNKNOWN,l.toString())}))}jo(e,t,a,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,cy(t,a),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Oe(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function v4(n,e,t,a){return new _4(n,e,t,a)}class E4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wa(t),this.aa=!1):Ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class T4{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{a.enqueueAndForget((async()=>{So(this)&&(Ve(yo,"Restarting streams for network reachability change."),await(async function(m){const g=et(m);g.Ea.add(4),await Bc(g),g.Va.set("Unknown"),g.Ea.delete(4),await Wd(g)})(this))}))})),this.Va=new E4(a,s)}}async function Wd(n){if(So(n))for(const e of n.Ra)await e(!0)}async function Bc(n){for(const e of n.Ra)await e(!1)}function Kw(n,e){const t=et(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),l_(t)?o_(t):Wl(t).O_()&&s_(t,e))}function a_(n,e){const t=et(n),a=Wl(t);t.Ia.delete(e),a.O_()&&Yw(t,e),t.Ia.size===0&&(a.O_()?a.L_():So(t)&&t.Va.set("Unknown"))}function s_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wl(n).Z_(e)}function Yw(n,e){n.da.$e(e),Wl(n).X_(e)}function o_(n){n.da=new mM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Wl(n).start(),n.Va.ua()}function l_(n){return So(n)&&!Wl(n).x_()&&n.Ia.size>0}function So(n){return et(n).Ea.size===0}function Qw(n){n.da=void 0}async function b4(n){n.Va.set("Online")}async function S4(n){n.Ia.forEach(((e,t)=>{s_(n,e)}))}async function A4(n,e){Qw(n),l_(n)?(n.Va.ha(e),o_(n)):n.Va.set("Unknown")}async function w4(n,e,t){if(n.Va.set("Online"),e instanceof Ow&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(a){Ve(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await pd(n,a)}else if(e instanceof zf?n.da.Xe(e):e instanceof Dw?n.da.st(e):n.da.tt(e),!t.isEqual(Je.min()))try{const a=await qw(n.localStore);t.compareTo(a)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(g);y&&l.Ia.set(g,y.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(Xn.EMPTY_BYTE_STRING,y.snapshotVersion)),Yw(l,m);const E=new gs(y.target,m,g,y.sequenceNumber);s_(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(a){Ve(yo,"Failed to raise snapshot:",a),await pd(n,a)}}async function pd(n,e,t){if(!Xl(e))throw e;n.Ea.add(1),await Bc(n),n.Va.set("Offline"),t||(t=()=>qw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ve(yo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Wd(n)}))}function Xw(n,e){return e().catch((t=>pd(n,t,e)))}async function Jd(n){const e=et(n),t=Is(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Gy;for(;C4(e);)try{const s=await s4(e.localStore,a);if(s===null){e.Ta.length===0&&t.L_();break}a=s.batchId,R4(e,s)}catch(s){await pd(e,s)}Ww(e)&&Jw(e)}function C4(n){return So(n)&&n.Ta.length<10}function R4(n,e){n.Ta.push(e);const t=Is(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Ww(n){return So(n)&&!Is(n).x_()&&n.Ta.length>0}function Jw(n){Is(n).start()}async function I4(n){Is(n).ra()}async function x4(n){const e=Is(n);for(const t of n.Ta)e.ea(t.mutations)}async function N4(n,e,t){const a=n.Ta.shift(),s=Jy.from(a,e,t);await Xw(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Jd(n)}async function D4(n,e){e&&Is(n).Y_&&await(async function(a,s){if((function(c){return hM(c)&&c!==de.ABORTED})(s.code)){const l=a.Ta.shift();Is(a).B_(),await Xw(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Jd(a)}})(n,e),Ww(n)&&Jw(n)}async function G0(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Ve(yo,"RemoteStore received new credentials");const a=So(t);t.Ea.add(3),await Bc(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Wd(t)}async function O4(n,e){const t=et(n);e?(t.Ea.delete(2),await Wd(t)):e||(t.Ea.add(2),await Bc(t),t.Va.set("Unknown"))}function Wl(n){return n.ma||(n.ma=(function(t,a,s){const l=et(t);return l.sa(),new p4(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:b4.bind(null,n),Yo:S4.bind(null,n),t_:A4.bind(null,n),J_:w4.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),l_(n)?o_(n):n.Va.set("Unknown")):(await n.ma.stop(),Qw(n))}))),n.ma}function Is(n){return n.fa||(n.fa=(function(t,a,s){const l=et(t);return l.sa(),new g4(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:I4.bind(null,n),t_:D4.bind(null,n),ta:x4.bind(null,n),na:N4.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Jd(n)):(await n.fa.stop(),n.Ta.length>0&&(Ve(yo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new Ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const c=Date.now()+a,d=new u_(e,t,c,s,l);return d.start(a),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function c_(n,e){if(wa("AsyncQueue",`${e}: ${n}`),Xl(n))return new Oe(de.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{static emptySet(e){return new Cl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Ge.comparator(t.key,a.key):(t,a)=>Ge.comparator(t.key,a.key),this.keyedMap=nc(),this.sortedSet=new hn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Cl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this.ga=new hn(Ge.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Qe(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Ul{constructor(e,t,a,s,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ul(e,t,Cl.emptySet(t),c,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class P4{constructor(){this.queries=K0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const s=et(t),l=s.queries;s.queries=K0(),l.forEach(((c,d)=>{for(const m of d.ba)m.onError(a)}))})(this,new Oe(de.ABORTED,"Firestore shutting down"))}}function K0(){return new bo((n=>_w(n)),Gd)}async function h_(n,e){const t=et(n);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(a=2):(l=new M4,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=c_(c,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&d_(t)}async function f_(n,e){const t=et(n),a=e.query;let s=3;const l=t.queries.get(a);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function V4(n,e){const t=et(n);let a=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(s)&&(a=!0);c.wa=s}}a&&d_(t)}function k4(n,e,t){const a=et(n),s=a.queries.get(e);if(s)for(const l of s.ba)l.onError(t);a.queries.delete(e)}function d_(n){n.Ca.forEach((e=>{e.next()}))}var py,Y0;(Y0=py||(py={})).Ma="default",Y0.Cache="cache";class m_{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new Ul(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==py.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.key=e}}class e1{constructor(e){this.key=e}}class L4{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=bt(),this.mutatedKeys=bt(),this.eu=vw(e),this.tu=new Cl(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new $0,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,E)=>{const S=s.get(y),w=$d(this.query,E)?E:null,O=!!S&&this.mutatedKeys.has(S.key),q=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let k=!1;S&&w?S.data.isEqual(w.data)?O!==q&&(a.track({type:3,doc:w}),k=!0):this.su(S,w)||(a.track({type:2,doc:w}),k=!0,(m&&this.eu(w,m)>0||g&&this.eu(w,g)<0)&&(d=!0)):!S&&w?(a.track({type:0,doc:w}),k=!0):S&&!w&&(a.track({type:1,doc:S}),k=!0,(m||g)&&(d=!0)),k&&(w?(c=c.add(w),l=q?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),a.track({type:1,doc:y})}return{tu:c,iu:a,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,E)=>(function(w,O){const q=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe(20277,{Vt:k})}};return q(w)-q(O)})(y.type,E.type)||this.eu(y.doc,E.doc))),this.ou(a),s=s??!1;const d=t&&!s?this._u():[],m=this.Ya.size===0&&this.current&&!s?1:0,g=m!==this.Xa;return this.Xa=m,c.length!==0||g?{snapshot:new Ul(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=bt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new e1(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new Zw(a))})),t}cu(e){this.Za=e.ks,this.Ya=bt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ul.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const p_="SyncEngine";class j4{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class U4{constructor(e){this.key=e,this.hu=!1}}class z4{constructor(e,t,a,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new bo((d=>_w(d)),Gd),this.Iu=new Map,this.Eu=new Set,this.Ru=new hn(Ge.comparator),this.Au=new Map,this.Vu=new t_,this.du={},this.mu=new Map,this.fu=jl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function B4(n,e,t=!0){const a=s1(n);let s;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await t1(a,e,t,!0),s}async function H4(n,e){const t=s1(n);await t1(t,e,!0,!1)}async function t1(n,e,t,a){const s=await o4(n.localStore,Hi(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return a&&(d=await F4(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&Kw(n.remoteStore,s),d}async function F4(n,e,t,a,s){n.pu=(E,S,w)=>(async function(q,k,K,H){let X=k.view.ru(K);X.Ss&&(X=await z0(q.localStore,k.query,!1).then((({documents:A})=>k.view.ru(A,X))));const se=H&&H.targetChanges.get(k.targetId),ue=H&&H.targetMismatches.get(k.targetId)!=null,G=k.view.applyChanges(X,q.isPrimaryClient,se,ue);return X0(q,k.targetId,G.au),G.snapshot})(n,E,S,w);const l=await z0(n.localStore,e,!0),c=new L4(e,l.ks),d=c.ru(l.documents),m=zc.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",s),g=c.applyChanges(d,n.isPrimaryClient,m);X0(n,t,g.au);const y=new j4(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function q4(n,e,t){const a=et(n),s=a.Tu.get(e),l=a.Iu.get(s.targetId);if(l.length>1)return a.Iu.set(s.targetId,l.filter((c=>!Gd(c,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await dy(a.localStore,s.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(s.targetId),t&&a_(a.remoteStore,s.targetId),gy(a,s.targetId)})).catch(Ql)):(gy(a,s.targetId),await dy(a.localStore,s.targetId,!0))}async function G4(n,e){const t=et(n),a=t.Tu.get(e),s=t.Iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),a_(t.remoteStore,a.targetId))}async function $4(n,e,t){const a=Z4(n);try{const s=await(function(c,d){const m=et(c),g=en.now(),y=d.reduce(((w,O)=>w.add(O.key)),bt());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let O=Ca(),q=bt();return m.xs.getEntries(w,y).next((k=>{O=k,O.forEach(((K,H)=>{H.isValidDocument()||(q=q.add(K))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,O))).next((k=>{E=k;const K=[];for(const H of d){const X=sM(H,E.get(H.key).overlayedDocument);X!=null&&K.push(new Os(H.key,X,cw(X.value.mapValue),Ur.exists(!0)))}return m.mutationQueue.addMutationBatch(w,g,K,d)})).next((k=>{S=k;const K=k.applyToLocalDocumentSet(E,q);return m.documentOverlayCache.saveOverlays(w,k.batchId,K)}))})).then((()=>({batchId:S.batchId,changes:Tw(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),(function(c,d,m){let g=c.du[c.currentUser.toKey()];g||(g=new hn(Tt)),g=g.insert(d,m),c.du[c.currentUser.toKey()]=g})(a,s.batchId,t),await Hc(a,s.changes),await Jd(a.remoteStore)}catch(s){const l=c_(s,"Failed to persist write");t.reject(l)}}async function n1(n,e){const t=et(n);try{const a=await i4(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(Mt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Mt(c.hu,14607):s.removedDocuments.size>0&&(Mt(c.hu,42227),c.hu=!1))})),await Hc(t,a,e)}catch(a){await Ql(a)}}function Q0(n,e,t){const a=et(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const m=et(c);m.onlineState=d;let g=!1;m.queries.forEach(((y,E)=>{for(const S of E.ba)S.va(d)&&(g=!0)})),g&&d_(m)})(a.eventManager,e),s.length&&a.Pu.J_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function K4(n,e,t){const a=et(n);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a.Au.get(e),l=s&&s.key;if(l){let c=new hn(Ge.comparator);c=c.insert(l,rr.newNoDocument(l,Je.min()));const d=bt().add(l),m=new Qd(Je.min(),new Map,new hn(Tt),c,d);await n1(a,m),a.Ru=a.Ru.remove(l),a.Au.delete(e),g_(a)}else await dy(a.localStore,e,!1).then((()=>gy(a,e,t))).catch(Ql)}async function Y4(n,e){const t=et(n),a=e.batch.batchId;try{const s=await r4(t.localStore,e);i1(t,a,null),r1(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Hc(t,s)}catch(s){await Ql(s)}}async function Q4(n,e,t){const a=et(n);try{const s=await(function(c,d){const m=et(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return m.mutationQueue.lookupMutationBatch(g,d).next((E=>(Mt(E!==null,37113),y=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>m.localDocuments.getDocuments(g,y)))}))})(a.localStore,e);i1(a,e,t),r1(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Hc(a,s)}catch(s){await Ql(s)}}function r1(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function i1(n,e,t){const a=et(n);let s=a.du[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.du[a.currentUser.toKey()]=s}}function gy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),t&&n.Pu.yu(a,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||a1(n,a)}))}function a1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(a_(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),g_(n))}function X0(n,e,t){for(const a of t)a instanceof Zw?(n.Vu.addReference(a.key,e),X4(n,a)):a instanceof e1?(Ve(p_,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||a1(n,a.key)):Qe(19791,{wu:a})}function X4(n,e){const t=e.key,a=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(a)||(Ve(p_,"New document in limbo: "+t),n.Eu.add(a),g_(n))}function g_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ge(Xt.fromString(e)),a=n.fu.next();n.Au.set(a,new U4(t)),n.Ru=n.Ru.insert(t,a),Kw(n.remoteStore,new gs(Hi(qd(t.path)),a,"TargetPurposeLimboResolution",Bd.ce))}}async function Hc(n,e,t){const a=et(n),s=[],l=[],c=[];a.Tu.isEmpty()||(a.Tu.forEach(((d,m)=>{c.push(a.pu(m,e,t).then((g=>{var y;if((g||t)&&a.isPrimaryClient){const E=g?!g.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:y.current;a.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){s.push(g);const E=r_.Es(m.targetId,g);l.push(E)}})))})),await Promise.all(c),a.Pu.J_(s),await(async function(m,g){const y=et(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ge.forEach(g,(S=>ge.forEach(S.Ts,(w=>y.persistence.referenceDelegate.addReference(E,S.targetId,w))).next((()=>ge.forEach(S.Is,(w=>y.persistence.referenceDelegate.removeReference(E,S.targetId,w)))))))))}catch(E){if(!Xl(E))throw E;Ve(i_,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const w=y.vs.get(S),O=w.snapshotVersion,q=w.withLastLimboFreeSnapshotVersion(O);y.vs=y.vs.insert(S,q)}}})(a.localStore,l))}async function W4(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Ve(p_,"User change. New user:",e.toKey());const a=await Fw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new Oe(de.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Hc(t,a.Ns)}}function J4(n,e){const t=et(n),a=t.Au.get(e);if(a&&a.hu)return bt().add(a.key);{let s=bt();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function s1(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=n1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K4.bind(null,e),e.Pu.J_=V4.bind(null,e.eventManager),e.Pu.yu=k4.bind(null,e.eventManager),e}function Z4(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q4.bind(null,e),e}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return n4(this.persistence,new ZM,e.initialUser,this.serializer)}Cu(e){return new Hw(n_.Vi,this.serializer)}Du(e){return new u4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class eP extends gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Mt(this.persistence.referenceDelegate instanceof md,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new jM(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Er.withCacheSize(this.cacheSizeBytes):Er.DEFAULT;return new Hw((a=>md.Vi(a,t)),this.serializer)}}class yy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Q0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=W4.bind(null,this.syncEngine),await O4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new P4})()}createDatastore(e){const t=Xd(e.databaseInfo.databaseId),a=m4(e.databaseInfo);return v4(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,s,l,c,d){return new T4(a,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Q0(this.syncEngine,t,0)),(function(){return F0.v()?new F0:new c4})())}createSyncEngine(e,t){return(function(s,l,c,d,m,g,y){const E=new z4(s,l,c,d,m,g);return y&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=et(s);Ve(yo,"RemoteStore shutting down."),l.Ea.add(5),await Bc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}yy.provider={build:()=>new yy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="FirestoreClient";class tP{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=s,this.user=nr.UNAUTHENTICATED,this.clientId=qy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async c=>{Ve(xs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(a,(c=>(Ve(xs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=c_(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Vg(n,e){n.asyncQueue.verifyOperationInProgress(),Ve(xs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener((async s=>{a.isEqual(s)||(await Fw(e.localStore,s),a=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function W0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await nP(n);Ve(xs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((a=>G0(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,s)=>G0(e.remoteStore,s))),n._onlineComponents=e}async function nP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ve(xs,"Using user provided OfflineComponentProvider");try{await Vg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===de.FAILED_PRECONDITION||s.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Pl("Error using user provided cache. Falling back to memory cache: "+t),await Vg(n,new gd)}}else Ve(xs,"Using default OfflineComponentProvider"),await Vg(n,new eP(void 0));return n._offlineComponents}async function o1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ve(xs,"Using user provided OnlineComponentProvider"),await W0(n,n._uninitializedComponentsProvider._online)):(Ve(xs,"Using default OnlineComponentProvider"),await W0(n,new yy))),n._onlineComponents}function rP(n){return o1(n).then((e=>e.syncEngine))}async function yd(n){const e=await o1(n),t=e.eventManager;return t.onListen=B4.bind(null,e.syncEngine),t.onUnlisten=q4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=H4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=G4.bind(null,e.syncEngine),t}function iP(n,e,t,a){const s=new y_(a),l=new m_(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>h_(await yd(n),l))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>f_(await yd(n),l)))}}function aP(n,e,t={}){const a=new Ta;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const y=new y_({next:S=>{y.Nu(),c.enqueueAndForget((()=>f_(l,E)));const w=S.docs.has(d);!w&&S.fromCache?g.reject(new Oe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&m&&m.source==="server"?g.reject(new Oe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new m_(qd(d.path),y,{includeMetadataChanges:!0,Ka:!0});return h_(l,E)})(await yd(n),n.asyncQueue,e,t,a))),a.promise}function sP(n,e,t={}){const a=new Ta;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const y=new y_({next:S=>{y.Nu(),c.enqueueAndForget((()=>f_(l,E))),S.fromCache&&m.source==="server"?g.reject(new Oe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new m_(d,y,{includeMetadataChanges:!0,Ka:!0});return h_(l,E)})(await yd(n),n.asyncQueue,e,t,a))),a.promise}function oP(n,e){const t=new Ta;return n.asyncQueue.enqueueAndForget((async()=>$4(await rP(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP="ComponentProvider",J0=new Map;function uP(n,e,t,a,s){return new xO(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,l1(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firestore.googleapis.com",Z0=!0;class eS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=u1,this.ssl=Z0}else this.host=e.host,this.ssl=e.ssl??Z0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Bw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kM)throw new Oe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_O("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l1(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Oe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Oe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Oe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zd{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new lO;switch(a.type){case"firstParty":return new fO(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Oe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=J0.get(t);a&&(Ve(lP,"Removing Datastore"),J0.delete(t),a.terminate())})(this),Promise.resolve()}}function cP(n,e,t,a={}){var g;n=jr(n,Zd);const s=$l(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(LA(`https://${d}`),jA("Firestore",!0)),l.host!==u1&&l.host!==d&&Pl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:s,emulatorOptions:a};if(!mo(m,c)&&(n._setSettings(m),a.mockUserToken)){let y,E;if(typeof a.mockUserToken=="string")y=a.mockUserToken,E=nr.MOCK_USER;else{y=PD(a.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const S=a.mockUserToken.sub||a.mockUserToken.user_id;if(!S)throw new Oe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new nr(S)}n._authCredentials=new uO(new JA(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ao(this.firestore,e,this._query)}}class pn{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Lc(t,pn._jsonSchema))return new pn(e,a||null,new Ge(Xt.fromString(t.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:xn("string",pn._jsonSchemaVersion),referencePath:xn("string")};class bs extends Ao{constructor(e,t,a){super(e,t,qd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Ge(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function Fc(n,e,...t){if(n=kn(n),ZA("collection","path",e),n instanceof Zd){const a=Xt.fromString(e,...t);return d0(a),new bs(n,null,a)}{if(!(n instanceof pn||n instanceof bs))throw new Oe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Xt.fromString(e,...t));return d0(a),new bs(n.firestore,null,a)}}function ai(n,e,...t){if(n=kn(n),arguments.length===1&&(e=qy.newId()),ZA("doc","path",e),n instanceof Zd){const a=Xt.fromString(e,...t);return f0(a),new pn(n,null,new Ge(a))}{if(!(n instanceof pn||n instanceof bs))throw new Oe(de.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Xt.fromString(e,...t));return f0(a),new pn(n.firestore,n instanceof bs?n.converter:null,new Ge(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="AsyncQueue";class nS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Gw(this,"async_queue_retry"),this._c=()=>{const a=Pg();a&&Ve(tS,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=Pg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ta;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Xl(e))throw e;Ve(tS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,wa("INTERNAL UNHANDLED ERROR: ",rS(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=u_.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Qe(47125,{Pc:rS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function rS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ns extends Zd{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new nS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nS(e),this._firestoreClient=void 0,await e}}}function hP(n,e){const t=typeof n=="object"?n:HA(),a=typeof n=="string"?n:od,s=Hy(t,"firestore").getImmediate({identifier:a});if(!s._initialized){const l=OD("firestore");l&&cP(s,...l)}return s}function qc(n){if(n._terminated)throw new Oe(de.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||fP(n),n._firestoreClient}function fP(n){var a,s,l,c;const e=n._freezeSettings(),t=uP(n._databaseId,((a=n._app)==null?void 0:a.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new tP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ti(Xn.fromBase64String(e))}catch(t){throw new Oe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ti(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ti._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lc(e,ti._jsonSchema))return ti.fromBase64String(e.bytes)}}ti._jsonSchemaVersion="firestore/bytes/1.0",ti._jsonSchema={type:xn("string",ti._jsonSchemaVersion),bytes:xn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Oe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qi._jsonSchemaVersion}}static fromJSON(e){if(Lc(e,qi._jsonSchema))return new qi(e.latitude,e.longitude)}}qi._jsonSchemaVersion="firestore/geoPoint/1.0",qi._jsonSchema={type:xn("string",qi._jsonSchemaVersion),latitude:xn("number"),longitude:xn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lc(e,Ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ti(e.vectorValues);throw new Oe(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ti._jsonSchemaVersion="firestore/vectorValue/1.0",Ti._jsonSchema={type:xn("string",Ti._jsonSchemaVersion),vectorValues:xn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=/^__.*__$/;class mP{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uc(e,this.data,t,this.fieldTransforms)}}class c1{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Os(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function h1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe(40011,{dataSource:n})}}class v_{constructor(e,t,a,s,l,c){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new v_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return _d(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(h1(this.dataSource)&&dP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class pP{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Xd(e)}createContext(e,t,a,s=!1){return new v_({dataSource:e,methodName:t,targetDoc:a,path:Qn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tm(n){const e=n._freezeSettings(),t=Xd(n._databaseId);return new pP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function f1(n,e,t,a,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);E_("Data must be an object, but it was:",c,a);const d=p1(a,c);let m,g;if(l.merge)m=new kr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const E of l.mergeFields){const S=zl(e,E,t);if(!c.contains(S))throw new Oe(de.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);_1(y,S)||y.push(S)}m=new kr(y),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new mP(new Tr(d),m,g)}class nm extends __{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nm}}function d1(n,e,t,a){const s=n.createContext(1,e,t);E_("Data must be an object, but it was:",s,a);const l=[],c=Tr.empty();Ds(a,((m,g)=>{const y=y1(e,m,t);g=kn(g);const E=s.childContextForFieldPath(y);if(g instanceof nm)l.push(y);else{const S=Gc(g,E);S!=null&&(l.push(y),c.set(y,S))}}));const d=new kr(l);return new c1(c,d,s.fieldTransforms)}function m1(n,e,t,a,s,l){const c=n.createContext(1,e,t),d=[zl(e,a,t)],m=[s];if(l.length%2!=0)throw new Oe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(zl(e,l[S])),m.push(l[S+1]);const g=[],y=Tr.empty();for(let S=d.length-1;S>=0;--S)if(!_1(g,d[S])){const w=d[S];let O=m[S];O=kn(O);const q=c.childContextForFieldPath(w);if(O instanceof nm)g.push(w);else{const k=Gc(O,q);k!=null&&(g.push(w),y.set(w,k))}}const E=new kr(g);return new c1(y,E,c.fieldTransforms)}function gP(n,e,t,a=!1){return Gc(t,n.createContext(a?4:3,e))}function Gc(n,e){if(g1(n=kn(n)))return E_("Unsupported field value:",e,n),p1(n,e);if(n instanceof __)return(function(a,s){if(!h1(s.dataSource))throw s.createError(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,s){const l=[];let c=0;for(const d of a){let m=Gc(d,s.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(a,s){if((a=kn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return eM(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=en.fromDate(a);return{timestampValue:dd(s.serializer,l)}}if(a instanceof en){const l=new en(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:dd(s.serializer,l)}}if(a instanceof qi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ti)return{bytesValue:Mw(s.serializer,a._byteString)};if(a instanceof pn){const l=s.databaseId,c=a.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:e_(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof Ti)return(function(c,d){const m=c instanceof Ti?c.toArray():c;return{mapValue:{fields:{[lw]:{stringValue:uw},[ld]:{arrayValue:{values:m.map((y=>{if(typeof y!="number")throw d.createError("VectorValues must only contain numeric values.");return Xy(d.serializer,y)}))}}}}}})(a,s);if(zw(a))return a._toProto(s.serializer);throw s.createError(`Unsupported field value: ${zd(a)}`)})(n,e)}function p1(n,e){const t={};return nw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(n,((a,s)=>{const l=Gc(s,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function g1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof en||n instanceof qi||n instanceof ti||n instanceof pn||n instanceof __||n instanceof Ti||zw(n))}function E_(n,e,t){if(!g1(t)||!ew(t)){const a=zd(t);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function zl(n,e,t){if((e=kn(e))instanceof em)return e._internalPath;if(typeof e=="string")return y1(n,e);throw _d("Field path arguments must be of type string or ",n,!1,void 0,t)}const yP=new RegExp("[~\\*/\\[\\]]");function y1(n,e,t){if(e.search(yP)>=0)throw _d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new em(...e.split("."))._internalPath}catch{throw _d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _d(n,e,t,a,s){const l=a&&!a.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${a}`),c&&(m+=` in document ${s}`),m+=")"),new Oe(de.INVALID_ARGUMENT,d+n+m)}function _1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return En(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Ds(e,((s,l)=>{a[s]=this.convertValue(l,t)})),a}convertVectorValue(e){var a,s,l;const t=(l=(s=(a=e.fields)==null?void 0:a[ld].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>En(c.doubleValue)));return new Ti(t)}convertGeoPoint(e){return new qi(En(e.latitude),En(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Fd(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const t=ws(e);return new en(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Xt.fromString(e);Mt(Uw(a),9688,{name:e});const s=new bc(a.get(1),a.get(3)),l=new Ge(a.popFirst(5));return s.isEqual(t)||wa(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends _P{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}const iS="@firebase/firestore",aS="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(n){return(function(t,a){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of a)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(zl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vP extends v1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Oe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class b_{}class EP extends b_{}function $c(n,e,...t){let a=[];e instanceof b_&&a.push(e),a=a.concat(t),(function(l){const c=l.filter((m=>m instanceof A_)).length,d=l.filter((m=>m instanceof rm)).length;if(c>1||c>0&&d>0)throw new Oe(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const s of a)n=s._apply(n);return n}class rm extends EP{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new rm(e,t,a)}_apply(e){const t=this._parse(e);return T1(e._query,t),new Ao(e.firestore,e.converter,oy(e._query,t))}_parse(e){const t=tm(e.firestore);return(function(l,c,d,m,g,y,E){let S;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Oe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){lS(E,y);const O=[];for(const q of E)O.push(oS(m,l,q));S={arrayValue:{values:O}}}else S=oS(m,l,E)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||lS(E,y),S=gP(d,c,E,y==="in"||y==="not-in");return In.create(g,y,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function S_(n,e,t){const a=e,s=zl("where",n);return rm._create(s,a,t)}class A_ extends b_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new A_(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:Si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const m of d)T1(c,m),c=oy(c,m)})(e._query,t),new Ao(e.firestore,e.converter,oy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function oS(n,e,t){if(typeof(t=kn(t))=="string"){if(t==="")throw new Oe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yw(e)&&t.indexOf("/")!==-1)throw new Oe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Xt.fromString(t));if(!Ge.isDocumentKey(a))throw new Oe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return T0(n,new Ge(a))}if(t instanceof pn)return T0(n,t._key);throw new Oe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zd(t)}.`)}function lS(n,e){if(!Array.isArray(n)||n.length===0)throw new Oe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T1(n,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Oe(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Oe(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function b1(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}class ic{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uo extends v1{constructor(e,t,a,s,l,c){super(e,t,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(zl("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=uo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",uo._jsonSchema={type:xn("string",uo._jsonSchemaVersion),bundleSource:xn("string","DocumentSnapshot"),bundleName:xn("string"),bundle:xn("string")};class Bf extends uo{data(e={}){return super.data(e)}}class co{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ic(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Bf(this._firestore,this._userDataWriter,a.key,a,new ic(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const m=new Bf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new ic(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Bf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new ic(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,y=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:TP(d.type),doc:m,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function TP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */co._jsonSchemaVersion="firestore/querySnapshot/1.0",co._jsonSchema={type:xn("string",co._jsonSchemaVersion),bundleSource:xn("string","QuerySnapshot"),bundleName:xn("string"),bundle:xn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tm(e)}set(e,t,a){this._verifyNotCommitted();const s=kg(e,this._firestore),l=b1(s.converter,t,a),c=f1(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,a);return this._mutations.push(c.toMutation(s._key,Ur.none())),this}update(e,t,a,...s){this._verifyNotCommitted();const l=kg(e,this._firestore);let c;return c=typeof(t=kn(t))=="string"||t instanceof em?m1(this._dataReader,"WriteBatch.update",l._key,t,a,s):d1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kg(e,this._firestore);return this._mutations=this._mutations.concat(new Wy(t._key,Ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kg(n,e){if((n=kn(n)).firestore!==e)throw new Oe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(n){n=jr(n,pn);const e=jr(n.firestore,Ns),t=qc(e);return aP(t,n._key).then((a=>A1(e,n,a)))}function Yc(n){n=jr(n,Ao);const e=jr(n.firestore,Ns),t=qc(e),a=new T_(e);return E1(n._query),sP(t,n._query).then((s=>new co(e,a,n,s)))}function w_(n,e,t){n=jr(n,pn);const a=jr(n.firestore,Ns),s=b1(n.converter,e,t),l=tm(a);return C_(a,[f1(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Ur.none())])}function S1(n,e,t,...a){n=jr(n,pn);const s=jr(n.firestore,Ns),l=tm(s);let c;return c=typeof(e=kn(e))=="string"||e instanceof em?m1(l,"updateDoc",n._key,e,t,a):d1(l,"updateDoc",n._key,e),C_(s,[c.toMutation(n._key,Ur.exists(!0))])}function SP(n,...e){var g,y,E;n=kn(n);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||sS(e[a])||(t=e[a++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(sS(e[a])){const S=e[a];e[a]=(g=S.next)==null?void 0:g.bind(S),e[a+1]=(y=S.error)==null?void 0:y.bind(S),e[a+2]=(E=S.complete)==null?void 0:E.bind(S)}let l,c,d;if(n instanceof pn)c=jr(n.firestore,Ns),d=qd(n._key.path),l={next:S=>{e[a]&&e[a](A1(c,n,S))},error:e[a+1],complete:e[a+2]};else{const S=jr(n,Ao);c=jr(S.firestore,Ns),d=S._query;const w=new T_(c);l={next:O=>{e[a]&&e[a](new co(c,w,S,O))},error:e[a+1],complete:e[a+2]},E1(n._query)}const m=qc(c);return iP(m,d,s,l)}function C_(n,e){const t=qc(n);return oP(t,e)}function A1(n,e,t){const a=t.docs.get(e._key),s=new T_(n);return new uo(n,s,e._key,a,new ic(t.hasPendingWrites,t.fromCache),e.converter)}function w1(n){return n=jr(n,Ns),qc(n),new bP(n,(e=>C_(n,e)))}(function(e,t=!0){oO(Kl),Ml(new po("firestore",((a,{instanceIdentifier:s,options:l})=>{const c=a.getProvider("app").getImmediate(),d=new Ns(new cO(a.getProvider("auth-internal")),new dO(c,a.getProvider("app-check-internal")),NO(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Es(iS,aS,e),Es(iS,aS,"esm2020")})();var AP="firebase",wP="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Es(AP,wP,"app");function C1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CP=C1,R1=new Vc("auth","Firebase",C1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new zy("@firebase/auth");function RP(n,...e){vd.logLevel<=Et.WARN&&vd.warn(`Auth (${Kl}): ${n}`,...e)}function Hf(n,...e){vd.logLevel<=Et.ERROR&&vd.error(`Auth (${Kl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n,...e){throw I_(n,...e)}function bi(n,...e){return I_(n,...e)}function R_(n,e,t){const a={...CP(),[e]:t};return new Vc("auth","Firebase",a).create(e,{appName:n.name})}function ho(n){return R_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function IP(n,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Yi(n,"argument-error"),R_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function I_(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return R1.create(n,...e)}function Xe(n,e,...t){if(!n)throw I_(e,...t)}function va(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Hf(e),new Error(e)}function Ra(n,e){n||va(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function xP(){return uS()==="http:"||uS()==="https:"}function uS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xP()||zD()||"connection"in navigator)?navigator.onLine:!0}function DP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ra(t>e,"Short delay should be less than long delay!"),this.isMobile=LD()||BD()}get(){return NP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(n,e){Ra(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;va("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;va("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;va("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PP=new Qc(3e4,6e4);function N_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Jl(n,e,t,a,s={}){return x1(n,s,async()=>{let l={},c={};a&&(e==="GET"?c=a:l={body:JSON.stringify(a)});const d=kc({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return UD()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&$l(n.emulatorConfig.host)&&(g.credentials="include"),I1.fetch()(await N1(n,n.config.apiHost,t,d),g)})}async function x1(n,e,t){n._canInitEmulator=!1;const a={...OP,...e};try{const s=new kP(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Cf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cf(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Cf(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Cf(n,"user-disabled",c);const y=a[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw R_(n,y,g);Yi(n,y)}}catch(s){if(s instanceof Na)throw s;Yi(n,"network-request-failed",{message:String(s)})}}async function VP(n,e,t,a,s={}){const l=await Jl(n,e,t,a,s);return"mfaPendingCredential"in l&&Yi(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function N1(n,e,t,a){const s=`${e}${t}?${a}`,l=n,c=l.config.emulator?x_(n.config,s):`${n.config.apiScheme}://${s}`;return MP.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class kP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(bi(this.auth,"network-request-failed")),PP.get())})}}function Cf(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=bi(n,e,a);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(n,e){return Jl(n,"POST","/v1/accounts:delete",e)}async function Ed(n,e){return Jl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jP(n,e=!1){const t=kn(n),a=await t.getIdToken(e),s=D_(a);Xe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:a,authTime:fc(Lg(s.auth_time)),issuedAtTime:fc(Lg(s.iat)),expirationTime:fc(Lg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Lg(n){return Number(n)*1e3}function D_(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return Hf("JWT malformed, contained fewer than 3 sections"),null;try{const s=MA(t);return s?JSON.parse(s):(Hf("Failed to decode base64 JWT payload"),null)}catch(s){return Hf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function cS(n){const e=D_(n);return Xe(e,"internal-error"),Xe(typeof e.exp<"u","internal-error"),Xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Na&&UP(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function UP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fc(this.lastLoginAt),this.creationTime=fc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(n){var E;const e=n.auth,t=await n.getIdToken(),a=await Cc(n,Ed(e,{idToken:t}));Xe(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?D1(s.providerUserInfo):[],c=HP(n.providerData,l),d=n.isAnonymous,m=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),g=d?m:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new vy(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function BP(n){const e=kn(n);await Td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HP(n,e){return[...n.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function D1(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP(n,e){const t=await x1(n,{},async()=>{const a=kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await N1(n,s,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:a};return n.emulatorConfig&&$l(n.emulatorConfig.host)&&(m.credentials="include"),I1.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qP(n,e){return Jl(n,"POST","/v2/accounts:revokeToken",N_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xe(e.idToken,"internal-error"),Xe(typeof e.idToken<"u","internal-error"),Xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Xe(e.length!==0,"internal-error");const t=cS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await FP(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,c=new Rl;return a&&(Xe(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&(Xe(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Xe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return va("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(n,e){Xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ei{constructor({uid:e,auth:t,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new zP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Cc(this,this.stsTokenManager.getToken(this.auth,e));return Xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jP(this,e)}reload(){return BP(this)}_assign(e){this!==e&&(Xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await Td(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_i(this.auth.app))return Promise.reject(ho(this.auth));const e=await this.getIdToken();return await Cc(this,LP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:w,providerData:O,stsTokenManager:q}=t;Xe(E&&q,e,"internal-error");const k=Rl.fromJSON(this.name,q);Xe(typeof E=="string",e,"internal-error"),ls(a,e.name),ls(s,e.name),Xe(typeof S=="boolean",e,"internal-error"),Xe(typeof w=="boolean",e,"internal-error"),ls(l,e.name),ls(c,e.name),ls(d,e.name),ls(m,e.name),ls(g,e.name),ls(y,e.name);const K=new Ei({uid:E,auth:e,email:s,emailVerified:S,displayName:a,isAnonymous:w,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:k,createdAt:g,lastLoginAt:y});return O&&Array.isArray(O)&&(K.providerData=O.map(H=>({...H}))),m&&(K._redirectEventId=m),K}static async _fromIdTokenResponse(e,t,a=!1){const s=new Rl;s.updateFromServerResponse(t);const l=new Ei({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await Td(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];Xe(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?D1(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),d=new Rl;d.updateFromIdToken(a);const m=new Ei({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new vy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=new Map;function Ea(n){Ra(n instanceof Function,"Expected a class definition");let e=hS.get(n);return e?(Ra(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}O1.type="NONE";const fS=O1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(n,e,t){return`firebase:${n}:${e}:${t}`}class Il{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=Ff(this.userKey,s.apiKey,l),this.fullPersistenceKey=Ff("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ed(this.auth,{idToken:e}).catch(()=>{});return t?Ei._fromGetAccountInfoResponse(this.auth,t,e):null}return Ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Il(Ea(fS),e,a);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||Ea(fS);const c=Ff(a,e.config.apiKey,e.name);let d=null;for(const g of t)try{const y=await g._get(c);if(y){let E;if(typeof y=="string"){const S=await Ed(e,{idToken:y}).catch(()=>{});if(!S)break;E=await Ei._fromGetAccountInfoResponse(e,S,y)}else E=Ei._fromJSON(e,y);g!==l&&(d=E),l=g;break}}catch{}const m=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Il(l,e,a):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Il(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(k1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(M1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j1(e))return"Blackberry";if(U1(e))return"Webos";if(P1(e))return"Safari";if((e.includes("chrome/")||V1(e))&&!e.includes("edge/"))return"Chrome";if(L1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function M1(n=ir()){return/firefox\//i.test(n)}function P1(n=ir()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function V1(n=ir()){return/crios\//i.test(n)}function k1(n=ir()){return/iemobile/i.test(n)}function L1(n=ir()){return/android/i.test(n)}function j1(n=ir()){return/blackberry/i.test(n)}function U1(n=ir()){return/webos/i.test(n)}function O_(n=ir()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function GP(n=ir()){var e;return O_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function $P(){return HD()&&document.documentMode===10}function z1(n=ir()){return O_(n)||L1(n)||U1(n)||j1(n)||/windows phone/i.test(n)||k1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(n,e=[]){let t;switch(n){case"Browser":t=dS(ir());break;case"Worker":t=`${dS(ir())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YP(n,e={}){return Jl(n,"GET","/v2/passwordPolicy",N_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=6;class XP{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??QP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mS(this),this.idTokenSubscription=new mS(this),this.beforeStateQueue=new KP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ea(t)),this._initializationPromise=this.queue(async()=>{var a,s,l;if(!this._deleted&&(this.persistenceManager=await Il.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ed(this,{idToken:e}),a=await Ei._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(_i(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(a=m.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Td(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_i(this.app))return Promise.reject(ho(this));const t=e?kn(e):null;return t&&Xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _i(this.app)?Promise.reject(ho(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _i(this.app)?Promise.reject(ho(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ea(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YP(this),t=new XP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await qP(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ea(e)||this._popupRedirectResolver;Xe(t,this,"argument-error"),this.redirectPersistenceManager=await Il.create(this,[Ea(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xe(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,a,s);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=B1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&RP(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function im(n){return kn(n)}class mS{constructor(e){this.auth=e,this.observer=null,this.addObserver=XD(t=>this.observer=t)}get next(){return Xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JP(n){M_=n}function ZP(n){return M_.loadJS(n)}function eV(){return M_.gapiScript}function tV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(n,e){const t=Hy(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(mo(l,e??{}))return s;Yi(s,"already-initialized")}return t.initialize({options:e})}function rV(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(Ea);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function iV(n,e,t){const a=im(n);Xe(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=H1(e),{host:c,port:d}=aV(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){Xe(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Xe(mo(g,a.config.emulator)&&mo(y,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=y,a.settings.appVerificationDisabledForTesting=!0,$l(c)?(LA(`${l}//${c}${m}`),jA("Auth",!0)):sV()}function H1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aV(n){const e=H1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:pS(a.substr(l.length+1))}}else{const[l,c]=a.split(":");return{host:l,port:pS(c)}}}function pS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function sV(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return va("not implemented")}_getIdTokenResponse(e){return va("not implemented")}_linkToIdToken(e,t){return va("not implemented")}_getReauthenticationResolver(e){return va("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(n,e){return VP(n,"POST","/v1/accounts:signInWithIdp",N_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV="http://localhost";class _o extends F1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...l}=t;if(!a||!s)return null;const c=new _o(a,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return xl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,xl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xl(e,t)}buildRequest(){const e={requestUri:oV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends P_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Xc{constructor(){super("facebook.com")}static credential(e){return _o._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends Xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _o._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return ya.credential(t,a)}catch{return null}}}ya.GOOGLE_SIGN_IN_METHOD="google.com";ya.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Xc{constructor(){super("github.com")}static credential(e){return _o._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Xc{constructor(){super("twitter.com")}static credential(e,t){return _o._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ms.credential(t,a)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await Ei._fromIdTokenResponse(e,a,s),c=gS(a);return new Bl({user:l,providerId:c,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=gS(a);return new Bl({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function gS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends Na{constructor(e,t,a,s){super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new bd(e,t,a,s)}}function q1(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?bd._fromErrorAndOperation(n,l,e,a):l})}async function lV(n,e,t=!1){const a=await Cc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Bl._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uV(n,e,t=!1){const{auth:a}=n;if(_i(a.app))return Promise.reject(ho(a));const s="reauthenticate";try{const l=await Cc(n,q1(a,s,e,n),t);Xe(l.idToken,a,"internal-error");const c=D_(l.idToken);Xe(c,a,"internal-error");const{sub:d}=c;return Xe(n.uid===d,a,"user-mismatch"),Bl._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Yi(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cV(n,e,t=!1){if(_i(n.app))return Promise.reject(ho(n));const a="signIn",s=await q1(n,a,e),l=await Bl._fromIdTokenResponse(n,a,s);return t||await n._updateCurrentUser(l.user),l}function hV(n,e,t,a){return kn(n).onIdTokenChanged(e,t,a)}function fV(n,e,t){return kn(n).beforeAuthStateChanged(e,t)}function dV(n,e,t,a){return kn(n).onAuthStateChanged(e,t,a)}const Sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sd,"1"),this.storage.removeItem(Sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=1e3,pV=10;class $1 extends G1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!t&&this.localCache[a]===c||this.notifyListeners(a,c)},l=this.storage.getItem(a);$P()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,pV):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},mV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$1.type="LOCAL";const gV=$1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1 extends G1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}K1.type="SESSION";const Y1=K1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new am(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await yV(d);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}am.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=V_("",20);s.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(){return window}function vV(n){Gi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(){return typeof Gi().WorkerGlobalScope<"u"&&typeof Gi().importScripts=="function"}async function EV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function bV(){return Q1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="firebaseLocalStorageDb",SV=1,Ad="firebaseLocalStorage",W1="fbase_key";class Wc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sm(n,e){return n.transaction([Ad],e?"readwrite":"readonly").objectStore(Ad)}function AV(){const n=indexedDB.deleteDatabase(X1);return new Wc(n).toPromise()}function Ey(){const n=indexedDB.open(X1,SV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(Ad,{keyPath:W1})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(Ad)?e(a):(a.close(),await AV(),e(await Ey()))})})}async function yS(n,e,t){const a=sm(n,!0).put({[W1]:e,value:t});return new Wc(a).toPromise()}async function wV(n,e){const t=sm(n,!1).get(e),a=await new Wc(t).toPromise();return a===void 0?null:a.value}function _S(n,e){const t=sm(n,!0).delete(e);return new Wc(t).toPromise()}const CV=800,RV=3;class J1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ey(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>RV)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Q1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=am._getInstance(bV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await EV(),!this.activeServiceWorker)return;this.sender=new _V(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ey();return await yS(e,Sd,"1"),await _S(e,Sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>yS(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>wV(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_S(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=sm(s,!1).getAll();return new Wc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J1.type="LOCAL";const IV=J1;new Qc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(n,e){return e?Ea(e):(Xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends F1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xV(n){return cV(n.auth,new k_(n),n.bypassAuthState)}function NV(n){const{auth:e,user:t}=n;return Xe(t,e,"internal-error"),uV(t,new k_(n),n.bypassAuthState)}async function DV(n){const{auth:e,user:t}=n;return Xe(t,e,"internal-error"),lV(t,new k_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xV;case"linkViaPopup":case"linkViaRedirect":return DV;case"reauthViaPopup":case"reauthViaRedirect":return NV;default:Yi(this.auth,"internal-error")}}resolve(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=new Qc(2e3,1e4);async function MV(n,e,t){if(_i(n.app))return Promise.reject(bi(n,"operation-not-supported-in-this-environment"));const a=im(n);IP(n,e,P_);const s=Z1(a,t);return new lo(a,"signInViaPopup",e,s).executeNotNull()}class lo extends eC{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xe(e,this.auth,"internal-error"),e}async onExecution(){Ra(this.filter.length===1,"Popup operations only handle one event");const e=V_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OV.get())};e()}}lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV="pendingRedirect",qf=new Map;class VV extends eC{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=qf.get(this.auth._key());if(!e){try{const a=await kV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}qf.set(this.auth._key(),e)}return this.bypassAuthState||qf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kV(n,e){const t=UV(e),a=jV(n);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}function LV(n,e){qf.set(n._key(),e)}function jV(n){return Ea(n._redirectPersistence)}function UV(n){return Ff(PV,n.config.apiKey,n.name)}async function zV(n,e,t=!1){if(_i(n.app))return Promise.reject(ho(n));const a=im(n),s=Z1(a,e),c=await new VV(a,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=600*1e3;class HV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!tC(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(bi(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BV&&this.cachedEventUids.clear(),this.cachedEventUids.has(vS(e))}saveEventToCache(e){this.cachedEventUids.add(vS(e)),this.lastProcessedEventTime=Date.now()}}function vS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function tC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qV(n,e={}){return Jl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$V=/^https?/;async function KV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await qV(n);for(const t of e)try{if(YV(t))return}catch{}Yi(n,"unauthorized-domain")}function YV(n){const e=_y(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===a}if(!$V.test(t))return!1;if(GV.test(n))return a===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=new Qc(3e4,6e4);function ES(){const n=Gi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function XV(n){return new Promise((e,t)=>{var s,l,c;function a(){ES(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ES(),t(bi(n,"network-request-failed"))},timeout:QV.get()})}if((l=(s=Gi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Gi().gapi)!=null&&c.load)a();else{const d=tV("iframefcb");return Gi()[d]=()=>{gapi.load?a():t(bi(n,"network-request-failed"))},ZP(`${eV()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw Gf=null,e})}let Gf=null;function WV(n){return Gf=Gf||XV(n),Gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=new Qc(5e3,15e3),ZV="__/auth/iframe",ek="emulator/auth/iframe",tk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rk(n){const e=n.config;Xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?x_(e,ek):`https://${n.config.authDomain}/${ZV}`,a={apiKey:e.apiKey,appName:n.name,v:Kl},s=nk.get(n.config.apiHost);s&&(a.eid=s);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${kc(a).slice(1)}`}async function ik(n){const e=await WV(n),t=Gi().gapi;return Xe(t,n,"internal-error"),e.open({where:document.body,url:rk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tk,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const c=bi(n,"network-request-failed"),d=Gi().setTimeout(()=>{l(c)},JV.get());function m(){Gi().clearTimeout(d),s(a)}a.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sk=500,ok=600,lk="_blank",uk="http://localhost";class TS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ck(n,e,t,a=sk,s=ok){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const m={...ak,width:a.toString(),height:s.toString(),top:l,left:c},g=ir().toLowerCase();t&&(d=V1(g)?lk:t),M1(g)&&(e=e||uk,m.scrollbars="yes");const y=Object.entries(m).reduce((S,[w,O])=>`${S}${w}=${O},`,"");if(GP(g)&&d!=="_self")return hk(e||"",d),new TS(null);const E=window.open(e||"",d,y);Xe(E,n,"popup-blocked");try{E.focus()}catch{}return new TS(E)}function hk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="__/auth/handler",dk="emulator/auth/handler",mk=encodeURIComponent("fac");async function bS(n,e,t,a,s,l){Xe(n.config.authDomain,n,"auth-domain-config-required"),Xe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:Kl,eventId:s};if(e instanceof P_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",QD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))c[y]=E}if(e instanceof Xc){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const m=await n._getAppCheckToken(),g=m?`#${mk}=${encodeURIComponent(m)}`:"";return`${pk(n)}?${kc(d).slice(1)}${g}`}function pk({config:n}){return n.emulator?x_(n,dk):`https://${n.authDomain}/${fk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="webStorageSupport";class gk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y1,this._completeRedirectFn=zV,this._overrideRedirectResult=LV}async _openPopup(e,t,a,s){var c;Ra((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await bS(e,t,a,_y(),s);return ck(e,l,V_())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await bS(e,t,a,_y(),s);return vV(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(Ra(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await ik(e),a=new HV(e);return t.register("authEvent",s=>(Xe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jg,{type:jg},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[jg];l!==void 0&&t(!!l),Yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=KV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return z1()||P1()||O_()}}const yk=gk;var SS="@firebase/auth",AS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ek(n){Ml(new po("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=a.options;Xe(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:B1(n)},g=new WP(a,s,l,m);return rV(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),Ml(new po("auth-internal",e=>{const t=im(e.getProvider("auth").getImmediate());return(a=>new _k(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Es(SS,AS,vk(n)),Es(SS,AS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=300,bk=kA("authIdTokenMaxAge")||Tk;let wS=null;const Sk=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>bk)return;const s=t==null?void 0:t.token;wS!==s&&(wS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ak(n=HA()){const e=Hy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=nV(n,{popupRedirectResolver:yk,persistence:[IV,gV,Y1]}),a=kA("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const c=Sk(l.toString());fV(t,c,()=>c(t.currentUser)),hV(t,d=>c(d))}}const s=PA("auth");return s&&iV(t,`http://${s}`),t}function wk(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}JP({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=s=>{const l=bi("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",wk().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ek("Browser");const Ck={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function cl(n){const e=Ck[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const Rk={apiKey:cl("VITE_FIREBASE_API_KEY"),authDomain:cl("VITE_FIREBASE_AUTH_DOMAIN"),projectId:cl("VITE_FIREBASE_PROJECT_ID"),storageBucket:cl("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:cl("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:cl("VITE_FIREBASE_APP_ID")},nC=BA(Rk),Hl=Ak(nC),Ik=new ya,Ln=hP(nC),rC=P.createContext(void 0),xk=({children:n})=>{const[e,t]=P.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),a=P.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);P.useEffect(()=>{a(e)},[e,a]);const s=P.useCallback(c=>{t(c),a(c);const d=Hl.currentUser;if(d){const m=ai(Ln,"users",d.uid);S1(m,{preferredTheme:c}).catch(g=>console.error("Error updating preferred theme in Firebase:",g))}},[a]),l=P.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return P.useEffect(()=>Hl.onAuthStateChanged(async d=>{if(d){const m=ai(Ln,"users",d.uid),g=await Kc(m);if(g.exists()&&g.data().preferredTheme){const y=g.data().preferredTheme;t(y),a(y)}}}),[a]),T.jsx(rC.Provider,{value:{theme:e,toggleTheme:l,setTheme:s},children:n})},Nk="_spinner_5jyct_1",Dk="_spinnerContainer_5jyct_19",CS={spinner:Nk,spinnerContainer:Dk},Zl=({container:n=!0})=>{const e=T.jsx("div",{className:CS.spinner});return n?T.jsx("div",{className:CS.spinnerContainer,children:e}):e},Ok="_loadingContainer_1n1m5_1",Mk={loadingContainer:Ok},Fl=()=>T.jsx("div",{className:Mk.loadingContainer,children:T.jsx(Zl,{container:!1})}),Pk=()=>{const n=ot(a=>a.auth.firebaseUser),e=ot(a=>a.auth.userData);return ot(a=>a.auth.loading)?T.jsx(Fl,{}):n?e?e.isApproved?T.jsx(ys,{to:"/app/dashboard",replace:!0}):T.jsx(ys,{to:"/guest",replace:!0}):T.jsx(Fl,{}):T.jsx(ys,{to:"/login",replace:!0})};function Kn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Vk=typeof Symbol=="function"&&Symbol.observable||"@@observable",RS=Vk,Ug=()=>Math.random().toString(36).substring(7).split("").join("."),kk={INIT:`@@redux/INIT${Ug()}`,REPLACE:`@@redux/REPLACE${Ug()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ug()}`},wd=kk;function L_(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function iC(n,e,t){if(typeof n!="function")throw new Error(Kn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Kn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Kn(1));return t(iC)(n,e)}let a=n,s=e,l=new Map,c=l,d=0,m=!1;function g(){c===l&&(c=new Map,l.forEach((k,K)=>{c.set(K,k)}))}function y(){if(m)throw new Error(Kn(3));return s}function E(k){if(typeof k!="function")throw new Error(Kn(4));if(m)throw new Error(Kn(5));let K=!0;g();const H=d++;return c.set(H,k),function(){if(K){if(m)throw new Error(Kn(6));K=!1,g(),c.delete(H),l=null}}}function S(k){if(!L_(k))throw new Error(Kn(7));if(typeof k.type>"u")throw new Error(Kn(8));if(typeof k.type!="string")throw new Error(Kn(17));if(m)throw new Error(Kn(9));try{m=!0,s=a(s,k)}finally{m=!1}return(l=c).forEach(H=>{H()}),k}function w(k){if(typeof k!="function")throw new Error(Kn(10));a=k,S({type:wd.REPLACE})}function O(){const k=E;return{subscribe(K){if(typeof K!="object"||K===null)throw new Error(Kn(11));function H(){const se=K;se.next&&se.next(y())}return H(),{unsubscribe:k(H)}},[RS](){return this}}}return S({type:wd.INIT}),{dispatch:S,subscribe:E,getState:y,replaceReducer:w,[RS]:O}}function Lk(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:wd.INIT})>"u")throw new Error(Kn(12));if(typeof t(void 0,{type:wd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Kn(13))})}function jk(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const a=Object.keys(t);let s;try{Lk(t)}catch(l){s=l}return function(c={},d){if(s)throw s;let m=!1;const g={};for(let y=0;y<a.length;y++){const E=a[y],S=t[E],w=c[E],O=S(w,d);if(typeof O>"u")throw d&&d.type,new Error(Kn(14));g[E]=O,m=m||O!==w}return m=m||a.length!==Object.keys(c).length,m?g:c}}function Cd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...a)=>e(t(...a)))}function Uk(...n){return e=>(t,a)=>{const s=e(t,a);let l=()=>{throw new Error(Kn(15))};const c={getState:s.getState,dispatch:(m,...g)=>l(m,...g)},d=n.map(m=>m(c));return l=Cd(...d)(s.dispatch),{...s,dispatch:l}}}function zk(n){return L_(n)&&"type"in n&&typeof n.type=="string"}var aC=Symbol.for("immer-nothing"),IS=Symbol.for("immer-draftable"),ur=Symbol.for("immer-state");function vi(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Lr=Object,ql=Lr.getPrototypeOf,Rd="constructor",om="prototype",Ty="configurable",Id="enumerable",$f="writable",Rc="value",Ia=n=>!!n&&!!n[ur];function Ai(n){var e;return n?sC(n)||um(n)||!!n[IS]||!!((e=n[Rd])!=null&&e[IS])||cm(n)||hm(n):!1}var Bk=Lr[om][Rd].toString(),xS=new WeakMap;function sC(n){if(!n||!j_(n))return!1;const e=ql(n);if(e===null||e===Lr[om])return!0;const t=Lr.hasOwnProperty.call(e,Rd)&&e[Rd];if(t===Object)return!0;if(!vl(t))return!1;let a=xS.get(t);return a===void 0&&(a=Function.toString.call(t),xS.set(t,a)),a===Bk}function lm(n,e,t=!0){Jc(n)===0?(t?Reflect.ownKeys(n):Lr.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((a,s)=>e(s,a,n))}function Jc(n){const e=n[ur];return e?e.type_:um(n)?1:cm(n)?2:hm(n)?3:0}var NS=(n,e,t=Jc(n))=>t===2?n.has(e):Lr[om].hasOwnProperty.call(n,e),by=(n,e,t=Jc(n))=>t===2?n.get(e):n[e],xd=(n,e,t,a=Jc(n))=>{a===2?n.set(e,t):a===3?n.add(t):n[e]=t};function Hk(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var um=Array.isArray,cm=n=>n instanceof Map,hm=n=>n instanceof Set,j_=n=>typeof n=="object",vl=n=>typeof n=="function",zg=n=>typeof n=="boolean";function Fk(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var ga=n=>n.copy_||n.base_,U_=n=>n.modified_?n.copy_:n.base_;function Sy(n,e){if(cm(n))return new Map(n);if(hm(n))return new Set(n);if(um(n))return Array[om].slice.call(n);const t=sC(n);if(e===!0||e==="class_only"&&!t){const a=Lr.getOwnPropertyDescriptors(n);delete a[ur];let s=Reflect.ownKeys(a);for(let l=0;l<s.length;l++){const c=s[l],d=a[c];d[$f]===!1&&(d[$f]=!0,d[Ty]=!0),(d.get||d.set)&&(a[c]={[Ty]:!0,[$f]:!0,[Id]:d[Id],[Rc]:n[c]})}return Lr.create(ql(n),a)}else{const a=ql(n);if(a!==null&&t)return{...n};const s=Lr.create(a);return Lr.assign(s,n)}}function z_(n,e=!1){return fm(n)||Ia(n)||!Ai(n)||(Jc(n)>1&&Lr.defineProperties(n,{set:Rf,add:Rf,clear:Rf,delete:Rf}),Lr.freeze(n),e&&lm(n,(t,a)=>{z_(a,!0)},!1)),n}function qk(){vi(2)}var Rf={[Rc]:qk};function fm(n){return n===null||!j_(n)?!0:Lr.isFrozen(n)}var Nd="MapSet",Ay="Patches",DS="ArrayMethods",oC={};function vo(n){const e=oC[n];return e||vi(0,n),e}var OS=n=>!!oC[n],Ic,lC=()=>Ic,Gk=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:OS(Nd)?vo(Nd):void 0,arrayMethodsPlugin_:OS(DS)?vo(DS):void 0});function MS(n,e){e&&(n.patchPlugin_=vo(Ay),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function wy(n){Cy(n),n.drafts_.forEach($k),n.drafts_=null}function Cy(n){n===Ic&&(Ic=n.parent_)}var PS=n=>Ic=Gk(Ic,n);function $k(n){const e=n[ur];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function VS(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[ur].modified_&&(wy(e),vi(4)),Ai(n)&&(n=kS(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[ur].base_,n,e)}else n=kS(e,t);return Kk(e,n,!0),wy(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==aC?n:void 0}function kS(n,e){if(fm(e))return e;const t=e[ur];if(!t)return Dd(e,n.handledSet_,n);if(!dm(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:a}=t;if(a)for(;a.length>0;)a.pop()(n);hC(t,n)}return t.copy_}function Kk(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&z_(e,t)}function uC(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var dm=(n,e)=>n.scope_===e,Yk=[];function cC(n,e,t,a){const s=ga(n),l=n.type_;if(a!==void 0&&by(s,a,l)===e){xd(s,a,t,l);return}if(!n.draftLocations_){const d=n.draftLocations_=new Map;lm(s,(m,g)=>{if(Ia(g)){const y=d.get(g)||[];y.push(m),d.set(g,y)}})}const c=n.draftLocations_.get(e)??Yk;for(const d of c)xd(s,d,t,l)}function Qk(n,e,t){n.callbacks_.push(function(s){var d;const l=e;if(!l||!dm(l,s))return;(d=s.mapSetPlugin_)==null||d.fixSetContents(l);const c=U_(l);cC(n,l.draft_??l,c,t),hC(l,s)})}function hC(n,e){var a;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((a=n.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const l=s.getPath(n);l&&s.generatePatches_(n,l,e)}uC(n)}}function Xk(n,e,t){const{scope_:a}=n;if(Ia(t)){const s=t[ur];dm(s,a)&&s.callbacks_.push(function(){Kf(n);const c=U_(s);cC(n,t,c,e)})}else Ai(t)&&n.callbacks_.push(function(){const l=ga(n);n.type_===3?l.has(t)&&Dd(t,a.handledSet_,a):by(l,e,n.type_)===t&&a.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&Dd(by(n.copy_,e,n.type_),a.handledSet_,a)})}function Dd(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Ia(n)||e.has(n)||!Ai(n)||fm(n)||(e.add(n),lm(n,(a,s)=>{if(Ia(s)){const l=s[ur];if(dm(l,t)){const c=U_(l);xd(n,a,c,n.type_),uC(l)}}else Ai(s)&&Dd(s,e,t)})),n}function Wk(n,e){const t=um(n),a={type_:t?1:0,scope_:e?e.scope_:lC(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,l=Od;t&&(s=[a],l=xc);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return a.draft_=d,a.revoke_=c,[d,a]}var Od={get(n,e){if(e===ur)return n;let t=n.scope_.arrayMethodsPlugin_;const a=n.type_===1&&typeof e=="string";if(a&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=ga(n);if(!NS(s,e,n.type_))return Jk(n,s,e);const l=s[e];if(n.finalized_||!Ai(l)||a&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&Fk(e))return l;if(l===Bg(n.base_,e)){Kf(n);const c=n.type_===1?+e:e,d=Iy(n.scope_,l,n,c);return n.copy_[c]=d}return l},has(n,e){return e in ga(n)},ownKeys(n){return Reflect.ownKeys(ga(n))},set(n,e,t){const a=fC(ga(n),e);if(a!=null&&a.set)return a.set.call(n.draft_,t),!0;if(!n.modified_){const s=Bg(ga(n),e),l=s==null?void 0:s[ur];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(Hk(t,s)&&(t!==void 0||NS(n.base_,e,n.type_)))return!0;Kf(n),Ry(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),Xk(n,e,t)),!0},deleteProperty(n,e){return Kf(n),Bg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),Ry(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=ga(n),a=Reflect.getOwnPropertyDescriptor(t,e);return a&&{[$f]:!0,[Ty]:n.type_!==1||e!=="length",[Id]:a[Id],[Rc]:t[e]}},defineProperty(){vi(11)},getPrototypeOf(n){return ql(n.base_)},setPrototypeOf(){vi(12)}},xc={};for(let n in Od){let e=Od[n];xc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}xc.deleteProperty=function(n,e){return xc.set.call(this,n,e,void 0)};xc.set=function(n,e,t){return Od.set.call(this,n[0],e,t,n[0])};function Bg(n,e){const t=n[ur];return(t?ga(t):n)[e]}function Jk(n,e,t){var s;const a=fC(e,t);return a?Rc in a?a[Rc]:(s=a.get)==null?void 0:s.call(n.draft_):void 0}function fC(n,e){if(!(e in n))return;let t=ql(n);for(;t;){const a=Object.getOwnPropertyDescriptor(t,e);if(a)return a;t=ql(t)}}function Ry(n){n.modified_||(n.modified_=!0,n.parent_&&Ry(n.parent_))}function Kf(n){n.copy_||(n.assigned_=new Map,n.copy_=Sy(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var Zk=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{if(vl(e)&&!vl(t)){const l=t;t=e;const c=this;return function(m=l,...g){return c.produce(m,y=>t.call(this,y,...g))}}vl(t)||vi(6),a!==void 0&&!vl(a)&&vi(7);let s;if(Ai(e)){const l=PS(this),c=Iy(l,e,void 0);let d=!0;try{s=t(c),d=!1}finally{d?wy(l):Cy(l)}return MS(l,a),VS(s,l)}else if(!e||!j_(e)){if(s=t(e),s===void 0&&(s=e),s===aC&&(s=void 0),this.autoFreeze_&&z_(s,!0),a){const l=[],c=[];vo(Ay).generateReplacementPatches_(e,s,{patches_:l,inversePatches_:c}),a(l,c)}return s}else vi(1,e)},this.produceWithPatches=(e,t)=>{if(vl(e))return(c,...d)=>this.produceWithPatches(c,m=>e(m,...d));let a,s;return[this.produce(e,t,(c,d)=>{a=c,s=d}),a,s]},zg(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),zg(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),zg(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Ai(n)||vi(8),Ia(n)&&(n=eL(n));const e=PS(this),t=Iy(e,n,void 0);return t[ur].isManual_=!0,Cy(e),t}finishDraft(n,e){const t=n&&n[ur];(!t||!t.isManual_)&&vi(9);const{scope_:a}=t;return MS(a,e),VS(void 0,a)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const a=vo(Ay).applyPatches_;return Ia(n)?a(n,e):this.produce(n,s=>a(s,e))}};function Iy(n,e,t,a){const[s,l]=cm(e)?vo(Nd).proxyMap_(e,t):hm(e)?vo(Nd).proxySet_(e,t):Wk(e,t);return((t==null?void 0:t.scope_)??lC()).drafts_.push(s),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=a,t&&a!==void 0?Qk(t,l,a):l.callbacks_.push(function(m){var y;(y=m.mapSetPlugin_)==null||y.fixSetContents(l);const{patchPlugin_:g}=m;l.modified_&&g&&g.generatePatches_(l,[],m)}),s}function eL(n){return Ia(n)||vi(10,n),dC(n)}function dC(n){if(!Ai(n)||fm(n))return n;const e=n[ur];let t,a=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Sy(n,e.scope_.immer_.useStrictShallowCopy_),a=e.scope_.immer_.shouldUseStrictIteration()}else t=Sy(n,!0);return lm(t,(s,l)=>{xd(t,s,dC(l))},a),e&&(e.finalized_=!1),t}var tL=new Zk,mC=tL.produce;function pC(n){return({dispatch:t,getState:a})=>s=>l=>typeof l=="function"?l(t,a,n):s(l)}var nL=pC(),rL=pC,iL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Cd:Cd.apply(null,arguments)},aL=n=>n&&typeof n.match=="function";function dc(n,e){function t(...a){if(e){let s=e(...a);if(!s)throw new Error(ba(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:a[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=a=>zk(a)&&a.type===n,t}var gC=class ac extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,ac.prototype)}static get[Symbol.species](){return ac}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new ac(...e[0].concat(this)):new ac(...e.concat(this))}};function LS(n){return Ai(n)?mC(n,()=>{}):n}function If(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function sL(n){return typeof n=="boolean"}var oL=()=>function(e){const{thunk:t=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=e??{};let c=new gC;return t&&(sL(t)?c.push(nL):c.push(rL(t.extraArgument))),c},lL="RTK_autoBatch",jS=n=>e=>{setTimeout(e,n)},uL=(n={type:"raf"})=>e=>(...t)=>{const a=e(...t);let s=!0,l=!1,c=!1;const d=new Set,m=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:jS(10):n.type==="callback"?n.queueNotification:jS(n.timeout),g=()=>{c=!1,l&&(l=!1,d.forEach(y=>y()))};return Object.assign({},a,{subscribe(y){const E=()=>s&&y(),S=a.subscribe(E);return d.add(y),()=>{S(),d.delete(y)}},dispatch(y){var E;try{return s=!((E=y==null?void 0:y.meta)!=null&&E[lL]),l=!s,l&&(c||(c=!0,m(g))),a.dispatch(y)}finally{s=!0}}})},cL=n=>function(t){const{autoBatch:a=!0}=t??{};let s=new gC(n);return a&&s.push(uL(typeof a=="object"?a:void 0)),s};function hL(n){const e=oL(),{reducer:t=void 0,middleware:a,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(L_(t))d=jk(t);else throw new Error(ba(1));let m;typeof a=="function"?m=a(e):m=e();let g=Cd;s&&(g=iL({trace:!1,...typeof s=="object"&&s}));const y=Uk(...m),E=cL(y);let S=typeof c=="function"?c(E):E();const w=g(...S);return iC(d,l,w)}function yC(n){const e={},t=[];let a;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(ba(28));if(d in e)throw new Error(ba(29));return e[d]=c,s},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return t.push({matcher:l,reducer:c}),s},addDefaultCase(l){return a=l,s}};return n(s),[e,t,a]}function fL(n){return typeof n=="function"}function dL(n,e){let[t,a,s]=yC(e),l;if(fL(n))l=()=>LS(n());else{const d=LS(n);l=()=>d}function c(d=l(),m){let g=[t[m.type],...a.filter(({matcher:y})=>y(m)).map(({reducer:y})=>y)];return g.filter(y=>!!y).length===0&&(g=[s]),g.reduce((y,E)=>{if(E)if(Ia(y)){const w=E(y,m);return w===void 0?y:w}else{if(Ai(y))return mC(y,S=>E(S,m));{const S=E(y,m);if(S===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return y},d)}return c.getInitialState=l,c}var mL=(n,e)=>aL(n)?n.match(e):n(e);function pL(...n){return e=>n.some(t=>mL(t,e))}var gL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",yL=(n=21)=>{let e="",t=n;for(;t--;)e+=gL[Math.random()*64|0];return e},_L=["name","message","stack","code"],Hg=class{constructor(n,e){ug(this,"_type");this.payload=n,this.meta=e}},US=class{constructor(n,e){ug(this,"_type");this.payload=n,this.meta=e}},vL=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of _L)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},zS="External signal was aborted",Br=(()=>{function n(e,t,a){const s=dc(e+"/fulfilled",(m,g,y,E)=>({payload:m,meta:{...E||{},arg:y,requestId:g,requestStatus:"fulfilled"}})),l=dc(e+"/pending",(m,g,y)=>({payload:void 0,meta:{...y||{},arg:g,requestId:m,requestStatus:"pending"}})),c=dc(e+"/rejected",(m,g,y,E,S)=>({payload:E,error:(a&&a.serializeError||vL)(m||"Rejected"),meta:{...S||{},arg:y,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(m==null?void 0:m.name)==="AbortError",condition:(m==null?void 0:m.name)==="ConditionError"}}));function d(m,{signal:g}={}){return(y,E,S)=>{const w=a!=null&&a.idGenerator?a.idGenerator(m):yL(),O=new AbortController;let q,k;function K(X){k=X,O.abort()}g&&(g.aborted?K(zS):g.addEventListener("abort",()=>K(zS),{once:!0}));const H=(async function(){var ue,G;let X;try{let A=(ue=a==null?void 0:a.condition)==null?void 0:ue.call(a,m,{getState:E,extra:S});if(TL(A)&&(A=await A),A===!1||O.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const R=new Promise((x,N)=>{q=()=>{N({name:"AbortError",message:k||"Aborted"})},O.signal.addEventListener("abort",q,{once:!0})});y(l(w,m,(G=a==null?void 0:a.getPendingMeta)==null?void 0:G.call(a,{requestId:w,arg:m},{getState:E,extra:S}))),X=await Promise.race([R,Promise.resolve(t(m,{dispatch:y,getState:E,extra:S,requestId:w,signal:O.signal,abort:K,rejectWithValue:(x,N)=>new Hg(x,N),fulfillWithValue:(x,N)=>new US(x,N)})).then(x=>{if(x instanceof Hg)throw x;return x instanceof US?s(x.payload,w,m,x.meta):s(x,w,m)})])}catch(A){X=A instanceof Hg?c(null,w,m,A.payload,A.meta):c(A,w,m)}finally{q&&O.signal.removeEventListener("abort",q)}return a&&!a.dispatchConditionRejection&&c.match(X)&&X.meta.condition||y(X),X})();return Object.assign(H,{abort:K,requestId:w,arg:m,unwrap(){return H.then(EL)}})}}return Object.assign(d,{pending:l,rejected:c,fulfilled:s,settled:pL(c,s),typePrefix:e})}return n.withTypes=()=>n,n})();function EL(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function TL(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var bL=Symbol.for("rtk-slice-createasyncthunk");function SL(n,e){return`${n}/${e}`}function AL({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[bL];return function(s){const{name:l,reducerPath:c=l}=s;if(!l)throw new Error(ba(11));const d=(typeof s.reducers=="function"?s.reducers(CL()):s.reducers)||{},m=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(se,ue){const G=typeof se=="string"?se:se.type;if(!G)throw new Error(ba(12));if(G in g.sliceCaseReducersByType)throw new Error(ba(13));return g.sliceCaseReducersByType[G]=ue,y},addMatcher(se,ue){return g.sliceMatchers.push({matcher:se,reducer:ue}),y},exposeAction(se,ue){return g.actionCreators[se]=ue,y},exposeCaseReducer(se,ue){return g.sliceCaseReducersByName[se]=ue,y}};m.forEach(se=>{const ue=d[se],G={reducerName:se,type:SL(l,se),createNotation:typeof s.reducers=="function"};IL(ue)?NL(G,ue,y,e):RL(G,ue,y)});function E(){const[se={},ue=[],G=void 0]=typeof s.extraReducers=="function"?yC(s.extraReducers):[s.extraReducers],A={...se,...g.sliceCaseReducersByType};return dL(s.initialState,R=>{for(let x in A)R.addCase(x,A[x]);for(let x of g.sliceMatchers)R.addMatcher(x.matcher,x.reducer);for(let x of ue)R.addMatcher(x.matcher,x.reducer);G&&R.addDefaultCase(G)})}const S=se=>se,w=new Map,O=new WeakMap;let q;function k(se,ue){return q||(q=E()),q(se,ue)}function K(){return q||(q=E()),q.getInitialState()}function H(se,ue=!1){function G(R){let x=R[se];return typeof x>"u"&&ue&&(x=If(O,G,K)),x}function A(R=S){const x=If(w,ue,()=>new WeakMap);return If(x,R,()=>{const N={};for(const[M,V]of Object.entries(s.selectors??{}))N[M]=wL(V,R,()=>If(O,R,K),ue);return N})}return{reducerPath:se,getSelectors:A,get selectors(){return A(G)},selectSlice:G}}const X={name:l,reducer:k,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:K,...H(c),injectInto(se,{reducerPath:ue,...G}={}){const A=ue??c;return se.inject({reducerPath:A,reducer:k},G),{...X,...H(A,!0)}}};return X}}function wL(n,e,t,a){function s(l,...c){let d=e(l);return typeof d>"u"&&a&&(d=t()),n(d,...c)}return s.unwrapped=n,s}var wo=AL();function CL(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function RL({type:n,reducerName:e,createNotation:t},a,s){let l,c;if("reducer"in a){if(t&&!xL(a))throw new Error(ba(17));l=a.reducer,c=a.prepare}else l=a;s.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?dc(n,c):dc(n))}function IL(n){return n._reducerDefinitionType==="asyncThunk"}function xL(n){return n._reducerDefinitionType==="reducerWithPrepare"}function NL({type:n,reducerName:e},t,a,s){if(!s)throw new Error(ba(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:m,settled:g,options:y}=t,E=s(n,l,y);a.exposeAction(e,E),c&&a.addCase(E.fulfilled,c),d&&a.addCase(E.pending,d),m&&a.addCase(E.rejected,m),g&&a.addMatcher(E.settled,g),a.exposeCaseReducer(e,{fulfilled:c||xf,pending:d||xf,rejected:m||xf,settled:g||xf})}function xf(){}function ba(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const DL={positions:[],loading:!1,error:null,fetched:!1,isDirty:!1},Sa=Br("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=ai(Ln,"metadata","positions"),a=await Kc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),B_=Br("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=ai(Ln,"metadata","positions");return await w_(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),_C=wo({name:"positions",initialState:DL,reducers:{updatePositionCustomLabels:(n,e)=>{const{positionName:t,labels:a}=e.payload,s=n.positions.find(l=>l.name===t);s&&(s.customLabels=a,n.isDirty=!0)},resetPositionsDirty:n=>{n.isDirty=!1}},extraReducers:n=>{n.addCase(Sa.pending,e=>{e.loading=!0,e.error=null}).addCase(Sa.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(Sa.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(B_.fulfilled,(e,t)=>{e.positions=t.payload,e.isDirty=!1})}}),{updatePositionCustomLabels:Nf,resetPositionsDirty:OL}=_C.actions,ML=_C.reducer,PL={teams:[],loading:!1,error:null,fetched:!1},fo=Br("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=ai(Ln,"metadata","teams"),a=await Kc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),Yf=Br("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=ai(Ln,"metadata","teams");return await w_(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),vC=wo({name:"teams",initialState:PL,reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(fo.pending,e=>{e.loading=!0,e.error=null}).addCase(fo.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(fo.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Yf.pending,e=>{e.error=null}).addCase(Yf.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(Yf.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:j9}=vC.actions,VL=vC.reducer,kL=()=>{const n=li(),{firebaseUser:e,userData:t,loading:a}=ot(m=>m.auth),{fetched:s,loading:l}=ot(m=>m.teams),{fetched:c,loading:d}=ot(m=>m.positions);return P.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!s&&!l&&n(fo()),!c&&!d&&n(Sa()))},[n,e,t,s,l,c,d]),a||t!=null&&t.isApproved&&(!s||!c)?T.jsx(Fl,{}):e?t?t.isApproved?T.jsx(AA,{}):T.jsx(ys,{to:"/guest",replace:!0}):T.jsx(Fl,{}):T.jsx(ys,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=(...n)=>n.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=n=>{const e=jL(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},m)=>P.createElement("svg",{ref:m,...UL,width:e,height:e,stroke:n,strokeWidth:a?Number(t)*24/Number(e):t,className:EC("lucide",s),...!l&&!zL(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,y])=>P.createElement(g,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=(n,e)=>{const t=P.forwardRef(({className:a,...s},l)=>P.createElement(BL,{ref:l,iconNode:e,className:EC(`lucide-${LL(BS(n))}`,`lucide-${n}`,a),...s}));return t.displayName=BS(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],FL=cr("arrow-left",HL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],GL=cr("arrow-right",qL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],TC=cr("chevron-up",$L);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],YL=cr("circle-check",KL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],XL=cr("copy",QL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],bC=cr("corner-down-right",WL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ZL=cr("layout-grid",JL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],tj=cr("moon",ej);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],rj=cr("panel-left-close",nj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],aj=cr("panel-left-open",ij);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mm=cr("plus",sj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],lj=cr("sun",oj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],SC=cr("trash-2",uj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hj=cr("users",cj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],AC=cr("x",fj),dj=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},mj={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:dj(),lastVisitedPaths:{},rosterAllViewMode:"user"},wC=wo({name:"ui",initialState:mj,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setRosterAllViewMode:(n,e)=>{n.rosterAllViewMode=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:a}=e.payload;n.lastVisitedPaths[t]=a},toggleTeamExpansion:(n,e)=>{const t=e.payload,a=n.expandedTeams.indexOf(t);a>=0?n.expandedTeams.splice(a,1):n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:a,userEmail:s}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][a]||(n.hiddenUsers[t][a]=[]);const l=n.hiddenUsers[t][a],c=l.indexOf(s);c>=0?l.splice(c,1):l.push(s),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))}}}),{setMobileSidebarOpen:El,setDesktopSidebarExpanded:pj,setRosterAllViewMode:HS,setLastVisitedPath:gj,toggleTeamExpansion:yj,toggleUserVisibility:_j}=wC.actions,vj=wC.reducer,Ej=()=>{const n=P.useContext(rC);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},Tj="_themeToggleButton_yikav_1",bj={themeToggleButton:Tj},pm=({showText:n,className:e})=>{const{theme:t,toggleTheme:a}=Ej();return T.jsxs("button",{className:`${bj.themeToggleButton} ${e||""}`,onClick:a,"aria-label":"Toggle theme",children:[t==="dark"?T.jsx(lj,{size:20}):T.jsx(tj,{size:20}),n&&T.jsx("span",{children:"Toggle theme"})]})},Sj="_mobileHeader_rrb9m_1",Aj="_mobileHeaderPill_rrb9m_16",wj="_mobileHeaderPillDisabled_rrb9m_28",Cj="_mobileHeaderPillActive_rrb9m_32",Rj="_mobileHeaderText_rrb9m_43",Ij="_mobileHeaderChevron_rrb9m_51",xj="_rotate_rrb9m_56",ro={mobileHeader:Sj,mobileHeaderPill:Aj,mobileHeaderPillDisabled:wj,mobileHeaderPillActive:Cj,mobileHeaderText:Rj,mobileHeaderChevron:Ij,rotate:xj},Nj=({title:n,hasSideNav:e=!0})=>{const t=li(),{isMobileSidebarOpen:a}=ot(l=>l.ui),s=()=>{e&&t(El(!a))};return T.jsxs("header",{className:ro.mobileHeader,children:[T.jsxs("div",{className:`${ro.mobileHeaderPill} ${a?ro.mobileHeaderPillActive:""} ${e?"":ro.mobileHeaderPillDisabled}`,onClick:s,children:[T.jsx("span",{className:ro.mobileHeaderText,children:n}),e&&T.jsx(TC,{className:`${ro.mobileHeaderChevron} ${a?ro.rotate:""}`})]}),T.jsx(pm,{})]})};var ln=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(ln||{}),bl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(bl||{});const H_=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],FS=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],Dj="_bottomNavContainer_1c0tq_1",Oj="_bottomNav_1c0tq_1",Mj="_bottomNavBtn_1c0tq_18",Pj="_bottomNavBtnActive_1c0tq_42",Df={bottomNavContainer:Dj,bottomNav:Oj,bottomNavBtn:Mj,bottomNavBtnActive:Pj},Vj=()=>{const n=To(),e=oi(),{lastVisitedPaths:t}=ot(l=>l.ui),a=e.pathname.includes("/settings")?ln.SETTINGS:e.pathname.includes("/dashboard")?ln.DASHBOARD:ln.ROSTER,s=l=>{if(a===l){l===ln.DASHBOARD&&n("/app/dashboard");return}const c=t[l];n(c||`/app/${l}`)};return T.jsx("nav",{className:Df.bottomNavContainer,children:T.jsx("div",{className:Df.bottomNav,children:H_.map(l=>T.jsxs("button",{className:`${Df.bottomNavBtn} ${a===l.id?Df.bottomNavBtnActive:""}`,onClick:()=>s(l.id),children:[T.jsx("span",{children:l.icon}),T.jsx("span",{children:l.label})]},l.id))})})},kj="_sideNav_wbcy2_1",Lj="_menuOpen_wbcy2_21",jj="_sidebarContent_wbcy2_27",Uj="_tabletSidebarHeader_wbcy2_34",zj="_sideMenuList_wbcy2_38",Bj="_sidenavMenuSubheading_wbcy2_43",Hj="_sideNavItem_wbcy2_67",Fj="_sideNavItemActive_wbcy2_95",qj="_sideEmoji_wbcy2_102",Gj="_loading_wbcy2_109",$j="_sidebarToggleButton_wbcy2_116",Kj="_sidebarFooter_wbcy2_117",Yj="_sidebarCollapsed_wbcy2_173",Qj="_adminOnlySectionWrapper_wbcy2_194",wt={sideNav:kj,menuOpen:Lj,sidebarContent:jj,tabletSidebarHeader:Uj,sideMenuList:zj,sidenavMenuSubheading:Bj,sideNavItem:Hj,sideNavItemActive:Fj,sideEmoji:qj,loading:Gj,sidebarToggleButton:$j,sidebarFooter:Kj,sidebarCollapsed:Yj,adminOnlySectionWrapper:Qj},Xj=()=>{var ue;const n=To(),e=oi(),t=Ld(),a=li(),{userData:s}=ot(G=>G.auth),{isDesktopSidebarExpanded:l,isMobileSidebarOpen:c,expandedTeams:d}=ot(G=>G.ui),{teams:m,fetched:g,loading:y}=ot(G=>G.teams),{fetched:E}=ot(G=>G.positions),S=e.pathname.includes("/settings")?ln.SETTINGS:e.pathname.includes("/dashboard")?ln.DASHBOARD:ln.ROSTER,{teamName:w,positionName:O,section:q}=t,k=O||q;P.useEffect(()=>{g||a(fo()),E||a(Sa())},[a,g,E]);const K=P.useCallback(G=>{n(G)},[n]),H=G=>{a(yj(G))},X=()=>{const G=H_.find(R=>R.id===S),A=G?G.label:"GIG ROSTER";return w&&k?`${w}  ${k}`:w||(k?`${A}  ${k}`:A)},se=[wt.sideNav,c?wt.menuOpen:"",l?"":wt.sidebarCollapsed].filter(Boolean).join(" ");return T.jsxs("aside",{className:se,children:[T.jsxs("div",{className:wt.sidebarContent,children:[T.jsxs("div",{className:wt.tabletSidebarHeader,children:[l&&T.jsx("h3",{children:X()}),T.jsx("button",{className:wt.sidebarToggleButton,onClick:()=>a(pj(!l)),"aria-label":l?"Collapse sidebar":"Expand sidebar",children:l?T.jsx(rj,{size:20}):T.jsx(aj,{size:20})})]}),T.jsxs("nav",{className:wt.sideMenuList,children:[S===ln.ROSTER&&y&&T.jsx("div",{className:`${wt.sideNavItem} ${wt.loading}`,children:"Loading teams..."}),S===ln.ROSTER?(ue=s==null?void 0:s.teams)==null?void 0:ue.map(G=>{var N,M;const A=m.find(V=>V.name===G);if(!A)return null;const R=s.teams.length===1,x=R||d.includes(A.name);return T.jsxs("div",{children:[!R&&T.jsxs("div",{className:`${wt.sidenavMenuSubheading} ${wt.sidenavMenuSubheadingClickable}`,style:{cursor:"pointer"},onClick:()=>{H(A.name),K(`/app/roster/${A.name}/All`)},children:[T.jsxs("div",{children:[A.emoji," ",l&&A.name]}),T.jsx("span",{className:wt.expandIcon,children:x?"":""})]}),x&&T.jsxs("div",{className:wt.sideNavSubItems,children:[T.jsxs("button",{className:`${wt.sideNavItem} ${wt.sideNavItemSub} ${k==="All"&&w===A.name?wt.sideNavItemActive:""}`,onClick:()=>{K(`/app/roster/${A.name}/All`),a(El(!1))},style:{borderLeft:k==="All"&&w===A.name?"4px solid var(--color-primary)":"4px solid transparent",backgroundColor:k==="All"&&w===A.name?"var(--background-toggle-on-transparent)":"transparent",color:k==="All"&&w===A.name?"var(--color-primary)":""},children:[T.jsx("span",{className:wt.sideEmoji,children:""})," ",l&&"All"]}),(M=(N=A.positions)==null?void 0:N.filter(V=>!V.parentId))==null?void 0:M.map(V=>{const D=k===V.name&&w===A.name;return T.jsxs("button",{className:`${wt.sideNavItem} ${wt.sideNavItemSub} ${D?wt.sideNavItemActive:""}`,onClick:()=>{K(`/app/roster/${A.name}/${V.name}`),a(El(!1))},style:{borderLeft:D?`4px solid ${V.colour}`:"4px solid transparent",backgroundColor:D?`${V.colour}15`:"transparent",color:D?V.colour:""},children:[T.jsx("span",{className:wt.sideEmoji,children:V.emoji})," ",l&&V.name]},V.name)}),A.allowAbsence!==!1&&T.jsxs("button",{className:`${wt.sideNavItem} ${wt.sideNavItemSub} ${k==="Absence"&&w===A.name?wt.sideNavItemActive:""}`,onClick:()=>{K(`/app/roster/${A.name}/Absence`),a(El(!1))},style:{borderLeft:k==="Absence"&&w===A.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:k==="Absence"&&w===A.name?"var(--background-toggle-off-transparent)":"transparent"},children:[T.jsx("span",{className:wt.sideEmoji,children:""})," ",l&&"Absence"]})]})]},A.name)}):FS.filter(G=>!G.adminOnly).map(G=>T.jsxs("button",{className:`${wt.sideNavItem} ${k===G.id?wt.sideNavItemActive:""}`,onClick:()=>{K(`/app/settings/${G.id}`),a(El(!1))},children:[T.jsx("span",{className:wt.sideEmoji,children:G.icon})," ",l&&G.label]},G.id))]})]}),(s==null?void 0:s.isAdmin)&&S===ln.SETTINGS&&T.jsxs("div",{className:wt.adminOnlySectionWrapper,children:[T.jsx("div",{className:wt.sidenavMenuSubheading,children:l&&T.jsx("h4",{children:"Admin Only"})}),FS.filter(G=>G.adminOnly).map(G=>T.jsxs("button",{className:`${wt.sideNavItem} ${k===G.id?wt.sideNavItemActive:""}`,onClick:()=>{K(`/app/settings/${G.id}`),a(El(!1))},children:[T.jsx("span",{className:wt.sideEmoji,children:G.icon})," ",l&&G.label]},G.id))]}),T.jsx("div",{className:wt.sidebarFooter,children:T.jsx(pm,{showText:l})})]})},Wj="_layoutWrapper_1iqp0_1",Jj="_innerWrapper_1iqp0_13",Zj="_mainContent_1iqp0_21",hl={layoutWrapper:Wj,innerWrapper:Jj,mainContent:Zj},eU=()=>{const n=li(),e=To(),t=oi(),a=Ld(),{userData:s}=ot(k=>k.auth),{teams:l}=ot(k=>k.teams),{isMobileSidebarOpen:c,isDesktopSidebarExpanded:d,lastVisitedPaths:m}=ot(k=>k.ui),g=t.pathname.includes("/settings")?ln.SETTINGS:t.pathname.includes("/dashboard")?ln.DASHBOARD:ln.ROSTER,{teamName:y,positionName:E,section:S}=a,w=E||S||null,O=g!==ln.DASHBOARD;P.useEffect(()=>{const k=g===ln.ROSTER&&!y,K=g===ln.SETTINGS&&!w;if(t.pathname.startsWith("/app/")&&!k&&!K&&g!==ln.DASHBOARD){const H=t.pathname+t.search;n(gj({tabId:g,path:H}))}},[t.pathname,t.search,g,y,w,n]),P.useEffect(()=>{var X;const k=t.pathname==="/app"||t.pathname==="/app/",K=g===ln.ROSTER&&!y,H=g===ln.SETTINGS&&!w;if(k)e(m[ln.DASHBOARD]||"/app/dashboard",{replace:!0});else if(K){const se=m[ln.ROSTER];if(se)e(se,{replace:!0});else if((X=s==null?void 0:s.teams)!=null&&X[0]&&l.length>0){const ue=l.find(G=>G.name===s.teams[0]);ue&&e(`/app/roster/${ue.name}/All`,{replace:!0})}}else if(H){const se=m[ln.SETTINGS];e(se||`/app/settings/${bl.PROFILE}`,{replace:!0})}},[g,y,w,s,l,e,t.pathname,t.search,m]);const q=()=>{const k=H_.find(H=>H.id===g),K=k?k.label:"GIG ROSTER";return y&&w?`${y}  ${w}`:y||(w?`${K}  ${w}`:K)};return T.jsxs("div",{className:`${hl.layoutWrapper} ${c?hl.menuOpen:""} ${d?hl.sidebarExpanded:hl.sidebarCollapsed}`,children:[O&&T.jsx(Xj,{}),T.jsxs("div",{className:hl.innerWrapper,children:[T.jsx(Nj,{title:q(),hasSideNav:O}),T.jsx("main",{className:hl.mainContent,children:T.jsx(AA,{})}),T.jsx(Vj,{})]})]})},tU="_rosterSaveFooter_1ce1v_1",nU="_saveFooterContent_1ce1v_23",rU="_changesLabel_1ce1v_32",iU="_saveFooterActions_1ce1v_37",aU="_saveBtn_1ce1v_42",sU="_cancelBtn_1ce1v_57",oU="_sidebarCollapsed_1ce1v_77",lU="_noSidebar_1ce1v_81",us={rosterSaveFooter:tU,saveFooterContent:nU,changesLabel:rU,saveFooterActions:iU,saveBtn:aU,cancelBtn:sU,sidebarCollapsed:oU,noSidebar:lU},eu=({label:n="You have unsaved changes",onSave:e,onCancel:t,isSaving:a,saveText:s="Save",discardText:l="Discard",hasSideNav:c=!0})=>{const{isDesktopSidebarExpanded:d}=ot(g=>g.ui),m=[us.rosterSaveFooter,c?"":us.noSidebar,!d&&c?us.sidebarCollapsed:""].filter(Boolean).join(" ");return T.jsx("div",{className:m,children:T.jsxs("div",{className:us.saveFooterContent,children:[T.jsx("span",{className:us.changesLabel,children:n}),T.jsxs("div",{className:us.saveFooterActions,children:[T.jsx("button",{className:us.cancelBtn,onClick:t,disabled:a,children:l}),T.jsx("button",{className:us.saveBtn,onClick:e,disabled:a,children:a?"Saving...":s})]})]})})},CC=n=>{const e=[];return Object.entries(n).forEach(([t,a])=>{a.forEach(s=>{e.push(`${t}|${s}`)})}),e},RC=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${a}`},Nl=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),uU={entries:{},dirtyEntries:{},loading:!1,saving:!1,error:null},mc=Br("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=$c(Fc(Ln,"roster")),a=await Yc(t),s={};return a.docs.forEach(l=>{const c=l.data(),d=c.updatedAt,m={...c,updatedAt:d&&typeof d=="object"&&"toMillis"in d?d.toMillis():d};s[l.id]={...m,id:l.id}}),s}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),pc=Br("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=w1(Ln),a=Date.now(),s={};return Object.values(n).forEach(l=>{const c=ai(Ln,"roster",l.id),d={...l,updatedAt:a};t.set(c,d),s[l.id]=d}),await t.commit(),s}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),IC=wo({name:"roster",initialState:uU,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:a,userIdentifier:s,positionGroupNames:l,maxConflict:c}=e.payload,d=n.dirtyEntries[t]||n.entries[t];let m;d?m=JSON.parse(JSON.stringify(d)):m={id:t,date:t,teams:{},absence:{}},m.teams[a]||(m.teams[a]={});const g=m.teams[a][s]||[],y=l.findIndex(O=>g.includes(O)),E=y>=0?l[y]:null;let S=null;E===null?S=l[0]:y<l.length-1?S=l[y+1]:S=null;const w=g.filter(O=>!l.includes(O));if(S)if(w.length<c)w.push(S);else{n.error=`User already has ${c} assignment(s) in this team.`;return}w.length===0?delete m.teams[a][s]:m.teams[a][s]=w,n.dirtyEntries[t]=m},updateLocalEventName(n,e){const{date:t,eventName:a}=e.payload,s=n.dirtyEntries[t]||n.entries[t];let l;s?l=JSON.parse(JSON.stringify(s)):l={id:t,date:t,teams:{},absence:{}},l.eventName=a,n.dirtyEntries[t]=l},resetRosterEdits(n){n.dirtyEntries={},n.error=null},updateLocalAbsence(n,e){var m;const{date:t,userIdentifier:a,reason:s,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let d;c?d=JSON.parse(JSON.stringify(c)):d={id:t,date:t,teams:{},absence:{}},l?d.absence[a]={reason:s??((m=d.absence[a])==null?void 0:m.reason)??""}:delete d.absence[a],n.dirtyEntries[t]=d}},extraReducers:n=>{n.addCase(mc.pending,e=>{e.loading=!0,e.error=null}).addCase(mc.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(mc.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(pc.pending,e=>{e.saving=!0,e.error=null}).addCase(pc.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(pc.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:U9,updateLocalAssignment:cU,updateLocalEventName:hU,resetRosterEdits:xC,updateLocalAbsence:qS}=IC.actions,fU=IC.reducer,Qf=(n,e,t)=>{const a=[],s=new Date;s.setHours(0,0,0,0);const l=s.getFullYear(),c=e||l,d=t||l,m={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g=n.map(w=>m[w]);let y;c===l?y=new Date(s):y=new Date(c,0,1),y.setHours(0,0,0,0);const E=new Date(d,11,31);E.setHours(23,59,59,999);const S=new Date(y);for(;S.getTime()<=E.getTime();)g.includes(S.getDay())&&a.push(new Date(S)),S.setDate(S.getDate()+1);return a.sort((w,O)=>w.getTime()-O.getTime()),a.map(w=>RC(w))},dU=(n,e,t=5)=>{const a=[],s=new Date(e);s.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(m=>l[m]),d=new Date(s);for(;a.length<t;){d.setDate(d.getDate()-1),c.includes(d.getDay())&&a.push(new Date(d));const m=new Date(s);if(m.setFullYear(m.getFullYear()-1),d<m)break}return a.map(m=>RC(m)).sort()},mU={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},Xf=Br("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=Fc(Ln,"users"),a=$c(t,S_("teams","array-contains",n)),s=await Yc(a),l=[];return s.forEach(c=>{l.push(c.data())}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),Wf=Br("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:a})=>{if(!n||!e)return[];try{const c=a().positions.positions.filter(w=>w.parentId===e),m=[e,...c.map(w=>w.name)].map(w=>`${n}|${w}`),g=Fc(Ln,"users"),y=$c(g,S_("indexedAssignments","array-contains-any",m)),E=await Yc(y),S=[];return E.forEach(w=>{S.push(w.data())}),S.sort((w,O)=>(w.name||"").localeCompare(O.name||""))}catch(s){return console.error("Error fetching users:",s),t("Failed to load users.")}}),Jf=Br("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=ai(Ln,"metadata","teams"),a=await Kc(t);if(a.exists()){const s=a.data();return(Array.isArray(s.list)?s.list.map(d=>({...d,preferredDays:d.preferredDays||[],positions:d.positions||[]})):[]).find(d=>d.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),NC=wo({name:"rosterView",initialState:mU,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=dU(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=Qf(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,a=Qf(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...a]}}},extraReducers:n=>{n.addCase(Wf.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(Wf.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(Wf.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(Xf.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(Xf.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(Xf.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(Jf.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(Jf.fulfilled,(e,t)=>{var a;e.currentTeamData=t.payload,(a=t.payload)!=null&&a.preferredDays&&(e.rosterDates=Qf(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(Jf.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:pU,resetToUpcomingDates:gU,loadNextYearDates:yU}=NC.actions,_U=NC.reducer,vU="_dashboardContainer_19qve_1",EU="_dashboardHeader_19qve_10",TU="_dashboardHeaderActions_19qve_24",bU="_clearPastBtn_19qve_32",SU="_eventNameContainer_19qve_48",AU="_dashboardEventNameInput_19qve_55",wU="_dashboardEventNameInputHasEvent_19qve_79",CU="_carouselOuterWrapper_19qve_90",RU="_eventsCarouselTrack_19qve_98",IU="_eventCardWrapper_19qve_112",xU="_peek_19qve_123",NU="_active_19qve_129",DU="_eventCardDate_19qve_135",OU="_dashboardTodayBadge_19qve_147",MU="_teamCardsContainer_19qve_158",PU="_teamEventCard_19qve_166",VU="_dashboardThemeToggle_19qve_174",kU="_teamEventHeader_19qve_178",LU="_teamCardEmoji_19qve_197",jU="_teamCardName_19qve_201",UU="_copyRosterBtn_19qve_205",zU="_copyRosterBtnSuccess_19qve_226",BU="_teamEventDetails_19qve_232",HU="_posAssignmentRow_19qve_238",FU="_posEmojiLabel_19qve_244",qU="_assignedNames_19qve_250",GU="_unassigned_19qve_256",$U="_meTag_19qve_264",KU="_carouselPagination_19qve_286",YU="_dashboardEmpty_19qve_295",Ot={dashboardContainer:vU,dashboardHeader:EU,dashboardHeaderActions:TU,clearPastBtn:bU,eventNameContainer:SU,dashboardEventNameInput:AU,dashboardEventNameInputHasEvent:wU,carouselOuterWrapper:CU,eventsCarouselTrack:RU,eventCardWrapper:IU,peek:xU,active:NU,eventCardDate:DU,dashboardTodayBadge:OU,teamCardsContainer:MU,teamEventCard:PU,dashboardThemeToggle:VU,teamEventHeader:kU,teamCardEmoji:LU,teamCardName:jU,copyRosterBtn:UU,copyRosterBtnSuccess:zU,teamEventDetails:BU,posAssignmentRow:HU,posEmojiLabel:FU,assignedNames:qU,unassigned:GU,meTag:$U,carouselPagination:KU,dashboardEmpty:YU},QU=()=>{const n=li(),[e,t]=pD(),a=e.get("date"),{userData:s}=ot(oe=>oe.auth),{teams:l}=ot(oe=>oe.teams),{entries:c,dirtyEntries:d,loading:m,saving:g}=ot(oe=>oe.roster),{positions:y}=ot(oe=>oe.positions),[E,S]=P.useState([]),[w,O]=P.useState(!1),[q,k]=P.useState(null),[K,H]=P.useState(0),[X,se]=P.useState(0),[ue,G]=P.useState(!1),A=P.useRef(null),R=P.useRef(!1),x=Object.keys(d).length>0;P.useEffect(()=>{n(mc())},[n]),P.useEffect(()=>{const oe=A.current;if(!oe)return;const Ee=new ResizeObserver(be=>{for(const Ne of be){const Be=Ne.contentRect.width;Be>0&&se(Be)}});return Ee.observe(oe),()=>Ee.disconnect()},[m,w]);const N=P.useMemo(()=>{const oe=Nl();if(!(s!=null&&s.teams)||l.length===0)return[];const Ee=l.filter(Be=>s.teams.includes(Be.name)),be=new Set;Ee.forEach(Be=>{Qf(Be.preferredDays).forEach(yt=>be.add(yt))});const Ne=Array.from(be).sort();return a&&a<oe?[a]:Ne.filter(Be=>{const $e=Be;if(a===$e)return!0;const yt=c[$e]||d[$e];return yt?Ee.some(Lt=>{var tn;const dt=((tn=yt.teams)==null?void 0:tn[Lt.name])||{};return Object.values(dt).some(fn=>fn.length>0)}):!1})},[s,l,c,d,a]);P.useEffect(()=>{if(N.length===0||!A.current||m||X===0)return;const oe=A.current,Ee=(be,Ne)=>{const Be=oe.offsetWidth||X;Be!==0&&(oe.style.scrollSnapType="none",oe.scrollTo({left:Be*be,behavior:Ne?"smooth":"auto"}),setTimeout(()=>{oe&&(oe.style.scrollSnapType="x mandatory"),G(!0)},50),H(be),R.current=!0)};if(a){const be=N.findIndex(Ne=>Ne===a);if(be>=0){const Ne=Math.round(oe.scrollLeft/(oe.offsetWidth||X||1));!R.current||Ne!==be?requestAnimationFrame(()=>{Ee(be,R.current)}):G(!0)}else G(!0)}else oe.scrollLeft!==0?Ee(0,!0):G(!0),R.current=!0},[a,N,m,X]);const M=()=>{t({},{replace:!0})};P.useEffect(()=>{(async()=>{if(!(!(s!=null&&s.teams)||s.teams.length===0)){O(!0);try{const Ee=Fc(Ln,"users"),be=$c(Ee,S_("teams","array-contains-any",s.teams)),Ne=await Yc(be),Be=[];Ne.forEach($e=>Be.push($e.data())),S(Be)}catch(Ee){console.error("Error fetching users for dashboard:",Ee)}finally{O(!1)}}})()},[s==null?void 0:s.teams]);const V=P.useCallback(oe=>{if(!oe||!(s!=null&&s.teams)||l.length===0)return null;const Ee=oe,be=d[Ee]||c[Ee],$e=l.filter(yt=>s.teams.includes(yt.name)).sort((yt,Lt)=>{const dt=s.teams.indexOf(yt.name),tn=s.teams.indexOf(Lt.name);return dt-tn}).map(yt=>{var Hr;const Lt=((Hr=be==null?void 0:be.teams)==null?void 0:Hr[yt.name])||{},dt=[],tn=yt.positions.map(an=>an.name);let fn=0;return tn.forEach(an=>{const Bn=y.find(lt=>lt.name===an),Sr=[];Object.entries(Lt).forEach(([lt,Nn])=>{if(Nn.includes(an)){const wi=E.find(ui=>ui.email===lt);wi?Sr.push(wi):Sr.push({email:lt,name:lt}),fn++}});const Pt=[...Sr].sort((lt,Nn)=>Bn!=null&&Bn.sortByGender&&lt.gender!==Nn.gender?lt.gender==="Male"?-1:Nn.gender==="Male"?1:(lt.gender||"").localeCompare(Nn.gender||""):(lt.name||"").localeCompare(Nn.name||""));dt.push({posName:an,emoji:(Bn==null?void 0:Bn.emoji)||"",assignedUsers:Pt.map(lt=>({name:lt.name||lt.email||"Unknown",isMe:lt.email===s.email}))})}),{teamName:yt.name,teamEmoji:yt.emoji,positions:dt,hasAssignments:fn>0}}).filter(yt=>yt.hasAssignments);return $e.length>0?$e:null},[c,d,s,l,y,E]),D=(oe,Ee,be,Ne)=>{const $e=new Date(oe).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"});let yt=`${be} ${Ee} - ${$e}
`;Ne.forEach(Lt=>{const dt=Lt.assignedUsers.length>0?Lt.assignedUsers.map(tn=>tn.name).join(", "):"-";yt+=`${Lt.emoji}: ${dt}
`}),navigator.clipboard.writeText(yt).then(()=>{const Lt=`${oe}-${Ee}`;k(Lt),setTimeout(()=>k(null),2e3)})},me=()=>{if(!A.current)return;const oe=A.current,Ee=oe.offsetWidth,be=Math.round(oe.scrollLeft/Ee);if(be!==K&&N[be]){H(be);const Ne=N[be];if(a!==Ne){const Be=Nl();be===0&&Be===Ne?t({},{replace:!0}):t({date:Ne},{replace:!0})}}},ye=(oe,Ee)=>{n(hU({date:oe,eventName:Ee}))},z=()=>{n(pc(d))},ne=()=>{n(xC())};if(m||w)return T.jsx(Zl,{});if(N.length===0)return T.jsxs("div",{className:Ot.dashboardEmpty,children:[T.jsx("h2",{children:"No upcoming events found"}),T.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const ce=N[K],De=Nl(),Ue=ce&&ce<De,U=Ue?"Previous Event":"Upcoming Events",ie=oe=>new Date(oe).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),Te=(oe,Ee=!1)=>{const be=V(oe);return be?T.jsx("div",{className:Ot.teamCardsContainer,children:be.map(Ne=>{const Be=q===`${oe}-${Ne.teamName}`;return T.jsxs("div",{className:Ot.teamEventCard,children:[T.jsxs("div",{className:Ot.teamEventHeader,children:[T.jsxs("h3",{children:[T.jsx("span",{className:Ot.teamCardEmoji,children:Ne.teamEmoji}),T.jsx("span",{className:Ot.teamCardName,children:Ne.teamName})]}),!Ee&&T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(pm,{className:Ot.dashboardThemeToggle}),T.jsx("button",{className:`${Ot.copyRosterBtn} ${Be?Ot.copyRosterBtnSuccess:""}`,onClick:()=>D(oe,Ne.teamName,Ne.teamEmoji,Ne.positions),title:"Copy to clipboard",children:Be?T.jsxs(T.Fragment,{children:[T.jsx(YL,{size:16})," Copied"]}):T.jsxs(T.Fragment,{children:[T.jsx(XL,{size:16})," Copy"]})})]})]}),T.jsx("div",{className:Ot.teamEventDetails,children:Ne.positions.map($e=>T.jsxs("div",{className:Ot.posAssignmentRow,children:[T.jsx("span",{className:Ot.posEmojiLabel,title:$e.posName,children:$e.emoji}),T.jsx("span",{className:`${Ot.assignedNames} ${$e.assignedUsers.length===0?Ot.unassigned:""}`,children:$e.assignedUsers.length>0?$e.assignedUsers.map((yt,Lt)=>T.jsxs(P.Fragment,{children:[yt.name,yt.isMe&&T.jsx("span",{className:Ot.meTag,children:"Me"}),Lt<$e.assignedUsers.length-1?", ":""]},`${yt.name}-${Lt}`)):"Unassigned"})]},$e.posName))})]},Ne.teamName)})}):null};return T.jsxs("div",{className:Ot.dashboardContainer,children:[T.jsxs("div",{className:Ot.dashboardHeader,children:[T.jsx("h1",{children:U}),T.jsx("div",{className:Ot.dashboardHeaderActions,children:Ue&&T.jsx("button",{className:Ot.clearPastBtn,onClick:M,children:"Reset to upcoming"})})]}),T.jsx("div",{className:Ot.carouselOuterWrapper,style:{opacity:ue?1:0,transition:"opacity 0.3s ease-in-out"},children:T.jsx("div",{className:Ot.eventsCarouselTrack,ref:A,onScroll:me,children:N.map((oe,Ee)=>{const be=oe,Ne=d[be]||c[be],Be=(Ne==null?void 0:Ne.eventName)||"";return T.jsxs("div",{className:`${Ot.eventCardWrapper} ${Ee===K?Ot.active:Ot.peek}`,children:[T.jsx("div",{className:Ot.eventNameContainer,children:T.jsx("input",{type:"text",className:`${Ot.dashboardEventNameInput} ${Be?Ot.dashboardEventNameInputHasEvent:""}`,placeholder:"Event name (e.g. Easter Sunday)",value:Be,onChange:$e=>ye(oe,$e.target.value),disabled:Ee!==K})}),T.jsxs("div",{className:Ot.eventCardDate,children:[ie(oe),oe===De&&T.jsx("span",{className:Ot.dashboardTodayBadge,children:"TODAY"})]}),Te(oe,Ee!==K)]},oe)})})}),T.jsxs("div",{className:Ot.carouselPagination,children:[K+1," / ",N.length]}),x&&T.jsx(eu,{label:"Unsaved event labels",saveText:"Save Changes",onSave:z,onCancel:ne,isSaving:g,hasSideNav:!1})]})},XU="_button_1huns_1",WU="_primary_1huns_26",JU="_secondary_1huns_31",ZU="_icon_1huns_42",e3="_small_1huns_48",Of={button:XU,primary:WU,secondary:JU,delete:"_delete_1huns_36",icon:ZU,small:e3},ni=({variant:n="primary",size:e="medium",isIcon:t=!1,className:a="",children:s,...l})=>{const c=[Of.button,Of[n],e==="small"?Of.small:"",t?Of.icon:"",a].filter(Boolean).join(" ");return T.jsx("button",{className:c,...l,children:s})},t3="_pillGroup_ti99d_1",n3="_pillGroupNowrap_ti99d_9",r3="_pill_ti99d_1",i3="_pillActive_ti99d_35",a3="_pillDisabled_ti99d_40",s3="_pillText_ti99d_61",Sl={pillGroup:t3,pillGroupNowrap:n3,pill:r3,pillActive:i3,pillDisabled:a3,pillText:s3},Dl=({children:n,nowrap:e})=>T.jsx("div",{className:`${Sl.pillGroup} ${e?Sl.pillGroupNowrap:""}`,children:n}),br=({colour:n,isDropdown:e,isActive:t,isDisabled:a,minWidth:s,onClick:l,children:c})=>{const[d,m]=P.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),T.jsxs("div",{className:`${Sl.pill} ${Sl.pillText} ${t?Sl.pillActive:""} ${a?Sl.pillDisabled:""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:s?`${s}px`:"fit-content"},onClick:g=>{a||(m(y=>!y),l&&l(g))},children:[c,e&&T.jsx(TC,{style:{rotate:d?"90deg":"0"}})]})},o3="_settingsSection_5m9oe_1",l3="_sectionLabel_5m9oe_7",u3="_subSectionGroup_5m9oe_17",c3="_subSectionHeader_5m9oe_21",h3="_formGroup_5m9oe_31",f3="_summaryButton_5m9oe_35",d3="_summaryPrimary_5m9oe_57",m3="_summarySeparator_5m9oe_66",p3="_summarySecondary_5m9oe_73",g3="_summaryEmoji_5m9oe_78",y3="_remainingCount_5m9oe_82",Rn={settingsSection:o3,sectionLabel:l3,subSectionGroup:u3,subSectionHeader:c3,formGroup:h3,summaryButton:f3,summaryPrimary:d3,summarySeparator:m3,summarySecondary:p3,summaryEmoji:g3,remainingCount:y3},DC=({selectedTeams:n,teamPositions:e,onToggleTeam:t,onTogglePosition:a,onMoveTeam:s,availableTeams:l,globalPositions:c})=>T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:Rn.formGroup,children:[T.jsx("label",{className:Rn.sectionLabel,children:"Teams"}),T.jsx(Dl,{children:l.map(d=>{const m=n.includes(d.name);return T.jsxs(br,{onClick:()=>t(d.name),isActive:m,children:[T.jsx("span",{children:d.emoji})," ",d.name]},d.name)})})]}),n.length>0&&T.jsxs("div",{className:Rn.settingsSection,children:[T.jsx("label",{className:Rn.sectionLabel,children:"Positions per Team"}),n.map((d,m)=>{var E;const g=l.find(S=>S.name===d);if(!g)return null;const y=((E=g.positions)==null?void 0:E.filter(S=>{const w=c.find(O=>O.name===S.name);return!S.parentId&&!(w!=null&&w.isCustom)}))||[];return T.jsxs("div",{className:Rn.subSectionGroup,children:[T.jsxs("div",{className:Rn.subSectionHeader,style:{justifyContent:"space-between"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.emoji," ",g.name]}),s&&T.jsxs("div",{style:{display:"flex",gap:"4px"},children:[T.jsx(ni,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(d,"up"),disabled:m===0,children:""}),T.jsx(ni,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(d,"down"),disabled:m===n.length-1,children:""})]})]}),y.length>0?T.jsx(Dl,{children:y.map(S=>{var O;const w=(O=e[d])==null?void 0:O.includes(S.name);return T.jsxs(br,{onClick:()=>a(d,S.name),isActive:w,colour:S.colour,children:[T.jsx("span",{children:S.emoji})," ",S.name]},S.name)})}):T.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-dim)",margin:"8px 0"},children:"No assignable positions for this team."})]},d)})]})]}),_3={firebaseUser:null,userData:null,loading:!0,error:null},Zf=Br("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=ai(Ln,"users",n),a=await Kc(t);if(!a.exists()){const s="chris.sm.kang542@gmail.com",l=Hl.currentUser,c=(l==null?void 0:l.email)===s,d={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await w_(t,d),d}return a.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),ed=Br("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const a=ai(Ln,"users",n),s={...e};return s.teamPositions&&(s.indexedAssignments=CC(s.teamPositions)),await S1(a,s),s}catch(a){return t(a instanceof Error?a.message:"Failed to update profile")}}),OC=wo({name:"auth",initialState:_3,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(Zf.pending,e=>{e.loading=!0,e.error=null}).addCase(Zf.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(Zf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(ed.pending,e=>{e.error=null}).addCase(ed.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(ed.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:v3,setUserData:E3,setLoading:z9,logout:T3}=OC.actions,b3=OC.reducer,S3="_formGroup_163vy_1",A3="_formInput_163vy_16",w3="_formSelect_163vy_52",C3="_colorInput_163vy_86",R3="_fieldHint_163vy_104",_a={formGroup:S3,formInput:A3,formSelect:w3,colorInput:C3,fieldHint:R3},I3="_profileCard_1v6ck_1",x3="_profileReadonly_1v6ck_19",N3="_actionContainer_1v6ck_67",Fg={profileCard:I3,profileReadonly:x3,actionContainer:N3},MC=({className:n})=>{const e=li(),{userData:t,firebaseUser:a}=ot(N=>N.auth),{teams:s,fetched:l}=ot(N=>N.teams),{positions:c,fetched:d}=ot(N=>N.positions),[m,g]=P.useState((t==null?void 0:t.name)||""),[y,E]=P.useState((t==null?void 0:t.gender)||""),[S,w]=P.useState((t==null?void 0:t.isActive)??!0),[O,q]=P.useState((t==null?void 0:t.teams)||[]),[k,K]=P.useState((t==null?void 0:t.teamPositions)||{}),[H,X]=P.useState("idle");P.useEffect(()=>{l||e(fo()),d||e(Sa())},[e,l,d]);const se=P.useMemo(()=>{if(!t)return!1;const N={name:m,gender:y,isActive:S,teams:O,teamPositions:k},M={name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}};return JSON.stringify(N)!==JSON.stringify(M)},[m,y,S,O,k,t]),ue=async()=>{if(a){X("saving");try{const N={name:m,gender:y,isActive:S,teams:O,teamPositions:k};await e(ed({uid:a.uid,data:N})).unwrap(),X("success"),setTimeout(()=>X("idle"),2e3)}catch(N){console.error(N),X("idle")}}},G=()=>{t&&(g(t.name||""),E(t.gender||""),w(t.isActive??!0),q(t.teams||[]),K(t.teamPositions||{}))},A=N=>{q(M=>{const V=M.includes(N),D=V?M.filter(me=>me!==N):[...M,N];return K(me=>{const ye={...me};return V?delete ye[N]:ye[N]||(ye[N]=[]),ye}),D})},R=(N,M)=>{K(V=>{const D=V[N]||[],me=D.includes(M)?D.filter(ye=>ye!==M):[...D,M];return{...V,[N]:me}})},x=(N,M)=>{const V=O.indexOf(N);if(V===-1)return;const D=M==="up"?V-1:V+1;if(D<0||D>=O.length)return;const me=[...O];[me[V],me[D]]=[me[D],me[V]],q(me)};return t?T.jsxs("section",{className:`${Fg.profileCard} ${n||""}`,children:[T.jsx("div",{className:Fg.profileReadonly,children:T.jsxs("p",{children:[T.jsx("strong",{children:"Email:"})," ",t.email]})}),T.jsxs("div",{className:_a.formGroup,children:[T.jsx("label",{children:"Name"}),T.jsx("input",{type:"text",value:m,onChange:N=>g(N.target.value),className:_a.formInput})]}),T.jsxs("div",{className:_a.formGroup,children:[T.jsx("label",{children:"Gender"}),T.jsx(Dl,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(N=>T.jsx(br,{colour:N.colour,onClick:()=>E(N.value),isActive:y===N.value,children:N.value},N.value))})]}),T.jsx(DC,{selectedTeams:O,teamPositions:k,onToggleTeam:A,onTogglePosition:R,onMoveTeam:x,availableTeams:s,globalPositions:c}),T.jsxs("div",{className:_a.formGroup,children:[T.jsx("label",{children:"Availability Status"}),T.jsx(br,{colour:S?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>w(!S),isActive:!0,children:S?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),T.jsx("p",{className:_a.fieldHint,children:"Turn off if you want to be hidden from the roster."})]}),T.jsx("div",{className:Fg.actionContainer,children:T.jsx(ni,{variant:"delete",onClick:()=>Hl.signOut(),children:"Logout"})}),se&&T.jsx(eu,{label:"Unsaved profile changes",saveText:"Update Profile",onSave:ue,onCancel:G,isSaving:H==="saving"})]}):T.jsx("div",{children:"Loading profile..."})},D3="_guestContainer_1m4dd_1",O3="_profileCardOverride_1m4dd_14",M3="_guestHeader_1m4dd_21",P3="_brandTitle_1m4dd_28",V3="_guestThemeToggleContainer_1m4dd_32",k3="_pendingLabel_1m4dd_38",fl={guestContainer:D3,profileCardOverride:O3,guestHeader:M3,brandTitle:P3,guestThemeToggleContainer:V3,pendingLabel:k3},L3=()=>{const{userData:n,firebaseUser:e,loading:t}=ot(a=>a.auth);return t?T.jsx(Fl,{}):e?n?n.isApproved?T.jsx(ys,{to:"/app",replace:!0}):T.jsxs("div",{className:fl.guestContainer,children:[T.jsxs("header",{className:fl.guestHeader,children:[T.jsx("h2",{className:fl.brandTitle,children:"God is Good"}),T.jsx("p",{className:fl.pendingLabel,children:"PENDING ADMIN APPROVAL"}),T.jsx("div",{className:fl.guestThemeToggleContainer,children:T.jsx(pm,{})})]}),T.jsx(MC,{className:fl.profileCardOverride})]}):T.jsx(Fl,{}):T.jsx(ys,{to:"/login",replace:!0})},j3="_loginContainer_12x6v_1",U3="_loginHeader_12x6v_12",z3="_brandTitle_12x6v_16",B3="_brandSubtitle_12x6v_24",H3="_loginButtonContainer_12x6v_33",F3="_loginButton_12x6v_33",q3="_google_12x6v_57",io={loginContainer:j3,loginHeader:U3,brandTitle:z3,brandSubtitle:B3,loginButtonContainer:H3,loginButton:F3,google:q3},G3=()=>{const{firebaseUser:n,loading:e}=ot(a=>a.auth),t=()=>MV(Hl,Ik);return e?null:n?T.jsx(ys,{to:"/",replace:!0}):T.jsxs("div",{className:io.loginContainer,children:[T.jsxs("header",{className:io.loginHeader,children:[T.jsx("h1",{className:io.brandTitle,children:"God is Good"}),T.jsx("p",{className:io.brandSubtitle,children:"Worship Team Roster"})]}),T.jsx("div",{className:io.loginButtonContainer,children:T.jsxs("button",{onClick:t,className:`${io.loginButton} ${io.google}`,children:[T.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},$3="_rosterTableContainer_1x47q_1",K3="_rosterTable_1x47q_1",Y3="_stickyCol_1x47q_35",Q3="_rosterTableHeaderCell_1x47q_58",X3="_rosterTableLoading_1x47q_63",W3="_rosterTableError_1x47q_64",J3="_rosterTableWrapper_1x47q_71",Z3="_loadMoreFooter_1x47q_78",e6="_loadNextYearBtn_1x47q_84",t6="_clickable_1x47q_102",n6="_disabled_1x47q_111",r6="_dateCell_1x47q_117",i6="_rosterCell_1x47q_125",a6="_genderDividerCell_1x47q_130",s6="_assignedPositions_1x47q_144",o6="_posEmoji_1x47q_151",l6="_otherTeamEmoji_1x47q_155",u6="_dateHeaderContent_1x47q_161",c6="_dateHeaderActions_1x47q_168",h6="_loadPrevBtn_1x47q_173",f6="_resetDatesBtn_1x47q_195",d6="_peekHeader_1x47q_205",m6="_peekSelector_1x47q_210",p6="_peekCell_1x47q_227",g6="_stickyRight_1x47q_237",y6="_clickableHeader_1x47q_248",_6="_hiddenMembersBar_1x47q_258",v6="_hiddenMembersLabel_1x47q_270",E6="_hiddenMembersList_1x47q_278",T6="_unhidePill_1x47q_284",b6="_absentStrike_1x47q_318",S6="_pastDate_1x47q_323",A6="_noData_1x47q_327",w6="_closestNextDateRow_1x47q_339",C6="_todayDate_1x47q_340",R6="_dateCellContent_1x47q_358",I6="_highlightedHeader_1x47q_382",x6="_highlightedCell_1x47q_387",N6="_specialEventDot_1x47q_391",D6="_rosterTodayDot_1x47q_402",O6="_absentCell_1x47q_413",M6="_absenceInputContainer_1x47q_417",P6="_absenceReasonInput_1x47q_424",V6="_removeAbsenceBtn_1x47q_447",k6="_absenceRosterCell_1x47q_467",L6="_genderLabel_1x47q_471",j6="_focused_1x47q_478",U6="_viewToggleBar_1x47q_500",z6="_toggleBtn_1x47q_511",B6="_activeToggle_1x47q_531",H6="_allViewPositionHeader_1x47q_536",F6="_allViewPositionName_1x47q_543",q6="_headerActions_1x47q_549",G6="_headerActionBtn_1x47q_556",$6="_removeHeaderBtn_1x47q_580",K6="_assignedUsersText_1x47q_585",Y6="_meTag_1x47q_591",Q6="_isMe_1x47q_613",X6="_headerInput_1x47q_622",W6="_addColumnBtn_1x47q_648",Q={rosterTableContainer:$3,rosterTable:K3,stickyCol:Y3,rosterTableHeaderCell:Q3,rosterTableLoading:X3,rosterTableError:W3,rosterTableWrapper:J3,loadMoreFooter:Z3,loadNextYearBtn:e6,clickable:t6,disabled:n6,dateCell:r6,rosterCell:i6,genderDividerCell:a6,assignedPositions:s6,posEmoji:o6,otherTeamEmoji:l6,dateHeaderContent:u6,dateHeaderActions:c6,loadPrevBtn:h6,resetDatesBtn:f6,peekHeader:d6,peekSelector:m6,peekCell:p6,stickyRight:g6,clickableHeader:y6,hiddenMembersBar:_6,hiddenMembersLabel:v6,hiddenMembersList:E6,unhidePill:T6,absentStrike:b6,pastDate:S6,noData:A6,closestNextDateRow:w6,todayDate:C6,dateCellContent:R6,highlightedHeader:I6,highlightedCell:x6,specialEventDot:N6,rosterTodayDot:D6,absentCell:O6,absenceInputContainer:M6,absenceReasonInput:P6,removeAbsenceBtn:V6,absenceRosterCell:k6,genderLabel:L6,focused:j6,viewToggleBar:U6,toggleBtn:z6,activeToggle:B6,allViewPositionHeader:H6,allViewPositionName:F6,headerActions:q6,headerActionBtn:G6,removeHeaderBtn:$6,assignedUsersText:K6,meTag:Y6,isMe:Q6,headerInput:X6,addColumnBtn:W6},J6=()=>{const n=li(),e=To(),{teamName:t,positionName:a}=Ld(),{userData:s}=ot(F=>F.auth),{users:l,allTeamUsers:c,rosterDates:d,currentTeamData:m,loadingUsers:g,loadingTeam:y,loadingAllTeamUsers:E,error:S}=ot(F=>F.rosterView),{entries:w,dirtyEntries:O,saving:q,error:k}=ot(F=>F.roster),{positions:K,isDirty:H}=ot(F=>F.positions),{teams:X}=ot(F=>F.teams),{hiddenUsers:se,rosterAllViewMode:ue}=ot(F=>F.ui),[G,A]=P.useState(null),[R,x]=P.useState(null),N=Object.keys(O).length>0,M=N||H,V=a==="Absence",D=a==="All",me=P.useMemo(()=>K.find(F=>F.name===a),[K,a]),ye=P.useMemo(()=>m?m.positions.filter(F=>F.name!==a):[],[m,a]),z=P.useMemo(()=>{var F;return!t||!a?[]:((F=se[t])==null?void 0:F[a])||[]},[se,t,a]),ne=P.useMemo(()=>c.filter(F=>{var we;return!F.isActive||!t?!1:(((we=F.teamPositions)==null?void 0:we[t])||[]).length>0}),[c,t]),ce=P.useMemo(()=>{const F=ne.map(ve=>({id:ve.email||"",name:ve.name||"",isUser:!0,gender:ve.gender}));if(!m)return F;const he=m.positions.map(ve=>ve.name),we=Array.from(new Set(K.filter(ve=>he.includes(ve.name)&&ve.isCustom).flatMap(ve=>ve.customLabels||[]).map(ve=>ve.trim()).filter(ve=>ve!==""))).map(ve=>({id:ve,name:ve,isUser:!1}));return[...F,...we]},[ne,m,K]),De=P.useMemo(()=>{const F=l.filter(he=>he.email&&!z.includes(he.email)&&he.isActive);return me!=null&&me.sortByGender?F.sort((he,we)=>he.gender===we.gender?(he.name||"").localeCompare(we.name||""):he.gender==="Male"?-1:we.gender==="Male"?1:(he.gender||"").localeCompare(we.gender||"")):F},[l,me,z]),Ue=P.useMemo(()=>{if(!(me!=null&&me.sortByGender)||De.length===0)return-1;const F=De.findIndex(he=>he.gender==="Female");return F>0&&F<De.length?F:-1},[me,De]),U=F=>{!t||!a||n(_j({teamName:t,positionName:a,userEmail:F}))},ie=()=>{n(pU())},Te=()=>{n(gU())},oe=()=>{n(yU())},Ee=F=>{be(F)&&e(`/app/dashboard?date=${F}`)},be=P.useCallback(F=>{const he=F.split("T")[0],we=O[he]||w[he];return we?Object.values(we.teams).some(ve=>Object.values(ve).some(xe=>xe.length>0)):!1},[w,O]),Ne=P.useCallback(F=>{if(!R||!t)return[];const he=F.split("T")[0],we=O[he]||w[he];return!we||!we.teams[t]?[]:Object.entries(we.teams[t]).filter(([,ve])=>ve.includes(R)).map(([ve])=>{const xe=c.find(Re=>Re.email===ve);return(xe==null?void 0:xe.name)||ve})},[R,t,O,w,c]);P.useEffect(()=>{n(mc())},[n]),P.useEffect(()=>{a&&t&&!["Absence","All"].includes(a)&&n(Wf({teamName:t,positionName:a}))},[a,t,n]),P.useEffect(()=>{t&&(n(Jf(t)),n(Xf(t)))},[t,n]);const Be=P.useCallback((F,he)=>{const we=F,ve=O[we]||w[we];return!!(ve&&ve.absence&&ve.absence[he])},[O,w]),$e=P.useCallback((F,he)=>{var xe,Re;const we=F,ve=O[we]||w[we];return((Re=(xe=ve==null?void 0:ve.absence)==null?void 0:xe[he])==null?void 0:Re.reason)||""},[O,w]),yt=P.useCallback((F,he)=>{if(!t||!a||a==="Absence")return!1;if(Be(F,he))return!0;const we=F,ve=O[we]||w[we],xe=X.find(st=>st.name===t),Re=(xe==null?void 0:xe.maxConflict)||1;if(!ve||!ve.teams[t]||!ve.teams[t][he])return!1;const mt=ve.teams[t][he],Fe=K.filter(st=>st.parentId===a),ht=[a,...Fe.map(st=>st.name)];return mt.some(st=>ht.includes(st))?!1:mt.length>=Re},[t,a,Be,O,w,X,K]),Lt=P.useCallback((F,he,we,ve)=>{if(!t||!a||a==="Absence"||yt(F,he)){A({row:we,col:ve,table:"roster"});return}A({row:we,col:ve,table:"roster"});const xe=X.find(ht=>ht.name===t),Re=(xe==null?void 0:xe.maxConflict)||1,mt=K.filter(ht=>ht.parentId===a),Fe=[a,...mt.map(ht=>ht.name)];n(cU({date:F,teamName:t,userIdentifier:he,positionGroupNames:Fe,maxConflict:Re}))},[n,t,a,yt,X,K]),dt=P.useCallback((F,he,we,ve)=>{A({row:we,col:ve,table:"absence"});const xe=Be(F,he);n(qS({date:F,userIdentifier:he,isAbsent:!xe}))},[n,Be]),tn=P.useCallback((F,he,we)=>{n(qS({date:F,userIdentifier:he,reason:we,isAbsent:!0}))},[n]),fn=P.useCallback(()=>{N&&n(pc(O)),H&&n(B_(K))},[n,O,K,N,H]),Hr=()=>{if(!me||!a)return;const F=me.customLabels||[];n(Nf({positionName:a,labels:[...F,""]}))},an=(F,he)=>{if(!me||!a)return;const we=[...me.customLabels||[]];we[F]=he,n(Nf({positionName:a,labels:we}))},Bn=(F,he)=>{if(!me||!a)return;const we=[...me.customLabels||[]],ve=he==="left"?F-1:F+1;if(ve<0||ve>=we.length)return;const xe=we[F];we[F]=we[ve],we[ve]=xe,n(Nf({positionName:a,labels:we}))},Sr=F=>{if(!me||!a||!window.confirm("Remove this column?"))return;const he=[...me.customLabels||[]];he.splice(F,1),n(Nf({positionName:a,labels:he}))},Pt=P.useCallback(()=>{N&&n(xC()),H&&(n(OL()),n(Sa())),A(null)},[n,N,H]),lt=(F,he)=>{const we=F.split("T")[0],ve=O[we]||w[we];if(!ve||!t||!ve.teams[t])return[];let xe=ve.teams[t][he]||[];if(xe.length===0){const Re=he.trim(),mt=Object.keys(ve.teams[t]).find(Fe=>Fe.trim()===Re);mt&&(xe=ve.teams[t][mt])}return xe},Nn=(F,he)=>{const we=lt(F,he);return we.length===0?"":T.jsx("div",{className:Q.assignedPositions,children:we.map(ve=>{const xe=K.find(Re=>Re.name===ve);return T.jsx("span",{className:Q.posEmoji,onClick:Re=>{Re.stopPropagation(),e(`/app/roster/${t}/${ve}`)},title:ve,style:{cursor:"pointer"},children:(xe==null?void 0:xe.emoji)||""},ve)})})},wi=(F,he)=>{const we=F.split("T")[0],ve=O[we]||w[we];if(!ve||!t)return"";const xe=Object.entries(ve.teams[t]||{}).filter(([,Re])=>Re.includes(he));return T.jsx("div",{className:Q.assignedUsersText,children:xe.map(([Re],mt)=>{const Fe=ne.find(st=>st.email===Re),ht=Re===(s==null?void 0:s.email),Me=Fe?Fe.name:Re;return T.jsxs(P.Fragment,{children:[T.jsx("span",{className:ht?Q.isMe:"",children:Me}),ht&&T.jsx("span",{className:Q.meTag,children:"Me"}),mt<xe.length-1?", ":""]},Re)})})},ui=(F,he)=>{var mt;const we=F,ve=O[we]||w[we];if(!ve||!t)return"";const xe=((mt=ve.teams[t])==null?void 0:mt[he])||[],Re=[];return Object.entries(ve.teams).forEach(([Fe,ht])=>{Fe!==t&&ht[he]&&Re.push({team:Fe,positions:ht[he]})}),xe.length===0&&Re.length===0?"":T.jsxs("div",{className:Q.assignedPositions,children:[xe.map(Fe=>{const ht=K.find(Me=>Me.name===Fe);return T.jsx("span",{title:`${t}: ${Fe}`,className:Q.posEmoji,children:(ht==null?void 0:ht.emoji)||""},Fe)}),Re.map(Fe=>Fe.positions.map(ht=>{const Me=K.find(st=>st.name===ht);return T.jsx("span",{title:`${Fe.team}: ${ht}`,className:`${Q.posEmoji} ${Q.otherTeamEmoji}`,children:(Me==null?void 0:Me.emoji)||""},`${Fe.team}-${ht}`)}))]})};P.useEffect(()=>{const F=he=>{const we=he.target;if(we.tagName==="INPUT"||we.tagName==="TEXTAREA"||!G)return;const{row:ve,col:xe,table:Re}=G,mt=d;let Fe=[];switch(Re==="roster"?Fe=De:Re==="absence"?Fe=c:Re==="all"&&(Fe=ue==="user"?ce:(m==null?void 0:m.positions)||[]),he.key){case"ArrowUp":he.preventDefault(),ve>0&&A({row:ve-1,col:xe,table:Re});break;case"ArrowDown":he.preventDefault(),ve<mt.length-1&&A({row:ve+1,col:xe,table:Re});break;case"ArrowLeft":he.preventDefault(),xe>0&&A({row:ve,col:xe-1,table:Re});break;case"ArrowRight":he.preventDefault(),xe<Fe.length-1&&A({row:ve,col:xe+1,table:Re});break;case"Tab":he.preventDefault(),he.shiftKey?ve>0&&A({row:ve-1,col:xe,table:Re}):ve<mt.length-1&&A({row:ve+1,col:xe,table:Re});break;case" ":{if(he.preventDefault(),Re==="all")break;const ht=d[ve],Me=Fe[xe];Me!=null&&Me.email&&(Re==="roster"?Lt(ht,Me.email,ve,xe):dt(ht,Me.email,ve,xe));break}case"Enter":M&&(he.preventDefault(),fn());break;case"Escape":M&&(he.preventDefault(),Pt());break}};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[G,d,De,c,M,Lt,dt,fn,Pt,ue,ce,m==null?void 0:m.positions]);const qt=P.useMemo(()=>{const F=Nl();return d.length===0?!1:d[0]<F},[d]),sn=P.useMemo(()=>{const F=Nl();return d.find(he=>he.split("T")[0]>=F)},[d]),ar=P.useMemo(()=>{if(!sn||!t||!a)return[];const F=sn.split("T")[0],he=O[F]||w[F];if(!he||!he.teams[t])return[];const we=K.filter(xe=>xe.parentId===a),ve=[a,...we.map(xe=>xe.name)];return Object.entries(he.teams[t]).filter(([,xe])=>xe.some(Re=>ve.includes(Re))).map(([xe])=>xe)},[sn,t,a,O,w,K]),Ar=P.useCallback(F=>{const he=Nl(),we=F.split("T")[0];return we<he?"past-date":we===he?"today-date":"future-date"},[]);if(g||y||E)return T.jsx(Zl,{});const gn=S||k;return gn?T.jsxs("div",{className:Q.rosterTableError,children:["Error: ",gn]}):D?T.jsxs("div",{className:Q.rosterTableWrapper,children:[T.jsxs("div",{className:Q.viewToggleBar,children:[T.jsxs("button",{className:`${Q.toggleBtn} ${ue==="user"?Q.activeToggle:""}`,onClick:()=>n(HS("user")),children:[T.jsx(hj,{size:18})," ",T.jsx("span",{children:"User View"})]}),T.jsxs("button",{className:`${Q.toggleBtn} ${ue==="position"?Q.activeToggle:""}`,onClick:()=>n(HS("position")),children:[T.jsx(ZL,{size:18})," ",T.jsx("span",{children:"Position View"})]})]}),T.jsxs("div",{className:Q.rosterSection,children:[T.jsx("div",{className:Q.rosterTableContainer,children:T.jsxs("table",{className:Q.rosterTable,children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{className:`${Q.rosterTableHeaderCell} ${Q.stickyCol} sticky-header`,children:T.jsxs("div",{className:Q.dateHeaderContent,children:["Date",T.jsxs("div",{className:Q.dateHeaderActions,children:[T.jsx("button",{className:Q.loadPrevBtn,onClick:ie,title:"Load 5 previous dates",children:""}),qt&&T.jsx("button",{className:`${Q.loadPrevBtn} ${Q.resetDatesBtn}`,onClick:Te,title:"Hide previous dates",children:""})]})]})}),ue==="user"?ce.map(F=>{const he=F.id===(s==null?void 0:s.email);return T.jsxs("th",{className:`${Q.rosterTableHeaderCell} sticky-header ${F.id&&ar.includes(F.id)?Q.highlightedHeader:""} ${he?Q.isMe:""}`,children:[F.name,he&&T.jsx("span",{className:Q.meTag,children:"Me"})]},F.id)}):((m==null?void 0:m.positions)||[]).map(F=>T.jsx("th",{className:`${Q.rosterTableHeaderCell} ${Q.clickableHeader} sticky-header`,onClick:()=>e(`/app/roster/${t}/${F.name}`),children:T.jsxs("div",{className:Q.allViewPositionHeader,children:[T.jsx("span",{children:F.emoji}),T.jsx("span",{className:Q.allViewPositionName,children:F.name})]})},F.name))]})}),T.jsx("tbody",{children:d.map((F,he)=>{const we=F.split("T")[0],ve=O[we]||w[we],xe=ve==null?void 0:ve.eventName,Re=Ar(F),mt=Re==="today-date",Fe=be(F),ht=[Re==="past-date"?Q.pastDate:"",Re==="today-date"?Q.todayDate:"",Re==="future-date"?Q.futureDate:"",Fe?"":Q.noData,xe?Q.specialEventRow:"",F===sn?Q.closestNextDateRow:""].filter(Boolean).join(" ");return T.jsxs("tr",{className:ht,children:[T.jsx("td",{className:`${Q.dateCell} ${Q.stickyCol} ${Fe?Q.clickable:""}`,onClick:()=>Ee(F),title:xe,children:T.jsxs("div",{className:Q.dateCellContent,children:[xe&&T.jsx("span",{className:Q.specialEventDot}),mt&&T.jsx("span",{className:Q.rosterTodayDot,title:"Today"}),new Date(F.replace(/-/g,"/")).toLocaleDateString()]})}),ue==="user"?ce.map((Me,st)=>{const $t=(G==null?void 0:G.row)===he&&(G==null?void 0:G.col)===st&&(G==null?void 0:G.table)==="all",Dn=Me.id?Be(F,Me.id):!1,Ct=F===sn&&Me.id&&ar.includes(Me.id);return T.jsx("td",{className:`${Q.rosterCell} ${Q.clickable} ${$t?Q.focused:""} ${Dn?Q.absentStrike:""} ${Ct?Q.highlightedCell:""}`,tabIndex:0,onClick:()=>{const On=lt(F,Me.id);On.length>0&&e(`/app/roster/${t}/${On[0]}`)},onFocus:()=>A({row:he,col:st,table:"all"}),children:Me.id&&(Dn?T.jsx("span",{title:$e(F,Me.id),children:""}):Nn(F,Me.id))},Me.id)}):((m==null?void 0:m.positions)||[]).map((Me,st)=>{const $t=(G==null?void 0:G.row)===he&&(G==null?void 0:G.col)===st&&(G==null?void 0:G.table)==="all";return T.jsx("td",{className:`${Q.rosterCell} ${$t?Q.focused:""}`,tabIndex:0,onFocus:()=>A({row:he,col:st,table:"all"}),children:wi(F,Me.name)},Me.name)})]},F)})})]})}),T.jsx("div",{className:Q.loadMoreFooter,children:T.jsx("button",{className:Q.loadNextYearBtn,onClick:oe,children:"Load Next Year "})})]})]}):!V&&!(me!=null&&me.isCustom)&&De.length===0?T.jsxs("div",{className:Q.rosterTableLoading,children:[!V&&z.length>0&&T.jsxs("div",{className:Q.hiddenMembersBar,children:[T.jsx("span",{className:Q.hiddenMembersLabel,children:"Hidden Members:"}),T.jsx("div",{className:Q.hiddenMembersList,children:z.map(F=>{const he=l.find(we=>we.email===F);return T.jsxs("button",{className:Q.unhidePill,onClick:()=>U(F),title:"Click to unhide",children:[(he==null?void 0:he.name)||F," ",T.jsx("span",{children:"+"})]},F)})})]}),"No users found for this position."]}):T.jsxs("div",{className:Q.rosterTableWrapper,children:[!V&&z.length>0&&T.jsxs("div",{className:Q.hiddenMembersBar,children:[T.jsx("span",{className:Q.hiddenMembersLabel,children:"Hidden Members:"}),T.jsx("div",{className:Q.hiddenMembersList,children:z.map(F=>{const he=l.find(we=>we.email===F);return T.jsxs("button",{className:Q.unhidePill,onClick:()=>U(F),title:"Click to unhide",children:[(he==null?void 0:he.name)||F," ",T.jsx("span",{children:"+"})]},F)})})]}),V?T.jsxs("div",{className:`${Q.rosterSection} ${Q.absenceSection}`,children:[T.jsx("div",{className:Q.rosterTableContainer,children:T.jsxs("table",{className:`${Q.rosterTable} ${Q.absenceTable}`,children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{className:`${Q.rosterTableHeaderCell} ${Q.stickyCol} sticky-header`,children:T.jsxs("div",{className:Q.dateHeaderContent,children:["Date",T.jsxs("div",{className:Q.dateHeaderActions,children:[T.jsx("button",{className:Q.loadPrevBtn,onClick:ie,title:"Load 5 previous dates",children:""}),qt&&T.jsx("button",{className:`${Q.loadPrevBtn} ${Q.resetDatesBtn}`,onClick:Te,title:"Hide previous dates",children:""})]})]})}),c.map(F=>T.jsx("th",{className:`${Q.rosterTableHeaderCell} sticky-header ${F.email&&ar.includes(F.email)?Q.highlightedHeader:""}`,children:F.name},F.email)),T.jsx("th",{className:`${Q.genderDividerCell} sticky-header`}),T.jsx("th",{className:`${Q.rosterTableHeaderCell} sticky-header ${Q.stickyRight} ${Q.peekHeader}`,children:T.jsxs("select",{className:Q.peekSelector,value:R||"",onChange:F=>x(F.target.value||null),children:[T.jsx("option",{value:"",children:"Peek Position..."}),ye.map(F=>T.jsxs("option",{value:F.name,children:[F.emoji," ",F.name]},F.name))]})})]})}),T.jsx("tbody",{children:d.map((F,he)=>{const we=F.split("T")[0],ve=O[we]||w[we],xe=ve==null?void 0:ve.eventName,Re=Ar(F),mt=Re==="today-date",Fe=be(F),ht=[Re==="past-date"?Q.pastDate:"",Re==="today-date"?Q.todayDate:"",Re==="future-date"?Q.futureDate:"",Fe?"":Q.noData,xe?Q.specialEventRow:"",F===sn?Q.closestNextDateRow:""].filter(Boolean).join(" ");return T.jsxs("tr",{className:ht,children:[T.jsx("td",{className:`${Q.dateCell} ${Q.stickyCol} ${Fe?Q.clickable:""}`,onClick:()=>Ee(F),title:xe,children:T.jsxs("div",{className:Q.dateCellContent,children:[xe&&T.jsx("span",{className:Q.specialEventDot}),new Date(F.replace(/-/g,"/")).toLocaleDateString(),mt&&T.jsx("span",{className:Q.rosterTodayDot,title:"Today"})]})}),c.map((Me,st)=>{const $t=(G==null?void 0:G.row)===he&&(G==null?void 0:G.col)===st&&(G==null?void 0:G.table)==="absence",Dn=Me.email?Be(F,Me.email):!1,Ct=Me.email?$e(F,Me.email):"",On=F===sn&&Me.email&&ar.includes(Me.email);return T.jsx("td",{className:`${Q.rosterCell} ${Q.clickable} ${Q.absenceRosterCell} ${$t?Q.focused:""} ${Dn?Q.absentCell:""} ${On?Q.highlightedCell:""}`,onClick:()=>{Me.email&&dt(F,Me.email,he,st)},tabIndex:0,onFocus:()=>A({row:he,col:st,table:"absence"}),title:Ct,children:Dn?T.jsxs("div",{className:Q.absenceInputContainer,children:[T.jsx("input",{type:"text",className:Q.absenceReasonInput,value:Ct,placeholder:"Reason...",maxLength:20,autoFocus:$t,onClick:Mn=>Mn.stopPropagation(),onChange:Mn=>{Me.email&&tn(F,Me.email,Mn.target.value)}}),T.jsx("button",{className:Q.removeAbsenceBtn,onClick:Mn=>{Mn.stopPropagation(),Me.email&&dt(F,Me.email,he,st)},title:"Mark as present",children:""})]}):""},Me.email)}),T.jsx("td",{className:Q.genderDividerCell}),T.jsx("td",{className:`${Q.rosterCell} ${Q.peekCell} ${Q.stickyRight}`,children:Ne(F).join(", ")||""})]},F)})})]})}),T.jsx("div",{className:Q.loadMoreFooter,children:T.jsx("button",{className:Q.loadNextYearBtn,onClick:oe,children:"Load Next Year "})})]}):T.jsxs("div",{className:Q.rosterSection,children:[T.jsx("div",{className:Q.rosterTableContainer,children:T.jsxs("table",{className:Q.rosterTable,children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{className:`${Q.rosterTableHeaderCell} ${Q.stickyCol} sticky-header`,children:T.jsxs("div",{className:Q.dateHeaderContent,children:["Date",T.jsxs("div",{className:Q.dateHeaderActions,children:[T.jsx("button",{className:Q.loadPrevBtn,onClick:ie,title:"Load 5 previous dates",children:""}),qt&&T.jsx("button",{className:`${Q.loadPrevBtn} ${Q.resetDatesBtn}`,onClick:Te,title:"Hide previous dates",children:""})]})]})}),me!=null&&me.isCustom?(me.customLabels||[]).map((F,he)=>{var we;return T.jsxs("th",{className:`${Q.rosterTableHeaderCell} sticky-header`,children:[T.jsx("input",{type:"text",className:Q.headerInput,value:F,placeholder:"New Heading...",readOnly:!(s!=null&&s.isAdmin),onChange:ve=>an(he,ve.target.value)}),(s==null?void 0:s.isAdmin)&&T.jsxs("div",{className:Q.headerActions,children:[T.jsx("button",{className:Q.headerActionBtn,onClick:()=>Bn(he,"left"),disabled:he===0,title:"Move Left",children:T.jsx(FL,{size:12})}),T.jsx("button",{className:`${Q.headerActionBtn} ${Q.removeHeaderBtn}`,onClick:()=>Sr(he),title:"Remove Column",children:T.jsx(AC,{size:12})}),T.jsx("button",{className:Q.headerActionBtn,onClick:()=>Bn(he,"right"),disabled:he===(((we=me.customLabels)==null?void 0:we.length)||0)-1,title:"Move Right",children:T.jsx(GL,{size:12})})]})]},`custom-${he}`)}):De.map((F,he)=>T.jsxs(P.Fragment,{children:[Ue===he&&T.jsx("th",{className:`${Q.genderDividerCell} sticky-header`}),T.jsxs("th",{className:`${Q.rosterTableHeaderCell} sticky-header ${Q.clickableHeader} ${F.email&&ar.includes(F.email)?Q.highlightedHeader:""}`,onClick:()=>F.email&&U(F.email),title:"Click to hide member",children:[F.name,(me==null?void 0:me.sortByGender)&&T.jsxs("span",{className:Q.genderLabel,children:["(",F.gender==="Male"?"M":F.gender==="Female"?"F":"?",")"]})]})]},F.email)),(me==null?void 0:me.isCustom)&&(s==null?void 0:s.isAdmin)&&T.jsx("th",{className:`${Q.rosterTableHeaderCell} sticky-header`,children:T.jsx("button",{className:Q.addColumnBtn,onClick:Hr,title:"Add Column",children:T.jsx(mm,{size:16})})}),T.jsx("th",{className:`${Q.genderDividerCell} sticky-header`}),T.jsx("th",{className:`${Q.rosterTableHeaderCell} sticky-header ${Q.stickyRight} ${Q.peekHeader}`,children:T.jsxs("select",{className:Q.peekSelector,value:R||"",onChange:F=>x(F.target.value||null),children:[T.jsx("option",{value:"",children:"Peek Position..."}),ye.map(F=>T.jsxs("option",{value:F.name,children:[F.emoji," ",F.name]},F.name))]})})]})}),T.jsx("tbody",{children:d.map((F,he)=>{const we=F.split("T")[0],ve=O[we]||w[we],xe=ve==null?void 0:ve.eventName,Re=Ar(F),mt=Re==="today-date",Fe=be(F),ht=[Re==="past-date"?Q.pastDate:"",Re==="today-date"?Q.todayDate:"",Re==="future-date"?Q.futureDate:"",Fe?"":Q.noData,xe?Q.specialEventRow:"",F===sn?Q.closestNextDateRow:""].filter(Boolean).join(" ");return T.jsxs("tr",{className:ht,children:[T.jsx("td",{className:`${Q.dateCell} ${Q.stickyCol} ${Fe?Q.clickable:""}`,onClick:()=>Ee(F),title:xe,children:T.jsxs("div",{className:Q.dateCellContent,children:[xe&&T.jsx("span",{className:Q.specialEventDot}),mt&&T.jsx("span",{className:Q.rosterTodayDot,title:"Today"}),new Date(F.replace(/-/g,"/")).toLocaleDateString()]})}),me!=null&&me.isCustom?(me.customLabels||[]).map((Me,st)=>{const $t=(G==null?void 0:G.row)===he&&(G==null?void 0:G.col)===st&&(G==null?void 0:G.table)==="roster";return T.jsx("td",{className:`${Q.rosterCell} ${Q.clickable} ${$t?Q.focused:""}`,onClick:()=>{Me&&Lt(F,Me,he,st)},tabIndex:0,onFocus:()=>A({row:he,col:st,table:"roster"}),children:Me&&ui(F,Me)},`custom-cell-${st}`)}):De.map((Me,st)=>{const $t=(G==null?void 0:G.row)===he&&(G==null?void 0:G.col)===st&&(G==null?void 0:G.table)==="roster",Dn=Me.email?yt(F,Me.email):!1,Ct=Me.email?Be(F,Me.email):!1,On=F===sn&&Me.email&&ar.includes(Me.email);return T.jsxs(P.Fragment,{children:[Ue===st&&T.jsx("td",{className:Q.genderDividerCell}),T.jsx("td",{className:`${Q.rosterCell} ${Dn?Q.disabled:Q.clickable} ${$t?Q.focused:""} ${Ct?Q.absentStrike:""} ${On?Q.highlightedCell:""}`,onClick:()=>{Me.email&&!Dn&&Lt(F,Me.email,he,st)},tabIndex:0,onFocus:()=>A({row:he,col:st,table:"roster"}),children:Me.email&&(Ct?T.jsx("span",{title:$e(F,Me.email),children:""}):ui(F,Me.email))})]},Me.email)}),(me==null?void 0:me.isCustom)&&T.jsx("td",{className:`${Q.rosterCell} ${Q.disabled}`}),T.jsx("td",{className:Q.genderDividerCell}),T.jsx("td",{className:`${Q.rosterCell} ${Q.peekCell} ${Q.stickyRight}`,children:Ne(F).join(", ")||""})]},F)})})]})}),T.jsx("div",{className:Q.loadMoreFooter,children:T.jsx("button",{className:Q.loadNextYearBtn,onClick:oe,children:"Load Next Year "})})]}),M&&T.jsx(eu,{onSave:fn,onCancel:Pt,isSaving:q,saveText:"Save Roster"})]})},Z6="_rosterPage_z6eme_1",e9={rosterPage:Z6},t9=()=>T.jsx("div",{className:e9.rosterPage,children:T.jsx(J6,{})}),n9="_appTableContainer_1bvz5_1",r9="_appTable_1bvz5_1",i9="_colorPickerGroup_1bvz5_44",a9="_stickyCol_1bvz5_54",Nc={appTableContainer:n9,appTable:r9,colorPickerGroup:i9,stickyCol:a9},s9=({text:n,textAlign:e="left",width:t,minWidth:a,isSticky:s=!1})=>T.jsx("th",{className:s?Nc.stickyCol:void 0,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:a?`${a}px`:"auto"},children:n}),un=({isSticky:n=!1,textAlign:e="left",className:t,children:a})=>T.jsx("td",{style:{textAlign:e,display:e==="center"?"table-cell":void 0},className:`${t||""} ${n?Nc.stickyCol:""}
`,children:T.jsx("div",{style:{display:"flex",justifyContent:e==="center"?"center":e==="right"?"flex-end":"flex-start",alignItems:"center",gap:"8px",height:"100%"},children:a})}),ri=({name:n,value:e,placeholder:t,type:a="text",isSticky:s,isReadOnly:l=!1,isChild:c=!1,onChange:d})=>T.jsxs(un,{isSticky:s,children:[c&&T.jsx(bC,{}),T.jsx("input",{name:n,className:_a.formInput,type:a,placeholder:t,value:e,onChange:d,readOnly:l})]}),PC=({name:n,value:e,placeholder:t,onChange:a})=>T.jsxs(un,{className:Nc.colorPickerGroup,children:[T.jsx("input",{name:n,type:"color",className:_a.colorInput,value:e||"#FFFFFF",onChange:a}),T.jsx("input",{name:n,className:_a.formInput,value:e,placeholder:t,onChange:a})]}),F_=({headers:n,children:e})=>T.jsx("div",{className:Nc.appTableContainer,children:T.jsxs("table",{className:Nc.appTable,children:[T.jsx("thead",{children:T.jsx("tr",{children:n.map((t,a)=>T.jsx(s9,{...t},a))})}),T.jsx("tbody",{children:e})]})}),o9=({position:n,index:e,onUpdate:t,onMove:a,onDelete:s,onAddChild:l,isFirst:c,isLast:d})=>T.jsxs("tr",{children:[T.jsx(ri,{name:`name-${e}`,value:n.name,onChange:m=>t(e,"name",m.target.value),isSticky:!0}),T.jsx(un,{textAlign:"center",children:n.parentId?T.jsx(bC,{}):T.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[T.jsx(ni,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(e,"up"),disabled:c,children:""}),T.jsx(ni,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(e,"down"),disabled:d,children:""})]})}),T.jsx(ri,{name:`emoji-${e}`,value:n.emoji,onChange:m=>t(e,"emoji",m.target.value)}),T.jsx(PC,{name:`colour-${e}`,value:n.colour,onChange:m=>t(e,"colour",m.target.value)}),T.jsx(un,{textAlign:"center",children:T.jsx(br,{colour:n.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.sortByGender,onClick:()=>t(e,"sortByGender",!n.sortByGender),isDisabled:n.isCustom,children:n.sortByGender?"YES":"NO"})}),T.jsx(un,{textAlign:"center",children:T.jsx(br,{colour:n.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.isCustom,onClick:()=>t(e,"isCustom",!n.isCustom),children:n.isCustom?"YES":"NO"})}),T.jsx(un,{textAlign:"center",children:!n.parentId&&T.jsxs(ni,{variant:"secondary",size:"small",onClick:()=>l(n.name),title:"Add Child Position",children:[T.jsx(mm,{size:14,style:{marginRight:"4px"}}),"Add"]})}),T.jsx(un,{textAlign:"center",children:T.jsxs(ni,{variant:"delete",size:"small",onClick:()=>s(e),children:[T.jsx(SC,{size:14,style:{marginRight:"4px"}}),"Delete"]})})]}),l9="_settingsContainer_1c9s2_1",u9="_managementWrapper_1c9s2_13",Ol={settingsContainer:l9,managementWrapper:u9},qg={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},c9=()=>{const n=li(),{positions:e,fetched:t,loading:a}=ot(H=>H.positions),[s,l]=P.useState(e),[c,d]=P.useState(qg),[m,g]=P.useState("idle"),y=P.useMemo(()=>{const H=X=>X.map(se=>({name:se.name||"",emoji:se.emoji||"",colour:se.colour||"",parentId:se.parentId||void 0,sortByGender:!!se.sortByGender,isCustom:!!se.isCustom}));return JSON.stringify(H(s))!==JSON.stringify(H(e))},[s,e]);P.useEffect(()=>{t||n(Sa())},[n,t]),P.useEffect(()=>{l(e)},[e]);const E=(H,X,se)=>{const ue=[...s];ue[H]={...ue[H],[X]:se},l(ue)},S=(H,X)=>{const se=[...s],ue=se[H],G=ue.parentId,A=R=>{const x=se[R];if(!x)return{block:[],startIndex:-1,endIndex:-1};const N=[],M=[x],V=new Set;let D=R,me=R,ye=0;for(;ye<M.length;){const ne=M[ye++];V.has(ne.name)||(V.add(ne.name),N.push(ne),se.forEach((ce,De)=>{ce.parentId===ne.name&&!V.has(ce.name)&&(M.push(ce),D=Math.min(D,De),me=Math.max(me,De))}))}return{block:N,startIndex:D,endIndex:me}};if(G){const R=se.filter(ye=>ye.parentId===G),N=R.findIndex(ye=>ye.name===ue.name)+(X==="up"?-1:1);if(N<0||N>=R.length)return;const M=R[N],V=se.indexOf(ue),D=se.indexOf(M);if(V===-1||D===-1)return;const me=[...se];me[V]=M,me[D]=ue,l(me)}else{const R=A(H),{block:x,startIndex:N,endIndex:M}=R;if(!x||x.length===0)return;if(X==="up"){if(N===0)return;let V=N-1;for(;V>=0&&se[V].parentId;)V--;if(V<0)return;const D=A(V),{block:me,startIndex:ye}=D;if(!me||me.length===0)return;const z=[...se.slice(0,ye),...x,...me,...se.slice(M+1)].filter(Boolean);l(z)}else{if(M===se.length-1)return;let V=M+1;for(;V<se.length&&se[V].parentId;)V++;if(V>=se.length)return;const D=A(V),{block:me,startIndex:ye}=D;if(!me||me.length===0)return;const z=[...se.slice(0,N),...me,...x,...se.slice(ye+me.length)].filter(Boolean);l(z)}}},w=()=>{if(!c.name.trim()||!c.emoji.trim())return alert("Please provide both an emoji and a name.");l([...s,c]),d(qg)},O=H=>{if(window.confirm("Delete this position? This will remove it from the global list, and any associated child positions.")){const X=s[H];let se=s.filter((ue,G)=>G!==H);X.parentId||(se=se.filter(ue=>ue.parentId!==X.name)),l(se)}},q=async()=>{g("saving");try{const H=s.map(X=>{const se={name:X.name||"",emoji:X.emoji||"",colour:X.colour||"",sortByGender:!!X.sortByGender,isCustom:!!X.isCustom,customLabels:X.customLabels||[]};return X.parentId&&(se.parentId=X.parentId),se});await n(B_(H)).unwrap(),g("success"),setTimeout(()=>g("idle"),2e3)}catch(H){console.error("Save Error:",H),alert("Error saving: "+(H instanceof Error?H.message:"Unknown error")),g("idle")}},k=H=>{l(X=>{const se={...qg,parentId:H},ue=X.findIndex(R=>R.name===H);if(ue===-1)return[...X,se];let G=ue;for(;G+1<X.length&&X[G+1].parentId===H;)G++;return[...X.slice(0,G+1),se,...X.slice(G+1)]})},K=()=>{l(e)};return a?T.jsx(Zl,{}):T.jsxs("div",{className:Ol.managementWrapper,children:[T.jsxs(F_,{headers:[{text:"Name",minWidth:80,width:200,textAlign:"center",isSticky:!0},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Colour",minWidth:100,textAlign:"center"},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Custom Headings",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[s.map((H,X)=>T.jsx(o9,{position:H,index:X,onUpdate:E,onMove:S,onDelete:O,onAddChild:k,isFirst:X===0,isLast:X===s.length-1},`${H.emoji}-${X}`)),T.jsxs("tr",{className:"pos-row-new",children:[T.jsx(ri,{name:"new-name",value:c.name,placeholder:"Position Name",onChange:H=>d({...c,name:H.target.value}),isSticky:!0}),T.jsx(un,{textAlign:"center",children:""}),T.jsx(ri,{name:"new-emoji",value:c.emoji,placeholder:"",onChange:H=>d({...c,emoji:H.target.value})}),T.jsx(PC,{name:"new-colour",value:c.colour,placeholder:"#FFFFFF",onChange:H=>d({...c,colour:H.target.value})}),T.jsx(un,{textAlign:"center",children:T.jsx(br,{colour:c.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.sortByGender,onClick:()=>d({...c,sortByGender:!c.sortByGender}),isDisabled:c.isCustom,children:c.sortByGender?"YES":"NO"})}),T.jsx(un,{textAlign:"center",children:T.jsx(br,{colour:c.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.isCustom,onClick:()=>d({...c,isCustom:!c.isCustom}),children:c.isCustom?"YES":"NO"})}),T.jsx(un,{textAlign:"center",children:T.jsxs(ni,{onClick:w,disabled:!c.name.trim()||!c.emoji.trim(),children:[T.jsx(mm,{size:16,style:{marginRight:"6px"}}),"Add"]})}),T.jsx(un,{textAlign:"center",children:""})]})]}),y&&T.jsx(eu,{label:"Unsaved position changes",saveText:"Save Positions",onSave:q,onCancel:K,isSaving:m==="saving"})]})},h9="_modalOverlay_ah937_1",f9="_modalContent_ah937_16",d9="_modalHeader_ah937_34",m9="_closeButton_ah937_48",p9="_modalBody_ah937_64",g9="_modalFooter_ah937_70",dl={modalOverlay:h9,modalContent:f9,modalHeader:d9,closeButton:m9,modalBody:p9,modalFooter:g9},VC=({isOpen:n,onClose:e,title:t,children:a,footer:s})=>{if(P.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),!n)return null;const l=T.jsx("div",{className:dl.modalOverlay,onClick:e,children:T.jsxs("div",{className:dl.modalContent,onClick:c=>c.stopPropagation(),children:[T.jsxs("div",{className:dl.modalHeader,children:[T.jsx("h2",{children:t}),T.jsx("button",{className:dl.closeButton,onClick:e,"aria-label":"Close",children:T.jsx(AC,{size:24})})]}),T.jsx("div",{className:dl.modalBody,children:a}),s&&T.jsx("div",{className:dl.modalFooter,children:s})]})});return NA.createPortal(l,document.body)},y9=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],kC=({isOpen:n,onClose:e,team:t,availablePositions:a,onTogglePosition:s,onToggleDay:l,onToggleAllowAbsence:c})=>{var d;return T.jsxs(VC,{isOpen:n,onClose:e,title:`Edit Team: ${t.name}`,children:[T.jsxs("div",{className:Rn.formGroup,children:[T.jsx("label",{className:Rn.sectionLabel,children:"Allowed Positions"}),T.jsx(Dl,{children:(d=a==null?void 0:a.filter(m=>!m.parentId))==null?void 0:d.map(m=>{var y;const g=(y=t.positions)==null?void 0:y.some(E=>E.name===m.name);return T.jsxs(br,{colour:m.colour,isActive:g,onClick:()=>s(m),children:[m.emoji," ",m.name]},m.name)})})]}),T.jsxs("div",{className:Rn.formGroup,children:[T.jsx("label",{className:Rn.sectionLabel,children:"Preferred Days"}),T.jsx(Dl,{children:y9.map(m=>{var y;const g=(y=t.preferredDays)==null?void 0:y.includes(m);return T.jsx(br,{isActive:g,onClick:()=>l(m),children:m},m)})})]}),T.jsxs("div",{className:Rn.formGroup,children:[T.jsx("label",{className:Rn.sectionLabel,children:"Feature Settings"}),T.jsx(Dl,{children:T.jsxs(br,{isActive:t.allowAbsence!==!1,onClick:()=>c(t.allowAbsence===!1),colour:t.allowAbsence!==!1?"var(--color-success-dark)":"var(--color-text-dim)",children:["Allow Absence: ",t.allowAbsence!==!1?"YES":"NO"]})})]})]})},q_=({primaryText:n,secondaryText:e,onClick:t})=>T.jsxs("button",{className:Rn.summaryButton,onClick:t,type:"button",children:[T.jsx("span",{className:Rn.summaryPrimary,children:n}),e&&T.jsxs(T.Fragment,{children:[T.jsx("span",{className:Rn.summarySeparator,children:""}),T.jsx("span",{className:Rn.summarySecondary,children:e})]})]}),_9=({team:n,teamIndex:e,availablePositions:t,onUpdate:a,onMove:s,onDelete:l,onTogglePosition:c,onToggleDay:d,onToggleAllowAbsence:m,isFirst:g,isLast:y})=>{var q;const[E,S]=P.useState(!1),w=()=>{if(!n.positions||n.positions.length===0)return"No positions";const k=n.positions.slice(0,3).map(H=>T.jsx("span",{className:Rn.summaryEmoji,children:H.emoji},H.name)),K=n.positions.length-3;return T.jsxs(T.Fragment,{children:[k,K>0&&T.jsxs("span",{className:Rn.remainingCount,children:["+",K]})]})},O=()=>!n.preferredDays||n.preferredDays.length===0?"No days":n.preferredDays.map(k=>k.substring(0,3)).join(", ");return T.jsxs(T.Fragment,{children:[T.jsxs("tr",{children:[T.jsx(ri,{name:`team-name-${e}`,value:n.name,onChange:k=>a(e,"name",k.target.value),isSticky:!0}),T.jsx(un,{children:T.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[T.jsx(ni,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(e,"up"),disabled:g,children:""}),T.jsx(ni,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(e,"down"),disabled:y,children:""})]})}),T.jsx(ri,{name:`team-emoji-${e}`,value:n.emoji,onChange:k=>a(e,"emoji",k.target.value)}),T.jsx(ri,{name:`team-maxConflict-${e}`,value:((q=n.maxConflict)==null?void 0:q.toString())||"1",type:"number",onChange:k=>a(e,"maxConflict",parseInt(k.target.value)||1)}),T.jsx(un,{children:T.jsx(q_,{primaryText:w(),secondaryText:O(),onClick:()=>S(!0)})}),T.jsx(un,{children:T.jsxs(ni,{variant:"delete",size:"small",onClick:()=>l(e),children:[T.jsx(SC,{size:14,style:{marginRight:"6px"}}),"Delete"]})})]}),T.jsx(kC,{isOpen:E,onClose:()=>S(!1),team:n,availablePositions:t,onTogglePosition:k=>c(e,k),onToggleDay:k=>d(e,k),onToggleAllowAbsence:k=>m(e,k)})]})},GS={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1,allowAbsence:!0},v9=()=>{var me;const n=li(),{teams:e,fetched:t,loading:a}=ot(ye=>ye.teams),{positions:s,fetched:l,loading:c}=ot(ye=>ye.positions),[d,m]=P.useState(e),[g,y]=P.useState(GS),[E,S]=P.useState("idle"),[w,O]=P.useState(!1),q=P.useMemo(()=>{const ye=z=>z.map(ne=>({name:ne.name||"",emoji:ne.emoji||"",positions:(ne.positions||[]).map(ce=>ce.name).sort(),preferredDays:[...ne.preferredDays||[]].sort(),maxConflict:ne.maxConflict||1,allowAbsence:ne.allowAbsence!==!1}));return JSON.stringify(ye(d))!==JSON.stringify(ye(e))},[d,e]);P.useEffect(()=>{t||n(fo()),l||n(Sa())},[n,t,l]),P.useEffect(()=>{m(e)},[e]);const k=(ye,z,ne)=>{const ce=[...d];ce[ye]={...ce[ye],[z]:ne},m(ce)},K=(ye,z)=>{const ne=[...d],ce=z==="up"?ye-1:ye+1;if(ce<0||ce>=ne.length)return;const De=ne[ye];ne[ye]=ne[ce],ne[ce]=De,m(ne)},H=(ye,z)=>{const ne=d.map((ce,De)=>{if(De!==ye)return ce;const Ue=ce.positions||[],U=Ue.find(ie=>ie.name===z.name)?Ue.filter(ie=>ie.name!==z.name):[...Ue,z];return{...ce,positions:U}});m(ne)},X=(ye,z)=>{const ne=d.map((ce,De)=>{if(De!==ye)return ce;const Ue=ce.preferredDays||[],U=Ue.includes(z)?Ue.filter(ie=>ie!==z):[...Ue,z];return{...ce,preferredDays:U}});m(ne)},se=(ye,z)=>{const ne=d.map((ce,De)=>De!==ye?ce:{...ce,allowAbsence:z});m(ne)},ue=ye=>{const z=g.positions||[],ne=z.some(ce=>ce.name===ye.name)?z.filter(ce=>ce.name!==ye.name):[...z,ye];y({...g,positions:ne})},G=ye=>{const z=g.preferredDays||[],ne=z.includes(ye)?z.filter(ce=>ce!==ye):[...z,ye];y({...g,preferredDays:ne})},A=ye=>{y({...g,allowAbsence:ye})},R=()=>{if(!g.name.trim()||!g.emoji.trim())return alert("Please provide both an emoji and a name for the team.");m([...d,g]),y(GS)},x=ye=>{window.confirm("Are you sure you want to delete this team?")&&m(d.filter((z,ne)=>ne!==ye))},N=async()=>{S("saving");try{const ye=d.map(z=>({name:z.name||"",emoji:z.emoji||"",maxConflict:z.maxConflict||1,allowAbsence:z.allowAbsence!==!1,preferredDays:z.preferredDays||[],positions:(z.positions||[]).map(ne=>({name:ne.name||"",emoji:ne.emoji||"",colour:ne.colour||"",sortByGender:!!ne.sortByGender,isCustom:!!ne.isCustom,customLabels:ne.customLabels||[],...ne.parentId?{parentId:ne.parentId}:{}}))}));await n(Yf(ye)).unwrap(),S("success"),setTimeout(()=>S("idle"),2e3)}catch(ye){console.error("Save Error:",ye),alert("Error saving: "+(ye instanceof Error?ye.message:"Unknown error")),S("idle")}},M=()=>{m(e)};if(a||c)return T.jsx(Zl,{});const V=()=>{if(!g.positions||g.positions.length===0)return"No positions";const ye=g.positions.slice(0,3).map(ne=>T.jsx("span",{className:Ol.summaryEmoji,children:ne.emoji},ne.name)),z=g.positions.length-3;return T.jsxs(T.Fragment,{children:[ye,z>0&&T.jsxs("span",{className:Ol.remainingCount,children:["+",z]})]})},D=()=>!g.preferredDays||g.preferredDays.length===0?"No days":g.preferredDays.map(ye=>ye.substring(0,3)).join(", ");return T.jsxs("div",{className:Ol.managementWrapper,children:[T.jsxs(F_,{headers:[{text:"Name",minWidth:100,width:120,textAlign:"center",isSticky:!0},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Conflicts",width:60,textAlign:"center"},{text:"Config",minWidth:180,textAlign:"center"},{text:"",width:50}],children:[d.map((ye,z)=>T.jsx(_9,{team:ye,teamIndex:z,availablePositions:s,onUpdate:k,onMove:K,onDelete:x,onTogglePosition:H,onToggleDay:X,onToggleAllowAbsence:se,isFirst:z===0,isLast:z===d.length-1},`${ye.emoji}-${z}`)),T.jsxs("tr",{className:"team-row-new",children:[T.jsx(ri,{name:"new-team-name",value:g.name,placeholder:"Team Name",onChange:ye=>y({...g,name:ye.target.value}),isSticky:!0}),T.jsx(un,{children:""}),T.jsx(ri,{name:"new-team-emoji",value:g.emoji,placeholder:"",onChange:ye=>y({...g,emoji:ye.target.value})}),T.jsx(ri,{name:"new-team-maxConflict",value:((me=g.maxConflict)==null?void 0:me.toString())||"1",type:"number",onChange:ye=>y({...g,maxConflict:parseInt(ye.target.value)||1})}),T.jsx(un,{children:T.jsx(q_,{primaryText:V(),secondaryText:D(),onClick:()=>O(!0)})}),T.jsx(un,{children:T.jsxs(ni,{onClick:R,disabled:!g.name.trim()||!g.emoji.trim(),children:[T.jsx(mm,{size:16,style:{marginRight:"6px"}}),"Add"]})})]})]}),T.jsx(kC,{isOpen:w,onClose:()=>O(!1),team:g,availablePositions:s,onTogglePosition:ue,onToggleDay:G,onToggleAllowAbsence:A}),q&&T.jsx(eu,{label:"Unsaved team changes",saveText:"Save All Team Changes",onSave:N,onCancel:M,isSaving:E==="saving"})]})},E9={allUsers:[],originalUsers:[],loading:!1,saving:!1,error:null},td=Br("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=Fc(Ln,"users"),a=$c(t),s=await Yc(a),l=[];return s.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),nd=Br("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=w1(Ln);n.forEach(a=>{const{id:s,...l}=a;l.teamPositions&&(l.indexedAssignments=CC(l.teamPositions)),t.update(ai(Ln,"users",s),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),LC=wo({name:"userManagement",initialState:E9,reducers:{updateUserField(n,e){const{id:t,field:a,value:s}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[a]=s)},toggleUserTeam(n,e){const{userId:t,teamName:a}=e.payload,s=n.allUsers.find(l=>l.id===t);if(s){const l=s.teams||[],c=l.includes(a)?l.filter(d=>d!==a):[...l,a];s.teams=c,s.teamPositions||(s.teamPositions={}),c.includes(a)?s.teamPositions[a]||(s.teamPositions[a]=[]):delete s.teamPositions[a]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:a,posName:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[a]||(l.teamPositions[a]=[]);const c=l.teamPositions[a],d=c.includes(s)?c.filter(m=>m!==s):[...c,s];l.teamPositions[a]=d}},moveUserTeam(n,e){const{userId:t,teamName:a,direction:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l&&l.teams){const c=l.teams.indexOf(a);if(c===-1)return;const d=s==="up"?c-1:c+1;if(d<0||d>=l.teams.length)return;const m=[...l.teams];[m[c],m[d]]=[m[d],m[c]],l.teams=m}},resetUserChanges(n){n.allUsers=JSON.parse(JSON.stringify(n.originalUsers))}},extraReducers:n=>{n.addCase(td.pending,e=>{e.loading=!0,e.error=null}).addCase(td.fulfilled,(e,t)=>{e.allUsers=t.payload,e.originalUsers=JSON.parse(JSON.stringify(t.payload)),e.loading=!1}).addCase(td.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(nd.pending,e=>{e.saving=!0,e.error=null}).addCase(nd.fulfilled,e=>{e.saving=!1,e.originalUsers=JSON.parse(JSON.stringify(e.allUsers))}).addCase(nd.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:T9,toggleUserTeam:b9,toggleUserTeamPosition:S9,moveUserTeam:A9,resetUserChanges:w9}=LC.actions,C9=LC.reducer,R9=({isOpen:n,onClose:e,user:t,availableTeams:a})=>{const s=li(),{positions:l}=ot(g=>g.positions),c=g=>{s(b9({userId:t.id,teamName:g}))},d=(g,y)=>{s(S9({userId:t.id,teamName:g,posName:y}))},m=(g,y)=>{s(A9({userId:t.id,teamName:g,direction:y}))};return T.jsx(VC,{isOpen:n,onClose:e,title:`Edit Assignments: ${t.name}`,children:T.jsx(DC,{selectedTeams:t.teams||[],teamPositions:t.teamPositions||{},onToggleTeam:c,onTogglePosition:d,onMoveTeam:m,availableTeams:a,globalPositions:l})})},I9=({user:n,availableTeams:e,adminEmail:t})=>{const a=li(),{positions:s}=ot(y=>y.positions),[l,c]=P.useState(!1),d=(y,E)=>{a(T9({id:n.id,field:y,value:E}))},m=()=>{if(!n.teams||n.teams.length===0)return"No teams";const y=n.teams.map(w=>{const O=e.find(q=>q.name===w);return(O==null?void 0:O.emoji)||""}).filter(Boolean),E=y.slice(0,3).map((w,O)=>T.jsx("span",{className:Rn.summaryEmoji,children:w},O)),S=y.length-3;return T.jsxs(T.Fragment,{children:[E,S>0&&T.jsxs("span",{className:Rn.remainingCount,children:["+",S]})]})},g=()=>n.teamPositions?Object.entries(n.teamPositions).reduce((y,[,E])=>{const S=E.filter(w=>{const O=s.find(q=>q.name===w);return!(O!=null&&O.isCustom)});return y+S.length},0):0;return T.jsxs(T.Fragment,{children:[T.jsxs("tr",{children:[T.jsx(ri,{name:`name-${n.id}`,value:n.name||"",onChange:y=>d("name",y.target.value),isSticky:!0}),T.jsx(ri,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),T.jsx(un,{children:T.jsxs("select",{name:`gender-${n.id}`,className:_a.formSelect,value:n.gender,onChange:y=>d("gender",y.target.value),children:[T.jsx("option",{value:"",children:"-"}),T.jsx("option",{value:"Male",children:"Male"}),T.jsx("option",{value:"Female",children:"Female"})]})}),T.jsx(un,{children:T.jsx(q_,{primaryText:m(),secondaryText:`(${g()} pos)`,onClick:()=>c(!0)})}),T.jsx(un,{textAlign:"center",children:T.jsx(br,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>d("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),T.jsx(un,{textAlign:"center",children:T.jsx(br,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>d("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),T.jsx(un,{textAlign:"center",children:T.jsx(br,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>d("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id),T.jsx(R9,{isOpen:l,onClose:()=>c(!1),user:n,availableTeams:e})]})},x9=()=>{const n=li(),{allUsers:e,originalUsers:t,loading:a,saving:s,error:l}=ot(y=>y.userManagement),c=ot(y=>y.teams.teams),d=P.useMemo(()=>{const y=E=>E.map(S=>({name:S.name||"",gender:S.gender||"",teams:[...S.teams||[]].sort(),teamPositions:Object.keys(S.teamPositions||{}).sort().reduce((w,O)=>{var q;return w[O]=[...((q=S.teamPositions)==null?void 0:q[O])||[]].sort(),w},{}),isActive:!!S.isActive,isApproved:!!S.isApproved,isAdmin:!!S.isAdmin}));return JSON.stringify(y(e))!==JSON.stringify(y(t))},[e,t]);P.useEffect(()=>{n(td())},[n]);const m=()=>{n(nd(e))},g=()=>{n(w9())};return a?T.jsx(Zl,{}):l?T.jsxs("div",{children:["Error: ",l]}):T.jsxs("div",{className:Ol.managementWrapper,children:[T.jsx(F_,{headers:[{text:"Name",minWidth:70,width:100,textAlign:"center",isSticky:!0},{text:"Email",minWidth:170,textAlign:"center"},{text:"Gender",minWidth:90,textAlign:"center"},{text:"Assignments",minWidth:150,textAlign:"center"},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(y=>T.jsx(I9,{user:y,availableTeams:c,adminEmail:"chris.sm.kang542@gmail.com"},y.id))}),d&&T.jsx(eu,{label:"Unsaved user changes",saveText:"Save All User Changes",onSave:m,onCancel:g,isSaving:s})]})},N9=()=>{const{userData:n}=ot(t=>t.auth),{section:e}=Ld();return n?T.jsxs("div",{className:Ol.settingsContainer,children:[e===bl.PROFILE&&T.jsx(MC,{}),e===bl.USER_MANAGEMENT&&(n.isAdmin?T.jsx(x9,{}):T.jsx("p",{children:"Access Denied"})),e===bl.TEAMS&&(n.isAdmin?T.jsx(v9,{}):T.jsx("p",{children:"Access Denied"})),e===bl.POSITIONS&&(n.isAdmin?T.jsx(c9,{}):T.jsx("p",{children:"Access Denied"}))]}):null},D9=[{path:"/",element:T.jsx(Pk,{})},{path:"/login",element:T.jsx(G3,{})},{path:"/guest",element:T.jsx(L3,{})},{path:"/app",element:T.jsx(kL,{}),children:[{path:"",element:T.jsx(eU,{}),children:[{path:"dashboard",element:T.jsx(QU,{})},{path:"roster/:teamName?/:positionName?",element:T.jsx(t9,{})},{path:"settings/:section?",element:T.jsx(N9,{})}]}]}];let $S=!1;const O9=n=>{if(!$S){$S=!0;let e;dV(Hl,t=>{if(t){n.dispatch(v3(t)),n.dispatch(Zf(t.uid));const a=ai(Ln,"users",t.uid);e=SP(a,s=>{if(s.exists()){const l=s.data();n.dispatch(E3(l))}})}else n.dispatch(T3()),e&&e()})}return e=>t=>e(t)},M9=hL({reducer:{auth:b3,positions:ML,roster:fU,rosterView:_U,teams:VL,ui:vj,userManagement:C9},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(O9)}),P9=lD(D9);RI.createRoot(document.getElementById("root")).render(T.jsx(YS.StrictMode,{children:T.jsx(HI,{store:M9,children:T.jsx(SD,{children:T.jsx(xk,{children:T.jsx(TD,{router:P9})})})})}));
