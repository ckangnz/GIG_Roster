var lI=Object.defineProperty;var uI=(n,e,t)=>e in n?lI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var og=(n,e,t)=>uI(n,typeof e!="symbol"?e+"":e,t);function cI(n,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function qS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lg={exports:{}},Gu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb;function hI(){if(lb)return Gu;lb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:a,key:c,ref:s!==void 0?s:null,props:l}}return Gu.Fragment=e,Gu.jsx=t,Gu.jsxs=t,Gu}var ub;function fI(){return ub||(ub=1,lg.exports=hI()),lg.exports}var A=fI(),ug={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function dI(){if(cb)return We;cb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function R(U){return U===null||typeof U!="object"?null:(U=b&&U[b]||U["@@iterator"],typeof U=="function"?U:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,j={};function Y(U,$,oe){this.props=U,this.context=$,this.refs=j,this.updater=oe||k}Y.prototype.isReactComponent={},Y.prototype.setState=function(U,$){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,$,"setState")},Y.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function B(){}B.prototype=Y.prototype;function G(U,$,oe){this.props=U,this.context=$,this.refs=j,this.updater=oe||k}var Z=G.prototype=new B;Z.constructor=G,z(Z,Y.prototype),Z.isPureReactComponent=!0;var ae=Array.isArray;function te(){}var S={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function I(U,$,oe){var ce=oe.ref;return{$$typeof:n,type:U,key:$,ref:ce!==void 0?ce:null,props:oe}}function O(U,$){return I(U.type,$,U.props)}function x(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function M(U){var $={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(oe){return $[oe]})}var D=/\/+/g;function pe(U,$){return typeof U=="object"&&U!==null&&U.key!=null?M(""+U.key):$.toString(36)}function Se(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(te,te):(U.status="pending",U.then(function($){U.status==="pending"&&(U.status="fulfilled",U.value=$)},function($){U.status==="pending"&&(U.status="rejected",U.reason=$)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function H(U,$,oe,ce,ye){var Te=typeof U;(Te==="undefined"||Te==="boolean")&&(U=null);var Ue=!1;if(U===null)Ue=!0;else switch(Te){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(U.$$typeof){case n:case e:Ue=!0;break;case y:return Ue=U._init,H(Ue(U._payload),$,oe,ce,ye)}}if(Ue)return ye=ye(U),Ue=ce===""?"."+pe(U,0):ce,ae(ye)?(oe="",Ue!=null&&(oe=Ue.replace(D,"$&/")+"/"),H(ye,$,oe,"",function(Yt){return Yt})):ye!=null&&(x(ye)&&(ye=O(ye,oe+(ye.key==null||U&&U.key===ye.key?"":(""+ye.key).replace(D,"$&/")+"/")+Ue)),$.push(ye)),1;Ue=0;var Ke=ce===""?".":ce+":";if(ae(U))for(var ot=0;ot<U.length;ot++)ce=U[ot],Te=Ke+pe(ce,ot),Ue+=H(ce,$,oe,Te,ye);else if(ot=R(U),typeof ot=="function")for(U=ot.call(U),ot=0;!(ce=U.next()).done;)ce=ce.value,Te=Ke+pe(ce,ot++),Ue+=H(ce,$,oe,Te,ye);else if(Te==="object"){if(typeof U.then=="function")return H(Se(U),$,oe,ce,ye);throw $=String(U),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function fe(U,$,oe){if(U==null)return U;var ce=[],ye=0;return H(U,ce,"","",function(Te){return $.call(oe,Te,ye++)}),ce}function ge(U){if(U._status===-1){var $=U._result;$=$(),$.then(function(oe){(U._status===0||U._status===-1)&&(U._status=1,U._result=oe)},function(oe){(U._status===0||U._status===-1)&&(U._status=2,U._result=oe)}),U._status===-1&&(U._status=0,U._result=$)}if(U._status===1)return U._result.default;throw U._result}var Pe=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Me={map:fe,forEach:function(U,$,oe){fe(U,function(){$.apply(this,arguments)},oe)},count:function(U){var $=0;return fe(U,function(){$++}),$},toArray:function(U){return fe(U,function($){return $})||[]},only:function(U){if(!x(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return We.Activity=E,We.Children=Me,We.Component=Y,We.Fragment=t,We.Profiler=s,We.PureComponent=G,We.StrictMode=a,We.Suspense=p,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,We.__COMPILER_RUNTIME={__proto__:null,c:function(U){return S.H.useMemoCache(U)}},We.cache=function(U){return function(){return U.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(U,$,oe){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ce=z({},U.props),ye=U.key;if($!=null)for(Te in $.key!==void 0&&(ye=""+$.key),$)!w.call($,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&$.ref===void 0||(ce[Te]=$[Te]);var Te=arguments.length-2;if(Te===1)ce.children=oe;else if(1<Te){for(var Ue=Array(Te),Ke=0;Ke<Te;Ke++)Ue[Ke]=arguments[Ke+2];ce.children=Ue}return I(U.type,ye,ce)},We.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},We.createElement=function(U,$,oe){var ce,ye={},Te=null;if($!=null)for(ce in $.key!==void 0&&(Te=""+$.key),$)w.call($,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ye[ce]=$[ce]);var Ue=arguments.length-2;if(Ue===1)ye.children=oe;else if(1<Ue){for(var Ke=Array(Ue),ot=0;ot<Ue;ot++)Ke[ot]=arguments[ot+2];ye.children=Ke}if(U&&U.defaultProps)for(ce in Ue=U.defaultProps,Ue)ye[ce]===void 0&&(ye[ce]=Ue[ce]);return I(U,Te,ye)},We.createRef=function(){return{current:null}},We.forwardRef=function(U){return{$$typeof:d,render:U}},We.isValidElement=x,We.lazy=function(U){return{$$typeof:y,_payload:{_status:-1,_result:U},_init:ge}},We.memo=function(U,$){return{$$typeof:g,type:U,compare:$===void 0?null:$}},We.startTransition=function(U){var $=S.T,oe={};S.T=oe;try{var ce=U(),ye=S.S;ye!==null&&ye(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(te,Pe)}catch(Te){Pe(Te)}finally{$!==null&&oe.types!==null&&($.types=oe.types),S.T=$}},We.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},We.use=function(U){return S.H.use(U)},We.useActionState=function(U,$,oe){return S.H.useActionState(U,$,oe)},We.useCallback=function(U,$){return S.H.useCallback(U,$)},We.useContext=function(U){return S.H.useContext(U)},We.useDebugValue=function(){},We.useDeferredValue=function(U,$){return S.H.useDeferredValue(U,$)},We.useEffect=function(U,$){return S.H.useEffect(U,$)},We.useEffectEvent=function(U){return S.H.useEffectEvent(U)},We.useId=function(){return S.H.useId()},We.useImperativeHandle=function(U,$,oe){return S.H.useImperativeHandle(U,$,oe)},We.useInsertionEffect=function(U,$){return S.H.useInsertionEffect(U,$)},We.useLayoutEffect=function(U,$){return S.H.useLayoutEffect(U,$)},We.useMemo=function(U,$){return S.H.useMemo(U,$)},We.useOptimistic=function(U,$){return S.H.useOptimistic(U,$)},We.useReducer=function(U,$,oe){return S.H.useReducer(U,$,oe)},We.useRef=function(U){return S.H.useRef(U)},We.useState=function(U){return S.H.useState(U)},We.useSyncExternalStore=function(U,$,oe){return S.H.useSyncExternalStore(U,$,oe)},We.useTransition=function(){return S.H.useTransition()},We.version="19.2.4",We}var hb;function xd(){return hb||(hb=1,ug.exports=dI()),ug.exports}var P=xd();const GS=qS(P),mI=cI({__proto__:null,default:GS},[P]);var cg={exports:{}},$u={},hg={exports:{}},fg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb;function pI(){return fb||(fb=1,(function(n){function e(H,fe){var ge=H.length;H.push(fe);e:for(;0<ge;){var Pe=ge-1>>>1,Me=H[Pe];if(0<s(Me,fe))H[Pe]=fe,H[ge]=Me,ge=Pe;else break e}}function t(H){return H.length===0?null:H[0]}function a(H){if(H.length===0)return null;var fe=H[0],ge=H.pop();if(ge!==fe){H[0]=ge;e:for(var Pe=0,Me=H.length,U=Me>>>1;Pe<U;){var $=2*(Pe+1)-1,oe=H[$],ce=$+1,ye=H[ce];if(0>s(oe,ge))ce<Me&&0>s(ye,oe)?(H[Pe]=ye,H[ce]=ge,Pe=ce):(H[Pe]=oe,H[$]=ge,Pe=$);else if(ce<Me&&0>s(ye,ge))H[Pe]=ye,H[ce]=ge,Pe=ce;else break e}}return fe}function s(H,fe){var ge=H.sortIndex-fe.sortIndex;return ge!==0?ge:H.id-fe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],y=1,E=null,b=3,R=!1,k=!1,z=!1,j=!1,Y=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function Z(H){for(var fe=t(g);fe!==null;){if(fe.callback===null)a(g);else if(fe.startTime<=H)a(g),fe.sortIndex=fe.expirationTime,e(p,fe);else break;fe=t(g)}}function ae(H){if(z=!1,Z(H),!k)if(t(p)!==null)k=!0,te||(te=!0,M());else{var fe=t(g);fe!==null&&Se(ae,fe.startTime-H)}}var te=!1,S=-1,w=5,I=-1;function O(){return j?!0:!(n.unstable_now()-I<w)}function x(){if(j=!1,te){var H=n.unstable_now();I=H;var fe=!0;try{e:{k=!1,z&&(z=!1,B(S),S=-1),R=!0;var ge=b;try{t:{for(Z(H),E=t(p);E!==null&&!(E.expirationTime>H&&O());){var Pe=E.callback;if(typeof Pe=="function"){E.callback=null,b=E.priorityLevel;var Me=Pe(E.expirationTime<=H);if(H=n.unstable_now(),typeof Me=="function"){E.callback=Me,Z(H),fe=!0;break t}E===t(p)&&a(p),Z(H)}else a(p);E=t(p)}if(E!==null)fe=!0;else{var U=t(g);U!==null&&Se(ae,U.startTime-H),fe=!1}}break e}finally{E=null,b=ge,R=!1}fe=void 0}}finally{fe?M():te=!1}}}var M;if(typeof G=="function")M=function(){G(x)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,pe=D.port2;D.port1.onmessage=x,M=function(){pe.postMessage(null)}}else M=function(){Y(x,0)};function Se(H,fe){S=Y(function(){H(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(H){switch(b){case 1:case 2:case 3:var fe=3;break;default:fe=b}var ge=b;b=fe;try{return H()}finally{b=ge}},n.unstable_requestPaint=function(){j=!0},n.unstable_runWithPriority=function(H,fe){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ge=b;b=H;try{return fe()}finally{b=ge}},n.unstable_scheduleCallback=function(H,fe,ge){var Pe=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Pe+ge:Pe):ge=Pe,H){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=ge+Me,H={id:y++,callback:fe,priorityLevel:H,startTime:ge,expirationTime:Me,sortIndex:-1},ge>Pe?(H.sortIndex=ge,e(g,H),t(p)===null&&H===t(g)&&(z?(B(S),S=-1):z=!0,Se(ae,ge-Pe))):(H.sortIndex=Me,e(p,H),k||R||(k=!0,te||(te=!0,M()))),H},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(H){var fe=b;return function(){var ge=b;b=fe;try{return H.apply(this,arguments)}finally{b=ge}}}})(fg)),fg}var db;function gI(){return db||(db=1,hg.exports=pI()),hg.exports}var dg={exports:{}},Hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb;function yI(){if(mb)return Hn;mb=1;var n=xd();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,g,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:p,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Hn.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,y)},Hn.flushSync=function(p){var g=c.T,y=a.p;try{if(c.T=null,a.p=2,p)return p()}finally{c.T=g,a.p=y,a.d.f()}},Hn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},Hn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},Hn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,E=d(y,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:R}):y==="script"&&a.d.X(p,{crossOrigin:E,integrity:b,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Hn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},Hn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,E=d(y,g.crossOrigin);a.d.L(p,y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Hn.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=d(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},Hn.requestFormReset=function(p){a.d.r(p)},Hn.unstable_batchedUpdates=function(p,g){return p(g)},Hn.useFormState=function(p,g,y){return c.H.useFormState(p,g,y)},Hn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Hn.version="19.2.4",Hn}var pb;function $S(){if(pb)return dg.exports;pb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dg.exports=yI(),dg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gb;function _I(){if(gb)return $u;gb=1;var n=gI(),e=xd(),t=$S();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(a(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,u=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),r;if(m===u)return p(f),i;m=m.sibling}throw Error(a(188))}if(o.return!==u.return)o=f,u=m;else{for(var v=!1,C=f.child;C;){if(C===o){v=!0,o=f,u=m;break}if(C===u){v=!0,u=f,o=m;break}C=C.sibling}if(!v){for(C=m.child;C;){if(C===o){v=!0,o=m,u=f;break}if(C===u){v=!0,u=m,o=f;break}C=C.sibling}if(!v)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function y(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=y(r),i!==null)return i;r=r.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),G=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function M(r){return r===null||typeof r!="object"?null:(r=x&&r[x]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function pe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case z:return"Fragment";case Y:return"Profiler";case j:return"StrictMode";case ae:return"Suspense";case te:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case G:return r.displayName||"Context";case B:return(r._context.displayName||"Context")+".Consumer";case Z:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case S:return i=r.displayName||null,i!==null?i:pe(r.type)||"Memo";case w:i=r._payload,r=r._init;try{return pe(r(i))}catch{}}return null}var Se=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Pe=[],Me=-1;function U(r){return{current:r}}function $(r){0>Me||(r.current=Pe[Me],Pe[Me]=null,Me--)}function oe(r,i){Me++,Pe[Me]=r.current,r.current=i}var ce=U(null),ye=U(null),Te=U(null),Ue=U(null);function Ke(r,i){switch(oe(Te,i),oe(ye,r),oe(ce,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?xT(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=xT(i),r=OT(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}$(ce),oe(ce,r)}function ot(){$(ce),$(ye),$(Te)}function Yt(r){r.memoizedState!==null&&oe(Ue,r);var i=ce.current,o=OT(i,r.type);i!==o&&(oe(ye,r),oe(ce,o))}function In(r){ye.current===r&&($(ce),$(ye)),Ue.current===r&&($(Ue),Bu._currentValue=ge)}var Et,bn;function Qt(r){if(Et===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Et=i&&i[1]||"",bn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Et+r+bn}var ne=!1;function _e(r,i){if(!r||ne)return"";ne=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ie){var ee=ie}Reflect.construct(r,[],he)}else{try{he.call()}catch(ie){ee=ie}r.call(he.prototype)}}else{try{throw Error()}catch(ie){ee=ie}(he=r())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ie){if(ie&&ee&&typeof ie.stack=="string")return[ie.stack,ee.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],C=m[1];if(v&&C){var L=v.split(`
`),W=C.split(`
`);for(f=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;f<W.length&&!W[f].includes("DetermineComponentFrameRoot");)f++;if(u===L.length||f===W.length)for(u=L.length-1,f=W.length-1;1<=u&&0<=f&&L[u]!==W[f];)f--;for(;1<=u&&0<=f;u--,f--)if(L[u]!==W[f]){if(u!==1||f!==1)do if(u--,f--,0>f||L[u]!==W[f]){var se=`
`+L[u].replace(" at new "," at ");return r.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",r.displayName)),se}while(1<=u&&0<=f);break}}}finally{ne=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Qt(o):""}function Le(r,i){switch(r.tag){case 26:case 27:case 5:return Qt(r.type);case 16:return Qt("Lazy");case 13:return r.child!==i&&i!==null?Qt("Suspense Fallback"):Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return _e(r.type,!1);case 11:return _e(r.type.render,!1);case 1:return _e(r.type,!0);case 31:return Qt("Activity");default:return""}}function Re(r){try{var i="",o=null;do i+=Le(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var we=Object.prototype.hasOwnProperty,Fe=n.unstable_scheduleCallback,Lt=n.unstable_cancelCallback,Rt=n.unstable_shouldYield,je=n.unstable_requestPaint,Ye=n.unstable_now,Dt=n.unstable_getCurrentPriorityLevel,nr=n.unstable_ImmediatePriority,Qn=n.unstable_UserBlockingPriority,an=n.unstable_NormalPriority,Sn=n.unstable_LowPriority,Is=n.unstable_IdlePriority,Ro=n.log,Sa=n.unstable_setDisableYieldValue,mr=null,Ut=null;function Xn(r){if(typeof Ro=="function"&&Sa(r),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(mr,r)}catch{}}var Xt=Math.clz32?Math.clz32:Ns,Ds=Math.log,Aa=Math.LN2;function Ns(r){return r>>>=0,r===0?32:31-(Ds(r)/Aa|0)|0}var Wn=256,gi=262144,Wt=4194304;function Vr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function pr(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,v=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~m,u!==0?f=Vr(u):(v&=C,v!==0?f=Vr(v):o||(o=C&~r,o!==0&&(f=Vr(o))))):(C=u&~m,C!==0?f=Vr(C):v!==0?f=Vr(v):o||(o=u&~r,o!==0&&(f=Vr(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function gr(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Co(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hi(){var r=Wt;return Wt<<=1,(Wt&62914560)===0&&(Wt=4194304),r}function Jn(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function yi(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Zl(r,i,o,u,f,m){var v=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var C=r.entanglements,L=r.expirationTimes,W=r.hiddenUpdates;for(o=v&~o;0<o;){var se=31-Xt(o),he=1<<se;C[se]=0,L[se]=-1;var ee=W[se];if(ee!==null)for(W[se]=null,se=0;se<ee.length;se++){var ie=ee[se];ie!==null&&(ie.lane&=-536870913)}o&=~he}u!==0&&qi(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(v&~i))}function qi(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Xt(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function V(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Xt(o),f=1<<u;f&i|r[u]&i&&(r[u]|=i),o&=~f}}function q(r,i){var o=i&-i;return o=(o&42)!==0?1:J(o),(o&(r.suspendedLanes|i))!==0?0:o}function J(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function me(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ve(){var r=fe.p;return r!==0?r:(r=window.event,r===void 0?32:tb(r.type))}function Ie(r,i){var o=fe.p;try{return fe.p=r,i()}finally{fe.p=o}}var xe=Math.random().toString(36).slice(2),Ee="__reactFiber$"+xe,Ae="__reactProps$"+xe,Ne="__reactContainer$"+xe,qe="__reactEvents$"+xe,ke="__reactListeners$"+xe,Qe="__reactHandles$"+xe,it="__reactResources$"+xe,Nt="__reactMarker$"+xe;function qt(r){delete r[Ee],delete r[Ae],delete r[qe],delete r[ke],delete r[Qe]}function zt(r){var i=r[Ee];if(i)return i;for(var o=r.parentNode;o;){if(i=o[Ne]||o[Ee]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=jT(r);r!==null;){if(o=r[Ee])return o;r=jT(r)}return i}r=o,o=r.parentNode}return null}function tt(r){if(r=r[Ee]||r[Ne]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function Bt(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function Dn(r){var i=r[it];return i||(i=r[it]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ft(r){r[Nt]=!0}var rr=new Set,Bn={};function ir(r,i){Fn(r,i),Fn(r+"Capture",i)}function Fn(r,i){for(Bn[r]=i,r=0;r<i.length;r++)rr.add(i[r])}var yr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_i={},vi={};function st(r){return we.call(vi,r)?!0:we.call(_i,r)?!1:yr.test(r)?vi[r]=!0:(_i[r]=!0,!1)}function en(r,i,o){if(st(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function mn(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function xt(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function nt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function _r(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wa(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,m.call(this,v)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Tt(r){if(!r._valueTracker){var i=_r(r)?"checked":"value";r._valueTracker=wa(r,i,""+r[i])}}function xs(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=_r(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function Ei(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Os=/[\n"\\]/g;function ar(r){return r.replace(Os,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Io(r,i,o,u,f,m,v,C){r.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?r.type=v:r.removeAttribute("type"),i!=null?v==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+nt(i)):r.value!==""+nt(i)&&(r.value=""+nt(i)):v!=="submit"&&v!=="reset"||r.removeAttribute("value"),i!=null?eu(r,v,nt(i)):o!=null?eu(r,v,nt(o)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+nt(C):r.removeAttribute("name")}function Jc(r,i,o,u,f,m,v,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Tt(r);return}o=o!=null?""+nt(o):"",i=i!=null?""+nt(i):o,C||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.name=v),Tt(r)}function eu(r,i,o){i==="number"&&Ei(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ra(r,i,o,u){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+nt(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function Zc(r,i,o){if(i!=null&&(i=""+nt(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+nt(o):""}function Ca(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(Se(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=nt(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),Tt(r)}function sr(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var eh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tu(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||eh.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function nu(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&tu(r,f,u)}else for(var m in i)i.hasOwnProperty(m)&&tu(r,m,i[m])}function Do(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var th=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ia=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function No(r){return Ia.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ti(){}var ru=null;function kr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Da=null,Ti=null;function Ms(r){var i=tt(r);if(i&&(r=i.stateNode)){var o=r[Ae]||null;e:switch(r=i.stateNode,i.type){case"input":if(Io(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ar(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var f=u[Ae]||null;if(!f)throw Error(a(90));Io(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&xs(u)}break e;case"textarea":Zc(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ra(r,!!o.multiple,i,!1)}}}var xo=!1;function Na(r,i,o){if(xo)return r(i,o);xo=!0;try{var u=r(i);return u}finally{if(xo=!1,(Da!==null||Ti!==null)&&(Yh(),Da&&(i=Da,r=Ti,Ti=Da=null,Ms(i),r)))for(i=0;i<r.length;i++)Ms(r[i])}}function ni(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Ae]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(Lr)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch{Ps=!1}var bi=null,iu=null,Vs=null;function au(){if(Vs)return Vs;var r,i=iu,o=i.length,u,f="value"in bi?bi.value:bi.textContent,m=f.length;for(r=0;r<o&&i[r]===f[r];r++);var v=o-r;for(u=1;u<=v&&i[o-u]===f[m-u];u++);return Vs=f.slice(r,1<u?1-u:void 0)}function ks(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Gi(){return!0}function ri(){return!1}function On(r){function i(o,u,f,m,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(o=r[C],this[C]=o?o(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Gi:ri,this.isPropagationStopped=ri,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),i}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=On($i),xa=E({},$i,{view:0,detail:0}),su=On(xa),Oa,Oo,Ai,Mo=E({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ma,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ai&&(Ai&&r.type==="mousemove"?(Oa=r.screenX-Ai.screenX,Oo=r.screenY-Ai.screenY):Oo=Oa=0,Ai=r),Oa)},movementY:function(r){return"movementY"in r?r.movementY:Oo}}),ou=On(Mo),Ls=E({},Mo,{dataTransfer:0}),nh=On(Ls),rh=E({},xa,{relatedTarget:0}),Us=On(rh),lu=E({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),ih=On(lu),Po=E({},$i,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ah=On(Po),sh=E({},$i,{data:0}),wi=On(sh),oh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ch(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=uh[r])?!!i[r]:!1}function Ma(){return ch}var Zn=E({},xa,{key:function(r){if(r.key){var i=oh[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=ks(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?lh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ma,charCode:function(r){return r.type==="keypress"?ks(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ks(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),hh=On(Zn),fh=E({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=On(fh),h=E({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ma}),_=On(h),T=E({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=On(T),Q=E({},Mo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),re=On(Q),be=E({},$i,{newState:0,oldState:0}),Ze=On(be),un=[9,13,27,32],bt=Lr&&"CompositionEvent"in window,Jt=null;Lr&&"documentMode"in document&&(Jt=document.documentMode);var Ur=Lr&&"TextEvent"in window&&!Jt,Ri=Lr&&(!bt||Jt&&8<Jt&&11>=Jt),ii=" ",ai=!1;function js(r,i){switch(r){case"keyup":return un.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ko=!1;function OR(r,i){switch(r){case"compositionend":return Vo(i);case"keypress":return i.which!==32?null:(ai=!0,ii);case"textInput":return r=i.data,r===ii&&ai?null:r;default:return null}}function MR(r,i){if(ko)return r==="compositionend"||!bt&&js(r,i)?(r=au(),Vs=iu=bi=null,ko=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ri&&i.locale!=="ko"?null:i.data;default:return null}}var PR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F_(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!PR[r.type]:i==="textarea"}function H_(r,i,o,u){Da?Ti?Ti.push(u):Ti=[u]:Da=u,i=tf(i,"onChange"),0<i.length&&(o=new Si("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var uu=null,cu=null;function VR(r){wT(r,0)}function dh(r){var i=Bt(r);if(xs(i))return r}function q_(r,i){if(r==="change")return i}var G_=!1;if(Lr){var mm;if(Lr){var pm="oninput"in document;if(!pm){var $_=document.createElement("div");$_.setAttribute("oninput","return;"),pm=typeof $_.oninput=="function"}mm=pm}else mm=!1;G_=mm&&(!document.documentMode||9<document.documentMode)}function K_(){uu&&(uu.detachEvent("onpropertychange",Y_),cu=uu=null)}function Y_(r){if(r.propertyName==="value"&&dh(cu)){var i=[];H_(i,cu,r,kr(r)),Na(VR,i)}}function kR(r,i,o){r==="focusin"?(K_(),uu=i,cu=o,uu.attachEvent("onpropertychange",Y_)):r==="focusout"&&K_()}function LR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return dh(cu)}function UR(r,i){if(r==="click")return dh(i)}function jR(r,i){if(r==="input"||r==="change")return dh(i)}function zR(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var vr=typeof Object.is=="function"?Object.is:zR;function hu(r,i){if(vr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!we.call(i,f)||!vr(r[f],i[f]))return!1}return!0}function Q_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function X_(r,i){var o=Q_(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Q_(o)}}function W_(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?W_(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function J_(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Ei(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=Ei(r.document)}return i}function gm(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var BR=Lr&&"documentMode"in document&&11>=document.documentMode,Lo=null,ym=null,fu=null,_m=!1;function Z_(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;_m||Lo==null||Lo!==Ei(u)||(u=Lo,"selectionStart"in u&&gm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),fu&&hu(fu,u)||(fu=u,u=tf(ym,"onSelect"),0<u.length&&(i=new Si("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Lo)))}function zs(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Uo={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionrun:zs("Transition","TransitionRun"),transitionstart:zs("Transition","TransitionStart"),transitioncancel:zs("Transition","TransitionCancel"),transitionend:zs("Transition","TransitionEnd")},vm={},ev={};Lr&&(ev=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function Bs(r){if(vm[r])return vm[r];if(!Uo[r])return r;var i=Uo[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in ev)return vm[r]=i[o];return r}var tv=Bs("animationend"),nv=Bs("animationiteration"),rv=Bs("animationstart"),FR=Bs("transitionrun"),HR=Bs("transitionstart"),qR=Bs("transitioncancel"),iv=Bs("transitionend"),av=new Map,Em="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Em.push("scrollEnd");function si(r,i){av.set(r,i),ir(i,[r])}var mh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},jr=[],jo=0,Tm=0;function ph(){for(var r=jo,i=Tm=jo=0;i<r;){var o=jr[i];jr[i++]=null;var u=jr[i];jr[i++]=null;var f=jr[i];jr[i++]=null;var m=jr[i];if(jr[i++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}m!==0&&sv(o,f,m)}}function gh(r,i,o,u){jr[jo++]=r,jr[jo++]=i,jr[jo++]=o,jr[jo++]=u,Tm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function bm(r,i,o,u){return gh(r,i,o,u),yh(r)}function Fs(r,i){return gh(r,null,null,i),yh(r)}function sv(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&i!==null&&(f=31-Xt(o),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=o|536870912),m):null}function yh(r){if(50<Pu)throw Pu=0,xp=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var zo={};function GR(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(r,i,o,u){return new GR(r,i,o,u)}function Sm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Yi(r,i){var o=r.alternate;return o===null?(o=Er(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function ov(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function _h(r,i,o,u,f,m){var v=0;if(u=r,typeof r=="function")Sm(r)&&(v=1);else if(typeof r=="string")v=XC(r,o,ce.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=Er(31,o,i,f),r.elementType=I,r.lanes=m,r;case z:return Hs(o.children,f,m,i);case j:v=8,f|=24;break;case Y:return r=Er(12,o,i,f|2),r.elementType=Y,r.lanes=m,r;case ae:return r=Er(13,o,i,f),r.elementType=ae,r.lanes=m,r;case te:return r=Er(19,o,i,f),r.elementType=te,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case G:v=10;break e;case B:v=9;break e;case Z:v=11;break e;case S:v=14;break e;case w:v=16,u=null;break e}v=29,o=Error(a(130,r===null?"null":typeof r,"")),u=null}return i=Er(v,o,i,f),i.elementType=r,i.type=u,i.lanes=m,i}function Hs(r,i,o,u){return r=Er(7,r,u,i),r.lanes=o,r}function Am(r,i,o){return r=Er(6,r,null,i),r.lanes=o,r}function lv(r){var i=Er(18,null,null,0);return i.stateNode=r,i}function wm(r,i,o){return i=Er(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var uv=new WeakMap;function zr(r,i){if(typeof r=="object"&&r!==null){var o=uv.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Re(i)},uv.set(r,i),i)}return{value:r,source:i,stack:Re(i)}}var Bo=[],Fo=0,vh=null,du=0,Br=[],Fr=0,Pa=null,Ci=1,Ii="";function Qi(r,i){Bo[Fo++]=du,Bo[Fo++]=vh,vh=r,du=i}function cv(r,i,o){Br[Fr++]=Ci,Br[Fr++]=Ii,Br[Fr++]=Pa,Pa=r;var u=Ci;r=Ii;var f=32-Xt(u)-1;u&=~(1<<f),o+=1;var m=32-Xt(i)+f;if(30<m){var v=f-f%5;m=(u&(1<<v)-1).toString(32),u>>=v,f-=v,Ci=1<<32-Xt(i)+f|o<<f|u,Ii=m+r}else Ci=1<<m|o<<f|u,Ii=r}function Rm(r){r.return!==null&&(Qi(r,1),cv(r,1,0))}function Cm(r){for(;r===vh;)vh=Bo[--Fo],Bo[Fo]=null,du=Bo[--Fo],Bo[Fo]=null;for(;r===Pa;)Pa=Br[--Fr],Br[Fr]=null,Ii=Br[--Fr],Br[Fr]=null,Ci=Br[--Fr],Br[Fr]=null}function hv(r,i){Br[Fr++]=Ci,Br[Fr++]=Ii,Br[Fr++]=Pa,Ci=i.id,Ii=i.overflow,Pa=r}var Mn=null,Gt=null,gt=!1,Va=null,Hr=!1,Im=Error(a(519));function ka(r){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mu(zr(i,r)),Im}function fv(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[Ee]=r,i[Ae]=u,o){case"dialog":ut("cancel",i),ut("close",i);break;case"iframe":case"object":case"embed":ut("load",i);break;case"video":case"audio":for(o=0;o<ku.length;o++)ut(ku[o],i);break;case"source":ut("error",i);break;case"img":case"image":case"link":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"input":ut("invalid",i),Jc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ut("invalid",i);break;case"textarea":ut("invalid",i),Ca(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||DT(i.textContent,o)?(u.popover!=null&&(ut("beforetoggle",i),ut("toggle",i)),u.onScroll!=null&&ut("scroll",i),u.onScrollEnd!=null&&ut("scrollend",i),u.onClick!=null&&(i.onclick=ti),i=!0):i=!1,i||ka(r,!0)}function dv(r){for(Mn=r.return;Mn;)switch(Mn.tag){case 5:case 31:case 13:Hr=!1;return;case 27:case 3:Hr=!0;return;default:Mn=Mn.return}}function Ho(r){if(r!==Mn)return!1;if(!gt)return dv(r),gt=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||$p(r.type,r.memoizedProps)),o=!o),o&&Gt&&ka(r),dv(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Gt=UT(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Gt=UT(r)}else i===27?(i=Gt,Xa(r.type)?(r=Wp,Wp=null,Gt=r):Gt=i):Gt=Mn?Gr(r.stateNode.nextSibling):null;return!0}function qs(){Gt=Mn=null,gt=!1}function Dm(){var r=Va;return r!==null&&(cr===null?cr=r:cr.push.apply(cr,r),Va=null),r}function mu(r){Va===null?Va=[r]:Va.push(r)}var Nm=U(null),Gs=null,Xi=null;function La(r,i,o){oe(Nm,i._currentValue),i._currentValue=o}function Wi(r){r._currentValue=Nm.current,$(Nm)}function xm(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function Om(r,i,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=f;for(var L=0;L<i.length;L++)if(C.context===i[L]){m.lanes|=o,C=m.alternate,C!==null&&(C.lanes|=o),xm(m.return,o,r),u||(v=null);break e}m=C.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(a(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),xm(v,o,r),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===r){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function qo(r,i,o,u){r=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var C=f.type;vr(f.pendingProps.value,v.value)||(r!==null?r.push(C):r=[C])}}else if(f===Ue.current){if(v=f.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Bu):r=[Bu])}f=f.return}r!==null&&Om(i,r,o,u),i.flags|=262144}function Eh(r){for(r=r.firstContext;r!==null;){if(!vr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function $s(r){Gs=r,Xi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Pn(r){return mv(Gs,r)}function Th(r,i){return Gs===null&&$s(r),mv(r,i)}function mv(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Xi===null){if(r===null)throw Error(a(308));Xi=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Xi=Xi.next=i;return o}var $R=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},KR=n.unstable_scheduleCallback,YR=n.unstable_NormalPriority,pn={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mm(){return{controller:new $R,data:new Map,refCount:0}}function pu(r){r.refCount--,r.refCount===0&&KR(YR,function(){r.controller.abort()})}var gu=null,Pm=0,Go=0,$o=null;function QR(r,i){if(gu===null){var o=gu=[];Pm=0,Go=Lp(),$o={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Pm++,i.then(pv,pv),i}function pv(){if(--Pm===0&&gu!==null){$o!==null&&($o.status="fulfilled");var r=gu;gu=null,Go=0,$o=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function XR(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var gv=H.S;H.S=function(r,i){ZE=Ye(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&QR(r,i),gv!==null&&gv(r,i)};var Ks=U(null);function Vm(){var r=Ks.current;return r!==null?r:jt.pooledCache}function bh(r,i){i===null?oe(Ks,Ks.current):oe(Ks,i.pool)}function yv(){var r=Vm();return r===null?null:{parent:pn._currentValue,pool:r}}var Ko=Error(a(460)),km=Error(a(474)),Sh=Error(a(542)),Ah={then:function(){}};function _v(r){return r=r.status,r==="fulfilled"||r==="rejected"}function vv(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(ti,ti),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Tv(r),r;default:if(typeof i.status=="string")i.then(ti,ti);else{if(r=jt,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Tv(r),r}throw Qs=i,Ko}}function Ys(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Qs=o,Ko):o}}var Qs=null;function Ev(){if(Qs===null)throw Error(a(459));var r=Qs;return Qs=null,r}function Tv(r){if(r===Ko||r===Sh)throw Error(a(483))}var Yo=null,yu=0;function wh(r){var i=yu;return yu+=1,Yo===null&&(Yo=[]),vv(Yo,r,i)}function _u(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Rh(r,i){throw i.$$typeof===b?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function bv(r){function i(K,F){if(r){var X=K.deletions;X===null?(K.deletions=[F],K.flags|=16):X.push(F)}}function o(K,F){if(!r)return null;for(;F!==null;)i(K,F),F=F.sibling;return null}function u(K){for(var F=new Map;K!==null;)K.key!==null?F.set(K.key,K):F.set(K.index,K),K=K.sibling;return F}function f(K,F){return K=Yi(K,F),K.index=0,K.sibling=null,K}function m(K,F,X){return K.index=X,r?(X=K.alternate,X!==null?(X=X.index,X<F?(K.flags|=67108866,F):X):(K.flags|=67108866,F)):(K.flags|=1048576,F)}function v(K){return r&&K.alternate===null&&(K.flags|=67108866),K}function C(K,F,X,le){return F===null||F.tag!==6?(F=Am(X,K.mode,le),F.return=K,F):(F=f(F,X),F.return=K,F)}function L(K,F,X,le){var ze=X.type;return ze===z?se(K,F,X.props.children,le,X.key):F!==null&&(F.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===w&&Ys(ze)===F.type)?(F=f(F,X.props),_u(F,X),F.return=K,F):(F=_h(X.type,X.key,X.props,null,K.mode,le),_u(F,X),F.return=K,F)}function W(K,F,X,le){return F===null||F.tag!==4||F.stateNode.containerInfo!==X.containerInfo||F.stateNode.implementation!==X.implementation?(F=wm(X,K.mode,le),F.return=K,F):(F=f(F,X.children||[]),F.return=K,F)}function se(K,F,X,le,ze){return F===null||F.tag!==7?(F=Hs(X,K.mode,le,ze),F.return=K,F):(F=f(F,X),F.return=K,F)}function he(K,F,X){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Am(""+F,K.mode,X),F.return=K,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case R:return X=_h(F.type,F.key,F.props,null,K.mode,X),_u(X,F),X.return=K,X;case k:return F=wm(F,K.mode,X),F.return=K,F;case w:return F=Ys(F),he(K,F,X)}if(Se(F)||M(F))return F=Hs(F,K.mode,X,null),F.return=K,F;if(typeof F.then=="function")return he(K,wh(F),X);if(F.$$typeof===G)return he(K,Th(K,F),X);Rh(K,F)}return null}function ee(K,F,X,le){var ze=F!==null?F.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return ze!==null?null:C(K,F,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case R:return X.key===ze?L(K,F,X,le):null;case k:return X.key===ze?W(K,F,X,le):null;case w:return X=Ys(X),ee(K,F,X,le)}if(Se(X)||M(X))return ze!==null?null:se(K,F,X,le,null);if(typeof X.then=="function")return ee(K,F,wh(X),le);if(X.$$typeof===G)return ee(K,F,Th(K,X),le);Rh(K,X)}return null}function ie(K,F,X,le,ze){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return K=K.get(X)||null,C(F,K,""+le,ze);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case R:return K=K.get(le.key===null?X:le.key)||null,L(F,K,le,ze);case k:return K=K.get(le.key===null?X:le.key)||null,W(F,K,le,ze);case w:return le=Ys(le),ie(K,F,X,le,ze)}if(Se(le)||M(le))return K=K.get(X)||null,se(F,K,le,ze,null);if(typeof le.then=="function")return ie(K,F,X,wh(le),ze);if(le.$$typeof===G)return ie(K,F,X,Th(F,le),ze);Rh(F,le)}return null}function Oe(K,F,X,le){for(var ze=null,_t=null,Ve=F,rt=F=0,ft=null;Ve!==null&&rt<X.length;rt++){Ve.index>rt?(ft=Ve,Ve=null):ft=Ve.sibling;var vt=ee(K,Ve,X[rt],le);if(vt===null){Ve===null&&(Ve=ft);break}r&&Ve&&vt.alternate===null&&i(K,Ve),F=m(vt,F,rt),_t===null?ze=vt:_t.sibling=vt,_t=vt,Ve=ft}if(rt===X.length)return o(K,Ve),gt&&Qi(K,rt),ze;if(Ve===null){for(;rt<X.length;rt++)Ve=he(K,X[rt],le),Ve!==null&&(F=m(Ve,F,rt),_t===null?ze=Ve:_t.sibling=Ve,_t=Ve);return gt&&Qi(K,rt),ze}for(Ve=u(Ve);rt<X.length;rt++)ft=ie(Ve,K,rt,X[rt],le),ft!==null&&(r&&ft.alternate!==null&&Ve.delete(ft.key===null?rt:ft.key),F=m(ft,F,rt),_t===null?ze=ft:_t.sibling=ft,_t=ft);return r&&Ve.forEach(function(ts){return i(K,ts)}),gt&&Qi(K,rt),ze}function He(K,F,X,le){if(X==null)throw Error(a(151));for(var ze=null,_t=null,Ve=F,rt=F=0,ft=null,vt=X.next();Ve!==null&&!vt.done;rt++,vt=X.next()){Ve.index>rt?(ft=Ve,Ve=null):ft=Ve.sibling;var ts=ee(K,Ve,vt.value,le);if(ts===null){Ve===null&&(Ve=ft);break}r&&Ve&&ts.alternate===null&&i(K,Ve),F=m(ts,F,rt),_t===null?ze=ts:_t.sibling=ts,_t=ts,Ve=ft}if(vt.done)return o(K,Ve),gt&&Qi(K,rt),ze;if(Ve===null){for(;!vt.done;rt++,vt=X.next())vt=he(K,vt.value,le),vt!==null&&(F=m(vt,F,rt),_t===null?ze=vt:_t.sibling=vt,_t=vt);return gt&&Qi(K,rt),ze}for(Ve=u(Ve);!vt.done;rt++,vt=X.next())vt=ie(Ve,K,rt,vt.value,le),vt!==null&&(r&&vt.alternate!==null&&Ve.delete(vt.key===null?rt:vt.key),F=m(vt,F,rt),_t===null?ze=vt:_t.sibling=vt,_t=vt);return r&&Ve.forEach(function(oI){return i(K,oI)}),gt&&Qi(K,rt),ze}function Vt(K,F,X,le){if(typeof X=="object"&&X!==null&&X.type===z&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case R:e:{for(var ze=X.key;F!==null;){if(F.key===ze){if(ze=X.type,ze===z){if(F.tag===7){o(K,F.sibling),le=f(F,X.props.children),le.return=K,K=le;break e}}else if(F.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===w&&Ys(ze)===F.type){o(K,F.sibling),le=f(F,X.props),_u(le,X),le.return=K,K=le;break e}o(K,F);break}else i(K,F);F=F.sibling}X.type===z?(le=Hs(X.props.children,K.mode,le,X.key),le.return=K,K=le):(le=_h(X.type,X.key,X.props,null,K.mode,le),_u(le,X),le.return=K,K=le)}return v(K);case k:e:{for(ze=X.key;F!==null;){if(F.key===ze)if(F.tag===4&&F.stateNode.containerInfo===X.containerInfo&&F.stateNode.implementation===X.implementation){o(K,F.sibling),le=f(F,X.children||[]),le.return=K,K=le;break e}else{o(K,F);break}else i(K,F);F=F.sibling}le=wm(X,K.mode,le),le.return=K,K=le}return v(K);case w:return X=Ys(X),Vt(K,F,X,le)}if(Se(X))return Oe(K,F,X,le);if(M(X)){if(ze=M(X),typeof ze!="function")throw Error(a(150));return X=ze.call(X),He(K,F,X,le)}if(typeof X.then=="function")return Vt(K,F,wh(X),le);if(X.$$typeof===G)return Vt(K,F,Th(K,X),le);Rh(K,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,F!==null&&F.tag===6?(o(K,F.sibling),le=f(F,X),le.return=K,K=le):(o(K,F),le=Am(X,K.mode,le),le.return=K,K=le),v(K)):o(K,F)}return function(K,F,X,le){try{yu=0;var ze=Vt(K,F,X,le);return Yo=null,ze}catch(Ve){if(Ve===Ko||Ve===Sh)throw Ve;var _t=Er(29,Ve,null,K.mode);return _t.lanes=le,_t.return=K,_t}finally{}}}var Xs=bv(!0),Sv=bv(!1),Ua=!1;function Lm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Um(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ja(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function za(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(St&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=yh(r),sv(r,null,o),i}return gh(r,u,i,o),yh(r)}function vu(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,V(r,o)}}function jm(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var zm=!1;function Eu(){if(zm){var r=$o;if(r!==null)throw r}}function Tu(r,i,o,u){zm=!1;var f=r.updateQueue;Ua=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var L=C,W=L.next;L.next=null,v===null?m=W:v.next=W,v=L;var se=r.alternate;se!==null&&(se=se.updateQueue,C=se.lastBaseUpdate,C!==v&&(C===null?se.firstBaseUpdate=W:C.next=W,se.lastBaseUpdate=L))}if(m!==null){var he=f.baseState;v=0,se=W=L=null,C=m;do{var ee=C.lane&-536870913,ie=ee!==C.lane;if(ie?(ht&ee)===ee:(u&ee)===ee){ee!==0&&ee===Go&&(zm=!0),se!==null&&(se=se.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Oe=r,He=C;ee=i;var Vt=o;switch(He.tag){case 1:if(Oe=He.payload,typeof Oe=="function"){he=Oe.call(Vt,he,ee);break e}he=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=He.payload,ee=typeof Oe=="function"?Oe.call(Vt,he,ee):Oe,ee==null)break e;he=E({},he,ee);break e;case 2:Ua=!0}}ee=C.callback,ee!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[ee]:ie.push(ee))}else ie={lane:ee,tag:C.tag,payload:C.payload,callback:C.callback,next:null},se===null?(W=se=ie,L=he):se=se.next=ie,v|=ee;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;ie=C,C=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);se===null&&(L=he),f.baseState=L,f.firstBaseUpdate=W,f.lastBaseUpdate=se,m===null&&(f.shared.lanes=0),Ga|=v,r.lanes=v,r.memoizedState=he}}function Av(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function wv(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Av(o[r],i)}var Qo=U(null),Ch=U(0);function Rv(r,i){r=sa,oe(Ch,r),oe(Qo,i),sa=r|i.baseLanes}function Bm(){oe(Ch,sa),oe(Qo,Qo.current)}function Fm(){sa=Ch.current,$(Qo),$(Ch)}var Tr=U(null),qr=null;function Ba(r){var i=r.alternate;oe(cn,cn.current&1),oe(Tr,r),qr===null&&(i===null||Qo.current!==null||i.memoizedState!==null)&&(qr=r)}function Hm(r){oe(cn,cn.current),oe(Tr,r),qr===null&&(qr=r)}function Cv(r){r.tag===22?(oe(cn,cn.current),oe(Tr,r),qr===null&&(qr=r)):Fa()}function Fa(){oe(cn,cn.current),oe(Tr,Tr.current)}function br(r){$(Tr),qr===r&&(qr=null),$(cn)}var cn=U(0);function Ih(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Qp(o)||Xp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ji=0,et=null,Mt=null,gn=null,Dh=!1,Xo=!1,Ws=!1,Nh=0,bu=0,Wo=null,WR=0;function sn(){throw Error(a(321))}function qm(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!vr(r[o],i[o]))return!1;return!0}function Gm(r,i,o,u,f,m){return Ji=m,et=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=r===null||r.memoizedState===null?cE:sp,Ws=!1,m=o(u,f),Ws=!1,Xo&&(m=Dv(i,o,u,f)),Iv(r),m}function Iv(r){H.H=wu;var i=Mt!==null&&Mt.next!==null;if(Ji=0,gn=Mt=et=null,Dh=!1,bu=0,Wo=null,i)throw Error(a(300));r===null||yn||(r=r.dependencies,r!==null&&Eh(r)&&(yn=!0))}function Dv(r,i,o,u){et=r;var f=0;do{if(Xo&&(Wo=null),bu=0,Xo=!1,25<=f)throw Error(a(301));if(f+=1,gn=Mt=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}H.H=hE,m=i(o,u)}while(Xo);return m}function JR(){var r=H.H,i=r.useState()[0];return i=typeof i.then=="function"?Su(i):i,r=r.useState()[0],(Mt!==null?Mt.memoizedState:null)!==r&&(et.flags|=1024),i}function $m(){var r=Nh!==0;return Nh=0,r}function Km(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Ym(r){if(Dh){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dh=!1}Ji=0,gn=Mt=et=null,Xo=!1,bu=Nh=0,Wo=null}function er(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?et.memoizedState=gn=r:gn=gn.next=r,gn}function hn(){if(Mt===null){var r=et.alternate;r=r!==null?r.memoizedState:null}else r=Mt.next;var i=gn===null?et.memoizedState:gn.next;if(i!==null)gn=i,Mt=r;else{if(r===null)throw et.alternate===null?Error(a(467)):Error(a(310));Mt=r,r={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},gn===null?et.memoizedState=gn=r:gn=gn.next=r}return gn}function xh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Su(r){var i=bu;return bu+=1,Wo===null&&(Wo=[]),r=vv(Wo,r,i),i=et,(gn===null?i.memoizedState:gn.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?cE:sp),r}function Oh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Su(r);if(r.$$typeof===G)return Pn(r)}throw Error(a(438,String(r)))}function Qm(r){var i=null,o=et.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=et.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=xh(),et.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=O;return i.index++,o}function Zi(r,i){return typeof i=="function"?i(r):i}function Mh(r){var i=hn();return Xm(i,Mt,r)}function Xm(r,i,o){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}i.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{i=f.next;var C=v=null,L=null,W=i,se=!1;do{var he=W.lane&-536870913;if(he!==W.lane?(ht&he)===he:(Ji&he)===he){var ee=W.revertLane;if(ee===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),he===Go&&(se=!0);else if((Ji&ee)===ee){W=W.next,ee===Go&&(se=!0);continue}else he={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(C=L=he,v=m):L=L.next=he,et.lanes|=ee,Ga|=ee;he=W.action,Ws&&o(m,he),m=W.hasEagerState?W.eagerState:o(m,he)}else ee={lane:he,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(C=L=ee,v=m):L=L.next=ee,et.lanes|=he,Ga|=he;W=W.next}while(W!==null&&W!==i);if(L===null?v=m:L.next=C,!vr(m,r.memoizedState)&&(yn=!0,se&&(o=$o,o!==null)))throw o;r.memoizedState=m,r.baseState=v,r.baseQueue=L,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Wm(r){var i=hn(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do m=r(m,v.action),v=v.next;while(v!==f);vr(m,i.memoizedState)||(yn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function Nv(r,i,o){var u=et,f=hn(),m=gt;if(m){if(o===void 0)throw Error(a(407));o=o()}else o=i();var v=!vr((Mt||f).memoizedState,o);if(v&&(f.memoizedState=o,yn=!0),f=f.queue,ep(Mv.bind(null,u,f,r),[r]),f.getSnapshot!==i||v||gn!==null&&gn.memoizedState.tag&1){if(u.flags|=2048,Jo(9,{destroy:void 0},Ov.bind(null,u,f,o,i),null),jt===null)throw Error(a(349));m||(Ji&127)!==0||xv(u,i,o)}return o}function xv(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=et.updateQueue,i===null?(i=xh(),et.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function Ov(r,i,o,u){i.value=o,i.getSnapshot=u,Pv(i)&&Vv(r)}function Mv(r,i,o){return o(function(){Pv(i)&&Vv(r)})}function Pv(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!vr(r,o)}catch{return!0}}function Vv(r){var i=Fs(r,2);i!==null&&hr(i,r,2)}function Jm(r){var i=er();if(typeof r=="function"){var o=r;if(r=o(),Ws){Xn(!0);try{o()}finally{Xn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:r},i}function kv(r,i,o,u){return r.baseState=o,Xm(r,Mt,typeof u=="function"?u:Zi)}function ZR(r,i,o,u,f){if(kh(r))throw Error(a(485));if(r=i.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};H.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,Lv(i,m)):(m.next=o.next,i.pending=o.next=m)}}function Lv(r,i){var o=i.action,u=i.payload,f=r.state;if(i.isTransition){var m=H.T,v={};H.T=v;try{var C=o(f,u),L=H.S;L!==null&&L(v,C),Uv(r,i,C)}catch(W){Zm(r,i,W)}finally{m!==null&&v.types!==null&&(m.types=v.types),H.T=m}}else try{m=o(f,u),Uv(r,i,m)}catch(W){Zm(r,i,W)}}function Uv(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){jv(r,i,u)},function(u){return Zm(r,i,u)}):jv(r,i,o)}function jv(r,i,o){i.status="fulfilled",i.value=o,zv(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,Lv(r,o)))}function Zm(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,zv(i),i=i.next;while(i!==u)}r.action=null}function zv(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function Bv(r,i){return i}function Fv(r,i){if(gt){var o=jt.formState;if(o!==null){e:{var u=et;if(gt){if(Gt){t:{for(var f=Gt,m=Hr;f.nodeType!==8;){if(!m){f=null;break t}if(f=Gr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Gt=Gr(f.nextSibling),u=f.data==="F!";break e}}ka(u)}u=!1}u&&(i=o[0])}}return o=er(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bv,lastRenderedState:i},o.queue=u,o=oE.bind(null,et,u),u.dispatch=o,u=Jm(!1),m=ap.bind(null,et,!1,u.queue),u=er(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,o=ZR.bind(null,et,f,m,o),f.dispatch=o,u.memoizedState=r,[i,o,!1]}function Hv(r){var i=hn();return qv(i,Mt,r)}function qv(r,i,o){if(i=Xm(r,i,Bv)[0],r=Mh(Zi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Su(i)}catch(v){throw v===Ko?Sh:v}else u=i;i=hn();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(et.flags|=2048,Jo(9,{destroy:void 0},eC.bind(null,f,o),null)),[u,m,r]}function eC(r,i){r.action=i}function Gv(r){var i=hn(),o=Mt;if(o!==null)return qv(i,o,r);hn(),i=i.memoizedState,o=hn();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function Jo(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=et.updateQueue,i===null&&(i=xh(),et.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function $v(){return hn().memoizedState}function Ph(r,i,o,u){var f=er();et.flags|=r,f.memoizedState=Jo(1|i,{destroy:void 0},o,u===void 0?null:u)}function Vh(r,i,o,u){var f=hn();u=u===void 0?null:u;var m=f.memoizedState.inst;Mt!==null&&u!==null&&qm(u,Mt.memoizedState.deps)?f.memoizedState=Jo(i,m,o,u):(et.flags|=r,f.memoizedState=Jo(1|i,m,o,u))}function Kv(r,i){Ph(8390656,8,r,i)}function ep(r,i){Vh(2048,8,r,i)}function tC(r){et.flags|=4;var i=et.updateQueue;if(i===null)i=xh(),et.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function Yv(r){var i=hn().memoizedState;return tC({ref:i,nextImpl:r}),function(){if((St&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Qv(r,i){return Vh(4,2,r,i)}function Xv(r,i){return Vh(4,4,r,i)}function Wv(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Jv(r,i,o){o=o!=null?o.concat([r]):null,Vh(4,4,Wv.bind(null,i,r),o)}function tp(){}function Zv(r,i){var o=hn();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&qm(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function eE(r,i){var o=hn();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&qm(i,u[1]))return u[0];if(u=r(),Ws){Xn(!0);try{r()}finally{Xn(!1)}}return o.memoizedState=[u,i],u}function np(r,i,o){return o===void 0||(Ji&1073741824)!==0&&(ht&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=tT(),et.lanes|=r,Ga|=r,o)}function tE(r,i,o,u){return vr(o,i)?o:Qo.current!==null?(r=np(r,o,u),vr(r,i)||(yn=!0),r):(Ji&42)===0||(Ji&1073741824)!==0&&(ht&261930)===0?(yn=!0,r.memoizedState=o):(r=tT(),et.lanes|=r,Ga|=r,i)}function nE(r,i,o,u,f){var m=fe.p;fe.p=m!==0&&8>m?m:8;var v=H.T,C={};H.T=C,ap(r,!1,i,o);try{var L=f(),W=H.S;if(W!==null&&W(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var se=XR(L,u);Au(r,i,se,wr(r))}else Au(r,i,u,wr(r))}catch(he){Au(r,i,{then:function(){},status:"rejected",reason:he},wr())}finally{fe.p=m,v!==null&&C.types!==null&&(v.types=C.types),H.T=v}}function nC(){}function rp(r,i,o,u){if(r.tag!==5)throw Error(a(476));var f=rE(r).queue;nE(r,f,i,ge,o===null?nC:function(){return iE(r),o(u)})}function rE(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:ge},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function iE(r){var i=rE(r);i.next===null&&(i=r.alternate.memoizedState),Au(r,i.next.queue,{},wr())}function ip(){return Pn(Bu)}function aE(){return hn().memoizedState}function sE(){return hn().memoizedState}function rC(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=wr();r=ja(o);var u=za(i,r,o);u!==null&&(hr(u,i,o),vu(u,i,o)),i={cache:Mm()},r.payload=i;return}i=i.return}}function iC(r,i,o){var u=wr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},kh(r)?lE(i,o):(o=bm(r,i,o,u),o!==null&&(hr(o,r,u),uE(o,i,u)))}function oE(r,i,o){var u=wr();Au(r,i,o,u)}function Au(r,i,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(kh(r))lE(i,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,C=m(v,o);if(f.hasEagerState=!0,f.eagerState=C,vr(C,v))return gh(r,i,f,0),jt===null&&ph(),!1}catch{}finally{}if(o=bm(r,i,f,u),o!==null)return hr(o,r,u),uE(o,i,u),!0}return!1}function ap(r,i,o,u){if(u={lane:2,revertLane:Lp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},kh(r)){if(i)throw Error(a(479))}else i=bm(r,o,u,2),i!==null&&hr(i,r,2)}function kh(r){var i=r.alternate;return r===et||i!==null&&i===et}function lE(r,i){Xo=Dh=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function uE(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,V(r,o)}}var wu={readContext:Pn,use:Oh,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};wu.useEffectEvent=sn;var cE={readContext:Pn,use:Oh,useCallback:function(r,i){return er().memoizedState=[r,i===void 0?null:i],r},useContext:Pn,useEffect:Kv,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Ph(4194308,4,Wv.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Ph(4194308,4,r,i)},useInsertionEffect:function(r,i){Ph(4,2,r,i)},useMemo:function(r,i){var o=er();i=i===void 0?null:i;var u=r();if(Ws){Xn(!0);try{r()}finally{Xn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=er();if(o!==void 0){var f=o(i);if(Ws){Xn(!0);try{o(i)}finally{Xn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=iC.bind(null,et,r),[u.memoizedState,r]},useRef:function(r){var i=er();return r={current:r},i.memoizedState=r},useState:function(r){r=Jm(r);var i=r.queue,o=oE.bind(null,et,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:tp,useDeferredValue:function(r,i){var o=er();return np(o,r,i)},useTransition:function(){var r=Jm(!1);return r=nE.bind(null,et,r.queue,!0,!1),er().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=et,f=er();if(gt){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),jt===null)throw Error(a(349));(ht&127)!==0||xv(u,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,Kv(Mv.bind(null,u,m,r),[r]),u.flags|=2048,Jo(9,{destroy:void 0},Ov.bind(null,u,m,o,i),null),o},useId:function(){var r=er(),i=jt.identifierPrefix;if(gt){var o=Ii,u=Ci;o=(u&~(1<<32-Xt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Nh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=WR++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:ip,useFormState:Fv,useActionState:Fv,useOptimistic:function(r){var i=er();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=ap.bind(null,et,!0,o),o.dispatch=i,[r,i]},useMemoCache:Qm,useCacheRefresh:function(){return er().memoizedState=rC.bind(null,et)},useEffectEvent:function(r){var i=er(),o={impl:r};return i.memoizedState=o,function(){if((St&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},sp={readContext:Pn,use:Oh,useCallback:Zv,useContext:Pn,useEffect:ep,useImperativeHandle:Jv,useInsertionEffect:Qv,useLayoutEffect:Xv,useMemo:eE,useReducer:Mh,useRef:$v,useState:function(){return Mh(Zi)},useDebugValue:tp,useDeferredValue:function(r,i){var o=hn();return tE(o,Mt.memoizedState,r,i)},useTransition:function(){var r=Mh(Zi)[0],i=hn().memoizedState;return[typeof r=="boolean"?r:Su(r),i]},useSyncExternalStore:Nv,useId:aE,useHostTransitionStatus:ip,useFormState:Hv,useActionState:Hv,useOptimistic:function(r,i){var o=hn();return kv(o,Mt,r,i)},useMemoCache:Qm,useCacheRefresh:sE};sp.useEffectEvent=Yv;var hE={readContext:Pn,use:Oh,useCallback:Zv,useContext:Pn,useEffect:ep,useImperativeHandle:Jv,useInsertionEffect:Qv,useLayoutEffect:Xv,useMemo:eE,useReducer:Wm,useRef:$v,useState:function(){return Wm(Zi)},useDebugValue:tp,useDeferredValue:function(r,i){var o=hn();return Mt===null?np(o,r,i):tE(o,Mt.memoizedState,r,i)},useTransition:function(){var r=Wm(Zi)[0],i=hn().memoizedState;return[typeof r=="boolean"?r:Su(r),i]},useSyncExternalStore:Nv,useId:aE,useHostTransitionStatus:ip,useFormState:Gv,useActionState:Gv,useOptimistic:function(r,i){var o=hn();return Mt!==null?kv(o,Mt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Qm,useCacheRefresh:sE};hE.useEffectEvent=Yv;function op(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var lp={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=wr(),f=ja(u);f.payload=i,o!=null&&(f.callback=o),i=za(r,f,u),i!==null&&(hr(i,r,u),vu(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=wr(),f=ja(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=za(r,f,u),i!==null&&(hr(i,r,u),vu(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=wr(),u=ja(o);u.tag=2,i!=null&&(u.callback=i),i=za(r,u,o),i!==null&&(hr(i,r,o),vu(i,r,o))}};function fE(r,i,o,u,f,m,v){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,v):i.prototype&&i.prototype.isPureReactComponent?!hu(o,u)||!hu(f,m):!0}function dE(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&lp.enqueueReplaceState(i,i.state,null)}function Js(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=E({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}function mE(r){mh(r)}function pE(r){console.error(r)}function gE(r){mh(r)}function Lh(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function yE(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function up(r,i,o){return o=ja(o),o.tag=3,o.payload={element:null},o.callback=function(){Lh(r,i)},o}function _E(r){return r=ja(r),r.tag=3,r}function vE(r,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){yE(i,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(r.callback=function(){yE(i,o,u),typeof f!="function"&&($a===null?$a=new Set([this]):$a.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function aC(r,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&qo(i,o,f,!0),o=Tr.current,o!==null){switch(o.tag){case 31:case 13:return qr===null?Qh():o.alternate===null&&on===0&&(on=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Ah?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Pp(r,u,f)),!1;case 22:return o.flags|=65536,u===Ah?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Pp(r,u,f)),!1}throw Error(a(435,o.tag))}return Pp(r,u,f),Qh(),!1}if(gt)return i=Tr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Im&&(r=Error(a(422),{cause:u}),mu(zr(r,o)))):(u!==Im&&(i=Error(a(423),{cause:u}),mu(zr(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=zr(u,o),f=up(r.stateNode,u,f),jm(r,f),on!==4&&(on=2)),!1;var m=Error(a(520),{cause:u});if(m=zr(m,o),Mu===null?Mu=[m]:Mu.push(m),on!==4&&(on=2),i===null)return!0;u=zr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=up(o.stateNode,u,r),jm(o,r),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&($a===null||!$a.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=_E(f),vE(f,r,o,u),jm(o,f),!1}o=o.return}while(o!==null);return!1}var cp=Error(a(461)),yn=!1;function Vn(r,i,o,u){i.child=r===null?Sv(i,null,o,u):Xs(i,r.child,o,u)}function EE(r,i,o,u,f){o=o.render;var m=i.ref;if("ref"in u){var v={};for(var C in u)C!=="ref"&&(v[C]=u[C])}else v=u;return $s(i),u=Gm(r,i,o,v,m,f),C=$m(),r!==null&&!yn?(Km(r,i,f),ea(r,i,f)):(gt&&C&&Rm(i),i.flags|=1,Vn(r,i,u,f),i.child)}function TE(r,i,o,u,f){if(r===null){var m=o.type;return typeof m=="function"&&!Sm(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,bE(r,i,m,u,f)):(r=_h(o.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!_p(r,f)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:hu,o(v,u)&&r.ref===i.ref)return ea(r,i,f)}return i.flags|=1,r=Yi(m,u),r.ref=i.ref,r.return=i,i.child=r}function bE(r,i,o,u,f){if(r!==null){var m=r.memoizedProps;if(hu(m,u)&&r.ref===i.ref)if(yn=!1,i.pendingProps=u=m,_p(r,f))(r.flags&131072)!==0&&(yn=!0);else return i.lanes=r.lanes,ea(r,i,f)}return hp(r,i,o,u,f)}function SE(r,i,o,u){var f=u.children,m=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,r!==null){for(u=i.child=r.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,i.child=null;return AE(r,i,m,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&bh(i,m!==null?m.cachePool:null),m!==null?Rv(i,m):Bm(),Cv(i);else return u=i.lanes=536870912,AE(r,i,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(bh(i,m.cachePool),Rv(i,m),Fa(),i.memoizedState=null):(r!==null&&bh(i,null),Bm(),Fa());return Vn(r,i,f,o),i.child}function Ru(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function AE(r,i,o,u,f){var m=Vm();return m=m===null?null:{parent:pn._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},r!==null&&bh(i,null),Bm(),Cv(i),r!==null&&qo(r,i,u,!0),i.childLanes=f,null}function Uh(r,i){return i=zh({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function wE(r,i,o){return Xs(i,r.child,null,o),r=Uh(i,i.pendingProps),r.flags|=2,br(i),i.memoizedState=null,r}function sC(r,i,o){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(gt){if(u.mode==="hidden")return r=Uh(i,u),i.lanes=536870912,Ru(null,r);if(Hm(i),(r=Gt)?(r=LT(r,Hr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Pa!==null?{id:Ci,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},o=lv(r),o.return=i,i.child=o,Mn=i,Gt=null)):r=null,r===null)throw ka(i);return i.lanes=536870912,null}return Uh(i,u)}var m=r.memoizedState;if(m!==null){var v=m.dehydrated;if(Hm(i),f)if(i.flags&256)i.flags&=-257,i=wE(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(a(558));else if(yn||qo(r,i,o,!1),f=(o&r.childLanes)!==0,yn||f){if(u=jt,u!==null&&(v=q(u,o),v!==0&&v!==m.retryLane))throw m.retryLane=v,Fs(r,v),hr(u,r,v),cp;Qh(),i=wE(r,i,o)}else r=m.treeContext,Gt=Gr(v.nextSibling),Mn=i,gt=!0,Va=null,Hr=!1,r!==null&&hv(i,r),i=Uh(i,u),i.flags|=4096;return i}return r=Yi(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function jh(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function hp(r,i,o,u,f){return $s(i),o=Gm(r,i,o,u,void 0,f),u=$m(),r!==null&&!yn?(Km(r,i,f),ea(r,i,f)):(gt&&u&&Rm(i),i.flags|=1,Vn(r,i,o,f),i.child)}function RE(r,i,o,u,f,m){return $s(i),i.updateQueue=null,o=Dv(i,u,o,f),Iv(r),u=$m(),r!==null&&!yn?(Km(r,i,m),ea(r,i,m)):(gt&&u&&Rm(i),i.flags|=1,Vn(r,i,o,m),i.child)}function CE(r,i,o,u,f){if($s(i),i.stateNode===null){var m=zo,v=o.contextType;typeof v=="object"&&v!==null&&(m=Pn(v)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=lp,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},Lm(i),v=o.contextType,m.context=typeof v=="object"&&v!==null?Pn(v):zo,m.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(op(i,o,v,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&lp.enqueueReplaceState(m,m.state,null),Tu(i,u,m,f),Eu(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var C=i.memoizedProps,L=Js(o,C);m.props=L;var W=m.context,se=o.contextType;v=zo,typeof se=="object"&&se!==null&&(v=Pn(se));var he=o.getDerivedStateFromProps;se=typeof he=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||W!==v)&&dE(i,m,u,v),Ua=!1;var ee=i.memoizedState;m.state=ee,Tu(i,u,m,f),Eu(),W=i.memoizedState,C||ee!==W||Ua?(typeof he=="function"&&(op(i,o,he,u),W=i.memoizedState),(L=Ua||fE(i,o,L,u,ee,W,v))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=W),m.props=u,m.state=W,m.context=v,u=L):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,Um(r,i),v=i.memoizedProps,se=Js(o,v),m.props=se,he=i.pendingProps,ee=m.context,W=o.contextType,L=zo,typeof W=="object"&&W!==null&&(L=Pn(W)),C=o.getDerivedStateFromProps,(W=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==he||ee!==L)&&dE(i,m,u,L),Ua=!1,ee=i.memoizedState,m.state=ee,Tu(i,u,m,f),Eu();var ie=i.memoizedState;v!==he||ee!==ie||Ua||r!==null&&r.dependencies!==null&&Eh(r.dependencies)?(typeof C=="function"&&(op(i,o,C,u),ie=i.memoizedState),(se=Ua||fE(i,o,se,u,ee,ie,L)||r!==null&&r.dependencies!==null&&Eh(r.dependencies))?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ie,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ie,L)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ie),m.props=u,m.state=ie,m.context=L,u=se):(typeof m.componentDidUpdate!="function"||v===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,jh(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=Xs(i,r.child,null,f),i.child=Xs(i,null,o,f)):Vn(r,i,o,f),i.memoizedState=m.state,r=i.child):r=ea(r,i,f),r}function IE(r,i,o,u){return qs(),i.flags|=256,Vn(r,i,o,u),i.child}var fp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dp(r){return{baseLanes:r,cachePool:yv()}}function mp(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=Ar),r}function DE(r,i,o){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=r!==null&&r.memoizedState===null?!1:(cn.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,r===null){if(gt){if(f?Ba(i):Fa(),(r=Gt)?(r=LT(r,Hr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Pa!==null?{id:Ci,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},o=lv(r),o.return=i,i.child=o,Mn=i,Gt=null)):r=null,r===null)throw ka(i);return Xp(r)?i.lanes=32:i.lanes=536870912,null}var C=u.children;return u=u.fallback,f?(Fa(),f=i.mode,C=zh({mode:"hidden",children:C},f),u=Hs(u,f,o,null),C.return=i,u.return=i,C.sibling=u,i.child=C,u=i.child,u.memoizedState=dp(o),u.childLanes=mp(r,v,o),i.memoizedState=fp,Ru(null,u)):(Ba(i),pp(i,C))}var L=r.memoizedState;if(L!==null&&(C=L.dehydrated,C!==null)){if(m)i.flags&256?(Ba(i),i.flags&=-257,i=gp(r,i,o)):i.memoizedState!==null?(Fa(),i.child=r.child,i.flags|=128,i=null):(Fa(),C=u.fallback,f=i.mode,u=zh({mode:"visible",children:u.children},f),C=Hs(C,f,o,null),C.flags|=2,u.return=i,C.return=i,u.sibling=C,i.child=u,Xs(i,r.child,null,o),u=i.child,u.memoizedState=dp(o),u.childLanes=mp(r,v,o),i.memoizedState=fp,i=Ru(null,u));else if(Ba(i),Xp(C)){if(v=C.nextSibling&&C.nextSibling.dataset,v)var W=v.dgst;v=W,u=Error(a(419)),u.stack="",u.digest=v,mu({value:u,source:null,stack:null}),i=gp(r,i,o)}else if(yn||qo(r,i,o,!1),v=(o&r.childLanes)!==0,yn||v){if(v=jt,v!==null&&(u=q(v,o),u!==0&&u!==L.retryLane))throw L.retryLane=u,Fs(r,u),hr(v,r,u),cp;Qp(C)||Qh(),i=gp(r,i,o)}else Qp(C)?(i.flags|=192,i.child=r.child,i=null):(r=L.treeContext,Gt=Gr(C.nextSibling),Mn=i,gt=!0,Va=null,Hr=!1,r!==null&&hv(i,r),i=pp(i,u.children),i.flags|=4096);return i}return f?(Fa(),C=u.fallback,f=i.mode,L=r.child,W=L.sibling,u=Yi(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,W!==null?C=Yi(W,C):(C=Hs(C,f,o,null),C.flags|=2),C.return=i,u.return=i,u.sibling=C,i.child=u,Ru(null,u),u=i.child,C=r.child.memoizedState,C===null?C=dp(o):(f=C.cachePool,f!==null?(L=pn._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=yv(),C={baseLanes:C.baseLanes|o,cachePool:f}),u.memoizedState=C,u.childLanes=mp(r,v,o),i.memoizedState=fp,Ru(r.child,u)):(Ba(i),o=r.child,r=o.sibling,o=Yi(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(v=i.deletions,v===null?(i.deletions=[r],i.flags|=16):v.push(r)),i.child=o,i.memoizedState=null,o)}function pp(r,i){return i=zh({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function zh(r,i){return r=Er(22,r,null,i),r.lanes=0,r}function gp(r,i,o){return Xs(i,r.child,null,o),r=pp(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function NE(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),xm(r.return,i,o)}function yp(r,i,o,u,f,m){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f,v.treeForkCount=m)}function xE(r,i,o){var u=i.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var v=cn.current,C=(v&2)!==0;if(C?(v=v&1|2,i.flags|=128):v&=1,oe(cn,v),Vn(r,i,u,o),u=gt?du:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&NE(r,o,i);else if(r.tag===19)NE(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&Ih(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),yp(i,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&Ih(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}yp(i,!0,o,null,m,u);break;case"together":yp(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ea(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Ga|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(qo(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=Yi(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Yi(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function _p(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Eh(r)))}function oC(r,i,o){switch(i.tag){case 3:Ke(i,i.stateNode.containerInfo),La(i,pn,r.memoizedState.cache),qs();break;case 27:case 5:Yt(i);break;case 4:Ke(i,i.stateNode.containerInfo);break;case 10:La(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Hm(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ba(i),i.flags|=128,null):(o&i.child.childLanes)!==0?DE(r,i,o):(Ba(i),r=ea(r,i,o),r!==null?r.sibling:null);Ba(i);break;case 19:var f=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(qo(r,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return xE(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(cn,cn.current),u)break;return null;case 22:return i.lanes=0,SE(r,i,o,i.pendingProps);case 24:La(i,pn,r.memoizedState.cache)}return ea(r,i,o)}function OE(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)yn=!0;else{if(!_p(r,o)&&(i.flags&128)===0)return yn=!1,oC(r,i,o);yn=(r.flags&131072)!==0}else yn=!1,gt&&(i.flags&1048576)!==0&&cv(i,du,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=Ys(i.elementType),i.type=r,typeof r=="function")Sm(r)?(u=Js(r,u),i.tag=1,i=CE(null,i,r,u,o)):(i.tag=0,i=hp(null,i,r,u,o));else{if(r!=null){var f=r.$$typeof;if(f===Z){i.tag=11,i=EE(null,i,r,u,o);break e}else if(f===S){i.tag=14,i=TE(null,i,r,u,o);break e}}throw i=pe(r)||r,Error(a(306,i,""))}}return i;case 0:return hp(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=Js(u,i.pendingProps),CE(r,i,u,f,o);case 3:e:{if(Ke(i,i.stateNode.containerInfo),r===null)throw Error(a(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,Um(r,i),Tu(i,u,null,o);var v=i.memoizedState;if(u=v.cache,La(i,pn,u),u!==m.cache&&Om(i,[pn],o,!0),Eu(),u=v.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=IE(r,i,u,o);break e}else if(u!==f){f=zr(Error(a(424)),i),mu(f),i=IE(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Gt=Gr(r.firstChild),Mn=i,gt=!0,Va=null,Hr=!0,o=Sv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(qs(),u===f){i=ea(r,i,o);break e}Vn(r,i,u,o)}i=i.child}return i;case 26:return jh(r,i),r===null?(o=HT(i.type,null,i.pendingProps,null))?i.memoizedState=o:gt||(o=i.type,r=i.pendingProps,u=nf(Te.current).createElement(o),u[Ee]=i,u[Ae]=r,kn(u,o,r),Ft(u),i.stateNode=u):i.memoizedState=HT(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Yt(i),r===null&&gt&&(u=i.stateNode=zT(i.type,i.pendingProps,Te.current),Mn=i,Hr=!0,f=Gt,Xa(i.type)?(Wp=f,Gt=Gr(u.firstChild)):Gt=f),Vn(r,i,i.pendingProps.children,o),jh(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&gt&&((f=u=Gt)&&(u=LC(u,i.type,i.pendingProps,Hr),u!==null?(i.stateNode=u,Mn=i,Gt=Gr(u.firstChild),Hr=!1,f=!0):f=!1),f||ka(i)),Yt(i),f=i.type,m=i.pendingProps,v=r!==null?r.memoizedProps:null,u=m.children,$p(f,m)?u=null:v!==null&&$p(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Gm(r,i,JR,null,null,o),Bu._currentValue=f),jh(r,i),Vn(r,i,u,o),i.child;case 6:return r===null&&gt&&((r=o=Gt)&&(o=UC(o,i.pendingProps,Hr),o!==null?(i.stateNode=o,Mn=i,Gt=null,r=!0):r=!1),r||ka(i)),null;case 13:return DE(r,i,o);case 4:return Ke(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Xs(i,null,u,o):Vn(r,i,u,o),i.child;case 11:return EE(r,i,i.type,i.pendingProps,o);case 7:return Vn(r,i,i.pendingProps,o),i.child;case 8:return Vn(r,i,i.pendingProps.children,o),i.child;case 12:return Vn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,La(i,i.type,u.value),Vn(r,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,$s(i),f=Pn(f),u=u(f),i.flags|=1,Vn(r,i,u,o),i.child;case 14:return TE(r,i,i.type,i.pendingProps,o);case 15:return bE(r,i,i.type,i.pendingProps,o);case 19:return xE(r,i,o);case 31:return sC(r,i,o);case 22:return SE(r,i,o,i.pendingProps);case 24:return $s(i),u=Pn(pn),r===null?(f=Vm(),f===null&&(f=jt,m=Mm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:u,cache:f},Lm(i),La(i,pn,f)):((r.lanes&o)!==0&&(Um(r,i),Tu(i,null,null,o),Eu()),f=r.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),La(i,pn,u)):(u=m.cache,La(i,pn,u),u!==f.cache&&Om(i,[pn],o,!0))),Vn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function ta(r){r.flags|=4}function vp(r,i,o,u,f){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(f&335544128)===f)if(r.stateNode.complete)r.flags|=8192;else if(aT())r.flags|=8192;else throw Qs=Ah,km}else r.flags&=-16777217}function ME(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!YT(i))if(aT())r.flags|=8192;else throw Qs=Ah,km}function Bh(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Hi():536870912,r.lanes|=i,nl|=i)}function Cu(r,i){if(!gt)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function $t(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function lC(r,i,o){var u=i.pendingProps;switch(Cm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(i),null;case 1:return $t(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Wi(pn),ot(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Ho(i)?ta(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Dm())),$t(i),null;case 26:var f=i.type,m=i.memoizedState;return r===null?(ta(i),m!==null?($t(i),ME(i,m)):($t(i),vp(i,f,null,u,o))):m?m!==r.memoizedState?(ta(i),$t(i),ME(i,m)):($t(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&ta(i),$t(i),vp(i,f,r,u,o)),null;case 27:if(In(i),o=Te.current,f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&ta(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return $t(i),null}r=ce.current,Ho(i)?fv(i):(r=zT(f,u,o),i.stateNode=r,ta(i))}return $t(i),null;case 5:if(In(i),f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&ta(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return $t(i),null}if(m=ce.current,Ho(i))fv(i);else{var v=nf(Te.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}m[Ee]=i,m[Ae]=u;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=m;e:switch(kn(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ta(i)}}return $t(i),vp(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&ta(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(r=Te.current,Ho(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,f=Mn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Ee]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||DT(r.nodeValue,o)),r||ka(i,!0)}else r=nf(r).createTextNode(u),r[Ee]=i,i.stateNode=r}return $t(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=Ho(i),o!==null){if(r===null){if(!u)throw Error(a(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(557));r[Ee]=i}else qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),r=!1}else o=Dm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(br(i),i):(br(i),null);if((i.flags&128)!==0)throw Error(a(558))}return $t(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Ho(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Ee]=i}else qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),f=!1}else f=Dm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(br(i),i):(br(i),null)}return br(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),Bh(i,i.updateQueue),$t(i),null);case 4:return ot(),r===null&&Bp(i.stateNode.containerInfo),$t(i),null;case 10:return Wi(i.type),$t(i),null;case 19:if($(cn),u=i.memoizedState,u===null)return $t(i),null;if(f=(i.flags&128)!==0,m=u.rendering,m===null)if(f)Cu(u,!1);else{if(on!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=Ih(r),m!==null){for(i.flags|=128,Cu(u,!1),r=m.updateQueue,i.updateQueue=r,Bh(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)ov(o,r),o=o.sibling;return oe(cn,cn.current&1|2),gt&&Qi(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&Ye()>$h&&(i.flags|=128,f=!0,Cu(u,!1),i.lanes=4194304)}else{if(!f)if(r=Ih(m),r!==null){if(i.flags|=128,f=!0,r=r.updateQueue,i.updateQueue=r,Bh(i,r),Cu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!gt)return $t(i),null}else 2*Ye()-u.renderingStartTime>$h&&o!==536870912&&(i.flags|=128,f=!0,Cu(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(r=u.last,r!==null?r.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Ye(),r.sibling=null,o=cn.current,oe(cn,f?o&1|2:o&1),gt&&Qi(i,u.treeForkCount),r):($t(i),null);case 22:case 23:return br(i),Fm(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&($t(i),i.subtreeFlags&6&&(i.flags|=8192)):$t(i),o=i.updateQueue,o!==null&&Bh(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&$(Ks),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Wi(pn),$t(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function uC(r,i){switch(Cm(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Wi(pn),ot(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return In(i),null;case 31:if(i.memoizedState!==null){if(br(i),i.alternate===null)throw Error(a(340));qs()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(br(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));qs()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return $(cn),null;case 4:return ot(),null;case 10:return Wi(i.type),null;case 22:case 23:return br(i),Fm(),r!==null&&$(Ks),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Wi(pn),null;case 25:return null;default:return null}}function PE(r,i){switch(Cm(i),i.tag){case 3:Wi(pn),ot();break;case 26:case 27:case 5:In(i);break;case 4:ot();break;case 31:i.memoizedState!==null&&br(i);break;case 13:br(i);break;case 19:$(cn);break;case 10:Wi(i.type);break;case 22:case 23:br(i),Fm(),r!==null&&$(Ks);break;case 24:Wi(pn)}}function Iu(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var m=o.create,v=o.inst;u=m(),v.destroy=u}o=o.next}while(o!==f)}}catch(C){It(i,i.return,C)}}function Ha(r,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var v=u.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,f=i;var L=o,W=C;try{W()}catch(se){It(f,L,se)}}}u=u.next}while(u!==m)}}catch(se){It(i,i.return,se)}}function VE(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{wv(i,o)}catch(u){It(r,r.return,u)}}}function kE(r,i,o){o.props=Js(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){It(r,i,u)}}function Du(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){It(r,i,f)}}function Di(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){It(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){It(r,i,f)}else o.current=null}function LE(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){It(r,r.return,f)}}function Ep(r,i,o){try{var u=r.stateNode;xC(u,r.type,o,i),u[Ae]=i}catch(f){It(r,r.return,f)}}function UE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Xa(r.type)||r.tag===4}function Tp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||UE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Xa(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function bp(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=ti));else if(u!==4&&(u===27&&Xa(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(bp(r,i,o),r=r.sibling;r!==null;)bp(r,i,o),r=r.sibling}function Fh(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&Xa(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Fh(r,i,o),r=r.sibling;r!==null;)Fh(r,i,o),r=r.sibling}function jE(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);kn(i,u,o),i[Ee]=r,i[Ae]=o}catch(m){It(r,r.return,m)}}var na=!1,_n=!1,Sp=!1,zE=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function cC(r,i){if(r=r.containerInfo,qp=cf,r=J_(r),gm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,C=-1,L=-1,W=0,se=0,he=r,ee=null;t:for(;;){for(var ie;he!==o||f!==0&&he.nodeType!==3||(C=v+f),he!==m||u!==0&&he.nodeType!==3||(L=v+u),he.nodeType===3&&(v+=he.nodeValue.length),(ie=he.firstChild)!==null;)ee=he,he=ie;for(;;){if(he===r)break t;if(ee===o&&++W===f&&(C=v),ee===m&&++se===u&&(L=v),(ie=he.nextSibling)!==null)break;he=ee,ee=he.parentNode}he=ie}o=C===-1||L===-1?null:{start:C,end:L}}else o=null}o=o||{start:0,end:0}}else o=null;for(Gp={focusedElem:r,selectionRange:o},cf=!1,Nn=i;Nn!==null;)if(i=Nn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Nn=r;else for(;Nn!==null;){switch(i=Nn,m=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)f=r[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Oe=Js(o.type,f);r=u.getSnapshotBeforeUpdate(Oe,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(He){It(o,o.return,He)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Yp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Yp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,Nn=r;break}Nn=i.return}}function BE(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ia(r,o),u&4&&Iu(5,o);break;case 1:if(ia(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(v){It(o,o.return,v)}else{var f=Js(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(v){It(o,o.return,v)}}u&64&&VE(o),u&512&&Du(o,o.return);break;case 3:if(ia(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{wv(r,i)}catch(v){It(o,o.return,v)}}break;case 27:i===null&&u&4&&jE(o);case 26:case 5:ia(r,o),i===null&&u&4&&LE(o),u&512&&Du(o,o.return);break;case 12:ia(r,o);break;case 31:ia(r,o),u&4&&qE(r,o);break;case 13:ia(r,o),u&4&&GE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=vC.bind(null,o),jC(r,o))));break;case 22:if(u=o.memoizedState!==null||na,!u){i=i!==null&&i.memoizedState!==null||_n,f=na;var m=_n;na=u,(_n=i)&&!m?aa(r,o,(o.subtreeFlags&8772)!==0):ia(r,o),na=f,_n=m}break;case 30:break;default:ia(r,o)}}function FE(r){var i=r.alternate;i!==null&&(r.alternate=null,FE(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&qt(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Zt=null,or=!1;function ra(r,i,o){for(o=o.child;o!==null;)HE(r,i,o),o=o.sibling}function HE(r,i,o){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(mr,o)}catch{}switch(o.tag){case 26:_n||Di(o,i),ra(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:_n||Di(o,i);var u=Zt,f=or;Xa(o.type)&&(Zt=o.stateNode,or=!1),ra(r,i,o),Uu(o.stateNode),Zt=u,or=f;break;case 5:_n||Di(o,i);case 6:if(u=Zt,f=or,Zt=null,ra(r,i,o),Zt=u,or=f,Zt!==null)if(or)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(o.stateNode)}catch(m){It(o,i,m)}else try{Zt.removeChild(o.stateNode)}catch(m){It(o,i,m)}break;case 18:Zt!==null&&(or?(r=Zt,VT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),cl(r)):VT(Zt,o.stateNode));break;case 4:u=Zt,f=or,Zt=o.stateNode.containerInfo,or=!0,ra(r,i,o),Zt=u,or=f;break;case 0:case 11:case 14:case 15:Ha(2,o,i),_n||Ha(4,o,i),ra(r,i,o);break;case 1:_n||(Di(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&kE(o,i,u)),ra(r,i,o);break;case 21:ra(r,i,o);break;case 22:_n=(u=_n)||o.memoizedState!==null,ra(r,i,o),_n=u;break;default:ra(r,i,o)}}function qE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{cl(r)}catch(o){It(i,i.return,o)}}}function GE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{cl(r)}catch(o){It(i,i.return,o)}}function hC(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new zE),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new zE),i;default:throw Error(a(435,r.tag))}}function Hh(r,i){var o=hC(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var f=EC.bind(null,r,u);u.then(f,f)}})}function lr(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=r,v=i,C=v;e:for(;C!==null;){switch(C.tag){case 27:if(Xa(C.type)){Zt=C.stateNode,or=!1;break e}break;case 5:Zt=C.stateNode,or=!1;break e;case 3:case 4:Zt=C.stateNode.containerInfo,or=!0;break e}C=C.return}if(Zt===null)throw Error(a(160));HE(m,v,f),Zt=null,or=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)$E(i,r),i=i.sibling}var oi=null;function $E(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:lr(i,r),ur(r),u&4&&(Ha(3,r,r.return),Iu(3,r),Ha(5,r,r.return));break;case 1:lr(i,r),ur(r),u&512&&(_n||o===null||Di(o,o.return)),u&64&&na&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=oi;if(lr(i,r),ur(r),u&512&&(_n||o===null||Di(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Nt]||m[Ee]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),kn(m,u,o),m[Ee]=r,Ft(m),u=m;break e;case"link":var v=$T("link","href",f).get(u+(o.href||""));if(v){for(var C=0;C<v.length;C++)if(m=v[C],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(C,1);break t}}m=f.createElement(u),kn(m,u,o),f.head.appendChild(m);break;case"meta":if(v=$T("meta","content",f).get(u+(o.content||""))){for(C=0;C<v.length;C++)if(m=v[C],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(C,1);break t}}m=f.createElement(u),kn(m,u,o),f.head.appendChild(m);break;default:throw Error(a(468,u))}m[Ee]=r,Ft(m),u=m}r.stateNode=u}else KT(f,r.type,r.stateNode);else r.stateNode=GT(f,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?KT(f,r.type,r.stateNode):GT(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Ep(r,r.memoizedProps,o.memoizedProps)}break;case 27:lr(i,r),ur(r),u&512&&(_n||o===null||Di(o,o.return)),o!==null&&u&4&&Ep(r,r.memoizedProps,o.memoizedProps);break;case 5:if(lr(i,r),ur(r),u&512&&(_n||o===null||Di(o,o.return)),r.flags&32){f=r.stateNode;try{sr(f,"")}catch(Oe){It(r,r.return,Oe)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,Ep(r,f,o!==null?o.memoizedProps:f)),u&1024&&(Sp=!0);break;case 6:if(lr(i,r),ur(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Oe){It(r,r.return,Oe)}}break;case 3:if(sf=null,f=oi,oi=rf(i.containerInfo),lr(i,r),oi=f,ur(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{cl(i.containerInfo)}catch(Oe){It(r,r.return,Oe)}Sp&&(Sp=!1,KE(r));break;case 4:u=oi,oi=rf(r.stateNode.containerInfo),lr(i,r),ur(r),oi=u;break;case 12:lr(i,r),ur(r);break;case 31:lr(i,r),ur(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Hh(r,u)));break;case 13:lr(i,r),ur(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Gh=Ye()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Hh(r,u)));break;case 22:f=r.memoizedState!==null;var L=o!==null&&o.memoizedState!==null,W=na,se=_n;if(na=W||f,_n=se||L,lr(i,r),_n=se,na=W,ur(r),u&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||L||na||_n||Zs(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){L=o=i;try{if(m=L.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=L.stateNode;var he=L.memoizedProps.style,ee=he!=null&&he.hasOwnProperty("display")?he.display:null;C.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Oe){It(L,L.return,Oe)}}}else if(i.tag===6){if(o===null){L=i;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(Oe){It(L,L.return,Oe)}}}else if(i.tag===18){if(o===null){L=i;try{var ie=L.stateNode;f?kT(ie,!0):kT(L.stateNode,!1)}catch(Oe){It(L,L.return,Oe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Hh(r,o))));break;case 19:lr(i,r),ur(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Hh(r,u)));break;case 30:break;case 21:break;default:lr(i,r),ur(r)}}function ur(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(UE(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,m=Tp(r);Fh(r,m,f);break;case 5:var v=o.stateNode;o.flags&32&&(sr(v,""),o.flags&=-33);var C=Tp(r);Fh(r,C,v);break;case 3:case 4:var L=o.stateNode.containerInfo,W=Tp(r);bp(r,W,L);break;default:throw Error(a(161))}}catch(se){It(r,r.return,se)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function KE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;KE(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function ia(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)BE(r,i.alternate,i),i=i.sibling}function Zs(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ha(4,i,i.return),Zs(i);break;case 1:Di(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&kE(i,i.return,o),Zs(i);break;case 27:Uu(i.stateNode);case 26:case 5:Di(i,i.return),Zs(i);break;case 22:i.memoizedState===null&&Zs(i);break;case 30:Zs(i);break;default:Zs(i)}r=r.sibling}}function aa(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:aa(f,m,o),Iu(4,m);break;case 1:if(aa(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(W){It(u,u.return,W)}if(u=m,f=u.updateQueue,f!==null){var C=u.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)Av(L[f],C)}catch(W){It(u,u.return,W)}}o&&v&64&&VE(m),Du(m,m.return);break;case 27:jE(m);case 26:case 5:aa(f,m,o),o&&u===null&&v&4&&LE(m),Du(m,m.return);break;case 12:aa(f,m,o);break;case 31:aa(f,m,o),o&&v&4&&qE(f,m);break;case 13:aa(f,m,o),o&&v&4&&GE(f,m);break;case 22:m.memoizedState===null&&aa(f,m,o),Du(m,m.return);break;case 30:break;default:aa(f,m,o)}i=i.sibling}}function Ap(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&pu(o))}function wp(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&pu(r))}function li(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)YE(r,i,o,u),i=i.sibling}function YE(r,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:li(r,i,o,u),f&2048&&Iu(9,i);break;case 1:li(r,i,o,u);break;case 3:li(r,i,o,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&pu(r)));break;case 12:if(f&2048){li(r,i,o,u),r=i.stateNode;try{var m=i.memoizedProps,v=m.id,C=m.onPostCommit;typeof C=="function"&&C(v,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){It(i,i.return,L)}}else li(r,i,o,u);break;case 31:li(r,i,o,u);break;case 13:li(r,i,o,u);break;case 23:break;case 22:m=i.stateNode,v=i.alternate,i.memoizedState!==null?m._visibility&2?li(r,i,o,u):Nu(r,i):m._visibility&2?li(r,i,o,u):(m._visibility|=2,Zo(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Ap(v,i);break;case 24:li(r,i,o,u),f&2048&&wp(i.alternate,i);break;default:li(r,i,o,u)}}function Zo(r,i,o,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=r,v=i,C=o,L=u,W=v.flags;switch(v.tag){case 0:case 11:case 15:Zo(m,v,C,L,f),Iu(8,v);break;case 23:break;case 22:var se=v.stateNode;v.memoizedState!==null?se._visibility&2?Zo(m,v,C,L,f):Nu(m,v):(se._visibility|=2,Zo(m,v,C,L,f)),f&&W&2048&&Ap(v.alternate,v);break;case 24:Zo(m,v,C,L,f),f&&W&2048&&wp(v.alternate,v);break;default:Zo(m,v,C,L,f)}i=i.sibling}}function Nu(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,f=u.flags;switch(u.tag){case 22:Nu(o,u),f&2048&&Ap(u.alternate,u);break;case 24:Nu(o,u),f&2048&&wp(u.alternate,u);break;default:Nu(o,u)}i=i.sibling}}var xu=8192;function el(r,i,o){if(r.subtreeFlags&xu)for(r=r.child;r!==null;)QE(r,i,o),r=r.sibling}function QE(r,i,o){switch(r.tag){case 26:el(r,i,o),r.flags&xu&&r.memoizedState!==null&&WC(o,oi,r.memoizedState,r.memoizedProps);break;case 5:el(r,i,o);break;case 3:case 4:var u=oi;oi=rf(r.stateNode.containerInfo),el(r,i,o),oi=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=xu,xu=16777216,el(r,i,o),xu=u):el(r,i,o));break;default:el(r,i,o)}}function XE(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Ou(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Nn=u,JE(u,r)}XE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)WE(r),r=r.sibling}function WE(r){switch(r.tag){case 0:case 11:case 15:Ou(r),r.flags&2048&&Ha(9,r,r.return);break;case 3:Ou(r);break;case 12:Ou(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,qh(r)):Ou(r);break;default:Ou(r)}}function qh(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Nn=u,JE(u,r)}XE(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ha(8,i,i.return),qh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,qh(i));break;default:qh(i)}r=r.sibling}}function JE(r,i){for(;Nn!==null;){var o=Nn;switch(o.tag){case 0:case 11:case 15:Ha(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:pu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Nn=u;else e:for(o=r;Nn!==null;){u=Nn;var f=u.sibling,m=u.return;if(FE(u),u===o){Nn=null;break e}if(f!==null){f.return=m,Nn=f;break e}Nn=m}}}var fC={getCacheForType:function(r){var i=Pn(pn),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return Pn(pn).controller.signal}},dC=typeof WeakMap=="function"?WeakMap:Map,St=0,jt=null,lt=null,ht=0,Ct=0,Sr=null,qa=!1,tl=!1,Rp=!1,sa=0,on=0,Ga=0,eo=0,Cp=0,Ar=0,nl=0,Mu=null,cr=null,Ip=!1,Gh=0,ZE=0,$h=1/0,Kh=null,$a=null,An=0,Ka=null,rl=null,oa=0,Dp=0,Np=null,eT=null,Pu=0,xp=null;function wr(){return(St&2)!==0&&ht!==0?ht&-ht:H.T!==null?Lp():ve()}function tT(){if(Ar===0)if((ht&536870912)===0||gt){var r=gi;gi<<=1,(gi&3932160)===0&&(gi=262144),Ar=r}else Ar=536870912;return r=Tr.current,r!==null&&(r.flags|=32),Ar}function hr(r,i,o){(r===jt&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)&&(il(r,0),Ya(r,ht,Ar,!1)),yi(r,o),((St&2)===0||r!==jt)&&(r===jt&&((St&2)===0&&(eo|=o),on===4&&Ya(r,ht,Ar,!1)),Ni(r))}function nT(r,i,o){if((St&6)!==0)throw Error(a(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||gr(r,i),f=u?gC(r,i):Mp(r,i,!0),m=u;do{if(f===0){tl&&!u&&Ya(r,i,0,!1);break}else{if(o=r.current.alternate,m&&!mC(o)){f=Mp(r,i,!1),m=!1;continue}if(f===2){if(m=i,r.errorRecoveryDisabledLanes&m)var v=0;else v=r.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var C=r;f=Mu;var L=C.current.memoizedState.isDehydrated;if(L&&(il(C,v).flags|=256),v=Mp(C,v,!1),v!==2){if(Rp&&!L){C.errorRecoveryDisabledLanes|=m,eo|=m,f=4;break e}m=cr,cr=f,m!==null&&(cr===null?cr=m:cr.push.apply(cr,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){il(r,0),Ya(r,i,0,!0);break}e:{switch(u=r,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ya(u,i,Ar,!qa);break e;case 2:cr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Gh+300-Ye(),10<f)){if(Ya(u,i,Ar,!qa),pr(u,0,!0)!==0)break e;oa=i,u.timeoutHandle=MT(rT.bind(null,u,o,cr,Kh,Ip,i,Ar,eo,nl,qa,m,"Throttled",-0,0),f);break e}rT(u,o,cr,Kh,Ip,i,Ar,eo,nl,qa,m,null,-0,0)}}break}while(!0);Ni(r)}function rT(r,i,o,u,f,m,v,C,L,W,se,he,ee,ie){if(r.timeoutHandle=-1,he=i.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ti},QE(i,m,he);var Oe=(m&62914560)===m?Gh-Ye():(m&4194048)===m?ZE-Ye():0;if(Oe=JC(he,Oe),Oe!==null){oa=m,r.cancelPendingCommit=Oe(hT.bind(null,r,i,m,o,u,f,v,C,L,se,he,null,ee,ie)),Ya(r,m,v,!W);return}}hT(r,i,m,o,u,f,v,C,L)}function mC(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!vr(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ya(r,i,o,u){i&=~Cp,i&=~eo,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var m=31-Xt(f),v=1<<m;u[m]=-1,f&=~v}o!==0&&qi(r,o,i)}function Yh(){return(St&6)===0?(Vu(0),!1):!0}function Op(){if(lt!==null){if(Ct===0)var r=lt.return;else r=lt,Xi=Gs=null,Ym(r),Yo=null,yu=0,r=lt;for(;r!==null;)PE(r.alternate,r),r=r.return;lt=null}}function il(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,PC(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),oa=0,Op(),jt=r,lt=o=Yi(r.current,null),ht=i,Ct=0,Sr=null,qa=!1,tl=gr(r,i),Rp=!1,nl=Ar=Cp=eo=Ga=on=0,cr=Mu=null,Ip=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-Xt(u),m=1<<f;i|=r[f],u&=~m}return sa=i,ph(),o}function iT(r,i){et=null,H.H=wu,i===Ko||i===Sh?(i=Ev(),Ct=3):i===km?(i=Ev(),Ct=4):Ct=i===cp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Sr=i,lt===null&&(on=1,Lh(r,zr(i,r.current)))}function aT(){var r=Tr.current;return r===null?!0:(ht&4194048)===ht?qr===null:(ht&62914560)===ht||(ht&536870912)!==0?r===qr:!1}function sT(){var r=H.H;return H.H=wu,r===null?wu:r}function oT(){var r=H.A;return H.A=fC,r}function Qh(){on=4,qa||(ht&4194048)!==ht&&Tr.current!==null||(tl=!0),(Ga&134217727)===0&&(eo&134217727)===0||jt===null||Ya(jt,ht,Ar,!1)}function Mp(r,i,o){var u=St;St|=2;var f=sT(),m=oT();(jt!==r||ht!==i)&&(Kh=null,il(r,i)),i=!1;var v=on;e:do try{if(Ct!==0&&lt!==null){var C=lt,L=Sr;switch(Ct){case 8:Op(),v=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(i=!0);var W=Ct;if(Ct=0,Sr=null,al(r,C,L,W),o&&tl){v=0;break e}break;default:W=Ct,Ct=0,Sr=null,al(r,C,L,W)}}pC(),v=on;break}catch(se){iT(r,se)}while(!0);return i&&r.shellSuspendCounter++,Xi=Gs=null,St=u,H.H=f,H.A=m,lt===null&&(jt=null,ht=0,ph()),v}function pC(){for(;lt!==null;)lT(lt)}function gC(r,i){var o=St;St|=2;var u=sT(),f=oT();jt!==r||ht!==i?(Kh=null,$h=Ye()+500,il(r,i)):tl=gr(r,i);e:do try{if(Ct!==0&&lt!==null){i=lt;var m=Sr;t:switch(Ct){case 1:Ct=0,Sr=null,al(r,i,m,1);break;case 2:case 9:if(_v(m)){Ct=0,Sr=null,uT(i);break}i=function(){Ct!==2&&Ct!==9||jt!==r||(Ct=7),Ni(r)},m.then(i,i);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:_v(m)?(Ct=0,Sr=null,uT(i)):(Ct=0,Sr=null,al(r,i,m,7));break;case 5:var v=null;switch(lt.tag){case 26:v=lt.memoizedState;case 5:case 27:var C=lt;if(v?YT(v):C.stateNode.complete){Ct=0,Sr=null;var L=C.sibling;if(L!==null)lt=L;else{var W=C.return;W!==null?(lt=W,Xh(W)):lt=null}break t}}Ct=0,Sr=null,al(r,i,m,5);break;case 6:Ct=0,Sr=null,al(r,i,m,6);break;case 8:Op(),on=6;break e;default:throw Error(a(462))}}yC();break}catch(se){iT(r,se)}while(!0);return Xi=Gs=null,H.H=u,H.A=f,St=o,lt!==null?0:(jt=null,ht=0,ph(),on)}function yC(){for(;lt!==null&&!Rt();)lT(lt)}function lT(r){var i=OE(r.alternate,r,sa);r.memoizedProps=r.pendingProps,i===null?Xh(r):lt=i}function uT(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=RE(o,i,i.pendingProps,i.type,void 0,ht);break;case 11:i=RE(o,i,i.pendingProps,i.type.render,i.ref,ht);break;case 5:Ym(i);default:PE(o,i),i=lt=ov(i,sa),i=OE(o,i,sa)}r.memoizedProps=r.pendingProps,i===null?Xh(r):lt=i}function al(r,i,o,u){Xi=Gs=null,Ym(i),Yo=null,yu=0;var f=i.return;try{if(aC(r,f,i,o,ht)){on=1,Lh(r,zr(o,r.current)),lt=null;return}}catch(m){if(f!==null)throw lt=f,m;on=1,Lh(r,zr(o,r.current)),lt=null;return}i.flags&32768?(gt||u===1?r=!0:tl||(ht&536870912)!==0?r=!1:(qa=r=!0,(u===2||u===9||u===3||u===6)&&(u=Tr.current,u!==null&&u.tag===13&&(u.flags|=16384))),cT(i,r)):Xh(i)}function Xh(r){var i=r;do{if((i.flags&32768)!==0){cT(i,qa);return}r=i.return;var o=lC(i.alternate,i,sa);if(o!==null){lt=o;return}if(i=i.sibling,i!==null){lt=i;return}lt=i=r}while(i!==null);on===0&&(on=5)}function cT(r,i){do{var o=uC(r.alternate,r);if(o!==null){o.flags&=32767,lt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){lt=r;return}lt=r=o}while(r!==null);on=6,lt=null}function hT(r,i,o,u,f,m,v,C,L){r.cancelPendingCommit=null;do Wh();while(An!==0);if((St&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=Tm,Zl(r,o,m,v,C,L),r===jt&&(lt=jt=null,ht=0),rl=i,Ka=r,oa=o,Dp=m,Np=f,eT=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,TC(an,function(){return gT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,f=fe.p,fe.p=2,v=St,St|=4;try{cC(r,i,o)}finally{St=v,fe.p=f,H.T=u}}An=1,fT(),dT(),mT()}}function fT(){if(An===1){An=0;var r=Ka,i=rl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var u=fe.p;fe.p=2;var f=St;St|=4;try{$E(i,r);var m=Gp,v=J_(r.containerInfo),C=m.focusedElem,L=m.selectionRange;if(v!==C&&C&&C.ownerDocument&&W_(C.ownerDocument.documentElement,C)){if(L!==null&&gm(C)){var W=L.start,se=L.end;if(se===void 0&&(se=W),"selectionStart"in C)C.selectionStart=W,C.selectionEnd=Math.min(se,C.value.length);else{var he=C.ownerDocument||document,ee=he&&he.defaultView||window;if(ee.getSelection){var ie=ee.getSelection(),Oe=C.textContent.length,He=Math.min(L.start,Oe),Vt=L.end===void 0?He:Math.min(L.end,Oe);!ie.extend&&He>Vt&&(v=Vt,Vt=He,He=v);var K=X_(C,He),F=X_(C,Vt);if(K&&F&&(ie.rangeCount!==1||ie.anchorNode!==K.node||ie.anchorOffset!==K.offset||ie.focusNode!==F.node||ie.focusOffset!==F.offset)){var X=he.createRange();X.setStart(K.node,K.offset),ie.removeAllRanges(),He>Vt?(ie.addRange(X),ie.extend(F.node,F.offset)):(X.setEnd(F.node,F.offset),ie.addRange(X))}}}}for(he=[],ie=C;ie=ie.parentNode;)ie.nodeType===1&&he.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<he.length;C++){var le=he[C];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}cf=!!qp,Gp=qp=null}finally{St=f,fe.p=u,H.T=o}}r.current=i,An=2}}function dT(){if(An===2){An=0;var r=Ka,i=rl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var u=fe.p;fe.p=2;var f=St;St|=4;try{BE(r,i.alternate,i)}finally{St=f,fe.p=u,H.T=o}}An=3}}function mT(){if(An===4||An===3){An=0,je();var r=Ka,i=rl,o=oa,u=eT;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?An=5:(An=0,rl=Ka=null,pT(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&($a=null),me(o),i=i.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(mr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=H.T,f=fe.p,fe.p=2,H.T=null;try{for(var m=r.onRecoverableError,v=0;v<u.length;v++){var C=u[v];m(C.value,{componentStack:C.stack})}}finally{H.T=i,fe.p=f}}(oa&3)!==0&&Wh(),Ni(r),f=r.pendingLanes,(o&261930)!==0&&(f&42)!==0?r===xp?Pu++:(Pu=0,xp=r):Pu=0,Vu(0)}}function pT(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,pu(i)))}function Wh(){return fT(),dT(),mT(),gT()}function gT(){if(An!==5)return!1;var r=Ka,i=Dp;Dp=0;var o=me(oa),u=H.T,f=fe.p;try{fe.p=32>o?32:o,H.T=null,o=Np,Np=null;var m=Ka,v=oa;if(An=0,rl=Ka=null,oa=0,(St&6)!==0)throw Error(a(331));var C=St;if(St|=4,WE(m.current),YE(m,m.current,v,o),St=C,Vu(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(mr,m)}catch{}return!0}finally{fe.p=f,H.T=u,pT(r,i)}}function yT(r,i,o){i=zr(o,i),i=up(r.stateNode,i,2),r=za(r,i,2),r!==null&&(yi(r,2),Ni(r))}function It(r,i,o){if(r.tag===3)yT(r,r,o);else for(;i!==null;){if(i.tag===3){yT(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($a===null||!$a.has(u))){r=zr(o,r),o=_E(2),u=za(i,o,2),u!==null&&(vE(o,u,i,r),yi(u,2),Ni(u));break}}i=i.return}}function Pp(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new dC;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(Rp=!0,f.add(o),r=_C.bind(null,r,i,o),i.then(r,r))}function _C(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,jt===r&&(ht&o)===o&&(on===4||on===3&&(ht&62914560)===ht&&300>Ye()-Gh?(St&2)===0&&il(r,0):Cp|=o,nl===ht&&(nl=0)),Ni(r)}function _T(r,i){i===0&&(i=Hi()),r=Fs(r,i),r!==null&&(yi(r,i),Ni(r))}function vC(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),_T(r,o)}function EC(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),_T(r,o)}function TC(r,i){return Fe(r,i)}var Jh=null,sl=null,Vp=!1,Zh=!1,kp=!1,Qa=0;function Ni(r){r!==sl&&r.next===null&&(sl===null?Jh=sl=r:sl=sl.next=r),Zh=!0,Vp||(Vp=!0,SC())}function Vu(r,i){if(!kp&&Zh){kp=!0;do for(var o=!1,u=Jh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var v=u.suspendedLanes,C=u.pingedLanes;m=(1<<31-Xt(42|r)+1)-1,m&=f&~(v&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,bT(u,m))}else m=ht,m=pr(u,u===jt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||gr(u,m)||(o=!0,bT(u,m));u=u.next}while(o);kp=!1}}function bC(){vT()}function vT(){Zh=Vp=!1;var r=0;Qa!==0&&MC()&&(r=Qa);for(var i=Ye(),o=null,u=Jh;u!==null;){var f=u.next,m=ET(u,i);m===0?(u.next=null,o===null?Jh=f:o.next=f,f===null&&(sl=o)):(o=u,(r!==0||(m&3)!==0)&&(Zh=!0)),u=f}An!==0&&An!==5||Vu(r),Qa!==0&&(Qa=0)}function ET(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var v=31-Xt(m),C=1<<v,L=f[v];L===-1?((C&o)===0||(C&u)!==0)&&(f[v]=Co(C,i)):L<=i&&(r.expiredLanes|=C),m&=~C}if(i=jt,o=ht,o=pr(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Lt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||gr(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&Lt(u),me(o)){case 2:case 8:o=Qn;break;case 32:o=an;break;case 268435456:o=Is;break;default:o=an}return u=TT.bind(null,r),o=Fe(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&Lt(u),r.callbackPriority=2,r.callbackNode=null,2}function TT(r,i){if(An!==0&&An!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Wh()&&r.callbackNode!==o)return null;var u=ht;return u=pr(r,r===jt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(nT(r,u,i),ET(r,Ye()),r.callbackNode!=null&&r.callbackNode===o?TT.bind(null,r):null)}function bT(r,i){if(Wh())return null;nT(r,i,!0)}function SC(){VC(function(){(St&6)!==0?Fe(nr,bC):vT()})}function Lp(){if(Qa===0){var r=Go;r===0&&(r=Wn,Wn<<=1,(Wn&261888)===0&&(Wn=256)),Qa=r}return Qa}function ST(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:No(""+r)}function AT(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function AC(r,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var m=ST((f[Ae]||null).action),v=u.submitter;v&&(i=(i=v[Ae]||null)?ST(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var C=new Si("action","action",null,u,f);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qa!==0){var L=v?AT(f,v):new FormData(f);rp(o,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(C.preventDefault(),L=v?AT(f,v):new FormData(f),rp(o,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var Up=0;Up<Em.length;Up++){var jp=Em[Up],wC=jp.toLowerCase(),RC=jp[0].toUpperCase()+jp.slice(1);si(wC,"on"+RC)}si(tv,"onAnimationEnd"),si(nv,"onAnimationIteration"),si(rv,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(FR,"onTransitionRun"),si(HR,"onTransitionStart"),si(qR,"onTransitionCancel"),si(iv,"onTransitionEnd"),Fn("onMouseEnter",["mouseout","mouseover"]),Fn("onMouseLeave",["mouseout","mouseover"]),Fn("onPointerEnter",["pointerout","pointerover"]),Fn("onPointerLeave",["pointerout","pointerover"]),ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ku));function wT(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var v=u.length-1;0<=v;v--){var C=u[v],L=C.instance,W=C.currentTarget;if(C=C.listener,L!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=W;try{m(f)}catch(se){mh(se)}f.currentTarget=null,m=L}else for(v=0;v<u.length;v++){if(C=u[v],L=C.instance,W=C.currentTarget,C=C.listener,L!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=W;try{m(f)}catch(se){mh(se)}f.currentTarget=null,m=L}}}}function ut(r,i){var o=i[qe];o===void 0&&(o=i[qe]=new Set);var u=r+"__bubble";o.has(u)||(RT(i,r,2,!1),o.add(u))}function zp(r,i,o){var u=0;i&&(u|=4),RT(o,r,u,i)}var ef="_reactListening"+Math.random().toString(36).slice(2);function Bp(r){if(!r[ef]){r[ef]=!0,rr.forEach(function(o){o!=="selectionchange"&&(CC.has(o)||zp(o,!1,r),zp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[ef]||(i[ef]=!0,zp("selectionchange",!1,i))}}function RT(r,i,o,u){switch(tb(i)){case 2:var f=tI;break;case 8:f=nI;break;default:f=ng}o=f.bind(null,i,o,r),f=void 0,!Ps||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function Fp(r,i,o,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var C=u.stateNode.containerInfo;if(C===f)break;if(v===4)for(v=u.return;v!==null;){var L=v.tag;if((L===3||L===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;C!==null;){if(v=zt(C),v===null)return;if(L=v.tag,L===5||L===6||L===26||L===27){u=m=v;continue e}C=C.parentNode}}u=u.return}Na(function(){var W=m,se=kr(o),he=[];e:{var ee=av.get(r);if(ee!==void 0){var ie=Si,Oe=r;switch(r){case"keypress":if(ks(o)===0)break e;case"keydown":case"keyup":ie=hh;break;case"focusin":Oe="focus",ie=Us;break;case"focusout":Oe="blur",ie=Us;break;case"beforeblur":case"afterblur":ie=Us;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=nh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=_;break;case tv:case nv:case rv:ie=ih;break;case iv:ie=N;break;case"scroll":case"scrollend":ie=su;break;case"wheel":ie=re;break;case"copy":case"cut":case"paste":ie=ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Ki;break;case"toggle":case"beforetoggle":ie=Ze}var He=(i&4)!==0,Vt=!He&&(r==="scroll"||r==="scrollend"),K=He?ee!==null?ee+"Capture":null:ee;He=[];for(var F=W,X;F!==null;){var le=F;if(X=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||X===null||K===null||(le=ni(F,K),le!=null&&He.push(Lu(F,le,X))),Vt)break;F=F.return}0<He.length&&(ee=new ie(ee,Oe,null,o,se),he.push({event:ee,listeners:He}))}}if((i&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",ee&&o!==ru&&(Oe=o.relatedTarget||o.fromElement)&&(zt(Oe)||Oe[Ne]))break e;if((ie||ee)&&(ee=se.window===se?se:(ee=se.ownerDocument)?ee.defaultView||ee.parentWindow:window,ie?(Oe=o.relatedTarget||o.toElement,ie=W,Oe=Oe?zt(Oe):null,Oe!==null&&(Vt=l(Oe),He=Oe.tag,Oe!==Vt||He!==5&&He!==27&&He!==6)&&(Oe=null)):(ie=null,Oe=W),ie!==Oe)){if(He=ou,le="onMouseLeave",K="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(He=Ki,le="onPointerLeave",K="onPointerEnter",F="pointer"),Vt=ie==null?ee:Bt(ie),X=Oe==null?ee:Bt(Oe),ee=new He(le,F+"leave",ie,o,se),ee.target=Vt,ee.relatedTarget=X,le=null,zt(se)===W&&(He=new He(K,F+"enter",Oe,o,se),He.target=X,He.relatedTarget=Vt,le=He),Vt=le,ie&&Oe)t:{for(He=IC,K=ie,F=Oe,X=0,le=K;le;le=He(le))X++;le=0;for(var ze=F;ze;ze=He(ze))le++;for(;0<X-le;)K=He(K),X--;for(;0<le-X;)F=He(F),le--;for(;X--;){if(K===F||F!==null&&K===F.alternate){He=K;break t}K=He(K),F=He(F)}He=null}else He=null;ie!==null&&CT(he,ee,ie,He,!1),Oe!==null&&Vt!==null&&CT(he,Vt,Oe,He,!0)}}e:{if(ee=W?Bt(W):window,ie=ee.nodeName&&ee.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ee.type==="file")var _t=q_;else if(F_(ee))if(G_)_t=jR;else{_t=LR;var Ve=kR}else ie=ee.nodeName,!ie||ie.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?W&&Do(W.elementType)&&(_t=q_):_t=UR;if(_t&&(_t=_t(r,W))){H_(he,_t,o,se);break e}Ve&&Ve(r,ee,W),r==="focusout"&&W&&ee.type==="number"&&W.memoizedProps.value!=null&&eu(ee,"number",ee.value)}switch(Ve=W?Bt(W):window,r){case"focusin":(F_(Ve)||Ve.contentEditable==="true")&&(Lo=Ve,ym=W,fu=null);break;case"focusout":fu=ym=Lo=null;break;case"mousedown":_m=!0;break;case"contextmenu":case"mouseup":case"dragend":_m=!1,Z_(he,o,se);break;case"selectionchange":if(BR)break;case"keydown":case"keyup":Z_(he,o,se)}var rt;if(bt)e:{switch(r){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else ko?js(r,o)&&(ft="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ft="onCompositionStart");ft&&(Ri&&o.locale!=="ko"&&(ko||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&ko&&(rt=au()):(bi=se,iu="value"in bi?bi.value:bi.textContent,ko=!0)),Ve=tf(W,ft),0<Ve.length&&(ft=new wi(ft,r,null,o,se),he.push({event:ft,listeners:Ve}),rt?ft.data=rt:(rt=Vo(o),rt!==null&&(ft.data=rt)))),(rt=Ur?OR(r,o):MR(r,o))&&(ft=tf(W,"onBeforeInput"),0<ft.length&&(Ve=new wi("onBeforeInput","beforeinput",null,o,se),he.push({event:Ve,listeners:ft}),Ve.data=rt)),AC(he,r,W,o,se)}wT(he,i)})}function Lu(r,i,o){return{instance:r,listener:i,currentTarget:o}}function tf(r,i){for(var o=i+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ni(r,o),f!=null&&u.unshift(Lu(r,f,m)),f=ni(r,i),f!=null&&u.push(Lu(r,f,m))),r.tag===3)return u;r=r.return}return[]}function IC(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function CT(r,i,o,u,f){for(var m=i._reactName,v=[];o!==null&&o!==u;){var C=o,L=C.alternate,W=C.stateNode;if(C=C.tag,L!==null&&L===u)break;C!==5&&C!==26&&C!==27||W===null||(L=W,f?(W=ni(o,m),W!=null&&v.unshift(Lu(o,W,L))):f||(W=ni(o,m),W!=null&&v.push(Lu(o,W,L)))),o=o.return}v.length!==0&&r.push({event:i,listeners:v})}var DC=/\r\n?/g,NC=/\u0000|\uFFFD/g;function IT(r){return(typeof r=="string"?r:""+r).replace(DC,`
`).replace(NC,"")}function DT(r,i){return i=IT(i),IT(r)===i}function Pt(r,i,o,u,f,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||sr(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&sr(r,""+u);break;case"className":mn(r,"class",u);break;case"tabIndex":mn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":mn(r,o,u);break;case"style":nu(r,u,m);break;case"data":if(i!=="object"){mn(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=No(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&Pt(r,i,"name",f.name,f,null),Pt(r,i,"formEncType",f.formEncType,f,null),Pt(r,i,"formMethod",f.formMethod,f,null),Pt(r,i,"formTarget",f.formTarget,f,null)):(Pt(r,i,"encType",f.encType,f,null),Pt(r,i,"method",f.method,f,null),Pt(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=No(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=ti);break;case"onScroll":u!=null&&ut("scroll",r);break;case"onScrollEnd":u!=null&&ut("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=No(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":ut("beforetoggle",r),ut("toggle",r),en(r,"popover",u);break;case"xlinkActuate":xt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":en(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=th.get(o)||o,en(r,o,u))}}function Hp(r,i,o,u,f,m){switch(o){case"style":nu(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof u=="string"?sr(r,u):(typeof u=="number"||typeof u=="bigint")&&sr(r,""+u);break;case"onScroll":u!=null&&ut("scroll",r);break;case"onScrollEnd":u!=null&&ut("scrollend",r);break;case"onClick":u!=null&&(r.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=r[Ae]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):en(r,o,u)}}}function kn(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",r),ut("load",r);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Pt(r,i,m,v,o,null)}}f&&Pt(r,i,"srcSet",o.srcSet,o,null),u&&Pt(r,i,"src",o.src,o,null);return;case"input":ut("invalid",r);var C=m=v=f=null,L=null,W=null;for(u in o)if(o.hasOwnProperty(u)){var se=o[u];if(se!=null)switch(u){case"name":f=se;break;case"type":v=se;break;case"checked":L=se;break;case"defaultChecked":W=se;break;case"value":m=se;break;case"defaultValue":C=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,i));break;default:Pt(r,i,u,se,o,null)}}Jc(r,m,C,L,W,v,f,!1);return;case"select":ut("invalid",r),u=v=m=null;for(f in o)if(o.hasOwnProperty(f)&&(C=o[f],C!=null))switch(f){case"value":m=C;break;case"defaultValue":v=C;break;case"multiple":u=C;default:Pt(r,i,f,C,o,null)}i=m,o=v,r.multiple=!!u,i!=null?Ra(r,!!u,i,!1):o!=null&&Ra(r,!!u,o,!0);return;case"textarea":ut("invalid",r),m=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(C=o[v],C!=null))switch(v){case"value":u=C;break;case"defaultValue":f=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(a(91));break;default:Pt(r,i,v,C,o,null)}Ca(r,u,f,m);return;case"option":for(L in o)if(o.hasOwnProperty(L)&&(u=o[L],u!=null))switch(L){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Pt(r,i,L,u,o,null)}return;case"dialog":ut("beforetoggle",r),ut("toggle",r),ut("cancel",r),ut("close",r);break;case"iframe":case"object":ut("load",r);break;case"video":case"audio":for(u=0;u<ku.length;u++)ut(ku[u],r);break;case"image":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"embed":case"source":case"link":ut("error",r),ut("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(u=o[W],u!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Pt(r,i,W,u,o,null)}return;default:if(Do(i)){for(se in o)o.hasOwnProperty(se)&&(u=o[se],u!==void 0&&Hp(r,i,se,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&Pt(r,i,C,u,o,null))}function xC(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,C=null,L=null,W=null,se=null;for(ie in o){var he=o[ie];if(o.hasOwnProperty(ie)&&he!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":L=he;default:u.hasOwnProperty(ie)||Pt(r,i,ie,null,u,he)}}for(var ee in u){var ie=u[ee];if(he=o[ee],u.hasOwnProperty(ee)&&(ie!=null||he!=null))switch(ee){case"type":m=ie;break;case"name":f=ie;break;case"checked":W=ie;break;case"defaultChecked":se=ie;break;case"value":v=ie;break;case"defaultValue":C=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,i));break;default:ie!==he&&Pt(r,i,ee,ie,u,he)}}Io(r,v,C,L,W,se,m,f);return;case"select":ie=v=C=ee=null;for(m in o)if(L=o[m],o.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":ie=L;default:u.hasOwnProperty(m)||Pt(r,i,m,null,u,L)}for(f in u)if(m=u[f],L=o[f],u.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":ee=m;break;case"defaultValue":C=m;break;case"multiple":v=m;default:m!==L&&Pt(r,i,f,m,u,L)}i=C,o=v,u=ie,ee!=null?Ra(r,!!o,ee,!1):!!u!=!!o&&(i!=null?Ra(r,!!o,i,!0):Ra(r,!!o,o?[]:"",!1));return;case"textarea":ie=ee=null;for(C in o)if(f=o[C],o.hasOwnProperty(C)&&f!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Pt(r,i,C,null,u,f)}for(v in u)if(f=u[v],m=o[v],u.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":ee=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&Pt(r,i,v,f,u,m)}Zc(r,ee,ie);return;case"option":for(var Oe in o)if(ee=o[Oe],o.hasOwnProperty(Oe)&&ee!=null&&!u.hasOwnProperty(Oe))switch(Oe){case"selected":r.selected=!1;break;default:Pt(r,i,Oe,null,u,ee)}for(L in u)if(ee=u[L],ie=o[L],u.hasOwnProperty(L)&&ee!==ie&&(ee!=null||ie!=null))switch(L){case"selected":r.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Pt(r,i,L,ee,u,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in o)ee=o[He],o.hasOwnProperty(He)&&ee!=null&&!u.hasOwnProperty(He)&&Pt(r,i,He,null,u,ee);for(W in u)if(ee=u[W],ie=o[W],u.hasOwnProperty(W)&&ee!==ie&&(ee!=null||ie!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,i));break;default:Pt(r,i,W,ee,u,ie)}return;default:if(Do(i)){for(var Vt in o)ee=o[Vt],o.hasOwnProperty(Vt)&&ee!==void 0&&!u.hasOwnProperty(Vt)&&Hp(r,i,Vt,void 0,u,ee);for(se in u)ee=u[se],ie=o[se],!u.hasOwnProperty(se)||ee===ie||ee===void 0&&ie===void 0||Hp(r,i,se,ee,u,ie);return}}for(var K in o)ee=o[K],o.hasOwnProperty(K)&&ee!=null&&!u.hasOwnProperty(K)&&Pt(r,i,K,null,u,ee);for(he in u)ee=u[he],ie=o[he],!u.hasOwnProperty(he)||ee===ie||ee==null&&ie==null||Pt(r,i,he,ee,u,ie)}function NT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function OC(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,v=f.initiatorType,C=f.duration;if(m&&C&&NT(v)){for(v=0,C=f.responseEnd,u+=1;u<o.length;u++){var L=o[u],W=L.startTime;if(W>C)break;var se=L.transferSize,he=L.initiatorType;se&&NT(he)&&(L=L.responseEnd,v+=se*(L<C?1:(C-W)/(L-W)))}if(--u,i+=8*(m+v)/(f.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var qp=null,Gp=null;function nf(r){return r.nodeType===9?r:r.ownerDocument}function xT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function OT(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function $p(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Kp=null;function MC(){var r=window.event;return r&&r.type==="popstate"?r===Kp?!1:(Kp=r,!0):(Kp=null,!1)}var MT=typeof setTimeout=="function"?setTimeout:void 0,PC=typeof clearTimeout=="function"?clearTimeout:void 0,PT=typeof Promise=="function"?Promise:void 0,VC=typeof queueMicrotask=="function"?queueMicrotask:typeof PT<"u"?function(r){return PT.resolve(null).then(r).catch(kC)}:MT;function kC(r){setTimeout(function(){throw r})}function Xa(r){return r==="head"}function VT(r,i){var o=i,u=0;do{var f=o.nextSibling;if(r.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(f),cl(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Uu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Uu(o);for(var m=o.firstChild;m;){var v=m.nextSibling,C=m.nodeName;m[Nt]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=v}}else o==="body"&&Uu(r.ownerDocument.body);o=f}while(o);cl(i)}function kT(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Yp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Yp(o),qt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function LC(r,i,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Nt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Gr(r.nextSibling),r===null)break}return null}function UC(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Gr(r.nextSibling),r===null))return null;return r}function LT(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Gr(r.nextSibling),r===null))return null;return r}function Qp(r){return r.data==="$?"||r.data==="$~"}function Xp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function jC(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Gr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Wp=null;function UT(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return Gr(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function jT(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function zT(r,i,o){switch(i=nf(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function Uu(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);qt(r)}var $r=new Map,BT=new Set;function rf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var la=fe.d;fe.d={f:zC,r:BC,D:FC,C:HC,L:qC,m:GC,X:KC,S:$C,M:YC};function zC(){var r=la.f(),i=Yh();return r||i}function BC(r){var i=tt(r);i!==null&&i.tag===5&&i.type==="form"?iE(i):la.r(r)}var ol=typeof document>"u"?null:document;function FT(r,i,o){var u=ol;if(u&&typeof i=="string"&&i){var f=ar(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),BT.has(f)||(BT.add(f),r={rel:r,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),kn(i,"link",r),Ft(i),u.head.appendChild(i)))}}function FC(r){la.D(r),FT("dns-prefetch",r,null)}function HC(r,i){la.C(r,i),FT("preconnect",r,i)}function qC(r,i,o){la.L(r,i,o);var u=ol;if(u&&r&&i){var f='link[rel="preload"][as="'+ar(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+ar(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+ar(o.imageSizes)+'"]')):f+='[href="'+ar(r)+'"]';var m=f;switch(i){case"style":m=ll(r);break;case"script":m=ul(r)}$r.has(m)||(r=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),$r.set(m,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(ju(m))||i==="script"&&u.querySelector(zu(m))||(i=u.createElement("link"),kn(i,"link",r),Ft(i),u.head.appendChild(i)))}}function GC(r,i){la.m(r,i);var o=ol;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+ar(u)+'"][href="'+ar(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ul(r)}if(!$r.has(m)&&(r=E({rel:"modulepreload",href:r},i),$r.set(m,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(zu(m)))return}u=o.createElement("link"),kn(u,"link",r),Ft(u),o.head.appendChild(u)}}}function $C(r,i,o){la.S(r,i,o);var u=ol;if(u&&r){var f=Dn(u).hoistableStyles,m=ll(r);i=i||"default";var v=f.get(m);if(!v){var C={loading:0,preload:null};if(v=u.querySelector(ju(m)))C.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":i},o),(o=$r.get(m))&&Jp(r,o);var L=v=u.createElement("link");Ft(L),kn(L,"link",r),L._p=new Promise(function(W,se){L.onload=W,L.onerror=se}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,af(v,i,u)}v={type:"stylesheet",instance:v,count:1,state:C},f.set(m,v)}}}function KC(r,i){la.X(r,i);var o=ol;if(o&&r){var u=Dn(o).hoistableScripts,f=ul(r),m=u.get(f);m||(m=o.querySelector(zu(f)),m||(r=E({src:r,async:!0},i),(i=$r.get(f))&&Zp(r,i),m=o.createElement("script"),Ft(m),kn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function YC(r,i){la.M(r,i);var o=ol;if(o&&r){var u=Dn(o).hoistableScripts,f=ul(r),m=u.get(f);m||(m=o.querySelector(zu(f)),m||(r=E({src:r,async:!0,type:"module"},i),(i=$r.get(f))&&Zp(r,i),m=o.createElement("script"),Ft(m),kn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function HT(r,i,o,u){var f=(f=Te.current)?rf(f):null;if(!f)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=ll(o.href),o=Dn(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=ll(o.href);var m=Dn(f).hoistableStyles,v=m.get(r);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,v),(m=f.querySelector(ju(r)))&&!m._p&&(v.instance=m,v.state.loading=5),$r.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},$r.set(r,o),m||QC(f,r,o,v.state))),i&&u===null)throw Error(a(528,""));return v}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ul(o),o=Dn(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function ll(r){return'href="'+ar(r)+'"'}function ju(r){return'link[rel="stylesheet"]['+r+"]"}function qT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function QC(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),kn(i,"link",o),Ft(i),r.head.appendChild(i))}function ul(r){return'[src="'+ar(r)+'"]'}function zu(r){return"script[async]"+r}function GT(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+ar(o.href)+'"]');if(u)return i.instance=u,Ft(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Ft(u),kn(u,"style",f),af(u,o.precedence,r),i.instance=u;case"stylesheet":f=ll(o.href);var m=r.querySelector(ju(f));if(m)return i.state.loading|=4,i.instance=m,Ft(m),m;u=qT(o),(f=$r.get(f))&&Jp(u,f),m=(r.ownerDocument||r).createElement("link"),Ft(m);var v=m;return v._p=new Promise(function(C,L){v.onload=C,v.onerror=L}),kn(m,"link",u),i.state.loading|=4,af(m,o.precedence,r),i.instance=m;case"script":return m=ul(o.src),(f=r.querySelector(zu(m)))?(i.instance=f,Ft(f),f):(u=o,(f=$r.get(m))&&(u=E({},o),Zp(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),Ft(f),kn(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,af(u,o.precedence,r));return i.instance}function af(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,v=0;v<u.length;v++){var C=u[v];if(C.dataset.precedence===i)m=C;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Jp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Zp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var sf=null;function $T(r,i,o){if(sf===null){var u=new Map,f=sf=new Map;f.set(o,u)}else f=sf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[Nt]||m[Ee]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=r+v;var C=u.get(v);C?C.push(m):u.set(v,[m])}}return u}function KT(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function XC(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function YT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function WC(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=ll(u.href),m=i.querySelector(ju(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=of.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=m,Ft(m);return}m=i.ownerDocument||i,u=qT(u),(f=$r.get(f))&&Jp(u,f),m=m.createElement("link"),Ft(m);var v=m;v._p=new Promise(function(C,L){v.onload=C,v.onerror=L}),kn(m,"link",u),o.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=of.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var eg=0;function JC(r,i){return r.stylesheets&&r.count===0&&uf(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&uf(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4+i);0<r.imgBytes&&eg===0&&(eg=62500*OC());var f=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&uf(r,r.stylesheets),r.unsuspend)){var m=r.unsuspend;r.unsuspend=null,m()}},(r.imgBytes>eg?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function of(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var lf=null;function uf(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,lf=new Map,i.forEach(ZC,r),lf=null,of.call(r))}function ZC(r,i){if(!(i.state.loading&4)){var o=lf.get(r);if(o)var u=o.get(null);else{o=new Map,lf.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=i.instance,v=f.getAttribute("data-precedence"),m=o.get(v)||u,m===u&&o.set(null,f),o.set(v,f),this.count++,u=of.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var Bu={$$typeof:G,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function eI(r,i,o,u,f,m,v,C,L){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jn(0),this.hiddenUpdates=Jn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function QT(r,i,o,u,f,m,v,C,L,W,se,he){return r=new eI(r,i,o,v,L,W,se,he,C),i=1,m===!0&&(i|=24),m=Er(3,null,null,i),r.current=m,m.stateNode=r,i=Mm(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},Lm(m),r}function XT(r){return r?(r=zo,r):zo}function WT(r,i,o,u,f,m){f=XT(f),u.context===null?u.context=f:u.pendingContext=f,u=ja(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=za(r,u,i),o!==null&&(hr(o,r,i),vu(o,r,i))}function JT(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function tg(r,i){JT(r,i),(r=r.alternate)&&JT(r,i)}function ZT(r){if(r.tag===13||r.tag===31){var i=Fs(r,67108864);i!==null&&hr(i,r,67108864),tg(r,67108864)}}function eb(r){if(r.tag===13||r.tag===31){var i=wr();i=J(i);var o=Fs(r,i);o!==null&&hr(o,r,i),tg(r,i)}}var cf=!0;function tI(r,i,o,u){var f=H.T;H.T=null;var m=fe.p;try{fe.p=2,ng(r,i,o,u)}finally{fe.p=m,H.T=f}}function nI(r,i,o,u){var f=H.T;H.T=null;var m=fe.p;try{fe.p=8,ng(r,i,o,u)}finally{fe.p=m,H.T=f}}function ng(r,i,o,u){if(cf){var f=rg(u);if(f===null)Fp(r,i,u,hf,o),nb(r,u);else if(iI(f,r,i,o,u))u.stopPropagation();else if(nb(r,u),i&4&&-1<rI.indexOf(r)){for(;f!==null;){var m=tt(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Vr(m.pendingLanes);if(v!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;v;){var L=1<<31-Xt(v);C.entanglements[1]|=L,v&=~L}Ni(m),(St&6)===0&&($h=Ye()+500,Vu(0))}}break;case 31:case 13:C=Fs(m,2),C!==null&&hr(C,m,2),Yh(),tg(m,2)}if(m=rg(u),m===null&&Fp(r,i,u,hf,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Fp(r,i,u,null,o)}}function rg(r){return r=kr(r),ig(r)}var hf=null;function ig(r){if(hf=null,r=zt(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return hf=r,null}function tb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dt()){case nr:return 2;case Qn:return 8;case an:case Sn:return 32;case Is:return 268435456;default:return 32}default:return 32}}var ag=!1,Wa=null,Ja=null,Za=null,Fu=new Map,Hu=new Map,es=[],rI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nb(r,i){switch(r){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":Fu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hu.delete(i.pointerId)}}function qu(r,i,o,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=tt(i),i!==null&&ZT(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function iI(r,i,o,u,f){switch(i){case"focusin":return Wa=qu(Wa,r,i,o,u,f),!0;case"dragenter":return Ja=qu(Ja,r,i,o,u,f),!0;case"mouseover":return Za=qu(Za,r,i,o,u,f),!0;case"pointerover":var m=f.pointerId;return Fu.set(m,qu(Fu.get(m)||null,r,i,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Hu.set(m,qu(Hu.get(m)||null,r,i,o,u,f)),!0}return!1}function rb(r){var i=zt(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,Ie(r.priority,function(){eb(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,Ie(r.priority,function(){eb(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ff(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=rg(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);ru=u,o.target.dispatchEvent(u),ru=null}else return i=tt(o),i!==null&&ZT(i),r.blockedOn=o,!1;i.shift()}return!0}function ib(r,i,o){ff(r)&&o.delete(i)}function aI(){ag=!1,Wa!==null&&ff(Wa)&&(Wa=null),Ja!==null&&ff(Ja)&&(Ja=null),Za!==null&&ff(Za)&&(Za=null),Fu.forEach(ib),Hu.forEach(ib)}function df(r,i){r.blockedOn===i&&(r.blockedOn=null,ag||(ag=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,aI)))}var mf=null;function ab(r){mf!==r&&(mf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){mf===r&&(mf=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(ig(u||o)===null)continue;break}var m=tt(o);m!==null&&(r.splice(i,3),i-=3,rp(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function cl(r){function i(L){return df(L,r)}Wa!==null&&df(Wa,r),Ja!==null&&df(Ja,r),Za!==null&&df(Za,r),Fu.forEach(i),Hu.forEach(i);for(var o=0;o<es.length;o++){var u=es[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<es.length&&(o=es[0],o.blockedOn===null);)rb(o),o.blockedOn===null&&es.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],v=f[Ae]||null;if(typeof m=="function")v||ab(o);else if(v){var C=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Ae]||null)C=v.formAction;else if(ig(f)!==null)continue}else C=v.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),ab(o)}}}function sb(){function r(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function sg(r){this._internalRoot=r}pf.prototype.render=sg.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=wr();WT(o,u,r,i,null,null)},pf.prototype.unmount=sg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;WT(r.current,2,null,r,null,null),Yh(),i[Ne]=null}};function pf(r){this._internalRoot=r}pf.prototype.unstable_scheduleHydration=function(r){if(r){var i=ve();r={blockedOn:null,target:r,priority:i};for(var o=0;o<es.length&&i!==0&&i<es[o].priority;o++);es.splice(o,0,r),o===0&&rb(r)}};var ob=e.version;if(ob!=="19.2.4")throw Error(a(527,ob,"19.2.4"));fe.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=g(i),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var sI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gf.isDisabled&&gf.supportsFiber)try{mr=gf.inject(sI),Ut=gf}catch{}}return $u.createRoot=function(r,i){if(!s(r))throw Error(a(299));var o=!1,u="",f=mE,m=pE,v=gE;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=QT(r,1,!1,null,null,o,u,null,f,m,v,sb),r[Ne]=i.current,Bp(r),new sg(i)},$u.hydrateRoot=function(r,i,o){if(!s(r))throw Error(a(299));var u=!1,f="",m=mE,v=pE,C=gE,L=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.formState!==void 0&&(L=o.formState)),i=QT(r,1,!0,i,o??null,u,f,L,m,v,C,sb),i.context=XT(null),o=i.current,u=wr(),u=J(u),f=ja(u),f.callback=null,za(o,f,u),o=u,i.current.lanes=o,yi(i,o),Ni(i),r[Ne]=i.current,Bp(r),new pf(i)},$u.version="19.2.4",$u}var yb;function vI(){if(yb)return cg.exports;yb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cg.exports=_I(),cg.exports}var EI=vI();const TI=qS(EI);var mg={exports:{}},pg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b;function bI(){if(_b)return pg;_b=1;var n=xd();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,a=n.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return pg.useSyncExternalStoreWithSelector=function(p,g,y,E,b){var R=s(null);if(R.current===null){var k={hasValue:!1,value:null};R.current=k}else k=R.current;R=c(function(){function j(ae){if(!Y){if(Y=!0,B=ae,ae=E(ae),b!==void 0&&k.hasValue){var te=k.value;if(b(te,ae))return G=te}return G=ae}if(te=G,t(B,ae))return te;var S=E(ae);return b!==void 0&&b(te,S)?(B=ae,te):(B=ae,G=S)}var Y=!1,B,G,Z=y===void 0?null:y;return[function(){return j(g())},Z===null?void 0:function(){return j(Z())}]},[g,y,E,b]);var z=a(p,R[0],R[1]);return l(function(){k.hasValue=!0,k.value=z},[z]),d(z),z},pg}var vb;function SI(){return vb||(vb=1,mg.exports=bI()),mg.exports}var AI=SI();function wI(n){n()}function RI(){let n=null,e=null;return{clear(){n=null,e=null},notify(){wI(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let a=n;for(;a;)t.push(a),a=a.next;return t},subscribe(t){let a=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!a||n===null||(a=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var Eb={notify(){},get:()=>[]};function CI(n,e){let t,a=Eb,s=0,l=!1;function c(z){y();const j=a.subscribe(z);let Y=!1;return()=>{Y||(Y=!0,j(),E())}}function d(){a.notify()}function p(){k.onStateChange&&k.onStateChange()}function g(){return l}function y(){s++,t||(t=n.subscribe(p),a=RI())}function E(){s--,t&&s===0&&(t(),t=void 0,a.clear(),a=Eb)}function b(){l||(l=!0,y())}function R(){l&&(l=!1,E())}const k={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:p,isSubscribed:g,trySubscribe:b,tryUnsubscribe:R,getListeners:()=>a};return k}var II=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DI=II(),NI=()=>typeof navigator<"u"&&navigator.product==="ReactNative",xI=NI(),OI=()=>DI||xI?P.useLayoutEffect:P.useEffect,MI=OI(),gg=Symbol.for("react-redux-context"),yg=typeof globalThis<"u"?globalThis:{};function PI(){if(!P.createContext)return{};const n=yg[gg]??(yg[gg]=new Map);let e=n.get(P.createContext);return e||(e=P.createContext(null),n.set(P.createContext,e)),e}var _s=PI();function VI(n){const{children:e,context:t,serverState:a,store:s}=n,l=P.useMemo(()=>{const p=CI(s);return{store:s,subscription:p,getServerState:a?()=>a:void 0}},[s,a]),c=P.useMemo(()=>s.getState(),[s]);MI(()=>{const{subscription:p}=l;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==s.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[l,c]);const d=t||_s;return P.createElement(d.Provider,{value:l},e)}var kI=VI;function Cy(n=_s){return function(){return P.useContext(n)}}var KS=Cy();function YS(n=_s){const e=n===_s?KS:Cy(n),t=()=>{const{store:a}=e();return a};return Object.assign(t,{withTypes:()=>t}),t}var LI=YS();function UI(n=_s){const e=n===_s?LI:YS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var jI=UI(),zI=(n,e)=>n===e;function BI(n=_s){const e=n===_s?KS:Cy(n),t=(a,s={})=>{const{equalityFn:l=zI}=typeof s=="function"?{equalityFn:s}:s,c=e(),{store:d,subscription:p,getServerState:g}=c;P.useRef(!0);const y=P.useCallback({[a.name](b){return a(b)}}[a.name],[a]),E=AI.useSyncExternalStoreWithSelector(p.addNestedSub,d.getState,g||d.getState,y,l);return P.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var FI=BI();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var QS=n=>{throw TypeError(n)},HI=(n,e,t)=>e.has(n)||QS("Cannot "+t),_g=(n,e,t)=>(HI(n,e,"read from private field"),t?t.call(n):e.get(n)),qI=(n,e,t)=>e.has(n)?QS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Tb="popstate";function GI(n={}){function e(s,l){let{pathname:c="/",search:d="",hash:p=""}=Ta(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),pc("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=s.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof l=="string"?l:ji(l))}function a(s,l){nn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return KI(e,t,a,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function nn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $I(){return Math.random().toString(36).substring(2,10)}function bb(n,e){return{usr:n.state,key:n.key,idx:e}}function pc(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ta(e):e,state:t,key:e&&e.key||a||$I()}}function ji({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ta(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function KI(n,e,t,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,d="POP",p=null,g=y();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function y(){return(c.state||{idx:null}).idx}function E(){d="POP";let j=y(),Y=j==null?null:j-g;g=j,p&&p({action:d,location:z.location,delta:Y})}function b(j,Y){d="PUSH";let B=pc(z.location,j,Y);t&&t(B,j),g=y()+1;let G=bb(B,g),Z=z.createHref(B);try{c.pushState(G,"",Z)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;s.location.assign(Z)}l&&p&&p({action:d,location:z.location,delta:1})}function R(j,Y){d="REPLACE";let B=pc(z.location,j,Y);t&&t(B,j),g=y();let G=bb(B,g),Z=z.createHref(B);c.replaceState(G,"",Z),l&&p&&p({action:d,location:z.location,delta:0})}function k(j){return XS(j)}let z={get action(){return d},get location(){return n(s,c)},listen(j){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(Tb,E),p=j,()=>{s.removeEventListener(Tb,E),p=null}},createHref(j){return e(s,j)},createURL:k,encodeLocation(j){let Y=k(j);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:b,replace:R,go(j){return c.go(j)}};return z}function XS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),at(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:ji(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}var Wu,Sb=class{constructor(n){if(qI(this,Wu,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(_g(this,Wu).has(n))return _g(this,Wu).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){_g(this,Wu).set(n,e)}};Wu=new WeakMap;var YI=new Set(["lazy","caseSensitive","path","id","index","children"]);function QI(n){return YI.has(n)}var XI=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function WI(n){return XI.has(n)}function JI(n){return n.index===!0}function gc(n,e,t=[],a={},s=!1){return n.map((l,c)=>{let d=[...t,String(c)],p=typeof l.id=="string"?l.id:d.join("-");if(at(l.index!==!0||!l.children,"Cannot specify children on an index route"),at(s||!a[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),JI(l)){let g={...l,id:p};return a[p]=Ab(g,e(g)),g}else{let g={...l,id:p,children:void 0};return a[p]=Ab(g,e(g)),l.children&&(g.children=gc(l.children,e,d,a,s)),g}})}function Ab(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function is(n,e,t="/"){return Ju(n,e,t,!1)}function Ju(n,e,t,a){let s=typeof e=="string"?Ta(e):e,l=Xr(s.pathname||"/",t);if(l==null)return null;let c=WS(n);eD(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=hD(l);d=uD(c[p],g,a)}return d}function ZI(n,e){let{route:t,pathname:a,params:s}=n;return{id:t.id,pathname:a,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function WS(n,e=[],t=[],a="",s=!1){let l=(c,d,p=s,g)=>{let y={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(a)&&p)return;at(y.relativePath.startsWith(a),`Absolute route path "${y.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(a.length)}let E=Pi([a,y.relativePath]),b=t.concat(y);c.children&&c.children.length>0&&(at(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),WS(c.children,e,b,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:oD(E,c.index),routesMeta:b})};return n.forEach((c,d)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,d);else for(let g of JS(c.path))l(c,d,!0,g)}),e}function JS(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=JS(a.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),s&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function eD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:lD(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var tD=/^:[\w-]+$/,nD=3,rD=2,iD=1,aD=10,sD=-2,wb=n=>n==="*";function oD(n,e){let t=n.split("/"),a=t.length;return t.some(wb)&&(a+=sD),e&&(a+=rD),t.filter(s=>!wb(s)).reduce((s,l)=>s+(tD.test(l)?nD:l===""?iD:aD),a)}function lD(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function uD(n,e,t=!1){let{routesMeta:a}=n,s={},l="/",c=[];for(let d=0;d<a.length;++d){let p=a[d],g=d===a.length-1,y=l==="/"?e:e.slice(l.length)||"/",E=td({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),b=p.route;if(!E&&g&&t&&!a[a.length-1].route.index&&(E=td({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:Pi([l,E.pathname]),pathnameBase:mD(Pi([l,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(l=Pi([l,E.pathnameBase]))}return c}function td(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=cD(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((g,{paramName:y,isOptional:E},b)=>{if(y==="*"){let k=d[b]||"";c=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const R=d[b];return E&&!R?g[y]=void 0:g[y]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function cD(n,e=!1,t=!0){nn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(a.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function hD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Xr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function fD({basename:n,pathname:e}){return e==="/"?n:Pi([n,e])}var ZS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Iy=n=>ZS.test(n);function dD(n,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof n=="string"?Ta(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=Rb(t.substring(1),"/"):l=Rb(t,e)):l=e,{pathname:l,search:pD(a),hash:gD(s)}}function Rb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function vg(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function eA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Od(n){let e=eA(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function Md(n,e,t,a=!1){let s;typeof n=="string"?s=Ta(n):(s={...n},at(!s.pathname||!s.pathname.includes("?"),vg("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),vg("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),vg("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!a&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),E-=1;s.pathname=b.join("/")}d=E>=0?e[E]:"/"}let p=dD(s,d),g=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}var Pi=n=>n.join("/").replace(/\/\/+/g,"/"),mD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),pD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Nc=class{constructor(n,e,t,a=!1){this.status=n,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function yc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function xc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var tA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nA(n,e){let t=n;if(typeof t!="string"||!ZS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,s=!1;if(tA)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=Xr(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:s=!0}catch{nn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:t}}var us=Symbol("Uninstrumented");function yD(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let d of c)l[d]&&t[d].push(l[d])}}));let a={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=Tl(t.lazy,e.lazy,()=>{});s&&(a.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],d=t[`lazy.${l}`];if(typeof c=="function"&&d.length>0){let p=Tl(d,c,()=>{});p&&(a.lazy=Object.assign(a.lazy||{},{[l]:p}))}})}return["loader","action"].forEach(s=>{let l=e[s];if(typeof l=="function"&&t[s].length>0){let c=l[us]??l,d=Tl(t[s],c,(...p)=>Cb(p[0]));d&&(s==="loader"&&c.hydrate===!0&&(d.hydrate=!0),d[us]=c,a[s]=d)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(a.middleware=e.middleware.map(s=>{let l=s[us]??s,c=Tl(t.middleware,l,(...d)=>Cb(d[0]));return c?(c[us]=l,c):s})),a}function _D(n,e){let t={navigate:[],fetch:[]};if(e.forEach(a=>a({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&t[c].push(s[c])}})),t.navigate.length>0){let a=n.navigate[us]??n.navigate,s=Tl(t.navigate,a,(...l)=>{let[c,d]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?ji(c):".",...Ib(n,d??{})}});s&&(s[us]=a,n.navigate=s)}if(t.fetch.length>0){let a=n.fetch[us]??n.fetch,s=Tl(t.fetch,a,(...l)=>{let[c,,d,p]=l;return{href:d??".",fetcherKey:c,...Ib(n,p??{})}});s&&(s[us]=a,n.fetch=s)}return n}function Tl(n,e,t){return n.length===0?null:async(...a)=>{let s=await rA(n,t(...a),()=>e(...a),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function rA(n,e,t,a){let s=n[a],l;if(s){let c,d=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=rA(n,e,t,a-1),l=await c,at(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(d,e)}catch(p){console.error("An instrumentation function threw an error:",p)}c||await d(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Cb(n){let{request:e,context:t,params:a,unstable_pattern:s}=n;return{request:vD(e),params:{...a},unstable_pattern:s,context:ED(t)}}function Ib(n,e){return{currentUrl:ji(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function vD(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function ED(n){if(bD(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var TD=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function bD(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===TD}var iA=["POST","PUT","PATCH","DELETE"],SD=new Set(iA),AD=["GET",...iA],wD=new Set(AD),aA=new Set([301,302,303,307,308]),RD=new Set([307,308]),Eg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},CD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ku={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ID=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),sA="remix-router-transitions",oA=Symbol("ResetLoaderData");function DD(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";at(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=n.hydrationRouteProperties||[],s=n.mapRouteProperties||ID,l=s;if(n.unstable_instrumentations){let V=n.unstable_instrumentations;l=q=>({...s(q),...yD(V.map(J=>J.route).filter(Boolean),q)})}let c={},d=gc(n.routes,l,void 0,c),p,g=n.basename||"/";g.startsWith("/")||(g=`/${g}`);let y=n.dataStrategy||PD,E={...n.future},b=null,R=new Set,k=null,z=null,j=null,Y=n.hydrationData!=null,B=is(d,n.history.location,g),G=!1,Z=null,ae;if(B==null&&!n.patchRoutesOnNavigation){let V=Kr(404,{pathname:n.history.location.pathname}),{matches:q,route:J}=yf(d);ae=!0,B=q,Z={[J.id]:V}}else if(B&&!n.hydrationData&&Hi(B,d,n.history.location.pathname).active&&(B=null),B)if(B.some(V=>V.route.lazy))ae=!1;else if(!B.some(V=>Dy(V.route)))ae=!0;else{let V=n.hydrationData?n.hydrationData.loaderData:null,q=n.hydrationData?n.hydrationData.errors:null;if(q){let J=B.findIndex(me=>q[me.route.id]!==void 0);ae=B.slice(0,J+1).every(me=>!Hg(me.route,V,q))}else ae=B.every(J=>!Hg(J.route,V,q))}else{ae=!1,B=[];let V=Hi(null,d,n.history.location.pathname);V.active&&V.matches&&(G=!0,B=V.matches)}let te,S={historyAction:n.history.action,location:n.history.location,matches:B,initialized:ae,navigation:Eg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||Z,fetchers:new Map,blockers:new Map},w="POP",I=null,O=!1,x,M=!1,D=new Map,pe=null,Se=!1,H=!1,fe=new Set,ge=new Map,Pe=0,Me=-1,U=new Map,$=new Set,oe=new Map,ce=new Map,ye=new Set,Te=new Map,Ue,Ke=null;function ot(){if(b=n.history.listen(({action:V,location:q,delta:J})=>{if(Ue){Ue(),Ue=void 0;return}nn(Te.size===0||J!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let me=gi({currentLocation:S.location,nextLocation:q,historyAction:V});if(me&&J!=null){let ve=new Promise(Ie=>{Ue=Ie});n.history.go(J*-1),Wn(me,{state:"blocked",location:q,proceed(){Wn(me,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),ve.then(()=>n.history.go(J))},reset(){let Ie=new Map(S.blockers);Ie.set(me,Ku),Et({blockers:Ie})}}),I==null||I.resolve(),I=null;return}return _e(V,q)}),t){JD(e,D);let V=()=>ZD(e,D);e.addEventListener("pagehide",V),pe=()=>e.removeEventListener("pagehide",V)}return S.initialized||_e("POP",S.location,{initialHydration:!0}),te}function Yt(){b&&b(),pe&&pe(),R.clear(),x&&x.abort(),S.fetchers.forEach((V,q)=>Sa(q)),S.blockers.forEach((V,q)=>Ns(q))}function In(V){return R.add(V),()=>R.delete(V)}function Et(V,q={}){V.matches&&(V.matches=V.matches.map(ve=>{let Ie=c[ve.route.id],xe=ve.route;return xe.element!==Ie.element||xe.errorElement!==Ie.errorElement||xe.hydrateFallbackElement!==Ie.hydrateFallbackElement?{...ve,route:Ie}:ve})),S={...S,...V};let J=[],me=[];S.fetchers.forEach((ve,Ie)=>{ve.state==="idle"&&(ye.has(Ie)?J.push(Ie):me.push(Ie))}),ye.forEach(ve=>{!S.fetchers.has(ve)&&!ge.has(ve)&&J.push(ve)}),[...R].forEach(ve=>ve(S,{deletedFetchers:J,newErrors:V.errors??null,viewTransitionOpts:q.viewTransitionOpts,flushSync:q.flushSync===!0})),J.forEach(ve=>Sa(ve)),me.forEach(ve=>S.fetchers.delete(ve))}function bn(V,q,{flushSync:J}={}){var qe,ke;let me=S.actionData!=null&&S.navigation.formMethod!=null&&Gn(S.navigation.formMethod)&&S.navigation.state==="loading"&&((qe=V.state)==null?void 0:qe._isRedirect)!==!0,ve;q.actionData?Object.keys(q.actionData).length>0?ve=q.actionData:ve=null:me?ve=S.actionData:ve=null;let Ie=q.loaderData?Ub(S.loaderData,q.loaderData,q.matches||[],q.errors):S.loaderData,xe=S.blockers;xe.size>0&&(xe=new Map(xe),xe.forEach((Qe,it)=>xe.set(it,Ku)));let Ee=Se?!1:Co(V,q.matches||S.matches),Ae=O===!0||S.navigation.formMethod!=null&&Gn(S.navigation.formMethod)&&((ke=V.state)==null?void 0:ke._isRedirect)!==!0;p&&(d=p,p=void 0),Se||w==="POP"||(w==="PUSH"?n.history.push(V,V.state):w==="REPLACE"&&n.history.replace(V,V.state));let Ne;if(w==="POP"){let Qe=D.get(S.location.pathname);Qe&&Qe.has(V.pathname)?Ne={currentLocation:S.location,nextLocation:V}:D.has(V.pathname)&&(Ne={currentLocation:V,nextLocation:S.location})}else if(M){let Qe=D.get(S.location.pathname);Qe?Qe.add(V.pathname):(Qe=new Set([V.pathname]),D.set(S.location.pathname,Qe)),Ne={currentLocation:S.location,nextLocation:V}}Et({...q,actionData:ve,loaderData:Ie,historyAction:w,location:V,initialized:!0,navigation:Eg,revalidation:"idle",restoreScrollPosition:Ee,preventScrollReset:Ae,blockers:xe},{viewTransitionOpts:Ne,flushSync:J===!0}),w="POP",O=!1,M=!1,Se=!1,H=!1,I==null||I.resolve(),I=null,Ke==null||Ke.resolve(),Ke=null}async function Qt(V,q){if(I==null||I.resolve(),I=null,typeof V=="number"){I||(I=Fb());let it=I.promise;return n.history.go(V),it}let J=Fg(S.location,S.matches,g,V,q==null?void 0:q.fromRouteId,q==null?void 0:q.relative),{path:me,submission:ve,error:Ie}=Db(!1,J,q),xe=S.location,Ee=pc(S.location,me,q&&q.state);Ee={...Ee,...n.history.encodeLocation(Ee)};let Ae=q&&q.replace!=null?q.replace:void 0,Ne="PUSH";Ae===!0?Ne="REPLACE":Ae===!1||ve!=null&&Gn(ve.formMethod)&&ve.formAction===S.location.pathname+S.location.search&&(Ne="REPLACE");let qe=q&&"preventScrollReset"in q?q.preventScrollReset===!0:void 0,ke=(q&&q.flushSync)===!0,Qe=gi({currentLocation:xe,nextLocation:Ee,historyAction:Ne});if(Qe){Wn(Qe,{state:"blocked",location:Ee,proceed(){Wn(Qe,{state:"proceeding",proceed:void 0,reset:void 0,location:Ee}),Qt(V,q)},reset(){let it=new Map(S.blockers);it.set(Qe,Ku),Et({blockers:it})}});return}await _e(Ne,Ee,{submission:ve,pendingError:Ie,preventScrollReset:qe,replace:q&&q.replace,enableViewTransition:q&&q.viewTransition,flushSync:ke,callSiteDefaultShouldRevalidate:q&&q.unstable_defaultShouldRevalidate})}function ne(){Ke||(Ke=Fb()),Qn(),Et({revalidation:"loading"});let V=Ke.promise;return S.navigation.state==="submitting"?V:S.navigation.state==="idle"?(_e(S.historyAction,S.location,{startUninterruptedRevalidation:!0}),V):(_e(w||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:M===!0}),V)}async function _e(V,q,J){x&&x.abort(),x=null,w=V,Se=(J&&J.startUninterruptedRevalidation)===!0,gr(S.location,S.matches),O=(J&&J.preventScrollReset)===!0,M=(J&&J.enableViewTransition)===!0;let me=p||d,ve=J&&J.overrideNavigation,Ie=J!=null&&J.initialHydration&&S.matches&&S.matches.length>0&&!G?S.matches:is(me,q,g),xe=(J&&J.flushSync)===!0;if(Ie&&S.initialized&&!H&&FD(S.location,q)&&!(J&&J.submission&&Gn(J.submission.formMethod))){bn(q,{matches:Ie},{flushSync:xe});return}let Ee=Hi(Ie,me,q.pathname);if(Ee.active&&Ee.matches&&(Ie=Ee.matches),!Ie){let{error:qt,notFoundMatches:zt,route:tt}=Wt(q.pathname);bn(q,{matches:zt,loaderData:{},errors:{[tt.id]:qt}},{flushSync:xe});return}x=new AbortController;let Ae=pl(n.history,q,x.signal,J&&J.submission),Ne=n.getContext?await n.getContext():new Sb,qe;if(J&&J.pendingError)qe=[as(Ie).route.id,{type:"error",error:J.pendingError}];else if(J&&J.submission&&Gn(J.submission.formMethod)){let qt=await Le(Ae,q,J.submission,Ie,Ne,Ee.active,J&&J.initialHydration===!0,{replace:J.replace,flushSync:xe});if(qt.shortCircuited)return;if(qt.pendingActionResult){let[zt,tt]=qt.pendingActionResult;if(Rr(tt)&&yc(tt.error)&&tt.error.status===404){x=null,bn(q,{matches:qt.matches,loaderData:{},errors:{[zt]:tt.error}});return}}Ie=qt.matches||Ie,qe=qt.pendingActionResult,ve=Tg(q,J.submission),xe=!1,Ee.active=!1,Ae=pl(n.history,Ae.url,Ae.signal)}let{shortCircuited:ke,matches:Qe,loaderData:it,errors:Nt}=await Re(Ae,q,Ie,Ne,Ee.active,ve,J&&J.submission,J&&J.fetcherSubmission,J&&J.replace,J&&J.initialHydration===!0,xe,qe,J&&J.callSiteDefaultShouldRevalidate);ke||(x=null,bn(q,{matches:Qe||Ie,...jb(qe),loaderData:it,errors:Nt}))}async function Le(V,q,J,me,ve,Ie,xe,Ee={}){Qn();let Ae=XD(q,J);if(Et({navigation:Ae},{flushSync:Ee.flushSync===!0}),Ie){let ke=await Jn(me,q.pathname,V.signal);if(ke.type==="aborted")return{shortCircuited:!0};if(ke.type==="error"){if(ke.partialMatches.length===0){let{matches:it,route:Nt}=yf(d);return{matches:it,pendingActionResult:[Nt.id,{type:"error",error:ke.error}]}}let Qe=as(ke.partialMatches).route.id;return{matches:ke.partialMatches,pendingActionResult:[Qe,{type:"error",error:ke.error}]}}else if(ke.matches)me=ke.matches;else{let{notFoundMatches:Qe,error:it,route:Nt}=Wt(q.pathname);return{matches:Qe,pendingActionResult:[Nt.id,{type:"error",error:it}]}}}let Ne,qe=xf(me,q);if(!qe.route.action&&!qe.route.lazy)Ne={type:"error",error:Kr(405,{method:V.method,pathname:q.pathname,routeId:qe.route.id})};else{let ke=Al(l,c,V,me,qe,xe?[]:a,ve),Qe=await Dt(V,ke,ve,null);if(Ne=Qe[qe.route.id],!Ne){for(let it of me)if(Qe[it.route.id]){Ne=Qe[it.route.id];break}}if(V.signal.aborted)return{shortCircuited:!0}}if(ao(Ne)){let ke;return Ee&&Ee.replace!=null?ke=Ee.replace:ke=Vb(Ne.response.headers.get("Location"),new URL(V.url),g,n.history)===S.location.pathname+S.location.search,await Ye(V,Ne,!0,{submission:J,replace:ke}),{shortCircuited:!0}}if(Rr(Ne)){let ke=as(me,qe.route.id);return(Ee&&Ee.replace)!==!0&&(w="PUSH"),{matches:me,pendingActionResult:[ke.route.id,Ne,qe.route.id]}}return{matches:me,pendingActionResult:[qe.route.id,Ne]}}async function Re(V,q,J,me,ve,Ie,xe,Ee,Ae,Ne,qe,ke,Qe){let it=Ie||Tg(q,xe),Nt=xe||Ee||Bb(it),qt=!Se&&!Ne;if(ve){if(qt){let en=we(ke);Et({navigation:it,...en!==void 0?{actionData:en}:{}},{flushSync:qe})}let st=await Jn(J,q.pathname,V.signal);if(st.type==="aborted")return{shortCircuited:!0};if(st.type==="error"){if(st.partialMatches.length===0){let{matches:mn,route:xt}=yf(d);return{matches:mn,loaderData:{},errors:{[xt.id]:st.error}}}let en=as(st.partialMatches).route.id;return{matches:st.partialMatches,loaderData:{},errors:{[en]:st.error}}}else if(st.matches)J=st.matches;else{let{error:en,notFoundMatches:mn,route:xt}=Wt(q.pathname);return{matches:mn,loaderData:{},errors:{[xt.id]:en}}}}let zt=p||d,{dsMatches:tt,revalidatingFetchers:Bt}=Nb(V,me,l,c,n.history,S,J,Nt,q,Ne?[]:a,Ne===!0,H,fe,ye,oe,$,zt,g,n.patchRoutesOnNavigation!=null,ke,Qe);if(Me=++Pe,!n.dataStrategy&&!tt.some(st=>st.shouldLoad)&&!tt.some(st=>st.route.middleware&&st.route.middleware.length>0)&&Bt.length===0){let st=Xt();return bn(q,{matches:J,loaderData:{},errors:ke&&Rr(ke[1])?{[ke[0]]:ke[1].error}:null,...jb(ke),...st?{fetchers:new Map(S.fetchers)}:{}},{flushSync:qe}),{shortCircuited:!0}}if(qt){let st={};if(!ve){st.navigation=it;let en=we(ke);en!==void 0&&(st.actionData=en)}Bt.length>0&&(st.fetchers=Fe(Bt)),Et(st,{flushSync:qe})}Bt.forEach(st=>{Ut(st.key),st.controller&&ge.set(st.key,st.controller)});let Dn=()=>Bt.forEach(st=>Ut(st.key));x&&x.signal.addEventListener("abort",Dn);let{loaderResults:Ft,fetcherResults:rr}=await nr(tt,Bt,V,me);if(V.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",Dn),Bt.forEach(st=>ge.delete(st.key));let Bn=_f(Ft);if(Bn)return await Ye(V,Bn.result,!0,{replace:Ae}),{shortCircuited:!0};if(Bn=_f(rr),Bn)return $.add(Bn.key),await Ye(V,Bn.result,!0,{replace:Ae}),{shortCircuited:!0};let{loaderData:ir,errors:Fn}=Lb(S,J,Ft,ke,Bt,rr);Ne&&S.errors&&(Fn={...S.errors,...Fn});let yr=Xt(),_i=Ds(Me),vi=yr||_i||Bt.length>0;return{matches:J,loaderData:ir,errors:Fn,...vi?{fetchers:new Map(S.fetchers)}:{}}}function we(V){if(V&&!Rr(V[1]))return{[V[0]]:V[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function Fe(V){return V.forEach(q=>{let J=S.fetchers.get(q.key),me=Yu(void 0,J?J.data:void 0);S.fetchers.set(q.key,me)}),new Map(S.fetchers)}async function Lt(V,q,J,me){Ut(V);let ve=(me&&me.flushSync)===!0,Ie=p||d,xe=Fg(S.location,S.matches,g,J,q,me==null?void 0:me.relative),Ee=is(Ie,xe,g),Ae=Hi(Ee,Ie,xe);if(Ae.active&&Ae.matches&&(Ee=Ae.matches),!Ee){Sn(V,q,Kr(404,{pathname:xe}),{flushSync:ve});return}let{path:Ne,submission:qe,error:ke}=Db(!0,xe,me);if(ke){Sn(V,q,ke,{flushSync:ve});return}let Qe=n.getContext?await n.getContext():new Sb,it=(me&&me.preventScrollReset)===!0;if(qe&&Gn(qe.formMethod)){await Rt(V,q,Ne,Ee,Qe,Ae.active,ve,it,qe,me&&me.unstable_defaultShouldRevalidate);return}oe.set(V,{routeId:q,path:Ne}),await je(V,q,Ne,Ee,Qe,Ae.active,ve,it,qe)}async function Rt(V,q,J,me,ve,Ie,xe,Ee,Ae,Ne){Qn(),oe.delete(V);let qe=S.fetchers.get(V);an(V,WD(Ae,qe),{flushSync:xe});let ke=new AbortController,Qe=pl(n.history,J,ke.signal,Ae);if(Ie){let nt=await Jn(me,new URL(Qe.url).pathname,Qe.signal,V);if(nt.type==="aborted")return;if(nt.type==="error"){Sn(V,q,nt.error,{flushSync:xe});return}else if(nt.matches)me=nt.matches;else{Sn(V,q,Kr(404,{pathname:J}),{flushSync:xe});return}}let it=xf(me,J);if(!it.route.action&&!it.route.lazy){let nt=Kr(405,{method:Ae.formMethod,pathname:J,routeId:q});Sn(V,q,nt,{flushSync:xe});return}ge.set(V,ke);let Nt=Pe,qt=Al(l,c,Qe,me,it,a,ve),zt=await Dt(Qe,qt,ve,V),tt=zt[it.route.id];if(!tt){for(let nt of qt)if(zt[nt.route.id]){tt=zt[nt.route.id];break}}if(Qe.signal.aborted){ge.get(V)===ke&&ge.delete(V);return}if(ye.has(V)){if(ao(tt)||Rr(tt)){an(V,ua(void 0));return}}else{if(ao(tt))if(ge.delete(V),Me>Nt){an(V,ua(void 0));return}else return $.add(V),an(V,Yu(Ae)),Ye(Qe,tt,!1,{fetcherSubmission:Ae,preventScrollReset:Ee});if(Rr(tt)){Sn(V,q,tt.error);return}}let Bt=S.navigation.location||S.location,Dn=pl(n.history,Bt,ke.signal),Ft=p||d,rr=S.navigation.state!=="idle"?is(Ft,S.navigation.location,g):S.matches;at(rr,"Didn't find any matches after fetcher action");let Bn=++Pe;U.set(V,Bn);let ir=Yu(Ae,tt.data);S.fetchers.set(V,ir);let{dsMatches:Fn,revalidatingFetchers:yr}=Nb(Dn,ve,l,c,n.history,S,rr,Ae,Bt,a,!1,H,fe,ye,oe,$,Ft,g,n.patchRoutesOnNavigation!=null,[it.route.id,tt],Ne);yr.filter(nt=>nt.key!==V).forEach(nt=>{let _r=nt.key,wa=S.fetchers.get(_r),Tt=Yu(void 0,wa?wa.data:void 0);S.fetchers.set(_r,Tt),Ut(_r),nt.controller&&ge.set(_r,nt.controller)}),Et({fetchers:new Map(S.fetchers)});let _i=()=>yr.forEach(nt=>Ut(nt.key));ke.signal.addEventListener("abort",_i);let{loaderResults:vi,fetcherResults:st}=await nr(Fn,yr,Dn,ve);if(ke.signal.aborted)return;if(ke.signal.removeEventListener("abort",_i),U.delete(V),ge.delete(V),yr.forEach(nt=>ge.delete(nt.key)),S.fetchers.has(V)){let nt=ua(tt.data);S.fetchers.set(V,nt)}let en=_f(vi);if(en)return Ye(Dn,en.result,!1,{preventScrollReset:Ee});if(en=_f(st),en)return $.add(en.key),Ye(Dn,en.result,!1,{preventScrollReset:Ee});let{loaderData:mn,errors:xt}=Lb(S,rr,vi,void 0,yr,st);Ds(Bn),S.navigation.state==="loading"&&Bn>Me?(at(w,"Expected pending action"),x&&x.abort(),bn(S.navigation.location,{matches:rr,loaderData:mn,errors:xt,fetchers:new Map(S.fetchers)})):(Et({errors:xt,loaderData:Ub(S.loaderData,mn,rr,xt),fetchers:new Map(S.fetchers)}),H=!1)}async function je(V,q,J,me,ve,Ie,xe,Ee,Ae){let Ne=S.fetchers.get(V);an(V,Yu(Ae,Ne?Ne.data:void 0),{flushSync:xe});let qe=new AbortController,ke=pl(n.history,J,qe.signal);if(Ie){let tt=await Jn(me,new URL(ke.url).pathname,ke.signal,V);if(tt.type==="aborted")return;if(tt.type==="error"){Sn(V,q,tt.error,{flushSync:xe});return}else if(tt.matches)me=tt.matches;else{Sn(V,q,Kr(404,{pathname:J}),{flushSync:xe});return}}let Qe=xf(me,J);ge.set(V,qe);let it=Pe,Nt=Al(l,c,ke,me,Qe,a,ve),zt=(await Dt(ke,Nt,ve,V))[Qe.route.id];if(ge.get(V)===qe&&ge.delete(V),!ke.signal.aborted){if(ye.has(V)){an(V,ua(void 0));return}if(ao(zt))if(Me>it){an(V,ua(void 0));return}else{$.add(V),await Ye(ke,zt,!1,{preventScrollReset:Ee});return}if(Rr(zt)){Sn(V,q,zt.error);return}an(V,ua(zt.data))}}async function Ye(V,q,J,{submission:me,fetcherSubmission:ve,preventScrollReset:Ie,replace:xe}={}){J||(I==null||I.resolve(),I=null),q.response.headers.has("X-Remix-Revalidate")&&(H=!0);let Ee=q.response.headers.get("Location");at(Ee,"Expected a Location header on the redirect Response"),Ee=Vb(Ee,new URL(V.url),g,n.history);let Ae=pc(S.location,Ee,{_isRedirect:!0});if(t){let Nt=!1;if(q.response.headers.has("X-Remix-Reload-Document"))Nt=!0;else if(Iy(Ee)){const qt=XS(Ee,!0);Nt=qt.origin!==e.location.origin||Xr(qt.pathname,g)==null}if(Nt){xe?e.location.replace(Ee):e.location.assign(Ee);return}}x=null;let Ne=xe===!0||q.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:qe,formAction:ke,formEncType:Qe}=S.navigation;!me&&!ve&&qe&&ke&&Qe&&(me=Bb(S.navigation));let it=me||ve;if(RD.has(q.response.status)&&it&&Gn(it.formMethod))await _e(Ne,Ae,{submission:{...it,formAction:Ee},preventScrollReset:Ie||O,enableViewTransition:J?M:void 0});else{let Nt=Tg(Ae,me);await _e(Ne,Ae,{overrideNavigation:Nt,fetcherSubmission:ve,preventScrollReset:Ie||O,enableViewTransition:J?M:void 0})}}async function Dt(V,q,J,me){var xe;let ve,Ie={};try{ve=await kD(y,V,q,me,J,!1)}catch(Ee){return q.filter(Ae=>Ae.shouldLoad).forEach(Ae=>{Ie[Ae.route.id]={type:"error",error:Ee}}),Ie}if(V.signal.aborted)return Ie;if(!Gn(V.method))for(let Ee of q){if(((xe=ve[Ee.route.id])==null?void 0:xe.type)==="error")break;!ve.hasOwnProperty(Ee.route.id)&&!S.loaderData.hasOwnProperty(Ee.route.id)&&(!S.errors||!S.errors.hasOwnProperty(Ee.route.id))&&Ee.shouldCallHandler()&&(ve[Ee.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Ee.route.id}`)})}for(let[Ee,Ae]of Object.entries(ve))if($D(Ae)){let Ne=Ae.result;Ie[Ee]={type:"redirect",response:zD(Ne,V,Ee,q,g)}}else Ie[Ee]=await jD(Ae);return Ie}async function nr(V,q,J,me){let ve=Dt(J,V,me,null),Ie=Promise.all(q.map(async Ae=>{if(Ae.matches&&Ae.match&&Ae.request&&Ae.controller){let qe=(await Dt(Ae.request,Ae.matches,me,Ae.key))[Ae.match.route.id];return{[Ae.key]:qe}}else return Promise.resolve({[Ae.key]:{type:"error",error:Kr(404,{pathname:Ae.path})}})})),xe=await ve,Ee=(await Ie).reduce((Ae,Ne)=>Object.assign(Ae,Ne),{});return{loaderResults:xe,fetcherResults:Ee}}function Qn(){H=!0,oe.forEach((V,q)=>{ge.has(q)&&fe.add(q),Ut(q)})}function an(V,q,J={}){S.fetchers.set(V,q),Et({fetchers:new Map(S.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function Sn(V,q,J,me={}){let ve=as(S.matches,q);Sa(V),Et({errors:{[ve.route.id]:J},fetchers:new Map(S.fetchers)},{flushSync:(me&&me.flushSync)===!0})}function Is(V){return ce.set(V,(ce.get(V)||0)+1),ye.has(V)&&ye.delete(V),S.fetchers.get(V)||CD}function Ro(V,q){Ut(V,q==null?void 0:q.reason),an(V,ua(null))}function Sa(V){let q=S.fetchers.get(V);ge.has(V)&&!(q&&q.state==="loading"&&U.has(V))&&Ut(V),oe.delete(V),U.delete(V),$.delete(V),ye.delete(V),fe.delete(V),S.fetchers.delete(V)}function mr(V){let q=(ce.get(V)||0)-1;q<=0?(ce.delete(V),ye.add(V)):ce.set(V,q),Et({fetchers:new Map(S.fetchers)})}function Ut(V,q){let J=ge.get(V);J&&(J.abort(q),ge.delete(V))}function Xn(V){for(let q of V){let J=Is(q),me=ua(J.data);S.fetchers.set(q,me)}}function Xt(){let V=[],q=!1;for(let J of $){let me=S.fetchers.get(J);at(me,`Expected fetcher: ${J}`),me.state==="loading"&&($.delete(J),V.push(J),q=!0)}return Xn(V),q}function Ds(V){let q=[];for(let[J,me]of U)if(me<V){let ve=S.fetchers.get(J);at(ve,`Expected fetcher: ${J}`),ve.state==="loading"&&(Ut(J),U.delete(J),q.push(J))}return Xn(q),q.length>0}function Aa(V,q){let J=S.blockers.get(V)||Ku;return Te.get(V)!==q&&Te.set(V,q),J}function Ns(V){S.blockers.delete(V),Te.delete(V)}function Wn(V,q){let J=S.blockers.get(V)||Ku;at(J.state==="unblocked"&&q.state==="blocked"||J.state==="blocked"&&q.state==="blocked"||J.state==="blocked"&&q.state==="proceeding"||J.state==="blocked"&&q.state==="unblocked"||J.state==="proceeding"&&q.state==="unblocked",`Invalid blocker state transition: ${J.state} -> ${q.state}`);let me=new Map(S.blockers);me.set(V,q),Et({blockers:me})}function gi({currentLocation:V,nextLocation:q,historyAction:J}){if(Te.size===0)return;Te.size>1&&nn(!1,"A router only supports one blocker at a time");let me=Array.from(Te.entries()),[ve,Ie]=me[me.length-1],xe=S.blockers.get(ve);if(!(xe&&xe.state==="proceeding")&&Ie({currentLocation:V,nextLocation:q,historyAction:J}))return ve}function Wt(V){let q=Kr(404,{pathname:V}),J=p||d,{matches:me,route:ve}=yf(J);return{notFoundMatches:me,route:ve,error:q}}function Vr(V,q,J){if(k=V,j=q,z=J||null,!Y&&S.navigation===Eg){Y=!0;let me=Co(S.location,S.matches);me!=null&&Et({restoreScrollPosition:me})}return()=>{k=null,j=null,z=null}}function pr(V,q){return z&&z(V,q.map(me=>ZI(me,S.loaderData)))||V.key}function gr(V,q){if(k&&j){let J=pr(V,q);k[J]=j()}}function Co(V,q){if(k){let J=pr(V,q),me=k[J];if(typeof me=="number")return me}return null}function Hi(V,q,J){if(n.patchRoutesOnNavigation)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:Ju(q,J,g,!0)}}else return{active:!0,matches:Ju(q,J,g,!0)||[]};return{active:!1,matches:null}}async function Jn(V,q,J,me){if(!n.patchRoutesOnNavigation)return{type:"success",matches:V};let ve=V;for(;;){let Ie=p==null,xe=p||d,Ee=c;try{await n.patchRoutesOnNavigation({signal:J,path:q,matches:ve,fetcherKey:me,patch:(qe,ke)=>{J.aborted||xb(qe,ke,xe,Ee,l,!1)}})}catch(qe){return{type:"error",error:qe,partialMatches:ve}}finally{Ie&&!J.aborted&&(d=[...d])}if(J.aborted)return{type:"aborted"};let Ae=is(xe,q,g),Ne=null;if(Ae){if(Object.keys(Ae[0].params).length===0)return{type:"success",matches:Ae};if(Ne=Ju(xe,q,g,!0),!(Ne&&ve.length<Ne.length&&yi(ve,Ne.slice(0,ve.length))))return{type:"success",matches:Ae}}if(Ne||(Ne=Ju(xe,q,g,!0)),!Ne||yi(ve,Ne))return{type:"success",matches:null};ve=Ne}}function yi(V,q){return V.length===q.length&&V.every((J,me)=>J.route.id===q[me].route.id)}function Zl(V){c={},p=gc(V,l,void 0,c)}function qi(V,q,J=!1){let me=p==null;xb(V,q,p||d,c,l,J),me&&(d=[...d],Et({}))}return te={get basename(){return g},get future(){return E},get state(){return S},get routes(){return d},get window(){return e},initialize:ot,subscribe:In,enableScrollRestoration:Vr,navigate:Qt,fetch:Lt,revalidate:ne,createHref:V=>n.history.createHref(V),encodeLocation:V=>n.history.encodeLocation(V),getFetcher:Is,resetFetcher:Ro,deleteFetcher:mr,dispose:Yt,getBlocker:Aa,deleteBlocker:Ns,patchRoutes:qi,_internalFetchControllers:ge,_internalSetRoutes:Zl,_internalSetStateDoNotUseOrYouWillBreakYourApp(V){Et(V)}},n.unstable_instrumentations&&(te=_D(te,n.unstable_instrumentations.map(V=>V.router).filter(Boolean))),te}function ND(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Fg(n,e,t,a,s,l){let c,d;if(s){c=[];for(let g of e)if(c.push(g),g.route.id===s){d=g;break}}else c=e,d=e[e.length-1];let p=Md(a||".",Od(c),Xr(n.pathname,t)||n.pathname,l==="path");if(a==null&&(p.search=n.search,p.hash=n.hash),(a==null||a===""||a===".")&&d){let g=xy(p.search);if(d.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let y=new URLSearchParams(p.search),E=y.getAll("index");y.delete("index"),E.filter(R=>R).forEach(R=>y.append("index",R));let b=y.toString();p.search=b?`?${b}`:""}}return t!=="/"&&(p.pathname=fD({basename:t,pathname:p.pathname})),ji(p)}function Db(n,e,t){if(!t||!ND(t))return{path:e};if(t.formMethod&&!QD(t.formMethod))return{path:e,error:Kr(405,{method:t.formMethod})};let a=()=>({path:e,error:Kr(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=dA(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Gn(l))return a();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((b,[R,k])=>`${b}${R}=${k}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!Gn(l))return a();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return a()}}}at(typeof FormData=="function","FormData is not available in this environment");let d,p;if(t.formData)d=Gg(t.formData),p=t.formData;else if(t.body instanceof FormData)d=Gg(t.body),p=t.body;else if(t.body instanceof URLSearchParams)d=t.body,p=kb(d);else if(t.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(t.body),p=kb(d)}catch{return a()}let g={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Gn(g.formMethod))return{path:e,submission:g};let y=Ta(e);return n&&y.search&&xy(y.search)&&d.append("index",""),y.search=`?${d}`,{path:ji(y),submission:g}}function Nb(n,e,t,a,s,l,c,d,p,g,y,E,b,R,k,z,j,Y,B,G,Z){var Se;let ae=G?Rr(G[1])?G[1].error:G[1].data:void 0,te=s.createURL(l.location),S=s.createURL(p),w;if(y&&l.errors){let H=Object.keys(l.errors)[0];w=c.findIndex(fe=>fe.route.id===H)}else if(G&&Rr(G[1])){let H=G[0];w=c.findIndex(fe=>fe.route.id===H)-1}let I=G?G[1].statusCode:void 0,O=I&&I>=400,x={currentUrl:te,currentParams:((Se=l.matches[0])==null?void 0:Se.params)||{},nextUrl:S,nextParams:c[0].params,...d,actionResult:ae,actionStatus:I},M=xc(c),D=c.map((H,fe)=>{let{route:ge}=H,Pe=null;if(w!=null&&fe>w?Pe=!1:ge.lazy?Pe=!0:Dy(ge)?y?Pe=Hg(ge,l.loaderData,l.errors):xD(l.loaderData,l.matches[fe],H)&&(Pe=!0):Pe=!1,Pe!==null)return qg(t,a,n,M,H,g,e,Pe);let Me=!1;typeof Z=="boolean"?Me=Z:O?Me=!1:(E||te.pathname+te.search===S.pathname+S.search||te.search!==S.search||OD(l.matches[fe],H))&&(Me=!0);let U={...x,defaultShouldRevalidate:Me},$=ac(H,U);return qg(t,a,n,M,H,g,e,$,U,Z)}),pe=[];return k.forEach((H,fe)=>{if(y||!c.some(ye=>ye.route.id===H.routeId)||R.has(fe))return;let ge=l.fetchers.get(fe),Pe=ge&&ge.state!=="idle"&&ge.data===void 0,Me=is(j,H.path,Y);if(!Me){if(B&&Pe)return;pe.push({key:fe,routeId:H.routeId,path:H.path,matches:null,match:null,request:null,controller:null});return}if(z.has(fe))return;let U=xf(Me,H.path),$=new AbortController,oe=pl(s,H.path,$.signal),ce=null;if(b.has(fe))b.delete(fe),ce=Al(t,a,oe,Me,U,g,e);else if(Pe)E&&(ce=Al(t,a,oe,Me,U,g,e));else{let ye;typeof Z=="boolean"?ye=Z:O?ye=!1:ye=E;let Te={...x,defaultShouldRevalidate:ye};ac(U,Te)&&(ce=Al(t,a,oe,Me,U,g,e,Te))}ce&&pe.push({key:fe,routeId:H.routeId,path:H.path,matches:ce,match:U,request:oe,controller:$})}),{dsMatches:D,revalidatingFetchers:pe}}function Dy(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function Hg(n,e,t){if(n.lazy)return!0;if(!Dy(n))return!1;let a=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!a&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!a&&!s}function xD(n,e,t){let a=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return a||s}function OD(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function ac(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function xb(n,e,t,a,s,l){let c;if(n){let g=a[n];at(g,`No route found to patch children into: routeId = ${n}`),g.children||(g.children=[]),c=g.children}else c=t;let d=[],p=[];if(e.forEach(g=>{let y=c.find(E=>lA(g,E));y?p.push({existingRoute:y,newRoute:g}):d.push(g)}),d.length>0){let g=gc(d,s,[n||"_","patch",String((c==null?void 0:c.length)||"0")],a);c.push(...g)}if(l&&p.length>0)for(let g=0;g<p.length;g++){let{existingRoute:y,newRoute:E}=p[g],b=y,[R]=gc([E],s,[],{},!0);Object.assign(b,{element:R.element?R.element:b.element,errorElement:R.errorElement?R.errorElement:b.errorElement,hydrateFallbackElement:R.hydrateFallbackElement?R.hydrateFallbackElement:b.hydrateFallbackElement})}}function lA(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,a)=>{var s;return(s=e.children)==null?void 0:s.some(l=>lA(t,l))}):!1}var Ob=new WeakMap,uA=({key:n,route:e,manifest:t,mapRouteProperties:a})=>{let s=t[e.id];if(at(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=Ob.get(s);c||(c={},Ob.set(s,c));let d=c[n];if(d)return d;let p=(async()=>{let g=QI(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(g)nn(!g,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(E)nn(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let b=await l();b!=null&&(Object.assign(s,{[n]:b}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(b=>b===void 0)&&(s.lazy=void 0))})();return c[n]=p,p},Mb=new WeakMap;function MD(n,e,t,a,s){let l=t[n.id];if(at(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let y=Mb.get(l);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let E=(async()=>{at(typeof n.lazy=="function","No lazy route function found");let b=await n.lazy(),R={};for(let k in b){let z=b[k];if(z===void 0)continue;let j=WI(k),B=l[k]!==void 0&&k!=="hasErrorBoundary";j?nn(!j,"Route property "+k+" is not a supported property to be returned from a lazy route function. This property will be ignored."):B?nn(!B,`Route "${l.id}" has a static property "${k}" defined but its lazy function is also returning a value for this property. The lazy route property "${k}" will be ignored.`):R[k]=z}Object.assign(l,R),Object.assign(l,{...a(l),lazy:void 0})})();return Mb.set(l,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(n.lazy),d=[],p;for(let y of c){if(s&&s.includes(y))continue;let E=uA({key:y,route:n,manifest:t,mapRouteProperties:a});E&&(d.push(E),y===e&&(p=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),p==null||p.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:p}}async function Pb(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function PD(n){return n.matches.some(e=>e.route.middleware)?cA(n,()=>Pb(n)):Pb(n)}function cA(n,e){return VD(n,e,a=>{if(YD(a))throw a;return a},qD,t);function t(a,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:a}}));{let{matches:c}=n,d=Math.min(Math.max(c.findIndex(g=>g.route.id===s),0),Math.max(c.findIndex(g=>g.shouldCallHandler()),0)),p=as(c,c[d].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:a}})}}}async function VD(n,e,t,a,s){let{matches:l,request:c,params:d,context:p,unstable_pattern:g}=n,y=l.flatMap(b=>b.route.middleware?b.route.middleware.map(R=>[b.route.id,R]):[]);return await hA({request:c,params:d,context:p,unstable_pattern:g},y,e,t,a,s)}async function hA(n,e,t,a,s,l,c=0){let{request:d}=n;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let p=e[c];if(!p)return await t();let[g,y]=p,E,b=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await hA(n,e,t,a,s,l,c+1)},E.value}catch(R){return E={value:await l(R,g,E)},E.value}};try{let R=await y(n,b),k=R!=null?a(R):void 0;return s(k)?k:E?k??E.value:(E={value:await b()},E.value)}catch(R){return await l(R,g,E)}}function fA(n,e,t,a,s){let l=uA({key:"middleware",route:a.route,manifest:e,mapRouteProperties:n}),c=MD(a.route,Gn(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function qg(n,e,t,a,s,l,c,d,p=null,g){let y=!1,E=fA(n,e,t,s,l);return{...s,_lazyPromises:E,shouldLoad:d,shouldRevalidateArgs:p,shouldCallHandler(b){return y=!0,p?typeof g=="boolean"?ac(s,{...p,defaultShouldRevalidate:g}):typeof b=="boolean"?ac(s,{...p,defaultShouldRevalidate:b}):ac(s,p):d},resolve(b){let{lazy:R,loader:k,middleware:z}=s.route,j=y||d||b&&!Gn(t.method)&&(R||k),Y=z&&z.length>0&&!k&&!R;return j&&(Gn(t.method)||!Y)?LD({request:t,unstable_pattern:a,match:s,lazyHandlerPromise:E==null?void 0:E.handler,lazyRoutePromise:E==null?void 0:E.route,handlerOverride:b,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Al(n,e,t,a,s,l,c,d=null){return a.map(p=>p.route.id!==s.route.id?{...p,shouldLoad:!1,shouldRevalidateArgs:d,shouldCallHandler:()=>!1,_lazyPromises:fA(n,e,t,p,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:qg(n,e,t,xc(a),p,l,c,!0,d))}async function kD(n,e,t,a,s,l){t.some(g=>{var y;return(y=g._lazyPromises)==null?void 0:y.middleware})&&await Promise.all(t.map(g=>{var y;return(y=g._lazyPromises)==null?void 0:y.middleware}));let c={request:e,unstable_pattern:xc(t),params:t[0].params,context:s,matches:t},p=await n({...c,fetcherKey:a,runClientMiddleware:g=>{let y=c;return cA(y,()=>g({...y,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(g=>{var y,E;return[(y=g._lazyPromises)==null?void 0:y.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return p}async function LD({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let d,p,g=Gn(n.method),y=g?"action":"loader",E=b=>{let R,k=new Promise((Y,B)=>R=B);p=()=>R(),n.signal.addEventListener("abort",p);let z=Y=>typeof b!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${y}" [routeId: ${t.route.id}]`)):b({request:n,unstable_pattern:e,params:t.params,context:c},...Y!==void 0?[Y]:[]),j=(async()=>{try{return{type:"data",result:await(l?l(B=>z(B)):z())}}catch(Y){return{type:"error",result:Y}}})();return Promise.race([j,k])};try{let b=g?t.route.action:t.route.loader;if(a||s)if(b){let R,[k]=await Promise.all([E(b).catch(z=>{R=z}),a,s]);if(R!==void 0)throw R;d=k}else{await a;let R=g?t.route.action:t.route.loader;if(R)[d]=await Promise.all([E(R),s]);else if(y==="action"){let k=new URL(n.url),z=k.pathname+k.search;throw Kr(405,{method:n.method,pathname:z,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(b)d=await E(b);else{let R=new URL(n.url),k=R.pathname+R.search;throw Kr(404,{pathname:k})}}catch(b){return{type:"error",result:b}}finally{p&&n.signal.removeEventListener("abort",p)}return d}async function UD(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function jD(n){var a,s,l,c,d;let{result:e,type:t}=n;if(Ny(e)){let p;try{p=await UD(e)}catch(g){return{type:"error",error:g}}return t==="error"?{type:"error",error:new Nc(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?zb(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:HD(e),statusCode:yc(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:yc(e)?e.status:void 0}:zb(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function zD(n,e,t,a,s){let l=n.headers.get("Location");if(at(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!Iy(l)){let c=a.slice(0,a.findIndex(d=>d.route.id===t)+1);l=Fg(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function Vb(n,e,t,a){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(Iy(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let d=Xr(c.pathname,t)!=null;if(c.origin===e.origin&&d)return c.pathname+c.search+c.hash}try{let l=a.createURL(n);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function pl(n,e,t,a){let s=n.createURL(dA(e)).toString(),l={signal:t};if(a&&Gn(a.formMethod)){let{formMethod:c,formEncType:d}=a;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(a.json)):d==="text/plain"?l.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?l.body=Gg(a.formData):l.body=a.formData}return new Request(s,l)}function Gg(n){let e=new URLSearchParams;for(let[t,a]of n.entries())e.append(t,typeof a=="string"?a:a.name);return e}function kb(n){let e=new FormData;for(let[t,a]of n.entries())e.append(t,a);return e}function BD(n,e,t,a=!1,s=!1){let l={},c=null,d,p=!1,g={},y=t&&Rr(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let b=E.route.id,R=e[b];if(at(!ao(R),"Cannot handle redirect results in processLoaderData"),Rr(R)){let k=R.error;if(y!==void 0&&(k=y,y=void 0),c=c||{},s)c[b]=k;else{let z=as(n,b);c[z.route.id]==null&&(c[z.route.id]=k)}a||(l[b]=oA),p||(p=!0,d=yc(R.error)?R.error.status:500),R.headers&&(g[b]=R.headers)}else l[b]=R.data,R.statusCode&&R.statusCode!==200&&!p&&(d=R.statusCode),R.headers&&(g[b]=R.headers)}),y!==void 0&&t&&(c={[t[0]]:y},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:g}}function Lb(n,e,t,a,s,l){let{loaderData:c,errors:d}=BD(e,t,a);return s.filter(p=>!p.matches||p.matches.some(g=>g.shouldLoad)).forEach(p=>{let{key:g,match:y,controller:E}=p;if(E&&E.signal.aborted)return;let b=l[g];if(at(b,"Did not find corresponding fetcher result"),Rr(b)){let R=as(n.matches,y==null?void 0:y.route.id);d&&d[R.route.id]||(d={...d,[R.route.id]:b.error}),n.fetchers.delete(g)}else if(ao(b))at(!1,"Unhandled fetcher revalidation redirect");else{let R=ua(b.data);n.fetchers.set(g,R)}}),{loaderData:c,errors:d}}function Ub(n,e,t,a){let s=Object.entries(e).filter(([,l])=>l!==oA).reduce((l,[c,d])=>(l[c]=d,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),a&&a.hasOwnProperty(c))break}return s}function jb(n){return n?Rr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function as(n,e){return(e?n.slice(0,n.findIndex(a=>a.route.id===e)+1):[...n]).reverse().find(a=>a.route.hasErrorBoundary===!0)||n[0]}function yf(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Kr(n,{pathname:e,routeId:t,method:a,type:s,message:l}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(c="Bad Request",a&&e&&t?d=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(c="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",d=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",a&&e&&t?d=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new Nc(n||500,c,new Error(d),!0)}function _f(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[a,s]=e[t];if(ao(s))return{key:a,result:s}}}function dA(n){let e=typeof n=="string"?Ta(n):n;return ji({...e,hash:""})}function FD(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function HD(n){var e,t;return new Nc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function qD(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&GD(t))}function GD(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function $D(n){return Ny(n.result)&&aA.has(n.result.status)}function Rr(n){return n.type==="error"}function ao(n){return(n&&n.type)==="redirect"}function zb(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function Ny(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function KD(n){return aA.has(n)}function YD(n){return Ny(n)&&KD(n.status)&&n.headers.has("Location")}function QD(n){return wD.has(n.toUpperCase())}function Gn(n){return SD.has(n.toUpperCase())}function xy(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function xf(n,e){let t=typeof e=="string"?Ta(e).search:e.search;if(n[n.length-1].route.index&&xy(t||""))return n[n.length-1];let a=eA(n);return a[a.length-1]}function Bb(n){let{formMethod:e,formAction:t,formEncType:a,text:s,formData:l,json:c}=n;if(!(!e||!t||!a)){if(s!=null)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:a,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:c,text:void 0}}}function Tg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function XD(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Yu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function WD(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ua(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function JD(n,e){try{let t=n.sessionStorage.getItem(sA);if(t){let a=JSON.parse(t);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function ZD(n,e){if(e.size>0){let t={};for(let[a,s]of e)t[a]=[...s];try{n.sessionStorage.setItem(sA,JSON.stringify(t))}catch(a){nn(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function Fb(){let n,e,t=new Promise((a,s)=>{n=async l=>{a(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Eo=P.createContext(null);Eo.displayName="DataRouter";var Oc=P.createContext(null);Oc.displayName="DataRouterState";var mA=P.createContext(!1);function eN(){return P.useContext(mA)}var Oy=P.createContext({isTransitioning:!1});Oy.displayName="ViewTransition";var pA=P.createContext(new Map);pA.displayName="Fetchers";var tN=P.createContext(null);tN.displayName="Await";var Mr=P.createContext(null);Mr.displayName="Navigation";var Pd=P.createContext(null);Pd.displayName="Location";var Jr=P.createContext({outlet:null,matches:[],isDataRoute:!1});Jr.displayName="Route";var My=P.createContext(null);My.displayName="RouteError";var gA="REACT_ROUTER_ERROR",nN="REDIRECT",rN="ROUTE_ERROR_RESPONSE";function iN(n){if(n.startsWith(`${gA}:${nN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function aN(n){if(n.startsWith(`${gA}:${rN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Nc(e.status,e.statusText,e.data)}catch{}}function sN(n,{relative:e}={}){at(Hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=P.useContext(Mr),{hash:s,pathname:l,search:c}=Mc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Pi([t,l])),a.createHref({pathname:d,search:c,hash:s})}function Hl(){return P.useContext(Pd)!=null}function Zr(){return at(Hl(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Pd).location}var yA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _A(n){P.useContext(Mr).static||P.useLayoutEffect(n)}function To(){let{isDataRoute:n}=P.useContext(Jr);return n?TN():oN()}function oN(){at(Hl(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Eo),{basename:e,navigator:t}=P.useContext(Mr),{matches:a}=P.useContext(Jr),{pathname:s}=Zr(),l=JSON.stringify(Od(a)),c=P.useRef(!1);return _A(()=>{c.current=!0}),P.useCallback((p,g={})=>{if(nn(c.current,yA),!c.current)return;if(typeof p=="number"){t.go(p);return}let y=Md(p,JSON.parse(l),s,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Pi([e,y.pathname])),(g.replace?t.replace:t.push)(y,g.state,g)},[e,t,l,s,n])}var lN=P.createContext(null);function uN(n){let e=P.useContext(Jr).outlet;return P.useMemo(()=>e&&P.createElement(lN.Provider,{value:n},e),[e,n])}function Vd(){let{matches:n}=P.useContext(Jr),e=n[n.length-1];return e?e.params:{}}function Mc(n,{relative:e}={}){let{matches:t}=P.useContext(Jr),{pathname:a}=Zr(),s=JSON.stringify(Od(t));return P.useMemo(()=>Md(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function cN(n,e,t,a,s){at(Hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=P.useContext(Mr),{matches:c}=P.useContext(Jr),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",y=d?d.pathnameBase:"/",E=d&&d.route;{let B=E&&E.path||"";EA(g,!E||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let b=Zr(),R;R=b;let k=R.pathname||"/",z=k;if(y!=="/"){let B=y.replace(/^\//,"").split("/");z="/"+k.replace(/^\//,"").split("/").slice(B.length).join("/")}let j=is(n,{pathname:z});return nn(E||j!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),nn(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),pN(j&&j.map(B=>Object.assign({},B,{params:Object.assign({},p,B.params),pathname:Pi([y,l.encodeLocation?l.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?y:Pi([y,l.encodeLocation?l.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),c,t,a,s)}function hN(){let n=EN(),e=yc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,c)}var fN=P.createElement(hN,null),vA=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=aN(n.digest);t&&(n=t)}let e=n!==void 0?P.createElement(Jr.Provider,{value:this.props.routeContext},P.createElement(My.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?P.createElement(dN,{error:n},e):e}};vA.contextType=mA;var bg=new WeakMap;function dN({children:n,error:e}){let{basename:t}=P.useContext(Mr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=iN(e.digest);if(a){let s=bg.get(e);if(s)throw s;let l=nA(a.location,t);if(tA&&!bg.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw bg.set(e,c),c}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function mN({routeContext:n,match:e,children:t}){let a=P.useContext(Eo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Jr.Provider,{value:n},t)}function pN(n,e=[],t=null,a=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let y=l.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);at(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,p=-1;if(t)for(let y=0;y<l.length;y++){let E=l[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=y),E.route.id){let{loaderData:b,errors:R}=t,k=E.route.loader&&!b.hasOwnProperty(E.route.id)&&(!R||R[E.route.id]===void 0);if(E.route.lazy||k){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&a?(y,E)=>{var b,R;a(y,{location:t.location,params:((R=(b=t.matches)==null?void 0:b[0])==null?void 0:R.params)??{},unstable_pattern:xc(t.matches),errorInfo:E})}:void 0;return l.reduceRight((y,E,b)=>{let R,k=!1,z=null,j=null;t&&(R=c&&E.route.id?c[E.route.id]:void 0,z=E.route.errorElement||fN,d&&(p<0&&b===0?(EA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,j=null):p===b&&(k=!0,j=E.route.hydrateFallbackElement||null)));let Y=e.concat(l.slice(0,b+1)),B=()=>{let G;return R?G=z:k?G=j:E.route.Component?G=P.createElement(E.route.Component,null):E.route.element?G=E.route.element:G=y,P.createElement(mN,{match:E,routeContext:{outlet:y,matches:Y,isDataRoute:t!=null},children:G})};return t&&(E.route.ErrorBoundary||E.route.errorElement||b===0)?P.createElement(vA,{location:t.location,revalidation:t.revalidation,component:z,error:R,children:B(),routeContext:{outlet:null,matches:Y,isDataRoute:!0},onError:g}):B()},null)}function Py(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gN(n){let e=P.useContext(Eo);return at(e,Py(n)),e}function yN(n){let e=P.useContext(Oc);return at(e,Py(n)),e}function _N(n){let e=P.useContext(Jr);return at(e,Py(n)),e}function Vy(n){let e=_N(n),t=e.matches[e.matches.length-1];return at(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function vN(){return Vy("useRouteId")}function EN(){var a;let n=P.useContext(My),e=yN("useRouteError"),t=Vy("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function TN(){let{router:n}=gN("useNavigate"),e=Vy("useNavigate"),t=P.useRef(!1);return _A(()=>{t.current=!0}),P.useCallback(async(s,l={})=>{nn(t.current,yA),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var Hb={};function EA(n,e,t){!e&&!Hb[n]&&(Hb[n]=!0,nn(!1,t))}var qb={};function Gb(n,e){!n&&!qb[e]&&(qb[e]=!0,console.warn(e))}var bN="useOptimistic",$b=mI[bN],SN=()=>{};function AN(n){return $b?$b(n):[n,SN]}function wN(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&nn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:P.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&nn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:P.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&nn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:P.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var RN=["HydrateFallback","hydrateFallbackElement"],CN=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}};function IN({router:n,flushSync:e,onError:t,unstable_useTransitions:a}){a=eN()||a;let[l,c]=P.useState(n.state),[d,p]=AN(l),[g,y]=P.useState(),[E,b]=P.useState({isTransitioning:!1}),[R,k]=P.useState(),[z,j]=P.useState(),[Y,B]=P.useState(),G=P.useRef(new Map),Z=P.useCallback((w,{deletedFetchers:I,newErrors:O,flushSync:x,viewTransitionOpts:M})=>{O&&t&&Object.values(O).forEach(pe=>{var Se;return t(pe,{location:w.location,params:((Se=w.matches[0])==null?void 0:Se.params)??{},unstable_pattern:xc(w.matches)})}),w.fetchers.forEach((pe,Se)=>{pe.data!==void 0&&G.current.set(Se,pe.data)}),I.forEach(pe=>G.current.delete(pe)),Gb(x===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let D=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(Gb(M==null||D,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!M||!D){e&&x?e(()=>c(w)):a===!1?c(w):P.startTransition(()=>{a===!0&&p(pe=>Kb(pe,w)),c(w)});return}if(e&&x){e(()=>{z&&(R==null||R.resolve(),z.skipTransition()),b({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let pe=n.window.document.startViewTransition(()=>{e(()=>c(w))});pe.finished.finally(()=>{e(()=>{k(void 0),j(void 0),y(void 0),b({isTransitioning:!1})})}),e(()=>j(pe));return}z?(R==null||R.resolve(),z.skipTransition(),B({state:w,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(y(w),b({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[n.window,e,z,R,a,p,t]);P.useLayoutEffect(()=>n.subscribe(Z),[n,Z]),P.useEffect(()=>{E.isTransitioning&&!E.flushSync&&k(new CN)},[E]),P.useEffect(()=>{if(R&&g&&n.window){let w=g,I=R.promise,O=n.window.document.startViewTransition(async()=>{a===!1?c(w):P.startTransition(()=>{a===!0&&p(x=>Kb(x,w)),c(w)}),await I});O.finished.finally(()=>{k(void 0),j(void 0),y(void 0),b({isTransitioning:!1})}),j(O)}},[g,R,n.window,a,p]),P.useEffect(()=>{R&&g&&d.location.key===g.location.key&&R.resolve()},[R,z,d.location,g]),P.useEffect(()=>{!E.isTransitioning&&Y&&(y(Y.state),b({isTransitioning:!0,flushSync:!1,currentLocation:Y.currentLocation,nextLocation:Y.nextLocation}),B(void 0))},[E.isTransitioning,Y]);let ae=P.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:w=>n.navigate(w),push:(w,I,O)=>n.navigate(w,{state:I,preventScrollReset:O==null?void 0:O.preventScrollReset}),replace:(w,I,O)=>n.navigate(w,{replace:!0,state:I,preventScrollReset:O==null?void 0:O.preventScrollReset})}),[n]),te=n.basename||"/",S=P.useMemo(()=>({router:n,navigator:ae,static:!1,basename:te,onError:t}),[n,ae,te,t]);return P.createElement(P.Fragment,null,P.createElement(Eo.Provider,{value:S},P.createElement(Oc.Provider,{value:d},P.createElement(pA.Provider,{value:G.current},P.createElement(Oy.Provider,{value:E},P.createElement(xN,{basename:te,location:d.location,navigationType:d.historyAction,navigator:ae,unstable_useTransitions:a},P.createElement(DN,{routes:n.routes,future:n.future,state:d,onError:t})))))),null)}function Kb(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var DN=P.memo(NN);function NN({routes:n,future:e,state:t,onError:a}){return cN(n,void 0,t,a,e)}function hs({to:n,replace:e,state:t,relative:a}){at(Hl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(Mr);nn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=P.useContext(Jr),{pathname:c}=Zr(),d=To(),p=Md(n,Od(l),c,a==="path"),g=JSON.stringify(p);return P.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:a})},[d,g,a,e,t]),null}function TA(n){return uN(n.context)}function xN({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){at(!Hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=P.useMemo(()=>({basename:d,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[d,s,l,c]);typeof t=="string"&&(t=Ta(t));let{pathname:g="/",search:y="",hash:E="",state:b=null,key:R="default"}=t,k=P.useMemo(()=>{let z=Xr(g,d);return z==null?null:{location:{pathname:z,search:y,hash:E,state:b,key:R},navigationType:a}},[d,g,y,E,b,R,a]);return nn(k!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:P.createElement(Mr.Provider,{value:p},P.createElement(Pd.Provider,{children:e,value:k}))}var Of="get",Mf="application/x-www-form-urlencoded";function kd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function ON(n){return kd(n)&&n.tagName.toLowerCase()==="button"}function MN(n){return kd(n)&&n.tagName.toLowerCase()==="form"}function PN(n){return kd(n)&&n.tagName.toLowerCase()==="input"}function VN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function kN(n,e){return n.button===0&&(!e||e==="_self")&&!VN(n)}function $g(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let a=n[t];return e.concat(Array.isArray(a)?a.map(s=>[t,s]):[[t,a]])},[]))}function LN(n,e){let t=$g(n);return e&&e.forEach((a,s)=>{t.has(s)||e.getAll(s).forEach(l=>{t.append(s,l)})}),t}var vf=null;function UN(){if(vf===null)try{new FormData(document.createElement("form"),0),vf=!1}catch{vf=!0}return vf}var jN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sg(n){return n!=null&&!jN.has(n)?(nn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mf}"`),null):n}function zN(n,e){let t,a,s,l,c;if(MN(n)){let d=n.getAttribute("action");a=d?Xr(d,e):null,t=n.getAttribute("method")||Of,s=Sg(n.getAttribute("enctype"))||Mf,l=new FormData(n)}else if(ON(n)||PN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(a=p?Xr(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Of,s=Sg(n.getAttribute("formenctype"))||Sg(d.getAttribute("enctype"))||Mf,l=new FormData(d,n),!UN()){let{name:g,type:y,value:E}=n;if(y==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,E)}}else{if(kd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Of,a=null,s=Mf,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ky(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function BN(n,e,t,a){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:e&&Xr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function FN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function qN(n,e,t){let a=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await FN(l,t);return c.links?c.links():[]}return[]}));return YN(a.flat(1).filter(HN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Yb(n,e,t,a,s,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var y;return t[g].pathname!==p.pathname||((y=t[g].route.path)==null?void 0:y.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{var E;let y=a.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function GN(n,e,{includeHydrateFallback:t}={}){return $N(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function $N(n){return[...new Set(n)]}function KN(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function YN(n,e){let t=new Set;return new Set(e),n.reduce((a,s)=>{let l=JSON.stringify(KN(s));return t.has(l)||(t.add(l),a.push({key:l,link:s})),a},[])}function bA(){let n=P.useContext(Eo);return ky(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function QN(){let n=P.useContext(Oc);return ky(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ly=P.createContext(void 0);Ly.displayName="FrameworkContext";function SA(){let n=P.useContext(Ly);return ky(n,"You must render this element inside a <HydratedRouter> element"),n}function XN(n,e){let t=P.useContext(Ly),[a,s]=P.useState(!1),[l,c]=P.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:y,onTouchStart:E}=e,b=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let z=Y=>{Y.forEach(B=>{c(B.isIntersecting)})},j=new IntersectionObserver(z,{threshold:.5});return b.current&&j.observe(b.current),()=>{j.disconnect()}}},[n]),P.useEffect(()=>{if(a){let z=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(z)}}},[a]);let R=()=>{s(!0)},k=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:Qu(d,R),onBlur:Qu(p,k),onMouseEnter:Qu(g,R),onMouseLeave:Qu(y,k),onTouchStart:Qu(E,R)}]:[!1,b,{}]}function Qu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function WN({page:n,...e}){let{router:t}=bA(),a=P.useMemo(()=>is(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?P.createElement(ZN,{page:n,matches:a,...e}):null}function JN(n){let{manifest:e,routeModules:t}=SA(),[a,s]=P.useState([]);return P.useEffect(()=>{let l=!1;return qN(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),a}function ZN({page:n,matches:e,...t}){let a=Zr(),{future:s,manifest:l,routeModules:c}=SA(),{basename:d}=bA(),{loaderData:p,matches:g}=QN(),y=P.useMemo(()=>Yb(n,e,g,l,a,"data"),[n,e,g,l,a]),E=P.useMemo(()=>Yb(n,e,g,l,a,"assets"),[n,e,g,l,a]),b=P.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let z=new Set,j=!1;if(e.forEach(B=>{var Z;let G=l.routes[B.route.id];!G||!G.hasLoader||(!y.some(ae=>ae.route.id===B.route.id)&&B.route.id in p&&((Z=c[B.route.id])!=null&&Z.shouldRevalidate)||G.hasClientLoader?j=!0:z.add(B.route.id))}),z.size===0)return[];let Y=BN(n,d,s.unstable_trailingSlashAwareDataRequests,"data");return j&&z.size>0&&Y.searchParams.set("_routes",e.filter(B=>z.has(B.route.id)).map(B=>B.route.id).join(",")),[Y.pathname+Y.search]},[d,s.unstable_trailingSlashAwareDataRequests,p,a,l,y,e,n,c]),R=P.useMemo(()=>GN(E,l),[E,l]),k=JN(E);return P.createElement(P.Fragment,null,b.map(z=>P.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),R.map(z=>P.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),k.map(({key:z,link:j})=>P.createElement("link",{key:z,nonce:t.nonce,...j,crossOrigin:j.crossOrigin??t.crossOrigin})))}function ex(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var tx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tx&&(window.__reactRouterVersion="7.13.0")}catch{}function nx(n,e){return DD({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:GI({window:e==null?void 0:e.window}),hydrationData:rx(),routes:n,mapRouteProperties:wN,hydrationRouteProperties:RN,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function rx(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:ix(n.errors)}),n}function ix(n){if(!n)return null;let e=Object.entries(n),t={};for(let[a,s]of e)if(s&&s.__type==="RouteErrorResponse")t[a]=new Nc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[a]=c}catch{}}if(t[a]==null){let l=new Error(s.message);l.stack="",t[a]=l}}else t[a]=s;return t}var AA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wA=P.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:b,...R},k){let{basename:z,unstable_useTransitions:j}=P.useContext(Mr),Y=typeof g=="string"&&AA.test(g),B=nA(g,z);g=B.to;let G=sN(g,{relative:s}),[Z,ae,te]=XN(a,R),S=lx(g,{replace:c,state:d,target:p,preventScrollReset:y,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:b,unstable_useTransitions:j});function w(O){e&&e(O),O.defaultPrevented||S(O)}let I=P.createElement("a",{...R,...te,href:B.absoluteURL||G,onClick:B.isExternal||l?e:w,ref:ex(k,ae),target:p,"data-discover":!Y&&t==="render"?"true":void 0});return Z&&!Y?P.createElement(P.Fragment,null,I,P.createElement(WN,{page:G})):I});wA.displayName="Link";var ax=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:p,...g},y){let E=Mc(c,{relative:g.relative}),b=Zr(),R=P.useContext(Oc),{navigator:k,basename:z}=P.useContext(Mr),j=R!=null&&mx(E)&&d===!0,Y=k.encodeLocation?k.encodeLocation(E).pathname:E.pathname,B=b.pathname,G=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(B=B.toLowerCase(),G=G?G.toLowerCase():null,Y=Y.toLowerCase()),G&&z&&(G=Xr(G,z)||G);const Z=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let ae=B===Y||!s&&B.startsWith(Y)&&B.charAt(Z)==="/",te=G!=null&&(G===Y||!s&&G.startsWith(Y)&&G.charAt(Y.length)==="/"),S={isActive:ae,isPending:te,isTransitioning:j},w=ae?e:void 0,I;typeof a=="function"?I=a(S):I=[a,ae?"active":null,te?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(S):l;return P.createElement(wA,{...g,"aria-current":w,className:I,ref:y,style:O,to:c,viewTransition:d},typeof p=="function"?p(S):p)});ax.displayName="NavLink";var sx=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:l,method:c=Of,action:d,onSubmit:p,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:b,...R},k)=>{let{unstable_useTransitions:z}=P.useContext(Mr),j=fx(),Y=dx(d,{relative:g}),B=c.toLowerCase()==="get"?"get":"post",G=typeof d=="string"&&AA.test(d),Z=ae=>{if(p&&p(ae),ae.defaultPrevented)return;ae.preventDefault();let te=ae.nativeEvent.submitter,S=(te==null?void 0:te.getAttribute("formmethod"))||c,w=()=>j(te||ae.currentTarget,{fetcherKey:e,method:S,navigate:t,replace:s,state:l,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:b});z&&t!==!1?P.startTransition(()=>w()):w()};return P.createElement("form",{ref:k,method:B,action:Y,onSubmit:a?p:Z,...R,"data-discover":!G&&n==="render"?"true":void 0})});sx.displayName="Form";function ox(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RA(n){let e=P.useContext(Eo);return at(e,ox(n)),e}function lx(n,{target:e,replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=To(),y=Zr(),E=Mc(n,{relative:l});return P.useCallback(b=>{if(kN(b,e)){b.preventDefault();let R=t!==void 0?t:ji(y)===ji(E),k=()=>g(n,{replace:R,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?P.startTransition(()=>k()):k()}},[y,g,E,t,a,e,n,s,l,c,d,p])}function ux(n){nn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef($g(n)),t=P.useRef(!1),a=Zr(),s=P.useMemo(()=>LN(a.search,t.current?null:e.current),[a.search]),l=To(),c=P.useCallback((d,p)=>{const g=$g(typeof d=="function"?d(new URLSearchParams(s)):d);t.current=!0,l("?"+g,p)},[l,s]);return[s,c]}var cx=0,hx=()=>`__${String(++cx)}__`;function fx(){let{router:n}=RA("useSubmit"),{basename:e}=P.useContext(Mr),t=vN(),a=n.fetch,s=n.navigate;return P.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:y,body:E}=zN(l,e);if(c.navigate===!1){let b=c.fetcherKey||hx();await a(b,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:E,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:E,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,s,e,t])}function dx(n,{relative:e}={}){let{basename:t}=P.useContext(Mr),a=P.useContext(Jr);at(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...Mc(n||".",{relative:e})},c=Zr();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(y=>y==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let y=d.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Pi([t,l.pathname])),ji(l)}function mx(n,{relative:e}={}){let t=P.useContext(Oy);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=RA("useViewTransitionState"),s=Mc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Xr(t.currentLocation.pathname,a)||t.currentLocation.pathname,c=Xr(t.nextLocation.pathname,a)||t.nextLocation.pathname;return td(s.pathname,c)!=null||td(s.pathname,l)!=null}var CA=$S();function px(n){return P.createElement(IN,{flushSync:CA.flushSync,...n})}const gx=P.createContext(void 0),ei=()=>jI(),ct=FI.withTypes(),yx=({children:n})=>{const e=ct(t=>t.auth.loading);return A.jsx(gx.Provider,{value:{isLoading:e},children:n})},_x=()=>{};var Qb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let s=n.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},vx=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const s=n[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],d=n[t++],p=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},DA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,d=c?n[s+1]:0,p=s+2<n.length,g=p?n[s+2]:0,y=l>>2,E=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,R=g&63;p||(R=64,c||(b=64)),a.push(t[y],t[E],t[b],t[R])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(IA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new Ex;const b=l<<2|d>>4;if(a.push(b),g!==64){const R=d<<4&240|g>>2;if(a.push(R),E!==64){const k=g<<6&192|E;a.push(k)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ex extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tx=function(n){const e=IA(n);return DA.encodeByteArray(e,!0)},nd=function(n){return Tx(n).replace(/\./g,"")},NA=function(n){try{return DA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=()=>bx().__FIREBASE_DEFAULTS__,Ax=()=>{if(typeof process>"u"||typeof Qb>"u")return;const n=Qb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&NA(n[1]);return e&&JSON.parse(e)},Ld=()=>{try{return _x()||Sx()||Ax()||wx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xA=n=>{var e,t;return(t=(e=Ld())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Rx=n=>{const e=xA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},OA=()=>{var n;return(n=Ld())==null?void 0:n.config},MA=n=>{var e;return(e=Ld())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function PA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[nd(JSON.stringify(t)),nd(JSON.stringify(c)),""].join(".")}const sc={};function Dx(){const n={prod:[],emulator:[]};for(const e of Object.keys(sc))sc[e]?n.emulator.push(e):n.prod.push(e);return n}function Nx(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Xb=!1;function VA(n,e){if(typeof window>"u"||typeof document>"u"||!ql(window.location.host)||sc[n]===e||sc[n]||Xb)return;sc[n]=e;function t(b){return`__firebase__banner__${b}`}const a="__firebase__banner",l=Dx().prod.length>0;function c(){const b=document.getElementById(a);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,R){b.setAttribute("width","24"),b.setAttribute("id",R),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Xb=!0,c()},b}function y(b,R){b.setAttribute("id",R),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=Nx(a),R=t("text"),k=document.getElementById(R)||document.createElement("span"),z=t("learnmore"),j=document.getElementById(z)||document.createElement("a"),Y=t("preprendIcon"),B=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const G=b.element;d(G),y(j,z);const Z=g();p(B,Y),G.append(B,k,j,Z),document.body.appendChild(G)}l?(k.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yn())}function Ox(){var e;const n=(e=Ld())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Px(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Vx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kx(){const n=Yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Lx(){return!Ox()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ux(){try{return typeof indexedDB=="object"}catch{return!1}}function jx(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="FirebaseError";class ba extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=zx,Object.setPrototypeOf(this,ba.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pc.prototype.create)}}class Pc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?Bx(l,a):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new ba(s,d,a)}}function Bx(n,e){return n.replace(Fx,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const Fx=/\{\$([^}]+)}/g;function Hx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function mo(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=n[s],c=e[s];if(Wb(l)&&Wb(c)){if(!mo(l,c))return!1}else if(l!==c)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function Wb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function qx(n,e){const t=new Gx(n,e);return t.subscribe.bind(t)}class Gx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");$x(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=Ag),s.error===void 0&&(s.error=Ag),s.complete===void 0&&(s.complete=Ag);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $x(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ag(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(n){return n&&n._delegate?n._delegate:n}class po{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new Cx;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Qx(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&c.resolve(s)}return s}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const l=this.instances.get(a);return l&&e(l,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Yx(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yx(n){return n===io?void 0:n}function Qx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Kx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(dt||(dt={}));const Wx={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},Jx=dt.INFO,Zx={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},e2=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),s=Zx[e];if(s)console[s](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uy{constructor(e){this.name=e,this._logLevel=Jx,this._logHandler=e2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const t2=(n,e)=>e.some(t=>n instanceof t);let Jb,Zb;function n2(){return Jb||(Jb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r2(){return Zb||(Zb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kA=new WeakMap,Kg=new WeakMap,LA=new WeakMap,wg=new WeakMap,jy=new WeakMap;function i2(n){const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(fs(n.result)),s()},c=()=>{a(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&kA.set(t,n)}).catch(()=>{}),jy.set(e,n),e}function a2(n){if(Kg.has(n))return;const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{a(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Kg.set(n,e)}let Yg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||LA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function s2(n){Yg=n(Yg)}function o2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(Rg(this),e,...t);return LA.set(a,e.sort?e.sort():[e]),fs(a)}:r2().includes(n)?function(...e){return n.apply(Rg(this),e),fs(kA.get(this))}:function(...e){return fs(n.apply(Rg(this),e))}}function l2(n){return typeof n=="function"?o2(n):(n instanceof IDBTransaction&&a2(n),t2(n,n2())?new Proxy(n,Yg):n)}function fs(n){if(n instanceof IDBRequest)return i2(n);if(wg.has(n))return wg.get(n);const e=l2(n);return e!==n&&(wg.set(n,e),jy.set(e,n)),e}const Rg=n=>jy.get(n);function u2(n,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),d=fs(c);return a&&c.addEventListener("upgradeneeded",p=>{a(fs(c.result),p.oldVersion,p.newVersion,fs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const c2=["get","getKey","getAll","getAllKeys","count"],h2=["put","add","delete","clear"],Cg=new Map;function e0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Cg.get(e))return Cg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=h2.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||c2.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,s?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&p.done]))[0]};return Cg.set(e,l),l}s2(n=>({...n,get:(e,t,a)=>e0(e,t)||n.get(e,t,a),has:(e,t)=>!!e0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(d2(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function d2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qg="@firebase/app",t0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new Uy("@firebase/app"),m2="@firebase/app-compat",p2="@firebase/analytics-compat",g2="@firebase/analytics",y2="@firebase/app-check-compat",_2="@firebase/app-check",v2="@firebase/auth",E2="@firebase/auth-compat",T2="@firebase/database",b2="@firebase/data-connect",S2="@firebase/database-compat",A2="@firebase/functions",w2="@firebase/functions-compat",R2="@firebase/installations",C2="@firebase/installations-compat",I2="@firebase/messaging",D2="@firebase/messaging-compat",N2="@firebase/performance",x2="@firebase/performance-compat",O2="@firebase/remote-config",M2="@firebase/remote-config-compat",P2="@firebase/storage",V2="@firebase/storage-compat",k2="@firebase/firestore",L2="@firebase/ai",U2="@firebase/firestore-compat",j2="firebase",z2="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="[DEFAULT]",B2={[Qg]:"fire-core",[m2]:"fire-core-compat",[g2]:"fire-analytics",[p2]:"fire-analytics-compat",[_2]:"fire-app-check",[y2]:"fire-app-check-compat",[v2]:"fire-auth",[E2]:"fire-auth-compat",[T2]:"fire-rtdb",[b2]:"fire-data-connect",[S2]:"fire-rtdb-compat",[A2]:"fire-fn",[w2]:"fire-fn-compat",[R2]:"fire-iid",[C2]:"fire-iid-compat",[I2]:"fire-fcm",[D2]:"fire-fcm-compat",[N2]:"fire-perf",[x2]:"fire-perf-compat",[O2]:"fire-rc",[M2]:"fire-rc-compat",[P2]:"fire-gcs",[V2]:"fire-gcs-compat",[k2]:"fire-fst",[U2]:"fire-fst-compat",[L2]:"fire-vertex","fire-js":"fire-js",[j2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=new Map,F2=new Map,Wg=new Map;function n0(n,e){try{n.container.addComponent(e)}catch(t){ga.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xl(n){const e=n.name;if(Wg.has(e))return ga.debug(`There were multiple attempts to register component ${e}.`),!1;Wg.set(e,n);for(const t of rd.values())n0(t,n);for(const t of F2.values())n0(t,n);return!0}function zy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ui(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new Pc("app","Firebase",H2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new po("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=z2;function UA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a={name:Xg,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw ds.create("bad-app-name",{appName:String(s)});if(t||(t=OA()),!t)throw ds.create("no-options");const l=rd.get(s);if(l){if(mo(t,l.options)&&mo(a,l.config))return l;throw ds.create("duplicate-app",{appName:s})}const c=new Xx(s);for(const p of Wg.values())c.addComponent(p);const d=new q2(t,a,c);return rd.set(s,d),d}function jA(n=Xg){const e=rd.get(n);if(!e&&n===Xg&&OA())return UA();if(!e)throw ds.create("no-app",{appName:n});return e}function ms(n,e,t){let a=B2[n]??n;t&&(a+=`-${t}`);const s=a.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ga.warn(c.join(" "));return}xl(new po(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="firebase-heartbeat-database",$2=1,_c="firebase-heartbeat-store";let Ig=null;function zA(){return Ig||(Ig=u2(G2,$2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_c)}catch(t){console.warn(t)}}}}).catch(n=>{throw ds.create("idb-open",{originalErrorMessage:n.message})})),Ig}async function K2(n){try{const t=(await zA()).transaction(_c),a=await t.objectStore(_c).get(BA(n));return await t.done,a}catch(e){if(e instanceof ba)ga.warn(e.message);else{const t=ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ga.warn(t.message)}}}async function r0(n,e){try{const a=(await zA()).transaction(_c,"readwrite");await a.objectStore(_c).put(e,BA(n)),await a.done}catch(t){if(t instanceof ba)ga.warn(t.message);else{const a=ds.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ga.warn(a.message)}}}function BA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=1024,Q2=30;class X2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new J2(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=i0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>Q2){const c=Z2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){ga.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=i0(),{heartbeatsToSend:a,unsentEntries:s}=W2(this._heartbeatsCache.heartbeats),l=nd(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ga.warn(t),""}}}function i0(){return new Date().toISOString().substring(0,10)}function W2(n,e=Y2){const t=[];let a=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),a0(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),a0(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class J2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ux()?jx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await K2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return r0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return r0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function a0(n){return nd(JSON.stringify({version:2,heartbeats:n})).length}function Z2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(n){xl(new po("platform-logger",e=>new f2(e),"PRIVATE")),xl(new po("heartbeat",e=>new X2(e),"PRIVATE")),ms(Qg,t0,n),ms(Qg,t0,"esm2020"),ms("fire-js","")}eO("");var s0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ps,FA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,w){function I(){}I.prototype=w.prototype,S.F=w.prototype,S.prototype=new I,S.prototype.constructor=S,S.D=function(O,x,M){for(var D=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)D[pe-2]=arguments[pe];return w.prototype[x].apply(O,D)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,w,I){I||(I=0);const O=Array(16);if(typeof w=="string")for(var x=0;x<16;++x)O[x]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(x=0;x<16;++x)O[x]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=S.g[0],I=S.g[1],x=S.g[2];let M=S.g[3],D;D=w+(M^I&(x^M))+O[0]+3614090360&4294967295,w=I+(D<<7&4294967295|D>>>25),D=M+(x^w&(I^x))+O[1]+3905402710&4294967295,M=w+(D<<12&4294967295|D>>>20),D=x+(I^M&(w^I))+O[2]+606105819&4294967295,x=M+(D<<17&4294967295|D>>>15),D=I+(w^x&(M^w))+O[3]+3250441966&4294967295,I=x+(D<<22&4294967295|D>>>10),D=w+(M^I&(x^M))+O[4]+4118548399&4294967295,w=I+(D<<7&4294967295|D>>>25),D=M+(x^w&(I^x))+O[5]+1200080426&4294967295,M=w+(D<<12&4294967295|D>>>20),D=x+(I^M&(w^I))+O[6]+2821735955&4294967295,x=M+(D<<17&4294967295|D>>>15),D=I+(w^x&(M^w))+O[7]+4249261313&4294967295,I=x+(D<<22&4294967295|D>>>10),D=w+(M^I&(x^M))+O[8]+1770035416&4294967295,w=I+(D<<7&4294967295|D>>>25),D=M+(x^w&(I^x))+O[9]+2336552879&4294967295,M=w+(D<<12&4294967295|D>>>20),D=x+(I^M&(w^I))+O[10]+4294925233&4294967295,x=M+(D<<17&4294967295|D>>>15),D=I+(w^x&(M^w))+O[11]+2304563134&4294967295,I=x+(D<<22&4294967295|D>>>10),D=w+(M^I&(x^M))+O[12]+1804603682&4294967295,w=I+(D<<7&4294967295|D>>>25),D=M+(x^w&(I^x))+O[13]+4254626195&4294967295,M=w+(D<<12&4294967295|D>>>20),D=x+(I^M&(w^I))+O[14]+2792965006&4294967295,x=M+(D<<17&4294967295|D>>>15),D=I+(w^x&(M^w))+O[15]+1236535329&4294967295,I=x+(D<<22&4294967295|D>>>10),D=w+(x^M&(I^x))+O[1]+4129170786&4294967295,w=I+(D<<5&4294967295|D>>>27),D=M+(I^x&(w^I))+O[6]+3225465664&4294967295,M=w+(D<<9&4294967295|D>>>23),D=x+(w^I&(M^w))+O[11]+643717713&4294967295,x=M+(D<<14&4294967295|D>>>18),D=I+(M^w&(x^M))+O[0]+3921069994&4294967295,I=x+(D<<20&4294967295|D>>>12),D=w+(x^M&(I^x))+O[5]+3593408605&4294967295,w=I+(D<<5&4294967295|D>>>27),D=M+(I^x&(w^I))+O[10]+38016083&4294967295,M=w+(D<<9&4294967295|D>>>23),D=x+(w^I&(M^w))+O[15]+3634488961&4294967295,x=M+(D<<14&4294967295|D>>>18),D=I+(M^w&(x^M))+O[4]+3889429448&4294967295,I=x+(D<<20&4294967295|D>>>12),D=w+(x^M&(I^x))+O[9]+568446438&4294967295,w=I+(D<<5&4294967295|D>>>27),D=M+(I^x&(w^I))+O[14]+3275163606&4294967295,M=w+(D<<9&4294967295|D>>>23),D=x+(w^I&(M^w))+O[3]+4107603335&4294967295,x=M+(D<<14&4294967295|D>>>18),D=I+(M^w&(x^M))+O[8]+1163531501&4294967295,I=x+(D<<20&4294967295|D>>>12),D=w+(x^M&(I^x))+O[13]+2850285829&4294967295,w=I+(D<<5&4294967295|D>>>27),D=M+(I^x&(w^I))+O[2]+4243563512&4294967295,M=w+(D<<9&4294967295|D>>>23),D=x+(w^I&(M^w))+O[7]+1735328473&4294967295,x=M+(D<<14&4294967295|D>>>18),D=I+(M^w&(x^M))+O[12]+2368359562&4294967295,I=x+(D<<20&4294967295|D>>>12),D=w+(I^x^M)+O[5]+4294588738&4294967295,w=I+(D<<4&4294967295|D>>>28),D=M+(w^I^x)+O[8]+2272392833&4294967295,M=w+(D<<11&4294967295|D>>>21),D=x+(M^w^I)+O[11]+1839030562&4294967295,x=M+(D<<16&4294967295|D>>>16),D=I+(x^M^w)+O[14]+4259657740&4294967295,I=x+(D<<23&4294967295|D>>>9),D=w+(I^x^M)+O[1]+2763975236&4294967295,w=I+(D<<4&4294967295|D>>>28),D=M+(w^I^x)+O[4]+1272893353&4294967295,M=w+(D<<11&4294967295|D>>>21),D=x+(M^w^I)+O[7]+4139469664&4294967295,x=M+(D<<16&4294967295|D>>>16),D=I+(x^M^w)+O[10]+3200236656&4294967295,I=x+(D<<23&4294967295|D>>>9),D=w+(I^x^M)+O[13]+681279174&4294967295,w=I+(D<<4&4294967295|D>>>28),D=M+(w^I^x)+O[0]+3936430074&4294967295,M=w+(D<<11&4294967295|D>>>21),D=x+(M^w^I)+O[3]+3572445317&4294967295,x=M+(D<<16&4294967295|D>>>16),D=I+(x^M^w)+O[6]+76029189&4294967295,I=x+(D<<23&4294967295|D>>>9),D=w+(I^x^M)+O[9]+3654602809&4294967295,w=I+(D<<4&4294967295|D>>>28),D=M+(w^I^x)+O[12]+3873151461&4294967295,M=w+(D<<11&4294967295|D>>>21),D=x+(M^w^I)+O[15]+530742520&4294967295,x=M+(D<<16&4294967295|D>>>16),D=I+(x^M^w)+O[2]+3299628645&4294967295,I=x+(D<<23&4294967295|D>>>9),D=w+(x^(I|~M))+O[0]+4096336452&4294967295,w=I+(D<<6&4294967295|D>>>26),D=M+(I^(w|~x))+O[7]+1126891415&4294967295,M=w+(D<<10&4294967295|D>>>22),D=x+(w^(M|~I))+O[14]+2878612391&4294967295,x=M+(D<<15&4294967295|D>>>17),D=I+(M^(x|~w))+O[5]+4237533241&4294967295,I=x+(D<<21&4294967295|D>>>11),D=w+(x^(I|~M))+O[12]+1700485571&4294967295,w=I+(D<<6&4294967295|D>>>26),D=M+(I^(w|~x))+O[3]+2399980690&4294967295,M=w+(D<<10&4294967295|D>>>22),D=x+(w^(M|~I))+O[10]+4293915773&4294967295,x=M+(D<<15&4294967295|D>>>17),D=I+(M^(x|~w))+O[1]+2240044497&4294967295,I=x+(D<<21&4294967295|D>>>11),D=w+(x^(I|~M))+O[8]+1873313359&4294967295,w=I+(D<<6&4294967295|D>>>26),D=M+(I^(w|~x))+O[15]+4264355552&4294967295,M=w+(D<<10&4294967295|D>>>22),D=x+(w^(M|~I))+O[6]+2734768916&4294967295,x=M+(D<<15&4294967295|D>>>17),D=I+(M^(x|~w))+O[13]+1309151649&4294967295,I=x+(D<<21&4294967295|D>>>11),D=w+(x^(I|~M))+O[4]+4149444226&4294967295,w=I+(D<<6&4294967295|D>>>26),D=M+(I^(w|~x))+O[11]+3174756917&4294967295,M=w+(D<<10&4294967295|D>>>22),D=x+(w^(M|~I))+O[2]+718787259&4294967295,x=M+(D<<15&4294967295|D>>>17),D=I+(M^(x|~w))+O[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(x+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+x&4294967295,S.g[3]=S.g[3]+M&4294967295}a.prototype.v=function(S,w){w===void 0&&(w=S.length);const I=w-this.blockSize,O=this.C;let x=this.h,M=0;for(;M<w;){if(x==0)for(;M<=I;)s(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<w;)if(O[x++]=S.charCodeAt(M++),x==this.blockSize){s(this,O),x=0;break}}else for(;M<w;)if(O[x++]=S[M++],x==this.blockSize){s(this,O),x=0;break}}this.h=x,this.o+=w},a.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;w=this.o*8;for(var I=S.length-8;I<S.length;++I)S[I]=w&255,w/=256;for(this.v(S),S=Array(16),w=0,I=0;I<4;++I)for(let O=0;O<32;O+=8)S[w++]=this.g[I]>>>O&255;return S};function l(S,w){var I=d;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=w(S)}function c(S,w){this.h=w;const I=[];let O=!0;for(let x=S.length-1;x>=0;x--){const M=S[x]|0;O&&M==w||(I[x]=M,O=!1)}this.g=I}var d={};function p(S){return-128<=S&&S<128?l(S,function(w){return new c([w|0],w<0?-1:0)}):new c([S|0],S<0?-1:0)}function g(S){if(isNaN(S)||!isFinite(S))return E;if(S<0)return j(g(-S));const w=[];let I=1;for(let O=0;S>=I;O++)w[O]=S/I|0,I*=4294967296;return new c(w,0)}function y(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return j(y(S.substring(1),w));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(w,8));let O=E;for(let M=0;M<S.length;M+=8){var x=Math.min(8,S.length-M);const D=parseInt(S.substring(M,M+x),w);x<8?(x=g(Math.pow(w,x)),O=O.j(x).add(g(D))):(O=O.j(I),O=O.add(g(D)))}return O}var E=p(0),b=p(1),R=p(16777216);n=c.prototype,n.m=function(){if(z(this))return-j(this).m();let S=0,w=1;for(let I=0;I<this.g.length;I++){const O=this.i(I);S+=(O>=0?O:4294967296+O)*w,w*=4294967296}return S},n.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(k(this))return"0";if(z(this))return"-"+j(this).toString(S);const w=g(Math.pow(S,6));var I=this;let O="";for(;;){const x=Z(I,w).g;I=Y(I,x.j(w));let M=((I.g.length>0?I.g[0]:I.h)>>>0).toString(S);if(I=x,k(I))return M+O;for(;M.length<6;)M="0"+M;O=M+O}},n.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function k(S){if(S.h!=0)return!1;for(let w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function z(S){return S.h==-1}n.l=function(S){return S=Y(this,S),z(S)?-1:k(S)?0:1};function j(S){const w=S.g.length,I=[];for(let O=0;O<w;O++)I[O]=~S.g[O];return new c(I,~S.h).add(b)}n.abs=function(){return z(this)?j(this):this},n.add=function(S){const w=Math.max(this.g.length,S.g.length),I=[];let O=0;for(let x=0;x<=w;x++){let M=O+(this.i(x)&65535)+(S.i(x)&65535),D=(M>>>16)+(this.i(x)>>>16)+(S.i(x)>>>16);O=D>>>16,M&=65535,D&=65535,I[x]=D<<16|M}return new c(I,I[I.length-1]&-2147483648?-1:0)};function Y(S,w){return S.add(j(w))}n.j=function(S){if(k(this)||k(S))return E;if(z(this))return z(S)?j(this).j(j(S)):j(j(this).j(S));if(z(S))return j(this.j(j(S)));if(this.l(R)<0&&S.l(R)<0)return g(this.m()*S.m());const w=this.g.length+S.g.length,I=[];for(var O=0;O<2*w;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(let x=0;x<S.g.length;x++){const M=this.i(O)>>>16,D=this.i(O)&65535,pe=S.i(x)>>>16,Se=S.i(x)&65535;I[2*O+2*x]+=D*Se,B(I,2*O+2*x),I[2*O+2*x+1]+=M*Se,B(I,2*O+2*x+1),I[2*O+2*x+1]+=D*pe,B(I,2*O+2*x+1),I[2*O+2*x+2]+=M*pe,B(I,2*O+2*x+2)}for(S=0;S<w;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=w;S<2*w;S++)I[S]=0;return new c(I,0)};function B(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function G(S,w){this.g=S,this.h=w}function Z(S,w){if(k(w))throw Error("division by zero");if(k(S))return new G(E,E);if(z(S))return w=Z(j(S),w),new G(j(w.g),j(w.h));if(z(w))return w=Z(S,j(w)),new G(j(w.g),w.h);if(S.g.length>30){if(z(S)||z(w))throw Error("slowDivide_ only works with positive integers.");for(var I=b,O=w;O.l(S)<=0;)I=ae(I),O=ae(O);var x=te(I,1),M=te(O,1);for(O=te(O,2),I=te(I,2);!k(O);){var D=M.add(O);D.l(S)<=0&&(x=x.add(I),M=D),O=te(O,1),I=te(I,1)}return w=Y(S,x.j(w)),new G(x,w)}for(x=E;S.l(w)>=0;){for(I=Math.max(1,Math.floor(S.m()/w.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),M=g(I),D=M.j(w);z(D)||D.l(S)>0;)I-=O,M=g(I),D=M.j(w);k(M)&&(M=b),x=x.add(M),S=Y(S,D)}return new G(x,S)}n.B=function(S){return Z(this,S).h},n.and=function(S){const w=Math.max(this.g.length,S.g.length),I=[];for(let O=0;O<w;O++)I[O]=this.i(O)&S.i(O);return new c(I,this.h&S.h)},n.or=function(S){const w=Math.max(this.g.length,S.g.length),I=[];for(let O=0;O<w;O++)I[O]=this.i(O)|S.i(O);return new c(I,this.h|S.h)},n.xor=function(S){const w=Math.max(this.g.length,S.g.length),I=[];for(let O=0;O<w;O++)I[O]=this.i(O)^S.i(O);return new c(I,this.h^S.h)};function ae(S){const w=S.g.length+1,I=[];for(let O=0;O<w;O++)I[O]=S.i(O)<<1|S.i(O-1)>>>31;return new c(I,S.h)}function te(S,w){const I=w>>5;w%=32;const O=S.g.length-I,x=[];for(let M=0;M<O;M++)x[M]=w>0?S.i(M+I)>>>w|S.i(M+I+1)<<32-w:S.i(M+I);return new c(x,S.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,FA=a,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,ps=c}).apply(typeof s0<"u"?s0:typeof self<"u"?self:typeof window<"u"?window:{});var Ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HA,Zu,qA,Pf,Jg,GA,$A,KA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ef=="object"&&Ef];for(var _=0;_<h.length;++_){var T=h[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=t(this);function s(h,_){if(_)e:{var T=a;h=h.split(".");for(var N=0;N<h.length-1;N++){var Q=h[N];if(!(Q in T))break e;T=T[Q]}h=h[h.length-1],N=T[h],_=_(N),_!=N&&_!=null&&e(T,h,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(_){var T=[],N;for(N in _)Object.prototype.hasOwnProperty.call(_,N)&&T.push([N,_[N]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function p(h,_,T){return h.call.apply(h.bind,arguments)}function g(h,_,T){return g=p,g.apply(null,arguments)}function y(h,_){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function E(h,_){function T(){}T.prototype=_.prototype,h.Z=_.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(N,Q,re){for(var be=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)be[Ze-2]=arguments[Ze];return _.prototype[Q].apply(N,be)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const _=h.length;if(_>0){const T=Array(_);for(let N=0;N<_;N++)T[N]=h[N];return T}return[]}function k(h,_){for(let N=1;N<arguments.length;N++){const Q=arguments[N];var T=typeof Q;if(T=T!="object"?T:Q?Array.isArray(Q)?"array":T:"null",T=="array"||T=="object"&&typeof Q.length=="number"){T=h.length||0;const re=Q.length||0;h.length=T+re;for(let be=0;be<re;be++)h[T+be]=Q[be]}else h.push(Q)}}class z{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function j(h){c.setTimeout(()=>{throw h},0)}function Y(){var h=S;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class B{constructor(){this.h=this.g=null}add(_,T){const N=G.get();N.set(_,T),this.h?this.h.next=N:this.g=N,this.h=N}}var G=new z(()=>new Z,h=>h.reset());class Z{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,te=!1,S=new B,w=()=>{const h=Promise.resolve(void 0);ae=()=>{h.then(I)}};function I(){for(var h;h=Y();){try{h.h.call(h.g)}catch(T){j(T)}var _=G;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}te=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,_),c.removeEventListener("test",T,_)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function pe(h,_){x.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}E(pe,x),pe.prototype.init=function(h,_){const T=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(T=="mouseover"?_=h.fromElement:T=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Se="closure_listenable_"+(Math.random()*1e6|0),H=0;function fe(h,_,T,N,Q){this.listener=h,this.proxy=null,this.src=_,this.type=T,this.capture=!!N,this.ha=Q,this.key=++H,this.da=this.fa=!1}function ge(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Pe(h,_,T){for(const N in h)_.call(T,h[N],N,h)}function Me(h,_){for(const T in h)_.call(void 0,h[T],T,h)}function U(h){const _={};for(const T in h)_[T]=h[T];return _}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,_){let T,N;for(let Q=1;Q<arguments.length;Q++){N=arguments[Q];for(T in N)h[T]=N[T];for(let re=0;re<$.length;re++)T=$[re],Object.prototype.hasOwnProperty.call(N,T)&&(h[T]=N[T])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,_,T,N,Q){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const be=Te(h,_,N,Q);return be>-1?(_=h[be],T||(_.fa=!1)):(_=new fe(_,this.src,re,!!N,Q),_.fa=T,h.push(_)),_};function ye(h,_){const T=_.type;if(T in h.g){var N=h.g[T],Q=Array.prototype.indexOf.call(N,_,void 0),re;(re=Q>=0)&&Array.prototype.splice.call(N,Q,1),re&&(ge(_),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Te(h,_,T,N){for(let Q=0;Q<h.length;++Q){const re=h[Q];if(!re.da&&re.listener==_&&re.capture==!!T&&re.ha==N)return Q}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Ke={};function ot(h,_,T,N,Q){if(Array.isArray(_)){for(let re=0;re<_.length;re++)ot(h,_[re],T,N,Q);return null}return T=Re(T),h&&h[Se]?h.J(_,T,d(N)?!!N.capture:!1,Q):Yt(h,_,T,!1,N,Q)}function Yt(h,_,T,N,Q,re){if(!_)throw Error("Invalid event type");const be=d(Q)?!!Q.capture:!!Q;let Ze=_e(h);if(Ze||(h[Ue]=Ze=new ce(h)),T=Ze.add(_,T,N,be,re),T.proxy)return T;if(N=In(),T.proxy=N,N.src=h,N.listener=T,h.addEventListener)M||(Q=be),Q===void 0&&(Q=!1),h.addEventListener(_.toString(),N,Q);else if(h.attachEvent)h.attachEvent(Qt(_.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function In(){function h(T){return _.call(h.src,h.listener,T)}const _=ne;return h}function Et(h,_,T,N,Q){if(Array.isArray(_))for(var re=0;re<_.length;re++)Et(h,_[re],T,N,Q);else N=d(N)?!!N.capture:!!N,T=Re(T),h&&h[Se]?(h=h.i,re=String(_).toString(),re in h.g&&(_=h.g[re],T=Te(_,T,N,Q),T>-1&&(ge(_[T]),Array.prototype.splice.call(_,T,1),_.length==0&&(delete h.g[re],h.h--)))):h&&(h=_e(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Te(_,T,N,Q)),(T=h>-1?_[h]:null)&&bn(T))}function bn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Se])ye(_.i,h);else{var T=h.type,N=h.proxy;_.removeEventListener?_.removeEventListener(T,N,h.capture):_.detachEvent?_.detachEvent(Qt(T),N):_.addListener&&_.removeListener&&_.removeListener(N),(T=_e(_))?(ye(T,h),T.h==0&&(T.src=null,_[Ue]=null)):ge(h)}}}function Qt(h){return h in Ke?Ke[h]:Ke[h]="on"+h}function ne(h,_){if(h.da)h=!0;else{_=new pe(_,this);const T=h.listener,N=h.ha||h.src;h.fa&&bn(h),h=T.call(N,_)}return h}function _e(h){return h=h[Ue],h instanceof ce?h:null}var Le="__closure_events_fn_"+(Math.random()*1e9>>>0);function Re(h){return typeof h=="function"?h:(h[Le]||(h[Le]=function(_){return h.handleEvent(_)}),h[Le])}function we(){O.call(this),this.i=new ce(this),this.M=this,this.G=null}E(we,O),we.prototype[Se]=!0,we.prototype.removeEventListener=function(h,_,T,N){Et(this,h,_,T,N)};function Fe(h,_){var T,N=h.G;if(N)for(T=[];N;N=N.G)T.push(N);if(h=h.M,N=_.type||_,typeof _=="string")_=new x(_,h);else if(_ instanceof x)_.target=_.target||h;else{var Q=_;_=new x(N,h),oe(_,Q)}Q=!0;let re,be;if(T)for(be=T.length-1;be>=0;be--)re=_.g=T[be],Q=Lt(re,N,!0,_)&&Q;if(re=_.g=h,Q=Lt(re,N,!0,_)&&Q,Q=Lt(re,N,!1,_)&&Q,T)for(be=0;be<T.length;be++)re=_.g=T[be],Q=Lt(re,N,!1,_)&&Q}we.prototype.N=function(){if(we.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const T=h.g[_];for(let N=0;N<T.length;N++)ge(T[N]);delete h.g[_],h.h--}}this.G=null},we.prototype.J=function(h,_,T,N){return this.i.add(String(h),_,!1,T,N)},we.prototype.K=function(h,_,T,N){return this.i.add(String(h),_,!0,T,N)};function Lt(h,_,T,N){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let Q=!0;for(let re=0;re<_.length;++re){const be=_[re];if(be&&!be.da&&be.capture==T){const Ze=be.listener,un=be.ha||be.src;be.fa&&ye(h.i,be),Q=Ze.call(un,N)!==!1&&Q}}return Q&&!N.defaultPrevented}function Rt(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function je(h){h.g=Rt(()=>{h.g=null,h.i&&(h.i=!1,je(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Ye extends O{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:je(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(h){O.call(this),this.h=h,this.g={}}E(Dt,O);var nr=[];function Qn(h){Pe(h.g,function(_,T){this.g.hasOwnProperty(T)&&bn(_)},h),h.g={}}Dt.prototype.N=function(){Dt.Z.N.call(this),Qn(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=c.JSON.stringify,Sn=c.JSON.parse,Is=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Ro(){}function Sa(){}var mr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ut(){x.call(this,"d")}E(Ut,x);function Xn(){x.call(this,"c")}E(Xn,x);var Xt={},Ds=null;function Aa(){return Ds=Ds||new we}Xt.Ia="serverreachability";function Ns(h){x.call(this,Xt.Ia,h)}E(Ns,x);function Wn(h){const _=Aa();Fe(_,new Ns(_))}Xt.STAT_EVENT="statevent";function gi(h,_){x.call(this,Xt.STAT_EVENT,h),this.stat=_}E(gi,x);function Wt(h){const _=Aa();Fe(_,new gi(_,h))}Xt.Ja="timingevent";function Vr(h,_){x.call(this,Xt.Ja,h),this.size=_}E(Vr,x);function pr(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function gr(){this.g=!0}gr.prototype.ua=function(){this.g=!1};function Co(h,_,T,N,Q,re){h.info(function(){if(h.g)if(re){var be="",Ze=re.split("&");for(let bt=0;bt<Ze.length;bt++){var un=Ze[bt].split("=");if(un.length>1){const Jt=un[0];un=un[1];const Ur=Jt.split("_");be=Ur.length>=2&&Ur[1]=="type"?be+(Jt+"="+un+"&"):be+(Jt+"=redacted&")}}}else be=null;else be=re;return"XMLHTTP REQ ("+N+") [attempt "+Q+"]: "+_+`
`+T+`
`+be})}function Hi(h,_,T,N,Q,re,be){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+Q+"]: "+_+`
`+T+`
`+re+" "+be})}function Jn(h,_,T,N){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Zl(h,T)+(N?" "+N:"")})}function yi(h,_){h.info(function(){return"TIMEOUT: "+_})}gr.prototype.info=function(){};function Zl(h,_){if(!h.g)return _;if(!_)return null;try{const re=JSON.parse(_);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var T=re[h];if(!(T.length<2)){var N=T[1];if(Array.isArray(N)&&!(N.length<1)){var Q=N[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let be=1;be<N.length;be++)N[be]=""}}}}return an(re)}catch{return _}}var qi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},V={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},q;function J(){}E(J,Ro),J.prototype.g=function(){return new XMLHttpRequest},q=new J;function me(h){return encodeURIComponent(String(h))}function ve(h){var _=1;h=h.split(":");const T=[];for(;_>0&&h.length;)T.push(h.shift()),_--;return h.length&&T.push(h.join(":")),T}function Ie(h,_,T,N){this.j=h,this.i=_,this.l=T,this.S=N||1,this.V=new Dt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}var Ee={},Ae={};function Ne(h,_,T){h.M=1,h.A=xs(xt(_)),h.u=T,h.R=!0,qe(h,null)}function qe(h,_){h.F=Date.now(),Nt(h),h.B=xt(h.A);var T=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),Do(T.i,"t",N),h.C=0,T=h.j.L,h.h=new xe,h.g=uh(h.j,T?_:null,!h.u),h.P>0&&(h.O=new Ye(g(h.Y,h,h.g),h.P)),_=h.V,T=h.g,N=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(nr[0]=Q.toString()),Q=nr);for(let re=0;re<Q.length;re++){const be=ot(T,Q[re],N||_.handleEvent,!1,_.h||_);if(!be)break;_.g[be.key]=be}_=h.J?U(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),Wn(),Co(h.i,h.v,h.B,h.l,h.S,h.u)}Ie.prototype.ba=function(h){h=h.target;const _=this.O;_&&ri(h)==3?_.j():this.Y(h)},Ie.prototype.Y=function(h){try{if(h==this.g)e:{const Ze=ri(this.g),un=this.g.ya(),bt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||On(this.g)))){this.K||Ze!=4||un==7||(un==8||bt<=0?Wn(3):Wn(2)),zt(this);var _=this.g.ca();this.X=_;var T=ke(this);if(this.o=_==200,Hi(this.i,this.v,this.B,this.l,this.S,Ze,_),this.o){if(this.U&&!this.L){t:{if(this.g){var N,Q=this.g;if((N=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(N)){var re=N;break t}}re=null}if(h=re)Jn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Dn(this,h);else{this.o=!1,this.m=3,Wt(12),Bt(this),tt(this);break e}}if(this.R){h=!0;let Jt;for(;!this.K&&this.C<T.length;)if(Jt=it(this,T),Jt==Ae){Ze==4&&(this.m=4,Wt(14),h=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Ee){this.m=4,Wt(15),Jn(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Jn(this.i,this.l,Jt,null),Dn(this,Jt);if(Qe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||T.length!=0||this.h.h||(this.m=1,Wt(16),h=!1),this.o=this.o&&h,!h)Jn(this.i,this.l,T,"[Invalid Chunked Response]"),Bt(this),tt(this);else if(T.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),lu(be),be.P=!0,Wt(11))}}else Jn(this.i,this.l,T,null),Dn(this,T);Ze==4&&Bt(this),this.o&&!this.K&&(Ze==4?ah(this.j,this):(this.o=!1,Nt(this)))}else $i(this.g),_==400&&T.indexOf("Unknown SID")>0?(this.m=3,Wt(12)):(this.m=0,Wt(13)),Bt(this),tt(this)}}}catch{}finally{}};function ke(h){if(!Qe(h))return h.g.la();const _=On(h.g);if(_==="")return"";let T="";const N=_.length,Q=ri(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Bt(h),tt(h),"";h.h.i=new c.TextDecoder}for(let re=0;re<N;re++)h.h.h=!0,T+=h.h.i.decode(_[re],{stream:!(Q&&re==N-1)});return _.length=0,h.h.g+=T,h.C=0,h.h.g}function Qe(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function it(h,_){var T=h.C,N=_.indexOf(`
`,T);return N==-1?Ae:(T=Number(_.substring(T,N)),isNaN(T)?Ee:(N+=1,N+T>_.length?Ae:(_=_.slice(N,N+T),h.C=N+T,_)))}Ie.prototype.cancel=function(){this.K=!0,Bt(this)};function Nt(h){h.T=Date.now()+h.H,qt(h,h.H)}function qt(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=pr(g(h.aa,h),_)}function zt(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Ie.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(yi(this.i,this.B),this.M!=2&&(Wn(),Wt(17)),Bt(this),this.m=2,tt(this)):qt(this,this.T-h)};function tt(h){h.j.I==0||h.K||ah(h.j,h)}function Bt(h){zt(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Qn(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Dn(h,_){try{var T=h.j;if(T.I!=0&&(T.g==h||Fn(T.h,h))){if(!h.L&&Fn(T.h,h)&&T.I==3){try{var N=T.Ba.g.parse(_)}catch{N=null}if(Array.isArray(N)&&N.length==3){var Q=N;if(Q[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Po(T),Oa(T);else break e;Us(T),Wt(18)}}else T.xa=Q[1],0<T.xa-T.K&&Q[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=pr(g(T.Va,T),6e3));ir(T.h)<=1&&T.ta&&(T.ta=void 0)}else wi(T,11)}else if((h.L||T.g==h)&&Po(T),!D(_))for(Q=T.Ba.g.parse(_),_=0;_<Q.length;_++){let bt=Q[_];const Jt=bt[0];if(!(Jt<=T.K))if(T.K=Jt,bt=bt[1],T.I==2)if(bt[0]=="c"){T.M=bt[1],T.ba=bt[2];const Ur=bt[3];Ur!=null&&(T.ka=Ur,T.j.info("VER="+T.ka));const Ri=bt[4];Ri!=null&&(T.za=Ri,T.j.info("SVER="+T.za));const ii=bt[5];ii!=null&&typeof ii=="number"&&ii>0&&(N=1.5*ii,T.O=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const ai=h.g;if(ai){const js=ai.g?ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(js){var re=N.h;re.g||js.indexOf("spdy")==-1&&js.indexOf("quic")==-1&&js.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(yr(re,re.h),re.h=null))}if(N.G){const Vo=ai.g?ai.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(N.wa=Vo,Tt(N.J,N.G,Vo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),N=T;var be=h;if(N.na=lh(N,N.L?N.ba:null,N.W),be.L){_i(N.h,be);var Ze=be,un=N.O;un&&(Ze.H=un),Ze.D&&(zt(Ze),Nt(Ze)),N.g=be}else rh(N);T.i.length>0&&Ai(T)}else bt[0]!="stop"&&bt[0]!="close"||wi(T,7);else T.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?wi(T,7):su(T):bt[0]!="noop"&&T.l&&T.l.qa(bt),T.A=0)}}Wn(4)}catch{}}var Ft=class{constructor(h,_){this.g=h,this.map=_}};function rr(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ir(h){return h.h?1:h.g?h.g.size:0}function Fn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function yr(h,_){h.g?h.g.add(_):h.h=_}function _i(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}rr.prototype.cancel=function(){if(this.i=vi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function vi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const T of h.g.values())_=_.concat(T.G);return _}return R(h.i)}var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function en(h,_){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const N=h[T].indexOf("=");let Q,re=null;N>=0?(Q=h[T].substring(0,N),re=h[T].substring(N+1)):Q=h[T],_(Q,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function mn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof mn?(this.l=h.l,nt(this,h.j),this.o=h.o,this.g=h.g,_r(this,h.u),this.h=h.h,wa(this,th(h.i)),this.m=h.m):h&&(_=String(h).match(st))?(this.l=!1,nt(this,_[1]||"",!0),this.o=Ei(_[2]||""),this.g=Ei(_[3]||"",!0),_r(this,_[4]),this.h=Ei(_[5]||"",!0),wa(this,_[6]||"",!0),this.m=Ei(_[7]||"")):(this.l=!1,this.i=new Ca(null,this.l))}mn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Os(_,Io,!0),":");var T=this.g;return(T||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Os(_,Io,!0),"@"),h.push(me(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Os(T,T.charAt(0)=="/"?eu:Jc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Os(T,Zc)),h.join("")},mn.prototype.resolve=function(h){const _=xt(this);let T=!!h.j;T?nt(_,h.j):T=!!h.o,T?_.o=h.o:T=!!h.g,T?_.g=h.g:T=h.u!=null;var N=h.h;if(T)_r(_,h.u);else if(T=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var Q=_.h.lastIndexOf("/");Q!=-1&&(N=_.h.slice(0,Q+1)+N)}if(Q=N,Q==".."||Q==".")N="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){N=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const re=[];for(let be=0;be<Q.length;){const Ze=Q[be++];Ze=="."?N&&be==Q.length&&re.push(""):Ze==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),N&&be==Q.length&&re.push("")):(re.push(Ze),N=!0)}N=re.join("/")}else N=Q}return T?_.h=N:T=h.i.toString()!=="",T?wa(_,th(h.i)):T=!!h.m,T&&(_.m=h.m),_};function xt(h){return new mn(h)}function nt(h,_,T){h.j=T?Ei(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function _r(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function wa(h,_,T){_ instanceof Ca?(h.i=_,No(h.i,h.l)):(T||(_=Os(_,Ra)),h.i=new Ca(_,h.l))}function Tt(h,_,T){h.i.set(_,T)}function xs(h){return Tt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ei(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Os(h,_,T){return typeof h=="string"?(h=encodeURI(h).replace(_,ar),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ar(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Io=/[#\/\?@]/g,Jc=/[#\?:]/g,eu=/[#\?]/g,Ra=/[#\?@]/g,Zc=/#/g;function Ca(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function sr(h){h.g||(h.g=new Map,h.h=0,h.i&&en(h.i,function(_,T){h.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}n=Ca.prototype,n.add=function(h,_){sr(this),this.i=null,h=Ia(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(_),this.h+=1,this};function eh(h,_){sr(h),_=Ia(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function tu(h,_){return sr(h),_=Ia(h,_),h.g.has(_)}n.forEach=function(h,_){sr(this),this.g.forEach(function(T,N){T.forEach(function(Q){h.call(_,Q,N,this)},this)},this)};function nu(h,_){sr(h);let T=[];if(typeof _=="string")tu(h,_)&&(T=T.concat(h.g.get(Ia(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)T=T.concat(h[_]);return T}n.set=function(h,_){return sr(this),this.i=null,h=Ia(this,h),tu(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=nu(this,h),h.length>0?String(h[0]):_):_};function Do(h,_,T){eh(h,_),T.length>0&&(h.i=null,h.g.set(Ia(h,_),R(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let N=0;N<_.length;N++){var T=_[N];const Q=me(T);T=nu(this,T);for(let re=0;re<T.length;re++){let be=Q;T[re]!==""&&(be+="="+me(T[re])),h.push(be)}}return this.i=h.join("&")};function th(h){const _=new Ca;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Ia(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function No(h,_){_&&!h.j&&(sr(h),h.i=null,h.g.forEach(function(T,N){const Q=N.toLowerCase();N!=Q&&(eh(this,N),Do(this,Q,T))},h)),h.j=_}function ti(h,_){const T=new gr;if(c.Image){const N=new Image;N.onload=y(kr,T,"TestLoadImage: loaded",!0,_,N),N.onerror=y(kr,T,"TestLoadImage: error",!1,_,N),N.onabort=y(kr,T,"TestLoadImage: abort",!1,_,N),N.ontimeout=y(kr,T,"TestLoadImage: timeout",!1,_,N),c.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else _(!1)}function ru(h,_){const T=new gr,N=new AbortController,Q=setTimeout(()=>{N.abort(),kr(T,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:N.signal}).then(re=>{clearTimeout(Q),re.ok?kr(T,"TestPingServer: ok",!0,_):kr(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Q),kr(T,"TestPingServer: error",!1,_)})}function kr(h,_,T,N,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),N(T)}catch{}}function Da(){this.g=new Is}function Ti(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ti,Ro),Ti.prototype.g=function(){return new Ms(this.i,this.h)};function Ms(h,_){we.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ms,we),n=Ms.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,ni(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Na(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function xo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Na(this):ni(this),this.readyState==3&&xo(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Na(this))},n.Na=function(h){this.g&&(this.response=h,Na(this))},n.ga=function(){this.g&&Na(this)};function Na(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ni(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=_.next();return h.join(`\r
`)};function ni(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ms.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Lr(h){let _="";return Pe(h,function(T,N){_+=N,_+=":",_+=T,_+=`\r
`}),_}function Ps(h,_,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=Lr(T),typeof h=="string"?T!=null&&me(T):Tt(h,_,T))}function Ot(h){we.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Ot,we);var bi=/^https?$/i,iu=["POST","PUT"];n=Ot.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():q.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(re){Vs(this,re);return}if(h=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var Q in N)T.set(Q,N[Q]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const re of N.keys())T.set(re,N.get(re));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),Q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(iu,_,void 0)>=0)||N||Q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,be]of T)this.g.setRequestHeader(re,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Vs(this,re)}};function Vs(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,au(h),Gi(h)}function au(h){h.A||(h.A=!0,Fe(h,"complete"),Fe(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Fe(this,"complete"),Fe(this,"abort"),Gi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),Ot.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ks(this):this.Xa())},n.Xa=function(){ks(this)};function ks(h){if(h.h&&typeof l<"u"){if(h.v&&ri(h)==4)setTimeout(h.Ca.bind(h),0);else if(Fe(h,"readystatechange"),ri(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var N;if(N=re===0){let be=String(h.D).match(st)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),N=!bi.test(be?be.toLowerCase():"")}T=N}if(T)Fe(h,"complete"),Fe(h,"success");else{h.o=6;try{var Q=ri(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",au(h)}}finally{Gi(h)}}}}function Gi(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,_||Fe(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ri(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ri(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Sn(_)}};function On(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function $i(h){const _={};h=(h.g&&ri(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(D(h[N]))continue;var T=ve(h[N]);const Q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=_[Q]||[];_[Q]=re,re.push(T)}Me(_,function(N){return N.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(h,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||_}function xa(h){this.za=0,this.i=[],this.j=new gr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,h),this.Za=Si("retryDelaySeedMs",1e4,h),this.Ta=Si("forwardChannelMaxRetries",2,h),this.va=Si("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new rr(h&&h.concurrentRequestLimit),this.Ba=new Da,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=xa.prototype,n.ka=8,n.I=1,n.connect=function(h,_,T,N){Wt(0),this.W=h,this.H=_||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.J=lh(this,null,this.W),Ai(this)};function su(h){if(Oo(h),h.I==3){var _=h.V++,T=xt(h.J);if(Tt(T,"SID",h.M),Tt(T,"RID",_),Tt(T,"TYPE","terminate"),Ls(h,T),_=new Ie(h,h.j,_),_.M=2,_.A=xs(xt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=_.A,T=!0),T||(_.g=uh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Nt(_)}oh(h)}function Oa(h){h.g&&(lu(h),h.g.cancel(),h.g=null)}function Oo(h){Oa(h),h.v&&(c.clearTimeout(h.v),h.v=null),Po(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ai(h){if(!Bn(h.h)&&!h.m){h.m=!0;var _=h.Ea;ae||w(),te||(ae(),te=!0),S.add(_,h),h.D=0}}function Mo(h,_){return ir(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=pr(g(h.Ea,h,_),sh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new Ie(this,this.j,h);let re=this.o;if(this.U&&(re?(re=U(re),oe(re,this.U)):re=this.U),this.u!==null||this.R||(Q.J=re,re=null),this.S)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(_+=N,_>4096){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=nh(this,Q,_),T=xt(this.J),Tt(T,"RID",h),Tt(T,"CVER",22),this.G&&Tt(T,"X-HTTP-Session-Id",this.G),Ls(this,T),re&&(this.R?_="headers="+me(Lr(re))+"&"+_:this.u&&Ps(T,this.u,re)),yr(this.h,Q),this.Ra&&Tt(T,"TYPE","init"),this.S?(Tt(T,"$req",_),Tt(T,"SID","null"),Q.U=!0,Ne(Q,T,null)):Ne(Q,T,_),this.I=2}}else this.I==3&&(h?ou(this,h):this.i.length==0||Bn(this.h)||ou(this))};function ou(h,_){var T;_?T=_.l:T=h.V++;const N=xt(h.J);Tt(N,"SID",h.M),Tt(N,"RID",T),Tt(N,"AID",h.K),Ls(h,N),h.u&&h.o&&Ps(N,h.u,h.o),T=new Ie(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),_&&(h.i=_.G.concat(h.i)),_=nh(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),yr(h.h,T),Ne(T,N,_)}function Ls(h,_){h.H&&Pe(h.H,function(T,N){Tt(_,N,T)}),h.l&&Pe({},function(T,N){Tt(_,N,T)})}function nh(h,_,T){T=Math.min(h.i.length,T);const N=h.l?g(h.l.Ka,h.l,h):null;e:{var Q=h.i;let Ze=-1;for(;;){const un=["count="+T];Ze==-1?T>0?(Ze=Q[0].g,un.push("ofs="+Ze)):Ze=0:un.push("ofs="+Ze);let bt=!0;for(let Jt=0;Jt<T;Jt++){var re=Q[Jt].g;const Ur=Q[Jt].map;if(re-=Ze,re<0)Ze=Math.max(0,Q[Jt].g-100),bt=!1;else try{re="req"+re+"_"||"";try{var be=Ur instanceof Map?Ur:Object.entries(Ur);for(const[Ri,ii]of be){let ai=ii;d(ii)&&(ai=an(ii)),un.push(re+Ri+"="+encodeURIComponent(ai))}}catch(Ri){throw un.push(re+"type="+encodeURIComponent("_badmap")),Ri}}catch{N&&N(Ur)}}if(bt){be=un.join("&");break e}}be=void 0}return h=h.i.splice(0,T),_.G=h,be}function rh(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;ae||w(),te||(ae(),te=!0),S.add(_,h),h.A=0}}function Us(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=pr(g(h.Da,h),sh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ih(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=pr(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Wt(10),Oa(this),ih(this))};function lu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ih(h){h.g=new Ie(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=xt(h.na);Tt(_,"RID","rpc"),Tt(_,"SID",h.M),Tt(_,"AID",h.K),Tt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&Tt(_,"TO",h.ia),Tt(_,"TYPE","xmlhttp"),Ls(h,_),h.u&&h.o&&Ps(_,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=xs(xt(_)),T.u=null,T.R=!0,qe(T,h)}n.Va=function(){this.C!=null&&(this.C=null,Oa(this),Us(this),Wt(19))};function Po(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function ah(h,_){var T=null;if(h.g==_){Po(h),lu(h),h.g=null;var N=2}else if(Fn(h.h,_))T=_.G,_i(h.h,_),N=1;else return;if(h.I!=0){if(_.o)if(N==1){T=_.u?_.u.length:0,_=Date.now()-_.F;var Q=h.D;N=Aa(),Fe(N,new Vr(N,T)),Ai(h)}else rh(h);else if(Q=_.m,Q==3||Q==0&&_.X>0||!(N==1&&Mo(h,_)||N==2&&Us(h)))switch(T&&T.length>0&&(_=h.h,_.i=_.i.concat(T)),Q){case 1:wi(h,5);break;case 4:wi(h,10);break;case 3:wi(h,6);break;default:wi(h,2)}}}function sh(h,_){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*_}function wi(h,_){if(h.j.info("Error code "+_),_==2){var T=g(h.bb,h),N=h.Ua;const Q=!N;N=new mn(N||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||nt(N,"https"),xs(N),Q?ti(N.toString(),T):ru(N.toString(),T)}else Wt(2);h.I=0,h.l&&h.l.pa(_),oh(h),Oo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function oh(h){if(h.I=0,h.ja=[],h.l){const _=vi(h.h);(_.length!=0||h.i.length!=0)&&(k(h.ja,_),k(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function lh(h,_,T){var N=T instanceof mn?xt(T):new mn(T);if(N.g!="")_&&(N.g=_+"."+N.g),_r(N,N.u);else{var Q=c.location;N=Q.protocol,_=_?_+"."+Q.hostname:Q.hostname,Q=+Q.port;const re=new mn(null);N&&nt(re,N),_&&(re.g=_),Q&&_r(re,Q),T&&(re.h=T),N=re}return T=h.G,_=h.wa,T&&_&&Tt(N,T,_),Tt(N,"VER",h.ka),Ls(h,N),N}function uh(h,_,T){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new Ot(new Ti({ab:T})):new Ot(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ch(){}n=ch.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ma(){}Ma.prototype.g=function(h,_){return new Zn(h,_)};function Zn(h,_){we.call(this),this.g=new xa(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!D(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!D(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Ki(this)}E(Zn,we),Zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){su(this.g)},Zn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=an(h),h=T);_.i.push(new Ft(_.Ya++,h)),_.I==3&&Ai(_)},Zn.prototype.N=function(){this.g.l=null,delete this.j,su(this.g),delete this.g,Zn.Z.N.call(this)};function hh(h){Ut.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const T in _){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}E(hh,Ut);function fh(){Xn.call(this),this.status=1}E(fh,Xn);function Ki(h){this.g=h}E(Ki,ch),Ki.prototype.ra=function(){Fe(this.g,"a")},Ki.prototype.qa=function(h){Fe(this.g,new hh(h))},Ki.prototype.pa=function(h){Fe(this.g,new fh)},Ki.prototype.oa=function(){Fe(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,KA=function(){return new Ma},$A=function(){return Aa()},GA=Xt,Jg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qi.NO_ERROR=0,qi.TIMEOUT=8,qi.HTTP_ERROR=6,Pf=qi,V.COMPLETE="complete",qA=V,Sa.EventType=mr,mr.OPEN="a",mr.CLOSE="b",mr.ERROR="c",mr.MESSAGE="d",we.prototype.listen=we.prototype.J,Zu=Sa,Ot.prototype.listenOnce=Ot.prototype.K,Ot.prototype.getLastError=Ot.prototype.Ha,Ot.prototype.getLastErrorCode=Ot.prototype.ya,Ot.prototype.getStatus=Ot.prototype.ca,Ot.prototype.getResponseJson=Ot.prototype.La,Ot.prototype.getResponseText=Ot.prototype.la,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Fa,HA=Ot}).apply(typeof Ef<"u"?Ef:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$n.UNAUTHENTICATED=new $n(null),$n.GOOGLE_CREDENTIALS=new $n("google-credentials-uid"),$n.FIRST_PARTY=new $n("first-party-uid"),$n.MOCK_USER=new $n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l="12.8.0";function tO(n){$l=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new Uy("@firebase/firestore");function gl(){return go.logLevel}function De(n,...e){if(go.logLevel<=dt.DEBUG){const t=e.map(By);go.debug(`Firestore (${$l}): ${n}`,...t)}}function ya(n,...e){if(go.logLevel<=dt.ERROR){const t=e.map(By);go.error(`Firestore (${$l}): ${n}`,...t)}}function Ol(n,...e){if(go.logLevel<=dt.WARN){const t=e.map(By);go.warn(`Firestore (${$l}): ${n}`,...t)}}function By(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,YA(n,a,t)}function YA(n,e,t){let a=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw ya(a),new Error(a)}function wt(n,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,n||YA(e,s,a)}function Je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends ba{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($n.UNAUTHENTICATED)))}shutdown(){}}class rO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class iO{constructor(e){this.t=e,this.currentUser=$n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(this.o===void 0,42304);let a=this.i;const s=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let l=new ma;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ma,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await s(this.currentUser)}))},d=p=>{De("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(De("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ma)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(De("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(wt(typeof a.accessToken=="string",31837,{l:a}),new QA(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new $n(e)}}class aO{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=$n.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class sO{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new aO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class o0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ui(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){wt(this.o===void 0,3512);const a=l=>{l.error!=null&&De("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,De("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const s=l=>{De("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):De("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new o0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(wt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new o0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=lO(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function mt(n,e){return n<e?-1:n>e?1:0}function Zg(n,e){const t=Math.min(n.length,e.length);for(let a=0;a<t;a++){const s=n.charAt(a),l=e.charAt(a);if(s!==l)return Dg(s)===Dg(l)?mt(s,l):Dg(s)?1:-1}return mt(n.length,e.length)}const uO=55296,cO=57343;function Dg(n){const e=n.charCodeAt(0);return e>=uO&&e<=cO}function Ml(n,e,t){return n.length===e.length&&n.every(((a,s)=>t(a,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="__name__";class xi{constructor(e,t,a){t===void 0?t=0:t>e.length&&Ge(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Ge(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return xi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=xi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return mt(e.length,t.length)}static compareSegments(e,t){const a=xi.isNumericId(e),s=xi.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?xi.extractNumericId(e).compare(xi.extractNumericId(t)):Zg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ps.fromString(e.substring(4,e.length-2))}}class Ht extends xi{construct(e,t,a){return new Ht(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Ce(ue.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((s=>s.length>0)))}return new Ht(t)}static emptyPath(){return new Ht([])}}const hO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends xi{construct(e,t,a){return new jn(e,t,a)}static isValidIdentifier(e){return hO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===l0}static keyField(){return new jn([l0])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new Ce(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Ce(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ce(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(a+=d,s++):(l(),s++)}if(l(),c)throw new Ce(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(t)}static emptyPath(){return new jn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Ht.fromString(e))}static fromName(e){return new Be(Ht.fromString(e).popFirst(5))}static empty(){return new Be(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(n,e,t){if(!t)throw new Ce(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fO(n,e,t,a){if(e===!0&&a===!0)throw new Ce(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function u0(n){if(!Be.isDocumentKey(n))throw new Ce(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function c0(n){if(Be.isDocumentKey(n))throw new Ce(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ud(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ge(12329,{type:typeof n})}function xr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ud(n);throw new Ce(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(n,e){const t={typeString:n};return e&&(t.value=e),t}function kc(n,e){if(!WA(n))throw new Ce(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const s=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){t=`JSON missing required field: '${a}'`;break}const c=n[a];if(s&&typeof c!==s){t=`JSON field '${a}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new Ce(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=-62135596800,f0=1e6;class Kt{static now(){return Kt.fromMillis(Date.now())}static fromDate(e){return Kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*f0);return new Kt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<h0)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/f0}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kc(e,Kt._jsonSchema))return new Kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-h0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Kt._jsonSchemaVersion="firestore/timestamp/1.0",Kt._jsonSchema={type:Tn("string",Kt._jsonSchemaVersion),seconds:Tn("number"),nanoseconds:Tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Kt(0,0))}static max(){return new Xe(new Kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=-1;function dO(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,s=Xe.fromTimestamp(a===1e9?new Kt(t+1,0):new Kt(t,a));return new vs(s,Be.empty(),e)}function mO(n){return new vs(n.readTime,n.key,vc)}class vs{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new vs(Xe.min(),Be.empty(),vc)}static max(){return new vs(Xe.max(),Be.empty(),vc)}}function pO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(n.documentKey,e.documentKey),t!==0?t:mt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==gO)throw n;De("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de(((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):de.reject(t)}static resolve(e){return new de(((t,a)=>{t(e)}))}static reject(e){return new de(((t,a)=>{a(e)}))}static waitFor(e){return new de(((t,a)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(p=>a(p)))})),c=!0,l===s&&t()}))}static or(e){let t=de.resolve(!1);for(const a of e)t=t.next((s=>s?de.resolve(s):a()));return t}static forEach(e,t){const a=[];return e.forEach(((s,l)=>{a.push(t.call(this,s,l))})),this.waitFor(a)}static mapArray(e,t){return new de(((a,s)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((y=>{c[g]=y,++d,d===l&&a(c)}),(y=>s(y)))}}))}static doWhile(e,t){return new de(((a,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):a()};l()}))}}function _O(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=-1;function zd(n){return n==null}function id(n){return n===0&&1/n==-1/0}function vO(n){return typeof n=="number"&&Number.isInteger(n)&&!id(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="";function EO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=d0(e)),e=TO(n.get(t),e);return d0(e)}function TO(n,e){let t=e;const a=n.length;for(let s=0;s<a;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case JA:t+="";break;default:t+=l}}return t}function d0(n){return n+JA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t){this.comparator=e,this.root=t||Un.EMPTY}insert(e,t){return new rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tf(this.root,e,this.comparator,!0)}}class Tf{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Un{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??Un.RED,this.left=s??Un.EMPTY,this.right=l??Un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new Un(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Un.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new Un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new p0(this.data.getIterator())}getIteratorFrom(e){return new p0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class p0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new Ir([])}unionWith(e){let t=new wn(jn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Ir(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ml(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new ew("Invalid base64 string: "+l):l}})(e);return new zn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new zn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zn.EMPTY_BYTE_STRING=new zn("");const bO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(n){if(wt(!!n,39018),typeof n=="string"){let e=0;const t=bO.exec(n);if(wt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:fn(n.seconds),nanos:fn(n.nanos)}}function fn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ts(n){return typeof n=="string"?zn.fromBase64String(n):zn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="server_timestamp",nw="__type__",rw="__previous_value__",iw="__local_write_time__";function qy(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[nw])==null?void 0:a.stringValue)===tw}function Bd(n){const e=n.mapValue.fields[rw];return qy(e)?Bd(e):e}function Ec(n){const e=Es(n.mapValue.fields[iw].timestampValue);return new Kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,t,a,s,l,c,d,p,g,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=y,this.apiKey=E}}const ad="(default)";class Tc{constructor(e,t){this.projectId=e,this.database=t||ad}static empty(){return new Tc("","")}get isDefaultDatabase(){return this.database===ad}isEqual(e){return e instanceof Tc&&e.projectId===this.projectId&&e.database===this.database}}function AO(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Ce(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="__type__",wO="__max__",bf={mapValue:{}},sw="__vector__",sd="value";function bs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qy(n)?4:CO(n)?9007199254740991:RO(n)?10:11:Ge(28295,{value:n})}function zi(n,e){if(n===e)return!0;const t=bs(n);if(t!==bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ec(n).isEqual(Ec(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=Es(s.timestampValue),d=Es(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return Ts(s.bytesValue).isEqual(Ts(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return fn(s.geoPointValue.latitude)===fn(l.geoPointValue.latitude)&&fn(s.geoPointValue.longitude)===fn(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return fn(s.integerValue)===fn(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=fn(s.doubleValue),d=fn(l.doubleValue);return c===d?id(c)===id(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Ml(n.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if(m0(c)!==m0(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!zi(c[p],d[p])))return!1;return!0})(n,e);default:return Ge(52216,{left:n})}}function bc(n,e){return(n.values||[]).find((t=>zi(t,e)))!==void 0}function Pl(n,e){if(n===e)return 0;const t=bs(n),a=bs(e);if(t!==a)return mt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return mt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=fn(l.integerValue||l.doubleValue),p=fn(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return g0(n.timestampValue,e.timestampValue);case 4:return g0(Ec(n),Ec(e));case 5:return Zg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=Ts(l),p=Ts(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const y=mt(d[g],p[g]);if(y!==0)return y}return mt(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=mt(fn(l.latitude),fn(c.latitude));return d!==0?d:mt(fn(l.longitude),fn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return y0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var b,R,k,z;const d=l.fields||{},p=c.fields||{},g=(b=d[sd])==null?void 0:b.arrayValue,y=(R=p[sd])==null?void 0:R.arrayValue,E=mt(((k=g==null?void 0:g.values)==null?void 0:k.length)||0,((z=y==null?void 0:y.values)==null?void 0:z.length)||0);return E!==0?E:y0(g,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===bf.mapValue&&c===bf.mapValue)return 0;if(l===bf.mapValue)return 1;if(c===bf.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},y=Object.keys(g);p.sort(),y.sort();for(let E=0;E<p.length&&E<y.length;++E){const b=Zg(p[E],y[E]);if(b!==0)return b;const R=Pl(d[p[E]],g[y[E]]);if(R!==0)return R}return mt(p.length,y.length)})(n.mapValue,e.mapValue);default:throw Ge(23264,{he:t})}}function g0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return mt(n,e);const t=Es(n),a=Es(e),s=mt(t.seconds,a.seconds);return s!==0?s:mt(t.nanos,a.nanos)}function y0(n,e){const t=n.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=Pl(t[s],a[s]);if(l)return l}return mt(t.length,a.length)}function Vl(n){return ey(n)}function ey(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const a=Es(t);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ts(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=ey(l);return a+"]"})(n.arrayValue):"mapValue"in n?(function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of a)l?l=!1:s+=",",s+=`${c}:${ey(t.fields[c])}`;return s+"}"})(n.mapValue):Ge(61005,{value:n})}function Vf(n){switch(bs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bd(n);return e?16+Vf(e):16;case 5:return 2*n.stringValue.length;case 6:return Ts(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((s,l)=>s+Vf(l)),0)})(n.arrayValue);case 10:case 11:return(function(a){let s=0;return Rs(a.fields,((l,c)=>{s+=l.length+Vf(c)})),s})(n.mapValue);default:throw Ge(13486,{value:n})}}function _0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ty(n){return!!n&&"integerValue"in n}function Gy(n){return!!n&&"arrayValue"in n}function v0(n){return!!n&&"nullValue"in n}function E0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kf(n){return!!n&&"mapValue"in n}function RO(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[aw])==null?void 0:a.stringValue)===sw}function oc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Rs(n.mapValue.fields,((t,a)=>e.mapValue.fields[t]=oc(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oc(n.arrayValue.values[t]);return e}return{...n}}function CO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===wO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!kf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(t)}setAll(e){let t=jn.emptyPath(),a={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,a,s),a={},s=[],t=d.popLast()}c?a[d.lastSegment()]=oc(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];kf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){Rs(t,((s,l)=>e[s]=l));for(const s of a)delete e[s]}clone(){return new dr(oc(this.value))}}function ow(n){const e=[];return Rs(n.fields,((t,a)=>{const s=new jn([t]);if(kf(a)){const l=ow(a.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new Ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t,a,s,l,c,d){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Kn(e,0,Xe.min(),Xe.min(),Xe.min(),dr.empty(),0)}static newFoundDocument(e,t,a,s){return new Kn(e,1,t,Xe.min(),a,s,0)}static newNoDocument(e,t){return new Kn(e,2,t,Xe.min(),Xe.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new Kn(e,3,t,Xe.min(),Xe.min(),dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.position=e,this.inclusive=t}}function T0(n,e,t){let a=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?a=Be.comparator(Be.fromName(c.referenceValue),t.key):a=Pl(c,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function b0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t="asc"){this.field=e,this.dir=t}}function IO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{}class En extends lw{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new NO(e,t,a):t==="array-contains"?new MO(e,a):t==="in"?new PO(e,a):t==="not-in"?new VO(e,a):t==="array-contains-any"?new kO(e,a):new En(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new xO(e,a):new OO(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Pl(t,this.value)):t!==null&&bs(this.value)===bs(t)&&this.matchesComparison(Pl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mi extends lw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new mi(e,t)}matches(e){return uw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uw(n){return n.op==="and"}function cw(n){return DO(n)&&uw(n)}function DO(n){for(const e of n.filters)if(e instanceof mi)return!1;return!0}function ny(n){if(n instanceof En)return n.field.canonicalString()+n.op.toString()+Vl(n.value);if(cw(n))return n.filters.map((e=>ny(e))).join(",");{const e=n.filters.map((t=>ny(t))).join(",");return`${n.op}(${e})`}}function hw(n,e){return n instanceof En?(function(a,s){return s instanceof En&&a.op===s.op&&a.field.isEqual(s.field)&&zi(a.value,s.value)})(n,e):n instanceof mi?(function(a,s){return s instanceof mi&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce(((l,c,d)=>l&&hw(c,s.filters[d])),!0):!1})(n,e):void Ge(19439)}function fw(n){return n instanceof En?(function(t){return`${t.field.canonicalString()} ${t.op} ${Vl(t.value)}`})(n):n instanceof mi?(function(t){return t.op.toString()+" {"+t.getFilters().map(fw).join(" ,")+"}"})(n):"Filter"}class NO extends En{constructor(e,t,a){super(e,t,a),this.key=Be.fromName(a.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class xO extends En{constructor(e,t){super(e,"in",t),this.keys=dw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class OO extends En{constructor(e,t){super(e,"not-in",t),this.keys=dw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>Be.fromName(a.referenceValue)))}class MO extends En{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gy(t)&&bc(t.arrayValue,this.value)}}class PO extends En{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bc(this.value.arrayValue,t)}}class VO extends En{constructor(e,t){super(e,"not-in",t)}matches(e){if(bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bc(this.value.arrayValue,t)}}class kO extends En{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>bc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,t=null,a=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function S0(n,e=null,t=[],a=[],s=null,l=null,c=null){return new LO(n,e,t,a,s,l,c)}function $y(n){const e=Je(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>ny(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),zd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>Vl(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>Vl(a))).join(",")),e.Te=t}return e.Te}function Ky(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!IO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!b0(n.startAt,e.startAt)&&b0(n.endAt,e.endAt)}function ry(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t=null,a=[],s=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function UO(n,e,t,a,s,l,c,d){return new Lc(n,e,t,a,s,l,c,d)}function Fd(n){return new Lc(n)}function A0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jO(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function mw(n){return n.collectionGroup!==null}function lc(n){const e=Je(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new wn(jn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ld(l,a))})),t.has(jn.keyField().canonicalString())||e.Ie.push(new ld(jn.keyField(),a))}return e.Ie}function Vi(n){const e=Je(n);return e.Ee||(e.Ee=zO(e,lc(n))),e.Ee}function zO(n,e){if(n.limitType==="F")return S0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new ld(s.field,l)}));const t=n.endAt?new od(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new od(n.startAt.position,n.startAt.inclusive):null;return S0(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function iy(n,e){const t=n.filters.concat([e]);return new Lc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ay(n,e,t){return new Lc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hd(n,e){return Ky(Vi(n),Vi(e))&&n.limitType===e.limitType}function pw(n){return`${$y(Vi(n))}|lt:${n.limitType}`}function yl(n){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((s=>fw(s))).join(", ")}]`),zd(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>Vl(s))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>Vl(s))).join(",")),`Target(${a})`})(Vi(n))}; limitType=${n.limitType})`}function qd(n,e){return e.isFoundDocument()&&(function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):Be.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(n,e)&&(function(a,s){for(const l of lc(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(a,s){return!(a.startAt&&!(function(c,d,p){const g=T0(c,d,p);return c.inclusive?g<=0:g<0})(a.startAt,lc(a),s)||a.endAt&&!(function(c,d,p){const g=T0(c,d,p);return c.inclusive?g>=0:g>0})(a.endAt,lc(a),s))})(n,e)}function BO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gw(n){return(e,t)=>{let a=!1;for(const s of lc(n)){const l=FO(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function FO(n,e,t){const a=n.field.isKeyField()?Be.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Pl(p,g):Ge(42886)})(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return Ge(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,((t,a)=>{for(const[s,l]of a)e(s,l)}))}isEmpty(){return ZA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new rn(Be.comparator);function _a(){return HO}const yw=new rn(Be.comparator);function ec(...n){let e=yw;for(const t of n)e=e.insert(t.key,t);return e}function _w(n){let e=yw;return n.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function so(){return uc()}function vw(){return uc()}function uc(){return new bo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const qO=new rn(Be.comparator),GO=new wn(Be.comparator);function pt(...n){let e=GO;for(const t of n)e=e.add(t);return e}const $O=new wn(mt);function KO(){return $O}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:id(e)?"-0":e}}function Ew(n){return{integerValue:""+n}}function YO(n,e){return vO(e)?Ew(e):Yy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this._=void 0}}function QO(n,e,t){return n instanceof ud?(function(s,l){const c={fields:{[nw]:{stringValue:tw},[iw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&qy(l)&&(l=Bd(l)),l&&(c.fields[rw]=l),{mapValue:c}})(t,e):n instanceof Sc?bw(n,e):n instanceof Ac?Sw(n,e):(function(s,l){const c=Tw(s,l),d=w0(c)+w0(s.Ae);return ty(c)&&ty(s.Ae)?Ew(d):Yy(s.serializer,d)})(n,e)}function XO(n,e,t){return n instanceof Sc?bw(n,e):n instanceof Ac?Sw(n,e):t}function Tw(n,e){return n instanceof cd?(function(a){return ty(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class ud extends Gd{}class Sc extends Gd{constructor(e){super(),this.elements=e}}function bw(n,e){const t=Aw(e);for(const a of n.elements)t.some((s=>zi(s,a)))||t.push(a);return{arrayValue:{values:t}}}class Ac extends Gd{constructor(e){super(),this.elements=e}}function Sw(n,e){let t=Aw(e);for(const a of n.elements)t=t.filter((s=>!zi(s,a)));return{arrayValue:{values:t}}}class cd extends Gd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function w0(n){return fn(n.integerValue||n.doubleValue)}function Aw(n){return Gy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function WO(n,e){return n.field.isEqual(e.field)&&(function(a,s){return a instanceof Sc&&s instanceof Sc||a instanceof Ac&&s instanceof Ac?Ml(a.elements,s.elements,zi):a instanceof cd&&s instanceof cd?zi(a.Ae,s.Ae):a instanceof ud&&s instanceof ud})(n.transform,e.transform)}class JO{constructor(e,t){this.version=e,this.transformResults=t}}class Or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $d{}function ww(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Qy(n.key,Or.none()):new Uc(n.key,n.data,Or.none());{const t=n.data,a=dr.empty();let s=new wn(jn.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?a.delete(l):a.set(l,c),s=s.add(l)}return new Cs(n.key,a,new Ir(s.toArray()),Or.none())}}function ZO(n,e,t){n instanceof Uc?(function(s,l,c){const d=s.value.clone(),p=C0(s.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Cs?(function(s,l,c){if(!Lf(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=C0(s.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Rw(s)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function cc(n,e,t,a){return n instanceof Uc?(function(l,c,d,p){if(!Lf(l.precondition,c))return d;const g=l.value.clone(),y=I0(l.fieldTransforms,p,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,a):n instanceof Cs?(function(l,c,d,p){if(!Lf(l.precondition,c))return d;const g=I0(l.fieldTransforms,p,c),y=c.data;return y.setAll(Rw(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,a):(function(l,c,d){return Lf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function eM(n,e){let t=null;for(const a of n.fieldTransforms){const s=e.data.field(a.field),l=Tw(a.transform,s||null);l!=null&&(t===null&&(t=dr.empty()),t.set(a.field,l))}return t||null}function R0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&Ml(a,s,((l,c)=>WO(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Uc extends $d{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Cs extends $d{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Rw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}})),e}function C0(n,e,t){const a=new Map;wt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,d=e.data.field(l.field);a.set(l.field,XO(c,d,t[s]))}return a}function I0(n,e,t){const a=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);a.set(s.field,QO(l,c,e))}return a}class Qy extends $d{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tM extends $d{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&ZO(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=cc(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=cc(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=vw();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const p=ww(c,d);p!==null&&a.set(s.key,p),c.isValidDocument()||c.convertToNoDocument(Xe.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pt())}isEqual(e){return this.batchId===e.batchId&&Ml(this.mutations,e.mutations,((t,a)=>R0(t,a)))&&Ml(this.baseMutations,e.baseMutations,((t,a)=>R0(t,a)))}}class Xy{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){wt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let s=(function(){return qO})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,a[c].version);return new Xy(e,t,a,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn,yt;function aM(n){switch(n){case ue.OK:return Ge(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ge(15467,{code:n})}}function Cw(n){if(n===void 0)return ya("GRPC error has no .code"),ue.UNKNOWN;switch(n){case vn.OK:return ue.OK;case vn.CANCELLED:return ue.CANCELLED;case vn.UNKNOWN:return ue.UNKNOWN;case vn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case vn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case vn.INTERNAL:return ue.INTERNAL;case vn.UNAVAILABLE:return ue.UNAVAILABLE;case vn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case vn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case vn.NOT_FOUND:return ue.NOT_FOUND;case vn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case vn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case vn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case vn.ABORTED:return ue.ABORTED;case vn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case vn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case vn.DATA_LOSS:return ue.DATA_LOSS;default:return Ge(39323,{code:n})}}(yt=vn||(vn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=new ps([4294967295,4294967295],0);function D0(n){const e=sM().encode(n),t=new FA;return t.update(e),new Uint8Array(t.digest())}function N0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ps([t,a],0),new ps([s,l],0)]}class Wy{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new tc(`Invalid padding: ${t}`);if(a<0)throw new tc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new tc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ps.fromNumber(this.ge)}ye(e,t,a){let s=e.add(t.multiply(ps.fromNumber(a)));return s.compare(oM)===1&&(s=new ps([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=D0(e),[a,s]=N0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);if(!this.we(c))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Wy(l,s,t);return a.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=D0(e),[a,s]=N0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,jc.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Kd(Xe.min(),s,new rn(mt),_a(),pt())}}class jc{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new jc(a,t,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t,a,s){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=s}}class Iw{constructor(e,t){this.targetId=e,this.Ce=t}}class Dw{constructor(e,t,a=zn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class x0{constructor(){this.ve=0,this.Fe=O0(),this.Me=zn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),t=pt(),a=pt();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:Ge(38017,{changeType:l})}})),new jc(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=O0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class lM{constructor(e){this.Ge=e,this.ze=new Map,this.je=_a(),this.He=Sf(),this.Je=Sf(),this.Ze=new rn(mt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,a=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(ry(l))if(a===0){const c=new Be(l.path);this.et(t,c,Kn.newNoDocument(c,Xe.min()))}else wt(a===1,20013,{expectedCount:a});else{const c=this._t(t);if(c!==a){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=Ts(a).toUint8Array()}catch(p){if(p instanceof ew)return Ol("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Wy(c,s,l)}catch(p){return Ol(p instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let s=0;return a.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&ry(d.target)){const p=new Be(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Kn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let a=pt();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(a=a.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new Kd(e,t,this.Ze,this.je,a);return this.je=_a(),this.He=Sf(),this.Je=Sf(),this.Ze=new rn(mt),s}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new x0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new wn(mt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new wn(mt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||De("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new x0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Sf(){return new rn(Be.comparator)}function O0(){return new rn(Be.comparator)}const uM={asc:"ASCENDING",desc:"DESCENDING"},cM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hM={and:"AND",or:"OR"};class fM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sy(n,e){return n.useProto3Json||zd(e)?e:{value:e}}function hd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dM(n,e){return hd(n,e.toTimestamp())}function ki(n){return wt(!!n,49232),Xe.fromTimestamp((function(t){const a=Es(t);return new Kt(a.seconds,a.nanos)})(n))}function Jy(n,e){return oy(n,e).canonicalString()}function oy(n,e){const t=(function(s){return new Ht(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function xw(n){const e=Ht.fromString(n);return wt(kw(e),10190,{key:e.toString()}),e}function ly(n,e){return Jy(n.databaseId,e.path)}function Ng(n,e){const t=xw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(Mw(t))}function Ow(n,e){return Jy(n.databaseId,e)}function mM(n){const e=xw(n);return e.length===4?Ht.emptyPath():Mw(e)}function uy(n){return new Ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Mw(n){return wt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function M0(n,e,t){return{name:ly(n,e),fields:t.value.mapValue.fields}}function pM(n,e){let t;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ge(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(wt(y===void 0||typeof y=="string",58123),zn.fromBase64String(y||"")):(wt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),zn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const y=g.code===void 0?ue.UNKNOWN:Cw(g.code);return new Ce(y,g.message||"")})(c);t=new Dw(a,s,l,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=Ng(n,a.document.name),l=ki(a.document.updateTime),c=a.document.createTime?ki(a.document.createTime):Xe.min(),d=new dr({mapValue:{fields:a.document.fields}}),p=Kn.newFoundDocument(s,l,c,d),g=a.targetIds||[],y=a.removedTargetIds||[];t=new Uf(g,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=Ng(n,a.document),l=a.readTime?ki(a.readTime):Xe.min(),c=Kn.newNoDocument(s,l),d=a.removedTargetIds||[];t=new Uf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=Ng(n,a.document),l=a.removedTargetIds||[];t=new Uf([],l,s,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,c=new iM(s,l),d=a.targetId;t=new Iw(d,c)}}return t}function gM(n,e){let t;if(e instanceof Uc)t={update:M0(n,e.key,e.value)};else if(e instanceof Qy)t={delete:ly(n,e.key)};else if(e instanceof Cs)t={update:M0(n,e.key,e.data),updateMask:wM(e.fieldMask)};else{if(!(e instanceof tM))return Ge(16599,{dt:e.type});t={verify:ly(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,c){const d=c.transform;if(d instanceof ud)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Sc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ac)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof cd)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ge(20930,{transform:c.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:dM(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ge(27497)})(n,e.precondition)),t}function yM(n,e){return n&&n.length>0?(wt(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?ki(s.updateTime):ki(l);return c.isEqual(Xe.min())&&(c=ki(l)),new JO(c,s.transformResults||[])})(t,e)))):[]}function _M(n,e){return{documents:[Ow(n,e.path)]}}function vM(n,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=Ow(n,s);const l=(function(g){if(g.length!==0)return Vw(mi.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((y=>(function(b){return{field:_l(b.field),direction:bM(b.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=sy(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:s}}function EM(n){let e=mM(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){wt(a===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(E){const b=Pw(E);return b instanceof mi&&cw(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((b=>(function(k){return new ld(vl(k.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let b;return b=typeof E=="object"?E.value:E,zd(b)?null:b})(t.limit));let p=null;t.startAt&&(p=(function(E){const b=!!E.before,R=E.values||[];return new od(R,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,R=E.values||[];return new od(R,b)})(t.endAt)),UO(e,s,c,l,d,"F",p,g)}function TM(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Pw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=vl(t.unaryFilter.field);return En.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=vl(t.unaryFilter.field);return En.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=vl(t.unaryFilter.field);return En.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=vl(t.unaryFilter.field);return En.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(n):n.fieldFilter!==void 0?(function(t){return En.create(vl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return mi.create(t.compositeFilter.filters.map((a=>Pw(a))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(t.compositeFilter.op))})(n):Ge(30097,{filter:n})}function bM(n){return uM[n]}function SM(n){return cM[n]}function AM(n){return hM[n]}function _l(n){return{fieldPath:n.canonicalString()}}function vl(n){return jn.fromServerFormat(n.fieldPath)}function Vw(n){return n instanceof En?(function(t){if(t.op==="=="){if(E0(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NAN"}};if(v0(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(E0(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NAN"}};if(v0(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(t.field),op:SM(t.op),value:t.value}}})(n):n instanceof mi?(function(t){const a=t.getFilters().map((s=>Vw(s)));return a.length===1?a[0]:{compositeFilter:{op:AM(t.op),filters:a}}})(n):Ge(54877,{filter:n})}function wM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function kw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Lw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t,a,s,l=Xe.min(),c=Xe.min(),d=zn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.yt=e}}function CM(n){const e=EM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ay(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this.Sn=new DM}addToCollectionParentIndex(e,t){return this.Sn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(vs.min())}updateCollectionGroup(e,t,a){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class DM{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new wn(Ht.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new wn(Ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uw=41943040;class fr{static withCacheSize(e){return new fr(e,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(Uw,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new kl(0)}static ar(){return new kl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="LruGarbageCollector",NM=1048576;function k0([n,e],[t,a]){const s=mt(n,t);return s===0?mt(e,a):s}class xM{constructor(e){this.Pr=e,this.buffer=new wn(k0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();k0(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OM{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){De(V0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yl(t)?De(V0,"Ignoring IndexedDB error during garbage collection: ",t):await Kl(t)}await this.Ar(3e5)}))}}class MM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return de.resolve(jd.ce);const a=new xM(t);return this.Vr.forEachTarget(e,(s=>a.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>a.Er(s))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(De("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(P0)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(De("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,s,l,c,d,p,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(De("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(a=E,d=Date.now(),this.removeTargets(e,a,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(g=Date.now(),gl()<=dt.DEBUG&&De("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-y}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function PM(n,e){return new MM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(){this.changes=new bo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?de.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(a=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(a!==null&&cc(a.mutation,s,Ir.empty(),Kt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,pt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=pt()){const s=so();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,a).next((l=>{let c=ec();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const a=so();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,pt())))}populateOverlays(e,t,a){const s=[];return a.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,a,s){let l=_a();const c=uc(),d=(function(){return uc()})();return t.forEach(((p,g)=>{const y=a.get(g.key);s.has(g.key)&&(y===void 0||y.mutation instanceof Cs)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),cc(y.mutation,g,y.mutation.getFieldMask(),Kt.now())):c.set(g.key,Ir.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,y)=>c.set(g,y))),t.forEach(((g,y)=>d.set(g,new kM(y,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const a=uc();let s=new rn(((c,d)=>c-d)),l=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let y=a.get(p)||Ir.empty();y=d.applyToLocalView(g,y),a.set(p,y);const E=(s.get(d.batchId)||pt()).add(p);s=s.insert(d.batchId,E)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,y=p.value,E=vw();y.forEach((b=>{if(!l.has(b)){const R=ww(t.get(b),a.get(b));R!==null&&E.set(b,R),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return de.waitFor(c)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,s){return jO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):de.resolve(so());let d=vc,p=l;return c.next((g=>de.forEach(g,((y,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(y)?de.resolve():this.remoteDocumentCache.getEntry(e,y).next((b=>{p=p.insert(y,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,pt()))).next((y=>({batchId:d,changes:_w(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next((a=>{let s=ec();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let c=ec();return this.indexManager.getCollectionParents(e,l).next((d=>de.forEach(d,(p=>{const g=(function(E,b){return new Lc(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,a,s).next((y=>{y.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s)))).next((c=>{l.forEach(((p,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,Kn.newInvalidDocument(y)))}));let d=ec();return c.forEach(((p,g)=>{const y=l.get(p);y!==void 0&&cc(y.mutation,g,Ir.empty(),Kt.now()),qd(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return de.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:ki(s.createTime)}})(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:CM(s.bundledQuery),readTime:ki(s.readTime)}})(t)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this.overlays=new rn(Be.comparator),this.Lr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const a=so();return de.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((s,l)=>{this.bt(e,t,l)})),de.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.Lr.get(a);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),de.resolve()}getOverlaysForCollection(e,t,a){const s=so(),l=t.length+1,c=new Be(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>a&&s.set(p.getKey(),p)}return de.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new rn(((g,y)=>g-y));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let y=l.get(g.largestBatchId);y===null&&(y=so(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const d=so(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,y)=>d.set(g,y))),!(d.size()>=s)););return de.resolve(d)}bt(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(a.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(a.key,new rM(t,a));let l=this.Lr.get(t);l===void 0&&(l=pt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this.sessionToken=zn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.kr=new wn(xn.Kr),this.qr=new wn(xn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new xn(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new xn(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new Be(new Ht([])),a=new xn(t,e),s=new xn(t,e+1),l=[];return this.qr.forEachInRange([a,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Be(new Ht([])),a=new xn(t,e),s=new xn(t,e+1);let l=pt();return this.qr.forEachInRange([a,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new xn(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class xn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Be.comparator(e.key,t.key)||mt(e.Hr,t.Hr)}static Ur(e,t){return mt(e.Hr,t.Hr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new wn(xn.Kr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new nM(l,t,a,s);this.mutationQueue.push(c);for(const d of s)this.Jr=this.Jr.add(new xn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,t){return de.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.Xr(a),l=s<0?0:s;return de.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?Hy:this.Yn-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new xn(t,0),s=new xn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,s],(c=>{const d=this.Zr(c.Hr);l.push(d)})),de.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new wn(mt);return t.forEach((s=>{const l=new xn(s,0),c=new xn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{a=a.add(d.Hr)}))})),de.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;Be.isDocumentKey(l)||(l=l.child(""));const c=new xn(new Be(l),0);let d=new wn(mt);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!a.isPrefixOf(g)&&(g.length===s&&(d=d.add(p.Hr)),!0)}),c),de.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((a=>{const s=this.Zr(a);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){wt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return de.forEach(t.mutations,(s=>{const l=new xn(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new xn(t,0),s=this.Jr.firstAfterOrEqual(a);return de.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.ti=e,this.docs=(function(){return new rn(Be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return de.resolve(a?a.document.mutableCopy():Kn.newInvalidDocument(t))}getEntries(e,t){let a=_a();return t.forEach((s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():Kn.newInvalidDocument(s))})),de.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=_a();const c=t.path,d=new Be(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:y}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||pO(mO(y),a)<=0||(s.has(y.key)||qd(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return de.resolve(l)}getAllFromCollectionGroup(e,t,a,s){Ge(9500)}ni(e,t){return de.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new HM(this)}getSize(e){return de.resolve(this.size)}}class HM extends VM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(a)})),de.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.persistence=e,this.ri=new bo((t=>$y(t)),Ky),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ii=0,this.si=new Zy,this.targetCount=0,this.oi=kl._r()}forEachTarget(e,t){return this.ri.forEach(((a,s)=>t(s))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),de.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new kl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.lr(t),de.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&a.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),de.waitFor(l).next((()=>s))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return de.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),de.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),de.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return de.resolve(a)}containsKey(e,t){return de.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,t){this._i={},this.overlays={},this.ai=new jd(0),this.ui=!1,this.ui=!0,this.ci=new zM,this.referenceDelegate=e(this),this.li=new qM(this),this.indexManager=new IM,this.remoteDocumentCache=(function(s){return new FM(s)})((a=>this.referenceDelegate.hi(a))),this.serializer=new RM(t),this.Pi=new UM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new BM(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){De("MemoryPersistence","Starting transaction:",e);const s=new GM(this.ai.next());return this.referenceDelegate.Ti(),a(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return de.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class GM extends yO{constructor(e){super(),this.currentSequenceNumber=e}}class e_{constructor(e){this.persistence=e,this.Ri=new Zy,this.Ai=null}static Vi(e){return new e_(e)}get di(){if(this.Ai)return this.Ai;throw Ge(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),de.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),de.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.di,(a=>{const s=Be.fromPath(a);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return de.or([()=>de.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class fd{constructor(e,t){this.persistence=e,this.fi=new bo((a=>EO(a.path)),((a,s)=>a.isEqual(s))),this.garbageCollector=PM(this,t)}static Vi(e,t){return new fd(e,t)}Ti(){}Ii(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return de.forEach(this.fi,((a,s)=>this.wr(e,a,s).next((l=>l?de.resolve():t(s)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(a++,l.removeEntry(c,Xe.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),de.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),de.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vf(e.data.value)),t}wr(e,t,a){return de.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return de.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=s}static Es(e,t){let a=pt(),s=pt();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new t_(e,t.fromCache,a,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Lx()?8:_O(Yn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,a).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new $M;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,a,s){return a.documentReadCount<this.Vs?(gl()<=dt.DEBUG&&De("QueryEngine","SDK will not create cache indexes for query:",yl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):(gl()<=dt.DEBUG&&De("QueryEngine","Query:",yl(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.ds*s?(gl()<=dt.DEBUG&&De("QueryEngine","The SDK decides to create cache indexes for query:",yl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(t))):de.resolve())}gs(e,t){if(A0(t))return de.resolve(null);let a=Vi(t);return this.indexManager.getIndexType(e,a).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=ay(t,null,"F"),a=Vi(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const c=pt(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,a).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,ay(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,a,s){return A0(t)||s.isEqual(Xe.min())?de.resolve(null):this.fs.getDocuments(e,a).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,a,s)?de.resolve(null):(gl()<=dt.DEBUG&&De("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yl(t)),this.Ds(e,c,t,dO(s,vc)).next((d=>d)))}))}bs(e,t){let a=new wn(gw(e));return t.forEach(((s,l)=>{qd(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,a){return gl()<=dt.DEBUG&&De("QueryEngine","Using full collection scan to execute query:",yl(t)),this.fs.getDocumentsMatchingQuery(e,t,vs.min(),a)}Ds(e,t,a,s){return this.fs.getDocumentsMatchingQuery(e,a,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="LocalStore",YM=3e8;class QM{constructor(e,t,a,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new rn(mt),this.Fs=new bo((l=>$y(l)),Ky),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function XM(n,e,t,a){return new QM(n,e,t,a)}async function zw(n,e){const t=Je(n);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const c=[],d=[];let p=pt();for(const g of s){c.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}for(const g of l){d.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(a,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function WM(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,y){const E=g.batch,b=E.keys();let R=de.resolve();return b.forEach((k=>{R=R.next((()=>y.getEntry(p,k))).next((z=>{const j=g.docVersions.get(k);wt(j!==null,48541),z.version.compareTo(j)<0&&(E.applyToRemoteDocument(z,g),z.isValidDocument()&&(z.setReadTime(g.commitVersion),y.addEntry(z)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(d){let p=pt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(a,s)))}))}function Bw(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function JM(n,e){const t=Je(n),a=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((y,E)=>{const b=s.get(E);if(!b)return;d.push(t.li.removeMatchingKeys(l,y.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,y.addedDocuments,E))));let R=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(zn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,a)),s=s.insert(E,R),(function(z,j,Y){return z.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=YM?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(b,R,y)&&d.push(t.li.updateTargetData(l,R))}));let p=_a(),g=pt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(ZM(l,c,e.documentUpdates).next((y=>{p=y.Bs,g=y.Ls}))),!a.isEqual(Xe.min())){const y=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));d.push(y)}return de.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=s,l)))}function ZM(n,e,t){let a=pt(),s=pt();return t.forEach((l=>a=a.add(l))),e.getEntries(n,a).next((l=>{let c=_a();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),p.isNoDocument()&&p.version.isEqual(Xe.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):De(n_,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:s}}))}function eP(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Hy),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function tP(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let s;return t.li.getTargetData(a,e).next((l=>l?(s=l,de.resolve(s)):t.li.allocateTargetId(a).next((c=>(s=new cs(e,c,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,s).next((()=>s)))))))})).then((a=>{const s=t.vs.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function cy(n,e,t){const a=Je(n),s=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(c=>a.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Yl(c))throw c;De(n_,`Failed to update sequence numbers for target ${e}: ${c}`)}a.vs=a.vs.remove(e),a.Fs.delete(s.target)}function L0(n,e,t){const a=Je(n);let s=Xe.min(),l=pt();return a.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,y){const E=Je(p),b=E.Fs.get(y);return b!==void 0?de.resolve(E.vs.get(b)):E.li.getTargetData(g,y)})(a,c,Vi(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>a.Cs.getDocumentsMatchingQuery(c,e,t?s:Xe.min(),t?l:pt()))).next((d=>(nP(a,BO(e),d),{documents:d,ks:l})))))}function nP(n,e,t){let a=n.Ms.get(e)||Xe.min();t.forEach(((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),n.Ms.set(e,a)}class U0{constructor(){this.activeTargetIds=KO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rP{constructor(){this.vo=new U0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new U0,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="ConnectivityMonitor";class z0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){De(j0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){De(j0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af=null;function hy(){return Af===null?Af=(function(){return 268435456+Math.round(2147483648*Math.random())})():Af++,"0x"+Af.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="RestConnection",aP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class sP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${s}`,this.$o=this.databaseId.database===ad?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Wo(e,t,a,s,l){const c=hy(),d=this.Qo(e,t.toUriEncodedString());De(xg,`Sending RPC '${e}' ${c}:`,d,a);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,s,l);const{host:g}=new URL(d),y=ql(g);return this.zo(e,d,p,a,y).then((E=>(De(xg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Ol(xg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",a),E}))}jo(e,t,a,s,l,c){return this.Wo(e,t,a,s,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),a&&a.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const a=aP[e];let s=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="WebChannelConnection",Xu=(n,e,t)=>{n.listen(e,(a=>{try{t(a)}catch(s){setTimeout((()=>{throw s}),0)}}))};class wl extends sP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!wl.c_){const e=$A();Xu(e,GA.STAT_EVENT,(t=>{t.stat===Jg.PROXY?De(qn,"STAT_EVENT: detected buffering proxy"):t.stat===Jg.NOPROXY&&De(qn,"STAT_EVENT: detected no buffering proxy")})),wl.c_=!0}}zo(e,t,a,s,l){const c=hy();return new Promise(((d,p)=>{const g=new HA;g.setWithCredentials(!0),g.listenOnce(qA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Pf.NO_ERROR:const E=g.getResponseJson();De(qn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case Pf.TIMEOUT:De(qn,`RPC '${e}' ${c} timed out`),p(new Ce(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Pf.HTTP_ERROR:const b=g.getStatus();if(De(qn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const k=R==null?void 0:R.error;if(k&&k.status&&k.message){const z=(function(Y){const B=Y.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(B)>=0?B:ue.UNKNOWN})(k.status);p(new Ce(z,k.message))}else p(new Ce(ue.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Ce(ue.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{De(qn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(s);De(qn,`RPC '${e}' ${c} sending request:`,s),g.send(t,"POST",y,a,15)}))}T_(e,t,a){const s=hy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,a),d.encodeInitMessageHeaders=!0;const g=l.join("");De(qn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const y=c.createWebChannel(g,d);this.I_(y);let E=!1,b=!1;const R=new oP({Ho:k=>{b?De(qn,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(E||(De(qn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),E=!0),De(qn,`RPC '${e}' stream ${s} sending:`,k),y.send(k))},Jo:()=>y.close()});return Xu(y,Zu.EventType.OPEN,(()=>{b||(De(qn,`RPC '${e}' stream ${s} transport opened.`),R.i_())})),Xu(y,Zu.EventType.CLOSE,(()=>{b||(b=!0,De(qn,`RPC '${e}' stream ${s} transport closed`),R.o_(),this.E_(y))})),Xu(y,Zu.EventType.ERROR,(k=>{b||(b=!0,Ol(qn,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),R.o_(new Ce(ue.UNAVAILABLE,"The operation could not be completed")))})),Xu(y,Zu.EventType.MESSAGE,(k=>{var z;if(!b){const j=k.data[0];wt(!!j,16349);const Y=j,B=(Y==null?void 0:Y.error)||((z=Y[0])==null?void 0:z.error);if(B){De(qn,`RPC '${e}' stream ${s} received error:`,B);const G=B.status;let Z=(function(S){const w=vn[S];if(w!==void 0)return Cw(w)})(G),ae=B.message;Z===void 0&&(Z=ue.INTERNAL,ae="Unknown error status: "+G+" with message "+B.message),b=!0,R.o_(new Ce(Z,ae)),y.close()}else De(qn,`RPC '${e}' stream ${s} received:`,j),R.__(j)}})),wl.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return KA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n){return new wl(n)}function Og(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(n){return new fM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wl.c_=!1;class Fw{constructor(e,t,a=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-a);s>0&&De("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="PersistentStream";class Hw{constructor(e,t,a,s,l,c,d,p){this.Ci=e,this.b_=a,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Fw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(ya(t.toString()),ya("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,s])=>{this.D_===t&&this.G_(a,s)}),(a=>{e((()=>{const s=new Ce(ue.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(s)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{a((()=>this.z_(s)))})),this.stream.onMessage((s=>{a((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return De(B0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(De(B0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uP extends Hw{constructor(e,t,a,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=pM(this.serializer,e),a=(function(l){if(!("targetChange"in l))return Xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Xe.min():c.readTime?ki(c.readTime):Xe.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=uy(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=ry(p)?{documents:_M(l,p)}:{query:vM(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Nw(l,c.resumeToken);const g=sy(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Xe.min())>0){d.readTime=hd(l,c.snapshotVersion.toTimestamp());const g=sy(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const a=TM(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=uy(this.serializer),t.removeTarget=e,this.K_(t)}}class cP extends Hw{constructor(e,t,a,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=yM(e.writeResults,e.commitTime),a=ki(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=uy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>gM(this.serializer,a)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{}class fP extends hP{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ce(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,oy(t,a),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ce(ue.UNKNOWN,l.toString())}))}jo(e,t,a,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,oy(t,a),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ce(ue.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function dP(n,e,t,a){return new fP(n,e,t,a)}class mP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ya(t),this.aa=!1):De("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class pP{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{a.enqueueAndForget((async()=>{So(this)&&(De(yo,"Restarting streams for network reachability change."),await(async function(p){const g=Je(p);g.Ea.add(4),await zc(g),g.Va.set("Unknown"),g.Ea.delete(4),await Qd(g)})(this))}))})),this.Va=new mP(a,s)}}async function Qd(n){if(So(n))for(const e of n.Ra)await e(!0)}async function zc(n){for(const e of n.Ra)await e(!1)}function qw(n,e){const t=Je(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),s_(t)?a_(t):Ql(t).O_()&&i_(t,e))}function r_(n,e){const t=Je(n),a=Ql(t);t.Ia.delete(e),a.O_()&&Gw(t,e),t.Ia.size===0&&(a.O_()?a.L_():So(t)&&t.Va.set("Unknown"))}function i_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ql(n).Z_(e)}function Gw(n,e){n.da.$e(e),Ql(n).X_(e)}function a_(n){n.da=new lM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ql(n).start(),n.Va.ua()}function s_(n){return So(n)&&!Ql(n).x_()&&n.Ia.size>0}function So(n){return Je(n).Ea.size===0}function $w(n){n.da=void 0}async function gP(n){n.Va.set("Online")}async function yP(n){n.Ia.forEach(((e,t)=>{i_(n,e)}))}async function _P(n,e){$w(n),s_(n)?(n.Va.ha(e),a_(n)):n.Va.set("Unknown")}async function vP(n,e,t){if(n.Va.set("Online"),e instanceof Dw&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(a){De(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await dd(n,a)}else if(e instanceof Uf?n.da.Xe(e):e instanceof Iw?n.da.st(e):n.da.tt(e),!t.isEqual(Xe.min()))try{const a=await Bw(n.localStore);t.compareTo(a)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const y=l.Ia.get(g);y&&l.Ia.set(g,y.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const y=l.Ia.get(p);if(!y)return;l.Ia.set(p,y.withResumeToken(zn.EMPTY_BYTE_STRING,y.snapshotVersion)),Gw(l,p);const E=new cs(y.target,p,g,y.sequenceNumber);i_(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(a){De(yo,"Failed to raise snapshot:",a),await dd(n,a)}}async function dd(n,e,t){if(!Yl(e))throw e;n.Ea.add(1),await zc(n),n.Va.set("Offline"),t||(t=()=>Bw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{De(yo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Qd(n)}))}function Kw(n,e){return e().catch((t=>dd(n,t,e)))}async function Xd(n){const e=Je(n),t=Ss(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Hy;for(;EP(e);)try{const s=await eP(e.localStore,a);if(s===null){e.Ta.length===0&&t.L_();break}a=s.batchId,TP(e,s)}catch(s){await dd(e,s)}Yw(e)&&Qw(e)}function EP(n){return So(n)&&n.Ta.length<10}function TP(n,e){n.Ta.push(e);const t=Ss(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Yw(n){return So(n)&&!Ss(n).x_()&&n.Ta.length>0}function Qw(n){Ss(n).start()}async function bP(n){Ss(n).ra()}async function SP(n){const e=Ss(n);for(const t of n.Ta)e.ea(t.mutations)}async function AP(n,e,t){const a=n.Ta.shift(),s=Xy.from(a,e,t);await Kw(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Xd(n)}async function wP(n,e){e&&Ss(n).Y_&&await(async function(a,s){if((function(c){return aM(c)&&c!==ue.ABORTED})(s.code)){const l=a.Ta.shift();Ss(a).B_(),await Kw(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Xd(a)}})(n,e),Yw(n)&&Qw(n)}async function F0(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),De(yo,"RemoteStore received new credentials");const a=So(t);t.Ea.add(3),await zc(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Qd(t)}async function RP(n,e){const t=Je(n);e?(t.Ea.delete(2),await Qd(t)):e||(t.Ea.add(2),await zc(t),t.Va.set("Unknown"))}function Ql(n){return n.ma||(n.ma=(function(t,a,s){const l=Je(t);return l.sa(),new uP(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:gP.bind(null,n),Yo:yP.bind(null,n),t_:_P.bind(null,n),J_:vP.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),s_(n)?a_(n):n.Va.set("Unknown")):(await n.ma.stop(),$w(n))}))),n.ma}function Ss(n){return n.fa||(n.fa=(function(t,a,s){const l=Je(t);return l.sa(),new cP(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:bP.bind(null,n),t_:wP.bind(null,n),ta:SP.bind(null,n),na:AP.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Xd(n)):(await n.fa.stop(),n.Ta.length>0&&(De(yo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new ma,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const c=Date.now()+a,d=new o_(e,t,c,s,l);return d.start(a),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function l_(n,e){if(ya("AsyncQueue",`${e}: ${n}`),Yl(n))return new Ce(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{static emptySet(e){return new Rl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Be.comparator(t.key,a.key):(t,a)=>Be.comparator(t.key,a.key),this.keyedMap=ec(),this.sortedSet=new rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Rl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(){this.ga=new rn(Be.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ge(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Ll{constructor(e,t,a,s,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ll(e,t,Rl.emptySet(t),c,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class IP{constructor(){this.queries=q0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const s=Je(t),l=s.queries;s.queries=q0(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(a)}))})(this,new Ce(ue.ABORTED,"Firestore shutting down"))}}function q0(){return new bo((n=>pw(n)),Hd)}async function u_(n,e){const t=Je(n);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(a=2):(l=new CP,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=l_(c,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&h_(t)}async function c_(n,e){const t=Je(n),a=e.query;let s=3;const l=t.queries.get(a);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function DP(n,e){const t=Je(n);let a=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(s)&&(a=!0);c.wa=s}}a&&h_(t)}function NP(n,e,t){const a=Je(n),s=a.queries.get(e);if(s)for(const l of s.ba)l.onError(t);a.queries.delete(e)}function h_(n){n.Ca.forEach((e=>{e.next()}))}var fy,G0;(G0=fy||(fy={})).Ma="default",G0.Cache="cache";class f_{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new Ll(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.key=e}}class Ww{constructor(e){this.key=e}}class xP{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.eu=gw(e),this.tu=new Rl(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new H0,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,E)=>{const b=s.get(y),R=qd(this.query,E)?E:null,k=!!b&&this.mutatedKeys.has(b.key),z=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let j=!1;b&&R?b.data.isEqual(R.data)?k!==z&&(a.track({type:3,doc:R}),j=!0):this.su(b,R)||(a.track({type:2,doc:R}),j=!0,(p&&this.eu(R,p)>0||g&&this.eu(R,g)<0)&&(d=!0)):!b&&R?(a.track({type:0,doc:R}),j=!0):b&&!R&&(a.track({type:1,doc:b}),j=!0,(p||g)&&(d=!0)),j&&(R?(c=c.add(R),l=z?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),a.track({type:1,doc:y})}return{tu:c,iu:a,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,E)=>(function(R,k){const z=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:j})}};return z(R)-z(k)})(y.type,E.type)||this.eu(y.doc,E.doc))),this.ou(a),s=s??!1;const d=t&&!s?this._u():[],p=this.Ya.size===0&&this.current&&!s?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new Ll(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new H0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=pt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new Ww(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new Xw(a))})),t}cu(e){this.Za=e.ks,this.Ya=pt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ll.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const d_="SyncEngine";class OP{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class MP{constructor(e){this.key=e,this.hu=!1}}class PP{constructor(e,t,a,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new bo((d=>pw(d)),Hd),this.Iu=new Map,this.Eu=new Set,this.Ru=new rn(Be.comparator),this.Au=new Map,this.Vu=new Zy,this.du={},this.mu=new Map,this.fu=kl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VP(n,e,t=!0){const a=r1(n);let s;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await Jw(a,e,t,!0),s}async function kP(n,e){const t=r1(n);await Jw(t,e,!0,!1)}async function Jw(n,e,t,a){const s=await tP(n.localStore,Vi(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return a&&(d=await LP(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&qw(n.remoteStore,s),d}async function LP(n,e,t,a,s){n.pu=(E,b,R)=>(async function(z,j,Y,B){let G=j.view.ru(Y);G.Ss&&(G=await L0(z.localStore,j.query,!1).then((({documents:S})=>j.view.ru(S,G))));const Z=B&&B.targetChanges.get(j.targetId),ae=B&&B.targetMismatches.get(j.targetId)!=null,te=j.view.applyChanges(G,z.isPrimaryClient,Z,ae);return K0(z,j.targetId,te.au),te.snapshot})(n,E,b,R);const l=await L0(n.localStore,e,!0),c=new xP(e,l.ks),d=c.ru(l.documents),p=jc.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",s),g=c.applyChanges(d,n.isPrimaryClient,p);K0(n,t,g.au);const y=new OP(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function UP(n,e,t){const a=Je(n),s=a.Tu.get(e),l=a.Iu.get(s.targetId);if(l.length>1)return a.Iu.set(s.targetId,l.filter((c=>!Hd(c,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await cy(a.localStore,s.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(s.targetId),t&&r_(a.remoteStore,s.targetId),dy(a,s.targetId)})).catch(Kl)):(dy(a,s.targetId),await cy(a.localStore,s.targetId,!0))}async function jP(n,e){const t=Je(n),a=t.Tu.get(e),s=t.Iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),r_(t.remoteStore,a.targetId))}async function zP(n,e,t){const a=KP(n);try{const s=await(function(c,d){const p=Je(c),g=Kt.now(),y=d.reduce(((R,k)=>R.add(k.key)),pt());let E,b;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let k=_a(),z=pt();return p.xs.getEntries(R,y).next((j=>{k=j,k.forEach(((Y,B)=>{B.isValidDocument()||(z=z.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,k))).next((j=>{E=j;const Y=[];for(const B of d){const G=eM(B,E.get(B.key).overlayedDocument);G!=null&&Y.push(new Cs(B.key,G,ow(G.value.mapValue),Or.exists(!0)))}return p.mutationQueue.addMutationBatch(R,g,Y,d)})).next((j=>{b=j;const Y=j.applyToLocalDocumentSet(E,z);return p.documentOverlayCache.saveOverlays(R,j.batchId,Y)}))})).then((()=>({batchId:b.batchId,changes:_w(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new rn(mt)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(a,s.batchId,t),await Bc(a,s.changes),await Xd(a.remoteStore)}catch(s){const l=l_(s,"Failed to persist write");t.reject(l)}}async function Zw(n,e){const t=Je(n);try{const a=await JM(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?wt(c.hu,14607):s.removedDocuments.size>0&&(wt(c.hu,42227),c.hu=!1))})),await Bc(t,a,e)}catch(a){await Kl(a)}}function $0(n,e,t){const a=Je(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const p=Je(c);p.onlineState=d;let g=!1;p.queries.forEach(((y,E)=>{for(const b of E.ba)b.va(d)&&(g=!0)})),g&&h_(p)})(a.eventManager,e),s.length&&a.Pu.J_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function BP(n,e,t){const a=Je(n);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a.Au.get(e),l=s&&s.key;if(l){let c=new rn(Be.comparator);c=c.insert(l,Kn.newNoDocument(l,Xe.min()));const d=pt().add(l),p=new Kd(Xe.min(),new Map,new rn(mt),c,d);await Zw(a,p),a.Ru=a.Ru.remove(l),a.Au.delete(e),m_(a)}else await cy(a.localStore,e,!1).then((()=>dy(a,e,t))).catch(Kl)}async function FP(n,e){const t=Je(n),a=e.batch.batchId;try{const s=await WM(t.localStore,e);t1(t,a,null),e1(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Bc(t,s)}catch(s){await Kl(s)}}async function HP(n,e,t){const a=Je(n);try{const s=await(function(c,d){const p=Je(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(wt(E!==null,37113),y=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,y,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>p.localDocuments.getDocuments(g,y)))}))})(a.localStore,e);t1(a,e,t),e1(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Bc(a,s)}catch(s){await Kl(s)}}function e1(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function t1(n,e,t){const a=Je(n);let s=a.du[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.du[a.currentUser.toKey()]=s}}function dy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),t&&n.Pu.yu(a,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||n1(n,a)}))}function n1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(r_(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),m_(n))}function K0(n,e,t){for(const a of t)a instanceof Xw?(n.Vu.addReference(a.key,e),qP(n,a)):a instanceof Ww?(De(d_,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||n1(n,a.key)):Ge(19791,{wu:a})}function qP(n,e){const t=e.key,a=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(a)||(De(d_,"New document in limbo: "+t),n.Eu.add(a),m_(n))}function m_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Be(Ht.fromString(e)),a=n.fu.next();n.Au.set(a,new MP(t)),n.Ru=n.Ru.insert(t,a),qw(n.remoteStore,new cs(Vi(Fd(t.path)),a,"TargetPurposeLimboResolution",jd.ce))}}async function Bc(n,e,t){const a=Je(n),s=[],l=[],c=[];a.Tu.isEmpty()||(a.Tu.forEach(((d,p)=>{c.push(a.pu(p,e,t).then((g=>{var y;if((g||t)&&a.isPrimaryClient){const E=g?!g.fromCache:(y=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:y.current;a.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){s.push(g);const E=t_.Es(p.targetId,g);l.push(E)}})))})),await Promise.all(c),a.Pu.J_(s),await(async function(p,g){const y=Je(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>de.forEach(g,(b=>de.forEach(b.Ts,(R=>y.persistence.referenceDelegate.addReference(E,b.targetId,R))).next((()=>de.forEach(b.Is,(R=>y.persistence.referenceDelegate.removeReference(E,b.targetId,R)))))))))}catch(E){if(!Yl(E))throw E;De(n_,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const R=y.vs.get(b),k=R.snapshotVersion,z=R.withLastLimboFreeSnapshotVersion(k);y.vs=y.vs.insert(b,z)}}})(a.localStore,l))}async function GP(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){De(d_,"User change. New user:",e.toKey());const a=await zw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new Ce(ue.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Bc(t,a.Ns)}}function $P(n,e){const t=Je(n),a=t.Au.get(e);if(a&&a.hu)return pt().add(a.key);{let s=pt();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function r1(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$P.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BP.bind(null,e),e.Pu.J_=DP.bind(null,e.eventManager),e.Pu.yu=NP.bind(null,e.eventManager),e}function KP(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HP.bind(null,e),e}class md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return XM(this.persistence,new KM,e.initialUser,this.serializer)}Cu(e){return new jw(e_.Vi,this.serializer)}Du(e){return new rP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}md.provider={build:()=>new md};class YP extends md{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){wt(this.persistence.referenceDelegate instanceof fd,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new OM(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new jw((a=>fd.Vi(a,t)),this.serializer)}}class my{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>$0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=GP.bind(null,this.syncEngine),await RP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new IP})()}createDatastore(e){const t=Yd(e.databaseInfo.databaseId),a=lP(e.databaseInfo);return dP(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,s,l,c,d){return new pP(a,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>$0(this.syncEngine,t,0)),(function(){return z0.v()?new z0:new iP})())}createSyncEngine(e,t){return(function(s,l,c,d,p,g,y){const E=new PP(s,l,c,d,p,g);return y&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Je(s);De(yo,"RemoteStore shutting down."),l.Ea.add(5),await zc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}my.provider={build:()=>new my};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ya("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="FirestoreClient";class QP{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=s,this.user=$n.UNAUTHENTICATED,this.clientId=Fy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async c=>{De(As,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(a,(c=>(De(As,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ma;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=l_(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Mg(n,e){n.asyncQueue.verifyOperationInProgress(),De(As,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener((async s=>{a.isEqual(s)||(await zw(e.localStore,s),a=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Y0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await XP(n);De(As,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((a=>F0(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,s)=>F0(e.remoteStore,s))),n._onlineComponents=e}async function XP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){De(As,"Using user provided OfflineComponentProvider");try{await Mg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ol("Error using user provided cache. Falling back to memory cache: "+t),await Mg(n,new md)}}else De(As,"Using default OfflineComponentProvider"),await Mg(n,new YP(void 0));return n._offlineComponents}async function i1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(De(As,"Using user provided OnlineComponentProvider"),await Y0(n,n._uninitializedComponentsProvider._online)):(De(As,"Using default OnlineComponentProvider"),await Y0(n,new my))),n._onlineComponents}function WP(n){return i1(n).then((e=>e.syncEngine))}async function pd(n){const e=await i1(n),t=e.eventManager;return t.onListen=VP.bind(null,e.syncEngine),t.onUnlisten=UP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jP.bind(null,e.syncEngine),t}function JP(n,e,t,a){const s=new p_(a),l=new f_(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>u_(await pd(n),l))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>c_(await pd(n),l)))}}function ZP(n,e,t={}){const a=new ma;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const y=new p_({next:b=>{y.Nu(),c.enqueueAndForget((()=>c_(l,E)));const R=b.docs.has(d);!R&&b.fromCache?g.reject(new Ce(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&b.fromCache&&p&&p.source==="server"?g.reject(new Ce(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new f_(Fd(d.path),y,{includeMetadataChanges:!0,Ka:!0});return u_(l,E)})(await pd(n),n.asyncQueue,e,t,a))),a.promise}function eV(n,e,t={}){const a=new ma;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const y=new p_({next:b=>{y.Nu(),c.enqueueAndForget((()=>c_(l,E))),b.fromCache&&p.source==="server"?g.reject(new Ce(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new f_(d,y,{includeMetadataChanges:!0,Ka:!0});return u_(l,E)})(await pd(n),n.asyncQueue,e,t,a))),a.promise}function tV(n,e){const t=new ma;return n.asyncQueue.enqueueAndForget((async()=>zP(await WP(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV="ComponentProvider",Q0=new Map;function rV(n,e,t,a,s){return new SO(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,a1(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="firestore.googleapis.com",X0=!0;class W0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=s1,this.ssl=X0}else this.host=e.host,this.ssl=e.ssl??X0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Uw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NM)throw new Ce(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a1(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ce(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ce(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ce(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wd{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new nO;switch(a.type){case"firstParty":return new sO(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ce(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=Q0.get(t);a&&(De(nV,"Removing Datastore"),Q0.delete(t),a.terminate())})(this),Promise.resolve()}}function iV(n,e,t,a={}){var g;n=xr(n,Wd);const s=ql(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(PA(`https://${d}`),VA("Firestore",!0)),l.host!==s1&&l.host!==d&&Ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:s,emulatorOptions:a};if(!mo(p,c)&&(n._setSettings(p),a.mockUserToken)){let y,E;if(typeof a.mockUserToken=="string")y=a.mockUserToken,E=$n.MOCK_USER;else{y=Ix(a.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const b=a.mockUserToken.sub||a.mockUserToken.user_id;if(!b)throw new Ce(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new $n(b)}n._authCredentials=new rO(new QA(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ao(this.firestore,e,this._query)}}class ln{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(kc(t,ln._jsonSchema))return new ln(e,a||null,new Be(Ht.fromString(t.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:Tn("string",ln._jsonSchemaVersion),referencePath:Tn("string")};class gs extends Ao{constructor(e,t,a){super(e,t,Fd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Be(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function Fc(n,e,...t){if(n=Rn(n),XA("collection","path",e),n instanceof Wd){const a=Ht.fromString(e,...t);return c0(a),new gs(n,null,a)}{if(!(n instanceof ln||n instanceof gs))throw new Ce(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Ht.fromString(e,...t));return c0(a),new gs(n.firestore,null,a)}}function Wr(n,e,...t){if(n=Rn(n),arguments.length===1&&(e=Fy.newId()),XA("doc","path",e),n instanceof Wd){const a=Ht.fromString(e,...t);return u0(a),new ln(n,null,new Be(a))}{if(!(n instanceof ln||n instanceof gs))throw new Ce(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Ht.fromString(e,...t));return u0(a),new ln(n.firestore,n instanceof gs?n.converter:null,new Be(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="AsyncQueue";class Z0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Fw(this,"async_queue_retry"),this._c=()=>{const a=Og();a&&De(J0,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=Og();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Og();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ma;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Yl(e))throw e;De(J0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,ya("INTERNAL UNHANDLED ERROR: ",eS(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=o_.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ge(47125,{Pc:eS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function eS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ws extends Wd{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new Z0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Z0(e),this._firestoreClient=void 0,await e}}}function aV(n,e){const t=typeof n=="object"?n:jA(),a=typeof n=="string"?n:ad,s=zy(t,"firestore").getImmediate({identifier:a});if(!s._initialized){const l=Rx("firestore");l&&iV(s,...l)}return s}function Hc(n){if(n._terminated)throw new Ce(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sV(n),n._firestoreClient}function sV(n){var a,s,l,c;const e=n._freezeSettings(),t=rV(n._databaseId,((a=n._app)==null?void 0:a.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new QP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yr(zn.fromBase64String(e))}catch(t){throw new Ce(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yr(zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kc(e,Yr._jsonSchema))return Yr.fromBase64String(e.bytes)}}Yr._jsonSchemaVersion="firestore/bytes/1.0",Yr._jsonSchema={type:Tn("string",Yr._jsonSchemaVersion),bytes:Tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ce(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Li._jsonSchemaVersion}}static fromJSON(e){if(kc(e,Li._jsonSchema))return new Li(e.latitude,e.longitude)}}Li._jsonSchemaVersion="firestore/geoPoint/1.0",Li._jsonSchema={type:Tn("string",Li._jsonSchemaVersion),latitude:Tn("number"),longitude:Tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kc(e,fi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new fi(e.vectorValues);throw new Ce(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fi._jsonSchemaVersion="firestore/vectorValue/1.0",fi._jsonSchema={type:Tn("string",fi._jsonSchemaVersion),vectorValues:Tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=/^__.*__$/;class lV{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uc(e,this.data,t,this.fieldTransforms)}}class o1{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function l1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{dataSource:n})}}class y_{constructor(e,t,a,s,l,c){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new y_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return gd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(l1(this.dataSource)&&oV.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class uV{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Yd(e)}createContext(e,t,a,s=!1){return new y_({dataSource:e,methodName:t,targetDoc:a,path:jn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zd(n){const e=n._freezeSettings(),t=Yd(n._databaseId);return new uV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function u1(n,e,t,a,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);__("Data must be an object, but it was:",c,a);const d=f1(a,c);let p,g;if(l.merge)p=new Ir(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const E of l.mergeFields){const b=Ul(e,E,t);if(!c.contains(b))throw new Ce(ue.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);p1(y,b)||y.push(b)}p=new Ir(y),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new lV(new dr(d),p,g)}class em extends g_{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof em}}function c1(n,e,t,a){const s=n.createContext(1,e,t);__("Data must be an object, but it was:",s,a);const l=[],c=dr.empty();Rs(a,((p,g)=>{const y=m1(e,p,t);g=Rn(g);const E=s.childContextForFieldPath(y);if(g instanceof em)l.push(y);else{const b=qc(g,E);b!=null&&(l.push(y),c.set(y,b))}}));const d=new Ir(l);return new o1(c,d,s.fieldTransforms)}function h1(n,e,t,a,s,l){const c=n.createContext(1,e,t),d=[Ul(e,a,t)],p=[s];if(l.length%2!=0)throw new Ce(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(Ul(e,l[b])),p.push(l[b+1]);const g=[],y=dr.empty();for(let b=d.length-1;b>=0;--b)if(!p1(g,d[b])){const R=d[b];let k=p[b];k=Rn(k);const z=c.childContextForFieldPath(R);if(k instanceof em)g.push(R);else{const j=qc(k,z);j!=null&&(g.push(R),y.set(R,j))}}const E=new Ir(g);return new o1(y,E,c.fieldTransforms)}function cV(n,e,t,a=!1){return qc(t,n.createContext(a?4:3,e))}function qc(n,e){if(d1(n=Rn(n)))return __("Unsupported field value:",e,n),f1(n,e);if(n instanceof g_)return(function(a,s){if(!l1(s.dataSource))throw s.createError(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,s){const l=[];let c=0;for(const d of a){let p=qc(d,s.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(a,s){if((a=Rn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return YO(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Kt.fromDate(a);return{timestampValue:hd(s.serializer,l)}}if(a instanceof Kt){const l=new Kt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:hd(s.serializer,l)}}if(a instanceof Li)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Yr)return{bytesValue:Nw(s.serializer,a._byteString)};if(a instanceof ln){const l=s.databaseId,c=a.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Jy(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof fi)return(function(c,d){const p=c instanceof fi?c.toArray():c;return{mapValue:{fields:{[aw]:{stringValue:sw},[sd]:{arrayValue:{values:p.map((y=>{if(typeof y!="number")throw d.createError("VectorValues must only contain numeric values.");return Yy(d.serializer,y)}))}}}}}})(a,s);if(Lw(a))return a._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Ud(a)}`)})(n,e)}function f1(n,e){const t={};return ZA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(n,((a,s)=>{const l=qc(s,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function d1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Kt||n instanceof Li||n instanceof Yr||n instanceof ln||n instanceof g_||n instanceof fi||Lw(n))}function __(n,e,t){if(!d1(t)||!WA(t)){const a=Ud(t);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function Ul(n,e,t){if((e=Rn(e))instanceof Jd)return e._internalPath;if(typeof e=="string")return m1(n,e);throw gd("Field path arguments must be of type string or ",n,!1,void 0,t)}const hV=new RegExp("[~\\*/\\[\\]]");function m1(n,e,t){if(e.search(hV)>=0)throw gd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jd(...e.split("."))._internalPath}catch{throw gd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gd(n,e,t,a,s){const l=a&&!a.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${a}`),c&&(p+=` in document ${s}`),p+=")"),new Ce(ue.INVALID_ARGUMENT,d+n+p)}function p1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{convertValue(e,t="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Rs(e,((s,l)=>{a[s]=this.convertValue(l,t)})),a}convertVectorValue(e){var a,s,l;const t=(l=(s=(a=e.fields)==null?void 0:a[sd].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>fn(c.doubleValue)));return new fi(t)}convertGeoPoint(e){return new Li(fn(e.latitude),fn(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Bd(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){const t=Es(e);return new Kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Ht.fromString(e);wt(kw(a),9688,{name:e});const s=new Tc(a.get(1),a.get(3)),l=new Be(a.popFirst(5));return s.isEqual(t)||ya(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_ extends fV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}const tS="@firebase/firestore",nS="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(n){return(function(t,a){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of a)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Ul("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dV extends g1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ce(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E_{}class mV extends E_{}function Gc(n,e,...t){let a=[];e instanceof E_&&a.push(e),a=a.concat(t),(function(l){const c=l.filter((p=>p instanceof b_)).length,d=l.filter((p=>p instanceof tm)).length;if(c>1||c>0&&d>0)throw new Ce(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const s of a)n=s._apply(n);return n}class tm extends mV{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new tm(e,t,a)}_apply(e){const t=this._parse(e);return _1(e._query,t),new Ao(e.firestore,e.converter,iy(e._query,t))}_parse(e){const t=Zd(e.firestore);return(function(l,c,d,p,g,y,E){let b;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ce(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){aS(E,y);const k=[];for(const z of E)k.push(iS(p,l,z));b={arrayValue:{values:k}}}else b=iS(p,l,E)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||aS(E,y),b=cV(d,c,E,y==="in"||y==="not-in");return En.create(g,y,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function T_(n,e,t){const a=e,s=Ul("where",n);return tm._create(s,a,t)}class b_ extends E_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new b_(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:mi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const p of d)_1(c,p),c=iy(c,p)})(e._query,t),new Ao(e.firestore,e.converter,iy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function iS(n,e,t){if(typeof(t=Rn(t))=="string"){if(t==="")throw new Ce(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mw(e)&&t.indexOf("/")!==-1)throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Ht.fromString(t));if(!Be.isDocumentKey(a))throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return _0(n,new Be(a))}if(t instanceof ln)return _0(n,t._key);throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ud(t)}.`)}function aS(n,e){if(!Array.isArray(n)||n.length===0)throw new Ce(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _1(n,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ce(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function v1(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}class nc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends g1{constructor(e,t,a,s,l,c){super(e,t,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Ul("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",lo._jsonSchema={type:Tn("string",lo._jsonSchemaVersion),bundleSource:Tn("string","DocumentSnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class jf extends lo{data(e={}){return super.data(e)}}class uo{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new nc(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new jf(this._firestore,this._userDataWriter,a.key,a,new nc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const p=new jf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new nc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new jf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new nc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,y=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:pV(d.type),doc:p,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uo._jsonSchemaVersion="firestore/querySnapshot/1.0",uo._jsonSchema={type:Tn("string",uo._jsonSchemaVersion),bundleSource:Tn("string","QuerySnapshot"),bundleName:Tn("string"),bundle:Tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zd(e)}set(e,t,a){this._verifyNotCommitted();const s=Pg(e,this._firestore),l=v1(s.converter,t,a),c=u1(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,a);return this._mutations.push(c.toMutation(s._key,Or.none())),this}update(e,t,a,...s){this._verifyNotCommitted();const l=Pg(e,this._firestore);let c;return c=typeof(t=Rn(t))=="string"||t instanceof Jd?h1(this._dataReader,"WriteBatch.update",l._key,t,a,s):c1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Or.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pg(e,this._firestore);return this._mutations=this._mutations.concat(new Qy(t._key,Or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pg(n,e){if((n=Rn(n)).firestore!==e)throw new Ce(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){n=xr(n,ln);const e=xr(n.firestore,ws),t=Hc(e);return ZP(t,n._key).then((a=>T1(e,n,a)))}function Kc(n){n=xr(n,Ao);const e=xr(n.firestore,ws),t=Hc(e),a=new v_(e);return y1(n._query),eV(t,n._query).then((s=>new uo(e,a,n,s)))}function S_(n,e,t){n=xr(n,ln);const a=xr(n.firestore,ws),s=v1(n.converter,e,t),l=Zd(a);return A_(a,[u1(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Or.none())])}function E1(n,e,t,...a){n=xr(n,ln);const s=xr(n.firestore,ws),l=Zd(s);let c;return c=typeof(e=Rn(e))=="string"||e instanceof Jd?h1(l,"updateDoc",n._key,e,t,a):c1(l,"updateDoc",n._key,e),A_(s,[c.toMutation(n._key,Or.exists(!0))])}function yV(n,...e){var g,y,E;n=Rn(n);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||rS(e[a])||(t=e[a++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(rS(e[a])){const b=e[a];e[a]=(g=b.next)==null?void 0:g.bind(b),e[a+1]=(y=b.error)==null?void 0:y.bind(b),e[a+2]=(E=b.complete)==null?void 0:E.bind(b)}let l,c,d;if(n instanceof ln)c=xr(n.firestore,ws),d=Fd(n._key.path),l={next:b=>{e[a]&&e[a](T1(c,n,b))},error:e[a+1],complete:e[a+2]};else{const b=xr(n,Ao);c=xr(b.firestore,ws),d=b._query;const R=new v_(c);l={next:k=>{e[a]&&e[a](new uo(c,R,b,k))},error:e[a+1],complete:e[a+2]},y1(n._query)}const p=Hc(c);return JP(p,d,s,l)}function A_(n,e){const t=Hc(n);return tV(t,e)}function T1(n,e,t){const a=t.docs.get(e._key),s=new v_(n);return new lo(n,s,e._key,a,new nc(t.hasPendingWrites,t.fromCache),e.converter)}function b1(n){return n=xr(n,ws),Hc(n),new gV(n,(e=>A_(n,e)))}(function(e,t=!0){tO(Gl),xl(new po("firestore",((a,{instanceIdentifier:s,options:l})=>{const c=a.getProvider("app").getImmediate(),d=new ws(new iO(a.getProvider("auth-internal")),new oO(c,a.getProvider("app-check-internal")),AO(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ms(tS,nS,e),ms(tS,nS,"esm2020")})();var _V="firebase",vV="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(_V,vV,"app");function S1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EV=S1,A1=new Pc("auth","Firebase",S1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Uy("@firebase/auth");function TV(n,...e){yd.logLevel<=dt.WARN&&yd.warn(`Auth (${Gl}): ${n}`,...e)}function zf(n,...e){yd.logLevel<=dt.ERROR&&yd.error(`Auth (${Gl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(n,...e){throw R_(n,...e)}function di(n,...e){return R_(n,...e)}function w_(n,e,t){const a={...EV(),[e]:t};return new Pc("auth","Firebase",a).create(e,{appName:n.name})}function co(n){return w_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bV(n,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Bi(n,"argument-error"),w_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function R_(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return A1.create(n,...e)}function $e(n,e,...t){if(!n)throw R_(e,...t)}function fa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zf(e),new Error(e)}function va(n,e){n||fa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function SV(){return sS()==="http:"||sS()==="https:"}function sS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SV()||Px()||"connection"in navigator)?navigator.onLine:!0}function wV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,va(t>e,"Short delay should be less than long delay!"),this.isMobile=xx()||Vx()}get(){return AV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(n,e){va(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IV=new Yc(3e4,6e4);function I_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Xl(n,e,t,a,s={}){return R1(n,s,async()=>{let l={},c={};a&&(e==="GET"?c=a:l={body:JSON.stringify(a)});const d=Vc({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return Mx()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&ql(n.emulatorConfig.host)&&(g.credentials="include"),w1.fetch()(await C1(n,n.config.apiHost,t,d),g)})}async function R1(n,e,t){n._canInitEmulator=!1;const a={...RV,...e};try{const s=new NV(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw wf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw wf(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw wf(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw wf(n,"user-disabled",c);const y=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw w_(n,y,g);Bi(n,y)}}catch(s){if(s instanceof ba)throw s;Bi(n,"network-request-failed",{message:String(s)})}}async function DV(n,e,t,a,s={}){const l=await Xl(n,e,t,a,s);return"mfaPendingCredential"in l&&Bi(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function C1(n,e,t,a){const s=`${e}${t}?${a}`,l=n,c=l.config.emulator?C_(n.config,s):`${n.config.apiScheme}://${s}`;return CV.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class NV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(di(this.auth,"network-request-failed")),IV.get())})}}function wf(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=di(n,e,a);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(n,e){return Xl(n,"POST","/v1/accounts:delete",e)}async function _d(n,e){return Xl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OV(n,e=!1){const t=Rn(n),a=await t.getIdToken(e),s=D_(a);$e(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:a,authTime:hc(Vg(s.auth_time)),issuedAtTime:hc(Vg(s.iat)),expirationTime:hc(Vg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Vg(n){return Number(n)*1e3}function D_(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return zf("JWT malformed, contained fewer than 3 sections"),null;try{const s=NA(t);return s?JSON.parse(s):(zf("Failed to decode base64 JWT payload"),null)}catch(s){return zf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function oS(n){const e=D_(n);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof ba&&MV(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function MV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(n){var E;const e=n.auth,t=await n.getIdToken(),a=await wc(n,_d(e,{idToken:t}));$e(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?I1(s.providerUserInfo):[],c=kV(n.providerData,l),d=n.isAnonymous,p=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new gy(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function VV(n){const e=Rn(n);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kV(n,e){return[...n.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function I1(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LV(n,e){const t=await R1(n,{},async()=>{const a=Vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await C1(n,s,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:a};return n.emulatorConfig&&ql(n.emulatorConfig.host)&&(p.credentials="include"),w1.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UV(n,e){return Xl(n,"POST","/v2/accounts:revokeToken",I_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=oS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await LV(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,c=new Cl;return a&&($e(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&($e(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&($e(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cl,this.toJSON())}_performRefresh(){return fa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(n,e){$e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class hi{constructor({uid:e,auth:t,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new PV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await wc(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return OV(this,e)}reload(){return VV(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await vd(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ui(this.auth.app))return Promise.reject(co(this.auth));const e=await this.getIdToken();return await wc(this,xV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:R,providerData:k,stsTokenManager:z}=t;$e(E&&z,e,"internal-error");const j=Cl.fromJSON(this.name,z);$e(typeof E=="string",e,"internal-error"),ns(a,e.name),ns(s,e.name),$e(typeof b=="boolean",e,"internal-error"),$e(typeof R=="boolean",e,"internal-error"),ns(l,e.name),ns(c,e.name),ns(d,e.name),ns(p,e.name),ns(g,e.name),ns(y,e.name);const Y=new hi({uid:E,auth:e,email:s,emailVerified:b,displayName:a,isAnonymous:R,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:j,createdAt:g,lastLoginAt:y});return k&&Array.isArray(k)&&(Y.providerData=k.map(B=>({...B}))),p&&(Y._redirectEventId=p),Y}static async _fromIdTokenResponse(e,t,a=!1){const s=new Cl;s.updateFromServerResponse(t);const l=new hi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await vd(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];$e(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?I1(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),d=new Cl;d.updateFromIdToken(a);const p=new hi({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new gy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=new Map;function da(n){va(n instanceof Function,"Expected a class definition");let e=lS.get(n);return e?(va(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}D1.type="NONE";const uS=D1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(n,e,t){return`firebase:${n}:${e}:${t}`}class Il{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=Bf(this.userKey,s.apiKey,l),this.fullPersistenceKey=Bf("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await _d(this.auth,{idToken:e}).catch(()=>{});return t?hi._fromGetAccountInfoResponse(this.auth,t,e):null}return hi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Il(da(uS),e,a);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||da(uS);const c=Bf(a,e.config.apiKey,e.name);let d=null;for(const g of t)try{const y=await g._get(c);if(y){let E;if(typeof y=="string"){const b=await _d(e,{idToken:y}).catch(()=>{});if(!b)break;E=await hi._fromGetAccountInfoResponse(e,b,y)}else E=hi._fromJSON(e,y);g!==l&&(d=E),l=g;break}}catch{}const p=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Il(l,e,a):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Il(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(M1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(N1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(V1(e))return"Blackberry";if(k1(e))return"Webos";if(x1(e))return"Safari";if((e.includes("chrome/")||O1(e))&&!e.includes("edge/"))return"Chrome";if(P1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function N1(n=Yn()){return/firefox\//i.test(n)}function x1(n=Yn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function O1(n=Yn()){return/crios\//i.test(n)}function M1(n=Yn()){return/iemobile/i.test(n)}function P1(n=Yn()){return/android/i.test(n)}function V1(n=Yn()){return/blackberry/i.test(n)}function k1(n=Yn()){return/webos/i.test(n)}function N_(n=Yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function jV(n=Yn()){var e;return N_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function zV(){return kx()&&document.documentMode===10}function L1(n=Yn()){return N_(n)||P1(n)||k1(n)||V1(n)||/windows phone/i.test(n)||M1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(n,e=[]){let t;switch(n){case"Browser":t=cS(Yn());break;case"Worker":t=`${cS(Yn())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Gl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FV(n,e={}){return Xl(n,"GET","/v2/passwordPolicy",I_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=6;class qV{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??HV,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hS(this),this.idTokenSubscription=new hS(this),this.beforeStateQueue=new BV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=A1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=da(t)),this._initializationPromise=this.queue(async()=>{var a,s,l;if(!this._deleted&&(this.persistenceManager=await Il.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _d(this,{idToken:e}),a=await hi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ui(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(a=p.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ui(this.app))return Promise.reject(co(this));const t=e?Rn(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ui(this.app)?Promise.reject(co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ui(this.app)?Promise.reject(co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(da(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FV(this),t=new qV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await UV(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&da(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await Il.create(this,[da(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,s);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(ui(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&TV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function nm(n){return Rn(n)}class hS{constructor(e){this.auth=e,this.observer=null,this.addObserver=qx(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $V(n){x_=n}function KV(n){return x_.loadJS(n)}function YV(){return x_.gapiScript}function QV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(n,e){const t=zy(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(mo(l,e??{}))return s;Bi(s,"already-initialized")}return t.initialize({options:e})}function WV(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(da);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function JV(n,e,t){const a=nm(n);$e(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=j1(e),{host:c,port:d}=ZV(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){$e(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),$e(mo(g,a.config.emulator)&&mo(y,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=y,a.settings.appVerificationDisabledForTesting=!0,ql(c)?(PA(`${l}//${c}${p}`),VA("Auth",!0)):e4()}function j1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ZV(n){const e=j1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:fS(a.substr(l.length+1))}}else{const[l,c]=a.split(":");return{host:l,port:fS(c)}}}function fS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function e4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fa("not implemented")}_getIdTokenResponse(e){return fa("not implemented")}_linkToIdToken(e,t){return fa("not implemented")}_getReauthenticationResolver(e){return fa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(n,e){return DV(n,"POST","/v1/accounts:signInWithIdp",I_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4="http://localhost";class _o extends z1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Bi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...l}=t;if(!a||!s)return null;const c=new _o(a,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Dl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Dl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Dl(e,t)}buildRequest(){const e={requestUri:t4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends O_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Qc{constructor(){super("facebook.com")}static credential(e){return _o._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _o._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return ha.credential(t,a)}catch{return null}}}ha.GOOGLE_SIGN_IN_METHOD="google.com";ha.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Qc{constructor(){super("github.com")}static credential(e){return _o._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.GITHUB_SIGN_IN_METHOD="github.com";os.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Qc{constructor(){super("twitter.com")}static credential(e,t){return _o._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ls.credential(t,a)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await hi._fromIdTokenResponse(e,a,s),c=dS(a);return new jl({user:l,providerId:c,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=dS(a);return new jl({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function dS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed extends ba{constructor(e,t,a,s){super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new Ed(e,t,a,s)}}function B1(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ed._fromErrorAndOperation(n,l,e,a):l})}async function n4(n,e,t=!1){const a=await wc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return jl._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(n,e,t=!1){const{auth:a}=n;if(ui(a.app))return Promise.reject(co(a));const s="reauthenticate";try{const l=await wc(n,B1(a,s,e,n),t);$e(l.idToken,a,"internal-error");const c=D_(l.idToken);$e(c,a,"internal-error");const{sub:d}=c;return $e(n.uid===d,a,"user-mismatch"),jl._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Bi(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(n,e,t=!1){if(ui(n.app))return Promise.reject(co(n));const a="signIn",s=await B1(n,a,e),l=await jl._fromIdTokenResponse(n,a,s);return t||await n._updateCurrentUser(l.user),l}function a4(n,e,t,a){return Rn(n).onIdTokenChanged(e,t,a)}function s4(n,e,t){return Rn(n).beforeAuthStateChanged(e,t)}function o4(n,e,t,a){return Rn(n).onAuthStateChanged(e,t,a)}const Td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Td,"1"),this.storage.removeItem(Td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=1e3,u4=10;class H1 extends F1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=L1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!t&&this.localCache[a]===c||this.notifyListeners(a,c)},l=this.storage.getItem(a);zV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,u4):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},l4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}H1.type="LOCAL";const c4=H1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1 extends F1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}q1.type="SESSION";const G1=q1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new rm(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await h4(d);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=M_("",20);s.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(y),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(){return window}function d4(n){Ui().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){return typeof Ui().WorkerGlobalScope<"u"&&typeof Ui().importScripts=="function"}async function m4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function g4(){return $1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="firebaseLocalStorageDb",y4=1,bd="firebaseLocalStorage",Y1="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function im(n,e){return n.transaction([bd],e?"readwrite":"readonly").objectStore(bd)}function _4(){const n=indexedDB.deleteDatabase(K1);return new Xc(n).toPromise()}function yy(){const n=indexedDB.open(K1,y4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(bd,{keyPath:Y1})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(bd)?e(a):(a.close(),await _4(),e(await yy()))})})}async function mS(n,e,t){const a=im(n,!0).put({[Y1]:e,value:t});return new Xc(a).toPromise()}async function v4(n,e){const t=im(n,!1).get(e),a=await new Xc(t).toPromise();return a===void 0?null:a.value}function pS(n,e){const t=im(n,!0).delete(e);return new Xc(t).toPromise()}const E4=800,T4=3;class Q1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>T4)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rm._getInstance(g4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await m4(),!this.activeServiceWorker)return;this.sender=new f4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||p4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yy();return await mS(e,Td,"1"),await pS(e,Td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>mS(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>v4(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=im(s,!1).getAll();return new Xc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),E4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Q1.type="LOCAL";const b4=Q1;new Yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(n,e){return e?da(e):($e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends z1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Dl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function S4(n){return i4(n.auth,new P_(n),n.bypassAuthState)}function A4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),r4(t,new P_(n),n.bypassAuthState)}async function w4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),n4(t,new P_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S4;case"linkViaPopup":case"linkViaRedirect":return w4;case"reauthViaPopup":case"reauthViaRedirect":return A4;default:Bi(this.auth,"internal-error")}}resolve(e){va(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){va(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=new Yc(2e3,1e4);async function C4(n,e,t){if(ui(n.app))return Promise.reject(di(n,"operation-not-supported-in-this-environment"));const a=nm(n);bV(n,e,O_);const s=X1(a,t);return new oo(a,"signInViaPopup",e,s).executeNotNull()}class oo extends W1{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){va(this.filter.length===1,"Popup operations only handle one event");const e=M_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,R4.get())};e()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4="pendingRedirect",Ff=new Map;class D4 extends W1{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Ff.get(this.auth._key());if(!e){try{const a=await N4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Ff.set(this.auth._key(),e)}return this.bypassAuthState||Ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function N4(n,e){const t=M4(e),a=O4(n);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}function x4(n,e){Ff.set(n._key(),e)}function O4(n){return da(n._redirectPersistence)}function M4(n){return Bf(I4,n.config.apiKey,n.name)}async function P4(n,e,t=!1){if(ui(n.app))return Promise.reject(co(n));const a=nm(n),s=X1(a,e),c=await new D4(a,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=600*1e3;class k4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!L4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!J1(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(di(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=V4&&this.cachedEventUids.clear(),this.cachedEventUids.has(gS(e))}saveEventToCache(e){this.cachedEventUids.add(gS(e)),this.lastProcessedEventTime=Date.now()}}function gS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function J1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function L4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return J1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U4(n,e={}){return Xl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z4=/^https?/;async function B4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await U4(n);for(const t of e)try{if(F4(t))return}catch{}Bi(n,"unauthorized-domain")}function F4(n){const e=py(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===a}if(!z4.test(t))return!1;if(j4.test(n))return a===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=new Yc(3e4,6e4);function yS(){const n=Ui().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function q4(n){return new Promise((e,t)=>{var s,l,c;function a(){yS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yS(),t(di(n,"network-request-failed"))},timeout:H4.get()})}if((l=(s=Ui().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Ui().gapi)!=null&&c.load)a();else{const d=QV("iframefcb");return Ui()[d]=()=>{gapi.load?a():t(di(n,"network-request-failed"))},KV(`${YV()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Hf=null,e})}let Hf=null;function G4(n){return Hf=Hf||q4(n),Hf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new Yc(5e3,15e3),K4="__/auth/iframe",Y4="emulator/auth/iframe",Q4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},X4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W4(n){const e=n.config;$e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?C_(e,Y4):`https://${n.config.authDomain}/${K4}`,a={apiKey:e.apiKey,appName:n.name,v:Gl},s=X4.get(n.config.apiHost);s&&(a.eid=s);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${Vc(a).slice(1)}`}async function J4(n){const e=await G4(n),t=Ui().gapi;return $e(t,n,"internal-error"),e.open({where:document.body,url:W4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Q4,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const c=di(n,"network-request-failed"),d=Ui().setTimeout(()=>{l(c)},$4.get());function p(){Ui().clearTimeout(d),s(a)}a.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ek=500,tk=600,nk="_blank",rk="http://localhost";class _S{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ik(n,e,t,a=ek,s=tk){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const p={...Z4,width:a.toString(),height:s.toString(),top:l,left:c},g=Yn().toLowerCase();t&&(d=O1(g)?nk:t),N1(g)&&(e=e||rk,p.scrollbars="yes");const y=Object.entries(p).reduce((b,[R,k])=>`${b}${R}=${k},`,"");if(jV(g)&&d!=="_self")return ak(e||"",d),new _S(null);const E=window.open(e||"",d,y);$e(E,n,"popup-blocked");try{E.focus()}catch{}return new _S(E)}function ak(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="__/auth/handler",ok="emulator/auth/handler",lk=encodeURIComponent("fac");async function vS(n,e,t,a,s,l){$e(n.config.authDomain,n,"auth-domain-config-required"),$e(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:Gl,eventId:s};if(e instanceof O_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Hx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))c[y]=E}if(e instanceof Qc){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const p=await n._getAppCheckToken(),g=p?`#${lk}=${encodeURIComponent(p)}`:"";return`${uk(n)}?${Vc(d).slice(1)}${g}`}function uk({config:n}){return n.emulator?C_(n,ok):`https://${n.authDomain}/${sk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="webStorageSupport";class ck{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G1,this._completeRedirectFn=P4,this._overrideRedirectResult=x4}async _openPopup(e,t,a,s){var c;va((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await vS(e,t,a,py(),s);return ik(e,l,M_())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await vS(e,t,a,py(),s);return d4(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(va(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await J4(e),a=new k4(e);return t.register("authEvent",s=>($e(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kg,{type:kg},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[kg];l!==void 0&&t(!!l),Bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=B4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return L1()||x1()||N_()}}const hk=ck;var ES="@firebase/auth",TS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mk(n){xl(new po("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=a.options;$e(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U1(n)},g=new GV(a,s,l,p);return WV(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),xl(new po("auth-internal",e=>{const t=nm(e.getProvider("auth").getImmediate());return(a=>new fk(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(ES,TS,dk(n)),ms(ES,TS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=300,gk=MA("authIdTokenMaxAge")||pk;let bS=null;const yk=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>gk)return;const s=t==null?void 0:t.token;bS!==s&&(bS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function _k(n=jA()){const e=zy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=XV(n,{popupRedirectResolver:hk,persistence:[b4,c4,G1]}),a=MA("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const c=yk(l.toString());s4(t,c,()=>c(t.currentUser)),a4(t,d=>c(d))}}const s=xA("auth");return s&&JV(t,`http://${s}`),t}function vk(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}$V({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=s=>{const l=di("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",vk().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mk("Browser");const Ek={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function hl(n){const e=Ek[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const Tk={apiKey:hl("VITE_FIREBASE_API_KEY"),authDomain:hl("VITE_FIREBASE_AUTH_DOMAIN"),projectId:hl("VITE_FIREBASE_PROJECT_ID"),storageBucket:hl("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:hl("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:hl("VITE_FIREBASE_APP_ID")},Z1=UA(Tk),zl=_k(Z1),bk=new ha,Cn=aV(Z1),eR=P.createContext(void 0),Sk=({children:n})=>{const[e,t]=P.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),a=P.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);P.useEffect(()=>{a(e)},[e,a]);const s=P.useCallback(c=>{t(c),a(c);const d=zl.currentUser;if(d){const p=Wr(Cn,"users",d.uid);E1(p,{preferredTheme:c}).catch(g=>console.error("Error updating preferred theme in Firebase:",g))}},[a]),l=P.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return P.useEffect(()=>zl.onAuthStateChanged(async d=>{if(d){const p=Wr(Cn,"users",d.uid),g=await $c(p);if(g.exists()&&g.data().preferredTheme){const y=g.data().preferredTheme;t(y),a(y)}}}),[a]),A.jsx(eR.Provider,{value:{theme:e,toggleTheme:l,setTheme:s},children:n})},Ak="_spinner_5jyct_1",wk="_spinnerContainer_5jyct_19",SS={spinner:Ak,spinnerContainer:wk},Wl=({container:n=!0})=>{const e=A.jsx("div",{className:SS.spinner});return n?A.jsx("div",{className:SS.spinnerContainer,children:e}):e},Rk="_loadingContainer_1n1m5_1",Ck={loadingContainer:Rk},Bl=()=>A.jsx("div",{className:Ck.loadingContainer,children:A.jsx(Wl,{container:!1})}),Ik=()=>{const n=ct(a=>a.auth.firebaseUser),e=ct(a=>a.auth.userData);return ct(a=>a.auth.loading)?A.jsx(Bl,{}):n?e?e.isApproved?A.jsx(hs,{to:"/app/dashboard",replace:!0}):A.jsx(hs,{to:"/guest",replace:!0}):A.jsx(Bl,{}):A.jsx(hs,{to:"/login",replace:!0})};function Ln(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Dk=typeof Symbol=="function"&&Symbol.observable||"@@observable",AS=Dk,Lg=()=>Math.random().toString(36).substring(7).split("").join("."),Nk={INIT:`@@redux/INIT${Lg()}`,REPLACE:`@@redux/REPLACE${Lg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Lg()}`},Sd=Nk;function V_(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function tR(n,e,t){if(typeof n!="function")throw new Error(Ln(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Ln(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Ln(1));return t(tR)(n,e)}let a=n,s=e,l=new Map,c=l,d=0,p=!1;function g(){c===l&&(c=new Map,l.forEach((j,Y)=>{c.set(Y,j)}))}function y(){if(p)throw new Error(Ln(3));return s}function E(j){if(typeof j!="function")throw new Error(Ln(4));if(p)throw new Error(Ln(5));let Y=!0;g();const B=d++;return c.set(B,j),function(){if(Y){if(p)throw new Error(Ln(6));Y=!1,g(),c.delete(B),l=null}}}function b(j){if(!V_(j))throw new Error(Ln(7));if(typeof j.type>"u")throw new Error(Ln(8));if(typeof j.type!="string")throw new Error(Ln(17));if(p)throw new Error(Ln(9));try{p=!0,s=a(s,j)}finally{p=!1}return(l=c).forEach(B=>{B()}),j}function R(j){if(typeof j!="function")throw new Error(Ln(10));a=j,b({type:Sd.REPLACE})}function k(){const j=E;return{subscribe(Y){if(typeof Y!="object"||Y===null)throw new Error(Ln(11));function B(){const Z=Y;Z.next&&Z.next(y())}return B(),{unsubscribe:j(B)}},[AS](){return this}}}return b({type:Sd.INIT}),{dispatch:b,subscribe:E,getState:y,replaceReducer:R,[AS]:k}}function xk(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Sd.INIT})>"u")throw new Error(Ln(12));if(typeof t(void 0,{type:Sd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ln(13))})}function Ok(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const a=Object.keys(t);let s;try{xk(t)}catch(l){s=l}return function(c={},d){if(s)throw s;let p=!1;const g={};for(let y=0;y<a.length;y++){const E=a[y],b=t[E],R=c[E],k=b(R,d);if(typeof k>"u")throw d&&d.type,new Error(Ln(14));g[E]=k,p=p||k!==R}return p=p||a.length!==Object.keys(c).length,p?g:c}}function Ad(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...a)=>e(t(...a)))}function Mk(...n){return e=>(t,a)=>{const s=e(t,a);let l=()=>{throw new Error(Ln(15))};const c={getState:s.getState,dispatch:(p,...g)=>l(p,...g)},d=n.map(p=>p(c));return l=Ad(...d)(s.dispatch),{...s,dispatch:l}}}function Pk(n){return V_(n)&&"type"in n&&typeof n.type=="string"}var nR=Symbol.for("immer-nothing"),wS=Symbol.for("immer-draftable"),tr=Symbol.for("immer-state");function ci(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Dr=Object,Fl=Dr.getPrototypeOf,wd="constructor",am="prototype",_y="configurable",Rd="enumerable",qf="writable",Rc="value",Ea=n=>!!n&&!!n[tr];function pi(n){var e;return n?rR(n)||om(n)||!!n[wS]||!!((e=n[wd])!=null&&e[wS])||lm(n)||um(n):!1}var Vk=Dr[am][wd].toString(),RS=new WeakMap;function rR(n){if(!n||!k_(n))return!1;const e=Fl(n);if(e===null||e===Dr[am])return!0;const t=Dr.hasOwnProperty.call(e,wd)&&e[wd];if(t===Object)return!0;if(!El(t))return!1;let a=RS.get(t);return a===void 0&&(a=Function.toString.call(t),RS.set(t,a)),a===Vk}function sm(n,e,t=!0){Wc(n)===0?(t?Reflect.ownKeys(n):Dr.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((a,s)=>e(s,a,n))}function Wc(n){const e=n[tr];return e?e.type_:om(n)?1:lm(n)?2:um(n)?3:0}var CS=(n,e,t=Wc(n))=>t===2?n.has(e):Dr[am].hasOwnProperty.call(n,e),vy=(n,e,t=Wc(n))=>t===2?n.get(e):n[e],Cd=(n,e,t,a=Wc(n))=>{a===2?n.set(e,t):a===3?n.add(t):n[e]=t};function kk(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var om=Array.isArray,lm=n=>n instanceof Map,um=n=>n instanceof Set,k_=n=>typeof n=="object",El=n=>typeof n=="function",Ug=n=>typeof n=="boolean";function Lk(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var ca=n=>n.copy_||n.base_,L_=n=>n.modified_?n.copy_:n.base_;function Ey(n,e){if(lm(n))return new Map(n);if(um(n))return new Set(n);if(om(n))return Array[am].slice.call(n);const t=rR(n);if(e===!0||e==="class_only"&&!t){const a=Dr.getOwnPropertyDescriptors(n);delete a[tr];let s=Reflect.ownKeys(a);for(let l=0;l<s.length;l++){const c=s[l],d=a[c];d[qf]===!1&&(d[qf]=!0,d[_y]=!0),(d.get||d.set)&&(a[c]={[_y]:!0,[qf]:!0,[Rd]:d[Rd],[Rc]:n[c]})}return Dr.create(Fl(n),a)}else{const a=Fl(n);if(a!==null&&t)return{...n};const s=Dr.create(a);return Dr.assign(s,n)}}function U_(n,e=!1){return cm(n)||Ea(n)||!pi(n)||(Wc(n)>1&&Dr.defineProperties(n,{set:Rf,add:Rf,clear:Rf,delete:Rf}),Dr.freeze(n),e&&sm(n,(t,a)=>{U_(a,!0)},!1)),n}function Uk(){ci(2)}var Rf={[Rc]:Uk};function cm(n){return n===null||!k_(n)?!0:Dr.isFrozen(n)}var Id="MapSet",Ty="Patches",IS="ArrayMethods",iR={};function vo(n){const e=iR[n];return e||ci(0,n),e}var DS=n=>!!iR[n],Cc,aR=()=>Cc,jk=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:DS(Id)?vo(Id):void 0,arrayMethodsPlugin_:DS(IS)?vo(IS):void 0});function NS(n,e){e&&(n.patchPlugin_=vo(Ty),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function by(n){Sy(n),n.drafts_.forEach(zk),n.drafts_=null}function Sy(n){n===Cc&&(Cc=n.parent_)}var xS=n=>Cc=jk(Cc,n);function zk(n){const e=n[tr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function OS(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[tr].modified_&&(by(e),ci(4)),pi(n)&&(n=MS(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[tr].base_,n,e)}else n=MS(e,t);return Bk(e,n,!0),by(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==nR?n:void 0}function MS(n,e){if(cm(e))return e;const t=e[tr];if(!t)return Dd(e,n.handledSet_,n);if(!hm(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:a}=t;if(a)for(;a.length>0;)a.pop()(n);lR(t,n)}return t.copy_}function Bk(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&U_(e,t)}function sR(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var hm=(n,e)=>n.scope_===e,Fk=[];function oR(n,e,t,a){const s=ca(n),l=n.type_;if(a!==void 0&&vy(s,a,l)===e){Cd(s,a,t,l);return}if(!n.draftLocations_){const d=n.draftLocations_=new Map;sm(s,(p,g)=>{if(Ea(g)){const y=d.get(g)||[];y.push(p),d.set(g,y)}})}const c=n.draftLocations_.get(e)??Fk;for(const d of c)Cd(s,d,t,l)}function Hk(n,e,t){n.callbacks_.push(function(s){var d;const l=e;if(!l||!hm(l,s))return;(d=s.mapSetPlugin_)==null||d.fixSetContents(l);const c=L_(l);oR(n,l.draft_??l,c,t),lR(l,s)})}function lR(n,e){var a;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((a=n.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const l=s.getPath(n);l&&s.generatePatches_(n,l,e)}sR(n)}}function qk(n,e,t){const{scope_:a}=n;if(Ea(t)){const s=t[tr];hm(s,a)&&s.callbacks_.push(function(){Gf(n);const c=L_(s);oR(n,t,c,e)})}else pi(t)&&n.callbacks_.push(function(){const l=ca(n);n.type_===3?l.has(t)&&Dd(t,a.handledSet_,a):vy(l,e,n.type_)===t&&a.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&Dd(vy(n.copy_,e,n.type_),a.handledSet_,a)})}function Dd(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Ea(n)||e.has(n)||!pi(n)||cm(n)||(e.add(n),sm(n,(a,s)=>{if(Ea(s)){const l=s[tr];if(hm(l,t)){const c=L_(l);Cd(n,a,c,n.type_),sR(l)}}else pi(s)&&Dd(s,e,t)})),n}function Gk(n,e){const t=om(n),a={type_:t?1:0,scope_:e?e.scope_:aR(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,l=Nd;t&&(s=[a],l=Ic);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return a.draft_=d,a.revoke_=c,[d,a]}var Nd={get(n,e){if(e===tr)return n;let t=n.scope_.arrayMethodsPlugin_;const a=n.type_===1&&typeof e=="string";if(a&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=ca(n);if(!CS(s,e,n.type_))return $k(n,s,e);const l=s[e];if(n.finalized_||!pi(l)||a&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&Lk(e))return l;if(l===jg(n.base_,e)){Gf(n);const c=n.type_===1?+e:e,d=wy(n.scope_,l,n,c);return n.copy_[c]=d}return l},has(n,e){return e in ca(n)},ownKeys(n){return Reflect.ownKeys(ca(n))},set(n,e,t){const a=uR(ca(n),e);if(a!=null&&a.set)return a.set.call(n.draft_,t),!0;if(!n.modified_){const s=jg(ca(n),e),l=s==null?void 0:s[tr];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(kk(t,s)&&(t!==void 0||CS(n.base_,e,n.type_)))return!0;Gf(n),Ay(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),qk(n,e,t)),!0},deleteProperty(n,e){return Gf(n),jg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),Ay(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=ca(n),a=Reflect.getOwnPropertyDescriptor(t,e);return a&&{[qf]:!0,[_y]:n.type_!==1||e!=="length",[Rd]:a[Rd],[Rc]:t[e]}},defineProperty(){ci(11)},getPrototypeOf(n){return Fl(n.base_)},setPrototypeOf(){ci(12)}},Ic={};for(let n in Nd){let e=Nd[n];Ic[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}Ic.deleteProperty=function(n,e){return Ic.set.call(this,n,e,void 0)};Ic.set=function(n,e,t){return Nd.set.call(this,n[0],e,t,n[0])};function jg(n,e){const t=n[tr];return(t?ca(t):n)[e]}function $k(n,e,t){var s;const a=uR(e,t);return a?Rc in a?a[Rc]:(s=a.get)==null?void 0:s.call(n.draft_):void 0}function uR(n,e){if(!(e in n))return;let t=Fl(n);for(;t;){const a=Object.getOwnPropertyDescriptor(t,e);if(a)return a;t=Fl(t)}}function Ay(n){n.modified_||(n.modified_=!0,n.parent_&&Ay(n.parent_))}function Gf(n){n.copy_||(n.assigned_=new Map,n.copy_=Ey(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var Kk=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{if(El(e)&&!El(t)){const l=t;t=e;const c=this;return function(p=l,...g){return c.produce(p,y=>t.call(this,y,...g))}}El(t)||ci(6),a!==void 0&&!El(a)&&ci(7);let s;if(pi(e)){const l=xS(this),c=wy(l,e,void 0);let d=!0;try{s=t(c),d=!1}finally{d?by(l):Sy(l)}return NS(l,a),OS(s,l)}else if(!e||!k_(e)){if(s=t(e),s===void 0&&(s=e),s===nR&&(s=void 0),this.autoFreeze_&&U_(s,!0),a){const l=[],c=[];vo(Ty).generateReplacementPatches_(e,s,{patches_:l,inversePatches_:c}),a(l,c)}return s}else ci(1,e)},this.produceWithPatches=(e,t)=>{if(El(e))return(c,...d)=>this.produceWithPatches(c,p=>e(p,...d));let a,s;return[this.produce(e,t,(c,d)=>{a=c,s=d}),a,s]},Ug(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),Ug(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),Ug(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){pi(n)||ci(8),Ea(n)&&(n=Yk(n));const e=xS(this),t=wy(e,n,void 0);return t[tr].isManual_=!0,Sy(e),t}finishDraft(n,e){const t=n&&n[tr];(!t||!t.isManual_)&&ci(9);const{scope_:a}=t;return NS(a,e),OS(void 0,a)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const a=vo(Ty).applyPatches_;return Ea(n)?a(n,e):this.produce(n,s=>a(s,e))}};function wy(n,e,t,a){const[s,l]=lm(e)?vo(Id).proxyMap_(e,t):um(e)?vo(Id).proxySet_(e,t):Gk(e,t);return((t==null?void 0:t.scope_)??aR()).drafts_.push(s),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=a,t&&a!==void 0?Hk(t,l,a):l.callbacks_.push(function(p){var y;(y=p.mapSetPlugin_)==null||y.fixSetContents(l);const{patchPlugin_:g}=p;l.modified_&&g&&g.generatePatches_(l,[],p)}),s}function Yk(n){return Ea(n)||ci(10,n),cR(n)}function cR(n){if(!pi(n)||cm(n))return n;const e=n[tr];let t,a=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Ey(n,e.scope_.immer_.useStrictShallowCopy_),a=e.scope_.immer_.shouldUseStrictIteration()}else t=Ey(n,!0);return sm(t,(s,l)=>{Cd(t,s,cR(l))},a),e&&(e.finalized_=!1),t}var Qk=new Kk,hR=Qk.produce;function fR(n){return({dispatch:t,getState:a})=>s=>l=>typeof l=="function"?l(t,a,n):s(l)}var Xk=fR(),Wk=fR,Jk=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ad:Ad.apply(null,arguments)},Zk=n=>n&&typeof n.match=="function";function fc(n,e){function t(...a){if(e){let s=e(...a);if(!s)throw new Error(pa(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:a[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=a=>Pk(a)&&a.type===n,t}var dR=class rc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,rc.prototype)}static get[Symbol.species](){return rc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new rc(...e[0].concat(this)):new rc(...e.concat(this))}};function PS(n){return pi(n)?hR(n,()=>{}):n}function Cf(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function eL(n){return typeof n=="boolean"}var tL=()=>function(e){const{thunk:t=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=e??{};let c=new dR;return t&&(eL(t)?c.push(Xk):c.push(Wk(t.extraArgument))),c},nL="RTK_autoBatch",VS=n=>e=>{setTimeout(e,n)},rL=(n={type:"raf"})=>e=>(...t)=>{const a=e(...t);let s=!0,l=!1,c=!1;const d=new Set,p=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:VS(10):n.type==="callback"?n.queueNotification:VS(n.timeout),g=()=>{c=!1,l&&(l=!1,d.forEach(y=>y()))};return Object.assign({},a,{subscribe(y){const E=()=>s&&y(),b=a.subscribe(E);return d.add(y),()=>{b(),d.delete(y)}},dispatch(y){var E;try{return s=!((E=y==null?void 0:y.meta)!=null&&E[nL]),l=!s,l&&(c||(c=!0,p(g))),a.dispatch(y)}finally{s=!0}}})},iL=n=>function(t){const{autoBatch:a=!0}=t??{};let s=new dR(n);return a&&s.push(rL(typeof a=="object"?a:void 0)),s};function aL(n){const e=tL(),{reducer:t=void 0,middleware:a,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(V_(t))d=Ok(t);else throw new Error(pa(1));let p;typeof a=="function"?p=a(e):p=e();let g=Ad;s&&(g=Jk({trace:!1,...typeof s=="object"&&s}));const y=Mk(...p),E=iL(y);let b=typeof c=="function"?c(E):E();const R=g(...b);return tR(d,l,R)}function mR(n){const e={},t=[];let a;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(pa(28));if(d in e)throw new Error(pa(29));return e[d]=c,s},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return t.push({matcher:l,reducer:c}),s},addDefaultCase(l){return a=l,s}};return n(s),[e,t,a]}function sL(n){return typeof n=="function"}function oL(n,e){let[t,a,s]=mR(e),l;if(sL(n))l=()=>PS(n());else{const d=PS(n);l=()=>d}function c(d=l(),p){let g=[t[p.type],...a.filter(({matcher:y})=>y(p)).map(({reducer:y})=>y)];return g.filter(y=>!!y).length===0&&(g=[s]),g.reduce((y,E)=>{if(E)if(Ea(y)){const R=E(y,p);return R===void 0?y:R}else{if(pi(y))return hR(y,b=>E(b,p));{const b=E(y,p);if(b===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return y},d)}return c.getInitialState=l,c}var lL=(n,e)=>Zk(n)?n.match(e):n(e);function uL(...n){return e=>n.some(t=>lL(t,e))}var cL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",hL=(n=21)=>{let e="",t=n;for(;t--;)e+=cL[Math.random()*64|0];return e},fL=["name","message","stack","code"],zg=class{constructor(n,e){og(this,"_type");this.payload=n,this.meta=e}},kS=class{constructor(n,e){og(this,"_type");this.payload=n,this.meta=e}},dL=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of fL)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},LS="External signal was aborted",Pr=(()=>{function n(e,t,a){const s=fc(e+"/fulfilled",(p,g,y,E)=>({payload:p,meta:{...E||{},arg:y,requestId:g,requestStatus:"fulfilled"}})),l=fc(e+"/pending",(p,g,y)=>({payload:void 0,meta:{...y||{},arg:g,requestId:p,requestStatus:"pending"}})),c=fc(e+"/rejected",(p,g,y,E,b)=>({payload:E,error:(a&&a.serializeError||dL)(p||"Rejected"),meta:{...b||{},arg:y,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function d(p,{signal:g}={}){return(y,E,b)=>{const R=a!=null&&a.idGenerator?a.idGenerator(p):hL(),k=new AbortController;let z,j;function Y(G){j=G,k.abort()}g&&(g.aborted?Y(LS):g.addEventListener("abort",()=>Y(LS),{once:!0}));const B=(async function(){var ae,te;let G;try{let S=(ae=a==null?void 0:a.condition)==null?void 0:ae.call(a,p,{getState:E,extra:b});if(pL(S)&&(S=await S),S===!1||k.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const w=new Promise((I,O)=>{z=()=>{O({name:"AbortError",message:j||"Aborted"})},k.signal.addEventListener("abort",z,{once:!0})});y(l(R,p,(te=a==null?void 0:a.getPendingMeta)==null?void 0:te.call(a,{requestId:R,arg:p},{getState:E,extra:b}))),G=await Promise.race([w,Promise.resolve(t(p,{dispatch:y,getState:E,extra:b,requestId:R,signal:k.signal,abort:Y,rejectWithValue:(I,O)=>new zg(I,O),fulfillWithValue:(I,O)=>new kS(I,O)})).then(I=>{if(I instanceof zg)throw I;return I instanceof kS?s(I.payload,R,p,I.meta):s(I,R,p)})])}catch(S){G=S instanceof zg?c(null,R,p,S.payload,S.meta):c(S,R,p)}finally{z&&k.signal.removeEventListener("abort",z)}return a&&!a.dispatchConditionRejection&&c.match(G)&&G.meta.condition||y(G),G})();return Object.assign(B,{abort:Y,requestId:R,arg:p,unwrap(){return B.then(mL)}})}}return Object.assign(d,{pending:l,rejected:c,fulfilled:s,settled:uL(c,s),typePrefix:e})}return n.withTypes=()=>n,n})();function mL(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function pL(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var gL=Symbol.for("rtk-slice-createasyncthunk");function yL(n,e){return`${n}/${e}`}function _L({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[gL];return function(s){const{name:l,reducerPath:c=l}=s;if(!l)throw new Error(pa(11));const d=(typeof s.reducers=="function"?s.reducers(EL()):s.reducers)||{},p=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(Z,ae){const te=typeof Z=="string"?Z:Z.type;if(!te)throw new Error(pa(12));if(te in g.sliceCaseReducersByType)throw new Error(pa(13));return g.sliceCaseReducersByType[te]=ae,y},addMatcher(Z,ae){return g.sliceMatchers.push({matcher:Z,reducer:ae}),y},exposeAction(Z,ae){return g.actionCreators[Z]=ae,y},exposeCaseReducer(Z,ae){return g.sliceCaseReducersByName[Z]=ae,y}};p.forEach(Z=>{const ae=d[Z],te={reducerName:Z,type:yL(l,Z),createNotation:typeof s.reducers=="function"};bL(ae)?AL(te,ae,y,e):TL(te,ae,y)});function E(){const[Z={},ae=[],te=void 0]=typeof s.extraReducers=="function"?mR(s.extraReducers):[s.extraReducers],S={...Z,...g.sliceCaseReducersByType};return oL(s.initialState,w=>{for(let I in S)w.addCase(I,S[I]);for(let I of g.sliceMatchers)w.addMatcher(I.matcher,I.reducer);for(let I of ae)w.addMatcher(I.matcher,I.reducer);te&&w.addDefaultCase(te)})}const b=Z=>Z,R=new Map,k=new WeakMap;let z;function j(Z,ae){return z||(z=E()),z(Z,ae)}function Y(){return z||(z=E()),z.getInitialState()}function B(Z,ae=!1){function te(w){let I=w[Z];return typeof I>"u"&&ae&&(I=Cf(k,te,Y)),I}function S(w=b){const I=Cf(R,ae,()=>new WeakMap);return Cf(I,w,()=>{const O={};for(const[x,M]of Object.entries(s.selectors??{}))O[x]=vL(M,w,()=>Cf(k,w,Y),ae);return O})}return{reducerPath:Z,getSelectors:S,get selectors(){return S(te)},selectSlice:te}}const G={name:l,reducer:j,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:Y,...B(c),injectInto(Z,{reducerPath:ae,...te}={}){const S=ae??c;return Z.inject({reducerPath:S,reducer:j},te),{...G,...B(S,!0)}}};return G}}function vL(n,e,t,a){function s(l,...c){let d=e(l);return typeof d>"u"&&a&&(d=t()),n(d,...c)}return s.unwrapped=n,s}var wo=_L();function EL(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function TL({type:n,reducerName:e,createNotation:t},a,s){let l,c;if("reducer"in a){if(t&&!SL(a))throw new Error(pa(17));l=a.reducer,c=a.prepare}else l=a;s.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?fc(n,c):fc(n))}function bL(n){return n._reducerDefinitionType==="asyncThunk"}function SL(n){return n._reducerDefinitionType==="reducerWithPrepare"}function AL({type:n,reducerName:e},t,a,s){if(!s)throw new Error(pa(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:p,settled:g,options:y}=t,E=s(n,l,y);a.exposeAction(e,E),c&&a.addCase(E.fulfilled,c),d&&a.addCase(E.pending,d),p&&a.addCase(E.rejected,p),g&&a.addMatcher(E.settled,g),a.exposeCaseReducer(e,{fulfilled:c||If,pending:d||If,rejected:p||If,settled:g||If})}function If(){}function pa(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const wL={positions:[],loading:!1,error:null,fetched:!1},ys=Pr("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=Wr(Cn,"metadata","positions"),a=await $c(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),pR=Pr("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=Wr(Cn,"metadata","positions");return await S_(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),RL=wo({name:"positions",initialState:wL,reducers:{},extraReducers:n=>{n.addCase(ys.pending,e=>{e.loading=!0,e.error=null}).addCase(ys.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(ys.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(pR.fulfilled,(e,t)=>{e.positions=t.payload})}}),CL=RL.reducer,IL={teams:[],loading:!1,error:null,fetched:!1},ho=Pr("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=Wr(Cn,"metadata","teams"),a=await $c(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),$f=Pr("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=Wr(Cn,"metadata","teams");return await S_(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),gR=wo({name:"teams",initialState:IL,reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(ho.pending,e=>{e.loading=!0,e.error=null}).addCase(ho.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(ho.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase($f.pending,e=>{e.error=null}).addCase($f.fulfilled,(e,t)=>{e.teams=t.payload}).addCase($f.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:m6}=gR.actions,DL=gR.reducer,NL=()=>{const n=ei(),{firebaseUser:e,userData:t,loading:a}=ct(p=>p.auth),{fetched:s,loading:l}=ct(p=>p.teams),{fetched:c,loading:d}=ct(p=>p.positions);return P.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!s&&!l&&n(ho()),!c&&!d&&n(ys()))},[n,e,t,s,l,c,d]),a||t!=null&&t.isApproved&&(!s||!c)?A.jsx(Bl,{}):e?t?t.isApproved?A.jsx(TA,{}):A.jsx(hs,{to:"/guest",replace:!0}):A.jsx(Bl,{}):A.jsx(hs,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=(...n)=>n.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=n=>{const e=OL(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ML={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},p)=>P.createElement("svg",{ref:p,...ML,width:e,height:e,stroke:n,strokeWidth:a?Number(t)*24/Number(e):t,className:yR("lucide",s),...!l&&!PL(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,y])=>P.createElement(g,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=(n,e)=>{const t=P.forwardRef(({className:a,...s},l)=>P.createElement(VL,{ref:l,iconNode:e,className:yR(`lucide-${xL(US(n))}`,`lucide-${n}`,a),...s}));return t.displayName=US(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],_R=Fi("chevron-up",kL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],UL=Fi("copy",LL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],vR=Fi("corner-down-right",jL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],BL=Fi("moon",zL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],HL=Fi("panel-left-close",FL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],GL=Fi("panel-left-open",qL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ry=Fi("plus",$L);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],YL=Fi("sun",KL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ER=Fi("trash-2",QL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],WL=Fi("x",XL),JL=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},ZL={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:JL(),lastVisitedPaths:{}},TR=wo({name:"ui",initialState:ZL,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:a}=e.payload;n.lastVisitedPaths[t]=a},toggleTeamExpansion:(n,e)=>{const t=e.payload,a=n.expandedTeams.indexOf(t);a>=0?n.expandedTeams.splice(a,1):n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:a,userEmail:s}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][a]||(n.hiddenUsers[t][a]=[]);const l=n.hiddenUsers[t][a],c=l.indexOf(s);c>=0?l.splice(c,1):l.push(s),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))}}}),{setMobileSidebarOpen:ic,setDesktopSidebarExpanded:eU,setLastVisitedPath:tU,toggleTeamExpansion:nU,toggleUserVisibility:rU}=TR.actions,iU=TR.reducer,aU=()=>{const n=P.useContext(eR);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},sU="_themeToggleButton_yikav_1",oU={themeToggleButton:sU},fm=({showText:n,className:e})=>{const{theme:t,toggleTheme:a}=aU();return A.jsxs("button",{className:`${oU.themeToggleButton} ${e||""}`,onClick:a,"aria-label":"Toggle theme",children:[t==="dark"?A.jsx(YL,{size:20}):A.jsx(BL,{size:20}),n&&A.jsx("span",{children:"Toggle theme"})]})},lU="_mobileHeader_rrb9m_1",uU="_mobileHeaderPill_rrb9m_16",cU="_mobileHeaderPillDisabled_rrb9m_28",hU="_mobileHeaderPillActive_rrb9m_32",fU="_mobileHeaderText_rrb9m_43",dU="_mobileHeaderChevron_rrb9m_51",mU="_rotate_rrb9m_56",to={mobileHeader:lU,mobileHeaderPill:uU,mobileHeaderPillDisabled:cU,mobileHeaderPillActive:hU,mobileHeaderText:fU,mobileHeaderChevron:dU,rotate:mU},pU=({title:n,hasSideNav:e=!0})=>{const t=ei(),{isMobileSidebarOpen:a}=ct(l=>l.ui),s=()=>{e&&t(ic(!a))};return A.jsxs("header",{className:to.mobileHeader,children:[A.jsxs("div",{className:`${to.mobileHeaderPill} ${a?to.mobileHeaderPillActive:""} ${e?"":to.mobileHeaderPillDisabled}`,onClick:s,children:[A.jsx("span",{className:to.mobileHeaderText,children:n}),e&&A.jsx(_R,{className:`${to.mobileHeaderChevron} ${a?to.rotate:""}`})]}),A.jsx(fm,{})]})};var tn=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(tn||{}),bl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(bl||{});const j_=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],jS=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],gU="_bottomNavContainer_1o01e_1",yU="_bottomNav_1o01e_1",_U="_bottomNavBtn_1o01e_19",vU="_bottomNavBtnActive_1o01e_42",Df={bottomNavContainer:gU,bottomNav:yU,bottomNavBtn:_U,bottomNavBtnActive:vU},EU=()=>{const n=To(),e=Zr(),{lastVisitedPaths:t}=ct(l=>l.ui),a=e.pathname.includes("/settings")?tn.SETTINGS:e.pathname.includes("/dashboard")?tn.DASHBOARD:tn.ROSTER,s=l=>{if(a===l){l===tn.DASHBOARD&&n("/app/dashboard");return}const c=t[l];n(c||`/app/${l}`)};return A.jsx("nav",{className:Df.bottomNavContainer,children:A.jsx("div",{className:Df.bottomNav,children:j_.map(l=>A.jsxs("button",{className:`${Df.bottomNavBtn} ${a===l.id?Df.bottomNavBtnActive:""}`,onClick:()=>s(l.id),children:[A.jsx("span",{children:l.icon}),A.jsx("span",{children:l.label})]},l.id))})})},TU="_sideNav_wbcy2_1",bU="_menuOpen_wbcy2_21",SU="_sidebarContent_wbcy2_27",AU="_tabletSidebarHeader_wbcy2_34",wU="_sideMenuList_wbcy2_38",RU="_sidenavMenuSubheading_wbcy2_43",CU="_sideNavItem_wbcy2_67",IU="_sideNavItemActive_wbcy2_95",DU="_sideEmoji_wbcy2_102",NU="_loading_wbcy2_109",xU="_sidebarToggleButton_wbcy2_116",OU="_sidebarFooter_wbcy2_117",MU="_sidebarCollapsed_wbcy2_173",PU="_adminOnlySectionWrapper_wbcy2_194",At={sideNav:TU,menuOpen:bU,sidebarContent:SU,tabletSidebarHeader:AU,sideMenuList:wU,sidenavMenuSubheading:RU,sideNavItem:CU,sideNavItemActive:IU,sideEmoji:DU,loading:NU,sidebarToggleButton:xU,sidebarFooter:OU,sidebarCollapsed:MU,adminOnlySectionWrapper:PU},VU=()=>{var ae;const n=To(),e=Zr(),t=Vd(),a=ei(),{userData:s}=ct(te=>te.auth),{isDesktopSidebarExpanded:l,isMobileSidebarOpen:c,expandedTeams:d}=ct(te=>te.ui),{teams:p,fetched:g,loading:y}=ct(te=>te.teams),{fetched:E}=ct(te=>te.positions),b=e.pathname.includes("/settings")?tn.SETTINGS:e.pathname.includes("/dashboard")?tn.DASHBOARD:tn.ROSTER,{teamName:R,positionName:k,section:z}=t,j=k||z;P.useEffect(()=>{g||a(ho()),E||a(ys())},[a,g,E]);const Y=P.useCallback(te=>{n(te)},[n]),B=te=>{a(nU(te))},G=()=>{const te=j_.find(w=>w.id===b),S=te?te.label:"GIG ROSTER";return R&&j?`${R}  ${j}`:R||(j?`${S}  ${j}`:S)},Z=[At.sideNav,c?At.menuOpen:"",l?"":At.sidebarCollapsed].filter(Boolean).join(" ");return A.jsxs("aside",{className:Z,children:[A.jsxs("div",{className:At.sidebarContent,children:[A.jsxs("div",{className:At.tabletSidebarHeader,children:[l&&A.jsx("h3",{children:G()}),A.jsx("button",{className:At.sidebarToggleButton,onClick:()=>a(eU(!l)),"aria-label":l?"Collapse sidebar":"Expand sidebar",children:l?A.jsx(HL,{size:20}):A.jsx(GL,{size:20})})]}),A.jsxs("nav",{className:At.sideMenuList,children:[b===tn.ROSTER&&y&&A.jsx("div",{className:`${At.sideNavItem} ${At.loading}`,children:"Loading teams..."}),b===tn.ROSTER?(ae=s==null?void 0:s.teams)==null?void 0:ae.map(te=>{var O,x;const S=p.find(M=>M.name===te);if(!S)return null;const w=s.teams.length===1,I=w||d.includes(S.name);return A.jsxs("div",{children:[!w&&A.jsxs("div",{className:`${At.sidenavMenuSubheading} ${At.sidenavMenuSubheadingClickable}`,style:{cursor:"pointer"},onClick:()=>B(S.name),children:[A.jsxs("div",{children:[S.emoji," ",l&&S.name]}),A.jsx("span",{className:At.expandIcon,children:I?"":""})]}),I&&A.jsxs("div",{className:At.sideNavSubItems,children:[(x=(O=S.positions)==null?void 0:O.filter(M=>!M.parentId))==null?void 0:x.map(M=>{const D=j===M.name&&R===S.name;return A.jsxs("button",{className:`${At.sideNavItem} ${At.sideNavItemSub} ${D?At.sideNavItemActive:""}`,onClick:()=>{Y(`/app/roster/${S.name}/${M.name}`),a(ic(!1))},style:{borderLeft:D?`4px solid ${M.colour}`:"4px solid transparent",backgroundColor:D?`${M.colour}15`:"transparent",color:D?M.colour:""},children:[A.jsx("span",{className:At.sideEmoji,children:M.emoji})," ",l&&M.name]},M.name)}),A.jsxs("button",{className:`${At.sideNavItem} ${At.sideNavItemSub} ${j==="Absence"&&R===S.name?At.sideNavItemActive:""}`,onClick:()=>{Y(`/app/roster/${S.name}/Absence`),a(ic(!1))},style:{borderLeft:j==="Absence"&&R===S.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:j==="Absence"&&R===S.name?"var(--background-toggle-off-transparent)":"transparent"},children:[A.jsx("span",{className:At.sideEmoji,children:""})," ",l&&"Absence"]})]})]},S.name)}):jS.filter(te=>!te.adminOnly).map(te=>A.jsxs("button",{className:`${At.sideNavItem} ${j===te.id?At.sideNavItemActive:""}`,onClick:()=>{Y(`/app/settings/${te.id}`),a(ic(!1))},children:[A.jsx("span",{className:At.sideEmoji,children:te.icon})," ",l&&te.label]},te.id))]})]}),(s==null?void 0:s.isAdmin)&&b===tn.SETTINGS&&A.jsxs("div",{className:At.adminOnlySectionWrapper,children:[A.jsx("div",{className:At.sidenavMenuSubheading,children:l&&A.jsx("h4",{children:"Admin Only"})}),jS.filter(te=>te.adminOnly).map(te=>A.jsxs("button",{className:`${At.sideNavItem} ${j===te.id?At.sideNavItemActive:""}`,onClick:()=>{Y(`/app/settings/${te.id}`),a(ic(!1))},children:[A.jsx("span",{className:At.sideEmoji,children:te.icon})," ",l&&te.label]},te.id))]}),A.jsx("div",{className:At.sidebarFooter,children:A.jsx(fm,{showText:l})})]})},kU="_layoutWrapper_1iqp0_1",LU="_innerWrapper_1iqp0_13",UU="_mainContent_1iqp0_21",fl={layoutWrapper:kU,innerWrapper:LU,mainContent:UU},jU=()=>{const n=ei(),e=To(),t=Zr(),a=Vd(),{userData:s}=ct(j=>j.auth),{teams:l}=ct(j=>j.teams),{isMobileSidebarOpen:c,isDesktopSidebarExpanded:d,lastVisitedPaths:p}=ct(j=>j.ui),g=t.pathname.includes("/settings")?tn.SETTINGS:t.pathname.includes("/dashboard")?tn.DASHBOARD:tn.ROSTER,{teamName:y,positionName:E,section:b}=a,R=E||b||null,k=g!==tn.DASHBOARD;P.useEffect(()=>{const j=g===tn.ROSTER&&!y,Y=g===tn.SETTINGS&&!R;if(t.pathname.startsWith("/app/")&&!j&&!Y&&g!==tn.DASHBOARD){const B=t.pathname+t.search;n(tU({tabId:g,path:B}))}},[t.pathname,t.search,g,y,R,n]),P.useEffect(()=>{var G,Z;const j=t.pathname==="/app"||t.pathname==="/app/",Y=g===tn.ROSTER&&!y,B=g===tn.SETTINGS&&!R;if(j)e(p[tn.DASHBOARD]||"/app/dashboard",{replace:!0});else if(Y){const ae=p[tn.ROSTER];if(ae)e(ae,{replace:!0});else if((G=s==null?void 0:s.teams)!=null&&G[0]&&l.length>0){const te=l.find(S=>S.name===s.teams[0]);(Z=te==null?void 0:te.positions)!=null&&Z[0]&&e(`/app/roster/${te.name}/${te.positions[0].name}`,{replace:!0})}}else if(B){const ae=p[tn.SETTINGS];e(ae||`/app/settings/${bl.PROFILE}`,{replace:!0})}},[g,y,R,s,l,e,t.pathname,t.search,p]);const z=()=>{const j=j_.find(B=>B.id===g),Y=j?j.label:"GIG ROSTER";return y&&R?`${y}  ${R}`:y||(R?`${Y}  ${R}`:Y)};return A.jsxs("div",{className:`${fl.layoutWrapper} ${c?fl.menuOpen:""} ${d?fl.sidebarExpanded:fl.sidebarCollapsed}`,children:[k&&A.jsx(VU,{}),A.jsxs("div",{className:fl.innerWrapper,children:[A.jsx(pU,{title:z(),hasSideNav:k}),A.jsx("main",{className:fl.mainContent,children:A.jsx(TA,{})}),A.jsx(EU,{})]})]})},zU="_rosterSaveFooter_xkueo_1",BU="_saveFooterContent_xkueo_23",FU="_changesLabel_xkueo_32",HU="_saveFooterActions_xkueo_37",qU="_saveBtn_xkueo_42",GU="_cancelBtn_xkueo_57",$U="_sidebarCollapsed_xkueo_77",KU="_noSidebar_xkueo_81",rs={rosterSaveFooter:zU,saveFooterContent:BU,changesLabel:FU,saveFooterActions:HU,saveBtn:qU,cancelBtn:GU,sidebarCollapsed:$U,noSidebar:KU},Jl=({label:n="You have unsaved changes",onSave:e,onCancel:t,isSaving:a,saveText:s="Save",discardText:l="Discard",hasSideNav:c=!0})=>{const{isDesktopSidebarExpanded:d}=ct(g=>g.ui),p=[rs.rosterSaveFooter,c?"":rs.noSidebar,!d&&c?rs.sidebarCollapsed:""].filter(Boolean).join(" ");return A.jsx("div",{className:p,children:A.jsxs("div",{className:rs.saveFooterContent,children:[A.jsx("span",{className:rs.changesLabel,children:n}),A.jsxs("div",{className:rs.saveFooterActions,children:[A.jsx("button",{className:rs.cancelBtn,onClick:t,disabled:a,children:l}),A.jsx("button",{className:rs.saveBtn,onClick:e,disabled:a,children:a?"Saving...":s})]})]})})},bR=n=>{const e=[];return Object.entries(n).forEach(([t,a])=>{a.forEach(s=>{e.push(`${t}|${s}`)})}),e},SR=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${a}`},Nl=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),YU={entries:{},dirtyEntries:{},loading:!1,saving:!1,error:null},dc=Pr("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Gc(Fc(Cn,"roster")),a=await Kc(t),s={};return a.docs.forEach(l=>{const c=l.data(),d=c.updatedAt,p={...c,updatedAt:d&&typeof d=="object"&&"toMillis"in d?d.toMillis():d};s[l.id]={...p,id:l.id}}),s}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),mc=Pr("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=b1(Cn),a=Date.now(),s={};return Object.values(n).forEach(l=>{const c=Wr(Cn,"roster",l.id),d={...l,updatedAt:a};t.set(c,d),s[l.id]=d}),await t.commit(),s}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),AR=wo({name:"roster",initialState:YU,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:a,userIdentifier:s,positionGroupNames:l,maxConflict:c}=e.payload,d=n.dirtyEntries[t]||n.entries[t];let p;d?p=JSON.parse(JSON.stringify(d)):p={id:t,date:t,teams:{},absence:{}},p.teams[a]||(p.teams[a]={});const g=p.teams[a][s]||[],y=l.findIndex(k=>g.includes(k)),E=y>=0?l[y]:null;let b=null;E===null?b=l[0]:y<l.length-1?b=l[y+1]:b=null;const R=g.filter(k=>!l.includes(k));if(b)if(R.length<c)R.push(b);else{n.error=`User already has ${c} assignment(s) in this team.`;return}R.length===0?delete p.teams[a][s]:p.teams[a][s]=R,n.dirtyEntries[t]=p},updateLocalEventName(n,e){const{date:t,eventName:a}=e.payload,s=n.dirtyEntries[t]||n.entries[t];let l;s?l=JSON.parse(JSON.stringify(s)):l={id:t,date:t,teams:{},absence:{}},l.eventName=a,n.dirtyEntries[t]=l},resetRosterEdits(n){n.dirtyEntries={},n.error=null},updateLocalAbsence(n,e){var p;const{date:t,userIdentifier:a,reason:s,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let d;c?d=JSON.parse(JSON.stringify(c)):d={id:t,date:t,teams:{},absence:{}},l?d.absence[a]={reason:s??((p=d.absence[a])==null?void 0:p.reason)??""}:delete d.absence[a],n.dirtyEntries[t]=d}},extraReducers:n=>{n.addCase(dc.pending,e=>{e.loading=!0,e.error=null}).addCase(dc.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(dc.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(mc.pending,e=>{e.saving=!0,e.error=null}).addCase(mc.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(mc.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:p6,updateLocalAssignment:QU,updateLocalEventName:XU,resetRosterEdits:wR,updateLocalAbsence:zS}=AR.actions,WU=AR.reducer,Kf=(n,e,t)=>{const a=[],s=new Date;s.setHours(0,0,0,0);const l=s.getFullYear(),c=e||l,d=t||l,p={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g=n.map(R=>p[R]);let y;c===l?y=new Date(s):y=new Date(c,0,1),y.setHours(0,0,0,0);const E=new Date(d,11,31);E.setHours(23,59,59,999);const b=new Date(y);for(;b.getTime()<=E.getTime();)g.includes(b.getDay())&&a.push(new Date(b)),b.setDate(b.getDate()+1);return a.sort((R,k)=>R.getTime()-k.getTime()),a.map(R=>SR(R))},JU=(n,e,t=5)=>{const a=[],s=new Date(e);s.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(p=>l[p]),d=new Date(s);for(;a.length<t;){d.setDate(d.getDate()-1),c.includes(d.getDay())&&a.push(new Date(d));const p=new Date(s);if(p.setFullYear(p.getFullYear()-1),d<p)break}return a.map(p=>SR(p)).sort()},ZU={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},Yf=Pr("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=Fc(Cn,"users"),a=Gc(t,T_("teams","array-contains",n)),s=await Kc(a),l=[];return s.forEach(c=>{l.push(c.data())}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),Qf=Pr("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:a})=>{if(!n||!e)return[];try{const c=a().positions.positions.filter(R=>R.parentId===e),p=[e,...c.map(R=>R.name)].map(R=>`${n}|${R}`),g=Fc(Cn,"users"),y=Gc(g,T_("indexedAssignments","array-contains-any",p)),E=await Kc(y),b=[];return E.forEach(R=>{b.push(R.data())}),b.sort((R,k)=>(R.name||"").localeCompare(k.name||""))}catch(s){return console.error("Error fetching users:",s),t("Failed to load users.")}}),Xf=Pr("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=Wr(Cn,"metadata","teams"),a=await $c(t);if(a.exists()){const s=a.data();return(Array.isArray(s.list)?s.list.map(d=>({...d,preferredDays:d.preferredDays||[],positions:d.positions||[]})):[]).find(d=>d.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),RR=wo({name:"rosterView",initialState:ZU,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=JU(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=Kf(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,a=Kf(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...a]}}},extraReducers:n=>{n.addCase(Qf.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(Qf.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(Qf.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(Yf.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(Yf.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(Yf.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(Xf.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(Xf.fulfilled,(e,t)=>{var a;e.currentTeamData=t.payload,(a=t.payload)!=null&&a.preferredDays&&(e.rosterDates=Kf(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(Xf.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:ej,resetToUpcomingDates:tj,loadNextYearDates:nj}=RR.actions,rj=RR.reducer,ij="_dashboardContainer_otgys_1",aj="_dashboardHeader_otgys_10",sj="_dashboardHeaderActions_otgys_24",oj="_clearPastBtn_otgys_32",lj="_eventNameContainer_otgys_48",uj="_dashboardEventNameInput_otgys_55",cj="_dashboardEventNameInputHasEvent_otgys_79",hj="_carouselOuterWrapper_otgys_90",fj="_eventsCarouselTrack_otgys_98",dj="_eventCardWrapper_otgys_112",mj="_peek_otgys_123",pj="_active_otgys_129",gj="_eventCardDate_otgys_135",yj="_dashboardTodayBadge_otgys_147",_j="_teamCardsContainer_otgys_158",vj="_teamEventCard_otgys_166",Ej="_dashboardThemeToggle_otgys_174",Tj="_teamEventHeader_otgys_178",bj="_teamCardEmoji_otgys_197",Sj="_teamCardName_otgys_201",Aj="_copyRosterBtn_otgys_205",wj="_teamEventDetails_otgys_226",Rj="_posAssignmentRow_otgys_232",Cj="_posEmojiLabel_otgys_238",Ij="_assignedNames_otgys_244",Dj="_unassigned_otgys_250",Nj="_carouselPagination_otgys_258",xj="_dashboardEmpty_otgys_267",kt={dashboardContainer:ij,dashboardHeader:aj,dashboardHeaderActions:sj,clearPastBtn:oj,eventNameContainer:lj,dashboardEventNameInput:uj,dashboardEventNameInputHasEvent:cj,carouselOuterWrapper:hj,eventsCarouselTrack:fj,eventCardWrapper:dj,peek:mj,active:pj,eventCardDate:gj,dashboardTodayBadge:yj,teamCardsContainer:_j,teamEventCard:vj,dashboardThemeToggle:Ej,teamEventHeader:Tj,teamCardEmoji:bj,teamCardName:Sj,copyRosterBtn:Aj,teamEventDetails:wj,posAssignmentRow:Rj,posEmojiLabel:Cj,assignedNames:Ij,unassigned:Dj,carouselPagination:Nj,dashboardEmpty:xj},Oj=()=>{const n=ei(),[e,t]=ux(),a=e.get("date"),{userData:s}=ct($=>$.auth),{teams:l}=ct($=>$.teams),{entries:c,dirtyEntries:d,loading:p,saving:g}=ct($=>$.roster),{positions:y}=ct($=>$.positions),[E,b]=P.useState([]),[R,k]=P.useState(!1),[z,j]=P.useState(0),[Y,B]=P.useState(0),[G,Z]=P.useState(!1),ae=P.useRef(null),te=P.useRef(!1),S=Object.keys(d).length>0;P.useEffect(()=>{n(dc())},[n]),P.useEffect(()=>{const $=ae.current;if(!$)return;const oe=new ResizeObserver(ce=>{for(const ye of ce){const Te=ye.contentRect.width;Te>0&&B(Te)}});return oe.observe($),()=>oe.disconnect()},[p,R]);const w=P.useMemo(()=>{const $=Nl();if(!(s!=null&&s.teams)||l.length===0)return[];const oe=l.filter(Te=>s.teams.includes(Te.name)),ce=new Set;oe.forEach(Te=>{Kf(Te.preferredDays).forEach(Ke=>ce.add(Ke))});const ye=Array.from(ce).sort();return a&&a<$?[a]:ye.filter(Te=>{const Ue=Te;if(a===Ue)return!0;const Ke=c[Ue]||d[Ue];return Ke?oe.some(ot=>{var In;const Yt=((In=Ke.teams)==null?void 0:In[ot.name])||{};return Object.values(Yt).some(Et=>Et.length>0)}):!1})},[s,l,c,d,a]);P.useEffect(()=>{if(w.length===0||!ae.current||p||Y===0)return;const $=ae.current,oe=(ce,ye)=>{const Te=$.offsetWidth||Y;Te!==0&&($.style.scrollSnapType="none",$.scrollTo({left:Te*ce,behavior:ye?"smooth":"auto"}),setTimeout(()=>{$&&($.style.scrollSnapType="x mandatory"),Z(!0)},50),j(ce),te.current=!0)};if(a){const ce=w.findIndex(ye=>ye===a);if(ce>=0){const ye=Math.round($.scrollLeft/($.offsetWidth||Y||1));!te.current||ye!==ce?requestAnimationFrame(()=>{oe(ce,te.current)}):Z(!0)}else Z(!0)}else $.scrollLeft!==0?oe(0,!0):Z(!0),te.current=!0},[a,w,p,Y]);const I=()=>{t({},{replace:!0})};P.useEffect(()=>{(async()=>{if(!(!(s!=null&&s.teams)||s.teams.length===0)){k(!0);try{const oe=Fc(Cn,"users"),ce=Gc(oe,T_("teams","array-contains-any",s.teams)),ye=await Kc(ce),Te=[];ye.forEach(Ue=>Te.push(Ue.data())),b(Te)}catch(oe){console.error("Error fetching users for dashboard:",oe)}finally{k(!1)}}})()},[s==null?void 0:s.teams]);const O=P.useCallback($=>{if(!$||!(s!=null&&s.teams)||l.length===0)return null;const oe=$,ce=d[oe]||c[oe],Ue=l.filter(Ke=>s.teams.includes(Ke.name)).map(Ke=>{var bn;const ot=((bn=ce==null?void 0:ce.teams)==null?void 0:bn[Ke.name])||{},Yt=[],In=Ke.positions.map(Qt=>Qt.name);let Et=0;return In.forEach(Qt=>{const ne=y.find(Re=>Re.name===Qt),_e=[];Object.entries(ot).forEach(([Re,we])=>{if(we.includes(Qt)){const Fe=E.find(Lt=>Lt.email===Re);Fe?_e.push(Fe):_e.push({email:Re,name:Re}),Et++}});const Le=[..._e].sort((Re,we)=>ne!=null&&ne.sortByGender&&Re.gender!==we.gender?Re.gender==="Male"?-1:we.gender==="Male"?1:(Re.gender||"").localeCompare(we.gender||""):(Re.name||"").localeCompare(we.name||""));Yt.push({posName:Qt,emoji:(ne==null?void 0:ne.emoji)||"",names:Le.map(Re=>Re.name||Re.email||"Unknown")})}),{teamName:Ke.name,teamEmoji:Ke.emoji,positions:Yt,hasAssignments:Et>0}}).filter(Ke=>Ke.hasAssignments);return Ue.length>0?Ue:null},[c,d,s,l,y,E]),x=($,oe,ce,ye)=>{let Ke=`${new Date($).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"})} - ${ce} ${oe}
`;ye.forEach(ot=>{const Yt=ot.names.length>0?ot.names.join(", "):"-";Ke+=`${ot.emoji}: ${Yt}
`}),navigator.clipboard.writeText(Ke).then(()=>{})},M=()=>{if(!ae.current)return;const $=ae.current,oe=$.offsetWidth,ce=Math.round($.scrollLeft/oe);if(ce!==z&&w[ce]){j(ce);const ye=w[ce];if(a!==ye){const Te=Nl();ce===0&&Te===ye?t({},{replace:!0}):t({date:ye},{replace:!0})}}},D=($,oe)=>{n(XU({date:$,eventName:oe}))},pe=()=>{n(mc(d))},Se=()=>{n(wR())};if(p||R)return A.jsx(Wl,{});if(w.length===0)return A.jsxs("div",{className:kt.dashboardEmpty,children:[A.jsx("h2",{children:"No upcoming events found"}),A.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const H=w[z],fe=Nl(),ge=H&&H<fe,Pe=ge?"Previous Event":"Upcoming Events",Me=$=>new Date($).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),U=($,oe=!1)=>{const ce=O($);return ce?A.jsx("div",{className:kt.teamCardsContainer,children:ce.map(ye=>A.jsxs("div",{className:kt.teamEventCard,children:[A.jsxs("div",{className:kt.teamEventHeader,children:[A.jsxs("h3",{children:[A.jsx("span",{className:kt.teamCardEmoji,children:ye.teamEmoji}),A.jsx("span",{className:kt.teamCardName,children:ye.teamName})]}),!oe&&A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[A.jsx(fm,{className:kt.dashboardThemeToggle}),A.jsxs("button",{className:kt.copyRosterBtn,onClick:()=>x($,ye.teamName,ye.teamEmoji,ye.positions),title:"Copy to clipboard",children:[A.jsx(UL,{size:16})," Copy"]})]})]}),A.jsx("div",{className:kt.teamEventDetails,children:ye.positions.map(Te=>A.jsxs("div",{className:kt.posAssignmentRow,children:[A.jsx("span",{className:kt.posEmojiLabel,title:Te.posName,children:Te.emoji}),A.jsx("span",{className:`${kt.assignedNames} ${Te.names.length===0?kt.unassigned:""}`,children:Te.names.length>0?Te.names.join(", "):"Unassigned"})]},Te.posName))})]},ye.teamName))}):null};return A.jsxs("div",{className:kt.dashboardContainer,children:[A.jsxs("div",{className:kt.dashboardHeader,children:[A.jsx("h1",{children:Pe}),A.jsx("div",{className:kt.dashboardHeaderActions,children:ge&&A.jsx("button",{className:kt.clearPastBtn,onClick:I,children:"Reset to upcoming"})})]}),A.jsx("div",{className:kt.carouselOuterWrapper,style:{opacity:G?1:0,transition:"opacity 0.3s ease-in-out"},children:A.jsx("div",{className:kt.eventsCarouselTrack,ref:ae,onScroll:M,children:w.map(($,oe)=>{const ce=$,ye=d[ce]||c[ce],Te=(ye==null?void 0:ye.eventName)||"";return A.jsxs("div",{className:`${kt.eventCardWrapper} ${oe===z?kt.active:kt.peek}`,children:[A.jsx("div",{className:kt.eventNameContainer,children:A.jsx("input",{type:"text",className:`${kt.dashboardEventNameInput} ${Te?kt.dashboardEventNameInputHasEvent:""}`,placeholder:"Event name (e.g. Easter Sunday)",value:Te,onChange:Ue=>D($,Ue.target.value),disabled:oe!==z})}),A.jsxs("div",{className:kt.eventCardDate,children:[Me($),$===fe&&A.jsx("span",{className:kt.dashboardTodayBadge,children:"TODAY"})]}),U($,oe!==z)]},$)})})}),A.jsxs("div",{className:kt.carouselPagination,children:[z+1," / ",w.length]}),S&&A.jsx(Jl,{label:"Unsaved event labels",saveText:"Save Changes",onSave:pe,onCancel:Se,isSaving:g,hasSideNav:!1})]})},Mj="_button_1huns_1",Pj="_primary_1huns_26",Vj="_secondary_1huns_31",kj="_icon_1huns_42",Lj="_small_1huns_48",Nf={button:Mj,primary:Pj,secondary:Vj,delete:"_delete_1huns_36",icon:kj,small:Lj},Mi=({variant:n="primary",size:e="medium",isIcon:t=!1,className:a="",children:s,...l})=>{const c=[Nf.button,Nf[n],e==="small"?Nf.small:"",t?Nf.icon:"",a].filter(Boolean).join(" ");return A.jsx("button",{className:c,...l,children:s})},Uj="_pillGroup_ti99d_1",jj="_pillGroupNowrap_ti99d_9",zj="_pill_ti99d_1",Bj="_pillActive_ti99d_35",Fj="_pillDisabled_ti99d_40",Hj="_pillText_ti99d_61",Sl={pillGroup:Uj,pillGroupNowrap:jj,pill:zj,pillActive:Bj,pillDisabled:Fj,pillText:Hj},fo=({children:n,nowrap:e})=>A.jsx("div",{className:`${Sl.pillGroup} ${e?Sl.pillGroupNowrap:""}`,children:n}),Nr=({colour:n,isDropdown:e,isActive:t,isDisabled:a,minWidth:s,onClick:l,children:c})=>{const[d,p]=P.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),A.jsxs("div",{className:`${Sl.pill} ${Sl.pillText} ${t?Sl.pillActive:""} ${a?Sl.pillDisabled:""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:s?`${s}px`:"fit-content"},onClick:g=>{a||(p(y=>!y),l&&l(g))},children:[c,e&&A.jsx(_R,{style:{rotate:d?"90deg":"0"}})]})},qj={firebaseUser:null,userData:null,loading:!0,error:null},Wf=Pr("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=Wr(Cn,"users",n),a=await $c(t);if(!a.exists()){const s="chris.sm.kang542@gmail.com",l=zl.currentUser,c=(l==null?void 0:l.email)===s,d={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await S_(t,d),d}return a.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),Jf=Pr("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const a=Wr(Cn,"users",n),s={...e};return s.teamPositions&&(s.indexedAssignments=bR(s.teamPositions)),await E1(a,s),s}catch(a){return t(a instanceof Error?a.message:"Failed to update profile")}}),CR=wo({name:"auth",initialState:qj,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(Wf.pending,e=>{e.loading=!0,e.error=null}).addCase(Wf.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(Wf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Jf.pending,e=>{e.error=null}).addCase(Jf.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(Jf.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:Gj,setUserData:$j,setLoading:g6,logout:Kj}=CR.actions,Yj=CR.reducer,Qj="_formGroup_163vy_1",Xj="_formInput_163vy_16",Wj="_formSelect_163vy_52",Jj="_colorInput_163vy_86",Zj="_fieldHint_163vy_104",Oi={formGroup:Qj,formInput:Xj,formSelect:Wj,colorInput:Jj,fieldHint:Zj},e3="_profileCard_1v6ck_1",t3="_profileReadonly_1v6ck_19",n3="_teamPositionsSection_1v6ck_37",r3="_sectionLabel_1v6ck_43",i3="_teamPositionGroup_1v6ck_53",a3="_teamPositionHeader_1v6ck_57",s3="_actionContainer_1v6ck_67",no={profileCard:e3,profileReadonly:t3,teamPositionsSection:n3,sectionLabel:r3,teamPositionGroup:i3,teamPositionHeader:a3,actionContainer:s3},IR=({className:n})=>{const e=ei(),{userData:t,firebaseUser:a}=ct(w=>w.auth),{teams:s,fetched:l}=ct(w=>w.teams),{fetched:c}=ct(w=>w.positions),[d,p]=P.useState((t==null?void 0:t.name)||""),[g,y]=P.useState((t==null?void 0:t.gender)||""),[E,b]=P.useState((t==null?void 0:t.isActive)??!0),[R,k]=P.useState((t==null?void 0:t.teams)||[]),[z,j]=P.useState((t==null?void 0:t.teamPositions)||{}),[Y,B]=P.useState("idle");P.useEffect(()=>{l||e(ho()),c||e(ys())},[e,l,c]);const G=P.useMemo(()=>{if(!t)return!1;const w={name:d,gender:g,isActive:E,teams:R,teamPositions:z},I={name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}};return JSON.stringify(w)!==JSON.stringify(I)},[d,g,E,R,z,t]),Z=async()=>{if(a){B("saving");try{const w={name:d,gender:g,isActive:E,teams:R,teamPositions:z};await e(Jf({uid:a.uid,data:w})).unwrap(),B("success"),setTimeout(()=>B("idle"),2e3)}catch(w){console.error(w),B("idle")}}},ae=()=>{t&&(p(t.name||""),y(t.gender||""),b(t.isActive??!0),k(t.teams||[]),j(t.teamPositions||{}))},te=w=>{k(I=>{const O=I.includes(w),x=O?I.filter(M=>M!==w):[...I,w];return j(M=>{const D={...M};return O?delete D[w]:D[w]||(D[w]=[]),D}),x})},S=(w,I)=>{j(O=>{const x=O[w]||[],M=x.includes(I)?x.filter(D=>D!==I):[...x,I];return{...O,[w]:M}})};return t?A.jsxs("section",{className:`${no.profileCard} ${n||""}`,children:[A.jsx("div",{className:no.profileReadonly,children:A.jsxs("p",{children:[A.jsx("strong",{children:"Email:"})," ",t.email]})}),A.jsxs("div",{className:Oi.formGroup,children:[A.jsx("label",{children:"Name"}),A.jsx("input",{type:"text",value:d,onChange:w=>p(w.target.value),className:Oi.formInput})]}),A.jsxs("div",{className:Oi.formGroup,children:[A.jsx("label",{children:"Gender"}),A.jsx(fo,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(w=>A.jsx(Nr,{colour:w.colour,onClick:()=>y(w.value),isActive:g===w.value,children:w.value},w.value))})]}),A.jsxs("div",{className:Oi.formGroup,children:[A.jsx("label",{children:"My Teams"}),A.jsx(fo,{children:s.map(w=>{const I=R.includes(w.name);return A.jsxs(Nr,{onClick:()=>te(w.name),isActive:I,children:[A.jsx("span",{children:w.emoji})," ",w.name]},w.name)})})]}),R.length>0&&A.jsxs("div",{className:no.teamPositionsSection,children:[A.jsx("label",{className:no.sectionLabel,children:"Positions per Team"}),R.map(w=>{var O,x;const I=s.find(M=>M.name===w);return I?A.jsxs("div",{className:no.teamPositionGroup,children:[A.jsxs("div",{className:no.teamPositionHeader,children:[I.emoji," ",I.name]}),A.jsx(fo,{children:(x=(O=I.positions)==null?void 0:O.filter(M=>!M.parentId))==null?void 0:x.map(M=>{var pe;const D=(pe=z[w])==null?void 0:pe.includes(M.name);return A.jsxs(Nr,{onClick:()=>S(w,M.name),isActive:D,colour:M.colour,children:[A.jsx("span",{children:M.emoji})," ",M.name]},M.name)})})]},w):null})]}),A.jsxs("div",{className:Oi.formGroup,children:[A.jsx("label",{children:"Availability Status"}),A.jsx(Nr,{colour:E?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>b(!E),isActive:!0,children:E?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),A.jsx("p",{className:Oi.fieldHint,children:"Turn off if you want to be hidden from the roster."})]}),A.jsx("div",{className:no.actionContainer,children:A.jsx(Mi,{variant:"delete",onClick:()=>zl.signOut(),children:"Logout"})}),G&&A.jsx(Jl,{label:"Unsaved profile changes",saveText:"Update Profile",onSave:Z,onCancel:ae,isSaving:Y==="saving"})]}):A.jsx("div",{children:"Loading profile..."})},o3="_guestContainer_1m4dd_1",l3="_profileCardOverride_1m4dd_14",u3="_guestHeader_1m4dd_21",c3="_brandTitle_1m4dd_28",h3="_guestThemeToggleContainer_1m4dd_32",f3="_pendingLabel_1m4dd_38",dl={guestContainer:o3,profileCardOverride:l3,guestHeader:u3,brandTitle:c3,guestThemeToggleContainer:h3,pendingLabel:f3},d3=()=>{const{userData:n,firebaseUser:e,loading:t}=ct(a=>a.auth);return t?A.jsx(Bl,{}):e?n?n.isApproved?A.jsx(hs,{to:"/app",replace:!0}):A.jsxs("div",{className:dl.guestContainer,children:[A.jsxs("header",{className:dl.guestHeader,children:[A.jsx("h2",{className:dl.brandTitle,children:"God is Good"}),A.jsx("p",{className:dl.pendingLabel,children:"PENDING ADMIN APPROVAL"}),A.jsx("div",{className:dl.guestThemeToggleContainer,children:A.jsx(fm,{})})]}),A.jsx(IR,{className:dl.profileCardOverride})]}):A.jsx(Bl,{}):A.jsx(hs,{to:"/login",replace:!0})},m3="_loginContainer_12x6v_1",p3="_loginHeader_12x6v_12",g3="_brandTitle_12x6v_16",y3="_brandSubtitle_12x6v_24",_3="_loginButtonContainer_12x6v_33",v3="_loginButton_12x6v_33",E3="_google_12x6v_57",ro={loginContainer:m3,loginHeader:p3,brandTitle:g3,brandSubtitle:y3,loginButtonContainer:_3,loginButton:v3,google:E3},T3=()=>{const{firebaseUser:n,loading:e}=ct(a=>a.auth),t=()=>C4(zl,bk);return e?null:n?A.jsx(hs,{to:"/",replace:!0}):A.jsxs("div",{className:ro.loginContainer,children:[A.jsxs("header",{className:ro.loginHeader,children:[A.jsx("h1",{className:ro.brandTitle,children:"God is Good"}),A.jsx("p",{className:ro.brandSubtitle,children:"Worship Team Roster"})]}),A.jsx("div",{className:ro.loginButtonContainer,children:A.jsxs("button",{onClick:t,className:`${ro.loginButton} ${ro.google}`,children:[A.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},b3=()=>{const n=ei(),e=To(),{teamName:t,positionName:a}=Vd(),{users:s,allTeamUsers:l,rosterDates:c,currentTeamData:d,loadingUsers:p,loadingTeam:g,loadingAllTeamUsers:y,error:E}=ct(ne=>ne.rosterView),{entries:b,dirtyEntries:R,saving:k,error:z}=ct(ne=>ne.roster),{teams:j}=ct(ne=>ne.teams),{positions:Y}=ct(ne=>ne.positions),{hiddenUsers:B}=ct(ne=>ne.ui),[G,Z]=P.useState(null),[ae,te]=P.useState(null),S=Object.keys(R).length>0,w=P.useMemo(()=>Y.find(ne=>ne.name===a),[Y,a]),I=P.useMemo(()=>d?d.positions.filter(ne=>ne.name!==a):[],[d,a]),O=P.useMemo(()=>{var ne;return!t||!a?[]:((ne=B[t])==null?void 0:ne[a])||[]},[B,t,a]),x=P.useMemo(()=>{const ne=s.filter(_e=>_e.email&&!O.includes(_e.email)&&_e.isActive);return w!=null&&w.sortByGender?ne.sort((_e,Le)=>_e.gender===Le.gender?(_e.name||"").localeCompare(Le.name||""):_e.gender==="Male"?-1:Le.gender==="Male"?1:(_e.gender||"").localeCompare(Le.gender||"")):ne},[s,w,O]),M=P.useMemo(()=>{if(!(w!=null&&w.sortByGender)||x.length===0)return-1;const ne=x.findIndex(_e=>_e.gender==="Female");return ne>0&&ne<x.length?ne:-1},[w,x]),D=ne=>{!t||!a||n(rU({teamName:t,positionName:a,userEmail:ne}))},pe=()=>{n(ej())},Se=()=>{n(tj())},H=()=>{n(nj())},fe=ne=>{ge(ne)&&e(`/app/dashboard?date=${ne}`)},ge=P.useCallback(ne=>{const _e=ne.split("T")[0],Le=R[_e]||b[_e];return Le?Object.values(Le.teams).some(Re=>Object.values(Re).some(we=>we.length>0)):!1},[b,R]),Pe=P.useCallback(ne=>{if(!ae||!t)return[];const _e=ne.split("T")[0],Le=R[_e]||b[_e];return!Le||!Le.teams[t]?[]:Object.entries(Le.teams[t]).filter(([,Re])=>Re.includes(ae)).map(([Re])=>{const we=l.find(Fe=>Fe.email===Re);return(we==null?void 0:we.name)||Re})},[ae,t,R,b,l]);P.useEffect(()=>{n(dc())},[n]),P.useEffect(()=>{a&&t&&a!=="Absence"&&n(Qf({teamName:t,positionName:a}))},[a,t,n]),P.useEffect(()=>{t&&(n(Xf(t)),n(Yf(t)))},[t,n]);const Me=P.useCallback((ne,_e)=>{const Le=ne,Re=R[Le]||b[Le];return!!(Re&&Re.absence&&Re.absence[_e])},[R,b]),U=P.useCallback((ne,_e)=>{var we,Fe;const Le=ne,Re=R[Le]||b[Le];return((Fe=(we=Re==null?void 0:Re.absence)==null?void 0:we[_e])==null?void 0:Fe.reason)||""},[R,b]),$=P.useCallback((ne,_e)=>{if(!t||!a||a==="Absence")return!1;if(Me(ne,_e))return!0;const Le=ne,Re=R[Le]||b[Le],we=j.find(Dt=>Dt.name===t),Fe=(we==null?void 0:we.maxConflict)||1;if(!Re||!Re.teams[t]||!Re.teams[t][_e])return!1;const Lt=Re.teams[t][_e],Rt=Y.filter(Dt=>Dt.parentId===a),je=[a,...Rt.map(Dt=>Dt.name)];return Lt.some(Dt=>je.includes(Dt))?!1:Lt.length>=Fe},[t,a,Me,R,b,j,Y]),oe=P.useCallback((ne,_e,Le,Re)=>{if(!t||!a||a==="Absence"||$(ne,_e)){Z({row:Le,col:Re,table:"roster"});return}Z({row:Le,col:Re,table:"roster"});const we=j.find(je=>je.name===t),Fe=(we==null?void 0:we.maxConflict)||1,Lt=Y.filter(je=>je.parentId===a),Rt=[a,...Lt.map(je=>je.name)];n(QU({date:ne,teamName:t,userIdentifier:_e,positionGroupNames:Rt,maxConflict:Fe}))},[n,t,a,$,j,Y]),ce=P.useCallback((ne,_e,Le,Re)=>{Z({row:Le,col:Re,table:"absence"});const we=Me(ne,_e);n(zS({date:ne,userIdentifier:_e,isAbsent:!we}))},[n,Me]),ye=P.useCallback((ne,_e,Le)=>{n(zS({date:ne,userIdentifier:_e,reason:Le,isAbsent:!0}))},[n]),Te=P.useCallback(()=>{n(mc(R))},[n,R]),Ue=P.useCallback(()=>{n(wR()),Z(null)},[n]),Ke=(ne,_e)=>{var Lt;const Le=ne,Re=R[Le]||b[Le];if(!Re||!t)return"";const we=((Lt=Re.teams[t])==null?void 0:Lt[_e])||[],Fe=[];return Object.entries(Re.teams).forEach(([Rt,je])=>{Rt!==t&&je[_e]&&Fe.push({team:Rt,positions:je[_e]})}),we.length===0&&Fe.length===0?"":A.jsxs("div",{className:"assigned-positions",children:[we.map(Rt=>{const je=Y.find(Ye=>Ye.name===Rt);return A.jsx("span",{title:`${t}: ${Rt}`,className:"pos-emoji",children:(je==null?void 0:je.emoji)||""},Rt)}),Fe.map(Rt=>Rt.positions.map(je=>{const Ye=Y.find(Dt=>Dt.name===je);return A.jsx("span",{title:`${Rt.team}: ${je}`,className:"pos-emoji other-team-emoji",children:(Ye==null?void 0:Ye.emoji)||""},`${Rt.team}-${je}`)}))]})};P.useEffect(()=>{const ne=_e=>{const Le=_e.target;if(Le.tagName==="INPUT"||Le.tagName==="TEXTAREA"||!G)return;const{row:Re,col:we,table:Fe}=G,Lt=c,Rt=Fe==="roster"?x:l;switch(_e.key){case"ArrowUp":_e.preventDefault(),Re>0&&Z({row:Re-1,col:we,table:Fe});break;case"ArrowDown":_e.preventDefault(),Re<Lt.length-1&&Z({row:Re+1,col:we,table:Fe});break;case"ArrowLeft":_e.preventDefault(),we>0&&Z({row:Re,col:we-1,table:Fe});break;case"ArrowRight":_e.preventDefault(),we<Rt.length-1&&Z({row:Re,col:we+1,table:Fe});break;case"Tab":_e.preventDefault(),_e.shiftKey?Re>0&&Z({row:Re-1,col:we,table:Fe}):Re<Lt.length-1&&Z({row:Re+1,col:we,table:Fe});break;case" ":{_e.preventDefault();const je=c[Re],Ye=Rt[we];Ye!=null&&Ye.email&&(Fe==="roster"?oe(je,Ye.email,Re,we):ce(je,Ye.email,Re,we));break}case"Enter":S&&(_e.preventDefault(),Te());break;case"Escape":S&&(_e.preventDefault(),Ue());break}};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[G,c,x,l,S,oe,ce,Te,Ue]);const ot=P.useMemo(()=>{const ne=Nl();return c.length===0?!1:c[0]<ne},[c]),Yt=P.useMemo(()=>{const ne=Nl();return c.find(_e=>_e.split("T")[0]>=ne)},[c]),In=P.useMemo(()=>{if(!Yt||!t||!a)return[];const ne=Yt.split("T")[0],_e=R[ne]||b[ne];if(!_e||!_e.teams[t])return[];const Le=Y.filter(we=>we.parentId===a),Re=[a,...Le.map(we=>we.name)];return Object.entries(_e.teams[t]).filter(([,we])=>we.some(Fe=>Re.includes(Fe))).map(([we])=>we)},[Yt,t,a,R,b,Y]),Et=P.useCallback(ne=>{const _e=Nl(),Le=ne.split("T")[0];return Le<_e?"past-date":Le===_e?"today-date":"future-date"},[]);if(p||g||y)return A.jsx(Wl,{});const bn=E||z;if(bn)return A.jsxs("div",{className:"roster-table-error",children:["Error: ",bn]});const Qt=a==="Absence";return!Qt&&x.length===0?A.jsxs("div",{className:"roster-table-loading",children:[!Qt&&O.length>0&&A.jsxs("div",{className:"hidden-members-bar",children:[A.jsx("span",{className:"hidden-members-label",children:"Hidden Members:"}),A.jsx("div",{className:"hidden-members-list",children:O.map(ne=>{const _e=s.find(Le=>Le.email===ne);return A.jsxs("button",{className:"unhide-pill",onClick:()=>D(ne),title:"Click to unhide",children:[(_e==null?void 0:_e.name)||ne," ",A.jsx("span",{children:"+"})]},ne)})})]}),"No users found for this position."]}):A.jsxs("div",{className:"roster-table-wrapper",children:[!Qt&&O.length>0&&A.jsxs("div",{className:"hidden-members-bar",children:[A.jsx("span",{className:"hidden-members-label",children:"Hidden Members:"}),A.jsx("div",{className:"hidden-members-list",children:O.map(ne=>{const _e=s.find(Le=>Le.email===ne);return A.jsxs("button",{className:"unhide-pill",onClick:()=>D(ne),title:"Click to unhide",children:[(_e==null?void 0:_e.name)||ne," ",A.jsx("span",{children:"+"})]},ne)})})]}),Qt?A.jsxs("div",{className:"roster-section absence-section",children:[A.jsx("div",{className:"roster-table-container",children:A.jsxs("table",{className:"roster-table absence-table",children:[A.jsx("thead",{children:A.jsxs("tr",{children:[A.jsx("th",{className:"roster-table-header-cell sticky-col sticky-header",children:A.jsxs("div",{className:"date-header-content",children:["Date",A.jsxs("div",{className:"date-header-actions",children:[A.jsx("button",{className:"load-prev-btn",onClick:pe,title:"Load 5 previous dates",children:""}),ot&&A.jsx("button",{className:"load-prev-btn reset-dates-btn",onClick:Se,title:"Hide previous dates",children:""})]})]})}),l.map(ne=>A.jsx("th",{className:`roster-table-header-cell sticky-header ${ne.email&&In.includes(ne.email)?"highlighted-header":""}`,children:ne.name},ne.email)),A.jsx("th",{className:"gender-divider-cell sticky-header"}),A.jsx("th",{className:"roster-table-header-cell sticky-header sticky-right peek-header",children:A.jsxs("select",{className:"peek-selector",value:ae||"",onChange:ne=>te(ne.target.value||null),children:[A.jsx("option",{value:"",children:"Peek Position..."}),I.map(ne=>A.jsxs("option",{value:ne.name,children:[ne.emoji," ",ne.name]},ne.name))]})})]})}),A.jsx("tbody",{children:c.map((ne,_e)=>{const Le=ne.split("T")[0],Re=R[Le]||b[Le],we=Re==null?void 0:Re.eventName,Fe=Et(ne),Lt=Fe==="today-date",Rt=ge(ne);return A.jsxs("tr",{className:`${Fe} ${Rt?"":"no-data"} ${we?"special-event-row":""} ${ne===Yt?"closest-next-date-row":""}`,children:[A.jsx("td",{className:`date-cell sticky-col ${Rt?"clickable":""}`,onClick:()=>fe(ne),title:we,children:A.jsxs("div",{className:"date-cell-content",children:[we&&A.jsx("span",{className:"special-event-dot"}),new Date(ne.replace(/-/g,"/")).toLocaleDateString(),Lt&&A.jsx("span",{className:"roster-today-dot",title:"Today"})]})}),l.map((je,Ye)=>{const Dt=(G==null?void 0:G.row)===_e&&(G==null?void 0:G.col)===Ye&&(G==null?void 0:G.table)==="absence",nr=je.email?Me(ne,je.email):!1,Qn=je.email?U(ne,je.email):"",an=ne===Yt&&je.email&&In.includes(je.email);return A.jsx("td",{className:`roster-cell clickable absence-roster-cell ${Dt?"focused":""} ${nr?"absent-cell":""} ${an?"highlighted-cell":""}`,onClick:()=>{je.email&&ce(ne,je.email,_e,Ye)},tabIndex:0,onFocus:()=>Z({row:_e,col:Ye,table:"absence"}),title:Qn,children:nr?A.jsxs("div",{className:"absence-input-container",children:[A.jsx("input",{type:"text",className:"absence-reason-input",value:Qn,placeholder:"Reason...",maxLength:20,autoFocus:Dt,onClick:Sn=>Sn.stopPropagation(),onChange:Sn=>{je.email&&ye(ne,je.email,Sn.target.value)}}),A.jsx("button",{className:"remove-absence-btn",onClick:Sn=>{Sn.stopPropagation(),je.email&&ce(ne,je.email,_e,Ye)},title:"Mark as present",children:""})]}):""},je.email)}),A.jsx("td",{className:"gender-divider-cell"}),A.jsx("td",{className:"roster-cell peek-cell sticky-right",children:Pe(ne).join(", ")||""})]},ne)})})]})}),A.jsx("div",{className:"load-more-footer",children:A.jsx("button",{className:"load-next-year-btn",onClick:H,children:"Load Next Year "})})]}):A.jsxs("div",{className:"roster-section",children:[A.jsx("div",{className:"roster-table-container",children:A.jsxs("table",{className:"roster-table",children:[A.jsx("thead",{children:A.jsxs("tr",{children:[A.jsx("th",{className:"roster-table-header-cell sticky-col sticky-header",children:A.jsxs("div",{className:"date-header-content",children:["Date",A.jsxs("div",{className:"date-header-actions",children:[A.jsx("button",{className:"load-prev-btn",onClick:pe,title:"Load 5 previous dates",children:""}),ot&&A.jsx("button",{className:"load-prev-btn reset-dates-btn",onClick:Se,title:"Hide previous dates",children:""})]})]})}),x.map((ne,_e)=>A.jsxs(P.Fragment,{children:[M===_e&&A.jsx("th",{className:"gender-divider-cell sticky-header"}),A.jsxs("th",{className:`roster-table-header-cell sticky-header clickable-header ${ne.email&&In.includes(ne.email)?"highlighted-header":""}`,onClick:()=>ne.email&&D(ne.email),title:"Click to hide member",children:[ne.name,(w==null?void 0:w.sortByGender)&&A.jsxs("span",{className:"gender-label",children:["(",ne.gender==="Male"?"M":ne.gender==="Female"?"F":"?",")"]})]})]},ne.email)),A.jsx("th",{className:"gender-divider-cell sticky-header"}),A.jsx("th",{className:"roster-table-header-cell sticky-header sticky-right peek-header",children:A.jsxs("select",{className:"peek-selector",value:ae||"",onChange:ne=>te(ne.target.value||null),children:[A.jsx("option",{value:"",children:"Peek Position..."}),I.map(ne=>A.jsxs("option",{value:ne.name,children:[ne.emoji," ",ne.name]},ne.name))]})})]})}),A.jsx("tbody",{children:c.map((ne,_e)=>{const Le=ne.split("T")[0],Re=R[Le]||b[Le],we=Re==null?void 0:Re.eventName,Fe=Et(ne),Lt=Fe==="today-date",Rt=ge(ne);return A.jsxs("tr",{className:`${Fe} ${Rt?"":"no-data"} ${we?"special-event-row":""} ${ne===Yt?"closest-next-date-row":""}`,children:[A.jsx("td",{className:`date-cell sticky-col ${Rt?"clickable":""}`,onClick:()=>fe(ne),title:we,children:A.jsxs("div",{className:"date-cell-content",children:[we&&A.jsx("span",{className:"special-event-dot"}),Lt&&A.jsx("span",{className:"roster-today-dot",title:"Today"}),new Date(ne.replace(/-/g,"/")).toLocaleDateString()]})}),x.map((je,Ye)=>{const Dt=(G==null?void 0:G.row)===_e&&(G==null?void 0:G.col)===Ye&&(G==null?void 0:G.table)==="roster",nr=je.email?$(ne,je.email):!1,Qn=je.email?Me(ne,je.email):!1,an=ne===Yt&&je.email&&In.includes(je.email);return A.jsxs(P.Fragment,{children:[M===Ye&&A.jsx("td",{className:"gender-divider-cell"}),A.jsx("td",{className:`roster-cell ${nr?"disabled":"clickable"} ${Dt?"focused":""} ${Qn?"absent-strike":""} ${an?"highlighted-cell":""}`,onClick:()=>{je.email&&!nr&&oe(ne,je.email,_e,Ye)},tabIndex:0,onFocus:()=>Z({row:_e,col:Ye,table:"roster"}),children:je.email&&(Qn?A.jsx("span",{title:U(ne,je.email),children:""}):Ke(ne,je.email))})]},je.email)}),A.jsx("td",{className:"gender-divider-cell"}),A.jsx("td",{className:"roster-cell peek-cell sticky-right",children:Pe(ne).join(", ")||""})]},ne)})})]})}),A.jsx("div",{className:"load-more-footer",children:A.jsx("button",{className:"load-next-year-btn",onClick:H,children:"Load Next Year "})})]}),S&&A.jsx(Jl,{onSave:Te,onCancel:Ue,isSaving:k,saveText:"Save Roster"})]})},S3="_rosterPage_z6eme_1",A3={rosterPage:S3},w3=()=>A.jsx("div",{className:A3.rosterPage,children:A.jsx(b3,{})}),R3="_appTableContainer_1bvz5_1",C3="_appTable_1bvz5_1",I3="_colorPickerGroup_1bvz5_44",D3="_stickyCol_1bvz5_54",Dc={appTableContainer:R3,appTable:C3,colorPickerGroup:I3,stickyCol:D3},N3=({text:n,textAlign:e="left",width:t,minWidth:a,isSticky:s=!1})=>A.jsx("th",{className:s?Dc.stickyCol:void 0,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:a?`${a}px`:"auto"},children:n}),dn=({isSticky:n=!1,textAlign:e="left",className:t,children:a})=>A.jsx("td",{style:{textAlign:e,display:e==="center"?"table-cell":void 0},className:`${t||""} ${n?Dc.stickyCol:""}
`,children:A.jsx("div",{style:{display:"flex",justifyContent:e==="center"?"center":e==="right"?"flex-end":"flex-start",alignItems:"center",gap:"8px",height:"100%"},children:a})}),Qr=({name:n,value:e,placeholder:t,type:a="text",isSticky:s,isReadOnly:l=!1,isChild:c=!1,onChange:d})=>A.jsxs(dn,{isSticky:s,children:[c&&A.jsx(vR,{}),A.jsx("input",{name:n,className:Oi.formInput,type:a,placeholder:t,value:e,onChange:d,readOnly:l})]}),BS=({name:n,value:e,placeholder:t,onChange:a})=>A.jsxs(dn,{className:Dc.colorPickerGroup,children:[A.jsx("input",{name:n,type:"color",className:Oi.colorInput,value:e||"#FFFFFF",onChange:a}),A.jsx("input",{name:n,className:Oi.formInput,value:e,placeholder:t,onChange:a})]}),z_=({headers:n,children:e})=>A.jsx("div",{className:Dc.appTableContainer,children:A.jsxs("table",{className:Dc.appTable,children:[A.jsx("thead",{children:A.jsx("tr",{children:n.map((t,a)=>A.jsx(N3,{...t},a))})}),A.jsx("tbody",{children:e})]})}),x3="_settingsContainer_1c9s2_1",O3="_managementWrapper_1c9s2_13",dm={settingsContainer:x3,managementWrapper:O3},Bg={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},M3=()=>{const n=ei(),{positions:e,fetched:t,loading:a}=ct(B=>B.positions),[s,l]=P.useState(e),[c,d]=P.useState(Bg),[p,g]=P.useState("idle"),y=P.useMemo(()=>{const B=G=>G.map(Z=>({name:Z.name||"",emoji:Z.emoji||"",colour:Z.colour||"",parentId:Z.parentId||void 0,sortByGender:!!Z.sortByGender}));return JSON.stringify(B(s))!==JSON.stringify(B(e))},[s,e]);P.useEffect(()=>{t||n(ys())},[n,t]),P.useEffect(()=>{l(e)},[e]);const E=(B,G,Z)=>{const ae=[...s];ae[B]={...ae[B],[G]:Z},l(ae)},b=(B,G)=>{const Z=[...s],ae=Z[B],te=ae.parentId,S=w=>{const I=Z[w];if(!I)return{block:[],startIndex:-1,endIndex:-1};const O=[],x=[I],M=new Set;let D=w,pe=w,Se=0;for(;Se<x.length;){const fe=x[Se++];M.has(fe.name)||(M.add(fe.name),O.push(fe),Z.forEach((ge,Pe)=>{ge.parentId===fe.name&&!M.has(ge.name)&&(x.push(ge),D=Math.min(D,Pe),pe=Math.max(pe,Pe))}))}return{block:O,startIndex:D,endIndex:pe}};if(te){const w=Z.filter(Se=>Se.parentId===te),O=w.findIndex(Se=>Se.name===ae.name)+(G==="up"?-1:1);if(O<0||O>=w.length)return;const x=w[O],M=Z.indexOf(ae),D=Z.indexOf(x);if(M===-1||D===-1)return;const pe=[...Z];pe[M]=x,pe[D]=ae,l(pe)}else{const w=S(B),{block:I,startIndex:O,endIndex:x}=w;if(!I||I.length===0)return;if(G==="up"){if(O===0)return;let M=O-1;for(;M>=0&&Z[M].parentId;)M--;if(M<0)return;const D=S(M),{block:pe,startIndex:Se}=D;if(!pe||pe.length===0)return;const H=[...Z.slice(0,Se),...I,...pe,...Z.slice(x+1)].filter(Boolean);l(H)}else{if(x===Z.length-1)return;let M=x+1;for(;M<Z.length&&Z[M].parentId;)M++;if(M>=Z.length)return;const D=S(M),{block:pe,startIndex:Se}=D;if(!pe||pe.length===0)return;const H=[...Z.slice(0,O),...pe,...I,...Z.slice(Se+pe.length)].filter(Boolean);l(H)}}},R=()=>{if(!c.name.trim()||!c.emoji.trim())return alert("Please provide both an emoji and a name.");l([...s,c]),d(Bg)},k=B=>{if(window.confirm("Delete this position? This will remove it from the global list, and any associated child positions.")){const G=s[B];let Z=s.filter((ae,te)=>te!==B);G.parentId||(Z=Z.filter(ae=>ae.parentId!==G.name)),l(Z)}},z=async()=>{g("saving");try{const B=s.map(G=>{const Z={name:G.name||"",emoji:G.emoji||"",colour:G.colour||"",sortByGender:!!G.sortByGender};return G.parentId&&(Z.parentId=G.parentId),Z});await n(pR(B)).unwrap(),g("success"),setTimeout(()=>g("idle"),2e3)}catch(B){console.error("Save Error:",B),alert("Error saving: "+(B instanceof Error?B.message:"Unknown error")),g("idle")}},j=B=>{l(G=>{const Z={...Bg,parentId:B},ae=G.findIndex(w=>w.name===B);if(ae===-1)return[...G,Z];let te=ae;for(;te+1<G.length&&G[te+1].parentId===B;)te++;return[...G.slice(0,te+1),Z,...G.slice(te+1)]})},Y=()=>{l(e)};return a?A.jsx(Wl,{}):A.jsxs("div",{className:dm.managementWrapper,children:[A.jsxs(z_,{headers:[{text:"Name",minWidth:80,textAlign:"center",isSticky:!0},{text:"Order",minWidth:50},{text:"Emoji",width:30},{text:"Colour",minWidth:100},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[s.map((B,G)=>A.jsxs("tr",{children:[A.jsx(Qr,{name:`name-${G}`,value:B.name,onChange:Z=>E(G,"name",Z.target.value),isSticky:!0}),A.jsx(dn,{textAlign:"center",children:B.parentId?A.jsx(vR,{}):A.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[A.jsx(Mi,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>b(G,"up"),disabled:G===0,children:""}),A.jsx(Mi,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>b(G,"down"),disabled:G===s.length-1,children:""})]})}),A.jsx(Qr,{name:`emoji-${G}`,value:B.emoji,onChange:Z=>E(G,"emoji",Z.target.value)}),A.jsx(BS,{name:`colour-${G}`,value:B.colour,onChange:Z=>E(G,"colour",Z.target.value)}),A.jsx(dn,{textAlign:"center",children:A.jsx(Nr,{colour:B.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:B.sortByGender,onClick:()=>E(G,"sortByGender",!B.sortByGender),children:B.sortByGender?"YES":"NO"})}),A.jsx(dn,{textAlign:"center",children:!B.parentId&&A.jsxs(Mi,{variant:"secondary",size:"small",onClick:()=>j(B.name),title:"Add Child Position",children:[A.jsx(Ry,{size:14,style:{marginRight:"4px"}}),"Add"]})}),A.jsx(dn,{textAlign:"center",children:A.jsxs(Mi,{variant:"delete",size:"small",onClick:()=>k(G),children:[A.jsx(ER,{size:14,style:{marginRight:"4px"}}),"Delete"]})})]},`${B.emoji}-${G}`)),A.jsxs("tr",{className:"pos-row-new",children:[A.jsx(Qr,{name:"new-name",value:c.name,placeholder:"Position Name",onChange:B=>d({...c,name:B.target.value}),isSticky:!0}),A.jsx(dn,{textAlign:"center",children:""}),A.jsx(Qr,{name:"new-emoji",value:c.emoji,placeholder:"",onChange:B=>d({...c,emoji:B.target.value})}),A.jsx(BS,{name:"new-colour",value:c.colour,placeholder:"#FFFFFF",onChange:B=>d({...c,colour:B.target.value})}),A.jsx(dn,{textAlign:"center",children:A.jsx(Nr,{colour:c.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.sortByGender,onClick:()=>d({...c,sortByGender:!c.sortByGender}),children:c.sortByGender?"YES":"NO"})}),A.jsx(dn,{textAlign:"center",children:A.jsxs(Mi,{onClick:R,disabled:!c.name.trim()||!c.emoji.trim(),children:[A.jsx(Ry,{size:16,style:{marginRight:"6px"}}),"Add"]})}),A.jsx(dn,{textAlign:"center",children:""})]})]}),y&&A.jsx(Jl,{label:"Unsaved position changes",saveText:"Save Positions",onSave:z,onCancel:Y,isSaving:p==="saving"})]})},P3="_modalOverlay_ah937_1",V3="_modalContent_ah937_16",k3="_modalHeader_ah937_34",L3="_closeButton_ah937_48",U3="_modalBody_ah937_64",j3="_modalFooter_ah937_70",ml={modalOverlay:P3,modalContent:V3,modalHeader:k3,closeButton:L3,modalBody:U3,modalFooter:j3},DR=({isOpen:n,onClose:e,title:t,children:a,footer:s})=>{if(P.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),!n)return null;const l=A.jsx("div",{className:ml.modalOverlay,onClick:e,children:A.jsxs("div",{className:ml.modalContent,onClick:c=>c.stopPropagation(),children:[A.jsxs("div",{className:ml.modalHeader,children:[A.jsx("h2",{children:t}),A.jsx("button",{className:ml.closeButton,onClick:e,"aria-label":"Close",children:A.jsx(WL,{size:24})})]}),A.jsx("div",{className:ml.modalBody,children:a}),s&&A.jsx("div",{className:ml.modalFooter,children:s})]})});return CA.createPortal(l,document.body)},z3="_settingsSection_1k4no_1",B3="_sectionLabel_1k4no_7",F3="_subSectionGroup_1k4no_17",H3="_subSectionHeader_1k4no_21",q3="_formGroup_1k4no_31",G3="_summaryButton_1k4no_35",$3="_summaryPrimary_1k4no_57",K3="_summarySecondary_1k4no_62",Cr={settingsSection:z3,sectionLabel:B3,subSectionGroup:F3,subSectionHeader:H3,formGroup:q3,summaryButton:G3,summaryPrimary:$3,summarySecondary:K3},Y3=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],NR=({isOpen:n,onClose:e,team:t,availablePositions:a,onTogglePosition:s,onToggleDay:l})=>{var c;return A.jsxs(DR,{isOpen:n,onClose:e,title:`Edit Team: ${t.name}`,children:[A.jsxs("div",{className:Cr.formGroup,children:[A.jsx("label",{className:Cr.sectionLabel,children:"Allowed Positions"}),A.jsx(fo,{children:(c=a==null?void 0:a.filter(d=>!d.parentId))==null?void 0:c.map(d=>{var g;const p=(g=t.positions)==null?void 0:g.some(y=>y.name===d.name);return A.jsxs(Nr,{colour:d.colour,isActive:p,onClick:()=>s(d),children:[d.emoji," ",d.name]},d.name)})})]}),A.jsxs("div",{className:Cr.settingsSection,children:[A.jsx("label",{className:Cr.sectionLabel,children:"Preferred Days"}),A.jsx(fo,{children:Y3.map(d=>{var g;const p=(g=t.preferredDays)==null?void 0:g.includes(d);return A.jsx(Nr,{isActive:p,onClick:()=>l(d),children:d},d)})})]})]})},B_=({primaryText:n,secondaryText:e,onClick:t})=>A.jsxs("button",{className:Cr.summaryButton,onClick:t,children:[A.jsx("span",{className:Cr.summaryPrimary,children:n}),e&&A.jsx("span",{className:Cr.summarySecondary,children:e})]}),Q3=({team:n,teamIndex:e,availablePositions:t,onUpdate:a,onMove:s,onDelete:l,onTogglePosition:c,onToggleDay:d,isFirst:p,isLast:g})=>{var k;const[y,E]=P.useState(!1),b=()=>!n.positions||n.positions.length===0?"No positions":n.positions.map(z=>z.emoji).join(" "),R=()=>!n.preferredDays||n.preferredDays.length===0?"No days":n.preferredDays.map(z=>z.substring(0,3)).join(", ");return A.jsxs(A.Fragment,{children:[A.jsxs("tr",{children:[A.jsx(Qr,{name:`team-name-${e}`,value:n.name,onChange:z=>a(e,"name",z.target.value),isSticky:!0}),A.jsx(dn,{children:A.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[A.jsx(Mi,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(e,"up"),disabled:p,children:""}),A.jsx(Mi,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(e,"down"),disabled:g,children:""})]})}),A.jsx(Qr,{name:`team-emoji-${e}`,value:n.emoji,onChange:z=>a(e,"emoji",z.target.value)}),A.jsx(Qr,{name:`team-maxConflict-${e}`,value:((k=n.maxConflict)==null?void 0:k.toString())||"1",type:"number",onChange:z=>a(e,"maxConflict",parseInt(z.target.value)||1)}),A.jsx(dn,{children:A.jsx(B_,{primaryText:b(),secondaryText:R(),onClick:()=>E(!0)})}),A.jsx(dn,{children:A.jsxs(Mi,{variant:"delete",size:"small",onClick:()=>l(e),children:[A.jsx(ER,{size:14,style:{marginRight:"6px"}}),"Delete"]})})]}),A.jsx(NR,{isOpen:y,onClose:()=>E(!1),team:n,availablePositions:t,onTogglePosition:z=>c(e,z),onToggleDay:z=>d(e,z)})]})},FS={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1},X3=()=>{var M;const n=ei(),{teams:e,fetched:t,loading:a}=ct(D=>D.teams),{positions:s,fetched:l,loading:c}=ct(D=>D.positions),[d,p]=P.useState(e),[g,y]=P.useState(FS),[E,b]=P.useState("idle"),[R,k]=P.useState(!1),z=P.useMemo(()=>{const D=pe=>pe.map(Se=>({name:Se.name||"",emoji:Se.emoji||"",positions:(Se.positions||[]).map(H=>H.name).sort(),preferredDays:[...Se.preferredDays||[]].sort(),maxConflict:Se.maxConflict||1}));return JSON.stringify(D(d))!==JSON.stringify(D(e))},[d,e]);P.useEffect(()=>{t||n(ho()),l||n(ys())},[n,t,l]),P.useEffect(()=>{p(e)},[e]);const j=(D,pe,Se)=>{const H=[...d];H[D]={...H[D],[pe]:Se},p(H)},Y=(D,pe)=>{const Se=[...d],H=pe==="up"?D-1:D+1;if(H<0||H>=Se.length)return;const fe=Se[D];Se[D]=Se[H],Se[H]=fe,p(Se)},B=(D,pe)=>{const Se=d.map((H,fe)=>{if(fe!==D)return H;const ge=H.positions||[],Pe=ge.find(Me=>Me.name===pe.name)?ge.filter(Me=>Me.name!==pe.name):[...ge,pe];return{...H,positions:Pe}});p(Se)},G=(D,pe)=>{const Se=d.map((H,fe)=>{if(fe!==D)return H;const ge=H.preferredDays||[],Pe=ge.includes(pe)?ge.filter(Me=>Me!==pe):[...ge,pe];return{...H,preferredDays:Pe}});p(Se)},Z=D=>{const pe=g.positions||[],Se=pe.some(H=>H.name===D.name)?pe.filter(H=>H.name!==D.name):[...pe,D];y({...g,positions:Se})},ae=D=>{const pe=g.preferredDays||[],Se=pe.includes(D)?pe.filter(H=>H!==D):[...pe,D];y({...g,preferredDays:Se})},te=()=>{if(!g.name.trim()||!g.emoji.trim())return alert("Please provide both an emoji and a name for the team.");p([...d,g]),y(FS)},S=D=>{window.confirm("Are you sure you want to delete this team?")&&p(d.filter((pe,Se)=>Se!==D))},w=async()=>{b("saving");try{const D=d.map(pe=>({name:pe.name||"",emoji:pe.emoji||"",maxConflict:pe.maxConflict||1,preferredDays:pe.preferredDays||[],positions:(pe.positions||[]).map(Se=>({name:Se.name||"",emoji:Se.emoji||"",colour:Se.colour||"",sortByGender:!!Se.sortByGender,...Se.parentId?{parentId:Se.parentId}:{}}))}));await n($f(D)).unwrap(),b("success"),setTimeout(()=>b("idle"),2e3)}catch(D){console.error("Save Error:",D),alert("Error saving: "+(D instanceof Error?D.message:"Unknown error")),b("idle")}},I=()=>{p(e)};if(a||c)return A.jsx(Wl,{});const O=()=>!g.positions||g.positions.length===0?"No positions":g.positions.map(D=>D.emoji).join(" "),x=()=>!g.preferredDays||g.preferredDays.length===0?"No days":g.preferredDays.map(D=>D.substring(0,3)).join(", ");return A.jsxs("div",{className:dm.managementWrapper,children:[A.jsxs(z_,{headers:[{text:"Name",minWidth:100,isSticky:!0},{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Conflicts",width:60,textAlign:"center"},{text:"Config",minWidth:150},{text:"",width:50}],children:[d.map((D,pe)=>A.jsx(Q3,{team:D,teamIndex:pe,availablePositions:s,onUpdate:j,onMove:Y,onDelete:S,onTogglePosition:B,onToggleDay:G,isFirst:pe===0,isLast:pe===d.length-1},`${D.emoji}-${pe}`)),A.jsxs("tr",{className:"team-row-new",children:[A.jsx(Qr,{name:"new-team-name",value:g.name,placeholder:"Team Name",onChange:D=>y({...g,name:D.target.value}),isSticky:!0}),A.jsx(dn,{children:""}),A.jsx(Qr,{name:"new-team-emoji",value:g.emoji,placeholder:"",onChange:D=>y({...g,emoji:D.target.value})}),A.jsx(Qr,{name:"new-team-maxConflict",value:((M=g.maxConflict)==null?void 0:M.toString())||"1",type:"number",onChange:D=>y({...g,maxConflict:parseInt(D.target.value)||1})}),A.jsx(dn,{children:A.jsx(B_,{primaryText:O(),secondaryText:x(),onClick:()=>k(!0)})}),A.jsx(dn,{children:A.jsxs(Mi,{onClick:te,disabled:!g.name.trim()||!g.emoji.trim(),children:[A.jsx(Ry,{size:16,style:{marginRight:"6px"}}),"Add"]})})]})]}),A.jsx(NR,{isOpen:R,onClose:()=>k(!1),team:g,availablePositions:s,onTogglePosition:Z,onToggleDay:ae}),z&&A.jsx(Jl,{label:"Unsaved team changes",saveText:"Save All Team Changes",onSave:w,onCancel:I,isSaving:E==="saving"})]})},W3={allUsers:[],originalUsers:[],loading:!1,saving:!1,error:null},Zf=Pr("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=Fc(Cn,"users"),a=Gc(t),s=await Kc(a),l=[];return s.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),ed=Pr("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=b1(Cn);n.forEach(a=>{const{id:s,...l}=a;l.teamPositions&&(l.indexedAssignments=bR(l.teamPositions)),t.update(Wr(Cn,"users",s),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),xR=wo({name:"userManagement",initialState:W3,reducers:{updateUserField(n,e){const{id:t,field:a,value:s}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[a]=s)},toggleUserTeam(n,e){const{userId:t,teamName:a}=e.payload,s=n.allUsers.find(l=>l.id===t);if(s){const l=s.teams||[],c=l.includes(a)?l.filter(d=>d!==a):[...l,a];s.teams=c,s.teamPositions||(s.teamPositions={}),c.includes(a)?s.teamPositions[a]||(s.teamPositions[a]=[]):delete s.teamPositions[a]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:a,posName:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[a]||(l.teamPositions[a]=[]);const c=l.teamPositions[a],d=c.includes(s)?c.filter(p=>p!==s):[...c,s];l.teamPositions[a]=d}},resetUserChanges(n){n.allUsers=JSON.parse(JSON.stringify(n.originalUsers))}},extraReducers:n=>{n.addCase(Zf.pending,e=>{e.loading=!0,e.error=null}).addCase(Zf.fulfilled,(e,t)=>{e.allUsers=t.payload,e.originalUsers=JSON.parse(JSON.stringify(t.payload)),e.loading=!1}).addCase(Zf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(ed.pending,e=>{e.saving=!0,e.error=null}).addCase(ed.fulfilled,e=>{e.saving=!1,e.originalUsers=JSON.parse(JSON.stringify(e.allUsers))}).addCase(ed.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:J3,toggleUserTeam:Z3,toggleUserTeamPosition:e6,resetUserChanges:t6}=xR.actions,n6=xR.reducer,r6=({isOpen:n,onClose:e,user:t,availableTeams:a})=>{const s=ei(),l=d=>{s(Z3({userId:t.id,teamName:d}))},c=(d,p)=>{s(e6({userId:t.id,teamName:d,posName:p}))};return A.jsxs(DR,{isOpen:n,onClose:e,title:`Edit Assignments: ${t.name}`,children:[A.jsxs("div",{className:Cr.formGroup,children:[A.jsx("label",{className:Cr.sectionLabel,children:"Teams"}),A.jsx(fo,{children:a.map(d=>{var g;const p=(g=t.teams)==null?void 0:g.includes(d.name);return A.jsxs(Nr,{onClick:()=>l(d.name),isActive:p,children:[A.jsx("span",{children:d.emoji})," ",d.name]},d.name)})})]}),t.teams&&t.teams.length>0&&A.jsxs("div",{className:Cr.settingsSection,children:[A.jsx("label",{className:Cr.sectionLabel,children:"Positions per Team"}),t.teams.map(d=>{var g,y;const p=a.find(E=>E.name===d);return p?A.jsxs("div",{className:Cr.subSectionGroup,children:[A.jsxs("div",{className:Cr.subSectionHeader,children:[p.emoji," ",p.name]}),A.jsx(fo,{children:(y=(g=p.positions)==null?void 0:g.filter(E=>!E.parentId))==null?void 0:y.map(E=>{var R,k;const b=(k=(R=t.teamPositions)==null?void 0:R[d])==null?void 0:k.includes(E.name);return A.jsxs(Nr,{onClick:()=>c(d,E.name),isActive:b,colour:E.colour,children:[A.jsx("span",{children:E.emoji})," ",E.name]},E.name)})})]},d):null})]})]})},i6=({user:n,availableTeams:e,adminEmail:t})=>{const a=ei(),[s,l]=P.useState(!1),c=(g,y)=>{a(J3({id:n.id,field:g,value:y}))},d=()=>!n.teams||n.teams.length===0?"No teams":n.teams.map(g=>{const y=e.find(E=>E.name===g);return(y==null?void 0:y.emoji)||""}).join(" "),p=()=>n.teamPositions?Object.values(n.teamPositions).reduce((g,y)=>g+y.length,0):0;return A.jsxs(A.Fragment,{children:[A.jsxs("tr",{children:[A.jsx(Qr,{name:`name-${n.id}`,value:n.name||"",onChange:g=>c("name",g.target.value),isSticky:!0}),A.jsx(Qr,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),A.jsx(dn,{children:A.jsxs("select",{name:`gender-${n.id}`,className:Oi.formSelect,value:n.gender,onChange:g=>c("gender",g.target.value),children:[A.jsx("option",{value:"",children:"-"}),A.jsx("option",{value:"Male",children:"Male"}),A.jsx("option",{value:"Female",children:"Female"})]})}),A.jsx(dn,{children:A.jsx(B_,{primaryText:d(),secondaryText:`(${p()} pos)`,onClick:()=>l(!0)})}),A.jsx(dn,{textAlign:"center",children:A.jsx(Nr,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>c("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),A.jsx(dn,{textAlign:"center",children:A.jsx(Nr,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>c("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),A.jsx(dn,{textAlign:"center",children:A.jsx(Nr,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>c("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id),A.jsx(r6,{isOpen:s,onClose:()=>l(!1),user:n,availableTeams:e})]})},a6=()=>{const n=ei(),{allUsers:e,originalUsers:t,loading:a,saving:s,error:l}=ct(y=>y.userManagement),c=ct(y=>y.teams.teams),d=P.useMemo(()=>{const y=E=>E.map(b=>({name:b.name||"",gender:b.gender||"",teams:[...b.teams||[]].sort(),teamPositions:Object.keys(b.teamPositions||{}).sort().reduce((R,k)=>{var z;return R[k]=[...((z=b.teamPositions)==null?void 0:z[k])||[]].sort(),R},{}),isActive:!!b.isActive,isApproved:!!b.isApproved,isAdmin:!!b.isAdmin}));return JSON.stringify(y(e))!==JSON.stringify(y(t))},[e,t]);P.useEffect(()=>{n(Zf())},[n]);const p=()=>{n(ed(e))},g=()=>{n(t6())};return a?A.jsx(Wl,{}):l?A.jsxs("div",{children:["Error: ",l]}):A.jsxs("div",{className:dm.managementWrapper,children:[A.jsx(z_,{headers:[{text:"Name",minWidth:70,isSticky:!0},{text:"Email",minWidth:170},{text:"Gender",minWidth:90},{text:"Assignments",minWidth:150},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(y=>A.jsx(i6,{user:y,availableTeams:c,adminEmail:"chris.sm.kang542@gmail.com"},y.id))}),d&&A.jsx(Jl,{label:"Unsaved user changes",saveText:"Save All User Changes",onSave:p,onCancel:g,isSaving:s})]})},s6=()=>{const{userData:n}=ct(t=>t.auth),{section:e}=Vd();return n?A.jsxs("div",{className:dm.settingsContainer,children:[e===bl.PROFILE&&A.jsx(IR,{}),e===bl.USER_MANAGEMENT&&(n.isAdmin?A.jsx(a6,{}):A.jsx("p",{children:"Access Denied"})),e===bl.TEAMS&&(n.isAdmin?A.jsx(X3,{}):A.jsx("p",{children:"Access Denied"})),e===bl.POSITIONS&&(n.isAdmin?A.jsx(M3,{}):A.jsx("p",{children:"Access Denied"}))]}):null},o6=[{path:"/",element:A.jsx(Ik,{})},{path:"/login",element:A.jsx(T3,{})},{path:"/guest",element:A.jsx(d3,{})},{path:"/app",element:A.jsx(NL,{}),children:[{path:"",element:A.jsx(jU,{}),children:[{path:"dashboard",element:A.jsx(Oj,{})},{path:"roster/:teamName?/:positionName?",element:A.jsx(w3,{})},{path:"settings/:section?",element:A.jsx(s6,{})}]}]}];let HS=!1;const l6=n=>{if(!HS){HS=!0;let e;o4(zl,t=>{if(t){n.dispatch(Gj(t)),n.dispatch(Wf(t.uid));const a=Wr(Cn,"users",t.uid);e=yV(a,s=>{if(s.exists()){const l=s.data();n.dispatch($j(l))}})}else n.dispatch(Kj()),e&&e()})}return e=>t=>e(t)},u6=aL({reducer:{auth:Yj,positions:CL,roster:WU,rosterView:rj,teams:DL,ui:iU,userManagement:n6},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(l6)}),c6=nx(o6);TI.createRoot(document.getElementById("root")).render(A.jsx(GS.StrictMode,{children:A.jsx(kI,{store:u6,children:A.jsx(yx,{children:A.jsx(Sk,{children:A.jsx(px,{router:c6})})})})}));
