var MC=Object.defineProperty;var VC=(n,e,t)=>e in n?MC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Fp=(n,e,t)=>VC(n,typeof e!="symbol"?e+"":e,t);function PC(n,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function TS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hp={exports:{}},Du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function kC(){if(zT)return Du;zT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:a,key:c,ref:s!==void 0?s:null,props:l}}return Du.Fragment=e,Du.jsx=t,Du.jsxs=t,Du}var BT;function LC(){return BT||(BT=1,Hp.exports=kC()),Hp.exports}var R=LC(),qp={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT;function UC(){if(FT)return Ke;FT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function I(j){return j===null||typeof j!="object"?null:(j=S&&j[S]||j["@@iterator"],typeof j=="function"?j:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,V={};function Y(j,ie,de){this.props=j,this.context=ie,this.refs=V,this.updater=de||P}Y.prototype.isReactComponent={},Y.prototype.setState=function(j,ie){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ie,"setState")},Y.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function F(){}F.prototype=Y.prototype;function z(j,ie,de){this.props=j,this.context=ie,this.refs=V,this.updater=de||P}var K=z.prototype=new F;K.constructor=z,B(K,Y.prototype),K.isPureReactComponent=!0;var te=Array.isArray;function G(){}var b={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function w(j,ie,de){var ve=de.ref;return{$$typeof:n,type:j,key:ie,ref:ve!==void 0?ve:null,props:de}}function N(j,ie){return w(j.type,ie,j.props)}function x(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function M(j){var ie={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(de){return ie[de]})}var O=/\/+/g;function Pe(j,ie){return typeof j=="object"&&j!==null&&j.key!=null?M(""+j.key):ie.toString(36)}function Be(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(G,G):(j.status="pending",j.then(function(ie){j.status==="pending"&&(j.status="fulfilled",j.value=ie)},function(ie){j.status==="pending"&&(j.status="rejected",j.reason=ie)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Q(j,ie,de,ve,be){var Ve=typeof j;(Ve==="undefined"||Ve==="boolean")&&(j=null);var We=!1;if(j===null)We=!0;else switch(Ve){case"bigint":case"string":case"number":We=!0;break;case"object":switch(j.$$typeof){case n:case e:We=!0;break;case v:return We=j._init,Q(We(j._payload),ie,de,ve,be)}}if(We)return be=be(j),We=ve===""?"."+Pe(j,0):ve,te(be)?(de="",We!=null&&(de=We.replace(O,"$&/")+"/"),Q(be,ie,de,"",function(Ir){return Ir})):be!=null&&(x(be)&&(be=N(be,de+(be.key==null||j&&j.key===be.key?"":(""+be.key).replace(O,"$&/")+"/")+We)),ie.push(be)),1;We=0;var yt=ve===""?".":ve+":";if(te(j))for(var At=0;At<j.length;At++)ve=j[At],Ve=yt+Pe(ve,At),We+=Q(ve,ie,de,Ve,be);else if(At=I(j),typeof At=="function")for(j=At.call(j),At=0;!(ve=j.next()).done;)ve=ve.value,Ve=yt+Pe(ve,At++),We+=Q(ve,ie,de,Ve,be);else if(Ve==="object"){if(typeof j.then=="function")return Q(Be(j),ie,de,ve,be);throw ie=String(j),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return We}function fe(j,ie,de){if(j==null)return j;var ve=[],be=0;return Q(j,ve,"","",function(Ve){return ie.call(de,Ve,be++)}),ve}function me(j){if(j._status===-1){var ie=j._result;ie=ie(),ie.then(function(de){(j._status===0||j._status===-1)&&(j._status=1,j._result=de)},function(de){(j._status===0||j._status===-1)&&(j._status=2,j._result=de)}),j._status===-1&&(j._status=0,j._result=ie)}if(j._status===1)return j._result.default;throw j._result}var Oe=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Me={map:fe,forEach:function(j,ie,de){fe(j,function(){ie.apply(this,arguments)},de)},count:function(j){var ie=0;return fe(j,function(){ie++}),ie},toArray:function(j){return fe(j,function(ie){return ie})||[]},only:function(j){if(!x(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Ke.Activity=E,Ke.Children=Me,Ke.Component=Y,Ke.Fragment=t,Ke.Profiler=s,Ke.PureComponent=z,Ke.StrictMode=a,Ke.Suspense=p,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=b,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(j){return b.H.useMemoCache(j)}},Ke.cache=function(j){return function(){return j.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(j,ie,de){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ve=B({},j.props),be=j.key;if(ie!=null)for(Ve in ie.key!==void 0&&(be=""+ie.key),ie)!A.call(ie,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&ie.ref===void 0||(ve[Ve]=ie[Ve]);var Ve=arguments.length-2;if(Ve===1)ve.children=de;else if(1<Ve){for(var We=Array(Ve),yt=0;yt<Ve;yt++)We[yt]=arguments[yt+2];ve.children=We}return w(j.type,be,ve)},Ke.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},Ke.createElement=function(j,ie,de){var ve,be={},Ve=null;if(ie!=null)for(ve in ie.key!==void 0&&(Ve=""+ie.key),ie)A.call(ie,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(be[ve]=ie[ve]);var We=arguments.length-2;if(We===1)be.children=de;else if(1<We){for(var yt=Array(We),At=0;At<We;At++)yt[At]=arguments[At+2];be.children=yt}if(j&&j.defaultProps)for(ve in We=j.defaultProps,We)be[ve]===void 0&&(be[ve]=We[ve]);return w(j,Ve,be)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(j){return{$$typeof:d,render:j}},Ke.isValidElement=x,Ke.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:me}},Ke.memo=function(j,ie){return{$$typeof:g,type:j,compare:ie===void 0?null:ie}},Ke.startTransition=function(j){var ie=b.T,de={};b.T=de;try{var ve=j(),be=b.S;be!==null&&be(de,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(G,Oe)}catch(Ve){Oe(Ve)}finally{ie!==null&&de.types!==null&&(ie.types=de.types),b.T=ie}},Ke.unstable_useCacheRefresh=function(){return b.H.useCacheRefresh()},Ke.use=function(j){return b.H.use(j)},Ke.useActionState=function(j,ie,de){return b.H.useActionState(j,ie,de)},Ke.useCallback=function(j,ie){return b.H.useCallback(j,ie)},Ke.useContext=function(j){return b.H.useContext(j)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(j,ie){return b.H.useDeferredValue(j,ie)},Ke.useEffect=function(j,ie){return b.H.useEffect(j,ie)},Ke.useEffectEvent=function(j){return b.H.useEffectEvent(j)},Ke.useId=function(){return b.H.useId()},Ke.useImperativeHandle=function(j,ie,de){return b.H.useImperativeHandle(j,ie,de)},Ke.useInsertionEffect=function(j,ie){return b.H.useInsertionEffect(j,ie)},Ke.useLayoutEffect=function(j,ie){return b.H.useLayoutEffect(j,ie)},Ke.useMemo=function(j,ie){return b.H.useMemo(j,ie)},Ke.useOptimistic=function(j,ie){return b.H.useOptimistic(j,ie)},Ke.useReducer=function(j,ie,de){return b.H.useReducer(j,ie,de)},Ke.useRef=function(j){return b.H.useRef(j)},Ke.useState=function(j){return b.H.useState(j)},Ke.useSyncExternalStore=function(j,ie,de){return b.H.useSyncExternalStore(j,ie,de)},Ke.useTransition=function(){return b.H.useTransition()},Ke.version="19.2.4",Ke}var HT;function dd(){return HT||(HT=1,qp.exports=UC()),qp.exports}var U=dd();const bS=TS(U),jC=PC({__proto__:null,default:bS},[U]);var Gp={exports:{}},Nu={},$p={exports:{}},Kp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function zC(){return qT||(qT=1,(function(n){function e(Q,fe){var me=Q.length;Q.push(fe);e:for(;0<me;){var Oe=me-1>>>1,Me=Q[Oe];if(0<s(Me,fe))Q[Oe]=fe,Q[me]=Me,me=Oe;else break e}}function t(Q){return Q.length===0?null:Q[0]}function a(Q){if(Q.length===0)return null;var fe=Q[0],me=Q.pop();if(me!==fe){Q[0]=me;e:for(var Oe=0,Me=Q.length,j=Me>>>1;Oe<j;){var ie=2*(Oe+1)-1,de=Q[ie],ve=ie+1,be=Q[ve];if(0>s(de,me))ve<Me&&0>s(be,de)?(Q[Oe]=be,Q[ve]=me,Oe=ve):(Q[Oe]=de,Q[ie]=me,Oe=ie);else if(ve<Me&&0>s(be,me))Q[Oe]=be,Q[ve]=me,Oe=ve;else break e}}return fe}function s(Q,fe){var me=Q.sortIndex-fe.sortIndex;return me!==0?me:Q.id-fe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,E=null,S=3,I=!1,P=!1,B=!1,V=!1,Y=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function K(Q){for(var fe=t(g);fe!==null;){if(fe.callback===null)a(g);else if(fe.startTime<=Q)a(g),fe.sortIndex=fe.expirationTime,e(p,fe);else break;fe=t(g)}}function te(Q){if(B=!1,K(Q),!P)if(t(p)!==null)P=!0,G||(G=!0,M());else{var fe=t(g);fe!==null&&Be(te,fe.startTime-Q)}}var G=!1,b=-1,A=5,w=-1;function N(){return V?!0:!(n.unstable_now()-w<A)}function x(){if(V=!1,G){var Q=n.unstable_now();w=Q;var fe=!0;try{e:{P=!1,B&&(B=!1,F(b),b=-1),I=!0;var me=S;try{t:{for(K(Q),E=t(p);E!==null&&!(E.expirationTime>Q&&N());){var Oe=E.callback;if(typeof Oe=="function"){E.callback=null,S=E.priorityLevel;var Me=Oe(E.expirationTime<=Q);if(Q=n.unstable_now(),typeof Me=="function"){E.callback=Me,K(Q),fe=!0;break t}E===t(p)&&a(p),K(Q)}else a(p);E=t(p)}if(E!==null)fe=!0;else{var j=t(g);j!==null&&Be(te,j.startTime-Q),fe=!1}}break e}finally{E=null,S=me,I=!1}fe=void 0}}finally{fe?M():G=!1}}}var M;if(typeof z=="function")M=function(){z(x)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Pe=O.port2;O.port1.onmessage=x,M=function(){Pe.postMessage(null)}}else M=function(){Y(x,0)};function Be(Q,fe){b=Y(function(){Q(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var fe=3;break;default:fe=S}var me=S;S=fe;try{return Q()}finally{S=me}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(Q,fe){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var me=S;S=Q;try{return fe()}finally{S=me}},n.unstable_scheduleCallback=function(Q,fe,me){var Oe=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Oe+me:Oe):me=Oe,Q){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=me+Me,Q={id:v++,callback:fe,priorityLevel:Q,startTime:me,expirationTime:Me,sortIndex:-1},me>Oe?(Q.sortIndex=me,e(g,Q),t(p)===null&&Q===t(g)&&(B?(F(b),b=-1):B=!0,Be(te,me-Oe))):(Q.sortIndex=Me,e(p,Q),P||I||(P=!0,G||(G=!0,M()))),Q},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(Q){var fe=S;return function(){var me=S;S=fe;try{return Q.apply(this,arguments)}finally{S=me}}}})(Kp)),Kp}var GT;function BC(){return GT||(GT=1,$p.exports=zC()),$p.exports}var Yp={exports:{}},kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T;function FC(){if($T)return kn;$T=1;var n=dd();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:p,containerInfo:g,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,kn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},kn.flushSync=function(p){var g=c.T,v=a.p;try{if(c.T=null,a.p=2,p)return p()}finally{c.T=g,a.p=v,a.d.f()}},kn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},kn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},kn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:I}):v==="script"&&a.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},kn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},kn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin);a.d.L(p,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},kn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},kn.requestFormReset=function(p){a.d.r(p)},kn.unstable_batchedUpdates=function(p,g){return p(g)},kn.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},kn.useFormStatus=function(){return c.H.useHostTransitionStatus()},kn.version="19.2.4",kn}var KT;function SS(){if(KT)return Yp.exports;KT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yp.exports=FC(),Yp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT;function HC(){if(YT)return Nu;YT=1;var n=BC(),e=dd(),t=SS();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(a(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,u=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),r;if(m===u)return p(f),i;m=m.sibling}throw Error(a(188))}if(o.return!==u.return)o=f,u=m;else{for(var _=!1,C=f.child;C;){if(C===o){_=!0,o=f,u=m;break}if(C===u){_=!0,u=f,o=m;break}C=C.sibling}if(!_){for(C=m.child;C;){if(C===o){_=!0,o=m,u=f;break}if(C===u){_=!0,u=m,o=f;break}C=C.sibling}if(!_)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function v(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=v(r),i!==null)return i;r=r.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),z=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function M(r){return r===null||typeof r!="object"?null:(r=x&&r[x]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function Pe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case B:return"Fragment";case Y:return"Profiler";case V:return"StrictMode";case te:return"Suspense";case G:return"SuspenseList";case w:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case P:return"Portal";case z:return r.displayName||"Context";case F:return(r._context.displayName||"Context")+".Consumer";case K:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case b:return i=r.displayName||null,i!==null?i:Pe(r.type)||"Memo";case A:i=r._payload,r=r._init;try{return Pe(r(i))}catch{}}return null}var Be=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Oe=[],Me=-1;function j(r){return{current:r}}function ie(r){0>Me||(r.current=Oe[Me],Oe[Me]=null,Me--)}function de(r,i){Me++,Oe[Me]=r.current,r.current=i}var ve=j(null),be=j(null),Ve=j(null),We=j(null);function yt(r,i){switch(de(Ve,i),de(be,r),de(ve,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?uT(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=uT(i),r=cT(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ie(ve),de(ve,r)}function At(){ie(ve),ie(be),ie(Ve)}function Ir(r){r.memoizedState!==null&&de(We,r);var i=ve.current,o=cT(i,r.type);i!==o&&(de(be,r),de(ve,o))}function Kr(r){be.current===r&&(ie(ve),ie(be)),We.current===r&&(ie(We),wu._currentValue=me)}var Mt,ue;function Ee(r){if(Mt===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Mt=i&&i[1]||"",ue=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mt+r+ue}var He=!1;function Ne(r,i){if(!r||He)return"";He=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(re){var ee=re}Reflect.construct(r,[],le)}else{try{le.call()}catch(re){ee=re}r.call(le.prototype)}}else{try{throw Error()}catch(re){ee=re}(le=r())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(re){if(re&&ee&&typeof re.stack=="string")return[re.stack,ee.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],C=m[1];if(_&&C){var L=_.split(`
`),J=C.split(`
`);for(f=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;f<J.length&&!J[f].includes("DetermineComponentFrameRoot");)f++;if(u===L.length||f===J.length)for(u=L.length-1,f=J.length-1;1<=u&&0<=f&&L[u]!==J[f];)f--;for(;1<=u&&0<=f;u--,f--)if(L[u]!==J[f]){if(u!==1||f!==1)do if(u--,f--,0>f||L[u]!==J[f]){var ae=`
`+L[u].replace(" at new "," at ");return r.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",r.displayName)),ae}while(1<=u&&0<=f);break}}}finally{He=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Ee(o):""}function Ie(r,i){switch(r.tag){case 26:case 27:case 5:return Ee(r.type);case 16:return Ee("Lazy");case 13:return r.child!==i&&i!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return Ne(r.type,!1);case 11:return Ne(r.type.render,!1);case 1:return Ne(r.type,!0);case 31:return Ee("Activity");default:return""}}function tt(r){try{var i="",o=null;do i+=Ie(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var nt=Object.prototype.hasOwnProperty,Ge=n.unstable_scheduleCallback,at=n.unstable_cancelCallback,qt=n.unstable_shouldYield,Mn=n.unstable_requestPaint,Qt=n.unstable_now,or=n.unstable_getCurrentPriorityLevel,ya=n.unstable_ImmediatePriority,ki=n.unstable_UserBlockingPriority,En=n.unstable_NormalPriority,lr=n.unstable_LowPriority,Ts=n.unstable_IdlePriority,mo=n.log,va=n.unstable_setDisableYieldValue,ur=null,Vt=null;function Fn(r){if(typeof mo=="function"&&va(r),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(ur,r)}catch{}}var Gt=Math.clz32?Math.clz32:Ss,bs=Math.log,_a=Math.LN2;function Ss(r){return r>>>=0,r===0?32:31-(bs(r)/_a|0)|0}var Hn=256,ci=262144,$t=4194304;function Dr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function cr(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,_=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~m,u!==0?f=Dr(u):(_&=C,_!==0?f=Dr(_):o||(o=C&~r,o!==0&&(f=Dr(o))))):(C=u&~m,C!==0?f=Dr(C):_!==0?f=Dr(_):o||(o=u&~r,o!==0&&(f=Dr(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function hr(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function po(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Li(){var r=$t;return $t<<=1,($t&62914560)===0&&($t=4194304),r}function qn(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function hi(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ll(r,i,o,u,f,m){var _=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var C=r.entanglements,L=r.expirationTimes,J=r.hiddenUpdates;for(o=_&~o;0<o;){var ae=31-Gt(o),le=1<<ae;C[ae]=0,L[ae]=-1;var ee=J[ae];if(ee!==null)for(J[ae]=null,ae=0;ae<ee.length;ae++){var re=ee[ae];re!==null&&(re.lane&=-536870913)}o&=~le}u!==0&&Ui(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(_&~i))}function Ui(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Gt(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function k(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Gt(o),f=1<<u;f&i|r[u]&i&&(r[u]|=i),o&=~f}}function q(r,i){var o=i&-i;return o=(o&42)!==0?1:Z(o),(o&(r.suspendedLanes|i))!==0?0:o}function Z(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function he(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function pe(){var r=fe.p;return r!==0?r:(r=window.event,r===void 0?32:MT(r.type))}function Se(r,i){var o=fe.p;try{return fe.p=r,i()}finally{fe.p=o}}var Re=Math.random().toString(36).slice(2),ge="__reactFiber$"+Re,_e="__reactProps$"+Re,we="__reactContainer$"+Re,je="__reactEvents$"+Re,xe="__reactListeners$"+Re,qe="__reactHandles$"+Re,rt="__reactResources$"+Re,Ct="__reactMarker$"+Re;function zt(r){delete r[ge],delete r[_e],delete r[je],delete r[xe],delete r[qe]}function kt(r){var i=r[ge];if(i)return i;for(var o=r.parentNode;o;){if(i=o[we]||o[ge]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=yT(r);r!==null;){if(o=r[ge])return o;r=yT(r)}return i}r=o,o=r.parentNode}return null}function Je(r){if(r=r[ge]||r[we]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function Lt(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function Tn(r){var i=r[rt];return i||(i=r[rt]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ut(r){r[Ct]=!0}var Xn=new Set,Vn={};function Wn(r,i){Pn(r,i),Pn(r+"Capture",i)}function Pn(r,i){for(Vn[r]=i,r=0;r<i.length;r++)Xn.add(i[r])}var fr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fi={},di={};function st(r){return nt.call(di,r)?!0:nt.call(fi,r)?!1:fr.test(r)?di[r]=!0:(fi[r]=!0,!1)}function Xt(r,i,o){if(st(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function ln(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function It(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function Ze(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function dr(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ea(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Et(r){if(!r._valueTracker){var i=dr(r)?"checked":"value";r._valueTracker=Ea(r,i,""+r[i])}}function As(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=dr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function mi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ws=/[\n"\\]/g;function Jn(r){return r.replace(ws,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function go(r,i,o,u,f,m,_,C){r.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.type=_:r.removeAttribute("type"),i!=null?_==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Ze(i)):r.value!==""+Ze(i)&&(r.value=""+Ze(i)):_!=="submit"&&_!=="reset"||r.removeAttribute("value"),i!=null?Ul(r,_,Ze(i)):o!=null?Ul(r,_,Ze(o)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+Ze(C):r.removeAttribute("name")}function Pc(r,i,o,u,f,m,_,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Et(r);return}o=o!=null?""+Ze(o):"",i=i!=null?""+Ze(i):o,C||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.name=_),Et(r)}function Ul(r,i,o){i==="number"&&mi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ta(r,i,o,u){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Ze(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function kc(r,i,o){if(i!=null&&(i=""+Ze(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+Ze(o):""}function ba(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(Be(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Ze(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),Et(r)}function Zn(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var Lc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jl(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||Lc.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function zl(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&jl(r,f,u)}else for(var m in i)i.hasOwnProperty(m)&&jl(r,m,i[m])}function yo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vo(r){return Sa.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Yr(){}var Bl=null;function Nr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Aa=null,pi=null;function Rs(r){var i=Je(r);if(i&&(r=i.stateNode)){var o=r[_e]||null;e:switch(r=i.stateNode,i.type){case"input":if(go(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Jn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var f=u[_e]||null;if(!f)throw Error(a(90));go(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&As(u)}break e;case"textarea":kc(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ta(r,!!o.multiple,i,!1)}}}var _o=!1;function wa(r,i,o){if(_o)return r(i,o);_o=!0;try{var u=r(i);return u}finally{if(_o=!1,(Aa!==null||pi!==null)&&(xh(),Aa&&(i=Aa,r=pi,pi=Aa=null,Rs(i),r)))for(i=0;i<r.length;i++)Rs(r[i])}}function Qr(r,i){var o=r.stateNode;if(o===null)return null;var u=o[_e]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cs=!1;if(xr)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Cs=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Cs=!1}var gi=null,Fl=null,Is=null;function Hl(){if(Is)return Is;var r,i=Fl,o=i.length,u,f="value"in gi?gi.value:gi.textContent,m=f.length;for(r=0;r<o&&i[r]===f[r];r++);var _=o-r;for(u=1;u<=_&&i[o-u]===f[m-u];u++);return Is=f.slice(r,1<u?1-u:void 0)}function Ds(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function ji(){return!0}function Xr(){return!1}function An(r){function i(o,u,f,m,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(o=r[C],this[C]=o?o(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ji:Xr,this.isPropagationStopped=Xr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),i}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yi=An(zi),Ra=E({},zi,{view:0,detail:0}),ql=An(Ra),Ca,Eo,vi,To=E({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ia,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==vi&&(vi&&r.type==="mousemove"?(Ca=r.screenX-vi.screenX,Eo=r.screenY-vi.screenY):Eo=Ca=0,vi=r),Ca)},movementY:function(r){return"movementY"in r?r.movementY:Eo}}),Gl=An(To),Ns=E({},To,{dataTransfer:0}),jc=An(Ns),zc=E({},Ra,{relatedTarget:0}),xs=An(zc),$l=E({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Bc=An($l),bo=E({},zi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Fc=An(bo),Hc=E({},zi,{data:0}),_i=An(Hc),qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kc(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=$c[r])?!!i[r]:!1}function Ia(){return Kc}var Gn=E({},Ra,{key:function(r){if(r.key){var i=qc[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ds(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ia,charCode:function(r){return r.type==="keypress"?Ds(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ds(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Yc=An(Gn),Qc=E({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bi=An(Qc),h=E({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ia}),y=An(h),T=E({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=An(T),X=E({},To,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=An(X),ye=E({},zi,{newState:0,oldState:0}),Qe=An(ye),nn=[9,13,27,32],Tt=xr&&"CompositionEvent"in window,Kt=null;xr&&"documentMode"in document&&(Kt=document.documentMode);var Or=xr&&"TextEvent"in window&&!Kt,Ei=xr&&(!Tt||Kt&&8<Kt&&11>=Kt),Wr=" ",Jr=!1;function Os(r,i){switch(r){case"keyup":return nn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function So(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ao=!1;function r1(r,i){switch(r){case"compositionend":return So(i);case"keypress":return i.which!==32?null:(Jr=!0,Wr);case"textInput":return r=i.data,r===Wr&&Jr?null:r;default:return null}}function i1(r,i){if(Ao)return r==="compositionend"||!Tt&&Os(r,i)?(r=Hl(),Is=Fl=gi=null,Ao=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ei&&i.locale!=="ko"?null:i.data;default:return null}}var a1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ev(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!a1[r.type]:i==="textarea"}function Tv(r,i,o,u){Aa?pi?pi.push(u):pi=[u]:Aa=u,i=Uh(i,"onChange"),0<i.length&&(o=new yi("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var Kl=null,Yl=null;function s1(r){rT(r,0)}function Xc(r){var i=Lt(r);if(As(i))return r}function bv(r,i){if(r==="change")return i}var Sv=!1;if(xr){var Qd;if(xr){var Xd="oninput"in document;if(!Xd){var Av=document.createElement("div");Av.setAttribute("oninput","return;"),Xd=typeof Av.oninput=="function"}Qd=Xd}else Qd=!1;Sv=Qd&&(!document.documentMode||9<document.documentMode)}function wv(){Kl&&(Kl.detachEvent("onpropertychange",Rv),Yl=Kl=null)}function Rv(r){if(r.propertyName==="value"&&Xc(Yl)){var i=[];Tv(i,Yl,r,Nr(r)),wa(s1,i)}}function o1(r,i,o){r==="focusin"?(wv(),Kl=i,Yl=o,Kl.attachEvent("onpropertychange",Rv)):r==="focusout"&&wv()}function l1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Xc(Yl)}function u1(r,i){if(r==="click")return Xc(i)}function c1(r,i){if(r==="input"||r==="change")return Xc(i)}function h1(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var mr=typeof Object.is=="function"?Object.is:h1;function Ql(r,i){if(mr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!nt.call(i,f)||!mr(r[f],i[f]))return!1}return!0}function Cv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Iv(r,i){var o=Cv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Cv(o)}}function Dv(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Dv(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Nv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=mi(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=mi(r.document)}return i}function Wd(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var f1=xr&&"documentMode"in document&&11>=document.documentMode,wo=null,Jd=null,Xl=null,Zd=!1;function xv(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Zd||wo==null||wo!==mi(u)||(u=wo,"selectionStart"in u&&Wd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Xl&&Ql(Xl,u)||(Xl=u,u=Uh(Jd,"onSelect"),0<u.length&&(i=new yi("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=wo)))}function Ms(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Ro={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},em={},Ov={};xr&&(Ov=document.createElement("div").style,"AnimationEvent"in window||(delete Ro.animationend.animation,delete Ro.animationiteration.animation,delete Ro.animationstart.animation),"TransitionEvent"in window||delete Ro.transitionend.transition);function Vs(r){if(em[r])return em[r];if(!Ro[r])return r;var i=Ro[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Ov)return em[r]=i[o];return r}var Mv=Vs("animationend"),Vv=Vs("animationiteration"),Pv=Vs("animationstart"),d1=Vs("transitionrun"),m1=Vs("transitionstart"),p1=Vs("transitioncancel"),kv=Vs("transitionend"),Lv=new Map,tm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tm.push("scrollEnd");function Zr(r,i){Lv.set(r,i),Wn(i,[r])}var Wc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Mr=[],Co=0,nm=0;function Jc(){for(var r=Co,i=nm=Co=0;i<r;){var o=Mr[i];Mr[i++]=null;var u=Mr[i];Mr[i++]=null;var f=Mr[i];Mr[i++]=null;var m=Mr[i];if(Mr[i++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}m!==0&&Uv(o,f,m)}}function Zc(r,i,o,u){Mr[Co++]=r,Mr[Co++]=i,Mr[Co++]=o,Mr[Co++]=u,nm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function rm(r,i,o,u){return Zc(r,i,o,u),eh(r)}function Ps(r,i){return Zc(r,null,null,i),eh(r)}function Uv(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&i!==null&&(f=31-Gt(o),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=o|536870912),m):null}function eh(r){if(50<vu)throw vu=0,fp=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Io={};function g1(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(r,i,o,u){return new g1(r,i,o,u)}function im(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Fi(r,i){var o=r.alternate;return o===null?(o=pr(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function jv(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function th(r,i,o,u,f,m){var _=0;if(u=r,typeof r=="function")im(r)&&(_=1);else if(typeof r=="string")_=TC(r,o,ve.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case w:return r=pr(31,o,i,f),r.elementType=w,r.lanes=m,r;case B:return ks(o.children,f,m,i);case V:_=8,f|=24;break;case Y:return r=pr(12,o,i,f|2),r.elementType=Y,r.lanes=m,r;case te:return r=pr(13,o,i,f),r.elementType=te,r.lanes=m,r;case G:return r=pr(19,o,i,f),r.elementType=G,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case z:_=10;break e;case F:_=9;break e;case K:_=11;break e;case b:_=14;break e;case A:_=16,u=null;break e}_=29,o=Error(a(130,r===null?"null":typeof r,"")),u=null}return i=pr(_,o,i,f),i.elementType=r,i.type=u,i.lanes=m,i}function ks(r,i,o,u){return r=pr(7,r,u,i),r.lanes=o,r}function am(r,i,o){return r=pr(6,r,null,i),r.lanes=o,r}function zv(r){var i=pr(18,null,null,0);return i.stateNode=r,i}function sm(r,i,o){return i=pr(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Bv=new WeakMap;function Vr(r,i){if(typeof r=="object"&&r!==null){var o=Bv.get(r);return o!==void 0?o:(i={value:r,source:i,stack:tt(i)},Bv.set(r,i),i)}return{value:r,source:i,stack:tt(i)}}var Do=[],No=0,nh=null,Wl=0,Pr=[],kr=0,Da=null,Ti=1,bi="";function Hi(r,i){Do[No++]=Wl,Do[No++]=nh,nh=r,Wl=i}function Fv(r,i,o){Pr[kr++]=Ti,Pr[kr++]=bi,Pr[kr++]=Da,Da=r;var u=Ti;r=bi;var f=32-Gt(u)-1;u&=~(1<<f),o+=1;var m=32-Gt(i)+f;if(30<m){var _=f-f%5;m=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Ti=1<<32-Gt(i)+f|o<<f|u,bi=m+r}else Ti=1<<m|o<<f|u,bi=r}function om(r){r.return!==null&&(Hi(r,1),Fv(r,1,0))}function lm(r){for(;r===nh;)nh=Do[--No],Do[No]=null,Wl=Do[--No],Do[No]=null;for(;r===Da;)Da=Pr[--kr],Pr[kr]=null,bi=Pr[--kr],Pr[kr]=null,Ti=Pr[--kr],Pr[kr]=null}function Hv(r,i){Pr[kr++]=Ti,Pr[kr++]=bi,Pr[kr++]=Da,Ti=i.id,bi=i.overflow,Da=r}var wn=null,Bt=null,mt=!1,Na=null,Lr=!1,um=Error(a(519));function xa(r){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jl(Vr(i,r)),um}function qv(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[ge]=r,i[_e]=u,o){case"dialog":lt("cancel",i),lt("close",i);break;case"iframe":case"object":case"embed":lt("load",i);break;case"video":case"audio":for(o=0;o<Eu.length;o++)lt(Eu[o],i);break;case"source":lt("error",i);break;case"img":case"image":case"link":lt("error",i),lt("load",i);break;case"details":lt("toggle",i);break;case"input":lt("invalid",i),Pc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":lt("invalid",i);break;case"textarea":lt("invalid",i),ba(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||oT(i.textContent,o)?(u.popover!=null&&(lt("beforetoggle",i),lt("toggle",i)),u.onScroll!=null&&lt("scroll",i),u.onScrollEnd!=null&&lt("scrollend",i),u.onClick!=null&&(i.onclick=Yr),i=!0):i=!1,i||xa(r,!0)}function Gv(r){for(wn=r.return;wn;)switch(wn.tag){case 5:case 31:case 13:Lr=!1;return;case 27:case 3:Lr=!0;return;default:wn=wn.return}}function xo(r){if(r!==wn)return!1;if(!mt)return Gv(r),mt=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Cp(r.type,r.memoizedProps)),o=!o),o&&Bt&&xa(r),Gv(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Bt=gT(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Bt=gT(r)}else i===27?(i=Bt,Ga(r.type)?(r=Op,Op=null,Bt=r):Bt=i):Bt=wn?jr(r.stateNode.nextSibling):null;return!0}function Ls(){Bt=wn=null,mt=!1}function cm(){var r=Na;return r!==null&&(rr===null?rr=r:rr.push.apply(rr,r),Na=null),r}function Jl(r){Na===null?Na=[r]:Na.push(r)}var hm=j(null),Us=null,qi=null;function Oa(r,i,o){de(hm,i._currentValue),i._currentValue=o}function Gi(r){r._currentValue=hm.current,ie(hm)}function fm(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function dm(r,i,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=f;for(var L=0;L<i.length;L++)if(C.context===i[L]){m.lanes|=o,C=m.alternate,C!==null&&(C.lanes|=o),fm(m.return,o,r),u||(_=null);break e}m=C.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(a(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),fm(_,o,r),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===r){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Oo(r,i,o,u){r=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var C=f.type;mr(f.pendingProps.value,_.value)||(r!==null?r.push(C):r=[C])}}else if(f===We.current){if(_=f.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(wu):r=[wu])}f=f.return}r!==null&&dm(i,r,o,u),i.flags|=262144}function rh(r){for(r=r.firstContext;r!==null;){if(!mr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function js(r){Us=r,qi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Rn(r){return $v(Us,r)}function ih(r,i){return Us===null&&js(r),$v(r,i)}function $v(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},qi===null){if(r===null)throw Error(a(308));qi=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else qi=qi.next=i;return o}var y1=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},v1=n.unstable_scheduleCallback,_1=n.unstable_NormalPriority,un={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mm(){return{controller:new y1,data:new Map,refCount:0}}function Zl(r){r.refCount--,r.refCount===0&&v1(_1,function(){r.controller.abort()})}var eu=null,pm=0,Mo=0,Vo=null;function E1(r,i){if(eu===null){var o=eu=[];pm=0,Mo=vp(),Vo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return pm++,i.then(Kv,Kv),i}function Kv(){if(--pm===0&&eu!==null){Vo!==null&&(Vo.status="fulfilled");var r=eu;eu=null,Mo=0,Vo=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function T1(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Yv=Q.S;Q.S=function(r,i){xE=Qt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&E1(r,i),Yv!==null&&Yv(r,i)};var zs=j(null);function gm(){var r=zs.current;return r!==null?r:Pt.pooledCache}function ah(r,i){i===null?de(zs,zs.current):de(zs,i.pool)}function Qv(){var r=gm();return r===null?null:{parent:un._currentValue,pool:r}}var Po=Error(a(460)),ym=Error(a(474)),sh=Error(a(542)),oh={then:function(){}};function Xv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Wv(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(Yr,Yr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Zv(r),r;default:if(typeof i.status=="string")i.then(Yr,Yr);else{if(r=Pt,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Zv(r),r}throw Fs=i,Po}}function Bs(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Fs=o,Po):o}}var Fs=null;function Jv(){if(Fs===null)throw Error(a(459));var r=Fs;return Fs=null,r}function Zv(r){if(r===Po||r===sh)throw Error(a(483))}var ko=null,tu=0;function lh(r){var i=tu;return tu+=1,ko===null&&(ko=[]),Wv(ko,r,i)}function nu(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function uh(r,i){throw i.$$typeof===S?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function e_(r){function i($,H){if(r){var W=$.deletions;W===null?($.deletions=[H],$.flags|=16):W.push(H)}}function o($,H){if(!r)return null;for(;H!==null;)i($,H),H=H.sibling;return null}function u($){for(var H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function f($,H){return $=Fi($,H),$.index=0,$.sibling=null,$}function m($,H,W){return $.index=W,r?(W=$.alternate,W!==null?(W=W.index,W<H?($.flags|=67108866,H):W):($.flags|=67108866,H)):($.flags|=1048576,H)}function _($){return r&&$.alternate===null&&($.flags|=67108866),$}function C($,H,W,se){return H===null||H.tag!==6?(H=am(W,$.mode,se),H.return=$,H):(H=f(H,W),H.return=$,H)}function L($,H,W,se){var ke=W.type;return ke===B?ae($,H,W.props.children,se,W.key):H!==null&&(H.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===A&&Bs(ke)===H.type)?(H=f(H,W.props),nu(H,W),H.return=$,H):(H=th(W.type,W.key,W.props,null,$.mode,se),nu(H,W),H.return=$,H)}function J($,H,W,se){return H===null||H.tag!==4||H.stateNode.containerInfo!==W.containerInfo||H.stateNode.implementation!==W.implementation?(H=sm(W,$.mode,se),H.return=$,H):(H=f(H,W.children||[]),H.return=$,H)}function ae($,H,W,se,ke){return H===null||H.tag!==7?(H=ks(W,$.mode,se,ke),H.return=$,H):(H=f(H,W),H.return=$,H)}function le($,H,W){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=am(""+H,$.mode,W),H.return=$,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case I:return W=th(H.type,H.key,H.props,null,$.mode,W),nu(W,H),W.return=$,W;case P:return H=sm(H,$.mode,W),H.return=$,H;case A:return H=Bs(H),le($,H,W)}if(Be(H)||M(H))return H=ks(H,$.mode,W,null),H.return=$,H;if(typeof H.then=="function")return le($,lh(H),W);if(H.$$typeof===z)return le($,ih($,H),W);uh($,H)}return null}function ee($,H,W,se){var ke=H!==null?H.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return ke!==null?null:C($,H,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case I:return W.key===ke?L($,H,W,se):null;case P:return W.key===ke?J($,H,W,se):null;case A:return W=Bs(W),ee($,H,W,se)}if(Be(W)||M(W))return ke!==null?null:ae($,H,W,se,null);if(typeof W.then=="function")return ee($,H,lh(W),se);if(W.$$typeof===z)return ee($,H,ih($,W),se);uh($,W)}return null}function re($,H,W,se,ke){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return $=$.get(W)||null,C(H,$,""+se,ke);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case I:return $=$.get(se.key===null?W:se.key)||null,L(H,$,se,ke);case P:return $=$.get(se.key===null?W:se.key)||null,J(H,$,se,ke);case A:return se=Bs(se),re($,H,W,se,ke)}if(Be(se)||M(se))return $=$.get(W)||null,ae(H,$,se,ke,null);if(typeof se.then=="function")return re($,H,W,lh(se),ke);if(se.$$typeof===z)return re($,H,W,ih(H,se),ke);uh(H,se)}return null}function Ce($,H,W,se){for(var ke=null,vt=null,De=H,et=H=0,ct=null;De!==null&&et<W.length;et++){De.index>et?(ct=De,De=null):ct=De.sibling;var _t=ee($,De,W[et],se);if(_t===null){De===null&&(De=ct);break}r&&De&&_t.alternate===null&&i($,De),H=m(_t,H,et),vt===null?ke=_t:vt.sibling=_t,vt=_t,De=ct}if(et===W.length)return o($,De),mt&&Hi($,et),ke;if(De===null){for(;et<W.length;et++)De=le($,W[et],se),De!==null&&(H=m(De,H,et),vt===null?ke=De:vt.sibling=De,vt=De);return mt&&Hi($,et),ke}for(De=u(De);et<W.length;et++)ct=re(De,$,et,W[et],se),ct!==null&&(r&&ct.alternate!==null&&De.delete(ct.key===null?et:ct.key),H=m(ct,H,et),vt===null?ke=ct:vt.sibling=ct,vt=ct);return r&&De.forEach(function(Xa){return i($,Xa)}),mt&&Hi($,et),ke}function Ue($,H,W,se){if(W==null)throw Error(a(151));for(var ke=null,vt=null,De=H,et=H=0,ct=null,_t=W.next();De!==null&&!_t.done;et++,_t=W.next()){De.index>et?(ct=De,De=null):ct=De.sibling;var Xa=ee($,De,_t.value,se);if(Xa===null){De===null&&(De=ct);break}r&&De&&Xa.alternate===null&&i($,De),H=m(Xa,H,et),vt===null?ke=Xa:vt.sibling=Xa,vt=Xa,De=ct}if(_t.done)return o($,De),mt&&Hi($,et),ke;if(De===null){for(;!_t.done;et++,_t=W.next())_t=le($,_t.value,se),_t!==null&&(H=m(_t,H,et),vt===null?ke=_t:vt.sibling=_t,vt=_t);return mt&&Hi($,et),ke}for(De=u(De);!_t.done;et++,_t=W.next())_t=re(De,$,et,_t.value,se),_t!==null&&(r&&_t.alternate!==null&&De.delete(_t.key===null?et:_t.key),H=m(_t,H,et),vt===null?ke=_t:vt.sibling=_t,vt=_t);return r&&De.forEach(function(OC){return i($,OC)}),mt&&Hi($,et),ke}function Ot($,H,W,se){if(typeof W=="object"&&W!==null&&W.type===B&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case I:e:{for(var ke=W.key;H!==null;){if(H.key===ke){if(ke=W.type,ke===B){if(H.tag===7){o($,H.sibling),se=f(H,W.props.children),se.return=$,$=se;break e}}else if(H.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===A&&Bs(ke)===H.type){o($,H.sibling),se=f(H,W.props),nu(se,W),se.return=$,$=se;break e}o($,H);break}else i($,H);H=H.sibling}W.type===B?(se=ks(W.props.children,$.mode,se,W.key),se.return=$,$=se):(se=th(W.type,W.key,W.props,null,$.mode,se),nu(se,W),se.return=$,$=se)}return _($);case P:e:{for(ke=W.key;H!==null;){if(H.key===ke)if(H.tag===4&&H.stateNode.containerInfo===W.containerInfo&&H.stateNode.implementation===W.implementation){o($,H.sibling),se=f(H,W.children||[]),se.return=$,$=se;break e}else{o($,H);break}else i($,H);H=H.sibling}se=sm(W,$.mode,se),se.return=$,$=se}return _($);case A:return W=Bs(W),Ot($,H,W,se)}if(Be(W))return Ce($,H,W,se);if(M(W)){if(ke=M(W),typeof ke!="function")throw Error(a(150));return W=ke.call(W),Ue($,H,W,se)}if(typeof W.then=="function")return Ot($,H,lh(W),se);if(W.$$typeof===z)return Ot($,H,ih($,W),se);uh($,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,H!==null&&H.tag===6?(o($,H.sibling),se=f(H,W),se.return=$,$=se):(o($,H),se=am(W,$.mode,se),se.return=$,$=se),_($)):o($,H)}return function($,H,W,se){try{tu=0;var ke=Ot($,H,W,se);return ko=null,ke}catch(De){if(De===Po||De===sh)throw De;var vt=pr(29,De,null,$.mode);return vt.lanes=se,vt.return=$,vt}finally{}}}var Hs=e_(!0),t_=e_(!1),Ma=!1;function vm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _m(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Va(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Pa(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(bt&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=eh(r),Uv(r,null,o),i}return Zc(r,u,i,o),eh(r)}function ru(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,k(r,o)}}function Em(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var Tm=!1;function iu(){if(Tm){var r=Vo;if(r!==null)throw r}}function au(r,i,o,u){Tm=!1;var f=r.updateQueue;Ma=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var L=C,J=L.next;L.next=null,_===null?m=J:_.next=J,_=L;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,C=ae.lastBaseUpdate,C!==_&&(C===null?ae.firstBaseUpdate=J:C.next=J,ae.lastBaseUpdate=L))}if(m!==null){var le=f.baseState;_=0,ae=J=L=null,C=m;do{var ee=C.lane&-536870913,re=ee!==C.lane;if(re?(ut&ee)===ee:(u&ee)===ee){ee!==0&&ee===Mo&&(Tm=!0),ae!==null&&(ae=ae.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ce=r,Ue=C;ee=i;var Ot=o;switch(Ue.tag){case 1:if(Ce=Ue.payload,typeof Ce=="function"){le=Ce.call(Ot,le,ee);break e}le=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Ue.payload,ee=typeof Ce=="function"?Ce.call(Ot,le,ee):Ce,ee==null)break e;le=E({},le,ee);break e;case 2:Ma=!0}}ee=C.callback,ee!==null&&(r.flags|=64,re&&(r.flags|=8192),re=f.callbacks,re===null?f.callbacks=[ee]:re.push(ee))}else re={lane:ee,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ae===null?(J=ae=re,L=le):ae=ae.next=re,_|=ee;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;re=C,C=re.next,re.next=null,f.lastBaseUpdate=re,f.shared.pending=null}}while(!0);ae===null&&(L=le),f.baseState=L,f.firstBaseUpdate=J,f.lastBaseUpdate=ae,m===null&&(f.shared.lanes=0),za|=_,r.lanes=_,r.memoizedState=le}}function n_(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function r_(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)n_(o[r],i)}var Lo=j(null),ch=j(0);function i_(r,i){r=ea,de(ch,r),de(Lo,i),ea=r|i.baseLanes}function bm(){de(ch,ea),de(Lo,Lo.current)}function Sm(){ea=ch.current,ie(Lo),ie(ch)}var gr=j(null),Ur=null;function ka(r){var i=r.alternate;de(rn,rn.current&1),de(gr,r),Ur===null&&(i===null||Lo.current!==null||i.memoizedState!==null)&&(Ur=r)}function Am(r){de(rn,rn.current),de(gr,r),Ur===null&&(Ur=r)}function a_(r){r.tag===22?(de(rn,rn.current),de(gr,r),Ur===null&&(Ur=r)):La()}function La(){de(rn,rn.current),de(gr,gr.current)}function yr(r){ie(gr),Ur===r&&(Ur=null),ie(rn)}var rn=j(0);function hh(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Np(o)||xp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var $i=0,Xe=null,Nt=null,cn=null,fh=!1,Uo=!1,qs=!1,dh=0,su=0,jo=null,b1=0;function Jt(){throw Error(a(321))}function wm(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!mr(r[o],i[o]))return!1;return!0}function Rm(r,i,o,u,f,m){return $i=m,Xe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=r===null||r.memoizedState===null?F_:Bm,qs=!1,m=o(u,f),qs=!1,Uo&&(m=o_(i,o,u,f)),s_(r),m}function s_(r){Q.H=uu;var i=Nt!==null&&Nt.next!==null;if($i=0,cn=Nt=Xe=null,fh=!1,su=0,jo=null,i)throw Error(a(300));r===null||hn||(r=r.dependencies,r!==null&&rh(r)&&(hn=!0))}function o_(r,i,o,u){Xe=r;var f=0;do{if(Uo&&(jo=null),su=0,Uo=!1,25<=f)throw Error(a(301));if(f+=1,cn=Nt=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=H_,m=i(o,u)}while(Uo);return m}function S1(){var r=Q.H,i=r.useState()[0];return i=typeof i.then=="function"?ou(i):i,r=r.useState()[0],(Nt!==null?Nt.memoizedState:null)!==r&&(Xe.flags|=1024),i}function Cm(){var r=dh!==0;return dh=0,r}function Im(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Dm(r){if(fh){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fh=!1}$i=0,cn=Nt=Xe=null,Uo=!1,su=dh=0,jo=null}function $n(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Xe.memoizedState=cn=r:cn=cn.next=r,cn}function an(){if(Nt===null){var r=Xe.alternate;r=r!==null?r.memoizedState:null}else r=Nt.next;var i=cn===null?Xe.memoizedState:cn.next;if(i!==null)cn=i,Nt=r;else{if(r===null)throw Xe.alternate===null?Error(a(467)):Error(a(310));Nt=r,r={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},cn===null?Xe.memoizedState=cn=r:cn=cn.next=r}return cn}function mh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(r){var i=su;return su+=1,jo===null&&(jo=[]),r=Wv(jo,r,i),i=Xe,(cn===null?i.memoizedState:cn.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?F_:Bm),r}function ph(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ou(r);if(r.$$typeof===z)return Rn(r)}throw Error(a(438,String(r)))}function Nm(r){var i=null,o=Xe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Xe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=mh(),Xe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=N;return i.index++,o}function Ki(r,i){return typeof i=="function"?i(r):i}function gh(r){var i=an();return xm(i,Nt,r)}function xm(r,i,o){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}i.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{i=f.next;var C=_=null,L=null,J=i,ae=!1;do{var le=J.lane&-536870913;if(le!==J.lane?(ut&le)===le:($i&le)===le){var ee=J.revertLane;if(ee===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),le===Mo&&(ae=!0);else if(($i&ee)===ee){J=J.next,ee===Mo&&(ae=!0);continue}else le={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(C=L=le,_=m):L=L.next=le,Xe.lanes|=ee,za|=ee;le=J.action,qs&&o(m,le),m=J.hasEagerState?J.eagerState:o(m,le)}else ee={lane:le,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(C=L=ee,_=m):L=L.next=ee,Xe.lanes|=le,za|=le;J=J.next}while(J!==null&&J!==i);if(L===null?_=m:L.next=C,!mr(m,r.memoizedState)&&(hn=!0,ae&&(o=Vo,o!==null)))throw o;r.memoizedState=m,r.baseState=_,r.baseQueue=L,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Om(r){var i=an(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=r(m,_.action),_=_.next;while(_!==f);mr(m,i.memoizedState)||(hn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function l_(r,i,o){var u=Xe,f=an(),m=mt;if(m){if(o===void 0)throw Error(a(407));o=o()}else o=i();var _=!mr((Nt||f).memoizedState,o);if(_&&(f.memoizedState=o,hn=!0),f=f.queue,Pm(h_.bind(null,u,f,r),[r]),f.getSnapshot!==i||_||cn!==null&&cn.memoizedState.tag&1){if(u.flags|=2048,zo(9,{destroy:void 0},c_.bind(null,u,f,o,i),null),Pt===null)throw Error(a(349));m||($i&127)!==0||u_(u,i,o)}return o}function u_(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=Xe.updateQueue,i===null?(i=mh(),Xe.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function c_(r,i,o,u){i.value=o,i.getSnapshot=u,f_(i)&&d_(r)}function h_(r,i,o){return o(function(){f_(i)&&d_(r)})}function f_(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!mr(r,o)}catch{return!0}}function d_(r){var i=Ps(r,2);i!==null&&ir(i,r,2)}function Mm(r){var i=$n();if(typeof r=="function"){var o=r;if(r=o(),qs){Fn(!0);try{o()}finally{Fn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:r},i}function m_(r,i,o,u){return r.baseState=o,xm(r,Nt,typeof u=="function"?u:Ki)}function A1(r,i,o,u,f){if(_h(r))throw Error(a(485));if(r=i.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};Q.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,p_(i,m)):(m.next=o.next,i.pending=o.next=m)}}function p_(r,i){var o=i.action,u=i.payload,f=r.state;if(i.isTransition){var m=Q.T,_={};Q.T=_;try{var C=o(f,u),L=Q.S;L!==null&&L(_,C),g_(r,i,C)}catch(J){Vm(r,i,J)}finally{m!==null&&_.types!==null&&(m.types=_.types),Q.T=m}}else try{m=o(f,u),g_(r,i,m)}catch(J){Vm(r,i,J)}}function g_(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){y_(r,i,u)},function(u){return Vm(r,i,u)}):y_(r,i,o)}function y_(r,i,o){i.status="fulfilled",i.value=o,v_(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,p_(r,o)))}function Vm(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,v_(i),i=i.next;while(i!==u)}r.action=null}function v_(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function __(r,i){return i}function E_(r,i){if(mt){var o=Pt.formState;if(o!==null){e:{var u=Xe;if(mt){if(Bt){t:{for(var f=Bt,m=Lr;f.nodeType!==8;){if(!m){f=null;break t}if(f=jr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Bt=jr(f.nextSibling),u=f.data==="F!";break e}}xa(u)}u=!1}u&&(i=o[0])}}return o=$n(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:__,lastRenderedState:i},o.queue=u,o=j_.bind(null,Xe,u),u.dispatch=o,u=Mm(!1),m=zm.bind(null,Xe,!1,u.queue),u=$n(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,o=A1.bind(null,Xe,f,m,o),f.dispatch=o,u.memoizedState=r,[i,o,!1]}function T_(r){var i=an();return b_(i,Nt,r)}function b_(r,i,o){if(i=xm(r,i,__)[0],r=gh(Ki)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=ou(i)}catch(_){throw _===Po?sh:_}else u=i;i=an();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(Xe.flags|=2048,zo(9,{destroy:void 0},w1.bind(null,f,o),null)),[u,m,r]}function w1(r,i){r.action=i}function S_(r){var i=an(),o=Nt;if(o!==null)return b_(i,o,r);an(),i=i.memoizedState,o=an();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function zo(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=Xe.updateQueue,i===null&&(i=mh(),Xe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function A_(){return an().memoizedState}function yh(r,i,o,u){var f=$n();Xe.flags|=r,f.memoizedState=zo(1|i,{destroy:void 0},o,u===void 0?null:u)}function vh(r,i,o,u){var f=an();u=u===void 0?null:u;var m=f.memoizedState.inst;Nt!==null&&u!==null&&wm(u,Nt.memoizedState.deps)?f.memoizedState=zo(i,m,o,u):(Xe.flags|=r,f.memoizedState=zo(1|i,m,o,u))}function w_(r,i){yh(8390656,8,r,i)}function Pm(r,i){vh(2048,8,r,i)}function R1(r){Xe.flags|=4;var i=Xe.updateQueue;if(i===null)i=mh(),Xe.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function R_(r){var i=an().memoizedState;return R1({ref:i,nextImpl:r}),function(){if((bt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function C_(r,i){return vh(4,2,r,i)}function I_(r,i){return vh(4,4,r,i)}function D_(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function N_(r,i,o){o=o!=null?o.concat([r]):null,vh(4,4,D_.bind(null,i,r),o)}function km(){}function x_(r,i){var o=an();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&wm(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function O_(r,i){var o=an();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&wm(i,u[1]))return u[0];if(u=r(),qs){Fn(!0);try{r()}finally{Fn(!1)}}return o.memoizedState=[u,i],u}function Lm(r,i,o){return o===void 0||($i&1073741824)!==0&&(ut&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=ME(),Xe.lanes|=r,za|=r,o)}function M_(r,i,o,u){return mr(o,i)?o:Lo.current!==null?(r=Lm(r,o,u),mr(r,i)||(hn=!0),r):($i&42)===0||($i&1073741824)!==0&&(ut&261930)===0?(hn=!0,r.memoizedState=o):(r=ME(),Xe.lanes|=r,za|=r,i)}function V_(r,i,o,u,f){var m=fe.p;fe.p=m!==0&&8>m?m:8;var _=Q.T,C={};Q.T=C,zm(r,!1,i,o);try{var L=f(),J=Q.S;if(J!==null&&J(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ae=T1(L,u);lu(r,i,ae,Er(r))}else lu(r,i,u,Er(r))}catch(le){lu(r,i,{then:function(){},status:"rejected",reason:le},Er())}finally{fe.p=m,_!==null&&C.types!==null&&(_.types=C.types),Q.T=_}}function C1(){}function Um(r,i,o,u){if(r.tag!==5)throw Error(a(476));var f=P_(r).queue;V_(r,f,i,me,o===null?C1:function(){return k_(r),o(u)})}function P_(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:me},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function k_(r){var i=P_(r);i.next===null&&(i=r.alternate.memoizedState),lu(r,i.next.queue,{},Er())}function jm(){return Rn(wu)}function L_(){return an().memoizedState}function U_(){return an().memoizedState}function I1(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Er();r=Va(o);var u=Pa(i,r,o);u!==null&&(ir(u,i,o),ru(u,i,o)),i={cache:mm()},r.payload=i;return}i=i.return}}function D1(r,i,o){var u=Er();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},_h(r)?z_(i,o):(o=rm(r,i,o,u),o!==null&&(ir(o,r,u),B_(o,i,u)))}function j_(r,i,o){var u=Er();lu(r,i,o,u)}function lu(r,i,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(_h(r))z_(i,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,C=m(_,o);if(f.hasEagerState=!0,f.eagerState=C,mr(C,_))return Zc(r,i,f,0),Pt===null&&Jc(),!1}catch{}finally{}if(o=rm(r,i,f,u),o!==null)return ir(o,r,u),B_(o,i,u),!0}return!1}function zm(r,i,o,u){if(u={lane:2,revertLane:vp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},_h(r)){if(i)throw Error(a(479))}else i=rm(r,o,u,2),i!==null&&ir(i,r,2)}function _h(r){var i=r.alternate;return r===Xe||i!==null&&i===Xe}function z_(r,i){Uo=fh=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function B_(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,k(r,o)}}var uu={readContext:Rn,use:ph,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt};uu.useEffectEvent=Jt;var F_={readContext:Rn,use:ph,useCallback:function(r,i){return $n().memoizedState=[r,i===void 0?null:i],r},useContext:Rn,useEffect:w_,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,yh(4194308,4,D_.bind(null,i,r),o)},useLayoutEffect:function(r,i){return yh(4194308,4,r,i)},useInsertionEffect:function(r,i){yh(4,2,r,i)},useMemo:function(r,i){var o=$n();i=i===void 0?null:i;var u=r();if(qs){Fn(!0);try{r()}finally{Fn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=$n();if(o!==void 0){var f=o(i);if(qs){Fn(!0);try{o(i)}finally{Fn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=D1.bind(null,Xe,r),[u.memoizedState,r]},useRef:function(r){var i=$n();return r={current:r},i.memoizedState=r},useState:function(r){r=Mm(r);var i=r.queue,o=j_.bind(null,Xe,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:km,useDeferredValue:function(r,i){var o=$n();return Lm(o,r,i)},useTransition:function(){var r=Mm(!1);return r=V_.bind(null,Xe,r.queue,!0,!1),$n().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=Xe,f=$n();if(mt){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),Pt===null)throw Error(a(349));(ut&127)!==0||u_(u,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,w_(h_.bind(null,u,m,r),[r]),u.flags|=2048,zo(9,{destroy:void 0},c_.bind(null,u,m,o,i),null),o},useId:function(){var r=$n(),i=Pt.identifierPrefix;if(mt){var o=bi,u=Ti;o=(u&~(1<<32-Gt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=dh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=b1++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:jm,useFormState:E_,useActionState:E_,useOptimistic:function(r){var i=$n();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=zm.bind(null,Xe,!0,o),o.dispatch=i,[r,i]},useMemoCache:Nm,useCacheRefresh:function(){return $n().memoizedState=I1.bind(null,Xe)},useEffectEvent:function(r){var i=$n(),o={impl:r};return i.memoizedState=o,function(){if((bt&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},Bm={readContext:Rn,use:ph,useCallback:x_,useContext:Rn,useEffect:Pm,useImperativeHandle:N_,useInsertionEffect:C_,useLayoutEffect:I_,useMemo:O_,useReducer:gh,useRef:A_,useState:function(){return gh(Ki)},useDebugValue:km,useDeferredValue:function(r,i){var o=an();return M_(o,Nt.memoizedState,r,i)},useTransition:function(){var r=gh(Ki)[0],i=an().memoizedState;return[typeof r=="boolean"?r:ou(r),i]},useSyncExternalStore:l_,useId:L_,useHostTransitionStatus:jm,useFormState:T_,useActionState:T_,useOptimistic:function(r,i){var o=an();return m_(o,Nt,r,i)},useMemoCache:Nm,useCacheRefresh:U_};Bm.useEffectEvent=R_;var H_={readContext:Rn,use:ph,useCallback:x_,useContext:Rn,useEffect:Pm,useImperativeHandle:N_,useInsertionEffect:C_,useLayoutEffect:I_,useMemo:O_,useReducer:Om,useRef:A_,useState:function(){return Om(Ki)},useDebugValue:km,useDeferredValue:function(r,i){var o=an();return Nt===null?Lm(o,r,i):M_(o,Nt.memoizedState,r,i)},useTransition:function(){var r=Om(Ki)[0],i=an().memoizedState;return[typeof r=="boolean"?r:ou(r),i]},useSyncExternalStore:l_,useId:L_,useHostTransitionStatus:jm,useFormState:S_,useActionState:S_,useOptimistic:function(r,i){var o=an();return Nt!==null?m_(o,Nt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Nm,useCacheRefresh:U_};H_.useEffectEvent=R_;function Fm(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Hm={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Er(),f=Va(u);f.payload=i,o!=null&&(f.callback=o),i=Pa(r,f,u),i!==null&&(ir(i,r,u),ru(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Er(),f=Va(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Pa(r,f,u),i!==null&&(ir(i,r,u),ru(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Er(),u=Va(o);u.tag=2,i!=null&&(u.callback=i),i=Pa(r,u,o),i!==null&&(ir(i,r,o),ru(i,r,o))}};function q_(r,i,o,u,f,m,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,_):i.prototype&&i.prototype.isPureReactComponent?!Ql(o,u)||!Ql(f,m):!0}function G_(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&Hm.enqueueReplaceState(i,i.state,null)}function Gs(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=E({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}function $_(r){Wc(r)}function K_(r){console.error(r)}function Y_(r){Wc(r)}function Eh(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Q_(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function qm(r,i,o){return o=Va(o),o.tag=3,o.payload={element:null},o.callback=function(){Eh(r,i)},o}function X_(r){return r=Va(r),r.tag=3,r}function W_(r,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){Q_(i,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){Q_(i,o,u),typeof f!="function"&&(Ba===null?Ba=new Set([this]):Ba.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function N1(r,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Oo(i,o,f,!0),o=gr.current,o!==null){switch(o.tag){case 31:case 13:return Ur===null?Oh():o.alternate===null&&Zt===0&&(Zt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===oh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),pp(r,u,f)),!1;case 22:return o.flags|=65536,u===oh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),pp(r,u,f)),!1}throw Error(a(435,o.tag))}return pp(r,u,f),Oh(),!1}if(mt)return i=gr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==um&&(r=Error(a(422),{cause:u}),Jl(Vr(r,o)))):(u!==um&&(i=Error(a(423),{cause:u}),Jl(Vr(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Vr(u,o),f=qm(r.stateNode,u,f),Em(r,f),Zt!==4&&(Zt=2)),!1;var m=Error(a(520),{cause:u});if(m=Vr(m,o),yu===null?yu=[m]:yu.push(m),Zt!==4&&(Zt=2),i===null)return!0;u=Vr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=qm(o.stateNode,u,r),Em(o,r),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ba===null||!Ba.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=X_(f),W_(f,r,o,u),Em(o,f),!1}o=o.return}while(o!==null);return!1}var Gm=Error(a(461)),hn=!1;function Cn(r,i,o,u){i.child=r===null?t_(i,null,o,u):Hs(i,r.child,o,u)}function J_(r,i,o,u,f){o=o.render;var m=i.ref;if("ref"in u){var _={};for(var C in u)C!=="ref"&&(_[C]=u[C])}else _=u;return js(i),u=Rm(r,i,o,_,m,f),C=Cm(),r!==null&&!hn?(Im(r,i,f),Yi(r,i,f)):(mt&&C&&om(i),i.flags|=1,Cn(r,i,u,f),i.child)}function Z_(r,i,o,u,f){if(r===null){var m=o.type;return typeof m=="function"&&!im(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,eE(r,i,m,u,f)):(r=th(o.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!Zm(r,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:Ql,o(_,u)&&r.ref===i.ref)return Yi(r,i,f)}return i.flags|=1,r=Fi(m,u),r.ref=i.ref,r.return=i,i.child=r}function eE(r,i,o,u,f){if(r!==null){var m=r.memoizedProps;if(Ql(m,u)&&r.ref===i.ref)if(hn=!1,i.pendingProps=u=m,Zm(r,f))(r.flags&131072)!==0&&(hn=!0);else return i.lanes=r.lanes,Yi(r,i,f)}return $m(r,i,o,u,f)}function tE(r,i,o,u){var f=u.children,m=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,r!==null){for(u=i.child=r.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,i.child=null;return nE(r,i,m,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&ah(i,m!==null?m.cachePool:null),m!==null?i_(i,m):bm(),a_(i);else return u=i.lanes=536870912,nE(r,i,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(ah(i,m.cachePool),i_(i,m),La(),i.memoizedState=null):(r!==null&&ah(i,null),bm(),La());return Cn(r,i,f,o),i.child}function cu(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function nE(r,i,o,u,f){var m=gm();return m=m===null?null:{parent:un._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},r!==null&&ah(i,null),bm(),a_(i),r!==null&&Oo(r,i,u,!0),i.childLanes=f,null}function Th(r,i){return i=Sh({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function rE(r,i,o){return Hs(i,r.child,null,o),r=Th(i,i.pendingProps),r.flags|=2,yr(i),i.memoizedState=null,r}function x1(r,i,o){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(mt){if(u.mode==="hidden")return r=Th(i,u),i.lanes=536870912,cu(null,r);if(Am(i),(r=Bt)?(r=pT(r,Lr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Da!==null?{id:Ti,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=zv(r),o.return=i,i.child=o,wn=i,Bt=null)):r=null,r===null)throw xa(i);return i.lanes=536870912,null}return Th(i,u)}var m=r.memoizedState;if(m!==null){var _=m.dehydrated;if(Am(i),f)if(i.flags&256)i.flags&=-257,i=rE(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(a(558));else if(hn||Oo(r,i,o,!1),f=(o&r.childLanes)!==0,hn||f){if(u=Pt,u!==null&&(_=q(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,Ps(r,_),ir(u,r,_),Gm;Oh(),i=rE(r,i,o)}else r=m.treeContext,Bt=jr(_.nextSibling),wn=i,mt=!0,Na=null,Lr=!1,r!==null&&Hv(i,r),i=Th(i,u),i.flags|=4096;return i}return r=Fi(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function bh(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function $m(r,i,o,u,f){return js(i),o=Rm(r,i,o,u,void 0,f),u=Cm(),r!==null&&!hn?(Im(r,i,f),Yi(r,i,f)):(mt&&u&&om(i),i.flags|=1,Cn(r,i,o,f),i.child)}function iE(r,i,o,u,f,m){return js(i),i.updateQueue=null,o=o_(i,u,o,f),s_(r),u=Cm(),r!==null&&!hn?(Im(r,i,m),Yi(r,i,m)):(mt&&u&&om(i),i.flags|=1,Cn(r,i,o,m),i.child)}function aE(r,i,o,u,f){if(js(i),i.stateNode===null){var m=Io,_=o.contextType;typeof _=="object"&&_!==null&&(m=Rn(_)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Hm,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},vm(i),_=o.contextType,m.context=typeof _=="object"&&_!==null?Rn(_):Io,m.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Fm(i,o,_,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Hm.enqueueReplaceState(m,m.state,null),au(i,u,m,f),iu(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var C=i.memoizedProps,L=Gs(o,C);m.props=L;var J=m.context,ae=o.contextType;_=Io,typeof ae=="object"&&ae!==null&&(_=Rn(ae));var le=o.getDerivedStateFromProps;ae=typeof le=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,ae||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||J!==_)&&G_(i,m,u,_),Ma=!1;var ee=i.memoizedState;m.state=ee,au(i,u,m,f),iu(),J=i.memoizedState,C||ee!==J||Ma?(typeof le=="function"&&(Fm(i,o,le,u),J=i.memoizedState),(L=Ma||q_(i,o,L,u,ee,J,_))?(ae||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=J),m.props=u,m.state=J,m.context=_,u=L):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,_m(r,i),_=i.memoizedProps,ae=Gs(o,_),m.props=ae,le=i.pendingProps,ee=m.context,J=o.contextType,L=Io,typeof J=="object"&&J!==null&&(L=Rn(J)),C=o.getDerivedStateFromProps,(J=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==le||ee!==L)&&G_(i,m,u,L),Ma=!1,ee=i.memoizedState,m.state=ee,au(i,u,m,f),iu();var re=i.memoizedState;_!==le||ee!==re||Ma||r!==null&&r.dependencies!==null&&rh(r.dependencies)?(typeof C=="function"&&(Fm(i,o,C,u),re=i.memoizedState),(ae=Ma||q_(i,o,ae,u,ee,re,L)||r!==null&&r.dependencies!==null&&rh(r.dependencies))?(J||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,re,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,re,L)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=re),m.props=u,m.state=re,m.context=L,u=ae):(typeof m.componentDidUpdate!="function"||_===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,bh(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=Hs(i,r.child,null,f),i.child=Hs(i,null,o,f)):Cn(r,i,o,f),i.memoizedState=m.state,r=i.child):r=Yi(r,i,f),r}function sE(r,i,o,u){return Ls(),i.flags|=256,Cn(r,i,o,u),i.child}var Km={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ym(r){return{baseLanes:r,cachePool:Qv()}}function Qm(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=_r),r}function oE(r,i,o){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=r!==null&&r.memoizedState===null?!1:(rn.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,r===null){if(mt){if(f?ka(i):La(),(r=Bt)?(r=pT(r,Lr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Da!==null?{id:Ti,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=zv(r),o.return=i,i.child=o,wn=i,Bt=null)):r=null,r===null)throw xa(i);return xp(r)?i.lanes=32:i.lanes=536870912,null}var C=u.children;return u=u.fallback,f?(La(),f=i.mode,C=Sh({mode:"hidden",children:C},f),u=ks(u,f,o,null),C.return=i,u.return=i,C.sibling=u,i.child=C,u=i.child,u.memoizedState=Ym(o),u.childLanes=Qm(r,_,o),i.memoizedState=Km,cu(null,u)):(ka(i),Xm(i,C))}var L=r.memoizedState;if(L!==null&&(C=L.dehydrated,C!==null)){if(m)i.flags&256?(ka(i),i.flags&=-257,i=Wm(r,i,o)):i.memoizedState!==null?(La(),i.child=r.child,i.flags|=128,i=null):(La(),C=u.fallback,f=i.mode,u=Sh({mode:"visible",children:u.children},f),C=ks(C,f,o,null),C.flags|=2,u.return=i,C.return=i,u.sibling=C,i.child=u,Hs(i,r.child,null,o),u=i.child,u.memoizedState=Ym(o),u.childLanes=Qm(r,_,o),i.memoizedState=Km,i=cu(null,u));else if(ka(i),xp(C)){if(_=C.nextSibling&&C.nextSibling.dataset,_)var J=_.dgst;_=J,u=Error(a(419)),u.stack="",u.digest=_,Jl({value:u,source:null,stack:null}),i=Wm(r,i,o)}else if(hn||Oo(r,i,o,!1),_=(o&r.childLanes)!==0,hn||_){if(_=Pt,_!==null&&(u=q(_,o),u!==0&&u!==L.retryLane))throw L.retryLane=u,Ps(r,u),ir(_,r,u),Gm;Np(C)||Oh(),i=Wm(r,i,o)}else Np(C)?(i.flags|=192,i.child=r.child,i=null):(r=L.treeContext,Bt=jr(C.nextSibling),wn=i,mt=!0,Na=null,Lr=!1,r!==null&&Hv(i,r),i=Xm(i,u.children),i.flags|=4096);return i}return f?(La(),C=u.fallback,f=i.mode,L=r.child,J=L.sibling,u=Fi(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,J!==null?C=Fi(J,C):(C=ks(C,f,o,null),C.flags|=2),C.return=i,u.return=i,u.sibling=C,i.child=u,cu(null,u),u=i.child,C=r.child.memoizedState,C===null?C=Ym(o):(f=C.cachePool,f!==null?(L=un._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=Qv(),C={baseLanes:C.baseLanes|o,cachePool:f}),u.memoizedState=C,u.childLanes=Qm(r,_,o),i.memoizedState=Km,cu(r.child,u)):(ka(i),o=r.child,r=o.sibling,o=Fi(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(_=i.deletions,_===null?(i.deletions=[r],i.flags|=16):_.push(r)),i.child=o,i.memoizedState=null,o)}function Xm(r,i){return i=Sh({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Sh(r,i){return r=pr(22,r,null,i),r.lanes=0,r}function Wm(r,i,o){return Hs(i,r.child,null,o),r=Xm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function lE(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),fm(r.return,i,o)}function Jm(r,i,o,u,f,m){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function uE(r,i,o){var u=i.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var _=rn.current,C=(_&2)!==0;if(C?(_=_&1|2,i.flags|=128):_&=1,de(rn,_),Cn(r,i,u,o),u=mt?Wl:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&lE(r,o,i);else if(r.tag===19)lE(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&hh(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Jm(i,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&hh(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}Jm(i,!0,o,null,m,u);break;case"together":Jm(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Yi(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),za|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Oo(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=Fi(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Fi(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Zm(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&rh(r)))}function O1(r,i,o){switch(i.tag){case 3:yt(i,i.stateNode.containerInfo),Oa(i,un,r.memoizedState.cache),Ls();break;case 27:case 5:Ir(i);break;case 4:yt(i,i.stateNode.containerInfo);break;case 10:Oa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Am(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ka(i),i.flags|=128,null):(o&i.child.childLanes)!==0?oE(r,i,o):(ka(i),r=Yi(r,i,o),r!==null?r.sibling:null);ka(i);break;case 19:var f=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Oo(r,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return uE(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),de(rn,rn.current),u)break;return null;case 22:return i.lanes=0,tE(r,i,o,i.pendingProps);case 24:Oa(i,un,r.memoizedState.cache)}return Yi(r,i,o)}function cE(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)hn=!0;else{if(!Zm(r,o)&&(i.flags&128)===0)return hn=!1,O1(r,i,o);hn=(r.flags&131072)!==0}else hn=!1,mt&&(i.flags&1048576)!==0&&Fv(i,Wl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=Bs(i.elementType),i.type=r,typeof r=="function")im(r)?(u=Gs(r,u),i.tag=1,i=aE(null,i,r,u,o)):(i.tag=0,i=$m(null,i,r,u,o));else{if(r!=null){var f=r.$$typeof;if(f===K){i.tag=11,i=J_(null,i,r,u,o);break e}else if(f===b){i.tag=14,i=Z_(null,i,r,u,o);break e}}throw i=Pe(r)||r,Error(a(306,i,""))}}return i;case 0:return $m(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=Gs(u,i.pendingProps),aE(r,i,u,f,o);case 3:e:{if(yt(i,i.stateNode.containerInfo),r===null)throw Error(a(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,_m(r,i),au(i,u,null,o);var _=i.memoizedState;if(u=_.cache,Oa(i,un,u),u!==m.cache&&dm(i,[un],o,!0),iu(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=sE(r,i,u,o);break e}else if(u!==f){f=Vr(Error(a(424)),i),Jl(f),i=sE(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Bt=jr(r.firstChild),wn=i,mt=!0,Na=null,Lr=!0,o=t_(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ls(),u===f){i=Yi(r,i,o);break e}Cn(r,i,u,o)}i=i.child}return i;case 26:return bh(r,i),r===null?(o=TT(i.type,null,i.pendingProps,null))?i.memoizedState=o:mt||(o=i.type,r=i.pendingProps,u=jh(Ve.current).createElement(o),u[ge]=i,u[_e]=r,In(u,o,r),Ut(u),i.stateNode=u):i.memoizedState=TT(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Ir(i),r===null&&mt&&(u=i.stateNode=vT(i.type,i.pendingProps,Ve.current),wn=i,Lr=!0,f=Bt,Ga(i.type)?(Op=f,Bt=jr(u.firstChild)):Bt=f),Cn(r,i,i.pendingProps.children,o),bh(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&mt&&((f=u=Bt)&&(u=lC(u,i.type,i.pendingProps,Lr),u!==null?(i.stateNode=u,wn=i,Bt=jr(u.firstChild),Lr=!1,f=!0):f=!1),f||xa(i)),Ir(i),f=i.type,m=i.pendingProps,_=r!==null?r.memoizedProps:null,u=m.children,Cp(f,m)?u=null:_!==null&&Cp(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Rm(r,i,S1,null,null,o),wu._currentValue=f),bh(r,i),Cn(r,i,u,o),i.child;case 6:return r===null&&mt&&((r=o=Bt)&&(o=uC(o,i.pendingProps,Lr),o!==null?(i.stateNode=o,wn=i,Bt=null,r=!0):r=!1),r||xa(i)),null;case 13:return oE(r,i,o);case 4:return yt(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Hs(i,null,u,o):Cn(r,i,u,o),i.child;case 11:return J_(r,i,i.type,i.pendingProps,o);case 7:return Cn(r,i,i.pendingProps,o),i.child;case 8:return Cn(r,i,i.pendingProps.children,o),i.child;case 12:return Cn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Oa(i,i.type,u.value),Cn(r,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,js(i),f=Rn(f),u=u(f),i.flags|=1,Cn(r,i,u,o),i.child;case 14:return Z_(r,i,i.type,i.pendingProps,o);case 15:return eE(r,i,i.type,i.pendingProps,o);case 19:return uE(r,i,o);case 31:return x1(r,i,o);case 22:return tE(r,i,o,i.pendingProps);case 24:return js(i),u=Rn(un),r===null?(f=gm(),f===null&&(f=Pt,m=mm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:u,cache:f},vm(i),Oa(i,un,f)):((r.lanes&o)!==0&&(_m(r,i),au(i,null,null,o),iu()),f=r.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Oa(i,un,u)):(u=m.cache,Oa(i,un,u),u!==f.cache&&dm(i,[un],o,!0))),Cn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Qi(r){r.flags|=4}function ep(r,i,o,u,f){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(f&335544128)===f)if(r.stateNode.complete)r.flags|=8192;else if(LE())r.flags|=8192;else throw Fs=oh,ym}else r.flags&=-16777217}function hE(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!RT(i))if(LE())r.flags|=8192;else throw Fs=oh,ym}function Ah(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Li():536870912,r.lanes|=i,qo|=i)}function hu(r,i){if(!mt)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Ft(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function M1(r,i,o){var u=i.pendingProps;switch(lm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(i),null;case 1:return Ft(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Gi(un),At(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(xo(i)?Qi(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,cm())),Ft(i),null;case 26:var f=i.type,m=i.memoizedState;return r===null?(Qi(i),m!==null?(Ft(i),hE(i,m)):(Ft(i),ep(i,f,null,u,o))):m?m!==r.memoizedState?(Qi(i),Ft(i),hE(i,m)):(Ft(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&Qi(i),Ft(i),ep(i,f,r,u,o)),null;case 27:if(Kr(i),o=Ve.current,f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Qi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Ft(i),null}r=ve.current,xo(i)?qv(i):(r=vT(f,u,o),i.stateNode=r,Qi(i))}return Ft(i),null;case 5:if(Kr(i),f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Qi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Ft(i),null}if(m=ve.current,xo(i))qv(i);else{var _=jh(Ve.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}m[ge]=i,m[_e]=u;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(In(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Qi(i)}}return Ft(i),ep(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Qi(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(r=Ve.current,xo(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,f=wn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[ge]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||oT(r.nodeValue,o)),r||xa(i,!0)}else r=jh(r).createTextNode(u),r[ge]=i,i.stateNode=r}return Ft(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=xo(i),o!==null){if(r===null){if(!u)throw Error(a(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(557));r[ge]=i}else Ls(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ft(i),r=!1}else o=cm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(yr(i),i):(yr(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Ft(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=xo(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[ge]=i}else Ls(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ft(i),f=!1}else f=cm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(yr(i),i):(yr(i),null)}return yr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),Ah(i,i.updateQueue),Ft(i),null);case 4:return At(),r===null&&bp(i.stateNode.containerInfo),Ft(i),null;case 10:return Gi(i.type),Ft(i),null;case 19:if(ie(rn),u=i.memoizedState,u===null)return Ft(i),null;if(f=(i.flags&128)!==0,m=u.rendering,m===null)if(f)hu(u,!1);else{if(Zt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=hh(r),m!==null){for(i.flags|=128,hu(u,!1),r=m.updateQueue,i.updateQueue=r,Ah(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)jv(o,r),o=o.sibling;return de(rn,rn.current&1|2),mt&&Hi(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&Qt()>Dh&&(i.flags|=128,f=!0,hu(u,!1),i.lanes=4194304)}else{if(!f)if(r=hh(m),r!==null){if(i.flags|=128,f=!0,r=r.updateQueue,i.updateQueue=r,Ah(i,r),hu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!mt)return Ft(i),null}else 2*Qt()-u.renderingStartTime>Dh&&o!==536870912&&(i.flags|=128,f=!0,hu(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(r=u.last,r!==null?r.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Qt(),r.sibling=null,o=rn.current,de(rn,f?o&1|2:o&1),mt&&Hi(i,u.treeForkCount),r):(Ft(i),null);case 22:case 23:return yr(i),Sm(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Ft(i),i.subtreeFlags&6&&(i.flags|=8192)):Ft(i),o=i.updateQueue,o!==null&&Ah(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&ie(zs),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Gi(un),Ft(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function V1(r,i){switch(lm(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Gi(un),At(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Kr(i),null;case 31:if(i.memoizedState!==null){if(yr(i),i.alternate===null)throw Error(a(340));Ls()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(yr(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Ls()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ie(rn),null;case 4:return At(),null;case 10:return Gi(i.type),null;case 22:case 23:return yr(i),Sm(),r!==null&&ie(zs),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Gi(un),null;case 25:return null;default:return null}}function fE(r,i){switch(lm(i),i.tag){case 3:Gi(un),At();break;case 26:case 27:case 5:Kr(i);break;case 4:At();break;case 31:i.memoizedState!==null&&yr(i);break;case 13:yr(i);break;case 19:ie(rn);break;case 10:Gi(i.type);break;case 22:case 23:yr(i),Sm(),r!==null&&ie(zs);break;case 24:Gi(un)}}function fu(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==f)}}catch(C){Rt(i,i.return,C)}}function Ua(r,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var _=u.inst,C=_.destroy;if(C!==void 0){_.destroy=void 0,f=i;var L=o,J=C;try{J()}catch(ae){Rt(f,L,ae)}}}u=u.next}while(u!==m)}}catch(ae){Rt(i,i.return,ae)}}function dE(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{r_(i,o)}catch(u){Rt(r,r.return,u)}}}function mE(r,i,o){o.props=Gs(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){Rt(r,i,u)}}function du(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){Rt(r,i,f)}}function Si(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){Rt(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Rt(r,i,f)}else o.current=null}function pE(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){Rt(r,r.return,f)}}function tp(r,i,o){try{var u=r.stateNode;nC(u,r.type,o,i),u[_e]=i}catch(f){Rt(r,r.return,f)}}function gE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ga(r.type)||r.tag===4}function np(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||gE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ga(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function rp(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Yr));else if(u!==4&&(u===27&&Ga(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(rp(r,i,o),r=r.sibling;r!==null;)rp(r,i,o),r=r.sibling}function wh(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&Ga(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(wh(r,i,o),r=r.sibling;r!==null;)wh(r,i,o),r=r.sibling}function yE(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);In(i,u,o),i[ge]=r,i[_e]=o}catch(m){Rt(r,r.return,m)}}var Xi=!1,fn=!1,ip=!1,vE=typeof WeakSet=="function"?WeakSet:Set,bn=null;function P1(r,i){if(r=r.containerInfo,wp=$h,r=Nv(r),Wd(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,C=-1,L=-1,J=0,ae=0,le=r,ee=null;t:for(;;){for(var re;le!==o||f!==0&&le.nodeType!==3||(C=_+f),le!==m||u!==0&&le.nodeType!==3||(L=_+u),le.nodeType===3&&(_+=le.nodeValue.length),(re=le.firstChild)!==null;)ee=le,le=re;for(;;){if(le===r)break t;if(ee===o&&++J===f&&(C=_),ee===m&&++ae===u&&(L=_),(re=le.nextSibling)!==null)break;le=ee,ee=le.parentNode}le=re}o=C===-1||L===-1?null:{start:C,end:L}}else o=null}o=o||{start:0,end:0}}else o=null;for(Rp={focusedElem:r,selectionRange:o},$h=!1,bn=i;bn!==null;)if(i=bn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,bn=r;else for(;bn!==null;){switch(i=bn,m=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)f=r[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Ce=Gs(o.type,f);r=u.getSnapshotBeforeUpdate(Ce,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ue){Rt(o,o.return,Ue)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Dp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Dp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,bn=r;break}bn=i.return}}function _E(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ji(r,o),u&4&&fu(5,o);break;case 1:if(Ji(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(_){Rt(o,o.return,_)}else{var f=Gs(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(_){Rt(o,o.return,_)}}u&64&&dE(o),u&512&&du(o,o.return);break;case 3:if(Ji(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{r_(r,i)}catch(_){Rt(o,o.return,_)}}break;case 27:i===null&&u&4&&yE(o);case 26:case 5:Ji(r,o),i===null&&u&4&&pE(o),u&512&&du(o,o.return);break;case 12:Ji(r,o);break;case 31:Ji(r,o),u&4&&bE(r,o);break;case 13:Ji(r,o),u&4&&SE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=q1.bind(null,o),cC(r,o))));break;case 22:if(u=o.memoizedState!==null||Xi,!u){i=i!==null&&i.memoizedState!==null||fn,f=Xi;var m=fn;Xi=u,(fn=i)&&!m?Zi(r,o,(o.subtreeFlags&8772)!==0):Ji(r,o),Xi=f,fn=m}break;case 30:break;default:Ji(r,o)}}function EE(r){var i=r.alternate;i!==null&&(r.alternate=null,EE(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&zt(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Yt=null,er=!1;function Wi(r,i,o){for(o=o.child;o!==null;)TE(r,i,o),o=o.sibling}function TE(r,i,o){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(ur,o)}catch{}switch(o.tag){case 26:fn||Si(o,i),Wi(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:fn||Si(o,i);var u=Yt,f=er;Ga(o.type)&&(Yt=o.stateNode,er=!1),Wi(r,i,o),bu(o.stateNode),Yt=u,er=f;break;case 5:fn||Si(o,i);case 6:if(u=Yt,f=er,Yt=null,Wi(r,i,o),Yt=u,er=f,Yt!==null)if(er)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(o.stateNode)}catch(m){Rt(o,i,m)}else try{Yt.removeChild(o.stateNode)}catch(m){Rt(o,i,m)}break;case 18:Yt!==null&&(er?(r=Yt,dT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Jo(r)):dT(Yt,o.stateNode));break;case 4:u=Yt,f=er,Yt=o.stateNode.containerInfo,er=!0,Wi(r,i,o),Yt=u,er=f;break;case 0:case 11:case 14:case 15:Ua(2,o,i),fn||Ua(4,o,i),Wi(r,i,o);break;case 1:fn||(Si(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&mE(o,i,u)),Wi(r,i,o);break;case 21:Wi(r,i,o);break;case 22:fn=(u=fn)||o.memoizedState!==null,Wi(r,i,o),fn=u;break;default:Wi(r,i,o)}}function bE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Jo(r)}catch(o){Rt(i,i.return,o)}}}function SE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Jo(r)}catch(o){Rt(i,i.return,o)}}function k1(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new vE),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new vE),i;default:throw Error(a(435,r.tag))}}function Rh(r,i){var o=k1(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var f=G1.bind(null,r,u);u.then(f,f)}})}function tr(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=r,_=i,C=_;e:for(;C!==null;){switch(C.tag){case 27:if(Ga(C.type)){Yt=C.stateNode,er=!1;break e}break;case 5:Yt=C.stateNode,er=!1;break e;case 3:case 4:Yt=C.stateNode.containerInfo,er=!0;break e}C=C.return}if(Yt===null)throw Error(a(160));TE(m,_,f),Yt=null,er=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)AE(i,r),i=i.sibling}var ei=null;function AE(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:tr(i,r),nr(r),u&4&&(Ua(3,r,r.return),fu(3,r),Ua(5,r,r.return));break;case 1:tr(i,r),nr(r),u&512&&(fn||o===null||Si(o,o.return)),u&64&&Xi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ei;if(tr(i,r),nr(r),u&512&&(fn||o===null||Si(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ct]||m[ge]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),In(m,u,o),m[ge]=r,Ut(m),u=m;break e;case"link":var _=AT("link","href",f).get(u+(o.href||""));if(_){for(var C=0;C<_.length;C++)if(m=_[C],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(C,1);break t}}m=f.createElement(u),In(m,u,o),f.head.appendChild(m);break;case"meta":if(_=AT("meta","content",f).get(u+(o.content||""))){for(C=0;C<_.length;C++)if(m=_[C],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(C,1);break t}}m=f.createElement(u),In(m,u,o),f.head.appendChild(m);break;default:throw Error(a(468,u))}m[ge]=r,Ut(m),u=m}r.stateNode=u}else wT(f,r.type,r.stateNode);else r.stateNode=ST(f,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?wT(f,r.type,r.stateNode):ST(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&tp(r,r.memoizedProps,o.memoizedProps)}break;case 27:tr(i,r),nr(r),u&512&&(fn||o===null||Si(o,o.return)),o!==null&&u&4&&tp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(tr(i,r),nr(r),u&512&&(fn||o===null||Si(o,o.return)),r.flags&32){f=r.stateNode;try{Zn(f,"")}catch(Ce){Rt(r,r.return,Ce)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,tp(r,f,o!==null?o.memoizedProps:f)),u&1024&&(ip=!0);break;case 6:if(tr(i,r),nr(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Ce){Rt(r,r.return,Ce)}}break;case 3:if(Fh=null,f=ei,ei=zh(i.containerInfo),tr(i,r),ei=f,nr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Jo(i.containerInfo)}catch(Ce){Rt(r,r.return,Ce)}ip&&(ip=!1,wE(r));break;case 4:u=ei,ei=zh(r.stateNode.containerInfo),tr(i,r),nr(r),ei=u;break;case 12:tr(i,r),nr(r);break;case 31:tr(i,r),nr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Rh(r,u)));break;case 13:tr(i,r),nr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ih=Qt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Rh(r,u)));break;case 22:f=r.memoizedState!==null;var L=o!==null&&o.memoizedState!==null,J=Xi,ae=fn;if(Xi=J||f,fn=ae||L,tr(i,r),fn=ae,Xi=J,nr(r),u&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||L||Xi||fn||$s(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){L=o=i;try{if(m=L.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{C=L.stateNode;var le=L.memoizedProps.style,ee=le!=null&&le.hasOwnProperty("display")?le.display:null;C.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Ce){Rt(L,L.return,Ce)}}}else if(i.tag===6){if(o===null){L=i;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(Ce){Rt(L,L.return,Ce)}}}else if(i.tag===18){if(o===null){L=i;try{var re=L.stateNode;f?mT(re,!0):mT(L.stateNode,!1)}catch(Ce){Rt(L,L.return,Ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Rh(r,o))));break;case 19:tr(i,r),nr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Rh(r,u)));break;case 30:break;case 21:break;default:tr(i,r),nr(r)}}function nr(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(gE(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,m=np(r);wh(r,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(Zn(_,""),o.flags&=-33);var C=np(r);wh(r,C,_);break;case 3:case 4:var L=o.stateNode.containerInfo,J=np(r);rp(r,J,L);break;default:throw Error(a(161))}}catch(ae){Rt(r,r.return,ae)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function wE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;wE(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Ji(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)_E(r,i.alternate,i),i=i.sibling}function $s(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ua(4,i,i.return),$s(i);break;case 1:Si(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&mE(i,i.return,o),$s(i);break;case 27:bu(i.stateNode);case 26:case 5:Si(i,i.return),$s(i);break;case 22:i.memoizedState===null&&$s(i);break;case 30:$s(i);break;default:$s(i)}r=r.sibling}}function Zi(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:Zi(f,m,o),fu(4,m);break;case 1:if(Zi(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(J){Rt(u,u.return,J)}if(u=m,f=u.updateQueue,f!==null){var C=u.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)n_(L[f],C)}catch(J){Rt(u,u.return,J)}}o&&_&64&&dE(m),du(m,m.return);break;case 27:yE(m);case 26:case 5:Zi(f,m,o),o&&u===null&&_&4&&pE(m),du(m,m.return);break;case 12:Zi(f,m,o);break;case 31:Zi(f,m,o),o&&_&4&&bE(f,m);break;case 13:Zi(f,m,o),o&&_&4&&SE(f,m);break;case 22:m.memoizedState===null&&Zi(f,m,o),du(m,m.return);break;case 30:break;default:Zi(f,m,o)}i=i.sibling}}function ap(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Zl(o))}function sp(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Zl(r))}function ti(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)RE(r,i,o,u),i=i.sibling}function RE(r,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ti(r,i,o,u),f&2048&&fu(9,i);break;case 1:ti(r,i,o,u);break;case 3:ti(r,i,o,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Zl(r)));break;case 12:if(f&2048){ti(r,i,o,u),r=i.stateNode;try{var m=i.memoizedProps,_=m.id,C=m.onPostCommit;typeof C=="function"&&C(_,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){Rt(i,i.return,L)}}else ti(r,i,o,u);break;case 31:ti(r,i,o,u);break;case 13:ti(r,i,o,u);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?ti(r,i,o,u):mu(r,i):m._visibility&2?ti(r,i,o,u):(m._visibility|=2,Bo(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&ap(_,i);break;case 24:ti(r,i,o,u),f&2048&&sp(i.alternate,i);break;default:ti(r,i,o,u)}}function Bo(r,i,o,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=r,_=i,C=o,L=u,J=_.flags;switch(_.tag){case 0:case 11:case 15:Bo(m,_,C,L,f),fu(8,_);break;case 23:break;case 22:var ae=_.stateNode;_.memoizedState!==null?ae._visibility&2?Bo(m,_,C,L,f):mu(m,_):(ae._visibility|=2,Bo(m,_,C,L,f)),f&&J&2048&&ap(_.alternate,_);break;case 24:Bo(m,_,C,L,f),f&&J&2048&&sp(_.alternate,_);break;default:Bo(m,_,C,L,f)}i=i.sibling}}function mu(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,f=u.flags;switch(u.tag){case 22:mu(o,u),f&2048&&ap(u.alternate,u);break;case 24:mu(o,u),f&2048&&sp(u.alternate,u);break;default:mu(o,u)}i=i.sibling}}var pu=8192;function Fo(r,i,o){if(r.subtreeFlags&pu)for(r=r.child;r!==null;)CE(r,i,o),r=r.sibling}function CE(r,i,o){switch(r.tag){case 26:Fo(r,i,o),r.flags&pu&&r.memoizedState!==null&&bC(o,ei,r.memoizedState,r.memoizedProps);break;case 5:Fo(r,i,o);break;case 3:case 4:var u=ei;ei=zh(r.stateNode.containerInfo),Fo(r,i,o),ei=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=pu,pu=16777216,Fo(r,i,o),pu=u):Fo(r,i,o));break;default:Fo(r,i,o)}}function IE(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function gu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];bn=u,NE(u,r)}IE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)DE(r),r=r.sibling}function DE(r){switch(r.tag){case 0:case 11:case 15:gu(r),r.flags&2048&&Ua(9,r,r.return);break;case 3:gu(r);break;case 12:gu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Ch(r)):gu(r);break;default:gu(r)}}function Ch(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];bn=u,NE(u,r)}IE(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ua(8,i,i.return),Ch(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Ch(i));break;default:Ch(i)}r=r.sibling}}function NE(r,i){for(;bn!==null;){var o=bn;switch(o.tag){case 0:case 11:case 15:Ua(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Zl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,bn=u;else e:for(o=r;bn!==null;){u=bn;var f=u.sibling,m=u.return;if(EE(u),u===o){bn=null;break e}if(f!==null){f.return=m,bn=f;break e}bn=m}}}var L1={getCacheForType:function(r){var i=Rn(un),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return Rn(un).controller.signal}},U1=typeof WeakMap=="function"?WeakMap:Map,bt=0,Pt=null,ot=null,ut=0,wt=0,vr=null,ja=!1,Ho=!1,op=!1,ea=0,Zt=0,za=0,Ks=0,lp=0,_r=0,qo=0,yu=null,rr=null,up=!1,Ih=0,xE=0,Dh=1/0,Nh=null,Ba=null,gn=0,Fa=null,Go=null,ta=0,cp=0,hp=null,OE=null,vu=0,fp=null;function Er(){return(bt&2)!==0&&ut!==0?ut&-ut:Q.T!==null?vp():pe()}function ME(){if(_r===0)if((ut&536870912)===0||mt){var r=ci;ci<<=1,(ci&3932160)===0&&(ci=262144),_r=r}else _r=536870912;return r=gr.current,r!==null&&(r.flags|=32),_r}function ir(r,i,o){(r===Pt&&(wt===2||wt===9)||r.cancelPendingCommit!==null)&&($o(r,0),Ha(r,ut,_r,!1)),hi(r,o),((bt&2)===0||r!==Pt)&&(r===Pt&&((bt&2)===0&&(Ks|=o),Zt===4&&Ha(r,ut,_r,!1)),Ai(r))}function VE(r,i,o){if((bt&6)!==0)throw Error(a(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||hr(r,i),f=u?B1(r,i):mp(r,i,!0),m=u;do{if(f===0){Ho&&!u&&Ha(r,i,0,!1);break}else{if(o=r.current.alternate,m&&!j1(o)){f=mp(r,i,!1),m=!1;continue}if(f===2){if(m=i,r.errorRecoveryDisabledLanes&m)var _=0;else _=r.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var C=r;f=yu;var L=C.current.memoizedState.isDehydrated;if(L&&($o(C,_).flags|=256),_=mp(C,_,!1),_!==2){if(op&&!L){C.errorRecoveryDisabledLanes|=m,Ks|=m,f=4;break e}m=rr,rr=f,m!==null&&(rr===null?rr=m:rr.push.apply(rr,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){$o(r,0),Ha(r,i,0,!0);break}e:{switch(u=r,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ha(u,i,_r,!ja);break e;case 2:rr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Ih+300-Qt(),10<f)){if(Ha(u,i,_r,!ja),cr(u,0,!0)!==0)break e;ta=i,u.timeoutHandle=hT(PE.bind(null,u,o,rr,Nh,up,i,_r,Ks,qo,ja,m,"Throttled",-0,0),f);break e}PE(u,o,rr,Nh,up,i,_r,Ks,qo,ja,m,null,-0,0)}}break}while(!0);Ai(r)}function PE(r,i,o,u,f,m,_,C,L,J,ae,le,ee,re){if(r.timeoutHandle=-1,le=i.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yr},CE(i,m,le);var Ce=(m&62914560)===m?Ih-Qt():(m&4194048)===m?xE-Qt():0;if(Ce=SC(le,Ce),Ce!==null){ta=m,r.cancelPendingCommit=Ce(HE.bind(null,r,i,m,o,u,f,_,C,L,ae,le,null,ee,re)),Ha(r,m,_,!J);return}}HE(r,i,m,o,u,f,_,C,L)}function j1(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!mr(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ha(r,i,o,u){i&=~lp,i&=~Ks,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var m=31-Gt(f),_=1<<m;u[m]=-1,f&=~_}o!==0&&Ui(r,o,i)}function xh(){return(bt&6)===0?(_u(0),!1):!0}function dp(){if(ot!==null){if(wt===0)var r=ot.return;else r=ot,qi=Us=null,Dm(r),ko=null,tu=0,r=ot;for(;r!==null;)fE(r.alternate,r),r=r.return;ot=null}}function $o(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,aC(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),ta=0,dp(),Pt=r,ot=o=Fi(r.current,null),ut=i,wt=0,vr=null,ja=!1,Ho=hr(r,i),op=!1,qo=_r=lp=Ks=za=Zt=0,rr=yu=null,up=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-Gt(u),m=1<<f;i|=r[f],u&=~m}return ea=i,Jc(),o}function kE(r,i){Xe=null,Q.H=uu,i===Po||i===sh?(i=Jv(),wt=3):i===ym?(i=Jv(),wt=4):wt=i===Gm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vr=i,ot===null&&(Zt=1,Eh(r,Vr(i,r.current)))}function LE(){var r=gr.current;return r===null?!0:(ut&4194048)===ut?Ur===null:(ut&62914560)===ut||(ut&536870912)!==0?r===Ur:!1}function UE(){var r=Q.H;return Q.H=uu,r===null?uu:r}function jE(){var r=Q.A;return Q.A=L1,r}function Oh(){Zt=4,ja||(ut&4194048)!==ut&&gr.current!==null||(Ho=!0),(za&134217727)===0&&(Ks&134217727)===0||Pt===null||Ha(Pt,ut,_r,!1)}function mp(r,i,o){var u=bt;bt|=2;var f=UE(),m=jE();(Pt!==r||ut!==i)&&(Nh=null,$o(r,i)),i=!1;var _=Zt;e:do try{if(wt!==0&&ot!==null){var C=ot,L=vr;switch(wt){case 8:dp(),_=6;break e;case 3:case 2:case 9:case 6:gr.current===null&&(i=!0);var J=wt;if(wt=0,vr=null,Ko(r,C,L,J),o&&Ho){_=0;break e}break;default:J=wt,wt=0,vr=null,Ko(r,C,L,J)}}z1(),_=Zt;break}catch(ae){kE(r,ae)}while(!0);return i&&r.shellSuspendCounter++,qi=Us=null,bt=u,Q.H=f,Q.A=m,ot===null&&(Pt=null,ut=0,Jc()),_}function z1(){for(;ot!==null;)zE(ot)}function B1(r,i){var o=bt;bt|=2;var u=UE(),f=jE();Pt!==r||ut!==i?(Nh=null,Dh=Qt()+500,$o(r,i)):Ho=hr(r,i);e:do try{if(wt!==0&&ot!==null){i=ot;var m=vr;t:switch(wt){case 1:wt=0,vr=null,Ko(r,i,m,1);break;case 2:case 9:if(Xv(m)){wt=0,vr=null,BE(i);break}i=function(){wt!==2&&wt!==9||Pt!==r||(wt=7),Ai(r)},m.then(i,i);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:Xv(m)?(wt=0,vr=null,BE(i)):(wt=0,vr=null,Ko(r,i,m,7));break;case 5:var _=null;switch(ot.tag){case 26:_=ot.memoizedState;case 5:case 27:var C=ot;if(_?RT(_):C.stateNode.complete){wt=0,vr=null;var L=C.sibling;if(L!==null)ot=L;else{var J=C.return;J!==null?(ot=J,Mh(J)):ot=null}break t}}wt=0,vr=null,Ko(r,i,m,5);break;case 6:wt=0,vr=null,Ko(r,i,m,6);break;case 8:dp(),Zt=6;break e;default:throw Error(a(462))}}F1();break}catch(ae){kE(r,ae)}while(!0);return qi=Us=null,Q.H=u,Q.A=f,bt=o,ot!==null?0:(Pt=null,ut=0,Jc(),Zt)}function F1(){for(;ot!==null&&!qt();)zE(ot)}function zE(r){var i=cE(r.alternate,r,ea);r.memoizedProps=r.pendingProps,i===null?Mh(r):ot=i}function BE(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=iE(o,i,i.pendingProps,i.type,void 0,ut);break;case 11:i=iE(o,i,i.pendingProps,i.type.render,i.ref,ut);break;case 5:Dm(i);default:fE(o,i),i=ot=jv(i,ea),i=cE(o,i,ea)}r.memoizedProps=r.pendingProps,i===null?Mh(r):ot=i}function Ko(r,i,o,u){qi=Us=null,Dm(i),ko=null,tu=0;var f=i.return;try{if(N1(r,f,i,o,ut)){Zt=1,Eh(r,Vr(o,r.current)),ot=null;return}}catch(m){if(f!==null)throw ot=f,m;Zt=1,Eh(r,Vr(o,r.current)),ot=null;return}i.flags&32768?(mt||u===1?r=!0:Ho||(ut&536870912)!==0?r=!1:(ja=r=!0,(u===2||u===9||u===3||u===6)&&(u=gr.current,u!==null&&u.tag===13&&(u.flags|=16384))),FE(i,r)):Mh(i)}function Mh(r){var i=r;do{if((i.flags&32768)!==0){FE(i,ja);return}r=i.return;var o=M1(i.alternate,i,ea);if(o!==null){ot=o;return}if(i=i.sibling,i!==null){ot=i;return}ot=i=r}while(i!==null);Zt===0&&(Zt=5)}function FE(r,i){do{var o=V1(r.alternate,r);if(o!==null){o.flags&=32767,ot=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){ot=r;return}ot=r=o}while(r!==null);Zt=6,ot=null}function HE(r,i,o,u,f,m,_,C,L){r.cancelPendingCommit=null;do Vh();while(gn!==0);if((bt&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=nm,Ll(r,o,m,_,C,L),r===Pt&&(ot=Pt=null,ut=0),Go=i,Fa=r,ta=o,cp=m,hp=f,OE=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,$1(En,function(){return YE(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,f=fe.p,fe.p=2,_=bt,bt|=4;try{P1(r,i,o)}finally{bt=_,fe.p=f,Q.T=u}}gn=1,qE(),GE(),$E()}}function qE(){if(gn===1){gn=0;var r=Fa,i=Go,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var u=fe.p;fe.p=2;var f=bt;bt|=4;try{AE(i,r);var m=Rp,_=Nv(r.containerInfo),C=m.focusedElem,L=m.selectionRange;if(_!==C&&C&&C.ownerDocument&&Dv(C.ownerDocument.documentElement,C)){if(L!==null&&Wd(C)){var J=L.start,ae=L.end;if(ae===void 0&&(ae=J),"selectionStart"in C)C.selectionStart=J,C.selectionEnd=Math.min(ae,C.value.length);else{var le=C.ownerDocument||document,ee=le&&le.defaultView||window;if(ee.getSelection){var re=ee.getSelection(),Ce=C.textContent.length,Ue=Math.min(L.start,Ce),Ot=L.end===void 0?Ue:Math.min(L.end,Ce);!re.extend&&Ue>Ot&&(_=Ot,Ot=Ue,Ue=_);var $=Iv(C,Ue),H=Iv(C,Ot);if($&&H&&(re.rangeCount!==1||re.anchorNode!==$.node||re.anchorOffset!==$.offset||re.focusNode!==H.node||re.focusOffset!==H.offset)){var W=le.createRange();W.setStart($.node,$.offset),re.removeAllRanges(),Ue>Ot?(re.addRange(W),re.extend(H.node,H.offset)):(W.setEnd(H.node,H.offset),re.addRange(W))}}}}for(le=[],re=C;re=re.parentNode;)re.nodeType===1&&le.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<le.length;C++){var se=le[C];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}$h=!!wp,Rp=wp=null}finally{bt=f,fe.p=u,Q.T=o}}r.current=i,gn=2}}function GE(){if(gn===2){gn=0;var r=Fa,i=Go,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var u=fe.p;fe.p=2;var f=bt;bt|=4;try{_E(r,i.alternate,i)}finally{bt=f,fe.p=u,Q.T=o}}gn=3}}function $E(){if(gn===4||gn===3){gn=0,Mn();var r=Fa,i=Go,o=ta,u=OE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?gn=5:(gn=0,Go=Fa=null,KE(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Ba=null),he(o),i=i.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(ur,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=Q.T,f=fe.p,fe.p=2,Q.T=null;try{for(var m=r.onRecoverableError,_=0;_<u.length;_++){var C=u[_];m(C.value,{componentStack:C.stack})}}finally{Q.T=i,fe.p=f}}(ta&3)!==0&&Vh(),Ai(r),f=r.pendingLanes,(o&261930)!==0&&(f&42)!==0?r===fp?vu++:(vu=0,fp=r):vu=0,_u(0)}}function KE(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Zl(i)))}function Vh(){return qE(),GE(),$E(),YE()}function YE(){if(gn!==5)return!1;var r=Fa,i=cp;cp=0;var o=he(ta),u=Q.T,f=fe.p;try{fe.p=32>o?32:o,Q.T=null,o=hp,hp=null;var m=Fa,_=ta;if(gn=0,Go=Fa=null,ta=0,(bt&6)!==0)throw Error(a(331));var C=bt;if(bt|=4,DE(m.current),RE(m,m.current,_,o),bt=C,_u(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(ur,m)}catch{}return!0}finally{fe.p=f,Q.T=u,KE(r,i)}}function QE(r,i,o){i=Vr(o,i),i=qm(r.stateNode,i,2),r=Pa(r,i,2),r!==null&&(hi(r,2),Ai(r))}function Rt(r,i,o){if(r.tag===3)QE(r,r,o);else for(;i!==null;){if(i.tag===3){QE(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ba===null||!Ba.has(u))){r=Vr(o,r),o=X_(2),u=Pa(i,o,2),u!==null&&(W_(o,u,i,r),hi(u,2),Ai(u));break}}i=i.return}}function pp(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new U1;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(op=!0,f.add(o),r=H1.bind(null,r,i,o),i.then(r,r))}function H1(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Pt===r&&(ut&o)===o&&(Zt===4||Zt===3&&(ut&62914560)===ut&&300>Qt()-Ih?(bt&2)===0&&$o(r,0):lp|=o,qo===ut&&(qo=0)),Ai(r)}function XE(r,i){i===0&&(i=Li()),r=Ps(r,i),r!==null&&(hi(r,i),Ai(r))}function q1(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),XE(r,o)}function G1(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),XE(r,o)}function $1(r,i){return Ge(r,i)}var Ph=null,Yo=null,gp=!1,kh=!1,yp=!1,qa=0;function Ai(r){r!==Yo&&r.next===null&&(Yo===null?Ph=Yo=r:Yo=Yo.next=r),kh=!0,gp||(gp=!0,Y1())}function _u(r,i){if(!yp&&kh){yp=!0;do for(var o=!1,u=Ph;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var _=u.suspendedLanes,C=u.pingedLanes;m=(1<<31-Gt(42|r)+1)-1,m&=f&~(_&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,eT(u,m))}else m=ut,m=cr(u,u===Pt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||hr(u,m)||(o=!0,eT(u,m));u=u.next}while(o);yp=!1}}function K1(){WE()}function WE(){kh=gp=!1;var r=0;qa!==0&&iC()&&(r=qa);for(var i=Qt(),o=null,u=Ph;u!==null;){var f=u.next,m=JE(u,i);m===0?(u.next=null,o===null?Ph=f:o.next=f,f===null&&(Yo=o)):(o=u,(r!==0||(m&3)!==0)&&(kh=!0)),u=f}gn!==0&&gn!==5||_u(r),qa!==0&&(qa=0)}function JE(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var _=31-Gt(m),C=1<<_,L=f[_];L===-1?((C&o)===0||(C&u)!==0)&&(f[_]=po(C,i)):L<=i&&(r.expiredLanes|=C),m&=~C}if(i=Pt,o=ut,o=cr(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(wt===2||wt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&at(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||hr(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&at(u),he(o)){case 2:case 8:o=ki;break;case 32:o=En;break;case 268435456:o=Ts;break;default:o=En}return u=ZE.bind(null,r),o=Ge(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&at(u),r.callbackPriority=2,r.callbackNode=null,2}function ZE(r,i){if(gn!==0&&gn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Vh()&&r.callbackNode!==o)return null;var u=ut;return u=cr(r,r===Pt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(VE(r,u,i),JE(r,Qt()),r.callbackNode!=null&&r.callbackNode===o?ZE.bind(null,r):null)}function eT(r,i){if(Vh())return null;VE(r,i,!0)}function Y1(){sC(function(){(bt&6)!==0?Ge(ya,K1):WE()})}function vp(){if(qa===0){var r=Mo;r===0&&(r=Hn,Hn<<=1,(Hn&261888)===0&&(Hn=256)),qa=r}return qa}function tT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:vo(""+r)}function nT(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function Q1(r,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var m=tT((f[_e]||null).action),_=u.submitter;_&&(i=(i=_[_e]||null)?tT(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var C=new yi("action","action",null,u,f);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(qa!==0){var L=_?nT(f,_):new FormData(f);Um(o,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(C.preventDefault(),L=_?nT(f,_):new FormData(f),Um(o,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var _p=0;_p<tm.length;_p++){var Ep=tm[_p],X1=Ep.toLowerCase(),W1=Ep[0].toUpperCase()+Ep.slice(1);Zr(X1,"on"+W1)}Zr(Mv,"onAnimationEnd"),Zr(Vv,"onAnimationIteration"),Zr(Pv,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(d1,"onTransitionRun"),Zr(m1,"onTransitionStart"),Zr(p1,"onTransitionCancel"),Zr(kv,"onTransitionEnd"),Pn("onMouseEnter",["mouseout","mouseover"]),Pn("onMouseLeave",["mouseout","mouseover"]),Pn("onPointerEnter",["pointerout","pointerover"]),Pn("onPointerLeave",["pointerout","pointerover"]),Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eu));function rT(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var _=u.length-1;0<=_;_--){var C=u[_],L=C.instance,J=C.currentTarget;if(C=C.listener,L!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=J;try{m(f)}catch(ae){Wc(ae)}f.currentTarget=null,m=L}else for(_=0;_<u.length;_++){if(C=u[_],L=C.instance,J=C.currentTarget,C=C.listener,L!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=J;try{m(f)}catch(ae){Wc(ae)}f.currentTarget=null,m=L}}}}function lt(r,i){var o=i[je];o===void 0&&(o=i[je]=new Set);var u=r+"__bubble";o.has(u)||(iT(i,r,2,!1),o.add(u))}function Tp(r,i,o){var u=0;i&&(u|=4),iT(o,r,u,i)}var Lh="_reactListening"+Math.random().toString(36).slice(2);function bp(r){if(!r[Lh]){r[Lh]=!0,Xn.forEach(function(o){o!=="selectionchange"&&(J1.has(o)||Tp(o,!1,r),Tp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Lh]||(i[Lh]=!0,Tp("selectionchange",!1,i))}}function iT(r,i,o,u){switch(MT(i)){case 2:var f=RC;break;case 8:f=CC;break;default:f=Lp}o=f.bind(null,i,o,r),f=void 0,!Cs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function Sp(r,i,o,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var C=u.stateNode.containerInfo;if(C===f)break;if(_===4)for(_=u.return;_!==null;){var L=_.tag;if((L===3||L===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;C!==null;){if(_=kt(C),_===null)return;if(L=_.tag,L===5||L===6||L===26||L===27){u=m=_;continue e}C=C.parentNode}}u=u.return}wa(function(){var J=m,ae=Nr(o),le=[];e:{var ee=Lv.get(r);if(ee!==void 0){var re=yi,Ce=r;switch(r){case"keypress":if(Ds(o)===0)break e;case"keydown":case"keyup":re=Yc;break;case"focusin":Ce="focus",re=xs;break;case"focusout":Ce="blur",re=xs;break;case"beforeblur":case"afterblur":re=xs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=jc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=y;break;case Mv:case Vv:case Pv:re=Bc;break;case kv:re=D;break;case"scroll":case"scrollend":re=ql;break;case"wheel":re=ne;break;case"copy":case"cut":case"paste":re=Fc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Bi;break;case"toggle":case"beforetoggle":re=Qe}var Ue=(i&4)!==0,Ot=!Ue&&(r==="scroll"||r==="scrollend"),$=Ue?ee!==null?ee+"Capture":null:ee;Ue=[];for(var H=J,W;H!==null;){var se=H;if(W=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||W===null||$===null||(se=Qr(H,$),se!=null&&Ue.push(Tu(H,se,W))),Ot)break;H=H.return}0<Ue.length&&(ee=new re(ee,Ce,null,o,ae),le.push({event:ee,listeners:Ue}))}}if((i&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",re=r==="mouseout"||r==="pointerout",ee&&o!==Bl&&(Ce=o.relatedTarget||o.fromElement)&&(kt(Ce)||Ce[we]))break e;if((re||ee)&&(ee=ae.window===ae?ae:(ee=ae.ownerDocument)?ee.defaultView||ee.parentWindow:window,re?(Ce=o.relatedTarget||o.toElement,re=J,Ce=Ce?kt(Ce):null,Ce!==null&&(Ot=l(Ce),Ue=Ce.tag,Ce!==Ot||Ue!==5&&Ue!==27&&Ue!==6)&&(Ce=null)):(re=null,Ce=J),re!==Ce)){if(Ue=Gl,se="onMouseLeave",$="onMouseEnter",H="mouse",(r==="pointerout"||r==="pointerover")&&(Ue=Bi,se="onPointerLeave",$="onPointerEnter",H="pointer"),Ot=re==null?ee:Lt(re),W=Ce==null?ee:Lt(Ce),ee=new Ue(se,H+"leave",re,o,ae),ee.target=Ot,ee.relatedTarget=W,se=null,kt(ae)===J&&(Ue=new Ue($,H+"enter",Ce,o,ae),Ue.target=W,Ue.relatedTarget=Ot,se=Ue),Ot=se,re&&Ce)t:{for(Ue=Z1,$=re,H=Ce,W=0,se=$;se;se=Ue(se))W++;se=0;for(var ke=H;ke;ke=Ue(ke))se++;for(;0<W-se;)$=Ue($),W--;for(;0<se-W;)H=Ue(H),se--;for(;W--;){if($===H||H!==null&&$===H.alternate){Ue=$;break t}$=Ue($),H=Ue(H)}Ue=null}else Ue=null;re!==null&&aT(le,ee,re,Ue,!1),Ce!==null&&Ot!==null&&aT(le,Ot,Ce,Ue,!0)}}e:{if(ee=J?Lt(J):window,re=ee.nodeName&&ee.nodeName.toLowerCase(),re==="select"||re==="input"&&ee.type==="file")var vt=bv;else if(Ev(ee))if(Sv)vt=c1;else{vt=l1;var De=o1}else re=ee.nodeName,!re||re.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&yo(J.elementType)&&(vt=bv):vt=u1;if(vt&&(vt=vt(r,J))){Tv(le,vt,o,ae);break e}De&&De(r,ee,J),r==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&Ul(ee,"number",ee.value)}switch(De=J?Lt(J):window,r){case"focusin":(Ev(De)||De.contentEditable==="true")&&(wo=De,Jd=J,Xl=null);break;case"focusout":Xl=Jd=wo=null;break;case"mousedown":Zd=!0;break;case"contextmenu":case"mouseup":case"dragend":Zd=!1,xv(le,o,ae);break;case"selectionchange":if(f1)break;case"keydown":case"keyup":xv(le,o,ae)}var et;if(Tt)e:{switch(r){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else Ao?Os(r,o)&&(ct="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ct="onCompositionStart");ct&&(Ei&&o.locale!=="ko"&&(Ao||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&Ao&&(et=Hl()):(gi=ae,Fl="value"in gi?gi.value:gi.textContent,Ao=!0)),De=Uh(J,ct),0<De.length&&(ct=new _i(ct,r,null,o,ae),le.push({event:ct,listeners:De}),et?ct.data=et:(et=So(o),et!==null&&(ct.data=et)))),(et=Or?r1(r,o):i1(r,o))&&(ct=Uh(J,"onBeforeInput"),0<ct.length&&(De=new _i("onBeforeInput","beforeinput",null,o,ae),le.push({event:De,listeners:ct}),De.data=et)),Q1(le,r,J,o,ae)}rT(le,i)})}function Tu(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Uh(r,i){for(var o=i+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Qr(r,o),f!=null&&u.unshift(Tu(r,f,m)),f=Qr(r,i),f!=null&&u.push(Tu(r,f,m))),r.tag===3)return u;r=r.return}return[]}function Z1(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function aT(r,i,o,u,f){for(var m=i._reactName,_=[];o!==null&&o!==u;){var C=o,L=C.alternate,J=C.stateNode;if(C=C.tag,L!==null&&L===u)break;C!==5&&C!==26&&C!==27||J===null||(L=J,f?(J=Qr(o,m),J!=null&&_.unshift(Tu(o,J,L))):f||(J=Qr(o,m),J!=null&&_.push(Tu(o,J,L)))),o=o.return}_.length!==0&&r.push({event:i,listeners:_})}var eC=/\r\n?/g,tC=/\u0000|\uFFFD/g;function sT(r){return(typeof r=="string"?r:""+r).replace(eC,`
`).replace(tC,"")}function oT(r,i){return i=sT(i),sT(r)===i}function xt(r,i,o,u,f,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Zn(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Zn(r,""+u);break;case"className":ln(r,"class",u);break;case"tabIndex":ln(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ln(r,o,u);break;case"style":zl(r,u,m);break;case"data":if(i!=="object"){ln(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=vo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&xt(r,i,"name",f.name,f,null),xt(r,i,"formEncType",f.formEncType,f,null),xt(r,i,"formMethod",f.formMethod,f,null),xt(r,i,"formTarget",f.formTarget,f,null)):(xt(r,i,"encType",f.encType,f,null),xt(r,i,"method",f.method,f,null),xt(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=vo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Yr);break;case"onScroll":u!=null&&lt("scroll",r);break;case"onScrollEnd":u!=null&&lt("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=vo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":lt("beforetoggle",r),lt("toggle",r),Xt(r,"popover",u);break;case"xlinkActuate":It(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":It(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":It(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":It(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":It(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":It(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":It(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":It(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":It(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Xt(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Uc.get(o)||o,Xt(r,o,u))}}function Ap(r,i,o,u,f,m){switch(o){case"style":zl(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Zn(r,u):(typeof u=="number"||typeof u=="bigint")&&Zn(r,""+u);break;case"onScroll":u!=null&&lt("scroll",r);break;case"onScrollEnd":u!=null&&lt("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Yr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=r[_e]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Xt(r,o,u)}}}function In(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",r),lt("load",r);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:xt(r,i,m,_,o,null)}}f&&xt(r,i,"srcSet",o.srcSet,o,null),u&&xt(r,i,"src",o.src,o,null);return;case"input":lt("invalid",r);var C=m=_=f=null,L=null,J=null;for(u in o)if(o.hasOwnProperty(u)){var ae=o[u];if(ae!=null)switch(u){case"name":f=ae;break;case"type":_=ae;break;case"checked":L=ae;break;case"defaultChecked":J=ae;break;case"value":m=ae;break;case"defaultValue":C=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,i));break;default:xt(r,i,u,ae,o,null)}}Pc(r,m,C,L,J,_,f,!1);return;case"select":lt("invalid",r),u=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(C=o[f],C!=null))switch(f){case"value":m=C;break;case"defaultValue":_=C;break;case"multiple":u=C;default:xt(r,i,f,C,o,null)}i=m,o=_,r.multiple=!!u,i!=null?Ta(r,!!u,i,!1):o!=null&&Ta(r,!!u,o,!0);return;case"textarea":lt("invalid",r),m=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(C=o[_],C!=null))switch(_){case"value":u=C;break;case"defaultValue":f=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(a(91));break;default:xt(r,i,_,C,o,null)}ba(r,u,f,m);return;case"option":for(L in o)if(o.hasOwnProperty(L)&&(u=o[L],u!=null))switch(L){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:xt(r,i,L,u,o,null)}return;case"dialog":lt("beforetoggle",r),lt("toggle",r),lt("cancel",r),lt("close",r);break;case"iframe":case"object":lt("load",r);break;case"video":case"audio":for(u=0;u<Eu.length;u++)lt(Eu[u],r);break;case"image":lt("error",r),lt("load",r);break;case"details":lt("toggle",r);break;case"embed":case"source":case"link":lt("error",r),lt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in o)if(o.hasOwnProperty(J)&&(u=o[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:xt(r,i,J,u,o,null)}return;default:if(yo(i)){for(ae in o)o.hasOwnProperty(ae)&&(u=o[ae],u!==void 0&&Ap(r,i,ae,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&xt(r,i,C,u,o,null))}function nC(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,C=null,L=null,J=null,ae=null;for(re in o){var le=o[re];if(o.hasOwnProperty(re)&&le!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":L=le;default:u.hasOwnProperty(re)||xt(r,i,re,null,u,le)}}for(var ee in u){var re=u[ee];if(le=o[ee],u.hasOwnProperty(ee)&&(re!=null||le!=null))switch(ee){case"type":m=re;break;case"name":f=re;break;case"checked":J=re;break;case"defaultChecked":ae=re;break;case"value":_=re;break;case"defaultValue":C=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(a(137,i));break;default:re!==le&&xt(r,i,ee,re,u,le)}}go(r,_,C,L,J,ae,m,f);return;case"select":re=_=C=ee=null;for(m in o)if(L=o[m],o.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":re=L;default:u.hasOwnProperty(m)||xt(r,i,m,null,u,L)}for(f in u)if(m=u[f],L=o[f],u.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":ee=m;break;case"defaultValue":C=m;break;case"multiple":_=m;default:m!==L&&xt(r,i,f,m,u,L)}i=C,o=_,u=re,ee!=null?Ta(r,!!o,ee,!1):!!u!=!!o&&(i!=null?Ta(r,!!o,i,!0):Ta(r,!!o,o?[]:"",!1));return;case"textarea":re=ee=null;for(C in o)if(f=o[C],o.hasOwnProperty(C)&&f!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:xt(r,i,C,null,u,f)}for(_ in u)if(f=u[_],m=o[_],u.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":ee=f;break;case"defaultValue":re=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&xt(r,i,_,f,u,m)}kc(r,ee,re);return;case"option":for(var Ce in o)if(ee=o[Ce],o.hasOwnProperty(Ce)&&ee!=null&&!u.hasOwnProperty(Ce))switch(Ce){case"selected":r.selected=!1;break;default:xt(r,i,Ce,null,u,ee)}for(L in u)if(ee=u[L],re=o[L],u.hasOwnProperty(L)&&ee!==re&&(ee!=null||re!=null))switch(L){case"selected":r.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:xt(r,i,L,ee,u,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in o)ee=o[Ue],o.hasOwnProperty(Ue)&&ee!=null&&!u.hasOwnProperty(Ue)&&xt(r,i,Ue,null,u,ee);for(J in u)if(ee=u[J],re=o[J],u.hasOwnProperty(J)&&ee!==re&&(ee!=null||re!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,i));break;default:xt(r,i,J,ee,u,re)}return;default:if(yo(i)){for(var Ot in o)ee=o[Ot],o.hasOwnProperty(Ot)&&ee!==void 0&&!u.hasOwnProperty(Ot)&&Ap(r,i,Ot,void 0,u,ee);for(ae in u)ee=u[ae],re=o[ae],!u.hasOwnProperty(ae)||ee===re||ee===void 0&&re===void 0||Ap(r,i,ae,ee,u,re);return}}for(var $ in o)ee=o[$],o.hasOwnProperty($)&&ee!=null&&!u.hasOwnProperty($)&&xt(r,i,$,null,u,ee);for(le in u)ee=u[le],re=o[le],!u.hasOwnProperty(le)||ee===re||ee==null&&re==null||xt(r,i,le,ee,u,re)}function lT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rC(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,_=f.initiatorType,C=f.duration;if(m&&C&&lT(_)){for(_=0,C=f.responseEnd,u+=1;u<o.length;u++){var L=o[u],J=L.startTime;if(J>C)break;var ae=L.transferSize,le=L.initiatorType;ae&&lT(le)&&(L=L.responseEnd,_+=ae*(L<C?1:(C-J)/(L-J)))}if(--u,i+=8*(m+_)/(f.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var wp=null,Rp=null;function jh(r){return r.nodeType===9?r:r.ownerDocument}function uT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cT(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Cp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ip=null;function iC(){var r=window.event;return r&&r.type==="popstate"?r===Ip?!1:(Ip=r,!0):(Ip=null,!1)}var hT=typeof setTimeout=="function"?setTimeout:void 0,aC=typeof clearTimeout=="function"?clearTimeout:void 0,fT=typeof Promise=="function"?Promise:void 0,sC=typeof queueMicrotask=="function"?queueMicrotask:typeof fT<"u"?function(r){return fT.resolve(null).then(r).catch(oC)}:hT;function oC(r){setTimeout(function(){throw r})}function Ga(r){return r==="head"}function dT(r,i){var o=i,u=0;do{var f=o.nextSibling;if(r.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(f),Jo(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")bu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,bu(o);for(var m=o.firstChild;m;){var _=m.nextSibling,C=m.nodeName;m[Ct]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&bu(r.ownerDocument.body);o=f}while(o);Jo(i)}function mT(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Dp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Dp(o),zt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function lC(r,i,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ct])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=jr(r.nextSibling),r===null)break}return null}function uC(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=jr(r.nextSibling),r===null))return null;return r}function pT(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=jr(r.nextSibling),r===null))return null;return r}function Np(r){return r.data==="$?"||r.data==="$~"}function xp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function cC(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function jr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Op=null;function gT(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return jr(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function yT(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function vT(r,i,o){switch(i=jh(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function bu(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);zt(r)}var zr=new Map,_T=new Set;function zh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var na=fe.d;fe.d={f:hC,r:fC,D:dC,C:mC,L:pC,m:gC,X:vC,S:yC,M:_C};function hC(){var r=na.f(),i=xh();return r||i}function fC(r){var i=Je(r);i!==null&&i.tag===5&&i.type==="form"?k_(i):na.r(r)}var Qo=typeof document>"u"?null:document;function ET(r,i,o){var u=Qo;if(u&&typeof i=="string"&&i){var f=Jn(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),_T.has(f)||(_T.add(f),r={rel:r,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),In(i,"link",r),Ut(i),u.head.appendChild(i)))}}function dC(r){na.D(r),ET("dns-prefetch",r,null)}function mC(r,i){na.C(r,i),ET("preconnect",r,i)}function pC(r,i,o){na.L(r,i,o);var u=Qo;if(u&&r&&i){var f='link[rel="preload"][as="'+Jn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Jn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Jn(o.imageSizes)+'"]')):f+='[href="'+Jn(r)+'"]';var m=f;switch(i){case"style":m=Xo(r);break;case"script":m=Wo(r)}zr.has(m)||(r=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),zr.set(m,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(Su(m))||i==="script"&&u.querySelector(Au(m))||(i=u.createElement("link"),In(i,"link",r),Ut(i),u.head.appendChild(i)))}}function gC(r,i){na.m(r,i);var o=Qo;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Jn(u)+'"][href="'+Jn(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Wo(r)}if(!zr.has(m)&&(r=E({rel:"modulepreload",href:r},i),zr.set(m,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Au(m)))return}u=o.createElement("link"),In(u,"link",r),Ut(u),o.head.appendChild(u)}}}function yC(r,i,o){na.S(r,i,o);var u=Qo;if(u&&r){var f=Tn(u).hoistableStyles,m=Xo(r);i=i||"default";var _=f.get(m);if(!_){var C={loading:0,preload:null};if(_=u.querySelector(Su(m)))C.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":i},o),(o=zr.get(m))&&Mp(r,o);var L=_=u.createElement("link");Ut(L),In(L,"link",r),L._p=new Promise(function(J,ae){L.onload=J,L.onerror=ae}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Bh(_,i,u)}_={type:"stylesheet",instance:_,count:1,state:C},f.set(m,_)}}}function vC(r,i){na.X(r,i);var o=Qo;if(o&&r){var u=Tn(o).hoistableScripts,f=Wo(r),m=u.get(f);m||(m=o.querySelector(Au(f)),m||(r=E({src:r,async:!0},i),(i=zr.get(f))&&Vp(r,i),m=o.createElement("script"),Ut(m),In(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function _C(r,i){na.M(r,i);var o=Qo;if(o&&r){var u=Tn(o).hoistableScripts,f=Wo(r),m=u.get(f);m||(m=o.querySelector(Au(f)),m||(r=E({src:r,async:!0,type:"module"},i),(i=zr.get(f))&&Vp(r,i),m=o.createElement("script"),Ut(m),In(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function TT(r,i,o,u){var f=(f=Ve.current)?zh(f):null;if(!f)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Xo(o.href),o=Tn(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Xo(o.href);var m=Tn(f).hoistableStyles,_=m.get(r);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,_),(m=f.querySelector(Su(r)))&&!m._p&&(_.instance=m,_.state.loading=5),zr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},zr.set(r,o),m||EC(f,r,o,_.state))),i&&u===null)throw Error(a(528,""));return _}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Wo(o),o=Tn(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function Xo(r){return'href="'+Jn(r)+'"'}function Su(r){return'link[rel="stylesheet"]['+r+"]"}function bT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function EC(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),In(i,"link",o),Ut(i),r.head.appendChild(i))}function Wo(r){return'[src="'+Jn(r)+'"]'}function Au(r){return"script[async]"+r}function ST(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Jn(o.href)+'"]');if(u)return i.instance=u,Ut(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Ut(u),In(u,"style",f),Bh(u,o.precedence,r),i.instance=u;case"stylesheet":f=Xo(o.href);var m=r.querySelector(Su(f));if(m)return i.state.loading|=4,i.instance=m,Ut(m),m;u=bT(o),(f=zr.get(f))&&Mp(u,f),m=(r.ownerDocument||r).createElement("link"),Ut(m);var _=m;return _._p=new Promise(function(C,L){_.onload=C,_.onerror=L}),In(m,"link",u),i.state.loading|=4,Bh(m,o.precedence,r),i.instance=m;case"script":return m=Wo(o.src),(f=r.querySelector(Au(m)))?(i.instance=f,Ut(f),f):(u=o,(f=zr.get(m))&&(u=E({},o),Vp(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),Ut(f),In(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Bh(u,o.precedence,r));return i.instance}function Bh(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,_=0;_<u.length;_++){var C=u[_];if(C.dataset.precedence===i)m=C;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Mp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Vp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Fh=null;function AT(r,i,o){if(Fh===null){var u=new Map,f=Fh=new Map;f.set(o,u)}else f=Fh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[Ct]||m[ge]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=r+_;var C=u.get(_);C?C.push(m):u.set(_,[m])}}return u}function wT(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function TC(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function RT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function bC(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Xo(u.href),m=i.querySelector(Su(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Hh.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=m,Ut(m);return}m=i.ownerDocument||i,u=bT(u),(f=zr.get(f))&&Mp(u,f),m=m.createElement("link"),Ut(m);var _=m;_._p=new Promise(function(C,L){_.onload=C,_.onerror=L}),In(m,"link",u),o.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=Hh.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var Pp=0;function SC(r,i){return r.stylesheets&&r.count===0&&Gh(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Gh(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4+i);0<r.imgBytes&&Pp===0&&(Pp=62500*rC());var f=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Gh(r,r.stylesheets),r.unsuspend)){var m=r.unsuspend;r.unsuspend=null,m()}},(r.imgBytes>Pp?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Hh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var qh=null;function Gh(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,qh=new Map,i.forEach(AC,r),qh=null,Hh.call(r))}function AC(r,i){if(!(i.state.loading&4)){var o=qh.get(r);if(o)var u=o.get(null);else{o=new Map,qh.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=i.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,f),o.set(_,f),this.count++,u=Hh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var wu={$$typeof:z,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function wC(r,i,o,u,f,m,_,C,L){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qn(0),this.hiddenUpdates=qn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function CT(r,i,o,u,f,m,_,C,L,J,ae,le){return r=new wC(r,i,o,_,L,J,ae,le,C),i=1,m===!0&&(i|=24),m=pr(3,null,null,i),r.current=m,m.stateNode=r,i=mm(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},vm(m),r}function IT(r){return r?(r=Io,r):Io}function DT(r,i,o,u,f,m){f=IT(f),u.context===null?u.context=f:u.pendingContext=f,u=Va(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Pa(r,u,i),o!==null&&(ir(o,r,i),ru(o,r,i))}function NT(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function kp(r,i){NT(r,i),(r=r.alternate)&&NT(r,i)}function xT(r){if(r.tag===13||r.tag===31){var i=Ps(r,67108864);i!==null&&ir(i,r,67108864),kp(r,67108864)}}function OT(r){if(r.tag===13||r.tag===31){var i=Er();i=Z(i);var o=Ps(r,i);o!==null&&ir(o,r,i),kp(r,i)}}var $h=!0;function RC(r,i,o,u){var f=Q.T;Q.T=null;var m=fe.p;try{fe.p=2,Lp(r,i,o,u)}finally{fe.p=m,Q.T=f}}function CC(r,i,o,u){var f=Q.T;Q.T=null;var m=fe.p;try{fe.p=8,Lp(r,i,o,u)}finally{fe.p=m,Q.T=f}}function Lp(r,i,o,u){if($h){var f=Up(u);if(f===null)Sp(r,i,u,Kh,o),VT(r,u);else if(DC(f,r,i,o,u))u.stopPropagation();else if(VT(r,u),i&4&&-1<IC.indexOf(r)){for(;f!==null;){var m=Je(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Dr(m.pendingLanes);if(_!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;_;){var L=1<<31-Gt(_);C.entanglements[1]|=L,_&=~L}Ai(m),(bt&6)===0&&(Dh=Qt()+500,_u(0))}}break;case 31:case 13:C=Ps(m,2),C!==null&&ir(C,m,2),xh(),kp(m,2)}if(m=Up(u),m===null&&Sp(r,i,u,Kh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Sp(r,i,u,null,o)}}function Up(r){return r=Nr(r),jp(r)}var Kh=null;function jp(r){if(Kh=null,r=kt(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Kh=r,null}function MT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(or()){case ya:return 2;case ki:return 8;case En:case lr:return 32;case Ts:return 268435456;default:return 32}default:return 32}}var zp=!1,$a=null,Ka=null,Ya=null,Ru=new Map,Cu=new Map,Qa=[],IC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VT(r,i){switch(r){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":Ru.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cu.delete(i.pointerId)}}function Iu(r,i,o,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Je(i),i!==null&&xT(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function DC(r,i,o,u,f){switch(i){case"focusin":return $a=Iu($a,r,i,o,u,f),!0;case"dragenter":return Ka=Iu(Ka,r,i,o,u,f),!0;case"mouseover":return Ya=Iu(Ya,r,i,o,u,f),!0;case"pointerover":var m=f.pointerId;return Ru.set(m,Iu(Ru.get(m)||null,r,i,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Cu.set(m,Iu(Cu.get(m)||null,r,i,o,u,f)),!0}return!1}function PT(r){var i=kt(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,Se(r.priority,function(){OT(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,Se(r.priority,function(){OT(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Yh(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Up(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Bl=u,o.target.dispatchEvent(u),Bl=null}else return i=Je(o),i!==null&&xT(i),r.blockedOn=o,!1;i.shift()}return!0}function kT(r,i,o){Yh(r)&&o.delete(i)}function NC(){zp=!1,$a!==null&&Yh($a)&&($a=null),Ka!==null&&Yh(Ka)&&(Ka=null),Ya!==null&&Yh(Ya)&&(Ya=null),Ru.forEach(kT),Cu.forEach(kT)}function Qh(r,i){r.blockedOn===i&&(r.blockedOn=null,zp||(zp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,NC)))}var Xh=null;function LT(r){Xh!==r&&(Xh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Xh===r&&(Xh=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(jp(u||o)===null)continue;break}var m=Je(o);m!==null&&(r.splice(i,3),i-=3,Um(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Jo(r){function i(L){return Qh(L,r)}$a!==null&&Qh($a,r),Ka!==null&&Qh(Ka,r),Ya!==null&&Qh(Ya,r),Ru.forEach(i),Cu.forEach(i);for(var o=0;o<Qa.length;o++){var u=Qa[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Qa.length&&(o=Qa[0],o.blockedOn===null);)PT(o),o.blockedOn===null&&Qa.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],_=f[_e]||null;if(typeof m=="function")_||LT(o);else if(_){var C=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[_e]||null)C=_.formAction;else if(jp(f)!==null)continue}else C=_.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),LT(o)}}}function UT(){function r(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Bp(r){this._internalRoot=r}Wh.prototype.render=Bp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=Er();DT(o,u,r,i,null,null)},Wh.prototype.unmount=Bp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;DT(r.current,2,null,r,null,null),xh(),i[we]=null}};function Wh(r){this._internalRoot=r}Wh.prototype.unstable_scheduleHydration=function(r){if(r){var i=pe();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Qa.length&&i!==0&&i<Qa[o].priority;o++);Qa.splice(o,0,r),o===0&&PT(r)}};var jT=e.version;if(jT!=="19.2.4")throw Error(a(527,jT,"19.2.4"));fe.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=g(i),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var xC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jh.isDisabled&&Jh.supportsFiber)try{ur=Jh.inject(xC),Vt=Jh}catch{}}return Nu.createRoot=function(r,i){if(!s(r))throw Error(a(299));var o=!1,u="",f=$_,m=K_,_=Y_;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=CT(r,1,!1,null,null,o,u,null,f,m,_,UT),r[we]=i.current,bp(r),new Bp(i)},Nu.hydrateRoot=function(r,i,o){if(!s(r))throw Error(a(299));var u=!1,f="",m=$_,_=K_,C=Y_,L=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.formState!==void 0&&(L=o.formState)),i=CT(r,1,!0,i,o??null,u,f,L,m,_,C,UT),i.context=IT(null),o=i.current,u=Er(),u=Z(u),f=Va(u),f.callback=null,Pa(o,f,u),o=u,i.current.lanes=o,hi(i,o),Ai(i),r[we]=i.current,bp(r),new Wh(i)},Nu.version="19.2.4",Nu}var QT;function qC(){if(QT)return Gp.exports;QT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gp.exports=HC(),Gp.exports}var GC=qC();const $C=TS(GC);var Qp={exports:{}},Xp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function KC(){if(XT)return Xp;XT=1;var n=dd();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,a=n.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return Xp.useSyncExternalStoreWithSelector=function(p,g,v,E,S){var I=s(null);if(I.current===null){var P={hasValue:!1,value:null};I.current=P}else P=I.current;I=c(function(){function V(te){if(!Y){if(Y=!0,F=te,te=E(te),S!==void 0&&P.hasValue){var G=P.value;if(S(G,te))return z=G}return z=te}if(G=z,t(F,te))return G;var b=E(te);return S!==void 0&&S(G,b)?(F=te,G):(F=te,z=b)}var Y=!1,F,z,K=v===void 0?null:v;return[function(){return V(g())},K===null?void 0:function(){return V(K())}]},[g,v,E,S]);var B=a(p,I[0],I[1]);return l(function(){P.hasValue=!0,P.value=B},[B]),d(B),B},Xp}var WT;function YC(){return WT||(WT=1,Qp.exports=KC()),Qp.exports}var QC=YC();function XC(n){n()}function WC(){let n=null,e=null;return{clear(){n=null,e=null},notify(){XC(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let a=n;for(;a;)t.push(a),a=a.next;return t},subscribe(t){let a=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!a||n===null||(a=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var JT={notify(){},get:()=>[]};function JC(n,e){let t,a=JT,s=0,l=!1;function c(B){v();const V=a.subscribe(B);let Y=!1;return()=>{Y||(Y=!0,V(),E())}}function d(){a.notify()}function p(){P.onStateChange&&P.onStateChange()}function g(){return l}function v(){s++,t||(t=n.subscribe(p),a=WC())}function E(){s--,t&&s===0&&(t(),t=void 0,a.clear(),a=JT)}function S(){l||(l=!0,v())}function I(){l&&(l=!1,E())}const P={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:p,isSubscribed:g,trySubscribe:S,tryUnsubscribe:I,getListeners:()=>a};return P}var ZC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eI=ZC(),tI=()=>typeof navigator<"u"&&navigator.product==="ReactNative",nI=tI(),rI=()=>eI||nI?U.useLayoutEffect:U.useEffect,iI=rI(),Wp=Symbol.for("react-redux-context"),Jp=typeof globalThis<"u"?globalThis:{};function aI(){if(!U.createContext)return{};const n=Jp[Wp]??(Jp[Wp]=new Map);let e=n.get(U.createContext);return e||(e=U.createContext(null),n.set(U.createContext,e)),e}var hs=aI();function sI(n){const{children:e,context:t,serverState:a,store:s}=n,l=U.useMemo(()=>{const p=JC(s);return{store:s,subscription:p,getServerState:a?()=>a:void 0}},[s,a]),c=U.useMemo(()=>s.getState(),[s]);iI(()=>{const{subscription:p}=l;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==s.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[l,c]);const d=t||hs;return U.createElement(d.Provider,{value:l},e)}var oI=sI;function oy(n=hs){return function(){return U.useContext(n)}}var AS=oy();function wS(n=hs){const e=n===hs?AS:oy(n),t=()=>{const{store:a}=e();return a};return Object.assign(t,{withTypes:()=>t}),t}var lI=wS();function uI(n=hs){const e=n===hs?lI:wS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var cI=uI(),hI=(n,e)=>n===e;function fI(n=hs){const e=n===hs?AS:oy(n),t=(a,s={})=>{const{equalityFn:l=hI}=typeof s=="function"?{equalityFn:s}:s,c=e(),{store:d,subscription:p,getServerState:g}=c;U.useRef(!0);const v=U.useCallback({[a.name](S){return a(S)}}[a.name],[a]),E=QC.useSyncExternalStoreWithSelector(p.addNestedSub,d.getState,g||d.getState,v,l);return U.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var dI=fI();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var RS=n=>{throw TypeError(n)},mI=(n,e,t)=>e.has(n)||RS("Cannot "+t),Zp=(n,e,t)=>(mI(n,e,"read from private field"),t?t.call(n):e.get(n)),pI=(n,e,t)=>e.has(n)?RS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ZT="popstate";function gI(n={}){function e(s,l){let{pathname:c="/",search:d="",hash:p=""}=pa(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Ju("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=s.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof l=="string"?l:Oi(l))}function a(s,l){tn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return vI(e,t,a,n)}function it(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function tn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yI(){return Math.random().toString(36).substring(2,10)}function e0(n,e){return{usr:n.state,key:n.key,idx:e}}function Ju(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?pa(e):e,state:t,key:e&&e.key||a||yI()}}function Oi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function pa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function vI(n,e,t,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,d="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let V=v(),Y=V==null?null:V-g;g=V,p&&p({action:d,location:B.location,delta:Y})}function S(V,Y){d="PUSH";let F=Ju(B.location,V,Y);t&&t(F,V),g=v()+1;let z=e0(F,g),K=B.createHref(F);try{c.pushState(z,"",K)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;s.location.assign(K)}l&&p&&p({action:d,location:B.location,delta:1})}function I(V,Y){d="REPLACE";let F=Ju(B.location,V,Y);t&&t(F,V),g=v();let z=e0(F,g),K=B.createHref(F);c.replaceState(z,"",K),l&&p&&p({action:d,location:B.location,delta:0})}function P(V){return CS(V)}let B={get action(){return d},get location(){return n(s,c)},listen(V){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(ZT,E),p=V,()=>{s.removeEventListener(ZT,E),p=null}},createHref(V){return e(s,V)},createURL:P,encodeLocation(V){let Y=P(V);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:S,replace:I,go(V){return c.go(V)}};return B}function CS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),it(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:Oi(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}var Pu,t0=class{constructor(n){if(pI(this,Pu,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Zp(this,Pu).has(n))return Zp(this,Pu).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Zp(this,Pu).set(n,e)}};Pu=new WeakMap;var _I=new Set(["lazy","caseSensitive","path","id","index","children"]);function EI(n){return _I.has(n)}var TI=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function bI(n){return TI.has(n)}function SI(n){return n.index===!0}function Zu(n,e,t=[],a={},s=!1){return n.map((l,c)=>{let d=[...t,String(c)],p=typeof l.id=="string"?l.id:d.join("-");if(it(l.index!==!0||!l.children,"Cannot specify children on an index route"),it(s||!a[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),SI(l)){let g={...l,id:p};return a[p]=n0(g,e(g)),g}else{let g={...l,id:p,children:void 0};return a[p]=n0(g,e(g)),l.children&&(g.children=Zu(l.children,e,d,a,s)),g}})}function n0(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function Ja(n,e,t="/"){return ku(n,e,t,!1)}function ku(n,e,t,a){let s=typeof e=="string"?pa(e):e,l=qr(s.pathname||"/",t);if(l==null)return null;let c=IS(n);wI(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=kI(l);d=VI(c[p],g,a)}return d}function AI(n,e){let{route:t,pathname:a,params:s}=n;return{id:t.id,pathname:a,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function IS(n,e=[],t=[],a="",s=!1){let l=(c,d,p=s,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(a)&&p)return;it(v.relativePath.startsWith(a),`Absolute route path "${v.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(a.length)}let E=Ci([a,v.relativePath]),S=t.concat(v);c.children&&c.children.length>0&&(it(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),IS(c.children,e,S,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:OI(E,c.index),routesMeta:S})};return n.forEach((c,d)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,d);else for(let g of DS(c.path))l(c,d,!0,g)}),e}function DS(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=DS(a.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),s&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function wI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:MI(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var RI=/^:[\w-]+$/,CI=3,II=2,DI=1,NI=10,xI=-2,r0=n=>n==="*";function OI(n,e){let t=n.split("/"),a=t.length;return t.some(r0)&&(a+=xI),e&&(a+=II),t.filter(s=>!r0(s)).reduce((s,l)=>s+(RI.test(l)?CI:l===""?DI:NI),a)}function MI(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function VI(n,e,t=!1){let{routesMeta:a}=n,s={},l="/",c=[];for(let d=0;d<a.length;++d){let p=a[d],g=d===a.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=Lf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),S=p.route;if(!E&&g&&t&&!a[a.length-1].route.index&&(E=Lf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:Ci([l,E.pathname]),pathnameBase:jI(Ci([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Ci([l,E.pathnameBase]))}return c}function Lf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=PI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((g,{paramName:v,isOptional:E},S)=>{if(v==="*"){let P=d[S]||"";c=l.slice(0,l.length-P.length).replace(/(.)\/+$/,"$1")}const I=d[S];return E&&!I?g[v]=void 0:g[v]=(I||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function PI(n,e=!1,t=!0){tn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(a.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function kI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function qr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function LI({basename:n,pathname:e}){return e==="/"?n:Ci([n,e])}var NS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ly=n=>NS.test(n);function UI(n,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof n=="string"?pa(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=i0(t.substring(1),"/"):l=i0(t,e)):l=e,{pathname:l,search:zI(a),hash:BI(s)}}function i0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function eg(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function md(n){let e=xS(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function pd(n,e,t,a=!1){let s;typeof n=="string"?s=pa(n):(s={...n},it(!s.pathname||!s.pathname.includes("?"),eg("?","pathname","search",s)),it(!s.pathname||!s.pathname.includes("#"),eg("#","pathname","hash",s)),it(!s.search||!s.search.includes("#"),eg("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!a&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;s.pathname=S.join("/")}d=E>=0?e[E]:"/"}let p=UI(s,d),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Ci=n=>n.join("/").replace(/\/\/+/g,"/"),jI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),zI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,fc=class{constructor(n,e,t,a=!1){this.status=n,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function ec(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function dc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var OS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function MS(n,e){let t=n;if(typeof t!="string"||!NS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,s=!1;if(OS)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=qr(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:s=!0}catch{tn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:t}}var rs=Symbol("Uninstrumented");function FI(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let d of c)l[d]&&t[d].push(l[d])}}));let a={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=sl(t.lazy,e.lazy,()=>{});s&&(a.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],d=t[`lazy.${l}`];if(typeof c=="function"&&d.length>0){let p=sl(d,c,()=>{});p&&(a.lazy=Object.assign(a.lazy||{},{[l]:p}))}})}return["loader","action"].forEach(s=>{let l=e[s];if(typeof l=="function"&&t[s].length>0){let c=l[rs]??l,d=sl(t[s],c,(...p)=>a0(p[0]));d&&(s==="loader"&&c.hydrate===!0&&(d.hydrate=!0),d[rs]=c,a[s]=d)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(a.middleware=e.middleware.map(s=>{let l=s[rs]??s,c=sl(t.middleware,l,(...d)=>a0(d[0]));return c?(c[rs]=l,c):s})),a}function HI(n,e){let t={navigate:[],fetch:[]};if(e.forEach(a=>a({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&t[c].push(s[c])}})),t.navigate.length>0){let a=n.navigate[rs]??n.navigate,s=sl(t.navigate,a,(...l)=>{let[c,d]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?Oi(c):".",...s0(n,d??{})}});s&&(s[rs]=a,n.navigate=s)}if(t.fetch.length>0){let a=n.fetch[rs]??n.fetch,s=sl(t.fetch,a,(...l)=>{let[c,,d,p]=l;return{href:d??".",fetcherKey:c,...s0(n,p??{})}});s&&(s[rs]=a,n.fetch=s)}return n}function sl(n,e,t){return n.length===0?null:async(...a)=>{let s=await VS(n,t(...a),()=>e(...a),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function VS(n,e,t,a){let s=n[a],l;if(s){let c,d=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=VS(n,e,t,a-1),l=await c,it(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(d,e)}catch(p){console.error("An instrumentation function threw an error:",p)}c||await d(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function a0(n){let{request:e,context:t,params:a,unstable_pattern:s}=n;return{request:qI(e),params:{...a},unstable_pattern:s,context:GI(t)}}function s0(n,e){return{currentUrl:Oi(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function qI(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function GI(n){if(KI(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var $I=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function KI(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===$I}var PS=["POST","PUT","PATCH","DELETE"],YI=new Set(PS),QI=["GET",...PS],XI=new Set(QI),kS=new Set([301,302,303,307,308]),WI=new Set([307,308]),tg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},JI={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ZI=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),LS="remix-router-transitions",US=Symbol("ResetLoaderData");function eD(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";it(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=n.hydrationRouteProperties||[],s=n.mapRouteProperties||ZI,l=s;if(n.unstable_instrumentations){let k=n.unstable_instrumentations;l=q=>({...s(q),...FI(k.map(Z=>Z.route).filter(Boolean),q)})}let c={},d=Zu(n.routes,l,void 0,c),p,g=n.basename||"/";g.startsWith("/")||(g=`/${g}`);let v=n.dataStrategy||aD,E={...n.future},S=null,I=new Set,P=null,B=null,V=null,Y=n.hydrationData!=null,F=Ja(d,n.history.location,g),z=!1,K=null,te;if(F==null&&!n.patchRoutesOnNavigation){let k=Br(404,{pathname:n.history.location.pathname}),{matches:q,route:Z}=Zh(d);te=!0,F=q,K={[Z.id]:k}}else if(F&&!n.hydrationData&&Li(F,d,n.history.location.pathname).active&&(F=null),F)if(F.some(k=>k.route.lazy))te=!1;else if(!F.some(k=>uy(k.route)))te=!0;else{let k=n.hydrationData?n.hydrationData.loaderData:null,q=n.hydrationData?n.hydrationData.errors:null;if(q){let Z=F.findIndex(he=>q[he.route.id]!==void 0);te=F.slice(0,Z+1).every(he=>!wg(he.route,k,q))}else te=F.every(Z=>!wg(Z.route,k,q))}else{te=!1,F=[];let k=Li(null,d,n.history.location.pathname);k.active&&k.matches&&(z=!0,F=k.matches)}let G,b={historyAction:n.history.action,location:n.history.location,matches:F,initialized:te,navigation:tg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||K,fetchers:new Map,blockers:new Map},A="POP",w=null,N=!1,x,M=!1,O=new Map,Pe=null,Be=!1,Q=!1,fe=new Set,me=new Map,Oe=0,Me=-1,j=new Map,ie=new Set,de=new Map,ve=new Map,be=new Set,Ve=new Map,We,yt=null;function At(){if(S=n.history.listen(({action:k,location:q,delta:Z})=>{if(We){We(),We=void 0;return}tn(Ve.size===0||Z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let he=ci({currentLocation:b.location,nextLocation:q,historyAction:k});if(he&&Z!=null){let pe=new Promise(Se=>{We=Se});n.history.go(Z*-1),Hn(he,{state:"blocked",location:q,proceed(){Hn(he,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),pe.then(()=>n.history.go(Z))},reset(){let Se=new Map(b.blockers);Se.set(he,xu),Mt({blockers:Se})}}),w==null||w.resolve(),w=null;return}return Ne(k,q)}),t){SD(e,O);let k=()=>AD(e,O);e.addEventListener("pagehide",k),Pe=()=>e.removeEventListener("pagehide",k)}return b.initialized||Ne("POP",b.location,{initialHydration:!0}),G}function Ir(){S&&S(),Pe&&Pe(),I.clear(),x&&x.abort(),b.fetchers.forEach((k,q)=>va(q)),b.blockers.forEach((k,q)=>Ss(q))}function Kr(k){return I.add(k),()=>I.delete(k)}function Mt(k,q={}){k.matches&&(k.matches=k.matches.map(pe=>{let Se=c[pe.route.id],Re=pe.route;return Re.element!==Se.element||Re.errorElement!==Se.errorElement||Re.hydrateFallbackElement!==Se.hydrateFallbackElement?{...pe,route:Se}:pe})),b={...b,...k};let Z=[],he=[];b.fetchers.forEach((pe,Se)=>{pe.state==="idle"&&(be.has(Se)?Z.push(Se):he.push(Se))}),be.forEach(pe=>{!b.fetchers.has(pe)&&!me.has(pe)&&Z.push(pe)}),[...I].forEach(pe=>pe(b,{deletedFetchers:Z,newErrors:k.errors??null,viewTransitionOpts:q.viewTransitionOpts,flushSync:q.flushSync===!0})),Z.forEach(pe=>va(pe)),he.forEach(pe=>b.fetchers.delete(pe))}function ue(k,q,{flushSync:Z}={}){var je,xe;let he=b.actionData!=null&&b.navigation.formMethod!=null&&Un(b.navigation.formMethod)&&b.navigation.state==="loading"&&((je=k.state)==null?void 0:je._isRedirect)!==!0,pe;q.actionData?Object.keys(q.actionData).length>0?pe=q.actionData:pe=null:he?pe=b.actionData:pe=null;let Se=q.loaderData?g0(b.loaderData,q.loaderData,q.matches||[],q.errors):b.loaderData,Re=b.blockers;Re.size>0&&(Re=new Map(Re),Re.forEach((qe,rt)=>Re.set(rt,xu)));let ge=Be?!1:po(k,q.matches||b.matches),_e=N===!0||b.navigation.formMethod!=null&&Un(b.navigation.formMethod)&&((xe=k.state)==null?void 0:xe._isRedirect)!==!0;p&&(d=p,p=void 0),Be||A==="POP"||(A==="PUSH"?n.history.push(k,k.state):A==="REPLACE"&&n.history.replace(k,k.state));let we;if(A==="POP"){let qe=O.get(b.location.pathname);qe&&qe.has(k.pathname)?we={currentLocation:b.location,nextLocation:k}:O.has(k.pathname)&&(we={currentLocation:k,nextLocation:b.location})}else if(M){let qe=O.get(b.location.pathname);qe?qe.add(k.pathname):(qe=new Set([k.pathname]),O.set(b.location.pathname,qe)),we={currentLocation:b.location,nextLocation:k}}Mt({...q,actionData:pe,loaderData:Se,historyAction:A,location:k,initialized:!0,navigation:tg,revalidation:"idle",restoreScrollPosition:ge,preventScrollReset:_e,blockers:Re},{viewTransitionOpts:we,flushSync:Z===!0}),A="POP",N=!1,M=!1,Be=!1,Q=!1,w==null||w.resolve(),w=null,yt==null||yt.resolve(),yt=null}async function Ee(k,q){if(w==null||w.resolve(),w=null,typeof k=="number"){w||(w=E0());let rt=w.promise;return n.history.go(k),rt}let Z=Ag(b.location,b.matches,g,k,q==null?void 0:q.fromRouteId,q==null?void 0:q.relative),{path:he,submission:pe,error:Se}=o0(!1,Z,q),Re=b.location,ge=Ju(b.location,he,q&&q.state);ge={...ge,...n.history.encodeLocation(ge)};let _e=q&&q.replace!=null?q.replace:void 0,we="PUSH";_e===!0?we="REPLACE":_e===!1||pe!=null&&Un(pe.formMethod)&&pe.formAction===b.location.pathname+b.location.search&&(we="REPLACE");let je=q&&"preventScrollReset"in q?q.preventScrollReset===!0:void 0,xe=(q&&q.flushSync)===!0,qe=ci({currentLocation:Re,nextLocation:ge,historyAction:we});if(qe){Hn(qe,{state:"blocked",location:ge,proceed(){Hn(qe,{state:"proceeding",proceed:void 0,reset:void 0,location:ge}),Ee(k,q)},reset(){let rt=new Map(b.blockers);rt.set(qe,xu),Mt({blockers:rt})}});return}await Ne(we,ge,{submission:pe,pendingError:Se,preventScrollReset:je,replace:q&&q.replace,enableViewTransition:q&&q.viewTransition,flushSync:xe,callSiteDefaultShouldRevalidate:q&&q.unstable_defaultShouldRevalidate})}function He(){yt||(yt=E0()),ki(),Mt({revalidation:"loading"});let k=yt.promise;return b.navigation.state==="submitting"?k:b.navigation.state==="idle"?(Ne(b.historyAction,b.location,{startUninterruptedRevalidation:!0}),k):(Ne(A||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation,enableViewTransition:M===!0}),k)}async function Ne(k,q,Z){x&&x.abort(),x=null,A=k,Be=(Z&&Z.startUninterruptedRevalidation)===!0,hr(b.location,b.matches),N=(Z&&Z.preventScrollReset)===!0,M=(Z&&Z.enableViewTransition)===!0;let he=p||d,pe=Z&&Z.overrideNavigation,Se=Z!=null&&Z.initialHydration&&b.matches&&b.matches.length>0&&!z?b.matches:Ja(he,q,g),Re=(Z&&Z.flushSync)===!0;if(Se&&b.initialized&&!Q&&dD(b.location,q)&&!(Z&&Z.submission&&Un(Z.submission.formMethod))){ue(q,{matches:Se},{flushSync:Re});return}let ge=Li(Se,he,q.pathname);if(ge.active&&ge.matches&&(Se=ge.matches),!Se){let{error:zt,notFoundMatches:kt,route:Je}=$t(q.pathname);ue(q,{matches:kt,loaderData:{},errors:{[Je.id]:zt}},{flushSync:Re});return}x=new AbortController;let _e=el(n.history,q,x.signal,Z&&Z.submission),we=n.getContext?await n.getContext():new t0,je;if(Z&&Z.pendingError)je=[Za(Se).route.id,{type:"error",error:Z.pendingError}];else if(Z&&Z.submission&&Un(Z.submission.formMethod)){let zt=await Ie(_e,q,Z.submission,Se,we,ge.active,Z&&Z.initialHydration===!0,{replace:Z.replace,flushSync:Re});if(zt.shortCircuited)return;if(zt.pendingActionResult){let[kt,Je]=zt.pendingActionResult;if(Tr(Je)&&ec(Je.error)&&Je.error.status===404){x=null,ue(q,{matches:zt.matches,loaderData:{},errors:{[kt]:Je.error}});return}}Se=zt.matches||Se,je=zt.pendingActionResult,pe=ng(q,Z.submission),Re=!1,ge.active=!1,_e=el(n.history,_e.url,_e.signal)}let{shortCircuited:xe,matches:qe,loaderData:rt,errors:Ct}=await tt(_e,q,Se,we,ge.active,pe,Z&&Z.submission,Z&&Z.fetcherSubmission,Z&&Z.replace,Z&&Z.initialHydration===!0,Re,je,Z&&Z.callSiteDefaultShouldRevalidate);xe||(x=null,ue(q,{matches:qe||Se,...y0(je),loaderData:rt,errors:Ct}))}async function Ie(k,q,Z,he,pe,Se,Re,ge={}){ki();let _e=TD(q,Z);if(Mt({navigation:_e},{flushSync:ge.flushSync===!0}),Se){let xe=await qn(he,q.pathname,k.signal);if(xe.type==="aborted")return{shortCircuited:!0};if(xe.type==="error"){if(xe.partialMatches.length===0){let{matches:rt,route:Ct}=Zh(d);return{matches:rt,pendingActionResult:[Ct.id,{type:"error",error:xe.error}]}}let qe=Za(xe.partialMatches).route.id;return{matches:xe.partialMatches,pendingActionResult:[qe,{type:"error",error:xe.error}]}}else if(xe.matches)he=xe.matches;else{let{notFoundMatches:qe,error:rt,route:Ct}=$t(q.pathname);return{matches:qe,pendingActionResult:[Ct.id,{type:"error",error:rt}]}}}let we,je=ff(he,q);if(!je.route.action&&!je.route.lazy)we={type:"error",error:Br(405,{method:k.method,pathname:q.pathname,routeId:je.route.id})};else{let xe=ll(l,c,k,he,je,Re?[]:a,pe),qe=await or(k,xe,pe,null);if(we=qe[je.route.id],!we){for(let rt of he)if(qe[rt.route.id]){we=qe[rt.route.id];break}}if(k.signal.aborted)return{shortCircuited:!0}}if(Qs(we)){let xe;return ge&&ge.replace!=null?xe=ge.replace:xe=d0(we.response.headers.get("Location"),new URL(k.url),g,n.history)===b.location.pathname+b.location.search,await Qt(k,we,!0,{submission:Z,replace:xe}),{shortCircuited:!0}}if(Tr(we)){let xe=Za(he,je.route.id);return(ge&&ge.replace)!==!0&&(A="PUSH"),{matches:he,pendingActionResult:[xe.route.id,we,je.route.id]}}return{matches:he,pendingActionResult:[je.route.id,we]}}async function tt(k,q,Z,he,pe,Se,Re,ge,_e,we,je,xe,qe){let rt=Se||ng(q,Re),Ct=Re||ge||_0(rt),zt=!Be&&!we;if(pe){if(zt){let Xt=nt(xe);Mt({navigation:rt,...Xt!==void 0?{actionData:Xt}:{}},{flushSync:je})}let st=await qn(Z,q.pathname,k.signal);if(st.type==="aborted")return{shortCircuited:!0};if(st.type==="error"){if(st.partialMatches.length===0){let{matches:ln,route:It}=Zh(d);return{matches:ln,loaderData:{},errors:{[It.id]:st.error}}}let Xt=Za(st.partialMatches).route.id;return{matches:st.partialMatches,loaderData:{},errors:{[Xt]:st.error}}}else if(st.matches)Z=st.matches;else{let{error:Xt,notFoundMatches:ln,route:It}=$t(q.pathname);return{matches:ln,loaderData:{},errors:{[It.id]:Xt}}}}let kt=p||d,{dsMatches:Je,revalidatingFetchers:Lt}=l0(k,he,l,c,n.history,b,Z,Ct,q,we?[]:a,we===!0,Q,fe,be,de,ie,kt,g,n.patchRoutesOnNavigation!=null,xe,qe);if(Me=++Oe,!n.dataStrategy&&!Je.some(st=>st.shouldLoad)&&!Je.some(st=>st.route.middleware&&st.route.middleware.length>0)&&Lt.length===0){let st=Gt();return ue(q,{matches:Z,loaderData:{},errors:xe&&Tr(xe[1])?{[xe[0]]:xe[1].error}:null,...y0(xe),...st?{fetchers:new Map(b.fetchers)}:{}},{flushSync:je}),{shortCircuited:!0}}if(zt){let st={};if(!pe){st.navigation=rt;let Xt=nt(xe);Xt!==void 0&&(st.actionData=Xt)}Lt.length>0&&(st.fetchers=Ge(Lt)),Mt(st,{flushSync:je})}Lt.forEach(st=>{Vt(st.key),st.controller&&me.set(st.key,st.controller)});let Tn=()=>Lt.forEach(st=>Vt(st.key));x&&x.signal.addEventListener("abort",Tn);let{loaderResults:Ut,fetcherResults:Xn}=await ya(Je,Lt,k,he);if(k.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",Tn),Lt.forEach(st=>me.delete(st.key));let Vn=ef(Ut);if(Vn)return await Qt(k,Vn.result,!0,{replace:_e}),{shortCircuited:!0};if(Vn=ef(Xn),Vn)return ie.add(Vn.key),await Qt(k,Vn.result,!0,{replace:_e}),{shortCircuited:!0};let{loaderData:Wn,errors:Pn}=p0(b,Z,Ut,xe,Lt,Xn);we&&b.errors&&(Pn={...b.errors,...Pn});let fr=Gt(),fi=bs(Me),di=fr||fi||Lt.length>0;return{matches:Z,loaderData:Wn,errors:Pn,...di?{fetchers:new Map(b.fetchers)}:{}}}function nt(k){if(k&&!Tr(k[1]))return{[k[0]]:k[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function Ge(k){return k.forEach(q=>{let Z=b.fetchers.get(q.key),he=Ou(void 0,Z?Z.data:void 0);b.fetchers.set(q.key,he)}),new Map(b.fetchers)}async function at(k,q,Z,he){Vt(k);let pe=(he&&he.flushSync)===!0,Se=p||d,Re=Ag(b.location,b.matches,g,Z,q,he==null?void 0:he.relative),ge=Ja(Se,Re,g),_e=Li(ge,Se,Re);if(_e.active&&_e.matches&&(ge=_e.matches),!ge){lr(k,q,Br(404,{pathname:Re}),{flushSync:pe});return}let{path:we,submission:je,error:xe}=o0(!0,Re,he);if(xe){lr(k,q,xe,{flushSync:pe});return}let qe=n.getContext?await n.getContext():new t0,rt=(he&&he.preventScrollReset)===!0;if(je&&Un(je.formMethod)){await qt(k,q,we,ge,qe,_e.active,pe,rt,je,he&&he.unstable_defaultShouldRevalidate);return}de.set(k,{routeId:q,path:we}),await Mn(k,q,we,ge,qe,_e.active,pe,rt,je)}async function qt(k,q,Z,he,pe,Se,Re,ge,_e,we){ki(),de.delete(k);let je=b.fetchers.get(k);En(k,bD(_e,je),{flushSync:Re});let xe=new AbortController,qe=el(n.history,Z,xe.signal,_e);if(Se){let Ze=await qn(he,new URL(qe.url).pathname,qe.signal,k);if(Ze.type==="aborted")return;if(Ze.type==="error"){lr(k,q,Ze.error,{flushSync:Re});return}else if(Ze.matches)he=Ze.matches;else{lr(k,q,Br(404,{pathname:Z}),{flushSync:Re});return}}let rt=ff(he,Z);if(!rt.route.action&&!rt.route.lazy){let Ze=Br(405,{method:_e.formMethod,pathname:Z,routeId:q});lr(k,q,Ze,{flushSync:Re});return}me.set(k,xe);let Ct=Oe,zt=ll(l,c,qe,he,rt,a,pe),kt=await or(qe,zt,pe,k),Je=kt[rt.route.id];if(!Je){for(let Ze of zt)if(kt[Ze.route.id]){Je=kt[Ze.route.id];break}}if(qe.signal.aborted){me.get(k)===xe&&me.delete(k);return}if(be.has(k)){if(Qs(Je)||Tr(Je)){En(k,ra(void 0));return}}else{if(Qs(Je))if(me.delete(k),Me>Ct){En(k,ra(void 0));return}else return ie.add(k),En(k,Ou(_e)),Qt(qe,Je,!1,{fetcherSubmission:_e,preventScrollReset:ge});if(Tr(Je)){lr(k,q,Je.error);return}}let Lt=b.navigation.location||b.location,Tn=el(n.history,Lt,xe.signal),Ut=p||d,Xn=b.navigation.state!=="idle"?Ja(Ut,b.navigation.location,g):b.matches;it(Xn,"Didn't find any matches after fetcher action");let Vn=++Oe;j.set(k,Vn);let Wn=Ou(_e,Je.data);b.fetchers.set(k,Wn);let{dsMatches:Pn,revalidatingFetchers:fr}=l0(Tn,pe,l,c,n.history,b,Xn,_e,Lt,a,!1,Q,fe,be,de,ie,Ut,g,n.patchRoutesOnNavigation!=null,[rt.route.id,Je],we);fr.filter(Ze=>Ze.key!==k).forEach(Ze=>{let dr=Ze.key,Ea=b.fetchers.get(dr),Et=Ou(void 0,Ea?Ea.data:void 0);b.fetchers.set(dr,Et),Vt(dr),Ze.controller&&me.set(dr,Ze.controller)}),Mt({fetchers:new Map(b.fetchers)});let fi=()=>fr.forEach(Ze=>Vt(Ze.key));xe.signal.addEventListener("abort",fi);let{loaderResults:di,fetcherResults:st}=await ya(Pn,fr,Tn,pe);if(xe.signal.aborted)return;if(xe.signal.removeEventListener("abort",fi),j.delete(k),me.delete(k),fr.forEach(Ze=>me.delete(Ze.key)),b.fetchers.has(k)){let Ze=ra(Je.data);b.fetchers.set(k,Ze)}let Xt=ef(di);if(Xt)return Qt(Tn,Xt.result,!1,{preventScrollReset:ge});if(Xt=ef(st),Xt)return ie.add(Xt.key),Qt(Tn,Xt.result,!1,{preventScrollReset:ge});let{loaderData:ln,errors:It}=p0(b,Xn,di,void 0,fr,st);bs(Vn),b.navigation.state==="loading"&&Vn>Me?(it(A,"Expected pending action"),x&&x.abort(),ue(b.navigation.location,{matches:Xn,loaderData:ln,errors:It,fetchers:new Map(b.fetchers)})):(Mt({errors:It,loaderData:g0(b.loaderData,ln,Xn,It),fetchers:new Map(b.fetchers)}),Q=!1)}async function Mn(k,q,Z,he,pe,Se,Re,ge,_e){let we=b.fetchers.get(k);En(k,Ou(_e,we?we.data:void 0),{flushSync:Re});let je=new AbortController,xe=el(n.history,Z,je.signal);if(Se){let Je=await qn(he,new URL(xe.url).pathname,xe.signal,k);if(Je.type==="aborted")return;if(Je.type==="error"){lr(k,q,Je.error,{flushSync:Re});return}else if(Je.matches)he=Je.matches;else{lr(k,q,Br(404,{pathname:Z}),{flushSync:Re});return}}let qe=ff(he,Z);me.set(k,je);let rt=Oe,Ct=ll(l,c,xe,he,qe,a,pe),kt=(await or(xe,Ct,pe,k))[qe.route.id];if(me.get(k)===je&&me.delete(k),!xe.signal.aborted){if(be.has(k)){En(k,ra(void 0));return}if(Qs(kt))if(Me>rt){En(k,ra(void 0));return}else{ie.add(k),await Qt(xe,kt,!1,{preventScrollReset:ge});return}if(Tr(kt)){lr(k,q,kt.error);return}En(k,ra(kt.data))}}async function Qt(k,q,Z,{submission:he,fetcherSubmission:pe,preventScrollReset:Se,replace:Re}={}){Z||(w==null||w.resolve(),w=null),q.response.headers.has("X-Remix-Revalidate")&&(Q=!0);let ge=q.response.headers.get("Location");it(ge,"Expected a Location header on the redirect Response"),ge=d0(ge,new URL(k.url),g,n.history);let _e=Ju(b.location,ge,{_isRedirect:!0});if(t){let Ct=!1;if(q.response.headers.has("X-Remix-Reload-Document"))Ct=!0;else if(ly(ge)){const zt=CS(ge,!0);Ct=zt.origin!==e.location.origin||qr(zt.pathname,g)==null}if(Ct){Re?e.location.replace(ge):e.location.assign(ge);return}}x=null;let we=Re===!0||q.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:je,formAction:xe,formEncType:qe}=b.navigation;!he&&!pe&&je&&xe&&qe&&(he=_0(b.navigation));let rt=he||pe;if(WI.has(q.response.status)&&rt&&Un(rt.formMethod))await Ne(we,_e,{submission:{...rt,formAction:ge},preventScrollReset:Se||N,enableViewTransition:Z?M:void 0});else{let Ct=ng(_e,he);await Ne(we,_e,{overrideNavigation:Ct,fetcherSubmission:pe,preventScrollReset:Se||N,enableViewTransition:Z?M:void 0})}}async function or(k,q,Z,he){var Re;let pe,Se={};try{pe=await oD(v,k,q,he,Z,!1)}catch(ge){return q.filter(_e=>_e.shouldLoad).forEach(_e=>{Se[_e.route.id]={type:"error",error:ge}}),Se}if(k.signal.aborted)return Se;if(!Un(k.method))for(let ge of q){if(((Re=pe[ge.route.id])==null?void 0:Re.type)==="error")break;!pe.hasOwnProperty(ge.route.id)&&!b.loaderData.hasOwnProperty(ge.route.id)&&(!b.errors||!b.errors.hasOwnProperty(ge.route.id))&&ge.shouldCallHandler()&&(pe[ge.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${ge.route.id}`)})}for(let[ge,_e]of Object.entries(pe))if(yD(_e)){let we=_e.result;Se[ge]={type:"redirect",response:hD(we,k,ge,q,g)}}else Se[ge]=await cD(_e);return Se}async function ya(k,q,Z,he){let pe=or(Z,k,he,null),Se=Promise.all(q.map(async _e=>{if(_e.matches&&_e.match&&_e.request&&_e.controller){let je=(await or(_e.request,_e.matches,he,_e.key))[_e.match.route.id];return{[_e.key]:je}}else return Promise.resolve({[_e.key]:{type:"error",error:Br(404,{pathname:_e.path})}})})),Re=await pe,ge=(await Se).reduce((_e,we)=>Object.assign(_e,we),{});return{loaderResults:Re,fetcherResults:ge}}function ki(){Q=!0,de.forEach((k,q)=>{me.has(q)&&fe.add(q),Vt(q)})}function En(k,q,Z={}){b.fetchers.set(k,q),Mt({fetchers:new Map(b.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function lr(k,q,Z,he={}){let pe=Za(b.matches,q);va(k),Mt({errors:{[pe.route.id]:Z},fetchers:new Map(b.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function Ts(k){return ve.set(k,(ve.get(k)||0)+1),be.has(k)&&be.delete(k),b.fetchers.get(k)||JI}function mo(k,q){Vt(k,q==null?void 0:q.reason),En(k,ra(null))}function va(k){let q=b.fetchers.get(k);me.has(k)&&!(q&&q.state==="loading"&&j.has(k))&&Vt(k),de.delete(k),j.delete(k),ie.delete(k),be.delete(k),fe.delete(k),b.fetchers.delete(k)}function ur(k){let q=(ve.get(k)||0)-1;q<=0?(ve.delete(k),be.add(k)):ve.set(k,q),Mt({fetchers:new Map(b.fetchers)})}function Vt(k,q){let Z=me.get(k);Z&&(Z.abort(q),me.delete(k))}function Fn(k){for(let q of k){let Z=Ts(q),he=ra(Z.data);b.fetchers.set(q,he)}}function Gt(){let k=[],q=!1;for(let Z of ie){let he=b.fetchers.get(Z);it(he,`Expected fetcher: ${Z}`),he.state==="loading"&&(ie.delete(Z),k.push(Z),q=!0)}return Fn(k),q}function bs(k){let q=[];for(let[Z,he]of j)if(he<k){let pe=b.fetchers.get(Z);it(pe,`Expected fetcher: ${Z}`),pe.state==="loading"&&(Vt(Z),j.delete(Z),q.push(Z))}return Fn(q),q.length>0}function _a(k,q){let Z=b.blockers.get(k)||xu;return Ve.get(k)!==q&&Ve.set(k,q),Z}function Ss(k){b.blockers.delete(k),Ve.delete(k)}function Hn(k,q){let Z=b.blockers.get(k)||xu;it(Z.state==="unblocked"&&q.state==="blocked"||Z.state==="blocked"&&q.state==="blocked"||Z.state==="blocked"&&q.state==="proceeding"||Z.state==="blocked"&&q.state==="unblocked"||Z.state==="proceeding"&&q.state==="unblocked",`Invalid blocker state transition: ${Z.state} -> ${q.state}`);let he=new Map(b.blockers);he.set(k,q),Mt({blockers:he})}function ci({currentLocation:k,nextLocation:q,historyAction:Z}){if(Ve.size===0)return;Ve.size>1&&tn(!1,"A router only supports one blocker at a time");let he=Array.from(Ve.entries()),[pe,Se]=he[he.length-1],Re=b.blockers.get(pe);if(!(Re&&Re.state==="proceeding")&&Se({currentLocation:k,nextLocation:q,historyAction:Z}))return pe}function $t(k){let q=Br(404,{pathname:k}),Z=p||d,{matches:he,route:pe}=Zh(Z);return{notFoundMatches:he,route:pe,error:q}}function Dr(k,q,Z){if(P=k,V=q,B=Z||null,!Y&&b.navigation===tg){Y=!0;let he=po(b.location,b.matches);he!=null&&Mt({restoreScrollPosition:he})}return()=>{P=null,V=null,B=null}}function cr(k,q){return B&&B(k,q.map(he=>AI(he,b.loaderData)))||k.key}function hr(k,q){if(P&&V){let Z=cr(k,q);P[Z]=V()}}function po(k,q){if(P){let Z=cr(k,q),he=P[Z];if(typeof he=="number")return he}return null}function Li(k,q,Z){if(n.patchRoutesOnNavigation)if(k){if(Object.keys(k[0].params).length>0)return{active:!0,matches:ku(q,Z,g,!0)}}else return{active:!0,matches:ku(q,Z,g,!0)||[]};return{active:!1,matches:null}}async function qn(k,q,Z,he){if(!n.patchRoutesOnNavigation)return{type:"success",matches:k};let pe=k;for(;;){let Se=p==null,Re=p||d,ge=c;try{await n.patchRoutesOnNavigation({signal:Z,path:q,matches:pe,fetcherKey:he,patch:(je,xe)=>{Z.aborted||u0(je,xe,Re,ge,l,!1)}})}catch(je){return{type:"error",error:je,partialMatches:pe}}finally{Se&&!Z.aborted&&(d=[...d])}if(Z.aborted)return{type:"aborted"};let _e=Ja(Re,q,g),we=null;if(_e){if(Object.keys(_e[0].params).length===0)return{type:"success",matches:_e};if(we=ku(Re,q,g,!0),!(we&&pe.length<we.length&&hi(pe,we.slice(0,pe.length))))return{type:"success",matches:_e}}if(we||(we=ku(Re,q,g,!0)),!we||hi(pe,we))return{type:"success",matches:null};pe=we}}function hi(k,q){return k.length===q.length&&k.every((Z,he)=>Z.route.id===q[he].route.id)}function Ll(k){c={},p=Zu(k,l,void 0,c)}function Ui(k,q,Z=!1){let he=p==null;u0(k,q,p||d,c,l,Z),he&&(d=[...d],Mt({}))}return G={get basename(){return g},get future(){return E},get state(){return b},get routes(){return d},get window(){return e},initialize:At,subscribe:Kr,enableScrollRestoration:Dr,navigate:Ee,fetch:at,revalidate:He,createHref:k=>n.history.createHref(k),encodeLocation:k=>n.history.encodeLocation(k),getFetcher:Ts,resetFetcher:mo,deleteFetcher:ur,dispose:Ir,getBlocker:_a,deleteBlocker:Ss,patchRoutes:Ui,_internalFetchControllers:me,_internalSetRoutes:Ll,_internalSetStateDoNotUseOrYouWillBreakYourApp(k){Mt(k)}},n.unstable_instrumentations&&(G=HI(G,n.unstable_instrumentations.map(k=>k.router).filter(Boolean))),G}function tD(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Ag(n,e,t,a,s,l){let c,d;if(s){c=[];for(let g of e)if(c.push(g),g.route.id===s){d=g;break}}else c=e,d=e[e.length-1];let p=pd(a||".",md(c),qr(n.pathname,t)||n.pathname,l==="path");if(a==null&&(p.search=n.search,p.hash=n.hash),(a==null||a===""||a===".")&&d){let g=hy(p.search);if(d.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let v=new URLSearchParams(p.search),E=v.getAll("index");v.delete("index"),E.filter(I=>I).forEach(I=>v.append("index",I));let S=v.toString();p.search=S?`?${S}`:""}}return t!=="/"&&(p.pathname=LI({basename:t,pathname:p.pathname})),Oi(p)}function o0(n,e,t){if(!t||!tD(t))return{path:e};if(t.formMethod&&!ED(t.formMethod))return{path:e,error:Br(405,{method:t.formMethod})};let a=()=>({path:e,error:Br(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=qS(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Un(l))return a();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((S,[I,P])=>`${S}${I}=${P}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!Un(l))return a();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return a()}}}it(typeof FormData=="function","FormData is not available in this environment");let d,p;if(t.formData)d=Cg(t.formData),p=t.formData;else if(t.body instanceof FormData)d=Cg(t.body),p=t.body;else if(t.body instanceof URLSearchParams)d=t.body,p=m0(d);else if(t.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(t.body),p=m0(d)}catch{return a()}let g={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Un(g.formMethod))return{path:e,submission:g};let v=pa(e);return n&&v.search&&hy(v.search)&&d.append("index",""),v.search=`?${d}`,{path:Oi(v),submission:g}}function l0(n,e,t,a,s,l,c,d,p,g,v,E,S,I,P,B,V,Y,F,z,K){var Be;let te=z?Tr(z[1])?z[1].error:z[1].data:void 0,G=s.createURL(l.location),b=s.createURL(p),A;if(v&&l.errors){let Q=Object.keys(l.errors)[0];A=c.findIndex(fe=>fe.route.id===Q)}else if(z&&Tr(z[1])){let Q=z[0];A=c.findIndex(fe=>fe.route.id===Q)-1}let w=z?z[1].statusCode:void 0,N=w&&w>=400,x={currentUrl:G,currentParams:((Be=l.matches[0])==null?void 0:Be.params)||{},nextUrl:b,nextParams:c[0].params,...d,actionResult:te,actionStatus:w},M=dc(c),O=c.map((Q,fe)=>{let{route:me}=Q,Oe=null;if(A!=null&&fe>A?Oe=!1:me.lazy?Oe=!0:uy(me)?v?Oe=wg(me,l.loaderData,l.errors):nD(l.loaderData,l.matches[fe],Q)&&(Oe=!0):Oe=!1,Oe!==null)return Rg(t,a,n,M,Q,g,e,Oe);let Me=!1;typeof K=="boolean"?Me=K:N?Me=!1:(E||G.pathname+G.search===b.pathname+b.search||G.search!==b.search||rD(l.matches[fe],Q))&&(Me=!0);let j={...x,defaultShouldRevalidate:Me},ie=Hu(Q,j);return Rg(t,a,n,M,Q,g,e,ie,j,K)}),Pe=[];return P.forEach((Q,fe)=>{if(v||!c.some(be=>be.route.id===Q.routeId)||I.has(fe))return;let me=l.fetchers.get(fe),Oe=me&&me.state!=="idle"&&me.data===void 0,Me=Ja(V,Q.path,Y);if(!Me){if(F&&Oe)return;Pe.push({key:fe,routeId:Q.routeId,path:Q.path,matches:null,match:null,request:null,controller:null});return}if(B.has(fe))return;let j=ff(Me,Q.path),ie=new AbortController,de=el(s,Q.path,ie.signal),ve=null;if(S.has(fe))S.delete(fe),ve=ll(t,a,de,Me,j,g,e);else if(Oe)E&&(ve=ll(t,a,de,Me,j,g,e));else{let be;typeof K=="boolean"?be=K:N?be=!1:be=E;let Ve={...x,defaultShouldRevalidate:be};Hu(j,Ve)&&(ve=ll(t,a,de,Me,j,g,e,Ve))}ve&&Pe.push({key:fe,routeId:Q.routeId,path:Q.path,matches:ve,match:j,request:de,controller:ie})}),{dsMatches:O,revalidatingFetchers:Pe}}function uy(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function wg(n,e,t){if(n.lazy)return!0;if(!uy(n))return!1;let a=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!a&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!a&&!s}function nD(n,e,t){let a=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return a||s}function rD(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Hu(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function u0(n,e,t,a,s,l){let c;if(n){let g=a[n];it(g,`No route found to patch children into: routeId = ${n}`),g.children||(g.children=[]),c=g.children}else c=t;let d=[],p=[];if(e.forEach(g=>{let v=c.find(E=>jS(g,E));v?p.push({existingRoute:v,newRoute:g}):d.push(g)}),d.length>0){let g=Zu(d,s,[n||"_","patch",String((c==null?void 0:c.length)||"0")],a);c.push(...g)}if(l&&p.length>0)for(let g=0;g<p.length;g++){let{existingRoute:v,newRoute:E}=p[g],S=v,[I]=Zu([E],s,[],{},!0);Object.assign(S,{element:I.element?I.element:S.element,errorElement:I.errorElement?I.errorElement:S.errorElement,hydrateFallbackElement:I.hydrateFallbackElement?I.hydrateFallbackElement:S.hydrateFallbackElement})}}function jS(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,a)=>{var s;return(s=e.children)==null?void 0:s.some(l=>jS(t,l))}):!1}var c0=new WeakMap,zS=({key:n,route:e,manifest:t,mapRouteProperties:a})=>{let s=t[e.id];if(it(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=c0.get(s);c||(c={},c0.set(s,c));let d=c[n];if(d)return d;let p=(async()=>{let g=EI(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(g)tn(!g,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(E)tn(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let S=await l();S!=null&&(Object.assign(s,{[n]:S}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(S=>S===void 0)&&(s.lazy=void 0))})();return c[n]=p,p},h0=new WeakMap;function iD(n,e,t,a,s){let l=t[n.id];if(it(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let v=h0.get(l);if(v)return{lazyRoutePromise:v,lazyHandlerPromise:v};let E=(async()=>{it(typeof n.lazy=="function","No lazy route function found");let S=await n.lazy(),I={};for(let P in S){let B=S[P];if(B===void 0)continue;let V=bI(P),F=l[P]!==void 0&&P!=="hasErrorBoundary";V?tn(!V,"Route property "+P+" is not a supported property to be returned from a lazy route function. This property will be ignored."):F?tn(!F,`Route "${l.id}" has a static property "${P}" defined but its lazy function is also returning a value for this property. The lazy route property "${P}" will be ignored.`):I[P]=B}Object.assign(l,I),Object.assign(l,{...a(l),lazy:void 0})})();return h0.set(l,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(n.lazy),d=[],p;for(let v of c){if(s&&s.includes(v))continue;let E=zS({key:v,route:n,manifest:t,mapRouteProperties:a});E&&(d.push(E),v===e&&(p=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),p==null||p.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:p}}async function f0(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function aD(n){return n.matches.some(e=>e.route.middleware)?BS(n,()=>f0(n)):f0(n)}function BS(n,e){return sD(n,e,a=>{if(_D(a))throw a;return a},pD,t);function t(a,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:a}}));{let{matches:c}=n,d=Math.min(Math.max(c.findIndex(g=>g.route.id===s),0),Math.max(c.findIndex(g=>g.shouldCallHandler()),0)),p=Za(c,c[d].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:a}})}}}async function sD(n,e,t,a,s){let{matches:l,request:c,params:d,context:p,unstable_pattern:g}=n,v=l.flatMap(S=>S.route.middleware?S.route.middleware.map(I=>[S.route.id,I]):[]);return await FS({request:c,params:d,context:p,unstable_pattern:g},v,e,t,a,s)}async function FS(n,e,t,a,s,l,c=0){let{request:d}=n;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let p=e[c];if(!p)return await t();let[g,v]=p,E,S=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await FS(n,e,t,a,s,l,c+1)},E.value}catch(I){return E={value:await l(I,g,E)},E.value}};try{let I=await v(n,S),P=I!=null?a(I):void 0;return s(P)?P:E?P??E.value:(E={value:await S()},E.value)}catch(I){return await l(I,g,E)}}function HS(n,e,t,a,s){let l=zS({key:"middleware",route:a.route,manifest:e,mapRouteProperties:n}),c=iD(a.route,Un(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Rg(n,e,t,a,s,l,c,d,p=null,g){let v=!1,E=HS(n,e,t,s,l);return{...s,_lazyPromises:E,shouldLoad:d,shouldRevalidateArgs:p,shouldCallHandler(S){return v=!0,p?typeof g=="boolean"?Hu(s,{...p,defaultShouldRevalidate:g}):typeof S=="boolean"?Hu(s,{...p,defaultShouldRevalidate:S}):Hu(s,p):d},resolve(S){let{lazy:I,loader:P,middleware:B}=s.route,V=v||d||S&&!Un(t.method)&&(I||P),Y=B&&B.length>0&&!P&&!I;return V&&(Un(t.method)||!Y)?lD({request:t,unstable_pattern:a,match:s,lazyHandlerPromise:E==null?void 0:E.handler,lazyRoutePromise:E==null?void 0:E.route,handlerOverride:S,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function ll(n,e,t,a,s,l,c,d=null){return a.map(p=>p.route.id!==s.route.id?{...p,shouldLoad:!1,shouldRevalidateArgs:d,shouldCallHandler:()=>!1,_lazyPromises:HS(n,e,t,p,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Rg(n,e,t,dc(a),p,l,c,!0,d))}async function oD(n,e,t,a,s,l){t.some(g=>{var v;return(v=g._lazyPromises)==null?void 0:v.middleware})&&await Promise.all(t.map(g=>{var v;return(v=g._lazyPromises)==null?void 0:v.middleware}));let c={request:e,unstable_pattern:dc(t),params:t[0].params,context:s,matches:t},p=await n({...c,fetcherKey:a,runClientMiddleware:g=>{let v=c;return BS(v,()=>g({...v,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(g=>{var v,E;return[(v=g._lazyPromises)==null?void 0:v.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return p}async function lD({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let d,p,g=Un(n.method),v=g?"action":"loader",E=S=>{let I,P=new Promise((Y,F)=>I=F);p=()=>I(),n.signal.addEventListener("abort",p);let B=Y=>typeof S!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${v}" [routeId: ${t.route.id}]`)):S({request:n,unstable_pattern:e,params:t.params,context:c},...Y!==void 0?[Y]:[]),V=(async()=>{try{return{type:"data",result:await(l?l(F=>B(F)):B())}}catch(Y){return{type:"error",result:Y}}})();return Promise.race([V,P])};try{let S=g?t.route.action:t.route.loader;if(a||s)if(S){let I,[P]=await Promise.all([E(S).catch(B=>{I=B}),a,s]);if(I!==void 0)throw I;d=P}else{await a;let I=g?t.route.action:t.route.loader;if(I)[d]=await Promise.all([E(I),s]);else if(v==="action"){let P=new URL(n.url),B=P.pathname+P.search;throw Br(405,{method:n.method,pathname:B,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(S)d=await E(S);else{let I=new URL(n.url),P=I.pathname+I.search;throw Br(404,{pathname:P})}}catch(S){return{type:"error",result:S}}finally{p&&n.signal.removeEventListener("abort",p)}return d}async function uD(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function cD(n){var a,s,l,c,d;let{result:e,type:t}=n;if(cy(e)){let p;try{p=await uD(e)}catch(g){return{type:"error",error:g}}return t==="error"?{type:"error",error:new fc(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?v0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:mD(e),statusCode:ec(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:ec(e)?e.status:void 0}:v0(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function hD(n,e,t,a,s){let l=n.headers.get("Location");if(it(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!ly(l)){let c=a.slice(0,a.findIndex(d=>d.route.id===t)+1);l=Ag(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function d0(n,e,t,a){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(ly(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let d=qr(c.pathname,t)!=null;if(c.origin===e.origin&&d)return c.pathname+c.search+c.hash}try{let l=a.createURL(n);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function el(n,e,t,a){let s=n.createURL(qS(e)).toString(),l={signal:t};if(a&&Un(a.formMethod)){let{formMethod:c,formEncType:d}=a;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(a.json)):d==="text/plain"?l.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?l.body=Cg(a.formData):l.body=a.formData}return new Request(s,l)}function Cg(n){let e=new URLSearchParams;for(let[t,a]of n.entries())e.append(t,typeof a=="string"?a:a.name);return e}function m0(n){let e=new FormData;for(let[t,a]of n.entries())e.append(t,a);return e}function fD(n,e,t,a=!1,s=!1){let l={},c=null,d,p=!1,g={},v=t&&Tr(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let S=E.route.id,I=e[S];if(it(!Qs(I),"Cannot handle redirect results in processLoaderData"),Tr(I)){let P=I.error;if(v!==void 0&&(P=v,v=void 0),c=c||{},s)c[S]=P;else{let B=Za(n,S);c[B.route.id]==null&&(c[B.route.id]=P)}a||(l[S]=US),p||(p=!0,d=ec(I.error)?I.error.status:500),I.headers&&(g[S]=I.headers)}else l[S]=I.data,I.statusCode&&I.statusCode!==200&&!p&&(d=I.statusCode),I.headers&&(g[S]=I.headers)}),v!==void 0&&t&&(c={[t[0]]:v},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:g}}function p0(n,e,t,a,s,l){let{loaderData:c,errors:d}=fD(e,t,a);return s.filter(p=>!p.matches||p.matches.some(g=>g.shouldLoad)).forEach(p=>{let{key:g,match:v,controller:E}=p;if(E&&E.signal.aborted)return;let S=l[g];if(it(S,"Did not find corresponding fetcher result"),Tr(S)){let I=Za(n.matches,v==null?void 0:v.route.id);d&&d[I.route.id]||(d={...d,[I.route.id]:S.error}),n.fetchers.delete(g)}else if(Qs(S))it(!1,"Unhandled fetcher revalidation redirect");else{let I=ra(S.data);n.fetchers.set(g,I)}}),{loaderData:c,errors:d}}function g0(n,e,t,a){let s=Object.entries(e).filter(([,l])=>l!==US).reduce((l,[c,d])=>(l[c]=d,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),a&&a.hasOwnProperty(c))break}return s}function y0(n){return n?Tr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Za(n,e){return(e?n.slice(0,n.findIndex(a=>a.route.id===e)+1):[...n]).reverse().find(a=>a.route.hasErrorBoundary===!0)||n[0]}function Zh(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Br(n,{pathname:e,routeId:t,method:a,type:s,message:l}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(c="Bad Request",a&&e&&t?d=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(c="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",d=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",a&&e&&t?d=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new fc(n||500,c,new Error(d),!0)}function ef(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[a,s]=e[t];if(Qs(s))return{key:a,result:s}}}function qS(n){let e=typeof n=="string"?pa(n):n;return Oi({...e,hash:""})}function dD(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function mD(n){var e,t;return new fc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function pD(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&gD(t))}function gD(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function yD(n){return cy(n.result)&&kS.has(n.result.status)}function Tr(n){return n.type==="error"}function Qs(n){return(n&&n.type)==="redirect"}function v0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function cy(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function vD(n){return kS.has(n)}function _D(n){return cy(n)&&vD(n.status)&&n.headers.has("Location")}function ED(n){return XI.has(n.toUpperCase())}function Un(n){return YI.has(n.toUpperCase())}function hy(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function ff(n,e){let t=typeof e=="string"?pa(e).search:e.search;if(n[n.length-1].route.index&&hy(t||""))return n[n.length-1];let a=xS(n);return a[a.length-1]}function _0(n){let{formMethod:e,formAction:t,formEncType:a,text:s,formData:l,json:c}=n;if(!(!e||!t||!a)){if(s!=null)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:a,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:c,text:void 0}}}function ng(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function TD(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ou(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function bD(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ra(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function SD(n,e){try{let t=n.sessionStorage.getItem(LS);if(t){let a=JSON.parse(t);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function AD(n,e){if(e.size>0){let t={};for(let[a,s]of e)t[a]=[...s];try{n.sessionStorage.setItem(LS,JSON.stringify(t))}catch(a){tn(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function E0(){let n,e,t=new Promise((a,s)=>{n=async l=>{a(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var lo=U.createContext(null);lo.displayName="DataRouter";var mc=U.createContext(null);mc.displayName="DataRouterState";var GS=U.createContext(!1);function wD(){return U.useContext(GS)}var fy=U.createContext({isTransitioning:!1});fy.displayName="ViewTransition";var $S=U.createContext(new Map);$S.displayName="Fetchers";var RD=U.createContext(null);RD.displayName="Await";var Rr=U.createContext(null);Rr.displayName="Navigation";var gd=U.createContext(null);gd.displayName="Location";var $r=U.createContext({outlet:null,matches:[],isDataRoute:!1});$r.displayName="Route";var dy=U.createContext(null);dy.displayName="RouteError";var KS="REACT_ROUTER_ERROR",CD="REDIRECT",ID="ROUTE_ERROR_RESPONSE";function DD(n){if(n.startsWith(`${KS}:${CD}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function ND(n){if(n.startsWith(`${KS}:${ID}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new fc(e.status,e.statusText,e.data)}catch{}}function xD(n,{relative:e}={}){it(Cl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=U.useContext(Rr),{hash:s,pathname:l,search:c}=gc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ci([t,l])),a.createHref({pathname:d,search:c,hash:s})}function Cl(){return U.useContext(gd)!=null}function ui(){return it(Cl(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(gd).location}var YS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QS(n){U.useContext(Rr).static||U.useLayoutEffect(n)}function pc(){let{isDataRoute:n}=U.useContext($r);return n?$D():OD()}function OD(){it(Cl(),"useNavigate() may be used only in the context of a <Router> component.");let n=U.useContext(lo),{basename:e,navigator:t}=U.useContext(Rr),{matches:a}=U.useContext($r),{pathname:s}=ui(),l=JSON.stringify(md(a)),c=U.useRef(!1);return QS(()=>{c.current=!0}),U.useCallback((p,g={})=>{if(tn(c.current,YS),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=pd(p,JSON.parse(l),s,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ci([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,s,n])}var MD=U.createContext(null);function VD(n){let e=U.useContext($r).outlet;return U.useMemo(()=>e&&U.createElement(MD.Provider,{value:n},e),[e,n])}function yd(){let{matches:n}=U.useContext($r),e=n[n.length-1];return e?e.params:{}}function gc(n,{relative:e}={}){let{matches:t}=U.useContext($r),{pathname:a}=ui(),s=JSON.stringify(md(t));return U.useMemo(()=>pd(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function PD(n,e,t,a,s){it(Cl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=U.useContext(Rr),{matches:c}=U.useContext($r),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let F=E&&E.path||"";WS(g,!E||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let S=ui(),I;I=S;let P=I.pathname||"/",B=P;if(v!=="/"){let F=v.replace(/^\//,"").split("/");B="/"+P.replace(/^\//,"").split("/").slice(F.length).join("/")}let V=Ja(n,{pathname:B});return tn(E||V!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),tn(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),zD(V&&V.map(F=>Object.assign({},F,{params:Object.assign({},p,F.params),pathname:Ci([v,l.encodeLocation?l.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?v:Ci([v,l.encodeLocation?l.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),c,t,a,s)}function kD(){let n=GD(),e=ec(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:l},"ErrorBoundary")," or"," ",U.createElement("code",{style:l},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:s},t):null,c)}var LD=U.createElement(kD,null),XS=class extends U.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=ND(n.digest);t&&(n=t)}let e=n!==void 0?U.createElement($r.Provider,{value:this.props.routeContext},U.createElement(dy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?U.createElement(UD,{error:n},e):e}};XS.contextType=GS;var rg=new WeakMap;function UD({children:n,error:e}){let{basename:t}=U.useContext(Rr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=DD(e.digest);if(a){let s=rg.get(e);if(s)throw s;let l=MS(a.location,t);if(OS&&!rg.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw rg.set(e,c),c}return U.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function jD({routeContext:n,match:e,children:t}){let a=U.useContext(lo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement($r.Provider,{value:n},t)}function zD(n,e=[],t=null,a=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let v=l.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);it(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,p=-1;if(t)for(let v=0;v<l.length;v++){let E=l[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=v),E.route.id){let{loaderData:S,errors:I}=t,P=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!I||I[E.route.id]===void 0);if(E.route.lazy||P){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&a?(v,E)=>{var S,I;a(v,{location:t.location,params:((I=(S=t.matches)==null?void 0:S[0])==null?void 0:I.params)??{},unstable_pattern:dc(t.matches),errorInfo:E})}:void 0;return l.reduceRight((v,E,S)=>{let I,P=!1,B=null,V=null;t&&(I=c&&E.route.id?c[E.route.id]:void 0,B=E.route.errorElement||LD,d&&(p<0&&S===0?(WS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,V=null):p===S&&(P=!0,V=E.route.hydrateFallbackElement||null)));let Y=e.concat(l.slice(0,S+1)),F=()=>{let z;return I?z=B:P?z=V:E.route.Component?z=U.createElement(E.route.Component,null):E.route.element?z=E.route.element:z=v,U.createElement(jD,{match:E,routeContext:{outlet:v,matches:Y,isDataRoute:t!=null},children:z})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?U.createElement(XS,{location:t.location,revalidation:t.revalidation,component:B,error:I,children:F(),routeContext:{outlet:null,matches:Y,isDataRoute:!0},onError:g}):F()},null)}function my(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BD(n){let e=U.useContext(lo);return it(e,my(n)),e}function FD(n){let e=U.useContext(mc);return it(e,my(n)),e}function HD(n){let e=U.useContext($r);return it(e,my(n)),e}function py(n){let e=HD(n),t=e.matches[e.matches.length-1];return it(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function qD(){return py("useRouteId")}function GD(){var a;let n=U.useContext(dy),e=FD("useRouteError"),t=py("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function $D(){let{router:n}=BD("useNavigate"),e=py("useNavigate"),t=U.useRef(!1);return QS(()=>{t.current=!0}),U.useCallback(async(s,l={})=>{tn(t.current,YS),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var T0={};function WS(n,e,t){!e&&!T0[n]&&(T0[n]=!0,tn(!1,t))}var b0={};function S0(n,e){!n&&!b0[e]&&(b0[e]=!0,console.warn(e))}var KD="useOptimistic",A0=jC[KD],YD=()=>{};function QD(n){return A0?A0(n):[n,YD]}function XD(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&tn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:U.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&tn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:U.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&tn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:U.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var WD=["HydrateFallback","hydrateFallbackElement"],JD=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}};function ZD({router:n,flushSync:e,onError:t,unstable_useTransitions:a}){a=wD()||a;let[l,c]=U.useState(n.state),[d,p]=QD(l),[g,v]=U.useState(),[E,S]=U.useState({isTransitioning:!1}),[I,P]=U.useState(),[B,V]=U.useState(),[Y,F]=U.useState(),z=U.useRef(new Map),K=U.useCallback((A,{deletedFetchers:w,newErrors:N,flushSync:x,viewTransitionOpts:M})=>{N&&t&&Object.values(N).forEach(Pe=>{var Be;return t(Pe,{location:A.location,params:((Be=A.matches[0])==null?void 0:Be.params)??{},unstable_pattern:dc(A.matches)})}),A.fetchers.forEach((Pe,Be)=>{Pe.data!==void 0&&z.current.set(Be,Pe.data)}),w.forEach(Pe=>z.current.delete(Pe)),S0(x===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let O=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(S0(M==null||O,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!M||!O){e&&x?e(()=>c(A)):a===!1?c(A):U.startTransition(()=>{a===!0&&p(Pe=>w0(Pe,A)),c(A)});return}if(e&&x){e(()=>{B&&(I==null||I.resolve(),B.skipTransition()),S({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let Pe=n.window.document.startViewTransition(()=>{e(()=>c(A))});Pe.finished.finally(()=>{e(()=>{P(void 0),V(void 0),v(void 0),S({isTransitioning:!1})})}),e(()=>V(Pe));return}B?(I==null||I.resolve(),B.skipTransition(),F({state:A,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(v(A),S({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[n.window,e,B,I,a,p,t]);U.useLayoutEffect(()=>n.subscribe(K),[n,K]),U.useEffect(()=>{E.isTransitioning&&!E.flushSync&&P(new JD)},[E]),U.useEffect(()=>{if(I&&g&&n.window){let A=g,w=I.promise,N=n.window.document.startViewTransition(async()=>{a===!1?c(A):U.startTransition(()=>{a===!0&&p(x=>w0(x,A)),c(A)}),await w});N.finished.finally(()=>{P(void 0),V(void 0),v(void 0),S({isTransitioning:!1})}),V(N)}},[g,I,n.window,a,p]),U.useEffect(()=>{I&&g&&d.location.key===g.location.key&&I.resolve()},[I,B,d.location,g]),U.useEffect(()=>{!E.isTransitioning&&Y&&(v(Y.state),S({isTransitioning:!0,flushSync:!1,currentLocation:Y.currentLocation,nextLocation:Y.nextLocation}),F(void 0))},[E.isTransitioning,Y]);let te=U.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:A=>n.navigate(A),push:(A,w,N)=>n.navigate(A,{state:w,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(A,w,N)=>n.navigate(A,{replace:!0,state:w,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[n]),G=n.basename||"/",b=U.useMemo(()=>({router:n,navigator:te,static:!1,basename:G,onError:t}),[n,te,G,t]);return U.createElement(U.Fragment,null,U.createElement(lo.Provider,{value:b},U.createElement(mc.Provider,{value:d},U.createElement($S.Provider,{value:z.current},U.createElement(fy.Provider,{value:E},U.createElement(nN,{basename:G,location:d.location,navigationType:d.historyAction,navigator:te,unstable_useTransitions:a},U.createElement(eN,{routes:n.routes,future:n.future,state:d,onError:t})))))),null)}function w0(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var eN=U.memo(tN);function tN({routes:n,future:e,state:t,onError:a}){return PD(n,void 0,t,a,e)}function as({to:n,replace:e,state:t,relative:a}){it(Cl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=U.useContext(Rr);tn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=U.useContext($r),{pathname:c}=ui(),d=pc(),p=pd(n,md(l),c,a==="path"),g=JSON.stringify(p);return U.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:a})},[d,g,a,e,t]),null}function JS(n){return VD(n.context)}function nN({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){it(!Cl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=U.useMemo(()=>({basename:d,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[d,s,l,c]);typeof t=="string"&&(t=pa(t));let{pathname:g="/",search:v="",hash:E="",state:S=null,key:I="default"}=t,P=U.useMemo(()=>{let B=qr(g,d);return B==null?null:{location:{pathname:B,search:v,hash:E,state:S,key:I},navigationType:a}},[d,g,v,E,S,I,a]);return tn(P!=null,`<Router basename="${d}"> is not able to match the URL "${g}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:U.createElement(Rr.Provider,{value:p},U.createElement(gd.Provider,{children:e,value:P}))}var df="get",mf="application/x-www-form-urlencoded";function vd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function rN(n){return vd(n)&&n.tagName.toLowerCase()==="button"}function iN(n){return vd(n)&&n.tagName.toLowerCase()==="form"}function aN(n){return vd(n)&&n.tagName.toLowerCase()==="input"}function sN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function oN(n,e){return n.button===0&&(!e||e==="_self")&&!sN(n)}var tf=null;function lN(){if(tf===null)try{new FormData(document.createElement("form"),0),tf=!1}catch{tf=!0}return tf}var uN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ig(n){return n!=null&&!uN.has(n)?(tn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mf}"`),null):n}function cN(n,e){let t,a,s,l,c;if(iN(n)){let d=n.getAttribute("action");a=d?qr(d,e):null,t=n.getAttribute("method")||df,s=ig(n.getAttribute("enctype"))||mf,l=new FormData(n)}else if(rN(n)||aN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(a=p?qr(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||df,s=ig(n.getAttribute("formenctype"))||ig(d.getAttribute("enctype"))||mf,l=new FormData(d,n),!lN()){let{name:g,type:v,value:E}=n;if(v==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,E)}}else{if(vd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=df,a=null,s=mf,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function hN(n,e,t,a){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:e&&qr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function fN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function mN(n,e,t){let a=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await fN(l,t);return c.links?c.links():[]}return[]}));return vN(a.flat(1).filter(dN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function R0(n,e,t,a,s,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var v;return t[g].pathname!==p.pathname||((v=t[g].route.path)==null?void 0:v.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{var E;let v=a.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function pN(n,e,{includeHydrateFallback:t}={}){return gN(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function gN(n){return[...new Set(n)]}function yN(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function vN(n,e){let t=new Set;return new Set(e),n.reduce((a,s)=>{let l=JSON.stringify(yN(s));return t.has(l)||(t.add(l),a.push({key:l,link:s})),a},[])}function ZS(){let n=U.useContext(lo);return gy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function _N(){let n=U.useContext(mc);return gy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var yy=U.createContext(void 0);yy.displayName="FrameworkContext";function eA(){let n=U.useContext(yy);return gy(n,"You must render this element inside a <HydratedRouter> element"),n}function EN(n,e){let t=U.useContext(yy),[a,s]=U.useState(!1),[l,c]=U.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:E}=e,S=U.useRef(null);U.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let B=Y=>{Y.forEach(F=>{c(F.isIntersecting)})},V=new IntersectionObserver(B,{threshold:.5});return S.current&&V.observe(S.current),()=>{V.disconnect()}}},[n]),U.useEffect(()=>{if(a){let B=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(B)}}},[a]);let I=()=>{s(!0)},P=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:Mu(d,I),onBlur:Mu(p,P),onMouseEnter:Mu(g,I),onMouseLeave:Mu(v,P),onTouchStart:Mu(E,I)}]:[!1,S,{}]}function Mu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function TN({page:n,...e}){let{router:t}=ZS(),a=U.useMemo(()=>Ja(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?U.createElement(SN,{page:n,matches:a,...e}):null}function bN(n){let{manifest:e,routeModules:t}=eA(),[a,s]=U.useState([]);return U.useEffect(()=>{let l=!1;return mN(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),a}function SN({page:n,matches:e,...t}){let a=ui(),{future:s,manifest:l,routeModules:c}=eA(),{basename:d}=ZS(),{loaderData:p,matches:g}=_N(),v=U.useMemo(()=>R0(n,e,g,l,a,"data"),[n,e,g,l,a]),E=U.useMemo(()=>R0(n,e,g,l,a,"assets"),[n,e,g,l,a]),S=U.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let B=new Set,V=!1;if(e.forEach(F=>{var K;let z=l.routes[F.route.id];!z||!z.hasLoader||(!v.some(te=>te.route.id===F.route.id)&&F.route.id in p&&((K=c[F.route.id])!=null&&K.shouldRevalidate)||z.hasClientLoader?V=!0:B.add(F.route.id))}),B.size===0)return[];let Y=hN(n,d,s.unstable_trailingSlashAwareDataRequests,"data");return V&&B.size>0&&Y.searchParams.set("_routes",e.filter(F=>B.has(F.route.id)).map(F=>F.route.id).join(",")),[Y.pathname+Y.search]},[d,s.unstable_trailingSlashAwareDataRequests,p,a,l,v,e,n,c]),I=U.useMemo(()=>pN(E,l),[E,l]),P=bN(E);return U.createElement(U.Fragment,null,S.map(B=>U.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...t})),I.map(B=>U.createElement("link",{key:B,rel:"modulepreload",href:B,...t})),P.map(({key:B,link:V})=>U.createElement("link",{key:B,nonce:t.nonce,...V,crossOrigin:V.crossOrigin??t.crossOrigin})))}function AN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var wN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wN&&(window.__reactRouterVersion="7.13.0")}catch{}function RN(n,e){return eD({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:gI({window:e==null?void 0:e.window}),hydrationData:CN(),routes:n,mapRouteProperties:XD,hydrationRouteProperties:WD,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function CN(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:IN(n.errors)}),n}function IN(n){if(!n)return null;let e=Object.entries(n),t={};for(let[a,s]of e)if(s&&s.__type==="RouteErrorResponse")t[a]=new fc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[a]=c}catch{}}if(t[a]==null){let l=new Error(s.message);l.stack="",t[a]=l}}else t[a]=s;return t}var tA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nA=U.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S,...I},P){let{basename:B,unstable_useTransitions:V}=U.useContext(Rr),Y=typeof g=="string"&&tA.test(g),F=MS(g,B);g=F.to;let z=xD(g,{relative:s}),[K,te,G]=EN(a,I),b=ON(g,{replace:c,state:d,target:p,preventScrollReset:v,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:S,unstable_useTransitions:V});function A(N){e&&e(N),N.defaultPrevented||b(N)}let w=U.createElement("a",{...I,...G,href:F.absoluteURL||z,onClick:F.isExternal||l?e:A,ref:AN(P,te),target:p,"data-discover":!Y&&t==="render"?"true":void 0});return K&&!Y?U.createElement(U.Fragment,null,w,U.createElement(TN,{page:z})):w});nA.displayName="Link";var DN=U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:p,...g},v){let E=gc(c,{relative:g.relative}),S=ui(),I=U.useContext(mc),{navigator:P,basename:B}=U.useContext(Rr),V=I!=null&&LN(E)&&d===!0,Y=P.encodeLocation?P.encodeLocation(E).pathname:E.pathname,F=S.pathname,z=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(F=F.toLowerCase(),z=z?z.toLowerCase():null,Y=Y.toLowerCase()),z&&B&&(z=qr(z,B)||z);const K=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let te=F===Y||!s&&F.startsWith(Y)&&F.charAt(K)==="/",G=z!=null&&(z===Y||!s&&z.startsWith(Y)&&z.charAt(Y.length)==="/"),b={isActive:te,isPending:G,isTransitioning:V},A=te?e:void 0,w;typeof a=="function"?w=a(b):w=[a,te?"active":null,G?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(b):l;return U.createElement(nA,{...g,"aria-current":A,className:w,ref:v,style:N,to:c,viewTransition:d},typeof p=="function"?p(b):p)});DN.displayName="NavLink";var NN=U.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:l,method:c=df,action:d,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S,...I},P)=>{let{unstable_useTransitions:B}=U.useContext(Rr),V=PN(),Y=kN(d,{relative:g}),F=c.toLowerCase()==="get"?"get":"post",z=typeof d=="string"&&tA.test(d),K=te=>{if(p&&p(te),te.defaultPrevented)return;te.preventDefault();let G=te.nativeEvent.submitter,b=(G==null?void 0:G.getAttribute("formmethod"))||c,A=()=>V(G||te.currentTarget,{fetcherKey:e,method:b,navigate:t,replace:s,state:l,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S});B&&t!==!1?U.startTransition(()=>A()):A()};return U.createElement("form",{ref:P,method:F,action:Y,onSubmit:a?p:K,...I,"data-discover":!z&&n==="render"?"true":void 0})});NN.displayName="Form";function xN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rA(n){let e=U.useContext(lo);return it(e,xN(n)),e}function ON(n,{target:e,replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=pc(),v=ui(),E=gc(n,{relative:l});return U.useCallback(S=>{if(oN(S,e)){S.preventDefault();let I=t!==void 0?t:Oi(v)===Oi(E),P=()=>g(n,{replace:I,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?U.startTransition(()=>P()):P()}},[v,g,E,t,a,e,n,s,l,c,d,p])}var MN=0,VN=()=>`__${String(++MN)}__`;function PN(){let{router:n}=rA("useSubmit"),{basename:e}=U.useContext(Rr),t=qD(),a=n.fetch,s=n.navigate;return U.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:v,body:E}=cN(l,e);if(c.navigate===!1){let S=c.fetcherKey||VN();await a(S,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,s,e,t])}function kN(n,{relative:e}={}){let{basename:t}=U.useContext(Rr),a=U.useContext($r);it(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...gc(n||".",{relative:e})},c=ui();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ci([t,l.pathname])),Oi(l)}function LN(n,{relative:e}={}){let t=U.useContext(fy);it(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=rA("useViewTransitionState"),s=gc(n,{relative:e});if(!t.isTransitioning)return!1;let l=qr(t.currentLocation.pathname,a)||t.currentLocation.pathname,c=qr(t.nextLocation.pathname,a)||t.nextLocation.pathname;return Lf(s.pathname,c)!=null||Lf(s.pathname,l)!=null}var UN=SS();function jN(n){return U.createElement(ZD,{flushSync:UN.flushSync,...n})}const zN=U.createContext(void 0),Pi=()=>cI(),gt=dI.withTypes(),BN=({children:n})=>{const e=gt(t=>t.auth.loading);return R.jsx(zN.Provider,{value:{isLoading:e},children:n})},FN=()=>{};var C0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let s=n.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},HN=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const s=n[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],d=n[t++],p=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},aA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,d=c?n[s+1]:0,p=s+2<n.length,g=p?n[s+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,I=g&63;p||(I=64,c||(S=64)),a.push(t[v],t[E],t[S],t[I])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):HN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new qN;const S=l<<2|d>>4;if(a.push(S),g!==64){const I=d<<4&240|g>>2;if(a.push(I),E!==64){const P=g<<6&192|E;a.push(P)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class qN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GN=function(n){const e=iA(n);return aA.encodeByteArray(e,!0)},Uf=function(n){return GN(n).replace(/\./g,"")},sA=function(n){try{return aA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=()=>$N().__FIREBASE_DEFAULTS__,YN=()=>{if(typeof process>"u"||typeof C0>"u")return;const n=C0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sA(n[1]);return e&&JSON.parse(e)},_d=()=>{try{return FN()||KN()||YN()||QN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},oA=n=>{var e,t;return(t=(e=_d())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},XN=n=>{const e=oA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},lA=()=>{var n;return(n=_d())==null?void 0:n.config},uA=n=>{var e;return(e=_d())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Uf(JSON.stringify(t)),Uf(JSON.stringify(c)),""].join(".")}const qu={};function ZN(){const n={prod:[],emulator:[]};for(const e of Object.keys(qu))qu[e]?n.emulator.push(e):n.prod.push(e);return n}function ex(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let I0=!1;function hA(n,e){if(typeof window>"u"||typeof document>"u"||!Il(window.location.host)||qu[n]===e||qu[n]||I0)return;qu[n]=e;function t(S){return`__firebase__banner__${S}`}const a="__firebase__banner",l=ZN().prod.length>0;function c(){const S=document.getElementById(a);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{I0=!0,c()},S}function v(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=ex(a),I=t("text"),P=document.getElementById(I)||document.createElement("span"),B=t("learnmore"),V=document.getElementById(B)||document.createElement("a"),Y=t("preprendIcon"),F=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const z=S.element;d(z),v(V,B);const K=g();p(F,Y),z.append(F,P,V,K),document.body.appendChild(z)}l?(P.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function nx(){var e;const n=(e=_d())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ix(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ax(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sx(){const n=Bn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ox(){return!nx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lx(){try{return typeof indexedDB=="object"}catch{return!1}}function ux(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="FirebaseError";class ga extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=cx,Object.setPrototypeOf(this,ga.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yc.prototype.create)}}class yc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?hx(l,a):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new ga(s,d,a)}}function hx(n,e){return n.replace(fx,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const fx=/\{\$([^}]+)}/g;function dx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function no(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=n[s],c=e[s];if(D0(l)&&D0(c)){if(!no(l,c))return!1}else if(l!==c)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function D0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function mx(n,e){const t=new px(n,e);return t.subscribe.bind(t)}class px{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");gx(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=ag),s.error===void 0&&(s.error=ag),s.complete===void 0&&(s.complete=ag);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gx(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ag(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n){return n&&n._delegate?n._delegate:n}class ro{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new WN;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_x(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&c.resolve(s)}return s}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const l=this.instances.get(a);return l&&e(l,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:vx(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vx(n){return n===Ys?void 0:n}function _x(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ht||(ht={}));const Tx={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},bx=ht.INFO,Sx={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},Ax=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),s=Sx[e];if(s)console[s](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vy{constructor(e){this.name=e,this._logLevel=bx,this._logHandler=Ax,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}}const wx=(n,e)=>e.some(t=>n instanceof t);let N0,x0;function Rx(){return N0||(N0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cx(){return x0||(x0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fA=new WeakMap,Ig=new WeakMap,dA=new WeakMap,sg=new WeakMap,_y=new WeakMap;function Ix(n){const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ss(n.result)),s()},c=()=>{a(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&fA.set(t,n)}).catch(()=>{}),_y.set(e,n),e}function Dx(n){if(Ig.has(n))return;const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{a(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ig.set(n,e)}let Dg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ig.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ss(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Nx(n){Dg=n(Dg)}function xx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(og(this),e,...t);return dA.set(a,e.sort?e.sort():[e]),ss(a)}:Cx().includes(n)?function(...e){return n.apply(og(this),e),ss(fA.get(this))}:function(...e){return ss(n.apply(og(this),e))}}function Ox(n){return typeof n=="function"?xx(n):(n instanceof IDBTransaction&&Dx(n),wx(n,Rx())?new Proxy(n,Dg):n)}function ss(n){if(n instanceof IDBRequest)return Ix(n);if(sg.has(n))return sg.get(n);const e=Ox(n);return e!==n&&(sg.set(n,e),_y.set(e,n)),e}const og=n=>_y.get(n);function Mx(n,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),d=ss(c);return a&&c.addEventListener("upgradeneeded",p=>{a(ss(c.result),p.oldVersion,p.newVersion,ss(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const Vx=["get","getKey","getAll","getAllKeys","count"],Px=["put","add","delete","clear"],lg=new Map;function O0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(lg.get(e))return lg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=Px.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||Vx.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,s?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&p.done]))[0]};return lg.set(e,l),l}Nx(n=>({...n,get:(e,t,a)=>O0(e,t)||n.get(e,t,a),has:(e,t)=>!!O0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Lx(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function Lx(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ng="@firebase/app",M0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=new vy("@firebase/app"),Ux="@firebase/app-compat",jx="@firebase/analytics-compat",zx="@firebase/analytics",Bx="@firebase/app-check-compat",Fx="@firebase/app-check",Hx="@firebase/auth",qx="@firebase/auth-compat",Gx="@firebase/database",$x="@firebase/data-connect",Kx="@firebase/database-compat",Yx="@firebase/functions",Qx="@firebase/functions-compat",Xx="@firebase/installations",Wx="@firebase/installations-compat",Jx="@firebase/messaging",Zx="@firebase/messaging-compat",e2="@firebase/performance",t2="@firebase/performance-compat",n2="@firebase/remote-config",r2="@firebase/remote-config-compat",i2="@firebase/storage",a2="@firebase/storage-compat",s2="@firebase/firestore",o2="@firebase/ai",l2="@firebase/firestore-compat",u2="firebase",c2="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="[DEFAULT]",h2={[Ng]:"fire-core",[Ux]:"fire-core-compat",[zx]:"fire-analytics",[jx]:"fire-analytics-compat",[Fx]:"fire-app-check",[Bx]:"fire-app-check-compat",[Hx]:"fire-auth",[qx]:"fire-auth-compat",[Gx]:"fire-rtdb",[$x]:"fire-data-connect",[Kx]:"fire-rtdb-compat",[Yx]:"fire-fn",[Qx]:"fire-fn-compat",[Xx]:"fire-iid",[Wx]:"fire-iid-compat",[Jx]:"fire-fcm",[Zx]:"fire-fcm-compat",[e2]:"fire-perf",[t2]:"fire-perf-compat",[n2]:"fire-rc",[r2]:"fire-rc-compat",[i2]:"fire-gcs",[a2]:"fire-gcs-compat",[s2]:"fire-fst",[l2]:"fire-fst-compat",[o2]:"fire-vertex","fire-js":"fire-js",[u2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new Map,f2=new Map,Og=new Map;function V0(n,e){try{n.container.addComponent(e)}catch(t){ca.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function pl(n){const e=n.name;if(Og.has(e))return ca.debug(`There were multiple attempts to register component ${e}.`),!1;Og.set(e,n);for(const t of jf.values())V0(t,n);for(const t of f2.values())V0(t,n);return!0}function Ey(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ni(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new yc("app","Firebase",d2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=c2;function mA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a={name:xg,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw os.create("bad-app-name",{appName:String(s)});if(t||(t=lA()),!t)throw os.create("no-options");const l=jf.get(s);if(l){if(no(t,l.options)&&no(a,l.config))return l;throw os.create("duplicate-app",{appName:s})}const c=new Ex(s);for(const p of Og.values())c.addComponent(p);const d=new m2(t,a,c);return jf.set(s,d),d}function pA(n=xg){const e=jf.get(n);if(!e&&n===xg&&lA())return mA();if(!e)throw os.create("no-app",{appName:n});return e}function ls(n,e,t){let a=h2[n]??n;t&&(a+=`-${t}`);const s=a.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ca.warn(c.join(" "));return}pl(new ro(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="firebase-heartbeat-database",g2=1,tc="firebase-heartbeat-store";let ug=null;function gA(){return ug||(ug=Mx(p2,g2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(tc)}catch(t){console.warn(t)}}}}).catch(n=>{throw os.create("idb-open",{originalErrorMessage:n.message})})),ug}async function y2(n){try{const t=(await gA()).transaction(tc),a=await t.objectStore(tc).get(yA(n));return await t.done,a}catch(e){if(e instanceof ga)ca.warn(e.message);else{const t=os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ca.warn(t.message)}}}async function P0(n,e){try{const a=(await gA()).transaction(tc,"readwrite");await a.objectStore(tc).put(e,yA(n)),await a.done}catch(t){if(t instanceof ga)ca.warn(t.message);else{const a=os.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ca.warn(a.message)}}}function yA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=1024,_2=30;class E2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new b2(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=k0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>_2){const c=S2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){ca.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=k0(),{heartbeatsToSend:a,unsentEntries:s}=T2(this._heartbeatsCache.heartbeats),l=Uf(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ca.warn(t),""}}}function k0(){return new Date().toISOString().substring(0,10)}function T2(n,e=v2){const t=[];let a=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),L0(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),L0(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class b2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lx()?ux().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await y2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return P0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return P0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function L0(n){return Uf(JSON.stringify({version:2,heartbeats:n})).length}function S2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(n){pl(new ro("platform-logger",e=>new kx(e),"PRIVATE")),pl(new ro("heartbeat",e=>new E2(e),"PRIVATE")),ls(Ng,M0,n),ls(Ng,M0,"esm2020"),ls("fire-js","")}A2("");var U0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,vA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,A){function w(){}w.prototype=A.prototype,b.F=A.prototype,b.prototype=new w,b.prototype.constructor=b,b.D=function(N,x,M){for(var O=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)O[Pe-2]=arguments[Pe];return A.prototype[x].apply(N,O)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,A,w){w||(w=0);const N=Array(16);if(typeof A=="string")for(var x=0;x<16;++x)N[x]=A.charCodeAt(w++)|A.charCodeAt(w++)<<8|A.charCodeAt(w++)<<16|A.charCodeAt(w++)<<24;else for(x=0;x<16;++x)N[x]=A[w++]|A[w++]<<8|A[w++]<<16|A[w++]<<24;A=b.g[0],w=b.g[1],x=b.g[2];let M=b.g[3],O;O=A+(M^w&(x^M))+N[0]+3614090360&4294967295,A=w+(O<<7&4294967295|O>>>25),O=M+(x^A&(w^x))+N[1]+3905402710&4294967295,M=A+(O<<12&4294967295|O>>>20),O=x+(w^M&(A^w))+N[2]+606105819&4294967295,x=M+(O<<17&4294967295|O>>>15),O=w+(A^x&(M^A))+N[3]+3250441966&4294967295,w=x+(O<<22&4294967295|O>>>10),O=A+(M^w&(x^M))+N[4]+4118548399&4294967295,A=w+(O<<7&4294967295|O>>>25),O=M+(x^A&(w^x))+N[5]+1200080426&4294967295,M=A+(O<<12&4294967295|O>>>20),O=x+(w^M&(A^w))+N[6]+2821735955&4294967295,x=M+(O<<17&4294967295|O>>>15),O=w+(A^x&(M^A))+N[7]+4249261313&4294967295,w=x+(O<<22&4294967295|O>>>10),O=A+(M^w&(x^M))+N[8]+1770035416&4294967295,A=w+(O<<7&4294967295|O>>>25),O=M+(x^A&(w^x))+N[9]+2336552879&4294967295,M=A+(O<<12&4294967295|O>>>20),O=x+(w^M&(A^w))+N[10]+4294925233&4294967295,x=M+(O<<17&4294967295|O>>>15),O=w+(A^x&(M^A))+N[11]+2304563134&4294967295,w=x+(O<<22&4294967295|O>>>10),O=A+(M^w&(x^M))+N[12]+1804603682&4294967295,A=w+(O<<7&4294967295|O>>>25),O=M+(x^A&(w^x))+N[13]+4254626195&4294967295,M=A+(O<<12&4294967295|O>>>20),O=x+(w^M&(A^w))+N[14]+2792965006&4294967295,x=M+(O<<17&4294967295|O>>>15),O=w+(A^x&(M^A))+N[15]+1236535329&4294967295,w=x+(O<<22&4294967295|O>>>10),O=A+(x^M&(w^x))+N[1]+4129170786&4294967295,A=w+(O<<5&4294967295|O>>>27),O=M+(w^x&(A^w))+N[6]+3225465664&4294967295,M=A+(O<<9&4294967295|O>>>23),O=x+(A^w&(M^A))+N[11]+643717713&4294967295,x=M+(O<<14&4294967295|O>>>18),O=w+(M^A&(x^M))+N[0]+3921069994&4294967295,w=x+(O<<20&4294967295|O>>>12),O=A+(x^M&(w^x))+N[5]+3593408605&4294967295,A=w+(O<<5&4294967295|O>>>27),O=M+(w^x&(A^w))+N[10]+38016083&4294967295,M=A+(O<<9&4294967295|O>>>23),O=x+(A^w&(M^A))+N[15]+3634488961&4294967295,x=M+(O<<14&4294967295|O>>>18),O=w+(M^A&(x^M))+N[4]+3889429448&4294967295,w=x+(O<<20&4294967295|O>>>12),O=A+(x^M&(w^x))+N[9]+568446438&4294967295,A=w+(O<<5&4294967295|O>>>27),O=M+(w^x&(A^w))+N[14]+3275163606&4294967295,M=A+(O<<9&4294967295|O>>>23),O=x+(A^w&(M^A))+N[3]+4107603335&4294967295,x=M+(O<<14&4294967295|O>>>18),O=w+(M^A&(x^M))+N[8]+1163531501&4294967295,w=x+(O<<20&4294967295|O>>>12),O=A+(x^M&(w^x))+N[13]+2850285829&4294967295,A=w+(O<<5&4294967295|O>>>27),O=M+(w^x&(A^w))+N[2]+4243563512&4294967295,M=A+(O<<9&4294967295|O>>>23),O=x+(A^w&(M^A))+N[7]+1735328473&4294967295,x=M+(O<<14&4294967295|O>>>18),O=w+(M^A&(x^M))+N[12]+2368359562&4294967295,w=x+(O<<20&4294967295|O>>>12),O=A+(w^x^M)+N[5]+4294588738&4294967295,A=w+(O<<4&4294967295|O>>>28),O=M+(A^w^x)+N[8]+2272392833&4294967295,M=A+(O<<11&4294967295|O>>>21),O=x+(M^A^w)+N[11]+1839030562&4294967295,x=M+(O<<16&4294967295|O>>>16),O=w+(x^M^A)+N[14]+4259657740&4294967295,w=x+(O<<23&4294967295|O>>>9),O=A+(w^x^M)+N[1]+2763975236&4294967295,A=w+(O<<4&4294967295|O>>>28),O=M+(A^w^x)+N[4]+1272893353&4294967295,M=A+(O<<11&4294967295|O>>>21),O=x+(M^A^w)+N[7]+4139469664&4294967295,x=M+(O<<16&4294967295|O>>>16),O=w+(x^M^A)+N[10]+3200236656&4294967295,w=x+(O<<23&4294967295|O>>>9),O=A+(w^x^M)+N[13]+681279174&4294967295,A=w+(O<<4&4294967295|O>>>28),O=M+(A^w^x)+N[0]+3936430074&4294967295,M=A+(O<<11&4294967295|O>>>21),O=x+(M^A^w)+N[3]+3572445317&4294967295,x=M+(O<<16&4294967295|O>>>16),O=w+(x^M^A)+N[6]+76029189&4294967295,w=x+(O<<23&4294967295|O>>>9),O=A+(w^x^M)+N[9]+3654602809&4294967295,A=w+(O<<4&4294967295|O>>>28),O=M+(A^w^x)+N[12]+3873151461&4294967295,M=A+(O<<11&4294967295|O>>>21),O=x+(M^A^w)+N[15]+530742520&4294967295,x=M+(O<<16&4294967295|O>>>16),O=w+(x^M^A)+N[2]+3299628645&4294967295,w=x+(O<<23&4294967295|O>>>9),O=A+(x^(w|~M))+N[0]+4096336452&4294967295,A=w+(O<<6&4294967295|O>>>26),O=M+(w^(A|~x))+N[7]+1126891415&4294967295,M=A+(O<<10&4294967295|O>>>22),O=x+(A^(M|~w))+N[14]+2878612391&4294967295,x=M+(O<<15&4294967295|O>>>17),O=w+(M^(x|~A))+N[5]+4237533241&4294967295,w=x+(O<<21&4294967295|O>>>11),O=A+(x^(w|~M))+N[12]+1700485571&4294967295,A=w+(O<<6&4294967295|O>>>26),O=M+(w^(A|~x))+N[3]+2399980690&4294967295,M=A+(O<<10&4294967295|O>>>22),O=x+(A^(M|~w))+N[10]+4293915773&4294967295,x=M+(O<<15&4294967295|O>>>17),O=w+(M^(x|~A))+N[1]+2240044497&4294967295,w=x+(O<<21&4294967295|O>>>11),O=A+(x^(w|~M))+N[8]+1873313359&4294967295,A=w+(O<<6&4294967295|O>>>26),O=M+(w^(A|~x))+N[15]+4264355552&4294967295,M=A+(O<<10&4294967295|O>>>22),O=x+(A^(M|~w))+N[6]+2734768916&4294967295,x=M+(O<<15&4294967295|O>>>17),O=w+(M^(x|~A))+N[13]+1309151649&4294967295,w=x+(O<<21&4294967295|O>>>11),O=A+(x^(w|~M))+N[4]+4149444226&4294967295,A=w+(O<<6&4294967295|O>>>26),O=M+(w^(A|~x))+N[11]+3174756917&4294967295,M=A+(O<<10&4294967295|O>>>22),O=x+(A^(M|~w))+N[2]+718787259&4294967295,x=M+(O<<15&4294967295|O>>>17),O=w+(M^(x|~A))+N[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(x+(O<<21&4294967295|O>>>11))&4294967295,b.g[2]=b.g[2]+x&4294967295,b.g[3]=b.g[3]+M&4294967295}a.prototype.v=function(b,A){A===void 0&&(A=b.length);const w=A-this.blockSize,N=this.C;let x=this.h,M=0;for(;M<A;){if(x==0)for(;M<=w;)s(this,b,M),M+=this.blockSize;if(typeof b=="string"){for(;M<A;)if(N[x++]=b.charCodeAt(M++),x==this.blockSize){s(this,N),x=0;break}}else for(;M<A;)if(N[x++]=b[M++],x==this.blockSize){s(this,N),x=0;break}}this.h=x,this.o+=A},a.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;A=this.o*8;for(var w=b.length-8;w<b.length;++w)b[w]=A&255,A/=256;for(this.v(b),b=Array(16),A=0,w=0;w<4;++w)for(let N=0;N<32;N+=8)b[A++]=this.g[w]>>>N&255;return b};function l(b,A){var w=d;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=A(b)}function c(b,A){this.h=A;const w=[];let N=!0;for(let x=b.length-1;x>=0;x--){const M=b[x]|0;N&&M==A||(w[x]=M,N=!1)}this.g=w}var d={};function p(b){return-128<=b&&b<128?l(b,function(A){return new c([A|0],A<0?-1:0)}):new c([b|0],b<0?-1:0)}function g(b){if(isNaN(b)||!isFinite(b))return E;if(b<0)return V(g(-b));const A=[];let w=1;for(let N=0;b>=w;N++)A[N]=b/w|0,w*=4294967296;return new c(A,0)}function v(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return V(v(b.substring(1),A));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=g(Math.pow(A,8));let N=E;for(let M=0;M<b.length;M+=8){var x=Math.min(8,b.length-M);const O=parseInt(b.substring(M,M+x),A);x<8?(x=g(Math.pow(A,x)),N=N.j(x).add(g(O))):(N=N.j(w),N=N.add(g(O)))}return N}var E=p(0),S=p(1),I=p(16777216);n=c.prototype,n.m=function(){if(B(this))return-V(this).m();let b=0,A=1;for(let w=0;w<this.g.length;w++){const N=this.i(w);b+=(N>=0?N:4294967296+N)*A,A*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(P(this))return"0";if(B(this))return"-"+V(this).toString(b);const A=g(Math.pow(b,6));var w=this;let N="";for(;;){const x=K(w,A).g;w=Y(w,x.j(A));let M=((w.g.length>0?w.g[0]:w.h)>>>0).toString(b);if(w=x,P(w))return M+N;for(;M.length<6;)M="0"+M;N=M+N}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function P(b){if(b.h!=0)return!1;for(let A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function B(b){return b.h==-1}n.l=function(b){return b=Y(this,b),B(b)?-1:P(b)?0:1};function V(b){const A=b.g.length,w=[];for(let N=0;N<A;N++)w[N]=~b.g[N];return new c(w,~b.h).add(S)}n.abs=function(){return B(this)?V(this):this},n.add=function(b){const A=Math.max(this.g.length,b.g.length),w=[];let N=0;for(let x=0;x<=A;x++){let M=N+(this.i(x)&65535)+(b.i(x)&65535),O=(M>>>16)+(this.i(x)>>>16)+(b.i(x)>>>16);N=O>>>16,M&=65535,O&=65535,w[x]=O<<16|M}return new c(w,w[w.length-1]&-2147483648?-1:0)};function Y(b,A){return b.add(V(A))}n.j=function(b){if(P(this)||P(b))return E;if(B(this))return B(b)?V(this).j(V(b)):V(V(this).j(b));if(B(b))return V(this.j(V(b)));if(this.l(I)<0&&b.l(I)<0)return g(this.m()*b.m());const A=this.g.length+b.g.length,w=[];for(var N=0;N<2*A;N++)w[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<b.g.length;x++){const M=this.i(N)>>>16,O=this.i(N)&65535,Pe=b.i(x)>>>16,Be=b.i(x)&65535;w[2*N+2*x]+=O*Be,F(w,2*N+2*x),w[2*N+2*x+1]+=M*Be,F(w,2*N+2*x+1),w[2*N+2*x+1]+=O*Pe,F(w,2*N+2*x+1),w[2*N+2*x+2]+=M*Pe,F(w,2*N+2*x+2)}for(b=0;b<A;b++)w[b]=w[2*b+1]<<16|w[2*b];for(b=A;b<2*A;b++)w[b]=0;return new c(w,0)};function F(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function z(b,A){this.g=b,this.h=A}function K(b,A){if(P(A))throw Error("division by zero");if(P(b))return new z(E,E);if(B(b))return A=K(V(b),A),new z(V(A.g),V(A.h));if(B(A))return A=K(b,V(A)),new z(V(A.g),A.h);if(b.g.length>30){if(B(b)||B(A))throw Error("slowDivide_ only works with positive integers.");for(var w=S,N=A;N.l(b)<=0;)w=te(w),N=te(N);var x=G(w,1),M=G(N,1);for(N=G(N,2),w=G(w,2);!P(N);){var O=M.add(N);O.l(b)<=0&&(x=x.add(w),M=O),N=G(N,1),w=G(w,1)}return A=Y(b,x.j(A)),new z(x,A)}for(x=E;b.l(A)>=0;){for(w=Math.max(1,Math.floor(b.m()/A.m())),N=Math.ceil(Math.log(w)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),M=g(w),O=M.j(A);B(O)||O.l(b)>0;)w-=N,M=g(w),O=M.j(A);P(M)&&(M=S),x=x.add(M),b=Y(b,O)}return new z(x,b)}n.B=function(b){return K(this,b).h},n.and=function(b){const A=Math.max(this.g.length,b.g.length),w=[];for(let N=0;N<A;N++)w[N]=this.i(N)&b.i(N);return new c(w,this.h&b.h)},n.or=function(b){const A=Math.max(this.g.length,b.g.length),w=[];for(let N=0;N<A;N++)w[N]=this.i(N)|b.i(N);return new c(w,this.h|b.h)},n.xor=function(b){const A=Math.max(this.g.length,b.g.length),w=[];for(let N=0;N<A;N++)w[N]=this.i(N)^b.i(N);return new c(w,this.h^b.h)};function te(b){const A=b.g.length+1,w=[];for(let N=0;N<A;N++)w[N]=b.i(N)<<1|b.i(N-1)>>>31;return new c(w,b.h)}function G(b,A){const w=A>>5;A%=32;const N=b.g.length-w,x=[];for(let M=0;M<N;M++)x[M]=A>0?b.i(M+w)>>>A|b.i(M+w+1)<<32-A:b.i(M+w);return new c(x,b.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,vA=a,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,us=c}).apply(typeof U0<"u"?U0:typeof self<"u"?self:typeof window<"u"?window:{});var nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _A,Lu,EA,pf,Mg,TA,bA,SA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof nf=="object"&&nf];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=t(this);function s(h,y){if(y)e:{var T=a;h=h.split(".");for(var D=0;D<h.length-1;D++){var X=h[D];if(!(X in T))break e;T=T[X]}h=h[h.length-1],D=T[h],y=y(D),y!=D&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(y){var T=[],D;for(D in y)Object.prototype.hasOwnProperty.call(y,D)&&T.push([D,y[D]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,T){return h.call.apply(h.bind,arguments)}function g(h,y,T){return g=p,g.apply(null,arguments)}function v(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function E(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(D,X,ne){for(var ye=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)ye[Qe-2]=arguments[Qe];return y.prototype[X].apply(D,ye)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const y=h.length;if(y>0){const T=Array(y);for(let D=0;D<y;D++)T[D]=h[D];return T}return[]}function P(h,y){for(let D=1;D<arguments.length;D++){const X=arguments[D];var T=typeof X;if(T=T!="object"?T:X?Array.isArray(X)?"array":T:"null",T=="array"||T=="object"&&typeof X.length=="number"){T=h.length||0;const ne=X.length||0;h.length=T+ne;for(let ye=0;ye<ne;ye++)h[T+ye]=X[ye]}else h.push(X)}}class B{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function V(h){c.setTimeout(()=>{throw h},0)}function Y(){var h=b;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class F{constructor(){this.h=this.g=null}add(y,T){const D=z.get();D.set(y,T),this.h?this.h.next=D:this.g=D,this.h=D}}var z=new B(()=>new K,h=>h.reset());class K{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let te,G=!1,b=new F,A=()=>{const h=Promise.resolve(void 0);te=()=>{h.then(w)}};function w(){for(var h;h=Y();){try{h.h.call(h.g)}catch(T){V(T)}var y=z;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}G=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function O(h){return/^[\s\xa0]*$/.test(h)}function Pe(h,y){x.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Pe,x),Pe.prototype.init=function(h,y){const T=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Be="closure_listenable_"+(Math.random()*1e6|0),Q=0;function fe(h,y,T,D,X){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!D,this.ha=X,this.key=++Q,this.da=this.fa=!1}function me(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Oe(h,y,T){for(const D in h)y.call(T,h[D],D,h)}function Me(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function j(h){const y={};for(const T in h)y[T]=h[T];return y}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(h,y){let T,D;for(let X=1;X<arguments.length;X++){D=arguments[X];for(T in D)h[T]=D[T];for(let ne=0;ne<ie.length;ne++)T=ie[ne],Object.prototype.hasOwnProperty.call(D,T)&&(h[T]=D[T])}}function ve(h){this.src=h,this.g={},this.h=0}ve.prototype.add=function(h,y,T,D,X){const ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);const ye=Ve(h,y,D,X);return ye>-1?(y=h[ye],T||(y.fa=!1)):(y=new fe(y,this.src,ne,!!D,X),y.fa=T,h.push(y)),y};function be(h,y){const T=y.type;if(T in h.g){var D=h.g[T],X=Array.prototype.indexOf.call(D,y,void 0),ne;(ne=X>=0)&&Array.prototype.splice.call(D,X,1),ne&&(me(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Ve(h,y,T,D){for(let X=0;X<h.length;++X){const ne=h[X];if(!ne.da&&ne.listener==y&&ne.capture==!!T&&ne.ha==D)return X}return-1}var We="closure_lm_"+(Math.random()*1e6|0),yt={};function At(h,y,T,D,X){if(Array.isArray(y)){for(let ne=0;ne<y.length;ne++)At(h,y[ne],T,D,X);return null}return T=tt(T),h&&h[Be]?h.J(y,T,d(D)?!!D.capture:!1,X):Ir(h,y,T,!1,D,X)}function Ir(h,y,T,D,X,ne){if(!y)throw Error("Invalid event type");const ye=d(X)?!!X.capture:!!X;let Qe=Ne(h);if(Qe||(h[We]=Qe=new ve(h)),T=Qe.add(y,T,D,ye,ne),T.proxy)return T;if(D=Kr(),T.proxy=D,D.src=h,D.listener=T,h.addEventListener)M||(X=ye),X===void 0&&(X=!1),h.addEventListener(y.toString(),D,X);else if(h.attachEvent)h.attachEvent(Ee(y.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Kr(){function h(T){return y.call(h.src,h.listener,T)}const y=He;return h}function Mt(h,y,T,D,X){if(Array.isArray(y))for(var ne=0;ne<y.length;ne++)Mt(h,y[ne],T,D,X);else D=d(D)?!!D.capture:!!D,T=tt(T),h&&h[Be]?(h=h.i,ne=String(y).toString(),ne in h.g&&(y=h.g[ne],T=Ve(y,T,D,X),T>-1&&(me(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[ne],h.h--)))):h&&(h=Ne(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ve(y,T,D,X)),(T=h>-1?y[h]:null)&&ue(T))}function ue(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Be])be(y.i,h);else{var T=h.type,D=h.proxy;y.removeEventListener?y.removeEventListener(T,D,h.capture):y.detachEvent?y.detachEvent(Ee(T),D):y.addListener&&y.removeListener&&y.removeListener(D),(T=Ne(y))?(be(T,h),T.h==0&&(T.src=null,y[We]=null)):me(h)}}}function Ee(h){return h in yt?yt[h]:yt[h]="on"+h}function He(h,y){if(h.da)h=!0;else{y=new Pe(y,this);const T=h.listener,D=h.ha||h.src;h.fa&&ue(h),h=T.call(D,y)}return h}function Ne(h){return h=h[We],h instanceof ve?h:null}var Ie="__closure_events_fn_"+(Math.random()*1e9>>>0);function tt(h){return typeof h=="function"?h:(h[Ie]||(h[Ie]=function(y){return h.handleEvent(y)}),h[Ie])}function nt(){N.call(this),this.i=new ve(this),this.M=this,this.G=null}E(nt,N),nt.prototype[Be]=!0,nt.prototype.removeEventListener=function(h,y,T,D){Mt(this,h,y,T,D)};function Ge(h,y){var T,D=h.G;if(D)for(T=[];D;D=D.G)T.push(D);if(h=h.M,D=y.type||y,typeof y=="string")y=new x(y,h);else if(y instanceof x)y.target=y.target||h;else{var X=y;y=new x(D,h),de(y,X)}X=!0;let ne,ye;if(T)for(ye=T.length-1;ye>=0;ye--)ne=y.g=T[ye],X=at(ne,D,!0,y)&&X;if(ne=y.g=h,X=at(ne,D,!0,y)&&X,X=at(ne,D,!1,y)&&X,T)for(ye=0;ye<T.length;ye++)ne=y.g=T[ye],X=at(ne,D,!1,y)&&X}nt.prototype.N=function(){if(nt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let D=0;D<T.length;D++)me(T[D]);delete h.g[y],h.h--}}this.G=null},nt.prototype.J=function(h,y,T,D){return this.i.add(String(h),y,!1,T,D)},nt.prototype.K=function(h,y,T,D){return this.i.add(String(h),y,!0,T,D)};function at(h,y,T,D){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let X=!0;for(let ne=0;ne<y.length;++ne){const ye=y[ne];if(ye&&!ye.da&&ye.capture==T){const Qe=ye.listener,nn=ye.ha||ye.src;ye.fa&&be(h.i,ye),X=Qe.call(nn,D)!==!1&&X}}return X&&!D.defaultPrevented}function qt(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Mn(h){h.g=qt(()=>{h.g=null,h.i&&(h.i=!1,Mn(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Qt extends N{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Mn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function or(h){N.call(this),this.h=h,this.g={}}E(or,N);var ya=[];function ki(h){Oe(h.g,function(y,T){this.g.hasOwnProperty(T)&&ue(y)},h),h.g={}}or.prototype.N=function(){or.Z.N.call(this),ki(this)},or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=c.JSON.stringify,lr=c.JSON.parse,Ts=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function mo(){}function va(){}var ur={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vt(){x.call(this,"d")}E(Vt,x);function Fn(){x.call(this,"c")}E(Fn,x);var Gt={},bs=null;function _a(){return bs=bs||new nt}Gt.Ia="serverreachability";function Ss(h){x.call(this,Gt.Ia,h)}E(Ss,x);function Hn(h){const y=_a();Ge(y,new Ss(y))}Gt.STAT_EVENT="statevent";function ci(h,y){x.call(this,Gt.STAT_EVENT,h),this.stat=y}E(ci,x);function $t(h){const y=_a();Ge(y,new ci(y,h))}Gt.Ja="timingevent";function Dr(h,y){x.call(this,Gt.Ja,h),this.size=y}E(Dr,x);function cr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function hr(){this.g=!0}hr.prototype.ua=function(){this.g=!1};function po(h,y,T,D,X,ne){h.info(function(){if(h.g)if(ne){var ye="",Qe=ne.split("&");for(let Tt=0;Tt<Qe.length;Tt++){var nn=Qe[Tt].split("=");if(nn.length>1){const Kt=nn[0];nn=nn[1];const Or=Kt.split("_");ye=Or.length>=2&&Or[1]=="type"?ye+(Kt+"="+nn+"&"):ye+(Kt+"=redacted&")}}}else ye=null;else ye=ne;return"XMLHTTP REQ ("+D+") [attempt "+X+"]: "+y+`
`+T+`
`+ye})}function Li(h,y,T,D,X,ne,ye){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+X+"]: "+y+`
`+T+`
`+ne+" "+ye})}function qn(h,y,T,D){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ll(h,T)+(D?" "+D:"")})}function hi(h,y){h.info(function(){return"TIMEOUT: "+y})}hr.prototype.info=function(){};function Ll(h,y){if(!h.g)return y;if(!y)return null;try{const ne=JSON.parse(y);if(ne){for(h=0;h<ne.length;h++)if(Array.isArray(ne[h])){var T=ne[h];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var X=D[0];if(X!="noop"&&X!="stop"&&X!="close")for(let ye=1;ye<D.length;ye++)D[ye]=""}}}}return En(ne)}catch{return y}}var Ui={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},k={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},q;function Z(){}E(Z,mo),Z.prototype.g=function(){return new XMLHttpRequest},q=new Z;function he(h){return encodeURIComponent(String(h))}function pe(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Se(h,y,T,D){this.j=h,this.i=y,this.l=T,this.S=D||1,this.V=new or(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}var ge={},_e={};function we(h,y,T){h.M=1,h.A=As(It(y)),h.u=T,h.R=!0,je(h,null)}function je(h,y){h.F=Date.now(),Ct(h),h.B=It(h.A);var T=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),yo(T.i,"t",D),h.C=0,T=h.j.L,h.h=new Re,h.g=$c(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Qt(g(h.Y,h,h.g),h.P)),y=h.V,T=h.g,D=h.ba;var X="readystatechange";Array.isArray(X)||(X&&(ya[0]=X.toString()),X=ya);for(let ne=0;ne<X.length;ne++){const ye=At(T,X[ne],D||y.handleEvent,!1,y.h||y);if(!ye)break;y.g[ye.key]=ye}y=h.J?j(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Hn(),po(h.i,h.v,h.B,h.l,h.S,h.u)}Se.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xr(h)==3?y.j():this.Y(h)},Se.prototype.Y=function(h){try{if(h==this.g)e:{const Qe=Xr(this.g),nn=this.g.ya(),Tt=this.g.ca();if(!(Qe<3)&&(Qe!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||Qe!=4||nn==7||(nn==8||Tt<=0?Hn(3):Hn(2)),kt(this);var y=this.g.ca();this.X=y;var T=xe(this);if(this.o=y==200,Li(this.i,this.v,this.B,this.l,this.S,Qe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var D,X=this.g;if((D=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(D)){var ne=D;break t}}ne=null}if(h=ne)qn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tn(this,h);else{this.o=!1,this.m=3,$t(12),Lt(this),Je(this);break e}}if(this.R){h=!0;let Kt;for(;!this.K&&this.C<T.length;)if(Kt=rt(this,T),Kt==_e){Qe==4&&(this.m=4,$t(14),h=!1),qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==ge){this.m=4,$t(15),qn(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else qn(this.i,this.l,Kt,null),Tn(this,Kt);if(qe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||T.length!=0||this.h.h||(this.m=1,$t(16),h=!1),this.o=this.o&&h,!h)qn(this.i,this.l,T,"[Invalid Chunked Response]"),Lt(this),Je(this);else if(T.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),$l(ye),ye.P=!0,$t(11))}}else qn(this.i,this.l,T,null),Tn(this,T);Qe==4&&Lt(this),this.o&&!this.K&&(Qe==4?Fc(this.j,this):(this.o=!1,Ct(this)))}else zi(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),Lt(this),Je(this)}}}catch{}finally{}};function xe(h){if(!qe(h))return h.g.la();const y=An(h.g);if(y==="")return"";let T="";const D=y.length,X=Xr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Lt(h),Je(h),"";h.h.i=new c.TextDecoder}for(let ne=0;ne<D;ne++)h.h.h=!0,T+=h.h.i.decode(y[ne],{stream:!(X&&ne==D-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function qe(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function rt(h,y){var T=h.C,D=y.indexOf(`
`,T);return D==-1?_e:(T=Number(y.substring(T,D)),isNaN(T)?ge:(D+=1,D+T>y.length?_e:(y=y.slice(D,D+T),h.C=D+T,y)))}Se.prototype.cancel=function(){this.K=!0,Lt(this)};function Ct(h){h.T=Date.now()+h.H,zt(h,h.H)}function zt(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=cr(g(h.aa,h),y)}function kt(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Se.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(hi(this.i,this.B),this.M!=2&&(Hn(),$t(17)),Lt(this),this.m=2,Je(this)):zt(this,this.T-h)};function Je(h){h.j.I==0||h.K||Fc(h.j,h)}function Lt(h){kt(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,ki(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Tn(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||Pn(T.h,h))){if(!h.L&&Pn(T.h,h)&&T.I==3){try{var D=T.Ba.g.parse(y)}catch{D=null}if(Array.isArray(D)&&D.length==3){var X=D;if(X[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)bo(T),Ca(T);else break e;xs(T),$t(18)}}else T.xa=X[1],0<T.xa-T.K&&X[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=cr(g(T.Va,T),6e3));Wn(T.h)<=1&&T.ta&&(T.ta=void 0)}else _i(T,11)}else if((h.L||T.g==h)&&bo(T),!O(y))for(X=T.Ba.g.parse(y),y=0;y<X.length;y++){let Tt=X[y];const Kt=Tt[0];if(!(Kt<=T.K))if(T.K=Kt,Tt=Tt[1],T.I==2)if(Tt[0]=="c"){T.M=Tt[1],T.ba=Tt[2];const Or=Tt[3];Or!=null&&(T.ka=Or,T.j.info("VER="+T.ka));const Ei=Tt[4];Ei!=null&&(T.za=Ei,T.j.info("SVER="+T.za));const Wr=Tt[5];Wr!=null&&typeof Wr=="number"&&Wr>0&&(D=1.5*Wr,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const Jr=h.g;if(Jr){const Os=Jr.g?Jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Os){var ne=D.h;ne.g||Os.indexOf("spdy")==-1&&Os.indexOf("quic")==-1&&Os.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(fr(ne,ne.h),ne.h=null))}if(D.G){const So=Jr.g?Jr.g.getResponseHeader("X-HTTP-Session-Id"):null;So&&(D.wa=So,Et(D.J,D.G,So))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var ye=h;if(D.na=Gc(D,D.L?D.ba:null,D.W),ye.L){fi(D.h,ye);var Qe=ye,nn=D.O;nn&&(Qe.H=nn),Qe.D&&(kt(Qe),Ct(Qe)),D.g=ye}else zc(D);T.i.length>0&&vi(T)}else Tt[0]!="stop"&&Tt[0]!="close"||_i(T,7);else T.I==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?_i(T,7):ql(T):Tt[0]!="noop"&&T.l&&T.l.qa(Tt),T.A=0)}}Hn(4)}catch{}}var Ut=class{constructor(h,y){this.g=h,this.map=y}};function Xn(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Wn(h){return h.h?1:h.g?h.g.size:0}function Pn(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function fr(h,y){h.g?h.g.add(y):h.h=y}function fi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Xn.prototype.cancel=function(){if(this.i=di(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function di(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return I(h.i)}var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xt(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const D=h[T].indexOf("=");let X,ne=null;D>=0?(X=h[T].substring(0,D),ne=h[T].substring(D+1)):X=h[T],y(X,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function ln(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ln?(this.l=h.l,Ze(this,h.j),this.o=h.o,this.g=h.g,dr(this,h.u),this.h=h.h,Ea(this,Uc(h.i)),this.m=h.m):h&&(y=String(h).match(st))?(this.l=!1,Ze(this,y[1]||"",!0),this.o=mi(y[2]||""),this.g=mi(y[3]||"",!0),dr(this,y[4]),this.h=mi(y[5]||"",!0),Ea(this,y[6]||"",!0),this.m=mi(y[7]||"")):(this.l=!1,this.i=new ba(null,this.l))}ln.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ws(y,go,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ws(y,go,!0),"@"),h.push(he(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(ws(T,T.charAt(0)=="/"?Ul:Pc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",ws(T,kc)),h.join("")},ln.prototype.resolve=function(h){const y=It(this);let T=!!h.j;T?Ze(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var D=h.h;if(T)dr(y,h.u);else if(T=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var X=y.h.lastIndexOf("/");X!=-1&&(D=y.h.slice(0,X+1)+D)}if(X=D,X==".."||X==".")D="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){D=X.lastIndexOf("/",0)==0,X=X.split("/");const ne=[];for(let ye=0;ye<X.length;){const Qe=X[ye++];Qe=="."?D&&ye==X.length&&ne.push(""):Qe==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),D&&ye==X.length&&ne.push("")):(ne.push(Qe),D=!0)}D=ne.join("/")}else D=X}return T?y.h=D:T=h.i.toString()!=="",T?Ea(y,Uc(h.i)):T=!!h.m,T&&(y.m=h.m),y};function It(h){return new ln(h)}function Ze(h,y,T){h.j=T?mi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function dr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ea(h,y,T){y instanceof ba?(h.i=y,vo(h.i,h.l)):(T||(y=ws(y,Ta)),h.i=new ba(y,h.l))}function Et(h,y,T){h.i.set(y,T)}function As(h){return Et(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function mi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ws(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,Jn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Jn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var go=/[#\/\?@]/g,Pc=/[#\?:]/g,Ul=/[#\?]/g,Ta=/[#\?@]/g,kc=/#/g;function ba(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Zn(h){h.g||(h.g=new Map,h.h=0,h.i&&Xt(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=ba.prototype,n.add=function(h,y){Zn(this),this.i=null,h=Sa(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function Lc(h,y){Zn(h),y=Sa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function jl(h,y){return Zn(h),y=Sa(h,y),h.g.has(y)}n.forEach=function(h,y){Zn(this),this.g.forEach(function(T,D){T.forEach(function(X){h.call(y,X,D,this)},this)},this)};function zl(h,y){Zn(h);let T=[];if(typeof y=="string")jl(h,y)&&(T=T.concat(h.g.get(Sa(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}n.set=function(h,y){return Zn(this),this.i=null,h=Sa(this,h),jl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=zl(this,h),h.length>0?String(h[0]):y):y};function yo(h,y,T){Lc(h,y),T.length>0&&(h.i=null,h.g.set(Sa(h,y),I(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let D=0;D<y.length;D++){var T=y[D];const X=he(T);T=zl(this,T);for(let ne=0;ne<T.length;ne++){let ye=X;T[ne]!==""&&(ye+="="+he(T[ne])),h.push(ye)}}return this.i=h.join("&")};function Uc(h){const y=new ba;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Sa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function vo(h,y){y&&!h.j&&(Zn(h),h.i=null,h.g.forEach(function(T,D){const X=D.toLowerCase();D!=X&&(Lc(this,D),yo(this,X,T))},h)),h.j=y}function Yr(h,y){const T=new hr;if(c.Image){const D=new Image;D.onload=v(Nr,T,"TestLoadImage: loaded",!0,y,D),D.onerror=v(Nr,T,"TestLoadImage: error",!1,y,D),D.onabort=v(Nr,T,"TestLoadImage: abort",!1,y,D),D.ontimeout=v(Nr,T,"TestLoadImage: timeout",!1,y,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else y(!1)}function Bl(h,y){const T=new hr,D=new AbortController,X=setTimeout(()=>{D.abort(),Nr(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:D.signal}).then(ne=>{clearTimeout(X),ne.ok?Nr(T,"TestPingServer: ok",!0,y):Nr(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(X),Nr(T,"TestPingServer: error",!1,y)})}function Nr(h,y,T,D,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),D(T)}catch{}}function Aa(){this.g=new Ts}function pi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(pi,mo),pi.prototype.g=function(){return new Rs(this.i,this.h)};function Rs(h,y){nt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Rs,nt),n=Rs.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Qr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wa(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Qr(this)),this.g&&(this.readyState=3,Qr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_o(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function _o(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?wa(this):Qr(this),this.readyState==3&&_o(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,wa(this))},n.Na=function(h){this.g&&(this.response=h,wa(this))},n.ga=function(){this.g&&wa(this)};function wa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Qr(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Qr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function xr(h){let y="";return Oe(h,function(T,D){y+=D,y+=":",y+=T,y+=`\r
`}),y}function Cs(h,y,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=xr(T),typeof h=="string"?T!=null&&he(T):Et(h,y,T))}function Dt(h){nt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Dt,nt);var gi=/^https?$/i,Fl=["POST","PUT"];n=Dt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():q.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ne){Is(this,ne);return}if(h=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var X in D)T.set(X,D[X]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ne of D.keys())T.set(ne,D.get(ne));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Fl,y,void 0)>=0)||D||X||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ye]of T)this.g.setRequestHeader(ne,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ne){Is(this,ne)}};function Is(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Hl(h),ji(h)}function Hl(h){h.A||(h.A=!0,Ge(h,"complete"),Ge(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ge(this,"complete"),Ge(this,"abort"),ji(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),Dt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ds(this):this.Xa())},n.Xa=function(){Ds(this)};function Ds(h){if(h.h&&typeof l<"u"){if(h.v&&Xr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ge(h,"readystatechange"),Xr(h)==4){h.h=!1;try{const ne=h.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var D;if(D=ne===0){let ye=String(h.D).match(st)[1]||null;!ye&&c.self&&c.self.location&&(ye=c.self.location.protocol.slice(0,-1)),D=!gi.test(ye?ye.toLowerCase():"")}T=D}if(T)Ge(h,"complete"),Ge(h,"success");else{h.o=6;try{var X=Xr(h)>2?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.ca()+"]",Hl(h)}}finally{ji(h)}}}}function ji(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||Ge(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Xr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Xr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),lr(y)}};function An(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function zi(h){const y={};h=(h.g&&Xr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(O(h[D]))continue;var T=pe(h[D]);const X=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ne=y[X]||[];y[X]=ne,ne.push(T)}Me(y,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Ra(h){this.za=0,this.i=[],this.j=new hr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yi("baseRetryDelayMs",5e3,h),this.Za=yi("retryDelaySeedMs",1e4,h),this.Ta=yi("forwardChannelMaxRetries",2,h),this.va=yi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Xn(h&&h.concurrentRequestLimit),this.Ba=new Aa,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ra.prototype,n.ka=8,n.I=1,n.connect=function(h,y,T,D){$t(0),this.W=h,this.H=y||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=Gc(this,null,this.W),vi(this)};function ql(h){if(Eo(h),h.I==3){var y=h.V++,T=It(h.J);if(Et(T,"SID",h.M),Et(T,"RID",y),Et(T,"TYPE","terminate"),Ns(h,T),y=new Se(h,h.j,y),y.M=2,y.A=As(It(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=$c(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ct(y)}qc(h)}function Ca(h){h.g&&($l(h),h.g.cancel(),h.g=null)}function Eo(h){Ca(h),h.v&&(c.clearTimeout(h.v),h.v=null),bo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function vi(h){if(!Vn(h.h)&&!h.m){h.m=!0;var y=h.Ea;te||A(),G||(te(),G=!0),b.add(y,h),h.D=0}}function To(h,y){return Wn(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=cr(g(h.Ea,h,y),Hc(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const X=new Se(this,this.j,h);let ne=this.o;if(this.U&&(ne?(ne=j(ne),de(ne,this.U)):ne=this.U),this.u!==null||this.R||(X.J=ne,ne=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(y+=D,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=jc(this,X,y),T=It(this.J),Et(T,"RID",h),Et(T,"CVER",22),this.G&&Et(T,"X-HTTP-Session-Id",this.G),Ns(this,T),ne&&(this.R?y="headers="+he(xr(ne))+"&"+y:this.u&&Cs(T,this.u,ne)),fr(this.h,X),this.Ra&&Et(T,"TYPE","init"),this.S?(Et(T,"$req",y),Et(T,"SID","null"),X.U=!0,we(X,T,null)):we(X,T,y),this.I=2}}else this.I==3&&(h?Gl(this,h):this.i.length==0||Vn(this.h)||Gl(this))};function Gl(h,y){var T;y?T=y.l:T=h.V++;const D=It(h.J);Et(D,"SID",h.M),Et(D,"RID",T),Et(D,"AID",h.K),Ns(h,D),h.u&&h.o&&Cs(D,h.u,h.o),T=new Se(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=jc(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),fr(h.h,T),we(T,D,y)}function Ns(h,y){h.H&&Oe(h.H,function(T,D){Et(y,D,T)}),h.l&&Oe({},function(T,D){Et(y,D,T)})}function jc(h,y,T){T=Math.min(h.i.length,T);const D=h.l?g(h.l.Ka,h.l,h):null;e:{var X=h.i;let Qe=-1;for(;;){const nn=["count="+T];Qe==-1?T>0?(Qe=X[0].g,nn.push("ofs="+Qe)):Qe=0:nn.push("ofs="+Qe);let Tt=!0;for(let Kt=0;Kt<T;Kt++){var ne=X[Kt].g;const Or=X[Kt].map;if(ne-=Qe,ne<0)Qe=Math.max(0,X[Kt].g-100),Tt=!1;else try{ne="req"+ne+"_"||"";try{var ye=Or instanceof Map?Or:Object.entries(Or);for(const[Ei,Wr]of ye){let Jr=Wr;d(Wr)&&(Jr=En(Wr)),nn.push(ne+Ei+"="+encodeURIComponent(Jr))}}catch(Ei){throw nn.push(ne+"type="+encodeURIComponent("_badmap")),Ei}}catch{D&&D(Or)}}if(Tt){ye=nn.join("&");break e}}ye=void 0}return h=h.i.splice(0,T),y.G=h,ye}function zc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;te||A(),G||(te(),G=!0),b.add(y,h),h.A=0}}function xs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=cr(g(h.Da,h),Hc(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Bc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=cr(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),Ca(this),Bc(this))};function $l(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Bc(h){h.g=new Se(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=It(h.na);Et(y,"RID","rpc"),Et(y,"SID",h.M),Et(y,"AID",h.K),Et(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Et(y,"TO",h.ia),Et(y,"TYPE","xmlhttp"),Ns(h,y),h.u&&h.o&&Cs(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=As(It(y)),T.u=null,T.R=!0,je(T,h)}n.Va=function(){this.C!=null&&(this.C=null,Ca(this),xs(this),$t(19))};function bo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Fc(h,y){var T=null;if(h.g==y){bo(h),$l(h),h.g=null;var D=2}else if(Pn(h.h,y))T=y.G,fi(h.h,y),D=1;else return;if(h.I!=0){if(y.o)if(D==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var X=h.D;D=_a(),Ge(D,new Dr(D,T)),vi(h)}else zc(h);else if(X=y.m,X==3||X==0&&y.X>0||!(D==1&&To(h,y)||D==2&&xs(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),X){case 1:_i(h,5);break;case 4:_i(h,10);break;case 3:_i(h,6);break;default:_i(h,2)}}}function Hc(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function _i(h,y){if(h.j.info("Error code "+y),y==2){var T=g(h.bb,h),D=h.Ua;const X=!D;D=new ln(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ze(D,"https"),As(D),X?Yr(D.toString(),T):Bl(D.toString(),T)}else $t(2);h.I=0,h.l&&h.l.pa(y),qc(h),Eo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function qc(h){if(h.I=0,h.ja=[],h.l){const y=di(h.h);(y.length!=0||h.i.length!=0)&&(P(h.ja,y),P(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Gc(h,y,T){var D=T instanceof ln?It(T):new ln(T);if(D.g!="")y&&(D.g=y+"."+D.g),dr(D,D.u);else{var X=c.location;D=X.protocol,y=y?y+"."+X.hostname:X.hostname,X=+X.port;const ne=new ln(null);D&&Ze(ne,D),y&&(ne.g=y),X&&dr(ne,X),T&&(ne.h=T),D=ne}return T=h.G,y=h.wa,T&&y&&Et(D,T,y),Et(D,"VER",h.ka),Ns(h,D),D}function $c(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Dt(new pi({ab:T})):new Dt(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kc(){}n=Kc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ia(){}Ia.prototype.g=function(h,y){return new Gn(h,y)};function Gn(h,y){nt.call(this),this.g=new Ra(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!O(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Bi(this)}E(Gn,nt),Gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){ql(this.g)},Gn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=En(h),h=T);y.i.push(new Ut(y.Ya++,h)),y.I==3&&vi(y)},Gn.prototype.N=function(){this.g.l=null,delete this.j,ql(this.g),delete this.g,Gn.Z.N.call(this)};function Yc(h){Vt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Yc,Vt);function Qc(){Fn.call(this),this.status=1}E(Qc,Fn);function Bi(h){this.g=h}E(Bi,Kc),Bi.prototype.ra=function(){Ge(this.g,"a")},Bi.prototype.qa=function(h){Ge(this.g,new Yc(h))},Bi.prototype.pa=function(h){Ge(this.g,new Qc)},Bi.prototype.oa=function(){Ge(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,SA=function(){return new Ia},bA=function(){return _a()},TA=Gt,Mg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,pf=Ui,k.COMPLETE="complete",EA=k,va.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",nt.prototype.listen=nt.prototype.J,Lu=va,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,_A=Dt}).apply(typeof nf<"u"?nf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl="12.8.0";function w2(n){Nl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new vy("@firebase/firestore");function tl(){return io.logLevel}function Ae(n,...e){if(io.logLevel<=ht.DEBUG){const t=e.map(Ty);io.debug(`Firestore (${Nl}): ${n}`,...t)}}function ha(n,...e){if(io.logLevel<=ht.ERROR){const t=e.map(Ty);io.error(`Firestore (${Nl}): ${n}`,...t)}}function gl(n,...e){if(io.logLevel<=ht.WARN){const t=e.map(Ty);io.warn(`Firestore (${Nl}): ${n}`,...t)}}function Ty(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,AA(n,a,t)}function AA(n,e,t){let a=`FIRESTORE (${Nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw ha(a),new Error(a)}function St(n,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,n||AA(e,s,a)}function Ye(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends ga{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jn.UNAUTHENTICATED)))}shutdown(){}}class C2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class I2{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){St(this.o===void 0,42304);let a=this.i;const s=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let l=new la;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new la,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await s(this.currentUser)}))},d=p=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new la)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(St(typeof a.accessToken=="string",31837,{l:a}),new wA(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new jn(e)}}class D2{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class N2{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new D2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class j0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class x2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ni(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){St(this.o===void 0,3512);const a=l=>{l.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ae("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const s=l=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new j0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(St(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new j0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=O2(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function ft(n,e){return n<e?-1:n>e?1:0}function Vg(n,e){const t=Math.min(n.length,e.length);for(let a=0;a<t;a++){const s=n.charAt(a),l=e.charAt(a);if(s!==l)return cg(s)===cg(l)?ft(s,l):cg(s)?1:-1}return ft(n.length,e.length)}const M2=55296,V2=57343;function cg(n){const e=n.charCodeAt(0);return e>=M2&&e<=V2}function yl(n,e,t){return n.length===e.length&&n.every(((a,s)=>t(a,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="__name__";class wi{constructor(e,t,a){t===void 0?t=0:t>e.length&&ze(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&ze(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return wi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wi?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=wi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return ft(e.length,t.length)}static compareSegments(e,t){const a=wi.isNumericId(e),s=wi.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?wi.extractNumericId(e).compare(wi.extractNumericId(t)):Vg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class jt extends wi{construct(e,t,a){return new jt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Te(oe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((s=>s.length>0)))}return new jt(t)}static emptyPath(){return new jt([])}}const P2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xn extends wi{construct(e,t,a){return new xn(e,t,a)}static isValidIdentifier(e){return P2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===z0}static keyField(){return new xn([z0])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new Te(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Te(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Te(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(a+=d,s++):(l(),s++)}if(l(),c)throw new Te(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xn(t)}static emptyPath(){return new xn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(jt.fromString(e))}static fromName(e){return new Le(jt.fromString(e).popFirst(5))}static empty(){return new Le(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new jt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(n,e,t){if(!t)throw new Te(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function k2(n,e,t,a){if(e===!0&&a===!0)throw new Te(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function B0(n){if(!Le.isDocumentKey(n))throw new Te(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function F0(n){if(Le.isDocumentKey(n))throw new Te(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ed(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ze(12329,{type:typeof n})}function Ar(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ed(n);throw new Te(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(n,e){const t={typeString:n};return e&&(t.value=e),t}function _c(n,e){if(!CA(n))throw new Te(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const s=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){t=`JSON missing required field: '${a}'`;break}const c=n[a];if(s&&typeof c!==s){t=`JSON field '${a}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new Te(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=-62135596800,q0=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*q0);return new Ht(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<H0)throw new Te(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q0}_compareTo(e){return this.seconds===e.seconds?ft(this.nanoseconds,e.nanoseconds):ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_c(e,Ht._jsonSchema))return new Ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-H0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ht._jsonSchemaVersion="firestore/timestamp/1.0",Ht._jsonSchema={type:pn("string",Ht._jsonSchemaVersion),seconds:pn("number"),nanoseconds:pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new Ht(0,0))}static max(){return new $e(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=-1;function L2(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,s=$e.fromTimestamp(a===1e9?new Ht(t+1,0):new Ht(t,a));return new fs(s,Le.empty(),e)}function U2(n){return new fs(n.readTime,n.key,nc)}class fs{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new fs($e.min(),Le.empty(),nc)}static max(){return new fs($e.max(),Le.empty(),nc)}}function j2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(n.documentKey,e.documentKey),t!==0?t:ft(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==z2)throw n;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce(((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.reject(t)}static resolve(e){return new ce(((t,a)=>{t(e)}))}static reject(e){return new ce(((t,a)=>{a(e)}))}static waitFor(e){return new ce(((t,a)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(p=>a(p)))})),c=!0,l===s&&t()}))}static or(e){let t=ce.resolve(!1);for(const a of e)t=t.next((s=>s?ce.resolve(s):a()));return t}static forEach(e,t){const a=[];return e.forEach(((s,l)=>{a.push(t.call(this,s,l))})),this.waitFor(a)}static mapArray(e,t){return new ce(((a,s)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&a(c)}),(v=>s(v)))}}))}static doWhile(e,t){return new ce(((a,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):a()};l()}))}}function F2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ol(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Td.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=-1;function bd(n){return n==null}function zf(n){return n===0&&1/n==-1/0}function H2(n){return typeof n=="number"&&Number.isInteger(n)&&!zf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="";function q2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=G0(e)),e=G2(n.get(t),e);return G0(e)}function G2(n,e){let t=e;const a=n.length;for(let s=0;s<a;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case IA:t+="";break;default:t+=l}}return t}function G0(n){return n+IA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _s(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function DA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new Wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rf(this.root,e,this.comparator,!1)}getReverseIterator(){return new rf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rf(this.root,e,this.comparator,!0)}}class rf{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??Nn.RED,this.left=s??Nn.EMPTY,this.right=l??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new Nn(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Nn.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new K0(this.data.getIterator())}getIteratorFrom(e){return new K0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class K0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.fields=e,e.sort(xn.comparator)}static empty(){return new br([])}unionWith(e){let t=new yn(xn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new br(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yl(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new NA("Invalid base64 string: "+l):l}})(e);return new On(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new On(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}On.EMPTY_BYTE_STRING=new On("");const $2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(n){if(St(!!n,39018),typeof n=="string"){let e=0;const t=$2.exec(n);if(St(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:sn(n.seconds),nanos:sn(n.nanos)}}function sn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ms(n){return typeof n=="string"?On.fromBase64String(n):On.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="server_timestamp",OA="__type__",MA="__previous_value__",VA="__local_write_time__";function Ay(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[OA])==null?void 0:a.stringValue)===xA}function Sd(n){const e=n.mapValue.fields[MA];return Ay(e)?Sd(e):e}function rc(n){const e=ds(n.mapValue.fields[VA].timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,t,a,s,l,c,d,p,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=E}}const Bf="(default)";class ic{constructor(e,t){this.projectId=e,this.database=t||Bf}static empty(){return new ic("","")}get isDefaultDatabase(){return this.database===Bf}isEqual(e){return e instanceof ic&&e.projectId===this.projectId&&e.database===this.database}}function Y2(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Te(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ic(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="__type__",Q2="__max__",af={mapValue:{}},kA="__vector__",Ff="value";function ps(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ay(n)?4:W2(n)?9007199254740991:X2(n)?10:11:ze(28295,{value:n})}function Mi(n,e){if(n===e)return!0;const t=ps(n);if(t!==ps(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rc(n).isEqual(rc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=ds(s.timestampValue),d=ds(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return ms(s.bytesValue).isEqual(ms(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return sn(s.geoPointValue.latitude)===sn(l.geoPointValue.latitude)&&sn(s.geoPointValue.longitude)===sn(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return sn(s.integerValue)===sn(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=sn(s.doubleValue),d=sn(l.doubleValue);return c===d?zf(c)===zf(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return yl(n.arrayValue.values||[],e.arrayValue.values||[],Mi);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if($0(c)!==$0(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Mi(c[p],d[p])))return!1;return!0})(n,e);default:return ze(52216,{left:n})}}function ac(n,e){return(n.values||[]).find((t=>Mi(t,e)))!==void 0}function vl(n,e){if(n===e)return 0;const t=ps(n),a=ps(e);if(t!==a)return ft(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return ft(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=sn(l.integerValue||l.doubleValue),p=sn(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return Y0(n.timestampValue,e.timestampValue);case 4:return Y0(rc(n),rc(e));case 5:return Vg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=ms(l),p=ms(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=ft(d[g],p[g]);if(v!==0)return v}return ft(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=ft(sn(l.latitude),sn(c.latitude));return d!==0?d:ft(sn(l.longitude),sn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Q0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,I,P,B;const d=l.fields||{},p=c.fields||{},g=(S=d[Ff])==null?void 0:S.arrayValue,v=(I=p[Ff])==null?void 0:I.arrayValue,E=ft(((P=g==null?void 0:g.values)==null?void 0:P.length)||0,((B=v==null?void 0:v.values)==null?void 0:B.length)||0);return E!==0?E:Q0(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===af.mapValue&&c===af.mapValue)return 0;if(l===af.mapValue)return 1;if(c===af.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const S=Vg(p[E],v[E]);if(S!==0)return S;const I=vl(d[p[E]],g[v[E]]);if(I!==0)return I}return ft(p.length,v.length)})(n.mapValue,e.mapValue);default:throw ze(23264,{he:t})}}function Y0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ft(n,e);const t=ds(n),a=ds(e),s=ft(t.seconds,a.seconds);return s!==0?s:ft(t.nanos,a.nanos)}function Q0(n,e){const t=n.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=vl(t[s],a[s]);if(l)return l}return ft(t.length,a.length)}function _l(n){return Pg(n)}function Pg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const a=ds(t);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ms(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=Pg(l);return a+"]"})(n.arrayValue):"mapValue"in n?(function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of a)l?l=!1:s+=",",s+=`${c}:${Pg(t.fields[c])}`;return s+"}"})(n.mapValue):ze(61005,{value:n})}function gf(n){switch(ps(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sd(n);return e?16+gf(e):16;case 5:return 2*n.stringValue.length;case 6:return ms(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((s,l)=>s+gf(l)),0)})(n.arrayValue);case 10:case 11:return(function(a){let s=0;return _s(a.fields,((l,c)=>{s+=l.length+gf(c)})),s})(n.mapValue);default:throw ze(13486,{value:n})}}function X0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kg(n){return!!n&&"integerValue"in n}function wy(n){return!!n&&"arrayValue"in n}function W0(n){return!!n&&"nullValue"in n}function J0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yf(n){return!!n&&"mapValue"in n}function X2(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[PA])==null?void 0:a.stringValue)===kA}function Gu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return _s(n.mapValue.fields,((t,a)=>e.mapValue.fields[t]=Gu(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gu(n.arrayValue.values[t]);return e}return{...n}}function W2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Q2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!yf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gu(t)}setAll(e){let t=xn.emptyPath(),a={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,a,s),a={},s=[],t=d.popLast()}c?a[d.lastSegment()]=Gu(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());yf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];yf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){_s(t,((s,l)=>e[s]=l));for(const s of a)delete e[s]}clone(){return new sr(Gu(this.value))}}function LA(n){const e=[];return _s(n.fields,((t,a)=>{const s=new xn([t]);if(yf(a)){const l=LA(a.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,t,a,s,l,c,d){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new zn(e,0,$e.min(),$e.min(),$e.min(),sr.empty(),0)}static newFoundDocument(e,t,a,s){return new zn(e,1,t,$e.min(),a,s,0)}static newNoDocument(e,t){return new zn(e,2,t,$e.min(),$e.min(),sr.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,$e.min(),$e.min(),sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t){this.position=e,this.inclusive=t}}function Z0(n,e,t){let a=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?a=Le.comparator(Le.fromName(c.referenceValue),t.key):a=vl(c,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function eb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t="asc"){this.field=e,this.dir=t}}function J2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{}class mn extends UA{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new eO(e,t,a):t==="array-contains"?new rO(e,a):t==="in"?new iO(e,a):t==="not-in"?new aO(e,a):t==="array-contains-any"?new sO(e,a):new mn(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new tO(e,a):new nO(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(vl(t,this.value)):t!==null&&ps(this.value)===ps(t)&&this.matchesComparison(vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends UA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new oi(e,t)}matches(e){return jA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jA(n){return n.op==="and"}function zA(n){return Z2(n)&&jA(n)}function Z2(n){for(const e of n.filters)if(e instanceof oi)return!1;return!0}function Lg(n){if(n instanceof mn)return n.field.canonicalString()+n.op.toString()+_l(n.value);if(zA(n))return n.filters.map((e=>Lg(e))).join(",");{const e=n.filters.map((t=>Lg(t))).join(",");return`${n.op}(${e})`}}function BA(n,e){return n instanceof mn?(function(a,s){return s instanceof mn&&a.op===s.op&&a.field.isEqual(s.field)&&Mi(a.value,s.value)})(n,e):n instanceof oi?(function(a,s){return s instanceof oi&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce(((l,c,d)=>l&&BA(c,s.filters[d])),!0):!1})(n,e):void ze(19439)}function FA(n){return n instanceof mn?(function(t){return`${t.field.canonicalString()} ${t.op} ${_l(t.value)}`})(n):n instanceof oi?(function(t){return t.op.toString()+" {"+t.getFilters().map(FA).join(" ,")+"}"})(n):"Filter"}class eO extends mn{constructor(e,t,a){super(e,t,a),this.key=Le.fromName(a.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class tO extends mn{constructor(e,t){super(e,"in",t),this.keys=HA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class nO extends mn{constructor(e,t){super(e,"not-in",t),this.keys=HA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function HA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>Le.fromName(a.referenceValue)))}class rO extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wy(t)&&ac(t.arrayValue,this.value)}}class iO extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ac(this.value.arrayValue,t)}}class aO extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ac(this.value.arrayValue,t)}}class sO extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>ac(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,t=null,a=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function tb(n,e=null,t=[],a=[],s=null,l=null,c=null){return new oO(n,e,t,a,s,l,c)}function Ry(n){const e=Ye(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>Lg(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),bd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>_l(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>_l(a))).join(",")),e.Te=t}return e.Te}function Cy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!J2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eb(n.startAt,e.startAt)&&eb(n.endAt,e.endAt)}function Ug(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t=null,a=[],s=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function lO(n,e,t,a,s,l,c,d){return new Ec(n,e,t,a,s,l,c,d)}function Ad(n){return new Ec(n)}function nb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uO(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function qA(n){return n.collectionGroup!==null}function $u(n){const e=Ye(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new yn(xn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new qf(l,a))})),t.has(xn.keyField().canonicalString())||e.Ie.push(new qf(xn.keyField(),a))}return e.Ie}function Ii(n){const e=Ye(n);return e.Ee||(e.Ee=cO(e,$u(n))),e.Ee}function cO(n,e){if(n.limitType==="F")return tb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new qf(s.field,l)}));const t=n.endAt?new Hf(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new Hf(n.startAt.position,n.startAt.inclusive):null;return tb(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function jg(n,e){const t=n.filters.concat([e]);return new Ec(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zg(n,e,t){return new Ec(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wd(n,e){return Cy(Ii(n),Ii(e))&&n.limitType===e.limitType}function GA(n){return`${Ry(Ii(n))}|lt:${n.limitType}`}function nl(n){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((s=>FA(s))).join(", ")}]`),bd(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>_l(s))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>_l(s))).join(",")),`Target(${a})`})(Ii(n))}; limitType=${n.limitType})`}function Rd(n,e){return e.isFoundDocument()&&(function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):Le.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(n,e)&&(function(a,s){for(const l of $u(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(a,s){return!(a.startAt&&!(function(c,d,p){const g=Z0(c,d,p);return c.inclusive?g<=0:g<0})(a.startAt,$u(a),s)||a.endAt&&!(function(c,d,p){const g=Z0(c,d,p);return c.inclusive?g>=0:g>0})(a.endAt,$u(a),s))})(n,e)}function hO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $A(n){return(e,t)=>{let a=!1;for(const s of $u(n)){const l=fO(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function fO(n,e,t){const a=n.field.isKeyField()?Le.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?vl(p,g):ze(42886)})(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return ze(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,((t,a)=>{for(const[s,l]of a)e(s,l)}))}isEmpty(){return DA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=new Wt(Le.comparator);function fa(){return dO}const KA=new Wt(Le.comparator);function Uu(...n){let e=KA;for(const t of n)e=e.insert(t.key,t);return e}function YA(n){let e=KA;return n.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function Xs(){return Ku()}function QA(){return Ku()}function Ku(){return new uo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const mO=new Wt(Le.comparator),pO=new yn(Le.comparator);function dt(...n){let e=pO;for(const t of n)e=e.add(t);return e}const gO=new yn(ft);function yO(){return gO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zf(e)?"-0":e}}function XA(n){return{integerValue:""+n}}function vO(n,e){return H2(e)?XA(e):Iy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this._=void 0}}function _O(n,e,t){return n instanceof Gf?(function(s,l){const c={fields:{[OA]:{stringValue:xA},[VA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Ay(l)&&(l=Sd(l)),l&&(c.fields[MA]=l),{mapValue:c}})(t,e):n instanceof sc?JA(n,e):n instanceof oc?ZA(n,e):(function(s,l){const c=WA(s,l),d=rb(c)+rb(s.Ae);return kg(c)&&kg(s.Ae)?XA(d):Iy(s.serializer,d)})(n,e)}function EO(n,e,t){return n instanceof sc?JA(n,e):n instanceof oc?ZA(n,e):t}function WA(n,e){return n instanceof $f?(function(a){return kg(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class Gf extends Cd{}class sc extends Cd{constructor(e){super(),this.elements=e}}function JA(n,e){const t=ew(e);for(const a of n.elements)t.some((s=>Mi(s,a)))||t.push(a);return{arrayValue:{values:t}}}class oc extends Cd{constructor(e){super(),this.elements=e}}function ZA(n,e){let t=ew(e);for(const a of n.elements)t=t.filter((s=>!Mi(s,a)));return{arrayValue:{values:t}}}class $f extends Cd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function rb(n){return sn(n.integerValue||n.doubleValue)}function ew(n){return wy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function TO(n,e){return n.field.isEqual(e.field)&&(function(a,s){return a instanceof sc&&s instanceof sc||a instanceof oc&&s instanceof oc?yl(a.elements,s.elements,Mi):a instanceof $f&&s instanceof $f?Mi(a.Ae,s.Ae):a instanceof Gf&&s instanceof Gf})(n.transform,e.transform)}class bO{constructor(e,t){this.version=e,this.transformResults=t}}class wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Id{}function tw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Dy(n.key,wr.none()):new Tc(n.key,n.data,wr.none());{const t=n.data,a=sr.empty();let s=new yn(xn.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?a.delete(l):a.set(l,c),s=s.add(l)}return new Es(n.key,a,new br(s.toArray()),wr.none())}}function SO(n,e,t){n instanceof Tc?(function(s,l,c){const d=s.value.clone(),p=ab(s.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Es?(function(s,l,c){if(!vf(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=ab(s.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(nw(s)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Yu(n,e,t,a){return n instanceof Tc?(function(l,c,d,p){if(!vf(l.precondition,c))return d;const g=l.value.clone(),v=sb(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,a):n instanceof Es?(function(l,c,d,p){if(!vf(l.precondition,c))return d;const g=sb(l.fieldTransforms,p,c),v=c.data;return v.setAll(nw(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,a):(function(l,c,d){return vf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function AO(n,e){let t=null;for(const a of n.fieldTransforms){const s=e.data.field(a.field),l=WA(a.transform,s||null);l!=null&&(t===null&&(t=sr.empty()),t.set(a.field,l))}return t||null}function ib(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&yl(a,s,((l,c)=>TO(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tc extends Id{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Es extends Id{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function nw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}})),e}function ab(n,e,t){const a=new Map;St(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,d=e.data.field(l.field);a.set(l.field,EO(c,d,t[s]))}return a}function sb(n,e,t){const a=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);a.set(s.field,_O(l,c,e))}return a}class Dy extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wO extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&SO(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Yu(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Yu(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=QA();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const p=tw(c,d);p!==null&&a.set(s.key,p),c.isValidDocument()||c.convertToNoDocument($e.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),dt())}isEqual(e){return this.batchId===e.batchId&&yl(this.mutations,e.mutations,((t,a)=>ib(t,a)))&&yl(this.baseMutations,e.baseMutations,((t,a)=>ib(t,a)))}}class Ny{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){St(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let s=(function(){return mO})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,a[c].version);return new Ny(e,t,a,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,pt;function DO(n){switch(n){case oe.OK:return ze(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return ze(15467,{code:n})}}function rw(n){if(n===void 0)return ha("GRPC error has no .code"),oe.UNKNOWN;switch(n){case dn.OK:return oe.OK;case dn.CANCELLED:return oe.CANCELLED;case dn.UNKNOWN:return oe.UNKNOWN;case dn.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case dn.INTERNAL:return oe.INTERNAL;case dn.UNAVAILABLE:return oe.UNAVAILABLE;case dn.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case dn.NOT_FOUND:return oe.NOT_FOUND;case dn.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case dn.ABORTED:return oe.ABORTED;case dn.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case dn.DATA_LOSS:return oe.DATA_LOSS;default:return ze(39323,{code:n})}}(pt=dn||(dn={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=new us([4294967295,4294967295],0);function ob(n){const e=NO().encode(n),t=new vA;return t.update(e),new Uint8Array(t.digest())}function lb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new us([t,a],0),new us([s,l],0)]}class xy{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new ju(`Invalid padding: ${t}`);if(a<0)throw new ju(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new ju(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new ju(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=us.fromNumber(this.ge)}ye(e,t,a){let s=e.add(t.multiply(us.fromNumber(a)));return s.compare(xO)===1&&(s=new us([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ob(e),[a,s]=lb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);if(!this.we(c))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new xy(l,s,t);return a.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=ob(e),[a,s]=lb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,bc.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Dd($e.min(),s,new Wt(ft),fa(),dt())}}class bc{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new bc(a,t,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t,a,s){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=s}}class iw{constructor(e,t){this.targetId=e,this.Ce=t}}class aw{constructor(e,t,a=On.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class ub{constructor(){this.ve=0,this.Fe=cb(),this.Me=On.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),t=dt(),a=dt();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:ze(38017,{changeType:l})}})),new bc(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=cb()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class OO{constructor(e){this.Ge=e,this.ze=new Map,this.je=fa(),this.He=sf(),this.Je=sf(),this.Ze=new Wt(ft)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:ze(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,a=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(Ug(l))if(a===0){const c=new Le(l.path);this.et(t,c,zn.newNoDocument(c,$e.min()))}else St(a===1,20013,{expectedCount:a});else{const c=this._t(t);if(c!==a){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=ms(a).toUint8Array()}catch(p){if(p instanceof NA)return gl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new xy(c,s,l)}catch(p){return gl(p instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let s=0;return a.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Ug(d.target)){const p=new Le(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,zn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let a=dt();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(a=a.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new Dd(e,t,this.Ze,this.je,a);return this.je=fa(),this.He=sf(),this.Je=sf(),this.Ze=new Wt(ft),s}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new ub,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new yn(ft),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new yn(ft),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ub),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function sf(){return new Wt(Le.comparator)}function cb(){return new Wt(Le.comparator)}const MO={asc:"ASCENDING",desc:"DESCENDING"},VO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PO={and:"AND",or:"OR"};class kO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bg(n,e){return n.useProto3Json||bd(e)?e:{value:e}}function Kf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function LO(n,e){return Kf(n,e.toTimestamp())}function Di(n){return St(!!n,49232),$e.fromTimestamp((function(t){const a=ds(t);return new Ht(a.seconds,a.nanos)})(n))}function Oy(n,e){return Fg(n,e).canonicalString()}function Fg(n,e){const t=(function(s){return new jt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ow(n){const e=jt.fromString(n);return St(fw(e),10190,{key:e.toString()}),e}function Hg(n,e){return Oy(n.databaseId,e.path)}function hg(n,e){const t=ow(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le(uw(t))}function lw(n,e){return Oy(n.databaseId,e)}function UO(n){const e=ow(n);return e.length===4?jt.emptyPath():uw(e)}function qg(n){return new jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uw(n){return St(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function hb(n,e,t){return{name:Hg(n,e),fields:t.value.mapValue.fields}}function jO(n,e){let t;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ze(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(St(v===void 0||typeof v=="string",58123),On.fromBase64String(v||"")):(St(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),On.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?oe.UNKNOWN:rw(g.code);return new Te(v,g.message||"")})(c);t=new aw(a,s,l,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=hg(n,a.document.name),l=Di(a.document.updateTime),c=a.document.createTime?Di(a.document.createTime):$e.min(),d=new sr({mapValue:{fields:a.document.fields}}),p=zn.newFoundDocument(s,l,c,d),g=a.targetIds||[],v=a.removedTargetIds||[];t=new _f(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=hg(n,a.document),l=a.readTime?Di(a.readTime):$e.min(),c=zn.newNoDocument(s,l),d=a.removedTargetIds||[];t=new _f([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=hg(n,a.document),l=a.removedTargetIds||[];t=new _f([],l,s,null)}else{if(!("filter"in e))return ze(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,c=new IO(s,l),d=a.targetId;t=new iw(d,c)}}return t}function zO(n,e){let t;if(e instanceof Tc)t={update:hb(n,e.key,e.value)};else if(e instanceof Dy)t={delete:Hg(n,e.key)};else if(e instanceof Es)t={update:hb(n,e.key,e.data),updateMask:QO(e.fieldMask)};else{if(!(e instanceof wO))return ze(16599,{dt:e.type});t={verify:Hg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,c){const d=c.transform;if(d instanceof Gf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof sc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof oc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof $f)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw ze(20930,{transform:c.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:LO(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ze(27497)})(n,e.precondition)),t}function BO(n,e){return n&&n.length>0?(St(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?Di(s.updateTime):Di(l);return c.isEqual($e.min())&&(c=Di(l)),new bO(c,s.transformResults||[])})(t,e)))):[]}function FO(n,e){return{documents:[lw(n,e.path)]}}function HO(n,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=lw(n,s);const l=(function(g){if(g.length!==0)return hw(oi.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(S){return{field:rl(S.field),direction:$O(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Bg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:s}}function qO(n){let e=UO(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){St(a===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=cw(E);return S instanceof oi&&zA(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(P){return new qf(il(P.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,bd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,I=E.values||[];return new Hf(I,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,I=E.values||[];return new Hf(I,S)})(t.endAt)),lO(e,s,c,l,d,"F",p,g)}function GO(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=il(t.unaryFilter.field);return mn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=il(t.unaryFilter.field);return mn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=il(t.unaryFilter.field);return mn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=il(t.unaryFilter.field);return mn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}})(n):n.fieldFilter!==void 0?(function(t){return mn.create(il(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return oi.create(t.compositeFilter.filters.map((a=>cw(a))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ze(1026)}})(t.compositeFilter.op))})(n):ze(30097,{filter:n})}function $O(n){return MO[n]}function KO(n){return VO[n]}function YO(n){return PO[n]}function rl(n){return{fieldPath:n.canonicalString()}}function il(n){return xn.fromServerFormat(n.fieldPath)}function hw(n){return n instanceof mn?(function(t){if(t.op==="=="){if(J0(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NAN"}};if(W0(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(J0(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NAN"}};if(W0(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(t.field),op:KO(t.op),value:t.value}}})(n):n instanceof oi?(function(t){const a=t.getFilters().map((s=>hw(s)));return a.length===1?a[0]:{compositeFilter:{op:YO(t.op),filters:a}}})(n):ze(54877,{filter:n})}function QO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function fw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function dw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,a,s,l=$e.min(),c=$e.min(),d=On.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.yt=e}}function WO(n){const e=qO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.Sn=new ZO}addToCollectionParentIndex(e,t){return this.Sn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(fs.min())}updateCollectionGroup(e,t,a){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class ZO{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new yn(jt.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new yn(jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mw=41943040;class ar{static withCacheSize(e){return new ar(e,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar.DEFAULT_COLLECTION_PERCENTILE=10,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ar.DEFAULT=new ar(mw,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ar.DISABLED=new ar(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new El(0)}static ar(){return new El(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="LruGarbageCollector",eM=1048576;function mb([n,e],[t,a]){const s=ft(n,t);return s===0?ft(e,a):s}class tM{constructor(e){this.Pr=e,this.buffer=new yn(mb),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();mb(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nM{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ae(db,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ol(t)?Ae(db,"Ignoring IndexedDB error during garbage collection: ",t):await xl(t)}await this.Ar(3e5)}))}}class rM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return ce.resolve(Td.ce);const a=new tM(t);return this.Vr.forEachTarget(e,(s=>a.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>a.Er(s))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(fb)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fb):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,s,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(a=E,d=Date.now(),this.removeTargets(e,a,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(g=Date.now(),tl()<=ht.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function iM(n,e){return new rM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.changes=new uo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?ce.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(a=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(a!==null&&Yu(a.mutation,s,br.empty(),Ht.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,dt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=dt()){const s=Xs();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,a).next((l=>{let c=Uu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const a=Xs();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,dt())))}populateOverlays(e,t,a){const s=[];return a.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,a,s){let l=fa();const c=Ku(),d=(function(){return Ku()})();return t.forEach(((p,g)=>{const v=a.get(g.key);s.has(g.key)&&(v===void 0||v.mutation instanceof Es)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Yu(v.mutation,g,v.mutation.getFieldMask(),Ht.now())):c.set(g.key,br.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new sM(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const a=Ku();let s=new Wt(((c,d)=>c-d)),l=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=a.get(p)||br.empty();v=d.applyToLocalView(g,v),a.set(p,v);const E=(s.get(d.batchId)||dt()).add(p);s=s.insert(d.batchId,E)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,E=QA();v.forEach((S=>{if(!l.has(S)){const I=tw(t.get(S),a.get(S));I!==null&&E.set(S,I),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ce.waitFor(c)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,s){return uO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):ce.resolve(Xs());let d=nc,p=l;return c.next((g=>ce.forEach(g,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?ce.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,dt()))).next((v=>({batchId:d,changes:YA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((a=>{let s=Uu();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let c=Uu();return this.indexManager.getCollectionParents(e,l).next((d=>ce.forEach(d,(p=>{const g=(function(E,S){return new Ec(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,a,s).next((v=>{v.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,zn.newInvalidDocument(v)))}));let d=Uu();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Yu(v.mutation,g,br.empty(),Ht.now()),Rd(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ce.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Di(s.createTime)}})(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:WO(s.bundledQuery),readTime:Di(s.readTime)}})(t)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.overlays=new Wt(Le.comparator),this.Lr=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Xs();return ce.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((s,l)=>{this.bt(e,t,l)})),ce.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.Lr.get(a);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),ce.resolve()}getOverlaysForCollection(e,t,a){const s=Xs(),l=t.length+1,c=new Le(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>a&&s.set(p.getKey(),p)}return ce.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new Wt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let v=l.get(g.largestBatchId);v===null&&(v=Xs(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Xs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=s)););return ce.resolve(d)}bt(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(a.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(a.key,new CO(t,a));let l=this.Lr.get(t);l===void 0&&(l=dt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.kr=new yn(Sn.Kr),this.qr=new yn(Sn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new Sn(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new Sn(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new Le(new jt([])),a=new Sn(t,e),s=new Sn(t,e+1),l=[];return this.qr.forEachInRange([a,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Le(new jt([])),a=new Sn(t,e),s=new Sn(t,e+1);let l=dt();return this.qr.forEachInRange([a,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Sn(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Sn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Le.comparator(e.key,t.key)||ft(e.Hr,t.Hr)}static Ur(e,t){return ft(e.Hr,t.Hr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new yn(Sn.Kr)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new RO(l,t,a,s);this.mutationQueue.push(c);for(const d of s)this.Jr=this.Jr.add(new Sn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ce.resolve(c)}lookupMutationBatch(e,t){return ce.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.Xr(a),l=s<0?0:s;return ce.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?Sy:this.Yn-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Sn(t,0),s=new Sn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,s],(c=>{const d=this.Zr(c.Hr);l.push(d)})),ce.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new yn(ft);return t.forEach((s=>{const l=new Sn(s,0),c=new Sn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{a=a.add(d.Hr)}))})),ce.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;Le.isDocumentKey(l)||(l=l.child(""));const c=new Sn(new Le(l),0);let d=new yn(ft);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!a.isPrefixOf(g)&&(g.length===s&&(d=d.add(p.Hr)),!0)}),c),ce.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((a=>{const s=this.Zr(a);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){St(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return ce.forEach(t.mutations,(s=>{const l=new Sn(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new Sn(t,0),s=this.Jr.firstAfterOrEqual(a);return ce.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.ti=e,this.docs=(function(){return new Wt(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return ce.resolve(a?a.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let a=fa();return t.forEach((s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():zn.newInvalidDocument(s))})),ce.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=fa();const c=t.path,d=new Le(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||j2(U2(v),a)<=0||(s.has(v.key)||Rd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ce.resolve(l)}getAllFromCollectionGroup(e,t,a,s){ze(9500)}ni(e,t){return ce.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new dM(this)}getSize(e){return ce.resolve(this.size)}}class dM extends aM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(a)})),ce.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.persistence=e,this.ri=new uo((t=>Ry(t)),Cy),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.ii=0,this.si=new My,this.targetCount=0,this.oi=El._r()}forEachTarget(e,t){return this.ri.forEach(((a,s)=>t(s))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),ce.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new El(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.lr(t),ce.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&a.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),ce.waitFor(l).next((()=>s))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return ce.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),ce.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),ce.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return ce.resolve(a)}containsKey(e,t){return ce.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,t){this._i={},this.overlays={},this.ai=new Td(0),this.ui=!1,this.ui=!0,this.ci=new cM,this.referenceDelegate=e(this),this.li=new mM(this),this.indexManager=new JO,this.remoteDocumentCache=(function(s){return new fM(s)})((a=>this.referenceDelegate.hi(a))),this.serializer=new XO(t),this.Pi=new lM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new hM(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){Ae("MemoryPersistence","Starting transaction:",e);const s=new pM(this.ai.next());return this.referenceDelegate.Ti(),a(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return ce.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class pM extends B2{constructor(e){super(),this.currentSequenceNumber=e}}class Vy{constructor(e){this.persistence=e,this.Ri=new My,this.Ai=null}static Vi(e){return new Vy(e)}get di(){if(this.Ai)return this.Ai;throw ze(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),ce.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.di,(a=>{const s=Le.fromPath(a);return this.mi(e,s).next((l=>{l||t.removeEntry(s,$e.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ce.or([()=>ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Yf{constructor(e,t){this.persistence=e,this.fi=new uo((a=>q2(a.path)),((a,s)=>a.isEqual(s))),this.garbageCollector=iM(this,t)}static Vi(e,t){return new Yf(e,t)}Ti(){}Ii(e){return ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return ce.forEach(this.fi,((a,s)=>this.wr(e,a,s).next((l=>l?ce.resolve():t(s)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(a++,l.removeEntry(c,$e.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ce.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),ce.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ce.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gf(e.data.value)),t}wr(e,t,a){return ce.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return ce.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=s}static Es(e,t){let a=dt(),s=dt();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Py(e,t.fromCache,a,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return ox()?8:F2(Bn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,a).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new gM;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,a,s){return a.documentReadCount<this.Vs?(tl()<=ht.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",nl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ce.resolve()):(tl()<=ht.DEBUG&&Ae("QueryEngine","Query:",nl(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.ds*s?(tl()<=ht.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",nl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ii(t))):ce.resolve())}gs(e,t){if(nb(t))return ce.resolve(null);let a=Ii(t);return this.indexManager.getIndexType(e,a).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=zg(t,null,"F"),a=Ii(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const c=dt(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,a).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,zg(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,a,s){return nb(t)||s.isEqual($e.min())?ce.resolve(null):this.fs.getDocuments(e,a).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,a,s)?ce.resolve(null):(tl()<=ht.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),nl(t)),this.Ds(e,c,t,L2(s,nc)).next((d=>d)))}))}bs(e,t){let a=new yn($A(e));return t.forEach(((s,l)=>{Rd(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,a){return tl()<=ht.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",nl(t)),this.fs.getDocumentsMatchingQuery(e,t,fs.min(),a)}Ds(e,t,a,s){return this.fs.getDocumentsMatchingQuery(e,a,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="LocalStore",vM=3e8;class _M{constructor(e,t,a,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new Wt(ft),this.Fs=new uo((l=>Ry(l)),Cy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function EM(n,e,t,a){return new _M(n,e,t,a)}async function gw(n,e){const t=Ye(n);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const c=[],d=[];let p=dt();for(const g of s){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(a,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function TM(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const E=g.batch,S=E.keys();let I=ce.resolve();return S.forEach((P=>{I=I.next((()=>v.getEntry(p,P))).next((B=>{const V=g.docVersions.get(P);St(V!==null,48541),B.version.compareTo(V)<0&&(E.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),v.addEntry(B)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(d){let p=dt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(a,s)))}))}function yw(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function bM(n,e){const t=Ye(n),a=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const S=s.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,E))));let I=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(On.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,a)),s=s.insert(E,I),(function(B,V,Y){return B.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=vM?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(S,I,v)&&d.push(t.li.updateTargetData(l,I))}));let p=fa(),g=dt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(SM(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!a.isEqual($e.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));d.push(v)}return ce.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=s,l)))}function SM(n,e,t){let a=dt(),s=dt();return t.forEach((l=>a=a.add(l))),e.getEntries(n,a).next((l=>{let c=fa();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),p.isNoDocument()&&p.version.isEqual($e.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Ae(ky,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:s}}))}function AM(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Sy),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function wM(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let s;return t.li.getTargetData(a,e).next((l=>l?(s=l,ce.resolve(s)):t.li.allocateTargetId(a).next((c=>(s=new is(e,c,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,s).next((()=>s)))))))})).then((a=>{const s=t.vs.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function Gg(n,e,t){const a=Ye(n),s=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(c=>a.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Ol(c))throw c;Ae(ky,`Failed to update sequence numbers for target ${e}: ${c}`)}a.vs=a.vs.remove(e),a.Fs.delete(s.target)}function pb(n,e,t){const a=Ye(n);let s=$e.min(),l=dt();return a.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const E=Ye(p),S=E.Fs.get(v);return S!==void 0?ce.resolve(E.vs.get(S)):E.li.getTargetData(g,v)})(a,c,Ii(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>a.Cs.getDocumentsMatchingQuery(c,e,t?s:$e.min(),t?l:dt()))).next((d=>(RM(a,hO(e),d),{documents:d,ks:l})))))}function RM(n,e,t){let a=n.Ms.get(e)||$e.min();t.forEach(((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),n.Ms.set(e,a)}class gb{constructor(){this.activeTargetIds=yO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CM{constructor(){this.vo=new gb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new gb,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="ConnectivityMonitor";class vb{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ae(yb,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ae(yb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of=null;function $g(){return of===null?of=(function(){return 268435456+Math.round(2147483648*Math.random())})():of++,"0x"+of.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="RestConnection",DM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class NM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${s}`,this.$o=this.databaseId.database===Bf?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Wo(e,t,a,s,l){const c=$g(),d=this.Qo(e,t.toUriEncodedString());Ae(fg,`Sending RPC '${e}' ${c}:`,d,a);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,s,l);const{host:g}=new URL(d),v=Il(g);return this.zo(e,d,p,a,v).then((E=>(Ae(fg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw gl(fg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",a),E}))}jo(e,t,a,s,l,c){return this.Wo(e,t,a,s,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),a&&a.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const a=DM[e];let s=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="WebChannelConnection",Vu=(n,e,t)=>{n.listen(e,(a=>{try{t(a)}catch(s){setTimeout((()=>{throw s}),0)}}))};class ul extends NM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ul.c_){const e=bA();Vu(e,TA.STAT_EVENT,(t=>{t.stat===Mg.PROXY?Ae(Ln,"STAT_EVENT: detected buffering proxy"):t.stat===Mg.NOPROXY&&Ae(Ln,"STAT_EVENT: detected no buffering proxy")})),ul.c_=!0}}zo(e,t,a,s,l){const c=$g();return new Promise(((d,p)=>{const g=new _A;g.setWithCredentials(!0),g.listenOnce(EA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case pf.NO_ERROR:const E=g.getResponseJson();Ae(Ln,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case pf.TIMEOUT:Ae(Ln,`RPC '${e}' ${c} timed out`),p(new Te(oe.DEADLINE_EXCEEDED,"Request time out"));break;case pf.HTTP_ERROR:const S=g.getStatus();if(Ae(Ln,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I==null?void 0:I.error;if(P&&P.status&&P.message){const B=(function(Y){const F=Y.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(F)>=0?F:oe.UNKNOWN})(P.status);p(new Te(B,P.message))}else p(new Te(oe.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Te(oe.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Ae(Ln,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(s);Ae(Ln,`RPC '${e}' ${c} sending request:`,s),g.send(t,"POST",v,a,15)}))}T_(e,t,a){const s=$g(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,a),d.encodeInitMessageHeaders=!0;const g=l.join("");Ae(Ln,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let E=!1,S=!1;const I=new xM({Ho:P=>{S?Ae(Ln,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(E||(Ae(Ln,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),Ae(Ln,`RPC '${e}' stream ${s} sending:`,P),v.send(P))},Jo:()=>v.close()});return Vu(v,Lu.EventType.OPEN,(()=>{S||(Ae(Ln,`RPC '${e}' stream ${s} transport opened.`),I.i_())})),Vu(v,Lu.EventType.CLOSE,(()=>{S||(S=!0,Ae(Ln,`RPC '${e}' stream ${s} transport closed`),I.o_(),this.E_(v))})),Vu(v,Lu.EventType.ERROR,(P=>{S||(S=!0,gl(Ln,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),I.o_(new Te(oe.UNAVAILABLE,"The operation could not be completed")))})),Vu(v,Lu.EventType.MESSAGE,(P=>{var B;if(!S){const V=P.data[0];St(!!V,16349);const Y=V,F=(Y==null?void 0:Y.error)||((B=Y[0])==null?void 0:B.error);if(F){Ae(Ln,`RPC '${e}' stream ${s} received error:`,F);const z=F.status;let K=(function(b){const A=dn[b];if(A!==void 0)return rw(A)})(z),te=F.message;K===void 0&&(K=oe.INTERNAL,te="Unknown error status: "+z+" with message "+F.message),S=!0,I.o_(new Te(K,te)),v.close()}else Ae(Ln,`RPC '${e}' stream ${s} received:`,V),I.__(V)}})),ul.u_(),setTimeout((()=>{I.s_()}),0),I}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return SA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(n){return new ul(n)}function dg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(n){return new kO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ul.c_=!1;class vw{constructor(e,t,a=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-a);s>0&&Ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="PersistentStream";class _w{constructor(e,t,a,s,l,c,d,p){this.Ci=e,this.b_=a,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(ha(t.toString()),ha("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,s])=>{this.D_===t&&this.G_(a,s)}),(a=>{e((()=>{const s=new Te(oe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(s)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{a((()=>this.z_(s)))})),this.stream.onMessage((s=>{a((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ae(_b,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ae(_b,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class MM extends _w{constructor(e,t,a,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=jO(this.serializer,e),a=(function(l){if(!("targetChange"in l))return $e.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?$e.min():c.readTime?Di(c.readTime):$e.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=qg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Ug(p)?{documents:FO(l,p)}:{query:HO(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=sw(l,c.resumeToken);const g=Bg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo($e.min())>0){d.readTime=Kf(l,c.snapshotVersion.toTimestamp());const g=Bg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const a=GO(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=qg(this.serializer),t.removeTarget=e,this.K_(t)}}class VM extends _w{constructor(e,t,a,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=BO(e.writeResults,e.commitTime),a=Di(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=qg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>zO(this.serializer,a)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{}class kM extends PM{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Te(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Fg(t,a),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(oe.UNKNOWN,l.toString())}))}jo(e,t,a,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,Fg(t,a),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function LM(n,e,t,a){return new kM(n,e,t,a)}class UM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ha(t),this.aa=!1):Ae("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="RemoteStore";class jM{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{a.enqueueAndForget((async()=>{co(this)&&(Ae(ao,"Restarting streams for network reachability change."),await(async function(p){const g=Ye(p);g.Ea.add(4),await Sc(g),g.Va.set("Unknown"),g.Ea.delete(4),await xd(g)})(this))}))})),this.Va=new UM(a,s)}}async function xd(n){if(co(n))for(const e of n.Ra)await e(!0)}async function Sc(n){for(const e of n.Ra)await e(!1)}function Ew(n,e){const t=Ye(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zy(t)?jy(t):Ml(t).O_()&&Uy(t,e))}function Ly(n,e){const t=Ye(n),a=Ml(t);t.Ia.delete(e),a.O_()&&Tw(t,e),t.Ia.size===0&&(a.O_()?a.L_():co(t)&&t.Va.set("Unknown"))}function Uy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ml(n).Z_(e)}function Tw(n,e){n.da.$e(e),Ml(n).X_(e)}function jy(n){n.da=new OO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ml(n).start(),n.Va.ua()}function zy(n){return co(n)&&!Ml(n).x_()&&n.Ia.size>0}function co(n){return Ye(n).Ea.size===0}function bw(n){n.da=void 0}async function zM(n){n.Va.set("Online")}async function BM(n){n.Ia.forEach(((e,t)=>{Uy(n,e)}))}async function FM(n,e){bw(n),zy(n)?(n.Va.ha(e),jy(n)):n.Va.set("Unknown")}async function HM(n,e,t){if(n.Va.set("Online"),e instanceof aw&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(a){Ae(ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Qf(n,a)}else if(e instanceof _f?n.da.Xe(e):e instanceof iw?n.da.st(e):n.da.tt(e),!t.isEqual($e.min()))try{const a=await yw(n.localStore);t.compareTo(a)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(On.EMPTY_BYTE_STRING,v.snapshotVersion)),Tw(l,p);const E=new is(v.target,p,g,v.sequenceNumber);Uy(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(a){Ae(ao,"Failed to raise snapshot:",a),await Qf(n,a)}}async function Qf(n,e,t){if(!Ol(e))throw e;n.Ea.add(1),await Sc(n),n.Va.set("Offline"),t||(t=()=>yw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ae(ao,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await xd(n)}))}function Sw(n,e){return e().catch((t=>Qf(n,t,e)))}async function Od(n){const e=Ye(n),t=gs(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sy;for(;qM(e);)try{const s=await AM(e.localStore,a);if(s===null){e.Ta.length===0&&t.L_();break}a=s.batchId,GM(e,s)}catch(s){await Qf(e,s)}Aw(e)&&ww(e)}function qM(n){return co(n)&&n.Ta.length<10}function GM(n,e){n.Ta.push(e);const t=gs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Aw(n){return co(n)&&!gs(n).x_()&&n.Ta.length>0}function ww(n){gs(n).start()}async function $M(n){gs(n).ra()}async function KM(n){const e=gs(n);for(const t of n.Ta)e.ea(t.mutations)}async function YM(n,e,t){const a=n.Ta.shift(),s=Ny.from(a,e,t);await Sw(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Od(n)}async function QM(n,e){e&&gs(n).Y_&&await(async function(a,s){if((function(c){return DO(c)&&c!==oe.ABORTED})(s.code)){const l=a.Ta.shift();gs(a).B_(),await Sw(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Od(a)}})(n,e),Aw(n)&&ww(n)}async function Eb(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Ae(ao,"RemoteStore received new credentials");const a=co(t);t.Ea.add(3),await Sc(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await xd(t)}async function XM(n,e){const t=Ye(n);e?(t.Ea.delete(2),await xd(t)):e||(t.Ea.add(2),await Sc(t),t.Va.set("Unknown"))}function Ml(n){return n.ma||(n.ma=(function(t,a,s){const l=Ye(t);return l.sa(),new MM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:zM.bind(null,n),Yo:BM.bind(null,n),t_:FM.bind(null,n),J_:HM.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),zy(n)?jy(n):n.Va.set("Unknown")):(await n.ma.stop(),bw(n))}))),n.ma}function gs(n){return n.fa||(n.fa=(function(t,a,s){const l=Ye(t);return l.sa(),new VM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:$M.bind(null,n),t_:QM.bind(null,n),ta:KM.bind(null,n),na:YM.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Od(n)):(await n.fa.stop(),n.Ta.length>0&&(Ae(ao,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new la,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const c=Date.now()+a,d=new By(e,t,c,s,l);return d.start(a),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fy(n,e){if(ha("AsyncQueue",`${e}: ${n}`),Ol(n))return new Te(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{static emptySet(e){return new cl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Le.comparator(t.key,a.key):(t,a)=>Le.comparator(t.key,a.key),this.keyedMap=Uu(),this.sortedSet=new Wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new cl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.ga=new Wt(Le.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ze(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Tl{constructor(e,t,a,s,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Tl(e,t,cl.emptySet(t),c,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class JM{constructor(){this.queries=bb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const s=Ye(t),l=s.queries;s.queries=bb(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(a)}))})(this,new Te(oe.ABORTED,"Firestore shutting down"))}}function bb(){return new uo((n=>GA(n)),wd)}async function Hy(n,e){const t=Ye(n);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(a=2):(l=new WM,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=Fy(c,`Initialization of query '${nl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Gy(t)}async function qy(n,e){const t=Ye(n),a=e.query;let s=3;const l=t.queries.get(a);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function ZM(n,e){const t=Ye(n);let a=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(s)&&(a=!0);c.wa=s}}a&&Gy(t)}function eV(n,e,t){const a=Ye(n),s=a.queries.get(e);if(s)for(const l of s.ba)l.onError(t);a.queries.delete(e)}function Gy(n){n.Ca.forEach((e=>{e.next()}))}var Kg,Sb;(Sb=Kg||(Kg={})).Ma="default",Sb.Cache="cache";class $y{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new Tl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.key=e}}class Cw{constructor(e){this.key=e}}class tV{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=dt(),this.mutatedKeys=dt(),this.eu=$A(e),this.tu=new cl(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new Tb,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,E)=>{const S=s.get(v),I=Rd(this.query,E)?E:null,P=!!S&&this.mutatedKeys.has(S.key),B=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let V=!1;S&&I?S.data.isEqual(I.data)?P!==B&&(a.track({type:3,doc:I}),V=!0):this.su(S,I)||(a.track({type:2,doc:I}),V=!0,(p&&this.eu(I,p)>0||g&&this.eu(I,g)<0)&&(d=!0)):!S&&I?(a.track({type:0,doc:I}),V=!0):S&&!I&&(a.track({type:1,doc:S}),V=!0,(p||g)&&(d=!0)),V&&(I?(c=c.add(I),l=B?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),a.track({type:1,doc:v})}return{tu:c,iu:a,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(I,P){const B=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Vt:V})}};return B(I)-B(P)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(a),s=s??!1;const d=t&&!s?this._u():[],p=this.Ya.size===0&&this.current&&!s?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new Tl(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tb,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=dt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new Cw(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new Rw(a))})),t}cu(e){this.Za=e.ks,this.Ya=dt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ky="SyncEngine";class nV{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class rV{constructor(e){this.key=e,this.hu=!1}}class iV{constructor(e,t,a,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new uo((d=>GA(d)),wd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Wt(Le.comparator),this.Au=new Map,this.Vu=new My,this.du={},this.mu=new Map,this.fu=El.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aV(n,e,t=!0){const a=Mw(n);let s;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await Iw(a,e,t,!0),s}async function sV(n,e){const t=Mw(n);await Iw(t,e,!0,!1)}async function Iw(n,e,t,a){const s=await wM(n.localStore,Ii(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return a&&(d=await oV(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&Ew(n.remoteStore,s),d}async function oV(n,e,t,a,s){n.pu=(E,S,I)=>(async function(B,V,Y,F){let z=V.view.ru(Y);z.Ss&&(z=await pb(B.localStore,V.query,!1).then((({documents:b})=>V.view.ru(b,z))));const K=F&&F.targetChanges.get(V.targetId),te=F&&F.targetMismatches.get(V.targetId)!=null,G=V.view.applyChanges(z,B.isPrimaryClient,K,te);return wb(B,V.targetId,G.au),G.snapshot})(n,E,S,I);const l=await pb(n.localStore,e,!0),c=new tV(e,l.ks),d=c.ru(l.documents),p=bc.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",s),g=c.applyChanges(d,n.isPrimaryClient,p);wb(n,t,g.au);const v=new nV(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function lV(n,e,t){const a=Ye(n),s=a.Tu.get(e),l=a.Iu.get(s.targetId);if(l.length>1)return a.Iu.set(s.targetId,l.filter((c=>!wd(c,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await Gg(a.localStore,s.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(s.targetId),t&&Ly(a.remoteStore,s.targetId),Yg(a,s.targetId)})).catch(xl)):(Yg(a,s.targetId),await Gg(a.localStore,s.targetId,!0))}async function uV(n,e){const t=Ye(n),a=t.Tu.get(e),s=t.Iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),Ly(t.remoteStore,a.targetId))}async function cV(n,e,t){const a=yV(n);try{const s=await(function(c,d){const p=Ye(c),g=Ht.now(),v=d.reduce(((I,P)=>I.add(P.key)),dt());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let P=fa(),B=dt();return p.xs.getEntries(I,v).next((V=>{P=V,P.forEach(((Y,F)=>{F.isValidDocument()||(B=B.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,P))).next((V=>{E=V;const Y=[];for(const F of d){const z=AO(F,E.get(F.key).overlayedDocument);z!=null&&Y.push(new Es(F.key,z,LA(z.value.mapValue),wr.exists(!0)))}return p.mutationQueue.addMutationBatch(I,g,Y,d)})).next((V=>{S=V;const Y=V.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(I,V.batchId,Y)}))})).then((()=>({batchId:S.batchId,changes:YA(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new Wt(ft)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(a,s.batchId,t),await Ac(a,s.changes),await Od(a.remoteStore)}catch(s){const l=Fy(s,"Failed to persist write");t.reject(l)}}async function Dw(n,e){const t=Ye(n);try{const a=await bM(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(St(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?St(c.hu,14607):s.removedDocuments.size>0&&(St(c.hu,42227),c.hu=!1))})),await Ac(t,a,e)}catch(a){await xl(a)}}function Ab(n,e,t){const a=Ye(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const p=Ye(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,E)=>{for(const S of E.ba)S.va(d)&&(g=!0)})),g&&Gy(p)})(a.eventManager,e),s.length&&a.Pu.J_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function hV(n,e,t){const a=Ye(n);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a.Au.get(e),l=s&&s.key;if(l){let c=new Wt(Le.comparator);c=c.insert(l,zn.newNoDocument(l,$e.min()));const d=dt().add(l),p=new Dd($e.min(),new Map,new Wt(ft),c,d);await Dw(a,p),a.Ru=a.Ru.remove(l),a.Au.delete(e),Yy(a)}else await Gg(a.localStore,e,!1).then((()=>Yg(a,e,t))).catch(xl)}async function fV(n,e){const t=Ye(n),a=e.batch.batchId;try{const s=await TM(t.localStore,e);xw(t,a,null),Nw(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Ac(t,s)}catch(s){await xl(s)}}async function dV(n,e,t){const a=Ye(n);try{const s=await(function(c,d){const p=Ye(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(St(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(a.localStore,e);xw(a,e,t),Nw(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Ac(a,s)}catch(s){await xl(s)}}function Nw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function xw(n,e,t){const a=Ye(n);let s=a.du[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.du[a.currentUser.toKey()]=s}}function Yg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),t&&n.Pu.yu(a,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||Ow(n,a)}))}function Ow(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Ly(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Yy(n))}function wb(n,e,t){for(const a of t)a instanceof Rw?(n.Vu.addReference(a.key,e),mV(n,a)):a instanceof Cw?(Ae(Ky,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||Ow(n,a.key)):ze(19791,{wu:a})}function mV(n,e){const t=e.key,a=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(a)||(Ae(Ky,"New document in limbo: "+t),n.Eu.add(a),Yy(n))}function Yy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Le(jt.fromString(e)),a=n.fu.next();n.Au.set(a,new rV(t)),n.Ru=n.Ru.insert(t,a),Ew(n.remoteStore,new is(Ii(Ad(t.path)),a,"TargetPurposeLimboResolution",Td.ce))}}async function Ac(n,e,t){const a=Ye(n),s=[],l=[],c=[];a.Tu.isEmpty()||(a.Tu.forEach(((d,p)=>{c.push(a.pu(p,e,t).then((g=>{var v;if((g||t)&&a.isPrimaryClient){const E=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;a.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){s.push(g);const E=Py.Es(p.targetId,g);l.push(E)}})))})),await Promise.all(c),a.Pu.J_(s),await(async function(p,g){const v=Ye(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ce.forEach(g,(S=>ce.forEach(S.Ts,(I=>v.persistence.referenceDelegate.addReference(E,S.targetId,I))).next((()=>ce.forEach(S.Is,(I=>v.persistence.referenceDelegate.removeReference(E,S.targetId,I)))))))))}catch(E){if(!Ol(E))throw E;Ae(ky,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const I=v.vs.get(S),P=I.snapshotVersion,B=I.withLastLimboFreeSnapshotVersion(P);v.vs=v.vs.insert(S,B)}}})(a.localStore,l))}async function pV(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Ae(Ky,"User change. New user:",e.toKey());const a=await gw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new Te(oe.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Ac(t,a.Ns)}}function gV(n,e){const t=Ye(n),a=t.Au.get(e);if(a&&a.hu)return dt().add(a.key);{let s=dt();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function Mw(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hV.bind(null,e),e.Pu.J_=ZM.bind(null,e.eventManager),e.Pu.yu=eV.bind(null,e.eventManager),e}function yV(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dV.bind(null,e),e}class Xf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return EM(this.persistence,new yM,e.initialUser,this.serializer)}Cu(e){return new pw(Vy.Vi,this.serializer)}Du(e){return new CM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xf.provider={build:()=>new Xf};class vV extends Xf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){St(this.persistence.referenceDelegate instanceof Yf,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new nM(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ar.withCacheSize(this.cacheSizeBytes):ar.DEFAULT;return new pw((a=>Yf.Vi(a,t)),this.serializer)}}class Qg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Ab(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=pV.bind(null,this.syncEngine),await XM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new JM})()}createDatastore(e){const t=Nd(e.databaseInfo.databaseId),a=OM(e.databaseInfo);return LM(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,s,l,c,d){return new jM(a,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ab(this.syncEngine,t,0)),(function(){return vb.v()?new vb:new IM})())}createSyncEngine(e,t){return(function(s,l,c,d,p,g,v){const E=new iV(s,l,c,d,p,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Ye(s);Ae(ao,"RemoteStore shutting down."),l.Ea.add(5),await Sc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Qg.provider={build:()=>new Qg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ha("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class _V{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=s,this.user=jn.UNAUTHENTICATED,this.clientId=by.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async c=>{Ae(ys,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(a,(c=>(Ae(ys,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new la;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Fy(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function mg(n,e){n.asyncQueue.verifyOperationInProgress(),Ae(ys,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener((async s=>{a.isEqual(s)||(await gw(e.localStore,s),a=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Rb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await EV(n);Ae(ys,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((a=>Eb(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,s)=>Eb(e.remoteStore,s))),n._onlineComponents=e}async function EV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae(ys,"Using user provided OfflineComponentProvider");try{await mg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;gl("Error using user provided cache. Falling back to memory cache: "+t),await mg(n,new Xf)}}else Ae(ys,"Using default OfflineComponentProvider"),await mg(n,new vV(void 0));return n._offlineComponents}async function Vw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae(ys,"Using user provided OnlineComponentProvider"),await Rb(n,n._uninitializedComponentsProvider._online)):(Ae(ys,"Using default OnlineComponentProvider"),await Rb(n,new Qg))),n._onlineComponents}function TV(n){return Vw(n).then((e=>e.syncEngine))}async function Wf(n){const e=await Vw(n),t=e.eventManager;return t.onListen=aV.bind(null,e.syncEngine),t.onUnlisten=lV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uV.bind(null,e.syncEngine),t}function bV(n,e,t,a){const s=new Qy(a),l=new $y(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>Hy(await Wf(n),l))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>qy(await Wf(n),l)))}}function SV(n,e,t={}){const a=new la;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new Qy({next:S=>{v.Nu(),c.enqueueAndForget((()=>qy(l,E)));const I=S.docs.has(d);!I&&S.fromCache?g.reject(new Te(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&p&&p.source==="server"?g.reject(new Te(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new $y(Ad(d.path),v,{includeMetadataChanges:!0,Ka:!0});return Hy(l,E)})(await Wf(n),n.asyncQueue,e,t,a))),a.promise}function AV(n,e,t={}){const a=new la;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new Qy({next:S=>{v.Nu(),c.enqueueAndForget((()=>qy(l,E))),S.fromCache&&p.source==="server"?g.reject(new Te(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new $y(d,v,{includeMetadataChanges:!0,Ka:!0});return Hy(l,E)})(await Wf(n),n.asyncQueue,e,t,a))),a.promise}function wV(n,e){const t=new la;return n.asyncQueue.enqueueAndForget((async()=>cV(await TV(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV="ComponentProvider",Cb=new Map;function CV(n,e,t,a,s){return new K2(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,Pw(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="firestore.googleapis.com",Ib=!0;class Db{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kw,this.ssl=Ib}else this.host=e.host,this.ssl=e.ssl??Ib;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<eM)throw new Te(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pw(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Te(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Te(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Te(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Md{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Db({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Db(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new R2;switch(a.type){case"firstParty":return new N2(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Te(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=Cb.get(t);a&&(Ae(RV,"Removing Datastore"),Cb.delete(t),a.terminate())})(this),Promise.resolve()}}function IV(n,e,t,a={}){var g;n=Ar(n,Md);const s=Il(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(cA(`https://${d}`),hA("Firestore",!0)),l.host!==kw&&l.host!==d&&gl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:s,emulatorOptions:a};if(!no(p,c)&&(n._setSettings(p),a.mockUserToken)){let v,E;if(typeof a.mockUserToken=="string")v=a.mockUserToken,E=jn.MOCK_USER;else{v=JN(a.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const S=a.mockUserToken.sub||a.mockUserToken.user_id;if(!S)throw new Te(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new jn(S)}n._authCredentials=new C2(new wA(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ho(this.firestore,e,this._query)}}class en{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}toJSON(){return{type:en._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(_c(t,en._jsonSchema))return new en(e,a||null,new Le(jt.fromString(t.referencePath)))}}en._jsonSchemaVersion="firestore/documentReference/1.0",en._jsonSchema={type:pn("string",en._jsonSchemaVersion),referencePath:pn("string")};class cs extends ho{constructor(e,t,a){super(e,t,Ad(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new Le(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function wc(n,e,...t){if(n=vn(n),RA("collection","path",e),n instanceof Md){const a=jt.fromString(e,...t);return F0(a),new cs(n,null,a)}{if(!(n instanceof en||n instanceof cs))throw new Te(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(jt.fromString(e,...t));return F0(a),new cs(n.firestore,null,a)}}function Gr(n,e,...t){if(n=vn(n),arguments.length===1&&(e=by.newId()),RA("doc","path",e),n instanceof Md){const a=jt.fromString(e,...t);return B0(a),new en(n,null,new Le(a))}{if(!(n instanceof en||n instanceof cs))throw new Te(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(jt.fromString(e,...t));return B0(a),new en(n.firestore,n instanceof cs?n.converter:null,new Le(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="AsyncQueue";class xb{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vw(this,"async_queue_retry"),this._c=()=>{const a=dg();a&&Ae(Nb,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=dg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=dg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new la;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ol(e))throw e;Ae(Nb,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,ha("INTERNAL UNHANDLED ERROR: ",Ob(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=By.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&ze(47125,{Pc:Ob(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ob(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class vs extends Md{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new xb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xb(e),this._firestoreClient=void 0,await e}}}function DV(n,e){const t=typeof n=="object"?n:pA(),a=typeof n=="string"?n:Bf,s=Ey(t,"firestore").getImmediate({identifier:a});if(!s._initialized){const l=XN("firestore");l&&IV(s,...l)}return s}function Rc(n){if(n._terminated)throw new Te(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||NV(n),n._firestoreClient}function NV(n){var a,s,l,c;const e=n._freezeSettings(),t=CV(n._databaseId,((a=n._app)==null?void 0:a.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new _V(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hr(On.fromBase64String(e))}catch(t){throw new Te(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hr(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_c(e,Hr._jsonSchema))return Hr.fromBase64String(e.bytes)}}Hr._jsonSchemaVersion="firestore/bytes/1.0",Hr._jsonSchema={type:pn("string",Hr._jsonSchemaVersion),bytes:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ft(this._lat,e._lat)||ft(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ni._jsonSchemaVersion}}static fromJSON(e){if(_c(e,Ni._jsonSchema))return new Ni(e.latitude,e.longitude)}}Ni._jsonSchemaVersion="firestore/geoPoint/1.0",Ni._jsonSchema={type:pn("string",Ni._jsonSchemaVersion),latitude:pn("number"),longitude:pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_c(e,ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ai(e.vectorValues);throw new Te(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ai._jsonSchemaVersion="firestore/vectorValue/1.0",ai._jsonSchema={type:pn("string",ai._jsonSchemaVersion),vectorValues:pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=/^__.*__$/;class OV{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Es(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tc(e,this.data,t,this.fieldTransforms)}}class Lw{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Es(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Uw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{dataSource:n})}}class Wy{constructor(e,t,a,s,l,c){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Wy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Jf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Uw(this.dataSource)&&xV.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class MV{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Nd(e)}createContext(e,t,a,s=!1){return new Wy({dataSource:e,methodName:t,targetDoc:a,path:xn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pd(n){const e=n._freezeSettings(),t=Nd(n._databaseId);return new MV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jw(n,e,t,a,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);Jy("Data must be an object, but it was:",c,a);const d=Fw(a,c);let p,g;if(l.merge)p=new br(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=bl(e,E,t);if(!c.contains(S))throw new Te(oe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Gw(v,S)||v.push(S)}p=new br(v),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new OV(new sr(d),p,g)}class kd extends Xy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kd}}function zw(n,e,t,a){const s=n.createContext(1,e,t);Jy("Data must be an object, but it was:",s,a);const l=[],c=sr.empty();_s(a,((p,g)=>{const v=qw(e,p,t);g=vn(g);const E=s.childContextForFieldPath(v);if(g instanceof kd)l.push(v);else{const S=Cc(g,E);S!=null&&(l.push(v),c.set(v,S))}}));const d=new br(l);return new Lw(c,d,s.fieldTransforms)}function Bw(n,e,t,a,s,l){const c=n.createContext(1,e,t),d=[bl(e,a,t)],p=[s];if(l.length%2!=0)throw new Te(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(bl(e,l[S])),p.push(l[S+1]);const g=[],v=sr.empty();for(let S=d.length-1;S>=0;--S)if(!Gw(g,d[S])){const I=d[S];let P=p[S];P=vn(P);const B=c.childContextForFieldPath(I);if(P instanceof kd)g.push(I);else{const V=Cc(P,B);V!=null&&(g.push(I),v.set(I,V))}}const E=new br(g);return new Lw(v,E,c.fieldTransforms)}function VV(n,e,t,a=!1){return Cc(t,n.createContext(a?4:3,e))}function Cc(n,e){if(Hw(n=vn(n)))return Jy("Unsupported field value:",e,n),Fw(n,e);if(n instanceof Xy)return(function(a,s){if(!Uw(s.dataSource))throw s.createError(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,s){const l=[];let c=0;for(const d of a){let p=Cc(d,s.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(a,s){if((a=vn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return vO(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Ht.fromDate(a);return{timestampValue:Kf(s.serializer,l)}}if(a instanceof Ht){const l=new Ht(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Kf(s.serializer,l)}}if(a instanceof Ni)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Hr)return{bytesValue:sw(s.serializer,a._byteString)};if(a instanceof en){const l=s.databaseId,c=a.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Oy(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof ai)return(function(c,d){const p=c instanceof ai?c.toArray():c;return{mapValue:{fields:{[PA]:{stringValue:kA},[Ff]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return Iy(d.serializer,v)}))}}}}}})(a,s);if(dw(a))return a._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Ed(a)}`)})(n,e)}function Fw(n,e){const t={};return DA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(n,((a,s)=>{const l=Cc(s,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function Hw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ht||n instanceof Ni||n instanceof Hr||n instanceof en||n instanceof Xy||n instanceof ai||dw(n))}function Jy(n,e,t){if(!Hw(t)||!CA(t)){const a=Ed(t);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function bl(n,e,t){if((e=vn(e))instanceof Vd)return e._internalPath;if(typeof e=="string")return qw(n,e);throw Jf("Field path arguments must be of type string or ",n,!1,void 0,t)}const PV=new RegExp("[~\\*/\\[\\]]");function qw(n,e,t){if(e.search(PV)>=0)throw Jf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vd(...e.split("."))._internalPath}catch{throw Jf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jf(n,e,t,a,s){const l=a&&!a.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${a}`),c&&(p+=` in document ${s}`),p+=")"),new Te(oe.INVALID_ARGUMENT,d+n+p)}function Gw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{convertValue(e,t="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return _s(e,((s,l)=>{a[s]=this.convertValue(l,t)})),a}convertVectorValue(e){var a,s,l;const t=(l=(s=(a=e.fields)==null?void 0:a[Ff].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>sn(c.doubleValue)));return new ai(t)}convertGeoPoint(e){return new Ni(sn(e.latitude),sn(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Sd(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const t=ds(e);return new Ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=jt.fromString(e);St(fw(a),9688,{name:e});const s=new ic(a.get(1),a.get(3)),l=new Le(a.popFirst(5));return s.isEqual(t)||ha(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends kV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,t)}}const Mb="@firebase/firestore",Vb="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(n){return(function(t,a){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of a)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(bl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LV extends $w{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Te(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ev{}class UV extends ev{}function Ic(n,e,...t){let a=[];e instanceof ev&&a.push(e),a=a.concat(t),(function(l){const c=l.filter((p=>p instanceof nv)).length,d=l.filter((p=>p instanceof Ld)).length;if(c>1||c>0&&d>0)throw new Te(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const s of a)n=s._apply(n);return n}class Ld extends UV{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Ld(e,t,a)}_apply(e){const t=this._parse(e);return Yw(e._query,t),new ho(e.firestore,e.converter,jg(e._query,t))}_parse(e){const t=Pd(e.firestore);return(function(l,c,d,p,g,v,E){let S;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Te(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Lb(E,v);const P=[];for(const B of E)P.push(kb(p,l,B));S={arrayValue:{values:P}}}else S=kb(p,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Lb(E,v),S=VV(d,c,E,v==="in"||v==="not-in");return mn.create(g,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function tv(n,e,t){const a=e,s=bl("where",n);return Ld._create(s,a,t)}class nv extends ev{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nv(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:oi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const p of d)Yw(c,p),c=jg(c,p)})(e._query,t),new ho(e.firestore,e.converter,jg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function kb(n,e,t){if(typeof(t=vn(t))=="string"){if(t==="")throw new Te(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qA(e)&&t.indexOf("/")!==-1)throw new Te(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(jt.fromString(t));if(!Le.isDocumentKey(a))throw new Te(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return X0(n,new Le(a))}if(t instanceof en)return X0(n,t._key);throw new Te(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ed(t)}.`)}function Lb(n,e){if(!Array.isArray(n)||n.length===0)throw new Te(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yw(n,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Te(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qw(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}class zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Js extends $w{constructor(e,t,a,s,l,c){super(e,t,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(bl("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Js._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Js._jsonSchemaVersion="firestore/documentSnapshot/1.0",Js._jsonSchema={type:pn("string",Js._jsonSchemaVersion),bundleSource:pn("string","DocumentSnapshot"),bundleName:pn("string"),bundle:pn("string")};class Ef extends Js{data(e={}){return super.data(e)}}class Zs{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new zu(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Ef(this._firestore,this._userDataWriter,a.key,a,new zu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const p=new Ef(s._firestore,s._userDataWriter,d.doc.key,d.doc,new zu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Ef(s._firestore,s._userDataWriter,d.doc.key,d.doc,new zu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:jV(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=by.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs._jsonSchemaVersion="firestore/querySnapshot/1.0",Zs._jsonSchema={type:pn("string",Zs._jsonSchemaVersion),bundleSource:pn("string","QuerySnapshot"),bundleName:pn("string"),bundle:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pd(e)}set(e,t,a){this._verifyNotCommitted();const s=pg(e,this._firestore),l=Qw(s.converter,t,a),c=jw(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,a);return this._mutations.push(c.toMutation(s._key,wr.none())),this}update(e,t,a,...s){this._verifyNotCommitted();const l=pg(e,this._firestore);let c;return c=typeof(t=vn(t))=="string"||t instanceof Vd?Bw(this._dataReader,"WriteBatch.update",l._key,t,a,s):zw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,wr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=pg(e,this._firestore);return this._mutations=this._mutations.concat(new Dy(t._key,wr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pg(n,e){if((n=vn(n)).firestore!==e)throw new Te(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(n){n=Ar(n,en);const e=Ar(n.firestore,vs),t=Rc(e);return SV(t,n._key).then((a=>Xw(e,n,a)))}function Nc(n){n=Ar(n,ho);const e=Ar(n.firestore,vs),t=Rc(e),a=new Zy(e);return Kw(n._query),AV(t,n._query).then((s=>new Zs(e,a,n,s)))}function BV(n,e,t){n=Ar(n,en);const a=Ar(n.firestore,vs),s=Qw(n.converter,e,t),l=Pd(a);return rv(a,[jw(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,wr.none())])}function Ud(n,e,t,...a){n=Ar(n,en);const s=Ar(n.firestore,vs),l=Pd(s);let c;return c=typeof(e=vn(e))=="string"||e instanceof Vd?Bw(l,"updateDoc",n._key,e,t,a):zw(l,"updateDoc",n._key,e),rv(s,[c.toMutation(n._key,wr.exists(!0))])}function FV(n,...e){var g,v,E;n=vn(n);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Pb(e[a])||(t=e[a++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Pb(e[a])){const S=e[a];e[a]=(g=S.next)==null?void 0:g.bind(S),e[a+1]=(v=S.error)==null?void 0:v.bind(S),e[a+2]=(E=S.complete)==null?void 0:E.bind(S)}let l,c,d;if(n instanceof en)c=Ar(n.firestore,vs),d=Ad(n._key.path),l={next:S=>{e[a]&&e[a](Xw(c,n,S))},error:e[a+1],complete:e[a+2]};else{const S=Ar(n,ho);c=Ar(S.firestore,vs),d=S._query;const I=new Zy(c);l={next:P=>{e[a]&&e[a](new Zs(c,I,S,P))},error:e[a+1],complete:e[a+2]},Kw(n._query)}const p=Rc(c);return bV(p,d,s,l)}function rv(n,e){const t=Rc(n);return wV(t,e)}function Xw(n,e,t){const a=t.docs.get(e._key),s=new Zy(n);return new Js(n,s,e._key,a,new zu(t.hasPendingWrites,t.fromCache),e.converter)}function Ww(n){return n=Ar(n,vs),Rc(n),new zV(n,(e=>rv(n,e)))}(function(e,t=!0){w2(Dl),pl(new ro("firestore",((a,{instanceIdentifier:s,options:l})=>{const c=a.getProvider("app").getImmediate(),d=new vs(new I2(a.getProvider("auth-internal")),new x2(c,a.getProvider("app-check-internal")),Y2(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ls(Mb,Vb,e),ls(Mb,Vb,"esm2020")})();var HV="firebase",qV="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls(HV,qV,"app");function Jw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GV=Jw,Zw=new yc("auth","Firebase",Jw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=new vy("@firebase/auth");function $V(n,...e){Zf.logLevel<=ht.WARN&&Zf.warn(`Auth (${Dl}): ${n}`,...e)}function Tf(n,...e){Zf.logLevel<=ht.ERROR&&Zf.error(`Auth (${Dl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(n,...e){throw av(n,...e)}function si(n,...e){return av(n,...e)}function iv(n,e,t){const a={...GV(),[e]:t};return new yc("auth","Firebase",a).create(e,{appName:n.name})}function eo(n){return iv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KV(n,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Vi(n,"argument-error"),iv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function av(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return Zw.create(n,...e)}function Fe(n,e,...t){if(!n)throw av(e,...t)}function sa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Tf(e),new Error(e)}function da(n,e){n||sa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function YV(){return Ub()==="http:"||Ub()==="https:"}function Ub(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YV()||ix()||"connection"in navigator)?navigator.onLine:!0}function XV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t){this.shortDelay=e,this.longDelay=t,da(t>e,"Short delay should be less than long delay!"),this.isMobile=tx()||ax()}get(){return QV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(n,e){da(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZV=new xc(3e4,6e4);function ov(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Vl(n,e,t,a,s={}){return tR(n,s,async()=>{let l={},c={};a&&(e==="GET"?c=a:l={body:JSON.stringify(a)});const d=vc({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return rx()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Il(n.emulatorConfig.host)&&(g.credentials="include"),eR.fetch()(await nR(n,n.config.apiHost,t,d),g)})}async function tR(n,e,t){n._canInitEmulator=!1;const a={...WV,...e};try{const s=new tP(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw lf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw lf(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw lf(n,"user-disabled",c);const v=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw iv(n,v,g);Vi(n,v)}}catch(s){if(s instanceof ga)throw s;Vi(n,"network-request-failed",{message:String(s)})}}async function eP(n,e,t,a,s={}){const l=await Vl(n,e,t,a,s);return"mfaPendingCredential"in l&&Vi(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function nR(n,e,t,a){const s=`${e}${t}?${a}`,l=n,c=l.config.emulator?sv(n.config,s):`${n.config.apiScheme}://${s}`;return JV.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class tP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(si(this.auth,"network-request-failed")),ZV.get())})}}function lf(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=si(n,e,a);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(n,e){return Vl(n,"POST","/v1/accounts:delete",e)}async function ed(n,e){return Vl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rP(n,e=!1){const t=vn(n),a=await t.getIdToken(e),s=lv(a);Fe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:a,authTime:Qu(gg(s.auth_time)),issuedAtTime:Qu(gg(s.iat)),expirationTime:Qu(gg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function gg(n){return Number(n)*1e3}function lv(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return Tf("JWT malformed, contained fewer than 3 sections"),null;try{const s=sA(t);return s?JSON.parse(s):(Tf("Failed to decode base64 JWT payload"),null)}catch(s){return Tf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function jb(n){const e=lv(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof ga&&iP(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function iP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qu(this.lastLoginAt),this.creationTime=Qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(n){var E;const e=n.auth,t=await n.getIdToken(),a=await lc(n,ed(e,{idToken:t}));Fe(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?rR(s.providerUserInfo):[],c=oP(n.providerData,l),d=n.isAnonymous,p=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Wg(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function sP(n){const e=vn(n);await td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oP(n,e){return[...n.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function rR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(n,e){const t=await tR(n,{},async()=>{const a=vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await nR(n,s,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:a};return n.emulatorConfig&&Il(n.emulatorConfig.host)&&(p.credentials="include"),eR.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function uP(n,e){return Vl(n,"POST","/v2/accounts:revokeToken",ov(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=jb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await lP(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,c=new hl;return a&&(Fe(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&(Fe(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Fe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hl,this.toJSON())}_performRefresh(){return sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(n,e){Fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ii{constructor({uid:e,auth:t,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new aP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await lc(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return rP(this,e)}reload(){return sP(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await td(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(eo(this.auth));const e=await this.getIdToken();return await lc(this,nP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:I,providerData:P,stsTokenManager:B}=t;Fe(E&&B,e,"internal-error");const V=hl.fromJSON(this.name,B);Fe(typeof E=="string",e,"internal-error"),Wa(a,e.name),Wa(s,e.name),Fe(typeof S=="boolean",e,"internal-error"),Fe(typeof I=="boolean",e,"internal-error"),Wa(l,e.name),Wa(c,e.name),Wa(d,e.name),Wa(p,e.name),Wa(g,e.name),Wa(v,e.name);const Y=new ii({uid:E,auth:e,email:s,emailVerified:S,displayName:a,isAnonymous:I,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:V,createdAt:g,lastLoginAt:v});return P&&Array.isArray(P)&&(Y.providerData=P.map(F=>({...F}))),p&&(Y._redirectEventId=p),Y}static async _fromIdTokenResponse(e,t,a=!1){const s=new hl;s.updateFromServerResponse(t);const l=new ii({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await td(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];Fe(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?rR(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),d=new hl;d.updateFromIdToken(a);const p=new ii({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Wg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=new Map;function oa(n){da(n instanceof Function,"Expected a class definition");let e=zb.get(n);return e?(da(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}iR.type="NONE";const Bb=iR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(n,e,t){return`firebase:${n}:${e}:${t}`}class fl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=bf(this.userKey,s.apiKey,l),this.fullPersistenceKey=bf("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ed(this.auth,{idToken:e}).catch(()=>{});return t?ii._fromGetAccountInfoResponse(this.auth,t,e):null}return ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new fl(oa(Bb),e,a);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||oa(Bb);const c=bf(a,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const S=await ed(e,{idToken:v}).catch(()=>{});if(!S)break;E=await ii._fromGetAccountInfoResponse(e,S,v)}else E=ii._fromJSON(e,v);g!==l&&(d=E),l=g;break}}catch{}const p=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new fl(l,e,a):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new fl(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cR(e))return"Blackberry";if(hR(e))return"Webos";if(sR(e))return"Safari";if((e.includes("chrome/")||oR(e))&&!e.includes("edge/"))return"Chrome";if(uR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function aR(n=Bn()){return/firefox\//i.test(n)}function sR(n=Bn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oR(n=Bn()){return/crios\//i.test(n)}function lR(n=Bn()){return/iemobile/i.test(n)}function uR(n=Bn()){return/android/i.test(n)}function cR(n=Bn()){return/blackberry/i.test(n)}function hR(n=Bn()){return/webos/i.test(n)}function uv(n=Bn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function cP(n=Bn()){var e;return uv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function hP(){return sx()&&document.documentMode===10}function fR(n=Bn()){return uv(n)||uR(n)||hR(n)||cR(n)||/windows phone/i.test(n)||lR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(n,e=[]){let t;switch(n){case"Browser":t=Fb(Bn());break;case"Worker":t=`${Fb(Bn())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Dl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(n,e={}){return Vl(n,"GET","/v2/passwordPolicy",ov(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=6;class pP{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??mP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hb(this),this.idTokenSubscription=new Hb(this),this.beforeStateQueue=new fP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oa(t)),this._initializationPromise=this.queue(async()=>{var a,s,l;if(!this._deleted&&(this.persistenceManager=await fl.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ed(this,{idToken:e}),a=await ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ni(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(a=p.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await td(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ni(this.app))return Promise.reject(eo(this));const t=e?vn(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ni(this.app)?Promise.reject(eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dP(this),t=new pP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await uP(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oa(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await fl.create(this,[oa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,s);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(ni(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&$V(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function jd(n){return vn(n)}class Hb{constructor(e){this.auth=e,this.observer=null,this.addObserver=mx(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yP(n){cv=n}function vP(n){return cv.loadJS(n)}function _P(){return cv.gapiScript}function EP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(n,e){const t=Ey(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(no(l,e??{}))return s;Vi(s,"already-initialized")}return t.initialize({options:e})}function bP(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(oa);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function SP(n,e,t){const a=jd(n);Fe(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=mR(e),{host:c,port:d}=AP(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){Fe(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Fe(no(g,a.config.emulator)&&no(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,Il(c)?(cA(`${l}//${c}${p}`),hA("Auth",!0)):wP()}function mR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AP(n){const e=mR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:qb(a.substr(l.length+1))}}else{const[l,c]=a.split(":");return{host:l,port:qb(c)}}}function qb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function wP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return sa("not implemented")}_getIdTokenResponse(e){return sa("not implemented")}_linkToIdToken(e,t){return sa("not implemented")}_getReauthenticationResolver(e){return sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(n,e){return eP(n,"POST","/v1/accounts:signInWithIdp",ov(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="http://localhost";class so extends pR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...l}=t;if(!a||!s)return null;const c=new so(a,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return dl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,dl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,dl(e,t)}buildRequest(){const e={requestUri:RP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends hv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Oc{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.FACEBOOK_SIGN_IN_METHOD="facebook.com";es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends Oc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return so._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return aa.credential(t,a)}catch{return null}}}aa.GOOGLE_SIGN_IN_METHOD="google.com";aa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Oc{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Oc{constructor(){super("twitter.com")}static credential(e,t){return so._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ns.credential(t,a)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await ii._fromIdTokenResponse(e,a,s),c=Gb(a);return new Sl({user:l,providerId:c,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=Gb(a);return new Sl({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function Gb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd extends ga{constructor(e,t,a,s){super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,nd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new nd(e,t,a,s)}}function gR(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?nd._fromErrorAndOperation(n,l,e,a):l})}async function CP(n,e,t=!1){const a=await lc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Sl._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IP(n,e,t=!1){const{auth:a}=n;if(ni(a.app))return Promise.reject(eo(a));const s="reauthenticate";try{const l=await lc(n,gR(a,s,e,n),t);Fe(l.idToken,a,"internal-error");const c=lv(l.idToken);Fe(c,a,"internal-error");const{sub:d}=c;return Fe(n.uid===d,a,"user-mismatch"),Sl._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Vi(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(n,e,t=!1){if(ni(n.app))return Promise.reject(eo(n));const a="signIn",s=await gR(n,a,e),l=await Sl._fromIdTokenResponse(n,a,s);return t||await n._updateCurrentUser(l.user),l}function NP(n,e,t,a){return vn(n).onIdTokenChanged(e,t,a)}function xP(n,e,t){return vn(n).beforeAuthStateChanged(e,t)}function OP(n,e,t,a){return vn(n).onAuthStateChanged(e,t,a)}const rd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rd,"1"),this.storage.removeItem(rd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=1e3,VP=10;class vR extends yR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!t&&this.localCache[a]===c||this.notifyListeners(a,c)},l=this.storage.getItem(a);hP()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,VP):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},MP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}vR.type="LOCAL";const PP=vR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R extends yR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_R.type="SESSION";const ER=_R;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new zd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await kP(d);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=fv("",20);s.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(){return window}function UP(n){xi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(){return typeof xi().WorkerGlobalScope<"u"&&typeof xi().importScripts=="function"}async function jP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function BP(){return TR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="firebaseLocalStorageDb",FP=1,id="firebaseLocalStorage",SR="fbase_key";class Mc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bd(n,e){return n.transaction([id],e?"readwrite":"readonly").objectStore(id)}function HP(){const n=indexedDB.deleteDatabase(bR);return new Mc(n).toPromise()}function Jg(){const n=indexedDB.open(bR,FP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(id,{keyPath:SR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(id)?e(a):(a.close(),await HP(),e(await Jg()))})})}async function $b(n,e,t){const a=Bd(n,!0).put({[SR]:e,value:t});return new Mc(a).toPromise()}async function qP(n,e){const t=Bd(n,!1).get(e),a=await new Mc(t).toPromise();return a===void 0?null:a.value}function Kb(n,e){const t=Bd(n,!0).delete(e);return new Mc(t).toPromise()}const GP=800,$P=3;class AR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>$P)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zd._getInstance(BP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await jP(),!this.activeServiceWorker)return;this.sender=new LP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jg();return await $b(e,rd,"1"),await Kb(e,rd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>$b(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>qP(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Bd(s,!1).getAll();return new Mc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AR.type="LOCAL";const KP=AR;new xc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(n,e){return e?oa(e):(Fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv extends pR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return dl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function YP(n){return DP(n.auth,new dv(n),n.bypassAuthState)}function QP(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),IP(t,new dv(n),n.bypassAuthState)}async function XP(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),CP(t,new dv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YP;case"linkViaPopup":case"linkViaRedirect":return XP;case"reauthViaPopup":case"reauthViaRedirect":return QP;default:Vi(this.auth,"internal-error")}}resolve(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=new xc(2e3,1e4);async function JP(n,e,t){if(ni(n.app))return Promise.reject(si(n,"operation-not-supported-in-this-environment"));const a=jd(n);KV(n,e,hv);const s=wR(a,t);return new Ws(a,"signInViaPopup",e,s).executeNotNull()}class Ws extends RR{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){da(this.filter.length===1,"Popup operations only handle one event");const e=fv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WP.get())};e()}}Ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="pendingRedirect",Sf=new Map;class e4 extends RR{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const a=await t4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function t4(n,e){const t=i4(e),a=r4(n);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}function n4(n,e){Sf.set(n._key(),e)}function r4(n){return oa(n._redirectPersistence)}function i4(n){return bf(ZP,n.config.apiKey,n.name)}async function a4(n,e,t=!1){if(ni(n.app))return Promise.reject(eo(n));const a=jd(n),s=wR(a,e),c=await new e4(a,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=600*1e3;class o4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!l4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!CR(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(si(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=s4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yb(e))}saveEventToCache(e){this.cachedEventUids.add(Yb(e)),this.lastProcessedEventTime=Date.now()}}function Yb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function CR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function l4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(n,e={}){return Vl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,h4=/^https?/;async function f4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await u4(n);for(const t of e)try{if(d4(t))return}catch{}Vi(n,"unauthorized-domain")}function d4(n){const e=Xg(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===a}if(!h4.test(t))return!1;if(c4.test(n))return a===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=new xc(3e4,6e4);function Qb(){const n=xi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function p4(n){return new Promise((e,t)=>{var s,l,c;function a(){Qb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qb(),t(si(n,"network-request-failed"))},timeout:m4.get()})}if((l=(s=xi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=xi().gapi)!=null&&c.load)a();else{const d=EP("iframefcb");return xi()[d]=()=>{gapi.load?a():t(si(n,"network-request-failed"))},vP(`${_P()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Af=null,e})}let Af=null;function g4(n){return Af=Af||p4(n),Af}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=new xc(5e3,15e3),v4="__/auth/iframe",_4="emulator/auth/iframe",E4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},T4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b4(n){const e=n.config;Fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sv(e,_4):`https://${n.config.authDomain}/${v4}`,a={apiKey:e.apiKey,appName:n.name,v:Dl},s=T4.get(n.config.apiHost);s&&(a.eid=s);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${vc(a).slice(1)}`}async function S4(n){const e=await g4(n),t=xi().gapi;return Fe(t,n,"internal-error"),e.open({where:document.body,url:b4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E4,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const c=si(n,"network-request-failed"),d=xi().setTimeout(()=>{l(c)},y4.get());function p(){xi().clearTimeout(d),s(a)}a.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w4=500,R4=600,C4="_blank",I4="http://localhost";class Xb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D4(n,e,t,a=w4,s=R4){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const p={...A4,width:a.toString(),height:s.toString(),top:l,left:c},g=Bn().toLowerCase();t&&(d=oR(g)?C4:t),aR(g)&&(e=e||I4,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[I,P])=>`${S}${I}=${P},`,"");if(cP(g)&&d!=="_self")return N4(e||"",d),new Xb(null);const E=window.open(e||"",d,v);Fe(E,n,"popup-blocked");try{E.focus()}catch{}return new Xb(E)}function N4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="__/auth/handler",O4="emulator/auth/handler",M4=encodeURIComponent("fac");async function Wb(n,e,t,a,s,l){Fe(n.config.authDomain,n,"auth-domain-config-required"),Fe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:Dl,eventId:s};if(e instanceof hv){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",dx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Oc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),g=p?`#${M4}=${encodeURIComponent(p)}`:"";return`${V4(n)}?${vc(d).slice(1)}${g}`}function V4({config:n}){return n.emulator?sv(n,O4):`https://${n.authDomain}/${x4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="webStorageSupport";class P4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ER,this._completeRedirectFn=a4,this._overrideRedirectResult=n4}async _openPopup(e,t,a,s){var c;da((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await Wb(e,t,a,Xg(),s);return D4(e,l,fv())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await Wb(e,t,a,Xg(),s);return UP(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(da(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await S4(e),a=new o4(e);return t.register("authEvent",s=>(Fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yg,{type:yg},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[yg];l!==void 0&&t(!!l),Vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=f4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fR()||sR()||uv()}}const k4=P4;var Jb="@firebase/auth",Zb="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j4(n){pl(new ro("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=a.options;Fe(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dR(n)},g=new gP(a,s,l,p);return bP(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),pl(new ro("auth-internal",e=>{const t=jd(e.getProvider("auth").getImmediate());return(a=>new L4(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ls(Jb,Zb,U4(n)),ls(Jb,Zb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=300,B4=uA("authIdTokenMaxAge")||z4;let eS=null;const F4=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>B4)return;const s=t==null?void 0:t.token;eS!==s&&(eS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function H4(n=pA()){const e=Ey(n,"auth");if(e.isInitialized())return e.getImmediate();const t=TP(n,{popupRedirectResolver:k4,persistence:[KP,PP,ER]}),a=uA("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const c=F4(l.toString());xP(t,c,()=>c(t.currentUser)),NP(t,d=>c(d))}}const s=oA("auth");return s&&SP(t,`http://${s}`),t}function q4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}yP({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=s=>{const l=si("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",q4().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j4("Browser");const G4={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function Zo(n){const e=G4[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const $4={apiKey:Zo("VITE_FIREBASE_API_KEY"),authDomain:Zo("VITE_FIREBASE_AUTH_DOMAIN"),projectId:Zo("VITE_FIREBASE_PROJECT_ID"),storageBucket:Zo("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:Zo("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:Zo("VITE_FIREBASE_APP_ID")},IR=mA($4),Al=H4(IR),K4=new aa,_n=DV(IR),DR=U.createContext(void 0),Y4=({children:n})=>{const[e,t]=U.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),a=U.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);U.useEffect(()=>{a(e)},[e,a]);const s=U.useCallback(c=>{t(c),a(c);const d=Al.currentUser;if(d){const p=Gr(_n,"users",d.uid);Ud(p,{preferredTheme:c}).catch(g=>console.error("Error updating preferred theme in Firebase:",g))}},[a]),l=U.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return U.useEffect(()=>Al.onAuthStateChanged(async d=>{if(d){const p=Gr(_n,"users",d.uid),g=await Dc(p);if(g.exists()&&g.data().preferredTheme){const v=g.data().preferredTheme;t(v),a(v)}}}),[a]),R.jsx(DR.Provider,{value:{theme:e,toggleTheme:l,setTheme:s},children:n})},Pl=({container:n=!0})=>{const e=R.jsx("div",{className:"spinner"});return n?R.jsx("div",{className:"spinner-container",children:e}):e},wl=()=>R.jsx("div",{className:"loading-container",children:R.jsx(Pl,{container:!1})}),Q4=()=>{const n=gt(a=>a.auth.firebaseUser),e=gt(a=>a.auth.userData);return gt(a=>a.auth.loading)?R.jsx(wl,{}):n?e?e.isApproved?R.jsx(as,{to:"/app/roster",replace:!0}):R.jsx(as,{to:"/guest",replace:!0}):R.jsx(wl,{}):R.jsx(as,{to:"/login",replace:!0})};function Dn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var X4=typeof Symbol=="function"&&Symbol.observable||"@@observable",tS=X4,vg=()=>Math.random().toString(36).substring(7).split("").join("."),W4={INIT:`@@redux/INIT${vg()}`,REPLACE:`@@redux/REPLACE${vg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${vg()}`},ad=W4;function mv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function NR(n,e,t){if(typeof n!="function")throw new Error(Dn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Dn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Dn(1));return t(NR)(n,e)}let a=n,s=e,l=new Map,c=l,d=0,p=!1;function g(){c===l&&(c=new Map,l.forEach((V,Y)=>{c.set(Y,V)}))}function v(){if(p)throw new Error(Dn(3));return s}function E(V){if(typeof V!="function")throw new Error(Dn(4));if(p)throw new Error(Dn(5));let Y=!0;g();const F=d++;return c.set(F,V),function(){if(Y){if(p)throw new Error(Dn(6));Y=!1,g(),c.delete(F),l=null}}}function S(V){if(!mv(V))throw new Error(Dn(7));if(typeof V.type>"u")throw new Error(Dn(8));if(typeof V.type!="string")throw new Error(Dn(17));if(p)throw new Error(Dn(9));try{p=!0,s=a(s,V)}finally{p=!1}return(l=c).forEach(F=>{F()}),V}function I(V){if(typeof V!="function")throw new Error(Dn(10));a=V,S({type:ad.REPLACE})}function P(){const V=E;return{subscribe(Y){if(typeof Y!="object"||Y===null)throw new Error(Dn(11));function F(){const K=Y;K.next&&K.next(v())}return F(),{unsubscribe:V(F)}},[tS](){return this}}}return S({type:ad.INIT}),{dispatch:S,subscribe:E,getState:v,replaceReducer:I,[tS]:P}}function J4(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:ad.INIT})>"u")throw new Error(Dn(12));if(typeof t(void 0,{type:ad.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Dn(13))})}function Z4(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const a=Object.keys(t);let s;try{J4(t)}catch(l){s=l}return function(c={},d){if(s)throw s;let p=!1;const g={};for(let v=0;v<a.length;v++){const E=a[v],S=t[E],I=c[E],P=S(I,d);if(typeof P>"u")throw d&&d.type,new Error(Dn(14));g[E]=P,p=p||P!==I}return p=p||a.length!==Object.keys(c).length,p?g:c}}function sd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...a)=>e(t(...a)))}function ek(...n){return e=>(t,a)=>{const s=e(t,a);let l=()=>{throw new Error(Dn(15))};const c={getState:s.getState,dispatch:(p,...g)=>l(p,...g)},d=n.map(p=>p(c));return l=sd(...d)(s.dispatch),{...s,dispatch:l}}}function tk(n){return mv(n)&&"type"in n&&typeof n.type=="string"}var xR=Symbol.for("immer-nothing"),nS=Symbol.for("immer-draftable"),Qn=Symbol.for("immer-state");function ri(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Sr=Object,Rl=Sr.getPrototypeOf,od="constructor",Fd="prototype",Zg="configurable",ld="enumerable",wf="writable",uc="value",ma=n=>!!n&&!!n[Qn];function li(n){var e;return n?OR(n)||qd(n)||!!n[nS]||!!((e=n[od])!=null&&e[nS])||Gd(n)||$d(n):!1}var nk=Sr[Fd][od].toString(),rS=new WeakMap;function OR(n){if(!n||!pv(n))return!1;const e=Rl(n);if(e===null||e===Sr[Fd])return!0;const t=Sr.hasOwnProperty.call(e,od)&&e[od];if(t===Object)return!0;if(!al(t))return!1;let a=rS.get(t);return a===void 0&&(a=Function.toString.call(t),rS.set(t,a)),a===nk}function Hd(n,e,t=!0){Vc(n)===0?(t?Reflect.ownKeys(n):Sr.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((a,s)=>e(s,a,n))}function Vc(n){const e=n[Qn];return e?e.type_:qd(n)?1:Gd(n)?2:$d(n)?3:0}var iS=(n,e,t=Vc(n))=>t===2?n.has(e):Sr[Fd].hasOwnProperty.call(n,e),ey=(n,e,t=Vc(n))=>t===2?n.get(e):n[e],ud=(n,e,t,a=Vc(n))=>{a===2?n.set(e,t):a===3?n.add(t):n[e]=t};function rk(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var qd=Array.isArray,Gd=n=>n instanceof Map,$d=n=>n instanceof Set,pv=n=>typeof n=="object",al=n=>typeof n=="function",_g=n=>typeof n=="boolean";function ik(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var ia=n=>n.copy_||n.base_,gv=n=>n.modified_?n.copy_:n.base_;function ty(n,e){if(Gd(n))return new Map(n);if($d(n))return new Set(n);if(qd(n))return Array[Fd].slice.call(n);const t=OR(n);if(e===!0||e==="class_only"&&!t){const a=Sr.getOwnPropertyDescriptors(n);delete a[Qn];let s=Reflect.ownKeys(a);for(let l=0;l<s.length;l++){const c=s[l],d=a[c];d[wf]===!1&&(d[wf]=!0,d[Zg]=!0),(d.get||d.set)&&(a[c]={[Zg]:!0,[wf]:!0,[ld]:d[ld],[uc]:n[c]})}return Sr.create(Rl(n),a)}else{const a=Rl(n);if(a!==null&&t)return{...n};const s=Sr.create(a);return Sr.assign(s,n)}}function yv(n,e=!1){return Kd(n)||ma(n)||!li(n)||(Vc(n)>1&&Sr.defineProperties(n,{set:uf,add:uf,clear:uf,delete:uf}),Sr.freeze(n),e&&Hd(n,(t,a)=>{yv(a,!0)},!1)),n}function ak(){ri(2)}var uf={[uc]:ak};function Kd(n){return n===null||!pv(n)?!0:Sr.isFrozen(n)}var cd="MapSet",ny="Patches",aS="ArrayMethods",MR={};function oo(n){const e=MR[n];return e||ri(0,n),e}var sS=n=>!!MR[n],cc,VR=()=>cc,sk=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:sS(cd)?oo(cd):void 0,arrayMethodsPlugin_:sS(aS)?oo(aS):void 0});function oS(n,e){e&&(n.patchPlugin_=oo(ny),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function ry(n){iy(n),n.drafts_.forEach(ok),n.drafts_=null}function iy(n){n===cc&&(cc=n.parent_)}var lS=n=>cc=sk(cc,n);function ok(n){const e=n[Qn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function uS(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[Qn].modified_&&(ry(e),ri(4)),li(n)&&(n=cS(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[Qn].base_,n,e)}else n=cS(e,t);return lk(e,n,!0),ry(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==xR?n:void 0}function cS(n,e){if(Kd(e))return e;const t=e[Qn];if(!t)return hd(e,n.handledSet_,n);if(!Yd(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:a}=t;if(a)for(;a.length>0;)a.pop()(n);LR(t,n)}return t.copy_}function lk(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&yv(e,t)}function PR(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var Yd=(n,e)=>n.scope_===e,uk=[];function kR(n,e,t,a){const s=ia(n),l=n.type_;if(a!==void 0&&ey(s,a,l)===e){ud(s,a,t,l);return}if(!n.draftLocations_){const d=n.draftLocations_=new Map;Hd(s,(p,g)=>{if(ma(g)){const v=d.get(g)||[];v.push(p),d.set(g,v)}})}const c=n.draftLocations_.get(e)??uk;for(const d of c)ud(s,d,t,l)}function ck(n,e,t){n.callbacks_.push(function(s){var d;const l=e;if(!l||!Yd(l,s))return;(d=s.mapSetPlugin_)==null||d.fixSetContents(l);const c=gv(l);kR(n,l.draft_??l,c,t),LR(l,s)})}function LR(n,e){var a;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((a=n.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const l=s.getPath(n);l&&s.generatePatches_(n,l,e)}PR(n)}}function hk(n,e,t){const{scope_:a}=n;if(ma(t)){const s=t[Qn];Yd(s,a)&&s.callbacks_.push(function(){Rf(n);const c=gv(s);kR(n,t,c,e)})}else li(t)&&n.callbacks_.push(function(){const l=ia(n);n.type_===3?l.has(t)&&hd(t,a.handledSet_,a):ey(l,e,n.type_)===t&&a.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&hd(ey(n.copy_,e,n.type_),a.handledSet_,a)})}function hd(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||ma(n)||e.has(n)||!li(n)||Kd(n)||(e.add(n),Hd(n,(a,s)=>{if(ma(s)){const l=s[Qn];if(Yd(l,t)){const c=gv(l);ud(n,a,c,n.type_),PR(l)}}else li(s)&&hd(s,e,t)})),n}function fk(n,e){const t=qd(n),a={type_:t?1:0,scope_:e?e.scope_:VR(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,l=fd;t&&(s=[a],l=hc);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return a.draft_=d,a.revoke_=c,[d,a]}var fd={get(n,e){if(e===Qn)return n;let t=n.scope_.arrayMethodsPlugin_;const a=n.type_===1&&typeof e=="string";if(a&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=ia(n);if(!iS(s,e,n.type_))return dk(n,s,e);const l=s[e];if(n.finalized_||!li(l)||a&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&ik(e))return l;if(l===Eg(n.base_,e)){Rf(n);const c=n.type_===1?+e:e,d=sy(n.scope_,l,n,c);return n.copy_[c]=d}return l},has(n,e){return e in ia(n)},ownKeys(n){return Reflect.ownKeys(ia(n))},set(n,e,t){const a=UR(ia(n),e);if(a!=null&&a.set)return a.set.call(n.draft_,t),!0;if(!n.modified_){const s=Eg(ia(n),e),l=s==null?void 0:s[Qn];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(rk(t,s)&&(t!==void 0||iS(n.base_,e,n.type_)))return!0;Rf(n),ay(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),hk(n,e,t)),!0},deleteProperty(n,e){return Rf(n),Eg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),ay(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=ia(n),a=Reflect.getOwnPropertyDescriptor(t,e);return a&&{[wf]:!0,[Zg]:n.type_!==1||e!=="length",[ld]:a[ld],[uc]:t[e]}},defineProperty(){ri(11)},getPrototypeOf(n){return Rl(n.base_)},setPrototypeOf(){ri(12)}},hc={};for(let n in fd){let e=fd[n];hc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}hc.deleteProperty=function(n,e){return hc.set.call(this,n,e,void 0)};hc.set=function(n,e,t){return fd.set.call(this,n[0],e,t,n[0])};function Eg(n,e){const t=n[Qn];return(t?ia(t):n)[e]}function dk(n,e,t){var s;const a=UR(e,t);return a?uc in a?a[uc]:(s=a.get)==null?void 0:s.call(n.draft_):void 0}function UR(n,e){if(!(e in n))return;let t=Rl(n);for(;t;){const a=Object.getOwnPropertyDescriptor(t,e);if(a)return a;t=Rl(t)}}function ay(n){n.modified_||(n.modified_=!0,n.parent_&&ay(n.parent_))}function Rf(n){n.copy_||(n.assigned_=new Map,n.copy_=ty(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var mk=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{if(al(e)&&!al(t)){const l=t;t=e;const c=this;return function(p=l,...g){return c.produce(p,v=>t.call(this,v,...g))}}al(t)||ri(6),a!==void 0&&!al(a)&&ri(7);let s;if(li(e)){const l=lS(this),c=sy(l,e,void 0);let d=!0;try{s=t(c),d=!1}finally{d?ry(l):iy(l)}return oS(l,a),uS(s,l)}else if(!e||!pv(e)){if(s=t(e),s===void 0&&(s=e),s===xR&&(s=void 0),this.autoFreeze_&&yv(s,!0),a){const l=[],c=[];oo(ny).generateReplacementPatches_(e,s,{patches_:l,inversePatches_:c}),a(l,c)}return s}else ri(1,e)},this.produceWithPatches=(e,t)=>{if(al(e))return(c,...d)=>this.produceWithPatches(c,p=>e(p,...d));let a,s;return[this.produce(e,t,(c,d)=>{a=c,s=d}),a,s]},_g(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),_g(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),_g(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){li(n)||ri(8),ma(n)&&(n=pk(n));const e=lS(this),t=sy(e,n,void 0);return t[Qn].isManual_=!0,iy(e),t}finishDraft(n,e){const t=n&&n[Qn];(!t||!t.isManual_)&&ri(9);const{scope_:a}=t;return oS(a,e),uS(void 0,a)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const a=oo(ny).applyPatches_;return ma(n)?a(n,e):this.produce(n,s=>a(s,e))}};function sy(n,e,t,a){const[s,l]=Gd(e)?oo(cd).proxyMap_(e,t):$d(e)?oo(cd).proxySet_(e,t):fk(e,t);return((t==null?void 0:t.scope_)??VR()).drafts_.push(s),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=a,t&&a!==void 0?ck(t,l,a):l.callbacks_.push(function(p){var v;(v=p.mapSetPlugin_)==null||v.fixSetContents(l);const{patchPlugin_:g}=p;l.modified_&&g&&g.generatePatches_(l,[],p)}),s}function pk(n){return ma(n)||ri(10,n),jR(n)}function jR(n){if(!li(n)||Kd(n))return n;const e=n[Qn];let t,a=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=ty(n,e.scope_.immer_.useStrictShallowCopy_),a=e.scope_.immer_.shouldUseStrictIteration()}else t=ty(n,!0);return Hd(t,(s,l)=>{ud(t,s,jR(l))},a),e&&(e.finalized_=!1),t}var gk=new mk,zR=gk.produce;function BR(n){return({dispatch:t,getState:a})=>s=>l=>typeof l=="function"?l(t,a,n):s(l)}var yk=BR(),vk=BR,_k=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?sd:sd.apply(null,arguments)},Ek=n=>n&&typeof n.match=="function";function Xu(n,e){function t(...a){if(e){let s=e(...a);if(!s)throw new Error(ua(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:a[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=a=>tk(a)&&a.type===n,t}var FR=class Bu extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Bu.prototype)}static get[Symbol.species](){return Bu}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Bu(...e[0].concat(this)):new Bu(...e.concat(this))}};function hS(n){return li(n)?zR(n,()=>{}):n}function cf(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function Tk(n){return typeof n=="boolean"}var bk=()=>function(e){const{thunk:t=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=e??{};let c=new FR;return t&&(Tk(t)?c.push(yk):c.push(vk(t.extraArgument))),c},Sk="RTK_autoBatch",fS=n=>e=>{setTimeout(e,n)},Ak=(n={type:"raf"})=>e=>(...t)=>{const a=e(...t);let s=!0,l=!1,c=!1;const d=new Set,p=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:fS(10):n.type==="callback"?n.queueNotification:fS(n.timeout),g=()=>{c=!1,l&&(l=!1,d.forEach(v=>v()))};return Object.assign({},a,{subscribe(v){const E=()=>s&&v(),S=a.subscribe(E);return d.add(v),()=>{S(),d.delete(v)}},dispatch(v){var E;try{return s=!((E=v==null?void 0:v.meta)!=null&&E[Sk]),l=!s,l&&(c||(c=!0,p(g))),a.dispatch(v)}finally{s=!0}}})},wk=n=>function(t){const{autoBatch:a=!0}=t??{};let s=new FR(n);return a&&s.push(Ak(typeof a=="object"?a:void 0)),s};function Rk(n){const e=bk(),{reducer:t=void 0,middleware:a,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(mv(t))d=Z4(t);else throw new Error(ua(1));let p;typeof a=="function"?p=a(e):p=e();let g=sd;s&&(g=_k({trace:!1,...typeof s=="object"&&s}));const v=ek(...p),E=wk(v);let S=typeof c=="function"?c(E):E();const I=g(...S);return NR(d,l,I)}function HR(n){const e={},t=[];let a;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(ua(28));if(d in e)throw new Error(ua(29));return e[d]=c,s},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return t.push({matcher:l,reducer:c}),s},addDefaultCase(l){return a=l,s}};return n(s),[e,t,a]}function Ck(n){return typeof n=="function"}function Ik(n,e){let[t,a,s]=HR(e),l;if(Ck(n))l=()=>hS(n());else{const d=hS(n);l=()=>d}function c(d=l(),p){let g=[t[p.type],...a.filter(({matcher:v})=>v(p)).map(({reducer:v})=>v)];return g.filter(v=>!!v).length===0&&(g=[s]),g.reduce((v,E)=>{if(E)if(ma(v)){const I=E(v,p);return I===void 0?v:I}else{if(li(v))return zR(v,S=>E(S,p));{const S=E(v,p);if(S===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return v},d)}return c.getInitialState=l,c}var Dk=(n,e)=>Ek(n)?n.match(e):n(e);function Nk(...n){return e=>n.some(t=>Dk(t,e))}var xk="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Ok=(n=21)=>{let e="",t=n;for(;t--;)e+=xk[Math.random()*64|0];return e},Mk=["name","message","stack","code"],Tg=class{constructor(n,e){Fp(this,"_type");this.payload=n,this.meta=e}},dS=class{constructor(n,e){Fp(this,"_type");this.payload=n,this.meta=e}},Vk=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of Mk)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},mS="External signal was aborted",Cr=(()=>{function n(e,t,a){const s=Xu(e+"/fulfilled",(p,g,v,E)=>({payload:p,meta:{...E||{},arg:v,requestId:g,requestStatus:"fulfilled"}})),l=Xu(e+"/pending",(p,g,v)=>({payload:void 0,meta:{...v||{},arg:g,requestId:p,requestStatus:"pending"}})),c=Xu(e+"/rejected",(p,g,v,E,S)=>({payload:E,error:(a&&a.serializeError||Vk)(p||"Rejected"),meta:{...S||{},arg:v,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function d(p,{signal:g}={}){return(v,E,S)=>{const I=a!=null&&a.idGenerator?a.idGenerator(p):Ok(),P=new AbortController;let B,V;function Y(z){V=z,P.abort()}g&&(g.aborted?Y(mS):g.addEventListener("abort",()=>Y(mS),{once:!0}));const F=(async function(){var te,G;let z;try{let b=(te=a==null?void 0:a.condition)==null?void 0:te.call(a,p,{getState:E,extra:S});if(kk(b)&&(b=await b),b===!1||P.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const A=new Promise((w,N)=>{B=()=>{N({name:"AbortError",message:V||"Aborted"})},P.signal.addEventListener("abort",B,{once:!0})});v(l(I,p,(G=a==null?void 0:a.getPendingMeta)==null?void 0:G.call(a,{requestId:I,arg:p},{getState:E,extra:S}))),z=await Promise.race([A,Promise.resolve(t(p,{dispatch:v,getState:E,extra:S,requestId:I,signal:P.signal,abort:Y,rejectWithValue:(w,N)=>new Tg(w,N),fulfillWithValue:(w,N)=>new dS(w,N)})).then(w=>{if(w instanceof Tg)throw w;return w instanceof dS?s(w.payload,I,p,w.meta):s(w,I,p)})])}catch(b){z=b instanceof Tg?c(null,I,p,b.payload,b.meta):c(b,I,p)}finally{B&&P.signal.removeEventListener("abort",B)}return a&&!a.dispatchConditionRejection&&c.match(z)&&z.meta.condition||v(z),z})();return Object.assign(F,{abort:Y,requestId:I,arg:p,unwrap(){return F.then(Pk)}})}}return Object.assign(d,{pending:l,rejected:c,fulfilled:s,settled:Nk(c,s),typePrefix:e})}return n.withTypes=()=>n,n})();function Pk(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function kk(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var Lk=Symbol.for("rtk-slice-createasyncthunk");function Uk(n,e){return`${n}/${e}`}function jk({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[Lk];return function(s){const{name:l,reducerPath:c=l}=s;if(!l)throw new Error(ua(11));const d=(typeof s.reducers=="function"?s.reducers(Bk()):s.reducers)||{},p=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(K,te){const G=typeof K=="string"?K:K.type;if(!G)throw new Error(ua(12));if(G in g.sliceCaseReducersByType)throw new Error(ua(13));return g.sliceCaseReducersByType[G]=te,v},addMatcher(K,te){return g.sliceMatchers.push({matcher:K,reducer:te}),v},exposeAction(K,te){return g.actionCreators[K]=te,v},exposeCaseReducer(K,te){return g.sliceCaseReducersByName[K]=te,v}};p.forEach(K=>{const te=d[K],G={reducerName:K,type:Uk(l,K),createNotation:typeof s.reducers=="function"};Hk(te)?Gk(G,te,v,e):Fk(G,te,v)});function E(){const[K={},te=[],G=void 0]=typeof s.extraReducers=="function"?HR(s.extraReducers):[s.extraReducers],b={...K,...g.sliceCaseReducersByType};return Ik(s.initialState,A=>{for(let w in b)A.addCase(w,b[w]);for(let w of g.sliceMatchers)A.addMatcher(w.matcher,w.reducer);for(let w of te)A.addMatcher(w.matcher,w.reducer);G&&A.addDefaultCase(G)})}const S=K=>K,I=new Map,P=new WeakMap;let B;function V(K,te){return B||(B=E()),B(K,te)}function Y(){return B||(B=E()),B.getInitialState()}function F(K,te=!1){function G(A){let w=A[K];return typeof w>"u"&&te&&(w=cf(P,G,Y)),w}function b(A=S){const w=cf(I,te,()=>new WeakMap);return cf(w,A,()=>{const N={};for(const[x,M]of Object.entries(s.selectors??{}))N[x]=zk(M,A,()=>cf(P,A,Y),te);return N})}return{reducerPath:K,getSelectors:b,get selectors(){return b(G)},selectSlice:G}}const z={name:l,reducer:V,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:Y,...F(c),injectInto(K,{reducerPath:te,...G}={}){const b=te??c;return K.inject({reducerPath:b,reducer:V},G),{...z,...F(b,!0)}}};return z}}function zk(n,e,t,a){function s(l,...c){let d=e(l);return typeof d>"u"&&a&&(d=t()),n(d,...c)}return s.unwrapped=n,s}var fo=jk();function Bk(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function Fk({type:n,reducerName:e,createNotation:t},a,s){let l,c;if("reducer"in a){if(t&&!qk(a))throw new Error(ua(17));l=a.reducer,c=a.prepare}else l=a;s.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?Xu(n,c):Xu(n))}function Hk(n){return n._reducerDefinitionType==="asyncThunk"}function qk(n){return n._reducerDefinitionType==="reducerWithPrepare"}function Gk({type:n,reducerName:e},t,a,s){if(!s)throw new Error(ua(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:p,settled:g,options:v}=t,E=s(n,l,v);a.exposeAction(e,E),c&&a.addCase(E.fulfilled,c),d&&a.addCase(E.pending,d),p&&a.addCase(E.rejected,p),g&&a.addMatcher(E.settled,g),a.exposeCaseReducer(e,{fulfilled:c||hf,pending:d||hf,rejected:p||hf,settled:g||hf})}function hf(){}function ua(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const $k={positions:[],loading:!1,error:null,fetched:!1},to=Cr("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=Gr(_n,"metadata","positions"),a=await Dc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),qR=Cr("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=Gr(_n,"metadata","positions");return await Ud(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),Kk=fo({name:"positions",initialState:$k,reducers:{},extraReducers:n=>{n.addCase(to.pending,e=>{e.loading=!0,e.error=null}).addCase(to.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(to.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(qR.fulfilled,(e,t)=>{e.positions=t.payload})}}),Yk=Kk.reducer,Qk={teams:[],loading:!1,error:null,fetched:!1},ml=Cr("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=Gr(_n,"metadata","teams"),a=await Dc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),Cf=Cr("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=Gr(_n,"metadata","teams");return await Ud(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),GR=fo({name:"teams",initialState:Qk,reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(ml.pending,e=>{e.loading=!0,e.error=null}).addCase(ml.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(ml.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Cf.pending,e=>{e.error=null}).addCase(Cf.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(Cf.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:lU}=GR.actions,Xk=GR.reducer,Wk=()=>{const n=Pi(),{firebaseUser:e,userData:t,loading:a}=gt(c=>c.auth),{fetched:s}=gt(c=>c.teams),{fetched:l}=gt(c=>c.positions);return U.useEffect(()=>{e&&(s||n(ml()),l||n(to()))},[n,e,s,l]),a?R.jsx(wl,{}):e?t?t.isApproved?R.jsx(JS,{}):R.jsx(as,{to:"/guest",replace:!0}):R.jsx(wl,{}):R.jsx(as,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=(...n)=>n.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=n=>{const e=Zk(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=U.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},p)=>U.createElement("svg",{ref:p,...eL,width:e,height:e,stroke:n,strokeWidth:a?Number(t)*24/Number(e):t,className:$R("lucide",s),...!l&&!tL(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,v])=>U.createElement(g,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=(n,e)=>{const t=U.forwardRef(({className:a,...s},l)=>U.createElement(nL,{ref:l,iconNode:e,className:$R(`lucide-${Jk(pS(n))}`,`lucide-${n}`,a),...s}));return t.displayName=pS(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],KR=kl("chevron-up",rL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],YR=kl("corner-down-right",iL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],sL=kl("moon",aL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],lL=kl("panel-left-close",oL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],cL=kl("panel-left-open",uL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],fL=kl("sun",hL),dL=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},mL={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:dL()},QR=fo({name:"ui",initialState:mL,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},toggleTeamExpansion:(n,e)=>{const t=e.payload,a=n.expandedTeams.indexOf(t);a>=0?n.expandedTeams.splice(a,1):n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:a,userEmail:s}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][a]||(n.hiddenUsers[t][a]=[]);const l=n.hiddenUsers[t][a],c=l.indexOf(s);c>=0?l.splice(c,1):l.push(s),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))}}}),{setMobileSidebarOpen:Fu,setDesktopSidebarExpanded:pL,toggleTeamExpansion:gL,toggleUserVisibility:yL}=QR.actions,vL=QR.reducer,_L=()=>{const n=U.useContext(DR);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},vv=({showText:n})=>{const{theme:e,toggleTheme:t}=_L();return R.jsxs("button",{className:"theme-toggle-button",onClick:t,"aria-label":"Toggle theme",children:[e==="dark"?R.jsx(fL,{size:20}):R.jsx(sL,{size:20}),n&&R.jsx("span",{children:"Toggle theme"})]})},EL=({title:n})=>{const e=Pi(),{isMobileSidebarOpen:t}=gt(a=>a.ui);return R.jsxs("header",{className:"mobile-header",children:[R.jsxs("div",{className:`mobile-header-pill ${t?"mobile-header-pill-active":""}`,onClick:()=>e(Fu(!t)),children:[R.jsx("span",{className:"mobile-header-text",children:n}),R.jsx(KR,{className:`mobile-header-chevron ${t?"rotate":""}`})]}),R.jsx(vv,{})]})};var Kn=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(Kn||{}),ol=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(ol||{});const XR=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],bg=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],TL=()=>{const n=pc(),e=ui(),t=e.pathname.includes("/settings")?Kn.SETTINGS:e.pathname.includes("/dashboard")?Kn.DASHBOARD:Kn.ROSTER,a=s=>{n(`/app/${s}`)};return R.jsx("nav",{className:"bottom-nav-container",children:R.jsx("div",{className:"bottom-nav",children:XR.map(s=>R.jsxs("button",{className:`bottom-nav-btn ${t===s.id?"bottom-nav-btn-active":""}`,onClick:()=>a(s.id),children:[R.jsx("span",{children:s.icon}),R.jsx("span",{children:s.label})]},s.id))})})},bL=()=>{var z;const n=pc(),e=ui(),t=yd(),a=Pi(),{userData:s}=gt(K=>K.auth),{isDesktopSidebarExpanded:l,expandedTeams:c}=gt(K=>K.ui),{teams:d,fetched:p,loading:g}=gt(K=>K.teams),{fetched:v}=gt(K=>K.positions),E=e.pathname.includes("/settings")?Kn.SETTINGS:Kn.ROSTER,{teamName:S,positionName:I,section:P}=t,B=I||P;U.useEffect(()=>{p||a(ml()),v||a(to())},[a,p,v]);const V=U.useCallback(K=>{n(K)},[n]),Y=K=>{a(gL(K))},F=()=>{const K=E===Kn.ROSTER?{label:"Roster"}:bg.find(G=>G.id===B)||{label:"Settings"},te=K?K.label:"GIG ROSTER";return S&&B?`${S}  ${B}`:S||(B?`${te}  ${B}`:te)};return R.jsxs("aside",{className:"side-nav",children:[R.jsxs("div",{className:"sidebar-content",children:[R.jsxs("div",{className:"tablet-sidebar-header",children:[l&&R.jsx("h3",{children:F()}),R.jsx("button",{className:"sidebar-toggle-button",onClick:()=>a(pL(!l)),"aria-label":l?"Collapse sidebar":"Expand sidebar",children:l?R.jsx(lL,{size:20}):R.jsx(cL,{size:20})})]}),R.jsxs("nav",{className:"side-menu-list",children:[E===Kn.ROSTER&&g&&R.jsx("div",{className:"side-nav-item loading",children:"Loading teams..."}),E===Kn.ROSTER?(z=s==null?void 0:s.teams)==null?void 0:z.map(K=>{var A,w;const te=d.find(N=>N.name===K);if(!te)return null;const G=s.teams.length===1,b=G||c.includes(te.name);return R.jsxs("div",{children:[!G&&R.jsxs("div",{className:"sidenav-menu-subheading sidenav-menu-subheading-clickable",style:{cursor:"pointer"},onClick:()=>Y(te.name),children:[R.jsxs("div",{children:[te.emoji," ",l&&te.name]}),R.jsx("span",{className:"expand-icon",children:b?"":""})]}),b&&R.jsxs("div",{className:"side-nav-sub-items",children:[(w=(A=te.positions)==null?void 0:A.filter(N=>!N.parentId))==null?void 0:w.map(N=>{const x=B===N.name&&S===te.name;return R.jsxs("button",{className:`side-nav-item side-nav-item-sub ${x?"side-nav-item-active":""}`,onClick:()=>{V(`/app/roster/${te.name}/${N.name}`),a(Fu(!1))},style:{borderLeft:x?`4px solid ${N.colour}`:"4px solid transparent",backgroundColor:x?`${N.colour}15`:"transparent",color:x?N.colour:""},children:[R.jsx("span",{className:"side-emoji",children:N.emoji})," ",l&&N.name]},N.name)}),R.jsxs("button",{className:`side-nav-item side-nav-item-sub ${B==="Absence"&&S===te.name?"side-nav-item-active":""}`,onClick:()=>{V(`/app/roster/${te.name}/Absence`),a(Fu(!1))},style:{borderLeft:B==="Absence"&&S===te.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:B==="Absence"&&S===te.name?"var(--background-toggle-off-transparent)":"transparent"},children:[R.jsx("span",{className:"side-emoji",children:""})," ",l&&"Absence"]})]})]},te.name)}):bg.filter(K=>!K.adminOnly).map(K=>R.jsxs("button",{className:`side-nav-item ${B===K.id?"side-nav-item-active":""}`,onClick:()=>{V(`/app/settings/${K.id}`),a(Fu(!1))},children:[R.jsx("span",{className:"side-emoji",children:K.icon})," ",l&&K.label]},K.id))]})]}),(s==null?void 0:s.isAdmin)&&E===Kn.SETTINGS&&R.jsxs("div",{className:"admin-only-section-wrapper",children:[R.jsx("div",{className:"sidenav-menu-subheading",children:l&&R.jsx("h4",{children:"Admin Only"})}),bg.filter(K=>K.adminOnly).map(K=>R.jsxs("button",{className:`side-nav-item ${B===K.id?"side-nav-item-active":""}`,onClick:()=>{V(`/app/settings/${K.id}`),a(Fu(!1))},children:[R.jsx("span",{className:"side-emoji",children:K.icon})," ",l&&K.label]},K.id))]}),R.jsx("div",{className:"sidebar-footer",children:R.jsx(vv,{showText:l})})]})},SL=()=>{const n=pc(),e=ui(),t=yd(),{userData:a}=gt(P=>P.auth),{teams:s}=gt(P=>P.teams),{isMobileSidebarOpen:l,isDesktopSidebarExpanded:c}=gt(P=>P.ui),d=e.pathname.includes("/settings")?Kn.SETTINGS:e.pathname.includes("/dashboard")?Kn.DASHBOARD:Kn.ROSTER,{teamName:p,positionName:g,section:v}=t,E=g||v||null;U.useEffect(()=>{if(e.pathname==="/app"||e.pathname==="/app/")n("/app/dashboard",{replace:!0});else if(d===Kn.ROSTER&&!p&&!E){if(a!=null&&a.teams&&a.teams.length>0&&s.length>0){const P=a.teams[0],B=s.find(V=>V.name===P);B&&B.positions&&B.positions.length>0&&n(`/app/roster/${B.name}/${B.positions[0].name}`,{replace:!0})}}else d===Kn.SETTINGS&&!E&&n(`/app/settings/${ol.PROFILE}`,{replace:!0})},[d,p,E,a,s,n,e.pathname]);const S=()=>{const P=XR.find(V=>V.id===d),B=P?P.label:"GIG ROSTER";return p&&E?`${p}  ${E}`:p||(E?`${B}  ${E}`:B)},I=["app-shell",l?"menu-open":"",c?"sidebar-expanded":"sidebar-collapsed"].filter(Boolean).join(" ");return R.jsxs(R.Fragment,{children:[R.jsx(EL,{title:S()}),R.jsxs("div",{className:I,children:[R.jsx(bL,{}),R.jsx("main",{className:"main-content",children:R.jsx("div",{className:"content-container",children:R.jsx(JS,{})})}),R.jsx(TL,{})]})]})},AL={entries:{},dirtyEntries:{},loading:!1,saving:!1,error:null},Wu=Cr("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Ic(wc(_n,"roster")),a=await Nc(t),s={};return a.docs.forEach(l=>{const c=l.data(),d=c.updatedAt,p={...c,updatedAt:d&&typeof d=="object"&&"toMillis"in d?d.toMillis():d};s[l.id]={...p,id:l.id}}),s}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),If=Cr("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=Ww(_n),a=Date.now(),s={};return Object.values(n).forEach(l=>{const c=Gr(_n,"roster",l.id),d={...l,updatedAt:a};t.set(c,d),s[l.id]=d}),await t.commit(),s}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),WR=fo({name:"roster",initialState:AL,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:a,userIdentifier:s,positionGroupNames:l,maxConflict:c}=e.payload,d=n.dirtyEntries[t]||n.entries[t];let p;d?p=JSON.parse(JSON.stringify(d)):p={id:t,date:t,teams:{},absence:{}},p.teams[a]||(p.teams[a]={});const g=p.teams[a][s]||[],v=l.findIndex(P=>g.includes(P)),E=v>=0?l[v]:null;let S=null;E===null?S=l[0]:v<l.length-1?S=l[v+1]:S=null;const I=g.filter(P=>!l.includes(P));if(S)if(I.length<c)I.push(S);else{n.error=`User already has ${c} assignment(s) in this team.`;return}I.length===0?delete p.teams[a][s]:p.teams[a][s]=I,n.dirtyEntries[t]=p},resetRosterEdits(n){n.dirtyEntries={},n.error=null},updateLocalAbsence(n,e){var p;const{date:t,userIdentifier:a,reason:s,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let d;c?d=JSON.parse(JSON.stringify(c)):d={id:t,date:t,teams:{},absence:{}},l?d.absence[a]={reason:s??((p=d.absence[a])==null?void 0:p.reason)??""}:delete d.absence[a],n.dirtyEntries[t]=d}},extraReducers:n=>{n.addCase(Wu.pending,e=>{e.loading=!0,e.error=null}).addCase(Wu.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(Wu.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(If.pending,e=>{e.saving=!0,e.error=null}).addCase(If.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(If.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:uU,updateLocalAssignment:wL,resetRosterEdits:RL,updateLocalAbsence:gS}=WR.actions,CL=WR.reducer,Df=(n,e,t)=>{const a=[],s=new Date;s.setHours(0,0,0,0);const l=s.getFullYear(),c=e||l,d=t||l,p={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g=n.map(I=>p[I]);let v;c===l?v=new Date(s):v=new Date(c,0,1),v.setHours(0,0,0,0);const E=new Date(d,11,31);E.setHours(23,59,59,999);const S=new Date(v);for(;S.getTime()<=E.getTime();)g.includes(S.getDay())&&a.push(new Date(S)),S.setDate(S.getDate()+1);return a.sort((I,P)=>I.getTime()-P.getTime()),a.map(I=>I.toISOString())},IL=(n,e,t=5)=>{const a=[],s=new Date(e);s.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(p=>l[p]),d=new Date(s);for(;a.length<t;){d.setDate(d.getDate()-1),c.includes(d.getDay())&&a.push(new Date(d));const p=new Date(s);if(p.setFullYear(p.getFullYear()-1),d<p)break}return a.map(p=>p.toISOString()).sort()},DL={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},Nf=Cr("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=wc(_n,"users"),a=Ic(t,tv("teams","array-contains",n)),s=await Nc(a),l=[];return s.forEach(c=>{l.push(c.data())}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),xf=Cr("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:a})=>{if(!n||!e)return[];try{const c=a().positions.positions.filter(I=>I.parentId===e),p=[e,...c.map(I=>I.name)].map(I=>`${n}|${I}`),g=wc(_n,"users"),v=Ic(g,tv("indexedAssignments","array-contains-any",p)),E=await Nc(v),S=[];return E.forEach(I=>{S.push(I.data())}),S.sort((I,P)=>(I.name||"").localeCompare(P.name||""))}catch(s){return console.error("Error fetching users:",s),t("Failed to load users.")}}),Of=Cr("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=Gr(_n,"metadata","teams"),a=await Dc(t);if(a.exists()){const s=a.data();return(Array.isArray(s.list)?s.list.map(d=>({...d,preferredDays:d.preferredDays||[],positions:d.positions||[]})):[]).find(d=>d.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),JR=fo({name:"rosterView",initialState:DL,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=IL(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=Df(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,a=Df(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...a]}}},extraReducers:n=>{n.addCase(xf.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(xf.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(xf.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(Nf.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(Nf.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(Nf.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(Of.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(Of.fulfilled,(e,t)=>{var a;e.currentTeamData=t.payload,(a=t.payload)!=null&&a.preferredDays&&(e.rosterDates=Df(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(Of.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:NL,resetToUpcomingDates:xL,loadNextYearDates:OL}=JR.actions,ML=JR.reducer,VL=()=>{const n=Pi(),{userData:e}=gt(z=>z.auth),{teams:t}=gt(z=>z.teams),{entries:a,loading:s}=gt(z=>z.roster),{positions:l}=gt(z=>z.positions),[c,d]=U.useState([]),[p,g]=U.useState(!1),[v,E]=U.useState(0),S=U.useRef(null);U.useEffect(()=>{n(Wu())},[n]),U.useEffect(()=>{(async()=>{if(!(!(e!=null&&e.teams)||e.teams.length===0)){g(!0);try{const K=wc(_n,"users"),te=Ic(K,tv("teams","array-contains-any",e.teams)),G=await Nc(te),b=[];G.forEach(A=>b.push(A.data())),d(b)}catch(K){console.error("Error fetching users for dashboard:",K)}finally{g(!1)}}})()},[e==null?void 0:e.teams]);const I=U.useMemo(()=>{if(!(e!=null&&e.teams)||t.length===0)return[];const z=t.filter(te=>e.teams.includes(te.name)),K=new Set;return z.forEach(te=>{Df(te.preferredDays).forEach(b=>K.add(b))}),Array.from(K).sort().filter(te=>{const G=te.split("T")[0],b=a[G];return b?z.some(A=>{var N;const w=((N=b.teams)==null?void 0:N[A.name])||{};return Object.values(w).some(x=>x.length>0)}):!1})},[e,t,a]),P=U.useCallback(z=>{if(!z||!(e!=null&&e.teams)||t.length===0)return null;const K=z.split("T")[0],te=a[K],A=t.filter(w=>e.teams.includes(w.name)).map(w=>{var Pe;const N=((Pe=te==null?void 0:te.teams)==null?void 0:Pe[w.name])||{},x=[],M=w.positions.map(Be=>Be.name);let O=0;return M.forEach(Be=>{const Q=l.find(me=>me.name===Be),fe=[];Object.entries(N).forEach(([me,Oe])=>{if(Oe.includes(Be)){const Me=c.find(j=>j.email===me);fe.push((Me==null?void 0:Me.name)||me),O++}}),x.push({posName:Be,emoji:(Q==null?void 0:Q.emoji)||"",names:fe})}),{teamName:w.name,teamEmoji:w.emoji,positions:x,hasAssignments:O>0}}).filter(w=>w.hasAssignments);return A.length>0?A:null},[a,e,t,l,c]),B=(z,K,te)=>{let b=`${new Date(z).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})} - ${K}
`;te.forEach(A=>{const w=A.names.length>0?A.names.join(", "):"-";b+=`${A.emoji}: ${w}
`}),navigator.clipboard.writeText(b).then(()=>{})},V=()=>{if(!S.current)return;const z=S.current,K=Math.round(z.scrollLeft/z.offsetWidth);K!==v&&E(K)};if(s||p)return R.jsx(Pl,{});if(I.length===0)return R.jsxs("div",{className:"dashboard-empty",children:[R.jsx("h2",{children:"No upcoming events found"}),R.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const Y=z=>new Date(z).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}),F=(z,K=!1)=>{const te=P(z);return te?R.jsx("div",{className:"team-cards-container",children:te.map(G=>R.jsxs("div",{className:"team-event-card",children:[R.jsxs("div",{className:"team-event-header",children:[R.jsxs("h3",{children:[R.jsx("span",{className:"team-card-emoji",children:G.teamEmoji}),R.jsx("span",{className:"team-card-name",children:G.teamName})]}),!K&&R.jsx("button",{className:"copy-roster-btn",onClick:()=>B(z,G.teamName,G.positions),title:"Copy to clipboard",children:" Copy"})]}),R.jsx("div",{className:"team-event-details",children:G.positions.map(b=>R.jsxs("div",{className:"pos-assignment-row",children:[R.jsx("span",{className:"pos-emoji-label",title:b.posName,children:b.emoji}),R.jsx("span",{className:`assigned-names ${b.names.length===0?"unassigned":""}`,children:b.names.length>0?b.names.join(", "):"Unassigned"})]},b.posName))})]},G.teamName))}):null};return R.jsxs("div",{className:"dashboard-container",children:[R.jsx("div",{className:"dashboard-header",children:R.jsx("h1",{children:"Upcoming Events"})}),R.jsx("div",{className:"carousel-outer-wrapper",children:R.jsx("div",{className:"events-carousel-track",ref:S,onScroll:V,children:I.map((z,K)=>R.jsxs("div",{className:`event-card-wrapper ${K===v?"active":"peek"}`,children:[R.jsx("div",{className:"event-card-date",children:Y(z)}),F(z,K!==v)]},z))})}),R.jsxs("div",{className:"carousel-pagination",children:[v+1," / ",I.length]})]})},Ri=({children:n,nowrap:e})=>R.jsx("div",{className:`pill-group ${e?"pill-group-nowrap":""}`,children:n}),Yn=({colour:n,isDropdown:e,isActive:t,isDisabled:a,minWidth:s,onClick:l,children:c})=>{const[d,p]=U.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),R.jsxs("div",{className:`pill pill--text ${t?"pill-active":""} ${a?"pill-disabled":""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:s?`${s}px`:"fit-content"},onClick:g=>{a||(p(v=>!v),l&&l(g))},children:[c,e&&R.jsx(KR,{style:{rotate:d?"90deg":"0"}})]})},ZR=n=>{const e=[];return Object.entries(n).forEach(([t,a])=>{a.forEach(s=>{e.push(`${t}|${s}`)})}),e},PL={firebaseUser:null,userData:null,loading:!0,error:null},Mf=Cr("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=Gr(_n,"users",n),a=await Dc(t);if(!a.exists()){const s="chris.sm.kang542@gmail.com",l=Al.currentUser,c=(l==null?void 0:l.email)===s,d={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await BV(t,d),d}return a.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),Vf=Cr("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const a=Gr(_n,"users",n),s={...e};return s.teamPositions&&(s.indexedAssignments=ZR(s.teamPositions)),await Ud(a,s),s}catch(a){return t(a instanceof Error?a.message:"Failed to update profile")}}),e1=fo({name:"auth",initialState:PL,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(Mf.pending,e=>{e.loading=!0,e.error=null}).addCase(Mf.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(Mf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Vf.pending,e=>{e.error=null}).addCase(Vf.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(Vf.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:kL,setUserData:LL,setLoading:cU,logout:UL}=e1.actions,jL=e1.reducer,t1=()=>{const n=Pi(),{userData:e,firebaseUser:t}=gt(z=>z.auth),a=gt(z=>z.teams.teams),[s,l]=U.useState((e==null?void 0:e.name)||""),[c,d]=U.useState((e==null?void 0:e.gender)||""),[p,g]=U.useState((e==null?void 0:e.isActive)??!0),[v,E]=U.useState((e==null?void 0:e.teams)||[]),[S,I]=U.useState((e==null?void 0:e.teamPositions)||{}),[P,B]=U.useState("idle"),V=async()=>{if(t){B("saving");try{const z={name:s,gender:c,isActive:p,teams:v,teamPositions:S};await n(Vf({uid:t.uid,data:z})).unwrap(),B("success"),setTimeout(()=>B("idle"),2e3)}catch(z){console.error(z),B("idle")}}},Y=z=>{E(K=>{const te=K.includes(z),G=te?K.filter(b=>b!==z):[...K,z];return I(b=>{const A={...b};return te?delete A[z]:A[z]||(A[z]=[]),A}),G})},F=(z,K)=>{I(te=>{const G=te[z]||[],b=G.includes(K)?G.filter(A=>A!==K):[...G,K];return{...te,[z]:b}})};return e?R.jsxs("section",{className:"profile-card",children:[R.jsx("div",{className:"profile-readonly",children:R.jsxs("p",{children:[R.jsx("strong",{children:"Email:"})," ",e.email]})}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"Name"}),R.jsx(Ri,{children:R.jsx("input",{type:"text",value:s,onChange:z=>l(z.target.value),className:"form-input form-input-width-auto"})})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"Gender"}),R.jsx(Ri,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(z=>R.jsx(Yn,{colour:z.colour,onClick:()=>d(z.value),isActive:c===z.value,children:z.value},z.value))})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"My Teams"}),R.jsx(Ri,{children:a.map(z=>{const K=v.includes(z.name);return R.jsxs(Yn,{onClick:()=>Y(z.name),isActive:K,children:[R.jsx("span",{children:z.emoji})," ",z.name]},z.name)})})]}),v.length>0&&R.jsxs("div",{className:"team-positions-section",children:[R.jsx("label",{className:"section-label",children:"Positions per Team"}),v.map(z=>{var te,G;const K=a.find(b=>b.name===z);return K?R.jsxs("div",{className:"team-position-group",children:[R.jsxs("div",{className:"team-position-header",children:[K.emoji," ",K.name]}),R.jsx(Ri,{children:(G=(te=K.positions)==null?void 0:te.filter(b=>!b.parentId))==null?void 0:G.map(b=>{var w;const A=(w=S[z])==null?void 0:w.includes(b.name);return R.jsxs(Yn,{onClick:()=>F(z,b.name),isActive:A,colour:b.colour,children:[R.jsx("span",{children:b.emoji})," ",b.name]},b.name)})})]},z):null})]}),R.jsxs("div",{className:"form-group",children:[R.jsx("label",{children:"Availability Status"}),R.jsx(Yn,{colour:p?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>g(!p),isActive:!0,children:p?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),R.jsx("p",{className:"form-field-hint",children:"Turn off if you want to be hidden from the roster."})]}),R.jsxs("div",{className:"action-container",children:[R.jsx("button",{onClick:V,disabled:P!=="idle",className:`save-button ${P}`,children:P==="saving"?"Saving...":P==="success"?"Done ":"Update Profile"}),R.jsx("button",{onClick:()=>Al.signOut(),className:"logout-btn",children:"Logout"})]})]}):R.jsx("div",{children:"Loading profile..."})},zL=()=>{const{userData:n,firebaseUser:e,loading:t}=gt(a=>a.auth);return t?R.jsx(wl,{}):e?n?n.isApproved?R.jsx(as,{to:"/app",replace:!0}):R.jsxs("div",{className:"guest-container",children:[R.jsxs("header",{className:"guest-header",children:[R.jsx("h2",{className:"brand-title",children:"God is Good"}),R.jsx("p",{className:"pending-label",children:"PENDING ADMIN APPROVAL"}),R.jsx("div",{className:"guest-theme-toggle-container",children:R.jsx(vv,{})})]}),R.jsx(t1,{})]}):R.jsx(wl,{}):R.jsx(as,{to:"/login",replace:!0})},BL=()=>{const{firebaseUser:n,loading:e}=gt(a=>a.auth),t=()=>JP(Al,K4);return e?null:n?R.jsx(as,{to:"/",replace:!0}):R.jsxs("div",{className:"login-container",children:[R.jsxs("header",{className:"login-header",children:[R.jsx("h1",{className:"brand-title",children:"God is Good"}),R.jsx("p",{className:"brand-subtitle",children:"Worship Team Roster"})]}),R.jsx("div",{className:"login-button-container",children:R.jsxs("button",{onClick:t,className:"login-button google",children:[R.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},FL=()=>{const n=Pi(),{teamName:e,positionName:t}=yd(),{users:a,allTeamUsers:s,rosterDates:l,currentTeamData:c,loadingUsers:d,loadingTeam:p,loadingAllTeamUsers:g,error:v}=gt(ue=>ue.rosterView),{entries:E,dirtyEntries:S,saving:I,error:P}=gt(ue=>ue.roster),{teams:B}=gt(ue=>ue.teams),{positions:V}=gt(ue=>ue.positions),{hiddenUsers:Y}=gt(ue=>ue.ui),[F,z]=U.useState(null),[K,te]=U.useState(!1),[G,b]=U.useState(null),A=Object.keys(S).length>0,w=U.useMemo(()=>V.find(ue=>ue.name===t),[V,t]),N=U.useMemo(()=>c?c.positions.filter(ue=>ue.name!==t):[],[c,t]),x=U.useMemo(()=>{var ue;return!e||!t?[]:((ue=Y[e])==null?void 0:ue[t])||[]},[Y,e,t]),M=U.useMemo(()=>{const ue=a.filter(Ee=>Ee.email&&!x.includes(Ee.email));return w!=null&&w.sortByGender?ue.sort((Ee,He)=>Ee.gender===He.gender?(Ee.name||"").localeCompare(He.name||""):Ee.gender==="Male"?-1:He.gender==="Male"?1:(Ee.gender||"").localeCompare(He.gender||"")):ue},[a,w,x]),O=U.useMemo(()=>{if(!(w!=null&&w.sortByGender)||M.length===0)return-1;const ue=M.findIndex(Ee=>Ee.gender==="Female");return ue>0&&ue<M.length?ue:-1},[w,M]),Pe=ue=>{!e||!t||n(yL({teamName:e,positionName:t,userEmail:ue}))},Be=()=>{n(NL())},Q=()=>{n(xL())},fe=()=>{n(OL())},me=U.useCallback(ue=>{if(!G||!e)return[];const Ee=ue.split("T")[0],He=S[Ee]||E[Ee];return!He||!He.teams[e]?[]:Object.entries(He.teams[e]).filter(([,Ne])=>Ne.includes(G)).map(([Ne])=>{const Ie=s.find(tt=>tt.email===Ne);return(Ie==null?void 0:Ie.name)||Ne})},[G,e,S,E,s]);U.useEffect(()=>{n(Wu())},[n]),U.useEffect(()=>{t&&e&&t!=="Absence"&&n(xf({teamName:e,positionName:t}))},[t,e,n]),U.useEffect(()=>{e&&(n(Of(e)),n(Nf(e)))},[e,n]);const Oe=U.useCallback((ue,Ee)=>{const He=ue.split("T")[0],Ne=S[He]||E[He];return!!(Ne&&Ne.absence&&Ne.absence[Ee])},[S,E]),Me=U.useCallback((ue,Ee)=>{var Ie,tt;const He=ue.split("T")[0],Ne=S[He]||E[He];return((tt=(Ie=Ne==null?void 0:Ne.absence)==null?void 0:Ie[Ee])==null?void 0:tt.reason)||""},[S,E]),j=U.useCallback((ue,Ee)=>{if(!e||!t||t==="Absence")return!1;if(Oe(ue,Ee))return!0;const He=ue.split("T")[0],Ne=S[He]||E[He],Ie=B.find(Mn=>Mn.name===e),tt=(Ie==null?void 0:Ie.maxConflict)||1;if(!Ne||!Ne.teams[e]||!Ne.teams[e][Ee])return!1;const nt=Ne.teams[e][Ee],Ge=V.filter(Mn=>Mn.parentId===t),at=[t,...Ge.map(Mn=>Mn.name)];return nt.some(Mn=>at.includes(Mn))?!1:nt.length>=tt},[e,t,Oe,S,E,B,V]),ie=U.useCallback((ue,Ee,He,Ne)=>{if(!e||!t||t==="Absence"||j(ue,Ee)){z({row:He,col:Ne,table:"roster"});return}z({row:He,col:Ne,table:"roster"});const Ie=B.find(at=>at.name===e),tt=(Ie==null?void 0:Ie.maxConflict)||1,nt=V.filter(at=>at.parentId===t),Ge=[t,...nt.map(at=>at.name)];n(wL({date:ue.split("T")[0],teamName:e,userIdentifier:Ee,positionGroupNames:Ge,maxConflict:tt}))},[n,e,t,j,B,V]),de=U.useCallback((ue,Ee,He,Ne)=>{z({row:He,col:Ne,table:"absence"});const Ie=Oe(ue,Ee);n(gS({date:ue.split("T")[0],userIdentifier:Ee,isAbsent:!Ie}))},[n,Oe]),ve=U.useCallback((ue,Ee,He)=>{n(gS({date:ue.split("T")[0],userIdentifier:Ee,reason:He,isAbsent:!0}))},[n]),be=U.useCallback(()=>{n(If(S))},[n,S]),Ve=U.useCallback(()=>{n(RL()),z(null)},[n]),We=(ue,Ee)=>{var nt;const He=ue.split("T")[0],Ne=S[He]||E[He];if(!Ne||!e)return"-";const Ie=((nt=Ne.teams[e])==null?void 0:nt[Ee])||[],tt=[];return Object.entries(Ne.teams).forEach(([Ge,at])=>{Ge!==e&&at[Ee]&&tt.push({team:Ge,positions:at[Ee]})}),Ie.length===0&&tt.length===0?"-":R.jsxs("div",{className:"assigned-positions",children:[Ie.map(Ge=>{const at=V.find(qt=>qt.name===Ge);return R.jsx("span",{title:`${e}: ${Ge}`,className:"pos-emoji",children:(at==null?void 0:at.emoji)||""},Ge)}),tt.map(Ge=>Ge.positions.map(at=>{const qt=V.find(Mn=>Mn.name===at);return R.jsx("span",{title:`${Ge.team}: ${at}`,className:"pos-emoji other-team-emoji",children:(qt==null?void 0:qt.emoji)||""},`${Ge.team}-${at}`)}))]})};U.useEffect(()=>{const ue=Ee=>{const He=Ee.target;if(He.tagName==="INPUT"||He.tagName==="TEXTAREA"||!F)return;const{row:Ne,col:Ie,table:tt}=F,nt=l,Ge=tt==="roster"?M:s;switch(Ee.key){case"ArrowUp":Ee.preventDefault(),Ne>0&&z({row:Ne-1,col:Ie,table:tt});break;case"ArrowDown":Ee.preventDefault(),Ne<nt.length-1&&z({row:Ne+1,col:Ie,table:tt});break;case"ArrowLeft":Ee.preventDefault(),Ie>0&&z({row:Ne,col:Ie-1,table:tt});break;case"ArrowRight":Ee.preventDefault(),Ie<Ge.length-1&&z({row:Ne,col:Ie+1,table:tt});break;case"Tab":Ee.preventDefault(),Ee.shiftKey?Ne>0&&z({row:Ne-1,col:Ie,table:tt}):Ne<nt.length-1&&z({row:Ne+1,col:Ie,table:tt});break;case" ":{Ee.preventDefault();const at=l[Ne],qt=Ge[Ie];qt!=null&&qt.email&&(tt==="roster"?ie(at,qt.email,Ne,Ie):de(at,qt.email,Ne,Ie));break}case"Enter":A&&(Ee.preventDefault(),be());break;case"Escape":A&&(Ee.preventDefault(),Ve());break}};return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[F,l,M,s,A,ie,de,be,Ve]);const yt=U.useMemo(()=>new Date().toISOString().split("T")[0],[]),At=U.useMemo(()=>l.length===0?!1:l[0].split("T")[0]<yt,[l,yt]),Ir=U.useCallback(ue=>{const Ee=ue.split("T")[0];return Ee<yt?"past-date":Ee===yt?"today-date":"future-date"},[yt]);if(d||p||g)return R.jsx(Pl,{});const Kr=v||P;if(Kr)return R.jsxs("div",{className:"roster-table-error",children:["Error: ",Kr]});const Mt=t==="Absence";return!Mt&&M.length===0?R.jsx("div",{className:"roster-table-loading",children:"No users found for this position."}):R.jsxs("div",{className:"roster-table-wrapper",children:[!Mt&&x.length>0&&R.jsxs("div",{className:"hidden-members-bar",children:[R.jsx("span",{className:"hidden-members-label",children:"Hidden Members:"}),R.jsx("div",{className:"hidden-members-list",children:x.map(ue=>{const Ee=a.find(He=>He.email===ue);return R.jsxs("button",{className:"unhide-pill",onClick:()=>Pe(ue),title:"Click to unhide",children:[(Ee==null?void 0:Ee.name)||ue," ",R.jsx("span",{children:"+"})]},ue)})})]}),Mt?R.jsxs("div",{className:"roster-section absence-section",children:[R.jsx("h3",{className:"section-title",children:"Team Absence Overview"}),R.jsx("div",{className:"roster-table-container",children:R.jsxs("table",{className:"roster-table absence-table",children:[R.jsx("thead",{children:R.jsxs("tr",{children:[R.jsx("th",{className:"roster-table-header-cell sticky-col sticky-header",children:R.jsxs("div",{className:"date-header-content",children:["Date",R.jsxs("div",{className:"date-header-actions",children:[R.jsx("button",{className:"load-prev-btn",onClick:Be,title:"Load 5 previous dates",children:""}),At&&R.jsx("button",{className:"load-prev-btn reset-dates-btn",onClick:Q,title:"Hide previous dates",children:""}),R.jsx("button",{className:`load-prev-btn peek-toggle-btn ${K?"active":""}`,onClick:()=>te(!K),title:"Toggle Peek Feature",children:""})]})]})}),s.map(ue=>R.jsx("th",{className:"roster-table-header-cell sticky-header",children:ue.name},ue.email)),K&&R.jsx("th",{className:"roster-table-header-cell sticky-header sticky-right peek-header",children:R.jsxs("select",{className:"peek-selector",value:G||"",onChange:ue=>b(ue.target.value||null),children:[R.jsx("option",{value:"",children:"Peek Position..."}),N.map(ue=>R.jsxs("option",{value:ue.name,children:[ue.emoji," ",ue.name]},ue.name))]})})]})}),R.jsx("tbody",{children:l.map((ue,Ee)=>{const He=Ir(ue),Ne=He==="today-date";return R.jsxs("tr",{className:He,children:[R.jsx("td",{className:"date-cell sticky-col",children:R.jsxs("div",{className:"date-cell-content",children:[new Date(ue).toLocaleDateString(),Ne&&R.jsx("span",{className:"today-badge",children:"TODAY"})]})}),s.map((Ie,tt)=>{const nt=(F==null?void 0:F.row)===Ee&&(F==null?void 0:F.col)===tt&&(F==null?void 0:F.table)==="absence",Ge=Ie.email?Oe(ue,Ie.email):!1,at=Ie.email?Me(ue,Ie.email):"";return R.jsx("td",{className:`roster-cell clickable absence-roster-cell ${nt?"focused":""} ${Ge?"absent-cell":""}`,onClick:()=>{Ie.email&&de(ue,Ie.email,Ee,tt)},tabIndex:0,onFocus:()=>z({row:Ee,col:tt,table:"absence"}),title:at,children:Ge?R.jsxs("div",{className:"absence-input-container",children:[R.jsx("input",{type:"text",className:"absence-reason-input",value:at,placeholder:"Reason...",maxLength:20,autoFocus:nt,onClick:qt=>qt.stopPropagation(),onChange:qt=>{Ie.email&&ve(ue,Ie.email,qt.target.value)}}),R.jsx("button",{className:"remove-absence-btn",onClick:qt=>{qt.stopPropagation(),Ie.email&&de(ue,Ie.email,Ee,tt)},title:"Mark as present",children:""})]}):"-"},Ie.email)}),K&&R.jsx("td",{className:"roster-cell peek-cell sticky-right",children:me(ue).join(", ")||"-"})]},ue)})})]})}),R.jsx("div",{className:"load-more-footer",children:R.jsx("button",{className:"load-next-year-btn",onClick:fe,children:"Load Next Year "})})]}):R.jsxs("div",{className:"roster-section",children:[R.jsx("div",{className:"roster-table-container",children:R.jsxs("table",{className:"roster-table",children:[R.jsx("thead",{children:R.jsxs("tr",{children:[R.jsx("th",{className:"roster-table-header-cell sticky-col sticky-header",children:R.jsxs("div",{className:"date-header-content",children:["Date",R.jsxs("div",{className:"date-header-actions",children:[R.jsx("button",{className:"load-prev-btn",onClick:Be,title:"Load 5 previous dates",children:""}),At&&R.jsx("button",{className:"load-prev-btn reset-dates-btn",onClick:Q,title:"Hide previous dates",children:""}),R.jsx("button",{className:`load-prev-btn peek-toggle-btn ${K?"active":""}`,onClick:()=>te(!K),title:"Toggle Peek Feature",children:""})]})]})}),M.map((ue,Ee)=>R.jsxs(U.Fragment,{children:[O===Ee&&R.jsx("th",{className:"gender-divider-cell sticky-header"}),R.jsxs("th",{className:"roster-table-header-cell sticky-header clickable-header",onClick:()=>ue.email&&Pe(ue.email),title:"Click to hide member",children:[ue.name,(w==null?void 0:w.sortByGender)&&R.jsxs("span",{className:"gender-label",children:["(",ue.gender==="Male"?"M":ue.gender==="Female"?"F":"?",")"]})]})]},ue.email)),K&&R.jsx("th",{className:"roster-table-header-cell sticky-header sticky-right peek-header",children:R.jsxs("select",{className:"peek-selector",value:G||"",onChange:ue=>b(ue.target.value||null),children:[R.jsx("option",{value:"",children:"Peek Position..."}),N.map(ue=>R.jsxs("option",{value:ue.name,children:[ue.emoji," ",ue.name]},ue.name))]})})]})}),R.jsx("tbody",{children:l.map((ue,Ee)=>{const He=Ir(ue),Ne=He==="today-date";return R.jsxs("tr",{className:He,children:[R.jsx("td",{className:"date-cell sticky-col",children:R.jsxs("div",{className:"date-cell-content",children:[new Date(ue).toLocaleDateString(),Ne&&R.jsx("span",{className:"today-badge",children:"TODAY"})]})}),M.map((Ie,tt)=>{const nt=(F==null?void 0:F.row)===Ee&&(F==null?void 0:F.col)===tt&&(F==null?void 0:F.table)==="roster",Ge=Ie.email?j(ue,Ie.email):!1,at=Ie.email?Oe(ue,Ie.email):!1;return R.jsxs(U.Fragment,{children:[O===tt&&R.jsx("td",{className:"gender-divider-cell"}),R.jsx("td",{className:`roster-cell ${Ge?"disabled":"clickable"} ${nt?"focused":""} ${at?"absent-strike":""}`,onClick:()=>{Ie.email&&!Ge&&ie(ue,Ie.email,Ee,tt)},tabIndex:0,onFocus:()=>z({row:Ee,col:tt,table:"roster"}),children:Ie.email&&(at?R.jsx("span",{title:Me(ue,Ie.email),children:""}):We(ue,Ie.email))})]},Ie.email)}),K&&R.jsx("td",{className:"roster-cell peek-cell sticky-right",children:me(ue).join(", ")||"-"})]},ue)})})]})}),R.jsx("div",{className:"load-more-footer",children:R.jsx("button",{className:"load-next-year-btn",onClick:fe,children:"Load Next Year "})})]}),A&&R.jsx("div",{className:"roster-save-footer",children:R.jsxs("div",{className:"save-footer-content",children:[R.jsx("span",{className:"changes-label",children:"You have unsaved changes"}),R.jsxs("div",{className:"save-footer-actions",children:[R.jsx("button",{className:"cancel-btn",onClick:Ve,disabled:I,children:"Discard"}),R.jsx("button",{className:"save-btn",onClick:be,disabled:I,children:I?"Saving...":"Save Roster"})]})]})})]})},HL=()=>R.jsx("div",{className:"roster-page",style:{height:"100%"},children:R.jsx(FL,{})}),qL=({text:n,textAlign:e="left",width:t,minWidth:a,isSticky:s=!1})=>R.jsx("th",{className:s?"sticky-col":void 0,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:a?`${a}px`:"auto"},children:n}),on=({isSticky:n=!1,textAlign:e="left",className:t,children:a})=>R.jsx("td",{style:{textAlign:e},className:`${t||""} ${n?"sticky-col":""}
`,children:a}),Fr=({name:n,value:e,placeholder:t,type:a="text",isSticky:s,isReadOnly:l=!1,isChild:c=!1,onChange:d})=>R.jsxs(on,{isSticky:s,children:[c&&R.jsx(YR,{}),R.jsx("input",{name:n,className:"form-input",type:a,placeholder:t,value:e,onChange:d,readOnly:l})]}),yS=({name:n,value:e,placeholder:t,onChange:a})=>R.jsxs(on,{className:"color-picker-group",children:[R.jsx("input",{name:n,type:"color",value:e||"#FFFFFF",onChange:a}),R.jsx("input",{name:n,className:"form-input",value:e,placeholder:t,onChange:a})]}),_v=({headers:n,children:e})=>R.jsx("div",{className:"app-table-container",children:R.jsxs("table",{className:"app-table",children:[R.jsx("thead",{children:R.jsx("tr",{children:n.map((t,a)=>R.jsx(qL,{...t},a))})}),R.jsx("tbody",{children:e})]})}),Sg={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},GL=()=>{const n=Pi(),{positions:e,fetched:t,loading:a}=gt(V=>V.positions),[s,l]=U.useState(e),[c,d]=U.useState(Sg),[p,g]=U.useState("idle");U.useEffect(()=>{t||n(to())},[n,t]),U.useEffect(()=>{l(e)},[e]);const v=(V,Y,F)=>{const z=[...s];z[V]={...z[V],[Y]:F},l(z)},E=(V,Y)=>{const F=[...s],z=F[V],K=z.parentId,te=G=>{const b=F[G];if(!b)return{block:[],startIndex:-1,endIndex:-1};const A=[],w=[b],N=new Set;let x=G,M=G,O=0;for(;O<w.length;){const Be=w[O++];N.has(Be.name)||(N.add(Be.name),A.push(Be),F.forEach((Q,fe)=>{Q.parentId===Be.name&&!N.has(Q.name)&&(w.push(Q),x=Math.min(x,fe),M=Math.max(M,fe))}))}return{block:A,startIndex:x,endIndex:M}};if(K){const G=F.filter(O=>O.parentId===K),A=G.findIndex(O=>O.name===z.name)+(Y==="up"?-1:1);if(A<0||A>=G.length)return;const w=G[A],N=F.indexOf(z),x=F.indexOf(w);if(N===-1||x===-1)return;const M=[...F];M[N]=w,M[x]=z,l(M)}else{const G=te(V),{block:b,startIndex:A,endIndex:w}=G;if(!b||b.length===0)return;if(Y==="up"){if(A===0)return;let N=A-1;for(;N>=0&&F[N].parentId;)N--;if(N<0)return;const x=te(N),{block:M,startIndex:O}=x;if(!M||M.length===0)return;const Pe=[...F.slice(0,O),...b,...M,...F.slice(w+1)].filter(Boolean);l(Pe)}else{if(w===F.length-1)return;let N=w+1;for(;N<F.length&&F[N].parentId;)N++;if(N>=F.length)return;const x=te(N),{block:M,startIndex:O}=x;if(!M||M.length===0)return;const Pe=[...F.slice(0,A),...M,...b,...F.slice(O+M.length)].filter(Boolean);l(Pe)}}},S=()=>{if(!c.name.trim()||!c.emoji.trim())return alert("Please provide both an emoji and a name.");l([...s,c]),d(Sg)},I=V=>{if(window.confirm("Delete this position? This will remove it from the global list, and any associated child positions.")){const Y=s[V];let F=s.filter((z,K)=>K!==V);Y.parentId||(F=F.filter(z=>z.parentId!==Y.name)),l(F)}},P=async()=>{g("saving");try{const V=s.map(Y=>({...Y,parentId:Y.parentId===void 0?void 0:Y.parentId}));await n(qR(V)).unwrap(),g("success"),setTimeout(()=>g("idle"),2e3)}catch(V){console.error("Save Error:",V),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),g("idle")}},B=V=>{l(Y=>{const F={...Sg,parentId:V},z=Y.findIndex(G=>G.name===V);if(z===-1)return[...Y,F];let K=z;for(;K+1<Y.length&&Y[K+1].parentId===V;)K++;return[...Y.slice(0,K+1),F,...Y.slice(K+1)]})};return a?R.jsx(Pl,{}):R.jsxs(R.Fragment,{children:[R.jsxs(_v,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:80},{text:"Colour",minWidth:100},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[s.map((V,Y)=>R.jsxs("tr",{children:[R.jsx(on,{textAlign:"center",children:V.parentId?R.jsx(YR,{}):R.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[R.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>E(Y,"up"),disabled:Y===0,children:""}),R.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>E(Y,"down"),disabled:Y===s.length-1,children:""})]})}),R.jsx(Fr,{name:`emoji-${Y}`,value:V.emoji,onChange:F=>v(Y,"emoji",F.target.value)}),R.jsx(Fr,{name:`name-${Y}`,value:V.name,onChange:F=>v(Y,"name",F.target.value)}),R.jsx(yS,{name:`colour-${Y}`,value:V.colour,onChange:F=>v(Y,"colour",F.target.value)}),R.jsx(on,{textAlign:"center",children:R.jsx(Yn,{colour:V.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:V.sortByGender,onClick:()=>v(Y,"sortByGender",!V.sortByGender),children:V.sortByGender?"YES":"NO"})}),R.jsx(on,{textAlign:"center",children:!V.parentId&&R.jsx("button",{className:"icon-button icon-button--add-child",onClick:()=>B(V.name),title:"Add Child Position",children:"+"})}),R.jsx(on,{textAlign:"center",children:R.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>I(Y),children:""})})]},`${V.emoji}-${Y}`)),R.jsxs("tr",{className:"pos-row-new",children:[R.jsx("td",{className:"",children:""}),R.jsx(Fr,{name:"new-emoji",value:c.emoji,placeholder:"",onChange:V=>d({...c,emoji:V.target.value})}),R.jsx(Fr,{name:"new-name",value:c.name,placeholder:"Position Name",onChange:V=>d({...c,name:V.target.value})}),R.jsx(yS,{name:"new-colour",value:c.colour,placeholder:"#FFFFFF",onChange:V=>d({...c,colour:V.target.value})}),R.jsx(on,{textAlign:"center",children:R.jsx(Yn,{colour:c.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.sortByGender,onClick:()=>d({...c,sortByGender:!c.sortByGender}),children:c.sortByGender?"YES":"NO"})}),R.jsx(on,{textAlign:"center",children:R.jsx("button",{onClick:S,className:"icon-button icon-button--add",disabled:!c.name.trim()||!c.emoji.trim(),children:"Add"})})]})]}),R.jsx("div",{className:"settings-footer",children:R.jsx("button",{className:`save-button ${p}`,onClick:P,disabled:p!=="idle",children:p==="saving"?"Saving...":p==="success"?"Done ":"Save"})})]})},vS={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1},_S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],$L=()=>{var K,te;const n=Pi(),{teams:e,fetched:t,loading:a}=gt(G=>G.teams),{positions:s,fetched:l,loading:c}=gt(G=>G.positions),[d,p]=U.useState(e),[g,v]=U.useState(vS),[E,S]=U.useState("idle");U.useEffect(()=>{t||n(ml()),l||n(to())},[n,t,l]),U.useEffect(()=>{p(e)},[e]);const I=(G,b,A)=>{const w=[...d];w[G]={...w[G],[b]:A},p(w)},P=(G,b)=>{const A=[...d],w=b==="up"?G-1:G+1;if(w<0||w>=A.length)return;const N=A[G];A[G]=A[w],A[w]=N,p(A)},B=(G,b)=>{const A=d.map((w,N)=>{if(N!==G)return w;const x=w.positions||[],M=x.find(O=>O.name===b.name)?x.filter(O=>O.name!==b.name):[...x,b];return{...w,positions:M}});p(A)},V=(G,b)=>{const A=d.map((w,N)=>{if(N!==G)return w;const x=w.preferredDays||[],M=x.includes(b)?x.filter(O=>O!==b):[...x,b];return{...w,preferredDays:M}});p(A)},Y=()=>{if(!g.name.trim()||!g.emoji.trim())return alert("Please provide both an emoji and a name for the team.");p([...d,g]),v(vS)},F=G=>{window.confirm("Are you sure you want to delete this team?")&&p(d.filter((b,A)=>A!==G))},z=async()=>{S("saving");try{await n(Cf(d)).unwrap(),S("success"),setTimeout(()=>S("idle"),2e3)}catch(G){console.error("Save Error:",G),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),S("idle")}};return a||c?R.jsx(Pl,{}):R.jsxs(R.Fragment,{children:[R.jsxs(_v,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:100},{text:"Conflicts",width:60,textAlign:"center"},{text:"Allowed Positions",minWidth:200},{text:"Preferred Days",minWidth:250},{text:"",width:50}],children:[d.map((G,b)=>{var A,w;return R.jsxs("tr",{children:[R.jsxs(on,{children:[" ",R.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[R.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>P(b,"up"),disabled:b===0,children:""}),R.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>P(b,"down"),disabled:b===d.length-1,children:""})]})]}),R.jsx(Fr,{name:`team-emoji-${b}`,value:G.emoji,onChange:N=>I(b,"emoji",N.target.value)}),R.jsx(Fr,{name:`team-name-${b}`,value:G.name,onChange:N=>I(b,"name",N.target.value)}),R.jsx(Fr,{name:`team-maxConflict-${b}`,value:((A=G.maxConflict)==null?void 0:A.toString())||"1",type:"number",onChange:N=>I(b,"maxConflict",parseInt(N.target.value)||1)}),R.jsx(on,{children:R.jsx(Ri,{nowrap:!0,children:(w=s==null?void 0:s.filter(N=>!N.parentId))==null?void 0:w.map(N=>{var M;const x=(M=G.positions)==null?void 0:M.some(O=>O.name===N.name);return R.jsx(Yn,{colour:N.colour,isActive:x,onClick:()=>B(b,N),children:N.emoji},N.name)})})}),R.jsx(on,{children:R.jsx(Ri,{nowrap:!0,children:_S.map(N=>{var M;const x=(M=G.preferredDays)==null?void 0:M.includes(N);return R.jsx(Yn,{isActive:x,onClick:()=>V(b,N),children:N.substring(0,3)},N)})})}),R.jsx(on,{children:R.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>F(b),children:""})})]},`${G.emoji}-${b}`)}),R.jsxs("tr",{className:"team-row-new",children:[R.jsx("td",{className:"",children:""}),R.jsx(Fr,{name:"new-team-emoji",value:g.emoji,placeholder:"",onChange:G=>v({...g,emoji:G.target.value})}),R.jsx(Fr,{name:"new-team-name",value:g.name,placeholder:"Team Name",onChange:G=>v({...g,name:G.target.value})}),R.jsx(Fr,{name:"new-team-maxConflict",value:((K=g.maxConflict)==null?void 0:K.toString())||"1",type:"number",onChange:G=>v({...g,maxConflict:parseInt(G.target.value)||1})}),R.jsx(on,{children:R.jsx(Ri,{nowrap:!0,children:(te=s==null?void 0:s.filter(G=>!G.parentId))==null?void 0:te.map(G=>{var A;const b=(A=g.positions)==null?void 0:A.some(w=>w.name===G.name);return R.jsx(Yn,{colour:G.colour,isActive:b,onClick:()=>v(w=>{const N=w.positions||[],x=N.some(M=>M.name===G.name)?N.filter(M=>M.name!==G.name):[...N,G];return{...w,positions:x}}),children:G.emoji},`new-${G.name}`)})})}),R.jsx(on,{children:R.jsx(Ri,{nowrap:!0,children:_S.map(G=>{var A;const b=(A=g.preferredDays)==null?void 0:A.includes(G);return R.jsx(Yn,{isActive:b,onClick:()=>v(w=>{const N=w.preferredDays||[],x=N.includes(G)?N.filter(M=>M!==G):[...N,G];return{...w,preferredDays:x}}),children:G.substring(0,3)},`new-team-${G}`)})})}),R.jsx(on,{children:R.jsx("button",{onClick:Y,className:"icon-button icon-button--add",disabled:!g.name.trim()||!g.emoji.trim(),children:"+"})})]})]}),R.jsx("div",{className:"settings-footer",children:R.jsx("button",{className:`save-button ${E}`,onClick:z,disabled:E!=="idle",children:E==="saving"?"Saving...":E==="success"?"Done ":"Save All Team Changes"})})]})},KL={allUsers:[],loading:!1,saving:!1,error:null},Pf=Cr("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=wc(_n,"users"),a=Ic(t),s=await Nc(a),l=[];return s.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),kf=Cr("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=Ww(_n);n.forEach(a=>{const{id:s,...l}=a;l.teamPositions&&(l.indexedAssignments=ZR(l.teamPositions)),t.update(Gr(_n,"users",s),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),n1=fo({name:"userManagement",initialState:KL,reducers:{updateUserField(n,e){const{id:t,field:a,value:s}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[a]=s)},toggleUserTeam(n,e){const{userId:t,teamName:a}=e.payload,s=n.allUsers.find(l=>l.id===t);if(s){const l=s.teams||[],c=l.includes(a)?l.filter(d=>d!==a):[...l,a];s.teams=c,s.teamPositions||(s.teamPositions={}),c.includes(a)?s.teamPositions[a]||(s.teamPositions[a]=[]):delete s.teamPositions[a]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:a,posName:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[a]||(l.teamPositions[a]=[]);const c=l.teamPositions[a],d=c.includes(s)?c.filter(p=>p!==s):[...c,s];l.teamPositions[a]=d}}},extraReducers:n=>{n.addCase(Pf.pending,e=>{e.loading=!0,e.error=null}).addCase(Pf.fulfilled,(e,t)=>{e.allUsers=t.payload,e.loading=!1}).addCase(Pf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(kf.pending,e=>{e.saving=!0,e.error=null}).addCase(kf.fulfilled,e=>{e.saving=!1}).addCase(kf.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:YL,toggleUserTeam:QL,toggleUserTeamPosition:XL}=n1.actions,WL=n1.reducer,JL=({user:n,availableTeams:e,adminEmail:t})=>{var d;const a=Pi(),s=(p,g)=>{a(YL({id:n.id,field:p,value:g}))},l=p=>{a(QL({userId:n.id,teamName:p}))},c=(p,g)=>{a(XL({userId:n.id,teamName:p,posName:g}))};return R.jsxs("tr",{children:[R.jsx(Fr,{name:`name-${n.id}`,value:n.name||"",onChange:p=>s("name",p.target.value),isSticky:!0}),R.jsx(Fr,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),R.jsx(on,{children:R.jsxs("select",{name:`gender-${n.id}`,className:"form-select",value:n.gender,onChange:p=>s("gender",p.target.value),children:[R.jsx("option",{value:"",children:"-"}),R.jsx("option",{value:"Male",children:"Male"}),R.jsx("option",{value:"Female",children:"Female"})]})}),R.jsx(on,{children:R.jsx(Ri,{children:e.map(p=>{var v;const g=(v=n.teams)==null?void 0:v.includes(p.name);return R.jsxs(Yn,{onClick:()=>l(p.name),isActive:g,children:[R.jsx("span",{children:p.emoji})," ",p.name]},p.name)})})}),R.jsx(on,{children:(d=n.teams)==null?void 0:d.map(p=>{var v,E;const g=e.find(S=>S.name===p);return g?R.jsxs("div",{style:{marginBottom:"12px"},children:[R.jsxs("div",{style:{fontSize:"0.65rem",fontWeight:"bold",marginBottom:"4px",color:"var(--color-text-dim)",textTransform:"uppercase"},children:[g.emoji," ",g.name]}),R.jsx(Ri,{children:(E=(v=g.positions)==null?void 0:v.filter(S=>!S.parentId))==null?void 0:E.map(S=>{var P,B;const I=(B=(P=n.teamPositions)==null?void 0:P[p])==null?void 0:B.includes(S.name);return R.jsx(Yn,{colour:S.colour,isActive:I,onClick:()=>c(p,S.name),children:S.emoji},S.name)})})]},p):null})}),R.jsx(on,{children:R.jsx(Yn,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),R.jsx(on,{children:R.jsx(Yn,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),R.jsx(on,{children:R.jsx(Yn,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id)},ZL=()=>{const n=Pi(),{allUsers:e,loading:t,saving:a,error:s}=gt(d=>d.userManagement),l=gt(d=>d.teams.teams);U.useEffect(()=>{n(Pf())},[n]);const c=()=>{n(kf(e))};return t?R.jsx(Pl,{}):s?R.jsxs("div",{children:["Error: ",s]}):R.jsxs(R.Fragment,{children:[R.jsx(_v,{headers:[{text:"Name",minWidth:70,isSticky:!0},{text:"Email",minWidth:170},{text:"Gender",minWidth:90},{text:"Teams",minWidth:200},{text:"Positions",minWidth:200},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(d=>R.jsx(JL,{user:d,availableTeams:l,adminEmail:"chris.sm.kang542@gmail.com"},d.id))}),R.jsx("div",{className:"settings-footer",children:R.jsx("button",{className:`save-button ${a?"saving":""}`,onClick:c,disabled:a,children:a?"Saving Changes...":"Save All User Changes"})})]})},eU=()=>{const{userData:n}=gt(t=>t.auth),{section:e}=yd();return n?R.jsxs("div",{className:"settings-container",children:[e===ol.PROFILE&&R.jsx(t1,{}),e===ol.USER_MANAGEMENT&&(n.isAdmin?R.jsx(ZL,{}):R.jsx("p",{children:"Access Denied"})),e===ol.TEAMS&&(n.isAdmin?R.jsx($L,{}):R.jsx("p",{children:"Access Denied"})),e===ol.POSITIONS&&(n.isAdmin?R.jsx(GL,{}):R.jsx("p",{children:"Access Denied"}))]}):null},tU=[{path:"/",element:R.jsx(Q4,{})},{path:"/login",element:R.jsx(BL,{})},{path:"/guest",element:R.jsx(zL,{})},{path:"/app",element:R.jsx(Wk,{}),children:[{path:"",element:R.jsx(SL,{}),children:[{path:"dashboard",element:R.jsx(VL,{})},{path:"roster/:teamName?/:positionName?",element:R.jsx(HL,{})},{path:"settings/:section?",element:R.jsx(eU,{})}]}]}];let ES=!1;const nU=n=>{if(!ES){ES=!0;let e;OP(Al,t=>{if(t){n.dispatch(kL(t)),n.dispatch(Mf(t.uid));const a=Gr(_n,"users",t.uid);e=FV(a,s=>{if(s.exists()){const l=s.data();n.dispatch(LL(l))}})}else n.dispatch(UL()),e&&e()})}return e=>t=>e(t)},rU=Rk({reducer:{auth:jL,positions:Yk,roster:CL,rosterView:ML,teams:Xk,ui:vL,userManagement:WL},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(nU)}),iU=RN(tU);$C.createRoot(document.getElementById("root")).render(R.jsx(bS.StrictMode,{children:R.jsx(oI,{store:rU,children:R.jsx(BN,{children:R.jsx(Y4,{children:R.jsx(jN,{router:iU})})})})}));
