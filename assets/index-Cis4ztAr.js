var GI=Object.defineProperty;var $I=(n,e,t)=>e in n?GI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ng=(n,e,t)=>$I(n,typeof e!="symbol"?e+"":e,t);function KI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function EA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dg={exports:{}},sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pb;function YI(){if(Pb)return sc;Pb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return sc.Fragment=e,sc.jsx=t,sc.jsxs=t,sc}var kb;function QI(){return kb||(kb=1,Dg.exports=YI()),Dg.exports}var b=QI(),Og={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vb;function XI(){if(Vb)return We;Vb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),E=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=E&&H[E]||H["@@iterator"],typeof H=="function"?H:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,M={};function U(H,ie,pe){this.props=H,this.context=ie,this.refs=M,this.updater=pe||D}U.prototype.isReactComponent={},U.prototype.setState=function(H,ie){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ie,"setState")},U.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function j(){}j.prototype=U.prototype;function q(H,ie,pe){this.props=H,this.context=ie,this.refs=M,this.updater=pe||D}var Q=q.prototype=new j;Q.constructor=q,V(Q,U.prototype),Q.isPureReactComponent=!0;var W=Array.isArray;function K(){}var S={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function I(H,ie,pe){var ge=pe.ref;return{$$typeof:n,type:H,key:ie,ref:ge!==void 0?ge:null,props:pe}}function k(H,ie){return I(H.type,ie,H.props)}function P(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function L(H){var ie={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(pe){return ie[pe]})}var x=/\/+/g;function ae(H,ie){return typeof H=="object"&&H!==null&&H.key!=null?L(""+H.key):ie.toString(36)}function Ee(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(K,K):(H.status="pending",H.then(function(ie){H.status==="pending"&&(H.status="fulfilled",H.value=ie)},function(ie){H.status==="pending"&&(H.status="rejected",H.reason=ie)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function G(H,ie,pe,ge,le){var ye=typeof H;(ye==="undefined"||ye==="boolean")&&(H=null);var Se=!1;if(H===null)Se=!0;else switch(ye){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(H.$$typeof){case n:case e:Se=!0;break;case y:return Se=H._init,G(Se(H._payload),ie,pe,ge,le)}}if(Se)return le=le(H),Se=ge===""?"."+ae(H,0):ge,W(le)?(pe="",Se!=null&&(pe=Se.replace(x,"$&/")+"/"),G(le,ie,pe,"",function(vt){return vt})):le!=null&&(P(le)&&(le=k(le,pe+(le.key==null||H&&H.key===le.key?"":(""+le.key).replace(x,"$&/")+"/")+Se)),ie.push(le)),1;Se=0;var Le=ge===""?".":ge+":";if(W(H))for(var ze=0;ze<H.length;ze++)ge=H[ze],ye=Le+ae(ge,ze),Se+=G(ge,ie,pe,ye,le);else if(ze=w(H),typeof ze=="function")for(H=ze.call(H),ze=0;!(ge=H.next()).done;)ge=ge.value,ye=Le+ae(ge,ze++),Se+=G(ge,ie,pe,ye,le);else if(ye==="object"){if(typeof H.then=="function")return G(Ee(H),ie,pe,ge,le);throw ie=String(H),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Se}function ce(H,ie,pe){if(H==null)return H;var ge=[],le=0;return G(H,ge,"","",function(ye){return ie.call(pe,ye,le++)}),ge}function me(H){if(H._status===-1){var ie=H._result;ie=ie(),ie.then(function(pe){(H._status===0||H._status===-1)&&(H._status=1,H._result=pe)},function(pe){(H._status===0||H._status===-1)&&(H._status=2,H._result=pe)}),H._status===-1&&(H._status=0,H._result=ie)}if(H._status===1)return H._result.default;throw H._result}var Me=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},De={map:ce,forEach:function(H,ie,pe){ce(H,function(){ie.apply(this,arguments)},pe)},count:function(H){var ie=0;return ce(H,function(){ie++}),ie},toArray:function(H){return ce(H,function(ie){return ie})||[]},only:function(H){if(!P(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return We.Activity=v,We.Children=De,We.Component=U,We.Fragment=t,We.Profiler=a,We.PureComponent=q,We.StrictMode=i,We.Suspense=m,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,We.__COMPILER_RUNTIME={__proto__:null,c:function(H){return S.H.useMemoCache(H)}},We.cache=function(H){return function(){return H.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(H,ie,pe){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ge=V({},H.props),le=H.key;if(ie!=null)for(ye in ie.key!==void 0&&(le=""+ie.key),ie)!C.call(ie,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&ie.ref===void 0||(ge[ye]=ie[ye]);var ye=arguments.length-2;if(ye===1)ge.children=pe;else if(1<ye){for(var Se=Array(ye),Le=0;Le<ye;Le++)Se[Le]=arguments[Le+2];ge.children=Se}return I(H.type,le,ge)},We.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},We.createElement=function(H,ie,pe){var ge,le={},ye=null;if(ie!=null)for(ge in ie.key!==void 0&&(ye=""+ie.key),ie)C.call(ie,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(le[ge]=ie[ge]);var Se=arguments.length-2;if(Se===1)le.children=pe;else if(1<Se){for(var Le=Array(Se),ze=0;ze<Se;ze++)Le[ze]=arguments[ze+2];le.children=Le}if(H&&H.defaultProps)for(ge in Se=H.defaultProps,Se)le[ge]===void 0&&(le[ge]=Se[ge]);return I(H,ye,le)},We.createRef=function(){return{current:null}},We.forwardRef=function(H){return{$$typeof:f,render:H}},We.isValidElement=P,We.lazy=function(H){return{$$typeof:y,_payload:{_status:-1,_result:H},_init:me}},We.memo=function(H,ie){return{$$typeof:p,type:H,compare:ie===void 0?null:ie}},We.startTransition=function(H){var ie=S.T,pe={};S.T=pe;try{var ge=H(),le=S.S;le!==null&&le(pe,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(K,Me)}catch(ye){Me(ye)}finally{ie!==null&&pe.types!==null&&(ie.types=pe.types),S.T=ie}},We.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},We.use=function(H){return S.H.use(H)},We.useActionState=function(H,ie,pe){return S.H.useActionState(H,ie,pe)},We.useCallback=function(H,ie){return S.H.useCallback(H,ie)},We.useContext=function(H){return S.H.useContext(H)},We.useDebugValue=function(){},We.useDeferredValue=function(H,ie){return S.H.useDeferredValue(H,ie)},We.useEffect=function(H,ie){return S.H.useEffect(H,ie)},We.useEffectEvent=function(H){return S.H.useEffectEvent(H)},We.useId=function(){return S.H.useId()},We.useImperativeHandle=function(H,ie,pe){return S.H.useImperativeHandle(H,ie,pe)},We.useInsertionEffect=function(H,ie){return S.H.useInsertionEffect(H,ie)},We.useLayoutEffect=function(H,ie){return S.H.useLayoutEffect(H,ie)},We.useMemo=function(H,ie){return S.H.useMemo(H,ie)},We.useOptimistic=function(H,ie){return S.H.useOptimistic(H,ie)},We.useReducer=function(H,ie,pe){return S.H.useReducer(H,ie,pe)},We.useRef=function(H){return S.H.useRef(H)},We.useState=function(H){return S.H.useState(H)},We.useSyncExternalStore=function(H,ie,pe){return S.H.useSyncExternalStore(H,ie,pe)},We.useTransition=function(){return S.H.useTransition()},We.version="19.2.4",We}var Lb;function $d(){return Lb||(Lb=1,Og.exports=XI()),Og.exports}var O=$d();const TA=EA(O),WI=KI({__proto__:null,default:TA},[O]);var Mg={exports:{}},ac={},Pg={exports:{}},kg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function JI(){return jb||(jb=1,(function(n){function e(G,ce){var me=G.length;G.push(ce);e:for(;0<me;){var Me=me-1>>>1,De=G[Me];if(0<a(De,ce))G[Me]=ce,G[me]=De,me=Me;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ce=G[0],me=G.pop();if(me!==ce){G[0]=me;e:for(var Me=0,De=G.length,H=De>>>1;Me<H;){var ie=2*(Me+1)-1,pe=G[ie],ge=ie+1,le=G[ge];if(0>a(pe,me))ge<De&&0>a(le,pe)?(G[Me]=le,G[ge]=me,Me=ge):(G[Me]=pe,G[ie]=me,Me=ie);else if(ge<De&&0>a(le,me))G[Me]=le,G[ge]=me,Me=ge;else break e}}return ce}function a(G,ce){var me=G.sortIndex-ce.sortIndex;return me!==0?me:G.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],p=[],y=1,v=null,E=3,w=!1,D=!1,V=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function Q(G){for(var ce=t(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=G)i(p),ce.sortIndex=ce.expirationTime,e(m,ce);else break;ce=t(p)}}function W(G){if(V=!1,Q(G),!D)if(t(m)!==null)D=!0,K||(K=!0,L());else{var ce=t(p);ce!==null&&Ee(W,ce.startTime-G)}}var K=!1,S=-1,C=5,I=-1;function k(){return M?!0:!(n.unstable_now()-I<C)}function P(){if(M=!1,K){var G=n.unstable_now();I=G;var ce=!0;try{e:{D=!1,V&&(V=!1,j(S),S=-1),w=!0;var me=E;try{t:{for(Q(G),v=t(m);v!==null&&!(v.expirationTime>G&&k());){var Me=v.callback;if(typeof Me=="function"){v.callback=null,E=v.priorityLevel;var De=Me(v.expirationTime<=G);if(G=n.unstable_now(),typeof De=="function"){v.callback=De,Q(G),ce=!0;break t}v===t(m)&&i(m),Q(G)}else i(m);v=t(m)}if(v!==null)ce=!0;else{var H=t(p);H!==null&&Ee(W,H.startTime-G),ce=!1}}break e}finally{v=null,E=me,w=!1}ce=void 0}}finally{ce?L():K=!1}}}var L;if(typeof q=="function")L=function(){q(P)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,ae=x.port2;x.port1.onmessage=P,L=function(){ae.postMessage(null)}}else L=function(){U(P,0)};function Ee(G,ce){S=U(function(){G(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(G){switch(E){case 1:case 2:case 3:var ce=3;break;default:ce=E}var me=E;E=ce;try{return G()}finally{E=me}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(G,ce){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var me=E;E=G;try{return ce()}finally{E=me}},n.unstable_scheduleCallback=function(G,ce,me){var Me=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Me+me:Me):me=Me,G){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=me+De,G={id:y++,callback:ce,priorityLevel:G,startTime:me,expirationTime:De,sortIndex:-1},me>Me?(G.sortIndex=me,e(p,G),t(m)===null&&G===t(p)&&(V?(j(S),S=-1):V=!0,Ee(W,me-Me))):(G.sortIndex=De,e(m,G),D||w||(D=!0,K||(K=!0,L()))),G},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(G){var ce=E;return function(){var me=E;E=ce;try{return G.apply(this,arguments)}finally{E=me}}}})(kg)),kg}var Ub;function ZI(){return Ub||(Ub=1,Pg.exports=JI()),Pg.exports}var Vg={exports:{}},$n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function ex(){if(zb)return $n;zb=1;var n=$d();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:p,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,$n.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},$n.flushSync=function(m){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=y,i.d.f()}},$n.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},$n.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},$n.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:w}):y==="script"&&i.d.X(m,{crossOrigin:v,integrity:E,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},$n.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},$n.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},$n.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},$n.requestFormReset=function(m){i.d.r(m)},$n.unstable_batchedUpdates=function(m,p){return m(p)},$n.useFormState=function(m,p,y){return c.H.useFormState(m,p,y)},$n.useFormStatus=function(){return c.H.useHostTransitionStatus()},$n.version="19.2.4",$n}var Bb;function bA(){if(Bb)return Vg.exports;Bb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vg.exports=ex(),Vg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function tx(){if(Hb)return ac;Hb=1;var n=ZI(),e=$d(),t=bA();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var d=o.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===o)return m(d),r;if(g===u)return m(d),s;g=g.sibling}throw Error(i(188))}if(o.return!==u.return)o=d,u=g;else{for(var T=!1,R=d.child;R;){if(R===o){T=!0,o=d,u=g;break}if(R===u){T=!0,u=d,o=g;break}R=R.sibling}if(!T){for(R=g.child;R;){if(R===o){T=!0,o=g,u=d;break}if(R===u){T=!0,u=g,o=d;break}R=R.sibling}if(!T)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),q=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function L(r){return r===null||typeof r!="object"?null:(r=P&&r[P]||r["@@iterator"],typeof r=="function"?r:null)}var x=Symbol.for("react.client.reference");function ae(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===x?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case V:return"Fragment";case U:return"Profiler";case M:return"StrictMode";case W:return"Suspense";case K:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case D:return"Portal";case q:return r.displayName||"Context";case j:return(r._context.displayName||"Context")+".Consumer";case Q:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case S:return s=r.displayName||null,s!==null?s:ae(r.type)||"Memo";case C:s=r._payload,r=r._init;try{return ae(r(s))}catch{}}return null}var Ee=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Me=[],De=-1;function H(r){return{current:r}}function ie(r){0>De||(r.current=Me[De],Me[De]=null,De--)}function pe(r,s){De++,Me[De]=r.current,r.current=s}var ge=H(null),le=H(null),ye=H(null),Se=H(null);function Le(r,s){switch(pe(ye,s),pe(le,r),pe(ge,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?rb(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=rb(s),r=ib(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ie(ge),pe(ge,r)}function ze(){ie(ge),ie(le),ie(ye)}function vt(r){r.memoizedState!==null&&pe(Se,r);var s=ge.current,o=ib(s,r.type);s!==o&&(pe(le,r),pe(ge,o))}function St(r){le.current===r&&(ie(ge),ie(le)),Se.current===r&&(ie(Se),tc._currentValue=me)}var Qe,At;function Ht(r){if(Qe===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Qe=s&&s[1]||"",At=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+r+At}var we=!1;function Pe(r,s){if(!r||we)return"";we=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var te=re}Reflect.construct(r,[],he)}else{try{he.call()}catch(re){te=re}r.call(he.prototype)}}else{try{throw Error()}catch(re){te=re}(he=r())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&te&&typeof re.stack=="string")return[re.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),T=g[0],R=g[1];if(T&&R){var B=T.split(`
`),Z=R.split(`
`);for(d=u=0;u<B.length&&!B[u].includes("DetermineComponentFrameRoot");)u++;for(;d<Z.length&&!Z[d].includes("DetermineComponentFrameRoot");)d++;if(u===B.length||d===Z.length)for(u=B.length-1,d=Z.length-1;1<=u&&0<=d&&B[u]!==Z[d];)d--;for(;1<=u&&0<=d;u--,d--)if(B[u]!==Z[d]){if(u!==1||d!==1)do if(u--,d--,0>d||B[u]!==Z[d]){var se=`
`+B[u].replace(" at new "," at ");return r.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",r.displayName)),se}while(1<=u&&0<=d);break}}}finally{we=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Ht(o):""}function $e(r,s){switch(r.tag){case 26:case 27:case 5:return Ht(r.type);case 16:return Ht("Lazy");case 13:return r.child!==s&&s!==null?Ht("Suspense Fallback"):Ht("Suspense");case 19:return Ht("SuspenseList");case 0:case 15:return Pe(r.type,!1);case 11:return Pe(r.type.render,!1);case 1:return Pe(r.type,!0);case 31:return Ht("Activity");default:return""}}function Be(r){try{var s="",o=null;do s+=$e(r,o),o=r,r=r.return;while(r);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ke=Object.prototype.hasOwnProperty,Ze=n.unstable_scheduleCallback,gt=n.unstable_cancelCallback,ln=n.unstable_shouldYield,Ot=n.unstable_requestPaint,Et=n.unstable_now,nn=n.unstable_getCurrentPriorityLevel,lr=n.unstable_ImmediatePriority,ur=n.unstable_UserBlockingPriority,un=n.unstable_NormalPriority,wr=n.unstable_LowPriority,ja=n.unstable_IdlePriority,Lo=n.log,Os=n.unstable_setDisableYieldValue,Cr=null,Ut=null;function er(r){if(typeof Lo=="function"&&Os(r),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Cr,r)}catch{}}var Wt=Math.clz32?Math.clz32:za,Ua=Math.log,Ms=Math.LN2;function za(r){return r>>>=0,r===0?32:31-(Ua(r)/Ms|0)|0}var tr=256,bi=262144,Jt=4194304;function Fr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Rr(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var d=0,g=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var R=u&134217727;return R!==0?(u=R&~g,u!==0?d=Fr(u):(T&=R,T!==0?d=Fr(T):o||(o=R&~r,o!==0&&(d=Fr(o))))):(R=u&~g,R!==0?d=Fr(R):T!==0?d=Fr(T):o||(o=u&~r,o!==0&&(d=Fr(o)))),d===0?0:s!==0&&s!==d&&(s&g)===0&&(g=d&-d,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:d}function Ir(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function jo(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $i(){var r=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),r}function nr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Si(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function du(r,s,o,u,d,g){var T=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var R=r.entanglements,B=r.expirationTimes,Z=r.hiddenUpdates;for(o=T&~o;0<o;){var se=31-Wt(o),he=1<<se;R[se]=0,B[se]=-1;var te=Z[se];if(te!==null)for(Z[se]=null,se=0;se<te.length;se++){var re=te[se];re!==null&&(re.lane&=-536870913)}o&=~he}u!==0&&Ki(r,u,0),g!==0&&d===0&&r.tag!==0&&(r.suspendedLanes|=g&~(T&~s))}function Ki(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Wt(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function z(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Wt(o),d=1<<u;d&s|r[u]&s&&(r[u]|=s),o&=~d}}function $(r,s){var o=s&-s;return o=(o&42)!==0?1:ee(o),(o&(r.suspendedLanes|s))!==0?0:o}function ee(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function de(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function _e(){var r=ce.p;return r!==0?r:(r=window.event,r===void 0?32:Rb(r.type))}function Ce(r,s){var o=ce.p;try{return ce.p=r,s()}finally{ce.p=o}}var xe=Math.random().toString(36).slice(2),ve="__reactFiber$"+xe,be="__reactProps$"+xe,Ie="__reactContainer$"+xe,qe="__reactEvents$"+xe,Ve="__reactListeners$"+xe,Ye="__reactHandles$"+xe,st="__reactResources$"+xe,Mt="__reactMarker$"+xe;function Kt(r){delete r[ve],delete r[be],delete r[qe],delete r[Ve],delete r[Ye]}function Ft(r){var s=r[ve];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Ie]||o[ve]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=hb(r);r!==null;){if(o=r[ve])return o;r=hb(r)}return s}r=o,o=r.parentNode}return null}function nt(r){if(r=r[ve]||r[Ie]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function qt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Nn(r){var s=r[st];return s||(s=r[st]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Gt(r){r[Mt]=!0}var cr=new Set,qn={};function hr(r,s){Gn(r,s),Gn(r+"Capture",s)}function Gn(r,s){for(qn[r]=s,r=0;r<s.length;r++)cr.add(s[r])}var xr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ai={},wi={};function ot(r){return ke.call(wi,r)?!0:ke.call(Ai,r)?!1:xr.test(r)?wi[r]=!0:(Ai[r]=!0,!1)}function rn(r,s,o){if(ot(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function yn(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Pt(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}function rt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Nr(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ps(r,s,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,g=u.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(T){o=""+T,g.call(this,T)}}),Object.defineProperty(r,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function wt(r){if(!r._valueTracker){var s=Nr(r)?"checked":"value";r._valueTracker=Ps(r,s,""+r[s])}}function Ba(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=Nr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function Ci(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ha=/[\n"\\]/g;function fr(r){return r.replace(Ha,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Uo(r,s,o,u,d,g,T,R){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),s!=null?T==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+rt(s)):r.value!==""+rt(s)&&(r.value=""+rt(s)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),s!=null?mu(r,T,rt(s)):o!=null?mu(r,T,rt(o)):u!=null&&r.removeAttribute("value"),d==null&&g!=null&&(r.defaultChecked=!!g),d!=null&&(r.checked=d&&typeof d!="function"&&typeof d!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+rt(R):r.removeAttribute("name")}function mh(r,s,o,u,d,g,T,R){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){wt(r);return}o=o!=null?""+rt(o):"",s=s!=null?""+rt(s):o,R||s===r.value||(r.value=s),r.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=R?r.checked:!!u,r.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),wt(r)}function mu(r,s,o){s==="number"&&Ci(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function ks(r,s,o,u){if(r=r.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<r.length;o++)d=s.hasOwnProperty("$"+r[o].value),r[o].selected!==d&&(r[o].selected=d),d&&u&&(r[o].defaultSelected=!0)}else{for(o=""+rt(o),s=null,d=0;d<r.length;d++){if(r[d].value===o){r[d].selected=!0,u&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function ph(r,s,o){if(s!=null&&(s=""+rt(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+rt(o):""}function Vs(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(Ee(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=rt(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),wt(r)}function dr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var gh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pu(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||gh.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function gu(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&pu(r,d,u)}else for(var g in s)s.hasOwnProperty(g)&&pu(r,g,s[g])}function zo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ls=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bo(r){return Ls.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function oi(){}var yu=null;function qr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var js=null,Ri=null;function Fa(r){var s=nt(r);if(s&&(r=s.stateNode)){var o=r[be]||null;e:switch(r=s.stateNode,s.type){case"input":if(Uo(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+fr(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var d=u[be]||null;if(!d)throw Error(i(90));Uo(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Ba(u)}break e;case"textarea":ph(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&ks(r,!!o.multiple,s,!1)}}}var Ho=!1;function Us(r,s,o){if(Ho)return r(s,o);Ho=!0;try{var u=r(s);return u}finally{if(Ho=!1,(js!==null||Ri!==null)&&(hf(),js&&(s=js,r=Ri,Ri=js=null,Fa(s),r)))for(s=0;s<r.length;s++)Fa(r[s])}}function li(r,s){var o=r.stateNode;if(o===null)return null;var u=o[be]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qa=!1;if(Gr)try{var kt={};Object.defineProperty(kt,"passive",{get:function(){qa=!0}}),window.addEventListener("test",kt,kt),window.removeEventListener("test",kt,kt)}catch{qa=!1}var Ii=null,_u=null,Ga=null;function vu(){if(Ga)return Ga;var r,s=_u,o=s.length,u,d="value"in Ii?Ii.value:Ii.textContent,g=d.length;for(r=0;r<o&&s[r]===d[r];r++);var T=o-r;for(u=1;u<=T&&s[o-u]===d[g-u];u++);return Ga=d.slice(r,1<u?1-u:void 0)}function $a(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Yi(){return!0}function ui(){return!1}function Pn(r){function s(o,u,d,g,T){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(o=r[R],this[R]=o?o(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Yi:ui,this.isPropagationStopped=ui,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),s}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xi=Pn(Qi),zs=v({},Qi,{view:0,detail:0}),Eu=Pn(zs),Bs,Fo,Ni,qo=v({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ni&&(Ni&&r.type==="mousemove"?(Bs=r.screenX-Ni.screenX,Fo=r.screenY-Ni.screenY):Fo=Bs=0,Ni=r),Bs)},movementY:function(r){return"movementY"in r?r.movementY:Fo}}),Tu=Pn(qo),Ka=v({},qo,{dataTransfer:0}),_h=Pn(Ka),vh=v({},zs,{relatedTarget:0}),Ya=Pn(vh),bu=v({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Eh=Pn(bu),Go=v({},Qi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Th=Pn(Go),bh=v({},Qi,{data:0}),Di=Pn(bh),Sh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ah={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ch(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=wh[r])?!!s[r]:!1}function Hs(){return Ch}var rr=v({},zs,{key:function(r){if(r.key){var s=Sh[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=$a(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ah[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hs,charCode:function(r){return r.type==="keypress"?$a(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?$a(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Rh=Pn(rr),Ih=v({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xi=Pn(Ih),h=v({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hs}),_=Pn(h),A=v({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Pn(A),X=v({},qo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=Pn(X),Te=v({},Qi,{newState:0,oldState:0}),et=Pn(Te),dn=[9,13,27,32],Ct=Gr&&"CompositionEvent"in window,Zt=null;Gr&&"documentMode"in document&&(Zt=document.documentMode);var $r=Gr&&"TextEvent"in window&&!Zt,Oi=Gr&&(!Ct||Zt&&8<Zt&&11>=Zt),ci=" ",hi=!1;function Qa(r,s){switch(r){case"keyup":return dn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $o(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ko=!1;function pR(r,s){switch(r){case"compositionend":return $o(s);case"keypress":return s.which!==32?null:(hi=!0,ci);case"textInput":return r=s.data,r===ci&&hi?null:r;default:return null}}function gR(r,s){if(Ko)return r==="compositionend"||!Ct&&Qa(r,s)?(r=vu(),Ga=_u=Ii=null,Ko=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Oi&&s.locale!=="ko"?null:s.data;default:return null}}var yR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mv(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!yR[r.type]:s==="textarea"}function pv(r,s,o,u){js?Ri?Ri.push(u):Ri=[u]:js=u,s=_f(s,"onChange"),0<s.length&&(o=new xi("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Su=null,Au=null;function _R(r){WT(r,0)}function xh(r){var s=qt(r);if(Ba(s))return r}function gv(r,s){if(r==="change")return s}var yv=!1;if(Gr){var Lm;if(Gr){var jm="oninput"in document;if(!jm){var _v=document.createElement("div");_v.setAttribute("oninput","return;"),jm=typeof _v.oninput=="function"}Lm=jm}else Lm=!1;yv=Lm&&(!document.documentMode||9<document.documentMode)}function vv(){Su&&(Su.detachEvent("onpropertychange",Ev),Au=Su=null)}function Ev(r){if(r.propertyName==="value"&&xh(Au)){var s=[];pv(s,Au,r,qr(r)),Us(_R,s)}}function vR(r,s,o){r==="focusin"?(vv(),Su=s,Au=o,Su.attachEvent("onpropertychange",Ev)):r==="focusout"&&vv()}function ER(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return xh(Au)}function TR(r,s){if(r==="click")return xh(s)}function bR(r,s){if(r==="input"||r==="change")return xh(s)}function SR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Dr=typeof Object.is=="function"?Object.is:SR;function wu(r,s){if(Dr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!ke.call(s,d)||!Dr(r[d],s[d]))return!1}return!0}function Tv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function bv(r,s){var o=Tv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Tv(o)}}function Sv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Sv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Av(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Ci(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Ci(r.document)}return s}function Um(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var AR=Gr&&"documentMode"in document&&11>=document.documentMode,Yo=null,zm=null,Cu=null,Bm=!1;function wv(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Bm||Yo==null||Yo!==Ci(u)||(u=Yo,"selectionStart"in u&&Um(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Cu&&wu(Cu,u)||(Cu=u,u=_f(zm,"onSelect"),0<u.length&&(s=new xi("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=Yo)))}function Xa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Qo={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionrun:Xa("Transition","TransitionRun"),transitionstart:Xa("Transition","TransitionStart"),transitioncancel:Xa("Transition","TransitionCancel"),transitionend:Xa("Transition","TransitionEnd")},Hm={},Cv={};Gr&&(Cv=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function Wa(r){if(Hm[r])return Hm[r];if(!Qo[r])return r;var s=Qo[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Cv)return Hm[r]=s[o];return r}var Rv=Wa("animationend"),Iv=Wa("animationiteration"),xv=Wa("animationstart"),wR=Wa("transitionrun"),CR=Wa("transitionstart"),RR=Wa("transitioncancel"),Nv=Wa("transitionend"),Dv=new Map,Fm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fm.push("scrollEnd");function fi(r,s){Dv.set(r,s),hr(s,[r])}var Nh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Kr=[],Xo=0,qm=0;function Dh(){for(var r=Xo,s=qm=Xo=0;s<r;){var o=Kr[s];Kr[s++]=null;var u=Kr[s];Kr[s++]=null;var d=Kr[s];Kr[s++]=null;var g=Kr[s];if(Kr[s++]=null,u!==null&&d!==null){var T=u.pending;T===null?d.next=d:(d.next=T.next,T.next=d),u.pending=d}g!==0&&Ov(o,d,g)}}function Oh(r,s,o,u){Kr[Xo++]=r,Kr[Xo++]=s,Kr[Xo++]=o,Kr[Xo++]=u,qm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Gm(r,s,o,u){return Oh(r,s,o,u),Mh(r)}function Ja(r,s){return Oh(r,null,null,s),Mh(r)}function Ov(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var d=!1,g=r.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(d=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,d&&s!==null&&(d=31-Wt(o),r=g.hiddenUpdates,u=r[d],u===null?r[d]=[s]:u.push(s),s.lane=o|536870912),g):null}function Mh(r){if(50<Yu)throw Yu=0,eg=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Wo={};function IR(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(r,s,o,u){return new IR(r,s,o,u)}function $m(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Wi(r,s){var o=r.alternate;return o===null?(o=Or(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Mv(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Ph(r,s,o,u,d,g){var T=0;if(u=r,typeof r=="function")$m(r)&&(T=1);else if(typeof r=="string")T=MI(r,o,ge.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=Or(31,o,s,d),r.elementType=I,r.lanes=g,r;case V:return Za(o.children,d,g,s);case M:T=8,d|=24;break;case U:return r=Or(12,o,s,d|2),r.elementType=U,r.lanes=g,r;case W:return r=Or(13,o,s,d),r.elementType=W,r.lanes=g,r;case K:return r=Or(19,o,s,d),r.elementType=K,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case q:T=10;break e;case j:T=9;break e;case Q:T=11;break e;case S:T=14;break e;case C:T=16,u=null;break e}T=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Or(T,o,s,d),s.elementType=r,s.type=u,s.lanes=g,s}function Za(r,s,o,u){return r=Or(7,r,u,s),r.lanes=o,r}function Km(r,s,o){return r=Or(6,r,null,s),r.lanes=o,r}function Pv(r){var s=Or(18,null,null,0);return s.stateNode=r,s}function Ym(r,s,o){return s=Or(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var kv=new WeakMap;function Yr(r,s){if(typeof r=="object"&&r!==null){var o=kv.get(r);return o!==void 0?o:(s={value:r,source:s,stack:Be(s)},kv.set(r,s),s)}return{value:r,source:s,stack:Be(s)}}var Jo=[],Zo=0,kh=null,Ru=0,Qr=[],Xr=0,Fs=null,Mi=1,Pi="";function Ji(r,s){Jo[Zo++]=Ru,Jo[Zo++]=kh,kh=r,Ru=s}function Vv(r,s,o){Qr[Xr++]=Mi,Qr[Xr++]=Pi,Qr[Xr++]=Fs,Fs=r;var u=Mi;r=Pi;var d=32-Wt(u)-1;u&=~(1<<d),o+=1;var g=32-Wt(s)+d;if(30<g){var T=d-d%5;g=(u&(1<<T)-1).toString(32),u>>=T,d-=T,Mi=1<<32-Wt(s)+d|o<<d|u,Pi=g+r}else Mi=1<<g|o<<d|u,Pi=r}function Qm(r){r.return!==null&&(Ji(r,1),Vv(r,1,0))}function Xm(r){for(;r===kh;)kh=Jo[--Zo],Jo[Zo]=null,Ru=Jo[--Zo],Jo[Zo]=null;for(;r===Fs;)Fs=Qr[--Xr],Qr[Xr]=null,Pi=Qr[--Xr],Qr[Xr]=null,Mi=Qr[--Xr],Qr[Xr]=null}function Lv(r,s){Qr[Xr++]=Mi,Qr[Xr++]=Pi,Qr[Xr++]=Fs,Mi=s.id,Pi=s.overflow,Fs=r}var kn=null,Yt=null,yt=!1,qs=null,Wr=!1,Wm=Error(i(519));function Gs(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Iu(Yr(s,r)),Wm}function jv(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[ve]=r,s[be]=u,o){case"dialog":ut("cancel",s),ut("close",s);break;case"iframe":case"object":case"embed":ut("load",s);break;case"video":case"audio":for(o=0;o<Xu.length;o++)ut(Xu[o],s);break;case"source":ut("error",s);break;case"img":case"image":case"link":ut("error",s),ut("load",s);break;case"details":ut("toggle",s);break;case"input":ut("invalid",s),mh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ut("invalid",s);break;case"textarea":ut("invalid",s),Vs(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||tb(s.textContent,o)?(u.popover!=null&&(ut("beforetoggle",s),ut("toggle",s)),u.onScroll!=null&&ut("scroll",s),u.onScrollEnd!=null&&ut("scrollend",s),u.onClick!=null&&(s.onclick=oi),s=!0):s=!1,s||Gs(r,!0)}function Uv(r){for(kn=r.return;kn;)switch(kn.tag){case 5:case 31:case 13:Wr=!1;return;case 27:case 3:Wr=!0;return;default:kn=kn.return}}function el(r){if(r!==kn)return!1;if(!yt)return Uv(r),yt=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||pg(r.type,r.memoizedProps)),o=!o),o&&Yt&&Gs(r),Uv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Yt=cb(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Yt=cb(r)}else s===27?(s=Yt,sa(r.type)?(r=Eg,Eg=null,Yt=r):Yt=s):Yt=kn?Zr(r.stateNode.nextSibling):null;return!0}function eo(){Yt=kn=null,yt=!1}function Jm(){var r=qs;return r!==null&&(yr===null?yr=r:yr.push.apply(yr,r),qs=null),r}function Iu(r){qs===null?qs=[r]:qs.push(r)}var Zm=H(null),to=null,Zi=null;function $s(r,s,o){pe(Zm,s._currentValue),s._currentValue=o}function es(r){r._currentValue=Zm.current,ie(Zm)}function ep(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function tp(r,s,o,u){var d=r.child;for(d!==null&&(d.return=r);d!==null;){var g=d.dependencies;if(g!==null){var T=d.child;g=g.firstContext;e:for(;g!==null;){var R=g;g=d;for(var B=0;B<s.length;B++)if(R.context===s[B]){g.lanes|=o,R=g.alternate,R!==null&&(R.lanes|=o),ep(g.return,o,r),u||(T=null);break e}g=R.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(i(341));T.lanes|=o,g=T.alternate,g!==null&&(g.lanes|=o),ep(T,o,r),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===r){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function tl(r,s,o,u){r=null;for(var d=s,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var R=d.type;Dr(d.pendingProps.value,T.value)||(r!==null?r.push(R):r=[R])}}else if(d===Se.current){if(T=d.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(r!==null?r.push(tc):r=[tc])}d=d.return}r!==null&&tp(s,r,o,u),s.flags|=262144}function Vh(r){for(r=r.firstContext;r!==null;){if(!Dr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function no(r){to=r,Zi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Vn(r){return zv(to,r)}function Lh(r,s){return to===null&&no(r),zv(r,s)}function zv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Zi===null){if(r===null)throw Error(i(308));Zi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Zi=Zi.next=s;return o}var xR=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},NR=n.unstable_scheduleCallback,DR=n.unstable_NormalPriority,_n={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function np(){return{controller:new xR,data:new Map,refCount:0}}function xu(r){r.refCount--,r.refCount===0&&NR(DR,function(){r.controller.abort()})}var Nu=null,rp=0,nl=0,rl=null;function OR(r,s){if(Nu===null){var o=Nu=[];rp=0,nl=ag(),rl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return rp++,s.then(Bv,Bv),s}function Bv(){if(--rp===0&&Nu!==null){rl!==null&&(rl.status="fulfilled");var r=Nu;Nu=null,nl=0,rl=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function MR(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Hv=G.S;G.S=function(r,s){wT=Et(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&OR(r,s),Hv!==null&&Hv(r,s)};var ro=H(null);function ip(){var r=ro.current;return r!==null?r:zt.pooledCache}function jh(r,s){s===null?pe(ro,ro.current):pe(ro,s.pool)}function Fv(){var r=ip();return r===null?null:{parent:_n._currentValue,pool:r}}var il=Error(i(460)),sp=Error(i(474)),Uh=Error(i(542)),zh={then:function(){}};function qv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Gv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(oi,oi),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Kv(r),r;default:if(typeof s.status=="string")s.then(oi,oi);else{if(r=zt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Kv(r),r}throw so=s,il}}function io(r){try{var s=r._init;return s(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(so=o,il):o}}var so=null;function $v(){if(so===null)throw Error(i(459));var r=so;return so=null,r}function Kv(r){if(r===il||r===Uh)throw Error(i(483))}var sl=null,Du=0;function Bh(r){var s=Du;return Du+=1,sl===null&&(sl=[]),Gv(sl,r,s)}function Ou(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Hh(r,s){throw s.$$typeof===E?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Yv(r){function s(Y,F){if(r){var J=Y.deletions;J===null?(Y.deletions=[F],Y.flags|=16):J.push(F)}}function o(Y,F){if(!r)return null;for(;F!==null;)s(Y,F),F=F.sibling;return null}function u(Y){for(var F=new Map;Y!==null;)Y.key!==null?F.set(Y.key,Y):F.set(Y.index,Y),Y=Y.sibling;return F}function d(Y,F){return Y=Wi(Y,F),Y.index=0,Y.sibling=null,Y}function g(Y,F,J){return Y.index=J,r?(J=Y.alternate,J!==null?(J=J.index,J<F?(Y.flags|=67108866,F):J):(Y.flags|=67108866,F)):(Y.flags|=1048576,F)}function T(Y){return r&&Y.alternate===null&&(Y.flags|=67108866),Y}function R(Y,F,J,oe){return F===null||F.tag!==6?(F=Km(J,Y.mode,oe),F.return=Y,F):(F=d(F,J),F.return=Y,F)}function B(Y,F,J,oe){var je=J.type;return je===V?se(Y,F,J.props.children,oe,J.key):F!==null&&(F.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===C&&io(je)===F.type)?(F=d(F,J.props),Ou(F,J),F.return=Y,F):(F=Ph(J.type,J.key,J.props,null,Y.mode,oe),Ou(F,J),F.return=Y,F)}function Z(Y,F,J,oe){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=Ym(J,Y.mode,oe),F.return=Y,F):(F=d(F,J.children||[]),F.return=Y,F)}function se(Y,F,J,oe,je){return F===null||F.tag!==7?(F=Za(J,Y.mode,oe,je),F.return=Y,F):(F=d(F,J),F.return=Y,F)}function he(Y,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Km(""+F,Y.mode,J),F.return=Y,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return J=Ph(F.type,F.key,F.props,null,Y.mode,J),Ou(J,F),J.return=Y,J;case D:return F=Ym(F,Y.mode,J),F.return=Y,F;case C:return F=io(F),he(Y,F,J)}if(Ee(F)||L(F))return F=Za(F,Y.mode,J,null),F.return=Y,F;if(typeof F.then=="function")return he(Y,Bh(F),J);if(F.$$typeof===q)return he(Y,Lh(Y,F),J);Hh(Y,F)}return null}function te(Y,F,J,oe){var je=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return je!==null?null:R(Y,F,""+J,oe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return J.key===je?B(Y,F,J,oe):null;case D:return J.key===je?Z(Y,F,J,oe):null;case C:return J=io(J),te(Y,F,J,oe)}if(Ee(J)||L(J))return je!==null?null:se(Y,F,J,oe,null);if(typeof J.then=="function")return te(Y,F,Bh(J),oe);if(J.$$typeof===q)return te(Y,F,Lh(Y,J),oe);Hh(Y,J)}return null}function re(Y,F,J,oe,je){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Y=Y.get(J)||null,R(F,Y,""+oe,je);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return Y=Y.get(oe.key===null?J:oe.key)||null,B(F,Y,oe,je);case D:return Y=Y.get(oe.key===null?J:oe.key)||null,Z(F,Y,oe,je);case C:return oe=io(oe),re(Y,F,J,oe,je)}if(Ee(oe)||L(oe))return Y=Y.get(J)||null,se(F,Y,oe,je,null);if(typeof oe.then=="function")return re(Y,F,J,Bh(oe),je);if(oe.$$typeof===q)return re(Y,F,J,Lh(F,oe),je);Hh(F,oe)}return null}function Ne(Y,F,J,oe){for(var je=null,Tt=null,Oe=F,it=F=0,ht=null;Oe!==null&&it<J.length;it++){Oe.index>it?(ht=Oe,Oe=null):ht=Oe.sibling;var bt=te(Y,Oe,J[it],oe);if(bt===null){Oe===null&&(Oe=ht);break}r&&Oe&&bt.alternate===null&&s(Y,Oe),F=g(bt,F,it),Tt===null?je=bt:Tt.sibling=bt,Tt=bt,Oe=ht}if(it===J.length)return o(Y,Oe),yt&&Ji(Y,it),je;if(Oe===null){for(;it<J.length;it++)Oe=he(Y,J[it],oe),Oe!==null&&(F=g(Oe,F,it),Tt===null?je=Oe:Tt.sibling=Oe,Tt=Oe);return yt&&Ji(Y,it),je}for(Oe=u(Oe);it<J.length;it++)ht=re(Oe,Y,it,J[it],oe),ht!==null&&(r&&ht.alternate!==null&&Oe.delete(ht.key===null?it:ht.key),F=g(ht,F,it),Tt===null?je=ht:Tt.sibling=ht,Tt=ht);return r&&Oe.forEach(function(ca){return s(Y,ca)}),yt&&Ji(Y,it),je}function Fe(Y,F,J,oe){if(J==null)throw Error(i(151));for(var je=null,Tt=null,Oe=F,it=F=0,ht=null,bt=J.next();Oe!==null&&!bt.done;it++,bt=J.next()){Oe.index>it?(ht=Oe,Oe=null):ht=Oe.sibling;var ca=te(Y,Oe,bt.value,oe);if(ca===null){Oe===null&&(Oe=ht);break}r&&Oe&&ca.alternate===null&&s(Y,Oe),F=g(ca,F,it),Tt===null?je=ca:Tt.sibling=ca,Tt=ca,Oe=ht}if(bt.done)return o(Y,Oe),yt&&Ji(Y,it),je;if(Oe===null){for(;!bt.done;it++,bt=J.next())bt=he(Y,bt.value,oe),bt!==null&&(F=g(bt,F,it),Tt===null?je=bt:Tt.sibling=bt,Tt=bt);return yt&&Ji(Y,it),je}for(Oe=u(Oe);!bt.done;it++,bt=J.next())bt=re(Oe,Y,it,bt.value,oe),bt!==null&&(r&&bt.alternate!==null&&Oe.delete(bt.key===null?it:bt.key),F=g(bt,F,it),Tt===null?je=bt:Tt.sibling=bt,Tt=bt);return r&&Oe.forEach(function(qI){return s(Y,qI)}),yt&&Ji(Y,it),je}function jt(Y,F,J,oe){if(typeof J=="object"&&J!==null&&J.type===V&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case w:e:{for(var je=J.key;F!==null;){if(F.key===je){if(je=J.type,je===V){if(F.tag===7){o(Y,F.sibling),oe=d(F,J.props.children),oe.return=Y,Y=oe;break e}}else if(F.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===C&&io(je)===F.type){o(Y,F.sibling),oe=d(F,J.props),Ou(oe,J),oe.return=Y,Y=oe;break e}o(Y,F);break}else s(Y,F);F=F.sibling}J.type===V?(oe=Za(J.props.children,Y.mode,oe,J.key),oe.return=Y,Y=oe):(oe=Ph(J.type,J.key,J.props,null,Y.mode,oe),Ou(oe,J),oe.return=Y,Y=oe)}return T(Y);case D:e:{for(je=J.key;F!==null;){if(F.key===je)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){o(Y,F.sibling),oe=d(F,J.children||[]),oe.return=Y,Y=oe;break e}else{o(Y,F);break}else s(Y,F);F=F.sibling}oe=Ym(J,Y.mode,oe),oe.return=Y,Y=oe}return T(Y);case C:return J=io(J),jt(Y,F,J,oe)}if(Ee(J))return Ne(Y,F,J,oe);if(L(J)){if(je=L(J),typeof je!="function")throw Error(i(150));return J=je.call(J),Fe(Y,F,J,oe)}if(typeof J.then=="function")return jt(Y,F,Bh(J),oe);if(J.$$typeof===q)return jt(Y,F,Lh(Y,J),oe);Hh(Y,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(o(Y,F.sibling),oe=d(F,J),oe.return=Y,Y=oe):(o(Y,F),oe=Km(J,Y.mode,oe),oe.return=Y,Y=oe),T(Y)):o(Y,F)}return function(Y,F,J,oe){try{Du=0;var je=jt(Y,F,J,oe);return sl=null,je}catch(Oe){if(Oe===il||Oe===Uh)throw Oe;var Tt=Or(29,Oe,null,Y.mode);return Tt.lanes=oe,Tt.return=Y,Tt}finally{}}}var ao=Yv(!0),Qv=Yv(!1),Ks=!1;function ap(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function op(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ys(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Qs(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Rt&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Mh(r),Ov(r,null,o),s}return Oh(r,u,s,o),Mh(r)}function Mu(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,z(r,o)}}function lp(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?d=g=T:g=g.next=T,o=o.next}while(o!==null);g===null?d=g=s:g=g.next=s}else d=g=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var up=!1;function Pu(){if(up){var r=rl;if(r!==null)throw r}}function ku(r,s,o,u){up=!1;var d=r.updateQueue;Ks=!1;var g=d.firstBaseUpdate,T=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var B=R,Z=B.next;B.next=null,T===null?g=Z:T.next=Z,T=B;var se=r.alternate;se!==null&&(se=se.updateQueue,R=se.lastBaseUpdate,R!==T&&(R===null?se.firstBaseUpdate=Z:R.next=Z,se.lastBaseUpdate=B))}if(g!==null){var he=d.baseState;T=0,se=Z=B=null,R=g;do{var te=R.lane&-536870913,re=te!==R.lane;if(re?(ct&te)===te:(u&te)===te){te!==0&&te===nl&&(up=!0),se!==null&&(se=se.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Ne=r,Fe=R;te=s;var jt=o;switch(Fe.tag){case 1:if(Ne=Fe.payload,typeof Ne=="function"){he=Ne.call(jt,he,te);break e}he=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Fe.payload,te=typeof Ne=="function"?Ne.call(jt,he,te):Ne,te==null)break e;he=v({},he,te);break e;case 2:Ks=!0}}te=R.callback,te!==null&&(r.flags|=64,re&&(r.flags|=8192),re=d.callbacks,re===null?d.callbacks=[te]:re.push(te))}else re={lane:te,tag:R.tag,payload:R.payload,callback:R.callback,next:null},se===null?(Z=se=re,B=he):se=se.next=re,T|=te;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;re=R,R=re.next,re.next=null,d.lastBaseUpdate=re,d.shared.pending=null}}while(!0);se===null&&(B=he),d.baseState=B,d.firstBaseUpdate=Z,d.lastBaseUpdate=se,g===null&&(d.shared.lanes=0),ea|=T,r.lanes=T,r.memoizedState=he}}function Xv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Wv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Xv(o[r],s)}var al=H(null),Fh=H(0);function Jv(r,s){r=us,pe(Fh,r),pe(al,s),us=r|s.baseLanes}function cp(){pe(Fh,us),pe(al,al.current)}function hp(){us=Fh.current,ie(al),ie(Fh)}var Mr=H(null),Jr=null;function Xs(r){var s=r.alternate;pe(mn,mn.current&1),pe(Mr,r),Jr===null&&(s===null||al.current!==null||s.memoizedState!==null)&&(Jr=r)}function fp(r){pe(mn,mn.current),pe(Mr,r),Jr===null&&(Jr=r)}function Zv(r){r.tag===22?(pe(mn,mn.current),pe(Mr,r),Jr===null&&(Jr=r)):Ws()}function Ws(){pe(mn,mn.current),pe(Mr,Mr.current)}function Pr(r){ie(Mr),Jr===r&&(Jr=null),ie(mn)}var mn=H(0);function qh(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||_g(o)||vg(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ts=0,tt=null,Vt=null,vn=null,Gh=!1,ol=!1,oo=!1,$h=0,Vu=0,ll=null,PR=0;function cn(){throw Error(i(321))}function dp(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Dr(r[o],s[o]))return!1;return!0}function mp(r,s,o,u,d,g){return ts=g,tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,G.H=r===null||r.memoizedState===null?VE:xp,oo=!1,g=o(u,d),oo=!1,ol&&(g=tE(s,o,u,d)),eE(r),g}function eE(r){G.H=Uu;var s=Vt!==null&&Vt.next!==null;if(ts=0,vn=Vt=tt=null,Gh=!1,Vu=0,ll=null,s)throw Error(i(300));r===null||En||(r=r.dependencies,r!==null&&Vh(r)&&(En=!0))}function tE(r,s,o,u){tt=r;var d=0;do{if(ol&&(ll=null),Vu=0,ol=!1,25<=d)throw Error(i(301));if(d+=1,vn=Vt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}G.H=LE,g=s(o,u)}while(ol);return g}function kR(){var r=G.H,s=r.useState()[0];return s=typeof s.then=="function"?Lu(s):s,r=r.useState()[0],(Vt!==null?Vt.memoizedState:null)!==r&&(tt.flags|=1024),s}function pp(){var r=$h!==0;return $h=0,r}function gp(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function yp(r){if(Gh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gh=!1}ts=0,vn=Vt=tt=null,ol=!1,Vu=$h=0,ll=null}function ir(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?tt.memoizedState=vn=r:vn=vn.next=r,vn}function pn(){if(Vt===null){var r=tt.alternate;r=r!==null?r.memoizedState:null}else r=Vt.next;var s=vn===null?tt.memoizedState:vn.next;if(s!==null)vn=s,Vt=r;else{if(r===null)throw tt.alternate===null?Error(i(467)):Error(i(310));Vt=r,r={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},vn===null?tt.memoizedState=vn=r:vn=vn.next=r}return vn}function Kh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lu(r){var s=Vu;return Vu+=1,ll===null&&(ll=[]),r=Gv(ll,r,s),s=tt,(vn===null?s.memoizedState:vn.next)===null&&(s=s.alternate,G.H=s===null||s.memoizedState===null?VE:xp),r}function Yh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Lu(r);if(r.$$typeof===q)return Vn(r)}throw Error(i(438,String(r)))}function _p(r){var s=null,o=tt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=tt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Kh(),tt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=k;return s.index++,o}function ns(r,s){return typeof s=="function"?s(r):s}function Qh(r){var s=pn();return vp(s,Vt,r)}function vp(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var d=r.baseQueue,g=u.pending;if(g!==null){if(d!==null){var T=d.next;d.next=g.next,g.next=T}s.baseQueue=d=g,u.pending=null}if(g=r.baseState,d===null)r.memoizedState=g;else{s=d.next;var R=T=null,B=null,Z=s,se=!1;do{var he=Z.lane&-536870913;if(he!==Z.lane?(ct&he)===he:(ts&he)===he){var te=Z.revertLane;if(te===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),he===nl&&(se=!0);else if((ts&te)===te){Z=Z.next,te===nl&&(se=!0);continue}else he={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},B===null?(R=B=he,T=g):B=B.next=he,tt.lanes|=te,ea|=te;he=Z.action,oo&&o(g,he),g=Z.hasEagerState?Z.eagerState:o(g,he)}else te={lane:he,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},B===null?(R=B=te,T=g):B=B.next=te,tt.lanes|=he,ea|=he;Z=Z.next}while(Z!==null&&Z!==s);if(B===null?T=g:B.next=R,!Dr(g,r.memoizedState)&&(En=!0,se&&(o=rl,o!==null)))throw o;r.memoizedState=g,r.baseState=T,r.baseQueue=B,u.lastRenderedState=g}return d===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Ep(r){var s=pn(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,d=o.pending,g=s.memoizedState;if(d!==null){o.pending=null;var T=d=d.next;do g=r(g,T.action),T=T.next;while(T!==d);Dr(g,s.memoizedState)||(En=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,u]}function nE(r,s,o){var u=tt,d=pn(),g=yt;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var T=!Dr((Vt||d).memoizedState,o);if(T&&(d.memoizedState=o,En=!0),d=d.queue,Sp(sE.bind(null,u,d,r),[r]),d.getSnapshot!==s||T||vn!==null&&vn.memoizedState.tag&1){if(u.flags|=2048,ul(9,{destroy:void 0},iE.bind(null,u,d,o,s),null),zt===null)throw Error(i(349));g||(ts&127)!==0||rE(u,s,o)}return o}function rE(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=tt.updateQueue,s===null?(s=Kh(),tt.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function iE(r,s,o,u){s.value=o,s.getSnapshot=u,aE(s)&&oE(r)}function sE(r,s,o){return o(function(){aE(s)&&oE(r)})}function aE(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Dr(r,o)}catch{return!0}}function oE(r){var s=Ja(r,2);s!==null&&_r(s,r,2)}function Tp(r){var s=ir();if(typeof r=="function"){var o=r;if(r=o(),oo){er(!0);try{o()}finally{er(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:r},s}function lE(r,s,o,u){return r.baseState=o,vp(r,Vt,typeof u=="function"?u:ns)}function VR(r,s,o,u,d){if(Jh(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:d,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};G.T!==null?o(!0):g.isTransition=!1,u(g),o=s.pending,o===null?(g.next=s.pending=g,uE(s,g)):(g.next=o.next,s.pending=o.next=g)}}function uE(r,s){var o=s.action,u=s.payload,d=r.state;if(s.isTransition){var g=G.T,T={};G.T=T;try{var R=o(d,u),B=G.S;B!==null&&B(T,R),cE(r,s,R)}catch(Z){bp(r,s,Z)}finally{g!==null&&T.types!==null&&(g.types=T.types),G.T=g}}else try{g=o(d,u),cE(r,s,g)}catch(Z){bp(r,s,Z)}}function cE(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){hE(r,s,u)},function(u){return bp(r,s,u)}):hE(r,s,o)}function hE(r,s,o){s.status="fulfilled",s.value=o,fE(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,uE(r,o)))}function bp(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,fE(s),s=s.next;while(s!==u)}r.action=null}function fE(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function dE(r,s){return s}function mE(r,s){if(yt){var o=zt.formState;if(o!==null){e:{var u=tt;if(yt){if(Yt){t:{for(var d=Yt,g=Wr;d.nodeType!==8;){if(!g){d=null;break t}if(d=Zr(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Yt=Zr(d.nextSibling),u=d.data==="F!";break e}}Gs(u)}u=!1}u&&(s=o[0])}}return o=ir(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dE,lastRenderedState:s},o.queue=u,o=ME.bind(null,tt,u),u.dispatch=o,u=Tp(!1),g=Ip.bind(null,tt,!1,u.queue),u=ir(),d={state:s,dispatch:null,action:r,pending:null},u.queue=d,o=VR.bind(null,tt,d,g,o),d.dispatch=o,u.memoizedState=r,[s,o,!1]}function pE(r){var s=pn();return gE(s,Vt,r)}function gE(r,s,o){if(s=vp(r,s,dE)[0],r=Qh(ns)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Lu(s)}catch(T){throw T===il?Uh:T}else u=s;s=pn();var d=s.queue,g=d.dispatch;return o!==s.memoizedState&&(tt.flags|=2048,ul(9,{destroy:void 0},LR.bind(null,d,o),null)),[u,g,r]}function LR(r,s){r.action=s}function yE(r){var s=pn(),o=Vt;if(o!==null)return gE(s,o,r);pn(),s=s.memoizedState,o=pn();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function ul(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=tt.updateQueue,s===null&&(s=Kh(),tt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function _E(){return pn().memoizedState}function Xh(r,s,o,u){var d=ir();tt.flags|=r,d.memoizedState=ul(1|s,{destroy:void 0},o,u===void 0?null:u)}function Wh(r,s,o,u){var d=pn();u=u===void 0?null:u;var g=d.memoizedState.inst;Vt!==null&&u!==null&&dp(u,Vt.memoizedState.deps)?d.memoizedState=ul(s,g,o,u):(tt.flags|=r,d.memoizedState=ul(1|s,g,o,u))}function vE(r,s){Xh(8390656,8,r,s)}function Sp(r,s){Wh(2048,8,r,s)}function jR(r){tt.flags|=4;var s=tt.updateQueue;if(s===null)s=Kh(),tt.updateQueue=s,s.events=[r];else{var o=s.events;o===null?s.events=[r]:o.push(r)}}function EE(r){var s=pn().memoizedState;return jR({ref:s,nextImpl:r}),function(){if((Rt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function TE(r,s){return Wh(4,2,r,s)}function bE(r,s){return Wh(4,4,r,s)}function SE(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function AE(r,s,o){o=o!=null?o.concat([r]):null,Wh(4,4,SE.bind(null,s,r),o)}function Ap(){}function wE(r,s){var o=pn();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&dp(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function CE(r,s){var o=pn();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&dp(s,u[1]))return u[0];if(u=r(),oo){er(!0);try{r()}finally{er(!1)}}return o.memoizedState=[u,s],u}function wp(r,s,o){return o===void 0||(ts&1073741824)!==0&&(ct&261930)===0?r.memoizedState=s:(r.memoizedState=o,r=RT(),tt.lanes|=r,ea|=r,o)}function RE(r,s,o,u){return Dr(o,s)?o:al.current!==null?(r=wp(r,o,u),Dr(r,s)||(En=!0),r):(ts&42)===0||(ts&1073741824)!==0&&(ct&261930)===0?(En=!0,r.memoizedState=o):(r=RT(),tt.lanes|=r,ea|=r,s)}function IE(r,s,o,u,d){var g=ce.p;ce.p=g!==0&&8>g?g:8;var T=G.T,R={};G.T=R,Ip(r,!1,s,o);try{var B=d(),Z=G.S;if(Z!==null&&Z(R,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var se=MR(B,u);ju(r,s,se,Lr(r))}else ju(r,s,u,Lr(r))}catch(he){ju(r,s,{then:function(){},status:"rejected",reason:he},Lr())}finally{ce.p=g,T!==null&&R.types!==null&&(T.types=R.types),G.T=T}}function UR(){}function Cp(r,s,o,u){if(r.tag!==5)throw Error(i(476));var d=xE(r).queue;IE(r,d,s,me,o===null?UR:function(){return NE(r),o(u)})}function xE(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:me},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function NE(r){var s=xE(r);s.next===null&&(s=r.alternate.memoizedState),ju(r,s.next.queue,{},Lr())}function Rp(){return Vn(tc)}function DE(){return pn().memoizedState}function OE(){return pn().memoizedState}function zR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Lr();r=Ys(o);var u=Qs(s,r,o);u!==null&&(_r(u,s,o),Mu(u,s,o)),s={cache:np()},r.payload=s;return}s=s.return}}function BR(r,s,o){var u=Lr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Jh(r)?PE(s,o):(o=Gm(r,s,o,u),o!==null&&(_r(o,r,u),kE(o,s,u)))}function ME(r,s,o){var u=Lr();ju(r,s,o,u)}function ju(r,s,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Jh(r))PE(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,R=g(T,o);if(d.hasEagerState=!0,d.eagerState=R,Dr(R,T))return Oh(r,s,d,0),zt===null&&Dh(),!1}catch{}finally{}if(o=Gm(r,s,d,u),o!==null)return _r(o,r,u),kE(o,s,u),!0}return!1}function Ip(r,s,o,u){if(u={lane:2,revertLane:ag(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Jh(r)){if(s)throw Error(i(479))}else s=Gm(r,o,u,2),s!==null&&_r(s,r,2)}function Jh(r){var s=r.alternate;return r===tt||s!==null&&s===tt}function PE(r,s){ol=Gh=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function kE(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,z(r,o)}}var Uu={readContext:Vn,use:Yh,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};Uu.useEffectEvent=cn;var VE={readContext:Vn,use:Yh,useCallback:function(r,s){return ir().memoizedState=[r,s===void 0?null:s],r},useContext:Vn,useEffect:vE,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Xh(4194308,4,SE.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Xh(4194308,4,r,s)},useInsertionEffect:function(r,s){Xh(4,2,r,s)},useMemo:function(r,s){var o=ir();s=s===void 0?null:s;var u=r();if(oo){er(!0);try{r()}finally{er(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=ir();if(o!==void 0){var d=o(s);if(oo){er(!0);try{o(s)}finally{er(!1)}}}else d=s;return u.memoizedState=u.baseState=d,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:d},u.queue=r,r=r.dispatch=BR.bind(null,tt,r),[u.memoizedState,r]},useRef:function(r){var s=ir();return r={current:r},s.memoizedState=r},useState:function(r){r=Tp(r);var s=r.queue,o=ME.bind(null,tt,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Ap,useDeferredValue:function(r,s){var o=ir();return wp(o,r,s)},useTransition:function(){var r=Tp(!1);return r=IE.bind(null,tt,r.queue,!0,!1),ir().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=tt,d=ir();if(yt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),zt===null)throw Error(i(349));(ct&127)!==0||rE(u,s,o)}d.memoizedState=o;var g={value:o,getSnapshot:s};return d.queue=g,vE(sE.bind(null,u,g,r),[r]),u.flags|=2048,ul(9,{destroy:void 0},iE.bind(null,u,g,o,s),null),o},useId:function(){var r=ir(),s=zt.identifierPrefix;if(yt){var o=Pi,u=Mi;o=(u&~(1<<32-Wt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=$h++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=PR++,s="_"+s+"r_"+o.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Rp,useFormState:mE,useActionState:mE,useOptimistic:function(r){var s=ir();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Ip.bind(null,tt,!0,o),o.dispatch=s,[r,s]},useMemoCache:_p,useCacheRefresh:function(){return ir().memoizedState=zR.bind(null,tt)},useEffectEvent:function(r){var s=ir(),o={impl:r};return s.memoizedState=o,function(){if((Rt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},xp={readContext:Vn,use:Yh,useCallback:wE,useContext:Vn,useEffect:Sp,useImperativeHandle:AE,useInsertionEffect:TE,useLayoutEffect:bE,useMemo:CE,useReducer:Qh,useRef:_E,useState:function(){return Qh(ns)},useDebugValue:Ap,useDeferredValue:function(r,s){var o=pn();return RE(o,Vt.memoizedState,r,s)},useTransition:function(){var r=Qh(ns)[0],s=pn().memoizedState;return[typeof r=="boolean"?r:Lu(r),s]},useSyncExternalStore:nE,useId:DE,useHostTransitionStatus:Rp,useFormState:pE,useActionState:pE,useOptimistic:function(r,s){var o=pn();return lE(o,Vt,r,s)},useMemoCache:_p,useCacheRefresh:OE};xp.useEffectEvent=EE;var LE={readContext:Vn,use:Yh,useCallback:wE,useContext:Vn,useEffect:Sp,useImperativeHandle:AE,useInsertionEffect:TE,useLayoutEffect:bE,useMemo:CE,useReducer:Ep,useRef:_E,useState:function(){return Ep(ns)},useDebugValue:Ap,useDeferredValue:function(r,s){var o=pn();return Vt===null?wp(o,r,s):RE(o,Vt.memoizedState,r,s)},useTransition:function(){var r=Ep(ns)[0],s=pn().memoizedState;return[typeof r=="boolean"?r:Lu(r),s]},useSyncExternalStore:nE,useId:DE,useHostTransitionStatus:Rp,useFormState:yE,useActionState:yE,useOptimistic:function(r,s){var o=pn();return Vt!==null?lE(o,Vt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:_p,useCacheRefresh:OE};LE.useEffectEvent=EE;function Np(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:v({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Dp={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Lr(),d=Ys(u);d.payload=s,o!=null&&(d.callback=o),s=Qs(r,d,u),s!==null&&(_r(s,r,u),Mu(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Lr(),d=Ys(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=Qs(r,d,u),s!==null&&(_r(s,r,u),Mu(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Lr(),u=Ys(o);u.tag=2,s!=null&&(u.callback=s),s=Qs(r,u,o),s!==null&&(_r(s,r,o),Mu(s,r,o))}};function jE(r,s,o,u,d,g,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,T):s.prototype&&s.prototype.isPureReactComponent?!wu(o,u)||!wu(d,g):!0}function UE(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&Dp.enqueueReplaceState(s,s.state,null)}function lo(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=v({},o));for(var d in r)o[d]===void 0&&(o[d]=r[d])}return o}function zE(r){Nh(r)}function BE(r){console.error(r)}function HE(r){Nh(r)}function Zh(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function FE(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Op(r,s,o){return o=Ys(o),o.tag=3,o.payload={element:null},o.callback=function(){Zh(r,s)},o}function qE(r){return r=Ys(r),r.tag=3,r}function GE(r,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var g=u.value;r.payload=function(){return d(g)},r.callback=function(){FE(s,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){FE(s,o,u),typeof d!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function HR(r,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&tl(s,o,d,!0),o=Mr.current,o!==null){switch(o.tag){case 31:case 13:return Jr===null?ff():o.alternate===null&&hn===0&&(hn=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===zh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),rg(r,u,d)),!1;case 22:return o.flags|=65536,u===zh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),rg(r,u,d)),!1}throw Error(i(435,o.tag))}return rg(r,u,d),ff(),!1}if(yt)return s=Mr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Wm&&(r=Error(i(422),{cause:u}),Iu(Yr(r,o)))):(u!==Wm&&(s=Error(i(423),{cause:u}),Iu(Yr(s,o))),r=r.current.alternate,r.flags|=65536,d&=-d,r.lanes|=d,u=Yr(u,o),d=Op(r.stateNode,u,d),lp(r,d),hn!==4&&(hn=2)),!1;var g=Error(i(520),{cause:u});if(g=Yr(g,o),Ku===null?Ku=[g]:Ku.push(g),hn!==4&&(hn=2),s===null)return!0;u=Yr(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=d&-d,o.lanes|=r,r=Op(o.stateNode,u,r),lp(o,r),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ta===null||!ta.has(g))))return o.flags|=65536,d&=-d,o.lanes|=d,d=qE(d),GE(d,r,o,u),lp(o,d),!1}o=o.return}while(o!==null);return!1}var Mp=Error(i(461)),En=!1;function Ln(r,s,o,u){s.child=r===null?Qv(s,null,o,u):ao(s,r.child,o,u)}function $E(r,s,o,u,d){o=o.render;var g=s.ref;if("ref"in u){var T={};for(var R in u)R!=="ref"&&(T[R]=u[R])}else T=u;return no(s),u=mp(r,s,o,T,g,d),R=pp(),r!==null&&!En?(gp(r,s,d),rs(r,s,d)):(yt&&R&&Qm(s),s.flags|=1,Ln(r,s,u,d),s.child)}function KE(r,s,o,u,d){if(r===null){var g=o.type;return typeof g=="function"&&!$m(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,YE(r,s,g,u,d)):(r=Ph(o.type,null,u,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!Bp(r,d)){var T=g.memoizedProps;if(o=o.compare,o=o!==null?o:wu,o(T,u)&&r.ref===s.ref)return rs(r,s,d)}return s.flags|=1,r=Wi(g,u),r.ref=s.ref,r.return=s,s.child=r}function YE(r,s,o,u,d){if(r!==null){var g=r.memoizedProps;if(wu(g,u)&&r.ref===s.ref)if(En=!1,s.pendingProps=u=g,Bp(r,d))(r.flags&131072)!==0&&(En=!0);else return s.lanes=r.lanes,rs(r,s,d)}return Pp(r,s,o,u,d)}function QE(r,s,o,u){var d=u.children,g=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,r!==null){for(u=s.child=r.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~g}else u=0,s.child=null;return XE(r,s,g,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&jh(s,g!==null?g.cachePool:null),g!==null?Jv(s,g):cp(),Zv(s);else return u=s.lanes=536870912,XE(r,s,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(jh(s,g.cachePool),Jv(s,g),Ws(),s.memoizedState=null):(r!==null&&jh(s,null),cp(),Ws());return Ln(r,s,d,o),s.child}function zu(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function XE(r,s,o,u,d){var g=ip();return g=g===null?null:{parent:_n._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},r!==null&&jh(s,null),cp(),Zv(s),r!==null&&tl(r,s,u,!0),s.childLanes=d,null}function ef(r,s){return s=nf({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function WE(r,s,o){return ao(s,r.child,null,o),r=ef(s,s.pendingProps),r.flags|=2,Pr(s),s.memoizedState=null,r}function FR(r,s,o){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(yt){if(u.mode==="hidden")return r=ef(s,u),s.lanes=536870912,zu(null,r);if(fp(s),(r=Yt)?(r=ub(r,Wr),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Fs!==null?{id:Mi,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},o=Pv(r),o.return=s,s.child=o,kn=s,Yt=null)):r=null,r===null)throw Gs(s);return s.lanes=536870912,null}return ef(s,u)}var g=r.memoizedState;if(g!==null){var T=g.dehydrated;if(fp(s),d)if(s.flags&256)s.flags&=-257,s=WE(r,s,o);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(En||tl(r,s,o,!1),d=(o&r.childLanes)!==0,En||d){if(u=zt,u!==null&&(T=$(u,o),T!==0&&T!==g.retryLane))throw g.retryLane=T,Ja(r,T),_r(u,r,T),Mp;ff(),s=WE(r,s,o)}else r=g.treeContext,Yt=Zr(T.nextSibling),kn=s,yt=!0,qs=null,Wr=!1,r!==null&&Lv(s,r),s=ef(s,u),s.flags|=4096;return s}return r=Wi(r.child,{mode:u.mode,children:u.children}),r.ref=s.ref,s.child=r,r.return=s,r}function tf(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function Pp(r,s,o,u,d){return no(s),o=mp(r,s,o,u,void 0,d),u=pp(),r!==null&&!En?(gp(r,s,d),rs(r,s,d)):(yt&&u&&Qm(s),s.flags|=1,Ln(r,s,o,d),s.child)}function JE(r,s,o,u,d,g){return no(s),s.updateQueue=null,o=tE(s,u,o,d),eE(r),u=pp(),r!==null&&!En?(gp(r,s,g),rs(r,s,g)):(yt&&u&&Qm(s),s.flags|=1,Ln(r,s,o,g),s.child)}function ZE(r,s,o,u,d){if(no(s),s.stateNode===null){var g=Wo,T=o.contextType;typeof T=="object"&&T!==null&&(g=Vn(T)),g=new o(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Dp,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},ap(s),T=o.contextType,g.context=typeof T=="object"&&T!==null?Vn(T):Wo,g.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Np(s,o,T,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Dp.enqueueReplaceState(g,g.state,null),ku(s,u,g,d),Pu(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){g=s.stateNode;var R=s.memoizedProps,B=lo(o,R);g.props=B;var Z=g.context,se=o.contextType;T=Wo,typeof se=="object"&&se!==null&&(T=Vn(se));var he=o.getDerivedStateFromProps;se=typeof he=="function"||typeof g.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,se||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(R||Z!==T)&&UE(s,g,u,T),Ks=!1;var te=s.memoizedState;g.state=te,ku(s,u,g,d),Pu(),Z=s.memoizedState,R||te!==Z||Ks?(typeof he=="function"&&(Np(s,o,he,u),Z=s.memoizedState),(B=Ks||jE(s,o,B,u,te,Z,T))?(se||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=Z),g.props=u,g.state=Z,g.context=T,u=B):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,op(r,s),T=s.memoizedProps,se=lo(o,T),g.props=se,he=s.pendingProps,te=g.context,Z=o.contextType,B=Wo,typeof Z=="object"&&Z!==null&&(B=Vn(Z)),R=o.getDerivedStateFromProps,(Z=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==he||te!==B)&&UE(s,g,u,B),Ks=!1,te=s.memoizedState,g.state=te,ku(s,u,g,d),Pu();var re=s.memoizedState;T!==he||te!==re||Ks||r!==null&&r.dependencies!==null&&Vh(r.dependencies)?(typeof R=="function"&&(Np(s,o,R,u),re=s.memoizedState),(se=Ks||jE(s,o,se,u,te,re,B)||r!==null&&r.dependencies!==null&&Vh(r.dependencies))?(Z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,re,B),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,re,B)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===r.memoizedProps&&te===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&te===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=re),g.props=u,g.state=re,g.context=B,u=se):(typeof g.componentDidUpdate!="function"||T===r.memoizedProps&&te===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&te===r.memoizedState||(s.flags|=1024),u=!1)}return g=u,tf(r,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&u?(s.child=ao(s,r.child,null,d),s.child=ao(s,null,o,d)):Ln(r,s,o,d),s.memoizedState=g.state,r=s.child):r=rs(r,s,d),r}function eT(r,s,o,u){return eo(),s.flags|=256,Ln(r,s,o,u),s.child}var kp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vp(r){return{baseLanes:r,cachePool:Fv()}}function Lp(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Vr),r}function tT(r,s,o){var u=s.pendingProps,d=!1,g=(s.flags&128)!==0,T;if((T=g)||(T=r!==null&&r.memoizedState===null?!1:(mn.current&2)!==0),T&&(d=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,r===null){if(yt){if(d?Xs(s):Ws(),(r=Yt)?(r=ub(r,Wr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Fs!==null?{id:Mi,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},o=Pv(r),o.return=s,s.child=o,kn=s,Yt=null)):r=null,r===null)throw Gs(s);return vg(r)?s.lanes=32:s.lanes=536870912,null}var R=u.children;return u=u.fallback,d?(Ws(),d=s.mode,R=nf({mode:"hidden",children:R},d),u=Za(u,d,o,null),R.return=s,u.return=s,R.sibling=u,s.child=R,u=s.child,u.memoizedState=Vp(o),u.childLanes=Lp(r,T,o),s.memoizedState=kp,zu(null,u)):(Xs(s),jp(s,R))}var B=r.memoizedState;if(B!==null&&(R=B.dehydrated,R!==null)){if(g)s.flags&256?(Xs(s),s.flags&=-257,s=Up(r,s,o)):s.memoizedState!==null?(Ws(),s.child=r.child,s.flags|=128,s=null):(Ws(),R=u.fallback,d=s.mode,u=nf({mode:"visible",children:u.children},d),R=Za(R,d,o,null),R.flags|=2,u.return=s,R.return=s,u.sibling=R,s.child=u,ao(s,r.child,null,o),u=s.child,u.memoizedState=Vp(o),u.childLanes=Lp(r,T,o),s.memoizedState=kp,s=zu(null,u));else if(Xs(s),vg(R)){if(T=R.nextSibling&&R.nextSibling.dataset,T)var Z=T.dgst;T=Z,u=Error(i(419)),u.stack="",u.digest=T,Iu({value:u,source:null,stack:null}),s=Up(r,s,o)}else if(En||tl(r,s,o,!1),T=(o&r.childLanes)!==0,En||T){if(T=zt,T!==null&&(u=$(T,o),u!==0&&u!==B.retryLane))throw B.retryLane=u,Ja(r,u),_r(T,r,u),Mp;_g(R)||ff(),s=Up(r,s,o)}else _g(R)?(s.flags|=192,s.child=r.child,s=null):(r=B.treeContext,Yt=Zr(R.nextSibling),kn=s,yt=!0,qs=null,Wr=!1,r!==null&&Lv(s,r),s=jp(s,u.children),s.flags|=4096);return s}return d?(Ws(),R=u.fallback,d=s.mode,B=r.child,Z=B.sibling,u=Wi(B,{mode:"hidden",children:u.children}),u.subtreeFlags=B.subtreeFlags&65011712,Z!==null?R=Wi(Z,R):(R=Za(R,d,o,null),R.flags|=2),R.return=s,u.return=s,u.sibling=R,s.child=u,zu(null,u),u=s.child,R=r.child.memoizedState,R===null?R=Vp(o):(d=R.cachePool,d!==null?(B=_n._currentValue,d=d.parent!==B?{parent:B,pool:B}:d):d=Fv(),R={baseLanes:R.baseLanes|o,cachePool:d}),u.memoizedState=R,u.childLanes=Lp(r,T,o),s.memoizedState=kp,zu(r.child,u)):(Xs(s),o=r.child,r=o.sibling,o=Wi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(T=s.deletions,T===null?(s.deletions=[r],s.flags|=16):T.push(r)),s.child=o,s.memoizedState=null,o)}function jp(r,s){return s=nf({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function nf(r,s){return r=Or(22,r,null,s),r.lanes=0,r}function Up(r,s,o){return ao(s,r.child,null,o),r=jp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function nT(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),ep(r.return,s,o)}function zp(r,s,o,u,d,g){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:g}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=o,T.tailMode=d,T.treeForkCount=g)}function rT(r,s,o){var u=s.pendingProps,d=u.revealOrder,g=u.tail;u=u.children;var T=mn.current,R=(T&2)!==0;if(R?(T=T&1|2,s.flags|=128):T&=1,pe(mn,T),Ln(r,s,u,o),u=yt?Ru:0,!R&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&nT(r,o,s);else if(r.tag===19)nT(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)r=o.alternate,r!==null&&qh(r)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),zp(s,!1,d,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&qh(r)===null){s.child=d;break}r=d.sibling,d.sibling=o,o=d,d=r}zp(s,!0,o,null,g,u);break;case"together":zp(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function rs(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),ea|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(tl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Wi(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Wi(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function Bp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Vh(r)))}function qR(r,s,o){switch(s.tag){case 3:Le(s,s.stateNode.containerInfo),$s(s,_n,r.memoizedState.cache),eo();break;case 27:case 5:vt(s);break;case 4:Le(s,s.stateNode.containerInfo);break;case 10:$s(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,fp(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Xs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?tT(r,s,o):(Xs(s),r=rs(r,s,o),r!==null?r.sibling:null);Xs(s);break;case 19:var d=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(tl(r,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return rT(r,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),pe(mn,mn.current),u)break;return null;case 22:return s.lanes=0,QE(r,s,o,s.pendingProps);case 24:$s(s,_n,r.memoizedState.cache)}return rs(r,s,o)}function iT(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)En=!0;else{if(!Bp(r,o)&&(s.flags&128)===0)return En=!1,qR(r,s,o);En=(r.flags&131072)!==0}else En=!1,yt&&(s.flags&1048576)!==0&&Vv(s,Ru,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(r=io(s.elementType),s.type=r,typeof r=="function")$m(r)?(u=lo(r,u),s.tag=1,s=ZE(null,s,r,u,o)):(s.tag=0,s=Pp(null,s,r,u,o));else{if(r!=null){var d=r.$$typeof;if(d===Q){s.tag=11,s=$E(null,s,r,u,o);break e}else if(d===S){s.tag=14,s=KE(null,s,r,u,o);break e}}throw s=ae(r)||r,Error(i(306,s,""))}}return s;case 0:return Pp(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=lo(u,s.pendingProps),ZE(r,s,u,d,o);case 3:e:{if(Le(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var g=s.memoizedState;d=g.element,op(r,s),ku(s,u,null,o);var T=s.memoizedState;if(u=T.cache,$s(s,_n,u),u!==g.cache&&tp(s,[_n],o,!0),Pu(),u=T.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=eT(r,s,u,o);break e}else if(u!==d){d=Yr(Error(i(424)),s),Iu(d),s=eT(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Yt=Zr(r.firstChild),kn=s,yt=!0,qs=null,Wr=!0,o=Qv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(eo(),u===d){s=rs(r,s,o);break e}Ln(r,s,u,o)}s=s.child}return s;case 26:return tf(r,s),r===null?(o=pb(s.type,null,s.pendingProps,null))?s.memoizedState=o:yt||(o=s.type,r=s.pendingProps,u=vf(ye.current).createElement(o),u[ve]=s,u[be]=r,jn(u,o,r),Gt(u),s.stateNode=u):s.memoizedState=pb(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return vt(s),r===null&&yt&&(u=s.stateNode=fb(s.type,s.pendingProps,ye.current),kn=s,Wr=!0,d=Yt,sa(s.type)?(Eg=d,Yt=Zr(u.firstChild)):Yt=d),Ln(r,s,s.pendingProps.children,o),tf(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&yt&&((d=u=Yt)&&(u=EI(u,s.type,s.pendingProps,Wr),u!==null?(s.stateNode=u,kn=s,Yt=Zr(u.firstChild),Wr=!1,d=!0):d=!1),d||Gs(s)),vt(s),d=s.type,g=s.pendingProps,T=r!==null?r.memoizedProps:null,u=g.children,pg(d,g)?u=null:T!==null&&pg(d,T)&&(s.flags|=32),s.memoizedState!==null&&(d=mp(r,s,kR,null,null,o),tc._currentValue=d),tf(r,s),Ln(r,s,u,o),s.child;case 6:return r===null&&yt&&((r=o=Yt)&&(o=TI(o,s.pendingProps,Wr),o!==null?(s.stateNode=o,kn=s,Yt=null,r=!0):r=!1),r||Gs(s)),null;case 13:return tT(r,s,o);case 4:return Le(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=ao(s,null,u,o):Ln(r,s,u,o),s.child;case 11:return $E(r,s,s.type,s.pendingProps,o);case 7:return Ln(r,s,s.pendingProps,o),s.child;case 8:return Ln(r,s,s.pendingProps.children,o),s.child;case 12:return Ln(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,$s(s,s.type,u.value),Ln(r,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,no(s),d=Vn(d),u=u(d),s.flags|=1,Ln(r,s,u,o),s.child;case 14:return KE(r,s,s.type,s.pendingProps,o);case 15:return YE(r,s,s.type,s.pendingProps,o);case 19:return rT(r,s,o);case 31:return FR(r,s,o);case 22:return QE(r,s,o,s.pendingProps);case 24:return no(s),u=Vn(_n),r===null?(d=ip(),d===null&&(d=zt,g=np(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=o),d=g),s.memoizedState={parent:u,cache:d},ap(s),$s(s,_n,d)):((r.lanes&o)!==0&&(op(r,s),ku(s,null,null,o),Pu()),d=r.memoizedState,g=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),$s(s,_n,u)):(u=g.cache,$s(s,_n,u),u!==d.cache&&tp(s,[_n],o,!0))),Ln(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function is(r){r.flags|=4}function Hp(r,s,o,u,d){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(d&335544128)===d)if(r.stateNode.complete)r.flags|=8192;else if(DT())r.flags|=8192;else throw so=zh,sp}else r.flags&=-16777217}function sT(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Eb(s))if(DT())r.flags|=8192;else throw so=zh,sp}function rf(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?$i():536870912,r.lanes|=s,dl|=s)}function Bu(r,s){if(!yt)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Qt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var d=r.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function GR(r,s,o){var u=s.pendingProps;switch(Xm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(s),null;case 1:return Qt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),es(_n),ze(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(el(s)?is(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jm())),Qt(s),null;case 26:var d=s.type,g=s.memoizedState;return r===null?(is(s),g!==null?(Qt(s),sT(s,g)):(Qt(s),Hp(s,d,null,u,o))):g?g!==r.memoizedState?(is(s),Qt(s),sT(s,g)):(Qt(s),s.flags&=-16777217):(r=r.memoizedProps,r!==u&&is(s),Qt(s),Hp(s,d,r,u,o)),null;case 27:if(St(s),o=ye.current,d=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&is(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Qt(s),null}r=ge.current,el(s)?jv(s):(r=fb(d,u,o),s.stateNode=r,is(s))}return Qt(s),null;case 5:if(St(s),d=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&is(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Qt(s),null}if(g=ge.current,el(s))jv(s);else{var T=vf(ye.current);switch(g){case 1:g=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:g=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":g=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":g=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":g=T.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?T.createElement(d,{is:u.is}):T.createElement(d)}}g[ve]=s,g[be]=u;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)g.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=g;e:switch(jn(g,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&is(s)}}return Qt(s),Hp(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,o),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&is(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=ye.current,el(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,d=kn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}r[ve]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||tb(r.nodeValue,o)),r||Gs(s,!0)}else r=vf(r).createTextNode(u),r[ve]=s,s.stateNode=r}return Qt(s),null;case 31:if(o=s.memoizedState,r===null||r.memoizedState!==null){if(u=el(s),o!==null){if(r===null){if(!u)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[ve]=s}else eo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qt(s),r=!1}else o=Jm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return s.flags&256?(Pr(s),s):(Pr(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Qt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(d=el(s),u!==null&&u.dehydrated!==null){if(r===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[ve]=s}else eo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qt(s),d=!1}else d=Jm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Pr(s),s):(Pr(s),null)}return Pr(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==d&&(u.flags|=2048)),o!==r&&o&&(s.child.flags|=8192),rf(s,s.updateQueue),Qt(s),null);case 4:return ze(),r===null&&cg(s.stateNode.containerInfo),Qt(s),null;case 10:return es(s.type),Qt(s),null;case 19:if(ie(mn),u=s.memoizedState,u===null)return Qt(s),null;if(d=(s.flags&128)!==0,g=u.rendering,g===null)if(d)Bu(u,!1);else{if(hn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=qh(r),g!==null){for(s.flags|=128,Bu(u,!1),r=g.updateQueue,s.updateQueue=r,rf(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Mv(o,r),o=o.sibling;return pe(mn,mn.current&1|2),yt&&Ji(s,u.treeForkCount),s.child}r=r.sibling}u.tail!==null&&Et()>uf&&(s.flags|=128,d=!0,Bu(u,!1),s.lanes=4194304)}else{if(!d)if(r=qh(g),r!==null){if(s.flags|=128,d=!0,r=r.updateQueue,s.updateQueue=r,rf(s,r),Bu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!yt)return Qt(s),null}else 2*Et()-u.renderingStartTime>uf&&o!==536870912&&(s.flags|=128,d=!0,Bu(u,!1),s.lanes=4194304);u.isBackwards?(g.sibling=s.child,s.child=g):(r=u.last,r!==null?r.sibling=g:s.child=g,u.last=g)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Et(),r.sibling=null,o=mn.current,pe(mn,d?o&1|2:o&1),yt&&Ji(s,u.treeForkCount),r):(Qt(s),null);case 22:case 23:return Pr(s),hp(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Qt(s),s.subtreeFlags&6&&(s.flags|=8192)):Qt(s),o=s.updateQueue,o!==null&&rf(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&ie(ro),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),es(_n),Qt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function $R(r,s){switch(Xm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return es(_n),ze(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return St(s),null;case 31:if(s.memoizedState!==null){if(Pr(s),s.alternate===null)throw Error(i(340));eo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Pr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));eo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ie(mn),null;case 4:return ze(),null;case 10:return es(s.type),null;case 22:case 23:return Pr(s),hp(),r!==null&&ie(ro),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return es(_n),null;case 25:return null;default:return null}}function aT(r,s){switch(Xm(s),s.tag){case 3:es(_n),ze();break;case 26:case 27:case 5:St(s);break;case 4:ze();break;case 31:s.memoizedState!==null&&Pr(s);break;case 13:Pr(s);break;case 19:ie(mn);break;case 10:es(s.type);break;case 22:case 23:Pr(s),hp(),r!==null&&ie(ro);break;case 24:es(_n)}}function Hu(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&r)===r){u=void 0;var g=o.create,T=o.inst;u=g(),T.destroy=u}o=o.next}while(o!==d)}}catch(R){Dt(s,s.return,R)}}function Js(r,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var g=d.next;u=g;do{if((u.tag&r)===r){var T=u.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,d=s;var B=o,Z=R;try{Z()}catch(se){Dt(d,B,se)}}}u=u.next}while(u!==g)}}catch(se){Dt(s,s.return,se)}}function oT(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{Wv(s,o)}catch(u){Dt(r,r.return,u)}}}function lT(r,s,o){o.props=lo(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){Dt(r,s,u)}}function Fu(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(d){Dt(r,s,d)}}function ki(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){Dt(r,s,d)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){Dt(r,s,d)}else o.current=null}function uT(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){Dt(r,r.return,d)}}function Fp(r,s,o){try{var u=r.stateNode;mI(u,r.type,o,s),u[be]=s}catch(d){Dt(r,r.return,d)}}function cT(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&sa(r.type)||r.tag===4}function qp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||cT(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&sa(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Gp(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=oi));else if(u!==4&&(u===27&&sa(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Gp(r,s,o),r=r.sibling;r!==null;)Gp(r,s,o),r=r.sibling}function sf(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&sa(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(sf(r,s,o),r=r.sibling;r!==null;)sf(r,s,o),r=r.sibling}function hT(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);jn(s,u,o),s[ve]=r,s[be]=o}catch(g){Dt(r,r.return,g)}}var ss=!1,Tn=!1,$p=!1,fT=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function KR(r,s){if(r=r.containerInfo,dg=Cf,r=Av(r),Um(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var T=0,R=-1,B=-1,Z=0,se=0,he=r,te=null;t:for(;;){for(var re;he!==o||d!==0&&he.nodeType!==3||(R=T+d),he!==g||u!==0&&he.nodeType!==3||(B=T+u),he.nodeType===3&&(T+=he.nodeValue.length),(re=he.firstChild)!==null;)te=he,he=re;for(;;){if(he===r)break t;if(te===o&&++Z===d&&(R=T),te===g&&++se===u&&(B=T),(re=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=re}o=R===-1||B===-1?null:{start:R,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(mg={focusedElem:r,selectionRange:o},Cf=!1,Dn=s;Dn!==null;)if(s=Dn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Dn=r;else for(;Dn!==null;){switch(s=Dn,g=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)d=r[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=s,d=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var Ne=lo(o.type,d);r=u.getSnapshotBeforeUpdate(Ne,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(Fe){Dt(o,o.return,Fe)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)yg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":yg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Dn=r;break}Dn=s.return}}function dT(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:os(r,o),u&4&&Hu(5,o);break;case 1:if(os(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(T){Dt(o,o.return,T)}else{var d=lo(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(d,s,r.__reactInternalSnapshotBeforeUpdate)}catch(T){Dt(o,o.return,T)}}u&64&&oT(o),u&512&&Fu(o,o.return);break;case 3:if(os(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Wv(r,s)}catch(T){Dt(o,o.return,T)}}break;case 27:s===null&&u&4&&hT(o);case 26:case 5:os(r,o),s===null&&u&4&&uT(o),u&512&&Fu(o,o.return);break;case 12:os(r,o);break;case 31:os(r,o),u&4&&gT(r,o);break;case 13:os(r,o),u&4&&yT(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=nI.bind(null,o),bI(r,o))));break;case 22:if(u=o.memoizedState!==null||ss,!u){s=s!==null&&s.memoizedState!==null||Tn,d=ss;var g=Tn;ss=u,(Tn=s)&&!g?ls(r,o,(o.subtreeFlags&8772)!==0):os(r,o),ss=d,Tn=g}break;case 30:break;default:os(r,o)}}function mT(r){var s=r.alternate;s!==null&&(r.alternate=null,mT(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Kt(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var en=null,mr=!1;function as(r,s,o){for(o=o.child;o!==null;)pT(r,s,o),o=o.sibling}function pT(r,s,o){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Cr,o)}catch{}switch(o.tag){case 26:Tn||ki(o,s),as(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Tn||ki(o,s);var u=en,d=mr;sa(o.type)&&(en=o.stateNode,mr=!1),as(r,s,o),Ju(o.stateNode),en=u,mr=d;break;case 5:Tn||ki(o,s);case 6:if(u=en,d=mr,en=null,as(r,s,o),en=u,mr=d,en!==null)if(mr)try{(en.nodeType===9?en.body:en.nodeName==="HTML"?en.ownerDocument.body:en).removeChild(o.stateNode)}catch(g){Dt(o,s,g)}else try{en.removeChild(o.stateNode)}catch(g){Dt(o,s,g)}break;case 18:en!==null&&(mr?(r=en,ob(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Tl(r)):ob(en,o.stateNode));break;case 4:u=en,d=mr,en=o.stateNode.containerInfo,mr=!0,as(r,s,o),en=u,mr=d;break;case 0:case 11:case 14:case 15:Js(2,o,s),Tn||Js(4,o,s),as(r,s,o);break;case 1:Tn||(ki(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&lT(o,s,u)),as(r,s,o);break;case 21:as(r,s,o);break;case 22:Tn=(u=Tn)||o.memoizedState!==null,as(r,s,o),Tn=u;break;default:as(r,s,o)}}function gT(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Tl(r)}catch(o){Dt(s,s.return,o)}}}function yT(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Tl(r)}catch(o){Dt(s,s.return,o)}}function YR(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new fT),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new fT),s;default:throw Error(i(435,r.tag))}}function af(r,s){var o=YR(r);s.forEach(function(u){if(!o.has(u)){o.add(u);var d=rI.bind(null,r,u);u.then(d,d)}})}function pr(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],g=r,T=s,R=T;e:for(;R!==null;){switch(R.tag){case 27:if(sa(R.type)){en=R.stateNode,mr=!1;break e}break;case 5:en=R.stateNode,mr=!1;break e;case 3:case 4:en=R.stateNode.containerInfo,mr=!0;break e}R=R.return}if(en===null)throw Error(i(160));pT(g,T,d),en=null,mr=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)_T(s,r),s=s.sibling}var di=null;function _T(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:pr(s,r),gr(r),u&4&&(Js(3,r,r.return),Hu(3,r),Js(5,r,r.return));break;case 1:pr(s,r),gr(r),u&512&&(Tn||o===null||ki(o,o.return)),u&64&&ss&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=di;if(pr(s,r),gr(r),u&512&&(Tn||o===null||ki(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":g=d.getElementsByTagName("title")[0],(!g||g[Mt]||g[ve]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(u),d.head.insertBefore(g,d.querySelector("head > title"))),jn(g,u,o),g[ve]=r,Gt(g),u=g;break e;case"link":var T=_b("link","href",d).get(u+(o.href||""));if(T){for(var R=0;R<T.length;R++)if(g=T[R],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(R,1);break t}}g=d.createElement(u),jn(g,u,o),d.head.appendChild(g);break;case"meta":if(T=_b("meta","content",d).get(u+(o.content||""))){for(R=0;R<T.length;R++)if(g=T[R],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(R,1);break t}}g=d.createElement(u),jn(g,u,o),d.head.appendChild(g);break;default:throw Error(i(468,u))}g[ve]=r,Gt(g),u=g}r.stateNode=u}else vb(d,r.type,r.stateNode);else r.stateNode=yb(d,u,r.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?vb(d,r.type,r.stateNode):yb(d,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Fp(r,r.memoizedProps,o.memoizedProps)}break;case 27:pr(s,r),gr(r),u&512&&(Tn||o===null||ki(o,o.return)),o!==null&&u&4&&Fp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(pr(s,r),gr(r),u&512&&(Tn||o===null||ki(o,o.return)),r.flags&32){d=r.stateNode;try{dr(d,"")}catch(Ne){Dt(r,r.return,Ne)}}u&4&&r.stateNode!=null&&(d=r.memoizedProps,Fp(r,d,o!==null?o.memoizedProps:d)),u&1024&&($p=!0);break;case 6:if(pr(s,r),gr(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Ne){Dt(r,r.return,Ne)}}break;case 3:if(bf=null,d=di,di=Ef(s.containerInfo),pr(s,r),di=d,gr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Tl(s.containerInfo)}catch(Ne){Dt(r,r.return,Ne)}$p&&($p=!1,vT(r));break;case 4:u=di,di=Ef(r.stateNode.containerInfo),pr(s,r),gr(r),di=u;break;case 12:pr(s,r),gr(r);break;case 31:pr(s,r),gr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,af(r,u)));break;case 13:pr(s,r),gr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(lf=Et()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,af(r,u)));break;case 22:d=r.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,Z=ss,se=Tn;if(ss=Z||d,Tn=se||B,pr(s,r),Tn=se,ss=Z,gr(r),u&8192)e:for(s=r.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||B||ss||Tn||uo(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){B=o=s;try{if(g=B.stateNode,d)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{R=B.stateNode;var he=B.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;R.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ne){Dt(B,B.return,Ne)}}}else if(s.tag===6){if(o===null){B=s;try{B.stateNode.nodeValue=d?"":B.memoizedProps}catch(Ne){Dt(B,B.return,Ne)}}}else if(s.tag===18){if(o===null){B=s;try{var re=B.stateNode;d?lb(re,!0):lb(B.stateNode,!1)}catch(Ne){Dt(B,B.return,Ne)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,af(r,o))));break;case 19:pr(s,r),gr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,af(r,u)));break;case 30:break;case 21:break;default:pr(s,r),gr(r)}}function gr(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(cT(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,g=qp(r);sf(r,g,d);break;case 5:var T=o.stateNode;o.flags&32&&(dr(T,""),o.flags&=-33);var R=qp(r);sf(r,R,T);break;case 3:case 4:var B=o.stateNode.containerInfo,Z=qp(r);Gp(r,Z,B);break;default:throw Error(i(161))}}catch(se){Dt(r,r.return,se)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function vT(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;vT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function os(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)dT(r,s.alternate,s),s=s.sibling}function uo(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Js(4,s,s.return),uo(s);break;case 1:ki(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&lT(s,s.return,o),uo(s);break;case 27:Ju(s.stateNode);case 26:case 5:ki(s,s.return),uo(s);break;case 22:s.memoizedState===null&&uo(s);break;case 30:uo(s);break;default:uo(s)}r=r.sibling}}function ls(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=r,g=s,T=g.flags;switch(g.tag){case 0:case 11:case 15:ls(d,g,o),Hu(4,g);break;case 1:if(ls(d,g,o),u=g,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Z){Dt(u,u.return,Z)}if(u=g,d=u.updateQueue,d!==null){var R=u.stateNode;try{var B=d.shared.hiddenCallbacks;if(B!==null)for(d.shared.hiddenCallbacks=null,d=0;d<B.length;d++)Xv(B[d],R)}catch(Z){Dt(u,u.return,Z)}}o&&T&64&&oT(g),Fu(g,g.return);break;case 27:hT(g);case 26:case 5:ls(d,g,o),o&&u===null&&T&4&&uT(g),Fu(g,g.return);break;case 12:ls(d,g,o);break;case 31:ls(d,g,o),o&&T&4&&gT(d,g);break;case 13:ls(d,g,o),o&&T&4&&yT(d,g);break;case 22:g.memoizedState===null&&ls(d,g,o),Fu(g,g.return);break;case 30:break;default:ls(d,g,o)}s=s.sibling}}function Kp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&xu(o))}function Yp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&xu(r))}function mi(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ET(r,s,o,u),s=s.sibling}function ET(r,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:mi(r,s,o,u),d&2048&&Hu(9,s);break;case 1:mi(r,s,o,u);break;case 3:mi(r,s,o,u),d&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&xu(r)));break;case 12:if(d&2048){mi(r,s,o,u),r=s.stateNode;try{var g=s.memoizedProps,T=g.id,R=g.onPostCommit;typeof R=="function"&&R(T,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){Dt(s,s.return,B)}}else mi(r,s,o,u);break;case 31:mi(r,s,o,u);break;case 13:mi(r,s,o,u);break;case 23:break;case 22:g=s.stateNode,T=s.alternate,s.memoizedState!==null?g._visibility&2?mi(r,s,o,u):qu(r,s):g._visibility&2?mi(r,s,o,u):(g._visibility|=2,cl(r,s,o,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Kp(T,s);break;case 24:mi(r,s,o,u),d&2048&&Yp(s.alternate,s);break;default:mi(r,s,o,u)}}function cl(r,s,o,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=r,T=s,R=o,B=u,Z=T.flags;switch(T.tag){case 0:case 11:case 15:cl(g,T,R,B,d),Hu(8,T);break;case 23:break;case 22:var se=T.stateNode;T.memoizedState!==null?se._visibility&2?cl(g,T,R,B,d):qu(g,T):(se._visibility|=2,cl(g,T,R,B,d)),d&&Z&2048&&Kp(T.alternate,T);break;case 24:cl(g,T,R,B,d),d&&Z&2048&&Yp(T.alternate,T);break;default:cl(g,T,R,B,d)}s=s.sibling}}function qu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,d=u.flags;switch(u.tag){case 22:qu(o,u),d&2048&&Kp(u.alternate,u);break;case 24:qu(o,u),d&2048&&Yp(u.alternate,u);break;default:qu(o,u)}s=s.sibling}}var Gu=8192;function hl(r,s,o){if(r.subtreeFlags&Gu)for(r=r.child;r!==null;)TT(r,s,o),r=r.sibling}function TT(r,s,o){switch(r.tag){case 26:hl(r,s,o),r.flags&Gu&&r.memoizedState!==null&&PI(o,di,r.memoizedState,r.memoizedProps);break;case 5:hl(r,s,o);break;case 3:case 4:var u=di;di=Ef(r.stateNode.containerInfo),hl(r,s,o),di=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Gu,Gu=16777216,hl(r,s,o),Gu=u):hl(r,s,o));break;default:hl(r,s,o)}}function bT(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function $u(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Dn=u,AT(u,r)}bT(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ST(r),r=r.sibling}function ST(r){switch(r.tag){case 0:case 11:case 15:$u(r),r.flags&2048&&Js(9,r,r.return);break;case 3:$u(r);break;case 12:$u(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,of(r)):$u(r);break;default:$u(r)}}function of(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Dn=u,AT(u,r)}bT(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Js(8,s,s.return),of(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,of(s));break;default:of(s)}r=r.sibling}}function AT(r,s){for(;Dn!==null;){var o=Dn;switch(o.tag){case 0:case 11:case 15:Js(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:xu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Dn=u;else e:for(o=r;Dn!==null;){u=Dn;var d=u.sibling,g=u.return;if(mT(u),u===o){Dn=null;break e}if(d!==null){d.return=g,Dn=d;break e}Dn=g}}}var QR={getCacheForType:function(r){var s=Vn(_n),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o},cacheSignal:function(){return Vn(_n).controller.signal}},XR=typeof WeakMap=="function"?WeakMap:Map,Rt=0,zt=null,lt=null,ct=0,Nt=0,kr=null,Zs=!1,fl=!1,Qp=!1,us=0,hn=0,ea=0,co=0,Xp=0,Vr=0,dl=0,Ku=null,yr=null,Wp=!1,lf=0,wT=0,uf=1/0,cf=null,ta=null,Cn=0,na=null,ml=null,cs=0,Jp=0,Zp=null,CT=null,Yu=0,eg=null;function Lr(){return(Rt&2)!==0&&ct!==0?ct&-ct:G.T!==null?ag():_e()}function RT(){if(Vr===0)if((ct&536870912)===0||yt){var r=bi;bi<<=1,(bi&3932160)===0&&(bi=262144),Vr=r}else Vr=536870912;return r=Mr.current,r!==null&&(r.flags|=32),Vr}function _r(r,s,o){(r===zt&&(Nt===2||Nt===9)||r.cancelPendingCommit!==null)&&(pl(r,0),ra(r,ct,Vr,!1)),Si(r,o),((Rt&2)===0||r!==zt)&&(r===zt&&((Rt&2)===0&&(co|=o),hn===4&&ra(r,ct,Vr,!1)),Vi(r))}function IT(r,s,o){if((Rt&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&r.expiredLanes)===0||Ir(r,s),d=u?ZR(r,s):ng(r,s,!0),g=u;do{if(d===0){fl&&!u&&ra(r,s,0,!1);break}else{if(o=r.current.alternate,g&&!WR(o)){d=ng(r,s,!1),g=!1;continue}if(d===2){if(g=s,r.errorRecoveryDisabledLanes&g)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var R=r;d=Ku;var B=R.current.memoizedState.isDehydrated;if(B&&(pl(R,T).flags|=256),T=ng(R,T,!1),T!==2){if(Qp&&!B){R.errorRecoveryDisabledLanes|=g,co|=g,d=4;break e}g=yr,yr=d,g!==null&&(yr===null?yr=g:yr.push.apply(yr,g))}d=T}if(g=!1,d!==2)continue}}if(d===1){pl(r,0),ra(r,s,0,!0);break}e:{switch(u=r,g=d,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ra(u,s,Vr,!Zs);break e;case 2:yr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=lf+300-Et(),10<d)){if(ra(u,s,Vr,!Zs),Rr(u,0,!0)!==0)break e;cs=s,u.timeoutHandle=sb(xT.bind(null,u,o,yr,cf,Wp,s,Vr,co,dl,Zs,g,"Throttled",-0,0),d);break e}xT(u,o,yr,cf,Wp,s,Vr,co,dl,Zs,g,null,-0,0)}}break}while(!0);Vi(r)}function xT(r,s,o,u,d,g,T,R,B,Z,se,he,te,re){if(r.timeoutHandle=-1,he=s.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:oi},TT(s,g,he);var Ne=(g&62914560)===g?lf-Et():(g&4194048)===g?wT-Et():0;if(Ne=kI(he,Ne),Ne!==null){cs=g,r.cancelPendingCommit=Ne(LT.bind(null,r,s,g,o,u,d,T,R,B,se,he,null,te,re)),ra(r,g,T,!Z);return}}LT(r,s,g,o,u,d,T,R,B)}function WR(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],g=d.getSnapshot;d=d.value;try{if(!Dr(g(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ra(r,s,o,u){s&=~Xp,s&=~co,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var d=s;0<d;){var g=31-Wt(d),T=1<<g;u[g]=-1,d&=~T}o!==0&&Ki(r,o,s)}function hf(){return(Rt&6)===0?(Qu(0),!1):!0}function tg(){if(lt!==null){if(Nt===0)var r=lt.return;else r=lt,Zi=to=null,yp(r),sl=null,Du=0,r=lt;for(;r!==null;)aT(r.alternate,r),r=r.return;lt=null}}function pl(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,yI(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),cs=0,tg(),zt=r,lt=o=Wi(r.current,null),ct=s,Nt=0,kr=null,Zs=!1,fl=Ir(r,s),Qp=!1,dl=Vr=Xp=co=ea=hn=0,yr=Ku=null,Wp=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var d=31-Wt(u),g=1<<d;s|=r[d],u&=~g}return us=s,Dh(),o}function NT(r,s){tt=null,G.H=Uu,s===il||s===Uh?(s=$v(),Nt=3):s===sp?(s=$v(),Nt=4):Nt=s===Mp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,kr=s,lt===null&&(hn=1,Zh(r,Yr(s,r.current)))}function DT(){var r=Mr.current;return r===null?!0:(ct&4194048)===ct?Jr===null:(ct&62914560)===ct||(ct&536870912)!==0?r===Jr:!1}function OT(){var r=G.H;return G.H=Uu,r===null?Uu:r}function MT(){var r=G.A;return G.A=QR,r}function ff(){hn=4,Zs||(ct&4194048)!==ct&&Mr.current!==null||(fl=!0),(ea&134217727)===0&&(co&134217727)===0||zt===null||ra(zt,ct,Vr,!1)}function ng(r,s,o){var u=Rt;Rt|=2;var d=OT(),g=MT();(zt!==r||ct!==s)&&(cf=null,pl(r,s)),s=!1;var T=hn;e:do try{if(Nt!==0&&lt!==null){var R=lt,B=kr;switch(Nt){case 8:tg(),T=6;break e;case 3:case 2:case 9:case 6:Mr.current===null&&(s=!0);var Z=Nt;if(Nt=0,kr=null,gl(r,R,B,Z),o&&fl){T=0;break e}break;default:Z=Nt,Nt=0,kr=null,gl(r,R,B,Z)}}JR(),T=hn;break}catch(se){NT(r,se)}while(!0);return s&&r.shellSuspendCounter++,Zi=to=null,Rt=u,G.H=d,G.A=g,lt===null&&(zt=null,ct=0,Dh()),T}function JR(){for(;lt!==null;)PT(lt)}function ZR(r,s){var o=Rt;Rt|=2;var u=OT(),d=MT();zt!==r||ct!==s?(cf=null,uf=Et()+500,pl(r,s)):fl=Ir(r,s);e:do try{if(Nt!==0&&lt!==null){s=lt;var g=kr;t:switch(Nt){case 1:Nt=0,kr=null,gl(r,s,g,1);break;case 2:case 9:if(qv(g)){Nt=0,kr=null,kT(s);break}s=function(){Nt!==2&&Nt!==9||zt!==r||(Nt=7),Vi(r)},g.then(s,s);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:qv(g)?(Nt=0,kr=null,kT(s)):(Nt=0,kr=null,gl(r,s,g,7));break;case 5:var T=null;switch(lt.tag){case 26:T=lt.memoizedState;case 5:case 27:var R=lt;if(T?Eb(T):R.stateNode.complete){Nt=0,kr=null;var B=R.sibling;if(B!==null)lt=B;else{var Z=R.return;Z!==null?(lt=Z,df(Z)):lt=null}break t}}Nt=0,kr=null,gl(r,s,g,5);break;case 6:Nt=0,kr=null,gl(r,s,g,6);break;case 8:tg(),hn=6;break e;default:throw Error(i(462))}}eI();break}catch(se){NT(r,se)}while(!0);return Zi=to=null,G.H=u,G.A=d,Rt=o,lt!==null?0:(zt=null,ct=0,Dh(),hn)}function eI(){for(;lt!==null&&!ln();)PT(lt)}function PT(r){var s=iT(r.alternate,r,us);r.memoizedProps=r.pendingProps,s===null?df(r):lt=s}function kT(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=JE(o,s,s.pendingProps,s.type,void 0,ct);break;case 11:s=JE(o,s,s.pendingProps,s.type.render,s.ref,ct);break;case 5:yp(s);default:aT(o,s),s=lt=Mv(s,us),s=iT(o,s,us)}r.memoizedProps=r.pendingProps,s===null?df(r):lt=s}function gl(r,s,o,u){Zi=to=null,yp(s),sl=null,Du=0;var d=s.return;try{if(HR(r,d,s,o,ct)){hn=1,Zh(r,Yr(o,r.current)),lt=null;return}}catch(g){if(d!==null)throw lt=d,g;hn=1,Zh(r,Yr(o,r.current)),lt=null;return}s.flags&32768?(yt||u===1?r=!0:fl||(ct&536870912)!==0?r=!1:(Zs=r=!0,(u===2||u===9||u===3||u===6)&&(u=Mr.current,u!==null&&u.tag===13&&(u.flags|=16384))),VT(s,r)):df(s)}function df(r){var s=r;do{if((s.flags&32768)!==0){VT(s,Zs);return}r=s.return;var o=GR(s.alternate,s,us);if(o!==null){lt=o;return}if(s=s.sibling,s!==null){lt=s;return}lt=s=r}while(s!==null);hn===0&&(hn=5)}function VT(r,s){do{var o=$R(r.alternate,r);if(o!==null){o.flags&=32767,lt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){lt=r;return}lt=r=o}while(r!==null);hn=6,lt=null}function LT(r,s,o,u,d,g,T,R,B){r.cancelPendingCommit=null;do mf();while(Cn!==0);if((Rt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=qm,du(r,o,g,T,R,B),r===zt&&(lt=zt=null,ct=0),ml=s,na=r,cs=o,Jp=g,Zp=d,CT=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,iI(un,function(){return HT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,d=ce.p,ce.p=2,T=Rt,Rt|=4;try{KR(r,s,o)}finally{Rt=T,ce.p=d,G.T=u}}Cn=1,jT(),UT(),zT()}}function jT(){if(Cn===1){Cn=0;var r=na,s=ml,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=G.T,G.T=null;var u=ce.p;ce.p=2;var d=Rt;Rt|=4;try{_T(s,r);var g=mg,T=Av(r.containerInfo),R=g.focusedElem,B=g.selectionRange;if(T!==R&&R&&R.ownerDocument&&Sv(R.ownerDocument.documentElement,R)){if(B!==null&&Um(R)){var Z=B.start,se=B.end;if(se===void 0&&(se=Z),"selectionStart"in R)R.selectionStart=Z,R.selectionEnd=Math.min(se,R.value.length);else{var he=R.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var re=te.getSelection(),Ne=R.textContent.length,Fe=Math.min(B.start,Ne),jt=B.end===void 0?Fe:Math.min(B.end,Ne);!re.extend&&Fe>jt&&(T=jt,jt=Fe,Fe=T);var Y=bv(R,Fe),F=bv(R,jt);if(Y&&F&&(re.rangeCount!==1||re.anchorNode!==Y.node||re.anchorOffset!==Y.offset||re.focusNode!==F.node||re.focusOffset!==F.offset)){var J=he.createRange();J.setStart(Y.node,Y.offset),re.removeAllRanges(),Fe>jt?(re.addRange(J),re.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),re.addRange(J))}}}}for(he=[],re=R;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<he.length;R++){var oe=he[R];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Cf=!!dg,mg=dg=null}finally{Rt=d,ce.p=u,G.T=o}}r.current=s,Cn=2}}function UT(){if(Cn===2){Cn=0;var r=na,s=ml,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=G.T,G.T=null;var u=ce.p;ce.p=2;var d=Rt;Rt|=4;try{dT(r,s.alternate,s)}finally{Rt=d,ce.p=u,G.T=o}}Cn=3}}function zT(){if(Cn===4||Cn===3){Cn=0,Ot();var r=na,s=ml,o=cs,u=CT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Cn=5:(Cn=0,ml=na=null,BT(r,r.pendingLanes));var d=r.pendingLanes;if(d===0&&(ta=null),de(o),s=s.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Cr,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=G.T,d=ce.p,ce.p=2,G.T=null;try{for(var g=r.onRecoverableError,T=0;T<u.length;T++){var R=u[T];g(R.value,{componentStack:R.stack})}}finally{G.T=s,ce.p=d}}(cs&3)!==0&&mf(),Vi(r),d=r.pendingLanes,(o&261930)!==0&&(d&42)!==0?r===eg?Yu++:(Yu=0,eg=r):Yu=0,Qu(0)}}function BT(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,xu(s)))}function mf(){return jT(),UT(),zT(),HT()}function HT(){if(Cn!==5)return!1;var r=na,s=Jp;Jp=0;var o=de(cs),u=G.T,d=ce.p;try{ce.p=32>o?32:o,G.T=null,o=Zp,Zp=null;var g=na,T=cs;if(Cn=0,ml=na=null,cs=0,(Rt&6)!==0)throw Error(i(331));var R=Rt;if(Rt|=4,ST(g.current),ET(g,g.current,T,o),Rt=R,Qu(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Cr,g)}catch{}return!0}finally{ce.p=d,G.T=u,BT(r,s)}}function FT(r,s,o){s=Yr(o,s),s=Op(r.stateNode,s,2),r=Qs(r,s,2),r!==null&&(Si(r,2),Vi(r))}function Dt(r,s,o){if(r.tag===3)FT(r,r,o);else for(;s!==null;){if(s.tag===3){FT(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ta===null||!ta.has(u))){r=Yr(o,r),o=qE(2),u=Qs(s,o,2),u!==null&&(GE(o,u,s,r),Si(u,2),Vi(u));break}}s=s.return}}function rg(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new XR;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(Qp=!0,d.add(o),r=tI.bind(null,r,s,o),s.then(r,r))}function tI(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,zt===r&&(ct&o)===o&&(hn===4||hn===3&&(ct&62914560)===ct&&300>Et()-lf?(Rt&2)===0&&pl(r,0):Xp|=o,dl===ct&&(dl=0)),Vi(r)}function qT(r,s){s===0&&(s=$i()),r=Ja(r,s),r!==null&&(Si(r,s),Vi(r))}function nI(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),qT(r,o)}function rI(r,s){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,d=r.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),qT(r,o)}function iI(r,s){return Ze(r,s)}var pf=null,yl=null,ig=!1,gf=!1,sg=!1,ia=0;function Vi(r){r!==yl&&r.next===null&&(yl===null?pf=yl=r:yl=yl.next=r),gf=!0,ig||(ig=!0,aI())}function Qu(r,s){if(!sg&&gf){sg=!0;do for(var o=!1,u=pf;u!==null;){if(r!==0){var d=u.pendingLanes;if(d===0)var g=0;else{var T=u.suspendedLanes,R=u.pingedLanes;g=(1<<31-Wt(42|r)+1)-1,g&=d&~(T&~R),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,YT(u,g))}else g=ct,g=Rr(u,u===zt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Ir(u,g)||(o=!0,YT(u,g));u=u.next}while(o);sg=!1}}function sI(){GT()}function GT(){gf=ig=!1;var r=0;ia!==0&&gI()&&(r=ia);for(var s=Et(),o=null,u=pf;u!==null;){var d=u.next,g=$T(u,s);g===0?(u.next=null,o===null?pf=d:o.next=d,d===null&&(yl=o)):(o=u,(r!==0||(g&3)!==0)&&(gf=!0)),u=d}Cn!==0&&Cn!==5||Qu(r),ia!==0&&(ia=0)}function $T(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var T=31-Wt(g),R=1<<T,B=d[T];B===-1?((R&o)===0||(R&u)!==0)&&(d[T]=jo(R,s)):B<=s&&(r.expiredLanes|=R),g&=~R}if(s=zt,o=ct,o=Rr(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Nt===2||Nt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&gt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Ir(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&gt(u),de(o)){case 2:case 8:o=ur;break;case 32:o=un;break;case 268435456:o=ja;break;default:o=un}return u=KT.bind(null,r),o=Ze(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&gt(u),r.callbackPriority=2,r.callbackNode=null,2}function KT(r,s){if(Cn!==0&&Cn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(mf()&&r.callbackNode!==o)return null;var u=ct;return u=Rr(r,r===zt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(IT(r,u,s),$T(r,Et()),r.callbackNode!=null&&r.callbackNode===o?KT.bind(null,r):null)}function YT(r,s){if(mf())return null;IT(r,s,!0)}function aI(){_I(function(){(Rt&6)!==0?Ze(lr,sI):GT()})}function ag(){if(ia===0){var r=nl;r===0&&(r=tr,tr<<=1,(tr&261888)===0&&(tr=256)),ia=r}return ia}function QT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Bo(""+r)}function XT(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function oI(r,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var g=QT((d[be]||null).action),T=u.submitter;T&&(s=(s=T[be]||null)?QT(s.formAction):T.getAttribute("formAction"),s!==null&&(g=s,T=null));var R=new xi("action","action",null,u,d);r.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ia!==0){var B=T?XT(d,T):new FormData(d);Cp(o,{pending:!0,data:B,method:d.method,action:g},null,B)}}else typeof g=="function"&&(R.preventDefault(),B=T?XT(d,T):new FormData(d),Cp(o,{pending:!0,data:B,method:d.method,action:g},g,B))},currentTarget:d}]})}}for(var og=0;og<Fm.length;og++){var lg=Fm[og],lI=lg.toLowerCase(),uI=lg[0].toUpperCase()+lg.slice(1);fi(lI,"on"+uI)}fi(Rv,"onAnimationEnd"),fi(Iv,"onAnimationIteration"),fi(xv,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(wR,"onTransitionRun"),fi(CR,"onTransitionStart"),fi(RR,"onTransitionCancel"),fi(Nv,"onTransitionEnd"),Gn("onMouseEnter",["mouseout","mouseover"]),Gn("onMouseLeave",["mouseout","mouseover"]),Gn("onPointerEnter",["pointerout","pointerover"]),Gn("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xu));function WT(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],d=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var T=u.length-1;0<=T;T--){var R=u[T],B=R.instance,Z=R.currentTarget;if(R=R.listener,B!==g&&d.isPropagationStopped())break e;g=R,d.currentTarget=Z;try{g(d)}catch(se){Nh(se)}d.currentTarget=null,g=B}else for(T=0;T<u.length;T++){if(R=u[T],B=R.instance,Z=R.currentTarget,R=R.listener,B!==g&&d.isPropagationStopped())break e;g=R,d.currentTarget=Z;try{g(d)}catch(se){Nh(se)}d.currentTarget=null,g=B}}}}function ut(r,s){var o=s[qe];o===void 0&&(o=s[qe]=new Set);var u=r+"__bubble";o.has(u)||(JT(s,r,2,!1),o.add(u))}function ug(r,s,o){var u=0;s&&(u|=4),JT(o,r,u,s)}var yf="_reactListening"+Math.random().toString(36).slice(2);function cg(r){if(!r[yf]){r[yf]=!0,cr.forEach(function(o){o!=="selectionchange"&&(cI.has(o)||ug(o,!1,r),ug(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[yf]||(s[yf]=!0,ug("selectionchange",!1,s))}}function JT(r,s,o,u){switch(Rb(s)){case 2:var d=jI;break;case 8:d=UI;break;default:d=wg}o=d.bind(null,s,o,r),d=void 0,!qa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?r.addEventListener(s,o,{capture:!0,passive:d}):r.addEventListener(s,o,!0):d!==void 0?r.addEventListener(s,o,{passive:d}):r.addEventListener(s,o,!1)}function hg(r,s,o,u,d){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var R=u.stateNode.containerInfo;if(R===d)break;if(T===4)for(T=u.return;T!==null;){var B=T.tag;if((B===3||B===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;R!==null;){if(T=Ft(R),T===null)return;if(B=T.tag,B===5||B===6||B===26||B===27){u=g=T;continue e}R=R.parentNode}}u=u.return}Us(function(){var Z=g,se=qr(o),he=[];e:{var te=Dv.get(r);if(te!==void 0){var re=xi,Ne=r;switch(r){case"keypress":if($a(o)===0)break e;case"keydown":case"keyup":re=Rh;break;case"focusin":Ne="focus",re=Ya;break;case"focusout":Ne="blur",re=Ya;break;case"beforeblur":case"afterblur":re=Ya;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=_h;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=_;break;case Rv:case Iv:case xv:re=Eh;break;case Nv:re=N;break;case"scroll":case"scrollend":re=Eu;break;case"wheel":re=ne;break;case"copy":case"cut":case"paste":re=Th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Xi;break;case"toggle":case"beforetoggle":re=et}var Fe=(s&4)!==0,jt=!Fe&&(r==="scroll"||r==="scrollend"),Y=Fe?te!==null?te+"Capture":null:te;Fe=[];for(var F=Z,J;F!==null;){var oe=F;if(J=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||J===null||Y===null||(oe=li(F,Y),oe!=null&&Fe.push(Wu(F,oe,J))),jt)break;F=F.return}0<Fe.length&&(te=new re(te,Ne,null,o,se),he.push({event:te,listeners:Fe}))}}if((s&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",re=r==="mouseout"||r==="pointerout",te&&o!==yu&&(Ne=o.relatedTarget||o.fromElement)&&(Ft(Ne)||Ne[Ie]))break e;if((re||te)&&(te=se.window===se?se:(te=se.ownerDocument)?te.defaultView||te.parentWindow:window,re?(Ne=o.relatedTarget||o.toElement,re=Z,Ne=Ne?Ft(Ne):null,Ne!==null&&(jt=l(Ne),Fe=Ne.tag,Ne!==jt||Fe!==5&&Fe!==27&&Fe!==6)&&(Ne=null)):(re=null,Ne=Z),re!==Ne)){if(Fe=Tu,oe="onMouseLeave",Y="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(Fe=Xi,oe="onPointerLeave",Y="onPointerEnter",F="pointer"),jt=re==null?te:qt(re),J=Ne==null?te:qt(Ne),te=new Fe(oe,F+"leave",re,o,se),te.target=jt,te.relatedTarget=J,oe=null,Ft(se)===Z&&(Fe=new Fe(Y,F+"enter",Ne,o,se),Fe.target=J,Fe.relatedTarget=jt,oe=Fe),jt=oe,re&&Ne)t:{for(Fe=hI,Y=re,F=Ne,J=0,oe=Y;oe;oe=Fe(oe))J++;oe=0;for(var je=F;je;je=Fe(je))oe++;for(;0<J-oe;)Y=Fe(Y),J--;for(;0<oe-J;)F=Fe(F),oe--;for(;J--;){if(Y===F||F!==null&&Y===F.alternate){Fe=Y;break t}Y=Fe(Y),F=Fe(F)}Fe=null}else Fe=null;re!==null&&ZT(he,te,re,Fe,!1),Ne!==null&&jt!==null&&ZT(he,jt,Ne,Fe,!0)}}e:{if(te=Z?qt(Z):window,re=te.nodeName&&te.nodeName.toLowerCase(),re==="select"||re==="input"&&te.type==="file")var Tt=gv;else if(mv(te))if(yv)Tt=bR;else{Tt=ER;var Oe=vR}else re=te.nodeName,!re||re.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&zo(Z.elementType)&&(Tt=gv):Tt=TR;if(Tt&&(Tt=Tt(r,Z))){pv(he,Tt,o,se);break e}Oe&&Oe(r,te,Z),r==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&mu(te,"number",te.value)}switch(Oe=Z?qt(Z):window,r){case"focusin":(mv(Oe)||Oe.contentEditable==="true")&&(Yo=Oe,zm=Z,Cu=null);break;case"focusout":Cu=zm=Yo=null;break;case"mousedown":Bm=!0;break;case"contextmenu":case"mouseup":case"dragend":Bm=!1,wv(he,o,se);break;case"selectionchange":if(AR)break;case"keydown":case"keyup":wv(he,o,se)}var it;if(Ct)e:{switch(r){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else Ko?Qa(r,o)&&(ht="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ht="onCompositionStart");ht&&(Oi&&o.locale!=="ko"&&(Ko||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&Ko&&(it=vu()):(Ii=se,_u="value"in Ii?Ii.value:Ii.textContent,Ko=!0)),Oe=_f(Z,ht),0<Oe.length&&(ht=new Di(ht,r,null,o,se),he.push({event:ht,listeners:Oe}),it?ht.data=it:(it=$o(o),it!==null&&(ht.data=it)))),(it=$r?pR(r,o):gR(r,o))&&(ht=_f(Z,"onBeforeInput"),0<ht.length&&(Oe=new Di("onBeforeInput","beforeinput",null,o,se),he.push({event:Oe,listeners:ht}),Oe.data=it)),oI(he,r,Z,o,se)}WT(he,s)})}function Wu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function _f(r,s){for(var o=s+"Capture",u=[];r!==null;){var d=r,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=li(r,o),d!=null&&u.unshift(Wu(r,d,g)),d=li(r,s),d!=null&&u.push(Wu(r,d,g))),r.tag===3)return u;r=r.return}return[]}function hI(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function ZT(r,s,o,u,d){for(var g=s._reactName,T=[];o!==null&&o!==u;){var R=o,B=R.alternate,Z=R.stateNode;if(R=R.tag,B!==null&&B===u)break;R!==5&&R!==26&&R!==27||Z===null||(B=Z,d?(Z=li(o,g),Z!=null&&T.unshift(Wu(o,Z,B))):d||(Z=li(o,g),Z!=null&&T.push(Wu(o,Z,B)))),o=o.return}T.length!==0&&r.push({event:s,listeners:T})}var fI=/\r\n?/g,dI=/\u0000|\uFFFD/g;function eb(r){return(typeof r=="string"?r:""+r).replace(fI,`
`).replace(dI,"")}function tb(r,s){return s=eb(s),eb(r)===s}function Lt(r,s,o,u,d,g){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||dr(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&dr(r,""+u);break;case"className":yn(r,"class",u);break;case"tabIndex":yn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":yn(r,o,u);break;case"style":gu(r,u,g);break;case"data":if(s!=="object"){yn(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Bo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&Lt(r,s,"name",d.name,d,null),Lt(r,s,"formEncType",d.formEncType,d,null),Lt(r,s,"formMethod",d.formMethod,d,null),Lt(r,s,"formTarget",d.formTarget,d,null)):(Lt(r,s,"encType",d.encType,d,null),Lt(r,s,"method",d.method,d,null),Lt(r,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Bo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=oi);break;case"onScroll":u!=null&&ut("scroll",r);break;case"onScrollEnd":u!=null&&ut("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Bo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":ut("beforetoggle",r),ut("toggle",r),rn(r,"popover",u);break;case"xlinkActuate":Pt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Pt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Pt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Pt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Pt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Pt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Pt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Pt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Pt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":rn(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=yh.get(o)||o,rn(r,o,u))}}function fg(r,s,o,u,d,g){switch(o){case"style":gu(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?dr(r,u):(typeof u=="number"||typeof u=="bigint")&&dr(r,""+u);break;case"onScroll":u!=null&&ut("scroll",r);break;case"onScrollEnd":u!=null&&ut("scrollend",r);break;case"onClick":u!=null&&(r.onclick=oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),g=r[be]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(s,g,d),typeof u=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,d);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):rn(r,o,u)}}}function jn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",r),ut("load",r);var u=!1,d=!1,g;for(g in o)if(o.hasOwnProperty(g)){var T=o[g];if(T!=null)switch(g){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Lt(r,s,g,T,o,null)}}d&&Lt(r,s,"srcSet",o.srcSet,o,null),u&&Lt(r,s,"src",o.src,o,null);return;case"input":ut("invalid",r);var R=g=T=d=null,B=null,Z=null;for(u in o)if(o.hasOwnProperty(u)){var se=o[u];if(se!=null)switch(u){case"name":d=se;break;case"type":T=se;break;case"checked":B=se;break;case"defaultChecked":Z=se;break;case"value":g=se;break;case"defaultValue":R=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,s));break;default:Lt(r,s,u,se,o,null)}}mh(r,g,R,B,Z,T,d,!1);return;case"select":ut("invalid",r),u=T=g=null;for(d in o)if(o.hasOwnProperty(d)&&(R=o[d],R!=null))switch(d){case"value":g=R;break;case"defaultValue":T=R;break;case"multiple":u=R;default:Lt(r,s,d,R,o,null)}s=g,o=T,r.multiple=!!u,s!=null?ks(r,!!u,s,!1):o!=null&&ks(r,!!u,o,!0);return;case"textarea":ut("invalid",r),g=d=u=null;for(T in o)if(o.hasOwnProperty(T)&&(R=o[T],R!=null))switch(T){case"value":u=R;break;case"defaultValue":d=R;break;case"children":g=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:Lt(r,s,T,R,o,null)}Vs(r,u,d,g);return;case"option":for(B in o)if(o.hasOwnProperty(B)&&(u=o[B],u!=null))switch(B){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Lt(r,s,B,u,o,null)}return;case"dialog":ut("beforetoggle",r),ut("toggle",r),ut("cancel",r),ut("close",r);break;case"iframe":case"object":ut("load",r);break;case"video":case"audio":for(u=0;u<Xu.length;u++)ut(Xu[u],r);break;case"image":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"embed":case"source":case"link":ut("error",r),ut("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(u=o[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Lt(r,s,Z,u,o,null)}return;default:if(zo(s)){for(se in o)o.hasOwnProperty(se)&&(u=o[se],u!==void 0&&fg(r,s,se,u,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(u=o[R],u!=null&&Lt(r,s,R,u,o,null))}function mI(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,T=null,R=null,B=null,Z=null,se=null;for(re in o){var he=o[re];if(o.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":B=he;default:u.hasOwnProperty(re)||Lt(r,s,re,null,u,he)}}for(var te in u){var re=u[te];if(he=o[te],u.hasOwnProperty(te)&&(re!=null||he!=null))switch(te){case"type":g=re;break;case"name":d=re;break;case"checked":Z=re;break;case"defaultChecked":se=re;break;case"value":T=re;break;case"defaultValue":R=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,s));break;default:re!==he&&Lt(r,s,te,re,u,he)}}Uo(r,T,R,B,Z,se,g,d);return;case"select":re=T=R=te=null;for(g in o)if(B=o[g],o.hasOwnProperty(g)&&B!=null)switch(g){case"value":break;case"multiple":re=B;default:u.hasOwnProperty(g)||Lt(r,s,g,null,u,B)}for(d in u)if(g=u[d],B=o[d],u.hasOwnProperty(d)&&(g!=null||B!=null))switch(d){case"value":te=g;break;case"defaultValue":R=g;break;case"multiple":T=g;default:g!==B&&Lt(r,s,d,g,u,B)}s=R,o=T,u=re,te!=null?ks(r,!!o,te,!1):!!u!=!!o&&(s!=null?ks(r,!!o,s,!0):ks(r,!!o,o?[]:"",!1));return;case"textarea":re=te=null;for(R in o)if(d=o[R],o.hasOwnProperty(R)&&d!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Lt(r,s,R,null,u,d)}for(T in u)if(d=u[T],g=o[T],u.hasOwnProperty(T)&&(d!=null||g!=null))switch(T){case"value":te=d;break;case"defaultValue":re=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==g&&Lt(r,s,T,d,u,g)}ph(r,te,re);return;case"option":for(var Ne in o)if(te=o[Ne],o.hasOwnProperty(Ne)&&te!=null&&!u.hasOwnProperty(Ne))switch(Ne){case"selected":r.selected=!1;break;default:Lt(r,s,Ne,null,u,te)}for(B in u)if(te=u[B],re=o[B],u.hasOwnProperty(B)&&te!==re&&(te!=null||re!=null))switch(B){case"selected":r.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Lt(r,s,B,te,u,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in o)te=o[Fe],o.hasOwnProperty(Fe)&&te!=null&&!u.hasOwnProperty(Fe)&&Lt(r,s,Fe,null,u,te);for(Z in u)if(te=u[Z],re=o[Z],u.hasOwnProperty(Z)&&te!==re&&(te!=null||re!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,s));break;default:Lt(r,s,Z,te,u,re)}return;default:if(zo(s)){for(var jt in o)te=o[jt],o.hasOwnProperty(jt)&&te!==void 0&&!u.hasOwnProperty(jt)&&fg(r,s,jt,void 0,u,te);for(se in u)te=u[se],re=o[se],!u.hasOwnProperty(se)||te===re||te===void 0&&re===void 0||fg(r,s,se,te,u,re);return}}for(var Y in o)te=o[Y],o.hasOwnProperty(Y)&&te!=null&&!u.hasOwnProperty(Y)&&Lt(r,s,Y,null,u,te);for(he in u)te=u[he],re=o[he],!u.hasOwnProperty(he)||te===re||te==null&&re==null||Lt(r,s,he,te,u,re)}function nb(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pI(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],g=d.transferSize,T=d.initiatorType,R=d.duration;if(g&&R&&nb(T)){for(T=0,R=d.responseEnd,u+=1;u<o.length;u++){var B=o[u],Z=B.startTime;if(Z>R)break;var se=B.transferSize,he=B.initiatorType;se&&nb(he)&&(B=B.responseEnd,T+=se*(B<R?1:(R-Z)/(B-Z)))}if(--u,s+=8*(g+T)/(d.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var dg=null,mg=null;function vf(r){return r.nodeType===9?r:r.ownerDocument}function rb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ib(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function pg(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var gg=null;function gI(){var r=window.event;return r&&r.type==="popstate"?r===gg?!1:(gg=r,!0):(gg=null,!1)}var sb=typeof setTimeout=="function"?setTimeout:void 0,yI=typeof clearTimeout=="function"?clearTimeout:void 0,ab=typeof Promise=="function"?Promise:void 0,_I=typeof queueMicrotask=="function"?queueMicrotask:typeof ab<"u"?function(r){return ab.resolve(null).then(r).catch(vI)}:sb;function vI(r){setTimeout(function(){throw r})}function sa(r){return r==="head"}function ob(r,s){var o=s,u=0;do{var d=o.nextSibling;if(r.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(d),Tl(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Ju(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Ju(o);for(var g=o.firstChild;g;){var T=g.nextSibling,R=g.nodeName;g[Mt]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=T}}else o==="body"&&Ju(r.ownerDocument.body);o=d}while(o);Tl(s)}function lb(r,s){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function yg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":yg(o),Kt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function EI(r,s,o,u){for(;r.nodeType===1;){var d=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Mt])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==d.rel||r.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||r.getAttribute("title")!==(d.title==null?null:d.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(d.src==null?null:d.src)||r.getAttribute("type")!==(d.type==null?null:d.type)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=Zr(r.nextSibling),r===null)break}return null}function TI(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Zr(r.nextSibling),r===null))return null;return r}function ub(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Zr(r.nextSibling),r===null))return null;return r}function _g(r){return r.data==="$?"||r.data==="$~"}function vg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function bI(r,s){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Zr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Eg=null;function cb(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(s===0)return Zr(r.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}r=r.nextSibling}return null}function hb(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return r;s--}else o!=="/$"&&o!=="/&"||s++}r=r.previousSibling}return null}function fb(r,s,o){switch(s=vf(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ju(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Kt(r)}var ei=new Map,db=new Set;function Ef(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var hs=ce.d;ce.d={f:SI,r:AI,D:wI,C:CI,L:RI,m:II,X:NI,S:xI,M:DI};function SI(){var r=hs.f(),s=hf();return r||s}function AI(r){var s=nt(r);s!==null&&s.tag===5&&s.type==="form"?NE(s):hs.r(r)}var _l=typeof document>"u"?null:document;function mb(r,s,o){var u=_l;if(u&&typeof s=="string"&&s){var d=fr(s);d='link[rel="'+r+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),db.has(d)||(db.add(d),r={rel:r,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),jn(s,"link",r),Gt(s),u.head.appendChild(s)))}}function wI(r){hs.D(r),mb("dns-prefetch",r,null)}function CI(r,s){hs.C(r,s),mb("preconnect",r,s)}function RI(r,s,o){hs.L(r,s,o);var u=_l;if(u&&r&&s){var d='link[rel="preload"][as="'+fr(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+fr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+fr(o.imageSizes)+'"]')):d+='[href="'+fr(r)+'"]';var g=d;switch(s){case"style":g=vl(r);break;case"script":g=El(r)}ei.has(g)||(r=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),ei.set(g,r),u.querySelector(d)!==null||s==="style"&&u.querySelector(Zu(g))||s==="script"&&u.querySelector(ec(g))||(s=u.createElement("link"),jn(s,"link",r),Gt(s),u.head.appendChild(s)))}}function II(r,s){hs.m(r,s);var o=_l;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+fr(u)+'"][href="'+fr(r)+'"]',g=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=El(r)}if(!ei.has(g)&&(r=v({rel:"modulepreload",href:r},s),ei.set(g,r),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ec(g)))return}u=o.createElement("link"),jn(u,"link",r),Gt(u),o.head.appendChild(u)}}}function xI(r,s,o){hs.S(r,s,o);var u=_l;if(u&&r){var d=Nn(u).hoistableStyles,g=vl(r);s=s||"default";var T=d.get(g);if(!T){var R={loading:0,preload:null};if(T=u.querySelector(Zu(g)))R.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":s},o),(o=ei.get(g))&&Tg(r,o);var B=T=u.createElement("link");Gt(B),jn(B,"link",r),B._p=new Promise(function(Z,se){B.onload=Z,B.onerror=se}),B.addEventListener("load",function(){R.loading|=1}),B.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Tf(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:R},d.set(g,T)}}}function NI(r,s){hs.X(r,s);var o=_l;if(o&&r){var u=Nn(o).hoistableScripts,d=El(r),g=u.get(d);g||(g=o.querySelector(ec(d)),g||(r=v({src:r,async:!0},s),(s=ei.get(d))&&bg(r,s),g=o.createElement("script"),Gt(g),jn(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function DI(r,s){hs.M(r,s);var o=_l;if(o&&r){var u=Nn(o).hoistableScripts,d=El(r),g=u.get(d);g||(g=o.querySelector(ec(d)),g||(r=v({src:r,async:!0,type:"module"},s),(s=ei.get(d))&&bg(r,s),g=o.createElement("script"),Gt(g),jn(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function pb(r,s,o,u){var d=(d=ye.current)?Ef(d):null;if(!d)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=vl(o.href),o=Nn(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=vl(o.href);var g=Nn(d).hoistableStyles,T=g.get(r);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,T),(g=d.querySelector(Zu(r)))&&!g._p&&(T.instance=g,T.state.loading=5),ei.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ei.set(r,o),g||OI(d,r,o,T.state))),s&&u===null)throw Error(i(528,""));return T}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=El(o),o=Nn(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function vl(r){return'href="'+fr(r)+'"'}function Zu(r){return'link[rel="stylesheet"]['+r+"]"}function gb(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function OI(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),jn(s,"link",o),Gt(s),r.head.appendChild(s))}function El(r){return'[src="'+fr(r)+'"]'}function ec(r){return"script[async]"+r}function yb(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+fr(o.href)+'"]');if(u)return s.instance=u,Gt(u),u;var d=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Gt(u),jn(u,"style",d),Tf(u,o.precedence,r),s.instance=u;case"stylesheet":d=vl(o.href);var g=r.querySelector(Zu(d));if(g)return s.state.loading|=4,s.instance=g,Gt(g),g;u=gb(o),(d=ei.get(d))&&Tg(u,d),g=(r.ownerDocument||r).createElement("link"),Gt(g);var T=g;return T._p=new Promise(function(R,B){T.onload=R,T.onerror=B}),jn(g,"link",u),s.state.loading|=4,Tf(g,o.precedence,r),s.instance=g;case"script":return g=El(o.src),(d=r.querySelector(ec(g)))?(s.instance=d,Gt(d),d):(u=o,(d=ei.get(g))&&(u=v({},o),bg(u,d)),r=r.ownerDocument||r,d=r.createElement("script"),Gt(d),jn(d,"link",u),r.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Tf(u,o.precedence,r));return s.instance}function Tf(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,g=d,T=0;T<u.length;T++){var R=u[T];if(R.dataset.precedence===s)g=R;else if(g!==d)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Tg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function bg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var bf=null;function _b(r,s,o){if(bf===null){var u=new Map,d=bf=new Map;d.set(o,u)}else d=bf,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),d=0;d<o.length;d++){var g=o[d];if(!(g[Mt]||g[ve]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(s)||"";T=r+T;var R=u.get(T);R?R.push(g):u.set(T,[g])}}return u}function vb(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function MI(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Eb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function PI(r,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=vl(u.href),g=s.querySelector(Zu(d));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Sf.bind(r),s.then(r,r)),o.state.loading|=4,o.instance=g,Gt(g);return}g=s.ownerDocument||s,u=gb(u),(d=ei.get(d))&&Tg(u,d),g=g.createElement("link"),Gt(g);var T=g;T._p=new Promise(function(R,B){T.onload=R,T.onerror=B}),jn(g,"link",u),o.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=Sf.bind(r),s.addEventListener("load",o),s.addEventListener("error",o))}}var Sg=0;function kI(r,s){return r.stylesheets&&r.count===0&&wf(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&wf(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+s);0<r.imgBytes&&Sg===0&&(Sg=62500*pI());var d=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&wf(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>Sg?50:800)+s);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function Sf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Af=null;function wf(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Af=new Map,s.forEach(VI,r),Af=null,Sf.call(r))}function VI(r,s){if(!(s.state.loading&4)){var o=Af.get(r);if(o)var u=o.get(null);else{o=new Map,Af.set(r,o);for(var d=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var T=d[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}d=s.instance,T=d.getAttribute("data-precedence"),g=o.get(T)||u,g===u&&o.set(null,d),o.set(T,d),this.count++,u=Sf.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),g?g.parentNode.insertBefore(d,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(d,r.firstChild)),s.state.loading|=4}}var tc={$$typeof:q,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function LI(r,s,o,u,d,g,T,R,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.hiddenUpdates=nr(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Tb(r,s,o,u,d,g,T,R,B,Z,se,he){return r=new LI(r,s,o,T,B,Z,se,he,R),s=1,g===!0&&(s|=24),g=Or(3,null,null,s),r.current=g,g.stateNode=r,s=np(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:s},ap(g),r}function bb(r){return r?(r=Wo,r):Wo}function Sb(r,s,o,u,d,g){d=bb(d),u.context===null?u.context=d:u.pendingContext=d,u=Ys(s),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Qs(r,u,s),o!==null&&(_r(o,r,s),Mu(o,r,s))}function Ab(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Ag(r,s){Ab(r,s),(r=r.alternate)&&Ab(r,s)}function wb(r){if(r.tag===13||r.tag===31){var s=Ja(r,67108864);s!==null&&_r(s,r,67108864),Ag(r,67108864)}}function Cb(r){if(r.tag===13||r.tag===31){var s=Lr();s=ee(s);var o=Ja(r,s);o!==null&&_r(o,r,s),Ag(r,s)}}var Cf=!0;function jI(r,s,o,u){var d=G.T;G.T=null;var g=ce.p;try{ce.p=2,wg(r,s,o,u)}finally{ce.p=g,G.T=d}}function UI(r,s,o,u){var d=G.T;G.T=null;var g=ce.p;try{ce.p=8,wg(r,s,o,u)}finally{ce.p=g,G.T=d}}function wg(r,s,o,u){if(Cf){var d=Cg(u);if(d===null)hg(r,s,u,Rf,o),Ib(r,u);else if(BI(d,r,s,o,u))u.stopPropagation();else if(Ib(r,u),s&4&&-1<zI.indexOf(r)){for(;d!==null;){var g=nt(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=Fr(g.pendingLanes);if(T!==0){var R=g;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var B=1<<31-Wt(T);R.entanglements[1]|=B,T&=~B}Vi(g),(Rt&6)===0&&(uf=Et()+500,Qu(0))}}break;case 31:case 13:R=Ja(g,2),R!==null&&_r(R,g,2),hf(),Ag(g,2)}if(g=Cg(u),g===null&&hg(r,s,u,Rf,o),g===d)break;d=g}d!==null&&u.stopPropagation()}else hg(r,s,u,null,o)}}function Cg(r){return r=qr(r),Rg(r)}var Rf=null;function Rg(r){if(Rf=null,r=Ft(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===31){if(r=f(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Rf=r,null}function Rb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nn()){case lr:return 2;case ur:return 8;case un:case wr:return 32;case ja:return 268435456;default:return 32}default:return 32}}var Ig=!1,aa=null,oa=null,la=null,nc=new Map,rc=new Map,ua=[],zI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ib(r,s){switch(r){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":oa=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":nc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(s.pointerId)}}function ic(r,s,o,u,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[d]},s!==null&&(s=nt(s),s!==null&&wb(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function BI(r,s,o,u,d){switch(s){case"focusin":return aa=ic(aa,r,s,o,u,d),!0;case"dragenter":return oa=ic(oa,r,s,o,u,d),!0;case"mouseover":return la=ic(la,r,s,o,u,d),!0;case"pointerover":var g=d.pointerId;return nc.set(g,ic(nc.get(g)||null,r,s,o,u,d)),!0;case"gotpointercapture":return g=d.pointerId,rc.set(g,ic(rc.get(g)||null,r,s,o,u,d)),!0}return!1}function xb(r){var s=Ft(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,Ce(r.priority,function(){Cb(o)});return}}else if(s===31){if(s=f(o),s!==null){r.blockedOn=s,Ce(r.priority,function(){Cb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function If(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Cg(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);yu=u,o.target.dispatchEvent(u),yu=null}else return s=nt(o),s!==null&&wb(s),r.blockedOn=o,!1;s.shift()}return!0}function Nb(r,s,o){If(r)&&o.delete(s)}function HI(){Ig=!1,aa!==null&&If(aa)&&(aa=null),oa!==null&&If(oa)&&(oa=null),la!==null&&If(la)&&(la=null),nc.forEach(Nb),rc.forEach(Nb)}function xf(r,s){r.blockedOn===s&&(r.blockedOn=null,Ig||(Ig=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,HI)))}var Nf=null;function Db(r){Nf!==r&&(Nf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Nf===r&&(Nf=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],d=r[s+2];if(typeof u!="function"){if(Rg(u||o)===null)continue;break}var g=nt(o);g!==null&&(r.splice(s,3),s-=3,Cp(g,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function Tl(r){function s(B){return xf(B,r)}aa!==null&&xf(aa,r),oa!==null&&xf(oa,r),la!==null&&xf(la,r),nc.forEach(s),rc.forEach(s);for(var o=0;o<ua.length;o++){var u=ua[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ua.length&&(o=ua[0],o.blockedOn===null);)xb(o),o.blockedOn===null&&ua.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],g=o[u+1],T=d[be]||null;if(typeof g=="function")T||Db(o);else if(T){var R=null;if(g&&g.hasAttribute("formAction")){if(d=g,T=g[be]||null)R=T.formAction;else if(Rg(d)!==null)continue}else R=T.action;typeof R=="function"?o[u+1]=R:(o.splice(u,3),u-=3),Db(o)}}}function Ob(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(T){return d=T})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function xg(r){this._internalRoot=r}Df.prototype.render=xg.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Lr();Sb(o,u,r,s,null,null)},Df.prototype.unmount=xg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Sb(r.current,2,null,r,null,null),hf(),s[Ie]=null}};function Df(r){this._internalRoot=r}Df.prototype.unstable_scheduleHydration=function(r){if(r){var s=_e();r={blockedOn:null,target:r,priority:s};for(var o=0;o<ua.length&&s!==0&&s<ua[o].priority;o++);ua.splice(o,0,r),o===0&&xb(r)}};var Mb=e.version;if(Mb!=="19.2.4")throw Error(i(527,Mb,"19.2.4"));ce.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var FI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Of.isDisabled&&Of.supportsFiber)try{Cr=Of.inject(FI),Ut=Of}catch{}}return ac.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",d=zE,g=BE,T=HE;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=Tb(r,1,!1,null,null,o,u,null,d,g,T,Ob),r[Ie]=s.current,cg(r),new xg(s)},ac.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,d="",g=zE,T=BE,R=HE,B=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(B=o.formState)),s=Tb(r,1,!0,s,o??null,u,d,B,g,T,R,Ob),s.context=bb(null),o=s.current,u=Lr(),u=ee(u),d=Ys(u),d.callback=null,Qs(o,d,u),o=u,s.current.lanes=o,Si(s,o),Vi(s),r[Ie]=s.current,cg(r),new Df(s)},ac.version="19.2.4",ac}var Fb;function nx(){if(Fb)return Mg.exports;Fb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mg.exports=tx(),Mg.exports}var rx=nx();const ix=EA(rx);var Lg={exports:{}},jg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qb;function sx(){if(qb)return jg;qb=1;var n=$d();function e(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,a=n.useRef,l=n.useEffect,c=n.useMemo,f=n.useDebugValue;return jg.useSyncExternalStoreWithSelector=function(m,p,y,v,E){var w=a(null);if(w.current===null){var D={hasValue:!1,value:null};w.current=D}else D=w.current;w=c(function(){function M(W){if(!U){if(U=!0,j=W,W=v(W),E!==void 0&&D.hasValue){var K=D.value;if(E(K,W))return q=K}return q=W}if(K=q,t(j,W))return K;var S=v(W);return E!==void 0&&E(K,S)?(j=W,K):(j=W,q=S)}var U=!1,j,q,Q=y===void 0?null:y;return[function(){return M(p())},Q===null?void 0:function(){return M(Q())}]},[p,y,v,E]);var V=i(m,w[0],w[1]);return l(function(){D.hasValue=!0,D.value=V},[V]),f(V),V},jg}var Gb;function ax(){return Gb||(Gb=1,Lg.exports=sx()),Lg.exports}var ox=ax();function lx(n){n()}function ux(){let n=null,e=null;return{clear(){n=null,e=null},notify(){lx(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const a=e={callback:t,next:null,prev:e};return a.prev?a.prev.next=a:n=a,function(){!i||n===null||(i=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var $b={notify(){},get:()=>[]};function cx(n,e){let t,i=$b,a=0,l=!1;function c(V){y();const M=i.subscribe(V);let U=!1;return()=>{U||(U=!0,M(),v())}}function f(){i.notify()}function m(){D.onStateChange&&D.onStateChange()}function p(){return l}function y(){a++,t||(t=n.subscribe(m),i=ux())}function v(){a--,t&&a===0&&(t(),t=void 0,i.clear(),i=$b)}function E(){l||(l=!0,y())}function w(){l&&(l=!1,v())}const D={addNestedSub:c,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:E,tryUnsubscribe:w,getListeners:()=>i};return D}var hx=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fx=hx(),dx=()=>typeof navigator<"u"&&navigator.product==="ReactNative",mx=dx(),px=()=>fx||mx?O.useLayoutEffect:O.useEffect,gx=px(),Ug=Symbol.for("react-redux-context"),zg=typeof globalThis<"u"?globalThis:{};function yx(){if(!O.createContext)return{};const n=zg[Ug]??(zg[Ug]=new Map);let e=n.get(O.createContext);return e||(e=O.createContext(null),n.set(O.createContext,e)),e}var Ra=yx();function _x(n){const{children:e,context:t,serverState:i,store:a}=n,l=O.useMemo(()=>{const m=cx(a);return{store:a,subscription:m,getServerState:i?()=>i:void 0}},[a,i]),c=O.useMemo(()=>a.getState(),[a]);gx(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==a.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,c]);const f=t||Ra;return O.createElement(f.Provider,{value:l},e)}var vx=_x;function Zy(n=Ra){return function(){return O.useContext(n)}}var SA=Zy();function AA(n=Ra){const e=n===Ra?SA:Zy(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var Ex=AA();function Tx(n=Ra){const e=n===Ra?Ex:AA(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var bx=Tx(),Sx=(n,e)=>n===e;function Ax(n=Ra){const e=n===Ra?SA:Zy(n),t=(i,a={})=>{const{equalityFn:l=Sx}=typeof a=="function"?{equalityFn:a}:a,c=e(),{store:f,subscription:m,getServerState:p}=c;O.useRef(!0);const y=O.useCallback({[i.name](E){return i(E)}}[i.name],[i]),v=ox.useSyncExternalStoreWithSelector(m.addNestedSub,f.getState,p||f.getState,y,l);return O.useDebugValue(v),v};return Object.assign(t,{withTypes:()=>t}),t}var wx=Ax();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var wA=n=>{throw TypeError(n)},Cx=(n,e,t)=>e.has(n)||wA("Cannot "+t),Bg=(n,e,t)=>(Cx(n,e,"read from private field"),t?t.call(n):e.get(n)),Rx=(n,e,t)=>e.has(n)?wA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Kb="popstate";function Ix(n={}){function e(a,l){let{pathname:c="/",search:f="",hash:m=""}=Ns(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Dc("",{pathname:c,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let m=a.location.href,p=m.indexOf("#");f=p===-1?m:m.slice(0,p)}return f+"#"+(typeof l=="string"?l:Fi(l))}function i(a,l){an(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return Nx(e,t,i,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function an(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xx(){return Math.random().toString(36).substring(2,10)}function Yb(n,e){return{usr:n.state,key:n.key,idx:e}}function Dc(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ns(e):e,state:t,key:e&&e.key||i||xx()}}function Fi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ns(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function Nx(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,f="POP",m=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function v(){f="POP";let M=y(),U=M==null?null:M-p;p=M,m&&m({action:f,location:V.location,delta:U})}function E(M,U){f="PUSH";let j=Dc(V.location,M,U);t&&t(j,M),p=y()+1;let q=Yb(j,p),Q=V.createHref(j);try{c.pushState(q,"",Q)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;a.location.assign(Q)}l&&m&&m({action:f,location:V.location,delta:1})}function w(M,U){f="REPLACE";let j=Dc(V.location,M,U);t&&t(j,M),p=y();let q=Yb(j,p),Q=V.createHref(j);c.replaceState(q,"",Q),l&&m&&m({action:f,location:V.location,delta:0})}function D(M){return CA(M)}let V={get action(){return f},get location(){return n(a,c)},listen(M){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Kb,v),m=M,()=>{a.removeEventListener(Kb,v),m=null}},createHref(M){return e(a,M)},createURL:D,encodeLocation(M){let U=D(M);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:E,replace:w,go(M){return c.go(M)}};return V}function CA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),at(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Fi(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}var dc,Qb=class{constructor(n){if(Rx(this,dc,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Bg(this,dc).has(n))return Bg(this,dc).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Bg(this,dc).set(n,e)}};dc=new WeakMap;var Dx=new Set(["lazy","caseSensitive","path","id","index","children"]);function Ox(n){return Dx.has(n)}var Mx=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function Px(n){return Mx.has(n)}function kx(n){return n.index===!0}function Oc(n,e,t=[],i={},a=!1){return n.map((l,c)=>{let f=[...t,String(c)],m=typeof l.id=="string"?l.id:f.join("-");if(at(l.index!==!0||!l.children,"Cannot specify children on an index route"),at(a||!i[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),kx(l)){let p={...l,id:m};return i[m]=Xb(p,e(p)),p}else{let p={...l,id:m,children:void 0};return i[m]=Xb(p,e(p)),l.children&&(p.children=Oc(l.children,e,f,i,a)),p}})}function Xb(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function da(n,e,t="/"){return mc(n,e,t,!1)}function mc(n,e,t,i){let a=typeof e=="string"?Ns(e):e,l=ii(a.pathname||"/",t);if(l==null)return null;let c=RA(n);Lx(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let p=Yx(l);f=$x(c[m],p,i)}return f}function Vx(n,e){let{route:t,pathname:i,params:a}=n;return{id:t.id,pathname:i,params:a,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function RA(n,e=[],t=[],i="",a=!1){let l=(c,f,m=a,p)=>{let y={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&m)return;at(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let v=ji([i,y.relativePath]),E=t.concat(y);c.children&&c.children.length>0&&(at(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),RA(c.children,e,E,v,m)),!(c.path==null&&!c.index)&&e.push({path:v,score:qx(v,c.index),routesMeta:E})};return n.forEach((c,f)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))l(c,f);else for(let p of IA(c.path))l(c,f,!0,p)}),e}function IA(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=IA(i.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function Lx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Gx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var jx=/^:[\w-]+$/,Ux=3,zx=2,Bx=1,Hx=10,Fx=-2,Wb=n=>n==="*";function qx(n,e){let t=n.split("/"),i=t.length;return t.some(Wb)&&(i+=Fx),e&&(i+=zx),t.filter(a=>!Wb(a)).reduce((a,l)=>a+(jx.test(l)?Ux:l===""?Bx:Hx),i)}function Gx(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function $x(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let f=0;f<i.length;++f){let m=i[f],p=f===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=yd({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),E=m.route;if(!v&&p&&t&&!i[i.length-1].route.index&&(v=yd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),c.push({params:a,pathname:ji([l,v.pathname]),pathnameBase:Wx(ji([l,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(l=ji([l,v.pathnameBase]))}return c}function yd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Kx(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:v},E)=>{if(y==="*"){let D=f[E]||"";c=l.slice(0,l.length-D.length).replace(/(.)\/+$/,"$1")}const w=f[E];return v&&!w?p[y]=void 0:p[y]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function Kx(n,e=!1,t=!0){an(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function Yx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return an(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ii(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Qx({basename:n,pathname:e}){return e==="/"?n:ji([n,e])}var xA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e_=n=>xA.test(n);function Xx(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Ns(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=Jb(t.substring(1),"/"):l=Jb(t,e)):l=e,{pathname:l,search:Jx(i),hash:Zx(a)}}function Jb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Hg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Kd(n){let e=NA(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Yd(n,e,t,i=!1){let a;typeof n=="string"?a=Ns(n):(a={...n},at(!a.pathname||!a.pathname.includes("?"),Hg("?","pathname","search",a)),at(!a.pathname||!a.pathname.includes("#"),Hg("#","pathname","hash",a)),at(!a.search||!a.search.includes("#"),Hg("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=t;else{let v=e.length-1;if(!i&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),v-=1;a.pathname=E.join("/")}f=v>=0?e[v]:"/"}let m=Xx(a,f),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var ji=n=>n.join("/").replace(/\/\/+/g,"/"),Wx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Jx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Zx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Yc=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Mc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Qc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var DA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function OA(n,e){let t=n;if(typeof t!="string"||!xA.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(DA)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=ii(c.pathname,e);c.origin===l.origin&&f!=null?t=f+c.search+c.hash:a=!0}catch{an(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}var _a=Symbol("Uninstrumented");function eN(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(a=>a({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let f of c)l[f]&&t[f].push(l[f])}}));let i={};if(typeof e.lazy=="function"&&t.lazy.length>0){let a=Ml(t.lazy,e.lazy,()=>{});a&&(i.lazy=a)}if(typeof e.lazy=="object"){let a=e.lazy;["middleware","loader","action"].forEach(l=>{let c=a[l],f=t[`lazy.${l}`];if(typeof c=="function"&&f.length>0){let m=Ml(f,c,()=>{});m&&(i.lazy=Object.assign(i.lazy||{},{[l]:m}))}})}return["loader","action"].forEach(a=>{let l=e[a];if(typeof l=="function"&&t[a].length>0){let c=l[_a]??l,f=Ml(t[a],c,(...m)=>Zb(m[0]));f&&(a==="loader"&&c.hydrate===!0&&(f.hydrate=!0),f[_a]=c,i[a]=f)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(i.middleware=e.middleware.map(a=>{let l=a[_a]??a,c=Ml(t.middleware,l,(...f)=>Zb(f[0]));return c?(c[_a]=l,c):a})),i}function tN(n,e){let t={navigate:[],fetch:[]};if(e.forEach(i=>i({instrument(a){let l=Object.keys(a);for(let c of l)a[c]&&t[c].push(a[c])}})),t.navigate.length>0){let i=n.navigate[_a]??n.navigate,a=Ml(t.navigate,i,(...l)=>{let[c,f]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?Fi(c):".",...e0(n,f??{})}});a&&(a[_a]=i,n.navigate=a)}if(t.fetch.length>0){let i=n.fetch[_a]??n.fetch,a=Ml(t.fetch,i,(...l)=>{let[c,,f,m]=l;return{href:f??".",fetcherKey:c,...e0(n,m??{})}});a&&(a[_a]=i,n.fetch=a)}return n}function Ml(n,e,t){return n.length===0?null:async(...i)=>{let a=await MA(n,t(...i),()=>e(...i),n.length-1);if(a.type==="error")throw a.value;return a.value}}async function MA(n,e,t,i){let a=n[i],l;if(a){let c,f=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=MA(n,e,t,i-1),l=await c,at(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await a(f,e)}catch(m){console.error("An instrumentation function threw an error:",m)}c||await f(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Zb(n){let{request:e,context:t,params:i,unstable_pattern:a}=n;return{request:nN(e),params:{...i},unstable_pattern:a,context:rN(t)}}function e0(n,e){return{currentUrl:Fi(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function nN(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function rN(n){if(sN(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var iN=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function sN(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===iN}var PA=["POST","PUT","PATCH","DELETE"],aN=new Set(PA),oN=["GET",...PA],lN=new Set(oN),kA=new Set([301,302,303,307,308]),uN=new Set([307,308]),Fg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},cN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},oc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},hN=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),VA="remix-router-transitions",LA=Symbol("ResetLoaderData");function fN(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";at(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=n.hydrationRouteProperties||[],a=n.mapRouteProperties||hN,l=a;if(n.unstable_instrumentations){let z=n.unstable_instrumentations;l=$=>({...a($),...eN(z.map(ee=>ee.route).filter(Boolean),$)})}let c={},f=Oc(n.routes,l,void 0,c),m,p=n.basename||"/";p.startsWith("/")||(p=`/${p}`);let y=n.dataStrategy||yN,v={...n.future},E=null,w=new Set,D=null,V=null,M=null,U=n.hydrationData!=null,j=da(f,n.history.location,p),q=!1,Q=null,W;if(j==null&&!n.patchRoutesOnNavigation){let z=ti(404,{pathname:n.history.location.pathname}),{matches:$,route:ee}=Mf(f);W=!0,j=$,Q={[ee.id]:z}}else if(j&&!n.hydrationData&&$i(j,f,n.history.location.pathname).active&&(j=null),j)if(j.some(z=>z.route.lazy))W=!1;else if(!j.some(z=>t_(z.route)))W=!0;else{let z=n.hydrationData?n.hydrationData.loaderData:null,$=n.hydrationData?n.hydrationData.errors:null;if($){let ee=j.findIndex(de=>$[de.route.id]!==void 0);W=j.slice(0,ee+1).every(de=>!gy(de.route,z,$))}else W=j.every(ee=>!gy(ee.route,z,$))}else{W=!1,j=[];let z=$i(null,f,n.history.location.pathname);z.active&&z.matches&&(q=!0,j=z.matches)}let K,S={historyAction:n.history.action,location:n.history.location,matches:j,initialized:W,navigation:Fg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||Q,fetchers:new Map,blockers:new Map},C="POP",I=null,k=!1,P,L=!1,x=new Map,ae=null,Ee=!1,G=!1,ce=new Set,me=new Map,Me=0,De=-1,H=new Map,ie=new Set,pe=new Map,ge=new Map,le=new Set,ye=new Map,Se,Le=null;function ze(){if(E=n.history.listen(({action:z,location:$,delta:ee})=>{if(Se){Se(),Se=void 0;return}an(ye.size===0||ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let de=bi({currentLocation:S.location,nextLocation:$,historyAction:z});if(de&&ee!=null){let _e=new Promise(Ce=>{Se=Ce});n.history.go(ee*-1),tr(de,{state:"blocked",location:$,proceed(){tr(de,{state:"proceeding",proceed:void 0,reset:void 0,location:$}),_e.then(()=>n.history.go(ee))},reset(){let Ce=new Map(S.blockers);Ce.set(de,oc),Qe({blockers:Ce})}}),I==null||I.resolve(),I=null;return}return Pe(z,$)}),t){kN(e,x);let z=()=>VN(e,x);e.addEventListener("pagehide",z),ae=()=>e.removeEventListener("pagehide",z)}return S.initialized||Pe("POP",S.location,{initialHydration:!0}),K}function vt(){E&&E(),ae&&ae(),w.clear(),P&&P.abort(),S.fetchers.forEach((z,$)=>Os($)),S.blockers.forEach((z,$)=>za($))}function St(z){return w.add(z),()=>w.delete(z)}function Qe(z,$={}){z.matches&&(z.matches=z.matches.map(_e=>{let Ce=c[_e.route.id],xe=_e.route;return xe.element!==Ce.element||xe.errorElement!==Ce.errorElement||xe.hydrateFallbackElement!==Ce.hydrateFallbackElement?{..._e,route:Ce}:_e})),S={...S,...z};let ee=[],de=[];S.fetchers.forEach((_e,Ce)=>{_e.state==="idle"&&(le.has(Ce)?ee.push(Ce):de.push(Ce))}),le.forEach(_e=>{!S.fetchers.has(_e)&&!me.has(_e)&&ee.push(_e)}),[...w].forEach(_e=>_e(S,{deletedFetchers:ee,newErrors:z.errors??null,viewTransitionOpts:$.viewTransitionOpts,flushSync:$.flushSync===!0})),ee.forEach(_e=>Os(_e)),de.forEach(_e=>S.fetchers.delete(_e))}function At(z,$,{flushSync:ee}={}){var qe,Ve;let de=S.actionData!=null&&S.navigation.formMethod!=null&&Qn(S.navigation.formMethod)&&S.navigation.state==="loading"&&((qe=z.state)==null?void 0:qe._isRedirect)!==!0,_e;$.actionData?Object.keys($.actionData).length>0?_e=$.actionData:_e=null:de?_e=S.actionData:_e=null;let Ce=$.loaderData?c0(S.loaderData,$.loaderData,$.matches||[],$.errors):S.loaderData,xe=S.blockers;xe.size>0&&(xe=new Map(xe),xe.forEach((Ye,st)=>xe.set(st,oc)));let ve=Ee?!1:jo(z,$.matches||S.matches),be=k===!0||S.navigation.formMethod!=null&&Qn(S.navigation.formMethod)&&((Ve=z.state)==null?void 0:Ve._isRedirect)!==!0;m&&(f=m,m=void 0),Ee||C==="POP"||(C==="PUSH"?n.history.push(z,z.state):C==="REPLACE"&&n.history.replace(z,z.state));let Ie;if(C==="POP"){let Ye=x.get(S.location.pathname);Ye&&Ye.has(z.pathname)?Ie={currentLocation:S.location,nextLocation:z}:x.has(z.pathname)&&(Ie={currentLocation:z,nextLocation:S.location})}else if(L){let Ye=x.get(S.location.pathname);Ye?Ye.add(z.pathname):(Ye=new Set([z.pathname]),x.set(S.location.pathname,Ye)),Ie={currentLocation:S.location,nextLocation:z}}Qe({...$,actionData:_e,loaderData:Ce,historyAction:C,location:z,initialized:!0,navigation:Fg,revalidation:"idle",restoreScrollPosition:ve,preventScrollReset:be,blockers:xe},{viewTransitionOpts:Ie,flushSync:ee===!0}),C="POP",k=!1,L=!1,Ee=!1,G=!1,I==null||I.resolve(),I=null,Le==null||Le.resolve(),Le=null}async function Ht(z,$){if(I==null||I.resolve(),I=null,typeof z=="number"){I||(I=m0());let st=I.promise;return n.history.go(z),st}let ee=py(S.location,S.matches,p,z,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:de,submission:_e,error:Ce}=t0(!1,ee,$),xe=S.location,ve=Dc(S.location,de,$&&$.state);ve={...ve,...n.history.encodeLocation(ve)};let be=$&&$.replace!=null?$.replace:void 0,Ie="PUSH";be===!0?Ie="REPLACE":be===!1||_e!=null&&Qn(_e.formMethod)&&_e.formAction===S.location.pathname+S.location.search&&(Ie="REPLACE");let qe=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,Ve=($&&$.flushSync)===!0,Ye=bi({currentLocation:xe,nextLocation:ve,historyAction:Ie});if(Ye){tr(Ye,{state:"blocked",location:ve,proceed(){tr(Ye,{state:"proceeding",proceed:void 0,reset:void 0,location:ve}),Ht(z,$)},reset(){let st=new Map(S.blockers);st.set(Ye,oc),Qe({blockers:st})}});return}await Pe(Ie,ve,{submission:_e,pendingError:Ce,preventScrollReset:qe,replace:$&&$.replace,enableViewTransition:$&&$.viewTransition,flushSync:Ve,callSiteDefaultShouldRevalidate:$&&$.unstable_defaultShouldRevalidate})}function we(){Le||(Le=m0()),ur(),Qe({revalidation:"loading"});let z=Le.promise;return S.navigation.state==="submitting"?z:S.navigation.state==="idle"?(Pe(S.historyAction,S.location,{startUninterruptedRevalidation:!0}),z):(Pe(C||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:L===!0}),z)}async function Pe(z,$,ee){P&&P.abort(),P=null,C=z,Ee=(ee&&ee.startUninterruptedRevalidation)===!0,Ir(S.location,S.matches),k=(ee&&ee.preventScrollReset)===!0,L=(ee&&ee.enableViewTransition)===!0;let de=m||f,_e=ee&&ee.overrideNavigation,Ce=ee!=null&&ee.initialHydration&&S.matches&&S.matches.length>0&&!q?S.matches:da(de,$,p),xe=(ee&&ee.flushSync)===!0;if(Ce&&S.initialized&&!G&&wN(S.location,$)&&!(ee&&ee.submission&&Qn(ee.submission.formMethod))){At($,{matches:Ce},{flushSync:xe});return}let ve=$i(Ce,de,$.pathname);if(ve.active&&ve.matches&&(Ce=ve.matches),!Ce){let{error:Kt,notFoundMatches:Ft,route:nt}=Jt($.pathname);At($,{matches:Ft,loaderData:{},errors:{[nt.id]:Kt}},{flushSync:xe});return}P=new AbortController;let be=Cl(n.history,$,P.signal,ee&&ee.submission),Ie=n.getContext?await n.getContext():new Qb,qe;if(ee&&ee.pendingError)qe=[ma(Ce).route.id,{type:"error",error:ee.pendingError}];else if(ee&&ee.submission&&Qn(ee.submission.formMethod)){let Kt=await $e(be,$,ee.submission,Ce,Ie,ve.active,ee&&ee.initialHydration===!0,{replace:ee.replace,flushSync:xe});if(Kt.shortCircuited)return;if(Kt.pendingActionResult){let[Ft,nt]=Kt.pendingActionResult;if(jr(nt)&&Mc(nt.error)&&nt.error.status===404){P=null,At($,{matches:Kt.matches,loaderData:{},errors:{[Ft]:nt.error}});return}}Ce=Kt.matches||Ce,qe=Kt.pendingActionResult,_e=qg($,ee.submission),xe=!1,ve.active=!1,be=Cl(n.history,be.url,be.signal)}let{shortCircuited:Ve,matches:Ye,loaderData:st,errors:Mt}=await Be(be,$,Ce,Ie,ve.active,_e,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,xe,qe,ee&&ee.callSiteDefaultShouldRevalidate);Ve||(P=null,At($,{matches:Ye||Ce,...h0(qe),loaderData:st,errors:Mt}))}async function $e(z,$,ee,de,_e,Ce,xe,ve={}){ur();let be=MN($,ee);if(Qe({navigation:be},{flushSync:ve.flushSync===!0}),Ce){let Ve=await nr(de,$.pathname,z.signal);if(Ve.type==="aborted")return{shortCircuited:!0};if(Ve.type==="error"){if(Ve.partialMatches.length===0){let{matches:st,route:Mt}=Mf(f);return{matches:st,pendingActionResult:[Mt.id,{type:"error",error:Ve.error}]}}let Ye=ma(Ve.partialMatches).route.id;return{matches:Ve.partialMatches,pendingActionResult:[Ye,{type:"error",error:Ve.error}]}}else if(Ve.matches)de=Ve.matches;else{let{notFoundMatches:Ye,error:st,route:Mt}=Jt($.pathname);return{matches:Ye,pendingActionResult:[Mt.id,{type:"error",error:st}]}}}let Ie,qe=Yf(de,$);if(!qe.route.action&&!qe.route.lazy)Ie={type:"error",error:ti(405,{method:z.method,pathname:$.pathname,routeId:qe.route.id})};else{let Ve=Vl(l,c,z,de,qe,xe?[]:i,_e),Ye=await nn(z,Ve,_e,null);if(Ie=Ye[qe.route.id],!Ie){for(let st of de)if(Ye[st.route.id]){Ie=Ye[st.route.id];break}}if(z.signal.aborted)return{shortCircuited:!0}}if(yo(Ie)){let Ve;return ve&&ve.replace!=null?Ve=ve.replace:Ve=o0(Ie.response.headers.get("Location"),new URL(z.url),p,n.history)===S.location.pathname+S.location.search,await Et(z,Ie,!0,{submission:ee,replace:Ve}),{shortCircuited:!0}}if(jr(Ie)){let Ve=ma(de,qe.route.id);return(ve&&ve.replace)!==!0&&(C="PUSH"),{matches:de,pendingActionResult:[Ve.route.id,Ie,qe.route.id]}}return{matches:de,pendingActionResult:[qe.route.id,Ie]}}async function Be(z,$,ee,de,_e,Ce,xe,ve,be,Ie,qe,Ve,Ye){let st=Ce||qg($,xe),Mt=xe||ve||d0(st),Kt=!Ee&&!Ie;if(_e){if(Kt){let rn=ke(Ve);Qe({navigation:st,...rn!==void 0?{actionData:rn}:{}},{flushSync:qe})}let ot=await nr(ee,$.pathname,z.signal);if(ot.type==="aborted")return{shortCircuited:!0};if(ot.type==="error"){if(ot.partialMatches.length===0){let{matches:yn,route:Pt}=Mf(f);return{matches:yn,loaderData:{},errors:{[Pt.id]:ot.error}}}let rn=ma(ot.partialMatches).route.id;return{matches:ot.partialMatches,loaderData:{},errors:{[rn]:ot.error}}}else if(ot.matches)ee=ot.matches;else{let{error:rn,notFoundMatches:yn,route:Pt}=Jt($.pathname);return{matches:yn,loaderData:{},errors:{[Pt.id]:rn}}}}let Ft=m||f,{dsMatches:nt,revalidatingFetchers:qt}=n0(z,de,l,c,n.history,S,ee,Mt,$,Ie?[]:i,Ie===!0,G,ce,le,pe,ie,Ft,p,n.patchRoutesOnNavigation!=null,Ve,Ye);if(De=++Me,!n.dataStrategy&&!nt.some(ot=>ot.shouldLoad)&&!nt.some(ot=>ot.route.middleware&&ot.route.middleware.length>0)&&qt.length===0){let ot=Wt();return At($,{matches:ee,loaderData:{},errors:Ve&&jr(Ve[1])?{[Ve[0]]:Ve[1].error}:null,...h0(Ve),...ot?{fetchers:new Map(S.fetchers)}:{}},{flushSync:qe}),{shortCircuited:!0}}if(Kt){let ot={};if(!_e){ot.navigation=st;let rn=ke(Ve);rn!==void 0&&(ot.actionData=rn)}qt.length>0&&(ot.fetchers=Ze(qt)),Qe(ot,{flushSync:qe})}qt.forEach(ot=>{Ut(ot.key),ot.controller&&me.set(ot.key,ot.controller)});let Nn=()=>qt.forEach(ot=>Ut(ot.key));P&&P.signal.addEventListener("abort",Nn);let{loaderResults:Gt,fetcherResults:cr}=await lr(nt,qt,z,de);if(z.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",Nn),qt.forEach(ot=>me.delete(ot.key));let qn=Pf(Gt);if(qn)return await Et(z,qn.result,!0,{replace:be}),{shortCircuited:!0};if(qn=Pf(cr),qn)return ie.add(qn.key),await Et(z,qn.result,!0,{replace:be}),{shortCircuited:!0};let{loaderData:hr,errors:Gn}=u0(S,ee,Gt,Ve,qt,cr);Ie&&S.errors&&(Gn={...S.errors,...Gn});let xr=Wt(),Ai=Ua(De),wi=xr||Ai||qt.length>0;return{matches:ee,loaderData:hr,errors:Gn,...wi?{fetchers:new Map(S.fetchers)}:{}}}function ke(z){if(z&&!jr(z[1]))return{[z[0]]:z[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function Ze(z){return z.forEach($=>{let ee=S.fetchers.get($.key),de=lc(void 0,ee?ee.data:void 0);S.fetchers.set($.key,de)}),new Map(S.fetchers)}async function gt(z,$,ee,de){Ut(z);let _e=(de&&de.flushSync)===!0,Ce=m||f,xe=py(S.location,S.matches,p,ee,$,de==null?void 0:de.relative),ve=da(Ce,xe,p),be=$i(ve,Ce,xe);if(be.active&&be.matches&&(ve=be.matches),!ve){wr(z,$,ti(404,{pathname:xe}),{flushSync:_e});return}let{path:Ie,submission:qe,error:Ve}=t0(!0,xe,de);if(Ve){wr(z,$,Ve,{flushSync:_e});return}let Ye=n.getContext?await n.getContext():new Qb,st=(de&&de.preventScrollReset)===!0;if(qe&&Qn(qe.formMethod)){await ln(z,$,Ie,ve,Ye,be.active,_e,st,qe,de&&de.unstable_defaultShouldRevalidate);return}pe.set(z,{routeId:$,path:Ie}),await Ot(z,$,Ie,ve,Ye,be.active,_e,st,qe)}async function ln(z,$,ee,de,_e,Ce,xe,ve,be,Ie){ur(),pe.delete(z);let qe=S.fetchers.get(z);un(z,PN(be,qe),{flushSync:xe});let Ve=new AbortController,Ye=Cl(n.history,ee,Ve.signal,be);if(Ce){let rt=await nr(de,new URL(Ye.url).pathname,Ye.signal,z);if(rt.type==="aborted")return;if(rt.type==="error"){wr(z,$,rt.error,{flushSync:xe});return}else if(rt.matches)de=rt.matches;else{wr(z,$,ti(404,{pathname:ee}),{flushSync:xe});return}}let st=Yf(de,ee);if(!st.route.action&&!st.route.lazy){let rt=ti(405,{method:be.formMethod,pathname:ee,routeId:$});wr(z,$,rt,{flushSync:xe});return}me.set(z,Ve);let Mt=Me,Kt=Vl(l,c,Ye,de,st,i,_e),Ft=await nn(Ye,Kt,_e,z),nt=Ft[st.route.id];if(!nt){for(let rt of Kt)if(Ft[rt.route.id]){nt=Ft[rt.route.id];break}}if(Ye.signal.aborted){me.get(z)===Ve&&me.delete(z);return}if(le.has(z)){if(yo(nt)||jr(nt)){un(z,ms(void 0));return}}else{if(yo(nt))if(me.delete(z),De>Mt){un(z,ms(void 0));return}else return ie.add(z),un(z,lc(be)),Et(Ye,nt,!1,{fetcherSubmission:be,preventScrollReset:ve});if(jr(nt)){wr(z,$,nt.error);return}}let qt=S.navigation.location||S.location,Nn=Cl(n.history,qt,Ve.signal),Gt=m||f,cr=S.navigation.state!=="idle"?da(Gt,S.navigation.location,p):S.matches;at(cr,"Didn't find any matches after fetcher action");let qn=++Me;H.set(z,qn);let hr=lc(be,nt.data);S.fetchers.set(z,hr);let{dsMatches:Gn,revalidatingFetchers:xr}=n0(Nn,_e,l,c,n.history,S,cr,be,qt,i,!1,G,ce,le,pe,ie,Gt,p,n.patchRoutesOnNavigation!=null,[st.route.id,nt],Ie);xr.filter(rt=>rt.key!==z).forEach(rt=>{let Nr=rt.key,Ps=S.fetchers.get(Nr),wt=lc(void 0,Ps?Ps.data:void 0);S.fetchers.set(Nr,wt),Ut(Nr),rt.controller&&me.set(Nr,rt.controller)}),Qe({fetchers:new Map(S.fetchers)});let Ai=()=>xr.forEach(rt=>Ut(rt.key));Ve.signal.addEventListener("abort",Ai);let{loaderResults:wi,fetcherResults:ot}=await lr(Gn,xr,Nn,_e);if(Ve.signal.aborted)return;if(Ve.signal.removeEventListener("abort",Ai),H.delete(z),me.delete(z),xr.forEach(rt=>me.delete(rt.key)),S.fetchers.has(z)){let rt=ms(nt.data);S.fetchers.set(z,rt)}let rn=Pf(wi);if(rn)return Et(Nn,rn.result,!1,{preventScrollReset:ve});if(rn=Pf(ot),rn)return ie.add(rn.key),Et(Nn,rn.result,!1,{preventScrollReset:ve});let{loaderData:yn,errors:Pt}=u0(S,cr,wi,void 0,xr,ot);Ua(qn),S.navigation.state==="loading"&&qn>De?(at(C,"Expected pending action"),P&&P.abort(),At(S.navigation.location,{matches:cr,loaderData:yn,errors:Pt,fetchers:new Map(S.fetchers)})):(Qe({errors:Pt,loaderData:c0(S.loaderData,yn,cr,Pt),fetchers:new Map(S.fetchers)}),G=!1)}async function Ot(z,$,ee,de,_e,Ce,xe,ve,be){let Ie=S.fetchers.get(z);un(z,lc(be,Ie?Ie.data:void 0),{flushSync:xe});let qe=new AbortController,Ve=Cl(n.history,ee,qe.signal);if(Ce){let nt=await nr(de,new URL(Ve.url).pathname,Ve.signal,z);if(nt.type==="aborted")return;if(nt.type==="error"){wr(z,$,nt.error,{flushSync:xe});return}else if(nt.matches)de=nt.matches;else{wr(z,$,ti(404,{pathname:ee}),{flushSync:xe});return}}let Ye=Yf(de,ee);me.set(z,qe);let st=Me,Mt=Vl(l,c,Ve,de,Ye,i,_e),Ft=(await nn(Ve,Mt,_e,z))[Ye.route.id];if(me.get(z)===qe&&me.delete(z),!Ve.signal.aborted){if(le.has(z)){un(z,ms(void 0));return}if(yo(Ft))if(De>st){un(z,ms(void 0));return}else{ie.add(z),await Et(Ve,Ft,!1,{preventScrollReset:ve});return}if(jr(Ft)){wr(z,$,Ft.error);return}un(z,ms(Ft.data))}}async function Et(z,$,ee,{submission:de,fetcherSubmission:_e,preventScrollReset:Ce,replace:xe}={}){ee||(I==null||I.resolve(),I=null),$.response.headers.has("X-Remix-Revalidate")&&(G=!0);let ve=$.response.headers.get("Location");at(ve,"Expected a Location header on the redirect Response"),ve=o0(ve,new URL(z.url),p,n.history);let be=Dc(S.location,ve,{_isRedirect:!0});if(t){let Mt=!1;if($.response.headers.has("X-Remix-Reload-Document"))Mt=!0;else if(e_(ve)){const Kt=CA(ve,!0);Mt=Kt.origin!==e.location.origin||ii(Kt.pathname,p)==null}if(Mt){xe?e.location.replace(ve):e.location.assign(ve);return}}P=null;let Ie=xe===!0||$.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:qe,formAction:Ve,formEncType:Ye}=S.navigation;!de&&!_e&&qe&&Ve&&Ye&&(de=d0(S.navigation));let st=de||_e;if(uN.has($.response.status)&&st&&Qn(st.formMethod))await Pe(Ie,be,{submission:{...st,formAction:ve},preventScrollReset:Ce||k,enableViewTransition:ee?L:void 0});else{let Mt=qg(be,de);await Pe(Ie,be,{overrideNavigation:Mt,fetcherSubmission:_e,preventScrollReset:Ce||k,enableViewTransition:ee?L:void 0})}}async function nn(z,$,ee,de){var xe;let _e,Ce={};try{_e=await vN(y,z,$,de,ee,!1)}catch(ve){return $.filter(be=>be.shouldLoad).forEach(be=>{Ce[be.route.id]={type:"error",error:ve}}),Ce}if(z.signal.aborted)return Ce;if(!Qn(z.method))for(let ve of $){if(((xe=_e[ve.route.id])==null?void 0:xe.type)==="error")break;!_e.hasOwnProperty(ve.route.id)&&!S.loaderData.hasOwnProperty(ve.route.id)&&(!S.errors||!S.errors.hasOwnProperty(ve.route.id))&&ve.shouldCallHandler()&&(_e[ve.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${ve.route.id}`)})}for(let[ve,be]of Object.entries(_e))if(xN(be)){let Ie=be.result;Ce[ve]={type:"redirect",response:SN(Ie,z,ve,$,p)}}else Ce[ve]=await bN(be);return Ce}async function lr(z,$,ee,de){let _e=nn(ee,z,de,null),Ce=Promise.all($.map(async be=>{if(be.matches&&be.match&&be.request&&be.controller){let qe=(await nn(be.request,be.matches,de,be.key))[be.match.route.id];return{[be.key]:qe}}else return Promise.resolve({[be.key]:{type:"error",error:ti(404,{pathname:be.path})}})})),xe=await _e,ve=(await Ce).reduce((be,Ie)=>Object.assign(be,Ie),{});return{loaderResults:xe,fetcherResults:ve}}function ur(){G=!0,pe.forEach((z,$)=>{me.has($)&&ce.add($),Ut($)})}function un(z,$,ee={}){S.fetchers.set(z,$),Qe({fetchers:new Map(S.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function wr(z,$,ee,de={}){let _e=ma(S.matches,$);Os(z),Qe({errors:{[_e.route.id]:ee},fetchers:new Map(S.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function ja(z){return ge.set(z,(ge.get(z)||0)+1),le.has(z)&&le.delete(z),S.fetchers.get(z)||cN}function Lo(z,$){Ut(z,$==null?void 0:$.reason),un(z,ms(null))}function Os(z){let $=S.fetchers.get(z);me.has(z)&&!($&&$.state==="loading"&&H.has(z))&&Ut(z),pe.delete(z),H.delete(z),ie.delete(z),le.delete(z),ce.delete(z),S.fetchers.delete(z)}function Cr(z){let $=(ge.get(z)||0)-1;$<=0?(ge.delete(z),le.add(z)):ge.set(z,$),Qe({fetchers:new Map(S.fetchers)})}function Ut(z,$){let ee=me.get(z);ee&&(ee.abort($),me.delete(z))}function er(z){for(let $ of z){let ee=ja($),de=ms(ee.data);S.fetchers.set($,de)}}function Wt(){let z=[],$=!1;for(let ee of ie){let de=S.fetchers.get(ee);at(de,`Expected fetcher: ${ee}`),de.state==="loading"&&(ie.delete(ee),z.push(ee),$=!0)}return er(z),$}function Ua(z){let $=[];for(let[ee,de]of H)if(de<z){let _e=S.fetchers.get(ee);at(_e,`Expected fetcher: ${ee}`),_e.state==="loading"&&(Ut(ee),H.delete(ee),$.push(ee))}return er($),$.length>0}function Ms(z,$){let ee=S.blockers.get(z)||oc;return ye.get(z)!==$&&ye.set(z,$),ee}function za(z){S.blockers.delete(z),ye.delete(z)}function tr(z,$){let ee=S.blockers.get(z)||oc;at(ee.state==="unblocked"&&$.state==="blocked"||ee.state==="blocked"&&$.state==="blocked"||ee.state==="blocked"&&$.state==="proceeding"||ee.state==="blocked"&&$.state==="unblocked"||ee.state==="proceeding"&&$.state==="unblocked",`Invalid blocker state transition: ${ee.state} -> ${$.state}`);let de=new Map(S.blockers);de.set(z,$),Qe({blockers:de})}function bi({currentLocation:z,nextLocation:$,historyAction:ee}){if(ye.size===0)return;ye.size>1&&an(!1,"A router only supports one blocker at a time");let de=Array.from(ye.entries()),[_e,Ce]=de[de.length-1],xe=S.blockers.get(_e);if(!(xe&&xe.state==="proceeding")&&Ce({currentLocation:z,nextLocation:$,historyAction:ee}))return _e}function Jt(z){let $=ti(404,{pathname:z}),ee=m||f,{matches:de,route:_e}=Mf(ee);return{notFoundMatches:de,route:_e,error:$}}function Fr(z,$,ee){if(D=z,M=$,V=ee||null,!U&&S.navigation===Fg){U=!0;let de=jo(S.location,S.matches);de!=null&&Qe({restoreScrollPosition:de})}return()=>{D=null,M=null,V=null}}function Rr(z,$){return V&&V(z,$.map(de=>Vx(de,S.loaderData)))||z.key}function Ir(z,$){if(D&&M){let ee=Rr(z,$);D[ee]=M()}}function jo(z,$){if(D){let ee=Rr(z,$),de=D[ee];if(typeof de=="number")return de}return null}function $i(z,$,ee){if(n.patchRoutesOnNavigation)if(z){if(Object.keys(z[0].params).length>0)return{active:!0,matches:mc($,ee,p,!0)}}else return{active:!0,matches:mc($,ee,p,!0)||[]};return{active:!1,matches:null}}async function nr(z,$,ee,de){if(!n.patchRoutesOnNavigation)return{type:"success",matches:z};let _e=z;for(;;){let Ce=m==null,xe=m||f,ve=c;try{await n.patchRoutesOnNavigation({signal:ee,path:$,matches:_e,fetcherKey:de,patch:(qe,Ve)=>{ee.aborted||r0(qe,Ve,xe,ve,l,!1)}})}catch(qe){return{type:"error",error:qe,partialMatches:_e}}finally{Ce&&!ee.aborted&&(f=[...f])}if(ee.aborted)return{type:"aborted"};let be=da(xe,$,p),Ie=null;if(be){if(Object.keys(be[0].params).length===0)return{type:"success",matches:be};if(Ie=mc(xe,$,p,!0),!(Ie&&_e.length<Ie.length&&Si(_e,Ie.slice(0,_e.length))))return{type:"success",matches:be}}if(Ie||(Ie=mc(xe,$,p,!0)),!Ie||Si(_e,Ie))return{type:"success",matches:null};_e=Ie}}function Si(z,$){return z.length===$.length&&z.every((ee,de)=>ee.route.id===$[de].route.id)}function du(z){c={},m=Oc(z,l,void 0,c)}function Ki(z,$,ee=!1){let de=m==null;r0(z,$,m||f,c,l,ee),de&&(f=[...f],Qe({}))}return K={get basename(){return p},get future(){return v},get state(){return S},get routes(){return f},get window(){return e},initialize:ze,subscribe:St,enableScrollRestoration:Fr,navigate:Ht,fetch:gt,revalidate:we,createHref:z=>n.history.createHref(z),encodeLocation:z=>n.history.encodeLocation(z),getFetcher:ja,resetFetcher:Lo,deleteFetcher:Cr,dispose:vt,getBlocker:Ms,deleteBlocker:za,patchRoutes:Ki,_internalFetchControllers:me,_internalSetRoutes:du,_internalSetStateDoNotUseOrYouWillBreakYourApp(z){Qe(z)}},n.unstable_instrumentations&&(K=tN(K,n.unstable_instrumentations.map(z=>z.router).filter(Boolean))),K}function dN(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function py(n,e,t,i,a,l){let c,f;if(a){c=[];for(let p of e)if(c.push(p),p.route.id===a){f=p;break}}else c=e,f=e[e.length-1];let m=Yd(i||".",Kd(c),ii(n.pathname,t)||n.pathname,l==="path");if(i==null&&(m.search=n.search,m.hash=n.hash),(i==null||i===""||i===".")&&f){let p=r_(m.search);if(f.route.index&&!p)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&p){let y=new URLSearchParams(m.search),v=y.getAll("index");y.delete("index"),v.filter(w=>w).forEach(w=>y.append("index",w));let E=y.toString();m.search=E?`?${E}`:""}}return t!=="/"&&(m.pathname=Qx({basename:t,pathname:m.pathname})),Fi(m)}function t0(n,e,t){if(!t||!dN(t))return{path:e};if(t.formMethod&&!ON(t.formMethod))return{path:e,error:ti(405,{method:t.formMethod})};let i=()=>({path:e,error:ti(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=FA(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Qn(l))return i();let v=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((E,[w,D])=>`${E}${w}=${D}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:v}}}else if(t.formEncType==="application/json"){if(!Qn(l))return i();try{let v=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:v,text:void 0}}}catch{return i()}}}at(typeof FormData=="function","FormData is not available in this environment");let f,m;if(t.formData)f=_y(t.formData),m=t.formData;else if(t.body instanceof FormData)f=_y(t.body),m=t.body;else if(t.body instanceof URLSearchParams)f=t.body,m=l0(f);else if(t.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(t.body),m=l0(f)}catch{return i()}let p={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(Qn(p.formMethod))return{path:e,submission:p};let y=Ns(e);return n&&y.search&&r_(y.search)&&f.append("index",""),y.search=`?${f}`,{path:Fi(y),submission:p}}function n0(n,e,t,i,a,l,c,f,m,p,y,v,E,w,D,V,M,U,j,q,Q){var Ee;let W=q?jr(q[1])?q[1].error:q[1].data:void 0,K=a.createURL(l.location),S=a.createURL(m),C;if(y&&l.errors){let G=Object.keys(l.errors)[0];C=c.findIndex(ce=>ce.route.id===G)}else if(q&&jr(q[1])){let G=q[0];C=c.findIndex(ce=>ce.route.id===G)-1}let I=q?q[1].statusCode:void 0,k=I&&I>=400,P={currentUrl:K,currentParams:((Ee=l.matches[0])==null?void 0:Ee.params)||{},nextUrl:S,nextParams:c[0].params,...f,actionResult:W,actionStatus:I},L=Qc(c),x=c.map((G,ce)=>{let{route:me}=G,Me=null;if(C!=null&&ce>C?Me=!1:me.lazy?Me=!0:t_(me)?y?Me=gy(me,l.loaderData,l.errors):mN(l.loaderData,l.matches[ce],G)&&(Me=!0):Me=!1,Me!==null)return yy(t,i,n,L,G,p,e,Me);let De=!1;typeof Q=="boolean"?De=Q:k?De=!1:(v||K.pathname+K.search===S.pathname+S.search||K.search!==S.search||pN(l.matches[ce],G))&&(De=!0);let H={...P,defaultShouldRevalidate:De},ie=Ec(G,H);return yy(t,i,n,L,G,p,e,ie,H,Q)}),ae=[];return D.forEach((G,ce)=>{if(y||!c.some(le=>le.route.id===G.routeId)||w.has(ce))return;let me=l.fetchers.get(ce),Me=me&&me.state!=="idle"&&me.data===void 0,De=da(M,G.path,U);if(!De){if(j&&Me)return;ae.push({key:ce,routeId:G.routeId,path:G.path,matches:null,match:null,request:null,controller:null});return}if(V.has(ce))return;let H=Yf(De,G.path),ie=new AbortController,pe=Cl(a,G.path,ie.signal),ge=null;if(E.has(ce))E.delete(ce),ge=Vl(t,i,pe,De,H,p,e);else if(Me)v&&(ge=Vl(t,i,pe,De,H,p,e));else{let le;typeof Q=="boolean"?le=Q:k?le=!1:le=v;let ye={...P,defaultShouldRevalidate:le};Ec(H,ye)&&(ge=Vl(t,i,pe,De,H,p,e,ye))}ge&&ae.push({key:ce,routeId:G.routeId,path:G.path,matches:ge,match:H,request:pe,controller:ie})}),{dsMatches:x,revalidatingFetchers:ae}}function t_(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function gy(n,e,t){if(n.lazy)return!0;if(!t_(n))return!1;let i=e!=null&&n.id in e,a=t!=null&&t[n.id]!==void 0;return!i&&a?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!a}function mN(n,e,t){let i=!e||t.route.id!==e.route.id,a=!n.hasOwnProperty(t.route.id);return i||a}function pN(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Ec(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function r0(n,e,t,i,a,l){let c;if(n){let p=i[n];at(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),c=p.children}else c=t;let f=[],m=[];if(e.forEach(p=>{let y=c.find(v=>jA(p,v));y?m.push({existingRoute:y,newRoute:p}):f.push(p)}),f.length>0){let p=Oc(f,a,[n||"_","patch",String((c==null?void 0:c.length)||"0")],i);c.push(...p)}if(l&&m.length>0)for(let p=0;p<m.length;p++){let{existingRoute:y,newRoute:v}=m[p],E=y,[w]=Oc([v],a,[],{},!0);Object.assign(E,{element:w.element?w.element:E.element,errorElement:w.errorElement?w.errorElement:E.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:E.hydrateFallbackElement})}}function jA(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var a;return(a=e.children)==null?void 0:a.some(l=>jA(t,l))}):!1}var i0=new WeakMap,UA=({key:n,route:e,manifest:t,mapRouteProperties:i})=>{let a=t[e.id];if(at(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let l=a.lazy[n];if(!l)return;let c=i0.get(a);c||(c={},i0.set(a,c));let f=c[n];if(f)return f;let m=(async()=>{let p=Ox(n),v=a[n]!==void 0&&n!=="hasErrorBoundary";if(p)an(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(v)an(!1,`Route "${a.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let E=await l();E!=null&&(Object.assign(a,{[n]:E}),Object.assign(a,i(a)))}typeof a.lazy=="object"&&(a.lazy[n]=void 0,Object.values(a.lazy).every(E=>E===void 0)&&(a.lazy=void 0))})();return c[n]=m,m},s0=new WeakMap;function gN(n,e,t,i,a){let l=t[n.id];if(at(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let y=s0.get(l);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let v=(async()=>{at(typeof n.lazy=="function","No lazy route function found");let E=await n.lazy(),w={};for(let D in E){let V=E[D];if(V===void 0)continue;let M=Px(D),j=l[D]!==void 0&&D!=="hasErrorBoundary";M?an(!M,"Route property "+D+" is not a supported property to be returned from a lazy route function. This property will be ignored."):j?an(!j,`Route "${l.id}" has a static property "${D}" defined but its lazy function is also returning a value for this property. The lazy route property "${D}" will be ignored.`):w[D]=V}Object.assign(l,w),Object.assign(l,{...i(l),lazy:void 0})})();return s0.set(l,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let c=Object.keys(n.lazy),f=[],m;for(let y of c){if(a&&a.includes(y))continue;let v=UA({key:y,route:n,manifest:t,mapRouteProperties:i});v&&(f.push(v),y===e&&(m=v))}let p=f.length>0?Promise.all(f).then(()=>{}):void 0;return p==null||p.catch(()=>{}),m==null||m.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:m}}async function a0(n){let e=n.matches.filter(a=>a.shouldLoad),t={};return(await Promise.all(e.map(a=>a.resolve()))).forEach((a,l)=>{t[e[l].route.id]=a}),t}async function yN(n){return n.matches.some(e=>e.route.middleware)?zA(n,()=>a0(n)):a0(n)}function zA(n,e){return _N(n,e,i=>{if(DN(i))throw i;return i},RN,t);function t(i,a,l){if(l)return Promise.resolve(Object.assign(l.value,{[a]:{type:"error",result:i}}));{let{matches:c}=n,f=Math.min(Math.max(c.findIndex(p=>p.route.id===a),0),Math.max(c.findIndex(p=>p.shouldCallHandler()),0)),m=ma(c,c[f].route.id).route.id;return Promise.resolve({[m]:{type:"error",result:i}})}}}async function _N(n,e,t,i,a){let{matches:l,request:c,params:f,context:m,unstable_pattern:p}=n,y=l.flatMap(E=>E.route.middleware?E.route.middleware.map(w=>[E.route.id,w]):[]);return await BA({request:c,params:f,context:m,unstable_pattern:p},y,e,t,i,a)}async function BA(n,e,t,i,a,l,c=0){let{request:f}=n;if(f.signal.aborted)throw f.signal.reason??new Error(`Request aborted: ${f.method} ${f.url}`);let m=e[c];if(!m)return await t();let[p,y]=m,v,E=async()=>{if(v)throw new Error("You may only call `next()` once per middleware");try{return v={value:await BA(n,e,t,i,a,l,c+1)},v.value}catch(w){return v={value:await l(w,p,v)},v.value}};try{let w=await y(n,E),D=w!=null?i(w):void 0;return a(D)?D:v?D??v.value:(v={value:await E()},v.value)}catch(w){return await l(w,p,v)}}function HA(n,e,t,i,a){let l=UA({key:"middleware",route:i.route,manifest:e,mapRouteProperties:n}),c=gN(i.route,Qn(t.method)?"action":"loader",e,n,a);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function yy(n,e,t,i,a,l,c,f,m=null,p){let y=!1,v=HA(n,e,t,a,l);return{...a,_lazyPromises:v,shouldLoad:f,shouldRevalidateArgs:m,shouldCallHandler(E){return y=!0,m?typeof p=="boolean"?Ec(a,{...m,defaultShouldRevalidate:p}):typeof E=="boolean"?Ec(a,{...m,defaultShouldRevalidate:E}):Ec(a,m):f},resolve(E){let{lazy:w,loader:D,middleware:V}=a.route,M=y||f||E&&!Qn(t.method)&&(w||D),U=V&&V.length>0&&!D&&!w;return M&&(Qn(t.method)||!U)?EN({request:t,unstable_pattern:i,match:a,lazyHandlerPromise:v==null?void 0:v.handler,lazyRoutePromise:v==null?void 0:v.route,handlerOverride:E,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Vl(n,e,t,i,a,l,c,f=null){return i.map(m=>m.route.id!==a.route.id?{...m,shouldLoad:!1,shouldRevalidateArgs:f,shouldCallHandler:()=>!1,_lazyPromises:HA(n,e,t,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:yy(n,e,t,Qc(i),m,l,c,!0,f))}async function vN(n,e,t,i,a,l){t.some(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware})&&await Promise.all(t.map(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware}));let c={request:e,unstable_pattern:Qc(t),params:t[0].params,context:a,matches:t},m=await n({...c,fetcherKey:i,runClientMiddleware:p=>{let y=c;return zA(y,()=>p({...y,fetcherKey:i,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(p=>{var y,v;return[(y=p._lazyPromises)==null?void 0:y.handler,(v=p._lazyPromises)==null?void 0:v.route]}))}catch{}return m}async function EN({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:i,lazyRoutePromise:a,handlerOverride:l,scopedContext:c}){let f,m,p=Qn(n.method),y=p?"action":"loader",v=E=>{let w,D=new Promise((U,j)=>w=j);m=()=>w(),n.signal.addEventListener("abort",m);let V=U=>typeof E!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${y}" [routeId: ${t.route.id}]`)):E({request:n,unstable_pattern:e,params:t.params,context:c},...U!==void 0?[U]:[]),M=(async()=>{try{return{type:"data",result:await(l?l(j=>V(j)):V())}}catch(U){return{type:"error",result:U}}})();return Promise.race([M,D])};try{let E=p?t.route.action:t.route.loader;if(i||a)if(E){let w,[D]=await Promise.all([v(E).catch(V=>{w=V}),i,a]);if(w!==void 0)throw w;f=D}else{await i;let w=p?t.route.action:t.route.loader;if(w)[f]=await Promise.all([v(w),a]);else if(y==="action"){let D=new URL(n.url),V=D.pathname+D.search;throw ti(405,{method:n.method,pathname:V,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(E)f=await v(E);else{let w=new URL(n.url),D=w.pathname+w.search;throw ti(404,{pathname:D})}}catch(E){return{type:"error",result:E}}finally{m&&n.signal.removeEventListener("abort",m)}return f}async function TN(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function bN(n){var i,a,l,c,f;let{result:e,type:t}=n;if(n_(e)){let m;try{m=await TN(e)}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Yc(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:"data",data:m,statusCode:e.status,headers:e.headers}}return t==="error"?f0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:CN(e),statusCode:Mc(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Mc(e)?e.status:void 0}:f0(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function SN(n,e,t,i,a){let l=n.headers.get("Location");if(at(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!e_(l)){let c=i.slice(0,i.findIndex(f=>f.route.id===t)+1);l=py(new URL(e.url),c,a,l),n.headers.set("Location",l)}return n}function o0(n,e,t,i){let a=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(e_(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(a.includes(c.protocol))throw new Error("Invalid redirect location");let f=ii(c.pathname,t)!=null;if(c.origin===e.origin&&f)return c.pathname+c.search+c.hash}try{let l=i.createURL(n);if(a.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function Cl(n,e,t,i){let a=n.createURL(FA(e)).toString(),l={signal:t};if(i&&Qn(i.formMethod)){let{formMethod:c,formEncType:f}=i;l.method=c.toUpperCase(),f==="application/json"?(l.headers=new Headers({"Content-Type":f}),l.body=JSON.stringify(i.json)):f==="text/plain"?l.body=i.text:f==="application/x-www-form-urlencoded"&&i.formData?l.body=_y(i.formData):l.body=i.formData}return new Request(a,l)}function _y(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function l0(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function AN(n,e,t,i=!1,a=!1){let l={},c=null,f,m=!1,p={},y=t&&jr(t[1])?t[1].error:void 0;return n.forEach(v=>{if(!(v.route.id in e))return;let E=v.route.id,w=e[E];if(at(!yo(w),"Cannot handle redirect results in processLoaderData"),jr(w)){let D=w.error;if(y!==void 0&&(D=y,y=void 0),c=c||{},a)c[E]=D;else{let V=ma(n,E);c[V.route.id]==null&&(c[V.route.id]=D)}i||(l[E]=LA),m||(m=!0,f=Mc(w.error)?w.error.status:500),w.headers&&(p[E]=w.headers)}else l[E]=w.data,w.statusCode&&w.statusCode!==200&&!m&&(f=w.statusCode),w.headers&&(p[E]=w.headers)}),y!==void 0&&t&&(c={[t[0]]:y},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:f||200,loaderHeaders:p}}function u0(n,e,t,i,a,l){let{loaderData:c,errors:f}=AN(e,t,i);return a.filter(m=>!m.matches||m.matches.some(p=>p.shouldLoad)).forEach(m=>{let{key:p,match:y,controller:v}=m;if(v&&v.signal.aborted)return;let E=l[p];if(at(E,"Did not find corresponding fetcher result"),jr(E)){let w=ma(n.matches,y==null?void 0:y.route.id);f&&f[w.route.id]||(f={...f,[w.route.id]:E.error}),n.fetchers.delete(p)}else if(yo(E))at(!1,"Unhandled fetcher revalidation redirect");else{let w=ms(E.data);n.fetchers.set(p,w)}}),{loaderData:c,errors:f}}function c0(n,e,t,i){let a=Object.entries(e).filter(([,l])=>l!==LA).reduce((l,[c,f])=>(l[c]=f,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(a[c]=n[c]),i&&i.hasOwnProperty(c))break}return a}function h0(n){return n?jr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function ma(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function Mf(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ti(n,{pathname:e,routeId:t,method:i,type:a,message:l}={}){let c="Unknown Server Error",f="Unknown @remix-run/router error";return n===400?(c="Bad Request",i&&e&&t?f=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:a==="invalid-body"&&(f="Unable to encode submission body")):n===403?(c="Forbidden",f=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",f=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",i&&e&&t?f=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:i&&(f=`Invalid request method "${i.toUpperCase()}"`)),new Yc(n||500,c,new Error(f),!0)}function Pf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,a]=e[t];if(yo(a))return{key:i,result:a}}}function FA(n){let e=typeof n=="string"?Ns(n):n;return Fi({...e,hash:""})}function wN(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function CN(n){var e,t;return new Yc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function RN(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&IN(t))}function IN(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function xN(n){return n_(n.result)&&kA.has(n.result.status)}function jr(n){return n.type==="error"}function yo(n){return(n&&n.type)==="redirect"}function f0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function n_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function NN(n){return kA.has(n)}function DN(n){return n_(n)&&NN(n.status)&&n.headers.has("Location")}function ON(n){return lN.has(n.toUpperCase())}function Qn(n){return aN.has(n.toUpperCase())}function r_(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Yf(n,e){let t=typeof e=="string"?Ns(e).search:e.search;if(n[n.length-1].route.index&&r_(t||""))return n[n.length-1];let i=NA(n);return i[i.length-1]}function d0(n){let{formMethod:e,formAction:t,formEncType:i,text:a,formData:l,json:c}=n;if(!(!e||!t||!i)){if(a!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:a};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function qg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function MN(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function lc(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function PN(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ms(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function kN(n,e){try{let t=n.sessionStorage.getItem(VA);if(t){let i=JSON.parse(t);for(let[a,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(a,new Set(l||[]))}}catch{}}function VN(n,e){if(e.size>0){let t={};for(let[i,a]of e)t[i]=[...a];try{n.sessionStorage.setItem(VA,JSON.stringify(t))}catch(i){an(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function m0(){let n,e,t=new Promise((i,a)=>{n=async l=>{i(l);try{await t}catch{}},e=async l=>{a(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Do=O.createContext(null);Do.displayName="DataRouter";var Xc=O.createContext(null);Xc.displayName="DataRouterState";var qA=O.createContext(!1);function LN(){return O.useContext(qA)}var i_=O.createContext({isTransitioning:!1});i_.displayName="ViewTransition";var GA=O.createContext(new Map);GA.displayName="Fetchers";var jN=O.createContext(null);jN.displayName="Await";var Br=O.createContext(null);Br.displayName="Navigation";var Qd=O.createContext(null);Qd.displayName="Location";var si=O.createContext({outlet:null,matches:[],isDataRoute:!1});si.displayName="Route";var s_=O.createContext(null);s_.displayName="RouteError";var $A="REACT_ROUTER_ERROR",UN="REDIRECT",zN="ROUTE_ERROR_RESPONSE";function BN(n){if(n.startsWith(`${$A}:${UN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function HN(n){if(n.startsWith(`${$A}:${zN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Yc(e.status,e.statusText,e.data)}catch{}}function FN(n,{relative:e}={}){at(nu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=O.useContext(Br),{hash:a,pathname:l,search:c}=Wc(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:ji([t,l])),i.createHref({pathname:f,search:c,hash:a})}function nu(){return O.useContext(Qd)!=null}function ai(){return at(nu(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Qd).location}var KA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function YA(n){O.useContext(Br).static||O.useLayoutEffect(n)}function Oo(){let{isDataRoute:n}=O.useContext(si);return n?iD():qN()}function qN(){at(nu(),"useNavigate() may be used only in the context of a <Router> component.");let n=O.useContext(Do),{basename:e,navigator:t}=O.useContext(Br),{matches:i}=O.useContext(si),{pathname:a}=ai(),l=JSON.stringify(Kd(i)),c=O.useRef(!1);return YA(()=>{c.current=!0}),O.useCallback((m,p={})=>{if(an(c.current,KA),!c.current)return;if(typeof m=="number"){t.go(m);return}let y=Yd(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ji([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,l,a,n])}var GN=O.createContext(null);function $N(n){let e=O.useContext(si).outlet;return O.useMemo(()=>e&&O.createElement(GN.Provider,{value:n},e),[e,n])}function Mo(){let{matches:n}=O.useContext(si),e=n[n.length-1];return e?e.params:{}}function Wc(n,{relative:e}={}){let{matches:t}=O.useContext(si),{pathname:i}=ai(),a=JSON.stringify(Kd(t));return O.useMemo(()=>Yd(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function KN(n,e,t,i,a){at(nu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=O.useContext(Br),{matches:c}=O.useContext(si),f=c[c.length-1],m=f?f.params:{},p=f?f.pathname:"/",y=f?f.pathnameBase:"/",v=f&&f.route;{let j=v&&v.path||"";XA(p,!v||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let E=ai(),w;w=E;let D=w.pathname||"/",V=D;if(y!=="/"){let j=y.replace(/^\//,"").split("/");V="/"+D.replace(/^\//,"").split("/").slice(j.length).join("/")}let M=da(n,{pathname:V});return an(v||M!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),an(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),JN(M&&M.map(j=>Object.assign({},j,{params:Object.assign({},m,j.params),pathname:ji([y,l.encodeLocation?l.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?y:ji([y,l.encodeLocation?l.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),c,t,i,a)}function YN(){let n=rD(),e=Mc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:l},"ErrorBoundary")," or"," ",O.createElement("code",{style:l},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:a},t):null,c)}var QN=O.createElement(YN,null),QA=class extends O.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=HN(n.digest);t&&(n=t)}let e=n!==void 0?O.createElement(si.Provider,{value:this.props.routeContext},O.createElement(s_.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?O.createElement(XN,{error:n},e):e}};QA.contextType=qA;var Gg=new WeakMap;function XN({children:n,error:e}){let{basename:t}=O.useContext(Br);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=BN(e.digest);if(i){let a=Gg.get(e);if(a)throw a;let l=OA(i.location,t);if(DA&&!Gg.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Gg.set(e,c),c}return O.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function WN({routeContext:n,match:e,children:t}){let i=O.useContext(Do);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(si.Provider,{value:n},t)}function JN(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let y=l.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);at(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,m=-1;if(t)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=y),v.route.id){let{loaderData:E,errors:w}=t,D=v.route.loader&&!E.hasOwnProperty(v.route.id)&&(!w||w[v.route.id]===void 0);if(v.route.lazy||D){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let p=t&&i?(y,v)=>{var E,w;i(y,{location:t.location,params:((w=(E=t.matches)==null?void 0:E[0])==null?void 0:w.params)??{},unstable_pattern:Qc(t.matches),errorInfo:v})}:void 0;return l.reduceRight((y,v,E)=>{let w,D=!1,V=null,M=null;t&&(w=c&&v.route.id?c[v.route.id]:void 0,V=v.route.errorElement||QN,f&&(m<0&&E===0?(XA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,M=null):m===E&&(D=!0,M=v.route.hydrateFallbackElement||null)));let U=e.concat(l.slice(0,E+1)),j=()=>{let q;return w?q=V:D?q=M:v.route.Component?q=O.createElement(v.route.Component,null):v.route.element?q=v.route.element:q=y,O.createElement(WN,{match:v,routeContext:{outlet:y,matches:U,isDataRoute:t!=null},children:q})};return t&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?O.createElement(QA,{location:t.location,revalidation:t.revalidation,component:V,error:w,children:j(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:p}):j()},null)}function a_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZN(n){let e=O.useContext(Do);return at(e,a_(n)),e}function eD(n){let e=O.useContext(Xc);return at(e,a_(n)),e}function tD(n){let e=O.useContext(si);return at(e,a_(n)),e}function o_(n){let e=tD(n),t=e.matches[e.matches.length-1];return at(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function nD(){return o_("useRouteId")}function rD(){var i;let n=O.useContext(s_),e=eD("useRouteError"),t=o_("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function iD(){let{router:n}=ZN("useNavigate"),e=o_("useNavigate"),t=O.useRef(!1);return YA(()=>{t.current=!0}),O.useCallback(async(a,l={})=>{an(t.current,KA),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var p0={};function XA(n,e,t){!e&&!p0[n]&&(p0[n]=!0,an(!1,t))}var g0={};function y0(n,e){!n&&!g0[e]&&(g0[e]=!0,console.warn(e))}var sD="useOptimistic",_0=WI[sD],aD=()=>{};function oD(n){return _0?_0(n):[n,aD]}function lD(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&an(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:O.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&an(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:O.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&an(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:O.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var uD=["HydrateFallback","hydrateFallbackElement"],cD=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function hD({router:n,flushSync:e,onError:t,unstable_useTransitions:i}){i=LN()||i;let[l,c]=O.useState(n.state),[f,m]=oD(l),[p,y]=O.useState(),[v,E]=O.useState({isTransitioning:!1}),[w,D]=O.useState(),[V,M]=O.useState(),[U,j]=O.useState(),q=O.useRef(new Map),Q=O.useCallback((C,{deletedFetchers:I,newErrors:k,flushSync:P,viewTransitionOpts:L})=>{k&&t&&Object.values(k).forEach(ae=>{var Ee;return t(ae,{location:C.location,params:((Ee=C.matches[0])==null?void 0:Ee.params)??{},unstable_pattern:Qc(C.matches)})}),C.fetchers.forEach((ae,Ee)=>{ae.data!==void 0&&q.current.set(Ee,ae.data)}),I.forEach(ae=>q.current.delete(ae)),y0(P===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let x=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(y0(L==null||x,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!L||!x){e&&P?e(()=>c(C)):i===!1?c(C):O.startTransition(()=>{i===!0&&m(ae=>v0(ae,C)),c(C)});return}if(e&&P){e(()=>{V&&(w==null||w.resolve(),V.skipTransition()),E({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let ae=n.window.document.startViewTransition(()=>{e(()=>c(C))});ae.finished.finally(()=>{e(()=>{D(void 0),M(void 0),y(void 0),E({isTransitioning:!1})})}),e(()=>M(ae));return}V?(w==null||w.resolve(),V.skipTransition(),j({state:C,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(y(C),E({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[n.window,e,V,w,i,m,t]);O.useLayoutEffect(()=>n.subscribe(Q),[n,Q]),O.useEffect(()=>{v.isTransitioning&&!v.flushSync&&D(new cD)},[v]),O.useEffect(()=>{if(w&&p&&n.window){let C=p,I=w.promise,k=n.window.document.startViewTransition(async()=>{i===!1?c(C):O.startTransition(()=>{i===!0&&m(P=>v0(P,C)),c(C)}),await I});k.finished.finally(()=>{D(void 0),M(void 0),y(void 0),E({isTransitioning:!1})}),M(k)}},[p,w,n.window,i,m]),O.useEffect(()=>{w&&p&&f.location.key===p.location.key&&w.resolve()},[w,V,f.location,p]),O.useEffect(()=>{!v.isTransitioning&&U&&(y(U.state),E({isTransitioning:!0,flushSync:!1,currentLocation:U.currentLocation,nextLocation:U.nextLocation}),j(void 0))},[v.isTransitioning,U]);let W=O.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:C=>n.navigate(C),push:(C,I,k)=>n.navigate(C,{state:I,preventScrollReset:k==null?void 0:k.preventScrollReset}),replace:(C,I,k)=>n.navigate(C,{replace:!0,state:I,preventScrollReset:k==null?void 0:k.preventScrollReset})}),[n]),K=n.basename||"/",S=O.useMemo(()=>({router:n,navigator:W,static:!1,basename:K,onError:t}),[n,W,K,t]);return O.createElement(O.Fragment,null,O.createElement(Do.Provider,{value:S},O.createElement(Xc.Provider,{value:f},O.createElement(GA.Provider,{value:q.current},O.createElement(i_.Provider,{value:v},O.createElement(mD,{basename:K,location:f.location,navigationType:f.historyAction,navigator:W,unstable_useTransitions:i},O.createElement(fD,{routes:n.routes,future:n.future,state:f,onError:t})))))),null)}function v0(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var fD=O.memo(dD);function dD({routes:n,future:e,state:t,onError:i}){return KN(n,void 0,t,i,e)}function Ea({to:n,replace:e,state:t,relative:i}){at(nu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=O.useContext(Br);an(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=O.useContext(si),{pathname:c}=ai(),f=Oo(),m=Yd(n,Kd(l),c,i==="path"),p=JSON.stringify(m);return O.useEffect(()=>{f(JSON.parse(p),{replace:e,state:t,relative:i})},[f,p,i,e,t]),null}function WA(n){return $N(n.context)}function mD({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){at(!nu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),m=O.useMemo(()=>({basename:f,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[f,a,l,c]);typeof t=="string"&&(t=Ns(t));let{pathname:p="/",search:y="",hash:v="",state:E=null,key:w="default"}=t,D=O.useMemo(()=>{let V=ii(p,f);return V==null?null:{location:{pathname:V,search:y,hash:v,state:E,key:w},navigationType:i}},[f,p,y,v,E,w,i]);return an(D!=null,`<Router basename="${f}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:O.createElement(Br.Provider,{value:m},O.createElement(Qd.Provider,{children:e,value:D}))}var Qf="get",Xf="application/x-www-form-urlencoded";function Xd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function pD(n){return Xd(n)&&n.tagName.toLowerCase()==="button"}function gD(n){return Xd(n)&&n.tagName.toLowerCase()==="form"}function yD(n){return Xd(n)&&n.tagName.toLowerCase()==="input"}function _D(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function vD(n,e){return n.button===0&&(!e||e==="_self")&&!_D(n)}function vy(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let i=n[t];return e.concat(Array.isArray(i)?i.map(a=>[t,a]):[[t,i]])},[]))}function ED(n,e){let t=vy(n);return e&&e.forEach((i,a)=>{t.has(a)||e.getAll(a).forEach(l=>{t.append(a,l)})}),t}var kf=null;function TD(){if(kf===null)try{new FormData(document.createElement("form"),0),kf=!1}catch{kf=!0}return kf}var bD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $g(n){return n!=null&&!bD.has(n)?(an(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xf}"`),null):n}function SD(n,e){let t,i,a,l,c;if(gD(n)){let f=n.getAttribute("action");i=f?ii(f,e):null,t=n.getAttribute("method")||Qf,a=$g(n.getAttribute("enctype"))||Xf,l=new FormData(n)}else if(pD(n)||yD(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?ii(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Qf,a=$g(n.getAttribute("formenctype"))||$g(f.getAttribute("enctype"))||Xf,l=new FormData(f,n),!TD()){let{name:p,type:y,value:v}=n;if(y==="image"){let E=p?`${p}.`:"";l.append(`${E}x`,"0"),l.append(`${E}y`,"0")}else p&&l.append(p,v)}}else{if(Xd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qf,i=null,a=Xf,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function l_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function AD(n,e,t,i){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&ii(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function wD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function RD(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await wD(l,t);return c.links?c.links():[]}return[]}));return DD(i.flat(1).filter(CD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function E0(n,e,t,i,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,f=(m,p)=>{var y;return t[p].pathname!==m.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>c(m,p)||f(m,p)):l==="data"?e.filter((m,p)=>{var v;let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function ID(n,e,{includeHydrateFallback:t}={}){return xD(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function xD(n){return[...new Set(n)]}function ND(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function DD(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(ND(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function JA(){let n=O.useContext(Do);return l_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function OD(){let n=O.useContext(Xc);return l_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var u_=O.createContext(void 0);u_.displayName="FrameworkContext";function ZA(){let n=O.useContext(u_);return l_(n,"You must render this element inside a <HydratedRouter> element"),n}function MD(n,e){let t=O.useContext(u_),[i,a]=O.useState(!1),[l,c]=O.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,E=O.useRef(null);O.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let V=U=>{U.forEach(j=>{c(j.isIntersecting)})},M=new IntersectionObserver(V,{threshold:.5});return E.current&&M.observe(E.current),()=>{M.disconnect()}}},[n]),O.useEffect(()=>{if(i){let V=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(V)}}},[i]);let w=()=>{a(!0)},D=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,E,{}]:[l,E,{onFocus:uc(f,w),onBlur:uc(m,D),onMouseEnter:uc(p,w),onMouseLeave:uc(y,D),onTouchStart:uc(v,w)}]:[!1,E,{}]}function uc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function PD({page:n,...e}){let{router:t}=JA(),i=O.useMemo(()=>da(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?O.createElement(VD,{page:n,matches:i,...e}):null}function kD(n){let{manifest:e,routeModules:t}=ZA(),[i,a]=O.useState([]);return O.useEffect(()=>{let l=!1;return RD(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function VD({page:n,matches:e,...t}){let i=ai(),{future:a,manifest:l,routeModules:c}=ZA(),{basename:f}=JA(),{loaderData:m,matches:p}=OD(),y=O.useMemo(()=>E0(n,e,p,l,i,"data"),[n,e,p,l,i]),v=O.useMemo(()=>E0(n,e,p,l,i,"assets"),[n,e,p,l,i]),E=O.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let V=new Set,M=!1;if(e.forEach(j=>{var Q;let q=l.routes[j.route.id];!q||!q.hasLoader||(!y.some(W=>W.route.id===j.route.id)&&j.route.id in m&&((Q=c[j.route.id])!=null&&Q.shouldRevalidate)||q.hasClientLoader?M=!0:V.add(j.route.id))}),V.size===0)return[];let U=AD(n,f,a.unstable_trailingSlashAwareDataRequests,"data");return M&&V.size>0&&U.searchParams.set("_routes",e.filter(j=>V.has(j.route.id)).map(j=>j.route.id).join(",")),[U.pathname+U.search]},[f,a.unstable_trailingSlashAwareDataRequests,m,i,l,y,e,n,c]),w=O.useMemo(()=>ID(v,l),[v,l]),D=kD(v);return O.createElement(O.Fragment,null,E.map(V=>O.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),w.map(V=>O.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),D.map(({key:V,link:M})=>O.createElement("link",{key:V,nonce:t.nonce,...M,crossOrigin:M.crossOrigin??t.crossOrigin})))}function LD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var jD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jD&&(window.__reactRouterVersion="7.13.0")}catch{}function UD(n,e){return fN({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:Ix({window:e==null?void 0:e.window}),hydrationData:zD(),routes:n,mapRouteProperties:lD,hydrationRouteProperties:uD,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function zD(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:BD(n.errors)}),n}function BD(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,a]of e)if(a&&a.__type==="RouteErrorResponse")t[i]=new Yc(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let l=window[a.__subType];if(typeof l=="function")try{let c=new l(a.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let l=new Error(a.message);l.stack="",t[i]=l}}else t[i]=a;return t}var ew=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tw=O.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:f,target:m,to:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:E,...w},D){let{basename:V,unstable_useTransitions:M}=O.useContext(Br),U=typeof p=="string"&&ew.test(p),j=OA(p,V);p=j.to;let q=FN(p,{relative:a}),[Q,W,K]=MD(i,w),S=GD(p,{replace:c,state:f,target:m,preventScrollReset:y,relative:a,viewTransition:v,unstable_defaultShouldRevalidate:E,unstable_useTransitions:M});function C(k){e&&e(k),k.defaultPrevented||S(k)}let I=O.createElement("a",{...w,...K,href:j.absoluteURL||q,onClick:j.isExternal||l?e:C,ref:LD(D,W),target:m,"data-discover":!U&&t==="render"?"true":void 0});return Q&&!U?O.createElement(O.Fragment,null,I,O.createElement(PD,{page:q})):I});tw.displayName="Link";var HD=O.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:f,children:m,...p},y){let v=Wc(c,{relative:p.relative}),E=ai(),w=O.useContext(Xc),{navigator:D,basename:V}=O.useContext(Br),M=w!=null&&WD(v)&&f===!0,U=D.encodeLocation?D.encodeLocation(v).pathname:v.pathname,j=E.pathname,q=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(j=j.toLowerCase(),q=q?q.toLowerCase():null,U=U.toLowerCase()),q&&V&&(q=ii(q,V)||q);const Q=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let W=j===U||!a&&j.startsWith(U)&&j.charAt(Q)==="/",K=q!=null&&(q===U||!a&&q.startsWith(U)&&q.charAt(U.length)==="/"),S={isActive:W,isPending:K,isTransitioning:M},C=W?e:void 0,I;typeof i=="function"?I=i(S):I=[i,W?"active":null,K?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(S):l;return O.createElement(tw,{...p,"aria-current":C,className:I,ref:y,style:k,to:c,viewTransition:f},typeof m=="function"?m(S):m)});HD.displayName="NavLink";var FD=O.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=Qf,action:f,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:E,...w},D)=>{let{unstable_useTransitions:V}=O.useContext(Br),M=QD(),U=XD(f,{relative:p}),j=c.toLowerCase()==="get"?"get":"post",q=typeof f=="string"&&ew.test(f),Q=W=>{if(m&&m(W),W.defaultPrevented)return;W.preventDefault();let K=W.nativeEvent.submitter,S=(K==null?void 0:K.getAttribute("formmethod"))||c,C=()=>M(K||W.currentTarget,{fetcherKey:e,method:S,navigate:t,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:E});V&&t!==!1?O.startTransition(()=>C()):C()};return O.createElement("form",{ref:D,method:j,action:U,onSubmit:i?m:Q,...w,"data-discover":!q&&n==="render"?"true":void 0})});FD.displayName="Form";function qD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nw(n){let e=O.useContext(Do);return at(e,qD(n)),e}function GD(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let p=Oo(),y=ai(),v=Wc(n,{relative:l});return O.useCallback(E=>{if(vD(E,e)){E.preventDefault();let w=t!==void 0?t:Fi(y)===Fi(v),D=()=>p(n,{replace:w,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});m?O.startTransition(()=>D()):D()}},[y,p,v,t,i,e,n,a,l,c,f,m])}function $D(n){an(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=O.useRef(vy(n)),t=O.useRef(!1),i=ai(),a=O.useMemo(()=>ED(i.search,t.current?null:e.current),[i.search]),l=Oo(),c=O.useCallback((f,m)=>{const p=vy(typeof f=="function"?f(new URLSearchParams(a)):f);t.current=!0,l("?"+p,m)},[l,a]);return[a,c]}var KD=0,YD=()=>`__${String(++KD)}__`;function QD(){let{router:n}=nw("useSubmit"),{basename:e}=O.useContext(Br),t=nD(),i=n.fetch,a=n.navigate;return O.useCallback(async(l,c={})=>{let{action:f,method:m,encType:p,formData:y,body:v}=SD(l,e);if(c.navigate===!1){let E=c.fetcherKey||YD();await i(E,t,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:v,formMethod:c.method||m,formEncType:c.encType||p,flushSync:c.flushSync})}else await a(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:v,formMethod:c.method||m,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,e,t])}function XD(n,{relative:e}={}){let{basename:t}=O.useContext(Br),i=O.useContext(si);at(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Wc(n||".",{relative:e})},c=ai();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(y=>y==="")){f.delete("index"),m.filter(v=>v).forEach(v=>f.append("index",v));let y=f.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:ji([t,l.pathname])),Fi(l)}function WD(n,{relative:e}={}){let t=O.useContext(i_);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=nw("useViewTransitionState"),a=Wc(n,{relative:e});if(!t.isTransitioning)return!1;let l=ii(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=ii(t.nextLocation.pathname,i)||t.nextLocation.pathname;return yd(a.pathname,c)!=null||yd(a.pathname,l)!=null}var rw=bA();function JD(n){return O.createElement(hD,{flushSync:rw.flushSync,...n})}const ZD=O.createContext(void 0),Mn=()=>bx(),He=wx.withTypes(),e2=({children:n})=>{const e=He(t=>t.auth.loading);return b.jsx(ZD.Provider,{value:{isLoading:e},children:n})},t2=()=>{};var T0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},n2=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],f=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},sw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,f=c?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,y=l>>2,v=(l&3)<<4|f>>4;let E=(f&15)<<2|p>>6,w=p&63;m||(w=64,c||(E=64)),i.push(t[y],t[v],t[E],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):n2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||p==null||v==null)throw new r2;const E=l<<2|f>>4;if(i.push(E),p!==64){const w=f<<4&240|p>>2;if(i.push(w),v!==64){const D=p<<6&192|v;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class r2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i2=function(n){const e=iw(n);return sw.encodeByteArray(e,!0)},_d=function(n){return i2(n).replace(/\./g,"")},aw=function(n){try{return sw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=()=>s2().__FIREBASE_DEFAULTS__,o2=()=>{if(typeof process>"u"||typeof T0>"u")return;const n=T0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},l2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&aw(n[1]);return e&&JSON.parse(e)},Wd=()=>{try{return t2()||a2()||o2()||l2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ow=n=>{var e,t;return(t=(e=Wd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},u2=n=>{const e=ow(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},lw=()=>{var n;return(n=Wd())==null?void 0:n.config},uw=n=>{var e;return(e=Wd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[_d(JSON.stringify(t)),_d(JSON.stringify(c)),""].join(".")}const Tc={};function f2(){const n={prod:[],emulator:[]};for(const e of Object.keys(Tc))Tc[e]?n.emulator.push(e):n.prod.push(e);return n}function d2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let b0=!1;function hw(n,e){if(typeof window>"u"||typeof document>"u"||!ru(window.location.host)||Tc[n]===e||Tc[n]||b0)return;Tc[n]=e;function t(E){return`__firebase__banner__${E}`}const i="__firebase__banner",l=f2().prod.length>0;function c(){const E=document.getElementById(i);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function m(E,w){E.setAttribute("width","24"),E.setAttribute("id",w),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{b0=!0,c()},E}function y(E,w){E.setAttribute("id",w),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=d2(i),w=t("text"),D=document.getElementById(w)||document.createElement("span"),V=t("learnmore"),M=document.getElementById(V)||document.createElement("a"),U=t("preprendIcon"),j=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const q=E.element;f(q),y(M,V);const Q=p();m(j,U),q.append(j,D,M,Q),document.body.appendChild(q)}l?(D.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function m2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zn())}function p2(){var e;const n=(e=Wd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function v2(){const n=Zn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function E2(){return!p2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T2(){try{return typeof indexedDB=="object"}catch{return!1}}function b2(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="FirebaseError";class Ds extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=S2,Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jc.prototype.create)}}class Jc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?A2(l,i):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Ds(a,f,i)}}function A2(n,e){return n.replace(w2,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const w2=/\{\$([^}]+)}/g;function C2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ao(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(S0(l)&&S0(c)){if(!Ao(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function S0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function R2(n,e){const t=new I2(n,e);return t.subscribe.bind(t)}class I2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");x2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Kg),a.error===void 0&&(a.error=Kg),a.complete===void 0&&(a.complete=Kg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function x2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){return n&&n._delegate?n._delegate:n}class wo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new c2;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O2(e))try{this.getOrInitializeService({instanceIdentifier:po})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=po){return this.instances.has(e)}getOptions(e=po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:D2(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=po){return this.component?this.component.multipleInstances?e:po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D2(n){return n===po?void 0:n}function O2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new N2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(dt||(dt={}));const P2={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},k2=dt.INFO,V2={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},L2=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=V2[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c_{constructor(e){this.name=e,this._logLevel=k2,this._logHandler=L2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?P2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const j2=(n,e)=>e.some(t=>n instanceof t);let A0,w0;function U2(){return A0||(A0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function z2(){return w0||(w0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fw=new WeakMap,Ey=new WeakMap,dw=new WeakMap,Yg=new WeakMap,h_=new WeakMap;function B2(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ta(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&fw.set(t,n)}).catch(()=>{}),h_.set(e,n),e}function H2(n){if(Ey.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ey.set(n,e)}let Ty={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ey.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ta(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function F2(n){Ty=n(Ty)}function q2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Qg(this),e,...t);return dw.set(i,e.sort?e.sort():[e]),Ta(i)}:z2().includes(n)?function(...e){return n.apply(Qg(this),e),Ta(fw.get(this))}:function(...e){return Ta(n.apply(Qg(this),e))}}function G2(n){return typeof n=="function"?q2(n):(n instanceof IDBTransaction&&H2(n),j2(n,U2())?new Proxy(n,Ty):n)}function Ta(n){if(n instanceof IDBRequest)return B2(n);if(Yg.has(n))return Yg.get(n);const e=G2(n);return e!==n&&(Yg.set(n,e),h_.set(e,n)),e}const Qg=n=>h_.get(n);function $2(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),f=Ta(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Ta(c.result),m.oldVersion,m.newVersion,Ta(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const K2=["get","getKey","getAll","getAllKeys","count"],Y2=["put","add","delete","clear"],Xg=new Map;function C0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Xg.get(e))return Xg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=Y2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||K2.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),a&&m.done]))[0]};return Xg.set(e,l),l}F2(n=>({...n,get:(e,t,i)=>C0(e,t)||n.get(e,t,i),has:(e,t)=>!!C0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(X2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function X2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const by="@firebase/app",R0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new c_("@firebase/app"),W2="@firebase/app-compat",J2="@firebase/analytics-compat",Z2="@firebase/analytics",eO="@firebase/app-check-compat",tO="@firebase/app-check",nO="@firebase/auth",rO="@firebase/auth-compat",iO="@firebase/database",sO="@firebase/data-connect",aO="@firebase/database-compat",oO="@firebase/functions",lO="@firebase/functions-compat",uO="@firebase/installations",cO="@firebase/installations-compat",hO="@firebase/messaging",fO="@firebase/messaging-compat",dO="@firebase/performance",mO="@firebase/performance-compat",pO="@firebase/remote-config",gO="@firebase/remote-config-compat",yO="@firebase/storage",_O="@firebase/storage-compat",vO="@firebase/firestore",EO="@firebase/ai",TO="@firebase/firestore-compat",bO="firebase",SO="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="[DEFAULT]",AO={[by]:"fire-core",[W2]:"fire-core-compat",[Z2]:"fire-analytics",[J2]:"fire-analytics-compat",[tO]:"fire-app-check",[eO]:"fire-app-check-compat",[nO]:"fire-auth",[rO]:"fire-auth-compat",[iO]:"fire-rtdb",[sO]:"fire-data-connect",[aO]:"fire-rtdb-compat",[oO]:"fire-fn",[lO]:"fire-fn-compat",[uO]:"fire-iid",[cO]:"fire-iid-compat",[hO]:"fire-fcm",[fO]:"fire-fcm-compat",[dO]:"fire-perf",[mO]:"fire-perf-compat",[pO]:"fire-rc",[gO]:"fire-rc-compat",[yO]:"fire-gcs",[_O]:"fire-gcs-compat",[vO]:"fire-fst",[TO]:"fire-fst-compat",[EO]:"fire-vertex","fire-js":"fire-js",[bO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new Map,wO=new Map,Ay=new Map;function I0(n,e){try{n.container.addComponent(e)}catch(t){Ss.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Gl(n){const e=n.name;if(Ay.has(e))return Ss.debug(`There were multiple attempts to register component ${e}.`),!1;Ay.set(e,n);for(const t of vd.values())I0(t,n);for(const t of wO.values())I0(t,n);return!0}function f_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function pi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ba=new Jc("app","Firebase",CO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ba.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=SO;function mw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Sy,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw ba.create("bad-app-name",{appName:String(a)});if(t||(t=lw()),!t)throw ba.create("no-options");const l=vd.get(a);if(l){if(Ao(t,l.options)&&Ao(i,l.config))return l;throw ba.create("duplicate-app",{appName:a})}const c=new M2(a);for(const m of Ay.values())c.addComponent(m);const f=new RO(t,i,c);return vd.set(a,f),f}function pw(n=Sy){const e=vd.get(n);if(!e&&n===Sy&&lw())return mw();if(!e)throw ba.create("no-app",{appName:n});return e}function Sa(n,e,t){let i=AO[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ss.warn(c.join(" "));return}Gl(new wo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="firebase-heartbeat-database",xO=1,Pc="firebase-heartbeat-store";let Wg=null;function gw(){return Wg||(Wg=$2(IO,xO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ba.create("idb-open",{originalErrorMessage:n.message})})),Wg}async function NO(n){try{const t=(await gw()).transaction(Pc),i=await t.objectStore(Pc).get(yw(n));return await t.done,i}catch(e){if(e instanceof Ds)Ss.warn(e.message);else{const t=ba.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ss.warn(t.message)}}}async function x0(n,e){try{const i=(await gw()).transaction(Pc,"readwrite");await i.objectStore(Pc).put(e,yw(n)),await i.done}catch(t){if(t instanceof Ds)Ss.warn(t.message);else{const i=ba.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ss.warn(i.message)}}}function yw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=1024,OO=30;class MO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=N0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>OO){const c=VO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ss.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=N0(),{heartbeatsToSend:i,unsentEntries:a}=PO(this._heartbeatsCache.heartbeats),l=_d(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ss.warn(t),""}}}function N0(){return new Date().toISOString().substring(0,10)}function PO(n,e=DO){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),D0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),D0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class kO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T2()?b2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await NO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return x0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return x0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function D0(n){return _d(JSON.stringify({version:2,heartbeats:n})).length}function VO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(n){Gl(new wo("platform-logger",e=>new Q2(e),"PRIVATE")),Gl(new wo("heartbeat",e=>new MO(e),"PRIVATE")),Sa(by,R0,n),Sa(by,R0,"esm2020"),Sa("fire-js","")}LO("");var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Aa,_w;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,C){function I(){}I.prototype=C.prototype,S.F=C.prototype,S.prototype=new I,S.prototype.constructor=S,S.D=function(k,P,L){for(var x=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)x[ae-2]=arguments[ae];return C.prototype[P].apply(k,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,C,I){I||(I=0);const k=Array(16);if(typeof C=="string")for(var P=0;P<16;++P)k[P]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(P=0;P<16;++P)k[P]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=S.g[0],I=S.g[1],P=S.g[2];let L=S.g[3],x;x=C+(L^I&(P^L))+k[0]+3614090360&4294967295,C=I+(x<<7&4294967295|x>>>25),x=L+(P^C&(I^P))+k[1]+3905402710&4294967295,L=C+(x<<12&4294967295|x>>>20),x=P+(I^L&(C^I))+k[2]+606105819&4294967295,P=L+(x<<17&4294967295|x>>>15),x=I+(C^P&(L^C))+k[3]+3250441966&4294967295,I=P+(x<<22&4294967295|x>>>10),x=C+(L^I&(P^L))+k[4]+4118548399&4294967295,C=I+(x<<7&4294967295|x>>>25),x=L+(P^C&(I^P))+k[5]+1200080426&4294967295,L=C+(x<<12&4294967295|x>>>20),x=P+(I^L&(C^I))+k[6]+2821735955&4294967295,P=L+(x<<17&4294967295|x>>>15),x=I+(C^P&(L^C))+k[7]+4249261313&4294967295,I=P+(x<<22&4294967295|x>>>10),x=C+(L^I&(P^L))+k[8]+1770035416&4294967295,C=I+(x<<7&4294967295|x>>>25),x=L+(P^C&(I^P))+k[9]+2336552879&4294967295,L=C+(x<<12&4294967295|x>>>20),x=P+(I^L&(C^I))+k[10]+4294925233&4294967295,P=L+(x<<17&4294967295|x>>>15),x=I+(C^P&(L^C))+k[11]+2304563134&4294967295,I=P+(x<<22&4294967295|x>>>10),x=C+(L^I&(P^L))+k[12]+1804603682&4294967295,C=I+(x<<7&4294967295|x>>>25),x=L+(P^C&(I^P))+k[13]+4254626195&4294967295,L=C+(x<<12&4294967295|x>>>20),x=P+(I^L&(C^I))+k[14]+2792965006&4294967295,P=L+(x<<17&4294967295|x>>>15),x=I+(C^P&(L^C))+k[15]+1236535329&4294967295,I=P+(x<<22&4294967295|x>>>10),x=C+(P^L&(I^P))+k[1]+4129170786&4294967295,C=I+(x<<5&4294967295|x>>>27),x=L+(I^P&(C^I))+k[6]+3225465664&4294967295,L=C+(x<<9&4294967295|x>>>23),x=P+(C^I&(L^C))+k[11]+643717713&4294967295,P=L+(x<<14&4294967295|x>>>18),x=I+(L^C&(P^L))+k[0]+3921069994&4294967295,I=P+(x<<20&4294967295|x>>>12),x=C+(P^L&(I^P))+k[5]+3593408605&4294967295,C=I+(x<<5&4294967295|x>>>27),x=L+(I^P&(C^I))+k[10]+38016083&4294967295,L=C+(x<<9&4294967295|x>>>23),x=P+(C^I&(L^C))+k[15]+3634488961&4294967295,P=L+(x<<14&4294967295|x>>>18),x=I+(L^C&(P^L))+k[4]+3889429448&4294967295,I=P+(x<<20&4294967295|x>>>12),x=C+(P^L&(I^P))+k[9]+568446438&4294967295,C=I+(x<<5&4294967295|x>>>27),x=L+(I^P&(C^I))+k[14]+3275163606&4294967295,L=C+(x<<9&4294967295|x>>>23),x=P+(C^I&(L^C))+k[3]+4107603335&4294967295,P=L+(x<<14&4294967295|x>>>18),x=I+(L^C&(P^L))+k[8]+1163531501&4294967295,I=P+(x<<20&4294967295|x>>>12),x=C+(P^L&(I^P))+k[13]+2850285829&4294967295,C=I+(x<<5&4294967295|x>>>27),x=L+(I^P&(C^I))+k[2]+4243563512&4294967295,L=C+(x<<9&4294967295|x>>>23),x=P+(C^I&(L^C))+k[7]+1735328473&4294967295,P=L+(x<<14&4294967295|x>>>18),x=I+(L^C&(P^L))+k[12]+2368359562&4294967295,I=P+(x<<20&4294967295|x>>>12),x=C+(I^P^L)+k[5]+4294588738&4294967295,C=I+(x<<4&4294967295|x>>>28),x=L+(C^I^P)+k[8]+2272392833&4294967295,L=C+(x<<11&4294967295|x>>>21),x=P+(L^C^I)+k[11]+1839030562&4294967295,P=L+(x<<16&4294967295|x>>>16),x=I+(P^L^C)+k[14]+4259657740&4294967295,I=P+(x<<23&4294967295|x>>>9),x=C+(I^P^L)+k[1]+2763975236&4294967295,C=I+(x<<4&4294967295|x>>>28),x=L+(C^I^P)+k[4]+1272893353&4294967295,L=C+(x<<11&4294967295|x>>>21),x=P+(L^C^I)+k[7]+4139469664&4294967295,P=L+(x<<16&4294967295|x>>>16),x=I+(P^L^C)+k[10]+3200236656&4294967295,I=P+(x<<23&4294967295|x>>>9),x=C+(I^P^L)+k[13]+681279174&4294967295,C=I+(x<<4&4294967295|x>>>28),x=L+(C^I^P)+k[0]+3936430074&4294967295,L=C+(x<<11&4294967295|x>>>21),x=P+(L^C^I)+k[3]+3572445317&4294967295,P=L+(x<<16&4294967295|x>>>16),x=I+(P^L^C)+k[6]+76029189&4294967295,I=P+(x<<23&4294967295|x>>>9),x=C+(I^P^L)+k[9]+3654602809&4294967295,C=I+(x<<4&4294967295|x>>>28),x=L+(C^I^P)+k[12]+3873151461&4294967295,L=C+(x<<11&4294967295|x>>>21),x=P+(L^C^I)+k[15]+530742520&4294967295,P=L+(x<<16&4294967295|x>>>16),x=I+(P^L^C)+k[2]+3299628645&4294967295,I=P+(x<<23&4294967295|x>>>9),x=C+(P^(I|~L))+k[0]+4096336452&4294967295,C=I+(x<<6&4294967295|x>>>26),x=L+(I^(C|~P))+k[7]+1126891415&4294967295,L=C+(x<<10&4294967295|x>>>22),x=P+(C^(L|~I))+k[14]+2878612391&4294967295,P=L+(x<<15&4294967295|x>>>17),x=I+(L^(P|~C))+k[5]+4237533241&4294967295,I=P+(x<<21&4294967295|x>>>11),x=C+(P^(I|~L))+k[12]+1700485571&4294967295,C=I+(x<<6&4294967295|x>>>26),x=L+(I^(C|~P))+k[3]+2399980690&4294967295,L=C+(x<<10&4294967295|x>>>22),x=P+(C^(L|~I))+k[10]+4293915773&4294967295,P=L+(x<<15&4294967295|x>>>17),x=I+(L^(P|~C))+k[1]+2240044497&4294967295,I=P+(x<<21&4294967295|x>>>11),x=C+(P^(I|~L))+k[8]+1873313359&4294967295,C=I+(x<<6&4294967295|x>>>26),x=L+(I^(C|~P))+k[15]+4264355552&4294967295,L=C+(x<<10&4294967295|x>>>22),x=P+(C^(L|~I))+k[6]+2734768916&4294967295,P=L+(x<<15&4294967295|x>>>17),x=I+(L^(P|~C))+k[13]+1309151649&4294967295,I=P+(x<<21&4294967295|x>>>11),x=C+(P^(I|~L))+k[4]+4149444226&4294967295,C=I+(x<<6&4294967295|x>>>26),x=L+(I^(C|~P))+k[11]+3174756917&4294967295,L=C+(x<<10&4294967295|x>>>22),x=P+(C^(L|~I))+k[2]+718787259&4294967295,P=L+(x<<15&4294967295|x>>>17),x=I+(L^(P|~C))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(P+(x<<21&4294967295|x>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+L&4294967295}i.prototype.v=function(S,C){C===void 0&&(C=S.length);const I=C-this.blockSize,k=this.C;let P=this.h,L=0;for(;L<C;){if(P==0)for(;L<=I;)a(this,S,L),L+=this.blockSize;if(typeof S=="string"){for(;L<C;)if(k[P++]=S.charCodeAt(L++),P==this.blockSize){a(this,k),P=0;break}}else for(;L<C;)if(k[P++]=S[L++],P==this.blockSize){a(this,k),P=0;break}}this.h=P,this.o+=C},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;C=this.o*8;for(var I=S.length-8;I<S.length;++I)S[I]=C&255,C/=256;for(this.v(S),S=Array(16),C=0,I=0;I<4;++I)for(let k=0;k<32;k+=8)S[C++]=this.g[I]>>>k&255;return S};function l(S,C){var I=f;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=C(S)}function c(S,C){this.h=C;const I=[];let k=!0;for(let P=S.length-1;P>=0;P--){const L=S[P]|0;k&&L==C||(I[P]=L,k=!1)}this.g=I}var f={};function m(S){return-128<=S&&S<128?l(S,function(C){return new c([C|0],C<0?-1:0)}):new c([S|0],S<0?-1:0)}function p(S){if(isNaN(S)||!isFinite(S))return v;if(S<0)return M(p(-S));const C=[];let I=1;for(let k=0;S>=I;k++)C[k]=S/I|0,I*=4294967296;return new c(C,0)}function y(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return M(y(S.substring(1),C));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(C,8));let k=v;for(let L=0;L<S.length;L+=8){var P=Math.min(8,S.length-L);const x=parseInt(S.substring(L,L+P),C);P<8?(P=p(Math.pow(C,P)),k=k.j(P).add(p(x))):(k=k.j(I),k=k.add(p(x)))}return k}var v=m(0),E=m(1),w=m(16777216);n=c.prototype,n.m=function(){if(V(this))return-M(this).m();let S=0,C=1;for(let I=0;I<this.g.length;I++){const k=this.i(I);S+=(k>=0?k:4294967296+k)*C,C*=4294967296}return S},n.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(D(this))return"0";if(V(this))return"-"+M(this).toString(S);const C=p(Math.pow(S,6));var I=this;let k="";for(;;){const P=Q(I,C).g;I=U(I,P.j(C));let L=((I.g.length>0?I.g[0]:I.h)>>>0).toString(S);if(I=P,D(I))return L+k;for(;L.length<6;)L="0"+L;k=L+k}},n.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function D(S){if(S.h!=0)return!1;for(let C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function V(S){return S.h==-1}n.l=function(S){return S=U(this,S),V(S)?-1:D(S)?0:1};function M(S){const C=S.g.length,I=[];for(let k=0;k<C;k++)I[k]=~S.g[k];return new c(I,~S.h).add(E)}n.abs=function(){return V(this)?M(this):this},n.add=function(S){const C=Math.max(this.g.length,S.g.length),I=[];let k=0;for(let P=0;P<=C;P++){let L=k+(this.i(P)&65535)+(S.i(P)&65535),x=(L>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);k=x>>>16,L&=65535,x&=65535,I[P]=x<<16|L}return new c(I,I[I.length-1]&-2147483648?-1:0)};function U(S,C){return S.add(M(C))}n.j=function(S){if(D(this)||D(S))return v;if(V(this))return V(S)?M(this).j(M(S)):M(M(this).j(S));if(V(S))return M(this.j(M(S)));if(this.l(w)<0&&S.l(w)<0)return p(this.m()*S.m());const C=this.g.length+S.g.length,I=[];for(var k=0;k<2*C;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<S.g.length;P++){const L=this.i(k)>>>16,x=this.i(k)&65535,ae=S.i(P)>>>16,Ee=S.i(P)&65535;I[2*k+2*P]+=x*Ee,j(I,2*k+2*P),I[2*k+2*P+1]+=L*Ee,j(I,2*k+2*P+1),I[2*k+2*P+1]+=x*ae,j(I,2*k+2*P+1),I[2*k+2*P+2]+=L*ae,j(I,2*k+2*P+2)}for(S=0;S<C;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=C;S<2*C;S++)I[S]=0;return new c(I,0)};function j(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function q(S,C){this.g=S,this.h=C}function Q(S,C){if(D(C))throw Error("division by zero");if(D(S))return new q(v,v);if(V(S))return C=Q(M(S),C),new q(M(C.g),M(C.h));if(V(C))return C=Q(S,M(C)),new q(M(C.g),C.h);if(S.g.length>30){if(V(S)||V(C))throw Error("slowDivide_ only works with positive integers.");for(var I=E,k=C;k.l(S)<=0;)I=W(I),k=W(k);var P=K(I,1),L=K(k,1);for(k=K(k,2),I=K(I,2);!D(k);){var x=L.add(k);x.l(S)<=0&&(P=P.add(I),L=x),k=K(k,1),I=K(I,1)}return C=U(S,P.j(C)),new q(P,C)}for(P=v;S.l(C)>=0;){for(I=Math.max(1,Math.floor(S.m()/C.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),L=p(I),x=L.j(C);V(x)||x.l(S)>0;)I-=k,L=p(I),x=L.j(C);D(L)&&(L=E),P=P.add(L),S=U(S,x)}return new q(P,S)}n.B=function(S){return Q(this,S).h},n.and=function(S){const C=Math.max(this.g.length,S.g.length),I=[];for(let k=0;k<C;k++)I[k]=this.i(k)&S.i(k);return new c(I,this.h&S.h)},n.or=function(S){const C=Math.max(this.g.length,S.g.length),I=[];for(let k=0;k<C;k++)I[k]=this.i(k)|S.i(k);return new c(I,this.h|S.h)},n.xor=function(S){const C=Math.max(this.g.length,S.g.length),I=[];for(let k=0;k<C;k++)I[k]=this.i(k)^S.i(k);return new c(I,this.h^S.h)};function W(S){const C=S.g.length+1,I=[];for(let k=0;k<C;k++)I[k]=S.i(k)<<1|S.i(k-1)>>>31;return new c(I,S.h)}function K(S,C){const I=C>>5;C%=32;const k=S.g.length-I,P=[];for(let L=0;L<k;L++)P[L]=C>0?S.i(L+I)>>>C|S.i(L+I+1)<<32-C:S.i(L+I);return new c(P,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,_w=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Aa=c}).apply(typeof O0<"u"?O0:typeof self<"u"?self:typeof window<"u"?window:{});var Vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vw,pc,Ew,Wf,wy,Tw,bw,Sw;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vf=="object"&&Vf];for(var _=0;_<h.length;++_){var A=h[_];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=t(this);function a(h,_){if(_)e:{var A=i;h=h.split(".");for(var N=0;N<h.length-1;N++){var X=h[N];if(!(X in A))break e;A=A[X]}h=h[h.length-1],N=A[h],_=_(N),_!=N&&_!=null&&e(A,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var A=[],N;for(N in _)Object.prototype.hasOwnProperty.call(_,N)&&A.push([N,_[N]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,A){return h.call.apply(h.bind,arguments)}function p(h,_,A){return p=m,p.apply(null,arguments)}function y(h,_){var A=Array.prototype.slice.call(arguments,1);return function(){var N=A.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function v(h,_){function A(){}A.prototype=_.prototype,h.Z=_.prototype,h.prototype=new A,h.prototype.constructor=h,h.Ob=function(N,X,ne){for(var Te=Array(arguments.length-2),et=2;et<arguments.length;et++)Te[et-2]=arguments[et];return _.prototype[X].apply(N,Te)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const _=h.length;if(_>0){const A=Array(_);for(let N=0;N<_;N++)A[N]=h[N];return A}return[]}function D(h,_){for(let N=1;N<arguments.length;N++){const X=arguments[N];var A=typeof X;if(A=A!="object"?A:X?Array.isArray(X)?"array":A:"null",A=="array"||A=="object"&&typeof X.length=="number"){A=h.length||0;const ne=X.length||0;h.length=A+ne;for(let Te=0;Te<ne;Te++)h[A+Te]=X[Te]}else h.push(X)}}class V{constructor(_,A){this.i=_,this.j=A,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function M(h){c.setTimeout(()=>{throw h},0)}function U(){var h=S;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class j{constructor(){this.h=this.g=null}add(_,A){const N=q.get();N.set(_,A),this.h?this.h.next=N:this.g=N,this.h=N}}var q=new V(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(_,A){this.h=_,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let W,K=!1,S=new j,C=()=>{const h=Promise.resolve(void 0);W=()=>{h.then(I)}};function I(){for(var h;h=U();){try{h.h.call(h.g)}catch(A){M(A)}var _=q;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}K=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const A=()=>{};c.addEventListener("test",A,_),c.removeEventListener("test",A,_)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function ae(h,_){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}v(ae,P),ae.prototype.init=function(h,_){const A=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(A=="mouseover"?_=h.fromElement:A=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),G=0;function ce(h,_,A,N,X){this.listener=h,this.proxy=null,this.src=_,this.type=A,this.capture=!!N,this.ha=X,this.key=++G,this.da=this.fa=!1}function me(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Me(h,_,A){for(const N in h)_.call(A,h[N],N,h)}function De(h,_){for(const A in h)_.call(void 0,h[A],A,h)}function H(h){const _={};for(const A in h)_[A]=h[A];return _}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(h,_){let A,N;for(let X=1;X<arguments.length;X++){N=arguments[X];for(A in N)h[A]=N[A];for(let ne=0;ne<ie.length;ne++)A=ie[ne],Object.prototype.hasOwnProperty.call(N,A)&&(h[A]=N[A])}}function ge(h){this.src=h,this.g={},this.h=0}ge.prototype.add=function(h,_,A,N,X){const ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);const Te=ye(h,_,N,X);return Te>-1?(_=h[Te],A||(_.fa=!1)):(_=new ce(_,this.src,ne,!!N,X),_.fa=A,h.push(_)),_};function le(h,_){const A=_.type;if(A in h.g){var N=h.g[A],X=Array.prototype.indexOf.call(N,_,void 0),ne;(ne=X>=0)&&Array.prototype.splice.call(N,X,1),ne&&(me(_),h.g[A].length==0&&(delete h.g[A],h.h--))}}function ye(h,_,A,N){for(let X=0;X<h.length;++X){const ne=h[X];if(!ne.da&&ne.listener==_&&ne.capture==!!A&&ne.ha==N)return X}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),Le={};function ze(h,_,A,N,X){if(Array.isArray(_)){for(let ne=0;ne<_.length;ne++)ze(h,_[ne],A,N,X);return null}return A=Be(A),h&&h[Ee]?h.J(_,A,f(N)?!!N.capture:!1,X):vt(h,_,A,!1,N,X)}function vt(h,_,A,N,X,ne){if(!_)throw Error("Invalid event type");const Te=f(X)?!!X.capture:!!X;let et=Pe(h);if(et||(h[Se]=et=new ge(h)),A=et.add(_,A,N,Te,ne),A.proxy)return A;if(N=St(),A.proxy=N,N.src=h,N.listener=A,h.addEventListener)L||(X=Te),X===void 0&&(X=!1),h.addEventListener(_.toString(),N,X);else if(h.attachEvent)h.attachEvent(Ht(_.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return A}function St(){function h(A){return _.call(h.src,h.listener,A)}const _=we;return h}function Qe(h,_,A,N,X){if(Array.isArray(_))for(var ne=0;ne<_.length;ne++)Qe(h,_[ne],A,N,X);else N=f(N)?!!N.capture:!!N,A=Be(A),h&&h[Ee]?(h=h.i,ne=String(_).toString(),ne in h.g&&(_=h.g[ne],A=ye(_,A,N,X),A>-1&&(me(_[A]),Array.prototype.splice.call(_,A,1),_.length==0&&(delete h.g[ne],h.h--)))):h&&(h=Pe(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ye(_,A,N,X)),(A=h>-1?_[h]:null)&&At(A))}function At(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Ee])le(_.i,h);else{var A=h.type,N=h.proxy;_.removeEventListener?_.removeEventListener(A,N,h.capture):_.detachEvent?_.detachEvent(Ht(A),N):_.addListener&&_.removeListener&&_.removeListener(N),(A=Pe(_))?(le(A,h),A.h==0&&(A.src=null,_[Se]=null)):me(h)}}}function Ht(h){return h in Le?Le[h]:Le[h]="on"+h}function we(h,_){if(h.da)h=!0;else{_=new ae(_,this);const A=h.listener,N=h.ha||h.src;h.fa&&At(h),h=A.call(N,_)}return h}function Pe(h){return h=h[Se],h instanceof ge?h:null}var $e="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(h){return typeof h=="function"?h:(h[$e]||(h[$e]=function(_){return h.handleEvent(_)}),h[$e])}function ke(){k.call(this),this.i=new ge(this),this.M=this,this.G=null}v(ke,k),ke.prototype[Ee]=!0,ke.prototype.removeEventListener=function(h,_,A,N){Qe(this,h,_,A,N)};function Ze(h,_){var A,N=h.G;if(N)for(A=[];N;N=N.G)A.push(N);if(h=h.M,N=_.type||_,typeof _=="string")_=new P(_,h);else if(_ instanceof P)_.target=_.target||h;else{var X=_;_=new P(N,h),pe(_,X)}X=!0;let ne,Te;if(A)for(Te=A.length-1;Te>=0;Te--)ne=_.g=A[Te],X=gt(ne,N,!0,_)&&X;if(ne=_.g=h,X=gt(ne,N,!0,_)&&X,X=gt(ne,N,!1,_)&&X,A)for(Te=0;Te<A.length;Te++)ne=_.g=A[Te],X=gt(ne,N,!1,_)&&X}ke.prototype.N=function(){if(ke.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const A=h.g[_];for(let N=0;N<A.length;N++)me(A[N]);delete h.g[_],h.h--}}this.G=null},ke.prototype.J=function(h,_,A,N){return this.i.add(String(h),_,!1,A,N)},ke.prototype.K=function(h,_,A,N){return this.i.add(String(h),_,!0,A,N)};function gt(h,_,A,N){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let X=!0;for(let ne=0;ne<_.length;++ne){const Te=_[ne];if(Te&&!Te.da&&Te.capture==A){const et=Te.listener,dn=Te.ha||Te.src;Te.fa&&le(h.i,Te),X=et.call(dn,N)!==!1&&X}}return X&&!N.defaultPrevented}function ln(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function Ot(h){h.g=ln(()=>{h.g=null,h.i&&(h.i=!1,Ot(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Et extends k{constructor(_,A){super(),this.m=_,this.l=A,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ot(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nn(h){k.call(this),this.h=h,this.g={}}v(nn,k);var lr=[];function ur(h){Me(h.g,function(_,A){this.g.hasOwnProperty(A)&&At(_)},h),h.g={}}nn.prototype.N=function(){nn.Z.N.call(this),ur(this)},nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var un=c.JSON.stringify,wr=c.JSON.parse,ja=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Lo(){}function Os(){}var Cr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ut(){P.call(this,"d")}v(Ut,P);function er(){P.call(this,"c")}v(er,P);var Wt={},Ua=null;function Ms(){return Ua=Ua||new ke}Wt.Ia="serverreachability";function za(h){P.call(this,Wt.Ia,h)}v(za,P);function tr(h){const _=Ms();Ze(_,new za(_))}Wt.STAT_EVENT="statevent";function bi(h,_){P.call(this,Wt.STAT_EVENT,h),this.stat=_}v(bi,P);function Jt(h){const _=Ms();Ze(_,new bi(_,h))}Wt.Ja="timingevent";function Fr(h,_){P.call(this,Wt.Ja,h),this.size=_}v(Fr,P);function Rr(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function Ir(){this.g=!0}Ir.prototype.ua=function(){this.g=!1};function jo(h,_,A,N,X,ne){h.info(function(){if(h.g)if(ne){var Te="",et=ne.split("&");for(let Ct=0;Ct<et.length;Ct++){var dn=et[Ct].split("=");if(dn.length>1){const Zt=dn[0];dn=dn[1];const $r=Zt.split("_");Te=$r.length>=2&&$r[1]=="type"?Te+(Zt+"="+dn+"&"):Te+(Zt+"=redacted&")}}}else Te=null;else Te=ne;return"XMLHTTP REQ ("+N+") [attempt "+X+"]: "+_+`
`+A+`
`+Te})}function $i(h,_,A,N,X,ne,Te){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+X+"]: "+_+`
`+A+`
`+ne+" "+Te})}function nr(h,_,A,N){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+du(h,A)+(N?" "+N:"")})}function Si(h,_){h.info(function(){return"TIMEOUT: "+_})}Ir.prototype.info=function(){};function du(h,_){if(!h.g)return _;if(!_)return null;try{const ne=JSON.parse(_);if(ne){for(h=0;h<ne.length;h++)if(Array.isArray(ne[h])){var A=ne[h];if(!(A.length<2)){var N=A[1];if(Array.isArray(N)&&!(N.length<1)){var X=N[0];if(X!="noop"&&X!="stop"&&X!="close")for(let Te=1;Te<N.length;Te++)N[Te]=""}}}}return un(ne)}catch{return _}}var Ki={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},z={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$;function ee(){}v(ee,Lo),ee.prototype.g=function(){return new XMLHttpRequest},$=new ee;function de(h){return encodeURIComponent(String(h))}function _e(h){var _=1;h=h.split(":");const A=[];for(;_>0&&h.length;)A.push(h.shift()),_--;return h.length&&A.push(h.join(":")),A}function Ce(h,_,A,N){this.j=h,this.i=_,this.l=A,this.S=N||1,this.V=new nn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}var ve={},be={};function Ie(h,_,A){h.M=1,h.A=Ba(Pt(_)),h.u=A,h.R=!0,qe(h,null)}function qe(h,_){h.F=Date.now(),Mt(h),h.B=Pt(h.A);var A=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),zo(A.i,"t",N),h.C=0,A=h.j.L,h.h=new xe,h.g=wh(h.j,A?_:null,!h.u),h.P>0&&(h.O=new Et(p(h.Y,h,h.g),h.P)),_=h.V,A=h.g,N=h.ba;var X="readystatechange";Array.isArray(X)||(X&&(lr[0]=X.toString()),X=lr);for(let ne=0;ne<X.length;ne++){const Te=ze(A,X[ne],N||_.handleEvent,!1,_.h||_);if(!Te)break;_.g[Te.key]=Te}_=h.J?H(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),tr(),jo(h.i,h.v,h.B,h.l,h.S,h.u)}Ce.prototype.ba=function(h){h=h.target;const _=this.O;_&&ui(h)==3?_.j():this.Y(h)},Ce.prototype.Y=function(h){try{if(h==this.g)e:{const et=ui(this.g),dn=this.g.ya(),Ct=this.g.ca();if(!(et<3)&&(et!=3||this.g&&(this.h.h||this.g.la()||Pn(this.g)))){this.K||et!=4||dn==7||(dn==8||Ct<=0?tr(3):tr(2)),Ft(this);var _=this.g.ca();this.X=_;var A=Ve(this);if(this.o=_==200,$i(this.i,this.v,this.B,this.l,this.S,et,_),this.o){if(this.U&&!this.L){t:{if(this.g){var N,X=this.g;if((N=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(N)){var ne=N;break t}}ne=null}if(h=ne)nr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Nn(this,h);else{this.o=!1,this.m=3,Jt(12),qt(this),nt(this);break e}}if(this.R){h=!0;let Zt;for(;!this.K&&this.C<A.length;)if(Zt=st(this,A),Zt==be){et==4&&(this.m=4,Jt(14),h=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==ve){this.m=4,Jt(15),nr(this.i,this.l,A,"[Invalid Chunk]"),h=!1;break}else nr(this.i,this.l,Zt,null),Nn(this,Zt);if(Ye(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||A.length!=0||this.h.h||(this.m=1,Jt(16),h=!1),this.o=this.o&&h,!h)nr(this.i,this.l,A,"[Invalid Chunked Response]"),qt(this),nt(this);else if(A.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),bu(Te),Te.P=!0,Jt(11))}}else nr(this.i,this.l,A,null),Nn(this,A);et==4&&qt(this),this.o&&!this.K&&(et==4?Th(this.j,this):(this.o=!1,Mt(this)))}else Qi(this.g),_==400&&A.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),qt(this),nt(this)}}}catch{}finally{}};function Ve(h){if(!Ye(h))return h.g.la();const _=Pn(h.g);if(_==="")return"";let A="";const N=_.length,X=ui(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return qt(h),nt(h),"";h.h.i=new c.TextDecoder}for(let ne=0;ne<N;ne++)h.h.h=!0,A+=h.h.i.decode(_[ne],{stream:!(X&&ne==N-1)});return _.length=0,h.h.g+=A,h.C=0,h.h.g}function Ye(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function st(h,_){var A=h.C,N=_.indexOf(`
`,A);return N==-1?be:(A=Number(_.substring(A,N)),isNaN(A)?ve:(N+=1,N+A>_.length?be:(_=_.slice(N,N+A),h.C=N+A,_)))}Ce.prototype.cancel=function(){this.K=!0,qt(this)};function Mt(h){h.T=Date.now()+h.H,Kt(h,h.H)}function Kt(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Rr(p(h.aa,h),_)}function Ft(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Ce.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Si(this.i,this.B),this.M!=2&&(tr(),Jt(17)),qt(this),this.m=2,nt(this)):Kt(this,this.T-h)};function nt(h){h.j.I==0||h.K||Th(h.j,h)}function qt(h){Ft(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,ur(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Nn(h,_){try{var A=h.j;if(A.I!=0&&(A.g==h||Gn(A.h,h))){if(!h.L&&Gn(A.h,h)&&A.I==3){try{var N=A.Ba.g.parse(_)}catch{N=null}if(Array.isArray(N)&&N.length==3){var X=N;if(X[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<h.F)Go(A),Bs(A);else break e;Ya(A),Jt(18)}}else A.xa=X[1],0<A.xa-A.K&&X[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=Rr(p(A.Va,A),6e3));hr(A.h)<=1&&A.ta&&(A.ta=void 0)}else Di(A,11)}else if((h.L||A.g==h)&&Go(A),!x(_))for(X=A.Ba.g.parse(_),_=0;_<X.length;_++){let Ct=X[_];const Zt=Ct[0];if(!(Zt<=A.K))if(A.K=Zt,Ct=Ct[1],A.I==2)if(Ct[0]=="c"){A.M=Ct[1],A.ba=Ct[2];const $r=Ct[3];$r!=null&&(A.ka=$r,A.j.info("VER="+A.ka));const Oi=Ct[4];Oi!=null&&(A.za=Oi,A.j.info("SVER="+A.za));const ci=Ct[5];ci!=null&&typeof ci=="number"&&ci>0&&(N=1.5*ci,A.O=N,A.j.info("backChannelRequestTimeoutMs_="+N)),N=A;const hi=h.g;if(hi){const Qa=hi.g?hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qa){var ne=N.h;ne.g||Qa.indexOf("spdy")==-1&&Qa.indexOf("quic")==-1&&Qa.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(xr(ne,ne.h),ne.h=null))}if(N.G){const $o=hi.g?hi.g.getResponseHeader("X-HTTP-Session-Id"):null;$o&&(N.wa=$o,wt(N.J,N.G,$o))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-h.F,A.j.info("Handshake RTT: "+A.T+"ms")),N=A;var Te=h;if(N.na=Ah(N,N.L?N.ba:null,N.W),Te.L){Ai(N.h,Te);var et=Te,dn=N.O;dn&&(et.H=dn),et.D&&(Ft(et),Mt(et)),N.g=Te}else vh(N);A.i.length>0&&Ni(A)}else Ct[0]!="stop"&&Ct[0]!="close"||Di(A,7);else A.I==3&&(Ct[0]=="stop"||Ct[0]=="close"?Ct[0]=="stop"?Di(A,7):Eu(A):Ct[0]!="noop"&&A.l&&A.l.qa(Ct),A.A=0)}}tr(4)}catch{}}var Gt=class{constructor(h,_){this.g=h,this.map=_}};function cr(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function hr(h){return h.h?1:h.g?h.g.size:0}function Gn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function xr(h,_){h.g?h.g.add(_):h.h=_}function Ai(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}cr.prototype.cancel=function(){if(this.i=wi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function wi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const A of h.g.values())_=_.concat(A.G);return _}return w(h.i)}var ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rn(h,_){if(h){h=h.split("&");for(let A=0;A<h.length;A++){const N=h[A].indexOf("=");let X,ne=null;N>=0?(X=h[A].substring(0,N),ne=h[A].substring(N+1)):X=h[A],_(X,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function yn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof yn?(this.l=h.l,rt(this,h.j),this.o=h.o,this.g=h.g,Nr(this,h.u),this.h=h.h,Ps(this,yh(h.i)),this.m=h.m):h&&(_=String(h).match(ot))?(this.l=!1,rt(this,_[1]||"",!0),this.o=Ci(_[2]||""),this.g=Ci(_[3]||"",!0),Nr(this,_[4]),this.h=Ci(_[5]||"",!0),Ps(this,_[6]||"",!0),this.m=Ci(_[7]||"")):(this.l=!1,this.i=new Vs(null,this.l))}yn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Ha(_,Uo,!0),":");var A=this.g;return(A||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Ha(_,Uo,!0),"@"),h.push(de(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&h.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&h.push("/"),h.push(Ha(A,A.charAt(0)=="/"?mu:mh,!0))),(A=this.i.toString())&&h.push("?",A),(A=this.m)&&h.push("#",Ha(A,ph)),h.join("")},yn.prototype.resolve=function(h){const _=Pt(this);let A=!!h.j;A?rt(_,h.j):A=!!h.o,A?_.o=h.o:A=!!h.g,A?_.g=h.g:A=h.u!=null;var N=h.h;if(A)Nr(_,h.u);else if(A=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var X=_.h.lastIndexOf("/");X!=-1&&(N=_.h.slice(0,X+1)+N)}if(X=N,X==".."||X==".")N="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){N=X.lastIndexOf("/",0)==0,X=X.split("/");const ne=[];for(let Te=0;Te<X.length;){const et=X[Te++];et=="."?N&&Te==X.length&&ne.push(""):et==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),N&&Te==X.length&&ne.push("")):(ne.push(et),N=!0)}N=ne.join("/")}else N=X}return A?_.h=N:A=h.i.toString()!=="",A?Ps(_,yh(h.i)):A=!!h.m,A&&(_.m=h.m),_};function Pt(h){return new yn(h)}function rt(h,_,A){h.j=A?Ci(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Nr(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Ps(h,_,A){_ instanceof Vs?(h.i=_,Bo(h.i,h.l)):(A||(_=Ha(_,ks)),h.i=new Vs(_,h.l))}function wt(h,_,A){h.i.set(_,A)}function Ba(h){return wt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ci(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ha(h,_,A){return typeof h=="string"?(h=encodeURI(h).replace(_,fr),A&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function fr(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Uo=/[#\/\?@]/g,mh=/[#\?:]/g,mu=/[#\?]/g,ks=/[#\?@]/g,ph=/#/g;function Vs(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function dr(h){h.g||(h.g=new Map,h.h=0,h.i&&rn(h.i,function(_,A){h.add(decodeURIComponent(_.replace(/\+/g," ")),A)}))}n=Vs.prototype,n.add=function(h,_){dr(this),this.i=null,h=Ls(this,h);let A=this.g.get(h);return A||this.g.set(h,A=[]),A.push(_),this.h+=1,this};function gh(h,_){dr(h),_=Ls(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function pu(h,_){return dr(h),_=Ls(h,_),h.g.has(_)}n.forEach=function(h,_){dr(this),this.g.forEach(function(A,N){A.forEach(function(X){h.call(_,X,N,this)},this)},this)};function gu(h,_){dr(h);let A=[];if(typeof _=="string")pu(h,_)&&(A=A.concat(h.g.get(Ls(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)A=A.concat(h[_]);return A}n.set=function(h,_){return dr(this),this.i=null,h=Ls(this,h),pu(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=gu(this,h),h.length>0?String(h[0]):_):_};function zo(h,_,A){gh(h,_),A.length>0&&(h.i=null,h.g.set(Ls(h,_),w(A)),h.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let N=0;N<_.length;N++){var A=_[N];const X=de(A);A=gu(this,A);for(let ne=0;ne<A.length;ne++){let Te=X;A[ne]!==""&&(Te+="="+de(A[ne])),h.push(Te)}}return this.i=h.join("&")};function yh(h){const _=new Vs;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Ls(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Bo(h,_){_&&!h.j&&(dr(h),h.i=null,h.g.forEach(function(A,N){const X=N.toLowerCase();N!=X&&(gh(this,N),zo(this,X,A))},h)),h.j=_}function oi(h,_){const A=new Ir;if(c.Image){const N=new Image;N.onload=y(qr,A,"TestLoadImage: loaded",!0,_,N),N.onerror=y(qr,A,"TestLoadImage: error",!1,_,N),N.onabort=y(qr,A,"TestLoadImage: abort",!1,_,N),N.ontimeout=y(qr,A,"TestLoadImage: timeout",!1,_,N),c.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else _(!1)}function yu(h,_){const A=new Ir,N=new AbortController,X=setTimeout(()=>{N.abort(),qr(A,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:N.signal}).then(ne=>{clearTimeout(X),ne.ok?qr(A,"TestPingServer: ok",!0,_):qr(A,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(X),qr(A,"TestPingServer: error",!1,_)})}function qr(h,_,A,N,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),N(A)}catch{}}function js(){this.g=new ja}function Ri(h){this.i=h.Sb||null,this.h=h.ab||!1}v(Ri,Lo),Ri.prototype.g=function(){return new Fa(this.i,this.h)};function Fa(h,_){ke.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Fa,ke),n=Fa.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,li(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ho(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ho(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Us(this):li(this),this.readyState==3&&Ho(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Us(this))},n.Na=function(h){this.g&&(this.response=h,Us(this))},n.ga=function(){this.g&&Us(this)};function Us(h){h.readyState=4,h.l=null,h.j=null,h.B=null,li(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var A=_.next();!A.done;)A=A.value,h.push(A[0]+": "+A[1]),A=_.next();return h.join(`\r
`)};function li(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Gr(h){let _="";return Me(h,function(A,N){_+=N,_+=":",_+=A,_+=`\r
`}),_}function qa(h,_,A){e:{for(N in A){var N=!1;break e}N=!0}N||(A=Gr(A),typeof h=="string"?A!=null&&de(A):wt(h,_,A))}function kt(h){ke.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(kt,ke);var Ii=/^https?$/i,_u=["POST","PUT"];n=kt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,A,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ne){Ga(this,ne);return}if(h=A||"",A=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var X in N)A.set(X,N[X]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ne of N.keys())A.set(ne,N.get(ne));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(A.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(_u,_,void 0)>=0)||N||X||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Te]of A)this.g.setRequestHeader(ne,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ne){Ga(this,ne)}};function Ga(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,vu(h),Yi(h)}function vu(h){h.A||(h.A=!0,Ze(h,"complete"),Ze(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ze(this,"complete"),Ze(this,"abort"),Yi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),kt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?$a(this):this.Xa())},n.Xa=function(){$a(this)};function $a(h){if(h.h&&typeof l<"u"){if(h.v&&ui(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ze(h,"readystatechange"),ui(h)==4){h.h=!1;try{const ne=h.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var A;if(!(A=_)){var N;if(N=ne===0){let Te=String(h.D).match(ot)[1]||null;!Te&&c.self&&c.self.location&&(Te=c.self.location.protocol.slice(0,-1)),N=!Ii.test(Te?Te.toLowerCase():"")}A=N}if(A)Ze(h,"complete"),Ze(h,"success");else{h.o=6;try{var X=ui(h)>2?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.ca()+"]",vu(h)}}finally{Yi(h)}}}}function Yi(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const A=h.g;h.g=null,_||Ze(h,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ui(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),wr(_)}};function Pn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Qi(h){const _={};h=(h.g&&ui(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(x(h[N]))continue;var A=_e(h[N]);const X=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ne=_[X]||[];_[X]=ne,ne.push(A)}De(_,function(N){return N.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(h,_,A){return A&&A.internalChannelParams&&A.internalChannelParams[h]||_}function zs(h){this.za=0,this.i=[],this.j=new Ir,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xi("baseRetryDelayMs",5e3,h),this.Za=xi("retryDelaySeedMs",1e4,h),this.Ta=xi("forwardChannelMaxRetries",2,h),this.va=xi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new cr(h&&h.concurrentRequestLimit),this.Ba=new js,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=zs.prototype,n.ka=8,n.I=1,n.connect=function(h,_,A,N){Jt(0),this.W=h,this.H=_||{},A&&N!==void 0&&(this.H.OSID=A,this.H.OAID=N),this.F=this.X,this.J=Ah(this,null,this.W),Ni(this)};function Eu(h){if(Fo(h),h.I==3){var _=h.V++,A=Pt(h.J);if(wt(A,"SID",h.M),wt(A,"RID",_),wt(A,"TYPE","terminate"),Ka(h,A),_=new Ce(h,h.j,_),_.M=2,_.A=Ba(Pt(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!A&&c.Image&&(new Image().src=_.A,A=!0),A||(_.g=wh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Mt(_)}Sh(h)}function Bs(h){h.g&&(bu(h),h.g.cancel(),h.g=null)}function Fo(h){Bs(h),h.v&&(c.clearTimeout(h.v),h.v=null),Go(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ni(h){if(!qn(h.h)&&!h.m){h.m=!0;var _=h.Ea;W||C(),K||(W(),K=!0),S.add(_,h),h.D=0}}function qo(h,_){return hr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Rr(p(h.Ea,h,_),bh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const X=new Ce(this,this.j,h);let ne=this.o;if(this.U&&(ne?(ne=H(ne),pe(ne,this.U)):ne=this.U),this.u!==null||this.R||(X.J=ne,ne=null),this.S)e:{for(var _=0,A=0;A<this.i.length;A++){t:{var N=this.i[A];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(_+=N,_>4096){_=A;break e}if(_===4096||A===this.i.length-1){_=A+1;break e}}_=1e3}else _=1e3;_=_h(this,X,_),A=Pt(this.J),wt(A,"RID",h),wt(A,"CVER",22),this.G&&wt(A,"X-HTTP-Session-Id",this.G),Ka(this,A),ne&&(this.R?_="headers="+de(Gr(ne))+"&"+_:this.u&&qa(A,this.u,ne)),xr(this.h,X),this.Ra&&wt(A,"TYPE","init"),this.S?(wt(A,"$req",_),wt(A,"SID","null"),X.U=!0,Ie(X,A,null)):Ie(X,A,_),this.I=2}}else this.I==3&&(h?Tu(this,h):this.i.length==0||qn(this.h)||Tu(this))};function Tu(h,_){var A;_?A=_.l:A=h.V++;const N=Pt(h.J);wt(N,"SID",h.M),wt(N,"RID",A),wt(N,"AID",h.K),Ka(h,N),h.u&&h.o&&qa(N,h.u,h.o),A=new Ce(h,h.j,A,h.D+1),h.u===null&&(A.J=h.o),_&&(h.i=_.G.concat(h.i)),_=_h(h,A,1e3),A.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),xr(h.h,A),Ie(A,N,_)}function Ka(h,_){h.H&&Me(h.H,function(A,N){wt(_,N,A)}),h.l&&Me({},function(A,N){wt(_,N,A)})}function _h(h,_,A){A=Math.min(h.i.length,A);const N=h.l?p(h.l.Ka,h.l,h):null;e:{var X=h.i;let et=-1;for(;;){const dn=["count="+A];et==-1?A>0?(et=X[0].g,dn.push("ofs="+et)):et=0:dn.push("ofs="+et);let Ct=!0;for(let Zt=0;Zt<A;Zt++){var ne=X[Zt].g;const $r=X[Zt].map;if(ne-=et,ne<0)et=Math.max(0,X[Zt].g-100),Ct=!1;else try{ne="req"+ne+"_"||"";try{var Te=$r instanceof Map?$r:Object.entries($r);for(const[Oi,ci]of Te){let hi=ci;f(ci)&&(hi=un(ci)),dn.push(ne+Oi+"="+encodeURIComponent(hi))}}catch(Oi){throw dn.push(ne+"type="+encodeURIComponent("_badmap")),Oi}}catch{N&&N($r)}}if(Ct){Te=dn.join("&");break e}}Te=void 0}return h=h.i.splice(0,A),_.G=h,Te}function vh(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;W||C(),K||(W(),K=!0),S.add(_,h),h.A=0}}function Ya(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Rr(p(h.Da,h),bh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Eh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Rr(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),Bs(this),Eh(this))};function bu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Eh(h){h.g=new Ce(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Pt(h.na);wt(_,"RID","rpc"),wt(_,"SID",h.M),wt(_,"AID",h.K),wt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&wt(_,"TO",h.ia),wt(_,"TYPE","xmlhttp"),Ka(h,_),h.u&&h.o&&qa(_,h.u,h.o),h.O&&(h.g.H=h.O);var A=h.g;h=h.ba,A.M=1,A.A=Ba(Pt(_)),A.u=null,A.R=!0,qe(A,h)}n.Va=function(){this.C!=null&&(this.C=null,Bs(this),Ya(this),Jt(19))};function Go(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Th(h,_){var A=null;if(h.g==_){Go(h),bu(h),h.g=null;var N=2}else if(Gn(h.h,_))A=_.G,Ai(h.h,_),N=1;else return;if(h.I!=0){if(_.o)if(N==1){A=_.u?_.u.length:0,_=Date.now()-_.F;var X=h.D;N=Ms(),Ze(N,new Fr(N,A)),Ni(h)}else vh(h);else if(X=_.m,X==3||X==0&&_.X>0||!(N==1&&qo(h,_)||N==2&&Ya(h)))switch(A&&A.length>0&&(_=h.h,_.i=_.i.concat(A)),X){case 1:Di(h,5);break;case 4:Di(h,10);break;case 3:Di(h,6);break;default:Di(h,2)}}}function bh(h,_){let A=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(A*=2),A*_}function Di(h,_){if(h.j.info("Error code "+_),_==2){var A=p(h.bb,h),N=h.Ua;const X=!N;N=new yn(N||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||rt(N,"https"),Ba(N),X?oi(N.toString(),A):yu(N.toString(),A)}else Jt(2);h.I=0,h.l&&h.l.pa(_),Sh(h),Fo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function Sh(h){if(h.I=0,h.ja=[],h.l){const _=wi(h.h);(_.length!=0||h.i.length!=0)&&(D(h.ja,_),D(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function Ah(h,_,A){var N=A instanceof yn?Pt(A):new yn(A);if(N.g!="")_&&(N.g=_+"."+N.g),Nr(N,N.u);else{var X=c.location;N=X.protocol,_=_?_+"."+X.hostname:X.hostname,X=+X.port;const ne=new yn(null);N&&rt(ne,N),_&&(ne.g=_),X&&Nr(ne,X),A&&(ne.h=A),N=ne}return A=h.G,_=h.wa,A&&_&&wt(N,A,_),wt(N,"VER",h.ka),Ka(h,N),N}function wh(h,_,A){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new kt(new Ri({ab:A})):new kt(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ch(){}n=Ch.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Hs(){}Hs.prototype.g=function(h,_){return new rr(h,_)};function rr(h,_){ke.call(this),this.g=new zs(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!x(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Xi(this)}v(rr,ke),rr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){Eu(this.g)},rr.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var A={};A.__data__=h,h=A}else this.v&&(A={},A.__data__=un(h),h=A);_.i.push(new Gt(_.Ya++,h)),_.I==3&&Ni(_)},rr.prototype.N=function(){this.g.l=null,delete this.j,Eu(this.g),delete this.g,rr.Z.N.call(this)};function Rh(h){Ut.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const A in _){h=A;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}v(Rh,Ut);function Ih(){er.call(this),this.status=1}v(Ih,er);function Xi(h){this.g=h}v(Xi,Ch),Xi.prototype.ra=function(){Ze(this.g,"a")},Xi.prototype.qa=function(h){Ze(this.g,new Rh(h))},Xi.prototype.pa=function(h){Ze(this.g,new Ih)},Xi.prototype.oa=function(){Ze(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,Sw=function(){return new Hs},bw=function(){return Ms()},Tw=Wt,wy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,Wf=Ki,z.COMPLETE="complete",Ew=z,Os.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",ke.prototype.listen=ke.prototype.J,pc=Os,kt.prototype.listenOnce=kt.prototype.K,kt.prototype.getLastError=kt.prototype.Ha,kt.prototype.getLastErrorCode=kt.prototype.ya,kt.prototype.getStatus=kt.prototype.ca,kt.prototype.getResponseJson=kt.prototype.La,kt.prototype.getResponseText=kt.prototype.la,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Fa,vw=kt}).apply(typeof Vf<"u"?Vf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xn.UNAUTHENTICATED=new Xn(null),Xn.GOOGLE_CREDENTIALS=new Xn("google-credentials-uid"),Xn.FIRST_PARTY=new Xn("first-party-uid"),Xn.MOCK_USER=new Xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su="12.8.0";function jO(n){su=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new c_("@firebase/firestore");function Rl(){return Co.logLevel}function Re(n,...e){if(Co.logLevel<=dt.DEBUG){const t=e.map(d_);Co.debug(`Firestore (${su}): ${n}`,...t)}}function As(n,...e){if(Co.logLevel<=dt.ERROR){const t=e.map(d_);Co.error(`Firestore (${su}): ${n}`,...t)}}function $l(n,...e){if(Co.logLevel<=dt.WARN){const t=e.map(d_);Co.warn(`Firestore (${su}): ${n}`,...t)}}function d_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Aw(n,i,t)}function Aw(n,e,t){let i=`FIRESTORE (${su}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw As(i),new Error(i)}function xt(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||Aw(e,a,i)}function Je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Ds{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Xn.UNAUTHENTICATED)))}shutdown(){}}class zO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class BO{constructor(e){this.t=e,this.currentUser=Xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xt(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ts,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ts)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(xt(typeof i.accessToken=="string",31837,{l:i}),new ww(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xt(e===null||typeof e=="string",2055,{h:e}),new Xn(e)}}class HO{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Xn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class FO{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new HO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class M0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xt(this.o===void 0,3512);const i=l=>{l.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new M0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(xt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new M0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=GO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function mt(n,e){return n<e?-1:n>e?1:0}function Cy(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return Jg(a)===Jg(l)?mt(a,l):Jg(a)?1:-1}return mt(n.length,e.length)}const $O=55296,KO=57343;function Jg(n){const e=n.charCodeAt(0);return e>=$O&&e<=KO}function Kl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="__name__";class Li{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ge(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ge(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Li.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Li.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return mt(e.length,t.length)}static compareSegments(e,t){const i=Li.isNumericId(e),a=Li.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Li.extractNumericId(e).compare(Li.extractNumericId(t)):Cy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Aa.fromString(e.substring(4,e.length-2))}}class $t extends Li{construct(e,t,i){return new $t(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new $t(t)}static emptyPath(){return new $t([])}}const YO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hn extends Li{construct(e,t,i){return new Hn(e,t,i)}static isValidIdentifier(e){return YO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P0}static keyField(){return new Hn([P0])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new Ae(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ae(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(i+=f,a++):(l(),a++)}if(l(),c)throw new Ae(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hn(t)}static emptyPath(){return new Hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue($t.fromString(e))}static fromName(e){return new Ue($t.fromString(e).popFirst(5))}static empty(){return new Ue($t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new $t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(n,e,t){if(!t)throw new Ae(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QO(n,e,t,i){if(e===!0&&i===!0)throw new Ae(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function k0(n){if(!Ue.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function V0(n){if(Ue.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Rw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Jd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ge(12329,{type:typeof n})}function br(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jd(n);throw new Ae(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(n,e){const t={typeString:n};return e&&(t.value=e),t}function eh(n,e){if(!Rw(n))throw new Ae(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Ae(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=-62135596800,j0=1e6;class Xt{static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*j0);return new Xt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<L0)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/j0}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(eh(e,Xt._jsonSchema))return new Xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-L0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xt._jsonSchemaVersion="firestore/timestamp/1.0",Xt._jsonSchema={type:wn("string",Xt._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Xt(0,0))}static max(){return new Xe(new Xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=-1;function XO(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Xe.fromTimestamp(i===1e9?new Xt(t+1,0):new Xt(t,i));return new Ia(a,Ue.empty(),e)}function WO(n){return new Ia(n.readTime,n.key,kc)}class Ia{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ia(Xe.min(),Ue.empty(),kc)}static max(){return new Ia(Xe.max(),Ue.empty(),kc)}}function JO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ue.comparator(n.documentKey,e.documentKey),t!==0?t:mt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==ZO)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,i)=>{t(e)}))}static reject(e){return new fe(((t,i)=>{i(e)}))}static waitFor(e){return new fe(((t,i)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(m=>i(m)))})),c=!0,l===a&&t()}))}static or(e){let t=fe.resolve(!1);for(const i of e)t=t.next((a=>a?fe.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new fe(((i,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((y=>{c[p]=y,++f,f===l&&i(c)}),(y=>a(y)))}}))}static doWhile(e,t){return new fe(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function tM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ou(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=-1;function em(n){return n==null}function Ed(n){return n===0&&1/n==-1/0}function nM(n){return typeof n=="number"&&Number.isInteger(n)&&!Ed(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="";function rM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=U0(e)),e=iM(n.get(t),e);return U0(e)}function iM(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Iw:t+="";break;default:t+=l}}return t}function U0(n){return n+Iw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t){this.comparator=e,this.root=t||Bn.EMPTY}insert(e,t){return new on(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new on(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lf(this.root,e,this.comparator,!0)}}class Lf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Bn.RED,this.left=a??Bn.EMPTY,this.right=l??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Bn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Bn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.comparator=e,this.data=new on(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new B0(this.data.getIterator())}getIteratorFrom(e){return new B0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class B0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new Ur([])}unionWith(e){let t=new In(Hn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ur(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Nw("Invalid base64 string: "+l):l}})(e);return new Fn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const sM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xa(n){if(xt(!!n,39018),typeof n=="string"){let e=0;const t=sM.exec(n);if(xt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:gn(n.seconds),nanos:gn(n.nanos)}}function gn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Na(n){return typeof n=="string"?Fn.fromBase64String(n):Fn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="server_timestamp",Ow="__type__",Mw="__previous_value__",Pw="__local_write_time__";function g_(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Ow])==null?void 0:i.stringValue)===Dw}function tm(n){const e=n.mapValue.fields[Mw];return g_(e)?tm(e):e}function Vc(n){const e=xa(n.mapValue.fields[Pw].timestampValue);return new Xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,t,i,a,l,c,f,m,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y,this.apiKey=v}}const Td="(default)";class Lc{constructor(e,t){this.projectId=e,this.database=t||Td}static empty(){return new Lc("","")}get isDefaultDatabase(){return this.database===Td}isEqual(e){return e instanceof Lc&&e.projectId===this.projectId&&e.database===this.database}}function oM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Ae(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="__type__",lM="__max__",jf={mapValue:{}},Vw="__vector__",bd="value";function Da(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?g_(n)?4:cM(n)?9007199254740991:uM(n)?10:11:Ge(28295,{value:n})}function qi(n,e){if(n===e)return!0;const t=Da(n);if(t!==Da(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vc(n).isEqual(Vc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=xa(a.timestampValue),f=xa(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Na(a.bytesValue).isEqual(Na(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return gn(a.geoPointValue.latitude)===gn(l.geoPointValue.latitude)&&gn(a.geoPointValue.longitude)===gn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return gn(a.integerValue)===gn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=gn(a.doubleValue),f=gn(l.doubleValue);return c===f?Ed(c)===Ed(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return Kl(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(z0(c)!==z0(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!qi(c[m],f[m])))return!1;return!0})(n,e);default:return Ge(52216,{left:n})}}function jc(n,e){return(n.values||[]).find((t=>qi(t,e)))!==void 0}function Yl(n,e){if(n===e)return 0;const t=Da(n),i=Da(e);if(t!==i)return mt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return mt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=gn(l.integerValue||l.doubleValue),m=gn(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return H0(n.timestampValue,e.timestampValue);case 4:return H0(Vc(n),Vc(e));case 5:return Cy(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=Na(l),m=Na(c);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let p=0;p<f.length&&p<m.length;p++){const y=mt(f[p],m[p]);if(y!==0)return y}return mt(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=mt(gn(l.latitude),gn(c.latitude));return f!==0?f:mt(gn(l.longitude),gn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return F0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var E,w,D,V;const f=l.fields||{},m=c.fields||{},p=(E=f[bd])==null?void 0:E.arrayValue,y=(w=m[bd])==null?void 0:w.arrayValue,v=mt(((D=p==null?void 0:p.values)==null?void 0:D.length)||0,((V=y==null?void 0:y.values)==null?void 0:V.length)||0);return v!==0?v:F0(p,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===jf.mapValue&&c===jf.mapValue)return 0;if(l===jf.mapValue)return 1;if(c===jf.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),p=c.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const E=Cy(m[v],y[v]);if(E!==0)return E;const w=Yl(f[m[v]],p[y[v]]);if(w!==0)return w}return mt(m.length,y.length)})(n.mapValue,e.mapValue);default:throw Ge(23264,{he:t})}}function H0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return mt(n,e);const t=xa(n),i=xa(e),a=mt(t.seconds,i.seconds);return a!==0?a:mt(t.nanos,i.nanos)}function F0(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Yl(t[a],i[a]);if(l)return l}return mt(t.length,i.length)}function Ql(n){return Ry(n)}function Ry(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=xa(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Na(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ue.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Ry(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Ry(t.fields[c])}`;return a+"}"})(n.mapValue):Ge(61005,{value:n})}function Jf(n){switch(Da(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tm(n);return e?16+Jf(e):16;case 5:return 2*n.stringValue.length;case 6:return Na(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Jf(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return Pa(i.fields,((l,c)=>{a+=l.length+Jf(c)})),a})(n.mapValue);default:throw Ge(13486,{value:n})}}function q0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Iy(n){return!!n&&"integerValue"in n}function y_(n){return!!n&&"arrayValue"in n}function G0(n){return!!n&&"nullValue"in n}function $0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Zf(n){return!!n&&"mapValue"in n}function uM(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[kw])==null?void 0:i.stringValue)===Vw}function bc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Pa(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=bc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bc(n.arrayValue.values[t]);return e}return{...n}}function cM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.value=e}static empty(){return new Tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bc(t)}setAll(e){let t=Hn.emptyPath(),i={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=f.popLast()}c?i[f.lastSegment()]=bc(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Zf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Pa(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new Tr(bc(this.value))}}function Lw(n){const e=[];return Pa(n.fields,((t,i)=>{const a=new Hn([t]);if(Zf(i)){const l=Lw(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Ur(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t,i,a,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Wn(e,0,Xe.min(),Xe.min(),Xe.min(),Tr.empty(),0)}static newFoundDocument(e,t,i,a){return new Wn(e,1,t,Xe.min(),i,a,0)}static newNoDocument(e,t){return new Wn(e,2,t,Xe.min(),Xe.min(),Tr.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,Xe.min(),Xe.min(),Tr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t){this.position=e,this.inclusive=t}}function K0(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=Ue.comparator(Ue.fromName(c.referenceValue),t.key):i=Yl(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Y0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t="asc"){this.field=e,this.dir=t}}function hM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{}class An extends jw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new dM(e,t,i):t==="array-contains"?new gM(e,i):t==="in"?new yM(e,i):t==="not-in"?new _M(e,i):t==="array-contains-any"?new vM(e,i):new An(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new mM(e,i):new pM(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Yl(t,this.value)):t!==null&&Da(this.value)===Da(t)&&this.matchesComparison(Yl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ei extends jw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ei(e,t)}matches(e){return Uw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Uw(n){return n.op==="and"}function zw(n){return fM(n)&&Uw(n)}function fM(n){for(const e of n.filters)if(e instanceof Ei)return!1;return!0}function xy(n){if(n instanceof An)return n.field.canonicalString()+n.op.toString()+Ql(n.value);if(zw(n))return n.filters.map((e=>xy(e))).join(",");{const e=n.filters.map((t=>xy(t))).join(",");return`${n.op}(${e})`}}function Bw(n,e){return n instanceof An?(function(i,a){return a instanceof An&&i.op===a.op&&i.field.isEqual(a.field)&&qi(i.value,a.value)})(n,e):n instanceof Ei?(function(i,a){return a instanceof Ei&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,f)=>l&&Bw(c,a.filters[f])),!0):!1})(n,e):void Ge(19439)}function Hw(n){return n instanceof An?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ql(t.value)}`})(n):n instanceof Ei?(function(t){return t.op.toString()+" {"+t.getFilters().map(Hw).join(" ,")+"}"})(n):"Filter"}class dM extends An{constructor(e,t,i){super(e,t,i),this.key=Ue.fromName(i.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class mM extends An{constructor(e,t){super(e,"in",t),this.keys=Fw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class pM extends An{constructor(e,t){super(e,"not-in",t),this.keys=Fw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Fw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ue.fromName(i.referenceValue)))}class gM extends An{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return y_(t)&&jc(t.arrayValue,this.value)}}class yM extends An{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jc(this.value.arrayValue,t)}}class _M extends An{constructor(e,t){super(e,"not-in",t)}matches(e){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jc(this.value.arrayValue,t)}}class vM extends An{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!y_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>jc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,t=null,i=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Q0(n,e=null,t=[],i=[],a=null,l=null,c=null){return new EM(n,e,t,i,a,l,c)}function __(n){const e=Je(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>xy(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),em(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ql(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ql(i))).join(",")),e.Te=t}return e.Te}function v_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Bw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Y0(n.startAt,e.startAt)&&Y0(n.endAt,e.endAt)}function Ny(n){return Ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t=null,i=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function TM(n,e,t,i,a,l,c,f){return new th(n,e,t,i,a,l,c,f)}function nm(n){return new th(n)}function X0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bM(n){return Ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function qw(n){return n.collectionGroup!==null}function Sc(n){const e=Je(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new In(Hn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ad(l,i))})),t.has(Hn.keyField().canonicalString())||e.Ie.push(new Ad(Hn.keyField(),i))}return e.Ie}function Ui(n){const e=Je(n);return e.Ee||(e.Ee=SM(e,Sc(n))),e.Ee}function SM(n,e){if(n.limitType==="F")return Q0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Ad(a.field,l)}));const t=n.endAt?new Sd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Sd(n.startAt.position,n.startAt.inclusive):null;return Q0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Dy(n,e){const t=n.filters.concat([e]);return new th(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Oy(n,e,t){return new th(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rm(n,e){return v_(Ui(n),Ui(e))&&n.limitType===e.limitType}function Gw(n){return`${__(Ui(n))}|lt:${n.limitType}`}function Il(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>Hw(a))).join(", ")}]`),em(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Ql(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Ql(a))).join(",")),`Target(${i})`})(Ui(n))}; limitType=${n.limitType})`}function im(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ue.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of Sc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(c,f,m){const p=K0(c,f,m);return c.inclusive?p<=0:p<0})(i.startAt,Sc(i),a)||i.endAt&&!(function(c,f,m){const p=K0(c,f,m);return c.inclusive?p>=0:p>0})(i.endAt,Sc(i),a))})(n,e)}function AM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $w(n){return(e,t)=>{let i=!1;for(const a of Sc(n)){const l=wM(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function wM(n,e,t){const i=n.field.isKeyField()?Ue.comparator(e.key,t.key):(function(l,c,f){const m=c.data.field(l),p=f.data.field(l);return m!==null&&p!==null?Yl(m,p):Ge(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ge(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return xw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=new on(Ue.comparator);function ws(){return CM}const Kw=new on(Ue.comparator);function gc(...n){let e=Kw;for(const t of n)e=e.insert(t.key,t);return e}function Yw(n){let e=Kw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function _o(){return Ac()}function Qw(){return Ac()}function Ac(){return new Po((n=>n.toString()),((n,e)=>n.isEqual(e)))}const RM=new on(Ue.comparator),IM=new In(Ue.comparator);function pt(...n){let e=IM;for(const t of n)e=e.add(t);return e}const xM=new In(mt);function NM(){return xM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ed(e)?"-0":e}}function Xw(n){return{integerValue:""+n}}function DM(n,e){return nM(e)?Xw(e):E_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(){this._=void 0}}function OM(n,e,t){return n instanceof Uc?(function(a,l){const c={fields:{[Ow]:{stringValue:Dw},[Pw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&g_(l)&&(l=tm(l)),l&&(c.fields[Mw]=l),{mapValue:c}})(t,e):n instanceof zc?Jw(n,e):n instanceof Bc?Zw(n,e):(function(a,l){const c=Ww(a,l),f=W0(c)+W0(a.Ae);return Iy(c)&&Iy(a.Ae)?Xw(f):E_(a.serializer,f)})(n,e)}function MM(n,e,t){return n instanceof zc?Jw(n,e):n instanceof Bc?Zw(n,e):t}function Ww(n,e){return n instanceof wd?(function(i){return Iy(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Uc extends sm{}class zc extends sm{constructor(e){super(),this.elements=e}}function Jw(n,e){const t=e1(e);for(const i of n.elements)t.some((a=>qi(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Bc extends sm{constructor(e){super(),this.elements=e}}function Zw(n,e){let t=e1(e);for(const i of n.elements)t=t.filter((a=>!qi(a,i)));return{arrayValue:{values:t}}}class wd extends sm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function W0(n){return gn(n.integerValue||n.doubleValue)}function e1(n){return y_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,t){this.field=e,this.transform=t}}function kM(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof zc&&a instanceof zc||i instanceof Bc&&a instanceof Bc?Kl(i.elements,a.elements,qi):i instanceof wd&&a instanceof wd?qi(i.Ae,a.Ae):i instanceof Uc&&a instanceof Uc})(n.transform,e.transform)}class VM{constructor(e,t){this.version=e,this.transformResults=t}}class Sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ed(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class am{}function t1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new om(n.key,Sr.none()):new nh(n.key,n.data,Sr.none());{const t=n.data,i=Tr.empty();let a=new In(Hn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new ka(n.key,i,new Ur(a.toArray()),Sr.none())}}function LM(n,e,t){n instanceof nh?(function(a,l,c){const f=a.value.clone(),m=Z0(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof ka?(function(a,l,c){if(!ed(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Z0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(n1(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function wc(n,e,t,i){return n instanceof nh?(function(l,c,f,m){if(!ed(l.precondition,c))return f;const p=l.value.clone(),y=eS(l.fieldTransforms,m,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof ka?(function(l,c,f,m){if(!ed(l.precondition,c))return f;const p=eS(l.fieldTransforms,m,c),y=c.data;return y.setAll(n1(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(l,c,f){return ed(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function jM(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=Ww(i.transform,a||null);l!=null&&(t===null&&(t=Tr.empty()),t.set(i.field,l))}return t||null}function J0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Kl(i,a,((l,c)=>kM(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class nh extends am{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ka extends am{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function n1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Z0(n,e,t){const i=new Map;xt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,f=e.data.field(l.field);i.set(l.field,MM(c,f,t[a]))}return i}function eS(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,OM(l,c,e))}return i}class om extends am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UM extends am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&LM(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=wc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=wc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Qw();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=t1(c,f);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Xe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pt())}isEqual(e){return this.batchId===e.batchId&&Kl(this.mutations,e.mutations,((t,i)=>J0(t,i)))&&Kl(this.baseMutations,e.baseMutations,((t,i)=>J0(t,i)))}}class T_{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){xt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return RM})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new T_(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bn,_t;function FM(n){switch(n){case ue.OK:return Ge(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ge(15467,{code:n})}}function r1(n){if(n===void 0)return As("GRPC error has no .code"),ue.UNKNOWN;switch(n){case bn.OK:return ue.OK;case bn.CANCELLED:return ue.CANCELLED;case bn.UNKNOWN:return ue.UNKNOWN;case bn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case bn.INTERNAL:return ue.INTERNAL;case bn.UNAVAILABLE:return ue.UNAVAILABLE;case bn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case bn.NOT_FOUND:return ue.NOT_FOUND;case bn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case bn.ABORTED:return ue.ABORTED;case bn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case bn.DATA_LOSS:return ue.DATA_LOSS;default:return Ge(39323,{code:n})}}(_t=bn||(bn={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=new Aa([4294967295,4294967295],0);function tS(n){const e=qM().encode(n),t=new _w;return t.update(e),new Uint8Array(t.digest())}function nS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Aa([t,i],0),new Aa([a,l],0)]}class b_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new yc(`Invalid padding: ${t}`);if(i<0)throw new yc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new yc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new yc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Aa.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Aa.fromNumber(i)));return a.compare(GM)===1&&(a=new Aa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=tS(e),[i,a]=nS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new b_(l,a,t);return i.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=tS(e),[i,a]=nS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,rh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new lm(Xe.min(),a,new on(mt),ws(),pt())}}class rh{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new rh(i,t,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class i1{constructor(e,t){this.targetId=e,this.Ce=t}}class s1{constructor(e,t,i=Fn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class rS{constructor(){this.ve=0,this.Fe=iS(),this.Me=Fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),t=pt(),i=pt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Ge(38017,{changeType:l})}})),new rh(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=iS()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,xt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class $M{constructor(e){this.Ge=e,this.ze=new Map,this.je=ws(),this.He=Uf(),this.Je=Uf(),this.Ze=new on(mt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Ny(l))if(i===0){const c=new Ue(l.path);this.et(t,c,Wn.newNoDocument(c,Xe.min()))}else xt(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=Na(i).toUint8Array()}catch(m){if(m instanceof Nw)return $l("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new b_(c,a,l)}catch(m){return $l(m instanceof yc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Ny(f.target)){const m=new Ue(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Wn.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let i=pt();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new lm(e,t,this.Ze,this.je,i);return this.je=ws(),this.He=Uf(),this.Je=Uf(),this.Ze=new on(mt),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new rS,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new In(mt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new In(mt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Uf(){return new on(Ue.comparator)}function iS(){return new on(Ue.comparator)}const KM={asc:"ASCENDING",desc:"DESCENDING"},YM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QM={and:"AND",or:"OR"};class XM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function My(n,e){return n.useProto3Json||em(e)?e:{value:e}}function Cd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function WM(n,e){return Cd(n,e.toTimestamp())}function zi(n){return xt(!!n,49232),Xe.fromTimestamp((function(t){const i=xa(t);return new Xt(i.seconds,i.nanos)})(n))}function S_(n,e){return Py(n,e).canonicalString()}function Py(n,e){const t=(function(a){return new $t(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function o1(n){const e=$t.fromString(n);return xt(f1(e),10190,{key:e.toString()}),e}function ky(n,e){return S_(n.databaseId,e.path)}function Zg(n,e){const t=o1(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(u1(t))}function l1(n,e){return S_(n.databaseId,e)}function JM(n){const e=o1(n);return e.length===4?$t.emptyPath():u1(e)}function Vy(n){return new $t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function u1(n){return xt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function sS(n,e,t){return{name:ky(n,e),fields:t.value.mapValue.fields}}function ZM(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ge(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(xt(y===void 0||typeof y=="string",58123),Fn.fromBase64String(y||"")):(xt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Fn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(p){const y=p.code===void 0?ue.UNKNOWN:r1(p.code);return new Ae(y,p.message||"")})(c);t=new s1(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Zg(n,i.document.name),l=zi(i.document.updateTime),c=i.document.createTime?zi(i.document.createTime):Xe.min(),f=new Tr({mapValue:{fields:i.document.fields}}),m=Wn.newFoundDocument(a,l,c,f),p=i.targetIds||[],y=i.removedTargetIds||[];t=new td(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Zg(n,i.document),l=i.readTime?zi(i.readTime):Xe.min(),c=Wn.newNoDocument(a,l),f=i.removedTargetIds||[];t=new td([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Zg(n,i.document),l=i.removedTargetIds||[];t=new td([],l,a,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new HM(a,l),f=i.targetId;t=new i1(f,c)}}return t}function eP(n,e){let t;if(e instanceof nh)t={update:sS(n,e.key,e.value)};else if(e instanceof om)t={delete:ky(n,e.key)};else if(e instanceof ka)t={update:sS(n,e.key,e.data),updateMask:uP(e.fieldMask)};else{if(!(e instanceof UM))return Ge(16599,{dt:e.type});t={verify:ky(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const f=c.transform;if(f instanceof Uc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof zc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Bc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof wd)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Ge(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:WM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ge(27497)})(n,e.precondition)),t}function tP(n,e){return n&&n.length>0?(xt(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?zi(a.updateTime):zi(l);return c.isEqual(Xe.min())&&(c=zi(l)),new VM(c,a.transformResults||[])})(t,e)))):[]}function nP(n,e){return{documents:[l1(n,e.path)]}}function rP(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=l1(n,a);const l=(function(p){if(p.length!==0)return h1(Ei.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((y=>(function(E){return{field:xl(E.field),direction:aP(E.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=My(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function iP(n){let e=JM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){xt(i===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(v){const E=c1(v);return E instanceof Ei&&zw(E)?E.getFilters():[E]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((E=>(function(D){return new Ad(Nl(D.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(E)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let E;return E=typeof v=="object"?v.value:v,em(E)?null:E})(t.limit));let m=null;t.startAt&&(m=(function(v){const E=!!v.before,w=v.values||[];return new Sd(w,E)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const E=!v.before,w=v.values||[];return new Sd(w,E)})(t.endAt)),TM(e,a,c,l,f,"F",m,p)}function sP(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function c1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Nl(t.unaryFilter.field);return An.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Nl(t.unaryFilter.field);return An.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Nl(t.unaryFilter.field);return An.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Nl(t.unaryFilter.field);return An.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(n):n.fieldFilter!==void 0?(function(t){return An.create(Nl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ei.create(t.compositeFilter.filters.map((i=>c1(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(t.compositeFilter.op))})(n):Ge(30097,{filter:n})}function aP(n){return KM[n]}function oP(n){return YM[n]}function lP(n){return QM[n]}function xl(n){return{fieldPath:n.canonicalString()}}function Nl(n){return Hn.fromServerFormat(n.fieldPath)}function h1(n){return n instanceof An?(function(t){if(t.op==="=="){if($0(t.value))return{unaryFilter:{field:xl(t.field),op:"IS_NAN"}};if(G0(t.value))return{unaryFilter:{field:xl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($0(t.value))return{unaryFilter:{field:xl(t.field),op:"IS_NOT_NAN"}};if(G0(t.value))return{unaryFilter:{field:xl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xl(t.field),op:oP(t.op),value:t.value}}})(n):n instanceof Ei?(function(t){const i=t.getFilters().map((a=>h1(a)));return i.length===1?i[0]:{compositeFilter:{op:lP(t.op),filters:i}}})(n):Ge(54877,{filter:n})}function uP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function f1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function d1(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t,i,a,l=Xe.min(),c=Xe.min(),f=Fn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new va(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.yt=e}}function hP(n){const e=iP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Oy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.Sn=new dP}addToCollectionParentIndex(e,t){return this.Sn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Ia.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Ia.min())}updateCollectionGroup(e,t,i){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class dP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new In($t.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new In($t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},m1=41943040;class Er{static withCacheSize(e){return new Er(e,Er.DEFAULT_COLLECTION_PERCENTILE,Er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er.DEFAULT_COLLECTION_PERCENTILE=10,Er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Er.DEFAULT=new Er(m1,Er.DEFAULT_COLLECTION_PERCENTILE,Er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Er.DISABLED=new Er(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Xl(0)}static ar(){return new Xl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="LruGarbageCollector",mP=1048576;function lS([n,e],[t,i]){const a=mt(n,t);return a===0?mt(e,i):a}class pP{constructor(e){this.Pr=e,this.buffer=new In(lS),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();lS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Re(oS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ou(t)?Re(oS,"Ignoring IndexedDB error during garbage collection: ",t):await au(t)}await this.Ar(3e5)}))}}class yP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(Zd.ce);const i=new pP(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(aS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aS):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,c,f,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(i=v,f=Date.now(),this.removeTargets(e,i,t)))).next((v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(p=Date.now(),Rl()<=dt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${v} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function _P(n,e){return new yP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this.changes=new Po((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?fe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&wc(i.mutation,a,Ur.empty(),Xt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,pt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=pt()){const a=_o();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=gc();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=_o();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,pt())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,i,a){let l=ws();const c=Ac(),f=(function(){return Ac()})();return t.forEach(((m,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof ka)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),wc(y.mutation,p,y.mutation.getFieldMask(),Xt.now())):c.set(p.key,Ur.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,y)=>c.set(p,y))),t.forEach(((p,y)=>f.set(p,new EP(y,c.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Ac();let a=new on(((c,f)=>c-f)),l=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let y=i.get(m)||Ur.empty();y=f.applyToLocalView(p,y),i.set(m,y);const v=(a.get(f.batchId)||pt()).add(m);a=a.insert(f.batchId,v)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,y=m.value,v=Qw();y.forEach((E=>{if(!l.has(E)){const w=t1(t.get(E),i.get(E));w!==null&&v.set(E,w),l=l.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return fe.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return bM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):fe.resolve(_o());let f=kc,m=l;return c.next((p=>fe.forEach(p,((y,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),l.get(y)?fe.resolve():this.remoteDocumentCache.getEntry(e,y).next((E=>{m=m.insert(y,E)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,pt()))).next((y=>({batchId:f,changes:Yw(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ue(t)).next((i=>{let a=gc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=gc();return this.indexManager.getCollectionParents(e,l).next((f=>fe.forEach(f,(m=>{const p=(function(v,E){return new th(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((y=>{y.forEach(((v,E)=>{c=c.insert(v,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((m,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,Wn.newInvalidDocument(y)))}));let f=gc();return c.forEach(((m,p)=>{const y=l.get(m);y!==void 0&&wc(y.mutation,p,Ur.empty(),Xt.now()),im(t,p)&&(f=f.insert(m,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return fe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:zi(a.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:hP(a.bundledQuery),readTime:zi(a.readTime)}})(t)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.overlays=new on(Ue.comparator),this.Lr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=_o();return fe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),fe.resolve()}getOverlaysForCollection(e,t,i){const a=_o(),l=t.length+1,c=new Ue(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return fe.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new on(((p,y)=>p-y));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=_o(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const f=_o(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,y)=>f.set(p,y))),!(f.size()>=a)););return fe.resolve(f)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new BM(t,i));let l=this.Lr.get(t);l===void 0&&(l=pt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.kr=new In(On.Kr),this.qr=new In(On.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new On(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new On(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Ue(new $t([])),i=new On(t,e),a=new On(t,e+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ue(new $t([])),i=new On(t,e),a=new On(t,e+1);let l=pt();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new On(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class On{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ue.comparator(e.key,t.key)||mt(e.Hr,t.Hr)}static Ur(e,t){return mt(e.Hr,t.Hr)||Ue.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new In(On.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new zM(l,t,i,a);this.mutationQueue.push(c);for(const f of a)this.Jr=this.Jr.add(new On(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?p_:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new On(t,0),a=new On(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const f=this.Zr(c.Hr);l.push(f)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new In(mt);return t.forEach((a=>{const l=new On(a,0),c=new On(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{i=i.add(f.Hr)}))})),fe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Ue.isDocumentKey(l)||(l=l.child(""));const c=new On(new Ue(l),0);let f=new In(mt);return this.Jr.forEachWhile((m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(f=f.add(m.Hr)),!0)}),c),fe.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){xt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return fe.forEach(t.mutations,(a=>{const l=new On(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new On(t,0),a=this.Jr.firstAfterOrEqual(i);return fe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.ti=e,this.docs=(function(){return new on(Ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return fe.resolve(i?i.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let i=ws();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Wn.newInvalidDocument(a))})),fe.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=ws();const c=t.path,f=new Ue(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||JO(WO(y),i)<=0||(a.has(y.key)||im(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,i,a){Ge(9500)}ni(e,t){return fe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new RP(this)}getSize(e){return fe.resolve(this.size)}}class RP extends vP{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),fe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.persistence=e,this.ri=new Po((t=>__(t)),v_),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ii=0,this.si=new A_,this.targetCount=0,this.oi=Xl._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),fe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Xl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.lr(t),fe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),fe.waitFor(l).next((()=>a))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return fe.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),fe.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return fe.resolve(i)}containsKey(e,t){return fe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,t){this._i={},this.overlays={},this.ai=new Zd(0),this.ui=!1,this.ui=!0,this.ci=new AP,this.referenceDelegate=e(this),this.li=new IP(this),this.indexManager=new fP,this.remoteDocumentCache=(function(a){return new CP(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new cP(t),this.Pi=new bP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new wP(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Re("MemoryPersistence","Starting transaction:",e);const a=new xP(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return fe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class xP extends eM{constructor(e){super(),this.currentSequenceNumber=e}}class w_{constructor(e){this.persistence=e,this.Ri=new A_,this.Ai=null}static Vi(e){return new w_(e)}get di(){if(this.Ai)return this.Ai;throw Ge(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),fe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(i=>{const a=Ue.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Rd{constructor(e,t){this.persistence=e,this.fi=new Po((i=>rM(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=_P(this,t)}static Vi(e,t){return new Rd(e,t)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return fe.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?fe.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(i++,l.removeEntry(c,Xe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jf(e.data.value)),t}wr(e,t,i){return fe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return fe.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=pt(),a=pt();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new C_(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return E2()?8:tM(Zn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new NP;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(Rl()<=dt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Il(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(Rl()<=dt.DEBUG&&Re("QueryEngine","Query:",Il(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(Rl()<=dt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Il(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):fe.resolve())}gs(e,t){if(X0(t))return fe.resolve(null);let i=Ui(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Oy(t,null,"F"),i=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=pt(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const p=this.bs(t,f);return this.Ss(t,p,c,m.readTime)?this.gs(e,Oy(t,null,"F")):this.Ds(e,p,t,m)}))))})))))}ps(e,t,i,a){return X0(t)||a.isEqual(Xe.min())?fe.resolve(null):this.fs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,i,a)?fe.resolve(null):(Rl()<=dt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Il(t)),this.Ds(e,c,t,XO(a,kc)).next((f=>f)))}))}bs(e,t){let i=new In($w(e));return t.forEach(((a,l)=>{im(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return Rl()<=dt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Il(t)),this.fs.getDocumentsMatchingQuery(e,t,Ia.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="LocalStore",OP=3e8;class MP{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new on(mt),this.Fs=new Po((l=>__(l)),v_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function PP(n,e,t,i){return new MP(n,e,t,i)}async function g1(n,e){const t=Je(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],f=[];let m=pt();for(const p of a){c.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){f.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next((p=>({Ns:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function kP(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,p,y){const v=p.batch,E=v.keys();let w=fe.resolve();return E.forEach((D=>{w=w.next((()=>y.getEntry(m,D))).next((V=>{const M=p.docVersions.get(D);xt(M!==null,48541),V.version.compareTo(M)<0&&(v.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),y.addEntry(V)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(m,v)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=pt();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function y1(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function VP(n,e){const t=Je(n),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((y,v)=>{const E=a.get(v);if(!E)return;f.push(t.li.removeMatchingKeys(l,y.removedDocuments,v).next((()=>t.li.addMatchingKeys(l,y.addedDocuments,v))));let w=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?w=w.withResumeToken(Fn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,i)),a=a.insert(v,w),(function(V,M,U){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=OP?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(E,w,y)&&f.push(t.li.updateTargetData(l,w))}));let m=ws(),p=pt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(LP(l,c,e.documentUpdates).next((y=>{m=y.Bs,p=y.Ls}))),!i.isEqual(Xe.min())){const y=t.li.getLastRemoteSnapshotVersion(l).next((v=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(y)}return fe.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.vs=a,l)))}function LP(n,e,t){let i=pt(),a=pt();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=ws();return t.forEach(((f,m)=>{const p=l.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Xe.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):Re(R_,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)})),{Bs:c,Ls:a}}))}function jP(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=p_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function UP(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,fe.resolve(a)):t.li.allocateTargetId(i).next((c=>(a=new va(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Ly(n,e,t){const i=Je(n),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!ou(c))throw c;Re(R_,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function uS(n,e,t){const i=Je(n);let a=Xe.min(),l=pt();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,p,y){const v=Je(m),E=v.Fs.get(y);return E!==void 0?fe.resolve(v.vs.get(E)):v.li.getTargetData(p,y)})(i,c,Ui(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:Xe.min(),t?l:pt()))).next((f=>(zP(i,AM(e),f),{documents:f,ks:l})))))}function zP(n,e,t){let i=n.Ms.get(e)||Xe.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Ms.set(e,i)}class cS{constructor(){this.activeTargetIds=NM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BP{constructor(){this.vo=new cS,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new cS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="ConnectivityMonitor";class fS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Re(hS,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Re(hS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf=null;function jy(){return zf===null?zf=(function(){return 268435456+Math.round(2147483648*Math.random())})():zf++,"0x"+zf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="RestConnection",FP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class qP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===Td?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=jy(),f=this.Qo(e,t.toUriEncodedString());Re(ey,`Sending RPC '${e}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,a,l);const{host:p}=new URL(f),y=ru(p);return this.zo(e,f,m,i,y).then((v=>(Re(ey,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw $l(ey,`RPC '${e}' ${c} failed with error: `,v,"url: ",f,"request:",i),v}))}jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+su})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=FP[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="WebChannelConnection",cc=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Ll extends qP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ll.c_){const e=bw();cc(e,Tw.STAT_EVENT,(t=>{t.stat===wy.PROXY?Re(Kn,"STAT_EVENT: detected buffering proxy"):t.stat===wy.NOPROXY&&Re(Kn,"STAT_EVENT: detected no buffering proxy")})),Ll.c_=!0}}zo(e,t,i,a,l){const c=jy();return new Promise(((f,m)=>{const p=new vw;p.setWithCredentials(!0),p.listenOnce(Ew.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Wf.NO_ERROR:const v=p.getResponseJson();Re(Kn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),f(v);break;case Wf.TIMEOUT:Re(Kn,`RPC '${e}' ${c} timed out`),m(new Ae(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Wf.HTTP_ERROR:const E=p.getStatus();if(Re(Kn,`RPC '${e}' ${c} failed with status:`,E,"response text:",p.getResponseText()),E>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const D=w==null?void 0:w.error;if(D&&D.status&&D.message){const V=(function(U){const j=U.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(j)>=0?j:ue.UNKNOWN})(D.status);m(new Ae(V,D.message))}else m(new Ae(ue.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Ae(ue.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Re(Kn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);Re(Kn,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",y,i,15)}))}T_(e,t,i){const a=jy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const p=l.join("");Re(Kn,`Creating RPC '${e}' stream ${a}: ${p}`,f);const y=c.createWebChannel(p,f);this.I_(y);let v=!1,E=!1;const w=new GP({Ho:D=>{E?Re(Kn,`Not sending because RPC '${e}' stream ${a} is closed:`,D):(v||(Re(Kn,`Opening RPC '${e}' stream ${a} transport.`),y.open(),v=!0),Re(Kn,`RPC '${e}' stream ${a} sending:`,D),y.send(D))},Jo:()=>y.close()});return cc(y,pc.EventType.OPEN,(()=>{E||(Re(Kn,`RPC '${e}' stream ${a} transport opened.`),w.i_())})),cc(y,pc.EventType.CLOSE,(()=>{E||(E=!0,Re(Kn,`RPC '${e}' stream ${a} transport closed`),w.o_(),this.E_(y))})),cc(y,pc.EventType.ERROR,(D=>{E||(E=!0,$l(Kn,`RPC '${e}' stream ${a} transport errored. Name:`,D.name,"Message:",D.message),w.o_(new Ae(ue.UNAVAILABLE,"The operation could not be completed")))})),cc(y,pc.EventType.MESSAGE,(D=>{var V;if(!E){const M=D.data[0];xt(!!M,16349);const U=M,j=(U==null?void 0:U.error)||((V=U[0])==null?void 0:V.error);if(j){Re(Kn,`RPC '${e}' stream ${a} received error:`,j);const q=j.status;let Q=(function(S){const C=bn[S];if(C!==void 0)return r1(C)})(q),W=j.message;Q===void 0&&(Q=ue.INTERNAL,W="Unknown error status: "+q+" with message "+j.message),E=!0,w.o_(new Ae(Q,W)),y.close()}else Re(Kn,`RPC '${e}' stream ${a} received:`,M),w.__(M)}})),Ll.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Sw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(n){return new Ll(n)}function ty(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(n){return new XM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ll.c_=!1;class _1{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&Re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="PersistentStream";class v1{constructor(e,t,i,a,l,c,f,m){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(As(t.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new Ae(ue.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(dS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Re(dS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KP extends v1{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ZM(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Xe.min():c.readTime?zi(c.readTime):Xe.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Vy(this.serializer),t.addTarget=(function(l,c){let f;const m=c.target;if(f=Ny(m)?{documents:nP(l,m)}:{query:rP(l,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=a1(l,c.resumeToken);const p=My(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(Xe.min())>0){f.readTime=Cd(l,c.snapshotVersion.toTimestamp());const p=My(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const i=sP(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Vy(this.serializer),t.removeTarget=e,this.K_(t)}}class YP extends v1{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return xt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=tP(e.writeResults,e.commitTime),i=zi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Vy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>eP(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{}class XP extends QP{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Py(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ae(ue.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,Py(t,i),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ae(ue.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function WP(n,e,t,i){return new XP(n,e,t,i)}class JP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(As(t),this.aa=!1):Re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="RemoteStore";class ZP{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{ko(this)&&(Re(Ro,"Restarting streams for network reachability change."),await(async function(m){const p=Je(m);p.Ea.add(4),await ih(p),p.Va.set("Unknown"),p.Ea.delete(4),await cm(p)})(this))}))})),this.Va=new JP(i,a)}}async function cm(n){if(ko(n))for(const e of n.Ra)await e(!0)}async function ih(n){for(const e of n.Ra)await e(!1)}function E1(n,e){const t=Je(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),D_(t)?N_(t):lu(t).O_()&&x_(t,e))}function I_(n,e){const t=Je(n),i=lu(t);t.Ia.delete(e),i.O_()&&T1(t,e),t.Ia.size===0&&(i.O_()?i.L_():ko(t)&&t.Va.set("Unknown"))}function x_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}lu(n).Z_(e)}function T1(n,e){n.da.$e(e),lu(n).X_(e)}function N_(n){n.da=new $M({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),lu(n).start(),n.Va.ua()}function D_(n){return ko(n)&&!lu(n).x_()&&n.Ia.size>0}function ko(n){return Je(n).Ea.size===0}function b1(n){n.da=void 0}async function e4(n){n.Va.set("Online")}async function t4(n){n.Ia.forEach(((e,t)=>{x_(n,e)}))}async function n4(n,e){b1(n),D_(n)?(n.Va.ha(e),N_(n)):n.Va.set("Unknown")}async function r4(n,e,t){if(n.Va.set("Online"),e instanceof s1&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.da.removeTarget(f))})(n,e)}catch(i){Re(Ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Id(n,i)}else if(e instanceof td?n.da.Xe(e):e instanceof i1?n.da.st(e):n.da.tt(e),!t.isEqual(Xe.min()))try{const i=await y1(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(p);y&&l.Ia.set(p,y.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,p)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(Fn.EMPTY_BYTE_STRING,y.snapshotVersion)),T1(l,m);const v=new va(y.target,m,p,y.sequenceNumber);x_(l,v)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){Re(Ro,"Failed to raise snapshot:",i),await Id(n,i)}}async function Id(n,e,t){if(!ou(e))throw e;n.Ea.add(1),await ih(n),n.Va.set("Offline"),t||(t=()=>y1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Re(Ro,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await cm(n)}))}function S1(n,e){return e().catch((t=>Id(n,t,e)))}async function hm(n){const e=Je(n),t=Oa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:p_;for(;i4(e);)try{const a=await jP(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,s4(e,a)}catch(a){await Id(e,a)}A1(e)&&w1(e)}function i4(n){return ko(n)&&n.Ta.length<10}function s4(n,e){n.Ta.push(e);const t=Oa(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function A1(n){return ko(n)&&!Oa(n).x_()&&n.Ta.length>0}function w1(n){Oa(n).start()}async function a4(n){Oa(n).ra()}async function o4(n){const e=Oa(n);for(const t of n.Ta)e.ea(t.mutations)}async function l4(n,e,t){const i=n.Ta.shift(),a=T_.from(i,e,t);await S1(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await hm(n)}async function u4(n,e){e&&Oa(n).Y_&&await(async function(i,a){if((function(c){return FM(c)&&c!==ue.ABORTED})(a.code)){const l=i.Ta.shift();Oa(i).B_(),await S1(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await hm(i)}})(n,e),A1(n)&&w1(n)}async function mS(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Re(Ro,"RemoteStore received new credentials");const i=ko(t);t.Ea.add(3),await ih(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await cm(t)}async function c4(n,e){const t=Je(n);e?(t.Ea.delete(2),await cm(t)):e||(t.Ea.add(2),await ih(t),t.Va.set("Unknown"))}function lu(n){return n.ma||(n.ma=(function(t,i,a){const l=Je(t);return l.sa(),new KP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:e4.bind(null,n),Yo:t4.bind(null,n),t_:n4.bind(null,n),J_:r4.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),D_(n)?N_(n):n.Va.set("Unknown")):(await n.ma.stop(),b1(n))}))),n.ma}function Oa(n){return n.fa||(n.fa=(function(t,i,a){const l=Je(t);return l.sa(),new YP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:a4.bind(null,n),t_:u4.bind(null,n),ta:o4.bind(null,n),na:l4.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await hm(n)):(await n.fa.stop(),n.Ta.length>0&&(Re(Ro,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,f=new O_(e,t,c,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function M_(n,e){if(As("AsyncQueue",`${e}: ${n}`),ou(n))return new Ae(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{static emptySet(e){return new jl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ue.comparator(t.key,i.key):(t,i)=>Ue.comparator(t.key,i.key),this.keyedMap=gc(),this.sortedSet=new on(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new jl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this.ga=new on(Ue.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ge(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Wl{constructor(e,t,i,a,l,c,f,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Wl(e,t,jl.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class f4{constructor(){this.queries=gS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Je(t),l=a.queries;a.queries=gS(),l.forEach(((c,f)=>{for(const m of f.ba)m.onError(i)}))})(this,new Ae(ue.ABORTED,"Firestore shutting down"))}}function gS(){return new Po((n=>Gw(n)),rm)}async function P_(n,e){const t=Je(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new h4,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=M_(c,`Initialization of query '${Il(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&V_(t)}async function k_(n,e){const t=Je(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function d4(n,e){const t=Je(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(a)&&(i=!0);c.wa=a}}i&&V_(t)}function m4(n,e,t){const i=Je(n),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function V_(n){n.Ca.forEach((e=>{e.next()}))}var Uy,yS;(yS=Uy||(Uy={})).Ma="default",yS.Cache="cache";class L_{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Wl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Uy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.key=e}}class R1{constructor(e){this.key=e}}class p4{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.eu=$w(e),this.tu=new jl(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new pS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,v)=>{const E=a.get(y),w=im(this.query,v)?v:null,D=!!E&&this.mutatedKeys.has(E.key),V=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;E&&w?E.data.isEqual(w.data)?D!==V&&(i.track({type:3,doc:w}),M=!0):this.su(E,w)||(i.track({type:2,doc:w}),M=!0,(m&&this.eu(w,m)>0||p&&this.eu(w,p)<0)&&(f=!0)):!E&&w?(i.track({type:0,doc:w}),M=!0):E&&!w&&(i.track({type:1,doc:E}),M=!0,(m||p)&&(f=!0)),M&&(w?(c=c.add(w),l=V?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{tu:c,iu:i,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,v)=>(function(w,D){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:M})}};return V(w)-V(D)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],m=this.Ya.size===0&&this.current&&!a?1:0,p=m!==this.Xa;return this.Xa=m,c.length!==0||p?{snapshot:new Wl(this.query,e.tu,l,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=pt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new R1(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new C1(i))})),t}cu(e){this.Za=e.ks,this.Ya=pt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Wl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const j_="SyncEngine";class g4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class y4{constructor(e){this.key=e,this.hu=!1}}class _4{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Po((f=>Gw(f)),rm),this.Iu=new Map,this.Eu=new Set,this.Ru=new on(Ue.comparator),this.Au=new Map,this.Vu=new A_,this.du={},this.mu=new Map,this.fu=Xl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function v4(n,e,t=!0){const i=M1(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await I1(i,e,t,!0),a}async function E4(n,e){const t=M1(n);await I1(t,e,!0,!1)}async function I1(n,e,t,i){const a=await UP(n.localStore,Ui(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await T4(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&E1(n.remoteStore,a),f}async function T4(n,e,t,i,a){n.pu=(v,E,w)=>(async function(V,M,U,j){let q=M.view.ru(U);q.Ss&&(q=await uS(V.localStore,M.query,!1).then((({documents:S})=>M.view.ru(S,q))));const Q=j&&j.targetChanges.get(M.targetId),W=j&&j.targetMismatches.get(M.targetId)!=null,K=M.view.applyChanges(q,V.isPrimaryClient,Q,W);return vS(V,M.targetId,K.au),K.snapshot})(n,v,E,w);const l=await uS(n.localStore,e,!0),c=new p4(e,l.ks),f=c.ru(l.documents),m=rh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),p=c.applyChanges(f,n.isPrimaryClient,m);vS(n,t,p.au);const y=new g4(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function b4(n,e,t){const i=Je(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!rm(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Ly(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&I_(i.remoteStore,a.targetId),zy(i,a.targetId)})).catch(au)):(zy(i,a.targetId),await Ly(i.localStore,a.targetId,!0))}async function S4(n,e){const t=Je(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),I_(t.remoteStore,i.targetId))}async function A4(n,e,t){const i=D4(n);try{const a=await(function(c,f){const m=Je(c),p=Xt.now(),y=f.reduce(((w,D)=>w.add(D.key)),pt());let v,E;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let D=ws(),V=pt();return m.xs.getEntries(w,y).next((M=>{D=M,D.forEach(((U,j)=>{j.isValidDocument()||(V=V.add(U))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,D))).next((M=>{v=M;const U=[];for(const j of f){const q=jM(j,v.get(j.key).overlayedDocument);q!=null&&U.push(new ka(j.key,q,Lw(q.value.mapValue),Sr.exists(!0)))}return m.mutationQueue.addMutationBatch(w,p,U,f)})).next((M=>{E=M;const U=M.applyToLocalDocumentSet(v,V);return m.documentOverlayCache.saveOverlays(w,M.batchId,U)}))})).then((()=>({batchId:E.batchId,changes:Yw(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,f,m){let p=c.du[c.currentUser.toKey()];p||(p=new on(mt)),p=p.insert(f,m),c.du[c.currentUser.toKey()]=p})(i,a.batchId,t),await sh(i,a.changes),await hm(i.remoteStore)}catch(a){const l=M_(a,"Failed to persist write");t.reject(l)}}async function x1(n,e){const t=Je(n);try{const i=await VP(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(xt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?xt(c.hu,14607):a.removedDocuments.size>0&&(xt(c.hu,42227),c.hu=!1))})),await sh(t,i,e)}catch(i){await au(i)}}function _S(n,e,t){const i=Je(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const m=Je(c);m.onlineState=f;let p=!1;m.queries.forEach(((y,v)=>{for(const E of v.ba)E.va(f)&&(p=!0)})),p&&V_(m)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function w4(n,e,t){const i=Je(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new on(Ue.comparator);c=c.insert(l,Wn.newNoDocument(l,Xe.min()));const f=pt().add(l),m=new lm(Xe.min(),new Map,new on(mt),c,f);await x1(i,m),i.Ru=i.Ru.remove(l),i.Au.delete(e),U_(i)}else await Ly(i.localStore,e,!1).then((()=>zy(i,e,t))).catch(au)}async function C4(n,e){const t=Je(n),i=e.batch.batchId;try{const a=await kP(t.localStore,e);D1(t,i,null),N1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await sh(t,a)}catch(a){await au(a)}}async function R4(n,e,t){const i=Je(n);try{const a=await(function(c,f){const m=Je(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return m.mutationQueue.lookupMutationBatch(p,f).next((v=>(xt(v!==null,37113),y=v.keys(),m.mutationQueue.removeMutationBatch(p,v)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>m.localDocuments.getDocuments(p,y)))}))})(i.localStore,e);D1(i,e,t),N1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await sh(i,a)}catch(a){await au(a)}}function N1(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function D1(n,e,t){const i=Je(n);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function zy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||O1(n,i)}))}function O1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(I_(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),U_(n))}function vS(n,e,t){for(const i of t)i instanceof C1?(n.Vu.addReference(i.key,e),I4(n,i)):i instanceof R1?(Re(j_,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||O1(n,i.key)):Ge(19791,{wu:i})}function I4(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(Re(j_,"New document in limbo: "+t),n.Eu.add(i),U_(n))}function U_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ue($t.fromString(e)),i=n.fu.next();n.Au.set(i,new y4(t)),n.Ru=n.Ru.insert(t,i),E1(n.remoteStore,new va(Ui(nm(t.path)),i,"TargetPurposeLimboResolution",Zd.ce))}}async function sh(n,e,t){const i=Je(n),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{c.push(i.pu(m,e,t).then((p=>{var y;if((p||t)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){a.push(p);const v=C_.Es(m.targetId,p);l.push(v)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(m,p){const y=Je(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>fe.forEach(p,(E=>fe.forEach(E.Ts,(w=>y.persistence.referenceDelegate.addReference(v,E.targetId,w))).next((()=>fe.forEach(E.Is,(w=>y.persistence.referenceDelegate.removeReference(v,E.targetId,w)))))))))}catch(v){if(!ou(v))throw v;Re(R_,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const w=y.vs.get(E),D=w.snapshotVersion,V=w.withLastLimboFreeSnapshotVersion(D);y.vs=y.vs.insert(E,V)}}})(i.localStore,l))}async function x4(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Re(j_,"User change. New user:",e.toKey());const i=await g1(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new Ae(ue.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await sh(t,i.Ns)}}function N4(n,e){const t=Je(n),i=t.Au.get(e);if(i&&i.hu)return pt().add(i.key);{let a=pt();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function M1(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=x1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w4.bind(null,e),e.Pu.J_=d4.bind(null,e.eventManager),e.Pu.yu=m4.bind(null,e.eventManager),e}function D4(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R4.bind(null,e),e}class xd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=um(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return PP(this.persistence,new DP,e.initialUser,this.serializer)}Cu(e){return new p1(w_.Vi,this.serializer)}Du(e){return new BP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xd.provider={build:()=>new xd};class O4 extends xd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){xt(this.persistence.referenceDelegate instanceof Rd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new gP(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Er.withCacheSize(this.cacheSizeBytes):Er.DEFAULT;return new p1((i=>Rd.Vi(i,t)),this.serializer)}}class By{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_S(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=x4.bind(null,this.syncEngine),await c4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new f4})()}createDatastore(e){const t=um(e.databaseInfo.databaseId),i=$P(e.databaseInfo);return WP(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,f){return new ZP(i,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>_S(this.syncEngine,t,0)),(function(){return fS.v()?new fS:new HP})())}createSyncEngine(e,t){return(function(a,l,c,f,m,p,y){const v=new _4(a,l,c,f,m,p);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Je(a);Re(Ro,"RemoteStore shutting down."),l.Ea.add(5),await ih(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}By.provider={build:()=>new By};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):As("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="FirestoreClient";class M4{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=Xn.UNAUTHENTICATED,this.clientId=m_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Re(Ma,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Re(Ma,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=M_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ny(n,e){n.asyncQueue.verifyOperationInProgress(),Re(Ma,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await g1(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function ES(n,e){n.asyncQueue.verifyOperationInProgress();const t=await P4(n);Re(Ma,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>mS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>mS(e.remoteStore,a))),n._onlineComponents=e}async function P4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(Ma,"Using user provided OfflineComponentProvider");try{await ny(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ue.FAILED_PRECONDITION||a.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;$l("Error using user provided cache. Falling back to memory cache: "+t),await ny(n,new xd)}}else Re(Ma,"Using default OfflineComponentProvider"),await ny(n,new O4(void 0));return n._offlineComponents}async function P1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(Ma,"Using user provided OnlineComponentProvider"),await ES(n,n._uninitializedComponentsProvider._online)):(Re(Ma,"Using default OnlineComponentProvider"),await ES(n,new By))),n._onlineComponents}function k4(n){return P1(n).then((e=>e.syncEngine))}async function Nd(n){const e=await P1(n),t=e.eventManager;return t.onListen=v4.bind(null,e.syncEngine),t.onUnlisten=b4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S4.bind(null,e.syncEngine),t}function V4(n,e,t,i){const a=new z_(i),l=new L_(e,a,t);return n.asyncQueue.enqueueAndForget((async()=>P_(await Nd(n),l))),()=>{a.Nu(),n.asyncQueue.enqueueAndForget((async()=>k_(await Nd(n),l)))}}function L4(n,e,t={}){const i=new Ts;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,p){const y=new z_({next:E=>{y.Nu(),c.enqueueAndForget((()=>k_(l,v)));const w=E.docs.has(f);!w&&E.fromCache?p.reject(new Ae(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&E.fromCache&&m&&m.source==="server"?p.reject(new Ae(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new L_(nm(f.path),y,{includeMetadataChanges:!0,Ka:!0});return P_(l,v)})(await Nd(n),n.asyncQueue,e,t,i))),i.promise}function j4(n,e,t={}){const i=new Ts;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,p){const y=new z_({next:E=>{y.Nu(),c.enqueueAndForget((()=>k_(l,v))),E.fromCache&&m.source==="server"?p.reject(new Ae(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new L_(f,y,{includeMetadataChanges:!0,Ka:!0});return P_(l,v)})(await Nd(n),n.asyncQueue,e,t,i))),i.promise}function U4(n,e){const t=new Ts;return n.asyncQueue.enqueueAndForget((async()=>A4(await k4(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4="ComponentProvider",TS=new Map;function B4(n,e,t,i,a){return new aM(n,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,k1(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="firestore.googleapis.com",bS=!0;class SS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=V1,this.ssl=bS}else this.host=e.host,this.ssl=e.ssl??bS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=m1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mP)throw new Ae(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fm{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new UO;switch(i.type){case"firstParty":return new FO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ae(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=TS.get(t);i&&(Re(z4,"Removing Datastore"),TS.delete(t),i.terminate())})(this),Promise.resolve()}}function H4(n,e,t,i={}){var p;n=br(n,fm);const a=ru(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;a&&(cw(`https://${f}`),hw("Firestore",!0)),l.host!==V1&&l.host!==f&&$l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:a,emulatorOptions:i};if(!Ao(m,c)&&(n._setSettings(m),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=Xn.MOCK_USER;else{y=h2(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new Ae(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Xn(E)}n._authCredentials=new zO(new ww(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vo(this.firestore,e,this._query)}}class fn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fn(this.firestore,e,this._key)}toJSON(){return{type:fn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(eh(t,fn._jsonSchema))return new fn(e,i||null,new Ue($t.fromString(t.referencePath)))}}fn._jsonSchemaVersion="firestore/documentReference/1.0",fn._jsonSchema={type:wn("string",fn._jsonSchemaVersion),referencePath:wn("string")};class wa extends Vo{constructor(e,t,i){super(e,t,nm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new Ue(e))}withConverter(e){return new wa(this.firestore,e,this._path)}}function Cs(n,e,...t){if(n=xn(n),Cw("collection","path",e),n instanceof fm){const i=$t.fromString(e,...t);return V0(i),new wa(n,null,i)}{if(!(n instanceof fn||n instanceof wa))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child($t.fromString(e,...t));return V0(i),new wa(n.firestore,null,i)}}function Jn(n,e,...t){if(n=xn(n),arguments.length===1&&(e=m_.newId()),Cw("doc","path",e),n instanceof fm){const i=$t.fromString(e,...t);return k0(i),new fn(n,null,new Ue(i))}{if(!(n instanceof fn||n instanceof wa))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child($t.fromString(e,...t));return k0(i),new fn(n.firestore,n instanceof wa?n.converter:null,new Ue(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="AsyncQueue";class wS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _1(this,"async_queue_retry"),this._c=()=>{const i=ty();i&&Re(AS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=ty();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ty();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ts;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ou(e))throw e;Re(AS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,As("INTERNAL UNHANDLED ERROR: ",CS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=O_.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ge(47125,{Pc:CS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function CS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Rs extends fm{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new wS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wS(e),this._firestoreClient=void 0,await e}}}function F4(n,e){const t=typeof n=="object"?n:pw(),i=typeof n=="string"?n:Td,a=f_(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=u2("firestore");l&&H4(a,...l)}return a}function ah(n){if(n._terminated)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||q4(n),n._firestoreClient}function q4(n){var i,a,l,c;const e=n._freezeSettings(),t=B4(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(a=n._app)==null?void 0:a.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new M4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ni(Fn.fromBase64String(e))}catch(t){throw new Ae(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ni(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ni._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(eh(e,ni._jsonSchema))return ni.fromBase64String(e.bytes)}}ni._jsonSchemaVersion="firestore/bytes/1.0",ni._jsonSchema={type:wn("string",ni._jsonSchemaVersion),bytes:wn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(e){if(eh(e,Bi._jsonSchema))return new Bi(e.latitude,e.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:wn("string",Bi._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(eh(e,_i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _i(e.vectorValues);throw new Ae(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_i._jsonSchemaVersion="firestore/vectorValue/1.0",_i._jsonSchema={type:wn("string",_i._jsonSchemaVersion),vectorValues:wn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=/^__.*__$/;class $4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ka(e,this.data,this.fieldMask,t,this.fieldTransforms):new nh(e,this.data,t,this.fieldTransforms)}}class L1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ka(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function j1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{dataSource:n})}}class B_{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new B_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Dd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(j1(this.dataSource)&&G4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class K4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||um(e)}createContext(e,t,i,a=!1){return new B_({dataSource:e,methodName:t,targetDoc:i,path:Hn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pm(n){const e=n._freezeSettings(),t=um(n._databaseId);return new K4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function U1(n,e,t,i,a,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,a);F_("Data must be an object, but it was:",c,i);const f=H1(i,c);let m,p;if(l.merge)m=new Ur(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const E=Jl(e,v,t);if(!c.contains(E))throw new Ae(ue.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);G1(y,E)||y.push(E)}m=new Ur(y),p=c.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,p=c.fieldTransforms;return new $4(new Tr(f),m,p)}class gm extends mm{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gm}}class H_ extends mm{_toFieldTransform(e){return new PM(e.path,new Uc)}isEqual(e){return e instanceof H_}}function z1(n,e,t,i){const a=n.createContext(1,e,t);F_("Data must be an object, but it was:",a,i);const l=[],c=Tr.empty();Pa(i,((m,p)=>{const y=q1(e,m,t);p=xn(p);const v=a.childContextForFieldPath(y);if(p instanceof gm)l.push(y);else{const E=oh(p,v);E!=null&&(l.push(y),c.set(y,E))}}));const f=new Ur(l);return new L1(c,f,a.fieldTransforms)}function B1(n,e,t,i,a,l){const c=n.createContext(1,e,t),f=[Jl(e,i,t)],m=[a];if(l.length%2!=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)f.push(Jl(e,l[E])),m.push(l[E+1]);const p=[],y=Tr.empty();for(let E=f.length-1;E>=0;--E)if(!G1(p,f[E])){const w=f[E];let D=m[E];D=xn(D);const V=c.childContextForFieldPath(w);if(D instanceof gm)p.push(w);else{const M=oh(D,V);M!=null&&(p.push(w),y.set(w,M))}}const v=new Ur(p);return new L1(y,v,c.fieldTransforms)}function Y4(n,e,t,i=!1){return oh(t,n.createContext(i?4:3,e))}function oh(n,e){if(F1(n=xn(n)))return F_("Unsupported field value:",e,n),H1(n,e);if(n instanceof mm)return(function(i,a){if(!j1(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const f of i){let m=oh(f,a.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=xn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return DM(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Xt.fromDate(i);return{timestampValue:Cd(a.serializer,l)}}if(i instanceof Xt){const l=new Xt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Cd(a.serializer,l)}}if(i instanceof Bi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ni)return{bytesValue:a1(a.serializer,i._byteString)};if(i instanceof fn){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:S_(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof _i)return(function(c,f){const m=c instanceof _i?c.toArray():c;return{mapValue:{fields:{[kw]:{stringValue:Vw},[bd]:{arrayValue:{values:m.map((y=>{if(typeof y!="number")throw f.createError("VectorValues must only contain numeric values.");return E_(f.serializer,y)}))}}}}}})(i,a);if(d1(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Jd(i)}`)})(n,e)}function H1(n,e){const t={};return xw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(n,((i,a)=>{const l=oh(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function F1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xt||n instanceof Bi||n instanceof ni||n instanceof fn||n instanceof mm||n instanceof _i||d1(n))}function F_(n,e,t){if(!F1(t)||!Rw(t)){const i=Jd(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Jl(n,e,t){if((e=xn(e))instanceof dm)return e._internalPath;if(typeof e=="string")return q1(n,e);throw Dd("Field path arguments must be of type string or ",n,!1,void 0,t)}const Q4=new RegExp("[~\\*/\\[\\]]");function q1(n,e,t){if(e.search(Q4)>=0)throw Dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dm(...e.split("."))._internalPath}catch{throw Dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Dd(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new Ae(ue.INVALID_ARGUMENT,f+n+m)}function G1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{convertValue(e,t="none"){switch(Da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Na(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Pa(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[bd].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>gn(c.doubleValue)));return new _i(t)}convertGeoPoint(e){return new Bi(gn(e.latitude),gn(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=tm(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Vc(e));default:return null}}convertTimestamp(e){const t=xa(e);return new Xt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=$t.fromString(e);xt(f1(i),9688,{name:e});const a=new Lc(i.get(1),i.get(3)),l=new Ue(i.popFirst(5));return a.isEqual(t)||As(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends X4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ni(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}function W4(){return new H_("serverTimestamp")}const RS="@firebase/firestore",IS="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Jl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class J4 extends $1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ae(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class G_{}class Z4 extends G_{}function Va(n,e,...t){let i=[];e instanceof G_&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((m=>m instanceof $_)).length,f=l.filter((m=>m instanceof ym)).length;if(c>1||c>0&&f>0)throw new Ae(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class ym extends Z4{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ym(e,t,i)}_apply(e){const t=this._parse(e);return Y1(e._query,t),new Vo(e.firestore,e.converter,Dy(e._query,t))}_parse(e){const t=pm(e.firestore);return(function(l,c,f,m,p,y,v){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){DS(v,y);const D=[];for(const V of v)D.push(NS(m,l,V));E={arrayValue:{values:D}}}else E=NS(m,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||DS(v,y),E=Y4(f,c,v,y==="in"||y==="not-in");return An.create(p,y,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function _m(n,e,t){const i=e,a=Jl("where",n);return ym._create(a,i,t)}class $_ extends G_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ei.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const m of f)Y1(c,m),c=Dy(c,m)})(e._query,t),new Vo(e.firestore,e.converter,Dy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function NS(n,e,t){if(typeof(t=xn(t))=="string"){if(t==="")throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qw(e)&&t.indexOf("/")!==-1)throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child($t.fromString(t));if(!Ue.isDocumentKey(i))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return q0(n,new Ue(i))}if(t instanceof fn)return q0(n,t._key);throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jd(t)}.`)}function DS(n,e){if(!Array.isArray(n)||n.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y1(n,e){const t=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ae(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Q1(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class _c{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class To extends $1{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Jl("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=To._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}To._jsonSchemaVersion="firestore/documentSnapshot/1.0",To._jsonSchema={type:wn("string",To._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class nd extends To{data(e={}){return super.data(e)}}class bo{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new _c(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new nd(this._firestore,this._userDataWriter,i.key,i,new _c(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const m=new nd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new _c(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new nd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new _c(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),y=c.indexOf(f.doc.key)),{type:ek(f.type),doc:m,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=m_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ek(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bo._jsonSchemaVersion="firestore/querySnapshot/1.0",bo._jsonSchema={type:wn("string",bo._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pm(e)}set(e,t,i){this._verifyNotCommitted();const a=ry(e,this._firestore),l=Q1(a.converter,t,i),c=U1(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,Sr.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=ry(e,this._firestore);let c;return c=typeof(t=xn(t))=="string"||t instanceof dm?B1(this._dataReader,"WriteBatch.update",l._key,t,i,a):z1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ry(e,this._firestore);return this._mutations=this._mutations.concat(new om(t._key,Sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ry(n,e){if((n=xn(n)).firestore!==e)throw new Ae(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(n){n=br(n,fn);const e=br(n.firestore,Rs),t=ah(e);return L4(t,n._key).then((i=>W1(e,n,i)))}function uu(n){n=br(n,Vo);const e=br(n.firestore,Rs),t=ah(e),i=new q_(e);return K1(n._query),j4(t,n._query).then((a=>new bo(e,i,n,a)))}function vm(n,e,t){n=br(n,fn);const i=br(n.firestore,Rs),a=Q1(n.converter,e,t),l=pm(i);return Em(i,[U1(l,"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Sr.none())])}function X1(n,e,t,...i){n=br(n,fn);const a=br(n.firestore,Rs),l=pm(a);let c;return c=typeof(e=xn(e))=="string"||e instanceof dm?B1(l,"updateDoc",n._key,e,t,i):z1(l,"updateDoc",n._key,e),Em(a,[c.toMutation(n._key,Sr.exists(!0))])}function OS(n){return Em(br(n.firestore,Rs),[new om(n._key,Sr.none())])}function go(n,...e){var p,y,v;n=xn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||xS(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(xS(e[i])){const E=e[i];e[i]=(p=E.next)==null?void 0:p.bind(E),e[i+1]=(y=E.error)==null?void 0:y.bind(E),e[i+2]=(v=E.complete)==null?void 0:v.bind(E)}let l,c,f;if(n instanceof fn)c=br(n.firestore,Rs),f=nm(n._key.path),l={next:E=>{e[i]&&e[i](W1(c,n,E))},error:e[i+1],complete:e[i+2]};else{const E=br(n,Vo);c=br(E.firestore,Rs),f=E._query;const w=new q_(c);l={next:D=>{e[i]&&e[i](new bo(c,w,E,D))},error:e[i+1],complete:e[i+2]},K1(n._query)}const m=ah(c);return V4(m,f,a,l)}function Em(n,e){const t=ah(n);return U4(t,e)}function W1(n,e,t){const i=t.docs.get(e._key),a=new q_(n);return new To(n,a,e._key,i,new _c(t.hasPendingWrites,t.fromCache),e.converter)}function J1(n){return n=br(n,Rs),ah(n),new tk(n,(e=>Em(n,e)))}(function(e,t=!0){jO(iu),Gl(new wo("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new Rs(new BO(i.getProvider("auth-internal")),new qO(c,i.getProvider("app-check-internal")),oM(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Sa(RS,IS,e),Sa(RS,IS,"esm2020")})();var nk="firebase",rk="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sa(nk,rk,"app");function Z1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ik=Z1,eC=new Jc("auth","Firebase",Z1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new c_("@firebase/auth");function sk(n,...e){Od.logLevel<=dt.WARN&&Od.warn(`Auth (${iu}): ${n}`,...e)}function rd(n,...e){Od.logLevel<=dt.ERROR&&Od.error(`Auth (${iu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(n,...e){throw Y_(n,...e)}function vi(n,...e){return Y_(n,...e)}function K_(n,e,t){const i={...ik(),[e]:t};return new Jc("auth","Firebase",i).create(e,{appName:n.name})}function So(n){return K_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ak(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Gi(n,"argument-error"),K_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Y_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return eC.create(n,...e)}function Ke(n,e,...t){if(!n)throw Y_(e,...t)}function _s(n){const e="INTERNAL ASSERTION FAILED: "+n;throw rd(e),new Error(e)}function Is(n,e){n||_s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function ok(){return MS()==="http:"||MS()==="https:"}function MS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ok()||y2()||"connection"in navigator)?navigator.onLine:!0}function uk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Is(t>e,"Short delay should be less than long delay!"),this.isMobile=m2()||_2()}get(){return lk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(n,e){Is(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fk=new uh(3e4,6e4);function X_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function cu(n,e,t,i,a={}){return nC(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=Zc({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...l};return g2()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&ru(n.emulatorConfig.host)&&(p.credentials="include"),tC.fetch()(await rC(n,n.config.apiHost,t,f),p)})}async function nC(n,e,t){n._canInitEmulator=!1;const i={...ck,...e};try{const a=new mk(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Bf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bf(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Bf(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Bf(n,"user-disabled",c);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw K_(n,y,p);Gi(n,y)}}catch(a){if(a instanceof Ds)throw a;Gi(n,"network-request-failed",{message:String(a)})}}async function dk(n,e,t,i,a={}){const l=await cu(n,e,t,i,a);return"mfaPendingCredential"in l&&Gi(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function rC(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?Q_(n.config,a):`${n.config.apiScheme}://${a}`;return hk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class mk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(vi(this.auth,"network-request-failed")),fk.get())})}}function Bf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=vi(n,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(n,e){return cu(n,"POST","/v1/accounts:delete",e)}async function Md(n,e){return cu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gk(n,e=!1){const t=xn(n),i=await t.getIdToken(e),a=W_(i);Ke(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Cc(iy(a.auth_time)),issuedAtTime:Cc(iy(a.iat)),expirationTime:Cc(iy(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function iy(n){return Number(n)*1e3}function W_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return rd("JWT malformed, contained fewer than 3 sections"),null;try{const a=aw(t);return a?JSON.parse(a):(rd("Failed to decode base64 JWT payload"),null)}catch(a){return rd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function PS(n){const e=W_(n);return Ke(e,"internal-error"),Ke(typeof e.exp<"u","internal-error"),Ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ds&&yk(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function yk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cc(this.lastLoginAt),this.creationTime=Cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pd(n){var v;const e=n.auth,t=await n.getIdToken(),i=await Hc(n,Md(e,{idToken:t}));Ke(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=(v=a.providerUserInfo)!=null&&v.length?iC(a.providerUserInfo):[],c=Ek(n.providerData,l),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(c!=null&&c.length),p=f?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Fy(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function vk(n){const e=xn(n);await Pd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ek(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function iC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(n,e){const t=await nC(n,{},async()=>{const i=Zc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await rC(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&ru(n.emulatorConfig.host)&&(m.credentials="include"),tC.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bk(n,e){return cu(n,"POST","/v2/accounts:revokeToken",X_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ke(e.idToken,"internal-error"),Ke(typeof e.idToken<"u","internal-error"),Ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ke(e.length!==0,"internal-error");const t=PS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await Tk(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Ul;return i&&(Ke(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Ke(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ke(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ul,this.toJSON())}_performRefresh(){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(n,e){Ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class yi{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new _k(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Fy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Hc(this,this.stsTokenManager.getToken(this.auth,e));return Ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return gk(this,e)}reload(){return vk(this)}_assign(e){this!==e&&(Ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Pd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pi(this.auth.app))return Promise.reject(So(this.auth));const e=await this.getIdToken();return await Hc(this,pk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:E,isAnonymous:w,providerData:D,stsTokenManager:V}=t;Ke(v&&V,e,"internal-error");const M=Ul.fromJSON(this.name,V);Ke(typeof v=="string",e,"internal-error"),ha(i,e.name),ha(a,e.name),Ke(typeof E=="boolean",e,"internal-error"),Ke(typeof w=="boolean",e,"internal-error"),ha(l,e.name),ha(c,e.name),ha(f,e.name),ha(m,e.name),ha(p,e.name),ha(y,e.name);const U=new yi({uid:v,auth:e,email:a,emailVerified:E,displayName:i,isAnonymous:w,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:M,createdAt:p,lastLoginAt:y});return D&&Array.isArray(D)&&(U.providerData=D.map(j=>({...j}))),m&&(U._redirectEventId=m),U}static async _fromIdTokenResponse(e,t,i=!1){const a=new Ul;a.updateFromServerResponse(t);const l=new yi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Pd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ke(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?iC(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Ul;f.updateFromIdToken(i);const m=new yi({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Fy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=new Map;function vs(n){Is(n instanceof Function,"Expected a class definition");let e=kS.get(n);return e?(Is(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,kS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sC.type="NONE";const VS=sC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(n,e,t){return`firebase:${n}:${e}:${t}`}class zl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=id(this.userKey,a.apiKey,l),this.fullPersistenceKey=id("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Md(this.auth,{idToken:e}).catch(()=>{});return t?yi._fromGetAccountInfoResponse(this.auth,t,e):null}return yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new zl(vs(VS),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||vs(VS);const c=id(i,e.config.apiKey,e.name);let f=null;for(const p of t)try{const y=await p._get(c);if(y){let v;if(typeof y=="string"){const E=await Md(e,{idToken:y}).catch(()=>{});if(!E)break;v=await yi._fromGetAccountInfoResponse(e,E,y)}else v=yi._fromJSON(e,y);p!==l&&(f=v),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new zl(l,e,i):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new zl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hC(e))return"Blackberry";if(fC(e))return"Webos";if(oC(e))return"Safari";if((e.includes("chrome/")||lC(e))&&!e.includes("edge/"))return"Chrome";if(cC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function aC(n=Zn()){return/firefox\//i.test(n)}function oC(n=Zn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lC(n=Zn()){return/crios\//i.test(n)}function uC(n=Zn()){return/iemobile/i.test(n)}function cC(n=Zn()){return/android/i.test(n)}function hC(n=Zn()){return/blackberry/i.test(n)}function fC(n=Zn()){return/webos/i.test(n)}function J_(n=Zn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Sk(n=Zn()){var e;return J_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Ak(){return v2()&&document.documentMode===10}function dC(n=Zn()){return J_(n)||cC(n)||fC(n)||hC(n)||/windows phone/i.test(n)||uC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(n,e=[]){let t;switch(n){case"Browser":t=LS(Zn());break;case"Worker":t=`${LS(Zn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${iu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(n,e={}){return cu(n,"GET","/v2/passwordPolicy",X_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=6;class Ik{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Rk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jS(this),this.idTokenSubscription=new jS(this),this.beforeStateQueue=new wk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vs(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await zl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Md(this,{idToken:e}),i=await yi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(pi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(i=m.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pi(this.app))return Promise.reject(So(this));const t=e?xn(e):null;return t&&Ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pi(this.app)?Promise.reject(So(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pi(this.app)?Promise.reject(So(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ck(this),t=new Ik(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await bk(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vs(e)||this._popupRedirectResolver;Ke(t,this,"argument-error"),this.redirectPersistenceManager=await zl.create(this,[vs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ke(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(pi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&sk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Tm(n){return xn(n)}class jS{constructor(e){this.auth=e,this.observer=null,this.addObserver=R2(t=>this.observer=t)}get next(){return Ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nk(n){Z_=n}function Dk(n){return Z_.loadJS(n)}function Ok(){return Z_.gapiScript}function Mk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(n,e){const t=f_(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ao(l,e??{}))return a;Gi(a,"already-initialized")}return t.initialize({options:e})}function kk(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(vs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Vk(n,e,t){const i=Tm(n);Ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=pC(e),{host:c,port:f}=Lk(e),m=f===null?"":`:${f}`,p={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ke(Ao(p,i.config.emulator)&&Ao(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,ru(c)?(cw(`${l}//${c}${m}`),hw("Auth",!0)):jk()}function pC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Lk(n){const e=pC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:US(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:US(c)}}}function US(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function jk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _s("not implemented")}_getIdTokenResponse(e){return _s("not implemented")}_linkToIdToken(e,t){return _s("not implemented")}_getReauthenticationResolver(e){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(n,e){return dk(n,"POST","/v1/accounts:signInWithIdp",X_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="http://localhost";class Io extends gC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Io(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Bl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Bl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bl(e,t)}buildRequest(){const e={requestUri:Uk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Zc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends ev{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends ch{constructor(){super("facebook.com")}static credential(e){return Io._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pa.credentialFromTaggedObject(e)}static credentialFromError(e){return pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pa.credential(e.oauthAccessToken)}catch{return null}}}pa.FACEBOOK_SIGN_IN_METHOD="facebook.com";pa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends ch{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Io._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return gs.credential(t,i)}catch{return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com";gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga extends ch{constructor(){super("github.com")}static credential(e){return Io._fromParams({providerId:ga.PROVIDER_ID,signInMethod:ga.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ga.credentialFromTaggedObject(e)}static credentialFromError(e){return ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ga.credential(e.oauthAccessToken)}catch{return null}}}ga.GITHUB_SIGN_IN_METHOD="github.com";ga.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends ch{constructor(){super("twitter.com")}static credential(e,t){return Io._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ya.credential(t,i)}catch{return null}}}ya.TWITTER_SIGN_IN_METHOD="twitter.com";ya.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await yi._fromIdTokenResponse(e,i,a),c=zS(i);return new Zl({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=zS(i);return new Zl({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function zS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends Ds{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,kd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new kd(e,t,i,a)}}function yC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?kd._fromErrorAndOperation(n,l,e,i):l})}async function zk(n,e,t=!1){const i=await Hc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Zl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(n,e,t=!1){const{auth:i}=n;if(pi(i.app))return Promise.reject(So(i));const a="reauthenticate";try{const l=await Hc(n,yC(i,a,e,n),t);Ke(l.idToken,i,"internal-error");const c=W_(l.idToken);Ke(c,i,"internal-error");const{sub:f}=c;return Ke(n.uid===f,i,"user-mismatch"),Zl._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Gi(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(n,e,t=!1){if(pi(n.app))return Promise.reject(So(n));const i="signIn",a=await yC(n,i,e),l=await Zl._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}function Fk(n,e,t,i){return xn(n).onIdTokenChanged(e,t,i)}function qk(n,e,t){return xn(n).beforeAuthStateChanged(e,t)}function Gk(n,e,t,i){return xn(n).onAuthStateChanged(e,t,i)}const Vd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vd,"1"),this.storage.removeItem(Vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=1e3,Kk=10;class vC extends _C{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);Ak()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Kk):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},$k)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}vC.type="LOCAL";const Yk=vC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC extends _C{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}EC.type="SESSION";const TC=EC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new bm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(c).map(async p=>p(t.origin,l)),m=await Qk(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const p=tv("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(E.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(){return window}function Wk(n){Hi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(){return typeof Hi().WorkerGlobalScope<"u"&&typeof Hi().importScripts=="function"}async function Jk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zk(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function eV(){return bC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="firebaseLocalStorageDb",tV=1,Ld="firebaseLocalStorage",AC="fbase_key";class hh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sm(n,e){return n.transaction([Ld],e?"readwrite":"readonly").objectStore(Ld)}function nV(){const n=indexedDB.deleteDatabase(SC);return new hh(n).toPromise()}function qy(){const n=indexedDB.open(SC,tV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Ld,{keyPath:AC})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Ld)?e(i):(i.close(),await nV(),e(await qy()))})})}async function BS(n,e,t){const i=Sm(n,!0).put({[AC]:e,value:t});return new hh(i).toPromise()}async function rV(n,e){const t=Sm(n,!1).get(e),i=await new hh(t).toPromise();return i===void 0?null:i.value}function HS(n,e){const t=Sm(n,!0).delete(e);return new hh(t).toPromise()}const iV=800,sV=3;class wC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>sV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bm._getInstance(eV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Jk(),!this.activeServiceWorker)return;this.sender=new Xk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qy();return await BS(e,Vd,"1"),await HS(e,Vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>BS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>rV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>HS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Sm(a,!1).getAll();return new hh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wC.type="LOCAL";const aV=wC;new uh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(n,e){return e?vs(e):(Ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv extends gC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oV(n){return Hk(n.auth,new nv(n),n.bypassAuthState)}function lV(n){const{auth:e,user:t}=n;return Ke(t,e,"internal-error"),Bk(t,new nv(n),n.bypassAuthState)}async function uV(n){const{auth:e,user:t}=n;return Ke(t,e,"internal-error"),zk(t,new nv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oV;case"linkViaPopup":case"linkViaRedirect":return uV;case"reauthViaPopup":case"reauthViaRedirect":return lV;default:Gi(this.auth,"internal-error")}}resolve(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=new uh(2e3,1e4);async function hV(n,e,t){if(pi(n.app))return Promise.reject(vi(n,"operation-not-supported-in-this-environment"));const i=Tm(n);ak(n,e,ev);const a=CC(i,t);return new vo(i,"signInViaPopup",e,a).executeNotNull()}class vo extends RC{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,vo.currentPopupAction&&vo.currentPopupAction.cancel(),vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ke(e,this.auth,"internal-error"),e}async onExecution(){Is(this.filter.length===1,"Popup operations only handle one event");const e=tv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cV.get())};e()}}vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV="pendingRedirect",sd=new Map;class dV extends RC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=sd.get(this.auth._key());if(!e){try{const i=await mV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}sd.set(this.auth._key(),e)}return this.bypassAuthState||sd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mV(n,e){const t=yV(e),i=gV(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function pV(n,e){sd.set(n._key(),e)}function gV(n){return vs(n._redirectPersistence)}function yV(n){return id(fV,n.config.apiKey,n.name)}async function _V(n,e,t=!1){if(pi(n.app))return Promise.reject(So(n));const i=Tm(n),a=CC(i,e),c=await new dV(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=600*1e3;class EV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!IC(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(vi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vV&&this.cachedEventUids.clear(),this.cachedEventUids.has(FS(e))}saveEventToCache(e){this.cachedEventUids.add(FS(e)),this.lastProcessedEventTime=Date.now()}}function FS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function IC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bV(n,e={}){return cu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AV=/^https?/;async function wV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await bV(n);for(const t of e)try{if(CV(t))return}catch{}Gi(n,"unauthorized-domain")}function CV(n){const e=Hy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!AV.test(t))return!1;if(SV.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=new uh(3e4,6e4);function qS(){const n=Hi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function IV(n){return new Promise((e,t)=>{var a,l,c;function i(){qS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qS(),t(vi(n,"network-request-failed"))},timeout:RV.get()})}if((l=(a=Hi().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Hi().gapi)!=null&&c.load)i();else{const f=Mk("iframefcb");return Hi()[f]=()=>{gapi.load?i():t(vi(n,"network-request-failed"))},Dk(`${Ok()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw ad=null,e})}let ad=null;function xV(n){return ad=ad||IV(n),ad}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=new uh(5e3,15e3),DV="__/auth/iframe",OV="emulator/auth/iframe",MV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kV(n){const e=n.config;Ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Q_(e,OV):`https://${n.config.authDomain}/${DV}`,i={apiKey:e.apiKey,appName:n.name,v:iu},a=PV.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Zc(i).slice(1)}`}async function VV(n){const e=await xV(n),t=Hi().gapi;return Ke(t,n,"internal-error"),e.open({where:document.body,url:kV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MV,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=vi(n,"network-request-failed"),f=Hi().setTimeout(()=>{l(c)},NV.get());function m(){Hi().clearTimeout(f),a(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jV=500,UV=600,zV="_blank",BV="http://localhost";class GS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HV(n,e,t,i=jV,a=UV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...LV,width:i.toString(),height:a.toString(),top:l,left:c},p=Zn().toLowerCase();t&&(f=lC(p)?zV:t),aC(p)&&(e=e||BV,m.scrollbars="yes");const y=Object.entries(m).reduce((E,[w,D])=>`${E}${w}=${D},`,"");if(Sk(p)&&f!=="_self")return FV(e||"",f),new GS(null);const v=window.open(e||"",f,y);Ke(v,n,"popup-blocked");try{v.focus()}catch{}return new GS(v)}function FV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV="__/auth/handler",GV="emulator/auth/handler",$V=encodeURIComponent("fac");async function $S(n,e,t,i,a,l){Ke(n.config.authDomain,n,"auth-domain-config-required"),Ke(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:iu,eventId:a};if(e instanceof ev){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",C2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(e instanceof ch){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const m=await n._getAppCheckToken(),p=m?`#${$V}=${encodeURIComponent(m)}`:"";return`${KV(n)}?${Zc(f).slice(1)}${p}`}function KV({config:n}){return n.emulator?Q_(n,GV):`https://${n.authDomain}/${qV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="webStorageSupport";class YV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TC,this._completeRedirectFn=_V,this._overrideRedirectResult=pV}async _openPopup(e,t,i,a){var c;Is((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await $S(e,t,i,Hy(),a);return HV(e,l,tv())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await $S(e,t,i,Hy(),a);return Wk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Is(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await VV(e),i=new EV(e);return t.register("authEvent",a=>(Ke(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sy,{type:sy},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[sy];l!==void 0&&t(!!l),Gi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dC()||oC()||J_()}}const QV=YV;var KS="@firebase/auth",YS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JV(n){Gl(new wo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Ke(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mC(n)},p=new xk(i,a,l,m);return kk(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Gl(new wo("auth-internal",e=>{const t=Tm(e.getProvider("auth").getImmediate());return(i=>new XV(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sa(KS,YS,WV(n)),Sa(KS,YS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=300,eL=uw("authIdTokenMaxAge")||ZV;let QS=null;const tL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>eL)return;const a=t==null?void 0:t.token;QS!==a&&(QS=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function nL(n=pw()){const e=f_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Pk(n,{popupRedirectResolver:QV,persistence:[aV,Yk,TC]}),i=uw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=tL(l.toString());qk(t,c,()=>c(t.currentUser)),Fk(t,f=>c(f))}}const a=ow("auth");return a&&Vk(t,`http://${a}`),t}function rL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}Nk({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=vi("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",rL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JV("Browser");const iL={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function bl(n){const e=iL[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const sL={apiKey:bl("VITE_FIREBASE_API_KEY"),authDomain:bl("VITE_FIREBASE_AUTH_DOMAIN"),projectId:bl("VITE_FIREBASE_PROJECT_ID"),storageBucket:bl("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:bl("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:bl("VITE_FIREBASE_APP_ID")},xC=mw(sL),xo=nL(xC),aL=new gs,Bt=F4(xC),NC=O.createContext(void 0),oL=({children:n})=>{const[e,t]=O.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),i=O.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);O.useEffect(()=>{i(e)},[e,i]);const a=O.useCallback(c=>{t(c),i(c);const f=xo.currentUser;if(f){const m=Jn(Bt,"users",f.uid);X1(m,{preferredTheme:c}).catch(p=>console.error("Error updating preferred theme in Firebase:",p))}},[i]),l=O.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return O.useEffect(()=>xo.onAuthStateChanged(async f=>{if(f){const m=Jn(Bt,"users",f.uid),p=await lh(m);if(p.exists()&&p.data().preferredTheme){const y=p.data().preferredTheme;t(y),i(y)}}}),[i]),b.jsx(NC.Provider,{value:{theme:e,toggleTheme:l,setTheme:a},children:n})},lL="_spinner_5jyct_1",uL="_spinnerContainer_5jyct_19",XS={spinner:lL,spinnerContainer:uL},hu=({container:n=!0})=>{const e=b.jsx("div",{className:XS.spinner});return n?b.jsx("div",{className:XS.spinnerContainer,children:e}):e},cL="_loadingContainer_1n1m5_1",hL={loadingContainer:cL},eu=()=>b.jsx("div",{className:hL.loadingContainer,children:b.jsx(hu,{container:!1})}),fL=()=>{const n=He(i=>i.auth.firebaseUser),e=He(i=>i.auth.userData);return He(i=>i.auth.loading)?b.jsx(eu,{}):n?e?e.isApproved?b.jsx(Ea,{to:"/app/dashboard",replace:!0}):b.jsx(Ea,{to:"/guest",replace:!0}):b.jsx(eu,{}):b.jsx(Ea,{to:"/login",replace:!0})};function zn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var dL=typeof Symbol=="function"&&Symbol.observable||"@@observable",WS=dL,ay=()=>Math.random().toString(36).substring(7).split("").join("."),mL={INIT:`@@redux/INIT${ay()}`,REPLACE:`@@redux/REPLACE${ay()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ay()}`},jd=mL;function rv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function DC(n,e,t){if(typeof n!="function")throw new Error(zn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(zn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(zn(1));return t(DC)(n,e)}let i=n,a=e,l=new Map,c=l,f=0,m=!1;function p(){c===l&&(c=new Map,l.forEach((M,U)=>{c.set(U,M)}))}function y(){if(m)throw new Error(zn(3));return a}function v(M){if(typeof M!="function")throw new Error(zn(4));if(m)throw new Error(zn(5));let U=!0;p();const j=f++;return c.set(j,M),function(){if(U){if(m)throw new Error(zn(6));U=!1,p(),c.delete(j),l=null}}}function E(M){if(!rv(M))throw new Error(zn(7));if(typeof M.type>"u")throw new Error(zn(8));if(typeof M.type!="string")throw new Error(zn(17));if(m)throw new Error(zn(9));try{m=!0,a=i(a,M)}finally{m=!1}return(l=c).forEach(j=>{j()}),M}function w(M){if(typeof M!="function")throw new Error(zn(10));i=M,E({type:jd.REPLACE})}function D(){const M=v;return{subscribe(U){if(typeof U!="object"||U===null)throw new Error(zn(11));function j(){const Q=U;Q.next&&Q.next(y())}return j(),{unsubscribe:M(j)}},[WS](){return this}}}return E({type:jd.INIT}),{dispatch:E,subscribe:v,getState:y,replaceReducer:w,[WS]:D}}function pL(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:jd.INIT})>"u")throw new Error(zn(12));if(typeof t(void 0,{type:jd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(zn(13))})}function gL(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const i=Object.keys(t);let a;try{pL(t)}catch(l){a=l}return function(c={},f){if(a)throw a;let m=!1;const p={};for(let y=0;y<i.length;y++){const v=i[y],E=t[v],w=c[v],D=E(w,f);if(typeof D>"u")throw f&&f.type,new Error(zn(14));p[v]=D,m=m||D!==w}return m=m||i.length!==Object.keys(c).length,m?p:c}}function Ud(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function yL(...n){return e=>(t,i)=>{const a=e(t,i);let l=()=>{throw new Error(zn(15))};const c={getState:a.getState,dispatch:(m,...p)=>l(m,...p)},f=n.map(m=>m(c));return l=Ud(...f)(a.dispatch),{...a,dispatch:l}}}function _L(n){return rv(n)&&"type"in n&&typeof n.type=="string"}var OC=Symbol.for("immer-nothing"),JS=Symbol.for("immer-draftable"),ar=Symbol.for("immer-state");function gi(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var zr=Object,tu=zr.getPrototypeOf,zd="constructor",Am="prototype",Gy="configurable",Bd="enumerable",od="writable",Fc="value",xs=n=>!!n&&!!n[ar];function Ti(n){var e;return n?MC(n)||Cm(n)||!!n[JS]||!!((e=n[zd])!=null&&e[JS])||Rm(n)||Im(n):!1}var vL=zr[Am][zd].toString(),ZS=new WeakMap;function MC(n){if(!n||!iv(n))return!1;const e=tu(n);if(e===null||e===zr[Am])return!0;const t=zr.hasOwnProperty.call(e,zd)&&e[zd];if(t===Object)return!0;if(!Dl(t))return!1;let i=ZS.get(t);return i===void 0&&(i=Function.toString.call(t),ZS.set(t,i)),i===vL}function wm(n,e,t=!0){fh(n)===0?(t?Reflect.ownKeys(n):zr.keys(n)).forEach(a=>{e(a,n[a],n)}):n.forEach((i,a)=>e(a,i,n))}function fh(n){const e=n[ar];return e?e.type_:Cm(n)?1:Rm(n)?2:Im(n)?3:0}var eA=(n,e,t=fh(n))=>t===2?n.has(e):zr[Am].hasOwnProperty.call(n,e),$y=(n,e,t=fh(n))=>t===2?n.get(e):n[e],Hd=(n,e,t,i=fh(n))=>{i===2?n.set(e,t):i===3?n.add(t):n[e]=t};function EL(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var Cm=Array.isArray,Rm=n=>n instanceof Map,Im=n=>n instanceof Set,iv=n=>typeof n=="object",Dl=n=>typeof n=="function",oy=n=>typeof n=="boolean";function TL(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var ps=n=>n.copy_||n.base_,sv=n=>n.modified_?n.copy_:n.base_;function Ky(n,e){if(Rm(n))return new Map(n);if(Im(n))return new Set(n);if(Cm(n))return Array[Am].slice.call(n);const t=MC(n);if(e===!0||e==="class_only"&&!t){const i=zr.getOwnPropertyDescriptors(n);delete i[ar];let a=Reflect.ownKeys(i);for(let l=0;l<a.length;l++){const c=a[l],f=i[c];f[od]===!1&&(f[od]=!0,f[Gy]=!0),(f.get||f.set)&&(i[c]={[Gy]:!0,[od]:!0,[Bd]:f[Bd],[Fc]:n[c]})}return zr.create(tu(n),i)}else{const i=tu(n);if(i!==null&&t)return{...n};const a=zr.create(i);return zr.assign(a,n)}}function av(n,e=!1){return xm(n)||xs(n)||!Ti(n)||(fh(n)>1&&zr.defineProperties(n,{set:Hf,add:Hf,clear:Hf,delete:Hf}),zr.freeze(n),e&&wm(n,(t,i)=>{av(i,!0)},!1)),n}function bL(){gi(2)}var Hf={[Fc]:bL};function xm(n){return n===null||!iv(n)?!0:zr.isFrozen(n)}var Fd="MapSet",Yy="Patches",tA="ArrayMethods",PC={};function No(n){const e=PC[n];return e||gi(0,n),e}var nA=n=>!!PC[n],qc,kC=()=>qc,SL=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:nA(Fd)?No(Fd):void 0,arrayMethodsPlugin_:nA(tA)?No(tA):void 0});function rA(n,e){e&&(n.patchPlugin_=No(Yy),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function Qy(n){Xy(n),n.drafts_.forEach(AL),n.drafts_=null}function Xy(n){n===qc&&(qc=n.parent_)}var iA=n=>qc=SL(qc,n);function AL(n){const e=n[ar];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function sA(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[ar].modified_&&(Qy(e),gi(4)),Ti(n)&&(n=aA(e,n));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(t[ar].base_,n,e)}else n=aA(e,t);return wL(e,n,!0),Qy(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==OC?n:void 0}function aA(n,e){if(xm(e))return e;const t=e[ar];if(!t)return qd(e,n.handledSet_,n);if(!Nm(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:i}=t;if(i)for(;i.length>0;)i.pop()(n);jC(t,n)}return t.copy_}function wL(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&av(e,t)}function VC(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var Nm=(n,e)=>n.scope_===e,CL=[];function LC(n,e,t,i){const a=ps(n),l=n.type_;if(i!==void 0&&$y(a,i,l)===e){Hd(a,i,t,l);return}if(!n.draftLocations_){const f=n.draftLocations_=new Map;wm(a,(m,p)=>{if(xs(p)){const y=f.get(p)||[];y.push(m),f.set(p,y)}})}const c=n.draftLocations_.get(e)??CL;for(const f of c)Hd(a,f,t,l)}function RL(n,e,t){n.callbacks_.push(function(a){var f;const l=e;if(!l||!Nm(l,a))return;(f=a.mapSetPlugin_)==null||f.fixSetContents(l);const c=sv(l);LC(n,l.draft_??l,c,t),jC(l,a)})}function jC(n,e){var i;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((i=n.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const l=a.getPath(n);l&&a.generatePatches_(n,l,e)}VC(n)}}function IL(n,e,t){const{scope_:i}=n;if(xs(t)){const a=t[ar];Nm(a,i)&&a.callbacks_.push(function(){ld(n);const c=sv(a);LC(n,t,c,e)})}else Ti(t)&&n.callbacks_.push(function(){const l=ps(n);n.type_===3?l.has(t)&&qd(t,i.handledSet_,i):$y(l,e,n.type_)===t&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&qd($y(n.copy_,e,n.type_),i.handledSet_,i)})}function qd(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||xs(n)||e.has(n)||!Ti(n)||xm(n)||(e.add(n),wm(n,(i,a)=>{if(xs(a)){const l=a[ar];if(Nm(l,t)){const c=sv(l);Hd(n,i,c,n.type_),VC(l)}}else Ti(a)&&qd(a,e,t)})),n}function xL(n,e){const t=Cm(n),i={type_:t?1:0,scope_:e?e.scope_:kC(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=i,l=Gd;t&&(a=[i],l=Gc);const{revoke:c,proxy:f}=Proxy.revocable(a,l);return i.draft_=f,i.revoke_=c,[f,i]}var Gd={get(n,e){if(e===ar)return n;let t=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const a=ps(n);if(!eA(a,e,n.type_))return NL(n,a,e);const l=a[e];if(n.finalized_||!Ti(l)||i&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&TL(e))return l;if(l===ly(n.base_,e)){ld(n);const c=n.type_===1?+e:e,f=Jy(n.scope_,l,n,c);return n.copy_[c]=f}return l},has(n,e){return e in ps(n)},ownKeys(n){return Reflect.ownKeys(ps(n))},set(n,e,t){const i=UC(ps(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const a=ly(ps(n),e),l=a==null?void 0:a[ar];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(EL(t,a)&&(t!==void 0||eA(n.base_,e,n.type_)))return!0;ld(n),Wy(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),IL(n,e,t)),!0},deleteProperty(n,e){return ld(n),ly(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),Wy(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=ps(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{[od]:!0,[Gy]:n.type_!==1||e!=="length",[Bd]:i[Bd],[Fc]:t[e]}},defineProperty(){gi(11)},getPrototypeOf(n){return tu(n.base_)},setPrototypeOf(){gi(12)}},Gc={};for(let n in Gd){let e=Gd[n];Gc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}Gc.deleteProperty=function(n,e){return Gc.set.call(this,n,e,void 0)};Gc.set=function(n,e,t){return Gd.set.call(this,n[0],e,t,n[0])};function ly(n,e){const t=n[ar];return(t?ps(t):n)[e]}function NL(n,e,t){var a;const i=UC(e,t);return i?Fc in i?i[Fc]:(a=i.get)==null?void 0:a.call(n.draft_):void 0}function UC(n,e){if(!(e in n))return;let t=tu(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=tu(t)}}function Wy(n){n.modified_||(n.modified_=!0,n.parent_&&Wy(n.parent_))}function ld(n){n.copy_||(n.assigned_=new Map,n.copy_=Ky(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var DL=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,i)=>{if(Dl(e)&&!Dl(t)){const l=t;t=e;const c=this;return function(m=l,...p){return c.produce(m,y=>t.call(this,y,...p))}}Dl(t)||gi(6),i!==void 0&&!Dl(i)&&gi(7);let a;if(Ti(e)){const l=iA(this),c=Jy(l,e,void 0);let f=!0;try{a=t(c),f=!1}finally{f?Qy(l):Xy(l)}return rA(l,i),sA(a,l)}else if(!e||!iv(e)){if(a=t(e),a===void 0&&(a=e),a===OC&&(a=void 0),this.autoFreeze_&&av(a,!0),i){const l=[],c=[];No(Yy).generateReplacementPatches_(e,a,{patches_:l,inversePatches_:c}),i(l,c)}return a}else gi(1,e)},this.produceWithPatches=(e,t)=>{if(Dl(e))return(c,...f)=>this.produceWithPatches(c,m=>e(m,...f));let i,a;return[this.produce(e,t,(c,f)=>{i=c,a=f}),i,a]},oy(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),oy(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),oy(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Ti(n)||gi(8),xs(n)&&(n=OL(n));const e=iA(this),t=Jy(e,n,void 0);return t[ar].isManual_=!0,Xy(e),t}finishDraft(n,e){const t=n&&n[ar];(!t||!t.isManual_)&&gi(9);const{scope_:i}=t;return rA(i,e),sA(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}t>-1&&(e=e.slice(t+1));const i=No(Yy).applyPatches_;return xs(n)?i(n,e):this.produce(n,a=>i(a,e))}};function Jy(n,e,t,i){const[a,l]=Rm(e)?No(Fd).proxyMap_(e,t):Im(e)?No(Fd).proxySet_(e,t):xL(e,t);return((t==null?void 0:t.scope_)??kC()).drafts_.push(a),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=i,t&&i!==void 0?RL(t,l,i):l.callbacks_.push(function(m){var y;(y=m.mapSetPlugin_)==null||y.fixSetContents(l);const{patchPlugin_:p}=m;l.modified_&&p&&p.generatePatches_(l,[],m)}),a}function OL(n){return xs(n)||gi(10,n),zC(n)}function zC(n){if(!Ti(n)||xm(n))return n;const e=n[ar];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Ky(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=Ky(n,!0);return wm(t,(a,l)=>{Hd(t,a,zC(l))},i),e&&(e.finalized_=!1),t}var ML=new DL,BC=ML.produce;function HC(n){return({dispatch:t,getState:i})=>a=>l=>typeof l=="function"?l(t,i,n):a(l)}var PL=HC(),kL=HC,VL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ud:Ud.apply(null,arguments)},LL=n=>n&&typeof n.match=="function";function Rc(n,e){function t(...i){if(e){let a=e(...i);if(!a)throw new Error(bs(0));return{type:n,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>_L(i)&&i.type===n,t}var FC=class vc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,vc.prototype)}static get[Symbol.species](){return vc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new vc(...e[0].concat(this)):new vc(...e.concat(this))}};function oA(n){return Ti(n)?BC(n,()=>{}):n}function Ff(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function jL(n){return typeof n=="boolean"}var UL=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=e??{};let c=new FC;return t&&(jL(t)?c.push(PL):c.push(kL(t.extraArgument))),c},zL="RTK_autoBatch",lA=n=>e=>{setTimeout(e,n)},BL=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let a=!0,l=!1,c=!1;const f=new Set,m=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:lA(10):n.type==="callback"?n.queueNotification:lA(n.timeout),p=()=>{c=!1,l&&(l=!1,f.forEach(y=>y()))};return Object.assign({},i,{subscribe(y){const v=()=>a&&y(),E=i.subscribe(v);return f.add(y),()=>{E(),f.delete(y)}},dispatch(y){var v;try{return a=!((v=y==null?void 0:y.meta)!=null&&v[zL]),l=!a,l&&(c||(c=!0,m(p))),i.dispatch(y)}finally{a=!0}}})},HL=n=>function(t){const{autoBatch:i=!0}=t??{};let a=new FC(n);return i&&a.push(BL(typeof i=="object"?i:void 0)),a};function FL(n){const e=UL(),{reducer:t=void 0,middleware:i,devTools:a=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let f;if(typeof t=="function")f=t;else if(rv(t))f=gL(t);else throw new Error(bs(1));let m;typeof i=="function"?m=i(e):m=e();let p=Ud;a&&(p=VL({trace:!1,...typeof a=="object"&&a}));const y=yL(...m),v=HL(y);let E=typeof c=="function"?c(v):v();const w=p(...E);return DC(f,l,w)}function qC(n){const e={},t=[];let i;const a={addCase(l,c){const f=typeof l=="string"?l:l.type;if(!f)throw new Error(bs(28));if(f in e)throw new Error(bs(29));return e[f]=c,a},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),a},addMatcher(l,c){return t.push({matcher:l,reducer:c}),a},addDefaultCase(l){return i=l,a}};return n(a),[e,t,i]}function qL(n){return typeof n=="function"}function GL(n,e){let[t,i,a]=qC(e),l;if(qL(n))l=()=>oA(n());else{const f=oA(n);l=()=>f}function c(f=l(),m){let p=[t[m.type],...i.filter(({matcher:y})=>y(m)).map(({reducer:y})=>y)];return p.filter(y=>!!y).length===0&&(p=[a]),p.reduce((y,v)=>{if(v)if(xs(y)){const w=v(y,m);return w===void 0?y:w}else{if(Ti(y))return BC(y,E=>v(E,m));{const E=v(y,m);if(E===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return E}}return y},f)}return c.getInitialState=l,c}var $L=(n,e)=>LL(n)?n.match(e):n(e);function KL(...n){return e=>n.some(t=>$L(t,e))}var YL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",QL=(n=21)=>{let e="",t=n;for(;t--;)e+=YL[Math.random()*64|0];return e},XL=["name","message","stack","code"],uy=class{constructor(n,e){Ng(this,"_type");this.payload=n,this.meta=e}},uA=class{constructor(n,e){Ng(this,"_type");this.payload=n,this.meta=e}},WL=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of XL)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},cA="External signal was aborted",Hr=(()=>{function n(e,t,i){const a=Rc(e+"/fulfilled",(m,p,y,v)=>({payload:m,meta:{...v||{},arg:y,requestId:p,requestStatus:"fulfilled"}})),l=Rc(e+"/pending",(m,p,y)=>({payload:void 0,meta:{...y||{},arg:p,requestId:m,requestStatus:"pending"}})),c=Rc(e+"/rejected",(m,p,y,v,E)=>({payload:v,error:(i&&i.serializeError||WL)(m||"Rejected"),meta:{...E||{},arg:y,requestId:p,rejectedWithValue:!!v,requestStatus:"rejected",aborted:(m==null?void 0:m.name)==="AbortError",condition:(m==null?void 0:m.name)==="ConditionError"}}));function f(m,{signal:p}={}){return(y,v,E)=>{const w=i!=null&&i.idGenerator?i.idGenerator(m):QL(),D=new AbortController;let V,M;function U(q){M=q,D.abort()}p&&(p.aborted?U(cA):p.addEventListener("abort",()=>U(cA),{once:!0}));const j=(async function(){var W,K;let q;try{let S=(W=i==null?void 0:i.condition)==null?void 0:W.call(i,m,{getState:v,extra:E});if(ZL(S)&&(S=await S),S===!1||D.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const C=new Promise((I,k)=>{V=()=>{k({name:"AbortError",message:M||"Aborted"})},D.signal.addEventListener("abort",V,{once:!0})});y(l(w,m,(K=i==null?void 0:i.getPendingMeta)==null?void 0:K.call(i,{requestId:w,arg:m},{getState:v,extra:E}))),q=await Promise.race([C,Promise.resolve(t(m,{dispatch:y,getState:v,extra:E,requestId:w,signal:D.signal,abort:U,rejectWithValue:(I,k)=>new uy(I,k),fulfillWithValue:(I,k)=>new uA(I,k)})).then(I=>{if(I instanceof uy)throw I;return I instanceof uA?a(I.payload,w,m,I.meta):a(I,w,m)})])}catch(S){q=S instanceof uy?c(null,w,m,S.payload,S.meta):c(S,w,m)}finally{V&&D.signal.removeEventListener("abort",V)}return i&&!i.dispatchConditionRejection&&c.match(q)&&q.meta.condition||y(q),q})();return Object.assign(j,{abort:U,requestId:w,arg:m,unwrap(){return j.then(JL)}})}}return Object.assign(f,{pending:l,rejected:c,fulfilled:a,settled:KL(c,a),typePrefix:e})}return n.withTypes=()=>n,n})();function JL(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function ZL(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var ej=Symbol.for("rtk-slice-createasyncthunk");function tj(n,e){return`${n}/${e}`}function nj({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[ej];return function(a){const{name:l,reducerPath:c=l}=a;if(!l)throw new Error(bs(11));const f=(typeof a.reducers=="function"?a.reducers(ij()):a.reducers)||{},m=Object.keys(f),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(Q,W){const K=typeof Q=="string"?Q:Q.type;if(!K)throw new Error(bs(12));if(K in p.sliceCaseReducersByType)throw new Error(bs(13));return p.sliceCaseReducersByType[K]=W,y},addMatcher(Q,W){return p.sliceMatchers.push({matcher:Q,reducer:W}),y},exposeAction(Q,W){return p.actionCreators[Q]=W,y},exposeCaseReducer(Q,W){return p.sliceCaseReducersByName[Q]=W,y}};m.forEach(Q=>{const W=f[Q],K={reducerName:Q,type:tj(l,Q),createNotation:typeof a.reducers=="function"};aj(W)?lj(K,W,y,e):sj(K,W,y)});function v(){const[Q={},W=[],K=void 0]=typeof a.extraReducers=="function"?qC(a.extraReducers):[a.extraReducers],S={...Q,...p.sliceCaseReducersByType};return GL(a.initialState,C=>{for(let I in S)C.addCase(I,S[I]);for(let I of p.sliceMatchers)C.addMatcher(I.matcher,I.reducer);for(let I of W)C.addMatcher(I.matcher,I.reducer);K&&C.addDefaultCase(K)})}const E=Q=>Q,w=new Map,D=new WeakMap;let V;function M(Q,W){return V||(V=v()),V(Q,W)}function U(){return V||(V=v()),V.getInitialState()}function j(Q,W=!1){function K(C){let I=C[Q];return typeof I>"u"&&W&&(I=Ff(D,K,U)),I}function S(C=E){const I=Ff(w,W,()=>new WeakMap);return Ff(I,C,()=>{const k={};for(const[P,L]of Object.entries(a.selectors??{}))k[P]=rj(L,C,()=>Ff(D,C,U),W);return k})}return{reducerPath:Q,getSelectors:S,get selectors(){return S(K)},selectSlice:K}}const q={name:l,reducer:M,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:U,...j(c),injectInto(Q,{reducerPath:W,...K}={}){const S=W??c;return Q.inject({reducerPath:S,reducer:M},K),{...q,...j(S,!0)}}};return q}}function rj(n,e,t,i){function a(l,...c){let f=e(l);return typeof f>"u"&&i&&(f=t()),n(f,...c)}return a.unwrapped=n,a}var La=nj();function ij(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function sj({type:n,reducerName:e,createNotation:t},i,a){let l,c;if("reducer"in i){if(t&&!oj(i))throw new Error(bs(17));l=i.reducer,c=i.prepare}else l=i;a.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?Rc(n,c):Rc(n))}function aj(n){return n._reducerDefinitionType==="asyncThunk"}function oj(n){return n._reducerDefinitionType==="reducerWithPrepare"}function lj({type:n,reducerName:e},t,i,a){if(!a)throw new Error(bs(18));const{payloadCreator:l,fulfilled:c,pending:f,rejected:m,settled:p,options:y}=t,v=a(n,l,y);i.exposeAction(e,v),c&&i.addCase(v.fulfilled,c),f&&i.addCase(v.pending,f),m&&i.addCase(v.rejected,m),p&&i.addMatcher(v.settled,p),i.exposeCaseReducer(e,{fulfilled:c||qf,pending:f||qf,rejected:m||qf,settled:p||qf})}function qf(){}function bs(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const uj={positions:[],loading:!1,error:null,fetched:!1,isDirty:!1},Hl=Hr("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=Jn(Bt,"metadata","positions"),i=await lh(t);if(i.exists()){const a=i.data();return Array.isArray(a.list)?a.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),ov=Hr("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=Jn(Bt,"metadata","positions");return await vm(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),GC=La({name:"positions",initialState:uj,reducers:{updatePositionCustomLabels:(n,e)=>{const{positionName:t,labels:i}=e.payload,a=n.positions.find(l=>l.name===t);a&&(a.customLabels=i,n.isDirty=!0)},resetPositionsDirty:n=>{n.isDirty=!1},setPositions:(n,e)=>{n.positions=e.payload,n.fetched=!0,n.loading=!1}},extraReducers:n=>{n.addCase(Hl.pending,e=>{e.loading=!0,e.error=null}).addCase(Hl.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(Hl.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(ov.fulfilled,(e,t)=>{e.positions=t.payload,e.isDirty=!1})}}),{updatePositionCustomLabels:Gf,resetPositionsDirty:cj,setPositions:hj}=GC.actions,fj=GC.reducer,dj={teams:[],loading:!1,error:null,fetched:!1},Ic=Hr("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=Jn(Bt,"metadata","teams"),i=await lh(t);if(i.exists()){const a=i.data();return Array.isArray(a.list)?a.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),ud=Hr("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=Jn(Bt,"metadata","teams");return await vm(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),$C=La({name:"teams",initialState:dj,reducers:{clearError:n=>{n.error=null},setTeams:(n,e)=>{n.teams=e.payload,n.fetched=!0,n.loading=!1}},extraReducers:n=>{n.addCase(Ic.pending,e=>{e.loading=!0,e.error=null}).addCase(Ic.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(Ic.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(ud.pending,e=>{e.error=null}).addCase(ud.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(ud.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:vz,setTeams:mj}=$C.actions,pj=$C.reducer,gj=()=>{const n=Mn(),{firebaseUser:e,userData:t,loading:i}=He(m=>m.auth),{fetched:a,loading:l}=He(m=>m.teams),{fetched:c,loading:f}=He(m=>m.positions);return O.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!a&&!l&&n(Ic()),!c&&!f&&n(Hl()))},[n,e,t,a,l,c,f]),i||t!=null&&t.isApproved&&(!a||!c)?b.jsx(eu,{}):e?t?t.isApproved?b.jsx(WA,{}):b.jsx(Ea,{to:"/guest",replace:!0}):b.jsx(eu,{}):b.jsx(Ea,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=n=>{const e=_j(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=O.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:c,...f},m)=>O.createElement("svg",{ref:m,...vj,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:KC("lucide",a),...!l&&!Ej(f)&&{"aria-hidden":"true"},...f},[...c.map(([p,y])=>O.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=(n,e)=>{const t=O.forwardRef(({className:i,...a},l)=>O.createElement(Tj,{ref:l,iconNode:e,className:KC(`lucide-${yj(hA(n))}`,`lucide-${n}`,i),...a}));return t.displayName=hA(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Sj=or("arrow-left",bj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wj=or("arrow-right",Aj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],YC=or("chevron-up",Cj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ij=or("circle-check",Rj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Nj=or("copy",xj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],QC=or("corner-down-right",Dj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Mj=or("layout-grid",Oj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],kj=or("moon",Pj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Lj=or("panel-left-close",Vj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],Uj=or("panel-left-open",jj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dh=or("plus",zj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Hj=or("sun",Bj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],XC=or("trash-2",Fj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Gj=or("users",qj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lv=or("x",$j),Kj=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},Yj={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:Kj(),lastVisitedPaths:{},rosterAllViewMode:"user",alertConfig:null,peekPositionName:null},WC=La({name:"ui",initialState:Yj,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setRosterAllViewMode:(n,e)=>{n.rosterAllViewMode=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:i}=e.payload;n.lastVisitedPaths[t]=i},toggleTeamExpansion:(n,e)=>{const t=e.payload,i=n.expandedTeams.indexOf(t);i>=0?n.expandedTeams.splice(i,1):n.expandedTeams.push(t)},expandTeam:(n,e)=>{const t=e.payload;n.expandedTeams.includes(t)||n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:i,userEmail:a}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][i]||(n.hiddenUsers[t][i]=[]);const l=n.hiddenUsers[t][i],c=l.indexOf(a);c>=0?l.splice(c,1):l.push(a),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))},showAlert:(n,e)=>{n.alertConfig=e.payload},hideAlert:n=>{n.alertConfig=null},setPeekPositionName:(n,e)=>{n.peekPositionName=e.payload}}}),{setMobileSidebarOpen:Ol,setDesktopSidebarExpanded:Qj,setRosterAllViewMode:fA,setLastVisitedPath:Xj,toggleTeamExpansion:Wj,expandTeam:Jj,toggleUserVisibility:Zj,showAlert:Ca,hideAlert:dA,setPeekPositionName:e3}=WC.actions,t3=WC.reducer,n3=()=>{const n=O.useContext(NC);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},r3="_themeToggleButton_1ugtj_1",i3={themeToggleButton:r3},Dm=({showText:n,className:e,iconClassName:t})=>{const{theme:i,toggleTheme:a}=n3();return b.jsxs("button",{className:`${i3.themeToggleButton} ${e||""}`,onClick:a,"aria-label":"Toggle theme",children:[b.jsx("span",{className:t||"",children:i==="dark"?b.jsx(Hj,{size:20}):b.jsx(kj,{size:20})}),n&&b.jsx("span",{children:"Toggle theme"})]})},s3={onlineUsers:[],error:null},JC=La({name:"presence",initialState:s3,reducers:{setOnlineUsers:(n,e)=>{n.onlineUsers=e.payload,n.error=null},setPresenceError:(n,e)=>{n.error=e.payload}}}),{setOnlineUsers:a3,setPresenceError:o3}=JC.actions,l3=JC.reducer,u3=()=>{try{const n="gig_roster_session_id";let e=sessionStorage.getItem(n);return e||(e=Math.random().toString(36).substring(2,10),sessionStorage.setItem(n,e)),e}catch{return Math.random().toString(36).substring(2,10)}},c3=()=>{try{const n="gig_roster_session_color";let e=sessionStorage.getItem(n);if(!e){const t=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F78FB3","#BB8FCE","#82E0AA","#F1948A","#85C1E9","#76D7C4","#F8C471","#C39BD3","#7FB3D5","#7DCEA0","#F0B27A","#5DADE2","#D7BDE2","#A9CCE3","#A3E4D7"],i=Math.floor(Math.random()*t.length);e=t[i],sessionStorage.setItem(n,e)}return e}catch{return"#FF6B6B"}},ZC=u3(),h3=c3(),f3=6e4,d3=9e4,m3=(n,e)=>{const t=O.useRef(!1);O.useEffect(()=>{if(!(n!=null&&n.uid)||!(e!=null&&e.email))return;const i=`${n.uid}_${ZC}`,a=Jn(Bt,"presence",i);t.current||(t.current=!0,(async()=>{try{const y=new Date(Date.now()-6e5),v=Va(Cs(Bt,"presence"),_m("userUid","==",n.uid));(await uu(v)).forEach(w=>{var V,M;const D=((M=(V=w.data().lastSeen)==null?void 0:V.toDate)==null?void 0:M.call(V))||new Date(0);w.id!==i&&D<y&&OS(w.ref).catch(()=>{})})}catch{}})());const l=async()=>{if(!(!xo.currentUser||document.visibilityState!=="visible"))try{await vm(a,{uid:i,userUid:n.uid,name:e.name||n.displayName||"Anonymous",email:e.email,color:h3,lastSeen:W4()},{merge:!0})}catch(p){const y=p;y.code!=="unavailable"&&console.warn("[Presence] Heartbeat failed:",y.message)}},c=()=>{OS(a).catch(()=>{})};l();const f=setInterval(l,f3),m=()=>{document.visibilityState==="visible"?l():c()};return document.addEventListener("visibilitychange",m),window.addEventListener("beforeunload",c),()=>{clearInterval(f),document.removeEventListener("visibilitychange",m),window.removeEventListener("beforeunload",c),c()}},[n==null?void 0:n.uid,n==null?void 0:n.displayName,e==null?void 0:e.email,e==null?void 0:e.name])},p3=()=>{const n=Mn(),{firebaseUser:e}=He(a=>a.auth),t=e==null?void 0:e.uid,i=O.useRef([]);O.useEffect(()=>{if(!t)return;let a=null;const l=Va(Cs(Bt,"presence")),c=p=>{const y=Date.now(),v=y-d3,E=[];p.forEach(w=>{var V,M,U;if(!w||!w.name)return;const D=((M=(V=w.lastSeen)==null?void 0:V.toMillis)==null?void 0:M.call(V))||((U=w.lastSeen)==null?void 0:U.seconds)*1e3||y;D>v&&E.push({uid:w.uid,name:String(w.name),email:String(w.email||""),color:String(w.color||"#5c4eb1"),lastSeen:D})}),n(a3(E.sort((w,D)=>w.name.localeCompare(D.name))))},f=setTimeout(()=>{a=go(l,{next:p=>{const y=p.docs.map(v=>v.data());i.current=y,c(y)},error:p=>{console.error("[Presence] Listener failed:",p.message),n(o3(p.message))}})},1e3),m=setInterval(()=>{c(i.current)},3e4);return()=>{clearTimeout(f),a&&a(),clearInterval(m)}},[n,t])},g3=()=>He(n=>n.presence.onlineUsers),y3="_meTag_sc6t2_10",_3="_isMe_sc6t2_51",mA={meTag:y3,isMe:_3},Om=({displayName:n,isMe:e})=>b.jsxs(O.Fragment,{children:[b.jsx("span",{className:e?mA.isMe:"",children:n}),e&&b.jsx("span",{className:mA.meTag,children:"Me"})]}),v3="_onlineUsersContainer_1vvxe_1",E3="_sidebarVariant_1vvxe_17",T3="_sidebarExpanded_1vvxe_22",b3="_onlineLabel_1vvxe_26",S3="_avatarStack_1vvxe_38",A3="_avatarCircle_1vvxe_44",w3="_moreCircle_1vvxe_66",C3="_userDropdown_1vvxe_72",R3="_dropdownDown_1vvxe_83",I3="_dropdownUp_1vvxe_88",x3="_dropdownTitle_1vvxe_93",N3="_userListScroll_1vvxe_103",D3="_userItem_1vvxe_108",O3="_userNameText_1vvxe_122",M3="_userAvatarSmall_1vvxe_129",P3="_pulse_1vvxe_142",Un={onlineUsersContainer:v3,sidebarVariant:E3,sidebarExpanded:T3,onlineLabel:b3,avatarStack:S3,avatarCircle:A3,moreCircle:w3,userDropdown:C3,dropdownDown:R3,dropdownUp:I3,dropdownTitle:x3,userListScroll:N3,userItem:D3,userNameText:O3,userAvatarSmall:M3,pulse:P3},eR=({variant:n="top-bar",showText:e=!1})=>{const t=g3(),{firebaseUser:i}=He(w=>w.auth),a=i?`${i.uid}_${ZC}`:null,[l,c]=O.useState(!1),f=O.useRef(null);if(O.useEffect(()=>{const w=D=>{f.current&&!f.current.contains(D.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),!t||t.length===0)return null;const m=t.slice(0,3),p=t.length-3,y=w=>{if(!w||typeof w!="string")return"?";const D=w.trim().split(" ");return D.length===0?"?":D.map(V=>V[0]).join("").substring(0,2).toUpperCase()},v=[Un.onlineUsersContainer,n==="sidebar"?Un.sidebarVariant:"",e?Un.sidebarExpanded:""].filter(Boolean).join(" "),E=[Un.userDropdown,n==="sidebar"?Un.dropdownUp:Un.dropdownDown].filter(Boolean).join(" ");return b.jsxs("div",{className:v,ref:f,onClick:()=>c(!l),children:[e&&b.jsx("span",{className:Un.onlineLabel,children:"Online"}),b.jsxs("div",{className:Un.avatarStack,children:[p>0&&b.jsxs("div",{className:`${Un.avatarCircle} ${Un.moreCircle}`,children:["+",p]}),[...m].reverse().map(w=>b.jsx("div",{className:Un.avatarCircle,title:w.name||"Unknown User",style:{backgroundColor:w.color,borderColor:"white"},children:y(w.name)},w.uid))]}),l&&b.jsxs("div",{className:E,children:[b.jsxs("div",{className:Un.dropdownTitle,children:["Online Now (",t.length,")"]}),b.jsx("div",{className:Un.userListScroll,children:t.map(w=>b.jsxs("div",{className:Un.userItem,children:[b.jsx("div",{className:Un.userAvatarSmall,style:{backgroundColor:w.color},children:y(w.name)}),b.jsx("span",{className:Un.userNameText,children:b.jsx(Om,{displayName:w.name||"Unknown User",isMe:w.uid===a})}),b.jsx("div",{className:Un.pulse})]},w.uid))})]})]})},k3="_mobileHeader_lcvro_1",V3="_mobileHeaderPill_lcvro_18",L3="_mobileHeaderPillDisabled_lcvro_30",j3="_mobileHeaderPillActive_lcvro_34",U3="_mobileHeaderText_lcvro_45",z3="_mobileHeaderChevron_lcvro_53",B3="_rotate_lcvro_58",H3="_mobileHeaderActions_lcvro_62",F3="_mobileThemeToggle_lcvro_68",fs={mobileHeader:k3,mobileHeaderPill:V3,mobileHeaderPillDisabled:L3,mobileHeaderPillActive:j3,mobileHeaderText:U3,mobileHeaderChevron:z3,rotate:B3,mobileHeaderActions:H3,mobileThemeToggle:F3},q3=({title:n,hasSideNav:e=!0})=>{const t=Mn(),{isMobileSidebarOpen:i}=He(l=>l.ui),a=()=>{e&&t(Ol(!i))};return b.jsxs("header",{className:fs.mobileHeader,children:[b.jsxs("div",{className:`${fs.mobileHeaderPill} ${i?fs.mobileHeaderPillActive:""} ${e?"":fs.mobileHeaderPillDisabled}`,onClick:a,children:[b.jsx("span",{className:fs.mobileHeaderText,children:n}),e&&b.jsx(YC,{className:`${fs.mobileHeaderChevron} ${i?fs.rotate:""}`})]}),b.jsxs("div",{className:fs.mobileHeaderActions,children:[b.jsx(Dm,{className:fs.mobileThemeToggle}),b.jsx(eR,{})]})]})};var tn=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(tn||{}),Pl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(Pl||{});const uv=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],pA=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],tR=n=>{const e=[];return Object.entries(n).forEach(([t,i])=>{i.forEach(a=>{e.push(`${t}|${a}`)})}),e},nR=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`},Es=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),G3={firebaseUser:null,userData:null,loading:!0,error:null},cd=Hr("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=Jn(Bt,"users",n),i=await lh(t);if(!i.exists()){const a="chris.sm.kang542@gmail.com",l=xo.currentUser,c=(l==null?void 0:l.email)===a,f={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await vm(t,f),f}return i.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),hd=Hr("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const i=Jn(Bt,"users",n),a={...e};return a.teamPositions&&(a.indexedAssignments=tR(a.teamPositions)),await X1(i,a),a}catch(i){return t(i instanceof Error?i.message:"Failed to update profile")}}),rR=La({name:"auth",initialState:G3,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(cd.pending,e=>{e.loading=!0,e.error=null}).addCase(cd.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(cd.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(hd.pending,e=>{e.error=null}).addCase(hd.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(hd.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:$3,setUserData:iR,setLoading:Ez,logout:K3}=rR.actions,Y3=rR.reducer,Q3={entries:{},dirtyEntries:{},loading:!0,initialLoad:!1,saving:!1,error:null},cy=Hr("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Va(Cs(Bt,"roster")),i=await uu(t),a={};return i.docs.forEach(l=>{const c=l.data(),f=c.updatedAt,m={...c,updatedAt:f&&typeof f=="object"&&"toMillis"in f?f.toMillis():f};a[l.id]={...m,id:l.id}}),a}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),xc=Hr("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=J1(Bt),i=Date.now(),a={};return Object.values(n).forEach(l=>{const c=Jn(Bt,"roster",l.id),f={...l,updatedAt:i};t.set(c,f),a[l.id]=f}),await t.commit(),a}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),sR=La({name:"roster",initialState:Q3,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:i,userIdentifier:a,positionGroupNames:l,maxConflict:c}=e.payload,f=n.dirtyEntries[t]||n.entries[t];let m;f?m=JSON.parse(JSON.stringify(f)):m={id:t,date:t,teams:{},absence:{}},m.teams[i]||(m.teams[i]={});const p=m.teams[i][a]||[],y=l.findIndex(D=>p.includes(D)),v=y>=0?l[y]:null;let E=null;v===null?E=l[0]:y<l.length-1?E=l[y+1]:E=null;const w=p.filter(D=>!l.includes(D));if(E){if(m.absence[a]){n.error=`Cannot assign ${a} because they are marked as absent on ${t}.`;return}if(w.length<c)w.push(E);else{n.error=`User already has ${c} assignment(s) in this team.`;return}}w.length===0?delete m.teams[i][a]:m.teams[i][a]=w,n.dirtyEntries[t]=m},updateLocalEventName(n,e){const{date:t,eventName:i}=e.payload,a=n.dirtyEntries[t]||n.entries[t];let l;a?l=JSON.parse(JSON.stringify(a)):l={id:t,date:t,teams:{},absence:{}},l.eventName=i,n.dirtyEntries[t]=l},resetRosterEdits(n){n.dirtyEntries={},n.error=null},setRosterEntries(n,e){n.entries=e.payload,n.loading=!1,n.initialLoad=!0},setLoading(n,e){n.loading=e.payload},updateLocalAbsence(n,e){var m;const{date:t,userIdentifier:i,reason:a,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let f;c?f=JSON.parse(JSON.stringify(c)):f={id:t,date:t,teams:{},absence:{}},l?(f.absence[i]={reason:a??((m=f.absence[i])==null?void 0:m.reason)??""},Object.keys(f.teams).forEach(p=>{f.teams[p][i]&&delete f.teams[p][i]})):delete f.absence[i],n.dirtyEntries[t]=f}},extraReducers:n=>{n.addCase(cy.pending,e=>{e.loading=!0,e.error=null}).addCase(cy.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(cy.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(xc.pending,e=>{e.saving=!0,e.error=null}).addCase(xc.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(xc.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:Tz,updateLocalAssignment:cv,updateLocalEventName:X3,resetRosterEdits:aR,setRosterEntries:W3,setLoading:gA,updateLocalAbsence:Nc}=sR.actions,J3=sR.reducer,Z3={allUsers:[],originalUsers:[],loading:!1,saving:!1,error:null},hy=Hr("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=Cs(Bt,"users"),i=Va(t),a=await uu(i),l=[];return a.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,f)=>(c.name||"").localeCompare(f.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),fd=Hr("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=J1(Bt);n.forEach(i=>{const{id:a,...l}=i;l.teamPositions&&(l.indexedAssignments=tR(l.teamPositions)),t.update(Jn(Bt,"users",a),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),oR=La({name:"userManagement",initialState:Z3,reducers:{updateUserField(n,e){const{id:t,field:i,value:a}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[i]=a)},toggleUserTeam(n,e){const{userId:t,teamName:i}=e.payload,a=n.allUsers.find(l=>l.id===t);if(a){const l=a.teams||[],c=l.includes(i)?l.filter(f=>f!==i):[...l,i];a.teams=c,a.teamPositions||(a.teamPositions={}),c.includes(i)?a.teamPositions[i]||(a.teamPositions[i]=[]):delete a.teamPositions[i]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:i,posName:a}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[i]||(l.teamPositions[i]=[]);const c=l.teamPositions[i],f=c.includes(a)?c.filter(m=>m!==a):[...c,a];l.teamPositions[i]=f}},moveUserTeam(n,e){const{userId:t,teamName:i,direction:a}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l&&l.teams){const c=l.teams.indexOf(i);if(c===-1)return;const f=a==="up"?c-1:c+1;if(f<0||f>=l.teams.length)return;const m=[...l.teams];[m[c],m[f]]=[m[f],m[c]],l.teams=m}},resetUserChanges(n){n.allUsers=JSON.parse(JSON.stringify(n.originalUsers))},setAllUsers(n,e){n.allUsers=e.payload,n.originalUsers=JSON.parse(JSON.stringify(e.payload)),n.loading=!1}},extraReducers:n=>{n.addCase(hy.pending,e=>{e.loading=!0,e.error=null}).addCase(hy.fulfilled,(e,t)=>{e.allUsers=t.payload,e.originalUsers=JSON.parse(JSON.stringify(t.payload)),e.loading=!1}).addCase(hy.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(fd.pending,e=>{e.saving=!0,e.error=null}).addCase(fd.fulfilled,e=>{e.saving=!1,e.originalUsers=JSON.parse(JSON.stringify(e.allUsers))}).addCase(fd.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:eU,toggleUserTeam:tU,toggleUserTeamPosition:nU,moveUserTeam:rU,resetUserChanges:iU,setAllUsers:sU}=oR.actions,aU=oR.reducer,oU=()=>{const n=Mn(),{firebaseUser:e,userData:t}=He(i=>i.auth);m3(e,t),p3(),O.useEffect(()=>{n(gA(!0));const i=Va(Cs(Bt,"roster")),a=go(i,{next:m=>{const p={};m.docs.forEach(y=>{const v=y.data(),E=v.updatedAt,w={...v,updatedAt:E&&typeof E=="object"&&"toMillis"in E?E.toMillis():E};p[y.id]={...w,id:y.id}}),n(W3(p))},error:m=>{console.error("Roster sync error:",m),n(gA(!1))}}),l=go(Jn(Bt,"metadata","teams"),m=>{if(m.exists()){const p=m.data(),y=Array.isArray(p.list)?p.list.map(v=>({...v,maxConflict:v.maxConflict||1})):[];n(mj(y))}},m=>console.error("Teams sync error:",m)),c=go(Jn(Bt,"metadata","positions"),m=>{if(m.exists()){const p=m.data(),y=Array.isArray(p.list)?p.list:[];n(hj(y))}},m=>console.error("Positions sync error:",m)),f=go(Cs(Bt,"users"),m=>{const p=[];m.forEach(v=>{p.push({...v.data(),id:v.id})});const y=p.sort((v,E)=>(v.name||"").localeCompare(E.name||""));n(sU(y))},m=>console.error("Users sync error:",m));return()=>{a(),l(),c(),f()}},[n]),O.useEffect(()=>{if(!(e!=null&&e.uid))return;const i=go(Jn(Bt,"users",e.uid),a=>{a.exists()&&n(iR(a.data()))},a=>console.error("Profile sync error:",a));return()=>i()},[n,e==null?void 0:e.uid])},lU="_modalOverlay_ah937_1",uU="_modalContent_ah937_16",cU="_modalHeader_ah937_34",hU="_closeButton_ah937_48",fU="_modalBody_ah937_64",dU="_modalFooter_ah937_70",Sl={modalOverlay:lU,modalContent:uU,modalHeader:cU,closeButton:hU,modalBody:fU,modalFooter:dU},hv=({isOpen:n,onClose:e,title:t,children:i,footer:a})=>{if(O.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),!n)return null;const l=b.jsx("div",{className:Sl.modalOverlay,onClick:e,children:b.jsxs("div",{className:Sl.modalContent,onClick:c=>c.stopPropagation(),children:[b.jsxs("div",{className:Sl.modalHeader,children:[b.jsx("h2",{children:t}),b.jsx("button",{className:Sl.closeButton,onClick:e,"aria-label":"Close",children:b.jsx(lv,{size:24})})]}),b.jsx("div",{className:Sl.modalBody,children:i}),a&&b.jsx("div",{className:Sl.modalFooter,children:a})]})});return rw.createPortal(l,document.body)},mU="_confirmModalBody_17sxu_1",pU="_confirmModalMessage_17sxu_8",gU="_footer_17sxu_12",yU="_cancelButton_17sxu_19",_U="_confirmButton_17sxu_34",hc={confirmModalBody:mU,confirmModalMessage:pU,footer:gU,cancelButton:yU,confirmButton:_U},vU=()=>{const n=Mn(),{alertConfig:e}=He(l=>l.ui);if(!e)return null;const t=()=>{n(dA())},i=()=>{e.onConfirm&&e.onConfirm(),n(dA())},a=b.jsxs("div",{className:hc.footer,children:[e.showCancel!==!1&&b.jsx("button",{className:hc.cancelButton,onClick:t,children:e.cancelText||"Cancel"}),b.jsx("button",{className:hc.confirmButton,onClick:i,children:e.confirmText||"OK"})]});return b.jsx(hv,{isOpen:!!e,onClose:t,title:e.title,footer:a,children:b.jsx("div",{className:hc.confirmModalBody,children:b.jsx("div",{className:hc.confirmModalMessage,children:e.message})})})},EU="_bottomNavContainer_1c0tq_1",TU="_bottomNav_1c0tq_1",bU="_bottomNavBtn_1c0tq_18",SU="_bottomNavBtnActive_1c0tq_42",$f={bottomNavContainer:EU,bottomNav:TU,bottomNavBtn:bU,bottomNavBtnActive:SU},AU=()=>{const n=Oo(),e=ai(),{lastVisitedPaths:t}=He(l=>l.ui),i=e.pathname.includes("/settings")?tn.SETTINGS:e.pathname.includes("/dashboard")?tn.DASHBOARD:tn.ROSTER,a=l=>{if(i===l){l===tn.DASHBOARD&&n("/app/dashboard");return}const c=t[l];n(c||`/app/${l}`)};return b.jsx("nav",{className:$f.bottomNavContainer,children:b.jsx("div",{className:$f.bottomNav,children:uv.map(l=>b.jsxs("button",{className:`${$f.bottomNavBtn} ${i===l.id?$f.bottomNavBtnActive:""}`,onClick:()=>a(l.id),children:[b.jsx("span",{children:l.icon}),b.jsx("span",{children:l.label})]},l.id))})})},wU="_sideNav_1youa_1",CU="_menuOpen_1youa_20",RU="_sidebarContent_1youa_26",IU="_tabletSidebarHeader_1youa_34",xU="_sideMenuList_1youa_38",NU="_sidenavMenuSubheading_1youa_43",DU="_sideNavItem_1youa_67",OU="_sideNavItemActive_1youa_95",MU="_sideEmoji_1youa_102",PU="_loading_1youa_109",kU="_sidebarToggleButton_1youa_116",VU="_sidebarFooter_1youa_117",LU="_sidebarCollapsed_1youa_173",jU="_adminOnlySectionWrapper_1youa_209",UU="_sidebarThemeToggle_1youa_239",zU="_sidebarThemeIcon_1youa_248",ft={sideNav:wU,menuOpen:CU,sidebarContent:RU,tabletSidebarHeader:IU,sideMenuList:xU,sidenavMenuSubheading:NU,sideNavItem:DU,sideNavItemActive:OU,sideEmoji:MU,loading:PU,sidebarToggleButton:kU,sidebarFooter:VU,sidebarCollapsed:LU,adminOnlySectionWrapper:jU,sidebarThemeToggle:UU,sidebarThemeIcon:zU},BU=()=>{var W;const n=Oo(),e=ai(),{teamName:t,positionName:i,section:a}=Mo(),l=Mn(),{userData:c}=He(K=>K.auth),{isDesktopSidebarExpanded:f,isMobileSidebarOpen:m,expandedTeams:p}=He(K=>K.ui),{teams:y,fetched:v,loading:E}=He(K=>K.teams),{fetched:w}=He(K=>K.positions),D=e.pathname.includes("/settings")?tn.SETTINGS:e.pathname.includes("/dashboard")?tn.DASHBOARD:tn.ROSTER,V=i||a,M=O.useRef(void 0);O.useEffect(()=>{t&&D===tn.ROSTER&&t!==M.current&&l(Jj(t)),M.current=t},[t,D,l]),O.useEffect(()=>{v||l(Ic()),w||l(Hl())},[l,v,w]);const U=O.useCallback(K=>{n(K)},[n]),j=K=>{l(Wj(K))},q=()=>{const K=uv.find(C=>C.id===D),S=K?K.label:"GIG ROSTER";return t&&V?`${t}  ${V}`:t||(V?`${S}  ${V}`:S)},Q=[ft.sideNav,m?ft.menuOpen:"",f?"":ft.sidebarCollapsed].filter(Boolean).join(" ");return b.jsxs("aside",{className:Q,children:[b.jsxs("div",{className:ft.sidebarContent,children:[b.jsxs("div",{className:ft.tabletSidebarHeader,children:[f&&b.jsx("h3",{children:q()}),b.jsx("button",{className:ft.sidebarToggleButton,onClick:()=>l(Qj(!f)),"aria-label":f?"Collapse sidebar":"Expand sidebar",children:f?b.jsx(Lj,{size:20}):b.jsx(Uj,{size:20})})]}),b.jsxs("nav",{className:ft.sideMenuList,children:[D===tn.ROSTER&&E&&b.jsx("div",{className:`${ft.sideNavItem} ${ft.loading}`,children:"Loading teams..."}),D===tn.ROSTER?(W=c==null?void 0:c.teams)==null?void 0:W.map(K=>{var k,P;const S=y.find(L=>L.name===K);if(!S)return null;const C=c.teams.length===1,I=C||p.includes(S.name);return b.jsxs("div",{children:[!C&&b.jsxs("div",{className:`${ft.sidenavMenuSubheading} ${ft.sidenavMenuSubheadingClickable}`,style:{cursor:"pointer"},onClick:()=>{j(S.name),U(`/app/roster/${S.name}/All`)},children:[b.jsxs("div",{children:[S.emoji," ",f&&S.name]}),b.jsx("span",{className:ft.expandIcon,children:I?"":""})]}),I&&b.jsxs("div",{className:ft.sideNavSubItems,children:[b.jsxs("button",{className:`${ft.sideNavItem} ${ft.sideNavItemSub} ${V==="All"&&t===S.name?ft.sideNavItemActive:""}`,onClick:()=>{U(`/app/roster/${S.name}/All`),l(Ol(!1))},style:{borderLeft:V==="All"&&t===S.name?"4px solid var(--color-primary)":"4px solid transparent",backgroundColor:V==="All"&&t===S.name?"var(--background-toggle-on-transparent)":"transparent",color:V==="All"&&t===S.name?"var(--color-primary)":""},children:[b.jsx("span",{className:ft.sideEmoji,children:""})," ",f&&"All"]}),(P=(k=S.positions)==null?void 0:k.filter(L=>!L.parentId))==null?void 0:P.map(L=>{const x=V===L.name&&t===S.name;return b.jsxs("button",{className:`${ft.sideNavItem} ${ft.sideNavItemSub} ${x?ft.sideNavItemActive:""}`,onClick:()=>{U(`/app/roster/${S.name}/${L.name}`),l(Ol(!1))},style:{borderLeft:x?`4px solid ${L.colour}`:"4px solid transparent",backgroundColor:x?`${L.colour}15`:"transparent",color:x?L.colour:""},children:[b.jsx("span",{className:ft.sideEmoji,children:L.emoji})," ",f&&L.name]},L.name)}),S.allowAbsence!==!1&&b.jsxs("button",{className:`${ft.sideNavItem} ${ft.sideNavItemSub} ${V==="Absence"&&t===S.name?ft.sideNavItemActive:""}`,onClick:()=>{U(`/app/roster/${S.name}/Absence`),l(Ol(!1))},style:{borderLeft:V==="Absence"&&t===S.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:V==="Absence"&&t===S.name?"var(--background-toggle-off-transparent)":"transparent"},children:[b.jsx("span",{className:ft.sideEmoji,children:""})," ",f&&"Absence"]})]})]},S.name)}):pA.filter(K=>!K.adminOnly).map(K=>b.jsxs("button",{className:`${ft.sideNavItem} ${V===K.id?ft.sideNavItemActive:""}`,onClick:()=>{U(`/app/settings/${K.id}`),l(Ol(!1))},children:[b.jsx("span",{className:ft.sideEmoji,children:K.icon})," ",f&&K.label]},K.id))]})]}),(c==null?void 0:c.isAdmin)&&D===tn.SETTINGS&&b.jsxs("div",{className:ft.adminOnlySectionWrapper,children:[b.jsx("div",{className:ft.sidenavMenuSubheading,children:f&&b.jsx("h4",{children:"Admin Only"})}),pA.filter(K=>K.adminOnly).map(K=>b.jsxs("button",{className:`${ft.sideNavItem} ${V===K.id?ft.sideNavItemActive:""}`,onClick:()=>{U(`/app/settings/${K.id}`),l(Ol(!1))},children:[b.jsx("span",{className:ft.sideEmoji,children:K.icon})," ",f&&K.label]},K.id))]}),b.jsxs("div",{className:ft.sidebarFooter,children:[b.jsx(Dm,{className:ft.sidebarThemeToggle,iconClassName:ft.sidebarThemeIcon}),b.jsx(eR,{variant:"sidebar",showText:f})]})]})},HU="_layoutWrapper_ysxiy_1",FU="_innerWrapper_ysxiy_13",qU="_mainContent_ysxiy_21",Al={layoutWrapper:HU,innerWrapper:FU,mainContent:qU},GU=()=>{const n=Mn(),e=Oo(),t=ai(),i=Mo(),{userData:a}=He(M=>M.auth);oU();const{teams:l}=He(M=>M.teams),{isMobileSidebarOpen:c,isDesktopSidebarExpanded:f,lastVisitedPaths:m}=He(M=>M.ui),p=t.pathname.includes("/settings")?tn.SETTINGS:t.pathname.includes("/dashboard")?tn.DASHBOARD:tn.ROSTER,{teamName:y,positionName:v,section:E}=i,w=v||E||null,D=p!==tn.DASHBOARD;O.useEffect(()=>{const M=p===tn.ROSTER&&!y,U=p===tn.SETTINGS&&!w;if(t.pathname.startsWith("/app/")&&!M&&!U&&p!==tn.DASHBOARD){const j=t.pathname+t.search;n(Xj({tabId:p,path:j}))}},[t.pathname,t.search,p,y,w,n]),O.useEffect(()=>{var q;const M=t.pathname==="/app"||t.pathname==="/app/",U=p===tn.ROSTER&&!y,j=p===tn.SETTINGS&&!w;if(M)e(m[tn.DASHBOARD]||"/app/dashboard",{replace:!0});else if(U){const Q=m[tn.ROSTER];if(Q)e(Q,{replace:!0});else if((q=a==null?void 0:a.teams)!=null&&q[0]&&l.length>0){const W=l.find(K=>K.name===a.teams[0]);W&&e(`/app/roster/${W.name}/All`,{replace:!0})}}else if(j){const Q=m[tn.SETTINGS];e(Q||`/app/settings/${Pl.PROFILE}`,{replace:!0})}},[p,y,w,a,l,e,t.pathname,t.search,m]);const V=()=>{const M=uv.find(j=>j.id===p),U=M?M.label:"GIG ROSTER";return y&&w?`${y}  ${w}`:y||(w?`${U}  ${w}`:U)};return b.jsxs("div",{className:`${Al.layoutWrapper} ${c?Al.menuOpen:""} ${f?Al.sidebarExpanded:Al.sidebarCollapsed}`,children:[D&&b.jsx(BU,{}),b.jsxs("div",{className:Al.innerWrapper,children:[b.jsx(q3,{title:V(),hasSideNav:D}),b.jsx("main",{className:Al.mainContent,children:b.jsx(WA,{})}),b.jsx(AU,{})]}),b.jsx(vU,{})]})},$U="_rosterSaveFooter_1ce1v_1",KU="_saveFooterContent_1ce1v_23",YU="_changesLabel_1ce1v_32",QU="_saveFooterActions_1ce1v_37",XU="_saveBtn_1ce1v_42",WU="_cancelBtn_1ce1v_57",JU="_sidebarCollapsed_1ce1v_77",ZU="_noSidebar_1ce1v_81",fa={rosterSaveFooter:$U,saveFooterContent:KU,changesLabel:YU,saveFooterActions:QU,saveBtn:XU,cancelBtn:WU,sidebarCollapsed:JU,noSidebar:ZU},fu=({label:n="You have unsaved changes",onSave:e,onCancel:t,isSaving:i,saveText:a="Save",discardText:l="Discard",hasSideNav:c=!0})=>{const{isDesktopSidebarExpanded:f}=He(p=>p.ui),m=[fa.rosterSaveFooter,c?"":fa.noSidebar,!f&&c?fa.sidebarCollapsed:""].filter(Boolean).join(" ");return b.jsx("div",{className:m,children:b.jsxs("div",{className:fa.saveFooterContent,children:[b.jsx("span",{className:fa.changesLabel,children:n}),b.jsxs("div",{className:fa.saveFooterActions,children:[b.jsx("button",{className:fa.cancelBtn,onClick:t,disabled:i,children:l}),b.jsx("button",{className:fa.saveBtn,onClick:e,disabled:i,children:i?"Saving...":a})]})]})})},dd=(n,e,t)=>{const i=[],a=new Date;a.setHours(0,0,0,0);const l=a.getFullYear(),c=e||l,f=t||l,m={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},p=n.map(w=>m[w]);let y;c===l?y=new Date(a):y=new Date(c,0,1),y.setHours(0,0,0,0);const v=new Date(f,11,31);v.setHours(23,59,59,999);const E=new Date(y);for(;E.getTime()<=v.getTime();)p.includes(E.getDay())&&i.push(new Date(E)),E.setDate(E.getDate()+1);return i.sort((w,D)=>w.getTime()-D.getTime()),i.map(w=>nR(w))},e6=(n,e,t=5)=>{const i=[],a=new Date(e);a.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(m=>l[m]),f=new Date(a);for(;i.length<t;){f.setDate(f.getDate()-1),c.includes(f.getDay())&&i.push(new Date(f));const m=new Date(a);if(m.setFullYear(m.getFullYear()-1),f<m)break}return i.map(m=>nR(m)).sort()},t6={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},md=Hr("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=Cs(Bt,"users"),i=Va(t,_m("teams","array-contains",n)),a=await uu(i),l=[];return a.forEach(c=>{l.push(c.data())}),l.sort((c,f)=>(c.name||"").localeCompare(f.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),pd=Hr("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:i})=>{if(!n||!e)return[];try{const c=i().positions.positions.filter(w=>w.parentId===e),m=[e,...c.map(w=>w.name)].map(w=>`${n}|${w}`),p=Cs(Bt,"users"),y=Va(p,_m("indexedAssignments","array-contains-any",m)),v=await uu(y),E=[];return v.forEach(w=>{E.push(w.data())}),E.sort((w,D)=>(w.name||"").localeCompare(D.name||""))}catch(a){return console.error("Error fetching users:",a),t("Failed to load users.")}}),gd=Hr("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=Jn(Bt,"metadata","teams"),i=await lh(t);if(i.exists()){const a=i.data();return(Array.isArray(a.list)?a.list.map(f=>({...f,preferredDays:f.preferredDays||[],positions:f.positions||[]})):[]).find(f=>f.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),lR=La({name:"rosterView",initialState:t6,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=e6(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=dd(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,i=dd(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...i]}}},extraReducers:n=>{n.addCase(pd.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(pd.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(pd.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(md.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(md.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(md.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(gd.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(gd.fulfilled,(e,t)=>{var i;e.currentTeamData=t.payload,(i=t.payload)!=null&&i.preferredDays&&(e.rosterDates=dd(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(gd.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:uR,resetToUpcomingDates:cR,loadNextYearDates:n6}=lR.actions,r6=lR.reducer,i6="_dashboardContainer_y5fm3_1",s6="_dashboardHeader_y5fm3_10",a6="_dashboardHeaderActions_y5fm3_24",o6="_clearPastBtn_y5fm3_32",l6="_eventNameContainer_y5fm3_48",u6="_dashboardEventNameInput_y5fm3_55",c6="_dashboardEventNameInputHasEvent_y5fm3_79",h6="_carouselOuterWrapper_y5fm3_90",f6="_eventsCarouselTrack_y5fm3_98",d6="_eventCardWrapper_y5fm3_112",m6="_peek_y5fm3_123",p6="_active_y5fm3_129",g6="_eventCardDate_y5fm3_135",y6="_dashboardTodayBadge_y5fm3_147",_6="_teamCardsContainer_y5fm3_158",v6="_teamEventCard_y5fm3_166",E6="_dashboardThemeToggle_y5fm3_174",T6="_teamEventHeader_y5fm3_178",b6="_teamCardEmoji_y5fm3_197",S6="_teamCardName_y5fm3_201",A6="_copyRosterBtn_y5fm3_205",w6="_copyRosterBtnSuccess_y5fm3_226",C6="_teamEventDetails_y5fm3_232",R6="_posAssignmentRow_y5fm3_238",I6="_posEmojiLabel_y5fm3_244",x6="_assignedNames_y5fm3_250",N6="_unassigned_y5fm3_256",D6="_meTag_y5fm3_264",O6="_carouselPagination_y5fm3_286",M6="_dashboardEmpty_y5fm3_295",It={dashboardContainer:i6,dashboardHeader:s6,dashboardHeaderActions:a6,clearPastBtn:o6,eventNameContainer:l6,dashboardEventNameInput:u6,dashboardEventNameInputHasEvent:c6,carouselOuterWrapper:h6,eventsCarouselTrack:f6,eventCardWrapper:d6,peek:m6,active:p6,eventCardDate:g6,dashboardTodayBadge:y6,teamCardsContainer:_6,teamEventCard:v6,dashboardThemeToggle:E6,teamEventHeader:T6,teamCardEmoji:b6,teamCardName:S6,copyRosterBtn:A6,copyRosterBtnSuccess:w6,teamEventDetails:C6,posAssignmentRow:R6,posEmojiLabel:I6,assignedNames:x6,unassigned:N6,meTag:D6,carouselPagination:O6,dashboardEmpty:M6},P6=()=>{const n=Mn(),[e,t]=$D(),i=e.get("date"),{userData:a}=He(le=>le.auth),{teams:l}=He(le=>le.teams),{entries:c,dirtyEntries:f,loading:m,initialLoad:p,saving:y}=He(le=>le.roster),{positions:v}=He(le=>le.positions),[E,w]=O.useState([]),[D,V]=O.useState(!1),[M,U]=O.useState(null),[j,q]=O.useState(0),[Q,W]=O.useState(0),[K,S]=O.useState(!1),C=O.useRef(null),I=O.useRef(!1),k=Object.keys(f).length>0;O.useEffect(()=>{const le=C.current;if(!le)return;const ye=new ResizeObserver(Se=>{for(const Le of Se){const ze=Le.contentRect.width;ze>0&&W(ze)}});return ye.observe(le),()=>ye.disconnect()},[m,D,p]);const P=O.useMemo(()=>{const le=Es();if(!(a!=null&&a.teams)||l.length===0)return[];const ye=l.filter(ze=>a.teams.includes(ze.name)),Se=new Set;ye.forEach(ze=>{dd(ze.preferredDays).forEach(St=>Se.add(St))});const Le=Array.from(Se).sort();return i&&i<le?[i]:Le.filter(ze=>{const vt=ze;if(i===vt)return!0;const St=c[vt]||f[vt];return St?ye.some(Qe=>{var Ht;const At=((Ht=St.teams)==null?void 0:Ht[Qe.name])||{};return Object.values(At).some(we=>we.length>0)}):!1})},[a,l,c,f,i]);O.useEffect(()=>{if(P.length===0||!C.current||m||Q===0)return;const le=C.current,ye=(Se,Le)=>{const ze=le.offsetWidth||Q;ze!==0&&(le.style.scrollSnapType="none",le.scrollTo({left:ze*Se,behavior:Le?"smooth":"auto"}),setTimeout(()=>{le&&(le.style.scrollSnapType="x mandatory"),S(!0)},50),q(Se),I.current=!0)};if(i){const Se=P.findIndex(Le=>Le===i);if(Se>=0){const Le=Math.round(le.scrollLeft/(le.offsetWidth||Q||1));!I.current||Le!==Se?requestAnimationFrame(()=>{ye(Se,I.current)}):S(!0)}else S(!0)}else le.scrollLeft!==0?ye(0,!0):S(!0),I.current=!0},[i,P,m,Q]);const L=()=>{t({},{replace:!0})};O.useEffect(()=>{(async()=>{if(!(!(a!=null&&a.teams)||a.teams.length===0)){V(!0);try{const ye=Cs(Bt,"users"),Se=Va(ye,_m("teams","array-contains-any",a.teams)),Le=await uu(Se),ze=[];Le.forEach(vt=>ze.push(vt.data())),w(ze)}catch(ye){console.error("Error fetching users for dashboard:",ye)}finally{V(!1)}}})()},[a==null?void 0:a.teams]);const x=O.useCallback(le=>{if(!le||!(a!=null&&a.teams)||l.length===0)return null;const ye=le,Se=f[ye]||c[ye],vt=l.filter(St=>a.teams.includes(St.name)).sort((St,Qe)=>{const At=a.teams.indexOf(St.name),Ht=a.teams.indexOf(Qe.name);return At-Ht}).map(St=>{var Pe;const Qe=((Pe=Se==null?void 0:Se.teams)==null?void 0:Pe[St.name])||{},At=[],Ht=St.positions.map($e=>$e.name);let we=0;return Ht.forEach($e=>{const Be=v.find(gt=>gt.name===$e),ke=[];Object.entries(Qe).forEach(([gt,ln])=>{if(ln.includes($e)){const Ot=E.find(Et=>Et.email===gt);Ot?ke.push(Ot):ke.push({email:gt,name:gt}),we++}});const Ze=[...ke].sort((gt,ln)=>Be!=null&&Be.sortByGender&&gt.gender!==ln.gender?gt.gender==="Male"?-1:ln.gender==="Male"?1:(gt.gender||"").localeCompare(ln.gender||""):(gt.name||"").localeCompare(ln.name||""));At.push({posName:$e,emoji:(Be==null?void 0:Be.emoji)||"",assignedUsers:Ze.map(gt=>({name:gt.name||gt.email||"Unknown",isMe:gt.email===a.email}))})}),{teamName:St.name,teamEmoji:St.emoji,positions:At,hasAssignments:we>0}}).filter(St=>St.hasAssignments);return vt.length>0?vt:null},[c,f,a,l,v,E]),ae=(le,ye,Se,Le,ze)=>{const St=new Date(le).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"});let Qe="";ze&&(Qe+=` ${ze} 
`),Qe+=`${Se} ${ye}  ${St}
`,Le.forEach(At=>{const Ht=At.assignedUsers.length>0?At.assignedUsers.map(we=>we.name).join(", "):"-";Qe+=`${At.emoji}: ${Ht}
`}),navigator.clipboard.writeText(Qe).then(()=>{const At=`${le}-${ye}`;U(At),setTimeout(()=>U(null),2e3)})},Ee=()=>{if(!C.current)return;const le=C.current,ye=le.offsetWidth,Se=Math.round(le.scrollLeft/ye);if(Se!==j&&P[Se]){q(Se);const Le=P[Se];if(i!==Le){const ze=Es();Se===0&&ze===Le?t({},{replace:!0}):t({date:Le},{replace:!0})}}},G=(le,ye)=>{n(X3({date:le,eventName:ye}))},ce=()=>{n(xc(f))},me=()=>{n(aR())};if(m&&!p||D)return b.jsx(hu,{});if(P.length===0)return b.jsxs("div",{className:It.dashboardEmpty,children:[b.jsx("h2",{children:"No upcoming events found"}),b.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const Me=P[j],De=Es(),H=Me&&Me<De,ie=H?"Previous Event":"Upcoming Events",pe=le=>new Date(le).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),ge=(le,ye=!1)=>{const Se=x(le);if(!Se)return null;const Le=f[le]||c[le],ze=Le==null?void 0:Le.eventName;return b.jsx("div",{className:It.teamCardsContainer,children:Se.map(vt=>{const St=M===`${le}-${vt.teamName}`;return b.jsxs("div",{className:It.teamEventCard,children:[b.jsxs("div",{className:It.teamEventHeader,children:[b.jsxs("h3",{children:[b.jsx("span",{className:It.teamCardEmoji,children:vt.teamEmoji}),b.jsx("span",{className:It.teamCardName,children:vt.teamName})]}),!ye&&b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[b.jsx(Dm,{className:It.dashboardThemeToggle}),b.jsx("button",{className:`${It.copyRosterBtn} ${St?It.copyRosterBtnSuccess:""}`,onClick:()=>ae(le,vt.teamName,vt.teamEmoji,vt.positions,ze),title:"Copy to clipboard",children:St?b.jsxs(b.Fragment,{children:[b.jsx(Ij,{size:16})," Copied"]}):b.jsxs(b.Fragment,{children:[b.jsx(Nj,{size:16})," Copy"]})})]})]}),b.jsx("div",{className:It.teamEventDetails,children:vt.positions.map(Qe=>b.jsxs("div",{className:It.posAssignmentRow,children:[b.jsx("span",{className:It.posEmojiLabel,title:Qe.posName,children:Qe.emoji}),b.jsx("span",{className:`${It.assignedNames} ${Qe.assignedUsers.length===0?It.unassigned:""}`,children:Qe.assignedUsers.length>0?Qe.assignedUsers.map((At,Ht)=>b.jsxs(O.Fragment,{children:[At.name,At.isMe&&b.jsx("span",{className:It.meTag,children:"Me"}),Ht<Qe.assignedUsers.length-1?", ":""]},`${At.name}-${Ht}`)):"Unassigned"})]},Qe.posName))})]},vt.teamName)})})};return b.jsxs("div",{className:It.dashboardContainer,children:[b.jsxs("div",{className:It.dashboardHeader,children:[b.jsx("h1",{children:ie}),b.jsx("div",{className:It.dashboardHeaderActions,children:H&&b.jsx("button",{className:It.clearPastBtn,onClick:L,children:"Reset to upcoming"})})]}),b.jsx("div",{className:It.carouselOuterWrapper,style:{opacity:K?1:0,transition:"opacity 0.3s ease-in-out"},children:b.jsx("div",{className:It.eventsCarouselTrack,ref:C,onScroll:Ee,children:P.map((le,ye)=>{const Se=le,Le=f[Se]||c[Se],ze=(Le==null?void 0:Le.eventName)||"";return b.jsxs("div",{className:`${It.eventCardWrapper} ${ye===j?It.active:It.peek}`,children:[b.jsx("div",{className:It.eventNameContainer,children:b.jsx("input",{type:"text",className:`${It.dashboardEventNameInput} ${ze?It.dashboardEventNameInputHasEvent:""}`,placeholder:"Event name (e.g. Easter Sunday)",value:ze,onChange:vt=>G(le,vt.target.value),disabled:ye!==j})}),b.jsxs("div",{className:It.eventCardDate,children:[pe(le),le===De&&b.jsx("span",{className:It.dashboardTodayBadge,children:"TODAY"})]}),ge(le,ye!==j)]},le)})})}),b.jsxs("div",{className:It.carouselPagination,children:[j+1," / ",P.length]}),k&&b.jsx(fu,{label:"Unsaved event labels",saveText:"Save Changes",onSave:ce,onCancel:me,isSaving:y,hasSideNav:!1})]})},k6="_button_4hh4s_1",V6="_primary_4hh4s_26",L6="_secondary_4hh4s_31",j6="_icon_4hh4s_42",U6="_small_4hh4s_48",Kf={button:k6,primary:V6,secondary:L6,delete:"_delete_4hh4s_36",icon:j6,small:U6},sr=({variant:n="primary",size:e="medium",isIcon:t=!1,className:i="",children:a,...l})=>{const c=[Kf.button,Kf[n],e==="small"?Kf.small:"",t?Kf.icon:"",i].filter(Boolean).join(" ");return b.jsx("button",{className:c,...l,children:a})},z6="_pillGroup_ti99d_1",B6="_pillGroupNowrap_ti99d_9",H6="_pill_ti99d_1",F6="_pillActive_ti99d_35",q6="_pillDisabled_ti99d_40",G6="_pillText_ti99d_61",kl={pillGroup:z6,pillGroupNowrap:B6,pill:H6,pillActive:F6,pillDisabled:q6,pillText:G6},Fl=({children:n,nowrap:e})=>b.jsx("div",{className:`${kl.pillGroup} ${e?kl.pillGroupNowrap:""}`,children:n}),Ar=({colour:n,isDropdown:e,isActive:t,isDisabled:i,minWidth:a,onClick:l,children:c})=>{const[f,m]=O.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),b.jsxs("div",{className:`${kl.pill} ${kl.pillText} ${t?kl.pillActive:""} ${i?kl.pillDisabled:""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:a?`${a}px`:"fit-content"},onClick:p=>{i||(m(y=>!y),l&&l(p))},children:[c,e&&b.jsx(YC,{style:{rotate:f?"90deg":"0"}})]})},$6="_settingsSection_5m9oe_1",K6="_sectionLabel_5m9oe_7",Y6="_subSectionGroup_5m9oe_17",Q6="_subSectionHeader_5m9oe_21",X6="_formGroup_5m9oe_31",W6="_summaryButton_5m9oe_35",J6="_summaryPrimary_5m9oe_57",Z6="_summarySeparator_5m9oe_66",e9="_summarySecondary_5m9oe_73",t9="_summaryEmoji_5m9oe_78",n9="_remainingCount_5m9oe_82",Sn={settingsSection:$6,sectionLabel:K6,subSectionGroup:Y6,subSectionHeader:Q6,formGroup:X6,summaryButton:W6,summaryPrimary:J6,summarySeparator:Z6,summarySecondary:e9,summaryEmoji:t9,remainingCount:n9},hR=({selectedTeams:n,teamPositions:e,onToggleTeam:t,onTogglePosition:i,onMoveTeam:a,availableTeams:l,globalPositions:c})=>b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:Sn.formGroup,children:[b.jsx("label",{className:Sn.sectionLabel,children:"Teams"}),b.jsx(Fl,{children:l.map(f=>{const m=n.includes(f.name);return b.jsxs(Ar,{onClick:()=>t(f.name),isActive:m,children:[b.jsx("span",{children:f.emoji})," ",f.name]},f.name)})})]}),n.length>0&&b.jsxs("div",{className:Sn.settingsSection,children:[b.jsx("label",{className:Sn.sectionLabel,children:"Positions per Team"}),n.map((f,m)=>{var v;const p=l.find(E=>E.name===f);if(!p)return null;const y=((v=p.positions)==null?void 0:v.filter(E=>!E.parentId))||[];return b.jsxs("div",{className:Sn.subSectionGroup,children:[b.jsxs("div",{className:Sn.subSectionHeader,style:{justifyContent:"space-between"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.emoji," ",p.name]}),a&&b.jsxs("div",{style:{display:"flex",gap:"4px"},children:[b.jsx(sr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(f,"up"),disabled:m===0,children:""}),b.jsx(sr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(f,"down"),disabled:m===n.length-1,children:""})]})]}),y.length>0?b.jsx(Fl,{children:y.map(E=>{var M;const w=c.find(U=>U.name===E.name),D=!!(w!=null&&w.isCustom),V=(M=e[f])==null?void 0:M.includes(E.name);return b.jsxs(Ar,{onClick:()=>i(f,E.name),isActive:V,isDisabled:D,colour:E.colour,children:[b.jsx("span",{children:E.emoji})," ",E.name]},E.name)})}):b.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-dim)",margin:"8px 0"},children:"No assignable positions for this team."})]},f)})]})]}),r9="_formGroup_163vy_1",i9="_formInput_163vy_16",s9="_formSelect_163vy_52",a9="_colorInput_163vy_86",o9="_fieldHint_163vy_104",ys={formGroup:r9,formInput:i9,formSelect:s9,colorInput:a9,fieldHint:o9},l9="_profileCard_1qei9_1",u9="_profileReadonly_1qei9_11",c9="_actionContainer_1qei9_59",fy={profileCard:l9,profileReadonly:u9,actionContainer:c9},fR=({className:n})=>{const e=Mn(),{userData:t,firebaseUser:i}=He(M=>M.auth),{teams:a}=He(M=>M.teams),{positions:l}=He(M=>M.positions),[c,f]=O.useState({name:"",gender:"",isActive:!0,teams:[],teamPositions:{}}),[m,p]=O.useState("idle");O.useEffect(()=>{!t||m==="saving"||f(M=>!(M.name!==(t.name||"")||M.gender!==(t.gender||"")||M.isActive!==(t.isActive??!0)||JSON.stringify(M.teams)!==JSON.stringify(t.teams||[])||JSON.stringify(M.teamPositions)!==JSON.stringify(t.teamPositions||{}))||m==="idle"?{name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}}:M)},[t,m]);const y=O.useMemo(()=>{if(!t)return!1;const M={name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}};return JSON.stringify(c)!==JSON.stringify(M)},[c,t]),v=async()=>{if(i){p("saving");try{await e(hd({uid:i.uid,data:c})).unwrap(),p("success"),setTimeout(()=>p("idle"),2e3)}catch(M){console.error(M),p("idle")}}},E=()=>{t&&f({name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}})},w=M=>{f(U=>{const j=U.teams.includes(M),q=j?U.teams.filter(W=>W!==M):[...U.teams,M],Q={...U.teamPositions};return j?delete Q[M]:Q[M]||(Q[M]=[]),{...U,teams:q,teamPositions:Q}})},D=(M,U)=>{f(j=>{const q=j.teamPositions[M]||[],Q=q.includes(U)?q.filter(W=>W!==U):[...q,U];return{...j,teamPositions:{...j.teamPositions,[M]:Q}}})},V=(M,U)=>{f(j=>{const q=j.teams.indexOf(M);if(q===-1)return j;const Q=U==="up"?q-1:q+1;if(Q<0||Q>=j.teams.length)return j;const W=[...j.teams];return[W[q],W[Q]]=[W[Q],W[q]],{...j,teams:W}})};return t?b.jsxs("section",{className:`${fy.profileCard} ${n||""}`,children:[b.jsx("div",{className:fy.profileReadonly,children:b.jsxs("p",{children:[b.jsx("strong",{children:"Email:"})," ",t.email]})}),b.jsxs("div",{className:ys.formGroup,children:[b.jsx("label",{children:"Name"}),b.jsx("input",{type:"text",value:c.name,onChange:M=>f(U=>({...U,name:M.target.value})),className:ys.formInput})]}),b.jsxs("div",{className:ys.formGroup,children:[b.jsx("label",{children:"Gender"}),b.jsx(Fl,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(M=>b.jsx(Ar,{colour:M.colour,onClick:()=>f(U=>({...U,gender:M.value})),isActive:c.gender===M.value,children:M.value},M.value))})]}),b.jsx(hR,{selectedTeams:c.teams,teamPositions:c.teamPositions,onToggleTeam:w,onTogglePosition:D,onMoveTeam:V,availableTeams:a,globalPositions:l}),b.jsxs("div",{className:ys.formGroup,children:[b.jsx("label",{children:"Availability Status"}),b.jsx(Ar,{colour:c.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>f(M=>({...M,isActive:!M.isActive})),isActive:!0,children:c.isActive?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),b.jsx("p",{className:ys.fieldHint,children:"Turn off if you want to be hidden from the roster."})]}),b.jsx("div",{className:fy.actionContainer,children:b.jsx(sr,{variant:"delete",onClick:()=>xo.signOut(),children:"Logout"})}),y&&b.jsx(fu,{label:"Unsaved profile changes",saveText:"Update Profile",onSave:v,onCancel:E,isSaving:m==="saving"})]}):b.jsx("div",{children:"Loading profile..."})},h9="_guestContainer_1m4dd_1",f9="_profileCardOverride_1m4dd_14",d9="_guestHeader_1m4dd_21",m9="_brandTitle_1m4dd_28",p9="_guestThemeToggleContainer_1m4dd_32",g9="_pendingLabel_1m4dd_38",wl={guestContainer:h9,profileCardOverride:f9,guestHeader:d9,brandTitle:m9,guestThemeToggleContainer:p9,pendingLabel:g9},y9=()=>{const{userData:n,firebaseUser:e,loading:t}=He(i=>i.auth);return t?b.jsx(eu,{}):e?n?n.isApproved?b.jsx(Ea,{to:"/app",replace:!0}):b.jsxs("div",{className:wl.guestContainer,children:[b.jsxs("header",{className:wl.guestHeader,children:[b.jsx("h2",{className:wl.brandTitle,children:"God is Good"}),b.jsx("p",{className:wl.pendingLabel,children:"PENDING ADMIN APPROVAL"}),b.jsx("div",{className:wl.guestThemeToggleContainer,children:b.jsx(Dm,{})})]}),b.jsx(fR,{className:wl.profileCardOverride})]}):b.jsx(eu,{}):b.jsx(Ea,{to:"/login",replace:!0})},_9="_loginContainer_12x6v_1",v9="_loginHeader_12x6v_12",E9="_brandTitle_12x6v_16",T9="_brandSubtitle_12x6v_24",b9="_loginButtonContainer_12x6v_33",S9="_loginButton_12x6v_33",A9="_google_12x6v_57",ho={loginContainer:_9,loginHeader:v9,brandTitle:E9,brandSubtitle:T9,loginButtonContainer:b9,loginButton:S9,google:A9},w9=()=>{const{firebaseUser:n,loading:e}=He(i=>i.auth),t=()=>hV(xo,aL);return e?null:n?b.jsx(Ea,{to:"/",replace:!0}):b.jsxs("div",{className:ho.loginContainer,children:[b.jsxs("header",{className:ho.loginHeader,children:[b.jsx("h1",{className:ho.brandTitle,children:"God is Good"}),b.jsx("p",{className:ho.brandSubtitle,children:"Worship Team Roster"})]}),b.jsx("div",{className:ho.loginButtonContainer,children:b.jsxs("button",{onClick:t,className:`${ho.loginButton} ${ho.google}`,children:[b.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},Mm=()=>{const n=Mn(),e=Oo(),{teamName:t,positionName:i}=Mo(),{userData:a}=He(we=>we.auth),{users:l,allTeamUsers:c,rosterDates:f,currentTeamData:m,loadingUsers:p,loadingTeam:y,loadingAllTeamUsers:v,error:E}=He(we=>we.rosterView),{entries:w,dirtyEntries:D,saving:V,loading:M,initialLoad:U,error:j}=He(we=>we.roster),{positions:q,isDirty:Q}=He(we=>we.positions),{teams:W}=He(we=>we.teams),{hiddenUsers:K,rosterAllViewMode:S,peekPositionName:C}=He(we=>we.ui),[I,k]=O.useState(null),P=Object.keys(D).length>0,L=P||Q;O.useEffect(()=>{t&&(n(gd(t)),n(md(t)))},[t,n]),O.useEffect(()=>{i&&t&&!["Absence","All"].includes(i)&&n(pd({teamName:t,positionName:i}))},[i,t,n]);const x=O.useCallback(we=>{!t||!i||n(Zj({teamName:t,positionName:i,userEmail:we}))},[n,t,i]),ae=O.useCallback(()=>n(uR()),[n]),Ee=O.useCallback(()=>n(cR()),[n]),G=O.useCallback(()=>n(n6()),[n]),ce=O.useCallback(we=>{const Pe=we.split("T")[0],$e=D[Pe]||w[Pe];return $e?Object.values($e.teams).some(Be=>Object.values(Be).some(ke=>ke.length>0)):!1},[w,D]),me=O.useCallback(we=>{ce(we)&&e(`/app/dashboard?date=${we}`)},[ce,e]),Me=O.useCallback(()=>{P&&n(xc(D)),Q&&n(ov(q))},[n,D,q,P,Q]),De=O.useCallback(()=>{P&&n(aR()),Q&&(n(cj()),n(Hl())),k(null)},[n,P,Q]),H=O.useCallback((we,Pe)=>{const $e=D[we]||w[we];return!!($e&&$e.absence&&$e.absence[Pe])},[D,w]),ie=O.useCallback((we,Pe)=>{var Be,ke;const $e=D[we]||w[we];return((ke=(Be=$e==null?void 0:$e.absence)==null?void 0:Be[Pe])==null?void 0:ke.reason)||""},[D,w]),pe=O.useCallback(we=>{if(!C||!t)return[];const Pe=we.split("T")[0],$e=D[Pe]||w[Pe];return!$e||!$e.teams[t]?[]:Object.entries($e.teams[t]).filter(([,Be])=>Be.includes(C)).map(([Be])=>{const ke=c.find(Ze=>Ze.email===Be);return(ke==null?void 0:ke.name)||Be})},[t,D,w,c,C]),ge=O.useMemo(()=>{var we;return!t||!i?[]:((we=K[t])==null?void 0:we[i])||[]},[K,t,i]),le=O.useCallback((we,Pe)=>{if(!t||!i||i==="Absence"||i==="All")return!1;if(H(we,Pe))return!0;const $e=D[we]||w[we],Be=W.find(Ot=>Ot.name===t),ke=(Be==null?void 0:Be.maxConflict)||1;if(!$e||!$e.teams[t]||!$e.teams[t][Pe])return!1;const Ze=$e.teams[t][Pe],gt=q.filter(Ot=>Ot.parentId===i),ln=[i,...gt.map(Ot=>Ot.name)];return Ze.some(Ot=>ln.includes(Ot))?!1:Ze.length>=ke},[t,i,H,D,w,W,q]),ye=O.useCallback((we,Pe,$e,Be)=>{if(i==="Absence"||i==="All")return;if(le(we,Pe)){k({row:$e,col:Be,table:"roster"});return}k({row:$e,col:Be,table:"roster"});const ke=W.find(Ot=>Ot.name===t),Ze=(ke==null?void 0:ke.maxConflict)||1,gt=q.filter(Ot=>Ot.parentId===i),ln=[i,...gt.map(Ot=>Ot.name)];n(cv({date:we,teamName:t,userIdentifier:Pe,positionGroupNames:ln,maxConflict:Ze}))},[le,W,t,i,q,n]),Se=O.useCallback((we,Pe,$e,Be)=>{k({row:$e,col:Be,table:"absence"});const ke=H(we,Pe);if(!ke){const Ze=we,gt=D[Ze]||w[Ze],ln=[];if(gt&&Object.entries(gt.teams).forEach(([Ot,Et])=>{Et[Pe]&&Et[Pe].length>0&&ln.push(`${Ot}: ${Et[Pe].join(", ")}`)}),ln.length>0){n(Ca({title:"Clear Existing Assignments?",message:`User is already assigned to:

${ln.join(`
`)}

Marking them as absent will remove these assignments. Continue?`,confirmText:"Mark Absent",onConfirm:()=>{n(Nc({date:we,userIdentifier:Pe,isAbsent:!0}))}}));return}}n(Nc({date:we,userIdentifier:Pe,isAbsent:!ke}))},[n,H,D,w]),Le=O.useCallback(we=>{const Pe=Es(),$e=we.split("T")[0];return $e<Pe?"past-date":$e===Pe?"today-date":"future-date"},[]),ze=O.useMemo(()=>Es(),[]),vt=O.useMemo(()=>{const we=Es();return f.length>0&&f[0]<we},[f]),St=O.useMemo(()=>{const we=Es();return f.find(Pe=>Pe.split("T")[0]>=we)},[f]),Qe=O.useCallback(()=>{var $e;if(i==="Absence")return c.length;if(i==="All")return S==="user"?c.length:(m==null?void 0:m.positions.length)||0;const we=q.find(Be=>Be.name===i);return we!=null&&we.isCustom?(($e=we.customLabels)==null?void 0:$e.length)||0:l.filter(Be=>Be.email&&!ge.includes(Be.email)&&Be.isActive).length},[i,c.length,S,m==null?void 0:m.positions.length,q,l,ge]);return O.useEffect(()=>{const we=Pe=>{var Ot;const $e=Pe.target;if($e.tagName==="INPUT"||$e.tagName==="TEXTAREA"||!I)return;const{row:Be,col:ke,table:Ze}=I,gt=f.length,ln=Qe();switch(Pe.key){case"ArrowUp":Pe.preventDefault(),Be>0&&k({row:Be-1,col:ke,table:Ze});break;case"ArrowDown":Pe.preventDefault(),Be<gt-1&&k({row:Be+1,col:ke,table:Ze});break;case"ArrowLeft":Pe.preventDefault(),ke>0&&k({row:Be,col:ke-1,table:Ze});break;case"ArrowRight":Pe.preventDefault(),ke<ln-1&&k({row:Be,col:ke+1,table:Ze});break;case"Tab":Pe.preventDefault(),Pe.shiftKey?Be>0&&k({row:Be-1,col:ke,table:Ze}):Be<gt-1&&k({row:Be+1,col:ke,table:Ze});break;case" ":{if(Pe.preventDefault(),Ze==="all")break;const Et=f[Be];if(Ze==="roster"){const nn=q.find(lr=>lr.name===i);if(nn!=null&&nn.isCustom){const lr=(Ot=nn.customLabels)==null?void 0:Ot[ke];lr&&ye(Et,lr,Be,ke)}else{const ur=l.filter(un=>un.email&&!ge.includes(un.email)&&un.isActive)[ke];ur!=null&&ur.email&&ye(Et,ur.email,Be,ke)}}else{const nn=c[ke];nn!=null&&nn.email&&Se(Et,nn.email,Be,ke)}break}case"Enter":L&&(Pe.preventDefault(),Me());break;case"Escape":L&&(Pe.preventDefault(),De());break}};return window.addEventListener("keydown",we),()=>window.removeEventListener("keydown",we)},[I,f,l,c,L,ye,Se,Me,De,Qe,q,i,ge]),{dispatch:n,navigate:e,teamName:t,activePosition:i,userData:a,users:l,allTeamUsers:c,rosterDates:f,currentTeamData:m,entries:w,dirtyEntries:D,isSaving:V,allPositions:q,allTeams:W,hiddenUsers:K,hiddenUserList:ge,rosterAllViewMode:S,focusedCell:I,setFocusedCell:k,hasDirtyChanges:L,handleToggleVisibility:x,handleLoadPrevious:ae,handleResetDates:Ee,handleLoadNextYear:G,handleDateClick:me,handleSave:Me,handleCancel:De,isUserAbsent:H,getAbsenceReason:ie,getPeekAssignedUsers:pe,isLoading:p||y||v||M&&!U,error:E||j,checkHasAssignments:ce,getRowClass:Le,todayKey:ze,handleCellClick:ye,handleAbsenceClick:Se,isCellDisabled:le,hasPastDates:vt,closestNextDate:St}},C9="_topControls_edhcc_1",R9="_topControlsLeft_edhcc_14",I9="_viewToggleBar_edhcc_27",x9="_hiddenMembersBar_edhcc_38",N9="_hiddenMembersLabel_edhcc_50",D9="_hiddenMembersList_edhcc_58",O9="_toggleButtonGap_edhcc_64",M9="_unhideButton_edhcc_68",ds={topControls:C9,topControlsLeft:R9,viewToggleBar:I9,hiddenMembersBar:x9,hiddenMembersLabel:N9,hiddenMembersList:D9,toggleButtonGap:O9,unhideButton:M9},P9=({isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,allUsers:a,onToggleVisibility:l})=>{const c=Mn(),f=!e&&i.length>0;return!f&&!n?null:b.jsx("div",{className:ds.topControls,children:b.jsxs("div",{className:ds.topControlsLeft,children:[n&&b.jsxs("div",{className:ds.viewToggleBar,children:[b.jsxs(sr,{variant:t==="user"?"primary":"secondary",size:"small",onClick:()=>c(fA("user")),className:ds.toggleButtonGap,children:[b.jsx(Gj,{size:18})," ",b.jsx("span",{children:"User View"})]}),b.jsxs(sr,{variant:t==="position"?"primary":"secondary",size:"small",onClick:()=>c(fA("position")),className:ds.toggleButtonGap,children:[b.jsx(Mj,{size:18})," ",b.jsx("span",{children:"Position View"})]})]}),f&&b.jsxs("div",{className:ds.hiddenMembersBar,children:[b.jsx("span",{className:ds.hiddenMembersLabel,children:"Hidden Members:"}),b.jsx("div",{className:ds.hiddenMembersList,children:i.map(m=>{const p=a.find(y=>y.email===m);return b.jsxs(sr,{variant:"secondary",size:"small",onClick:()=>l(m),className:ds.unhideButton,children:[(p==null?void 0:p.name)||m," ",b.jsx(dh,{size:14})]},m)})})]})]})})},k9="_rosterTableWrapper_13wn3_1",V9="_rosterTableContainer_13wn3_9",L9="_rosterTable_13wn3_1",j9="_rosterTableError_13wn3_52",U9="_loadMoreFooter_13wn3_59",z9="_loadNextYearBtn_13wn3_68",fo={rosterTableWrapper:k9,rosterTableContainer:V9,rosterTable:L9,rosterTableError:j9,loadMoreFooter:U9,loadNextYearBtn:z9},Pm=({isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,users:a,handleToggleVisibility:l,isLoading:c,error:f,hasDirtyChanges:m,isSaving:p,handleSave:y,handleCancel:v,renderHeader:E,children:w,onLoadNextYear:D})=>c?b.jsx(hu,{}):f?b.jsxs("div",{className:fo.rosterTableError,children:["Error: ",f]}):b.jsxs("div",{className:fo.rosterTableWrapper,children:[b.jsx(P9,{isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,allUsers:a,onToggleVisibility:l}),b.jsxs("div",{className:fo.rosterTableContainer,children:[b.jsxs("table",{className:`${fo.rosterTable} ${e?fo.absenceTable:""}`,children:[E(),b.jsx("tbody",{children:w})]}),b.jsx("div",{className:fo.loadMoreFooter,children:b.jsx("button",{className:fo.loadNextYearBtn,onClick:D,children:"Load Next Year "})})]}),m&&b.jsx(fu,{onSave:y,onCancel:v,isSaving:p,saveText:"Save Roster"})]}),B9="_rosterTableHeaderCell_gmic9_1",H9="_stickyCol_gmic9_10",F9="_dateHeaderContent_gmic9_26",q9="_dateHeaderActions_gmic9_33",G9="_loadPrevBtn_gmic9_38",$9="_resetDatesBtn_gmic9_60",K9="_highlightedHeader_gmic9_70",Y9="_genderDividerCell_gmic9_75",Rn={rosterTableHeaderCell:B9,stickyCol:H9,dateHeaderContent:F9,dateHeaderActions:q9,loadPrevBtn:G9,resetDatesBtn:$9,highlightedHeader:K9,genderDividerCell:Y9},Q9="_peekHeader_12re3_1",X9="_peekSelector_12re3_9",W9="_peekCell_12re3_26",J9="_stickyRight_12re3_36",Eo={peekHeader:Q9,peekSelector:X9,peekCell:W9,stickyRight:J9},Z9=O.memo(()=>{const n=Mn(),{positionName:e}=Mo(),{peekPositionName:t}=He(l=>l.ui),{currentTeamData:i}=He(l=>l.rosterView),a=O.useMemo(()=>i?i.positions.filter(l=>l.name!==e):[],[i,e]);return b.jsx("th",{className:`${Eo.peekHeader} ${Eo.stickyRight}`,children:b.jsxs("select",{className:Eo.peekSelector,value:t||"",onChange:l=>n(e3(l.target.value||null)),children:[b.jsx("option",{value:"",children:"Peek Position..."}),a.map(l=>b.jsxs("option",{value:l.name,children:[l.emoji," ",l.name]},l.name))]})})}),km=O.memo(({showPeek:n,children:e})=>{const t=Mn(),{rosterDates:i}=He(f=>f.rosterView),a=O.useMemo(()=>{const f=Es();return i.length>0&&i[0]<f},[i]),l=()=>t(uR()),c=()=>t(cR());return b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:`${Rn.rosterTableHeaderCell} ${Rn.stickyCol}`,children:b.jsxs("div",{className:Rn.dateHeaderContent,children:["Date",b.jsxs("div",{className:Rn.dateHeaderActions,children:[b.jsx("button",{className:Rn.loadPrevBtn,onClick:l,title:"Load previous dates",children:""}),a&&b.jsx("button",{className:`${Rn.loadPrevBtn} ${Rn.resetDatesBtn}`,onClick:c,title:"Reset dates",children:""})]})]})}),e,n&&b.jsx(Z9,{})]})})}),e5=O.memo(({allTeamUsers:n,showPeek:e})=>b.jsxs(km,{showPeek:e,children:[n.map(t=>b.jsx("th",{className:Rn.rosterTableHeaderCell,children:t.name},t.email)),b.jsx("th",{className:`${Rn.genderDividerCell}`})]})),t5="_absentCell_x5xrn_1",n5="_absenceInputContainer_x5xrn_5",r5="_absenceReasonInput_x5xrn_24",i5="_removeAbsenceBtn_x5xrn_36",s5="_absenceRosterCell_x5xrn_57",fc={absentCell:t5,absenceInputContainer:n5,absenceReasonInput:r5,removeAbsenceBtn:i5,absenceRosterCell:s5},a5="_rosterCell_1ogb2_1",o5="_clickable_1ogb2_6",l5="_disabled_1ogb2_15",u5="_focused_1ogb2_21",c5="_highlightedCell_1ogb2_28",h5="_absentStrike_1ogb2_32",f5="_reasonPopover_1ogb2_38",d5="_popoverBottom_1ogb2_56",m5="_noReason_1ogb2_81",Yn={rosterCell:a5,clickable:o5,disabled:l5,focused:u5,highlightedCell:c5,absentStrike:h5,reasonPopover:f5,popoverBottom:d5,noReason:m5},$c=O.memo(({type:n,rowIndex:e,isFocused:t,onFocus:i,absent:a,absenceReason:l,isAssignedOnClosestDate:c,content:f,onClick:m,handleAbsenceReasonChange:p,disabled:y})=>{const v=O.useRef(null);O.useEffect(()=>{t&&v.current&&(v.current.focus(),v.current.scrollIntoView({block:"nearest",inline:"nearest"}))},[t]);const E=[Yn.rosterCell,t?Yn.focused:"",c?Yn.highlightedCell:""];return n==="all-user"?b.jsxs("td",{ref:v,className:[...E,Yn.clickable,a?Yn.absentStrike:""].filter(Boolean).join(" "),tabIndex:0,onClick:m,onFocus:i,children:[a&&t&&b.jsx("div",{className:`${Yn.reasonPopover} ${e===0?Yn.popoverBottom:""}`,children:l||b.jsx("span",{className:Yn.noReason,children:"No reason provided"})}),a?b.jsx("span",{title:l,children:""}):f]}):n==="all-position"?b.jsx("td",{ref:v,className:E.filter(Boolean).join(" "),tabIndex:0,onFocus:i,children:f}):n==="roster-custom"?b.jsx("td",{ref:v,className:[...E,Yn.clickable].filter(Boolean).join(" "),onClick:m,tabIndex:0,onFocus:i,children:f}):n==="roster-user"?b.jsxs("td",{ref:v,className:[...E,y?Yn.disabled:Yn.clickable,a?Yn.absentStrike:""].filter(Boolean).join(" "),onClick:m,tabIndex:0,onFocus:i,children:[a&&t&&b.jsx("div",{className:`${Yn.reasonPopover} ${e===0?Yn.popoverBottom:""}`,children:l||b.jsx("span",{className:Yn.noReason,children:"No reason provided"})}),a?b.jsx("span",{title:l,children:""}):f]}):n==="absence"?b.jsx("td",{ref:v,className:[...E,Yn.clickable,fc.absenceRosterCell,a?fc.absentCell:""].filter(Boolean).join(" "),onClick:m,tabIndex:0,onFocus:i,title:l,children:a?b.jsxs("div",{className:fc.absenceInputContainer,children:[b.jsx("input",{type:"text",className:fc.absenceReasonInput,value:l,placeholder:"Reason...",maxLength:20,autoFocus:t,onClick:w=>w.stopPropagation(),onChange:w=>p==null?void 0:p(w.target.value)}),b.jsx("button",{className:fc.removeAbsenceBtn,onClick:w=>{w.stopPropagation(),m==null||m()},title:"Mark as present",children:b.jsx(lv,{size:14})})]}):""}):null}),p5=O.memo(({dateString:n})=>{const{teamName:e}=Mo(),{peekPositionName:t}=He(f=>f.ui),{entries:i,dirtyEntries:a}=He(f=>f.roster),{allTeamUsers:l}=He(f=>f.rosterView),c=O.useMemo(()=>{if(!t||!e)return[];const f=n.split("T")[0],m=a[f]||i[f];return!m||!m.teams[e]?[]:Object.entries(m.teams[e]).filter(([,p])=>p.includes(t)).map(([p])=>{const y=l.find(v=>v.email===p);return(y==null?void 0:y.name)||p})},[t,e,n,a,i,l]);return c.length===0?b.jsx("td",{className:`${Eo.peekCell} ${Eo.stickyRight}`}):b.jsx("td",{className:`${Eo.peekCell} ${Eo.stickyRight}`,children:c.join(", ")})}),g5="_stickyCol_bin2j_1",y5="_dateCell_bin2j_11",_5="_clickable_bin2j_19",v5="_dateCellContent_bin2j_31",E5="_specialEventDot_bin2j_39",T5="_rosterTodayDot_bin2j_50",b5="_pastDate_bin2j_61",S5="_noData_bin2j_65",A5="_closestNextDateRow_bin2j_77",w5="_todayDate_bin2j_78",vr={stickyCol:g5,dateCell:y5,clickable:_5,dateCellContent:v5,specialEventDot:E5,rosterTodayDot:T5,pastDate:b5,noData:S5,closestNextDateRow:A5,todayDate:w5},Vm=O.memo(({dateString:n,entries:e,dirtyEntries:t,onDateClick:i,closestNextDate:a,showPeek:l,children:c})=>{const f=O.useMemo(()=>Es(),[]),m=n.split("T")[0],p=m===f,y=m<f,v=t[m]||e[m],E=v==null?void 0:v.eventName,w=O.useMemo(()=>v?Object.values(v.teams).some(V=>Object.values(V).some(M=>M.length>0)):!1,[v]),D=[y?vr.pastDate:"",p?vr.todayDate:vr.futureDate,w?"":vr.noData,E?vr.specialEventRow:"",n===a?vr.closestNextDateRow:""].filter(Boolean).join(" ");return b.jsxs("tr",{className:D,children:[b.jsx("td",{className:`${vr.dateCell} ${vr.stickyCol} ${w?vr.clickable:""}`,onClick:()=>i(n),title:E,children:b.jsxs("div",{className:vr.dateCellContent,children:[E&&b.jsx("span",{className:vr.specialEventDot}),p&&b.jsx("span",{className:vr.rosterTodayDot,title:"Today"}),new Date(n.replace(/-/g,"/")).toLocaleDateString()]})}),c,l&&b.jsx(p5,{dateString:n})]})}),C5=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,allTeamUsers:m,handleAbsenceClick:p,handleAbsenceReasonChange:y,isUserAbsent:v,getAbsenceReason:E,showPeek:w})=>b.jsx(Vm,{dateString:n,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,showPeek:w,children:m.map((D,V)=>b.jsx($c,{type:"absence",dateString:n,rowIndex:e,colIndex:V,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===V&&(t==null?void 0:t.table)==="absence",onFocus:()=>i({row:e,col:V,table:"absence"}),absent:D.email?v(n,D.email):!1,absenceReason:D.email?E(n,D.email):"",onClick:()=>{D.email&&p(n,D.email,e,V)},handleAbsenceReasonChange:M=>{D.email&&y(n,D.email,M)}},D.email))})),R5=()=>{const n=Mm(),{dispatch:e,allTeamUsers:t,rosterDates:i,dirtyEntries:a,entries:l,isSaving:c,hiddenUserList:f,closestNextDate:m}=n,p=O.useCallback((E,w,D,V)=>{n.setFocusedCell({row:D,col:V,table:"absence"});const M=n.isUserAbsent(E,w);if(!M){const U=E,j=a[U]||l[U],q=[];if(j&&Object.entries(j.teams).forEach(([Q,W])=>{W[w]&&W[w].length>0&&q.push(`${Q}: ${W[w].join(", ")}`)}),q.length>0){e(Ca({title:"Clear Existing Assignments?",message:`User is already assigned to:

${q.join(`
`)}

Marking them as absent will remove these assignments. Continue?`,confirmText:"Mark Absent",onConfirm:()=>{e(Nc({date:E,userIdentifier:w,isAbsent:!0}))}}));return}}e(Nc({date:E,userIdentifier:w,isAbsent:!M}))},[e,n,a,l]),y=O.useCallback((E,w,D)=>{e(Nc({date:E,userIdentifier:w,reason:D,isAbsent:!0}))},[e]),v=()=>b.jsx(e5,{allTeamUsers:t,showPeek:!0});return b.jsx(Pm,{...n,isAllView:!1,isAbsenceView:!0,isSaving:c,hiddenUserList:f,renderHeader:v,onLoadNextYear:n.handleLoadNextYear,children:i.map((E,w)=>b.jsx(C5,{dateString:E,rowIndex:w,entries:l,dirtyEntries:a,closestNextDate:m,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,allTeamUsers:t,handleAbsenceClick:p,handleAbsenceReasonChange:y,isUserAbsent:n.isUserAbsent,getAbsenceReason:n.getAbsenceReason,showPeek:!0},E))})},I5="_allViewPositionHeader_ryktq_1",x5="_allViewPositionName_ryktq_8",N5="_clickableHeader_ryktq_14",dy={allViewPositionHeader:I5,allViewPositionName:x5,clickableHeader:N5},D5=O.memo(({rosterAllViewMode:n,allViewColumns:e,userData:t,currentTeamData:i,teamName:a,navigate:l})=>b.jsx(km,{children:n==="user"?e.map(c=>{const f=c.id===(t==null?void 0:t.email);return b.jsx("th",{className:`${Rn.rosterTableHeaderCell} ${f?Rn.isMe:""}`,children:b.jsx(Om,{displayName:c.name,isMe:f})},c.id)}):((i==null?void 0:i.positions)||[]).map(c=>b.jsx("th",{className:`${Rn.rosterTableHeaderCell} ${dy.clickableHeader}`,onClick:()=>l(`/app/roster/${a}/${c.name}`),children:b.jsxs("div",{className:dy.allViewPositionHeader,children:[b.jsx("span",{children:c.emoji}),b.jsx("span",{className:dy.allViewPositionName,children:c.name})]})},c.name))})),O5=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,rosterAllViewMode:m,allViewColumns:p,currentTeamData:y,getAllViewUserCellContent:v,getAllViewPositionCellContent:E,getAssignmentsForIdentifier:w,navigate:D,teamName:V,isUserAbsent:M,getAbsenceReason:U})=>b.jsx(Vm,{dateString:n,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,children:m==="user"?p.map((j,q)=>b.jsx($c,{type:"all-user",dateString:n,rowIndex:e,colIndex:q,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===q&&(t==null?void 0:t.table)==="all",onFocus:()=>i({row:e,col:q,table:"all"}),absent:j.id?M(n,j.id):!1,absenceReason:j.id?U(n,j.id):"",content:j.id?v(n,j.id):null,onClick:()=>{const Q=w(n,j.id);Q.length>0&&D(`/app/roster/${V}/${Q[0]}`)}},j.id)):((y==null?void 0:y.positions)||[]).map((j,q)=>b.jsx($c,{type:"all-position",dateString:n,rowIndex:e,colIndex:q,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===q&&(t==null?void 0:t.table)==="all",onFocus:()=>i({row:e,col:q,table:"all"}),content:E(n,j.name)},j.name))})),M5=()=>{const n=Mm(),{teamName:e,allTeamUsers:t,currentTeamData:i,allPositions:a,rosterAllViewMode:l,userData:c,rosterDates:f,navigate:m,dirtyEntries:p,entries:y,isSaving:v,hiddenUserList:E,closestNextDate:w}=n,D=O.useMemo(()=>t.filter(Q=>{var K;return!Q.isActive||!e?!1:(((K=Q.teamPositions)==null?void 0:K[e])||[]).length>0}),[t,e]),V=O.useMemo(()=>{const Q=D.map(S=>({id:S.email||"",name:S.name||"",isUser:!0,gender:S.gender}));if(!i)return Q;const W=i.positions.map(S=>S.name),K=Array.from(new Set(a.filter(S=>W.includes(S.name)&&S.isCustom).flatMap(S=>S.customLabels||[]).map(S=>S.trim()).filter(S=>S!==""))).map(S=>({id:S,name:S,isUser:!1}));return[...Q,...K]},[D,i,a]),M=O.useCallback((Q,W)=>{const K=Q.split("T")[0],S=p[K]||y[K];if(!S||!e||!S.teams[e])return[];let C=S.teams[e][W]||[];if(C.length===0){const I=W.trim(),k=Object.keys(S.teams[e]).find(P=>P.trim()===I);k&&(C=S.teams[e][k])}return C},[p,y,e]),U=O.useCallback((Q,W)=>{const K=M(Q,W);return K.length===0?"":b.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"4px",flexWrap:"wrap"},children:K.map(S=>{const C=a.find(I=>I.name===S);return b.jsx("span",{onClick:I=>{I.stopPropagation(),m(`/app/roster/${e}/${S}`)},title:S,style:{cursor:"pointer"},children:(C==null?void 0:C.emoji)||""},S)})})},[M,a,m,e]),j=O.useCallback((Q,W)=>{const K=Q.split("T")[0],S=p[K]||y[K];if(!S||!e)return"";const C=Object.entries(S.teams[e]||{}).filter(([,I])=>I.includes(W));return b.jsx("div",{style:{fontSize:"0.75rem"},children:C.map(([I],k)=>{const P=D.find(ae=>ae.email===I),L=I===(c==null?void 0:c.email),x=P?P.name:I;return b.jsxs("span",{children:[b.jsx(Om,{displayName:x,isMe:L}),k<C.length-1?", ":""]},I)})})},[p,y,e,D,c]),q=()=>b.jsx(D5,{rosterAllViewMode:l,allViewColumns:V,userData:c,currentTeamData:i,teamName:e,navigate:m});return b.jsx(Pm,{...n,isAllView:!0,isAbsenceView:!1,isSaving:v,hiddenUserList:E,renderHeader:q,onLoadNextYear:n.handleLoadNextYear,children:f.map((Q,W)=>b.jsx(O5,{dateString:Q,rowIndex:W,entries:y,dirtyEntries:p,closestNextDate:w,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,rosterAllViewMode:l,allViewColumns:V,currentTeamData:i,getAllViewUserCellContent:U,getAllViewPositionCellContent:j,getAssignmentsForIdentifier:M,navigate:m,teamName:e,isUserAbsent:n.isUserAbsent,getAbsenceReason:n.getAbsenceReason},Q))})},P5="_headerInput_k44bb_1",k5="_headerActions_k44bb_27",V5="_headerActionBtn_k44bb_34",L5="_removeHeaderBtn_k44bb_58",j5="_addColumnBtn_k44bb_63",mo={headerInput:P5,headerActions:k5,headerActionBtn:V5,removeHeaderBtn:L5,addColumnBtn:j5},U5=O.memo(({currentPosition:n,userData:e,handleUpdateCustomLabel:t,handleMoveCustomLabel:i,handleRemoveCustomLabel:a,handleAddCustomLabel:l,showPeek:c})=>b.jsxs(km,{showPeek:c,children:[((n==null?void 0:n.customLabels)||[]).map((f,m)=>{var p;return b.jsxs("th",{className:`${Rn.rosterTableHeaderCell}`,children:[b.jsx("input",{type:"text",className:mo.headerInput,value:f,placeholder:"New Heading...",readOnly:!(e!=null&&e.isAdmin),onChange:y=>t(m,y.target.value)}),(e==null?void 0:e.isAdmin)&&b.jsxs("div",{className:mo.headerActions,children:[b.jsx("button",{className:mo.headerActionBtn,onClick:()=>i(m,"left"),disabled:m===0,title:"Move Left",children:b.jsx(Sj,{size:12})}),b.jsx("button",{className:`${mo.headerActionBtn} ${mo.removeHeaderBtn}`,onClick:()=>a(m),title:"Remove Column",children:b.jsx(lv,{size:12})}),b.jsx("button",{className:mo.headerActionBtn,onClick:()=>i(m,"right"),disabled:m===(((p=n==null?void 0:n.customLabels)==null?void 0:p.length)||0)-1,title:"Move Right",children:b.jsx(wj,{size:12})})]})]},`custom-${m}`)}),(e==null?void 0:e.isAdmin)&&b.jsx("th",{className:`${Rn.rosterTableHeaderCell}`,children:b.jsx("button",{className:mo.addColumnBtn,onClick:l,title:"Add Column",children:b.jsx(dh,{size:16})})}),b.jsx("th",{className:`${Rn.genderDividerCell}`})]})),z5=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,currentPosition:m,handleCellClick:p,getCellContent:y,showPeek:v})=>b.jsx(Vm,{dateString:n,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,showPeek:v,children:((m==null?void 0:m.customLabels)||[]).map((E,w)=>b.jsx($c,{type:"roster-custom",dateString:n,rowIndex:e,colIndex:w,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===w&&(t==null?void 0:t.table)==="roster",onFocus:()=>i({row:e,col:w,table:"roster"}),content:E&&y(n,E),onClick:()=>{E&&p(n,E,e,w)}},`custom-cell-${w}`))})),B5=()=>{const n=Mm(),{dispatch:e,teamName:t,activePosition:i,allPositions:a,userData:l,rosterDates:c,dirtyEntries:f,entries:m,isSaving:p,hiddenUserList:y,closestNextDate:v}=n,E=O.useMemo(()=>a.find(Q=>Q.name===i),[a,i]),w=O.useCallback((Q,W)=>{if(!E||!i)return;const K=[...E.customLabels||[]];K[Q]=W,e(Gf({positionName:i,labels:K}))},[e,E,i]),D=O.useCallback((Q,W)=>{if(!E||!i)return;const K=[...E.customLabels||[]],S=W==="left"?Q-1:Q+1;if(S<0||S>=K.length)return;const C=K[Q];K[Q]=K[S],K[S]=C,e(Gf({positionName:i,labels:K}))},[e,E,i]),V=O.useCallback(Q=>{if(!E||!i)return;const W=[...E.customLabels||[]];W.splice(Q,1),e(Gf({positionName:i,labels:W}))},[e,E,i]),M=O.useCallback(()=>{if(!E||!i)return;const Q=E.customLabels||[];e(Gf({positionName:i,labels:[...Q,""]}))},[e,E,i]),U=O.useCallback((Q,W,K,S)=>{n.setFocusedCell({row:K,col:S,table:"roster"}),e(cv({date:Q,teamName:t,userIdentifier:W,positionGroupNames:[i],maxConflict:99}))},[n,e,t,i]),j=O.useCallback((Q,W)=>{var C;const K=f[Q]||m[Q];return!K||!t?"":(((C=K.teams[t])==null?void 0:C[W])||[]).length>0?(E==null?void 0:E.emoji)||"":""},[f,m,t,E]),q=()=>b.jsx(U5,{currentPosition:E,userData:l,handleUpdateCustomLabel:w,handleMoveCustomLabel:D,handleRemoveCustomLabel:V,handleAddCustomLabel:M,showPeek:!0});return b.jsx(Pm,{...n,isAllView:!1,isAbsenceView:!1,isSaving:p,hiddenUserList:y,renderHeader:q,onLoadNextYear:n.handleLoadNextYear,children:c.map((Q,W)=>b.jsx(z5,{dateString:Q,rowIndex:W,entries:m,dirtyEntries:f,closestNextDate:v,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,currentPosition:E,handleCellClick:U,getCellContent:j,showPeek:!0},Q))})},H5="_genderLabel_ffjys_1",F5="_clickableHeader_ffjys_8",yA={genderLabel:H5,clickableHeader:F5},q5=O.memo(({sortedUsers:n,genderDividerIndex:e,assignedOnClosestDate:t,currentPosition:i,userData:a,onToggleVisibility:l,showPeek:c})=>b.jsxs(km,{showPeek:c,children:[n.map((f,m)=>{const p=!!(f.email&&f.email===(a==null?void 0:a.email));return b.jsxs(O.Fragment,{children:[e===m&&b.jsx("th",{className:`${Rn.genderDividerCell}`}),b.jsxs("th",{className:`${Rn.rosterTableHeaderCell} ${yA.clickableHeader} ${f.email&&t.includes(f.email)?Rn.highlightedHeader:""}`,onClick:()=>f.email&&l(f.email),title:"Click to hide member",children:[b.jsx(Om,{displayName:f.name,isMe:p}),(i==null?void 0:i.sortByGender)&&b.jsxs("span",{className:yA.genderLabel,children:["(",f.gender==="Male"?"M":f.gender==="Female"?"F":"?",")"]})]})]},f.email)}),b.jsx("th",{className:`${Rn.genderDividerCell}`})]})),G5=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,handleCellClick:m,getCellContent:p,sortedUsers:y,genderDividerIndex:v,isCellDisabled:E,isUserAbsent:w,getAbsenceReason:D,assignedOnClosestDate:V,showPeek:M})=>b.jsxs(Vm,{dateString:n,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,showPeek:M,children:[y.map((U,j)=>b.jsxs(O.Fragment,{children:[v===j&&b.jsx("td",{className:vr.genderDividerCell}),b.jsx($c,{type:"roster-user",dateString:n,rowIndex:e,colIndex:j,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===j&&(t==null?void 0:t.table)==="roster",onFocus:()=>i({row:e,col:j,table:"roster"}),disabled:U.email?E(n,U.email):!1,absent:U.email?w(n,U.email):!1,absenceReason:U.email?D(n,U.email):"",isAssignedOnClosestDate:!!(n===f&&U.email&&V.includes(U.email)),content:U.email?p(n,U.email):null,onClick:()=>{U.email&&!E(n,U.email)&&m(n,U.email,e,j)}})]},U.email)),b.jsx("td",{className:vr.genderDividerCell})]})),$5=()=>{const n=Mm(),{dispatch:e,teamName:t,activePosition:i,users:a,allPositions:l,allTeams:c,rosterDates:f,closestNextDate:m,dirtyEntries:p,entries:y,hiddenUserList:v,isSaving:E,userData:w}=n,D=O.useMemo(()=>l.find(K=>K.name===i),[l,i]),V=O.useMemo(()=>{const K=a.filter(S=>S.email&&!v.includes(S.email)&&S.isActive);return D!=null&&D.sortByGender?K.sort((S,C)=>S.gender===C.gender?(S.name||"").localeCompare(C.name||""):S.gender==="Male"?-1:C.gender==="Male"?1:(S.gender||"").localeCompare(C.gender||"")):K},[a,D,v]),M=O.useMemo(()=>{if(!(D!=null&&D.sortByGender)||V.length===0)return-1;const K=V.findIndex(S=>S.gender==="Female");return K>0&&K<V.length?K:-1},[D,V]),U=O.useMemo(()=>{if(!m||!t||!i)return[];const K=m.split("T")[0],S=p[K]||y[K];if(!S||!S.teams[t])return[];const C=l.filter(k=>k.parentId===i),I=[i,...C.map(k=>k.name)];return Object.entries(S.teams[t]).filter(([,k])=>k.some(P=>I.includes(P))).map(([k])=>k)},[m,t,i,p,y,l]),j=O.useCallback((K,S)=>{if(!t||!i)return!1;if(n.isUserAbsent(K,S))return!0;const C=p[K]||y[K],I=c.find(ae=>ae.name===t),k=(I==null?void 0:I.maxConflict)||1;if(!C||!C.teams[t]||!C.teams[t][S])return!1;const P=C.teams[t][S],L=l.filter(ae=>ae.parentId===i),x=[i,...L.map(ae=>ae.name)];return P.some(ae=>x.includes(ae))?!1:P.length>=k},[t,i,n,p,y,c,l]),q=O.useCallback((K,S,C,I)=>{if(j(K,S)){n.setFocusedCell({row:C,col:I,table:"roster"});return}n.setFocusedCell({row:C,col:I,table:"roster"});const k=c.find(ae=>ae.name===t),P=(k==null?void 0:k.maxConflict)||1,L=l.filter(ae=>ae.parentId===i),x=[i,...L.map(ae=>ae.name)];e(cv({date:K,teamName:t,userIdentifier:S,positionGroupNames:x,maxConflict:P}))},[j,n,c,t,i,l,e]),Q=O.useCallback((K,S)=>{var P;const C=p[K]||y[K];if(!C||!t)return"";const I=((P=C.teams[t])==null?void 0:P[S])||[],k=[];return Object.entries(C.teams).forEach(([L,x])=>{L!==t&&x[S]&&k.push({team:L,positions:x[S]})}),I.length===0&&k.length===0?"":b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"4px",flexWrap:"wrap"},children:[I.map(L=>{const x=l.find(ae=>ae.name===L);return b.jsx("span",{title:`${t}: ${L}`,children:(x==null?void 0:x.emoji)||""},L)}),k.map(L=>L.positions.map(x=>{const ae=l.find(Ee=>Ee.name===x);return b.jsx("span",{title:`${L.team}: ${x}`,style:{opacity:.6},children:(ae==null?void 0:ae.emoji)||""},`${L.team}-${x}`)}))]})},[p,y,t,l]),W=()=>b.jsx(q5,{sortedUsers:V,genderDividerIndex:M,assignedOnClosestDate:U,currentPosition:D,userData:w,onToggleVisibility:n.handleToggleVisibility,showPeek:!0});return b.jsx(Pm,{...n,isAllView:!1,isAbsenceView:!1,isSaving:E,hiddenUserList:v,renderHeader:W,onLoadNextYear:n.handleLoadNextYear,children:f.map((K,S)=>b.jsx(G5,{dateString:K,rowIndex:S,entries:y,dirtyEntries:p,closestNextDate:m,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,handleCellClick:q,getCellContent:Q,sortedUsers:V,genderDividerIndex:M,isCellDisabled:j,isUserAbsent:n.isUserAbsent,getAbsenceReason:n.getAbsenceReason,assignedOnClosestDate:U,showPeek:!0},K))})},K5="_rosterPage_w8wy1_1",Y5={rosterPage:K5},Q5=()=>{const{positionName:n}=Mo(),{positions:e}=He(a=>a.positions),t=e.find(a=>a.name===n),i=()=>n==="All"?b.jsx(M5,{}):n==="Absence"?b.jsx(R5,{}):t!=null&&t.isCustom?b.jsx(B5,{}):b.jsx($5,{});return b.jsx("div",{className:Y5.rosterPage,children:i()})},X5="_appTableContainer_1wf07_1",W5="_appTable_1wf07_1",J5="_colorPickerGroup_1wf07_50",Z5="_stickyCol_1wf07_60",Kc={appTableContainer:X5,appTable:W5,colorPickerGroup:J5,stickyCol:Z5},ez=({text:n,textAlign:e="left",width:t,minWidth:i})=>b.jsx("th",{className:Kc.stickyCol,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:i?`${i}px`:"auto"},children:n}),sn=({isSticky:n=!1,textAlign:e="left",className:t,children:i})=>b.jsx("td",{style:{textAlign:e,display:e==="center"?"table-cell":void 0},className:`${t||""} ${n?Kc.stickyCol:""}
`,children:b.jsx("div",{style:{display:"flex",justifyContent:e==="center"?"center":e==="right"?"flex-end":"flex-start",alignItems:"center",gap:"8px",height:"100%"},children:i})}),ri=({name:n,value:e,placeholder:t,type:i="text",isSticky:a,isReadOnly:l=!1,isChild:c=!1,onChange:f})=>b.jsxs(sn,{isSticky:a,children:[c&&b.jsx(QC,{}),b.jsx("input",{name:n,className:ys.formInput,type:i,placeholder:t,value:e,onChange:f,readOnly:l})]}),dR=({name:n,value:e,placeholder:t,onChange:i})=>b.jsxs(sn,{className:Kc.colorPickerGroup,children:[b.jsx("input",{name:n,type:"color",className:ys.colorInput,value:e||"#FFFFFF",onChange:i}),b.jsx("input",{name:n,className:ys.formInput,value:e,placeholder:t,onChange:i})]}),fv=({headers:n,children:e})=>b.jsx("div",{className:Kc.appTableContainer,children:b.jsxs("table",{className:Kc.appTable,children:[b.jsx("thead",{children:b.jsx("tr",{children:n.map((t,i)=>b.jsx(ez,{...t},i))})}),b.jsx("tbody",{children:e})]})}),tz=({position:n,index:e,onUpdate:t,onMove:i,onDelete:a,onAddChild:l,isFirst:c,isLast:f})=>b.jsxs("tr",{children:[b.jsx(ri,{name:`name-${e}`,value:n.name,onChange:m=>t(e,"name",m.target.value),isSticky:!0}),b.jsx(sn,{textAlign:"center",children:n.parentId?b.jsx(QC,{}):b.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[b.jsx(sr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>i(e,"up"),disabled:c,children:""}),b.jsx(sr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>i(e,"down"),disabled:f,children:""})]})}),b.jsx(ri,{name:`emoji-${e}`,value:n.emoji,onChange:m=>t(e,"emoji",m.target.value)}),b.jsx(dR,{name:`colour-${e}`,value:n.colour,onChange:m=>t(e,"colour",m.target.value)}),b.jsx(sn,{textAlign:"center",children:b.jsx(Ar,{colour:n.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.sortByGender,onClick:()=>t(e,"sortByGender",!n.sortByGender),isDisabled:n.isCustom,children:n.sortByGender?"YES":"NO"})}),b.jsx(sn,{textAlign:"center",children:b.jsx(Ar,{colour:n.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.isCustom,onClick:()=>t(e,"isCustom",!n.isCustom),children:n.isCustom?"YES":"NO"})}),b.jsx(sn,{textAlign:"center",children:!n.parentId&&b.jsxs(sr,{variant:"secondary",size:"small",onClick:()=>l(n.name),title:"Add Child Position",children:[b.jsx(dh,{size:14,style:{marginRight:"4px"}}),"Add"]})}),b.jsx(sn,{textAlign:"center",children:b.jsxs(sr,{variant:"delete",size:"small",onClick:()=>a(e),children:[b.jsx(XC,{size:14,style:{marginRight:"4px"}}),"Delete"]})})]}),nz="_settingsContainer_w7sc3_1",rz="_managementWrapper_w7sc3_13",ql={settingsContainer:nz,managementWrapper:rz},my={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},iz=()=>{const n=Mn(),{positions:e,loading:t}=He(U=>U.positions),[i,a]=O.useState(e),[l,c]=O.useState(my),[f,m]=O.useState("idle"),p=O.useMemo(()=>{const U=j=>j.map(q=>({name:q.name||"",emoji:q.emoji||"",colour:q.colour||"",parentId:q.parentId||void 0,sortByGender:!!q.sortByGender,isCustom:!!q.isCustom}));return JSON.stringify(U(i))!==JSON.stringify(U(e))},[i,e]);O.useEffect(()=>{a(e)},[e]);const y=(U,j,q)=>{const Q=[...i];Q[U]={...Q[U],[j]:q},a(Q)},v=(U,j)=>{const q=[...i],Q=q[U],W=Q.parentId,K=S=>{const C=q[S];if(!C)return{block:[],startIndex:-1,endIndex:-1};const I=[],k=[C],P=new Set;let L=S,x=S,ae=0;for(;ae<k.length;){const G=k[ae++];P.has(G.name)||(P.add(G.name),I.push(G),q.forEach((ce,me)=>{ce.parentId===G.name&&!P.has(ce.name)&&(k.push(ce),L=Math.min(L,me),x=Math.max(x,me))}))}return{block:I,startIndex:L,endIndex:x}};if(W){const S=q.filter(ae=>ae.parentId===W),I=S.findIndex(ae=>ae.name===Q.name)+(j==="up"?-1:1);if(I<0||I>=S.length)return;const k=S[I],P=q.indexOf(Q),L=q.indexOf(k);if(P===-1||L===-1)return;const x=[...q];x[P]=k,x[L]=Q,a(x)}else{const S=K(U),{block:C,startIndex:I,endIndex:k}=S;if(!C||C.length===0)return;if(j==="up"){if(I===0)return;let P=I-1;for(;P>=0&&q[P].parentId;)P--;if(P<0)return;const L=K(P),{block:x,startIndex:ae}=L;if(!x||x.length===0)return;const Ee=[...q.slice(0,ae),...C,...x,...q.slice(k+1)].filter(Boolean);a(Ee)}else{if(k===q.length-1)return;let P=k+1;for(;P<q.length&&q[P].parentId;)P++;if(P>=q.length)return;const L=K(P),{block:x,startIndex:ae}=L;if(!x||x.length===0)return;const Ee=[...q.slice(0,I),...x,...C,...q.slice(ae+x.length)].filter(Boolean);a(Ee)}}},E=()=>{if(!l.name.trim()||!l.emoji.trim()){n(Ca({title:"Missing Information",message:"Please provide both an emoji and a name.",showCancel:!1}));return}a([...i,l]),c(my)},w=U=>{n(Ca({title:"Delete Position",message:"Delete this position? This will remove it from the global list, and any associated child positions.",confirmText:"Delete",onConfirm:()=>{const j=i[U];let q=i.filter((Q,W)=>W!==U);j.parentId||(q=q.filter(Q=>Q.parentId!==j.name)),a(q)}}))},D=async()=>{m("saving");try{const U=i.map(j=>{const q={name:j.name||"",emoji:j.emoji||"",colour:j.colour||"",sortByGender:!!j.sortByGender,isCustom:!!j.isCustom,customLabels:j.customLabels||[]};return j.parentId&&(q.parentId=j.parentId),q});await n(ov(U)).unwrap(),m("success"),setTimeout(()=>m("idle"),2e3)}catch(U){console.error("Save Error:",U),n(Ca({title:"Save Error",message:"Error saving: "+(U instanceof Error?U.message:"Unknown error"),showCancel:!1})),m("idle")}},V=U=>{a(j=>{const q={...my,parentId:U},Q=j.findIndex(S=>S.name===U);if(Q===-1)return[...j,q];let W=Q;for(;W+1<j.length&&j[W+1].parentId===U;)W++;return[...j.slice(0,W+1),q,...j.slice(W+1)]})},M=()=>{a(e)};return t?b.jsx(hu,{}):b.jsxs("div",{className:ql.managementWrapper,children:[b.jsxs(fv,{headers:[{text:"Name",minWidth:80,width:200,textAlign:"center"},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Colour",minWidth:100,textAlign:"center"},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Custom Headings",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[i.map((U,j)=>b.jsx(tz,{position:U,index:j,onUpdate:y,onMove:v,onDelete:w,onAddChild:V,isFirst:j===0,isLast:j===i.length-1},`${U.emoji}-${j}`)),b.jsxs("tr",{className:"pos-row-new",children:[b.jsx(ri,{name:"new-name",value:l.name,placeholder:"Position Name",onChange:U=>c({...l,name:U.target.value}),isSticky:!0}),b.jsx(sn,{textAlign:"center",children:""}),b.jsx(ri,{name:"new-emoji",value:l.emoji,placeholder:"",onChange:U=>c({...l,emoji:U.target.value})}),b.jsx(dR,{name:"new-colour",value:l.colour,placeholder:"#FFFFFF",onChange:U=>c({...l,colour:U.target.value})}),b.jsx(sn,{textAlign:"center",children:b.jsx(Ar,{colour:l.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:l.sortByGender,onClick:()=>c({...l,sortByGender:!l.sortByGender}),isDisabled:l.isCustom,children:l.sortByGender?"YES":"NO"})}),b.jsx(sn,{textAlign:"center",children:b.jsx(Ar,{colour:l.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:l.isCustom,onClick:()=>c({...l,isCustom:!l.isCustom}),children:l.isCustom?"YES":"NO"})}),b.jsx(sn,{textAlign:"center",children:b.jsxs(sr,{onClick:E,disabled:!l.name.trim()||!l.emoji.trim(),children:[b.jsx(dh,{size:16,style:{marginRight:"6px"}}),"Add"]})}),b.jsx(sn,{textAlign:"center",children:""})]})]}),p&&b.jsx(fu,{label:"Unsaved position changes",saveText:"Save Positions",onSave:D,onCancel:M,isSaving:f==="saving"})]})},sz=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],mR=({isOpen:n,onClose:e,team:t,availablePositions:i,onTogglePosition:a,onToggleDay:l,onToggleAllowAbsence:c})=>{var f;return b.jsxs(hv,{isOpen:n,onClose:e,title:`Edit Team: ${t.name}`,children:[b.jsxs("div",{className:Sn.formGroup,children:[b.jsx("label",{className:Sn.sectionLabel,children:"Allowed Positions"}),b.jsx(Fl,{children:(f=i==null?void 0:i.filter(m=>!m.parentId))==null?void 0:f.map(m=>{var y;const p=(y=t.positions)==null?void 0:y.some(v=>v.name===m.name);return b.jsxs(Ar,{colour:m.colour,isActive:p,onClick:()=>a(m),children:[m.emoji," ",m.name]},m.name)})})]}),b.jsxs("div",{className:Sn.formGroup,children:[b.jsx("label",{className:Sn.sectionLabel,children:"Preferred Days"}),b.jsx(Fl,{children:sz.map(m=>{var y;const p=(y=t.preferredDays)==null?void 0:y.includes(m);return b.jsx(Ar,{isActive:p,onClick:()=>l(m),children:m},m)})})]}),b.jsxs("div",{className:Sn.formGroup,children:[b.jsx("label",{className:Sn.sectionLabel,children:"Feature Settings"}),b.jsx(Fl,{children:b.jsxs(Ar,{isActive:t.allowAbsence!==!1,onClick:()=>c(t.allowAbsence===!1),colour:t.allowAbsence!==!1?"var(--color-success-dark)":"var(--color-text-dim)",children:["Allow Absence: ",t.allowAbsence!==!1?"YES":"NO"]})})]})]})},dv=({primaryText:n,secondaryText:e,onClick:t})=>b.jsxs("button",{className:Sn.summaryButton,onClick:t,type:"button",children:[b.jsx("span",{className:Sn.summaryPrimary,children:n}),e&&b.jsxs(b.Fragment,{children:[b.jsx("span",{className:Sn.summarySeparator,children:""}),b.jsx("span",{className:Sn.summarySecondary,children:e})]})]}),az=({team:n,teamIndex:e,availablePositions:t,onUpdate:i,onMove:a,onDelete:l,onTogglePosition:c,onToggleDay:f,onToggleAllowAbsence:m,isFirst:p,isLast:y})=>{var V;const[v,E]=O.useState(!1),w=()=>{if(!n.positions||n.positions.length===0)return"No positions";const M=n.positions.slice(0,3).map(j=>b.jsx("span",{className:Sn.summaryEmoji,children:j.emoji},j.name)),U=n.positions.length-3;return b.jsxs(b.Fragment,{children:[M,U>0&&b.jsxs("span",{className:Sn.remainingCount,children:["+",U]})]})},D=()=>!n.preferredDays||n.preferredDays.length===0?"No days":n.preferredDays.map(M=>M.substring(0,3)).join(", ");return b.jsxs(b.Fragment,{children:[b.jsxs("tr",{children:[b.jsx(ri,{name:`team-name-${e}`,value:n.name,onChange:M=>i(e,"name",M.target.value),isSticky:!0}),b.jsx(sn,{children:b.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[b.jsx(sr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(e,"up"),disabled:p,children:""}),b.jsx(sr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(e,"down"),disabled:y,children:""})]})}),b.jsx(ri,{name:`team-emoji-${e}`,value:n.emoji,onChange:M=>i(e,"emoji",M.target.value)}),b.jsx(ri,{name:`team-maxConflict-${e}`,value:((V=n.maxConflict)==null?void 0:V.toString())||"1",type:"number",onChange:M=>i(e,"maxConflict",parseInt(M.target.value)||1)}),b.jsx(sn,{children:b.jsx(dv,{primaryText:w(),secondaryText:D(),onClick:()=>E(!0)})}),b.jsx(sn,{children:b.jsxs(sr,{variant:"delete",size:"small",onClick:()=>l(e),children:[b.jsx(XC,{size:14,style:{marginRight:"6px"}}),"Delete"]})})]}),b.jsx(mR,{isOpen:v,onClose:()=>E(!1),team:n,availablePositions:t,onTogglePosition:M=>c(e,M),onToggleDay:M=>f(e,M),onToggleAllowAbsence:M=>m(e,M)})]})},_A={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1,allowAbsence:!0},oz=()=>{var L;const n=Mn(),{teams:e,loading:t}=He(x=>x.teams),{positions:i,loading:a}=He(x=>x.positions),[l,c]=O.useState(e),[f,m]=O.useState(_A),[p,y]=O.useState("idle"),[v,E]=O.useState(!1),w=O.useMemo(()=>{const x=ae=>ae.map(Ee=>({name:Ee.name||"",emoji:Ee.emoji||"",positions:(Ee.positions||[]).map(G=>G.name).sort(),preferredDays:[...Ee.preferredDays||[]].sort(),maxConflict:Ee.maxConflict||1,allowAbsence:Ee.allowAbsence!==!1}));return JSON.stringify(x(l))!==JSON.stringify(x(e))},[l,e]);O.useEffect(()=>{c(e)},[e]);const D=(x,ae,Ee)=>{const G=[...l];G[x]={...G[x],[ae]:Ee},c(G)},V=(x,ae)=>{const Ee=[...l],G=ae==="up"?x-1:x+1;if(G<0||G>=Ee.length)return;const ce=Ee[x];Ee[x]=Ee[G],Ee[G]=ce,c(Ee)},M=(x,ae)=>{const Ee=l.map((G,ce)=>{if(ce!==x)return G;const me=G.positions||[],Me=me.find(De=>De.name===ae.name)?me.filter(De=>De.name!==ae.name):[...me,ae];return{...G,positions:Me}});c(Ee)},U=(x,ae)=>{const Ee=l.map((G,ce)=>{if(ce!==x)return G;const me=G.preferredDays||[],Me=me.includes(ae)?me.filter(De=>De!==ae):[...me,ae];return{...G,preferredDays:Me}});c(Ee)},j=(x,ae)=>{const Ee=l.map((G,ce)=>ce!==x?G:{...G,allowAbsence:ae});c(Ee)},q=x=>{const ae=f.positions||[],Ee=ae.some(G=>G.name===x.name)?ae.filter(G=>G.name!==x.name):[...ae,x];m({...f,positions:Ee})},Q=x=>{const ae=f.preferredDays||[],Ee=ae.includes(x)?ae.filter(G=>G!==x):[...ae,x];m({...f,preferredDays:Ee})},W=x=>{m({...f,allowAbsence:x})},K=()=>{if(!f.name.trim()||!f.emoji.trim()){n(Ca({title:"Missing Information",message:"Please provide both an emoji and a name for the team.",showCancel:!1}));return}c([...l,f]),m(_A)},S=x=>{n(Ca({title:"Delete Team",message:"Are you sure you want to delete this team?",confirmText:"Delete",onConfirm:()=>{c(l.filter((ae,Ee)=>Ee!==x))}}))},C=async()=>{y("saving");try{const x=l.map(ae=>({name:ae.name||"",emoji:ae.emoji||"",maxConflict:ae.maxConflict||1,allowAbsence:ae.allowAbsence!==!1,preferredDays:ae.preferredDays||[],positions:(ae.positions||[]).map(Ee=>({name:Ee.name||"",emoji:Ee.emoji||"",colour:Ee.colour||"",sortByGender:!!Ee.sortByGender,isCustom:!!Ee.isCustom,customLabels:Ee.customLabels||[],...Ee.parentId?{parentId:Ee.parentId}:{}}))}));await n(ud(x)).unwrap(),y("success"),setTimeout(()=>y("idle"),2e3)}catch(x){console.error("Save Error:",x),n(Ca({title:"Save Error",message:"Error saving: "+(x instanceof Error?x.message:"Unknown error"),showCancel:!1})),y("idle")}},I=()=>{c(e)};if(t||a)return b.jsx(hu,{});const k=()=>{if(!f.positions||f.positions.length===0)return"No positions";const x=f.positions.slice(0,3).map(Ee=>b.jsx("span",{className:ql.summaryEmoji,children:Ee.emoji},Ee.name)),ae=f.positions.length-3;return b.jsxs(b.Fragment,{children:[x,ae>0&&b.jsxs("span",{className:ql.remainingCount,children:["+",ae]})]})},P=()=>!f.preferredDays||f.preferredDays.length===0?"No days":f.preferredDays.map(x=>x.substring(0,3)).join(", ");return b.jsxs("div",{className:ql.managementWrapper,children:[b.jsxs(fv,{headers:[{text:"Name",minWidth:100,width:120,textAlign:"center"},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Conflicts",width:60,textAlign:"center"},{text:"Config",minWidth:180,textAlign:"center"},{text:"",width:50}],children:[l.map((x,ae)=>b.jsx(az,{team:x,teamIndex:ae,availablePositions:i,onUpdate:D,onMove:V,onDelete:S,onTogglePosition:M,onToggleDay:U,onToggleAllowAbsence:j,isFirst:ae===0,isLast:ae===l.length-1},`${x.emoji}-${ae}`)),b.jsxs("tr",{className:"team-row-new",children:[b.jsx(ri,{name:"new-team-name",value:f.name,placeholder:"Team Name",onChange:x=>m({...f,name:x.target.value}),isSticky:!0}),b.jsx(sn,{children:""}),b.jsx(ri,{name:"new-team-emoji",value:f.emoji,placeholder:"",onChange:x=>m({...f,emoji:x.target.value})}),b.jsx(ri,{name:"new-team-maxConflict",value:((L=f.maxConflict)==null?void 0:L.toString())||"1",type:"number",onChange:x=>m({...f,maxConflict:parseInt(x.target.value)||1})}),b.jsx(sn,{children:b.jsx(dv,{primaryText:k(),secondaryText:P(),onClick:()=>E(!0)})}),b.jsx(sn,{children:b.jsxs(sr,{onClick:K,disabled:!f.name.trim()||!f.emoji.trim(),children:[b.jsx(dh,{size:16,style:{marginRight:"6px"}}),"Add"]})})]})]}),b.jsx(mR,{isOpen:v,onClose:()=>E(!1),team:f,availablePositions:i,onTogglePosition:q,onToggleDay:Q,onToggleAllowAbsence:W}),w&&b.jsx(fu,{label:"Unsaved team changes",saveText:"Save All Team Changes",onSave:C,onCancel:I,isSaving:p==="saving"})]})},lz=({isOpen:n,onClose:e,user:t,availableTeams:i})=>{const a=Mn(),{positions:l}=He(p=>p.positions),c=p=>{a(tU({userId:t.id,teamName:p}))},f=(p,y)=>{a(nU({userId:t.id,teamName:p,posName:y}))},m=(p,y)=>{a(rU({userId:t.id,teamName:p,direction:y}))};return b.jsx(hv,{isOpen:n,onClose:e,title:`Edit Assignments: ${t.name}`,children:b.jsx(hR,{selectedTeams:t.teams||[],teamPositions:t.teamPositions||{},onToggleTeam:c,onTogglePosition:f,onMoveTeam:m,availableTeams:i,globalPositions:l})})},uz=({user:n,availableTeams:e,adminEmail:t})=>{const i=Mn(),{positions:a}=He(y=>y.positions),[l,c]=O.useState(!1),f=(y,v)=>{i(eU({id:n.id,field:y,value:v}))},m=()=>{if(!n.teams||n.teams.length===0)return"No teams";const y=n.teams.map(w=>{const D=e.find(V=>V.name===w);return(D==null?void 0:D.emoji)||""}).filter(Boolean),v=y.slice(0,3).map((w,D)=>b.jsx("span",{className:Sn.summaryEmoji,children:w},D)),E=y.length-3;return b.jsxs(b.Fragment,{children:[v,E>0&&b.jsxs("span",{className:Sn.remainingCount,children:["+",E]})]})},p=()=>n.teamPositions?Object.entries(n.teamPositions).reduce((y,[,v])=>{const E=v.filter(w=>{const D=a.find(V=>V.name===w);return!(D!=null&&D.isCustom)});return y+E.length},0):0;return b.jsxs(b.Fragment,{children:[b.jsxs("tr",{children:[b.jsx(ri,{name:`name-${n.id}`,value:n.name||"",onChange:y=>f("name",y.target.value),isSticky:!0}),b.jsx(ri,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),b.jsx(sn,{children:b.jsxs("select",{name:`gender-${n.id}`,className:ys.formSelect,value:n.gender,onChange:y=>f("gender",y.target.value),children:[b.jsx("option",{value:"",children:"-"}),b.jsx("option",{value:"Male",children:"Male"}),b.jsx("option",{value:"Female",children:"Female"})]})}),b.jsx(sn,{children:b.jsx(dv,{primaryText:m(),secondaryText:`(${p()} pos)`,onClick:()=>c(!0)})}),b.jsx(sn,{textAlign:"center",children:b.jsx(Ar,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),b.jsx(sn,{textAlign:"center",children:b.jsx(Ar,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),b.jsx(sn,{textAlign:"center",children:b.jsx(Ar,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id),b.jsx(lz,{isOpen:l,onClose:()=>c(!1),user:n,availableTeams:e})]})},cz=()=>{const n=Mn(),{allUsers:e,originalUsers:t,loading:i,saving:a,error:l}=He(y=>y.userManagement),c=He(y=>y.teams.teams),f=O.useMemo(()=>{const y=v=>v.map(E=>({name:E.name||"",gender:E.gender||"",teams:[...E.teams||[]].sort(),teamPositions:Object.keys(E.teamPositions||{}).sort().reduce((w,D)=>{var V;return w[D]=[...((V=E.teamPositions)==null?void 0:V[D])||[]].sort(),w},{}),isActive:!!E.isActive,isApproved:!!E.isApproved,isAdmin:!!E.isAdmin}));return JSON.stringify(y(e))!==JSON.stringify(y(t))},[e,t]),m=()=>{n(fd(e))},p=()=>{n(iU())};return i?b.jsx(hu,{}):l?b.jsxs("div",{children:["Error: ",l]}):b.jsxs("div",{className:ql.managementWrapper,children:[b.jsx(fv,{headers:[{text:"Name",minWidth:70,width:100,textAlign:"center"},{text:"Email",minWidth:170,textAlign:"center"},{text:"Gender",minWidth:90,textAlign:"center"},{text:"Assignments",minWidth:150,textAlign:"center"},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(y=>b.jsx(uz,{user:y,availableTeams:c,adminEmail:"chris.sm.kang542@gmail.com"},y.id))}),f&&b.jsx(fu,{label:"Unsaved user changes",saveText:"Save All User Changes",onSave:m,onCancel:p,isSaving:a})]})},hz=()=>{const{userData:n}=He(t=>t.auth),{section:e}=Mo();return n?b.jsxs("div",{className:ql.settingsContainer,children:[e===Pl.PROFILE&&b.jsx(fR,{}),e===Pl.USER_MANAGEMENT&&(n.isAdmin?b.jsx(cz,{}):b.jsx("p",{children:"Access Denied"})),e===Pl.TEAMS&&(n.isAdmin?b.jsx(oz,{}):b.jsx("p",{children:"Access Denied"})),e===Pl.POSITIONS&&(n.isAdmin?b.jsx(iz,{}):b.jsx("p",{children:"Access Denied"}))]}):null},fz=[{path:"/",element:b.jsx(fL,{})},{path:"/login",element:b.jsx(w9,{})},{path:"/guest",element:b.jsx(y9,{})},{path:"/app",element:b.jsx(gj,{}),children:[{path:"",element:b.jsx(GU,{}),children:[{path:"dashboard",element:b.jsx(P6,{})},{path:"roster/:teamName?/:positionName?",element:b.jsx(Q5,{})},{path:"settings/:section?",element:b.jsx(hz,{})}]}]}];let vA=!1;const dz=n=>{if(!vA){vA=!0;let e;Gk(xo,t=>{if(t){n.dispatch($3(t)),n.dispatch(cd(t.uid));const i=Jn(Bt,"users",t.uid);e=go(i,a=>{if(a.exists()){const l=a.data();n.dispatch(iR(l))}})}else n.dispatch(K3()),e&&e()})}return e=>t=>e(t)},mz=FL({reducer:{auth:Y3,positions:fj,presence:l3,roster:J3,rosterView:r6,teams:pj,ui:t3,userManagement:aU},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(dz)}),pz=UD(fz);ix.createRoot(document.getElementById("root")).render(b.jsx(TA.StrictMode,{children:b.jsx(vx,{store:mz,children:b.jsx(e2,{children:b.jsx(oL,{children:b.jsx(JD,{router:pz})})})})}));
