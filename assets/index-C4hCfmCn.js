var LI=Object.defineProperty;var jI=(n,e,t)=>e in n?LI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Tg=(n,e,t)=>jI(n,typeof e!="symbol"?e+"":e,t);function kI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function fA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bg={exports:{}},nc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function UI(){if(Rb)return nc;Rb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return nc.Fragment=e,nc.jsx=t,nc.jsxs=t,nc}var Ib;function zI(){return Ib||(Ib=1,bg.exports=UI()),bg.exports}var T=zI(),Sg={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xb;function BI(){if(xb)return Je;xb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),S=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=S&&j[S]||j["@@iterator"],typeof j=="function"?j:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,M={};function B(j,re,_e){this.props=j,this.context=re,this.refs=M,this.updater=_e||D}B.prototype.isReactComponent={},B.prototype.setState=function(j,re){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,re,"setState")},B.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function F(){}F.prototype=B.prototype;function G(j,re,_e){this.props=j,this.context=re,this.refs=M,this.updater=_e||D}var ee=G.prototype=new F;ee.constructor=G,z(ee,B.prototype),ee.isPureReactComponent=!0;var ie=Array.isArray;function ne(){}var A={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function C(j,re,_e){var we=_e.ref;return{$$typeof:n,type:j,key:re,ref:we!==void 0?we:null,props:_e}}function P(j,re){return C(j.type,re,j.props)}function O(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function L(j){var re={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(_e){return re[_e]})}var x=/\/+/g;function ge(j,re){return typeof j=="object"&&j!==null&&j.key!=null?L(""+j.key):re.toString(36)}function Te(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(ne,ne):(j.status="pending",j.then(function(re){j.status==="pending"&&(j.status="fulfilled",j.value=re)},function(re){j.status==="pending"&&(j.status="rejected",j.reason=re)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function H(j,re,_e,we,ue){var Se=typeof j;(Se==="undefined"||Se==="boolean")&&(j=null);var xe=!1;if(j===null)xe=!0;else switch(Se){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(j.$$typeof){case n:case e:xe=!0;break;case y:return xe=j._init,H(xe(j._payload),re,_e,we,ue)}}if(xe)return ue=ue(j),xe=we===""?"."+ge(j,0):we,ie(ue)?(_e="",xe!=null&&(_e=xe.replace(x,"$&/")+"/"),H(ue,re,_e,"",function(st){return st})):ue!=null&&(O(ue)&&(ue=P(ue,_e+(ue.key==null||j&&j.key===ue.key?"":(""+ue.key).replace(x,"$&/")+"/")+xe)),re.push(ue)),1;xe=0;var ze=we===""?".":we+":";if(ie(j))for(var Be=0;Be<j.length;Be++)we=j[Be],Se=ze+ge(we,Be),xe+=H(we,re,_e,Se,ue);else if(Be=w(j),typeof Be=="function")for(j=Be.call(j),Be=0;!(we=j.next()).done;)we=we.value,Se=ze+ge(we,Be++),xe+=H(we,re,_e,Se,ue);else if(Se==="object"){if(typeof j.then=="function")return H(Te(j),re,_e,we,ue);throw re=String(j),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return xe}function ae(j,re,_e){if(j==null)return j;var we=[],ue=0;return H(j,we,"","",function(Se){return re.call(_e,Se,ue++)}),we}function ye(j){if(j._status===-1){var re=j._result;re=re(),re.then(function(_e){(j._status===0||j._status===-1)&&(j._status=1,j._result=_e)},function(_e){(j._status===0||j._status===-1)&&(j._status=2,j._result=_e)}),j._status===-1&&(j._status=0,j._result=re)}if(j._status===1)return j._result.default;throw j._result}var pe=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ee={map:ae,forEach:function(j,re,_e){ae(j,function(){re.apply(this,arguments)},_e)},count:function(j){var re=0;return ae(j,function(){re++}),re},toArray:function(j){return ae(j,function(re){return re})||[]},only:function(j){if(!O(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Je.Activity=v,Je.Children=Ee,Je.Component=B,Je.Fragment=t,Je.Profiler=a,Je.PureComponent=G,Je.StrictMode=i,Je.Suspense=m,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Je.__COMPILER_RUNTIME={__proto__:null,c:function(j){return A.H.useMemoCache(j)}},Je.cache=function(j){return function(){return j.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(j,re,_e){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var we=z({},j.props),ue=j.key;if(re!=null)for(Se in re.key!==void 0&&(ue=""+re.key),re)!I.call(re,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&re.ref===void 0||(we[Se]=re[Se]);var Se=arguments.length-2;if(Se===1)we.children=_e;else if(1<Se){for(var xe=Array(Se),ze=0;ze<Se;ze++)xe[ze]=arguments[ze+2];we.children=xe}return C(j.type,ue,we)},Je.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},Je.createElement=function(j,re,_e){var we,ue={},Se=null;if(re!=null)for(we in re.key!==void 0&&(Se=""+re.key),re)I.call(re,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(ue[we]=re[we]);var xe=arguments.length-2;if(xe===1)ue.children=_e;else if(1<xe){for(var ze=Array(xe),Be=0;Be<xe;Be++)ze[Be]=arguments[Be+2];ue.children=ze}if(j&&j.defaultProps)for(we in xe=j.defaultProps,xe)ue[we]===void 0&&(ue[we]=xe[we]);return C(j,Se,ue)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(j){return{$$typeof:f,render:j}},Je.isValidElement=O,Je.lazy=function(j){return{$$typeof:y,_payload:{_status:-1,_result:j},_init:ye}},Je.memo=function(j,re){return{$$typeof:p,type:j,compare:re===void 0?null:re}},Je.startTransition=function(j){var re=A.T,_e={};A.T=_e;try{var we=j(),ue=A.S;ue!==null&&ue(_e,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(ne,pe)}catch(Se){pe(Se)}finally{re!==null&&_e.types!==null&&(re.types=_e.types),A.T=re}},Je.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Je.use=function(j){return A.H.use(j)},Je.useActionState=function(j,re,_e){return A.H.useActionState(j,re,_e)},Je.useCallback=function(j,re){return A.H.useCallback(j,re)},Je.useContext=function(j){return A.H.useContext(j)},Je.useDebugValue=function(){},Je.useDeferredValue=function(j,re){return A.H.useDeferredValue(j,re)},Je.useEffect=function(j,re){return A.H.useEffect(j,re)},Je.useEffectEvent=function(j){return A.H.useEffectEvent(j)},Je.useId=function(){return A.H.useId()},Je.useImperativeHandle=function(j,re,_e){return A.H.useImperativeHandle(j,re,_e)},Je.useInsertionEffect=function(j,re){return A.H.useInsertionEffect(j,re)},Je.useLayoutEffect=function(j,re){return A.H.useLayoutEffect(j,re)},Je.useMemo=function(j,re){return A.H.useMemo(j,re)},Je.useOptimistic=function(j,re){return A.H.useOptimistic(j,re)},Je.useReducer=function(j,re,_e){return A.H.useReducer(j,re,_e)},Je.useRef=function(j){return A.H.useRef(j)},Je.useState=function(j){return A.H.useState(j)},Je.useSyncExternalStore=function(j,re,_e){return A.H.useSyncExternalStore(j,re,_e)},Je.useTransition=function(){return A.H.useTransition()},Je.version="19.2.4",Je}var Nb;function Bd(){return Nb||(Nb=1,Sg.exports=BI()),Sg.exports}var V=Bd();const dA=fA(V),HI=kI({__proto__:null,default:dA},[V]);var Ag={exports:{}},rc={},wg={exports:{}},Cg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function FI(){return Db||(Db=1,(function(n){function e(H,ae){var ye=H.length;H.push(ae);e:for(;0<ye;){var pe=ye-1>>>1,Ee=H[pe];if(0<a(Ee,ae))H[pe]=ae,H[ye]=Ee,ye=pe;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ae=H[0],ye=H.pop();if(ye!==ae){H[0]=ye;e:for(var pe=0,Ee=H.length,j=Ee>>>1;pe<j;){var re=2*(pe+1)-1,_e=H[re],we=re+1,ue=H[we];if(0>a(_e,ye))we<Ee&&0>a(ue,_e)?(H[pe]=ue,H[we]=ye,pe=we):(H[pe]=_e,H[re]=ye,pe=re);else if(we<Ee&&0>a(ue,ye))H[pe]=ue,H[we]=ye,pe=we;else break e}}return ae}function a(H,ae){var ye=H.sortIndex-ae.sortIndex;return ye!==0?ye:H.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],p=[],y=1,v=null,S=3,w=!1,D=!1,z=!1,M=!1,B=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function ee(H){for(var ae=t(p);ae!==null;){if(ae.callback===null)i(p);else if(ae.startTime<=H)i(p),ae.sortIndex=ae.expirationTime,e(m,ae);else break;ae=t(p)}}function ie(H){if(z=!1,ee(H),!D)if(t(m)!==null)D=!0,ne||(ne=!0,L());else{var ae=t(p);ae!==null&&Te(ie,ae.startTime-H)}}var ne=!1,A=-1,I=5,C=-1;function P(){return M?!0:!(n.unstable_now()-C<I)}function O(){if(M=!1,ne){var H=n.unstable_now();C=H;var ae=!0;try{e:{D=!1,z&&(z=!1,F(A),A=-1),w=!0;var ye=S;try{t:{for(ee(H),v=t(m);v!==null&&!(v.expirationTime>H&&P());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,S=v.priorityLevel;var Ee=pe(v.expirationTime<=H);if(H=n.unstable_now(),typeof Ee=="function"){v.callback=Ee,ee(H),ae=!0;break t}v===t(m)&&i(m),ee(H)}else i(m);v=t(m)}if(v!==null)ae=!0;else{var j=t(p);j!==null&&Te(ie,j.startTime-H),ae=!1}}break e}finally{v=null,S=ye,w=!1}ae=void 0}}finally{ae?L():ne=!1}}}var L;if(typeof G=="function")L=function(){G(O)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,ge=x.port2;x.port1.onmessage=O,L=function(){ge.postMessage(null)}}else L=function(){B(O,0)};function Te(H,ae){A=B(function(){H(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(H){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ye=S;S=ae;try{return H()}finally{S=ye}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(H,ae){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ye=S;S=H;try{return ae()}finally{S=ye}},n.unstable_scheduleCallback=function(H,ae,ye){var pe=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?pe+ye:pe):ye=pe,H){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ye+Ee,H={id:y++,callback:ae,priorityLevel:H,startTime:ye,expirationTime:Ee,sortIndex:-1},ye>pe?(H.sortIndex=ye,e(p,H),t(m)===null&&H===t(p)&&(z?(F(A),A=-1):z=!0,Te(ie,ye-pe))):(H.sortIndex=Ee,e(m,H),D||w||(D=!0,ne||(ne=!0,L()))),H},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(H){var ae=S;return function(){var ye=S;S=ae;try{return H.apply(this,arguments)}finally{S=ye}}}})(Cg)),Cg}var Ob;function qI(){return Ob||(Ob=1,wg.exports=FI()),wg.exports}var Rg={exports:{}},er={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function GI(){if(Mb)return er;Mb=1;var n=Bd();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:p,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,er.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},er.flushSync=function(m){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=y,i.d.f()}},er.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},er.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},er.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:w}):y==="script"&&i.d.X(m,{crossOrigin:v,integrity:S,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},er.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},er.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},er.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},er.requestFormReset=function(m){i.d.r(m)},er.unstable_batchedUpdates=function(m,p){return m(p)},er.useFormState=function(m,p,y){return c.H.useFormState(m,p,y)},er.useFormStatus=function(){return c.H.useHostTransitionStatus()},er.version="19.2.4",er}var Pb;function mA(){if(Pb)return Rg.exports;Pb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rg.exports=GI(),Rg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vb;function $I(){if(Vb)return rc;Vb=1;var n=qI(),e=Bd(),t=mA();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var d=o.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===o)return m(d),r;if(g===u)return m(d),s;g=g.sibling}throw Error(i(188))}if(o.return!==u.return)o=d,u=g;else{for(var E=!1,R=d.child;R;){if(R===o){E=!0,o=d,u=g;break}if(R===u){E=!0,u=d,o=g;break}R=R.sibling}if(!E){for(R=g.child;R;){if(R===o){E=!0,o=g,u=d;break}if(R===u){E=!0,u=g,o=d;break}R=R.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),G=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var x=Symbol.for("react.client.reference");function ge(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===x?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case z:return"Fragment";case B:return"Profiler";case M:return"StrictMode";case ie:return"Suspense";case ne:return"SuspenseList";case C:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case D:return"Portal";case G:return r.displayName||"Context";case F:return(r._context.displayName||"Context")+".Consumer";case ee:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case A:return s=r.displayName||null,s!==null?s:ge(r.type)||"Memo";case I:s=r._payload,r=r._init;try{return ge(r(s))}catch{}}return null}var Te=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},pe=[],Ee=-1;function j(r){return{current:r}}function re(r){0>Ee||(r.current=pe[Ee],pe[Ee]=null,Ee--)}function _e(r,s){Ee++,pe[Ee]=r.current,r.current=s}var we=j(null),ue=j(null),Se=j(null),xe=j(null);function ze(r,s){switch(_e(Se,s),_e(ue,r),_e(we,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?XT(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=XT(s),r=WT(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}re(we),_e(we,r)}function Be(){re(we),re(ue),re(Se)}function st(r){r.memoizedState!==null&&_e(xe,r);var s=we.current,o=WT(s,r.type);s!==o&&(_e(ue,r),_e(we,o))}function St(r){ue.current===r&&(re(we),re(ue)),xe.current===r&&(re(xe),Ju._currentValue=ye)}var Ye,Et;function Ot(r){if(Ye===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ye=s&&s[1]||"",Et=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ye+r+Et}var Qn=!1;function dn(r,s){if(!r||Qn)return"";Qn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(te){var J=te}Reflect.construct(r,[],he)}else{try{he.call()}catch(te){J=te}r.call(he.prototype)}}else{try{throw Error()}catch(te){J=te}(he=r())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(te){if(te&&J&&typeof te.stack=="string")return[te.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],R=g[1];if(E&&R){var U=E.split(`
`),X=R.split(`
`);for(d=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;d<X.length&&!X[d].includes("DetermineComponentFrameRoot");)d++;if(u===U.length||d===X.length)for(u=U.length-1,d=X.length-1;1<=u&&0<=d&&U[u]!==X[d];)d--;for(;1<=u&&0<=d;u--,d--)if(U[u]!==X[d]){if(u!==1||d!==1)do if(u--,d--,0>d||U[u]!==X[d]){var se=`
`+U[u].replace(" at new "," at ");return r.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",r.displayName)),se}while(1<=u&&0<=d);break}}}finally{Qn=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Ot(o):""}function lr(r,s){switch(r.tag){case 26:case 27:case 5:return Ot(r.type);case 16:return Ot("Lazy");case 13:return r.child!==s&&s!==null?Ot("Suspense Fallback"):Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 15:return dn(r.type,!1);case 11:return dn(r.type.render,!1);case 1:return dn(r.type,!0);case 31:return Ot("Activity");default:return""}}function Xn(r){try{var s="",o=null;do s+=lr(r,o),o=r,r=r.return;while(r);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Mt=Object.prototype.hasOwnProperty,Jt=n.unstable_scheduleCallback,Pt=n.unstable_cancelCallback,ur=n.unstable_shouldYield,di=n.unstable_requestPaint,qt=n.unstable_now,cr=n.unstable_getCurrentPriorityLevel,Yr=n.unstable_ImmediatePriority,Wn=n.unstable_UserBlockingPriority,Zt=n.unstable_NormalPriority,bn=n.unstable_LowPriority,xi=n.unstable_IdlePriority,oe=n.log,ve=n.unstable_setDisableYieldValue,Ce=null,de=null;function De(r){if(typeof oe=="function"&&ve(r),de&&typeof de.setStrictMode=="function")try{de.setStrictMode(Ce,r)}catch{}}var Pe=Math.clz32?Math.clz32:At,Kt=Math.log,lt=Math.LN2;function At(r){return r>>>=0,r===0?32:31-(Kt(r)/lt|0)|0}var Tt=256,mn=262144,sn=4194304;function Qr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Or(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var d=0,g=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var R=u&134217727;return R!==0?(u=R&~g,u!==0?d=Qr(u):(E&=R,E!==0?d=Qr(E):o||(o=R&~r,o!==0&&(d=Qr(o))))):(R=u&~g,R!==0?d=Qr(R):E!==0?d=Qr(E):o||(o=u&~r,o!==0&&(d=Qr(o)))),d===0?0:s!==0&&s!==d&&(s&g)===0&&(g=d&-d,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:d}function Mr(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Po(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zi(){var r=sn;return sn<<=1,(sn&62914560)===0&&(sn=4194304),r}function hr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Ni(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function cu(r,s,o,u,d,g){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var R=r.entanglements,U=r.expirationTimes,X=r.hiddenUpdates;for(o=E&~o;0<o;){var se=31-Pe(o),he=1<<se;R[se]=0,U[se]=-1;var J=X[se];if(J!==null)for(X[se]=null,se=0;se<J.length;se++){var te=J[se];te!==null&&(te.lane&=-536870913)}o&=~he}u!==0&&es(r,u,0),g!==0&&d===0&&r.tag!==0&&(r.suspendedLanes|=g&~(E&~s))}function es(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Pe(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function k(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Pe(o),d=1<<u;d&s|r[u]&s&&(r[u]|=s),o&=~d}}function $(r,s){var o=s&-s;return o=(o&42)!==0?1:W(o),(o&(r.suspendedLanes|s))!==0?0:o}function W(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function me(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function be(){var r=ae.p;return r!==0?r:(r=window.event,r===void 0?32:Eb(r.type))}function Oe(r,s){var o=ae.p;try{return ae.p=r,s()}finally{ae.p=o}}var Le=Math.random().toString(36).slice(2),Ae="__reactFiber$"+Le,Ie="__reactProps$"+Le,Ve="__reactContainer$"+Le,Ge="__reactEvents$"+Le,Ue="__reactListeners$"+Le,Qe="__reactHandles$"+Le,at="__reactResources$"+Le,jt="__reactMarker$"+Le;function en(r){delete r[Ae],delete r[Ie],delete r[Ge],delete r[Ue],delete r[Qe]}function Yt(r){var s=r[Ae];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Ve]||o[Ae]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=ib(r);r!==null;){if(o=r[Ae])return o;r=ib(r)}return s}r=o,o=r.parentNode}return null}function nt(r){if(r=r[Ae]||r[Ve]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function Qt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Ln(r){var s=r[at];return s||(s=r[at]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Xt(r){r[jt]=!0}var _r=new Set,Jn={};function vr(r,s){Zn(r,s),Zn(r+"Capture",s)}function Zn(r,s){for(Jn[r]=s,r=0;r<s.length;r++)_r.add(s[r])}var Pr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Di={},Oi={};function ut(r){return Mt.call(Oi,r)?!0:Mt.call(Di,r)?!1:Pr.test(r)?Oi[r]=!0:(Di[r]=!0,!1)}function un(r,s,o){if(ut(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Sn(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function kt(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}function rt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Vr(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ks(r,s,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,g=u.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){o=""+E,g.call(this,E)}}),Object.defineProperty(r,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(E){o=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Rt(r){if(!r._valueTracker){var s=Vr(r)?"checked":"value";r._valueTracker=ks(r,s,""+r[s])}}function Ha(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=Vr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function Mi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Fa=/[\n"\\]/g;function Er(r){return r.replace(Fa,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Vo(r,s,o,u,d,g,E,R){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),s!=null?E==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+rt(s)):r.value!==""+rt(s)&&(r.value=""+rt(s)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),s!=null?hu(r,E,rt(s)):o!=null?hu(r,E,rt(o)):u!=null&&r.removeAttribute("value"),d==null&&g!=null&&(r.defaultChecked=!!g),d!=null&&(r.checked=d&&typeof d!="function"&&typeof d!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+rt(R):r.removeAttribute("name")}function uh(r,s,o,u,d,g,E,R){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){Rt(r);return}o=o!=null?""+rt(o):"",s=s!=null?""+rt(s):o,R||s===r.value||(r.value=s),r.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=R?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E),Rt(r)}function hu(r,s,o){s==="number"&&Mi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Us(r,s,o,u){if(r=r.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<r.length;o++)d=s.hasOwnProperty("$"+r[o].value),r[o].selected!==d&&(r[o].selected=d),d&&u&&(r[o].defaultSelected=!0)}else{for(o=""+rt(o),s=null,d=0;d<r.length;d++){if(r[d].value===o){r[d].selected=!0,u&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function ch(r,s,o){if(s!=null&&(s=""+rt(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+rt(o):""}function zs(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(Te(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=rt(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),Rt(r)}function Tr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var hh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fu(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||hh.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function du(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&fu(r,d,u)}else for(var g in s)s.hasOwnProperty(g)&&fu(r,g,s[g])}function Lo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jo(r){return Bs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function mi(){}var mu=null;function Xr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Hs=null,Pi=null;function qa(r){var s=nt(r);if(s&&(r=s.stateNode)){var o=r[Ie]||null;e:switch(r=s.stateNode,s.type){case"input":if(Vo(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Er(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var d=u[Ie]||null;if(!d)throw Error(i(90));Vo(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Ha(u)}break e;case"textarea":ch(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Us(r,!!o.multiple,s,!1)}}}var ko=!1;function Fs(r,s,o){if(ko)return r(s,o);ko=!0;try{var u=r(s);return u}finally{if(ko=!1,(Hs!==null||Pi!==null)&&(af(),Hs&&(s=Hs,r=Pi,Pi=Hs=null,qa(s),r)))for(s=0;s<r.length;s++)qa(r[s])}}function pi(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Ie]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(Wr)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch{Ga=!1}var Vi=null,pu=null,$a=null;function gu(){if($a)return $a;var r,s=pu,o=s.length,u,d="value"in Vi?Vi.value:Vi.textContent,g=d.length;for(r=0;r<o&&s[r]===d[r];r++);var E=o-r;for(u=1;u<=E&&s[o-u]===d[g-u];u++);return $a=d.slice(r,1<u?1-u:void 0)}function Ka(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ts(){return!0}function gi(){return!1}function Un(r){function s(o,u,d,g,E){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(o=r[R],this[R]=o?o(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ts:gi,this.isPropagationStopped=gi,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),s}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Li=Un(ns),qs=v({},ns,{view:0,detail:0}),yu=Un(qs),Gs,Uo,ji,zo=v({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$s,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ji&&(ji&&r.type==="mousemove"?(Gs=r.screenX-ji.screenX,Uo=r.screenY-ji.screenY):Uo=Gs=0,ji=r),Gs)},movementY:function(r){return"movementY"in r?r.movementY:Uo}}),_u=Un(zo),Ya=v({},zo,{dataTransfer:0}),dh=Un(Ya),mh=v({},qs,{relatedTarget:0}),Qa=Un(mh),vu=v({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),ph=Un(vu),Bo=v({},ns,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),gh=Un(Bo),yh=v({},ns,{data:0}),ki=Un(yh),_h={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Th(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Eh[r])?!!s[r]:!1}function $s(){return Th}var fr=v({},qs,{key:function(r){if(r.key){var s=_h[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ka(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?vh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$s,charCode:function(r){return r.type==="keypress"?Ka(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ka(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),bh=Un(fr),Sh=v({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rs=Un(Sh),h=v({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$s}),_=Un(h),b=v({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Un(b),Y=v({},zo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=Un(Y),Re=v({},ns,{newState:0,oldState:0}),et=Un(Re),_n=[9,13,27,32],It=Wr&&"CompositionEvent"in window,an=null;Wr&&"documentMode"in document&&(an=document.documentMode);var Jr=Wr&&"TextEvent"in window&&!an,Ui=Wr&&(!It||an&&8<an&&11>=an),yi=" ",_i=!1;function Xa(r,s){switch(r){case"keyup":return _n.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ho(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Fo=!1;function aR(r,s){switch(r){case"compositionend":return Ho(s);case"keypress":return s.which!==32?null:(_i=!0,yi);case"textInput":return r=s.data,r===yi&&_i?null:r;default:return null}}function oR(r,s){if(Fo)return r==="compositionend"||!It&&Xa(r,s)?(r=gu(),$a=pu=Vi=null,Fo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ui&&s.locale!=="ko"?null:s.data;default:return null}}var lR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ov(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!lR[r.type]:s==="textarea"}function lv(r,s,o,u){Hs?Pi?Pi.push(u):Pi=[u]:Hs=u,s=df(s,"onChange"),0<s.length&&(o=new Li("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Eu=null,Tu=null;function uR(r){qT(r,0)}function Ah(r){var s=Qt(r);if(Ha(s))return r}function uv(r,s){if(r==="change")return s}var cv=!1;if(Wr){var Im;if(Wr){var xm="oninput"in document;if(!xm){var hv=document.createElement("div");hv.setAttribute("oninput","return;"),xm=typeof hv.oninput=="function"}Im=xm}else Im=!1;cv=Im&&(!document.documentMode||9<document.documentMode)}function fv(){Eu&&(Eu.detachEvent("onpropertychange",dv),Tu=Eu=null)}function dv(r){if(r.propertyName==="value"&&Ah(Tu)){var s=[];lv(s,Tu,r,Xr(r)),Fs(uR,s)}}function cR(r,s,o){r==="focusin"?(fv(),Eu=s,Tu=o,Eu.attachEvent("onpropertychange",dv)):r==="focusout"&&fv()}function hR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ah(Tu)}function fR(r,s){if(r==="click")return Ah(s)}function dR(r,s){if(r==="input"||r==="change")return Ah(s)}function mR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Lr=typeof Object.is=="function"?Object.is:mR;function bu(r,s){if(Lr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!Mt.call(s,d)||!Lr(r[d],s[d]))return!1}return!0}function mv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function pv(r,s){var o=mv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=mv(o)}}function gv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?gv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function yv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Mi(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Mi(r.document)}return s}function Nm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var pR=Wr&&"documentMode"in document&&11>=document.documentMode,qo=null,Dm=null,Su=null,Om=!1;function _v(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Om||qo==null||qo!==Mi(u)||(u=qo,"selectionStart"in u&&Nm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Su&&bu(Su,u)||(Su=u,u=df(Dm,"onSelect"),0<u.length&&(s=new Li("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=qo)))}function Wa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Go={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionrun:Wa("Transition","TransitionRun"),transitionstart:Wa("Transition","TransitionStart"),transitioncancel:Wa("Transition","TransitionCancel"),transitionend:Wa("Transition","TransitionEnd")},Mm={},vv={};Wr&&(vv=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function Ja(r){if(Mm[r])return Mm[r];if(!Go[r])return r;var s=Go[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in vv)return Mm[r]=s[o];return r}var Ev=Ja("animationend"),Tv=Ja("animationiteration"),bv=Ja("animationstart"),gR=Ja("transitionrun"),yR=Ja("transitionstart"),_R=Ja("transitioncancel"),Sv=Ja("transitionend"),Av=new Map,Pm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pm.push("scrollEnd");function vi(r,s){Av.set(r,s),vr(s,[r])}var wh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Zr=[],$o=0,Vm=0;function Ch(){for(var r=$o,s=Vm=$o=0;s<r;){var o=Zr[s];Zr[s++]=null;var u=Zr[s];Zr[s++]=null;var d=Zr[s];Zr[s++]=null;var g=Zr[s];if(Zr[s++]=null,u!==null&&d!==null){var E=u.pending;E===null?d.next=d:(d.next=E.next,E.next=d),u.pending=d}g!==0&&wv(o,d,g)}}function Rh(r,s,o,u){Zr[$o++]=r,Zr[$o++]=s,Zr[$o++]=o,Zr[$o++]=u,Vm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Lm(r,s,o,u){return Rh(r,s,o,u),Ih(r)}function Za(r,s){return Rh(r,null,null,s),Ih(r)}function wv(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var d=!1,g=r.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(d=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,d&&s!==null&&(d=31-Pe(o),r=g.hiddenUpdates,u=r[d],u===null?r[d]=[s]:u.push(s),s.lane=o|536870912),g):null}function Ih(r){if(50<Gu)throw Gu=0,Gp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ko={};function vR(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(r,s,o,u){return new vR(r,s,o,u)}function jm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function is(r,s){var o=r.alternate;return o===null?(o=jr(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Cv(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function xh(r,s,o,u,d,g){var E=0;if(u=r,typeof r=="function")jm(r)&&(E=1);else if(typeof r=="string")E=AI(r,o,we.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case C:return r=jr(31,o,s,d),r.elementType=C,r.lanes=g,r;case z:return eo(o.children,d,g,s);case M:E=8,d|=24;break;case B:return r=jr(12,o,s,d|2),r.elementType=B,r.lanes=g,r;case ie:return r=jr(13,o,s,d),r.elementType=ie,r.lanes=g,r;case ne:return r=jr(19,o,s,d),r.elementType=ne,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case G:E=10;break e;case F:E=9;break e;case ee:E=11;break e;case A:E=14;break e;case I:E=16,u=null;break e}E=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=jr(E,o,s,d),s.elementType=r,s.type=u,s.lanes=g,s}function eo(r,s,o,u){return r=jr(7,r,u,s),r.lanes=o,r}function km(r,s,o){return r=jr(6,r,null,s),r.lanes=o,r}function Rv(r){var s=jr(18,null,null,0);return s.stateNode=r,s}function Um(r,s,o){return s=jr(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Iv=new WeakMap;function ei(r,s){if(typeof r=="object"&&r!==null){var o=Iv.get(r);return o!==void 0?o:(s={value:r,source:s,stack:Xn(s)},Iv.set(r,s),s)}return{value:r,source:s,stack:Xn(s)}}var Yo=[],Qo=0,Nh=null,Au=0,ti=[],ni=0,Ks=null,zi=1,Bi="";function ss(r,s){Yo[Qo++]=Au,Yo[Qo++]=Nh,Nh=r,Au=s}function xv(r,s,o){ti[ni++]=zi,ti[ni++]=Bi,ti[ni++]=Ks,Ks=r;var u=zi;r=Bi;var d=32-Pe(u)-1;u&=~(1<<d),o+=1;var g=32-Pe(s)+d;if(30<g){var E=d-d%5;g=(u&(1<<E)-1).toString(32),u>>=E,d-=E,zi=1<<32-Pe(s)+d|o<<d|u,Bi=g+r}else zi=1<<g|o<<d|u,Bi=r}function zm(r){r.return!==null&&(ss(r,1),xv(r,1,0))}function Bm(r){for(;r===Nh;)Nh=Yo[--Qo],Yo[Qo]=null,Au=Yo[--Qo],Yo[Qo]=null;for(;r===Ks;)Ks=ti[--ni],ti[ni]=null,Bi=ti[--ni],ti[ni]=null,zi=ti[--ni],ti[ni]=null}function Nv(r,s){ti[ni++]=zi,ti[ni++]=Bi,ti[ni++]=Ks,zi=s.id,Bi=s.overflow,Ks=r}var zn=null,tn=null,vt=!1,Ys=null,ri=!1,Hm=Error(i(519));function Qs(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wu(ei(s,r)),Hm}function Dv(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Ae]=r,s[Ie]=u,o){case"dialog":ht("cancel",s),ht("close",s);break;case"iframe":case"object":case"embed":ht("load",s);break;case"video":case"audio":for(o=0;o<Ku.length;o++)ht(Ku[o],s);break;case"source":ht("error",s);break;case"img":case"image":case"link":ht("error",s),ht("load",s);break;case"details":ht("toggle",s);break;case"input":ht("invalid",s),uh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ht("invalid",s);break;case"textarea":ht("invalid",s),zs(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||YT(s.textContent,o)?(u.popover!=null&&(ht("beforetoggle",s),ht("toggle",s)),u.onScroll!=null&&ht("scroll",s),u.onScrollEnd!=null&&ht("scrollend",s),u.onClick!=null&&(s.onclick=mi),s=!0):s=!1,s||Qs(r,!0)}function Ov(r){for(zn=r.return;zn;)switch(zn.tag){case 5:case 31:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:zn=zn.return}}function Xo(r){if(r!==zn)return!1;if(!vt)return Ov(r),vt=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||ag(r.type,r.memoizedProps)),o=!o),o&&tn&&Qs(r),Ov(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));tn=rb(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));tn=rb(r)}else s===27?(s=tn,ua(r.type)?(r=hg,hg=null,tn=r):tn=s):tn=zn?si(r.stateNode.nextSibling):null;return!0}function to(){tn=zn=null,vt=!1}function Fm(){var r=Ys;return r!==null&&(wr===null?wr=r:wr.push.apply(wr,r),Ys=null),r}function wu(r){Ys===null?Ys=[r]:Ys.push(r)}var qm=j(null),no=null,as=null;function Xs(r,s,o){_e(qm,s._currentValue),s._currentValue=o}function os(r){r._currentValue=qm.current,re(qm)}function Gm(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function $m(r,s,o,u){var d=r.child;for(d!==null&&(d.return=r);d!==null;){var g=d.dependencies;if(g!==null){var E=d.child;g=g.firstContext;e:for(;g!==null;){var R=g;g=d;for(var U=0;U<s.length;U++)if(R.context===s[U]){g.lanes|=o,R=g.alternate,R!==null&&(R.lanes|=o),Gm(g.return,o,r),u||(E=null);break e}g=R.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(i(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),Gm(E,o,r),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===r){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function Wo(r,s,o,u){r=null;for(var d=s,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var R=d.type;Lr(d.pendingProps.value,E.value)||(r!==null?r.push(R):r=[R])}}else if(d===xe.current){if(E=d.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(r!==null?r.push(Ju):r=[Ju])}d=d.return}r!==null&&$m(s,r,o,u),s.flags|=262144}function Dh(r){for(r=r.firstContext;r!==null;){if(!Lr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ro(r){no=r,as=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Bn(r){return Mv(no,r)}function Oh(r,s){return no===null&&ro(r),Mv(r,s)}function Mv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},as===null){if(r===null)throw Error(i(308));as=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else as=as.next=s;return o}var ER=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},TR=n.unstable_scheduleCallback,bR=n.unstable_NormalPriority,An={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Km(){return{controller:new ER,data:new Map,refCount:0}}function Cu(r){r.refCount--,r.refCount===0&&TR(bR,function(){r.controller.abort()})}var Ru=null,Ym=0,Jo=0,Zo=null;function SR(r,s){if(Ru===null){var o=Ru=[];Ym=0,Jo=Wp(),Zo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Ym++,s.then(Pv,Pv),s}function Pv(){if(--Ym===0&&Ru!==null){Zo!==null&&(Zo.status="fulfilled");var r=Ru;Ru=null,Jo=0,Zo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function AR(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Vv=H.S;H.S=function(r,s){_T=qt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&SR(r,s),Vv!==null&&Vv(r,s)};var io=j(null);function Qm(){var r=io.current;return r!==null?r:Gt.pooledCache}function Mh(r,s){s===null?_e(io,io.current):_e(io,s.pool)}function Lv(){var r=Qm();return r===null?null:{parent:An._currentValue,pool:r}}var el=Error(i(460)),Xm=Error(i(474)),Ph=Error(i(542)),Vh={then:function(){}};function jv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function kv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(mi,mi),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,zv(r),r;default:if(typeof s.status=="string")s.then(mi,mi);else{if(r=Gt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,zv(r),r}throw ao=s,el}}function so(r){try{var s=r._init;return s(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ao=o,el):o}}var ao=null;function Uv(){if(ao===null)throw Error(i(459));var r=ao;return ao=null,r}function zv(r){if(r===el||r===Ph)throw Error(i(483))}var tl=null,Iu=0;function Lh(r){var s=Iu;return Iu+=1,tl===null&&(tl=[]),kv(tl,r,s)}function xu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function jh(r,s){throw s.$$typeof===S?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Bv(r){function s(K,q){if(r){var Q=K.deletions;Q===null?(K.deletions=[q],K.flags|=16):Q.push(q)}}function o(K,q){if(!r)return null;for(;q!==null;)s(K,q),q=q.sibling;return null}function u(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function d(K,q){return K=is(K,q),K.index=0,K.sibling=null,K}function g(K,q,Q){return K.index=Q,r?(Q=K.alternate,Q!==null?(Q=Q.index,Q<q?(K.flags|=67108866,q):Q):(K.flags|=67108866,q)):(K.flags|=1048576,q)}function E(K){return r&&K.alternate===null&&(K.flags|=67108866),K}function R(K,q,Q,le){return q===null||q.tag!==6?(q=km(Q,K.mode,le),q.return=K,q):(q=d(q,Q),q.return=K,q)}function U(K,q,Q,le){var He=Q.type;return He===z?se(K,q,Q.props.children,le,Q.key):q!==null&&(q.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===I&&so(He)===q.type)?(q=d(q,Q.props),xu(q,Q),q.return=K,q):(q=xh(Q.type,Q.key,Q.props,null,K.mode,le),xu(q,Q),q.return=K,q)}function X(K,q,Q,le){return q===null||q.tag!==4||q.stateNode.containerInfo!==Q.containerInfo||q.stateNode.implementation!==Q.implementation?(q=Um(Q,K.mode,le),q.return=K,q):(q=d(q,Q.children||[]),q.return=K,q)}function se(K,q,Q,le,He){return q===null||q.tag!==7?(q=eo(Q,K.mode,le,He),q.return=K,q):(q=d(q,Q),q.return=K,q)}function he(K,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=km(""+q,K.mode,Q),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return Q=xh(q.type,q.key,q.props,null,K.mode,Q),xu(Q,q),Q.return=K,Q;case D:return q=Um(q,K.mode,Q),q.return=K,q;case I:return q=so(q),he(K,q,Q)}if(Te(q)||L(q))return q=eo(q,K.mode,Q,null),q.return=K,q;if(typeof q.then=="function")return he(K,Lh(q),Q);if(q.$$typeof===G)return he(K,Oh(K,q),Q);jh(K,q)}return null}function J(K,q,Q,le){var He=q!==null?q.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return He!==null?null:R(K,q,""+Q,le);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:return Q.key===He?U(K,q,Q,le):null;case D:return Q.key===He?X(K,q,Q,le):null;case I:return Q=so(Q),J(K,q,Q,le)}if(Te(Q)||L(Q))return He!==null?null:se(K,q,Q,le,null);if(typeof Q.then=="function")return J(K,q,Lh(Q),le);if(Q.$$typeof===G)return J(K,q,Oh(K,Q),le);jh(K,Q)}return null}function te(K,q,Q,le,He){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return K=K.get(Q)||null,R(q,K,""+le,He);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case w:return K=K.get(le.key===null?Q:le.key)||null,U(q,K,le,He);case D:return K=K.get(le.key===null?Q:le.key)||null,X(q,K,le,He);case I:return le=so(le),te(K,q,Q,le,He)}if(Te(le)||L(le))return K=K.get(Q)||null,se(q,K,le,He,null);if(typeof le.then=="function")return te(K,q,Q,Lh(le),He);if(le.$$typeof===G)return te(K,q,Q,Oh(q,le),He);jh(q,le)}return null}function je(K,q,Q,le){for(var He=null,wt=null,ke=q,it=q=0,dt=null;ke!==null&&it<Q.length;it++){ke.index>it?(dt=ke,ke=null):dt=ke.sibling;var Ct=J(K,ke,Q[it],le);if(Ct===null){ke===null&&(ke=dt);break}r&&ke&&Ct.alternate===null&&s(K,ke),q=g(Ct,q,it),wt===null?He=Ct:wt.sibling=Ct,wt=Ct,ke=dt}if(it===Q.length)return o(K,ke),vt&&ss(K,it),He;if(ke===null){for(;it<Q.length;it++)ke=he(K,Q[it],le),ke!==null&&(q=g(ke,q,it),wt===null?He=ke:wt.sibling=ke,wt=ke);return vt&&ss(K,it),He}for(ke=u(ke);it<Q.length;it++)dt=te(ke,K,it,Q[it],le),dt!==null&&(r&&dt.alternate!==null&&ke.delete(dt.key===null?it:dt.key),q=g(dt,q,it),wt===null?He=dt:wt.sibling=dt,wt=dt);return r&&ke.forEach(function(ma){return s(K,ma)}),vt&&ss(K,it),He}function qe(K,q,Q,le){if(Q==null)throw Error(i(151));for(var He=null,wt=null,ke=q,it=q=0,dt=null,Ct=Q.next();ke!==null&&!Ct.done;it++,Ct=Q.next()){ke.index>it?(dt=ke,ke=null):dt=ke.sibling;var ma=J(K,ke,Ct.value,le);if(ma===null){ke===null&&(ke=dt);break}r&&ke&&ma.alternate===null&&s(K,ke),q=g(ma,q,it),wt===null?He=ma:wt.sibling=ma,wt=ma,ke=dt}if(Ct.done)return o(K,ke),vt&&ss(K,it),He;if(ke===null){for(;!Ct.done;it++,Ct=Q.next())Ct=he(K,Ct.value,le),Ct!==null&&(q=g(Ct,q,it),wt===null?He=Ct:wt.sibling=Ct,wt=Ct);return vt&&ss(K,it),He}for(ke=u(ke);!Ct.done;it++,Ct=Q.next())Ct=te(ke,K,it,Ct.value,le),Ct!==null&&(r&&Ct.alternate!==null&&ke.delete(Ct.key===null?it:Ct.key),q=g(Ct,q,it),wt===null?He=Ct:wt.sibling=Ct,wt=Ct);return r&&ke.forEach(function(VI){return s(K,VI)}),vt&&ss(K,it),He}function Ht(K,q,Q,le){if(typeof Q=="object"&&Q!==null&&Q.type===z&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:e:{for(var He=Q.key;q!==null;){if(q.key===He){if(He=Q.type,He===z){if(q.tag===7){o(K,q.sibling),le=d(q,Q.props.children),le.return=K,K=le;break e}}else if(q.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===I&&so(He)===q.type){o(K,q.sibling),le=d(q,Q.props),xu(le,Q),le.return=K,K=le;break e}o(K,q);break}else s(K,q);q=q.sibling}Q.type===z?(le=eo(Q.props.children,K.mode,le,Q.key),le.return=K,K=le):(le=xh(Q.type,Q.key,Q.props,null,K.mode,le),xu(le,Q),le.return=K,K=le)}return E(K);case D:e:{for(He=Q.key;q!==null;){if(q.key===He)if(q.tag===4&&q.stateNode.containerInfo===Q.containerInfo&&q.stateNode.implementation===Q.implementation){o(K,q.sibling),le=d(q,Q.children||[]),le.return=K,K=le;break e}else{o(K,q);break}else s(K,q);q=q.sibling}le=Um(Q,K.mode,le),le.return=K,K=le}return E(K);case I:return Q=so(Q),Ht(K,q,Q,le)}if(Te(Q))return je(K,q,Q,le);if(L(Q)){if(He=L(Q),typeof He!="function")throw Error(i(150));return Q=He.call(Q),qe(K,q,Q,le)}if(typeof Q.then=="function")return Ht(K,q,Lh(Q),le);if(Q.$$typeof===G)return Ht(K,q,Oh(K,Q),le);jh(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,q!==null&&q.tag===6?(o(K,q.sibling),le=d(q,Q),le.return=K,K=le):(o(K,q),le=km(Q,K.mode,le),le.return=K,K=le),E(K)):o(K,q)}return function(K,q,Q,le){try{Iu=0;var He=Ht(K,q,Q,le);return tl=null,He}catch(ke){if(ke===el||ke===Ph)throw ke;var wt=jr(29,ke,null,K.mode);return wt.lanes=le,wt.return=K,wt}finally{}}}var oo=Bv(!0),Hv=Bv(!1),Ws=!1;function Wm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Js(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Zs(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(xt&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Ih(r),wv(r,null,o),s}return Rh(r,u,s,o),Ih(r)}function Nu(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,k(r,o)}}function Zm(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?d=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?d=g=s:g=g.next=s}else d=g=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var ep=!1;function Du(){if(ep){var r=Zo;if(r!==null)throw r}}function Ou(r,s,o,u){ep=!1;var d=r.updateQueue;Ws=!1;var g=d.firstBaseUpdate,E=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var U=R,X=U.next;U.next=null,E===null?g=X:E.next=X,E=U;var se=r.alternate;se!==null&&(se=se.updateQueue,R=se.lastBaseUpdate,R!==E&&(R===null?se.firstBaseUpdate=X:R.next=X,se.lastBaseUpdate=U))}if(g!==null){var he=d.baseState;E=0,se=X=U=null,R=g;do{var J=R.lane&-536870913,te=J!==R.lane;if(te?(ft&J)===J:(u&J)===J){J!==0&&J===Jo&&(ep=!0),se!==null&&(se=se.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var je=r,qe=R;J=s;var Ht=o;switch(qe.tag){case 1:if(je=qe.payload,typeof je=="function"){he=je.call(Ht,he,J);break e}he=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=qe.payload,J=typeof je=="function"?je.call(Ht,he,J):je,J==null)break e;he=v({},he,J);break e;case 2:Ws=!0}}J=R.callback,J!==null&&(r.flags|=64,te&&(r.flags|=8192),te=d.callbacks,te===null?d.callbacks=[J]:te.push(J))}else te={lane:J,tag:R.tag,payload:R.payload,callback:R.callback,next:null},se===null?(X=se=te,U=he):se=se.next=te,E|=J;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;te=R,R=te.next,te.next=null,d.lastBaseUpdate=te,d.shared.pending=null}}while(!0);se===null&&(U=he),d.baseState=U,d.firstBaseUpdate=X,d.lastBaseUpdate=se,g===null&&(d.shared.lanes=0),ia|=E,r.lanes=E,r.memoizedState=he}}function Fv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function qv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Fv(o[r],s)}var nl=j(null),kh=j(0);function Gv(r,s){r=gs,_e(kh,r),_e(nl,s),gs=r|s.baseLanes}function tp(){_e(kh,gs),_e(nl,nl.current)}function np(){gs=kh.current,re(nl),re(kh)}var kr=j(null),ii=null;function ea(r){var s=r.alternate;_e(vn,vn.current&1),_e(kr,r),ii===null&&(s===null||nl.current!==null||s.memoizedState!==null)&&(ii=r)}function rp(r){_e(vn,vn.current),_e(kr,r),ii===null&&(ii=r)}function $v(r){r.tag===22?(_e(vn,vn.current),_e(kr,r),ii===null&&(ii=r)):ta()}function ta(){_e(vn,vn.current),_e(kr,kr.current)}function Ur(r){re(kr),ii===r&&(ii=null),re(vn)}var vn=j(0);function Uh(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||ug(o)||cg(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ls=0,tt=null,zt=null,wn=null,zh=!1,rl=!1,lo=!1,Bh=0,Mu=0,il=null,wR=0;function pn(){throw Error(i(321))}function ip(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Lr(r[o],s[o]))return!1;return!0}function sp(r,s,o,u,d,g){return ls=g,tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=r===null||r.memoizedState===null?xE:Ep,lo=!1,g=o(u,d),lo=!1,rl&&(g=Yv(s,o,u,d)),Kv(r),g}function Kv(r){H.H=Lu;var s=zt!==null&&zt.next!==null;if(ls=0,wn=zt=tt=null,zh=!1,Mu=0,il=null,s)throw Error(i(300));r===null||Cn||(r=r.dependencies,r!==null&&Dh(r)&&(Cn=!0))}function Yv(r,s,o,u){tt=r;var d=0;do{if(rl&&(il=null),Mu=0,rl=!1,25<=d)throw Error(i(301));if(d+=1,wn=zt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}H.H=NE,g=s(o,u)}while(rl);return g}function CR(){var r=H.H,s=r.useState()[0];return s=typeof s.then=="function"?Pu(s):s,r=r.useState()[0],(zt!==null?zt.memoizedState:null)!==r&&(tt.flags|=1024),s}function ap(){var r=Bh!==0;return Bh=0,r}function op(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function lp(r){if(zh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zh=!1}ls=0,wn=zt=tt=null,rl=!1,Mu=Bh=0,il=null}function dr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?tt.memoizedState=wn=r:wn=wn.next=r,wn}function En(){if(zt===null){var r=tt.alternate;r=r!==null?r.memoizedState:null}else r=zt.next;var s=wn===null?tt.memoizedState:wn.next;if(s!==null)wn=s,zt=r;else{if(r===null)throw tt.alternate===null?Error(i(467)):Error(i(310));zt=r,r={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},wn===null?tt.memoizedState=wn=r:wn=wn.next=r}return wn}function Hh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pu(r){var s=Mu;return Mu+=1,il===null&&(il=[]),r=kv(il,r,s),s=tt,(wn===null?s.memoizedState:wn.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?xE:Ep),r}function Fh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Pu(r);if(r.$$typeof===G)return Bn(r)}throw Error(i(438,String(r)))}function up(r){var s=null,o=tt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=tt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Hh(),tt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=P;return s.index++,o}function us(r,s){return typeof s=="function"?s(r):s}function qh(r){var s=En();return cp(s,zt,r)}function cp(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var d=r.baseQueue,g=u.pending;if(g!==null){if(d!==null){var E=d.next;d.next=g.next,g.next=E}s.baseQueue=d=g,u.pending=null}if(g=r.baseState,d===null)r.memoizedState=g;else{s=d.next;var R=E=null,U=null,X=s,se=!1;do{var he=X.lane&-536870913;if(he!==X.lane?(ft&he)===he:(ls&he)===he){var J=X.revertLane;if(J===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),he===Jo&&(se=!0);else if((ls&J)===J){X=X.next,J===Jo&&(se=!0);continue}else he={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(R=U=he,E=g):U=U.next=he,tt.lanes|=J,ia|=J;he=X.action,lo&&o(g,he),g=X.hasEagerState?X.eagerState:o(g,he)}else J={lane:he,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(R=U=J,E=g):U=U.next=J,tt.lanes|=he,ia|=he;X=X.next}while(X!==null&&X!==s);if(U===null?E=g:U.next=R,!Lr(g,r.memoizedState)&&(Cn=!0,se&&(o=Zo,o!==null)))throw o;r.memoizedState=g,r.baseState=E,r.baseQueue=U,u.lastRenderedState=g}return d===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function hp(r){var s=En(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,d=o.pending,g=s.memoizedState;if(d!==null){o.pending=null;var E=d=d.next;do g=r(g,E.action),E=E.next;while(E!==d);Lr(g,s.memoizedState)||(Cn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,u]}function Qv(r,s,o){var u=tt,d=En(),g=vt;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var E=!Lr((zt||d).memoizedState,o);if(E&&(d.memoizedState=o,Cn=!0),d=d.queue,mp(Jv.bind(null,u,d,r),[r]),d.getSnapshot!==s||E||wn!==null&&wn.memoizedState.tag&1){if(u.flags|=2048,sl(9,{destroy:void 0},Wv.bind(null,u,d,o,s),null),Gt===null)throw Error(i(349));g||(ls&127)!==0||Xv(u,s,o)}return o}function Xv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=tt.updateQueue,s===null?(s=Hh(),tt.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function Wv(r,s,o,u){s.value=o,s.getSnapshot=u,Zv(s)&&eE(r)}function Jv(r,s,o){return o(function(){Zv(s)&&eE(r)})}function Zv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Lr(r,o)}catch{return!0}}function eE(r){var s=Za(r,2);s!==null&&Cr(s,r,2)}function fp(r){var s=dr();if(typeof r=="function"){var o=r;if(r=o(),lo){De(!0);try{o()}finally{De(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:r},s}function tE(r,s,o,u){return r.baseState=o,cp(r,zt,typeof u=="function"?u:us)}function RR(r,s,o,u,d){if(Kh(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:d,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};H.T!==null?o(!0):g.isTransition=!1,u(g),o=s.pending,o===null?(g.next=s.pending=g,nE(s,g)):(g.next=o.next,s.pending=o.next=g)}}function nE(r,s){var o=s.action,u=s.payload,d=r.state;if(s.isTransition){var g=H.T,E={};H.T=E;try{var R=o(d,u),U=H.S;U!==null&&U(E,R),rE(r,s,R)}catch(X){dp(r,s,X)}finally{g!==null&&E.types!==null&&(g.types=E.types),H.T=g}}else try{g=o(d,u),rE(r,s,g)}catch(X){dp(r,s,X)}}function rE(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){iE(r,s,u)},function(u){return dp(r,s,u)}):iE(r,s,o)}function iE(r,s,o){s.status="fulfilled",s.value=o,sE(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,nE(r,o)))}function dp(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,sE(s),s=s.next;while(s!==u)}r.action=null}function sE(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function aE(r,s){return s}function oE(r,s){if(vt){var o=Gt.formState;if(o!==null){e:{var u=tt;if(vt){if(tn){t:{for(var d=tn,g=ri;d.nodeType!==8;){if(!g){d=null;break t}if(d=si(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){tn=si(d.nextSibling),u=d.data==="F!";break e}}Qs(u)}u=!1}u&&(s=o[0])}}return o=dr(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aE,lastRenderedState:s},o.queue=u,o=CE.bind(null,tt,u),u.dispatch=o,u=fp(!1),g=vp.bind(null,tt,!1,u.queue),u=dr(),d={state:s,dispatch:null,action:r,pending:null},u.queue=d,o=RR.bind(null,tt,d,g,o),d.dispatch=o,u.memoizedState=r,[s,o,!1]}function lE(r){var s=En();return uE(s,zt,r)}function uE(r,s,o){if(s=cp(r,s,aE)[0],r=qh(us)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Pu(s)}catch(E){throw E===el?Ph:E}else u=s;s=En();var d=s.queue,g=d.dispatch;return o!==s.memoizedState&&(tt.flags|=2048,sl(9,{destroy:void 0},IR.bind(null,d,o),null)),[u,g,r]}function IR(r,s){r.action=s}function cE(r){var s=En(),o=zt;if(o!==null)return uE(s,o,r);En(),s=s.memoizedState,o=En();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function sl(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=tt.updateQueue,s===null&&(s=Hh(),tt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function hE(){return En().memoizedState}function Gh(r,s,o,u){var d=dr();tt.flags|=r,d.memoizedState=sl(1|s,{destroy:void 0},o,u===void 0?null:u)}function $h(r,s,o,u){var d=En();u=u===void 0?null:u;var g=d.memoizedState.inst;zt!==null&&u!==null&&ip(u,zt.memoizedState.deps)?d.memoizedState=sl(s,g,o,u):(tt.flags|=r,d.memoizedState=sl(1|s,g,o,u))}function fE(r,s){Gh(8390656,8,r,s)}function mp(r,s){$h(2048,8,r,s)}function xR(r){tt.flags|=4;var s=tt.updateQueue;if(s===null)s=Hh(),tt.updateQueue=s,s.events=[r];else{var o=s.events;o===null?s.events=[r]:o.push(r)}}function dE(r){var s=En().memoizedState;return xR({ref:s,nextImpl:r}),function(){if((xt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function mE(r,s){return $h(4,2,r,s)}function pE(r,s){return $h(4,4,r,s)}function gE(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function yE(r,s,o){o=o!=null?o.concat([r]):null,$h(4,4,gE.bind(null,s,r),o)}function pp(){}function _E(r,s){var o=En();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&ip(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function vE(r,s){var o=En();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&ip(s,u[1]))return u[0];if(u=r(),lo){De(!0);try{r()}finally{De(!1)}}return o.memoizedState=[u,s],u}function gp(r,s,o){return o===void 0||(ls&1073741824)!==0&&(ft&261930)===0?r.memoizedState=s:(r.memoizedState=o,r=ET(),tt.lanes|=r,ia|=r,o)}function EE(r,s,o,u){return Lr(o,s)?o:nl.current!==null?(r=gp(r,o,u),Lr(r,s)||(Cn=!0),r):(ls&42)===0||(ls&1073741824)!==0&&(ft&261930)===0?(Cn=!0,r.memoizedState=o):(r=ET(),tt.lanes|=r,ia|=r,s)}function TE(r,s,o,u,d){var g=ae.p;ae.p=g!==0&&8>g?g:8;var E=H.T,R={};H.T=R,vp(r,!1,s,o);try{var U=d(),X=H.S;if(X!==null&&X(R,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var se=AR(U,u);Vu(r,s,se,Hr(r))}else Vu(r,s,u,Hr(r))}catch(he){Vu(r,s,{then:function(){},status:"rejected",reason:he},Hr())}finally{ae.p=g,E!==null&&R.types!==null&&(E.types=R.types),H.T=E}}function NR(){}function yp(r,s,o,u){if(r.tag!==5)throw Error(i(476));var d=bE(r).queue;TE(r,d,s,ye,o===null?NR:function(){return SE(r),o(u)})}function bE(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:ye},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function SE(r){var s=bE(r);s.next===null&&(s=r.alternate.memoizedState),Vu(r,s.next.queue,{},Hr())}function _p(){return Bn(Ju)}function AE(){return En().memoizedState}function wE(){return En().memoizedState}function DR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Hr();r=Js(o);var u=Zs(s,r,o);u!==null&&(Cr(u,s,o),Nu(u,s,o)),s={cache:Km()},r.payload=s;return}s=s.return}}function OR(r,s,o){var u=Hr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Kh(r)?RE(s,o):(o=Lm(r,s,o,u),o!==null&&(Cr(o,r,u),IE(o,s,u)))}function CE(r,s,o){var u=Hr();Vu(r,s,o,u)}function Vu(r,s,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Kh(r))RE(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,R=g(E,o);if(d.hasEagerState=!0,d.eagerState=R,Lr(R,E))return Rh(r,s,d,0),Gt===null&&Ch(),!1}catch{}finally{}if(o=Lm(r,s,d,u),o!==null)return Cr(o,r,u),IE(o,s,u),!0}return!1}function vp(r,s,o,u){if(u={lane:2,revertLane:Wp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Kh(r)){if(s)throw Error(i(479))}else s=Lm(r,o,u,2),s!==null&&Cr(s,r,2)}function Kh(r){var s=r.alternate;return r===tt||s!==null&&s===tt}function RE(r,s){rl=zh=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function IE(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,k(r,o)}}var Lu={readContext:Bn,use:Fh,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn,useHostTransitionStatus:pn,useFormState:pn,useActionState:pn,useOptimistic:pn,useMemoCache:pn,useCacheRefresh:pn};Lu.useEffectEvent=pn;var xE={readContext:Bn,use:Fh,useCallback:function(r,s){return dr().memoizedState=[r,s===void 0?null:s],r},useContext:Bn,useEffect:fE,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Gh(4194308,4,gE.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Gh(4194308,4,r,s)},useInsertionEffect:function(r,s){Gh(4,2,r,s)},useMemo:function(r,s){var o=dr();s=s===void 0?null:s;var u=r();if(lo){De(!0);try{r()}finally{De(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=dr();if(o!==void 0){var d=o(s);if(lo){De(!0);try{o(s)}finally{De(!1)}}}else d=s;return u.memoizedState=u.baseState=d,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:d},u.queue=r,r=r.dispatch=OR.bind(null,tt,r),[u.memoizedState,r]},useRef:function(r){var s=dr();return r={current:r},s.memoizedState=r},useState:function(r){r=fp(r);var s=r.queue,o=CE.bind(null,tt,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:pp,useDeferredValue:function(r,s){var o=dr();return gp(o,r,s)},useTransition:function(){var r=fp(!1);return r=TE.bind(null,tt,r.queue,!0,!1),dr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=tt,d=dr();if(vt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Gt===null)throw Error(i(349));(ft&127)!==0||Xv(u,s,o)}d.memoizedState=o;var g={value:o,getSnapshot:s};return d.queue=g,fE(Jv.bind(null,u,g,r),[r]),u.flags|=2048,sl(9,{destroy:void 0},Wv.bind(null,u,g,o,s),null),o},useId:function(){var r=dr(),s=Gt.identifierPrefix;if(vt){var o=Bi,u=zi;o=(u&~(1<<32-Pe(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Bh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=wR++,s="_"+s+"r_"+o.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:_p,useFormState:oE,useActionState:oE,useOptimistic:function(r){var s=dr();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=vp.bind(null,tt,!0,o),o.dispatch=s,[r,s]},useMemoCache:up,useCacheRefresh:function(){return dr().memoizedState=DR.bind(null,tt)},useEffectEvent:function(r){var s=dr(),o={impl:r};return s.memoizedState=o,function(){if((xt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Ep={readContext:Bn,use:Fh,useCallback:_E,useContext:Bn,useEffect:mp,useImperativeHandle:yE,useInsertionEffect:mE,useLayoutEffect:pE,useMemo:vE,useReducer:qh,useRef:hE,useState:function(){return qh(us)},useDebugValue:pp,useDeferredValue:function(r,s){var o=En();return EE(o,zt.memoizedState,r,s)},useTransition:function(){var r=qh(us)[0],s=En().memoizedState;return[typeof r=="boolean"?r:Pu(r),s]},useSyncExternalStore:Qv,useId:AE,useHostTransitionStatus:_p,useFormState:lE,useActionState:lE,useOptimistic:function(r,s){var o=En();return tE(o,zt,r,s)},useMemoCache:up,useCacheRefresh:wE};Ep.useEffectEvent=dE;var NE={readContext:Bn,use:Fh,useCallback:_E,useContext:Bn,useEffect:mp,useImperativeHandle:yE,useInsertionEffect:mE,useLayoutEffect:pE,useMemo:vE,useReducer:hp,useRef:hE,useState:function(){return hp(us)},useDebugValue:pp,useDeferredValue:function(r,s){var o=En();return zt===null?gp(o,r,s):EE(o,zt.memoizedState,r,s)},useTransition:function(){var r=hp(us)[0],s=En().memoizedState;return[typeof r=="boolean"?r:Pu(r),s]},useSyncExternalStore:Qv,useId:AE,useHostTransitionStatus:_p,useFormState:cE,useActionState:cE,useOptimistic:function(r,s){var o=En();return zt!==null?tE(o,zt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:up,useCacheRefresh:wE};NE.useEffectEvent=dE;function Tp(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:v({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var bp={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Hr(),d=Js(u);d.payload=s,o!=null&&(d.callback=o),s=Zs(r,d,u),s!==null&&(Cr(s,r,u),Nu(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Hr(),d=Js(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=Zs(r,d,u),s!==null&&(Cr(s,r,u),Nu(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Hr(),u=Js(o);u.tag=2,s!=null&&(u.callback=s),s=Zs(r,u,o),s!==null&&(Cr(s,r,o),Nu(s,r,o))}};function DE(r,s,o,u,d,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,E):s.prototype&&s.prototype.isPureReactComponent?!bu(o,u)||!bu(d,g):!0}function OE(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&bp.enqueueReplaceState(s,s.state,null)}function uo(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=v({},o));for(var d in r)o[d]===void 0&&(o[d]=r[d])}return o}function ME(r){wh(r)}function PE(r){console.error(r)}function VE(r){wh(r)}function Yh(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function LE(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Sp(r,s,o){return o=Js(o),o.tag=3,o.payload={element:null},o.callback=function(){Yh(r,s)},o}function jE(r){return r=Js(r),r.tag=3,r}function kE(r,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var g=u.value;r.payload=function(){return d(g)},r.callback=function(){LE(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){LE(s,o,u),typeof d!="function"&&(sa===null?sa=new Set([this]):sa.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function MR(r,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Wo(s,o,d,!0),o=kr.current,o!==null){switch(o.tag){case 31:case 13:return ii===null?of():o.alternate===null&&gn===0&&(gn=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===Vh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Yp(r,u,d)),!1;case 22:return o.flags|=65536,u===Vh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Yp(r,u,d)),!1}throw Error(i(435,o.tag))}return Yp(r,u,d),of(),!1}if(vt)return s=kr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Hm&&(r=Error(i(422),{cause:u}),wu(ei(r,o)))):(u!==Hm&&(s=Error(i(423),{cause:u}),wu(ei(s,o))),r=r.current.alternate,r.flags|=65536,d&=-d,r.lanes|=d,u=ei(u,o),d=Sp(r.stateNode,u,d),Zm(r,d),gn!==4&&(gn=2)),!1;var g=Error(i(520),{cause:u});if(g=ei(g,o),qu===null?qu=[g]:qu.push(g),gn!==4&&(gn=2),s===null)return!0;u=ei(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=d&-d,o.lanes|=r,r=Sp(o.stateNode,u,r),Zm(o,r),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(sa===null||!sa.has(g))))return o.flags|=65536,d&=-d,o.lanes|=d,d=jE(d),kE(d,r,o,u),Zm(o,d),!1}o=o.return}while(o!==null);return!1}var Ap=Error(i(461)),Cn=!1;function Hn(r,s,o,u){s.child=r===null?Hv(s,null,o,u):oo(s,r.child,o,u)}function UE(r,s,o,u,d){o=o.render;var g=s.ref;if("ref"in u){var E={};for(var R in u)R!=="ref"&&(E[R]=u[R])}else E=u;return ro(s),u=sp(r,s,o,E,g,d),R=ap(),r!==null&&!Cn?(op(r,s,d),cs(r,s,d)):(vt&&R&&zm(s),s.flags|=1,Hn(r,s,u,d),s.child)}function zE(r,s,o,u,d){if(r===null){var g=o.type;return typeof g=="function"&&!jm(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,BE(r,s,g,u,d)):(r=xh(o.type,null,u,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!Op(r,d)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:bu,o(E,u)&&r.ref===s.ref)return cs(r,s,d)}return s.flags|=1,r=is(g,u),r.ref=s.ref,r.return=s,s.child=r}function BE(r,s,o,u,d){if(r!==null){var g=r.memoizedProps;if(bu(g,u)&&r.ref===s.ref)if(Cn=!1,s.pendingProps=u=g,Op(r,d))(r.flags&131072)!==0&&(Cn=!0);else return s.lanes=r.lanes,cs(r,s,d)}return wp(r,s,o,u,d)}function HE(r,s,o,u){var d=u.children,g=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,r!==null){for(u=s.child=r.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~g}else u=0,s.child=null;return FE(r,s,g,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Mh(s,g!==null?g.cachePool:null),g!==null?Gv(s,g):tp(),$v(s);else return u=s.lanes=536870912,FE(r,s,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(Mh(s,g.cachePool),Gv(s,g),ta(),s.memoizedState=null):(r!==null&&Mh(s,null),tp(),ta());return Hn(r,s,d,o),s.child}function ju(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function FE(r,s,o,u,d){var g=Qm();return g=g===null?null:{parent:An._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},r!==null&&Mh(s,null),tp(),$v(s),r!==null&&Wo(r,s,u,!0),s.childLanes=d,null}function Qh(r,s){return s=Wh({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function qE(r,s,o){return oo(s,r.child,null,o),r=Qh(s,s.pendingProps),r.flags|=2,Ur(s),s.memoizedState=null,r}function PR(r,s,o){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(vt){if(u.mode==="hidden")return r=Qh(s,u),s.lanes=536870912,ju(null,r);if(rp(s),(r=tn)?(r=nb(r,ri),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ks!==null?{id:zi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},o=Rv(r),o.return=s,s.child=o,zn=s,tn=null)):r=null,r===null)throw Qs(s);return s.lanes=536870912,null}return Qh(s,u)}var g=r.memoizedState;if(g!==null){var E=g.dehydrated;if(rp(s),d)if(s.flags&256)s.flags&=-257,s=qE(r,s,o);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Cn||Wo(r,s,o,!1),d=(o&r.childLanes)!==0,Cn||d){if(u=Gt,u!==null&&(E=$(u,o),E!==0&&E!==g.retryLane))throw g.retryLane=E,Za(r,E),Cr(u,r,E),Ap;of(),s=qE(r,s,o)}else r=g.treeContext,tn=si(E.nextSibling),zn=s,vt=!0,Ys=null,ri=!1,r!==null&&Nv(s,r),s=Qh(s,u),s.flags|=4096;return s}return r=is(r.child,{mode:u.mode,children:u.children}),r.ref=s.ref,s.child=r,r.return=s,r}function Xh(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function wp(r,s,o,u,d){return ro(s),o=sp(r,s,o,u,void 0,d),u=ap(),r!==null&&!Cn?(op(r,s,d),cs(r,s,d)):(vt&&u&&zm(s),s.flags|=1,Hn(r,s,o,d),s.child)}function GE(r,s,o,u,d,g){return ro(s),s.updateQueue=null,o=Yv(s,u,o,d),Kv(r),u=ap(),r!==null&&!Cn?(op(r,s,g),cs(r,s,g)):(vt&&u&&zm(s),s.flags|=1,Hn(r,s,o,g),s.child)}function $E(r,s,o,u,d){if(ro(s),s.stateNode===null){var g=Ko,E=o.contextType;typeof E=="object"&&E!==null&&(g=Bn(E)),g=new o(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=bp,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},Wm(s),E=o.contextType,g.context=typeof E=="object"&&E!==null?Bn(E):Ko,g.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Tp(s,o,E,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&bp.enqueueReplaceState(g,g.state,null),Ou(s,u,g,d),Du(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){g=s.stateNode;var R=s.memoizedProps,U=uo(o,R);g.props=U;var X=g.context,se=o.contextType;E=Ko,typeof se=="object"&&se!==null&&(E=Bn(se));var he=o.getDerivedStateFromProps;se=typeof he=="function"||typeof g.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,se||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(R||X!==E)&&OE(s,g,u,E),Ws=!1;var J=s.memoizedState;g.state=J,Ou(s,u,g,d),Du(),X=s.memoizedState,R||J!==X||Ws?(typeof he=="function"&&(Tp(s,o,he,u),X=s.memoizedState),(U=Ws||DE(s,o,U,u,J,X,E))?(se||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=X),g.props=u,g.state=X,g.context=E,u=U):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,Jm(r,s),E=s.memoizedProps,se=uo(o,E),g.props=se,he=s.pendingProps,J=g.context,X=o.contextType,U=Ko,typeof X=="object"&&X!==null&&(U=Bn(X)),R=o.getDerivedStateFromProps,(X=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==he||J!==U)&&OE(s,g,u,U),Ws=!1,J=s.memoizedState,g.state=J,Ou(s,u,g,d),Du();var te=s.memoizedState;E!==he||J!==te||Ws||r!==null&&r.dependencies!==null&&Dh(r.dependencies)?(typeof R=="function"&&(Tp(s,o,R,u),te=s.memoizedState),(se=Ws||DE(s,o,se,u,J,te,U)||r!==null&&r.dependencies!==null&&Dh(r.dependencies))?(X||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,te,U),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,te,U)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=te),g.props=u,g.state=te,g.context=U,u=se):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),u=!1)}return g=u,Xh(r,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&u?(s.child=oo(s,r.child,null,d),s.child=oo(s,null,o,d)):Hn(r,s,o,d),s.memoizedState=g.state,r=s.child):r=cs(r,s,d),r}function KE(r,s,o,u){return to(),s.flags|=256,Hn(r,s,o,u),s.child}var Cp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rp(r){return{baseLanes:r,cachePool:Lv()}}function Ip(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Br),r}function YE(r,s,o){var u=s.pendingProps,d=!1,g=(s.flags&128)!==0,E;if((E=g)||(E=r!==null&&r.memoizedState===null?!1:(vn.current&2)!==0),E&&(d=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,r===null){if(vt){if(d?ea(s):ta(),(r=tn)?(r=nb(r,ri),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ks!==null?{id:zi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},o=Rv(r),o.return=s,s.child=o,zn=s,tn=null)):r=null,r===null)throw Qs(s);return cg(r)?s.lanes=32:s.lanes=536870912,null}var R=u.children;return u=u.fallback,d?(ta(),d=s.mode,R=Wh({mode:"hidden",children:R},d),u=eo(u,d,o,null),R.return=s,u.return=s,R.sibling=u,s.child=R,u=s.child,u.memoizedState=Rp(o),u.childLanes=Ip(r,E,o),s.memoizedState=Cp,ju(null,u)):(ea(s),xp(s,R))}var U=r.memoizedState;if(U!==null&&(R=U.dehydrated,R!==null)){if(g)s.flags&256?(ea(s),s.flags&=-257,s=Np(r,s,o)):s.memoizedState!==null?(ta(),s.child=r.child,s.flags|=128,s=null):(ta(),R=u.fallback,d=s.mode,u=Wh({mode:"visible",children:u.children},d),R=eo(R,d,o,null),R.flags|=2,u.return=s,R.return=s,u.sibling=R,s.child=u,oo(s,r.child,null,o),u=s.child,u.memoizedState=Rp(o),u.childLanes=Ip(r,E,o),s.memoizedState=Cp,s=ju(null,u));else if(ea(s),cg(R)){if(E=R.nextSibling&&R.nextSibling.dataset,E)var X=E.dgst;E=X,u=Error(i(419)),u.stack="",u.digest=E,wu({value:u,source:null,stack:null}),s=Np(r,s,o)}else if(Cn||Wo(r,s,o,!1),E=(o&r.childLanes)!==0,Cn||E){if(E=Gt,E!==null&&(u=$(E,o),u!==0&&u!==U.retryLane))throw U.retryLane=u,Za(r,u),Cr(E,r,u),Ap;ug(R)||of(),s=Np(r,s,o)}else ug(R)?(s.flags|=192,s.child=r.child,s=null):(r=U.treeContext,tn=si(R.nextSibling),zn=s,vt=!0,Ys=null,ri=!1,r!==null&&Nv(s,r),s=xp(s,u.children),s.flags|=4096);return s}return d?(ta(),R=u.fallback,d=s.mode,U=r.child,X=U.sibling,u=is(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,X!==null?R=is(X,R):(R=eo(R,d,o,null),R.flags|=2),R.return=s,u.return=s,u.sibling=R,s.child=u,ju(null,u),u=s.child,R=r.child.memoizedState,R===null?R=Rp(o):(d=R.cachePool,d!==null?(U=An._currentValue,d=d.parent!==U?{parent:U,pool:U}:d):d=Lv(),R={baseLanes:R.baseLanes|o,cachePool:d}),u.memoizedState=R,u.childLanes=Ip(r,E,o),s.memoizedState=Cp,ju(r.child,u)):(ea(s),o=r.child,r=o.sibling,o=is(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(E=s.deletions,E===null?(s.deletions=[r],s.flags|=16):E.push(r)),s.child=o,s.memoizedState=null,o)}function xp(r,s){return s=Wh({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Wh(r,s){return r=jr(22,r,null,s),r.lanes=0,r}function Np(r,s,o){return oo(s,r.child,null,o),r=xp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function QE(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Gm(r.return,s,o)}function Dp(r,s,o,u,d,g){var E=r.memoizedState;E===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:g}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=u,E.tail=o,E.tailMode=d,E.treeForkCount=g)}function XE(r,s,o){var u=s.pendingProps,d=u.revealOrder,g=u.tail;u=u.children;var E=vn.current,R=(E&2)!==0;if(R?(E=E&1|2,s.flags|=128):E&=1,_e(vn,E),Hn(r,s,u,o),u=vt?Au:0,!R&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&QE(r,o,s);else if(r.tag===19)QE(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)r=o.alternate,r!==null&&Uh(r)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),Dp(s,!1,d,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&Uh(r)===null){s.child=d;break}r=d.sibling,d.sibling=o,o=d,d=r}Dp(s,!0,o,null,g,u);break;case"together":Dp(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function cs(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),ia|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Wo(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=is(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=is(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function Op(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Dh(r)))}function VR(r,s,o){switch(s.tag){case 3:ze(s,s.stateNode.containerInfo),Xs(s,An,r.memoizedState.cache),to();break;case 27:case 5:st(s);break;case 4:ze(s,s.stateNode.containerInfo);break;case 10:Xs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,rp(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ea(s),s.flags|=128,null):(o&s.child.childLanes)!==0?YE(r,s,o):(ea(s),r=cs(r,s,o),r!==null?r.sibling:null);ea(s);break;case 19:var d=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Wo(r,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return XE(r,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),_e(vn,vn.current),u)break;return null;case 22:return s.lanes=0,HE(r,s,o,s.pendingProps);case 24:Xs(s,An,r.memoizedState.cache)}return cs(r,s,o)}function WE(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Cn=!0;else{if(!Op(r,o)&&(s.flags&128)===0)return Cn=!1,VR(r,s,o);Cn=(r.flags&131072)!==0}else Cn=!1,vt&&(s.flags&1048576)!==0&&xv(s,Au,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(r=so(s.elementType),s.type=r,typeof r=="function")jm(r)?(u=uo(r,u),s.tag=1,s=$E(null,s,r,u,o)):(s.tag=0,s=wp(null,s,r,u,o));else{if(r!=null){var d=r.$$typeof;if(d===ee){s.tag=11,s=UE(null,s,r,u,o);break e}else if(d===A){s.tag=14,s=zE(null,s,r,u,o);break e}}throw s=ge(r)||r,Error(i(306,s,""))}}return s;case 0:return wp(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=uo(u,s.pendingProps),$E(r,s,u,d,o);case 3:e:{if(ze(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var g=s.memoizedState;d=g.element,Jm(r,s),Ou(s,u,null,o);var E=s.memoizedState;if(u=E.cache,Xs(s,An,u),u!==g.cache&&$m(s,[An],o,!0),Du(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=KE(r,s,u,o);break e}else if(u!==d){d=ei(Error(i(424)),s),wu(d),s=KE(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(tn=si(r.firstChild),zn=s,vt=!0,Ys=null,ri=!0,o=Hv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(to(),u===d){s=cs(r,s,o);break e}Hn(r,s,u,o)}s=s.child}return s;case 26:return Xh(r,s),r===null?(o=lb(s.type,null,s.pendingProps,null))?s.memoizedState=o:vt||(o=s.type,r=s.pendingProps,u=mf(Se.current).createElement(o),u[Ae]=s,u[Ie]=r,Fn(u,o,r),Xt(u),s.stateNode=u):s.memoizedState=lb(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return st(s),r===null&&vt&&(u=s.stateNode=sb(s.type,s.pendingProps,Se.current),zn=s,ri=!0,d=tn,ua(s.type)?(hg=d,tn=si(u.firstChild)):tn=d),Hn(r,s,s.pendingProps.children,o),Xh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&vt&&((d=u=tn)&&(u=hI(u,s.type,s.pendingProps,ri),u!==null?(s.stateNode=u,zn=s,tn=si(u.firstChild),ri=!1,d=!0):d=!1),d||Qs(s)),st(s),d=s.type,g=s.pendingProps,E=r!==null?r.memoizedProps:null,u=g.children,ag(d,g)?u=null:E!==null&&ag(d,E)&&(s.flags|=32),s.memoizedState!==null&&(d=sp(r,s,CR,null,null,o),Ju._currentValue=d),Xh(r,s),Hn(r,s,u,o),s.child;case 6:return r===null&&vt&&((r=o=tn)&&(o=fI(o,s.pendingProps,ri),o!==null?(s.stateNode=o,zn=s,tn=null,r=!0):r=!1),r||Qs(s)),null;case 13:return YE(r,s,o);case 4:return ze(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=oo(s,null,u,o):Hn(r,s,u,o),s.child;case 11:return UE(r,s,s.type,s.pendingProps,o);case 7:return Hn(r,s,s.pendingProps,o),s.child;case 8:return Hn(r,s,s.pendingProps.children,o),s.child;case 12:return Hn(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Xs(s,s.type,u.value),Hn(r,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,ro(s),d=Bn(d),u=u(d),s.flags|=1,Hn(r,s,u,o),s.child;case 14:return zE(r,s,s.type,s.pendingProps,o);case 15:return BE(r,s,s.type,s.pendingProps,o);case 19:return XE(r,s,o);case 31:return PR(r,s,o);case 22:return HE(r,s,o,s.pendingProps);case 24:return ro(s),u=Bn(An),r===null?(d=Qm(),d===null&&(d=Gt,g=Km(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=o),d=g),s.memoizedState={parent:u,cache:d},Wm(s),Xs(s,An,d)):((r.lanes&o)!==0&&(Jm(r,s),Ou(s,null,null,o),Du()),d=r.memoizedState,g=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Xs(s,An,u)):(u=g.cache,Xs(s,An,u),u!==d.cache&&$m(s,[An],o,!0))),Hn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function hs(r){r.flags|=4}function Mp(r,s,o,u,d){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(d&335544128)===d)if(r.stateNode.complete)r.flags|=8192;else if(AT())r.flags|=8192;else throw ao=Vh,Xm}else r.flags&=-16777217}function JE(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!db(s))if(AT())r.flags|=8192;else throw ao=Vh,Xm}function Jh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Zi():536870912,r.lanes|=s,ul|=s)}function ku(r,s){if(!vt)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function nn(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var d=r.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function LR(r,s,o){var u=s.pendingProps;switch(Bm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(s),null;case 1:return nn(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),os(An),Be(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Xo(s)?hs(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Fm())),nn(s),null;case 26:var d=s.type,g=s.memoizedState;return r===null?(hs(s),g!==null?(nn(s),JE(s,g)):(nn(s),Mp(s,d,null,u,o))):g?g!==r.memoizedState?(hs(s),nn(s),JE(s,g)):(nn(s),s.flags&=-16777217):(r=r.memoizedProps,r!==u&&hs(s),nn(s),Mp(s,d,r,u,o)),null;case 27:if(St(s),o=Se.current,d=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&hs(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return nn(s),null}r=we.current,Xo(s)?Dv(s):(r=sb(d,u,o),s.stateNode=r,hs(s))}return nn(s),null;case 5:if(St(s),d=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&hs(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return nn(s),null}if(g=we.current,Xo(s))Dv(s);else{var E=mf(Se.current);switch(g){case 1:g=E.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:g=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":g=E.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":g=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":g=E.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?E.createElement(d,{is:u.is}):E.createElement(d)}}g[Ae]=s,g[Ie]=u;e:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)g.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break e;for(;E.sibling===null;){if(E.return===null||E.return===s)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=g;e:switch(Fn(g,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&hs(s)}}return nn(s),Mp(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,o),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&hs(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=Se.current,Xo(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,d=zn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}r[Ae]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||YT(r.nodeValue,o)),r||Qs(s,!0)}else r=mf(r).createTextNode(u),r[Ae]=s,s.stateNode=r}return nn(s),null;case 31:if(o=s.memoizedState,r===null||r.memoizedState!==null){if(u=Xo(s),o!==null){if(r===null){if(!u)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Ae]=s}else to(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;nn(s),r=!1}else o=Fm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return s.flags&256?(Ur(s),s):(Ur(s),null);if((s.flags&128)!==0)throw Error(i(558))}return nn(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(d=Xo(s),u!==null&&u.dehydrated!==null){if(r===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Ae]=s}else to(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;nn(s),d=!1}else d=Fm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Ur(s),s):(Ur(s),null)}return Ur(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==d&&(u.flags|=2048)),o!==r&&o&&(s.child.flags|=8192),Jh(s,s.updateQueue),nn(s),null);case 4:return Be(),r===null&&tg(s.stateNode.containerInfo),nn(s),null;case 10:return os(s.type),nn(s),null;case 19:if(re(vn),u=s.memoizedState,u===null)return nn(s),null;if(d=(s.flags&128)!==0,g=u.rendering,g===null)if(d)ku(u,!1);else{if(gn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=Uh(r),g!==null){for(s.flags|=128,ku(u,!1),r=g.updateQueue,s.updateQueue=r,Jh(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Cv(o,r),o=o.sibling;return _e(vn,vn.current&1|2),vt&&ss(s,u.treeForkCount),s.child}r=r.sibling}u.tail!==null&&qt()>rf&&(s.flags|=128,d=!0,ku(u,!1),s.lanes=4194304)}else{if(!d)if(r=Uh(g),r!==null){if(s.flags|=128,d=!0,r=r.updateQueue,s.updateQueue=r,Jh(s,r),ku(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!vt)return nn(s),null}else 2*qt()-u.renderingStartTime>rf&&o!==536870912&&(s.flags|=128,d=!0,ku(u,!1),s.lanes=4194304);u.isBackwards?(g.sibling=s.child,s.child=g):(r=u.last,r!==null?r.sibling=g:s.child=g,u.last=g)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=qt(),r.sibling=null,o=vn.current,_e(vn,d?o&1|2:o&1),vt&&ss(s,u.treeForkCount),r):(nn(s),null);case 22:case 23:return Ur(s),np(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(nn(s),s.subtreeFlags&6&&(s.flags|=8192)):nn(s),o=s.updateQueue,o!==null&&Jh(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&re(io),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),os(An),nn(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function jR(r,s){switch(Bm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return os(An),Be(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return St(s),null;case 31:if(s.memoizedState!==null){if(Ur(s),s.alternate===null)throw Error(i(340));to()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Ur(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));to()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return re(vn),null;case 4:return Be(),null;case 10:return os(s.type),null;case 22:case 23:return Ur(s),np(),r!==null&&re(io),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return os(An),null;case 25:return null;default:return null}}function ZE(r,s){switch(Bm(s),s.tag){case 3:os(An),Be();break;case 26:case 27:case 5:St(s);break;case 4:Be();break;case 31:s.memoizedState!==null&&Ur(s);break;case 13:Ur(s);break;case 19:re(vn);break;case 10:os(s.type);break;case 22:case 23:Ur(s),np(),r!==null&&re(io);break;case 24:os(An)}}function Uu(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&r)===r){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==d)}}catch(R){Lt(s,s.return,R)}}function na(r,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var g=d.next;u=g;do{if((u.tag&r)===r){var E=u.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,d=s;var U=o,X=R;try{X()}catch(se){Lt(d,U,se)}}}u=u.next}while(u!==g)}}catch(se){Lt(s,s.return,se)}}function eT(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{qv(s,o)}catch(u){Lt(r,r.return,u)}}}function tT(r,s,o){o.props=uo(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){Lt(r,s,u)}}function zu(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(d){Lt(r,s,d)}}function Hi(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){Lt(r,s,d)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){Lt(r,s,d)}else o.current=null}function nT(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){Lt(r,r.return,d)}}function Pp(r,s,o){try{var u=r.stateNode;sI(u,r.type,o,s),u[Ie]=s}catch(d){Lt(r,r.return,d)}}function rT(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ua(r.type)||r.tag===4}function Vp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||rT(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ua(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Lp(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=mi));else if(u!==4&&(u===27&&ua(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Lp(r,s,o),r=r.sibling;r!==null;)Lp(r,s,o),r=r.sibling}function Zh(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&ua(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Zh(r,s,o),r=r.sibling;r!==null;)Zh(r,s,o),r=r.sibling}function iT(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Fn(s,u,o),s[Ae]=r,s[Ie]=o}catch(g){Lt(r,r.return,g)}}var fs=!1,Rn=!1,jp=!1,sT=typeof WeakSet=="function"?WeakSet:Set,jn=null;function kR(r,s){if(r=r.containerInfo,ig=Tf,r=yv(r),Nm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,R=-1,U=-1,X=0,se=0,he=r,J=null;t:for(;;){for(var te;he!==o||d!==0&&he.nodeType!==3||(R=E+d),he!==g||u!==0&&he.nodeType!==3||(U=E+u),he.nodeType===3&&(E+=he.nodeValue.length),(te=he.firstChild)!==null;)J=he,he=te;for(;;){if(he===r)break t;if(J===o&&++X===d&&(R=E),J===g&&++se===u&&(U=E),(te=he.nextSibling)!==null)break;he=J,J=he.parentNode}he=te}o=R===-1||U===-1?null:{start:R,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(sg={focusedElem:r,selectionRange:o},Tf=!1,jn=s;jn!==null;)if(s=jn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,jn=r;else for(;jn!==null;){switch(s=jn,g=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)d=r[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=s,d=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var je=uo(o.type,d);r=u.getSnapshotBeforeUpdate(je,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(qe){Lt(o,o.return,qe)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)lg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":lg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,jn=r;break}jn=s.return}}function aT(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ms(r,o),u&4&&Uu(5,o);break;case 1:if(ms(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(E){Lt(o,o.return,E)}else{var d=uo(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(d,s,r.__reactInternalSnapshotBeforeUpdate)}catch(E){Lt(o,o.return,E)}}u&64&&eT(o),u&512&&zu(o,o.return);break;case 3:if(ms(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{qv(r,s)}catch(E){Lt(o,o.return,E)}}break;case 27:s===null&&u&4&&iT(o);case 26:case 5:ms(r,o),s===null&&u&4&&nT(o),u&512&&zu(o,o.return);break;case 12:ms(r,o);break;case 31:ms(r,o),u&4&&uT(r,o);break;case 13:ms(r,o),u&4&&cT(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=KR.bind(null,o),dI(r,o))));break;case 22:if(u=o.memoizedState!==null||fs,!u){s=s!==null&&s.memoizedState!==null||Rn,d=fs;var g=Rn;fs=u,(Rn=s)&&!g?ps(r,o,(o.subtreeFlags&8772)!==0):ms(r,o),fs=d,Rn=g}break;case 30:break;default:ms(r,o)}}function oT(r){var s=r.alternate;s!==null&&(r.alternate=null,oT(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&en(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var on=null,br=!1;function ds(r,s,o){for(o=o.child;o!==null;)lT(r,s,o),o=o.sibling}function lT(r,s,o){if(de&&typeof de.onCommitFiberUnmount=="function")try{de.onCommitFiberUnmount(Ce,o)}catch{}switch(o.tag){case 26:Rn||Hi(o,s),ds(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Rn||Hi(o,s);var u=on,d=br;ua(o.type)&&(on=o.stateNode,br=!1),ds(r,s,o),Qu(o.stateNode),on=u,br=d;break;case 5:Rn||Hi(o,s);case 6:if(u=on,d=br,on=null,ds(r,s,o),on=u,br=d,on!==null)if(br)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(o.stateNode)}catch(g){Lt(o,s,g)}else try{on.removeChild(o.stateNode)}catch(g){Lt(o,s,g)}break;case 18:on!==null&&(br?(r=on,eb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),yl(r)):eb(on,o.stateNode));break;case 4:u=on,d=br,on=o.stateNode.containerInfo,br=!0,ds(r,s,o),on=u,br=d;break;case 0:case 11:case 14:case 15:na(2,o,s),Rn||na(4,o,s),ds(r,s,o);break;case 1:Rn||(Hi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&tT(o,s,u)),ds(r,s,o);break;case 21:ds(r,s,o);break;case 22:Rn=(u=Rn)||o.memoizedState!==null,ds(r,s,o),Rn=u;break;default:ds(r,s,o)}}function uT(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{yl(r)}catch(o){Lt(s,s.return,o)}}}function cT(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{yl(r)}catch(o){Lt(s,s.return,o)}}function UR(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new sT),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new sT),s;default:throw Error(i(435,r.tag))}}function ef(r,s){var o=UR(r);s.forEach(function(u){if(!o.has(u)){o.add(u);var d=YR.bind(null,r,u);u.then(d,d)}})}function Sr(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],g=r,E=s,R=E;e:for(;R!==null;){switch(R.tag){case 27:if(ua(R.type)){on=R.stateNode,br=!1;break e}break;case 5:on=R.stateNode,br=!1;break e;case 3:case 4:on=R.stateNode.containerInfo,br=!0;break e}R=R.return}if(on===null)throw Error(i(160));lT(g,E,d),on=null,br=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)hT(s,r),s=s.sibling}var Ei=null;function hT(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Sr(s,r),Ar(r),u&4&&(na(3,r,r.return),Uu(3,r),na(5,r,r.return));break;case 1:Sr(s,r),Ar(r),u&512&&(Rn||o===null||Hi(o,o.return)),u&64&&fs&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=Ei;if(Sr(s,r),Ar(r),u&512&&(Rn||o===null||Hi(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":g=d.getElementsByTagName("title")[0],(!g||g[jt]||g[Ae]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(u),d.head.insertBefore(g,d.querySelector("head > title"))),Fn(g,u,o),g[Ae]=r,Xt(g),u=g;break e;case"link":var E=hb("link","href",d).get(u+(o.href||""));if(E){for(var R=0;R<E.length;R++)if(g=E[R],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(R,1);break t}}g=d.createElement(u),Fn(g,u,o),d.head.appendChild(g);break;case"meta":if(E=hb("meta","content",d).get(u+(o.content||""))){for(R=0;R<E.length;R++)if(g=E[R],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(R,1);break t}}g=d.createElement(u),Fn(g,u,o),d.head.appendChild(g);break;default:throw Error(i(468,u))}g[Ae]=r,Xt(g),u=g}r.stateNode=u}else fb(d,r.type,r.stateNode);else r.stateNode=cb(d,u,r.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?fb(d,r.type,r.stateNode):cb(d,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Pp(r,r.memoizedProps,o.memoizedProps)}break;case 27:Sr(s,r),Ar(r),u&512&&(Rn||o===null||Hi(o,o.return)),o!==null&&u&4&&Pp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Sr(s,r),Ar(r),u&512&&(Rn||o===null||Hi(o,o.return)),r.flags&32){d=r.stateNode;try{Tr(d,"")}catch(je){Lt(r,r.return,je)}}u&4&&r.stateNode!=null&&(d=r.memoizedProps,Pp(r,d,o!==null?o.memoizedProps:d)),u&1024&&(jp=!0);break;case 6:if(Sr(s,r),Ar(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(je){Lt(r,r.return,je)}}break;case 3:if(yf=null,d=Ei,Ei=pf(s.containerInfo),Sr(s,r),Ei=d,Ar(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{yl(s.containerInfo)}catch(je){Lt(r,r.return,je)}jp&&(jp=!1,fT(r));break;case 4:u=Ei,Ei=pf(r.stateNode.containerInfo),Sr(s,r),Ar(r),Ei=u;break;case 12:Sr(s,r),Ar(r);break;case 31:Sr(s,r),Ar(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,ef(r,u)));break;case 13:Sr(s,r),Ar(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(nf=qt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,ef(r,u)));break;case 22:d=r.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,X=fs,se=Rn;if(fs=X||d,Rn=se||U,Sr(s,r),Rn=se,fs=X,Ar(r),u&8192)e:for(s=r.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||U||fs||Rn||co(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){U=o=s;try{if(g=U.stateNode,d)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=U.stateNode;var he=U.memoizedProps.style,J=he!=null&&he.hasOwnProperty("display")?he.display:null;R.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(je){Lt(U,U.return,je)}}}else if(s.tag===6){if(o===null){U=s;try{U.stateNode.nodeValue=d?"":U.memoizedProps}catch(je){Lt(U,U.return,je)}}}else if(s.tag===18){if(o===null){U=s;try{var te=U.stateNode;d?tb(te,!0):tb(U.stateNode,!1)}catch(je){Lt(U,U.return,je)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,ef(r,o))));break;case 19:Sr(s,r),Ar(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,ef(r,u)));break;case 30:break;case 21:break;default:Sr(s,r),Ar(r)}}function Ar(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(rT(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,g=Vp(r);Zh(r,g,d);break;case 5:var E=o.stateNode;o.flags&32&&(Tr(E,""),o.flags&=-33);var R=Vp(r);Zh(r,R,E);break;case 3:case 4:var U=o.stateNode.containerInfo,X=Vp(r);Lp(r,X,U);break;default:throw Error(i(161))}}catch(se){Lt(r,r.return,se)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function fT(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;fT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function ms(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)aT(r,s.alternate,s),s=s.sibling}function co(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:na(4,s,s.return),co(s);break;case 1:Hi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&tT(s,s.return,o),co(s);break;case 27:Qu(s.stateNode);case 26:case 5:Hi(s,s.return),co(s);break;case 22:s.memoizedState===null&&co(s);break;case 30:co(s);break;default:co(s)}r=r.sibling}}function ps(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=r,g=s,E=g.flags;switch(g.tag){case 0:case 11:case 15:ps(d,g,o),Uu(4,g);break;case 1:if(ps(d,g,o),u=g,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(X){Lt(u,u.return,X)}if(u=g,d=u.updateQueue,d!==null){var R=u.stateNode;try{var U=d.shared.hiddenCallbacks;if(U!==null)for(d.shared.hiddenCallbacks=null,d=0;d<U.length;d++)Fv(U[d],R)}catch(X){Lt(u,u.return,X)}}o&&E&64&&eT(g),zu(g,g.return);break;case 27:iT(g);case 26:case 5:ps(d,g,o),o&&u===null&&E&4&&nT(g),zu(g,g.return);break;case 12:ps(d,g,o);break;case 31:ps(d,g,o),o&&E&4&&uT(d,g);break;case 13:ps(d,g,o),o&&E&4&&cT(d,g);break;case 22:g.memoizedState===null&&ps(d,g,o),zu(g,g.return);break;case 30:break;default:ps(d,g,o)}s=s.sibling}}function kp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Cu(o))}function Up(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Cu(r))}function Ti(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)dT(r,s,o,u),s=s.sibling}function dT(r,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Ti(r,s,o,u),d&2048&&Uu(9,s);break;case 1:Ti(r,s,o,u);break;case 3:Ti(r,s,o,u),d&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Cu(r)));break;case 12:if(d&2048){Ti(r,s,o,u),r=s.stateNode;try{var g=s.memoizedProps,E=g.id,R=g.onPostCommit;typeof R=="function"&&R(E,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(U){Lt(s,s.return,U)}}else Ti(r,s,o,u);break;case 31:Ti(r,s,o,u);break;case 13:Ti(r,s,o,u);break;case 23:break;case 22:g=s.stateNode,E=s.alternate,s.memoizedState!==null?g._visibility&2?Ti(r,s,o,u):Bu(r,s):g._visibility&2?Ti(r,s,o,u):(g._visibility|=2,al(r,s,o,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&kp(E,s);break;case 24:Ti(r,s,o,u),d&2048&&Up(s.alternate,s);break;default:Ti(r,s,o,u)}}function al(r,s,o,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=r,E=s,R=o,U=u,X=E.flags;switch(E.tag){case 0:case 11:case 15:al(g,E,R,U,d),Uu(8,E);break;case 23:break;case 22:var se=E.stateNode;E.memoizedState!==null?se._visibility&2?al(g,E,R,U,d):Bu(g,E):(se._visibility|=2,al(g,E,R,U,d)),d&&X&2048&&kp(E.alternate,E);break;case 24:al(g,E,R,U,d),d&&X&2048&&Up(E.alternate,E);break;default:al(g,E,R,U,d)}s=s.sibling}}function Bu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,d=u.flags;switch(u.tag){case 22:Bu(o,u),d&2048&&kp(u.alternate,u);break;case 24:Bu(o,u),d&2048&&Up(u.alternate,u);break;default:Bu(o,u)}s=s.sibling}}var Hu=8192;function ol(r,s,o){if(r.subtreeFlags&Hu)for(r=r.child;r!==null;)mT(r,s,o),r=r.sibling}function mT(r,s,o){switch(r.tag){case 26:ol(r,s,o),r.flags&Hu&&r.memoizedState!==null&&wI(o,Ei,r.memoizedState,r.memoizedProps);break;case 5:ol(r,s,o);break;case 3:case 4:var u=Ei;Ei=pf(r.stateNode.containerInfo),ol(r,s,o),Ei=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Hu,Hu=16777216,ol(r,s,o),Hu=u):ol(r,s,o));break;default:ol(r,s,o)}}function pT(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Fu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];jn=u,yT(u,r)}pT(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)gT(r),r=r.sibling}function gT(r){switch(r.tag){case 0:case 11:case 15:Fu(r),r.flags&2048&&na(9,r,r.return);break;case 3:Fu(r);break;case 12:Fu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,tf(r)):Fu(r);break;default:Fu(r)}}function tf(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];jn=u,yT(u,r)}pT(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:na(8,s,s.return),tf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,tf(s));break;default:tf(s)}r=r.sibling}}function yT(r,s){for(;jn!==null;){var o=jn;switch(o.tag){case 0:case 11:case 15:na(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Cu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,jn=u;else e:for(o=r;jn!==null;){u=jn;var d=u.sibling,g=u.return;if(oT(u),u===o){jn=null;break e}if(d!==null){d.return=g,jn=d;break e}jn=g}}}var zR={getCacheForType:function(r){var s=Bn(An),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o},cacheSignal:function(){return Bn(An).controller.signal}},BR=typeof WeakMap=="function"?WeakMap:Map,xt=0,Gt=null,ct=null,ft=0,Vt=0,zr=null,ra=!1,ll=!1,zp=!1,gs=0,gn=0,ia=0,ho=0,Bp=0,Br=0,ul=0,qu=null,wr=null,Hp=!1,nf=0,_T=0,rf=1/0,sf=null,sa=null,Mn=0,aa=null,cl=null,ys=0,Fp=0,qp=null,vT=null,Gu=0,Gp=null;function Hr(){return(xt&2)!==0&&ft!==0?ft&-ft:H.T!==null?Wp():be()}function ET(){if(Br===0)if((ft&536870912)===0||vt){var r=mn;mn<<=1,(mn&3932160)===0&&(mn=262144),Br=r}else Br=536870912;return r=kr.current,r!==null&&(r.flags|=32),Br}function Cr(r,s,o){(r===Gt&&(Vt===2||Vt===9)||r.cancelPendingCommit!==null)&&(hl(r,0),oa(r,ft,Br,!1)),Ni(r,o),((xt&2)===0||r!==Gt)&&(r===Gt&&((xt&2)===0&&(ho|=o),gn===4&&oa(r,ft,Br,!1)),Fi(r))}function TT(r,s,o){if((xt&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&r.expiredLanes)===0||Mr(r,s),d=u?qR(r,s):Kp(r,s,!0),g=u;do{if(d===0){ll&&!u&&oa(r,s,0,!1);break}else{if(o=r.current.alternate,g&&!HR(o)){d=Kp(r,s,!1),g=!1;continue}if(d===2){if(g=s,r.errorRecoveryDisabledLanes&g)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var R=r;d=qu;var U=R.current.memoizedState.isDehydrated;if(U&&(hl(R,E).flags|=256),E=Kp(R,E,!1),E!==2){if(zp&&!U){R.errorRecoveryDisabledLanes|=g,ho|=g,d=4;break e}g=wr,wr=d,g!==null&&(wr===null?wr=g:wr.push.apply(wr,g))}d=E}if(g=!1,d!==2)continue}}if(d===1){hl(r,0),oa(r,s,0,!0);break}e:{switch(u=r,g=d,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:oa(u,s,Br,!ra);break e;case 2:wr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=nf+300-qt(),10<d)){if(oa(u,s,Br,!ra),Or(u,0,!0)!==0)break e;ys=s,u.timeoutHandle=JT(bT.bind(null,u,o,wr,sf,Hp,s,Br,ho,ul,ra,g,"Throttled",-0,0),d);break e}bT(u,o,wr,sf,Hp,s,Br,ho,ul,ra,g,null,-0,0)}}break}while(!0);Fi(r)}function bT(r,s,o,u,d,g,E,R,U,X,se,he,J,te){if(r.timeoutHandle=-1,he=s.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mi},mT(s,g,he);var je=(g&62914560)===g?nf-qt():(g&4194048)===g?_T-qt():0;if(je=CI(he,je),je!==null){ys=g,r.cancelPendingCommit=je(NT.bind(null,r,s,g,o,u,d,E,R,U,se,he,null,J,te)),oa(r,g,E,!X);return}}NT(r,s,g,o,u,d,E,R,U)}function HR(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],g=d.getSnapshot;d=d.value;try{if(!Lr(g(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function oa(r,s,o,u){s&=~Bp,s&=~ho,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var d=s;0<d;){var g=31-Pe(d),E=1<<g;u[g]=-1,d&=~E}o!==0&&es(r,o,s)}function af(){return(xt&6)===0?($u(0),!1):!0}function $p(){if(ct!==null){if(Vt===0)var r=ct.return;else r=ct,as=no=null,lp(r),tl=null,Iu=0,r=ct;for(;r!==null;)ZE(r.alternate,r),r=r.return;ct=null}}function hl(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,lI(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),ys=0,$p(),Gt=r,ct=o=is(r.current,null),ft=s,Vt=0,zr=null,ra=!1,ll=Mr(r,s),zp=!1,ul=Br=Bp=ho=ia=gn=0,wr=qu=null,Hp=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var d=31-Pe(u),g=1<<d;s|=r[d],u&=~g}return gs=s,Ch(),o}function ST(r,s){tt=null,H.H=Lu,s===el||s===Ph?(s=Uv(),Vt=3):s===Xm?(s=Uv(),Vt=4):Vt=s===Ap?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,zr=s,ct===null&&(gn=1,Yh(r,ei(s,r.current)))}function AT(){var r=kr.current;return r===null?!0:(ft&4194048)===ft?ii===null:(ft&62914560)===ft||(ft&536870912)!==0?r===ii:!1}function wT(){var r=H.H;return H.H=Lu,r===null?Lu:r}function CT(){var r=H.A;return H.A=zR,r}function of(){gn=4,ra||(ft&4194048)!==ft&&kr.current!==null||(ll=!0),(ia&134217727)===0&&(ho&134217727)===0||Gt===null||oa(Gt,ft,Br,!1)}function Kp(r,s,o){var u=xt;xt|=2;var d=wT(),g=CT();(Gt!==r||ft!==s)&&(sf=null,hl(r,s)),s=!1;var E=gn;e:do try{if(Vt!==0&&ct!==null){var R=ct,U=zr;switch(Vt){case 8:$p(),E=6;break e;case 3:case 2:case 9:case 6:kr.current===null&&(s=!0);var X=Vt;if(Vt=0,zr=null,fl(r,R,U,X),o&&ll){E=0;break e}break;default:X=Vt,Vt=0,zr=null,fl(r,R,U,X)}}FR(),E=gn;break}catch(se){ST(r,se)}while(!0);return s&&r.shellSuspendCounter++,as=no=null,xt=u,H.H=d,H.A=g,ct===null&&(Gt=null,ft=0,Ch()),E}function FR(){for(;ct!==null;)RT(ct)}function qR(r,s){var o=xt;xt|=2;var u=wT(),d=CT();Gt!==r||ft!==s?(sf=null,rf=qt()+500,hl(r,s)):ll=Mr(r,s);e:do try{if(Vt!==0&&ct!==null){s=ct;var g=zr;t:switch(Vt){case 1:Vt=0,zr=null,fl(r,s,g,1);break;case 2:case 9:if(jv(g)){Vt=0,zr=null,IT(s);break}s=function(){Vt!==2&&Vt!==9||Gt!==r||(Vt=7),Fi(r)},g.then(s,s);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:jv(g)?(Vt=0,zr=null,IT(s)):(Vt=0,zr=null,fl(r,s,g,7));break;case 5:var E=null;switch(ct.tag){case 26:E=ct.memoizedState;case 5:case 27:var R=ct;if(E?db(E):R.stateNode.complete){Vt=0,zr=null;var U=R.sibling;if(U!==null)ct=U;else{var X=R.return;X!==null?(ct=X,lf(X)):ct=null}break t}}Vt=0,zr=null,fl(r,s,g,5);break;case 6:Vt=0,zr=null,fl(r,s,g,6);break;case 8:$p(),gn=6;break e;default:throw Error(i(462))}}GR();break}catch(se){ST(r,se)}while(!0);return as=no=null,H.H=u,H.A=d,xt=o,ct!==null?0:(Gt=null,ft=0,Ch(),gn)}function GR(){for(;ct!==null&&!ur();)RT(ct)}function RT(r){var s=WE(r.alternate,r,gs);r.memoizedProps=r.pendingProps,s===null?lf(r):ct=s}function IT(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=GE(o,s,s.pendingProps,s.type,void 0,ft);break;case 11:s=GE(o,s,s.pendingProps,s.type.render,s.ref,ft);break;case 5:lp(s);default:ZE(o,s),s=ct=Cv(s,gs),s=WE(o,s,gs)}r.memoizedProps=r.pendingProps,s===null?lf(r):ct=s}function fl(r,s,o,u){as=no=null,lp(s),tl=null,Iu=0;var d=s.return;try{if(MR(r,d,s,o,ft)){gn=1,Yh(r,ei(o,r.current)),ct=null;return}}catch(g){if(d!==null)throw ct=d,g;gn=1,Yh(r,ei(o,r.current)),ct=null;return}s.flags&32768?(vt||u===1?r=!0:ll||(ft&536870912)!==0?r=!1:(ra=r=!0,(u===2||u===9||u===3||u===6)&&(u=kr.current,u!==null&&u.tag===13&&(u.flags|=16384))),xT(s,r)):lf(s)}function lf(r){var s=r;do{if((s.flags&32768)!==0){xT(s,ra);return}r=s.return;var o=LR(s.alternate,s,gs);if(o!==null){ct=o;return}if(s=s.sibling,s!==null){ct=s;return}ct=s=r}while(s!==null);gn===0&&(gn=5)}function xT(r,s){do{var o=jR(r.alternate,r);if(o!==null){o.flags&=32767,ct=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){ct=r;return}ct=r=o}while(r!==null);gn=6,ct=null}function NT(r,s,o,u,d,g,E,R,U){r.cancelPendingCommit=null;do uf();while(Mn!==0);if((xt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=Vm,cu(r,o,g,E,R,U),r===Gt&&(ct=Gt=null,ft=0),cl=s,aa=r,ys=o,Fp=g,qp=d,vT=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,QR(Zt,function(){return VT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,d=ae.p,ae.p=2,E=xt,xt|=4;try{kR(r,s,o)}finally{xt=E,ae.p=d,H.T=u}}Mn=1,DT(),OT(),MT()}}function DT(){if(Mn===1){Mn=0;var r=aa,s=cl,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var u=ae.p;ae.p=2;var d=xt;xt|=4;try{hT(s,r);var g=sg,E=yv(r.containerInfo),R=g.focusedElem,U=g.selectionRange;if(E!==R&&R&&R.ownerDocument&&gv(R.ownerDocument.documentElement,R)){if(U!==null&&Nm(R)){var X=U.start,se=U.end;if(se===void 0&&(se=X),"selectionStart"in R)R.selectionStart=X,R.selectionEnd=Math.min(se,R.value.length);else{var he=R.ownerDocument||document,J=he&&he.defaultView||window;if(J.getSelection){var te=J.getSelection(),je=R.textContent.length,qe=Math.min(U.start,je),Ht=U.end===void 0?qe:Math.min(U.end,je);!te.extend&&qe>Ht&&(E=Ht,Ht=qe,qe=E);var K=pv(R,qe),q=pv(R,Ht);if(K&&q&&(te.rangeCount!==1||te.anchorNode!==K.node||te.anchorOffset!==K.offset||te.focusNode!==q.node||te.focusOffset!==q.offset)){var Q=he.createRange();Q.setStart(K.node,K.offset),te.removeAllRanges(),qe>Ht?(te.addRange(Q),te.extend(q.node,q.offset)):(Q.setEnd(q.node,q.offset),te.addRange(Q))}}}}for(he=[],te=R;te=te.parentNode;)te.nodeType===1&&he.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<he.length;R++){var le=he[R];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Tf=!!ig,sg=ig=null}finally{xt=d,ae.p=u,H.T=o}}r.current=s,Mn=2}}function OT(){if(Mn===2){Mn=0;var r=aa,s=cl,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var u=ae.p;ae.p=2;var d=xt;xt|=4;try{aT(r,s.alternate,s)}finally{xt=d,ae.p=u,H.T=o}}Mn=3}}function MT(){if(Mn===4||Mn===3){Mn=0,di();var r=aa,s=cl,o=ys,u=vT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Mn=5:(Mn=0,cl=aa=null,PT(r,r.pendingLanes));var d=r.pendingLanes;if(d===0&&(sa=null),me(o),s=s.stateNode,de&&typeof de.onCommitFiberRoot=="function")try{de.onCommitFiberRoot(Ce,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=H.T,d=ae.p,ae.p=2,H.T=null;try{for(var g=r.onRecoverableError,E=0;E<u.length;E++){var R=u[E];g(R.value,{componentStack:R.stack})}}finally{H.T=s,ae.p=d}}(ys&3)!==0&&uf(),Fi(r),d=r.pendingLanes,(o&261930)!==0&&(d&42)!==0?r===Gp?Gu++:(Gu=0,Gp=r):Gu=0,$u(0)}}function PT(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Cu(s)))}function uf(){return DT(),OT(),MT(),VT()}function VT(){if(Mn!==5)return!1;var r=aa,s=Fp;Fp=0;var o=me(ys),u=H.T,d=ae.p;try{ae.p=32>o?32:o,H.T=null,o=qp,qp=null;var g=aa,E=ys;if(Mn=0,cl=aa=null,ys=0,(xt&6)!==0)throw Error(i(331));var R=xt;if(xt|=4,gT(g.current),dT(g,g.current,E,o),xt=R,$u(0,!1),de&&typeof de.onPostCommitFiberRoot=="function")try{de.onPostCommitFiberRoot(Ce,g)}catch{}return!0}finally{ae.p=d,H.T=u,PT(r,s)}}function LT(r,s,o){s=ei(o,s),s=Sp(r.stateNode,s,2),r=Zs(r,s,2),r!==null&&(Ni(r,2),Fi(r))}function Lt(r,s,o){if(r.tag===3)LT(r,r,o);else for(;s!==null;){if(s.tag===3){LT(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(sa===null||!sa.has(u))){r=ei(o,r),o=jE(2),u=Zs(s,o,2),u!==null&&(kE(o,u,s,r),Ni(u,2),Fi(u));break}}s=s.return}}function Yp(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new BR;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(zp=!0,d.add(o),r=$R.bind(null,r,s,o),s.then(r,r))}function $R(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Gt===r&&(ft&o)===o&&(gn===4||gn===3&&(ft&62914560)===ft&&300>qt()-nf?(xt&2)===0&&hl(r,0):Bp|=o,ul===ft&&(ul=0)),Fi(r)}function jT(r,s){s===0&&(s=Zi()),r=Za(r,s),r!==null&&(Ni(r,s),Fi(r))}function KR(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),jT(r,o)}function YR(r,s){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,d=r.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),jT(r,o)}function QR(r,s){return Jt(r,s)}var cf=null,dl=null,Qp=!1,hf=!1,Xp=!1,la=0;function Fi(r){r!==dl&&r.next===null&&(dl===null?cf=dl=r:dl=dl.next=r),hf=!0,Qp||(Qp=!0,WR())}function $u(r,s){if(!Xp&&hf){Xp=!0;do for(var o=!1,u=cf;u!==null;){if(r!==0){var d=u.pendingLanes;if(d===0)var g=0;else{var E=u.suspendedLanes,R=u.pingedLanes;g=(1<<31-Pe(42|r)+1)-1,g&=d&~(E&~R),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,BT(u,g))}else g=ft,g=Or(u,u===Gt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Mr(u,g)||(o=!0,BT(u,g));u=u.next}while(o);Xp=!1}}function XR(){kT()}function kT(){hf=Qp=!1;var r=0;la!==0&&oI()&&(r=la);for(var s=qt(),o=null,u=cf;u!==null;){var d=u.next,g=UT(u,s);g===0?(u.next=null,o===null?cf=d:o.next=d,d===null&&(dl=o)):(o=u,(r!==0||(g&3)!==0)&&(hf=!0)),u=d}Mn!==0&&Mn!==5||$u(r),la!==0&&(la=0)}function UT(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var E=31-Pe(g),R=1<<E,U=d[E];U===-1?((R&o)===0||(R&u)!==0)&&(d[E]=Po(R,s)):U<=s&&(r.expiredLanes|=R),g&=~R}if(s=Gt,o=ft,o=Or(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Vt===2||Vt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Pt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Mr(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Pt(u),me(o)){case 2:case 8:o=Wn;break;case 32:o=Zt;break;case 268435456:o=xi;break;default:o=Zt}return u=zT.bind(null,r),o=Jt(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Pt(u),r.callbackPriority=2,r.callbackNode=null,2}function zT(r,s){if(Mn!==0&&Mn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(uf()&&r.callbackNode!==o)return null;var u=ft;return u=Or(r,r===Gt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(TT(r,u,s),UT(r,qt()),r.callbackNode!=null&&r.callbackNode===o?zT.bind(null,r):null)}function BT(r,s){if(uf())return null;TT(r,s,!0)}function WR(){uI(function(){(xt&6)!==0?Jt(Yr,XR):kT()})}function Wp(){if(la===0){var r=Jo;r===0&&(r=Tt,Tt<<=1,(Tt&261888)===0&&(Tt=256)),la=r}return la}function HT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:jo(""+r)}function FT(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function JR(r,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var g=HT((d[Ie]||null).action),E=u.submitter;E&&(s=(s=E[Ie]||null)?HT(s.formAction):E.getAttribute("formAction"),s!==null&&(g=s,E=null));var R=new Li("action","action",null,u,d);r.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(la!==0){var U=E?FT(d,E):new FormData(d);yp(o,{pending:!0,data:U,method:d.method,action:g},null,U)}}else typeof g=="function"&&(R.preventDefault(),U=E?FT(d,E):new FormData(d),yp(o,{pending:!0,data:U,method:d.method,action:g},g,U))},currentTarget:d}]})}}for(var Jp=0;Jp<Pm.length;Jp++){var Zp=Pm[Jp],ZR=Zp.toLowerCase(),eI=Zp[0].toUpperCase()+Zp.slice(1);vi(ZR,"on"+eI)}vi(Ev,"onAnimationEnd"),vi(Tv,"onAnimationIteration"),vi(bv,"onAnimationStart"),vi("dblclick","onDoubleClick"),vi("focusin","onFocus"),vi("focusout","onBlur"),vi(gR,"onTransitionRun"),vi(yR,"onTransitionStart"),vi(_R,"onTransitionCancel"),vi(Sv,"onTransitionEnd"),Zn("onMouseEnter",["mouseout","mouseover"]),Zn("onMouseLeave",["mouseout","mouseover"]),Zn("onPointerEnter",["pointerout","pointerover"]),Zn("onPointerLeave",["pointerout","pointerover"]),vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vr("onBeforeInput",["compositionend","keypress","textInput","paste"]),vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function qT(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],d=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var E=u.length-1;0<=E;E--){var R=u[E],U=R.instance,X=R.currentTarget;if(R=R.listener,U!==g&&d.isPropagationStopped())break e;g=R,d.currentTarget=X;try{g(d)}catch(se){wh(se)}d.currentTarget=null,g=U}else for(E=0;E<u.length;E++){if(R=u[E],U=R.instance,X=R.currentTarget,R=R.listener,U!==g&&d.isPropagationStopped())break e;g=R,d.currentTarget=X;try{g(d)}catch(se){wh(se)}d.currentTarget=null,g=U}}}}function ht(r,s){var o=s[Ge];o===void 0&&(o=s[Ge]=new Set);var u=r+"__bubble";o.has(u)||(GT(s,r,2,!1),o.add(u))}function eg(r,s,o){var u=0;s&&(u|=4),GT(o,r,u,s)}var ff="_reactListening"+Math.random().toString(36).slice(2);function tg(r){if(!r[ff]){r[ff]=!0,_r.forEach(function(o){o!=="selectionchange"&&(tI.has(o)||eg(o,!1,r),eg(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[ff]||(s[ff]=!0,eg("selectionchange",!1,s))}}function GT(r,s,o,u){switch(Eb(s)){case 2:var d=xI;break;case 8:d=NI;break;default:d=gg}o=d.bind(null,s,o,r),d=void 0,!Ga||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?r.addEventListener(s,o,{capture:!0,passive:d}):r.addEventListener(s,o,!0):d!==void 0?r.addEventListener(s,o,{passive:d}):r.addEventListener(s,o,!1)}function ng(r,s,o,u,d){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var R=u.stateNode.containerInfo;if(R===d)break;if(E===4)for(E=u.return;E!==null;){var U=E.tag;if((U===3||U===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;R!==null;){if(E=Yt(R),E===null)return;if(U=E.tag,U===5||U===6||U===26||U===27){u=g=E;continue e}R=R.parentNode}}u=u.return}Fs(function(){var X=g,se=Xr(o),he=[];e:{var J=Av.get(r);if(J!==void 0){var te=Li,je=r;switch(r){case"keypress":if(Ka(o)===0)break e;case"keydown":case"keyup":te=bh;break;case"focusin":je="focus",te=Qa;break;case"focusout":je="blur",te=Qa;break;case"beforeblur":case"afterblur":te=Qa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=dh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=_;break;case Ev:case Tv:case bv:te=ph;break;case Sv:te=N;break;case"scroll":case"scrollend":te=yu;break;case"wheel":te=Z;break;case"copy":case"cut":case"paste":te=gh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=rs;break;case"toggle":case"beforetoggle":te=et}var qe=(s&4)!==0,Ht=!qe&&(r==="scroll"||r==="scrollend"),K=qe?J!==null?J+"Capture":null:J;qe=[];for(var q=X,Q;q!==null;){var le=q;if(Q=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Q===null||K===null||(le=pi(q,K),le!=null&&qe.push(Yu(q,le,Q))),Ht)break;q=q.return}0<qe.length&&(J=new te(J,je,null,o,se),he.push({event:J,listeners:qe}))}}if((s&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",te=r==="mouseout"||r==="pointerout",J&&o!==mu&&(je=o.relatedTarget||o.fromElement)&&(Yt(je)||je[Ve]))break e;if((te||J)&&(J=se.window===se?se:(J=se.ownerDocument)?J.defaultView||J.parentWindow:window,te?(je=o.relatedTarget||o.toElement,te=X,je=je?Yt(je):null,je!==null&&(Ht=l(je),qe=je.tag,je!==Ht||qe!==5&&qe!==27&&qe!==6)&&(je=null)):(te=null,je=X),te!==je)){if(qe=_u,le="onMouseLeave",K="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(qe=rs,le="onPointerLeave",K="onPointerEnter",q="pointer"),Ht=te==null?J:Qt(te),Q=je==null?J:Qt(je),J=new qe(le,q+"leave",te,o,se),J.target=Ht,J.relatedTarget=Q,le=null,Yt(se)===X&&(qe=new qe(K,q+"enter",je,o,se),qe.target=Q,qe.relatedTarget=Ht,le=qe),Ht=le,te&&je)t:{for(qe=nI,K=te,q=je,Q=0,le=K;le;le=qe(le))Q++;le=0;for(var He=q;He;He=qe(He))le++;for(;0<Q-le;)K=qe(K),Q--;for(;0<le-Q;)q=qe(q),le--;for(;Q--;){if(K===q||q!==null&&K===q.alternate){qe=K;break t}K=qe(K),q=qe(q)}qe=null}else qe=null;te!==null&&$T(he,J,te,qe,!1),je!==null&&Ht!==null&&$T(he,Ht,je,qe,!0)}}e:{if(J=X?Qt(X):window,te=J.nodeName&&J.nodeName.toLowerCase(),te==="select"||te==="input"&&J.type==="file")var wt=uv;else if(ov(J))if(cv)wt=dR;else{wt=hR;var ke=cR}else te=J.nodeName,!te||te.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?X&&Lo(X.elementType)&&(wt=uv):wt=fR;if(wt&&(wt=wt(r,X))){lv(he,wt,o,se);break e}ke&&ke(r,J,X),r==="focusout"&&X&&J.type==="number"&&X.memoizedProps.value!=null&&hu(J,"number",J.value)}switch(ke=X?Qt(X):window,r){case"focusin":(ov(ke)||ke.contentEditable==="true")&&(qo=ke,Dm=X,Su=null);break;case"focusout":Su=Dm=qo=null;break;case"mousedown":Om=!0;break;case"contextmenu":case"mouseup":case"dragend":Om=!1,_v(he,o,se);break;case"selectionchange":if(pR)break;case"keydown":case"keyup":_v(he,o,se)}var it;if(It)e:{switch(r){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Fo?Xa(r,o)&&(dt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(dt="onCompositionStart");dt&&(Ui&&o.locale!=="ko"&&(Fo||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Fo&&(it=gu()):(Vi=se,pu="value"in Vi?Vi.value:Vi.textContent,Fo=!0)),ke=df(X,dt),0<ke.length&&(dt=new ki(dt,r,null,o,se),he.push({event:dt,listeners:ke}),it?dt.data=it:(it=Ho(o),it!==null&&(dt.data=it)))),(it=Jr?aR(r,o):oR(r,o))&&(dt=df(X,"onBeforeInput"),0<dt.length&&(ke=new ki("onBeforeInput","beforeinput",null,o,se),he.push({event:ke,listeners:dt}),ke.data=it)),JR(he,r,X,o,se)}qT(he,s)})}function Yu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function df(r,s){for(var o=s+"Capture",u=[];r!==null;){var d=r,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=pi(r,o),d!=null&&u.unshift(Yu(r,d,g)),d=pi(r,s),d!=null&&u.push(Yu(r,d,g))),r.tag===3)return u;r=r.return}return[]}function nI(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function $T(r,s,o,u,d){for(var g=s._reactName,E=[];o!==null&&o!==u;){var R=o,U=R.alternate,X=R.stateNode;if(R=R.tag,U!==null&&U===u)break;R!==5&&R!==26&&R!==27||X===null||(U=X,d?(X=pi(o,g),X!=null&&E.unshift(Yu(o,X,U))):d||(X=pi(o,g),X!=null&&E.push(Yu(o,X,U)))),o=o.return}E.length!==0&&r.push({event:s,listeners:E})}var rI=/\r\n?/g,iI=/\u0000|\uFFFD/g;function KT(r){return(typeof r=="string"?r:""+r).replace(rI,`
`).replace(iI,"")}function YT(r,s){return s=KT(s),KT(r)===s}function Bt(r,s,o,u,d,g){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Tr(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Tr(r,""+u);break;case"className":Sn(r,"class",u);break;case"tabIndex":Sn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(r,o,u);break;case"style":du(r,u,g);break;case"data":if(s!=="object"){Sn(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=jo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&Bt(r,s,"name",d.name,d,null),Bt(r,s,"formEncType",d.formEncType,d,null),Bt(r,s,"formMethod",d.formMethod,d,null),Bt(r,s,"formTarget",d.formTarget,d,null)):(Bt(r,s,"encType",d.encType,d,null),Bt(r,s,"method",d.method,d,null),Bt(r,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=jo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=mi);break;case"onScroll":u!=null&&ht("scroll",r);break;case"onScrollEnd":u!=null&&ht("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=jo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":ht("beforetoggle",r),ht("toggle",r),un(r,"popover",u);break;case"xlinkActuate":kt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":kt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":kt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":kt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":kt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":kt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":kt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":kt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":kt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":un(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=fh.get(o)||o,un(r,o,u))}}function rg(r,s,o,u,d,g){switch(o){case"style":du(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Tr(r,u):(typeof u=="number"||typeof u=="bigint")&&Tr(r,""+u);break;case"onScroll":u!=null&&ht("scroll",r);break;case"onScrollEnd":u!=null&&ht("scrollend",r);break;case"onClick":u!=null&&(r.onclick=mi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),g=r[Ie]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(s,g,d),typeof u=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,d);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):un(r,o,u)}}}function Fn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",r),ht("load",r);var u=!1,d=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Bt(r,s,g,E,o,null)}}d&&Bt(r,s,"srcSet",o.srcSet,o,null),u&&Bt(r,s,"src",o.src,o,null);return;case"input":ht("invalid",r);var R=g=E=d=null,U=null,X=null;for(u in o)if(o.hasOwnProperty(u)){var se=o[u];if(se!=null)switch(u){case"name":d=se;break;case"type":E=se;break;case"checked":U=se;break;case"defaultChecked":X=se;break;case"value":g=se;break;case"defaultValue":R=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,s));break;default:Bt(r,s,u,se,o,null)}}uh(r,g,R,U,X,E,d,!1);return;case"select":ht("invalid",r),u=E=g=null;for(d in o)if(o.hasOwnProperty(d)&&(R=o[d],R!=null))switch(d){case"value":g=R;break;case"defaultValue":E=R;break;case"multiple":u=R;default:Bt(r,s,d,R,o,null)}s=g,o=E,r.multiple=!!u,s!=null?Us(r,!!u,s,!1):o!=null&&Us(r,!!u,o,!0);return;case"textarea":ht("invalid",r),g=d=u=null;for(E in o)if(o.hasOwnProperty(E)&&(R=o[E],R!=null))switch(E){case"value":u=R;break;case"defaultValue":d=R;break;case"children":g=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:Bt(r,s,E,R,o,null)}zs(r,u,d,g);return;case"option":for(U in o)if(o.hasOwnProperty(U)&&(u=o[U],u!=null))switch(U){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Bt(r,s,U,u,o,null)}return;case"dialog":ht("beforetoggle",r),ht("toggle",r),ht("cancel",r),ht("close",r);break;case"iframe":case"object":ht("load",r);break;case"video":case"audio":for(u=0;u<Ku.length;u++)ht(Ku[u],r);break;case"image":ht("error",r),ht("load",r);break;case"details":ht("toggle",r);break;case"embed":case"source":case"link":ht("error",r),ht("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(u=o[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Bt(r,s,X,u,o,null)}return;default:if(Lo(s)){for(se in o)o.hasOwnProperty(se)&&(u=o[se],u!==void 0&&rg(r,s,se,u,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(u=o[R],u!=null&&Bt(r,s,R,u,o,null))}function sI(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,E=null,R=null,U=null,X=null,se=null;for(te in o){var he=o[te];if(o.hasOwnProperty(te)&&he!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":U=he;default:u.hasOwnProperty(te)||Bt(r,s,te,null,u,he)}}for(var J in u){var te=u[J];if(he=o[J],u.hasOwnProperty(J)&&(te!=null||he!=null))switch(J){case"type":g=te;break;case"name":d=te;break;case"checked":X=te;break;case"defaultChecked":se=te;break;case"value":E=te;break;case"defaultValue":R=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,s));break;default:te!==he&&Bt(r,s,J,te,u,he)}}Vo(r,E,R,U,X,se,g,d);return;case"select":te=E=R=J=null;for(g in o)if(U=o[g],o.hasOwnProperty(g)&&U!=null)switch(g){case"value":break;case"multiple":te=U;default:u.hasOwnProperty(g)||Bt(r,s,g,null,u,U)}for(d in u)if(g=u[d],U=o[d],u.hasOwnProperty(d)&&(g!=null||U!=null))switch(d){case"value":J=g;break;case"defaultValue":R=g;break;case"multiple":E=g;default:g!==U&&Bt(r,s,d,g,u,U)}s=R,o=E,u=te,J!=null?Us(r,!!o,J,!1):!!u!=!!o&&(s!=null?Us(r,!!o,s,!0):Us(r,!!o,o?[]:"",!1));return;case"textarea":te=J=null;for(R in o)if(d=o[R],o.hasOwnProperty(R)&&d!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Bt(r,s,R,null,u,d)}for(E in u)if(d=u[E],g=o[E],u.hasOwnProperty(E)&&(d!=null||g!=null))switch(E){case"value":J=d;break;case"defaultValue":te=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==g&&Bt(r,s,E,d,u,g)}ch(r,J,te);return;case"option":for(var je in o)if(J=o[je],o.hasOwnProperty(je)&&J!=null&&!u.hasOwnProperty(je))switch(je){case"selected":r.selected=!1;break;default:Bt(r,s,je,null,u,J)}for(U in u)if(J=u[U],te=o[U],u.hasOwnProperty(U)&&J!==te&&(J!=null||te!=null))switch(U){case"selected":r.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:Bt(r,s,U,J,u,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in o)J=o[qe],o.hasOwnProperty(qe)&&J!=null&&!u.hasOwnProperty(qe)&&Bt(r,s,qe,null,u,J);for(X in u)if(J=u[X],te=o[X],u.hasOwnProperty(X)&&J!==te&&(J!=null||te!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:Bt(r,s,X,J,u,te)}return;default:if(Lo(s)){for(var Ht in o)J=o[Ht],o.hasOwnProperty(Ht)&&J!==void 0&&!u.hasOwnProperty(Ht)&&rg(r,s,Ht,void 0,u,J);for(se in u)J=u[se],te=o[se],!u.hasOwnProperty(se)||J===te||J===void 0&&te===void 0||rg(r,s,se,J,u,te);return}}for(var K in o)J=o[K],o.hasOwnProperty(K)&&J!=null&&!u.hasOwnProperty(K)&&Bt(r,s,K,null,u,J);for(he in u)J=u[he],te=o[he],!u.hasOwnProperty(he)||J===te||J==null&&te==null||Bt(r,s,he,J,u,te)}function QT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aI(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],g=d.transferSize,E=d.initiatorType,R=d.duration;if(g&&R&&QT(E)){for(E=0,R=d.responseEnd,u+=1;u<o.length;u++){var U=o[u],X=U.startTime;if(X>R)break;var se=U.transferSize,he=U.initiatorType;se&&QT(he)&&(U=U.responseEnd,E+=se*(U<R?1:(R-X)/(U-X)))}if(--u,s+=8*(g+E)/(d.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var ig=null,sg=null;function mf(r){return r.nodeType===9?r:r.ownerDocument}function XT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function WT(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function ag(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var og=null;function oI(){var r=window.event;return r&&r.type==="popstate"?r===og?!1:(og=r,!0):(og=null,!1)}var JT=typeof setTimeout=="function"?setTimeout:void 0,lI=typeof clearTimeout=="function"?clearTimeout:void 0,ZT=typeof Promise=="function"?Promise:void 0,uI=typeof queueMicrotask=="function"?queueMicrotask:typeof ZT<"u"?function(r){return ZT.resolve(null).then(r).catch(cI)}:JT;function cI(r){setTimeout(function(){throw r})}function ua(r){return r==="head"}function eb(r,s){var o=s,u=0;do{var d=o.nextSibling;if(r.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(d),yl(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Qu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Qu(o);for(var g=o.firstChild;g;){var E=g.nextSibling,R=g.nodeName;g[jt]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=E}}else o==="body"&&Qu(r.ownerDocument.body);o=d}while(o);yl(s)}function tb(r,s){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function lg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":lg(o),en(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function hI(r,s,o,u){for(;r.nodeType===1;){var d=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[jt])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==d.rel||r.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||r.getAttribute("title")!==(d.title==null?null:d.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(d.src==null?null:d.src)||r.getAttribute("type")!==(d.type==null?null:d.type)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=si(r.nextSibling),r===null)break}return null}function fI(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=si(r.nextSibling),r===null))return null;return r}function nb(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=si(r.nextSibling),r===null))return null;return r}function ug(r){return r.data==="$?"||r.data==="$~"}function cg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function dI(r,s){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function si(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var hg=null;function rb(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(s===0)return si(r.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}r=r.nextSibling}return null}function ib(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return r;s--}else o!=="/$"&&o!=="/&"||s++}r=r.previousSibling}return null}function sb(r,s,o){switch(s=mf(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Qu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);en(r)}var ai=new Map,ab=new Set;function pf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var _s=ae.d;ae.d={f:mI,r:pI,D:gI,C:yI,L:_I,m:vI,X:TI,S:EI,M:bI};function mI(){var r=_s.f(),s=af();return r||s}function pI(r){var s=nt(r);s!==null&&s.tag===5&&s.type==="form"?SE(s):_s.r(r)}var ml=typeof document>"u"?null:document;function ob(r,s,o){var u=ml;if(u&&typeof s=="string"&&s){var d=Er(s);d='link[rel="'+r+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),ab.has(d)||(ab.add(d),r={rel:r,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),Fn(s,"link",r),Xt(s),u.head.appendChild(s)))}}function gI(r){_s.D(r),ob("dns-prefetch",r,null)}function yI(r,s){_s.C(r,s),ob("preconnect",r,s)}function _I(r,s,o){_s.L(r,s,o);var u=ml;if(u&&r&&s){var d='link[rel="preload"][as="'+Er(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Er(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Er(o.imageSizes)+'"]')):d+='[href="'+Er(r)+'"]';var g=d;switch(s){case"style":g=pl(r);break;case"script":g=gl(r)}ai.has(g)||(r=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),ai.set(g,r),u.querySelector(d)!==null||s==="style"&&u.querySelector(Xu(g))||s==="script"&&u.querySelector(Wu(g))||(s=u.createElement("link"),Fn(s,"link",r),Xt(s),u.head.appendChild(s)))}}function vI(r,s){_s.m(r,s);var o=ml;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Er(u)+'"][href="'+Er(r)+'"]',g=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=gl(r)}if(!ai.has(g)&&(r=v({rel:"modulepreload",href:r},s),ai.set(g,r),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Wu(g)))return}u=o.createElement("link"),Fn(u,"link",r),Xt(u),o.head.appendChild(u)}}}function EI(r,s,o){_s.S(r,s,o);var u=ml;if(u&&r){var d=Ln(u).hoistableStyles,g=pl(r);s=s||"default";var E=d.get(g);if(!E){var R={loading:0,preload:null};if(E=u.querySelector(Xu(g)))R.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":s},o),(o=ai.get(g))&&fg(r,o);var U=E=u.createElement("link");Xt(U),Fn(U,"link",r),U._p=new Promise(function(X,se){U.onload=X,U.onerror=se}),U.addEventListener("load",function(){R.loading|=1}),U.addEventListener("error",function(){R.loading|=2}),R.loading|=4,gf(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:R},d.set(g,E)}}}function TI(r,s){_s.X(r,s);var o=ml;if(o&&r){var u=Ln(o).hoistableScripts,d=gl(r),g=u.get(d);g||(g=o.querySelector(Wu(d)),g||(r=v({src:r,async:!0},s),(s=ai.get(d))&&dg(r,s),g=o.createElement("script"),Xt(g),Fn(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function bI(r,s){_s.M(r,s);var o=ml;if(o&&r){var u=Ln(o).hoistableScripts,d=gl(r),g=u.get(d);g||(g=o.querySelector(Wu(d)),g||(r=v({src:r,async:!0,type:"module"},s),(s=ai.get(d))&&dg(r,s),g=o.createElement("script"),Xt(g),Fn(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function lb(r,s,o,u){var d=(d=Se.current)?pf(d):null;if(!d)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=pl(o.href),o=Ln(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=pl(o.href);var g=Ln(d).hoistableStyles,E=g.get(r);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,E),(g=d.querySelector(Xu(r)))&&!g._p&&(E.instance=g,E.state.loading=5),ai.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ai.set(r,o),g||SI(d,r,o,E.state))),s&&u===null)throw Error(i(528,""));return E}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=gl(o),o=Ln(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function pl(r){return'href="'+Er(r)+'"'}function Xu(r){return'link[rel="stylesheet"]['+r+"]"}function ub(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function SI(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Fn(s,"link",o),Xt(s),r.head.appendChild(s))}function gl(r){return'[src="'+Er(r)+'"]'}function Wu(r){return"script[async]"+r}function cb(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Er(o.href)+'"]');if(u)return s.instance=u,Xt(u),u;var d=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Xt(u),Fn(u,"style",d),gf(u,o.precedence,r),s.instance=u;case"stylesheet":d=pl(o.href);var g=r.querySelector(Xu(d));if(g)return s.state.loading|=4,s.instance=g,Xt(g),g;u=ub(o),(d=ai.get(d))&&fg(u,d),g=(r.ownerDocument||r).createElement("link"),Xt(g);var E=g;return E._p=new Promise(function(R,U){E.onload=R,E.onerror=U}),Fn(g,"link",u),s.state.loading|=4,gf(g,o.precedence,r),s.instance=g;case"script":return g=gl(o.src),(d=r.querySelector(Wu(g)))?(s.instance=d,Xt(d),d):(u=o,(d=ai.get(g))&&(u=v({},o),dg(u,d)),r=r.ownerDocument||r,d=r.createElement("script"),Xt(d),Fn(d,"link",u),r.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,gf(u,o.precedence,r));return s.instance}function gf(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,g=d,E=0;E<u.length;E++){var R=u[E];if(R.dataset.precedence===s)g=R;else if(g!==d)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function fg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function dg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var yf=null;function hb(r,s,o){if(yf===null){var u=new Map,d=yf=new Map;d.set(o,u)}else d=yf,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),d=0;d<o.length;d++){var g=o[d];if(!(g[jt]||g[Ae]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(s)||"";E=r+E;var R=u.get(E);R?R.push(g):u.set(E,[g])}}return u}function fb(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function AI(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function db(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function wI(r,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=pl(u.href),g=s.querySelector(Xu(d));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=_f.bind(r),s.then(r,r)),o.state.loading|=4,o.instance=g,Xt(g);return}g=s.ownerDocument||s,u=ub(u),(d=ai.get(d))&&fg(u,d),g=g.createElement("link"),Xt(g);var E=g;E._p=new Promise(function(R,U){E.onload=R,E.onerror=U}),Fn(g,"link",u),o.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=_f.bind(r),s.addEventListener("load",o),s.addEventListener("error",o))}}var mg=0;function CI(r,s){return r.stylesheets&&r.count===0&&Ef(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Ef(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+s);0<r.imgBytes&&mg===0&&(mg=62500*aI());var d=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Ef(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>mg?50:800)+s);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function _f(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ef(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var vf=null;function Ef(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,vf=new Map,s.forEach(RI,r),vf=null,_f.call(r))}function RI(r,s){if(!(s.state.loading&4)){var o=vf.get(r);if(o)var u=o.get(null);else{o=new Map,vf.set(r,o);for(var d=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var E=d[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}d=s.instance,E=d.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,d),o.set(E,d),this.count++,u=_f.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),g?g.parentNode.insertBefore(d,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(d,r.firstChild)),s.state.loading|=4}}var Ju={$$typeof:G,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function II(r,s,o,u,d,g,E,R,U){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hr(0),this.hiddenUpdates=hr(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function mb(r,s,o,u,d,g,E,R,U,X,se,he){return r=new II(r,s,o,E,U,X,se,he,R),s=1,g===!0&&(s|=24),g=jr(3,null,null,s),r.current=g,g.stateNode=r,s=Km(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:s},Wm(g),r}function pb(r){return r?(r=Ko,r):Ko}function gb(r,s,o,u,d,g){d=pb(d),u.context===null?u.context=d:u.pendingContext=d,u=Js(s),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Zs(r,u,s),o!==null&&(Cr(o,r,s),Nu(o,r,s))}function yb(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function pg(r,s){yb(r,s),(r=r.alternate)&&yb(r,s)}function _b(r){if(r.tag===13||r.tag===31){var s=Za(r,67108864);s!==null&&Cr(s,r,67108864),pg(r,67108864)}}function vb(r){if(r.tag===13||r.tag===31){var s=Hr();s=W(s);var o=Za(r,s);o!==null&&Cr(o,r,s),pg(r,s)}}var Tf=!0;function xI(r,s,o,u){var d=H.T;H.T=null;var g=ae.p;try{ae.p=2,gg(r,s,o,u)}finally{ae.p=g,H.T=d}}function NI(r,s,o,u){var d=H.T;H.T=null;var g=ae.p;try{ae.p=8,gg(r,s,o,u)}finally{ae.p=g,H.T=d}}function gg(r,s,o,u){if(Tf){var d=yg(u);if(d===null)ng(r,s,u,bf,o),Tb(r,u);else if(OI(d,r,s,o,u))u.stopPropagation();else if(Tb(r,u),s&4&&-1<DI.indexOf(r)){for(;d!==null;){var g=nt(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=Qr(g.pendingLanes);if(E!==0){var R=g;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var U=1<<31-Pe(E);R.entanglements[1]|=U,E&=~U}Fi(g),(xt&6)===0&&(rf=qt()+500,$u(0))}}break;case 31:case 13:R=Za(g,2),R!==null&&Cr(R,g,2),af(),pg(g,2)}if(g=yg(u),g===null&&ng(r,s,u,bf,o),g===d)break;d=g}d!==null&&u.stopPropagation()}else ng(r,s,u,null,o)}}function yg(r){return r=Xr(r),_g(r)}var bf=null;function _g(r){if(bf=null,r=Yt(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===31){if(r=f(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return bf=r,null}function Eb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cr()){case Yr:return 2;case Wn:return 8;case Zt:case bn:return 32;case xi:return 268435456;default:return 32}default:return 32}}var vg=!1,ca=null,ha=null,fa=null,Zu=new Map,ec=new Map,da=[],DI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tb(r,s){switch(r){case"focusin":case"focusout":ca=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":Zu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ec.delete(s.pointerId)}}function tc(r,s,o,u,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[d]},s!==null&&(s=nt(s),s!==null&&_b(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function OI(r,s,o,u,d){switch(s){case"focusin":return ca=tc(ca,r,s,o,u,d),!0;case"dragenter":return ha=tc(ha,r,s,o,u,d),!0;case"mouseover":return fa=tc(fa,r,s,o,u,d),!0;case"pointerover":var g=d.pointerId;return Zu.set(g,tc(Zu.get(g)||null,r,s,o,u,d)),!0;case"gotpointercapture":return g=d.pointerId,ec.set(g,tc(ec.get(g)||null,r,s,o,u,d)),!0}return!1}function bb(r){var s=Yt(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,Oe(r.priority,function(){vb(o)});return}}else if(s===31){if(s=f(o),s!==null){r.blockedOn=s,Oe(r.priority,function(){vb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Sf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=yg(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);mu=u,o.target.dispatchEvent(u),mu=null}else return s=nt(o),s!==null&&_b(s),r.blockedOn=o,!1;s.shift()}return!0}function Sb(r,s,o){Sf(r)&&o.delete(s)}function MI(){vg=!1,ca!==null&&Sf(ca)&&(ca=null),ha!==null&&Sf(ha)&&(ha=null),fa!==null&&Sf(fa)&&(fa=null),Zu.forEach(Sb),ec.forEach(Sb)}function Af(r,s){r.blockedOn===s&&(r.blockedOn=null,vg||(vg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,MI)))}var wf=null;function Ab(r){wf!==r&&(wf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){wf===r&&(wf=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],d=r[s+2];if(typeof u!="function"){if(_g(u||o)===null)continue;break}var g=nt(o);g!==null&&(r.splice(s,3),s-=3,yp(g,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function yl(r){function s(U){return Af(U,r)}ca!==null&&Af(ca,r),ha!==null&&Af(ha,r),fa!==null&&Af(fa,r),Zu.forEach(s),ec.forEach(s);for(var o=0;o<da.length;o++){var u=da[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<da.length&&(o=da[0],o.blockedOn===null);)bb(o),o.blockedOn===null&&da.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],g=o[u+1],E=d[Ie]||null;if(typeof g=="function")E||Ab(o);else if(E){var R=null;if(g&&g.hasAttribute("formAction")){if(d=g,E=g[Ie]||null)R=E.formAction;else if(_g(d)!==null)continue}else R=E.action;typeof R=="function"?o[u+1]=R:(o.splice(u,3),u-=3),Ab(o)}}}function wb(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(E){return d=E})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Eg(r){this._internalRoot=r}Cf.prototype.render=Eg.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Hr();gb(o,u,r,s,null,null)},Cf.prototype.unmount=Eg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;gb(r.current,2,null,r,null,null),af(),s[Ve]=null}};function Cf(r){this._internalRoot=r}Cf.prototype.unstable_scheduleHydration=function(r){if(r){var s=be();r={blockedOn:null,target:r,priority:s};for(var o=0;o<da.length&&s!==0&&s<da[o].priority;o++);da.splice(o,0,r),o===0&&bb(r)}};var Cb=e.version;if(Cb!=="19.2.4")throw Error(i(527,Cb,"19.2.4"));ae.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var PI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rf.isDisabled&&Rf.supportsFiber)try{Ce=Rf.inject(PI),de=Rf}catch{}}return rc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",d=ME,g=PE,E=VE;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),s=mb(r,1,!1,null,null,o,u,null,d,g,E,wb),r[Ve]=s.current,tg(r),new Eg(s)},rc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,d="",g=ME,E=PE,R=VE,U=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(U=o.formState)),s=mb(r,1,!0,s,o??null,u,d,U,g,E,R,wb),s.context=pb(null),o=s.current,u=Hr(),u=W(u),d=Js(u),d.callback=null,Zs(o,d,u),o=u,s.current.lanes=o,Ni(s,o),Fi(s),r[Ve]=s.current,tg(r),new Cf(s)},rc.version="19.2.4",rc}var Lb;function KI(){if(Lb)return Ag.exports;Lb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ag.exports=$I(),Ag.exports}var YI=KI();const QI=fA(YI);var Ig={exports:{}},xg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function XI(){if(jb)return xg;jb=1;var n=Bd();function e(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,a=n.useRef,l=n.useEffect,c=n.useMemo,f=n.useDebugValue;return xg.useSyncExternalStoreWithSelector=function(m,p,y,v,S){var w=a(null);if(w.current===null){var D={hasValue:!1,value:null};w.current=D}else D=w.current;w=c(function(){function M(ie){if(!B){if(B=!0,F=ie,ie=v(ie),S!==void 0&&D.hasValue){var ne=D.value;if(S(ne,ie))return G=ne}return G=ie}if(ne=G,t(F,ie))return ne;var A=v(ie);return S!==void 0&&S(ne,A)?(F=ie,ne):(F=ie,G=A)}var B=!1,F,G,ee=y===void 0?null:y;return[function(){return M(p())},ee===null?void 0:function(){return M(ee())}]},[p,y,v,S]);var z=i(m,w[0],w[1]);return l(function(){D.hasValue=!0,D.value=z},[z]),f(z),z},xg}var kb;function WI(){return kb||(kb=1,Ig.exports=XI()),Ig.exports}var JI=WI();function ZI(n){n()}function ex(){let n=null,e=null;return{clear(){n=null,e=null},notify(){ZI(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const a=e={callback:t,next:null,prev:e};return a.prev?a.prev.next=a:n=a,function(){!i||n===null||(i=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var Ub={notify(){},get:()=>[]};function tx(n,e){let t,i=Ub,a=0,l=!1;function c(z){y();const M=i.subscribe(z);let B=!1;return()=>{B||(B=!0,M(),v())}}function f(){i.notify()}function m(){D.onStateChange&&D.onStateChange()}function p(){return l}function y(){a++,t||(t=n.subscribe(m),i=ex())}function v(){a--,t&&a===0&&(t(),t=void 0,i.clear(),i=Ub)}function S(){l||(l=!0,y())}function w(){l&&(l=!1,v())}const D={addNestedSub:c,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:S,tryUnsubscribe:w,getListeners:()=>i};return D}var nx=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rx=nx(),ix=()=>typeof navigator<"u"&&navigator.product==="ReactNative",sx=ix(),ax=()=>rx||sx?V.useLayoutEffect:V.useEffect,ox=ax(),Ng=Symbol.for("react-redux-context"),Dg=typeof globalThis<"u"?globalThis:{};function lx(){if(!V.createContext)return{};const n=Dg[Ng]??(Dg[Ng]=new Map);let e=n.get(V.createContext);return e||(e=V.createContext(null),n.set(V.createContext,e)),e}var Da=lx();function ux(n){const{children:e,context:t,serverState:i,store:a}=n,l=V.useMemo(()=>{const m=tx(a);return{store:a,subscription:m,getServerState:i?()=>i:void 0}},[a,i]),c=V.useMemo(()=>a.getState(),[a]);ox(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==a.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,c]);const f=t||Da;return V.createElement(f.Provider,{value:l},e)}var cx=ux;function Ky(n=Da){return function(){return V.useContext(n)}}var pA=Ky();function gA(n=Da){const e=n===Da?pA:Ky(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var hx=gA();function fx(n=Da){const e=n===Da?hx:gA(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var dx=fx(),mx=(n,e)=>n===e;function px(n=Da){const e=n===Da?pA:Ky(n),t=(i,a={})=>{const{equalityFn:l=mx}=typeof a=="function"?{equalityFn:a}:a,c=e(),{store:f,subscription:m,getServerState:p}=c;V.useRef(!0);const y=V.useCallback({[i.name](S){return i(S)}}[i.name],[i]),v=JI.useSyncExternalStoreWithSelector(m.addNestedSub,f.getState,p||f.getState,y,l);return V.useDebugValue(v),v};return Object.assign(t,{withTypes:()=>t}),t}var gx=px();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var yA=n=>{throw TypeError(n)},yx=(n,e,t)=>e.has(n)||yA("Cannot "+t),Og=(n,e,t)=>(yx(n,e,"read from private field"),t?t.call(n):e.get(n)),_x=(n,e,t)=>e.has(n)?yA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),zb="popstate";function vx(n={}){function e(a,l){let{pathname:c="/",search:f="",hash:m=""}=Ls(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Rc("",{pathname:c,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let m=a.location.href,p=m.indexOf("#");f=p===-1?m:m.slice(0,p)}return f+"#"+(typeof l=="string"?l:Xi(l))}function i(a,l){hn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return Tx(e,t,i,n)}function ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function hn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ex(){return Math.random().toString(36).substring(2,10)}function Bb(n,e){return{usr:n.state,key:n.key,idx:e}}function Rc(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ls(e):e,state:t,key:e&&e.key||i||Ex()}}function Xi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ls(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function Tx(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,f="POP",m=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function v(){f="POP";let M=y(),B=M==null?null:M-p;p=M,m&&m({action:f,location:z.location,delta:B})}function S(M,B){f="PUSH";let F=Rc(z.location,M,B);t&&t(F,M),p=y()+1;let G=Bb(F,p),ee=z.createHref(F);try{c.pushState(G,"",ee)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;a.location.assign(ee)}l&&m&&m({action:f,location:z.location,delta:1})}function w(M,B){f="REPLACE";let F=Rc(z.location,M,B);t&&t(F,M),p=y();let G=Bb(F,p),ee=z.createHref(F);c.replaceState(G,"",ee),l&&m&&m({action:f,location:z.location,delta:0})}function D(M){return _A(M)}let z={get action(){return f},get location(){return n(a,c)},listen(M){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(zb,v),m=M,()=>{a.removeEventListener(zb,v),m=null}},createHref(M){return e(a,M)},createURL:D,encodeLocation(M){let B=D(M);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:S,replace:w,go(M){return c.go(M)}};return z}function _A(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ot(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Xi(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}var cc,Hb=class{constructor(n){if(_x(this,cc,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Og(this,cc).has(n))return Og(this,cc).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Og(this,cc).set(n,e)}};cc=new WeakMap;var bx=new Set(["lazy","caseSensitive","path","id","index","children"]);function Sx(n){return bx.has(n)}var Ax=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function wx(n){return Ax.has(n)}function Cx(n){return n.index===!0}function Ic(n,e,t=[],i={},a=!1){return n.map((l,c)=>{let f=[...t,String(c)],m=typeof l.id=="string"?l.id:f.join("-");if(ot(l.index!==!0||!l.children,"Cannot specify children on an index route"),ot(a||!i[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),Cx(l)){let p={...l,id:m};return i[m]=Fb(p,e(p)),p}else{let p={...l,id:m,children:void 0};return i[m]=Fb(p,e(p)),l.children&&(p.children=Ic(l.children,e,f,i,a)),p}})}function Fb(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function ya(n,e,t="/"){return hc(n,e,t,!1)}function hc(n,e,t,i){let a=typeof e=="string"?Ls(e):e,l=ci(a.pathname||"/",t);if(l==null)return null;let c=vA(n);Ix(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let p=Ux(l);f=jx(c[m],p,i)}return f}function Rx(n,e){let{route:t,pathname:i,params:a}=n;return{id:t.id,pathname:i,params:a,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function vA(n,e=[],t=[],i="",a=!1){let l=(c,f,m=a,p)=>{let y={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&m)return;ot(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let v=Gi([i,y.relativePath]),S=t.concat(y);c.children&&c.children.length>0&&(ot(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),vA(c.children,e,S,v,m)),!(c.path==null&&!c.index)&&e.push({path:v,score:Vx(v,c.index),routesMeta:S})};return n.forEach((c,f)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))l(c,f);else for(let p of EA(c.path))l(c,f,!0,p)}),e}function EA(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=EA(i.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function Ix(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Lx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var xx=/^:[\w-]+$/,Nx=3,Dx=2,Ox=1,Mx=10,Px=-2,qb=n=>n==="*";function Vx(n,e){let t=n.split("/"),i=t.length;return t.some(qb)&&(i+=Px),e&&(i+=Dx),t.filter(a=>!qb(a)).reduce((a,l)=>a+(xx.test(l)?Nx:l===""?Ox:Mx),i)}function Lx(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function jx(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let f=0;f<i.length;++f){let m=i[f],p=f===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=fd({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),S=m.route;if(!v&&p&&t&&!i[i.length-1].route.index&&(v=fd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),c.push({params:a,pathname:Gi([l,v.pathname]),pathnameBase:Hx(Gi([l,v.pathnameBase])),route:S}),v.pathnameBase!=="/"&&(l=Gi([l,v.pathnameBase]))}return c}function fd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=kx(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:v},S)=>{if(y==="*"){let D=f[S]||"";c=l.slice(0,l.length-D.length).replace(/(.)\/+$/,"$1")}const w=f[S];return v&&!w?p[y]=void 0:p[y]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function kx(n,e=!1,t=!0){hn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function Ux(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ci(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function zx({basename:n,pathname:e}){return e==="/"?n:Gi([n,e])}var TA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yy=n=>TA.test(n);function Bx(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Ls(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=Gb(t.substring(1),"/"):l=Gb(t,e)):l=e,{pathname:l,search:Fx(i),hash:qx(a)}}function Gb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Mg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Hd(n){let e=bA(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Fd(n,e,t,i=!1){let a;typeof n=="string"?a=Ls(n):(a={...n},ot(!a.pathname||!a.pathname.includes("?"),Mg("?","pathname","search",a)),ot(!a.pathname||!a.pathname.includes("#"),Mg("#","pathname","hash",a)),ot(!a.search||!a.search.includes("#"),Mg("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=t;else{let v=e.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),v-=1;a.pathname=S.join("/")}f=v>=0?e[v]:"/"}let m=Bx(a,f),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var Gi=n=>n.join("/").replace(/\/\/+/g,"/"),Hx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Fx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,qx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Fc=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function xc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function qc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var SA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function AA(n,e){let t=n;if(typeof t!="string"||!TA.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(SA)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=ci(c.pathname,e);c.origin===l.origin&&f!=null?t=f+c.search+c.hash:a=!0}catch{hn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}var ba=Symbol("Uninstrumented");function Gx(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(a=>a({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let f of c)l[f]&&t[f].push(l[f])}}));let i={};if(typeof e.lazy=="function"&&t.lazy.length>0){let a=xl(t.lazy,e.lazy,()=>{});a&&(i.lazy=a)}if(typeof e.lazy=="object"){let a=e.lazy;["middleware","loader","action"].forEach(l=>{let c=a[l],f=t[`lazy.${l}`];if(typeof c=="function"&&f.length>0){let m=xl(f,c,()=>{});m&&(i.lazy=Object.assign(i.lazy||{},{[l]:m}))}})}return["loader","action"].forEach(a=>{let l=e[a];if(typeof l=="function"&&t[a].length>0){let c=l[ba]??l,f=xl(t[a],c,(...m)=>$b(m[0]));f&&(a==="loader"&&c.hydrate===!0&&(f.hydrate=!0),f[ba]=c,i[a]=f)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(i.middleware=e.middleware.map(a=>{let l=a[ba]??a,c=xl(t.middleware,l,(...f)=>$b(f[0]));return c?(c[ba]=l,c):a})),i}function $x(n,e){let t={navigate:[],fetch:[]};if(e.forEach(i=>i({instrument(a){let l=Object.keys(a);for(let c of l)a[c]&&t[c].push(a[c])}})),t.navigate.length>0){let i=n.navigate[ba]??n.navigate,a=xl(t.navigate,i,(...l)=>{let[c,f]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?Xi(c):".",...Kb(n,f??{})}});a&&(a[ba]=i,n.navigate=a)}if(t.fetch.length>0){let i=n.fetch[ba]??n.fetch,a=xl(t.fetch,i,(...l)=>{let[c,,f,m]=l;return{href:f??".",fetcherKey:c,...Kb(n,m??{})}});a&&(a[ba]=i,n.fetch=a)}return n}function xl(n,e,t){return n.length===0?null:async(...i)=>{let a=await wA(n,t(...i),()=>e(...i),n.length-1);if(a.type==="error")throw a.value;return a.value}}async function wA(n,e,t,i){let a=n[i],l;if(a){let c,f=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=wA(n,e,t,i-1),l=await c,ot(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await a(f,e)}catch(m){console.error("An instrumentation function threw an error:",m)}c||await f(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function $b(n){let{request:e,context:t,params:i,unstable_pattern:a}=n;return{request:Kx(e),params:{...i},unstable_pattern:a,context:Yx(t)}}function Kb(n,e){return{currentUrl:Xi(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function Kx(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function Yx(n){if(Xx(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var Qx=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xx(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===Qx}var CA=["POST","PUT","PATCH","DELETE"],Wx=new Set(CA),Jx=["GET",...CA],Zx=new Set(Jx),RA=new Set([301,302,303,307,308]),eN=new Set([307,308]),Pg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},tN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ic={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},nN=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),IA="remix-router-transitions",xA=Symbol("ResetLoaderData");function rN(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";ot(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=n.hydrationRouteProperties||[],a=n.mapRouteProperties||nN,l=a;if(n.unstable_instrumentations){let k=n.unstable_instrumentations;l=$=>({...a($),...Gx(k.map(W=>W.route).filter(Boolean),$)})}let c={},f=Ic(n.routes,l,void 0,c),m,p=n.basename||"/";p.startsWith("/")||(p=`/${p}`);let y=n.dataStrategy||lN,v={...n.future},S=null,w=new Set,D=null,z=null,M=null,B=n.hydrationData!=null,F=ya(f,n.history.location,p),G=!1,ee=null,ie;if(F==null&&!n.patchRoutesOnNavigation){let k=oi(404,{pathname:n.history.location.pathname}),{matches:$,route:W}=If(f);ie=!0,F=$,ee={[W.id]:k}}else if(F&&!n.hydrationData&&Zi(F,f,n.history.location.pathname).active&&(F=null),F)if(F.some(k=>k.route.lazy))ie=!1;else if(!F.some(k=>Qy(k.route)))ie=!0;else{let k=n.hydrationData?n.hydrationData.loaderData:null,$=n.hydrationData?n.hydrationData.errors:null;if($){let W=F.findIndex(me=>$[me.route.id]!==void 0);ie=F.slice(0,W+1).every(me=>!cy(me.route,k,$))}else ie=F.every(W=>!cy(W.route,k,$))}else{ie=!1,F=[];let k=Zi(null,f,n.history.location.pathname);k.active&&k.matches&&(G=!0,F=k.matches)}let ne,A={historyAction:n.history.action,location:n.history.location,matches:F,initialized:ie,navigation:Pg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||ee,fetchers:new Map,blockers:new Map},I="POP",C=null,P=!1,O,L=!1,x=new Map,ge=null,Te=!1,H=!1,ae=new Set,ye=new Map,pe=0,Ee=-1,j=new Map,re=new Set,_e=new Map,we=new Map,ue=new Set,Se=new Map,xe,ze=null;function Be(){if(S=n.history.listen(({action:k,location:$,delta:W})=>{if(xe){xe(),xe=void 0;return}hn(Se.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let me=mn({currentLocation:A.location,nextLocation:$,historyAction:k});if(me&&W!=null){let be=new Promise(Oe=>{xe=Oe});n.history.go(W*-1),Tt(me,{state:"blocked",location:$,proceed(){Tt(me,{state:"proceeding",proceed:void 0,reset:void 0,location:$}),be.then(()=>n.history.go(W))},reset(){let Oe=new Map(A.blockers);Oe.set(me,ic),Ye({blockers:Oe})}}),C==null||C.resolve(),C=null;return}return dn(k,$)}),t){CN(e,x);let k=()=>RN(e,x);e.addEventListener("pagehide",k),ge=()=>e.removeEventListener("pagehide",k)}return A.initialized||dn("POP",A.location,{initialHydration:!0}),ne}function st(){S&&S(),ge&&ge(),w.clear(),O&&O.abort(),A.fetchers.forEach((k,$)=>ve($)),A.blockers.forEach((k,$)=>At($))}function St(k){return w.add(k),()=>w.delete(k)}function Ye(k,$={}){k.matches&&(k.matches=k.matches.map(be=>{let Oe=c[be.route.id],Le=be.route;return Le.element!==Oe.element||Le.errorElement!==Oe.errorElement||Le.hydrateFallbackElement!==Oe.hydrateFallbackElement?{...be,route:Oe}:be})),A={...A,...k};let W=[],me=[];A.fetchers.forEach((be,Oe)=>{be.state==="idle"&&(ue.has(Oe)?W.push(Oe):me.push(Oe))}),ue.forEach(be=>{!A.fetchers.has(be)&&!ye.has(be)&&W.push(be)}),[...w].forEach(be=>be(A,{deletedFetchers:W,newErrors:k.errors??null,viewTransitionOpts:$.viewTransitionOpts,flushSync:$.flushSync===!0})),W.forEach(be=>ve(be)),me.forEach(be=>A.fetchers.delete(be))}function Et(k,$,{flushSync:W}={}){var Ge,Ue;let me=A.actionData!=null&&A.navigation.formMethod!=null&&nr(A.navigation.formMethod)&&A.navigation.state==="loading"&&((Ge=k.state)==null?void 0:Ge._isRedirect)!==!0,be;$.actionData?Object.keys($.actionData).length>0?be=$.actionData:be=null:me?be=A.actionData:be=null;let Oe=$.loaderData?r0(A.loaderData,$.loaderData,$.matches||[],$.errors):A.loaderData,Le=A.blockers;Le.size>0&&(Le=new Map(Le),Le.forEach((Qe,at)=>Le.set(at,ic)));let Ae=Te?!1:Po(k,$.matches||A.matches),Ie=P===!0||A.navigation.formMethod!=null&&nr(A.navigation.formMethod)&&((Ue=k.state)==null?void 0:Ue._isRedirect)!==!0;m&&(f=m,m=void 0),Te||I==="POP"||(I==="PUSH"?n.history.push(k,k.state):I==="REPLACE"&&n.history.replace(k,k.state));let Ve;if(I==="POP"){let Qe=x.get(A.location.pathname);Qe&&Qe.has(k.pathname)?Ve={currentLocation:A.location,nextLocation:k}:x.has(k.pathname)&&(Ve={currentLocation:k,nextLocation:A.location})}else if(L){let Qe=x.get(A.location.pathname);Qe?Qe.add(k.pathname):(Qe=new Set([k.pathname]),x.set(A.location.pathname,Qe)),Ve={currentLocation:A.location,nextLocation:k}}Ye({...$,actionData:be,loaderData:Oe,historyAction:I,location:k,initialized:!0,navigation:Pg,revalidation:"idle",restoreScrollPosition:Ae,preventScrollReset:Ie,blockers:Le},{viewTransitionOpts:Ve,flushSync:W===!0}),I="POP",P=!1,L=!1,Te=!1,H=!1,C==null||C.resolve(),C=null,ze==null||ze.resolve(),ze=null}async function Ot(k,$){if(C==null||C.resolve(),C=null,typeof k=="number"){C||(C=o0());let at=C.promise;return n.history.go(k),at}let W=uy(A.location,A.matches,p,k,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:me,submission:be,error:Oe}=Yb(!1,W,$),Le=A.location,Ae=Rc(A.location,me,$&&$.state);Ae={...Ae,...n.history.encodeLocation(Ae)};let Ie=$&&$.replace!=null?$.replace:void 0,Ve="PUSH";Ie===!0?Ve="REPLACE":Ie===!1||be!=null&&nr(be.formMethod)&&be.formAction===A.location.pathname+A.location.search&&(Ve="REPLACE");let Ge=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,Ue=($&&$.flushSync)===!0,Qe=mn({currentLocation:Le,nextLocation:Ae,historyAction:Ve});if(Qe){Tt(Qe,{state:"blocked",location:Ae,proceed(){Tt(Qe,{state:"proceeding",proceed:void 0,reset:void 0,location:Ae}),Ot(k,$)},reset(){let at=new Map(A.blockers);at.set(Qe,ic),Ye({blockers:at})}});return}await dn(Ve,Ae,{submission:be,pendingError:Oe,preventScrollReset:Ge,replace:$&&$.replace,enableViewTransition:$&&$.viewTransition,flushSync:Ue,callSiteDefaultShouldRevalidate:$&&$.unstable_defaultShouldRevalidate})}function Qn(){ze||(ze=o0()),Wn(),Ye({revalidation:"loading"});let k=ze.promise;return A.navigation.state==="submitting"?k:A.navigation.state==="idle"?(dn(A.historyAction,A.location,{startUninterruptedRevalidation:!0}),k):(dn(I||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:L===!0}),k)}async function dn(k,$,W){O&&O.abort(),O=null,I=k,Te=(W&&W.startUninterruptedRevalidation)===!0,Mr(A.location,A.matches),P=(W&&W.preventScrollReset)===!0,L=(W&&W.enableViewTransition)===!0;let me=m||f,be=W&&W.overrideNavigation,Oe=W!=null&&W.initialHydration&&A.matches&&A.matches.length>0&&!G?A.matches:ya(me,$,p),Le=(W&&W.flushSync)===!0;if(Oe&&A.initialized&&!H&&gN(A.location,$)&&!(W&&W.submission&&nr(W.submission.formMethod))){Et($,{matches:Oe},{flushSync:Le});return}let Ae=Zi(Oe,me,$.pathname);if(Ae.active&&Ae.matches&&(Oe=Ae.matches),!Oe){let{error:en,notFoundMatches:Yt,route:nt}=sn($.pathname);Et($,{matches:Yt,loaderData:{},errors:{[nt.id]:en}},{flushSync:Le});return}O=new AbortController;let Ie=bl(n.history,$,O.signal,W&&W.submission),Ve=n.getContext?await n.getContext():new Hb,Ge;if(W&&W.pendingError)Ge=[_a(Oe).route.id,{type:"error",error:W.pendingError}];else if(W&&W.submission&&nr(W.submission.formMethod)){let en=await lr(Ie,$,W.submission,Oe,Ve,Ae.active,W&&W.initialHydration===!0,{replace:W.replace,flushSync:Le});if(en.shortCircuited)return;if(en.pendingActionResult){let[Yt,nt]=en.pendingActionResult;if(Fr(nt)&&xc(nt.error)&&nt.error.status===404){O=null,Et($,{matches:en.matches,loaderData:{},errors:{[Yt]:nt.error}});return}}Oe=en.matches||Oe,Ge=en.pendingActionResult,be=Vg($,W.submission),Le=!1,Ae.active=!1,Ie=bl(n.history,Ie.url,Ie.signal)}let{shortCircuited:Ue,matches:Qe,loaderData:at,errors:jt}=await Xn(Ie,$,Oe,Ve,Ae.active,be,W&&W.submission,W&&W.fetcherSubmission,W&&W.replace,W&&W.initialHydration===!0,Le,Ge,W&&W.callSiteDefaultShouldRevalidate);Ue||(O=null,Et($,{matches:Qe||Oe,...i0(Ge),loaderData:at,errors:jt}))}async function lr(k,$,W,me,be,Oe,Le,Ae={}){Wn();let Ie=AN($,W);if(Ye({navigation:Ie},{flushSync:Ae.flushSync===!0}),Oe){let Ue=await hr(me,$.pathname,k.signal);if(Ue.type==="aborted")return{shortCircuited:!0};if(Ue.type==="error"){if(Ue.partialMatches.length===0){let{matches:at,route:jt}=If(f);return{matches:at,pendingActionResult:[jt.id,{type:"error",error:Ue.error}]}}let Qe=_a(Ue.partialMatches).route.id;return{matches:Ue.partialMatches,pendingActionResult:[Qe,{type:"error",error:Ue.error}]}}else if(Ue.matches)me=Ue.matches;else{let{notFoundMatches:Qe,error:at,route:jt}=sn($.pathname);return{matches:Qe,pendingActionResult:[jt.id,{type:"error",error:at}]}}}let Ve,Ge=Ff(me,$);if(!Ge.route.action&&!Ge.route.lazy)Ve={type:"error",error:oi(405,{method:k.method,pathname:$.pathname,routeId:Ge.route.id})};else{let Ue=Ol(l,c,k,me,Ge,Le?[]:i,be),Qe=await cr(k,Ue,be,null);if(Ve=Qe[Ge.route.id],!Ve){for(let at of me)if(Qe[at.route.id]){Ve=Qe[at.route.id];break}}if(k.signal.aborted)return{shortCircuited:!0}}if(go(Ve)){let Ue;return Ae&&Ae.replace!=null?Ue=Ae.replace:Ue=e0(Ve.response.headers.get("Location"),new URL(k.url),p,n.history)===A.location.pathname+A.location.search,await qt(k,Ve,!0,{submission:W,replace:Ue}),{shortCircuited:!0}}if(Fr(Ve)){let Ue=_a(me,Ge.route.id);return(Ae&&Ae.replace)!==!0&&(I="PUSH"),{matches:me,pendingActionResult:[Ue.route.id,Ve,Ge.route.id]}}return{matches:me,pendingActionResult:[Ge.route.id,Ve]}}async function Xn(k,$,W,me,be,Oe,Le,Ae,Ie,Ve,Ge,Ue,Qe){let at=Oe||Vg($,Le),jt=Le||Ae||a0(at),en=!Te&&!Ve;if(be){if(en){let un=Mt(Ue);Ye({navigation:at,...un!==void 0?{actionData:un}:{}},{flushSync:Ge})}let ut=await hr(W,$.pathname,k.signal);if(ut.type==="aborted")return{shortCircuited:!0};if(ut.type==="error"){if(ut.partialMatches.length===0){let{matches:Sn,route:kt}=If(f);return{matches:Sn,loaderData:{},errors:{[kt.id]:ut.error}}}let un=_a(ut.partialMatches).route.id;return{matches:ut.partialMatches,loaderData:{},errors:{[un]:ut.error}}}else if(ut.matches)W=ut.matches;else{let{error:un,notFoundMatches:Sn,route:kt}=sn($.pathname);return{matches:Sn,loaderData:{},errors:{[kt.id]:un}}}}let Yt=m||f,{dsMatches:nt,revalidatingFetchers:Qt}=Qb(k,me,l,c,n.history,A,W,jt,$,Ve?[]:i,Ve===!0,H,ae,ue,_e,re,Yt,p,n.patchRoutesOnNavigation!=null,Ue,Qe);if(Ee=++pe,!n.dataStrategy&&!nt.some(ut=>ut.shouldLoad)&&!nt.some(ut=>ut.route.middleware&&ut.route.middleware.length>0)&&Qt.length===0){let ut=Pe();return Et($,{matches:W,loaderData:{},errors:Ue&&Fr(Ue[1])?{[Ue[0]]:Ue[1].error}:null,...i0(Ue),...ut?{fetchers:new Map(A.fetchers)}:{}},{flushSync:Ge}),{shortCircuited:!0}}if(en){let ut={};if(!be){ut.navigation=at;let un=Mt(Ue);un!==void 0&&(ut.actionData=un)}Qt.length>0&&(ut.fetchers=Jt(Qt)),Ye(ut,{flushSync:Ge})}Qt.forEach(ut=>{de(ut.key),ut.controller&&ye.set(ut.key,ut.controller)});let Ln=()=>Qt.forEach(ut=>de(ut.key));O&&O.signal.addEventListener("abort",Ln);let{loaderResults:Xt,fetcherResults:_r}=await Yr(nt,Qt,k,me);if(k.signal.aborted)return{shortCircuited:!0};O&&O.signal.removeEventListener("abort",Ln),Qt.forEach(ut=>ye.delete(ut.key));let Jn=xf(Xt);if(Jn)return await qt(k,Jn.result,!0,{replace:Ie}),{shortCircuited:!0};if(Jn=xf(_r),Jn)return re.add(Jn.key),await qt(k,Jn.result,!0,{replace:Ie}),{shortCircuited:!0};let{loaderData:vr,errors:Zn}=n0(A,W,Xt,Ue,Qt,_r);Ve&&A.errors&&(Zn={...A.errors,...Zn});let Pr=Pe(),Di=Kt(Ee),Oi=Pr||Di||Qt.length>0;return{matches:W,loaderData:vr,errors:Zn,...Oi?{fetchers:new Map(A.fetchers)}:{}}}function Mt(k){if(k&&!Fr(k[1]))return{[k[0]]:k[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function Jt(k){return k.forEach($=>{let W=A.fetchers.get($.key),me=sc(void 0,W?W.data:void 0);A.fetchers.set($.key,me)}),new Map(A.fetchers)}async function Pt(k,$,W,me){de(k);let be=(me&&me.flushSync)===!0,Oe=m||f,Le=uy(A.location,A.matches,p,W,$,me==null?void 0:me.relative),Ae=ya(Oe,Le,p),Ie=Zi(Ae,Oe,Le);if(Ie.active&&Ie.matches&&(Ae=Ie.matches),!Ae){bn(k,$,oi(404,{pathname:Le}),{flushSync:be});return}let{path:Ve,submission:Ge,error:Ue}=Yb(!0,Le,me);if(Ue){bn(k,$,Ue,{flushSync:be});return}let Qe=n.getContext?await n.getContext():new Hb,at=(me&&me.preventScrollReset)===!0;if(Ge&&nr(Ge.formMethod)){await ur(k,$,Ve,Ae,Qe,Ie.active,be,at,Ge,me&&me.unstable_defaultShouldRevalidate);return}_e.set(k,{routeId:$,path:Ve}),await di(k,$,Ve,Ae,Qe,Ie.active,be,at,Ge)}async function ur(k,$,W,me,be,Oe,Le,Ae,Ie,Ve){Wn(),_e.delete(k);let Ge=A.fetchers.get(k);Zt(k,wN(Ie,Ge),{flushSync:Le});let Ue=new AbortController,Qe=bl(n.history,W,Ue.signal,Ie);if(Oe){let rt=await hr(me,new URL(Qe.url).pathname,Qe.signal,k);if(rt.type==="aborted")return;if(rt.type==="error"){bn(k,$,rt.error,{flushSync:Le});return}else if(rt.matches)me=rt.matches;else{bn(k,$,oi(404,{pathname:W}),{flushSync:Le});return}}let at=Ff(me,W);if(!at.route.action&&!at.route.lazy){let rt=oi(405,{method:Ie.formMethod,pathname:W,routeId:$});bn(k,$,rt,{flushSync:Le});return}ye.set(k,Ue);let jt=pe,en=Ol(l,c,Qe,me,at,i,be),Yt=await cr(Qe,en,be,k),nt=Yt[at.route.id];if(!nt){for(let rt of en)if(Yt[rt.route.id]){nt=Yt[rt.route.id];break}}if(Qe.signal.aborted){ye.get(k)===Ue&&ye.delete(k);return}if(ue.has(k)){if(go(nt)||Fr(nt)){Zt(k,Ts(void 0));return}}else{if(go(nt))if(ye.delete(k),Ee>jt){Zt(k,Ts(void 0));return}else return re.add(k),Zt(k,sc(Ie)),qt(Qe,nt,!1,{fetcherSubmission:Ie,preventScrollReset:Ae});if(Fr(nt)){bn(k,$,nt.error);return}}let Qt=A.navigation.location||A.location,Ln=bl(n.history,Qt,Ue.signal),Xt=m||f,_r=A.navigation.state!=="idle"?ya(Xt,A.navigation.location,p):A.matches;ot(_r,"Didn't find any matches after fetcher action");let Jn=++pe;j.set(k,Jn);let vr=sc(Ie,nt.data);A.fetchers.set(k,vr);let{dsMatches:Zn,revalidatingFetchers:Pr}=Qb(Ln,be,l,c,n.history,A,_r,Ie,Qt,i,!1,H,ae,ue,_e,re,Xt,p,n.patchRoutesOnNavigation!=null,[at.route.id,nt],Ve);Pr.filter(rt=>rt.key!==k).forEach(rt=>{let Vr=rt.key,ks=A.fetchers.get(Vr),Rt=sc(void 0,ks?ks.data:void 0);A.fetchers.set(Vr,Rt),de(Vr),rt.controller&&ye.set(Vr,rt.controller)}),Ye({fetchers:new Map(A.fetchers)});let Di=()=>Pr.forEach(rt=>de(rt.key));Ue.signal.addEventListener("abort",Di);let{loaderResults:Oi,fetcherResults:ut}=await Yr(Zn,Pr,Ln,be);if(Ue.signal.aborted)return;if(Ue.signal.removeEventListener("abort",Di),j.delete(k),ye.delete(k),Pr.forEach(rt=>ye.delete(rt.key)),A.fetchers.has(k)){let rt=Ts(nt.data);A.fetchers.set(k,rt)}let un=xf(Oi);if(un)return qt(Ln,un.result,!1,{preventScrollReset:Ae});if(un=xf(ut),un)return re.add(un.key),qt(Ln,un.result,!1,{preventScrollReset:Ae});let{loaderData:Sn,errors:kt}=n0(A,_r,Oi,void 0,Pr,ut);Kt(Jn),A.navigation.state==="loading"&&Jn>Ee?(ot(I,"Expected pending action"),O&&O.abort(),Et(A.navigation.location,{matches:_r,loaderData:Sn,errors:kt,fetchers:new Map(A.fetchers)})):(Ye({errors:kt,loaderData:r0(A.loaderData,Sn,_r,kt),fetchers:new Map(A.fetchers)}),H=!1)}async function di(k,$,W,me,be,Oe,Le,Ae,Ie){let Ve=A.fetchers.get(k);Zt(k,sc(Ie,Ve?Ve.data:void 0),{flushSync:Le});let Ge=new AbortController,Ue=bl(n.history,W,Ge.signal);if(Oe){let nt=await hr(me,new URL(Ue.url).pathname,Ue.signal,k);if(nt.type==="aborted")return;if(nt.type==="error"){bn(k,$,nt.error,{flushSync:Le});return}else if(nt.matches)me=nt.matches;else{bn(k,$,oi(404,{pathname:W}),{flushSync:Le});return}}let Qe=Ff(me,W);ye.set(k,Ge);let at=pe,jt=Ol(l,c,Ue,me,Qe,i,be),Yt=(await cr(Ue,jt,be,k))[Qe.route.id];if(ye.get(k)===Ge&&ye.delete(k),!Ue.signal.aborted){if(ue.has(k)){Zt(k,Ts(void 0));return}if(go(Yt))if(Ee>at){Zt(k,Ts(void 0));return}else{re.add(k),await qt(Ue,Yt,!1,{preventScrollReset:Ae});return}if(Fr(Yt)){bn(k,$,Yt.error);return}Zt(k,Ts(Yt.data))}}async function qt(k,$,W,{submission:me,fetcherSubmission:be,preventScrollReset:Oe,replace:Le}={}){W||(C==null||C.resolve(),C=null),$.response.headers.has("X-Remix-Revalidate")&&(H=!0);let Ae=$.response.headers.get("Location");ot(Ae,"Expected a Location header on the redirect Response"),Ae=e0(Ae,new URL(k.url),p,n.history);let Ie=Rc(A.location,Ae,{_isRedirect:!0});if(t){let jt=!1;if($.response.headers.has("X-Remix-Reload-Document"))jt=!0;else if(Yy(Ae)){const en=_A(Ae,!0);jt=en.origin!==e.location.origin||ci(en.pathname,p)==null}if(jt){Le?e.location.replace(Ae):e.location.assign(Ae);return}}O=null;let Ve=Le===!0||$.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ge,formAction:Ue,formEncType:Qe}=A.navigation;!me&&!be&&Ge&&Ue&&Qe&&(me=a0(A.navigation));let at=me||be;if(eN.has($.response.status)&&at&&nr(at.formMethod))await dn(Ve,Ie,{submission:{...at,formAction:Ae},preventScrollReset:Oe||P,enableViewTransition:W?L:void 0});else{let jt=Vg(Ie,me);await dn(Ve,Ie,{overrideNavigation:jt,fetcherSubmission:be,preventScrollReset:Oe||P,enableViewTransition:W?L:void 0})}}async function cr(k,$,W,me){var Le;let be,Oe={};try{be=await cN(y,k,$,me,W,!1)}catch(Ae){return $.filter(Ie=>Ie.shouldLoad).forEach(Ie=>{Oe[Ie.route.id]={type:"error",error:Ae}}),Oe}if(k.signal.aborted)return Oe;if(!nr(k.method))for(let Ae of $){if(((Le=be[Ae.route.id])==null?void 0:Le.type)==="error")break;!be.hasOwnProperty(Ae.route.id)&&!A.loaderData.hasOwnProperty(Ae.route.id)&&(!A.errors||!A.errors.hasOwnProperty(Ae.route.id))&&Ae.shouldCallHandler()&&(be[Ae.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Ae.route.id}`)})}for(let[Ae,Ie]of Object.entries(be))if(EN(Ie)){let Ve=Ie.result;Oe[Ae]={type:"redirect",response:mN(Ve,k,Ae,$,p)}}else Oe[Ae]=await dN(Ie);return Oe}async function Yr(k,$,W,me){let be=cr(W,k,me,null),Oe=Promise.all($.map(async Ie=>{if(Ie.matches&&Ie.match&&Ie.request&&Ie.controller){let Ge=(await cr(Ie.request,Ie.matches,me,Ie.key))[Ie.match.route.id];return{[Ie.key]:Ge}}else return Promise.resolve({[Ie.key]:{type:"error",error:oi(404,{pathname:Ie.path})}})})),Le=await be,Ae=(await Oe).reduce((Ie,Ve)=>Object.assign(Ie,Ve),{});return{loaderResults:Le,fetcherResults:Ae}}function Wn(){H=!0,_e.forEach((k,$)=>{ye.has($)&&ae.add($),de($)})}function Zt(k,$,W={}){A.fetchers.set(k,$),Ye({fetchers:new Map(A.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function bn(k,$,W,me={}){let be=_a(A.matches,$);ve(k),Ye({errors:{[be.route.id]:W},fetchers:new Map(A.fetchers)},{flushSync:(me&&me.flushSync)===!0})}function xi(k){return we.set(k,(we.get(k)||0)+1),ue.has(k)&&ue.delete(k),A.fetchers.get(k)||tN}function oe(k,$){de(k,$==null?void 0:$.reason),Zt(k,Ts(null))}function ve(k){let $=A.fetchers.get(k);ye.has(k)&&!($&&$.state==="loading"&&j.has(k))&&de(k),_e.delete(k),j.delete(k),re.delete(k),ue.delete(k),ae.delete(k),A.fetchers.delete(k)}function Ce(k){let $=(we.get(k)||0)-1;$<=0?(we.delete(k),ue.add(k)):we.set(k,$),Ye({fetchers:new Map(A.fetchers)})}function de(k,$){let W=ye.get(k);W&&(W.abort($),ye.delete(k))}function De(k){for(let $ of k){let W=xi($),me=Ts(W.data);A.fetchers.set($,me)}}function Pe(){let k=[],$=!1;for(let W of re){let me=A.fetchers.get(W);ot(me,`Expected fetcher: ${W}`),me.state==="loading"&&(re.delete(W),k.push(W),$=!0)}return De(k),$}function Kt(k){let $=[];for(let[W,me]of j)if(me<k){let be=A.fetchers.get(W);ot(be,`Expected fetcher: ${W}`),be.state==="loading"&&(de(W),j.delete(W),$.push(W))}return De($),$.length>0}function lt(k,$){let W=A.blockers.get(k)||ic;return Se.get(k)!==$&&Se.set(k,$),W}function At(k){A.blockers.delete(k),Se.delete(k)}function Tt(k,$){let W=A.blockers.get(k)||ic;ot(W.state==="unblocked"&&$.state==="blocked"||W.state==="blocked"&&$.state==="blocked"||W.state==="blocked"&&$.state==="proceeding"||W.state==="blocked"&&$.state==="unblocked"||W.state==="proceeding"&&$.state==="unblocked",`Invalid blocker state transition: ${W.state} -> ${$.state}`);let me=new Map(A.blockers);me.set(k,$),Ye({blockers:me})}function mn({currentLocation:k,nextLocation:$,historyAction:W}){if(Se.size===0)return;Se.size>1&&hn(!1,"A router only supports one blocker at a time");let me=Array.from(Se.entries()),[be,Oe]=me[me.length-1],Le=A.blockers.get(be);if(!(Le&&Le.state==="proceeding")&&Oe({currentLocation:k,nextLocation:$,historyAction:W}))return be}function sn(k){let $=oi(404,{pathname:k}),W=m||f,{matches:me,route:be}=If(W);return{notFoundMatches:me,route:be,error:$}}function Qr(k,$,W){if(D=k,M=$,z=W||null,!B&&A.navigation===Pg){B=!0;let me=Po(A.location,A.matches);me!=null&&Ye({restoreScrollPosition:me})}return()=>{D=null,M=null,z=null}}function Or(k,$){return z&&z(k,$.map(me=>Rx(me,A.loaderData)))||k.key}function Mr(k,$){if(D&&M){let W=Or(k,$);D[W]=M()}}function Po(k,$){if(D){let W=Or(k,$),me=D[W];if(typeof me=="number")return me}return null}function Zi(k,$,W){if(n.patchRoutesOnNavigation)if(k){if(Object.keys(k[0].params).length>0)return{active:!0,matches:hc($,W,p,!0)}}else return{active:!0,matches:hc($,W,p,!0)||[]};return{active:!1,matches:null}}async function hr(k,$,W,me){if(!n.patchRoutesOnNavigation)return{type:"success",matches:k};let be=k;for(;;){let Oe=m==null,Le=m||f,Ae=c;try{await n.patchRoutesOnNavigation({signal:W,path:$,matches:be,fetcherKey:me,patch:(Ge,Ue)=>{W.aborted||Xb(Ge,Ue,Le,Ae,l,!1)}})}catch(Ge){return{type:"error",error:Ge,partialMatches:be}}finally{Oe&&!W.aborted&&(f=[...f])}if(W.aborted)return{type:"aborted"};let Ie=ya(Le,$,p),Ve=null;if(Ie){if(Object.keys(Ie[0].params).length===0)return{type:"success",matches:Ie};if(Ve=hc(Le,$,p,!0),!(Ve&&be.length<Ve.length&&Ni(be,Ve.slice(0,be.length))))return{type:"success",matches:Ie}}if(Ve||(Ve=hc(Le,$,p,!0)),!Ve||Ni(be,Ve))return{type:"success",matches:null};be=Ve}}function Ni(k,$){return k.length===$.length&&k.every((W,me)=>W.route.id===$[me].route.id)}function cu(k){c={},m=Ic(k,l,void 0,c)}function es(k,$,W=!1){let me=m==null;Xb(k,$,m||f,c,l,W),me&&(f=[...f],Ye({}))}return ne={get basename(){return p},get future(){return v},get state(){return A},get routes(){return f},get window(){return e},initialize:Be,subscribe:St,enableScrollRestoration:Qr,navigate:Ot,fetch:Pt,revalidate:Qn,createHref:k=>n.history.createHref(k),encodeLocation:k=>n.history.encodeLocation(k),getFetcher:xi,resetFetcher:oe,deleteFetcher:Ce,dispose:st,getBlocker:lt,deleteBlocker:At,patchRoutes:es,_internalFetchControllers:ye,_internalSetRoutes:cu,_internalSetStateDoNotUseOrYouWillBreakYourApp(k){Ye(k)}},n.unstable_instrumentations&&(ne=$x(ne,n.unstable_instrumentations.map(k=>k.router).filter(Boolean))),ne}function iN(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function uy(n,e,t,i,a,l){let c,f;if(a){c=[];for(let p of e)if(c.push(p),p.route.id===a){f=p;break}}else c=e,f=e[e.length-1];let m=Fd(i||".",Hd(c),ci(n.pathname,t)||n.pathname,l==="path");if(i==null&&(m.search=n.search,m.hash=n.hash),(i==null||i===""||i===".")&&f){let p=Wy(m.search);if(f.route.index&&!p)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&p){let y=new URLSearchParams(m.search),v=y.getAll("index");y.delete("index"),v.filter(w=>w).forEach(w=>y.append("index",w));let S=y.toString();m.search=S?`?${S}`:""}}return t!=="/"&&(m.pathname=zx({basename:t,pathname:m.pathname})),Xi(m)}function Yb(n,e,t){if(!t||!iN(t))return{path:e};if(t.formMethod&&!SN(t.formMethod))return{path:e,error:oi(405,{method:t.formMethod})};let i=()=>({path:e,error:oi(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=VA(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!nr(l))return i();let v=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((S,[w,D])=>`${S}${w}=${D}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:v}}}else if(t.formEncType==="application/json"){if(!nr(l))return i();try{let v=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:v,text:void 0}}}catch{return i()}}}ot(typeof FormData=="function","FormData is not available in this environment");let f,m;if(t.formData)f=fy(t.formData),m=t.formData;else if(t.body instanceof FormData)f=fy(t.body),m=t.body;else if(t.body instanceof URLSearchParams)f=t.body,m=t0(f);else if(t.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(t.body),m=t0(f)}catch{return i()}let p={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(nr(p.formMethod))return{path:e,submission:p};let y=Ls(e);return n&&y.search&&Wy(y.search)&&f.append("index",""),y.search=`?${f}`,{path:Xi(y),submission:p}}function Qb(n,e,t,i,a,l,c,f,m,p,y,v,S,w,D,z,M,B,F,G,ee){var Te;let ie=G?Fr(G[1])?G[1].error:G[1].data:void 0,ne=a.createURL(l.location),A=a.createURL(m),I;if(y&&l.errors){let H=Object.keys(l.errors)[0];I=c.findIndex(ae=>ae.route.id===H)}else if(G&&Fr(G[1])){let H=G[0];I=c.findIndex(ae=>ae.route.id===H)-1}let C=G?G[1].statusCode:void 0,P=C&&C>=400,O={currentUrl:ne,currentParams:((Te=l.matches[0])==null?void 0:Te.params)||{},nextUrl:A,nextParams:c[0].params,...f,actionResult:ie,actionStatus:C},L=qc(c),x=c.map((H,ae)=>{let{route:ye}=H,pe=null;if(I!=null&&ae>I?pe=!1:ye.lazy?pe=!0:Qy(ye)?y?pe=cy(ye,l.loaderData,l.errors):sN(l.loaderData,l.matches[ae],H)&&(pe=!0):pe=!1,pe!==null)return hy(t,i,n,L,H,p,e,pe);let Ee=!1;typeof ee=="boolean"?Ee=ee:P?Ee=!1:(v||ne.pathname+ne.search===A.pathname+A.search||ne.search!==A.search||aN(l.matches[ae],H))&&(Ee=!0);let j={...O,defaultShouldRevalidate:Ee},re=yc(H,j);return hy(t,i,n,L,H,p,e,re,j,ee)}),ge=[];return D.forEach((H,ae)=>{if(y||!c.some(ue=>ue.route.id===H.routeId)||w.has(ae))return;let ye=l.fetchers.get(ae),pe=ye&&ye.state!=="idle"&&ye.data===void 0,Ee=ya(M,H.path,B);if(!Ee){if(F&&pe)return;ge.push({key:ae,routeId:H.routeId,path:H.path,matches:null,match:null,request:null,controller:null});return}if(z.has(ae))return;let j=Ff(Ee,H.path),re=new AbortController,_e=bl(a,H.path,re.signal),we=null;if(S.has(ae))S.delete(ae),we=Ol(t,i,_e,Ee,j,p,e);else if(pe)v&&(we=Ol(t,i,_e,Ee,j,p,e));else{let ue;typeof ee=="boolean"?ue=ee:P?ue=!1:ue=v;let Se={...O,defaultShouldRevalidate:ue};yc(j,Se)&&(we=Ol(t,i,_e,Ee,j,p,e,Se))}we&&ge.push({key:ae,routeId:H.routeId,path:H.path,matches:we,match:j,request:_e,controller:re})}),{dsMatches:x,revalidatingFetchers:ge}}function Qy(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function cy(n,e,t){if(n.lazy)return!0;if(!Qy(n))return!1;let i=e!=null&&n.id in e,a=t!=null&&t[n.id]!==void 0;return!i&&a?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!a}function sN(n,e,t){let i=!e||t.route.id!==e.route.id,a=!n.hasOwnProperty(t.route.id);return i||a}function aN(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function yc(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Xb(n,e,t,i,a,l){let c;if(n){let p=i[n];ot(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),c=p.children}else c=t;let f=[],m=[];if(e.forEach(p=>{let y=c.find(v=>NA(p,v));y?m.push({existingRoute:y,newRoute:p}):f.push(p)}),f.length>0){let p=Ic(f,a,[n||"_","patch",String((c==null?void 0:c.length)||"0")],i);c.push(...p)}if(l&&m.length>0)for(let p=0;p<m.length;p++){let{existingRoute:y,newRoute:v}=m[p],S=y,[w]=Ic([v],a,[],{},!0);Object.assign(S,{element:w.element?w.element:S.element,errorElement:w.errorElement?w.errorElement:S.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:S.hydrateFallbackElement})}}function NA(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var a;return(a=e.children)==null?void 0:a.some(l=>NA(t,l))}):!1}var Wb=new WeakMap,DA=({key:n,route:e,manifest:t,mapRouteProperties:i})=>{let a=t[e.id];if(ot(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let l=a.lazy[n];if(!l)return;let c=Wb.get(a);c||(c={},Wb.set(a,c));let f=c[n];if(f)return f;let m=(async()=>{let p=Sx(n),v=a[n]!==void 0&&n!=="hasErrorBoundary";if(p)hn(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(v)hn(!1,`Route "${a.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let S=await l();S!=null&&(Object.assign(a,{[n]:S}),Object.assign(a,i(a)))}typeof a.lazy=="object"&&(a.lazy[n]=void 0,Object.values(a.lazy).every(S=>S===void 0)&&(a.lazy=void 0))})();return c[n]=m,m},Jb=new WeakMap;function oN(n,e,t,i,a){let l=t[n.id];if(ot(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let y=Jb.get(l);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let v=(async()=>{ot(typeof n.lazy=="function","No lazy route function found");let S=await n.lazy(),w={};for(let D in S){let z=S[D];if(z===void 0)continue;let M=wx(D),F=l[D]!==void 0&&D!=="hasErrorBoundary";M?hn(!M,"Route property "+D+" is not a supported property to be returned from a lazy route function. This property will be ignored."):F?hn(!F,`Route "${l.id}" has a static property "${D}" defined but its lazy function is also returning a value for this property. The lazy route property "${D}" will be ignored.`):w[D]=z}Object.assign(l,w),Object.assign(l,{...i(l),lazy:void 0})})();return Jb.set(l,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let c=Object.keys(n.lazy),f=[],m;for(let y of c){if(a&&a.includes(y))continue;let v=DA({key:y,route:n,manifest:t,mapRouteProperties:i});v&&(f.push(v),y===e&&(m=v))}let p=f.length>0?Promise.all(f).then(()=>{}):void 0;return p==null||p.catch(()=>{}),m==null||m.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:m}}async function Zb(n){let e=n.matches.filter(a=>a.shouldLoad),t={};return(await Promise.all(e.map(a=>a.resolve()))).forEach((a,l)=>{t[e[l].route.id]=a}),t}async function lN(n){return n.matches.some(e=>e.route.middleware)?OA(n,()=>Zb(n)):Zb(n)}function OA(n,e){return uN(n,e,i=>{if(bN(i))throw i;return i},_N,t);function t(i,a,l){if(l)return Promise.resolve(Object.assign(l.value,{[a]:{type:"error",result:i}}));{let{matches:c}=n,f=Math.min(Math.max(c.findIndex(p=>p.route.id===a),0),Math.max(c.findIndex(p=>p.shouldCallHandler()),0)),m=_a(c,c[f].route.id).route.id;return Promise.resolve({[m]:{type:"error",result:i}})}}}async function uN(n,e,t,i,a){let{matches:l,request:c,params:f,context:m,unstable_pattern:p}=n,y=l.flatMap(S=>S.route.middleware?S.route.middleware.map(w=>[S.route.id,w]):[]);return await MA({request:c,params:f,context:m,unstable_pattern:p},y,e,t,i,a)}async function MA(n,e,t,i,a,l,c=0){let{request:f}=n;if(f.signal.aborted)throw f.signal.reason??new Error(`Request aborted: ${f.method} ${f.url}`);let m=e[c];if(!m)return await t();let[p,y]=m,v,S=async()=>{if(v)throw new Error("You may only call `next()` once per middleware");try{return v={value:await MA(n,e,t,i,a,l,c+1)},v.value}catch(w){return v={value:await l(w,p,v)},v.value}};try{let w=await y(n,S),D=w!=null?i(w):void 0;return a(D)?D:v?D??v.value:(v={value:await S()},v.value)}catch(w){return await l(w,p,v)}}function PA(n,e,t,i,a){let l=DA({key:"middleware",route:i.route,manifest:e,mapRouteProperties:n}),c=oN(i.route,nr(t.method)?"action":"loader",e,n,a);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function hy(n,e,t,i,a,l,c,f,m=null,p){let y=!1,v=PA(n,e,t,a,l);return{...a,_lazyPromises:v,shouldLoad:f,shouldRevalidateArgs:m,shouldCallHandler(S){return y=!0,m?typeof p=="boolean"?yc(a,{...m,defaultShouldRevalidate:p}):typeof S=="boolean"?yc(a,{...m,defaultShouldRevalidate:S}):yc(a,m):f},resolve(S){let{lazy:w,loader:D,middleware:z}=a.route,M=y||f||S&&!nr(t.method)&&(w||D),B=z&&z.length>0&&!D&&!w;return M&&(nr(t.method)||!B)?hN({request:t,unstable_pattern:i,match:a,lazyHandlerPromise:v==null?void 0:v.handler,lazyRoutePromise:v==null?void 0:v.route,handlerOverride:S,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Ol(n,e,t,i,a,l,c,f=null){return i.map(m=>m.route.id!==a.route.id?{...m,shouldLoad:!1,shouldRevalidateArgs:f,shouldCallHandler:()=>!1,_lazyPromises:PA(n,e,t,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:hy(n,e,t,qc(i),m,l,c,!0,f))}async function cN(n,e,t,i,a,l){t.some(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware})&&await Promise.all(t.map(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware}));let c={request:e,unstable_pattern:qc(t),params:t[0].params,context:a,matches:t},m=await n({...c,fetcherKey:i,runClientMiddleware:p=>{let y=c;return OA(y,()=>p({...y,fetcherKey:i,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(p=>{var y,v;return[(y=p._lazyPromises)==null?void 0:y.handler,(v=p._lazyPromises)==null?void 0:v.route]}))}catch{}return m}async function hN({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:i,lazyRoutePromise:a,handlerOverride:l,scopedContext:c}){let f,m,p=nr(n.method),y=p?"action":"loader",v=S=>{let w,D=new Promise((B,F)=>w=F);m=()=>w(),n.signal.addEventListener("abort",m);let z=B=>typeof S!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${y}" [routeId: ${t.route.id}]`)):S({request:n,unstable_pattern:e,params:t.params,context:c},...B!==void 0?[B]:[]),M=(async()=>{try{return{type:"data",result:await(l?l(F=>z(F)):z())}}catch(B){return{type:"error",result:B}}})();return Promise.race([M,D])};try{let S=p?t.route.action:t.route.loader;if(i||a)if(S){let w,[D]=await Promise.all([v(S).catch(z=>{w=z}),i,a]);if(w!==void 0)throw w;f=D}else{await i;let w=p?t.route.action:t.route.loader;if(w)[f]=await Promise.all([v(w),a]);else if(y==="action"){let D=new URL(n.url),z=D.pathname+D.search;throw oi(405,{method:n.method,pathname:z,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(S)f=await v(S);else{let w=new URL(n.url),D=w.pathname+w.search;throw oi(404,{pathname:D})}}catch(S){return{type:"error",result:S}}finally{m&&n.signal.removeEventListener("abort",m)}return f}async function fN(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function dN(n){var i,a,l,c,f;let{result:e,type:t}=n;if(Xy(e)){let m;try{m=await fN(e)}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Fc(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:"data",data:m,statusCode:e.status,headers:e.headers}}return t==="error"?s0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:yN(e),statusCode:xc(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:xc(e)?e.status:void 0}:s0(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function mN(n,e,t,i,a){let l=n.headers.get("Location");if(ot(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!Yy(l)){let c=i.slice(0,i.findIndex(f=>f.route.id===t)+1);l=uy(new URL(e.url),c,a,l),n.headers.set("Location",l)}return n}function e0(n,e,t,i){let a=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(Yy(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(a.includes(c.protocol))throw new Error("Invalid redirect location");let f=ci(c.pathname,t)!=null;if(c.origin===e.origin&&f)return c.pathname+c.search+c.hash}try{let l=i.createURL(n);if(a.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function bl(n,e,t,i){let a=n.createURL(VA(e)).toString(),l={signal:t};if(i&&nr(i.formMethod)){let{formMethod:c,formEncType:f}=i;l.method=c.toUpperCase(),f==="application/json"?(l.headers=new Headers({"Content-Type":f}),l.body=JSON.stringify(i.json)):f==="text/plain"?l.body=i.text:f==="application/x-www-form-urlencoded"&&i.formData?l.body=fy(i.formData):l.body=i.formData}return new Request(a,l)}function fy(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function t0(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function pN(n,e,t,i=!1,a=!1){let l={},c=null,f,m=!1,p={},y=t&&Fr(t[1])?t[1].error:void 0;return n.forEach(v=>{if(!(v.route.id in e))return;let S=v.route.id,w=e[S];if(ot(!go(w),"Cannot handle redirect results in processLoaderData"),Fr(w)){let D=w.error;if(y!==void 0&&(D=y,y=void 0),c=c||{},a)c[S]=D;else{let z=_a(n,S);c[z.route.id]==null&&(c[z.route.id]=D)}i||(l[S]=xA),m||(m=!0,f=xc(w.error)?w.error.status:500),w.headers&&(p[S]=w.headers)}else l[S]=w.data,w.statusCode&&w.statusCode!==200&&!m&&(f=w.statusCode),w.headers&&(p[S]=w.headers)}),y!==void 0&&t&&(c={[t[0]]:y},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:f||200,loaderHeaders:p}}function n0(n,e,t,i,a,l){let{loaderData:c,errors:f}=pN(e,t,i);return a.filter(m=>!m.matches||m.matches.some(p=>p.shouldLoad)).forEach(m=>{let{key:p,match:y,controller:v}=m;if(v&&v.signal.aborted)return;let S=l[p];if(ot(S,"Did not find corresponding fetcher result"),Fr(S)){let w=_a(n.matches,y==null?void 0:y.route.id);f&&f[w.route.id]||(f={...f,[w.route.id]:S.error}),n.fetchers.delete(p)}else if(go(S))ot(!1,"Unhandled fetcher revalidation redirect");else{let w=Ts(S.data);n.fetchers.set(p,w)}}),{loaderData:c,errors:f}}function r0(n,e,t,i){let a=Object.entries(e).filter(([,l])=>l!==xA).reduce((l,[c,f])=>(l[c]=f,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(a[c]=n[c]),i&&i.hasOwnProperty(c))break}return a}function i0(n){return n?Fr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function _a(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function If(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function oi(n,{pathname:e,routeId:t,method:i,type:a,message:l}={}){let c="Unknown Server Error",f="Unknown @remix-run/router error";return n===400?(c="Bad Request",i&&e&&t?f=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:a==="invalid-body"&&(f="Unable to encode submission body")):n===403?(c="Forbidden",f=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",f=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",i&&e&&t?f=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:i&&(f=`Invalid request method "${i.toUpperCase()}"`)),new Fc(n||500,c,new Error(f),!0)}function xf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,a]=e[t];if(go(a))return{key:i,result:a}}}function VA(n){let e=typeof n=="string"?Ls(n):n;return Xi({...e,hash:""})}function gN(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function yN(n){var e,t;return new Fc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function _N(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&vN(t))}function vN(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function EN(n){return Xy(n.result)&&RA.has(n.result.status)}function Fr(n){return n.type==="error"}function go(n){return(n&&n.type)==="redirect"}function s0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function Xy(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function TN(n){return RA.has(n)}function bN(n){return Xy(n)&&TN(n.status)&&n.headers.has("Location")}function SN(n){return Zx.has(n.toUpperCase())}function nr(n){return Wx.has(n.toUpperCase())}function Wy(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Ff(n,e){let t=typeof e=="string"?Ls(e).search:e.search;if(n[n.length-1].route.index&&Wy(t||""))return n[n.length-1];let i=bA(n);return i[i.length-1]}function a0(n){let{formMethod:e,formAction:t,formEncType:i,text:a,formData:l,json:c}=n;if(!(!e||!t||!i)){if(a!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:a};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function Vg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function AN(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function sc(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function wN(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Ts(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function CN(n,e){try{let t=n.sessionStorage.getItem(IA);if(t){let i=JSON.parse(t);for(let[a,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(a,new Set(l||[]))}}catch{}}function RN(n,e){if(e.size>0){let t={};for(let[i,a]of e)t[i]=[...a];try{n.sessionStorage.setItem(IA,JSON.stringify(t))}catch(i){hn(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function o0(){let n,e,t=new Promise((i,a)=>{n=async l=>{i(l);try{await t}catch{}},e=async l=>{a(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var xo=V.createContext(null);xo.displayName="DataRouter";var Gc=V.createContext(null);Gc.displayName="DataRouterState";var LA=V.createContext(!1);function IN(){return V.useContext(LA)}var Jy=V.createContext({isTransitioning:!1});Jy.displayName="ViewTransition";var jA=V.createContext(new Map);jA.displayName="Fetchers";var xN=V.createContext(null);xN.displayName="Await";var $r=V.createContext(null);$r.displayName="Navigation";var qd=V.createContext(null);qd.displayName="Location";var hi=V.createContext({outlet:null,matches:[],isDataRoute:!1});hi.displayName="Route";var Zy=V.createContext(null);Zy.displayName="RouteError";var kA="REACT_ROUTER_ERROR",NN="REDIRECT",DN="ROUTE_ERROR_RESPONSE";function ON(n){if(n.startsWith(`${kA}:${NN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function MN(n){if(n.startsWith(`${kA}:${DN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Fc(e.status,e.statusText,e.data)}catch{}}function PN(n,{relative:e}={}){ot(Zl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=V.useContext($r),{hash:a,pathname:l,search:c}=$c(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Gi([t,l])),i.createHref({pathname:f,search:c,hash:a})}function Zl(){return V.useContext(qd)!=null}function fi(){return ot(Zl(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(qd).location}var UA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zA(n){V.useContext($r).static||V.useLayoutEffect(n)}function No(){let{isDataRoute:n}=V.useContext(hi);return n?QN():VN()}function VN(){ot(Zl(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(xo),{basename:e,navigator:t}=V.useContext($r),{matches:i}=V.useContext(hi),{pathname:a}=fi(),l=JSON.stringify(Hd(i)),c=V.useRef(!1);return zA(()=>{c.current=!0}),V.useCallback((m,p={})=>{if(hn(c.current,UA),!c.current)return;if(typeof m=="number"){t.go(m);return}let y=Fd(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Gi([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,l,a,n])}var LN=V.createContext(null);function jN(n){let e=V.useContext(hi).outlet;return V.useMemo(()=>e&&V.createElement(LN.Provider,{value:n},e),[e,n])}function Gd(){let{matches:n}=V.useContext(hi),e=n[n.length-1];return e?e.params:{}}function $c(n,{relative:e}={}){let{matches:t}=V.useContext(hi),{pathname:i}=fi(),a=JSON.stringify(Hd(t));return V.useMemo(()=>Fd(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function kN(n,e,t,i,a){ot(Zl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=V.useContext($r),{matches:c}=V.useContext(hi),f=c[c.length-1],m=f?f.params:{},p=f?f.pathname:"/",y=f?f.pathnameBase:"/",v=f&&f.route;{let F=v&&v.path||"";HA(p,!v||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let S=fi(),w;w=S;let D=w.pathname||"/",z=D;if(y!=="/"){let F=y.replace(/^\//,"").split("/");z="/"+D.replace(/^\//,"").split("/").slice(F.length).join("/")}let M=ya(n,{pathname:z});return hn(v||M!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),hn(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),FN(M&&M.map(F=>Object.assign({},F,{params:Object.assign({},m,F.params),pathname:Gi([y,l.encodeLocation?l.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?y:Gi([y,l.encodeLocation?l.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),c,t,i,a)}function UN(){let n=YN(),e=xc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:l},"ErrorBoundary")," or"," ",V.createElement("code",{style:l},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:a},t):null,c)}var zN=V.createElement(UN,null),BA=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=MN(n.digest);t&&(n=t)}let e=n!==void 0?V.createElement(hi.Provider,{value:this.props.routeContext},V.createElement(Zy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?V.createElement(BN,{error:n},e):e}};BA.contextType=LA;var Lg=new WeakMap;function BN({children:n,error:e}){let{basename:t}=V.useContext($r);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=ON(e.digest);if(i){let a=Lg.get(e);if(a)throw a;let l=AA(i.location,t);if(SA&&!Lg.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Lg.set(e,c),c}return V.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function HN({routeContext:n,match:e,children:t}){let i=V.useContext(xo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(hi.Provider,{value:n},t)}function FN(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let y=l.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);ot(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,m=-1;if(t)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=y),v.route.id){let{loaderData:S,errors:w}=t,D=v.route.loader&&!S.hasOwnProperty(v.route.id)&&(!w||w[v.route.id]===void 0);if(v.route.lazy||D){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let p=t&&i?(y,v)=>{var S,w;i(y,{location:t.location,params:((w=(S=t.matches)==null?void 0:S[0])==null?void 0:w.params)??{},unstable_pattern:qc(t.matches),errorInfo:v})}:void 0;return l.reduceRight((y,v,S)=>{let w,D=!1,z=null,M=null;t&&(w=c&&v.route.id?c[v.route.id]:void 0,z=v.route.errorElement||zN,f&&(m<0&&S===0?(HA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,M=null):m===S&&(D=!0,M=v.route.hydrateFallbackElement||null)));let B=e.concat(l.slice(0,S+1)),F=()=>{let G;return w?G=z:D?G=M:v.route.Component?G=V.createElement(v.route.Component,null):v.route.element?G=v.route.element:G=y,V.createElement(HN,{match:v,routeContext:{outlet:y,matches:B,isDataRoute:t!=null},children:G})};return t&&(v.route.ErrorBoundary||v.route.errorElement||S===0)?V.createElement(BA,{location:t.location,revalidation:t.revalidation,component:z,error:w,children:F(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:p}):F()},null)}function e_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qN(n){let e=V.useContext(xo);return ot(e,e_(n)),e}function GN(n){let e=V.useContext(Gc);return ot(e,e_(n)),e}function $N(n){let e=V.useContext(hi);return ot(e,e_(n)),e}function t_(n){let e=$N(n),t=e.matches[e.matches.length-1];return ot(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function KN(){return t_("useRouteId")}function YN(){var i;let n=V.useContext(Zy),e=GN("useRouteError"),t=t_("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function QN(){let{router:n}=qN("useNavigate"),e=t_("useNavigate"),t=V.useRef(!1);return zA(()=>{t.current=!0}),V.useCallback(async(a,l={})=>{hn(t.current,UA),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var l0={};function HA(n,e,t){!e&&!l0[n]&&(l0[n]=!0,hn(!1,t))}var u0={};function c0(n,e){!n&&!u0[e]&&(u0[e]=!0,console.warn(e))}var XN="useOptimistic",h0=HI[XN],WN=()=>{};function JN(n){return h0?h0(n):[n,WN]}function ZN(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&hn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:V.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&hn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:V.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&hn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:V.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var eD=["HydrateFallback","hydrateFallbackElement"],tD=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function nD({router:n,flushSync:e,onError:t,unstable_useTransitions:i}){i=IN()||i;let[l,c]=V.useState(n.state),[f,m]=JN(l),[p,y]=V.useState(),[v,S]=V.useState({isTransitioning:!1}),[w,D]=V.useState(),[z,M]=V.useState(),[B,F]=V.useState(),G=V.useRef(new Map),ee=V.useCallback((I,{deletedFetchers:C,newErrors:P,flushSync:O,viewTransitionOpts:L})=>{P&&t&&Object.values(P).forEach(ge=>{var Te;return t(ge,{location:I.location,params:((Te=I.matches[0])==null?void 0:Te.params)??{},unstable_pattern:qc(I.matches)})}),I.fetchers.forEach((ge,Te)=>{ge.data!==void 0&&G.current.set(Te,ge.data)}),C.forEach(ge=>G.current.delete(ge)),c0(O===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let x=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(c0(L==null||x,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!L||!x){e&&O?e(()=>c(I)):i===!1?c(I):V.startTransition(()=>{i===!0&&m(ge=>f0(ge,I)),c(I)});return}if(e&&O){e(()=>{z&&(w==null||w.resolve(),z.skipTransition()),S({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let ge=n.window.document.startViewTransition(()=>{e(()=>c(I))});ge.finished.finally(()=>{e(()=>{D(void 0),M(void 0),y(void 0),S({isTransitioning:!1})})}),e(()=>M(ge));return}z?(w==null||w.resolve(),z.skipTransition(),F({state:I,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(y(I),S({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[n.window,e,z,w,i,m,t]);V.useLayoutEffect(()=>n.subscribe(ee),[n,ee]),V.useEffect(()=>{v.isTransitioning&&!v.flushSync&&D(new tD)},[v]),V.useEffect(()=>{if(w&&p&&n.window){let I=p,C=w.promise,P=n.window.document.startViewTransition(async()=>{i===!1?c(I):V.startTransition(()=>{i===!0&&m(O=>f0(O,I)),c(I)}),await C});P.finished.finally(()=>{D(void 0),M(void 0),y(void 0),S({isTransitioning:!1})}),M(P)}},[p,w,n.window,i,m]),V.useEffect(()=>{w&&p&&f.location.key===p.location.key&&w.resolve()},[w,z,f.location,p]),V.useEffect(()=>{!v.isTransitioning&&B&&(y(B.state),S({isTransitioning:!0,flushSync:!1,currentLocation:B.currentLocation,nextLocation:B.nextLocation}),F(void 0))},[v.isTransitioning,B]);let ie=V.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:I=>n.navigate(I),push:(I,C,P)=>n.navigate(I,{state:C,preventScrollReset:P==null?void 0:P.preventScrollReset}),replace:(I,C,P)=>n.navigate(I,{replace:!0,state:C,preventScrollReset:P==null?void 0:P.preventScrollReset})}),[n]),ne=n.basename||"/",A=V.useMemo(()=>({router:n,navigator:ie,static:!1,basename:ne,onError:t}),[n,ie,ne,t]);return V.createElement(V.Fragment,null,V.createElement(xo.Provider,{value:A},V.createElement(Gc.Provider,{value:f},V.createElement(jA.Provider,{value:G.current},V.createElement(Jy.Provider,{value:v},V.createElement(sD,{basename:ne,location:f.location,navigationType:f.historyAction,navigator:ie,unstable_useTransitions:i},V.createElement(rD,{routes:n.routes,future:n.future,state:f,onError:t})))))),null)}function f0(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var rD=V.memo(iD);function iD({routes:n,future:e,state:t,onError:i}){return kN(n,void 0,t,i,e)}function Aa({to:n,replace:e,state:t,relative:i}){ot(Zl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=V.useContext($r);hn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=V.useContext(hi),{pathname:c}=fi(),f=No(),m=Fd(n,Hd(l),c,i==="path"),p=JSON.stringify(m);return V.useEffect(()=>{f(JSON.parse(p),{replace:e,state:t,relative:i})},[f,p,i,e,t]),null}function FA(n){return jN(n.context)}function sD({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){ot(!Zl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),m=V.useMemo(()=>({basename:f,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[f,a,l,c]);typeof t=="string"&&(t=Ls(t));let{pathname:p="/",search:y="",hash:v="",state:S=null,key:w="default"}=t,D=V.useMemo(()=>{let z=ci(p,f);return z==null?null:{location:{pathname:z,search:y,hash:v,state:S,key:w},navigationType:i}},[f,p,y,v,S,w,i]);return hn(D!=null,`<Router basename="${f}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:V.createElement($r.Provider,{value:m},V.createElement(qd.Provider,{children:e,value:D}))}var qf="get",Gf="application/x-www-form-urlencoded";function $d(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function aD(n){return $d(n)&&n.tagName.toLowerCase()==="button"}function oD(n){return $d(n)&&n.tagName.toLowerCase()==="form"}function lD(n){return $d(n)&&n.tagName.toLowerCase()==="input"}function uD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function cD(n,e){return n.button===0&&(!e||e==="_self")&&!uD(n)}function dy(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let i=n[t];return e.concat(Array.isArray(i)?i.map(a=>[t,a]):[[t,i]])},[]))}function hD(n,e){let t=dy(n);return e&&e.forEach((i,a)=>{t.has(a)||e.getAll(a).forEach(l=>{t.append(a,l)})}),t}var Nf=null;function fD(){if(Nf===null)try{new FormData(document.createElement("form"),0),Nf=!1}catch{Nf=!0}return Nf}var dD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jg(n){return n!=null&&!dD.has(n)?(hn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gf}"`),null):n}function mD(n,e){let t,i,a,l,c;if(oD(n)){let f=n.getAttribute("action");i=f?ci(f,e):null,t=n.getAttribute("method")||qf,a=jg(n.getAttribute("enctype"))||Gf,l=new FormData(n)}else if(aD(n)||lD(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?ci(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||qf,a=jg(n.getAttribute("formenctype"))||jg(f.getAttribute("enctype"))||Gf,l=new FormData(f,n),!fD()){let{name:p,type:y,value:v}=n;if(y==="image"){let S=p?`${p}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else p&&l.append(p,v)}}else{if($d(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=qf,i=null,a=Gf,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function n_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function pD(n,e,t,i){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&ci(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function gD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function _D(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await gD(l,t);return c.links?c.links():[]}return[]}));return bD(i.flat(1).filter(yD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function d0(n,e,t,i,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,f=(m,p)=>{var y;return t[p].pathname!==m.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>c(m,p)||f(m,p)):l==="data"?e.filter((m,p)=>{var v;let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function vD(n,e,{includeHydrateFallback:t}={}){return ED(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function ED(n){return[...new Set(n)]}function TD(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function bD(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(TD(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function qA(){let n=V.useContext(xo);return n_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function SD(){let n=V.useContext(Gc);return n_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var r_=V.createContext(void 0);r_.displayName="FrameworkContext";function GA(){let n=V.useContext(r_);return n_(n,"You must render this element inside a <HydratedRouter> element"),n}function AD(n,e){let t=V.useContext(r_),[i,a]=V.useState(!1),[l,c]=V.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,S=V.useRef(null);V.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let z=B=>{B.forEach(F=>{c(F.isIntersecting)})},M=new IntersectionObserver(z,{threshold:.5});return S.current&&M.observe(S.current),()=>{M.disconnect()}}},[n]),V.useEffect(()=>{if(i){let z=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(z)}}},[i]);let w=()=>{a(!0)},D=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:ac(f,w),onBlur:ac(m,D),onMouseEnter:ac(p,w),onMouseLeave:ac(y,D),onTouchStart:ac(v,w)}]:[!1,S,{}]}function ac(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function wD({page:n,...e}){let{router:t}=qA(),i=V.useMemo(()=>ya(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?V.createElement(RD,{page:n,matches:i,...e}):null}function CD(n){let{manifest:e,routeModules:t}=GA(),[i,a]=V.useState([]);return V.useEffect(()=>{let l=!1;return _D(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function RD({page:n,matches:e,...t}){let i=fi(),{future:a,manifest:l,routeModules:c}=GA(),{basename:f}=qA(),{loaderData:m,matches:p}=SD(),y=V.useMemo(()=>d0(n,e,p,l,i,"data"),[n,e,p,l,i]),v=V.useMemo(()=>d0(n,e,p,l,i,"assets"),[n,e,p,l,i]),S=V.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let z=new Set,M=!1;if(e.forEach(F=>{var ee;let G=l.routes[F.route.id];!G||!G.hasLoader||(!y.some(ie=>ie.route.id===F.route.id)&&F.route.id in m&&((ee=c[F.route.id])!=null&&ee.shouldRevalidate)||G.hasClientLoader?M=!0:z.add(F.route.id))}),z.size===0)return[];let B=pD(n,f,a.unstable_trailingSlashAwareDataRequests,"data");return M&&z.size>0&&B.searchParams.set("_routes",e.filter(F=>z.has(F.route.id)).map(F=>F.route.id).join(",")),[B.pathname+B.search]},[f,a.unstable_trailingSlashAwareDataRequests,m,i,l,y,e,n,c]),w=V.useMemo(()=>vD(v,l),[v,l]),D=CD(v);return V.createElement(V.Fragment,null,S.map(z=>V.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),w.map(z=>V.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),D.map(({key:z,link:M})=>V.createElement("link",{key:z,nonce:t.nonce,...M,crossOrigin:M.crossOrigin??t.crossOrigin})))}function ID(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var xD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xD&&(window.__reactRouterVersion="7.13.0")}catch{}function ND(n,e){return rN({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:vx({window:e==null?void 0:e.window}),hydrationData:DD(),routes:n,mapRouteProperties:ZN,hydrationRouteProperties:eD,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function DD(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:OD(n.errors)}),n}function OD(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,a]of e)if(a&&a.__type==="RouteErrorResponse")t[i]=new Fc(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let l=window[a.__subType];if(typeof l=="function")try{let c=new l(a.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let l=new Error(a.message);l.stack="",t[i]=l}}else t[i]=a;return t}var $A=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KA=V.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:f,target:m,to:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:S,...w},D){let{basename:z,unstable_useTransitions:M}=V.useContext($r),B=typeof p=="string"&&$A.test(p),F=AA(p,z);p=F.to;let G=PN(p,{relative:a}),[ee,ie,ne]=AD(i,w),A=LD(p,{replace:c,state:f,target:m,preventScrollReset:y,relative:a,viewTransition:v,unstable_defaultShouldRevalidate:S,unstable_useTransitions:M});function I(P){e&&e(P),P.defaultPrevented||A(P)}let C=V.createElement("a",{...w,...ne,href:F.absoluteURL||G,onClick:F.isExternal||l?e:I,ref:ID(D,ie),target:m,"data-discover":!B&&t==="render"?"true":void 0});return ee&&!B?V.createElement(V.Fragment,null,C,V.createElement(wD,{page:G})):C});KA.displayName="Link";var MD=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:f,children:m,...p},y){let v=$c(c,{relative:p.relative}),S=fi(),w=V.useContext(Gc),{navigator:D,basename:z}=V.useContext($r),M=w!=null&&HD(v)&&f===!0,B=D.encodeLocation?D.encodeLocation(v).pathname:v.pathname,F=S.pathname,G=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(F=F.toLowerCase(),G=G?G.toLowerCase():null,B=B.toLowerCase()),G&&z&&(G=ci(G,z)||G);const ee=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let ie=F===B||!a&&F.startsWith(B)&&F.charAt(ee)==="/",ne=G!=null&&(G===B||!a&&G.startsWith(B)&&G.charAt(B.length)==="/"),A={isActive:ie,isPending:ne,isTransitioning:M},I=ie?e:void 0,C;typeof i=="function"?C=i(A):C=[i,ie?"active":null,ne?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(A):l;return V.createElement(KA,{...p,"aria-current":I,className:C,ref:y,style:P,to:c,viewTransition:f},typeof m=="function"?m(A):m)});MD.displayName="NavLink";var PD=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=qf,action:f,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:S,...w},D)=>{let{unstable_useTransitions:z}=V.useContext($r),M=zD(),B=BD(f,{relative:p}),F=c.toLowerCase()==="get"?"get":"post",G=typeof f=="string"&&$A.test(f),ee=ie=>{if(m&&m(ie),ie.defaultPrevented)return;ie.preventDefault();let ne=ie.nativeEvent.submitter,A=(ne==null?void 0:ne.getAttribute("formmethod"))||c,I=()=>M(ne||ie.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:S});z&&t!==!1?V.startTransition(()=>I()):I()};return V.createElement("form",{ref:D,method:F,action:B,onSubmit:i?m:ee,...w,"data-discover":!G&&n==="render"?"true":void 0})});PD.displayName="Form";function VD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YA(n){let e=V.useContext(xo);return ot(e,VD(n)),e}function LD(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let p=No(),y=fi(),v=$c(n,{relative:l});return V.useCallback(S=>{if(cD(S,e)){S.preventDefault();let w=t!==void 0?t:Xi(y)===Xi(v),D=()=>p(n,{replace:w,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});m?V.startTransition(()=>D()):D()}},[y,p,v,t,i,e,n,a,l,c,f,m])}function jD(n){hn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=V.useRef(dy(n)),t=V.useRef(!1),i=fi(),a=V.useMemo(()=>hD(i.search,t.current?null:e.current),[i.search]),l=No(),c=V.useCallback((f,m)=>{const p=dy(typeof f=="function"?f(new URLSearchParams(a)):f);t.current=!0,l("?"+p,m)},[l,a]);return[a,c]}var kD=0,UD=()=>`__${String(++kD)}__`;function zD(){let{router:n}=YA("useSubmit"),{basename:e}=V.useContext($r),t=KN(),i=n.fetch,a=n.navigate;return V.useCallback(async(l,c={})=>{let{action:f,method:m,encType:p,formData:y,body:v}=mD(l,e);if(c.navigate===!1){let S=c.fetcherKey||UD();await i(S,t,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:v,formMethod:c.method||m,formEncType:c.encType||p,flushSync:c.flushSync})}else await a(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:v,formMethod:c.method||m,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,e,t])}function BD(n,{relative:e}={}){let{basename:t}=V.useContext($r),i=V.useContext(hi);ot(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...$c(n||".",{relative:e})},c=fi();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(y=>y==="")){f.delete("index"),m.filter(v=>v).forEach(v=>f.append("index",v));let y=f.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Gi([t,l.pathname])),Xi(l)}function HD(n,{relative:e}={}){let t=V.useContext(Jy);ot(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=YA("useViewTransitionState"),a=$c(n,{relative:e});if(!t.isTransitioning)return!1;let l=ci(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=ci(t.nextLocation.pathname,i)||t.nextLocation.pathname;return fd(a.pathname,c)!=null||fd(a.pathname,l)!=null}var QA=mA();function FD(n){return V.createElement(nD,{flushSync:QA.flushSync,...n})}const qD=V.createContext(void 0),or=()=>dx(),We=gx.withTypes(),GD=({children:n})=>{const e=We(t=>t.auth.loading);return T.jsx(qD.Provider,{value:{isLoading:e},children:n})},$D=()=>{};var m0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},KD=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],f=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},WA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,f=c?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,y=l>>2,v=(l&3)<<4|f>>4;let S=(f&15)<<2|p>>6,w=p&63;m||(w=64,c||(S=64)),i.push(t[y],t[v],t[S],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(XA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):KD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||p==null||v==null)throw new YD;const S=l<<2|f>>4;if(i.push(S),p!==64){const w=f<<4&240|p>>2;if(i.push(w),v!==64){const D=p<<6&192|v;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class YD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QD=function(n){const e=XA(n);return WA.encodeByteArray(e,!0)},dd=function(n){return QD(n).replace(/\./g,"")},JA=function(n){try{return WA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=()=>XD().__FIREBASE_DEFAULTS__,JD=()=>{if(typeof process>"u"||typeof m0>"u")return;const n=m0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ZD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&JA(n[1]);return e&&JSON.parse(e)},Kd=()=>{try{return $D()||WD()||JD()||ZD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ZA=n=>{var e,t;return(t=(e=Kd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},e2=n=>{const e=ZA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},ew=()=>{var n;return(n=Kd())==null?void 0:n.config},tw=n=>{var e;return(e=Kd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[dd(JSON.stringify(t)),dd(JSON.stringify(c)),""].join(".")}const _c={};function r2(){const n={prod:[],emulator:[]};for(const e of Object.keys(_c))_c[e]?n.emulator.push(e):n.prod.push(e);return n}function i2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let p0=!1;function rw(n,e){if(typeof window>"u"||typeof document>"u"||!eu(window.location.host)||_c[n]===e||_c[n]||p0)return;_c[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=r2().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{p0=!0,c()},S}function y(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function v(){const S=i2(i),w=t("text"),D=document.getElementById(w)||document.createElement("span"),z=t("learnmore"),M=document.getElementById(z)||document.createElement("a"),B=t("preprendIcon"),F=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const G=S.element;f(G),y(M,z);const ee=p();m(F,B),G.append(F,D,M,ee),document.body.appendChild(G)}l?(D.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function s2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ar())}function a2(){var e;const n=(e=Kd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function l2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function u2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function c2(){const n=ar();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function h2(){return!a2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function f2(){try{return typeof indexedDB=="object"}catch{return!1}}function d2(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="FirebaseError";class js extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=m2,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kc.prototype.create)}}class Kc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?p2(l,i):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new js(a,f,i)}}function p2(n,e){return n.replace(g2,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const g2=/\{\$([^}]+)}/g;function y2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(g0(l)&&g0(c)){if(!bo(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function g0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _2(n,e){const t=new v2(n,e);return t.subscribe.bind(t)}class v2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");E2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=kg),a.error===void 0&&(a.error=kg),a.complete===void 0&&(a.complete=kg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function E2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function kg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(n){return n&&n._delegate?n._delegate:n}class So{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new t2;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(S2(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:b2(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function b2(n){return n===mo?void 0:n}function S2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new T2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(gt||(gt={}));const w2={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},C2=gt.INFO,R2={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},I2=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=R2[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class i_{constructor(e){this.name=e,this._logLevel=C2,this._logHandler=I2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?w2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const x2=(n,e)=>e.some(t=>n instanceof t);let y0,_0;function N2(){return y0||(y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D2(){return _0||(_0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iw=new WeakMap,my=new WeakMap,sw=new WeakMap,Ug=new WeakMap,s_=new WeakMap;function O2(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(wa(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&iw.set(t,n)}).catch(()=>{}),s_.set(e,n),e}function M2(n){if(my.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});my.set(n,e)}let py={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return my.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function P2(n){py=n(py)}function V2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(zg(this),e,...t);return sw.set(i,e.sort?e.sort():[e]),wa(i)}:D2().includes(n)?function(...e){return n.apply(zg(this),e),wa(iw.get(this))}:function(...e){return wa(n.apply(zg(this),e))}}function L2(n){return typeof n=="function"?V2(n):(n instanceof IDBTransaction&&M2(n),x2(n,N2())?new Proxy(n,py):n)}function wa(n){if(n instanceof IDBRequest)return O2(n);if(Ug.has(n))return Ug.get(n);const e=L2(n);return e!==n&&(Ug.set(n,e),s_.set(e,n)),e}const zg=n=>s_.get(n);function j2(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),f=wa(c);return i&&c.addEventListener("upgradeneeded",m=>{i(wa(c.result),m.oldVersion,m.newVersion,wa(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const k2=["get","getKey","getAll","getAllKeys","count"],U2=["put","add","delete","clear"],Bg=new Map;function v0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Bg.get(e))return Bg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=U2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||k2.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),a&&m.done]))[0]};return Bg.set(e,l),l}P2(n=>({...n,get:(e,t,i)=>v0(e,t)||n.get(e,t,i),has:(e,t)=>!!v0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(B2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function B2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gy="@firebase/app",E0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new i_("@firebase/app"),H2="@firebase/app-compat",F2="@firebase/analytics-compat",q2="@firebase/analytics",G2="@firebase/app-check-compat",$2="@firebase/app-check",K2="@firebase/auth",Y2="@firebase/auth-compat",Q2="@firebase/database",X2="@firebase/data-connect",W2="@firebase/database-compat",J2="@firebase/functions",Z2="@firebase/functions-compat",eO="@firebase/installations",tO="@firebase/installations-compat",nO="@firebase/messaging",rO="@firebase/messaging-compat",iO="@firebase/performance",sO="@firebase/performance-compat",aO="@firebase/remote-config",oO="@firebase/remote-config-compat",lO="@firebase/storage",uO="@firebase/storage-compat",cO="@firebase/firestore",hO="@firebase/ai",fO="@firebase/firestore-compat",dO="firebase",mO="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="[DEFAULT]",pO={[gy]:"fire-core",[H2]:"fire-core-compat",[q2]:"fire-analytics",[F2]:"fire-analytics-compat",[$2]:"fire-app-check",[G2]:"fire-app-check-compat",[K2]:"fire-auth",[Y2]:"fire-auth-compat",[Q2]:"fire-rtdb",[X2]:"fire-data-connect",[W2]:"fire-rtdb-compat",[J2]:"fire-fn",[Z2]:"fire-fn-compat",[eO]:"fire-iid",[tO]:"fire-iid-compat",[nO]:"fire-fcm",[rO]:"fire-fcm-compat",[iO]:"fire-perf",[sO]:"fire-perf-compat",[aO]:"fire-rc",[oO]:"fire-rc-compat",[lO]:"fire-gcs",[uO]:"fire-gcs-compat",[cO]:"fire-fst",[fO]:"fire-fst-compat",[hO]:"fire-vertex","fire-js":"fire-js",[dO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Map,gO=new Map,_y=new Map;function T0(n,e){try{n.container.addComponent(e)}catch(t){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Hl(n){const e=n.name;if(_y.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;_y.set(e,n);for(const t of md.values())T0(t,n);for(const t of gO.values())T0(t,n);return!0}function a_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ca=new Kc("app","Firebase",yO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new So("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ca.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=mO;function aw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:yy,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Ca.create("bad-app-name",{appName:String(a)});if(t||(t=ew()),!t)throw Ca.create("no-options");const l=md.get(a);if(l){if(bo(t,l.options)&&bo(i,l.config))return l;throw Ca.create("duplicate-app",{appName:a})}const c=new A2(a);for(const m of _y.values())c.addComponent(m);const f=new _O(t,i,c);return md.set(a,f),f}function ow(n=yy){const e=md.get(n);if(!e&&n===yy&&ew())return aw();if(!e)throw Ca.create("no-app",{appName:n});return e}function Ra(n,e,t){let i=pO[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(c.join(" "));return}Hl(new So(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="firebase-heartbeat-database",EO=1,Nc="firebase-heartbeat-store";let Hg=null;function lw(){return Hg||(Hg=j2(vO,EO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ca.create("idb-open",{originalErrorMessage:n.message})})),Hg}async function TO(n){try{const t=(await lw()).transaction(Nc),i=await t.objectStore(Nc).get(uw(n));return await t.done,i}catch(e){if(e instanceof js)xs.warn(e.message);else{const t=Ca.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(t.message)}}}async function b0(n,e){try{const i=(await lw()).transaction(Nc,"readwrite");await i.objectStore(Nc).put(e,uw(n)),await i.done}catch(t){if(t instanceof js)xs.warn(t.message);else{const i=Ca.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xs.warn(i.message)}}}function uw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=1024,SO=30;class AO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=S0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>SO){const c=RO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=S0(),{heartbeatsToSend:i,unsentEntries:a}=wO(this._heartbeatsCache.heartbeats),l=dd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return xs.warn(t),""}}}function S0(){return new Date().toISOString().substring(0,10)}function wO(n,e=bO){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),A0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),A0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class CO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return f2()?d2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return b0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return b0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function A0(n){return dd(JSON.stringify({version:2,heartbeats:n})).length}function RO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(n){Hl(new So("platform-logger",e=>new z2(e),"PRIVATE")),Hl(new So("heartbeat",e=>new AO(e),"PRIVATE")),Ra(gy,E0,n),Ra(gy,E0,"esm2020"),Ra("fire-js","")}IO("");var w0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ia,cw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,I){function C(){}C.prototype=I.prototype,A.F=I.prototype,A.prototype=new C,A.prototype.constructor=A,A.D=function(P,O,L){for(var x=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)x[ge-2]=arguments[ge];return I.prototype[O].apply(P,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,I,C){C||(C=0);const P=Array(16);if(typeof I=="string")for(var O=0;O<16;++O)P[O]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(O=0;O<16;++O)P[O]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=A.g[0],C=A.g[1],O=A.g[2];let L=A.g[3],x;x=I+(L^C&(O^L))+P[0]+3614090360&4294967295,I=C+(x<<7&4294967295|x>>>25),x=L+(O^I&(C^O))+P[1]+3905402710&4294967295,L=I+(x<<12&4294967295|x>>>20),x=O+(C^L&(I^C))+P[2]+606105819&4294967295,O=L+(x<<17&4294967295|x>>>15),x=C+(I^O&(L^I))+P[3]+3250441966&4294967295,C=O+(x<<22&4294967295|x>>>10),x=I+(L^C&(O^L))+P[4]+4118548399&4294967295,I=C+(x<<7&4294967295|x>>>25),x=L+(O^I&(C^O))+P[5]+1200080426&4294967295,L=I+(x<<12&4294967295|x>>>20),x=O+(C^L&(I^C))+P[6]+2821735955&4294967295,O=L+(x<<17&4294967295|x>>>15),x=C+(I^O&(L^I))+P[7]+4249261313&4294967295,C=O+(x<<22&4294967295|x>>>10),x=I+(L^C&(O^L))+P[8]+1770035416&4294967295,I=C+(x<<7&4294967295|x>>>25),x=L+(O^I&(C^O))+P[9]+2336552879&4294967295,L=I+(x<<12&4294967295|x>>>20),x=O+(C^L&(I^C))+P[10]+4294925233&4294967295,O=L+(x<<17&4294967295|x>>>15),x=C+(I^O&(L^I))+P[11]+2304563134&4294967295,C=O+(x<<22&4294967295|x>>>10),x=I+(L^C&(O^L))+P[12]+1804603682&4294967295,I=C+(x<<7&4294967295|x>>>25),x=L+(O^I&(C^O))+P[13]+4254626195&4294967295,L=I+(x<<12&4294967295|x>>>20),x=O+(C^L&(I^C))+P[14]+2792965006&4294967295,O=L+(x<<17&4294967295|x>>>15),x=C+(I^O&(L^I))+P[15]+1236535329&4294967295,C=O+(x<<22&4294967295|x>>>10),x=I+(O^L&(C^O))+P[1]+4129170786&4294967295,I=C+(x<<5&4294967295|x>>>27),x=L+(C^O&(I^C))+P[6]+3225465664&4294967295,L=I+(x<<9&4294967295|x>>>23),x=O+(I^C&(L^I))+P[11]+643717713&4294967295,O=L+(x<<14&4294967295|x>>>18),x=C+(L^I&(O^L))+P[0]+3921069994&4294967295,C=O+(x<<20&4294967295|x>>>12),x=I+(O^L&(C^O))+P[5]+3593408605&4294967295,I=C+(x<<5&4294967295|x>>>27),x=L+(C^O&(I^C))+P[10]+38016083&4294967295,L=I+(x<<9&4294967295|x>>>23),x=O+(I^C&(L^I))+P[15]+3634488961&4294967295,O=L+(x<<14&4294967295|x>>>18),x=C+(L^I&(O^L))+P[4]+3889429448&4294967295,C=O+(x<<20&4294967295|x>>>12),x=I+(O^L&(C^O))+P[9]+568446438&4294967295,I=C+(x<<5&4294967295|x>>>27),x=L+(C^O&(I^C))+P[14]+3275163606&4294967295,L=I+(x<<9&4294967295|x>>>23),x=O+(I^C&(L^I))+P[3]+4107603335&4294967295,O=L+(x<<14&4294967295|x>>>18),x=C+(L^I&(O^L))+P[8]+1163531501&4294967295,C=O+(x<<20&4294967295|x>>>12),x=I+(O^L&(C^O))+P[13]+2850285829&4294967295,I=C+(x<<5&4294967295|x>>>27),x=L+(C^O&(I^C))+P[2]+4243563512&4294967295,L=I+(x<<9&4294967295|x>>>23),x=O+(I^C&(L^I))+P[7]+1735328473&4294967295,O=L+(x<<14&4294967295|x>>>18),x=C+(L^I&(O^L))+P[12]+2368359562&4294967295,C=O+(x<<20&4294967295|x>>>12),x=I+(C^O^L)+P[5]+4294588738&4294967295,I=C+(x<<4&4294967295|x>>>28),x=L+(I^C^O)+P[8]+2272392833&4294967295,L=I+(x<<11&4294967295|x>>>21),x=O+(L^I^C)+P[11]+1839030562&4294967295,O=L+(x<<16&4294967295|x>>>16),x=C+(O^L^I)+P[14]+4259657740&4294967295,C=O+(x<<23&4294967295|x>>>9),x=I+(C^O^L)+P[1]+2763975236&4294967295,I=C+(x<<4&4294967295|x>>>28),x=L+(I^C^O)+P[4]+1272893353&4294967295,L=I+(x<<11&4294967295|x>>>21),x=O+(L^I^C)+P[7]+4139469664&4294967295,O=L+(x<<16&4294967295|x>>>16),x=C+(O^L^I)+P[10]+3200236656&4294967295,C=O+(x<<23&4294967295|x>>>9),x=I+(C^O^L)+P[13]+681279174&4294967295,I=C+(x<<4&4294967295|x>>>28),x=L+(I^C^O)+P[0]+3936430074&4294967295,L=I+(x<<11&4294967295|x>>>21),x=O+(L^I^C)+P[3]+3572445317&4294967295,O=L+(x<<16&4294967295|x>>>16),x=C+(O^L^I)+P[6]+76029189&4294967295,C=O+(x<<23&4294967295|x>>>9),x=I+(C^O^L)+P[9]+3654602809&4294967295,I=C+(x<<4&4294967295|x>>>28),x=L+(I^C^O)+P[12]+3873151461&4294967295,L=I+(x<<11&4294967295|x>>>21),x=O+(L^I^C)+P[15]+530742520&4294967295,O=L+(x<<16&4294967295|x>>>16),x=C+(O^L^I)+P[2]+3299628645&4294967295,C=O+(x<<23&4294967295|x>>>9),x=I+(O^(C|~L))+P[0]+4096336452&4294967295,I=C+(x<<6&4294967295|x>>>26),x=L+(C^(I|~O))+P[7]+1126891415&4294967295,L=I+(x<<10&4294967295|x>>>22),x=O+(I^(L|~C))+P[14]+2878612391&4294967295,O=L+(x<<15&4294967295|x>>>17),x=C+(L^(O|~I))+P[5]+4237533241&4294967295,C=O+(x<<21&4294967295|x>>>11),x=I+(O^(C|~L))+P[12]+1700485571&4294967295,I=C+(x<<6&4294967295|x>>>26),x=L+(C^(I|~O))+P[3]+2399980690&4294967295,L=I+(x<<10&4294967295|x>>>22),x=O+(I^(L|~C))+P[10]+4293915773&4294967295,O=L+(x<<15&4294967295|x>>>17),x=C+(L^(O|~I))+P[1]+2240044497&4294967295,C=O+(x<<21&4294967295|x>>>11),x=I+(O^(C|~L))+P[8]+1873313359&4294967295,I=C+(x<<6&4294967295|x>>>26),x=L+(C^(I|~O))+P[15]+4264355552&4294967295,L=I+(x<<10&4294967295|x>>>22),x=O+(I^(L|~C))+P[6]+2734768916&4294967295,O=L+(x<<15&4294967295|x>>>17),x=C+(L^(O|~I))+P[13]+1309151649&4294967295,C=O+(x<<21&4294967295|x>>>11),x=I+(O^(C|~L))+P[4]+4149444226&4294967295,I=C+(x<<6&4294967295|x>>>26),x=L+(C^(I|~O))+P[11]+3174756917&4294967295,L=I+(x<<10&4294967295|x>>>22),x=O+(I^(L|~C))+P[2]+718787259&4294967295,O=L+(x<<15&4294967295|x>>>17),x=C+(L^(O|~I))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+I&4294967295,A.g[1]=A.g[1]+(O+(x<<21&4294967295|x>>>11))&4294967295,A.g[2]=A.g[2]+O&4294967295,A.g[3]=A.g[3]+L&4294967295}i.prototype.v=function(A,I){I===void 0&&(I=A.length);const C=I-this.blockSize,P=this.C;let O=this.h,L=0;for(;L<I;){if(O==0)for(;L<=C;)a(this,A,L),L+=this.blockSize;if(typeof A=="string"){for(;L<I;)if(P[O++]=A.charCodeAt(L++),O==this.blockSize){a(this,P),O=0;break}}else for(;L<I;)if(P[O++]=A[L++],O==this.blockSize){a(this,P),O=0;break}}this.h=O,this.o+=I},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var I=1;I<A.length-8;++I)A[I]=0;I=this.o*8;for(var C=A.length-8;C<A.length;++C)A[C]=I&255,I/=256;for(this.v(A),A=Array(16),I=0,C=0;C<4;++C)for(let P=0;P<32;P+=8)A[I++]=this.g[C]>>>P&255;return A};function l(A,I){var C=f;return Object.prototype.hasOwnProperty.call(C,A)?C[A]:C[A]=I(A)}function c(A,I){this.h=I;const C=[];let P=!0;for(let O=A.length-1;O>=0;O--){const L=A[O]|0;P&&L==I||(C[O]=L,P=!1)}this.g=C}var f={};function m(A){return-128<=A&&A<128?l(A,function(I){return new c([I|0],I<0?-1:0)}):new c([A|0],A<0?-1:0)}function p(A){if(isNaN(A)||!isFinite(A))return v;if(A<0)return M(p(-A));const I=[];let C=1;for(let P=0;A>=C;P++)I[P]=A/C|0,C*=4294967296;return new c(I,0)}function y(A,I){if(A.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(A.charAt(0)=="-")return M(y(A.substring(1),I));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(I,8));let P=v;for(let L=0;L<A.length;L+=8){var O=Math.min(8,A.length-L);const x=parseInt(A.substring(L,L+O),I);O<8?(O=p(Math.pow(I,O)),P=P.j(O).add(p(x))):(P=P.j(C),P=P.add(p(x)))}return P}var v=m(0),S=m(1),w=m(16777216);n=c.prototype,n.m=function(){if(z(this))return-M(this).m();let A=0,I=1;for(let C=0;C<this.g.length;C++){const P=this.i(C);A+=(P>=0?P:4294967296+P)*I,I*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(D(this))return"0";if(z(this))return"-"+M(this).toString(A);const I=p(Math.pow(A,6));var C=this;let P="";for(;;){const O=ee(C,I).g;C=B(C,O.j(I));let L=((C.g.length>0?C.g[0]:C.h)>>>0).toString(A);if(C=O,D(C))return L+P;for(;L.length<6;)L="0"+L;P=L+P}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function D(A){if(A.h!=0)return!1;for(let I=0;I<A.g.length;I++)if(A.g[I]!=0)return!1;return!0}function z(A){return A.h==-1}n.l=function(A){return A=B(this,A),z(A)?-1:D(A)?0:1};function M(A){const I=A.g.length,C=[];for(let P=0;P<I;P++)C[P]=~A.g[P];return new c(C,~A.h).add(S)}n.abs=function(){return z(this)?M(this):this},n.add=function(A){const I=Math.max(this.g.length,A.g.length),C=[];let P=0;for(let O=0;O<=I;O++){let L=P+(this.i(O)&65535)+(A.i(O)&65535),x=(L>>>16)+(this.i(O)>>>16)+(A.i(O)>>>16);P=x>>>16,L&=65535,x&=65535,C[O]=x<<16|L}return new c(C,C[C.length-1]&-2147483648?-1:0)};function B(A,I){return A.add(M(I))}n.j=function(A){if(D(this)||D(A))return v;if(z(this))return z(A)?M(this).j(M(A)):M(M(this).j(A));if(z(A))return M(this.j(M(A)));if(this.l(w)<0&&A.l(w)<0)return p(this.m()*A.m());const I=this.g.length+A.g.length,C=[];for(var P=0;P<2*I;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(let O=0;O<A.g.length;O++){const L=this.i(P)>>>16,x=this.i(P)&65535,ge=A.i(O)>>>16,Te=A.i(O)&65535;C[2*P+2*O]+=x*Te,F(C,2*P+2*O),C[2*P+2*O+1]+=L*Te,F(C,2*P+2*O+1),C[2*P+2*O+1]+=x*ge,F(C,2*P+2*O+1),C[2*P+2*O+2]+=L*ge,F(C,2*P+2*O+2)}for(A=0;A<I;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=I;A<2*I;A++)C[A]=0;return new c(C,0)};function F(A,I){for(;(A[I]&65535)!=A[I];)A[I+1]+=A[I]>>>16,A[I]&=65535,I++}function G(A,I){this.g=A,this.h=I}function ee(A,I){if(D(I))throw Error("division by zero");if(D(A))return new G(v,v);if(z(A))return I=ee(M(A),I),new G(M(I.g),M(I.h));if(z(I))return I=ee(A,M(I)),new G(M(I.g),I.h);if(A.g.length>30){if(z(A)||z(I))throw Error("slowDivide_ only works with positive integers.");for(var C=S,P=I;P.l(A)<=0;)C=ie(C),P=ie(P);var O=ne(C,1),L=ne(P,1);for(P=ne(P,2),C=ne(C,2);!D(P);){var x=L.add(P);x.l(A)<=0&&(O=O.add(C),L=x),P=ne(P,1),C=ne(C,1)}return I=B(A,O.j(I)),new G(O,I)}for(O=v;A.l(I)>=0;){for(C=Math.max(1,Math.floor(A.m()/I.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),L=p(C),x=L.j(I);z(x)||x.l(A)>0;)C-=P,L=p(C),x=L.j(I);D(L)&&(L=S),O=O.add(L),A=B(A,x)}return new G(O,A)}n.B=function(A){return ee(this,A).h},n.and=function(A){const I=Math.max(this.g.length,A.g.length),C=[];for(let P=0;P<I;P++)C[P]=this.i(P)&A.i(P);return new c(C,this.h&A.h)},n.or=function(A){const I=Math.max(this.g.length,A.g.length),C=[];for(let P=0;P<I;P++)C[P]=this.i(P)|A.i(P);return new c(C,this.h|A.h)},n.xor=function(A){const I=Math.max(this.g.length,A.g.length),C=[];for(let P=0;P<I;P++)C[P]=this.i(P)^A.i(P);return new c(C,this.h^A.h)};function ie(A){const I=A.g.length+1,C=[];for(let P=0;P<I;P++)C[P]=A.i(P)<<1|A.i(P-1)>>>31;return new c(C,A.h)}function ne(A,I){const C=I>>5;I%=32;const P=A.g.length-C,O=[];for(let L=0;L<P;L++)O[L]=I>0?A.i(L+C)>>>I|A.i(L+C+1)<<32-I:A.i(L+C);return new c(O,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,cw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Ia=c}).apply(typeof w0<"u"?w0:typeof self<"u"?self:typeof window<"u"?window:{});var Df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hw,fc,fw,$f,vy,dw,mw,pw;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Df=="object"&&Df];for(var _=0;_<h.length;++_){var b=h[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function a(h,_){if(_)e:{var b=i;h=h.split(".");for(var N=0;N<h.length-1;N++){var Y=h[N];if(!(Y in b))break e;b=b[Y]}h=h[h.length-1],N=b[h],_=_(N),_!=N&&_!=null&&e(b,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var b=[],N;for(N in _)Object.prototype.hasOwnProperty.call(_,N)&&b.push([N,_[N]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,b){return h.call.apply(h.bind,arguments)}function p(h,_,b){return p=m,p.apply(null,arguments)}function y(h,_){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function v(h,_){function b(){}b.prototype=_.prototype,h.Z=_.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(N,Y,Z){for(var Re=Array(arguments.length-2),et=2;et<arguments.length;et++)Re[et-2]=arguments[et];return _.prototype[Y].apply(N,Re)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const _=h.length;if(_>0){const b=Array(_);for(let N=0;N<_;N++)b[N]=h[N];return b}return[]}function D(h,_){for(let N=1;N<arguments.length;N++){const Y=arguments[N];var b=typeof Y;if(b=b!="object"?b:Y?Array.isArray(Y)?"array":b:"null",b=="array"||b=="object"&&typeof Y.length=="number"){b=h.length||0;const Z=Y.length||0;h.length=b+Z;for(let Re=0;Re<Z;Re++)h[b+Re]=Y[Re]}else h.push(Y)}}class z{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function M(h){c.setTimeout(()=>{throw h},0)}function B(){var h=A;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class F{constructor(){this.h=this.g=null}add(_,b){const N=G.get();N.set(_,b),this.h?this.h.next=N:this.g=N,this.h=N}}var G=new z(()=>new ee,h=>h.reset());class ee{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ne=!1,A=new F,I=()=>{const h=Promise.resolve(void 0);ie=()=>{h.then(C)}};function C(){for(var h;h=B();){try{h.h.call(h.g)}catch(b){M(b)}var _=G;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}ne=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};c.addEventListener("test",b,_),c.removeEventListener("test",b,_)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function ge(h,_){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}v(ge,O),ge.prototype.init=function(h,_){const b=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(b=="mouseover"?_=h.fromElement:b=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),H=0;function ae(h,_,b,N,Y){this.listener=h,this.proxy=null,this.src=_,this.type=b,this.capture=!!N,this.ha=Y,this.key=++H,this.da=this.fa=!1}function ye(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function pe(h,_,b){for(const N in h)_.call(b,h[N],N,h)}function Ee(h,_){for(const b in h)_.call(void 0,h[b],b,h)}function j(h){const _={};for(const b in h)_[b]=h[b];return _}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _e(h,_){let b,N;for(let Y=1;Y<arguments.length;Y++){N=arguments[Y];for(b in N)h[b]=N[b];for(let Z=0;Z<re.length;Z++)b=re[Z],Object.prototype.hasOwnProperty.call(N,b)&&(h[b]=N[b])}}function we(h){this.src=h,this.g={},this.h=0}we.prototype.add=function(h,_,b,N,Y){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const Re=Se(h,_,N,Y);return Re>-1?(_=h[Re],b||(_.fa=!1)):(_=new ae(_,this.src,Z,!!N,Y),_.fa=b,h.push(_)),_};function ue(h,_){const b=_.type;if(b in h.g){var N=h.g[b],Y=Array.prototype.indexOf.call(N,_,void 0),Z;(Z=Y>=0)&&Array.prototype.splice.call(N,Y,1),Z&&(ye(_),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Se(h,_,b,N){for(let Y=0;Y<h.length;++Y){const Z=h[Y];if(!Z.da&&Z.listener==_&&Z.capture==!!b&&Z.ha==N)return Y}return-1}var xe="closure_lm_"+(Math.random()*1e6|0),ze={};function Be(h,_,b,N,Y){if(Array.isArray(_)){for(let Z=0;Z<_.length;Z++)Be(h,_[Z],b,N,Y);return null}return b=Xn(b),h&&h[Te]?h.J(_,b,f(N)?!!N.capture:!1,Y):st(h,_,b,!1,N,Y)}function st(h,_,b,N,Y,Z){if(!_)throw Error("Invalid event type");const Re=f(Y)?!!Y.capture:!!Y;let et=dn(h);if(et||(h[xe]=et=new we(h)),b=et.add(_,b,N,Re,Z),b.proxy)return b;if(N=St(),b.proxy=N,N.src=h,N.listener=b,h.addEventListener)L||(Y=Re),Y===void 0&&(Y=!1),h.addEventListener(_.toString(),N,Y);else if(h.attachEvent)h.attachEvent(Ot(_.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function St(){function h(b){return _.call(h.src,h.listener,b)}const _=Qn;return h}function Ye(h,_,b,N,Y){if(Array.isArray(_))for(var Z=0;Z<_.length;Z++)Ye(h,_[Z],b,N,Y);else N=f(N)?!!N.capture:!!N,b=Xn(b),h&&h[Te]?(h=h.i,Z=String(_).toString(),Z in h.g&&(_=h.g[Z],b=Se(_,b,N,Y),b>-1&&(ye(_[b]),Array.prototype.splice.call(_,b,1),_.length==0&&(delete h.g[Z],h.h--)))):h&&(h=dn(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Se(_,b,N,Y)),(b=h>-1?_[h]:null)&&Et(b))}function Et(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Te])ue(_.i,h);else{var b=h.type,N=h.proxy;_.removeEventListener?_.removeEventListener(b,N,h.capture):_.detachEvent?_.detachEvent(Ot(b),N):_.addListener&&_.removeListener&&_.removeListener(N),(b=dn(_))?(ue(b,h),b.h==0&&(b.src=null,_[xe]=null)):ye(h)}}}function Ot(h){return h in ze?ze[h]:ze[h]="on"+h}function Qn(h,_){if(h.da)h=!0;else{_=new ge(_,this);const b=h.listener,N=h.ha||h.src;h.fa&&Et(h),h=b.call(N,_)}return h}function dn(h){return h=h[xe],h instanceof we?h:null}var lr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xn(h){return typeof h=="function"?h:(h[lr]||(h[lr]=function(_){return h.handleEvent(_)}),h[lr])}function Mt(){P.call(this),this.i=new we(this),this.M=this,this.G=null}v(Mt,P),Mt.prototype[Te]=!0,Mt.prototype.removeEventListener=function(h,_,b,N){Ye(this,h,_,b,N)};function Jt(h,_){var b,N=h.G;if(N)for(b=[];N;N=N.G)b.push(N);if(h=h.M,N=_.type||_,typeof _=="string")_=new O(_,h);else if(_ instanceof O)_.target=_.target||h;else{var Y=_;_=new O(N,h),_e(_,Y)}Y=!0;let Z,Re;if(b)for(Re=b.length-1;Re>=0;Re--)Z=_.g=b[Re],Y=Pt(Z,N,!0,_)&&Y;if(Z=_.g=h,Y=Pt(Z,N,!0,_)&&Y,Y=Pt(Z,N,!1,_)&&Y,b)for(Re=0;Re<b.length;Re++)Z=_.g=b[Re],Y=Pt(Z,N,!1,_)&&Y}Mt.prototype.N=function(){if(Mt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const b=h.g[_];for(let N=0;N<b.length;N++)ye(b[N]);delete h.g[_],h.h--}}this.G=null},Mt.prototype.J=function(h,_,b,N){return this.i.add(String(h),_,!1,b,N)},Mt.prototype.K=function(h,_,b,N){return this.i.add(String(h),_,!0,b,N)};function Pt(h,_,b,N){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let Y=!0;for(let Z=0;Z<_.length;++Z){const Re=_[Z];if(Re&&!Re.da&&Re.capture==b){const et=Re.listener,_n=Re.ha||Re.src;Re.fa&&ue(h.i,Re),Y=et.call(_n,N)!==!1&&Y}}return Y&&!N.defaultPrevented}function ur(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function di(h){h.g=ur(()=>{h.g=null,h.i&&(h.i=!1,di(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class qt extends P{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:di(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cr(h){P.call(this),this.h=h,this.g={}}v(cr,P);var Yr=[];function Wn(h){pe(h.g,function(_,b){this.g.hasOwnProperty(b)&&Et(_)},h),h.g={}}cr.prototype.N=function(){cr.Z.N.call(this),Wn(this)},cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zt=c.JSON.stringify,bn=c.JSON.parse,xi=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function oe(){}function ve(){}var Ce={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){O.call(this,"d")}v(de,O);function De(){O.call(this,"c")}v(De,O);var Pe={},Kt=null;function lt(){return Kt=Kt||new Mt}Pe.Ia="serverreachability";function At(h){O.call(this,Pe.Ia,h)}v(At,O);function Tt(h){const _=lt();Jt(_,new At(_))}Pe.STAT_EVENT="statevent";function mn(h,_){O.call(this,Pe.STAT_EVENT,h),this.stat=_}v(mn,O);function sn(h){const _=lt();Jt(_,new mn(_,h))}Pe.Ja="timingevent";function Qr(h,_){O.call(this,Pe.Ja,h),this.size=_}v(Qr,O);function Or(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function Mr(){this.g=!0}Mr.prototype.ua=function(){this.g=!1};function Po(h,_,b,N,Y,Z){h.info(function(){if(h.g)if(Z){var Re="",et=Z.split("&");for(let It=0;It<et.length;It++){var _n=et[It].split("=");if(_n.length>1){const an=_n[0];_n=_n[1];const Jr=an.split("_");Re=Jr.length>=2&&Jr[1]=="type"?Re+(an+"="+_n+"&"):Re+(an+"=redacted&")}}}else Re=null;else Re=Z;return"XMLHTTP REQ ("+N+") [attempt "+Y+"]: "+_+`
`+b+`
`+Re})}function Zi(h,_,b,N,Y,Z,Re){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+Y+"]: "+_+`
`+b+`
`+Z+" "+Re})}function hr(h,_,b,N){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+cu(h,b)+(N?" "+N:"")})}function Ni(h,_){h.info(function(){return"TIMEOUT: "+_})}Mr.prototype.info=function(){};function cu(h,_){if(!h.g)return _;if(!_)return null;try{const Z=JSON.parse(_);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var b=Z[h];if(!(b.length<2)){var N=b[1];if(Array.isArray(N)&&!(N.length<1)){var Y=N[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let Re=1;Re<N.length;Re++)N[Re]=""}}}}return Zt(Z)}catch{return _}}var es={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},k={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$;function W(){}v(W,oe),W.prototype.g=function(){return new XMLHttpRequest},$=new W;function me(h){return encodeURIComponent(String(h))}function be(h){var _=1;h=h.split(":");const b=[];for(;_>0&&h.length;)b.push(h.shift()),_--;return h.length&&b.push(h.join(":")),b}function Oe(h,_,b,N){this.j=h,this.i=_,this.l=b,this.S=N||1,this.V=new cr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}var Ae={},Ie={};function Ve(h,_,b){h.M=1,h.A=Ha(kt(_)),h.u=b,h.R=!0,Ge(h,null)}function Ge(h,_){h.F=Date.now(),jt(h),h.B=kt(h.A);var b=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),Lo(b.i,"t",N),h.C=0,b=h.j.L,h.h=new Le,h.g=Eh(h.j,b?_:null,!h.u),h.P>0&&(h.O=new qt(p(h.Y,h,h.g),h.P)),_=h.V,b=h.g,N=h.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(Yr[0]=Y.toString()),Y=Yr);for(let Z=0;Z<Y.length;Z++){const Re=Be(b,Y[Z],N||_.handleEvent,!1,_.h||_);if(!Re)break;_.g[Re.key]=Re}_=h.J?j(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),Tt(),Po(h.i,h.v,h.B,h.l,h.S,h.u)}Oe.prototype.ba=function(h){h=h.target;const _=this.O;_&&gi(h)==3?_.j():this.Y(h)},Oe.prototype.Y=function(h){try{if(h==this.g)e:{const et=gi(this.g),_n=this.g.ya(),It=this.g.ca();if(!(et<3)&&(et!=3||this.g&&(this.h.h||this.g.la()||Un(this.g)))){this.K||et!=4||_n==7||(_n==8||It<=0?Tt(3):Tt(2)),Yt(this);var _=this.g.ca();this.X=_;var b=Ue(this);if(this.o=_==200,Zi(this.i,this.v,this.B,this.l,this.S,et,_),this.o){if(this.U&&!this.L){t:{if(this.g){var N,Y=this.g;if((N=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(N)){var Z=N;break t}}Z=null}if(h=Z)hr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ln(this,h);else{this.o=!1,this.m=3,sn(12),Qt(this),nt(this);break e}}if(this.R){h=!0;let an;for(;!this.K&&this.C<b.length;)if(an=at(this,b),an==Ie){et==4&&(this.m=4,sn(14),h=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(an==Ae){this.m=4,sn(15),hr(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else hr(this.i,this.l,an,null),Ln(this,an);if(Qe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||b.length!=0||this.h.h||(this.m=1,sn(16),h=!1),this.o=this.o&&h,!h)hr(this.i,this.l,b,"[Invalid Chunked Response]"),Qt(this),nt(this);else if(b.length>0&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.aa&&!Re.P&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),vu(Re),Re.P=!0,sn(11))}}else hr(this.i,this.l,b,null),Ln(this,b);et==4&&Qt(this),this.o&&!this.K&&(et==4?gh(this.j,this):(this.o=!1,jt(this)))}else ns(this.g),_==400&&b.indexOf("Unknown SID")>0?(this.m=3,sn(12)):(this.m=0,sn(13)),Qt(this),nt(this)}}}catch{}finally{}};function Ue(h){if(!Qe(h))return h.g.la();const _=Un(h.g);if(_==="")return"";let b="";const N=_.length,Y=gi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Qt(h),nt(h),"";h.h.i=new c.TextDecoder}for(let Z=0;Z<N;Z++)h.h.h=!0,b+=h.h.i.decode(_[Z],{stream:!(Y&&Z==N-1)});return _.length=0,h.h.g+=b,h.C=0,h.h.g}function Qe(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function at(h,_){var b=h.C,N=_.indexOf(`
`,b);return N==-1?Ie:(b=Number(_.substring(b,N)),isNaN(b)?Ae:(N+=1,N+b>_.length?Ie:(_=_.slice(N,N+b),h.C=N+b,_)))}Oe.prototype.cancel=function(){this.K=!0,Qt(this)};function jt(h){h.T=Date.now()+h.H,en(h,h.H)}function en(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Or(p(h.aa,h),_)}function Yt(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Oe.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ni(this.i,this.B),this.M!=2&&(Tt(),sn(17)),Qt(this),this.m=2,nt(this)):en(this,this.T-h)};function nt(h){h.j.I==0||h.K||gh(h.j,h)}function Qt(h){Yt(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Wn(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Ln(h,_){try{var b=h.j;if(b.I!=0&&(b.g==h||Zn(b.h,h))){if(!h.L&&Zn(b.h,h)&&b.I==3){try{var N=b.Ba.g.parse(_)}catch{N=null}if(Array.isArray(N)&&N.length==3){var Y=N;if(Y[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)Bo(b),Gs(b);else break e;Qa(b),sn(18)}}else b.xa=Y[1],0<b.xa-b.K&&Y[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Or(p(b.Va,b),6e3));vr(b.h)<=1&&b.ta&&(b.ta=void 0)}else ki(b,11)}else if((h.L||b.g==h)&&Bo(b),!x(_))for(Y=b.Ba.g.parse(_),_=0;_<Y.length;_++){let It=Y[_];const an=It[0];if(!(an<=b.K))if(b.K=an,It=It[1],b.I==2)if(It[0]=="c"){b.M=It[1],b.ba=It[2];const Jr=It[3];Jr!=null&&(b.ka=Jr,b.j.info("VER="+b.ka));const Ui=It[4];Ui!=null&&(b.za=Ui,b.j.info("SVER="+b.za));const yi=It[5];yi!=null&&typeof yi=="number"&&yi>0&&(N=1.5*yi,b.O=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const _i=h.g;if(_i){const Xa=_i.g?_i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var Z=N.h;Z.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Pr(Z,Z.h),Z.h=null))}if(N.G){const Ho=_i.g?_i.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(N.wa=Ho,Rt(N.J,N.G,Ho))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),N=b;var Re=h;if(N.na=vh(N,N.L?N.ba:null,N.W),Re.L){Di(N.h,Re);var et=Re,_n=N.O;_n&&(et.H=_n),et.D&&(Yt(et),jt(et)),N.g=Re}else mh(N);b.i.length>0&&ji(b)}else It[0]!="stop"&&It[0]!="close"||ki(b,7);else b.I==3&&(It[0]=="stop"||It[0]=="close"?It[0]=="stop"?ki(b,7):yu(b):It[0]!="noop"&&b.l&&b.l.qa(It),b.A=0)}}Tt(4)}catch{}}var Xt=class{constructor(h,_){this.g=h,this.map=_}};function _r(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Jn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function vr(h){return h.h?1:h.g?h.g.size:0}function Zn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Pr(h,_){h.g?h.g.add(_):h.h=_}function Di(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}_r.prototype.cancel=function(){if(this.i=Oi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Oi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const b of h.g.values())_=_.concat(b.G);return _}return w(h.i)}var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function un(h,_){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const N=h[b].indexOf("=");let Y,Z=null;N>=0?(Y=h[b].substring(0,N),Z=h[b].substring(N+1)):Y=h[b],_(Y,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Sn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof Sn?(this.l=h.l,rt(this,h.j),this.o=h.o,this.g=h.g,Vr(this,h.u),this.h=h.h,ks(this,fh(h.i)),this.m=h.m):h&&(_=String(h).match(ut))?(this.l=!1,rt(this,_[1]||"",!0),this.o=Mi(_[2]||""),this.g=Mi(_[3]||"",!0),Vr(this,_[4]),this.h=Mi(_[5]||"",!0),ks(this,_[6]||"",!0),this.m=Mi(_[7]||"")):(this.l=!1,this.i=new zs(null,this.l))}Sn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Fa(_,Vo,!0),":");var b=this.g;return(b||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Fa(_,Vo,!0),"@"),h.push(me(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Fa(b,b.charAt(0)=="/"?hu:uh,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Fa(b,ch)),h.join("")},Sn.prototype.resolve=function(h){const _=kt(this);let b=!!h.j;b?rt(_,h.j):b=!!h.o,b?_.o=h.o:b=!!h.g,b?_.g=h.g:b=h.u!=null;var N=h.h;if(b)Vr(_,h.u);else if(b=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var Y=_.h.lastIndexOf("/");Y!=-1&&(N=_.h.slice(0,Y+1)+N)}if(Y=N,Y==".."||Y==".")N="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){N=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const Z=[];for(let Re=0;Re<Y.length;){const et=Y[Re++];et=="."?N&&Re==Y.length&&Z.push(""):et==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),N&&Re==Y.length&&Z.push("")):(Z.push(et),N=!0)}N=Z.join("/")}else N=Y}return b?_.h=N:b=h.i.toString()!=="",b?ks(_,fh(h.i)):b=!!h.m,b&&(_.m=h.m),_};function kt(h){return new Sn(h)}function rt(h,_,b){h.j=b?Mi(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Vr(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function ks(h,_,b){_ instanceof zs?(h.i=_,jo(h.i,h.l)):(b||(_=Fa(_,Us)),h.i=new zs(_,h.l))}function Rt(h,_,b){h.i.set(_,b)}function Ha(h){return Rt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Mi(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Fa(h,_,b){return typeof h=="string"?(h=encodeURI(h).replace(_,Er),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Er(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Vo=/[#\/\?@]/g,uh=/[#\?:]/g,hu=/[#\?]/g,Us=/[#\?@]/g,ch=/#/g;function zs(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Tr(h){h.g||(h.g=new Map,h.h=0,h.i&&un(h.i,function(_,b){h.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=zs.prototype,n.add=function(h,_){Tr(this),this.i=null,h=Bs(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(_),this.h+=1,this};function hh(h,_){Tr(h),_=Bs(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function fu(h,_){return Tr(h),_=Bs(h,_),h.g.has(_)}n.forEach=function(h,_){Tr(this),this.g.forEach(function(b,N){b.forEach(function(Y){h.call(_,Y,N,this)},this)},this)};function du(h,_){Tr(h);let b=[];if(typeof _=="string")fu(h,_)&&(b=b.concat(h.g.get(Bs(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)b=b.concat(h[_]);return b}n.set=function(h,_){return Tr(this),this.i=null,h=Bs(this,h),fu(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=du(this,h),h.length>0?String(h[0]):_):_};function Lo(h,_,b){hh(h,_),b.length>0&&(h.i=null,h.g.set(Bs(h,_),w(b)),h.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let N=0;N<_.length;N++){var b=_[N];const Y=me(b);b=du(this,b);for(let Z=0;Z<b.length;Z++){let Re=Y;b[Z]!==""&&(Re+="="+me(b[Z])),h.push(Re)}}return this.i=h.join("&")};function fh(h){const _=new zs;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Bs(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function jo(h,_){_&&!h.j&&(Tr(h),h.i=null,h.g.forEach(function(b,N){const Y=N.toLowerCase();N!=Y&&(hh(this,N),Lo(this,Y,b))},h)),h.j=_}function mi(h,_){const b=new Mr;if(c.Image){const N=new Image;N.onload=y(Xr,b,"TestLoadImage: loaded",!0,_,N),N.onerror=y(Xr,b,"TestLoadImage: error",!1,_,N),N.onabort=y(Xr,b,"TestLoadImage: abort",!1,_,N),N.ontimeout=y(Xr,b,"TestLoadImage: timeout",!1,_,N),c.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else _(!1)}function mu(h,_){const b=new Mr,N=new AbortController,Y=setTimeout(()=>{N.abort(),Xr(b,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:N.signal}).then(Z=>{clearTimeout(Y),Z.ok?Xr(b,"TestPingServer: ok",!0,_):Xr(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Y),Xr(b,"TestPingServer: error",!1,_)})}function Xr(h,_,b,N,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),N(b)}catch{}}function Hs(){this.g=new xi}function Pi(h){this.i=h.Sb||null,this.h=h.ab||!1}v(Pi,oe),Pi.prototype.g=function(){return new qa(this.i,this.h)};function qa(h,_){Mt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(qa,Mt),n=qa.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,pi(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fs(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ko(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ko(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Fs(this):pi(this),this.readyState==3&&ko(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Fs(this))},n.Na=function(h){this.g&&(this.response=h,Fs(this))},n.ga=function(){this.g&&Fs(this)};function Fs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,pi(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=_.next();return h.join(`\r
`)};function pi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Wr(h){let _="";return pe(h,function(b,N){_+=N,_+=":",_+=b,_+=`\r
`}),_}function Ga(h,_,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=Wr(b),typeof h=="string"?b!=null&&me(b):Rt(h,_,b))}function Ut(h){Mt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Ut,Mt);var Vi=/^https?$/i,pu=["POST","PUT"];n=Ut.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Z){$a(this,Z);return}if(h=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var Y in N)b.set(Y,N[Y]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())b.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(Z=>Z.toLowerCase()=="content-type"),Y=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(pu,_,void 0)>=0)||N||Y||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,Re]of b)this.g.setRequestHeader(Z,Re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){$a(this,Z)}};function $a(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,gu(h),ts(h)}function gu(h){h.A||(h.A=!0,Jt(h,"complete"),Jt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Jt(this,"complete"),Jt(this,"abort"),ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),Ut.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ka(this):this.Xa())},n.Xa=function(){Ka(this)};function Ka(h){if(h.h&&typeof l<"u"){if(h.v&&gi(h)==4)setTimeout(h.Ca.bind(h),0);else if(Jt(h,"readystatechange"),gi(h)==4){h.h=!1;try{const Z=h.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var N;if(N=Z===0){let Re=String(h.D).match(ut)[1]||null;!Re&&c.self&&c.self.location&&(Re=c.self.location.protocol.slice(0,-1)),N=!Vi.test(Re?Re.toLowerCase():"")}b=N}if(b)Jt(h,"complete"),Jt(h,"success");else{h.o=6;try{var Y=gi(h)>2?h.g.statusText:""}catch{Y=""}h.l=Y+" ["+h.ca()+"]",gu(h)}}finally{ts(h)}}}}function ts(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,_||Jt(h,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function gi(h){return h.g?h.g.readyState:0}n.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),bn(_)}};function Un(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(h){const _={};h=(h.g&&gi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(x(h[N]))continue;var b=be(h[N]);const Y=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Z=_[Y]||[];_[Y]=Z,Z.push(b)}Ee(_,function(N){return N.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(h,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||_}function qs(h){this.za=0,this.i=[],this.j=new Mr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Li("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Li("baseRetryDelayMs",5e3,h),this.Za=Li("retryDelaySeedMs",1e4,h),this.Ta=Li("forwardChannelMaxRetries",2,h),this.va=Li("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new _r(h&&h.concurrentRequestLimit),this.Ba=new Hs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=qs.prototype,n.ka=8,n.I=1,n.connect=function(h,_,b,N){sn(0),this.W=h,this.H=_||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.J=vh(this,null,this.W),ji(this)};function yu(h){if(Uo(h),h.I==3){var _=h.V++,b=kt(h.J);if(Rt(b,"SID",h.M),Rt(b,"RID",_),Rt(b,"TYPE","terminate"),Ya(h,b),_=new Oe(h,h.j,_),_.M=2,_.A=Ha(kt(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!b&&c.Image&&(new Image().src=_.A,b=!0),b||(_.g=Eh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),jt(_)}_h(h)}function Gs(h){h.g&&(vu(h),h.g.cancel(),h.g=null)}function Uo(h){Gs(h),h.v&&(c.clearTimeout(h.v),h.v=null),Bo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ji(h){if(!Jn(h.h)&&!h.m){h.m=!0;var _=h.Ea;ie||I(),ne||(ie(),ne=!0),A.add(_,h),h.D=0}}function zo(h,_){return vr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Or(p(h.Ea,h,_),yh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Y=new Oe(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=j(Z),_e(Z,this.U)):Z=this.U),this.u!==null||this.R||(Y.J=Z,Z=null),this.S)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(_+=N,_>4096){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=dh(this,Y,_),b=kt(this.J),Rt(b,"RID",h),Rt(b,"CVER",22),this.G&&Rt(b,"X-HTTP-Session-Id",this.G),Ya(this,b),Z&&(this.R?_="headers="+me(Wr(Z))+"&"+_:this.u&&Ga(b,this.u,Z)),Pr(this.h,Y),this.Ra&&Rt(b,"TYPE","init"),this.S?(Rt(b,"$req",_),Rt(b,"SID","null"),Y.U=!0,Ve(Y,b,null)):Ve(Y,b,_),this.I=2}}else this.I==3&&(h?_u(this,h):this.i.length==0||Jn(this.h)||_u(this))};function _u(h,_){var b;_?b=_.l:b=h.V++;const N=kt(h.J);Rt(N,"SID",h.M),Rt(N,"RID",b),Rt(N,"AID",h.K),Ya(h,N),h.u&&h.o&&Ga(N,h.u,h.o),b=new Oe(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),_&&(h.i=_.G.concat(h.i)),_=dh(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Pr(h.h,b),Ve(b,N,_)}function Ya(h,_){h.H&&pe(h.H,function(b,N){Rt(_,N,b)}),h.l&&pe({},function(b,N){Rt(_,N,b)})}function dh(h,_,b){b=Math.min(h.i.length,b);const N=h.l?p(h.l.Ka,h.l,h):null;e:{var Y=h.i;let et=-1;for(;;){const _n=["count="+b];et==-1?b>0?(et=Y[0].g,_n.push("ofs="+et)):et=0:_n.push("ofs="+et);let It=!0;for(let an=0;an<b;an++){var Z=Y[an].g;const Jr=Y[an].map;if(Z-=et,Z<0)et=Math.max(0,Y[an].g-100),It=!1;else try{Z="req"+Z+"_"||"";try{var Re=Jr instanceof Map?Jr:Object.entries(Jr);for(const[Ui,yi]of Re){let _i=yi;f(yi)&&(_i=Zt(yi)),_n.push(Z+Ui+"="+encodeURIComponent(_i))}}catch(Ui){throw _n.push(Z+"type="+encodeURIComponent("_badmap")),Ui}}catch{N&&N(Jr)}}if(It){Re=_n.join("&");break e}}Re=void 0}return h=h.i.splice(0,b),_.G=h,Re}function mh(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;ie||I(),ne||(ie(),ne=!0),A.add(_,h),h.A=0}}function Qa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Or(p(h.Da,h),yh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ph(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Or(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,sn(10),Gs(this),ph(this))};function vu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ph(h){h.g=new Oe(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=kt(h.na);Rt(_,"RID","rpc"),Rt(_,"SID",h.M),Rt(_,"AID",h.K),Rt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&Rt(_,"TO",h.ia),Rt(_,"TYPE","xmlhttp"),Ya(h,_),h.u&&h.o&&Ga(_,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Ha(kt(_)),b.u=null,b.R=!0,Ge(b,h)}n.Va=function(){this.C!=null&&(this.C=null,Gs(this),Qa(this),sn(19))};function Bo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function gh(h,_){var b=null;if(h.g==_){Bo(h),vu(h),h.g=null;var N=2}else if(Zn(h.h,_))b=_.G,Di(h.h,_),N=1;else return;if(h.I!=0){if(_.o)if(N==1){b=_.u?_.u.length:0,_=Date.now()-_.F;var Y=h.D;N=lt(),Jt(N,new Qr(N,b)),ji(h)}else mh(h);else if(Y=_.m,Y==3||Y==0&&_.X>0||!(N==1&&zo(h,_)||N==2&&Qa(h)))switch(b&&b.length>0&&(_=h.h,_.i=_.i.concat(b)),Y){case 1:ki(h,5);break;case 4:ki(h,10);break;case 3:ki(h,6);break;default:ki(h,2)}}}function yh(h,_){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*_}function ki(h,_){if(h.j.info("Error code "+_),_==2){var b=p(h.bb,h),N=h.Ua;const Y=!N;N=new Sn(N||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||rt(N,"https"),Ha(N),Y?mi(N.toString(),b):mu(N.toString(),b)}else sn(2);h.I=0,h.l&&h.l.pa(_),_h(h),Uo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function _h(h){if(h.I=0,h.ja=[],h.l){const _=Oi(h.h);(_.length!=0||h.i.length!=0)&&(D(h.ja,_),D(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function vh(h,_,b){var N=b instanceof Sn?kt(b):new Sn(b);if(N.g!="")_&&(N.g=_+"."+N.g),Vr(N,N.u);else{var Y=c.location;N=Y.protocol,_=_?_+"."+Y.hostname:Y.hostname,Y=+Y.port;const Z=new Sn(null);N&&rt(Z,N),_&&(Z.g=_),Y&&Vr(Z,Y),b&&(Z.h=b),N=Z}return b=h.G,_=h.wa,b&&_&&Rt(N,b,_),Rt(N,"VER",h.ka),Ya(h,N),N}function Eh(h,_,b){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new Ut(new Pi({ab:b})):new Ut(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Th(){}n=Th.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function $s(){}$s.prototype.g=function(h,_){return new fr(h,_)};function fr(h,_){Mt.call(this),this.g=new qs(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!x(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new rs(this)}v(fr,Mt),fr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fr.prototype.close=function(){yu(this.g)},fr.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Zt(h),h=b);_.i.push(new Xt(_.Ya++,h)),_.I==3&&ji(_)},fr.prototype.N=function(){this.g.l=null,delete this.j,yu(this.g),delete this.g,fr.Z.N.call(this)};function bh(h){de.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const b in _){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}v(bh,de);function Sh(){De.call(this),this.status=1}v(Sh,De);function rs(h){this.g=h}v(rs,Th),rs.prototype.ra=function(){Jt(this.g,"a")},rs.prototype.qa=function(h){Jt(this.g,new bh(h))},rs.prototype.pa=function(h){Jt(this.g,new Sh)},rs.prototype.oa=function(){Jt(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,fr.prototype.send=fr.prototype.o,fr.prototype.open=fr.prototype.m,fr.prototype.close=fr.prototype.close,pw=function(){return new $s},mw=function(){return lt()},dw=Pe,vy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,$f=es,k.COMPLETE="complete",fw=k,ve.EventType=Ce,Ce.OPEN="a",Ce.CLOSE="b",Ce.ERROR="c",Ce.MESSAGE="d",Mt.prototype.listen=Mt.prototype.J,fc=ve,Ut.prototype.listenOnce=Ut.prototype.K,Ut.prototype.getLastError=Ut.prototype.Ha,Ut.prototype.getLastErrorCode=Ut.prototype.ya,Ut.prototype.getStatus=Ut.prototype.ca,Ut.prototype.getResponseJson=Ut.prototype.La,Ut.prototype.getResponseText=Ut.prototype.la,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Fa,hw=Ut}).apply(typeof Df<"u"?Df:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rr.UNAUTHENTICATED=new rr(null),rr.GOOGLE_CREDENTIALS=new rr("google-credentials-uid"),rr.FIRST_PARTY=new rr("first-party-uid"),rr.MOCK_USER=new rr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu="12.8.0";function xO(n){nu=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new i_("@firebase/firestore");function Sl(){return Ao.logLevel}function Me(n,...e){if(Ao.logLevel<=gt.DEBUG){const t=e.map(o_);Ao.debug(`Firestore (${nu}): ${n}`,...t)}}function Ns(n,...e){if(Ao.logLevel<=gt.ERROR){const t=e.map(o_);Ao.error(`Firestore (${nu}): ${n}`,...t)}}function Fl(n,...e){if(Ao.logLevel<=gt.WARN){const t=e.map(o_);Ao.warn(`Firestore (${nu}): ${n}`,...t)}}function o_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,gw(n,i,t)}function gw(n,e,t){let i=`FIRESTORE (${nu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ns(i),new Error(i)}function Dt(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||gw(e,a,i)}function Ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends js{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rr.UNAUTHENTICATED)))}shutdown(){}}class DO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class OO{constructor(e){this.t=e,this.currentUser=rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Dt(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Rs,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Rs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Dt(typeof i.accessToken=="string",31837,{l:i}),new yw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Dt(e===null||typeof e=="string",2055,{h:e}),new rr(e)}}class MO{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=rr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class PO{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new MO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class C0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Dt(this.o===void 0,3512);const i=l=>{l.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Me("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new C0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new C0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=LO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function yt(n,e){return n<e?-1:n>e?1:0}function Ey(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return Fg(a)===Fg(l)?yt(a,l):Fg(a)?1:-1}return yt(n.length,e.length)}const jO=55296,kO=57343;function Fg(n){const e=n.charCodeAt(0);return e>=jO&&e<=kO}function ql(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="__name__";class qi{constructor(e,t,i){t===void 0?t=0:t>e.length&&$e(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&$e(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return qi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=qi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return yt(e.length,t.length)}static compareSegments(e,t){const i=qi.isNumericId(e),a=qi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?qi.extractNumericId(e).compare(qi.extractNumericId(t)):Ey(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ia.fromString(e.substring(4,e.length-2))}}class Wt extends qi{construct(e,t,i){return new Wt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Wt(t)}static emptyPath(){return new Wt([])}}const UO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends qi{construct(e,t,i){return new Kn(e,t,i)}static isValidIdentifier(e){return UO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===R0}static keyField(){return new Kn([R0])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(i+=f,a++):(l(),a++)}if(l(),c)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(t)}static emptyPath(){return new Kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Wt.fromString(e))}static fromName(e){return new Fe(Wt.fromString(e).popFirst(5))}static empty(){return new Fe(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Wt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(n,e,t){if(!t)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zO(n,e,t,i){if(e===!0&&i===!0)throw new Ne(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function I0(n){if(!Fe.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function x0(n){if(Fe.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Yd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$e(12329,{type:typeof n})}function xr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yd(n);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(n,e){const t={typeString:n};return e&&(t.value=e),t}function Qc(n,e){if(!vw(n))throw new Ne(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Ne(ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=-62135596800,D0=1e6;class rn{static now(){return rn.fromMillis(Date.now())}static fromDate(e){return rn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*D0);return new rn(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<N0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/D0}_compareTo(e){return this.seconds===e.seconds?yt(this.nanoseconds,e.nanoseconds):yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qc(e,rn._jsonSchema))return new rn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-N0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rn._jsonSchemaVersion="firestore/timestamp/1.0",rn._jsonSchema={type:On("string",rn._jsonSchemaVersion),seconds:On("number"),nanoseconds:On("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new rn(0,0))}static max(){return new Xe(new rn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=-1;function BO(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Xe.fromTimestamp(i===1e9?new rn(t+1,0):new rn(t,i));return new Oa(a,Fe.empty(),e)}function HO(n){return new Oa(n.readTime,n.key,Dc)}class Oa{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Oa(Xe.min(),Fe.empty(),Dc)}static max(){return new Oa(Xe.max(),Fe.empty(),Dc)}}function FO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Fe.comparator(n.documentKey,e.documentKey),t!==0?t:yt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==qO)throw n;Me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,i)=>{t(e)}))}static reject(e){return new fe(((t,i)=>{i(e)}))}static waitFor(e){return new fe(((t,i)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(m=>i(m)))})),c=!0,l===a&&t()}))}static or(e){let t=fe.resolve(!1);for(const i of e)t=t.next((a=>a?fe.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new fe(((i,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((y=>{c[p]=y,++f,f===l&&i(c)}),(y=>a(y)))}}))}static doWhile(e,t){return new fe(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function $O(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function iu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=-1;function Xd(n){return n==null}function pd(n){return n===0&&1/n==-1/0}function KO(n){return typeof n=="number"&&Number.isInteger(n)&&!pd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="";function YO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=O0(e)),e=QO(n.get(t),e);return O0(e)}function QO(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Ew:t+="";break;default:t+=l}}return t}function O0(n){return n+Ew+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ka(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Tw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,t){this.comparator=e,this.root=t||$n.EMPTY}insert(e,t){return new fn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Of(this.root,e,this.comparator,!1)}getReverseIterator(){return new Of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Of(this.root,e,this.comparator,!0)}}class Of{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??$n.RED,this.left=a??$n.EMPTY,this.right=l??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new $n(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return $n.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new $n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.comparator=e,this.data=new fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P0(this.data.getIterator())}getIteratorFrom(e){return new P0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class P0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new qr([])}unionWith(e){let t=new Pn(Kn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new qr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new bw("Invalid base64 string: "+l):l}})(e);return new Yn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const XO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(n){if(Dt(!!n,39018),typeof n=="string"){let e=0;const t=XO.exec(n);if(Dt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tn(n.seconds),nanos:Tn(n.nanos)}}function Tn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pa(n){return typeof n=="string"?Yn.fromBase64String(n):Yn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="server_timestamp",Aw="__type__",ww="__previous_value__",Cw="__local_write_time__";function c_(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Aw])==null?void 0:i.stringValue)===Sw}function Wd(n){const e=n.mapValue.fields[ww];return c_(e)?Wd(e):e}function Oc(n){const e=Ma(n.mapValue.fields[Cw].timestampValue);return new rn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,t,i,a,l,c,f,m,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y,this.apiKey=v}}const gd="(default)";class Mc{constructor(e,t){this.projectId=e,this.database=t||gd}static empty(){return new Mc("","")}get isDefaultDatabase(){return this.database===gd}isEqual(e){return e instanceof Mc&&e.projectId===this.projectId&&e.database===this.database}}function JO(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="__type__",ZO="__max__",Mf={mapValue:{}},Iw="__vector__",yd="value";function Va(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?c_(n)?4:tM(n)?9007199254740991:eM(n)?10:11:$e(28295,{value:n})}function Wi(n,e){if(n===e)return!0;const t=Va(n);if(t!==Va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Oc(n).isEqual(Oc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ma(a.timestampValue),f=Ma(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Pa(a.bytesValue).isEqual(Pa(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Tn(a.geoPointValue.latitude)===Tn(l.geoPointValue.latitude)&&Tn(a.geoPointValue.longitude)===Tn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Tn(a.integerValue)===Tn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Tn(a.doubleValue),f=Tn(l.doubleValue);return c===f?pd(c)===pd(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return ql(n.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(M0(c)!==M0(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Wi(c[m],f[m])))return!1;return!0})(n,e);default:return $e(52216,{left:n})}}function Pc(n,e){return(n.values||[]).find((t=>Wi(t,e)))!==void 0}function Gl(n,e){if(n===e)return 0;const t=Va(n),i=Va(e);if(t!==i)return yt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return yt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Tn(l.integerValue||l.doubleValue),m=Tn(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return V0(n.timestampValue,e.timestampValue);case 4:return V0(Oc(n),Oc(e));case 5:return Ey(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=Pa(l),m=Pa(c);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let p=0;p<f.length&&p<m.length;p++){const y=yt(f[p],m[p]);if(y!==0)return y}return yt(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=yt(Tn(l.latitude),Tn(c.latitude));return f!==0?f:yt(Tn(l.longitude),Tn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return L0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,w,D,z;const f=l.fields||{},m=c.fields||{},p=(S=f[yd])==null?void 0:S.arrayValue,y=(w=m[yd])==null?void 0:w.arrayValue,v=yt(((D=p==null?void 0:p.values)==null?void 0:D.length)||0,((z=y==null?void 0:y.values)==null?void 0:z.length)||0);return v!==0?v:L0(p,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Mf.mapValue&&c===Mf.mapValue)return 0;if(l===Mf.mapValue)return 1;if(c===Mf.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),p=c.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const S=Ey(m[v],y[v]);if(S!==0)return S;const w=Gl(f[m[v]],p[y[v]]);if(w!==0)return w}return yt(m.length,y.length)})(n.mapValue,e.mapValue);default:throw $e(23264,{he:t})}}function V0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return yt(n,e);const t=Ma(n),i=Ma(e),a=yt(t.seconds,i.seconds);return a!==0?a:yt(t.nanos,i.nanos)}function L0(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Gl(t[a],i[a]);if(l)return l}return yt(t.length,i.length)}function $l(n){return Ty(n)}function Ty(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ma(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Pa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Ty(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Ty(t.fields[c])}`;return a+"}"})(n.mapValue):$e(61005,{value:n})}function Kf(n){switch(Va(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wd(n);return e?16+Kf(e):16;case 5:return 2*n.stringValue.length;case 6:return Pa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Kf(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return ka(i.fields,((l,c)=>{a+=l.length+Kf(c)})),a})(n.mapValue);default:throw $e(13486,{value:n})}}function j0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function by(n){return!!n&&"integerValue"in n}function h_(n){return!!n&&"arrayValue"in n}function k0(n){return!!n&&"nullValue"in n}function U0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yf(n){return!!n&&"mapValue"in n}function eM(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Rw])==null?void 0:i.stringValue)===Iw}function vc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ka(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=vc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vc(n.arrayValue.values[t]);return e}return{...n}}function tM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ZO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.value=e}static empty(){return new Ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Yf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(t)}setAll(e){let t=Kn.emptyPath(),i={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=f.popLast()}c?i[f.lastSegment()]=vc(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Yf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Yf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){ka(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new Ir(vc(this.value))}}function xw(n){const e=[];return ka(n.fields,((t,i)=>{const a=new Kn([t]);if(Yf(i)){const l=xw(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new qr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,t,i,a,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new ir(e,0,Xe.min(),Xe.min(),Xe.min(),Ir.empty(),0)}static newFoundDocument(e,t,i,a){return new ir(e,1,t,Xe.min(),i,a,0)}static newNoDocument(e,t){return new ir(e,2,t,Xe.min(),Xe.min(),Ir.empty(),0)}static newUnknownDocument(e,t){return new ir(e,3,t,Xe.min(),Xe.min(),Ir.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t){this.position=e,this.inclusive=t}}function z0(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=Fe.comparator(Fe.fromName(c.referenceValue),t.key):i=Gl(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function B0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t="asc"){this.field=e,this.dir=t}}function nM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{}class Dn extends Nw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new iM(e,t,i):t==="array-contains"?new oM(e,i):t==="in"?new lM(e,i):t==="not-in"?new uM(e,i):t==="array-contains-any"?new cM(e,i):new Dn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new sM(e,i):new aM(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Gl(t,this.value)):t!==null&&Va(this.value)===Va(t)&&this.matchesComparison(Gl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ri extends Nw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ri(e,t)}matches(e){return Dw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Dw(n){return n.op==="and"}function Ow(n){return rM(n)&&Dw(n)}function rM(n){for(const e of n.filters)if(e instanceof Ri)return!1;return!0}function Sy(n){if(n instanceof Dn)return n.field.canonicalString()+n.op.toString()+$l(n.value);if(Ow(n))return n.filters.map((e=>Sy(e))).join(",");{const e=n.filters.map((t=>Sy(t))).join(",");return`${n.op}(${e})`}}function Mw(n,e){return n instanceof Dn?(function(i,a){return a instanceof Dn&&i.op===a.op&&i.field.isEqual(a.field)&&Wi(i.value,a.value)})(n,e):n instanceof Ri?(function(i,a){return a instanceof Ri&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,f)=>l&&Mw(c,a.filters[f])),!0):!1})(n,e):void $e(19439)}function Pw(n){return n instanceof Dn?(function(t){return`${t.field.canonicalString()} ${t.op} ${$l(t.value)}`})(n):n instanceof Ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(Pw).join(" ,")+"}"})(n):"Filter"}class iM extends Dn{constructor(e,t,i){super(e,t,i),this.key=Fe.fromName(i.referenceValue)}matches(e){const t=Fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class sM extends Dn{constructor(e,t){super(e,"in",t),this.keys=Vw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class aM extends Dn{constructor(e,t){super(e,"not-in",t),this.keys=Vw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Vw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Fe.fromName(i.referenceValue)))}class oM extends Dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return h_(t)&&Pc(t.arrayValue,this.value)}}class lM extends Dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Pc(this.value.arrayValue,t)}}class uM extends Dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Pc(this.value.arrayValue,t)}}class cM extends Dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!h_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Pc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,t=null,i=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function H0(n,e=null,t=[],i=[],a=null,l=null,c=null){return new hM(n,e,t,i,a,l,c)}function f_(n){const e=Ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Sy(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Xd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>$l(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>$l(i))).join(",")),e.Te=t}return e.Te}function d_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Mw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!B0(n.startAt,e.startAt)&&B0(n.endAt,e.endAt)}function Ay(n){return Fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t=null,i=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function fM(n,e,t,i,a,l,c,f){return new Xc(n,e,t,i,a,l,c,f)}function Jd(n){return new Xc(n)}function F0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dM(n){return Fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Lw(n){return n.collectionGroup!==null}function Ec(n){const e=Ze(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Pn(Kn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new vd(l,i))})),t.has(Kn.keyField().canonicalString())||e.Ie.push(new vd(Kn.keyField(),i))}return e.Ie}function $i(n){const e=Ze(n);return e.Ee||(e.Ee=mM(e,Ec(n))),e.Ee}function mM(n,e){if(n.limitType==="F")return H0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new vd(a.field,l)}));const t=n.endAt?new _d(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new _d(n.startAt.position,n.startAt.inclusive):null;return H0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function wy(n,e){const t=n.filters.concat([e]);return new Xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Cy(n,e,t){return new Xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zd(n,e){return d_($i(n),$i(e))&&n.limitType===e.limitType}function jw(n){return`${f_($i(n))}|lt:${n.limitType}`}function Al(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>Pw(a))).join(", ")}]`),Xd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>$l(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>$l(a))).join(",")),`Target(${i})`})($i(n))}; limitType=${n.limitType})`}function em(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Fe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of Ec(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(c,f,m){const p=z0(c,f,m);return c.inclusive?p<=0:p<0})(i.startAt,Ec(i),a)||i.endAt&&!(function(c,f,m){const p=z0(c,f,m);return c.inclusive?p>=0:p>0})(i.endAt,Ec(i),a))})(n,e)}function pM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kw(n){return(e,t)=>{let i=!1;for(const a of Ec(n)){const l=gM(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function gM(n,e,t){const i=n.field.isKeyField()?Fe.comparator(e.key,t.key):(function(l,c,f){const m=c.data.field(l),p=f.data.field(l);return m!==null&&p!==null?Gl(m,p):$e(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return $e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ka(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return Tw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=new fn(Fe.comparator);function Ds(){return yM}const Uw=new fn(Fe.comparator);function dc(...n){let e=Uw;for(const t of n)e=e.insert(t.key,t);return e}function zw(n){let e=Uw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function yo(){return Tc()}function Bw(){return Tc()}function Tc(){return new Do((n=>n.toString()),((n,e)=>n.isEqual(e)))}const _M=new fn(Fe.comparator),vM=new Pn(Fe.comparator);function _t(...n){let e=vM;for(const t of n)e=e.add(t);return e}const EM=new Pn(yt);function TM(){return EM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pd(e)?"-0":e}}function Hw(n){return{integerValue:""+n}}function bM(n,e){return KO(e)?Hw(e):m_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(){this._=void 0}}function SM(n,e,t){return n instanceof Vc?(function(a,l){const c={fields:{[Aw]:{stringValue:Sw},[Cw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&c_(l)&&(l=Wd(l)),l&&(c.fields[ww]=l),{mapValue:c}})(t,e):n instanceof Lc?qw(n,e):n instanceof jc?Gw(n,e):(function(a,l){const c=Fw(a,l),f=q0(c)+q0(a.Ae);return by(c)&&by(a.Ae)?Hw(f):m_(a.serializer,f)})(n,e)}function AM(n,e,t){return n instanceof Lc?qw(n,e):n instanceof jc?Gw(n,e):t}function Fw(n,e){return n instanceof Ed?(function(i){return by(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Vc extends tm{}class Lc extends tm{constructor(e){super(),this.elements=e}}function qw(n,e){const t=$w(e);for(const i of n.elements)t.some((a=>Wi(a,i)))||t.push(i);return{arrayValue:{values:t}}}class jc extends tm{constructor(e){super(),this.elements=e}}function Gw(n,e){let t=$w(e);for(const i of n.elements)t=t.filter((a=>!Wi(a,i)));return{arrayValue:{values:t}}}class Ed extends tm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function q0(n){return Tn(n.integerValue||n.doubleValue)}function $w(n){return h_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,t){this.field=e,this.transform=t}}function CM(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof Lc&&a instanceof Lc||i instanceof jc&&a instanceof jc?ql(i.elements,a.elements,Wi):i instanceof Ed&&a instanceof Ed?Wi(i.Ae,a.Ae):i instanceof Vc&&a instanceof Vc})(n.transform,e.transform)}class RM{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class nm{}function Kw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new rm(n.key,Nr.none()):new Wc(n.key,n.data,Nr.none());{const t=n.data,i=Ir.empty();let a=new Pn(Kn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Ua(n.key,i,new qr(a.toArray()),Nr.none())}}function IM(n,e,t){n instanceof Wc?(function(a,l,c){const f=a.value.clone(),m=$0(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Ua?(function(a,l,c){if(!Qf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=$0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Yw(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function bc(n,e,t,i){return n instanceof Wc?(function(l,c,f,m){if(!Qf(l.precondition,c))return f;const p=l.value.clone(),y=K0(l.fieldTransforms,m,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ua?(function(l,c,f,m){if(!Qf(l.precondition,c))return f;const p=K0(l.fieldTransforms,m,c),y=c.data;return y.setAll(Yw(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(l,c,f){return Qf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function xM(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=Fw(i.transform,a||null);l!=null&&(t===null&&(t=Ir.empty()),t.set(i.field,l))}return t||null}function G0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&ql(i,a,((l,c)=>CM(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Wc extends nm{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ua extends nm{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Yw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function $0(n,e,t){const i=new Map;Dt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,f=e.data.field(l.field);i.set(l.field,AM(c,f,t[a]))}return i}function K0(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,SM(l,c,e))}return i}class rm extends nm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NM extends nm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&IM(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=bc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=bc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Bw();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=Kw(c,f);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Xe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),_t())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,((t,i)=>G0(t,i)))&&ql(this.baseMutations,e.baseMutations,((t,i)=>G0(t,i)))}}class p_{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Dt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return _M})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new p_(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn,bt;function PM(n){switch(n){case ce.OK:return $e(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return $e(15467,{code:n})}}function Qw(n){if(n===void 0)return Ns("GRPC error has no .code"),ce.UNKNOWN;switch(n){case xn.OK:return ce.OK;case xn.CANCELLED:return ce.CANCELLED;case xn.UNKNOWN:return ce.UNKNOWN;case xn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case xn.INTERNAL:return ce.INTERNAL;case xn.UNAVAILABLE:return ce.UNAVAILABLE;case xn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case xn.NOT_FOUND:return ce.NOT_FOUND;case xn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case xn.ABORTED:return ce.ABORTED;case xn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case xn.DATA_LOSS:return ce.DATA_LOSS;default:return $e(39323,{code:n})}}(bt=xn||(xn={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=new Ia([4294967295,4294967295],0);function Y0(n){const e=VM().encode(n),t=new cw;return t.update(e),new Uint8Array(t.digest())}function Q0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ia([t,i],0),new Ia([a,l],0)]}class g_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new mc(`Invalid padding: ${t}`);if(i<0)throw new mc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new mc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new mc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ia.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Ia.fromNumber(i)));return a.compare(LM)===1&&(a=new Ia([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Y0(e),[i,a]=Q0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new g_(l,a,t);return i.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=Y0(e),[i,a]=Q0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Jc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new im(Xe.min(),a,new fn(yt),Ds(),_t())}}class Jc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Jc(i,t,_t(),_t(),_t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class Xw{constructor(e,t){this.targetId=e,this.Ce=t}}class Ww{constructor(e,t,i=Yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class X0{constructor(){this.ve=0,this.Fe=W0(),this.Me=Yn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_t(),t=_t(),i=_t();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:$e(38017,{changeType:l})}})),new Jc(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=W0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Dt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class jM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ds(),this.He=Pf(),this.Je=Pf(),this.Ze=new fn(yt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:$e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Ay(l))if(i===0){const c=new Fe(l.path);this.et(t,c,ir.newNoDocument(c,Xe.min()))}else Dt(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=Pa(i).toUint8Array()}catch(m){if(m instanceof bw)return Fl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new g_(c,a,l)}catch(m){return Fl(m instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Ay(f.target)){const m=new Fe(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,ir.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let i=_t();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new im(e,t,this.Ze,this.je,i);return this.je=Ds(),this.He=Pf(),this.Je=Pf(),this.Ze=new fn(yt),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new X0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Pn(yt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Pn(yt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new X0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Pf(){return new fn(Fe.comparator)}function W0(){return new fn(Fe.comparator)}const kM={asc:"ASCENDING",desc:"DESCENDING"},UM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zM={and:"AND",or:"OR"};class BM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ry(n,e){return n.useProto3Json||Xd(e)?e:{value:e}}function Td(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function HM(n,e){return Td(n,e.toTimestamp())}function Ki(n){return Dt(!!n,49232),Xe.fromTimestamp((function(t){const i=Ma(t);return new rn(i.seconds,i.nanos)})(n))}function y_(n,e){return Iy(n,e).canonicalString()}function Iy(n,e){const t=(function(a){return new Wt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Zw(n){const e=Wt.fromString(n);return Dt(i1(e),10190,{key:e.toString()}),e}function xy(n,e){return y_(n.databaseId,e.path)}function qg(n,e){const t=Zw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Fe(t1(t))}function e1(n,e){return y_(n.databaseId,e)}function FM(n){const e=Zw(n);return e.length===4?Wt.emptyPath():t1(e)}function Ny(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function t1(n){return Dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function J0(n,e,t){return{name:xy(n,e),fields:t.value.mapValue.fields}}function qM(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:$e(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(Dt(y===void 0||typeof y=="string",58123),Yn.fromBase64String(y||"")):(Dt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Yn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(p){const y=p.code===void 0?ce.UNKNOWN:Qw(p.code);return new Ne(y,p.message||"")})(c);t=new Ww(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=qg(n,i.document.name),l=Ki(i.document.updateTime),c=i.document.createTime?Ki(i.document.createTime):Xe.min(),f=new Ir({mapValue:{fields:i.document.fields}}),m=ir.newFoundDocument(a,l,c,f),p=i.targetIds||[],y=i.removedTargetIds||[];t=new Xf(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=qg(n,i.document),l=i.readTime?Ki(i.readTime):Xe.min(),c=ir.newNoDocument(a,l),f=i.removedTargetIds||[];t=new Xf([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=qg(n,i.document),l=i.removedTargetIds||[];t=new Xf([],l,a,null)}else{if(!("filter"in e))return $e(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new MM(a,l),f=i.targetId;t=new Xw(f,c)}}return t}function GM(n,e){let t;if(e instanceof Wc)t={update:J0(n,e.key,e.value)};else if(e instanceof rm)t={delete:xy(n,e.key)};else if(e instanceof Ua)t={update:J0(n,e.key,e.data),updateMask:eP(e.fieldMask)};else{if(!(e instanceof NM))return $e(16599,{dt:e.type});t={verify:xy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const f=c.transform;if(f instanceof Vc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Lc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof jc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ed)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw $e(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:HM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:$e(27497)})(n,e.precondition)),t}function $M(n,e){return n&&n.length>0?(Dt(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Ki(a.updateTime):Ki(l);return c.isEqual(Xe.min())&&(c=Ki(l)),new RM(c,a.transformResults||[])})(t,e)))):[]}function KM(n,e){return{documents:[e1(n,e.path)]}}function YM(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=e1(n,a);const l=(function(p){if(p.length!==0)return r1(Ri.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((y=>(function(S){return{field:wl(S.field),direction:WM(S.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Ry(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function QM(n){let e=FM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Dt(i===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(v){const S=n1(v);return S instanceof Ri&&Ow(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((S=>(function(D){return new vd(Cl(D.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let S;return S=typeof v=="object"?v.value:v,Xd(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(v){const S=!!v.before,w=v.values||[];return new _d(w,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const S=!v.before,w=v.values||[];return new _d(w,S)})(t.endAt)),fM(e,a,c,l,f,"F",m,p)}function XM(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function n1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Cl(t.unaryFilter.field);return Dn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Cl(t.unaryFilter.field);return Dn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Cl(t.unaryFilter.field);return Dn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Cl(t.unaryFilter.field);return Dn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Dn.create(Cl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ri.create(t.compositeFilter.filters.map((i=>n1(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return $e(1026)}})(t.compositeFilter.op))})(n):$e(30097,{filter:n})}function WM(n){return kM[n]}function JM(n){return UM[n]}function ZM(n){return zM[n]}function wl(n){return{fieldPath:n.canonicalString()}}function Cl(n){return Kn.fromServerFormat(n.fieldPath)}function r1(n){return n instanceof Dn?(function(t){if(t.op==="=="){if(U0(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NAN"}};if(k0(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(U0(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NOT_NAN"}};if(k0(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(t.field),op:JM(t.op),value:t.value}}})(n):n instanceof Ri?(function(t){const i=t.getFilters().map((a=>r1(a)));return i.length===1?i[0]:{compositeFilter:{op:ZM(t.op),filters:i}}})(n):$e(54877,{filter:n})}function eP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function i1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function s1(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t,i,a,l=Xe.min(),c=Xe.min(),f=Yn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.yt=e}}function nP(n){const e=QM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Cy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.Sn=new iP}addToCollectionParentIndex(e,t){return this.Sn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Oa.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Oa.min())}updateCollectionGroup(e,t,i){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class iP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Pn(Wt.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Pn(Wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},a1=41943040;class Rr{static withCacheSize(e){return new Rr(e,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr.DEFAULT_COLLECTION_PERCENTILE=10,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rr.DEFAULT=new Rr(a1,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rr.DISABLED=new Rr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Kl(0)}static ar(){return new Kl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="LruGarbageCollector",sP=1048576;function tS([n,e],[t,i]){const a=yt(n,t);return a===0?yt(e,i):a}class aP{constructor(e){this.Pr=e,this.buffer=new Pn(tS),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();tS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Me(eS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){iu(t)?Me(eS,"Ignoring IndexedDB error during garbage collection: ",t):await ru(t)}await this.Ar(3e5)}))}}class lP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(Qd.ce);const i=new aP(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Z0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,c,f,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(i=v,f=Date.now(),this.removeTargets(e,i,t)))).next((v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(p=Date.now(),Sl()<=gt.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${v} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function uP(n,e){return new lP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.changes=new Do((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?fe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&bc(i.mutation,a,qr.empty(),rn.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,_t()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=_t()){const a=yo();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=dc();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=yo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,_t())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,i,a){let l=Ds();const c=Tc(),f=(function(){return Tc()})();return t.forEach(((m,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof Ua)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),bc(y.mutation,p,y.mutation.getFieldMask(),rn.now())):c.set(p.key,qr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,y)=>c.set(p,y))),t.forEach(((p,y)=>f.set(p,new hP(y,c.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Tc();let a=new fn(((c,f)=>c-f)),l=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let y=i.get(m)||qr.empty();y=f.applyToLocalView(p,y),i.set(m,y);const v=(a.get(f.batchId)||_t()).add(m);a=a.insert(f.batchId,v)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,y=m.value,v=Bw();y.forEach((S=>{if(!l.has(S)){const w=Kw(t.get(S),i.get(S));w!==null&&v.set(S,w),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return fe.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return dM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Lw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):fe.resolve(yo());let f=Dc,m=l;return c.next((p=>fe.forEach(p,((y,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),l.get(y)?fe.resolve():this.remoteDocumentCache.getEntry(e,y).next((S=>{m=m.insert(y,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,_t()))).next((y=>({batchId:f,changes:zw(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fe(t)).next((i=>{let a=dc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=dc();return this.indexManager.getCollectionParents(e,l).next((f=>fe.forEach(f,(m=>{const p=(function(v,S){return new Xc(S,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((y=>{y.forEach(((v,S)=>{c=c.insert(v,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((m,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,ir.newInvalidDocument(y)))}));let f=dc();return c.forEach(((m,p)=>{const y=l.get(m);y!==void 0&&bc(y.mutation,p,qr.empty(),rn.now()),em(t,p)&&(f=f.insert(m,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return fe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ki(a.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:nP(a.bundledQuery),readTime:Ki(a.readTime)}})(t)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.overlays=new fn(Fe.comparator),this.Lr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=yo();return fe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),fe.resolve()}getOverlaysForCollection(e,t,i){const a=yo(),l=t.length+1,c=new Fe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return fe.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new fn(((p,y)=>p-y));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=yo(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const f=yo(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,y)=>f.set(p,y))),!(f.size()>=a)););return fe.resolve(f)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new OM(t,i));let l=this.Lr.get(t);l===void 0&&(l=_t(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.sessionToken=Yn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(){this.kr=new Pn(kn.Kr),this.qr=new Pn(kn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new kn(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new kn(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Fe(new Wt([])),i=new kn(t,e),a=new kn(t,e+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Fe(new Wt([])),i=new kn(t,e),a=new kn(t,e+1);let l=_t();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new kn(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class kn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Fe.comparator(e.key,t.key)||yt(e.Hr,t.Hr)}static Ur(e,t){return yt(e.Hr,t.Hr)||Fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Pn(kn.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new DM(l,t,i,a);this.mutationQueue.push(c);for(const f of a)this.Jr=this.Jr.add(new kn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?u_:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new kn(t,0),a=new kn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const f=this.Zr(c.Hr);l.push(f)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Pn(yt);return t.forEach((a=>{const l=new kn(a,0),c=new kn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{i=i.add(f.Hr)}))})),fe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Fe.isDocumentKey(l)||(l=l.child(""));const c=new kn(new Fe(l),0);let f=new Pn(yt);return this.Jr.forEachWhile((m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(f=f.add(m.Hr)),!0)}),c),fe.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Dt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return fe.forEach(t.mutations,(a=>{const l=new kn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new kn(t,0),a=this.Jr.firstAfterOrEqual(i);return fe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.ti=e,this.docs=(function(){return new fn(Fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return fe.resolve(i?i.document.mutableCopy():ir.newInvalidDocument(t))}getEntries(e,t){let i=Ds();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():ir.newInvalidDocument(a))})),fe.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Ds();const c=t.path,f=new Fe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||FO(HO(y),i)<=0||(a.has(y.key)||em(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,i,a){$e(9500)}ni(e,t){return fe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new _P(this)}getSize(e){return fe.resolve(this.size)}}class _P extends cP{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),fe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.persistence=e,this.ri=new Do((t=>f_(t)),d_),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ii=0,this.si=new __,this.targetCount=0,this.oi=Kl._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),fe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Kl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.lr(t),fe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),fe.waitFor(l).next((()=>a))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return fe.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),fe.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return fe.resolve(i)}containsKey(e,t){return fe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t){this._i={},this.overlays={},this.ai=new Qd(0),this.ui=!1,this.ui=!0,this.ci=new pP,this.referenceDelegate=e(this),this.li=new vP(this),this.indexManager=new rP,this.remoteDocumentCache=(function(a){return new yP(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new tP(t),this.Pi=new dP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new gP(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Me("MemoryPersistence","Starting transaction:",e);const a=new EP(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return fe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class EP extends GO{constructor(e){super(),this.currentSequenceNumber=e}}class v_{constructor(e){this.persistence=e,this.Ri=new __,this.Ai=null}static Vi(e){return new v_(e)}get di(){if(this.Ai)return this.Ai;throw $e(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),fe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(i=>{const a=Fe.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class bd{constructor(e,t){this.persistence=e,this.fi=new Do((i=>YO(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=uP(this,t)}static Vi(e,t){return new bd(e,t)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return fe.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?fe.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(i++,l.removeEntry(c,Xe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kf(e.data.value)),t}wr(e,t,i){return fe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return fe.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=_t(),a=_t();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new E_(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return h2()?8:$O(ar())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new TP;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(Sl()<=gt.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",Al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(Sl()<=gt.DEBUG&&Me("QueryEngine","Query:",Al(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(Sl()<=gt.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",Al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$i(t))):fe.resolve())}gs(e,t){if(F0(t))return fe.resolve(null);let i=$i(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Cy(t,null,"F"),i=$i(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=_t(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const p=this.bs(t,f);return this.Ss(t,p,c,m.readTime)?this.gs(e,Cy(t,null,"F")):this.Ds(e,p,t,m)}))))})))))}ps(e,t,i,a){return F0(t)||a.isEqual(Xe.min())?fe.resolve(null):this.fs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,i,a)?fe.resolve(null):(Sl()<=gt.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Al(t)),this.Ds(e,c,t,BO(a,Dc)).next((f=>f)))}))}bs(e,t){let i=new Pn(kw(e));return t.forEach(((a,l)=>{em(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return Sl()<=gt.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Al(t)),this.fs.getDocumentsMatchingQuery(e,t,Oa.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="LocalStore",SP=3e8;class AP{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new fn(yt),this.Fs=new Do((l=>f_(l)),d_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function wP(n,e,t,i){return new AP(n,e,t,i)}async function l1(n,e){const t=Ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],f=[];let m=_t();for(const p of a){c.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){f.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next((p=>({Ns:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function CP(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,p,y){const v=p.batch,S=v.keys();let w=fe.resolve();return S.forEach((D=>{w=w.next((()=>y.getEntry(m,D))).next((z=>{const M=p.docVersions.get(D);Dt(M!==null,48541),z.version.compareTo(M)<0&&(v.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),y.addEntry(z)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(m,v)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=_t();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function u1(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function RP(n,e){const t=Ze(n),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((y,v)=>{const S=a.get(v);if(!S)return;f.push(t.li.removeMatchingKeys(l,y.removedDocuments,v).next((()=>t.li.addMatchingKeys(l,y.addedDocuments,v))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?w=w.withResumeToken(Yn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,i)),a=a.insert(v,w),(function(z,M,B){return z.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=SP?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(S,w,y)&&f.push(t.li.updateTargetData(l,w))}));let m=Ds(),p=_t();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(IP(l,c,e.documentUpdates).next((y=>{m=y.Bs,p=y.Ls}))),!i.isEqual(Xe.min())){const y=t.li.getLastRemoteSnapshotVersion(l).next((v=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(y)}return fe.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.vs=a,l)))}function IP(n,e,t){let i=_t(),a=_t();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=Ds();return t.forEach(((f,m)=>{const p=l.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Xe.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):Me(T_,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)})),{Bs:c,Ls:a}}))}function xP(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=u_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function NP(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,fe.resolve(a)):t.li.allocateTargetId(i).next((c=>(a=new Sa(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Dy(n,e,t){const i=Ze(n),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!iu(c))throw c;Me(T_,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function nS(n,e,t){const i=Ze(n);let a=Xe.min(),l=_t();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,p,y){const v=Ze(m),S=v.Fs.get(y);return S!==void 0?fe.resolve(v.vs.get(S)):v.li.getTargetData(p,y)})(i,c,$i(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:Xe.min(),t?l:_t()))).next((f=>(DP(i,pM(e),f),{documents:f,ks:l})))))}function DP(n,e,t){let i=n.Ms.get(e)||Xe.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Ms.set(e,i)}class rS{constructor(){this.activeTargetIds=TM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OP{constructor(){this.vo=new rS,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new rS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="ConnectivityMonitor";class sS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Me(iS,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Me(iS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vf=null;function Oy(){return Vf===null?Vf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vf++,"0x"+Vf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="RestConnection",PP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class VP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===gd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=Oy(),f=this.Qo(e,t.toUriEncodedString());Me(Gg,`Sending RPC '${e}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,a,l);const{host:p}=new URL(f),y=eu(p);return this.zo(e,f,m,i,y).then((v=>(Me(Gg,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw Fl(Gg,`RPC '${e}' ${c} failed with error: `,v,"url: ",f,"request:",i),v}))}jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=PP[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="WebChannelConnection",oc=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Ml extends VP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ml.c_){const e=mw();oc(e,dw.STAT_EVENT,(t=>{t.stat===vy.PROXY?Me(tr,"STAT_EVENT: detected buffering proxy"):t.stat===vy.NOPROXY&&Me(tr,"STAT_EVENT: detected no buffering proxy")})),Ml.c_=!0}}zo(e,t,i,a,l){const c=Oy();return new Promise(((f,m)=>{const p=new hw;p.setWithCredentials(!0),p.listenOnce(fw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case $f.NO_ERROR:const v=p.getResponseJson();Me(tr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),f(v);break;case $f.TIMEOUT:Me(tr,`RPC '${e}' ${c} timed out`),m(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case $f.HTTP_ERROR:const S=p.getStatus();if(Me(tr,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const D=w==null?void 0:w.error;if(D&&D.status&&D.message){const z=(function(B){const F=B.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(F)>=0?F:ce.UNKNOWN})(D.status);m(new Ne(z,D.message))}else m(new Ne(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Me(tr,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);Me(tr,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",y,i,15)}))}T_(e,t,i){const a=Oy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const p=l.join("");Me(tr,`Creating RPC '${e}' stream ${a}: ${p}`,f);const y=c.createWebChannel(p,f);this.I_(y);let v=!1,S=!1;const w=new LP({Ho:D=>{S?Me(tr,`Not sending because RPC '${e}' stream ${a} is closed:`,D):(v||(Me(tr,`Opening RPC '${e}' stream ${a} transport.`),y.open(),v=!0),Me(tr,`RPC '${e}' stream ${a} sending:`,D),y.send(D))},Jo:()=>y.close()});return oc(y,fc.EventType.OPEN,(()=>{S||(Me(tr,`RPC '${e}' stream ${a} transport opened.`),w.i_())})),oc(y,fc.EventType.CLOSE,(()=>{S||(S=!0,Me(tr,`RPC '${e}' stream ${a} transport closed`),w.o_(),this.E_(y))})),oc(y,fc.EventType.ERROR,(D=>{S||(S=!0,Fl(tr,`RPC '${e}' stream ${a} transport errored. Name:`,D.name,"Message:",D.message),w.o_(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))})),oc(y,fc.EventType.MESSAGE,(D=>{var z;if(!S){const M=D.data[0];Dt(!!M,16349);const B=M,F=(B==null?void 0:B.error)||((z=B[0])==null?void 0:z.error);if(F){Me(tr,`RPC '${e}' stream ${a} received error:`,F);const G=F.status;let ee=(function(A){const I=xn[A];if(I!==void 0)return Qw(I)})(G),ie=F.message;ee===void 0&&(ee=ce.INTERNAL,ie="Unknown error status: "+G+" with message "+F.message),S=!0,w.o_(new Ne(ee,ie)),y.close()}else Me(tr,`RPC '${e}' stream ${a} received:`,M),w.__(M)}})),Ml.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return pw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n){return new Ml(n)}function $g(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(n){return new BM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ml.c_=!1;class c1{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&Me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="PersistentStream";class h1{constructor(e,t,i,a,l,c,f,m){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new c1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Ns(t.toString()),Ns("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Me(aS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Me(aS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kP extends h1{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=qM(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Xe.min():c.readTime?Ki(c.readTime):Xe.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Ny(this.serializer),t.addTarget=(function(l,c){let f;const m=c.target;if(f=Ay(m)?{documents:KM(l,m)}:{query:YM(l,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Jw(l,c.resumeToken);const p=Ry(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(Xe.min())>0){f.readTime=Td(l,c.snapshotVersion.toTimestamp());const p=Ry(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const i=XM(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Ny(this.serializer),t.removeTarget=e,this.K_(t)}}class UP extends h1{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=$M(e.writeResults,e.commitTime),i=Ki(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Ny(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>GM(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{}class BP extends zP{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Iy(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ne(ce.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,Iy(t,i),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ne(ce.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function HP(n,e,t,i){return new BP(n,e,t,i)}class FP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ns(t),this.aa=!1):Me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="RemoteStore";class qP{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{Oo(this)&&(Me(wo,"Restarting streams for network reachability change."),await(async function(m){const p=Ze(m);p.Ea.add(4),await Zc(p),p.Va.set("Unknown"),p.Ea.delete(4),await am(p)})(this))}))})),this.Va=new FP(i,a)}}async function am(n){if(Oo(n))for(const e of n.Ra)await e(!0)}async function Zc(n){for(const e of n.Ra)await e(!1)}function f1(n,e){const t=Ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),w_(t)?A_(t):su(t).O_()&&S_(t,e))}function b_(n,e){const t=Ze(n),i=su(t);t.Ia.delete(e),i.O_()&&d1(t,e),t.Ia.size===0&&(i.O_()?i.L_():Oo(t)&&t.Va.set("Unknown"))}function S_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}su(n).Z_(e)}function d1(n,e){n.da.$e(e),su(n).X_(e)}function A_(n){n.da=new jM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),su(n).start(),n.Va.ua()}function w_(n){return Oo(n)&&!su(n).x_()&&n.Ia.size>0}function Oo(n){return Ze(n).Ea.size===0}function m1(n){n.da=void 0}async function GP(n){n.Va.set("Online")}async function $P(n){n.Ia.forEach(((e,t)=>{S_(n,e)}))}async function KP(n,e){m1(n),w_(n)?(n.Va.ha(e),A_(n)):n.Va.set("Unknown")}async function YP(n,e,t){if(n.Va.set("Online"),e instanceof Ww&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.da.removeTarget(f))})(n,e)}catch(i){Me(wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Sd(n,i)}else if(e instanceof Xf?n.da.Xe(e):e instanceof Xw?n.da.st(e):n.da.tt(e),!t.isEqual(Xe.min()))try{const i=await u1(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(p);y&&l.Ia.set(p,y.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,p)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(Yn.EMPTY_BYTE_STRING,y.snapshotVersion)),d1(l,m);const v=new Sa(y.target,m,p,y.sequenceNumber);S_(l,v)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){Me(wo,"Failed to raise snapshot:",i),await Sd(n,i)}}async function Sd(n,e,t){if(!iu(e))throw e;n.Ea.add(1),await Zc(n),n.Va.set("Offline"),t||(t=()=>u1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Me(wo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await am(n)}))}function p1(n,e){return e().catch((t=>Sd(n,t,e)))}async function om(n){const e=Ze(n),t=La(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:u_;for(;QP(e);)try{const a=await xP(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,XP(e,a)}catch(a){await Sd(e,a)}g1(e)&&y1(e)}function QP(n){return Oo(n)&&n.Ta.length<10}function XP(n,e){n.Ta.push(e);const t=La(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function g1(n){return Oo(n)&&!La(n).x_()&&n.Ta.length>0}function y1(n){La(n).start()}async function WP(n){La(n).ra()}async function JP(n){const e=La(n);for(const t of n.Ta)e.ea(t.mutations)}async function ZP(n,e,t){const i=n.Ta.shift(),a=p_.from(i,e,t);await p1(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await om(n)}async function e4(n,e){e&&La(n).Y_&&await(async function(i,a){if((function(c){return PM(c)&&c!==ce.ABORTED})(a.code)){const l=i.Ta.shift();La(i).B_(),await p1(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await om(i)}})(n,e),g1(n)&&y1(n)}async function oS(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Me(wo,"RemoteStore received new credentials");const i=Oo(t);t.Ea.add(3),await Zc(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await am(t)}async function t4(n,e){const t=Ze(n);e?(t.Ea.delete(2),await am(t)):e||(t.Ea.add(2),await Zc(t),t.Va.set("Unknown"))}function su(n){return n.ma||(n.ma=(function(t,i,a){const l=Ze(t);return l.sa(),new kP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:GP.bind(null,n),Yo:$P.bind(null,n),t_:KP.bind(null,n),J_:YP.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),w_(n)?A_(n):n.Va.set("Unknown")):(await n.ma.stop(),m1(n))}))),n.ma}function La(n){return n.fa||(n.fa=(function(t,i,a){const l=Ze(t);return l.sa(),new UP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:WP.bind(null,n),t_:e4.bind(null,n),ta:JP.bind(null,n),na:ZP.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await om(n)):(await n.fa.stop(),n.Ta.length>0&&(Me(wo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,f=new C_(e,t,c,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R_(n,e){if(Ns("AsyncQueue",`${e}: ${n}`),iu(n))return new Ne(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{static emptySet(e){return new Pl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Fe.comparator(t.key,i.key):(t,i)=>Fe.comparator(t.key,i.key),this.keyedMap=dc(),this.sortedSet=new fn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Pl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.ga=new fn(Fe.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):$e(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Yl{constructor(e,t,i,a,l,c,f,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Yl(e,t,Pl.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class r4{constructor(){this.queries=uS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Ze(t),l=a.queries;a.queries=uS(),l.forEach(((c,f)=>{for(const m of f.ba)m.onError(i)}))})(this,new Ne(ce.ABORTED,"Firestore shutting down"))}}function uS(){return new Do((n=>jw(n)),Zd)}async function I_(n,e){const t=Ze(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new n4,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=R_(c,`Initialization of query '${Al(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&N_(t)}async function x_(n,e){const t=Ze(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function i4(n,e){const t=Ze(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(a)&&(i=!0);c.wa=a}}i&&N_(t)}function s4(n,e,t){const i=Ze(n),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function N_(n){n.Ca.forEach((e=>{e.next()}))}var My,cS;(cS=My||(My={})).Ma="default",cS.Cache="cache";class D_{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Yl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==My.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.key=e}}class v1{constructor(e){this.key=e}}class a4{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=_t(),this.mutatedKeys=_t(),this.eu=kw(e),this.tu=new Pl(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new lS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,v)=>{const S=a.get(y),w=em(this.query,v)?v:null,D=!!S&&this.mutatedKeys.has(S.key),z=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;S&&w?S.data.isEqual(w.data)?D!==z&&(i.track({type:3,doc:w}),M=!0):this.su(S,w)||(i.track({type:2,doc:w}),M=!0,(m&&this.eu(w,m)>0||p&&this.eu(w,p)<0)&&(f=!0)):!S&&w?(i.track({type:0,doc:w}),M=!0):S&&!w&&(i.track({type:1,doc:S}),M=!0,(m||p)&&(f=!0)),M&&(w?(c=c.add(w),l=z?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{tu:c,iu:i,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,v)=>(function(w,D){const z=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Vt:M})}};return z(w)-z(D)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],m=this.Ya.size===0&&this.current&&!a?1:0,p=m!==this.Xa;return this.Xa=m,c.length!==0||p?{snapshot:new Yl(this.query,e.tu,l,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=_t(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new v1(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new _1(i))})),t}cu(e){this.Za=e.ks,this.Ya=_t();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const O_="SyncEngine";class o4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class l4{constructor(e){this.key=e,this.hu=!1}}class u4{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Do((f=>jw(f)),Zd),this.Iu=new Map,this.Eu=new Set,this.Ru=new fn(Fe.comparator),this.Au=new Map,this.Vu=new __,this.du={},this.mu=new Map,this.fu=Kl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function c4(n,e,t=!0){const i=w1(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await E1(i,e,t,!0),a}async function h4(n,e){const t=w1(n);await E1(t,e,!0,!1)}async function E1(n,e,t,i){const a=await NP(n.localStore,$i(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await f4(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&f1(n.remoteStore,a),f}async function f4(n,e,t,i,a){n.pu=(v,S,w)=>(async function(z,M,B,F){let G=M.view.ru(B);G.Ss&&(G=await nS(z.localStore,M.query,!1).then((({documents:A})=>M.view.ru(A,G))));const ee=F&&F.targetChanges.get(M.targetId),ie=F&&F.targetMismatches.get(M.targetId)!=null,ne=M.view.applyChanges(G,z.isPrimaryClient,ee,ie);return fS(z,M.targetId,ne.au),ne.snapshot})(n,v,S,w);const l=await nS(n.localStore,e,!0),c=new a4(e,l.ks),f=c.ru(l.documents),m=Jc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),p=c.applyChanges(f,n.isPrimaryClient,m);fS(n,t,p.au);const y=new o4(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function d4(n,e,t){const i=Ze(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Zd(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Dy(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&b_(i.remoteStore,a.targetId),Py(i,a.targetId)})).catch(ru)):(Py(i,a.targetId),await Dy(i.localStore,a.targetId,!0))}async function m4(n,e){const t=Ze(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),b_(t.remoteStore,i.targetId))}async function p4(n,e,t){const i=b4(n);try{const a=await(function(c,f){const m=Ze(c),p=rn.now(),y=f.reduce(((w,D)=>w.add(D.key)),_t());let v,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let D=Ds(),z=_t();return m.xs.getEntries(w,y).next((M=>{D=M,D.forEach(((B,F)=>{F.isValidDocument()||(z=z.add(B))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,D))).next((M=>{v=M;const B=[];for(const F of f){const G=xM(F,v.get(F.key).overlayedDocument);G!=null&&B.push(new Ua(F.key,G,xw(G.value.mapValue),Nr.exists(!0)))}return m.mutationQueue.addMutationBatch(w,p,B,f)})).next((M=>{S=M;const B=M.applyToLocalDocumentSet(v,z);return m.documentOverlayCache.saveOverlays(w,M.batchId,B)}))})).then((()=>({batchId:S.batchId,changes:zw(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,f,m){let p=c.du[c.currentUser.toKey()];p||(p=new fn(yt)),p=p.insert(f,m),c.du[c.currentUser.toKey()]=p})(i,a.batchId,t),await eh(i,a.changes),await om(i.remoteStore)}catch(a){const l=R_(a,"Failed to persist write");t.reject(l)}}async function T1(n,e){const t=Ze(n);try{const i=await RP(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Dt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Dt(c.hu,14607):a.removedDocuments.size>0&&(Dt(c.hu,42227),c.hu=!1))})),await eh(t,i,e)}catch(i){await ru(i)}}function hS(n,e,t){const i=Ze(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const m=Ze(c);m.onlineState=f;let p=!1;m.queries.forEach(((y,v)=>{for(const S of v.ba)S.va(f)&&(p=!0)})),p&&N_(m)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function g4(n,e,t){const i=Ze(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new fn(Fe.comparator);c=c.insert(l,ir.newNoDocument(l,Xe.min()));const f=_t().add(l),m=new im(Xe.min(),new Map,new fn(yt),c,f);await T1(i,m),i.Ru=i.Ru.remove(l),i.Au.delete(e),M_(i)}else await Dy(i.localStore,e,!1).then((()=>Py(i,e,t))).catch(ru)}async function y4(n,e){const t=Ze(n),i=e.batch.batchId;try{const a=await CP(t.localStore,e);S1(t,i,null),b1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await eh(t,a)}catch(a){await ru(a)}}async function _4(n,e,t){const i=Ze(n);try{const a=await(function(c,f){const m=Ze(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return m.mutationQueue.lookupMutationBatch(p,f).next((v=>(Dt(v!==null,37113),y=v.keys(),m.mutationQueue.removeMutationBatch(p,v)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>m.localDocuments.getDocuments(p,y)))}))})(i.localStore,e);S1(i,e,t),b1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await eh(i,a)}catch(a){await ru(a)}}function b1(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function S1(n,e,t){const i=Ze(n);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function Py(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||A1(n,i)}))}function A1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(b_(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),M_(n))}function fS(n,e,t){for(const i of t)i instanceof _1?(n.Vu.addReference(i.key,e),v4(n,i)):i instanceof v1?(Me(O_,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||A1(n,i.key)):$e(19791,{wu:i})}function v4(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(Me(O_,"New document in limbo: "+t),n.Eu.add(i),M_(n))}function M_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Fe(Wt.fromString(e)),i=n.fu.next();n.Au.set(i,new l4(t)),n.Ru=n.Ru.insert(t,i),f1(n.remoteStore,new Sa($i(Jd(t.path)),i,"TargetPurposeLimboResolution",Qd.ce))}}async function eh(n,e,t){const i=Ze(n),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{c.push(i.pu(m,e,t).then((p=>{var y;if((p||t)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){a.push(p);const v=E_.Es(m.targetId,p);l.push(v)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(m,p){const y=Ze(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>fe.forEach(p,(S=>fe.forEach(S.Ts,(w=>y.persistence.referenceDelegate.addReference(v,S.targetId,w))).next((()=>fe.forEach(S.Is,(w=>y.persistence.referenceDelegate.removeReference(v,S.targetId,w)))))))))}catch(v){if(!iu(v))throw v;Me(T_,"Failed to update sequence numbers: "+v)}for(const v of p){const S=v.targetId;if(!v.fromCache){const w=y.vs.get(S),D=w.snapshotVersion,z=w.withLastLimboFreeSnapshotVersion(D);y.vs=y.vs.insert(S,z)}}})(i.localStore,l))}async function E4(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Me(O_,"User change. New user:",e.toKey());const i=await l1(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new Ne(ce.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await eh(t,i.Ns)}}function T4(n,e){const t=Ze(n),i=t.Au.get(e);if(i&&i.hu)return _t().add(i.key);{let a=_t();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function w1(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=T1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g4.bind(null,e),e.Pu.J_=i4.bind(null,e.eventManager),e.Pu.yu=s4.bind(null,e.eventManager),e}function b4(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_4.bind(null,e),e}class Ad{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return wP(this.persistence,new bP,e.initialUser,this.serializer)}Cu(e){return new o1(v_.Vi,this.serializer)}Du(e){return new OP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ad.provider={build:()=>new Ad};class S4 extends Ad{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Dt(this.persistence.referenceDelegate instanceof bd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new oP(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Rr.withCacheSize(this.cacheSizeBytes):Rr.DEFAULT;return new o1((i=>bd.Vi(i,t)),this.serializer)}}class Vy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>hS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=E4.bind(null,this.syncEngine),await t4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new r4})()}createDatastore(e){const t=sm(e.databaseInfo.databaseId),i=jP(e.databaseInfo);return HP(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,f){return new qP(i,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>hS(this.syncEngine,t,0)),(function(){return sS.v()?new sS:new MP})())}createSyncEngine(e,t){return(function(a,l,c,f,m,p,y){const v=new u4(a,l,c,f,m,p);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Ze(a);Me(wo,"RemoteStore shutting down."),l.Ea.add(5),await Zc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Vy.provider={build:()=>new Vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ns("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="FirestoreClient";class A4{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=rr.UNAUTHENTICATED,this.clientId=l_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Me(ja,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Me(ja,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=R_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Kg(n,e){n.asyncQueue.verifyOperationInProgress(),Me(ja,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await l1(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function dS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await w4(n);Me(ja,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>oS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>oS(e.remoteStore,a))),n._onlineComponents=e}async function w4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Me(ja,"Using user provided OfflineComponentProvider");try{await Kg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ce.FAILED_PRECONDITION||a.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Fl("Error using user provided cache. Falling back to memory cache: "+t),await Kg(n,new Ad)}}else Me(ja,"Using default OfflineComponentProvider"),await Kg(n,new S4(void 0));return n._offlineComponents}async function C1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Me(ja,"Using user provided OnlineComponentProvider"),await dS(n,n._uninitializedComponentsProvider._online)):(Me(ja,"Using default OnlineComponentProvider"),await dS(n,new Vy))),n._onlineComponents}function C4(n){return C1(n).then((e=>e.syncEngine))}async function wd(n){const e=await C1(n),t=e.eventManager;return t.onListen=c4.bind(null,e.syncEngine),t.onUnlisten=d4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=h4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=m4.bind(null,e.syncEngine),t}function R4(n,e,t,i){const a=new P_(i),l=new D_(e,a,t);return n.asyncQueue.enqueueAndForget((async()=>I_(await wd(n),l))),()=>{a.Nu(),n.asyncQueue.enqueueAndForget((async()=>x_(await wd(n),l)))}}function I4(n,e,t={}){const i=new Rs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,p){const y=new P_({next:S=>{y.Nu(),c.enqueueAndForget((()=>x_(l,v)));const w=S.docs.has(f);!w&&S.fromCache?p.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&m&&m.source==="server"?p.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),v=new D_(Jd(f.path),y,{includeMetadataChanges:!0,Ka:!0});return I_(l,v)})(await wd(n),n.asyncQueue,e,t,i))),i.promise}function x4(n,e,t={}){const i=new Rs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,p){const y=new P_({next:S=>{y.Nu(),c.enqueueAndForget((()=>x_(l,v))),S.fromCache&&m.source==="server"?p.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),v=new D_(f,y,{includeMetadataChanges:!0,Ka:!0});return I_(l,v)})(await wd(n),n.asyncQueue,e,t,i))),i.promise}function N4(n,e){const t=new Rs;return n.asyncQueue.enqueueAndForget((async()=>p4(await C4(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="ComponentProvider",mS=new Map;function O4(n,e,t,i,a){return new WO(n,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,R1(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="firestore.googleapis.com",pS=!0;class gS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=I1,this.ssl=pS}else this.host=e.host,this.ssl=e.ssl??pS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=a1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sP)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=R1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ne(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ne(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ne(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lm{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new NO;switch(i.type){case"firstParty":return new PO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=mS.get(t);i&&(Me(D4,"Removing Datastore"),mS.delete(t),i.terminate())})(this),Promise.resolve()}}function M4(n,e,t,i={}){var p;n=xr(n,lm);const a=eu(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;a&&(nw(`https://${f}`),rw("Firestore",!0)),l.host!==I1&&l.host!==f&&Fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:a,emulatorOptions:i};if(!bo(m,c)&&(n._setSettings(m),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=rr.MOCK_USER;else{y=n2(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new rr(S)}n._authCredentials=new DO(new yw(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Mo(this.firestore,e,this._query)}}class yn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}toJSON(){return{type:yn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Qc(t,yn._jsonSchema))return new yn(e,i||null,new Fe(Wt.fromString(t.referencePath)))}}yn._jsonSchemaVersion="firestore/documentReference/1.0",yn._jsonSchema={type:On("string",yn._jsonSchemaVersion),referencePath:On("string")};class xa extends Mo{constructor(e,t,i){super(e,t,Jd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new Fe(e))}withConverter(e){return new xa(this.firestore,e,this._path)}}function Os(n,e,...t){if(n=Vn(n),_w("collection","path",e),n instanceof lm){const i=Wt.fromString(e,...t);return x0(i),new xa(n,null,i)}{if(!(n instanceof yn||n instanceof xa))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Wt.fromString(e,...t));return x0(i),new xa(n.firestore,null,i)}}function sr(n,e,...t){if(n=Vn(n),arguments.length===1&&(e=l_.newId()),_w("doc","path",e),n instanceof lm){const i=Wt.fromString(e,...t);return I0(i),new yn(n,null,new Fe(i))}{if(!(n instanceof yn||n instanceof xa))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Wt.fromString(e,...t));return I0(i),new yn(n.firestore,n instanceof xa?n.converter:null,new Fe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="AsyncQueue";class _S{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new c1(this,"async_queue_retry"),this._c=()=>{const i=$g();i&&Me(yS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=$g();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=$g();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Rs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!iu(e))throw e;Me(yS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ns("INTERNAL UNHANDLED ERROR: ",vS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=C_.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&$e(47125,{Pc:vS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function vS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ms extends lm{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new _S,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _S(e),this._firestoreClient=void 0,await e}}}function P4(n,e){const t=typeof n=="object"?n:ow(),i=typeof n=="string"?n:gd,a=a_(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=e2("firestore");l&&M4(a,...l)}return a}function th(n){if(n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||V4(n),n._firestoreClient}function V4(n){var i,a,l,c;const e=n._freezeSettings(),t=O4(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(a=n._app)==null?void 0:a.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new A4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new li(Yn.fromBase64String(e))}catch(t){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new li(Yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qc(e,li._jsonSchema))return li.fromBase64String(e.bytes)}}li._jsonSchemaVersion="firestore/bytes/1.0",li._jsonSchema={type:On("string",li._jsonSchemaVersion),bytes:On("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return yt(this._lat,e._lat)||yt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yi._jsonSchemaVersion}}static fromJSON(e){if(Qc(e,Yi._jsonSchema))return new Yi(e.latitude,e.longitude)}}Yi._jsonSchemaVersion="firestore/geoPoint/1.0",Yi._jsonSchema={type:On("string",Yi._jsonSchemaVersion),latitude:On("number"),longitude:On("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qc(e,wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new wi(e.vectorValues);throw new Ne(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wi._jsonSchemaVersion="firestore/vectorValue/1.0",wi._jsonSchema={type:On("string",wi._jsonSchemaVersion),vectorValues:On("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=/^__.*__$/;class j4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ua(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wc(e,this.data,t,this.fieldTransforms)}}class x1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ua(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function N1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{dataSource:n})}}class V_{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new V_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Cd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(N1(this.dataSource)&&L4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class k4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||sm(e)}createContext(e,t,i,a=!1){return new V_({dataSource:e,methodName:t,targetDoc:i,path:Kn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hm(n){const e=n._freezeSettings(),t=sm(n._databaseId);return new k4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function D1(n,e,t,i,a,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,a);j_("Data must be an object, but it was:",c,i);const f=P1(i,c);let m,p;if(l.merge)m=new qr(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const S=Ql(e,v,t);if(!c.contains(S))throw new Ne(ce.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);j1(y,S)||y.push(S)}m=new qr(y),p=c.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,p=c.fieldTransforms;return new j4(new Ir(f),m,p)}class fm extends cm{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fm}}class L_ extends cm{_toFieldTransform(e){return new wM(e.path,new Vc)}isEqual(e){return e instanceof L_}}function O1(n,e,t,i){const a=n.createContext(1,e,t);j_("Data must be an object, but it was:",a,i);const l=[],c=Ir.empty();ka(i,((m,p)=>{const y=L1(e,m,t);p=Vn(p);const v=a.childContextForFieldPath(y);if(p instanceof fm)l.push(y);else{const S=nh(p,v);S!=null&&(l.push(y),c.set(y,S))}}));const f=new qr(l);return new x1(c,f,a.fieldTransforms)}function M1(n,e,t,i,a,l){const c=n.createContext(1,e,t),f=[Ql(e,i,t)],m=[a];if(l.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(Ql(e,l[S])),m.push(l[S+1]);const p=[],y=Ir.empty();for(let S=f.length-1;S>=0;--S)if(!j1(p,f[S])){const w=f[S];let D=m[S];D=Vn(D);const z=c.childContextForFieldPath(w);if(D instanceof fm)p.push(w);else{const M=nh(D,z);M!=null&&(p.push(w),y.set(w,M))}}const v=new qr(p);return new x1(y,v,c.fieldTransforms)}function U4(n,e,t,i=!1){return nh(t,n.createContext(i?4:3,e))}function nh(n,e){if(V1(n=Vn(n)))return j_("Unsupported field value:",e,n),P1(n,e);if(n instanceof cm)return(function(i,a){if(!N1(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const f of i){let m=nh(f,a.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=Vn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return bM(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=rn.fromDate(i);return{timestampValue:Td(a.serializer,l)}}if(i instanceof rn){const l=new rn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Td(a.serializer,l)}}if(i instanceof Yi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof li)return{bytesValue:Jw(a.serializer,i._byteString)};if(i instanceof yn){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:y_(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof wi)return(function(c,f){const m=c instanceof wi?c.toArray():c;return{mapValue:{fields:{[Rw]:{stringValue:Iw},[yd]:{arrayValue:{values:m.map((y=>{if(typeof y!="number")throw f.createError("VectorValues must only contain numeric values.");return m_(f.serializer,y)}))}}}}}})(i,a);if(s1(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Yd(i)}`)})(n,e)}function P1(n,e){const t={};return Tw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ka(n,((i,a)=>{const l=nh(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function V1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rn||n instanceof Yi||n instanceof li||n instanceof yn||n instanceof cm||n instanceof wi||s1(n))}function j_(n,e,t){if(!V1(t)||!vw(t)){const i=Yd(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Ql(n,e,t){if((e=Vn(e))instanceof um)return e._internalPath;if(typeof e=="string")return L1(n,e);throw Cd("Field path arguments must be of type string or ",n,!1,void 0,t)}const z4=new RegExp("[~\\*/\\[\\]]");function L1(n,e,t){if(e.search(z4)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new um(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cd(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new Ne(ce.INVALID_ARGUMENT,f+n+m)}function j1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{convertValue(e,t="none"){switch(Va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ka(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[yd].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>Tn(c.doubleValue)));return new wi(t)}convertGeoPoint(e){return new Yi(Tn(e.latitude),Tn(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Wd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const t=Ma(e);return new rn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Wt.fromString(e);Dt(i1(i),9688,{name:e});const a=new Mc(i.get(1),i.get(3)),l=new Fe(i.popFirst(5));return a.isEqual(t)||Ns(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends B4{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}}function H4(){return new L_("serverTimestamp")}const ES="@firebase/firestore",TS="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Ql("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class F4 extends k1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class U_{}class q4 extends U_{}function za(n,e,...t){let i=[];e instanceof U_&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((m=>m instanceof z_)).length,f=l.filter((m=>m instanceof dm)).length;if(c>1||c>0&&f>0)throw new Ne(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class dm extends q4{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new dm(e,t,i)}_apply(e){const t=this._parse(e);return z1(e._query,t),new Mo(e.firestore,e.converter,wy(e._query,t))}_parse(e){const t=hm(e.firestore);return(function(l,c,f,m,p,y,v){let S;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){AS(v,y);const D=[];for(const z of v)D.push(SS(m,l,z));S={arrayValue:{values:D}}}else S=SS(m,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||AS(v,y),S=U4(f,c,v,y==="in"||y==="not-in");return Dn.create(p,y,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function mm(n,e,t){const i=e,a=Ql("where",n);return dm._create(a,i,t)}class z_ extends U_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new z_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ri.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const m of f)z1(c,m),c=wy(c,m)})(e._query,t),new Mo(e.firestore,e.converter,wy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function SS(n,e,t){if(typeof(t=Vn(t))=="string"){if(t==="")throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lw(e)&&t.indexOf("/")!==-1)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Wt.fromString(t));if(!Fe.isDocumentKey(i))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return j0(n,new Fe(i))}if(t instanceof yn)return j0(n,t._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yd(t)}.`)}function AS(n,e){if(!Array.isArray(n)||n.length===0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function z1(n,e){const t=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ne(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function B1(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class pc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vo extends k1{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ql("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=vo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}vo._jsonSchemaVersion="firestore/documentSnapshot/1.0",vo._jsonSchema={type:On("string",vo._jsonSchemaVersion),bundleSource:On("string","DocumentSnapshot"),bundleName:On("string"),bundle:On("string")};class Wf extends vo{data(e={}){return super.data(e)}}class Eo{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new pc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Wf(this._firestore,this._userDataWriter,i.key,i,new pc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const m=new Wf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new pc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new Wf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new pc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),y=c.indexOf(f.doc.key)),{type:G4(f.type),doc:m,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=l_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function G4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:On("string",Eo._jsonSchemaVersion),bundleSource:On("string","QuerySnapshot"),bundleName:On("string"),bundle:On("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hm(e)}set(e,t,i){this._verifyNotCommitted();const a=Yg(e,this._firestore),l=B1(a.converter,t,i),c=D1(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,Nr.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=Yg(e,this._firestore);let c;return c=typeof(t=Vn(t))=="string"||t instanceof um?M1(this._dataReader,"WriteBatch.update",l._key,t,i,a):O1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yg(e,this._firestore);return this._mutations=this._mutations.concat(new rm(t._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yg(n,e){if((n=Vn(n)).firestore!==e)throw new Ne(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(n){n=xr(n,yn);const e=xr(n.firestore,Ms),t=th(e);return I4(t,n._key).then((i=>F1(e,n,i)))}function au(n){n=xr(n,Mo);const e=xr(n.firestore,Ms),t=th(e),i=new k_(e);return U1(n._query),x4(t,n._query).then((a=>new Eo(e,i,n,a)))}function pm(n,e,t){n=xr(n,yn);const i=xr(n.firestore,Ms),a=B1(n.converter,e,t),l=hm(i);return gm(i,[D1(l,"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Nr.none())])}function H1(n,e,t,...i){n=xr(n,yn);const a=xr(n.firestore,Ms),l=hm(a);let c;return c=typeof(e=Vn(e))=="string"||e instanceof um?M1(l,"updateDoc",n._key,e,t,i):O1(l,"updateDoc",n._key,e),gm(a,[c.toMutation(n._key,Nr.exists(!0))])}function wS(n){return gm(xr(n.firestore,Ms),[new rm(n._key,Nr.none())])}function po(n,...e){var p,y,v;n=Vn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||bS(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(bS(e[i])){const S=e[i];e[i]=(p=S.next)==null?void 0:p.bind(S),e[i+1]=(y=S.error)==null?void 0:y.bind(S),e[i+2]=(v=S.complete)==null?void 0:v.bind(S)}let l,c,f;if(n instanceof yn)c=xr(n.firestore,Ms),f=Jd(n._key.path),l={next:S=>{e[i]&&e[i](F1(c,n,S))},error:e[i+1],complete:e[i+2]};else{const S=xr(n,Mo);c=xr(S.firestore,Ms),f=S._query;const w=new k_(c);l={next:D=>{e[i]&&e[i](new Eo(c,w,S,D))},error:e[i+1],complete:e[i+2]},U1(n._query)}const m=th(c);return R4(m,f,a,l)}function gm(n,e){const t=th(n);return N4(t,e)}function F1(n,e,t){const i=t.docs.get(e._key),a=new k_(n);return new vo(n,a,e._key,i,new pc(t.hasPendingWrites,t.fromCache),e.converter)}function q1(n){return n=xr(n,Ms),th(n),new $4(n,(e=>gm(n,e)))}(function(e,t=!0){xO(tu),Hl(new So("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new Ms(new OO(i.getProvider("auth-internal")),new VO(c,i.getProvider("app-check-internal")),JO(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ra(ES,TS,e),Ra(ES,TS,"esm2020")})();var K4="firebase",Y4="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ra(K4,Y4,"app");function G1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q4=G1,$1=new Kc("auth","Firebase",G1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new i_("@firebase/auth");function X4(n,...e){Rd.logLevel<=gt.WARN&&Rd.warn(`Auth (${tu}): ${n}`,...e)}function Jf(n,...e){Rd.logLevel<=gt.ERROR&&Rd.error(`Auth (${tu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(n,...e){throw H_(n,...e)}function Ci(n,...e){return H_(n,...e)}function B_(n,e,t){const i={...Q4(),[e]:t};return new Kc("auth","Firebase",i).create(e,{appName:n.name})}function To(n){return B_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W4(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ji(n,"argument-error"),B_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function H_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return $1.create(n,...e)}function Ke(n,e,...t){if(!n)throw H_(e,...t)}function ws(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Jf(e),new Error(e)}function Ps(n,e){n||ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function J4(){return CS()==="http:"||CS()==="https:"}function CS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J4()||l2()||"connection"in navigator)?navigator.onLine:!0}function eV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ps(t>e,"Short delay should be less than long delay!"),this.isMobile=s2()||u2()}get(){return Z4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(n,e){Ps(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rV=new ih(3e4,6e4);function q_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ou(n,e,t,i,a={}){return Y1(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=Yc({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...l};return o2()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&eu(n.emulatorConfig.host)&&(p.credentials="include"),K1.fetch()(await Q1(n,n.config.apiHost,t,f),p)})}async function Y1(n,e,t){n._canInitEmulator=!1;const i={...tV,...e};try{const a=new sV(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Lf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lf(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Lf(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Lf(n,"user-disabled",c);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw B_(n,y,p);Ji(n,y)}}catch(a){if(a instanceof js)throw a;Ji(n,"network-request-failed",{message:String(a)})}}async function iV(n,e,t,i,a={}){const l=await ou(n,e,t,i,a);return"mfaPendingCredential"in l&&Ji(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Q1(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?F_(n.config,a):`${n.config.apiScheme}://${a}`;return nV.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class sV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ci(this.auth,"network-request-failed")),rV.get())})}}function Lf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ci(n,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aV(n,e){return ou(n,"POST","/v1/accounts:delete",e)}async function Id(n,e){return ou(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oV(n,e=!1){const t=Vn(n),i=await t.getIdToken(e),a=G_(i);Ke(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Sc(Qg(a.auth_time)),issuedAtTime:Sc(Qg(a.iat)),expirationTime:Sc(Qg(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Qg(n){return Number(n)*1e3}function G_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Jf("JWT malformed, contained fewer than 3 sections"),null;try{const a=JA(t);return a?JSON.parse(a):(Jf("Failed to decode base64 JWT payload"),null)}catch(a){return Jf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function RS(n){const e=G_(n);return Ke(e,"internal-error"),Ke(typeof e.exp<"u","internal-error"),Ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof js&&lV(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function lV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sc(this.lastLoginAt),this.creationTime=Sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(n){var v;const e=n.auth,t=await n.getIdToken(),i=await kc(n,Id(e,{idToken:t}));Ke(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=(v=a.providerUserInfo)!=null&&v.length?X1(a.providerUserInfo):[],c=hV(n.providerData,l),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(c!=null&&c.length),p=f?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new jy(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function cV(n){const e=Vn(n);await xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hV(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function X1(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fV(n,e){const t=await Y1(n,{},async()=>{const i=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await Q1(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&eu(n.emulatorConfig.host)&&(m.credentials="include"),K1.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dV(n,e){return ou(n,"POST","/v2/accounts:revokeToken",q_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ke(e.idToken,"internal-error"),Ke(typeof e.idToken<"u","internal-error"),Ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ke(e.length!==0,"internal-error");const t=RS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await fV(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Vl;return i&&(Ke(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Ke(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ke(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vl,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(n,e){Ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ai{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new uV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new jy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await kc(this,this.stsTokenManager.getToken(this.auth,e));return Ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oV(this,e)}reload(){return cV(this)}_assign(e){this!==e&&(Ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await xd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bi(this.auth.app))return Promise.reject(To(this.auth));const e=await this.getIdToken();return await kc(this,aV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:S,isAnonymous:w,providerData:D,stsTokenManager:z}=t;Ke(v&&z,e,"internal-error");const M=Vl.fromJSON(this.name,z);Ke(typeof v=="string",e,"internal-error"),pa(i,e.name),pa(a,e.name),Ke(typeof S=="boolean",e,"internal-error"),Ke(typeof w=="boolean",e,"internal-error"),pa(l,e.name),pa(c,e.name),pa(f,e.name),pa(m,e.name),pa(p,e.name),pa(y,e.name);const B=new Ai({uid:v,auth:e,email:a,emailVerified:S,displayName:i,isAnonymous:w,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:M,createdAt:p,lastLoginAt:y});return D&&Array.isArray(D)&&(B.providerData=D.map(F=>({...F}))),m&&(B._redirectEventId=m),B}static async _fromIdTokenResponse(e,t,i=!1){const a=new Vl;a.updateFromServerResponse(t);const l=new Ai({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await xd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ke(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?X1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Vl;f.updateFromIdToken(i);const m=new Ai({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new jy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=new Map;function Cs(n){Ps(n instanceof Function,"Expected a class definition");let e=IS.get(n);return e?(Ps(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,IS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}W1.type="NONE";const xS=W1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ll{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Zf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Zf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Id(this.auth,{idToken:e}).catch(()=>{});return t?Ai._fromGetAccountInfoResponse(this.auth,t,e):null}return Ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ll(Cs(xS),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Cs(xS);const c=Zf(i,e.config.apiKey,e.name);let f=null;for(const p of t)try{const y=await p._get(c);if(y){let v;if(typeof y=="string"){const S=await Id(e,{idToken:y}).catch(()=>{});if(!S)break;v=await Ai._fromGetAccountInfoResponse(e,S,y)}else v=Ai._fromJSON(e,y);p!==l&&(f=v),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Ll(l,e,i):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Ll(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(J1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rC(e))return"Blackberry";if(iC(e))return"Webos";if(Z1(e))return"Safari";if((e.includes("chrome/")||eC(e))&&!e.includes("edge/"))return"Chrome";if(nC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function J1(n=ar()){return/firefox\//i.test(n)}function Z1(n=ar()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eC(n=ar()){return/crios\//i.test(n)}function tC(n=ar()){return/iemobile/i.test(n)}function nC(n=ar()){return/android/i.test(n)}function rC(n=ar()){return/blackberry/i.test(n)}function iC(n=ar()){return/webos/i.test(n)}function $_(n=ar()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mV(n=ar()){var e;return $_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function pV(){return c2()&&document.documentMode===10}function sC(n=ar()){return $_(n)||nC(n)||iC(n)||rC(n)||/windows phone/i.test(n)||tC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(n,e=[]){let t;switch(n){case"Browser":t=NS(ar());break;case"Worker":t=`${NS(ar())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${tu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(n,e={}){return ou(n,"GET","/v2/passwordPolicy",q_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=6;class vV{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_V,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DS(this),this.idTokenSubscription=new DS(this),this.beforeStateQueue=new gV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cs(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Ll.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Id(this,{idToken:e}),i=await Ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(bi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(i=m.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bi(this.app))return Promise.reject(To(this));const t=e?Vn(e):null;return t&&Ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bi(this.app)?Promise.reject(To(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bi(this.app)?Promise.reject(To(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yV(this),t=new vV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await dV(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cs(e)||this._popupRedirectResolver;Ke(t,this,"argument-error"),this.redirectPersistenceManager=await Ll.create(this,[Cs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ke(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&X4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ym(n){return Vn(n)}class DS{constructor(e){this.auth=e,this.observer=null,this.addObserver=_2(t=>this.observer=t)}get next(){return Ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TV(n){K_=n}function bV(n){return K_.loadJS(n)}function SV(){return K_.gapiScript}function AV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(n,e){const t=a_(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(bo(l,e??{}))return a;Ji(a,"already-initialized")}return t.initialize({options:e})}function CV(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Cs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function RV(n,e,t){const i=ym(n);Ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=oC(e),{host:c,port:f}=IV(e),m=f===null?"":`:${f}`,p={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ke(bo(p,i.config.emulator)&&bo(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,eu(c)?(nw(`${l}//${c}${m}`),rw("Auth",!0)):xV()}function oC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function IV(n){const e=oC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:OS(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:OS(c)}}}function OS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function xV(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,t){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(n,e){return iV(n,"POST","/v1/accounts:signInWithIdp",q_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV="http://localhost";class Co extends lC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ji("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Co(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return jl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,jl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jl(e,t)}buildRequest(){const e={requestUri:NV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends Y_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends sh{constructor(){super("facebook.com")}static credential(e){return Co._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return va.credential(e.oauthAccessToken)}catch{return null}}}va.FACEBOOK_SIGN_IN_METHOD="facebook.com";va.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends sh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Co._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ss.credential(t,i)}catch{return null}}}Ss.GOOGLE_SIGN_IN_METHOD="google.com";Ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends sh{constructor(){super("github.com")}static credential(e){return Co._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ea.credential(e.oauthAccessToken)}catch{return null}}}Ea.GITHUB_SIGN_IN_METHOD="github.com";Ea.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends sh{constructor(){super("twitter.com")}static credential(e,t){return Co._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ta.credential(t,i)}catch{return null}}}Ta.TWITTER_SIGN_IN_METHOD="twitter.com";Ta.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Ai._fromIdTokenResponse(e,i,a),c=MS(i);return new Xl({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=MS(i);return new Xl({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function MS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends js{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Nd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Nd(e,t,i,a)}}function uC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nd._fromErrorAndOperation(n,l,e,i):l})}async function DV(n,e,t=!1){const i=await kc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Xl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OV(n,e,t=!1){const{auth:i}=n;if(bi(i.app))return Promise.reject(To(i));const a="reauthenticate";try{const l=await kc(n,uC(i,a,e,n),t);Ke(l.idToken,i,"internal-error");const c=G_(l.idToken);Ke(c,i,"internal-error");const{sub:f}=c;return Ke(n.uid===f,i,"user-mismatch"),Xl._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ji(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(n,e,t=!1){if(bi(n.app))return Promise.reject(To(n));const i="signIn",a=await uC(n,i,e),l=await Xl._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}function PV(n,e,t,i){return Vn(n).onIdTokenChanged(e,t,i)}function VV(n,e,t){return Vn(n).beforeAuthStateChanged(e,t)}function LV(n,e,t,i){return Vn(n).onAuthStateChanged(e,t,i)}const Dd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dd,"1"),this.storage.removeItem(Dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=1e3,kV=10;class hC extends cC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);pV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,kV):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},jV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hC.type="LOCAL";const UV=hC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC extends cC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fC.type="SESSION";const dC=fC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new _m(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(c).map(async p=>p(t.origin,l)),m=await zV(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_m.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const p=Q_("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const S=v;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(){return window}function HV(n){Qi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function FV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function GV(){return mC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="firebaseLocalStorageDb",$V=1,Od="firebaseLocalStorage",gC="fbase_key";class ah{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vm(n,e){return n.transaction([Od],e?"readwrite":"readonly").objectStore(Od)}function KV(){const n=indexedDB.deleteDatabase(pC);return new ah(n).toPromise()}function ky(){const n=indexedDB.open(pC,$V);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Od,{keyPath:gC})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Od)?e(i):(i.close(),await KV(),e(await ky()))})})}async function PS(n,e,t){const i=vm(n,!0).put({[gC]:e,value:t});return new ah(i).toPromise()}async function YV(n,e){const t=vm(n,!1).get(e),i=await new ah(t).toPromise();return i===void 0?null:i.value}function VS(n,e){const t=vm(n,!0).delete(e);return new ah(t).toPromise()}const QV=800,XV=3;class yC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ky(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>XV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_m._getInstance(GV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await FV(),!this.activeServiceWorker)return;this.sender=new BV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ky();return await PS(e,Dd,"1"),await VS(e,Dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>PS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>YV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>VS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=vm(a,!1).getAll();return new ah(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yC.type="LOCAL";const WV=yC;new ih(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(n,e){return e?Cs(e):(Ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_ extends lC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function JV(n){return MV(n.auth,new X_(n),n.bypassAuthState)}function ZV(n){const{auth:e,user:t}=n;return Ke(t,e,"internal-error"),OV(t,new X_(n),n.bypassAuthState)}async function eL(n){const{auth:e,user:t}=n;return Ke(t,e,"internal-error"),DV(t,new X_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JV;case"linkViaPopup":case"linkViaRedirect":return eL;case"reauthViaPopup":case"reauthViaRedirect":return ZV;default:Ji(this.auth,"internal-error")}}resolve(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=new ih(2e3,1e4);async function nL(n,e,t){if(bi(n.app))return Promise.reject(Ci(n,"operation-not-supported-in-this-environment"));const i=ym(n);W4(n,e,Y_);const a=_C(i,t);return new _o(i,"signInViaPopup",e,a).executeNotNull()}class _o extends vC{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ke(e,this.auth,"internal-error"),e}async onExecution(){Ps(this.filter.length===1,"Popup operations only handle one event");const e=Q_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tL.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="pendingRedirect",ed=new Map;class iL extends vC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ed.get(this.auth._key());if(!e){try{const i=await sL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ed.set(this.auth._key(),e)}return this.bypassAuthState||ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sL(n,e){const t=lL(e),i=oL(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function aL(n,e){ed.set(n._key(),e)}function oL(n){return Cs(n._redirectPersistence)}function lL(n){return Zf(rL,n.config.apiKey,n.name)}async function uL(n,e,t=!1){if(bi(n.app))return Promise.reject(To(n));const i=ym(n),a=_C(i,e),c=await new iL(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=600*1e3;class hL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!EC(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ci(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cL&&this.cachedEventUids.clear(),this.cachedEventUids.has(LS(e))}saveEventToCache(e){this.cachedEventUids.add(LS(e)),this.lastProcessedEventTime=Date.now()}}function LS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function EC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dL(n,e={}){return ou(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pL=/^https?/;async function gL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dL(n);for(const t of e)try{if(yL(t))return}catch{}Ji(n,"unauthorized-domain")}function yL(n){const e=Ly(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!pL.test(t))return!1;if(mL.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=new ih(3e4,6e4);function jS(){const n=Qi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vL(n){return new Promise((e,t)=>{var a,l,c;function i(){jS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jS(),t(Ci(n,"network-request-failed"))},timeout:_L.get()})}if((l=(a=Qi().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Qi().gapi)!=null&&c.load)i();else{const f=AV("iframefcb");return Qi()[f]=()=>{gapi.load?i():t(Ci(n,"network-request-failed"))},bV(`${SV()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw td=null,e})}let td=null;function EL(n){return td=td||vL(n),td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new ih(5e3,15e3),bL="__/auth/iframe",SL="emulator/auth/iframe",AL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CL(n){const e=n.config;Ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?F_(e,SL):`https://${n.config.authDomain}/${bL}`,i={apiKey:e.apiKey,appName:n.name,v:tu},a=wL.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Yc(i).slice(1)}`}async function RL(n){const e=await EL(n),t=Qi().gapi;return Ke(t,n,"internal-error"),e.open({where:document.body,url:CL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AL,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ci(n,"network-request-failed"),f=Qi().setTimeout(()=>{l(c)},TL.get());function m(){Qi().clearTimeout(f),a(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xL=500,NL=600,DL="_blank",OL="http://localhost";class kS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ML(n,e,t,i=xL,a=NL){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...IL,width:i.toString(),height:a.toString(),top:l,left:c},p=ar().toLowerCase();t&&(f=eC(p)?DL:t),J1(p)&&(e=e||OL,m.scrollbars="yes");const y=Object.entries(m).reduce((S,[w,D])=>`${S}${w}=${D},`,"");if(mV(p)&&f!=="_self")return PL(e||"",f),new kS(null);const v=window.open(e||"",f,y);Ke(v,n,"popup-blocked");try{v.focus()}catch{}return new kS(v)}function PL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL="__/auth/handler",LL="emulator/auth/handler",jL=encodeURIComponent("fac");async function US(n,e,t,i,a,l){Ke(n.config.authDomain,n,"auth-domain-config-required"),Ke(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:tu,eventId:a};if(e instanceof Y_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",y2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(e instanceof sh){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const m=await n._getAppCheckToken(),p=m?`#${jL}=${encodeURIComponent(m)}`:"";return`${kL(n)}?${Yc(f).slice(1)}${p}`}function kL({config:n}){return n.emulator?F_(n,LL):`https://${n.authDomain}/${VL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="webStorageSupport";class UL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dC,this._completeRedirectFn=uL,this._overrideRedirectResult=aL}async _openPopup(e,t,i,a){var c;Ps((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await US(e,t,i,Ly(),a);return ML(e,l,Q_())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await US(e,t,i,Ly(),a);return HV(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ps(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await RL(e),i=new hL(e);return t.register("authEvent",a=>(Ke(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xg,{type:Xg},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[Xg];l!==void 0&&t(!!l),Ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sC()||Z1()||$_()}}const zL=UL;var zS="@firebase/auth",BS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FL(n){Hl(new So("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Ke(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aC(n)},p=new EV(i,a,l,m);return CV(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Hl(new So("auth-internal",e=>{const t=ym(e.getProvider("auth").getImmediate());return(i=>new BL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ra(zS,BS,HL(n)),Ra(zS,BS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=300,GL=tw("authIdTokenMaxAge")||qL;let HS=null;const $L=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>GL)return;const a=t==null?void 0:t.token;HS!==a&&(HS=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function KL(n=ow()){const e=a_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=wV(n,{popupRedirectResolver:zL,persistence:[WV,UV,dC]}),i=tw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=$L(l.toString());VV(t,c,()=>c(t.currentUser)),PV(t,f=>c(f))}}const a=ZA("auth");return a&&RV(t,`http://${a}`),t}function YL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}TV({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=Ci("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",YL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FL("Browser");const QL={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function _l(n){const e=QL[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const XL={apiKey:_l("VITE_FIREBASE_API_KEY"),authDomain:_l("VITE_FIREBASE_AUTH_DOMAIN"),projectId:_l("VITE_FIREBASE_PROJECT_ID"),storageBucket:_l("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:_l("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:_l("VITE_FIREBASE_APP_ID")},TC=aw(XL),Ro=KL(TC),WL=new Ss,$t=P4(TC),bC=V.createContext(void 0),JL=({children:n})=>{const[e,t]=V.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),i=V.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);V.useEffect(()=>{i(e)},[e,i]);const a=V.useCallback(c=>{t(c),i(c);const f=Ro.currentUser;if(f){const m=sr($t,"users",f.uid);H1(m,{preferredTheme:c}).catch(p=>console.error("Error updating preferred theme in Firebase:",p))}},[i]),l=V.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return V.useEffect(()=>Ro.onAuthStateChanged(async f=>{if(f){const m=sr($t,"users",f.uid),p=await rh(m);if(p.exists()&&p.data().preferredTheme){const y=p.data().preferredTheme;t(y),i(y)}}}),[i]),T.jsx(bC.Provider,{value:{theme:e,toggleTheme:l,setTheme:a},children:n})},ZL="_spinner_5jyct_1",ej="_spinnerContainer_5jyct_19",FS={spinner:ZL,spinnerContainer:ej},lu=({container:n=!0})=>{const e=T.jsx("div",{className:FS.spinner});return n?T.jsx("div",{className:FS.spinnerContainer,children:e}):e},tj="_loadingContainer_1n1m5_1",nj={loadingContainer:tj},Wl=()=>T.jsx("div",{className:nj.loadingContainer,children:T.jsx(lu,{container:!1})}),rj=()=>{const n=We(i=>i.auth.firebaseUser),e=We(i=>i.auth.userData);return We(i=>i.auth.loading)?T.jsx(Wl,{}):n?e?e.isApproved?T.jsx(Aa,{to:"/app/dashboard",replace:!0}):T.jsx(Aa,{to:"/guest",replace:!0}):T.jsx(Wl,{}):T.jsx(Aa,{to:"/login",replace:!0})};function Gn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var ij=typeof Symbol=="function"&&Symbol.observable||"@@observable",qS=ij,Wg=()=>Math.random().toString(36).substring(7).split("").join("."),sj={INIT:`@@redux/INIT${Wg()}`,REPLACE:`@@redux/REPLACE${Wg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Wg()}`},Md=sj;function W_(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function SC(n,e,t){if(typeof n!="function")throw new Error(Gn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Gn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Gn(1));return t(SC)(n,e)}let i=n,a=e,l=new Map,c=l,f=0,m=!1;function p(){c===l&&(c=new Map,l.forEach((M,B)=>{c.set(B,M)}))}function y(){if(m)throw new Error(Gn(3));return a}function v(M){if(typeof M!="function")throw new Error(Gn(4));if(m)throw new Error(Gn(5));let B=!0;p();const F=f++;return c.set(F,M),function(){if(B){if(m)throw new Error(Gn(6));B=!1,p(),c.delete(F),l=null}}}function S(M){if(!W_(M))throw new Error(Gn(7));if(typeof M.type>"u")throw new Error(Gn(8));if(typeof M.type!="string")throw new Error(Gn(17));if(m)throw new Error(Gn(9));try{m=!0,a=i(a,M)}finally{m=!1}return(l=c).forEach(F=>{F()}),M}function w(M){if(typeof M!="function")throw new Error(Gn(10));i=M,S({type:Md.REPLACE})}function D(){const M=v;return{subscribe(B){if(typeof B!="object"||B===null)throw new Error(Gn(11));function F(){const ee=B;ee.next&&ee.next(y())}return F(),{unsubscribe:M(F)}},[qS](){return this}}}return S({type:Md.INIT}),{dispatch:S,subscribe:v,getState:y,replaceReducer:w,[qS]:D}}function aj(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Md.INIT})>"u")throw new Error(Gn(12));if(typeof t(void 0,{type:Md.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Gn(13))})}function oj(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const i=Object.keys(t);let a;try{aj(t)}catch(l){a=l}return function(c={},f){if(a)throw a;let m=!1;const p={};for(let y=0;y<i.length;y++){const v=i[y],S=t[v],w=c[v],D=S(w,f);if(typeof D>"u")throw f&&f.type,new Error(Gn(14));p[v]=D,m=m||D!==w}return m=m||i.length!==Object.keys(c).length,m?p:c}}function Pd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function lj(...n){return e=>(t,i)=>{const a=e(t,i);let l=()=>{throw new Error(Gn(15))};const c={getState:a.getState,dispatch:(m,...p)=>l(m,...p)},f=n.map(m=>m(c));return l=Pd(...f)(a.dispatch),{...a,dispatch:l}}}function uj(n){return W_(n)&&"type"in n&&typeof n.type=="string"}var AC=Symbol.for("immer-nothing"),GS=Symbol.for("immer-draftable"),gr=Symbol.for("immer-state");function Si(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Gr=Object,Jl=Gr.getPrototypeOf,Vd="constructor",Em="prototype",Uy="configurable",Ld="enumerable",nd="writable",Uc="value",Vs=n=>!!n&&!!n[gr];function Ii(n){var e;return n?wC(n)||bm(n)||!!n[GS]||!!((e=n[Vd])!=null&&e[GS])||Sm(n)||Am(n):!1}var cj=Gr[Em][Vd].toString(),$S=new WeakMap;function wC(n){if(!n||!J_(n))return!1;const e=Jl(n);if(e===null||e===Gr[Em])return!0;const t=Gr.hasOwnProperty.call(e,Vd)&&e[Vd];if(t===Object)return!0;if(!Rl(t))return!1;let i=$S.get(t);return i===void 0&&(i=Function.toString.call(t),$S.set(t,i)),i===cj}function Tm(n,e,t=!0){oh(n)===0?(t?Reflect.ownKeys(n):Gr.keys(n)).forEach(a=>{e(a,n[a],n)}):n.forEach((i,a)=>e(a,i,n))}function oh(n){const e=n[gr];return e?e.type_:bm(n)?1:Sm(n)?2:Am(n)?3:0}var KS=(n,e,t=oh(n))=>t===2?n.has(e):Gr[Em].hasOwnProperty.call(n,e),zy=(n,e,t=oh(n))=>t===2?n.get(e):n[e],jd=(n,e,t,i=oh(n))=>{i===2?n.set(e,t):i===3?n.add(t):n[e]=t};function hj(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var bm=Array.isArray,Sm=n=>n instanceof Map,Am=n=>n instanceof Set,J_=n=>typeof n=="object",Rl=n=>typeof n=="function",Jg=n=>typeof n=="boolean";function fj(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var bs=n=>n.copy_||n.base_,Z_=n=>n.modified_?n.copy_:n.base_;function By(n,e){if(Sm(n))return new Map(n);if(Am(n))return new Set(n);if(bm(n))return Array[Em].slice.call(n);const t=wC(n);if(e===!0||e==="class_only"&&!t){const i=Gr.getOwnPropertyDescriptors(n);delete i[gr];let a=Reflect.ownKeys(i);for(let l=0;l<a.length;l++){const c=a[l],f=i[c];f[nd]===!1&&(f[nd]=!0,f[Uy]=!0),(f.get||f.set)&&(i[c]={[Uy]:!0,[nd]:!0,[Ld]:f[Ld],[Uc]:n[c]})}return Gr.create(Jl(n),i)}else{const i=Jl(n);if(i!==null&&t)return{...n};const a=Gr.create(i);return Gr.assign(a,n)}}function ev(n,e=!1){return wm(n)||Vs(n)||!Ii(n)||(oh(n)>1&&Gr.defineProperties(n,{set:jf,add:jf,clear:jf,delete:jf}),Gr.freeze(n),e&&Tm(n,(t,i)=>{ev(i,!0)},!1)),n}function dj(){Si(2)}var jf={[Uc]:dj};function wm(n){return n===null||!J_(n)?!0:Gr.isFrozen(n)}var kd="MapSet",Hy="Patches",YS="ArrayMethods",CC={};function Io(n){const e=CC[n];return e||Si(0,n),e}var QS=n=>!!CC[n],zc,RC=()=>zc,mj=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:QS(kd)?Io(kd):void 0,arrayMethodsPlugin_:QS(YS)?Io(YS):void 0});function XS(n,e){e&&(n.patchPlugin_=Io(Hy),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function Fy(n){qy(n),n.drafts_.forEach(pj),n.drafts_=null}function qy(n){n===zc&&(zc=n.parent_)}var WS=n=>zc=mj(zc,n);function pj(n){const e=n[gr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function JS(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[gr].modified_&&(Fy(e),Si(4)),Ii(n)&&(n=ZS(e,n));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(t[gr].base_,n,e)}else n=ZS(e,t);return gj(e,n,!0),Fy(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==AC?n:void 0}function ZS(n,e){if(wm(e))return e;const t=e[gr];if(!t)return Ud(e,n.handledSet_,n);if(!Cm(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:i}=t;if(i)for(;i.length>0;)i.pop()(n);NC(t,n)}return t.copy_}function gj(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&ev(e,t)}function IC(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var Cm=(n,e)=>n.scope_===e,yj=[];function xC(n,e,t,i){const a=bs(n),l=n.type_;if(i!==void 0&&zy(a,i,l)===e){jd(a,i,t,l);return}if(!n.draftLocations_){const f=n.draftLocations_=new Map;Tm(a,(m,p)=>{if(Vs(p)){const y=f.get(p)||[];y.push(m),f.set(p,y)}})}const c=n.draftLocations_.get(e)??yj;for(const f of c)jd(a,f,t,l)}function _j(n,e,t){n.callbacks_.push(function(a){var f;const l=e;if(!l||!Cm(l,a))return;(f=a.mapSetPlugin_)==null||f.fixSetContents(l);const c=Z_(l);xC(n,l.draft_??l,c,t),NC(l,a)})}function NC(n,e){var i;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((i=n.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const l=a.getPath(n);l&&a.generatePatches_(n,l,e)}IC(n)}}function vj(n,e,t){const{scope_:i}=n;if(Vs(t)){const a=t[gr];Cm(a,i)&&a.callbacks_.push(function(){rd(n);const c=Z_(a);xC(n,t,c,e)})}else Ii(t)&&n.callbacks_.push(function(){const l=bs(n);n.type_===3?l.has(t)&&Ud(t,i.handledSet_,i):zy(l,e,n.type_)===t&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&Ud(zy(n.copy_,e,n.type_),i.handledSet_,i)})}function Ud(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Vs(n)||e.has(n)||!Ii(n)||wm(n)||(e.add(n),Tm(n,(i,a)=>{if(Vs(a)){const l=a[gr];if(Cm(l,t)){const c=Z_(l);jd(n,i,c,n.type_),IC(l)}}else Ii(a)&&Ud(a,e,t)})),n}function Ej(n,e){const t=bm(n),i={type_:t?1:0,scope_:e?e.scope_:RC(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=i,l=zd;t&&(a=[i],l=Bc);const{revoke:c,proxy:f}=Proxy.revocable(a,l);return i.draft_=f,i.revoke_=c,[f,i]}var zd={get(n,e){if(e===gr)return n;let t=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const a=bs(n);if(!KS(a,e,n.type_))return Tj(n,a,e);const l=a[e];if(n.finalized_||!Ii(l)||i&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&fj(e))return l;if(l===Zg(n.base_,e)){rd(n);const c=n.type_===1?+e:e,f=$y(n.scope_,l,n,c);return n.copy_[c]=f}return l},has(n,e){return e in bs(n)},ownKeys(n){return Reflect.ownKeys(bs(n))},set(n,e,t){const i=DC(bs(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const a=Zg(bs(n),e),l=a==null?void 0:a[gr];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(hj(t,a)&&(t!==void 0||KS(n.base_,e,n.type_)))return!0;rd(n),Gy(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),vj(n,e,t)),!0},deleteProperty(n,e){return rd(n),Zg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),Gy(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=bs(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{[nd]:!0,[Uy]:n.type_!==1||e!=="length",[Ld]:i[Ld],[Uc]:t[e]}},defineProperty(){Si(11)},getPrototypeOf(n){return Jl(n.base_)},setPrototypeOf(){Si(12)}},Bc={};for(let n in zd){let e=zd[n];Bc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}Bc.deleteProperty=function(n,e){return Bc.set.call(this,n,e,void 0)};Bc.set=function(n,e,t){return zd.set.call(this,n[0],e,t,n[0])};function Zg(n,e){const t=n[gr];return(t?bs(t):n)[e]}function Tj(n,e,t){var a;const i=DC(e,t);return i?Uc in i?i[Uc]:(a=i.get)==null?void 0:a.call(n.draft_):void 0}function DC(n,e){if(!(e in n))return;let t=Jl(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Jl(t)}}function Gy(n){n.modified_||(n.modified_=!0,n.parent_&&Gy(n.parent_))}function rd(n){n.copy_||(n.assigned_=new Map,n.copy_=By(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var bj=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,i)=>{if(Rl(e)&&!Rl(t)){const l=t;t=e;const c=this;return function(m=l,...p){return c.produce(m,y=>t.call(this,y,...p))}}Rl(t)||Si(6),i!==void 0&&!Rl(i)&&Si(7);let a;if(Ii(e)){const l=WS(this),c=$y(l,e,void 0);let f=!0;try{a=t(c),f=!1}finally{f?Fy(l):qy(l)}return XS(l,i),JS(a,l)}else if(!e||!J_(e)){if(a=t(e),a===void 0&&(a=e),a===AC&&(a=void 0),this.autoFreeze_&&ev(a,!0),i){const l=[],c=[];Io(Hy).generateReplacementPatches_(e,a,{patches_:l,inversePatches_:c}),i(l,c)}return a}else Si(1,e)},this.produceWithPatches=(e,t)=>{if(Rl(e))return(c,...f)=>this.produceWithPatches(c,m=>e(m,...f));let i,a;return[this.produce(e,t,(c,f)=>{i=c,a=f}),i,a]},Jg(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),Jg(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),Jg(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Ii(n)||Si(8),Vs(n)&&(n=Sj(n));const e=WS(this),t=$y(e,n,void 0);return t[gr].isManual_=!0,qy(e),t}finishDraft(n,e){const t=n&&n[gr];(!t||!t.isManual_)&&Si(9);const{scope_:i}=t;return XS(i,e),JS(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}t>-1&&(e=e.slice(t+1));const i=Io(Hy).applyPatches_;return Vs(n)?i(n,e):this.produce(n,a=>i(a,e))}};function $y(n,e,t,i){const[a,l]=Sm(e)?Io(kd).proxyMap_(e,t):Am(e)?Io(kd).proxySet_(e,t):Ej(e,t);return((t==null?void 0:t.scope_)??RC()).drafts_.push(a),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=i,t&&i!==void 0?_j(t,l,i):l.callbacks_.push(function(m){var y;(y=m.mapSetPlugin_)==null||y.fixSetContents(l);const{patchPlugin_:p}=m;l.modified_&&p&&p.generatePatches_(l,[],m)}),a}function Sj(n){return Vs(n)||Si(10,n),OC(n)}function OC(n){if(!Ii(n)||wm(n))return n;const e=n[gr];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=By(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=By(n,!0);return Tm(t,(a,l)=>{jd(t,a,OC(l))},i),e&&(e.finalized_=!1),t}var Aj=new bj,MC=Aj.produce;function PC(n){return({dispatch:t,getState:i})=>a=>l=>typeof l=="function"?l(t,i,n):a(l)}var wj=PC(),Cj=PC,Rj=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Pd:Pd.apply(null,arguments)},Ij=n=>n&&typeof n.match=="function";function Ac(n,e){function t(...i){if(e){let a=e(...i);if(!a)throw new Error(Is(0));return{type:n,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>uj(i)&&i.type===n,t}var VC=class gc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,gc.prototype)}static get[Symbol.species](){return gc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new gc(...e[0].concat(this)):new gc(...e.concat(this))}};function eA(n){return Ii(n)?MC(n,()=>{}):n}function kf(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function xj(n){return typeof n=="boolean"}var Nj=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=e??{};let c=new VC;return t&&(xj(t)?c.push(wj):c.push(Cj(t.extraArgument))),c},Dj="RTK_autoBatch",tA=n=>e=>{setTimeout(e,n)},Oj=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let a=!0,l=!1,c=!1;const f=new Set,m=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:tA(10):n.type==="callback"?n.queueNotification:tA(n.timeout),p=()=>{c=!1,l&&(l=!1,f.forEach(y=>y()))};return Object.assign({},i,{subscribe(y){const v=()=>a&&y(),S=i.subscribe(v);return f.add(y),()=>{S(),f.delete(y)}},dispatch(y){var v;try{return a=!((v=y==null?void 0:y.meta)!=null&&v[Dj]),l=!a,l&&(c||(c=!0,m(p))),i.dispatch(y)}finally{a=!0}}})},Mj=n=>function(t){const{autoBatch:i=!0}=t??{};let a=new VC(n);return i&&a.push(Oj(typeof i=="object"?i:void 0)),a};function Pj(n){const e=Nj(),{reducer:t=void 0,middleware:i,devTools:a=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let f;if(typeof t=="function")f=t;else if(W_(t))f=oj(t);else throw new Error(Is(1));let m;typeof i=="function"?m=i(e):m=e();let p=Pd;a&&(p=Rj({trace:!1,...typeof a=="object"&&a}));const y=lj(...m),v=Mj(y);let S=typeof c=="function"?c(v):v();const w=p(...S);return SC(f,l,w)}function LC(n){const e={},t=[];let i;const a={addCase(l,c){const f=typeof l=="string"?l:l.type;if(!f)throw new Error(Is(28));if(f in e)throw new Error(Is(29));return e[f]=c,a},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),a},addMatcher(l,c){return t.push({matcher:l,reducer:c}),a},addDefaultCase(l){return i=l,a}};return n(a),[e,t,i]}function Vj(n){return typeof n=="function"}function Lj(n,e){let[t,i,a]=LC(e),l;if(Vj(n))l=()=>eA(n());else{const f=eA(n);l=()=>f}function c(f=l(),m){let p=[t[m.type],...i.filter(({matcher:y})=>y(m)).map(({reducer:y})=>y)];return p.filter(y=>!!y).length===0&&(p=[a]),p.reduce((y,v)=>{if(v)if(Vs(y)){const w=v(y,m);return w===void 0?y:w}else{if(Ii(y))return MC(y,S=>v(S,m));{const S=v(y,m);if(S===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return y},f)}return c.getInitialState=l,c}var jj=(n,e)=>Ij(n)?n.match(e):n(e);function kj(...n){return e=>n.some(t=>jj(t,e))}var Uj="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",zj=(n=21)=>{let e="",t=n;for(;t--;)e+=Uj[Math.random()*64|0];return e},Bj=["name","message","stack","code"],ey=class{constructor(n,e){Tg(this,"_type");this.payload=n,this.meta=e}},nA=class{constructor(n,e){Tg(this,"_type");this.payload=n,this.meta=e}},Hj=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of Bj)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},rA="External signal was aborted",Kr=(()=>{function n(e,t,i){const a=Ac(e+"/fulfilled",(m,p,y,v)=>({payload:m,meta:{...v||{},arg:y,requestId:p,requestStatus:"fulfilled"}})),l=Ac(e+"/pending",(m,p,y)=>({payload:void 0,meta:{...y||{},arg:p,requestId:m,requestStatus:"pending"}})),c=Ac(e+"/rejected",(m,p,y,v,S)=>({payload:v,error:(i&&i.serializeError||Hj)(m||"Rejected"),meta:{...S||{},arg:y,requestId:p,rejectedWithValue:!!v,requestStatus:"rejected",aborted:(m==null?void 0:m.name)==="AbortError",condition:(m==null?void 0:m.name)==="ConditionError"}}));function f(m,{signal:p}={}){return(y,v,S)=>{const w=i!=null&&i.idGenerator?i.idGenerator(m):zj(),D=new AbortController;let z,M;function B(G){M=G,D.abort()}p&&(p.aborted?B(rA):p.addEventListener("abort",()=>B(rA),{once:!0}));const F=(async function(){var ie,ne;let G;try{let A=(ie=i==null?void 0:i.condition)==null?void 0:ie.call(i,m,{getState:v,extra:S});if(qj(A)&&(A=await A),A===!1||D.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const I=new Promise((C,P)=>{z=()=>{P({name:"AbortError",message:M||"Aborted"})},D.signal.addEventListener("abort",z,{once:!0})});y(l(w,m,(ne=i==null?void 0:i.getPendingMeta)==null?void 0:ne.call(i,{requestId:w,arg:m},{getState:v,extra:S}))),G=await Promise.race([I,Promise.resolve(t(m,{dispatch:y,getState:v,extra:S,requestId:w,signal:D.signal,abort:B,rejectWithValue:(C,P)=>new ey(C,P),fulfillWithValue:(C,P)=>new nA(C,P)})).then(C=>{if(C instanceof ey)throw C;return C instanceof nA?a(C.payload,w,m,C.meta):a(C,w,m)})])}catch(A){G=A instanceof ey?c(null,w,m,A.payload,A.meta):c(A,w,m)}finally{z&&D.signal.removeEventListener("abort",z)}return i&&!i.dispatchConditionRejection&&c.match(G)&&G.meta.condition||y(G),G})();return Object.assign(F,{abort:B,requestId:w,arg:m,unwrap(){return F.then(Fj)}})}}return Object.assign(f,{pending:l,rejected:c,fulfilled:a,settled:kj(c,a),typePrefix:e})}return n.withTypes=()=>n,n})();function Fj(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function qj(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var Gj=Symbol.for("rtk-slice-createasyncthunk");function $j(n,e){return`${n}/${e}`}function Kj({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[Gj];return function(a){const{name:l,reducerPath:c=l}=a;if(!l)throw new Error(Is(11));const f=(typeof a.reducers=="function"?a.reducers(Qj()):a.reducers)||{},m=Object.keys(f),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(ee,ie){const ne=typeof ee=="string"?ee:ee.type;if(!ne)throw new Error(Is(12));if(ne in p.sliceCaseReducersByType)throw new Error(Is(13));return p.sliceCaseReducersByType[ne]=ie,y},addMatcher(ee,ie){return p.sliceMatchers.push({matcher:ee,reducer:ie}),y},exposeAction(ee,ie){return p.actionCreators[ee]=ie,y},exposeCaseReducer(ee,ie){return p.sliceCaseReducersByName[ee]=ie,y}};m.forEach(ee=>{const ie=f[ee],ne={reducerName:ee,type:$j(l,ee),createNotation:typeof a.reducers=="function"};Wj(ie)?Zj(ne,ie,y,e):Xj(ne,ie,y)});function v(){const[ee={},ie=[],ne=void 0]=typeof a.extraReducers=="function"?LC(a.extraReducers):[a.extraReducers],A={...ee,...p.sliceCaseReducersByType};return Lj(a.initialState,I=>{for(let C in A)I.addCase(C,A[C]);for(let C of p.sliceMatchers)I.addMatcher(C.matcher,C.reducer);for(let C of ie)I.addMatcher(C.matcher,C.reducer);ne&&I.addDefaultCase(ne)})}const S=ee=>ee,w=new Map,D=new WeakMap;let z;function M(ee,ie){return z||(z=v()),z(ee,ie)}function B(){return z||(z=v()),z.getInitialState()}function F(ee,ie=!1){function ne(I){let C=I[ee];return typeof C>"u"&&ie&&(C=kf(D,ne,B)),C}function A(I=S){const C=kf(w,ie,()=>new WeakMap);return kf(C,I,()=>{const P={};for(const[O,L]of Object.entries(a.selectors??{}))P[O]=Yj(L,I,()=>kf(D,I,B),ie);return P})}return{reducerPath:ee,getSelectors:A,get selectors(){return A(ne)},selectSlice:ne}}const G={name:l,reducer:M,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:B,...F(c),injectInto(ee,{reducerPath:ie,...ne}={}){const A=ie??c;return ee.inject({reducerPath:A,reducer:M},ne),{...G,...F(A,!0)}}};return G}}function Yj(n,e,t,i){function a(l,...c){let f=e(l);return typeof f>"u"&&i&&(f=t()),n(f,...c)}return a.unwrapped=n,a}var Ba=Kj();function Qj(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function Xj({type:n,reducerName:e,createNotation:t},i,a){let l,c;if("reducer"in i){if(t&&!Jj(i))throw new Error(Is(17));l=i.reducer,c=i.prepare}else l=i;a.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?Ac(n,c):Ac(n))}function Wj(n){return n._reducerDefinitionType==="asyncThunk"}function Jj(n){return n._reducerDefinitionType==="reducerWithPrepare"}function Zj({type:n,reducerName:e},t,i,a){if(!a)throw new Error(Is(18));const{payloadCreator:l,fulfilled:c,pending:f,rejected:m,settled:p,options:y}=t,v=a(n,l,y);i.exposeAction(e,v),c&&i.addCase(v.fulfilled,c),f&&i.addCase(v.pending,f),m&&i.addCase(v.rejected,m),p&&i.addMatcher(v.settled,p),i.exposeCaseReducer(e,{fulfilled:c||Uf,pending:f||Uf,rejected:m||Uf,settled:p||Uf})}function Uf(){}function Is(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const ek={positions:[],loading:!1,error:null,fetched:!1,isDirty:!1},kl=Kr("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=sr($t,"metadata","positions"),i=await rh(t);if(i.exists()){const a=i.data();return Array.isArray(a.list)?a.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),tv=Kr("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=sr($t,"metadata","positions");return await pm(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),jC=Ba({name:"positions",initialState:ek,reducers:{updatePositionCustomLabels:(n,e)=>{const{positionName:t,labels:i}=e.payload,a=n.positions.find(l=>l.name===t);a&&(a.customLabels=i,n.isDirty=!0)},resetPositionsDirty:n=>{n.isDirty=!1},setPositions:(n,e)=>{n.positions=e.payload,n.fetched=!0,n.loading=!1}},extraReducers:n=>{n.addCase(kl.pending,e=>{e.loading=!0,e.error=null}).addCase(kl.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(kl.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(tv.fulfilled,(e,t)=>{e.positions=t.payload,e.isDirty=!1})}}),{updatePositionCustomLabels:zf,resetPositionsDirty:tk,setPositions:nk}=jC.actions,rk=jC.reducer,ik={teams:[],loading:!1,error:null,fetched:!1},wc=Kr("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=sr($t,"metadata","teams"),i=await rh(t);if(i.exists()){const a=i.data();return Array.isArray(a.list)?a.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),id=Kr("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=sr($t,"metadata","teams");return await pm(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),kC=Ba({name:"teams",initialState:ik,reducers:{clearError:n=>{n.error=null},setTeams:(n,e)=>{n.teams=e.payload,n.fetched=!0,n.loading=!1}},extraReducers:n=>{n.addCase(wc.pending,e=>{e.loading=!0,e.error=null}).addCase(wc.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(wc.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(id.pending,e=>{e.error=null}).addCase(id.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(id.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:ez,setTeams:sk}=kC.actions,ak=kC.reducer,ok=()=>{const n=or(),{firebaseUser:e,userData:t,loading:i}=We(m=>m.auth),{fetched:a,loading:l}=We(m=>m.teams),{fetched:c,loading:f}=We(m=>m.positions);return V.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!a&&!l&&n(wc()),!c&&!f&&n(kl()))},[n,e,t,a,l,c,f]),i||t!=null&&t.isApproved&&(!a||!c)?T.jsx(Wl,{}):e?t?t.isApproved?T.jsx(FA,{}):T.jsx(Aa,{to:"/guest",replace:!0}):T.jsx(Wl,{}):T.jsx(Aa,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=n=>{const e=uk(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ck={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=V.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:c,...f},m)=>V.createElement("svg",{ref:m,...ck,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:UC("lucide",a),...!l&&!hk(f)&&{"aria-hidden":"true"},...f},[...c.map(([p,y])=>V.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=(n,e)=>{const t=V.forwardRef(({className:i,...a},l)=>V.createElement(fk,{ref:l,iconNode:e,className:UC(`lucide-${lk(iA(n))}`,`lucide-${n}`,i),...a}));return t.displayName=iA(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],mk=yr("arrow-left",dk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],gk=yr("arrow-right",pk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],zC=yr("chevron-up",yk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vk=yr("circle-check",_k);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Tk=yr("copy",Ek);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],BC=yr("corner-down-right",bk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Ak=yr("layout-grid",Sk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ck=yr("moon",wk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Ik=yr("panel-left-close",Rk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],Nk=yr("panel-left-open",xk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],lh=yr("plus",Dk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Mk=yr("sun",Ok);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],HC=yr("trash-2",Pk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Lk=yr("users",Vk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nv=yr("x",jk),kk=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},Uk={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:kk(),lastVisitedPaths:{},rosterAllViewMode:"user",alertConfig:null},FC=Ba({name:"ui",initialState:Uk,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setRosterAllViewMode:(n,e)=>{n.rosterAllViewMode=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:i}=e.payload;n.lastVisitedPaths[t]=i},toggleTeamExpansion:(n,e)=>{const t=e.payload,i=n.expandedTeams.indexOf(t);i>=0?n.expandedTeams.splice(i,1):n.expandedTeams.push(t)},expandTeam:(n,e)=>{const t=e.payload;n.expandedTeams.includes(t)||n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:i,userEmail:a}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][i]||(n.hiddenUsers[t][i]=[]);const l=n.hiddenUsers[t][i],c=l.indexOf(a);c>=0?l.splice(c,1):l.push(a),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))},showAlert:(n,e)=>{n.alertConfig=e.payload},hideAlert:n=>{n.alertConfig=null}}}),{setMobileSidebarOpen:Il,setDesktopSidebarExpanded:zk,setRosterAllViewMode:sA,setLastVisitedPath:Bk,toggleTeamExpansion:Hk,expandTeam:Fk,toggleUserVisibility:qk,showAlert:Na,hideAlert:aA}=FC.actions,Gk=FC.reducer,$k=()=>{const n=V.useContext(bC);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},Kk="_themeToggleButton_15jyj_1",Yk={themeToggleButton:Kk},Rm=({showText:n,className:e,iconClassName:t})=>{const{theme:i,toggleTheme:a}=$k();return T.jsxs("button",{className:`${Yk.themeToggleButton} ${e||""}`,onClick:a,"aria-label":"Toggle theme",children:[T.jsx("span",{className:t||"",children:i==="dark"?T.jsx(Mk,{size:20}):T.jsx(Ck,{size:20})}),n&&T.jsx("span",{children:"Toggle theme"})]})},Qk={onlineUsers:[],error:null},qC=Ba({name:"presence",initialState:Qk,reducers:{setOnlineUsers:(n,e)=>{n.onlineUsers=e.payload,n.error=null},setPresenceError:(n,e)=>{n.error=e.payload}}}),{setOnlineUsers:Xk,setPresenceError:Wk}=qC.actions,Jk=qC.reducer,Zk=()=>{try{const n="gig_roster_session_id";let e=sessionStorage.getItem(n);return e||(e=Math.random().toString(36).substring(2,10),sessionStorage.setItem(n,e)),e}catch{return Math.random().toString(36).substring(2,10)}},e3=()=>{try{const n="gig_roster_session_color";let e=sessionStorage.getItem(n);if(!e){const t=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F78FB3","#BB8FCE","#82E0AA","#F1948A","#85C1E9","#76D7C4","#F8C471","#C39BD3","#7FB3D5","#7DCEA0","#F0B27A","#5DADE2","#D7BDE2","#A9CCE3","#A3E4D7"],i=Math.floor(Math.random()*t.length);e=t[i],sessionStorage.setItem(n,e)}return e}catch{return"#FF6B6B"}},GC=Zk(),t3=e3(),n3=6e4,r3=9e4,i3=(n,e)=>{const t=V.useRef(!1);V.useEffect(()=>{if(!(n!=null&&n.uid)||!(e!=null&&e.email))return;const i=`${n.uid}_${GC}`,a=sr($t,"presence",i);t.current||(t.current=!0,(async()=>{try{const y=new Date(Date.now()-6e5),v=za(Os($t,"presence"),mm("userUid","==",n.uid));(await au(v)).forEach(w=>{var z,M;const D=((M=(z=w.data().lastSeen)==null?void 0:z.toDate)==null?void 0:M.call(z))||new Date(0);w.id!==i&&D<y&&wS(w.ref).catch(()=>{})})}catch{}})());const l=async()=>{if(!(!Ro.currentUser||document.visibilityState!=="visible"))try{await pm(a,{uid:i,userUid:n.uid,name:e.name||n.displayName||"Anonymous",email:e.email,color:t3,lastSeen:H4()},{merge:!0})}catch(p){const y=p;y.code!=="unavailable"&&console.warn("[Presence] Heartbeat failed:",y.message)}},c=()=>{wS(a).catch(()=>{})};l();const f=setInterval(l,n3),m=()=>{document.visibilityState==="visible"?l():c()};return document.addEventListener("visibilitychange",m),window.addEventListener("beforeunload",c),()=>{clearInterval(f),document.removeEventListener("visibilitychange",m),window.removeEventListener("beforeunload",c),c()}},[n==null?void 0:n.uid,n==null?void 0:n.displayName,e==null?void 0:e.email,e==null?void 0:e.name])},s3=()=>{const n=or(),{firebaseUser:e}=We(a=>a.auth),t=e==null?void 0:e.uid,i=V.useRef([]);V.useEffect(()=>{if(!t)return;let a=null;const l=za(Os($t,"presence")),c=p=>{const y=Date.now(),v=y-r3,S=[];p.forEach(w=>{var z,M,B;if(!w||!w.name)return;const D=((M=(z=w.lastSeen)==null?void 0:z.toMillis)==null?void 0:M.call(z))||((B=w.lastSeen)==null?void 0:B.seconds)*1e3||y;D>v&&S.push({uid:w.uid,name:String(w.name),email:String(w.email||""),color:String(w.color||"#5c4eb1"),lastSeen:D})}),n(Xk(S.sort((w,D)=>w.name.localeCompare(D.name))))},f=setTimeout(()=>{a=po(l,{next:p=>{const y=p.docs.map(v=>v.data());i.current=y,c(y)},error:p=>{console.error("[Presence] Listener failed:",p.message),n(Wk(p.message))}})},1e3),m=setInterval(()=>{c(i.current)},3e4);return()=>{clearTimeout(f),a&&a(),clearInterval(m)}},[n,t])},a3=()=>We(n=>n.presence.onlineUsers),o3="_onlineUsersContainer_1vvxe_1",l3="_sidebarVariant_1vvxe_17",u3="_sidebarExpanded_1vvxe_22",c3="_onlineLabel_1vvxe_26",h3="_avatarStack_1vvxe_38",f3="_avatarCircle_1vvxe_44",d3="_moreCircle_1vvxe_66",m3="_userDropdown_1vvxe_72",p3="_dropdownDown_1vvxe_83",g3="_dropdownUp_1vvxe_88",y3="_dropdownTitle_1vvxe_93",_3="_userListScroll_1vvxe_103",v3="_userItem_1vvxe_108",E3="_userNameText_1vvxe_122",T3="_userAvatarSmall_1vvxe_129",b3="_pulse_1vvxe_142",qn={onlineUsersContainer:o3,sidebarVariant:l3,sidebarExpanded:u3,onlineLabel:c3,avatarStack:h3,avatarCircle:f3,moreCircle:d3,userDropdown:m3,dropdownDown:p3,dropdownUp:g3,dropdownTitle:y3,userListScroll:_3,userItem:v3,userNameText:E3,userAvatarSmall:T3,pulse:b3},$C=({variant:n="top-bar",showText:e=!1})=>{const t=a3(),{firebaseUser:i}=We(w=>w.auth),a=i?`${i.uid}_${GC}`:null,[l,c]=V.useState(!1),f=V.useRef(null);if(V.useEffect(()=>{const w=D=>{f.current&&!f.current.contains(D.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),!t||t.length===0)return null;const m=t.slice(0,3),p=t.length-3,y=w=>{if(!w||typeof w!="string")return"?";const D=w.trim().split(" ");return D.length===0?"?":D.map(z=>z[0]).join("").substring(0,2).toUpperCase()},v=[qn.onlineUsersContainer,n==="sidebar"?qn.sidebarVariant:"",e?qn.sidebarExpanded:""].filter(Boolean).join(" "),S=[qn.userDropdown,n==="sidebar"?qn.dropdownUp:qn.dropdownDown].filter(Boolean).join(" ");return T.jsxs("div",{className:v,ref:f,onClick:()=>c(!l),children:[e&&T.jsx("span",{className:qn.onlineLabel,children:"Online"}),T.jsxs("div",{className:qn.avatarStack,children:[p>0&&T.jsxs("div",{className:`${qn.avatarCircle} ${qn.moreCircle}`,children:["+",p]}),[...m].reverse().map(w=>T.jsx("div",{className:qn.avatarCircle,title:w.name||"Unknown User",style:{backgroundColor:w.color,borderColor:"white"},children:y(w.name)},w.uid))]}),l&&T.jsxs("div",{className:S,children:[T.jsxs("div",{className:qn.dropdownTitle,children:["Online Now (",t.length,")"]}),T.jsx("div",{className:qn.userListScroll,children:t.map(w=>T.jsxs("div",{className:qn.userItem,children:[T.jsx("div",{className:qn.userAvatarSmall,style:{backgroundColor:w.color},children:y(w.name)}),T.jsxs("span",{className:qn.userNameText,children:[w.name||"Unknown User"," ",w.uid===a&&"(You)"]}),T.jsx("div",{className:qn.pulse})]},w.uid))})]})]})},S3="_mobileHeader_lcvro_1",A3="_mobileHeaderPill_lcvro_18",w3="_mobileHeaderPillDisabled_lcvro_30",C3="_mobileHeaderPillActive_lcvro_34",R3="_mobileHeaderText_lcvro_45",I3="_mobileHeaderChevron_lcvro_53",x3="_rotate_lcvro_58",N3="_mobileHeaderActions_lcvro_62",D3="_mobileThemeToggle_lcvro_68",vs={mobileHeader:S3,mobileHeaderPill:A3,mobileHeaderPillDisabled:w3,mobileHeaderPillActive:C3,mobileHeaderText:R3,mobileHeaderChevron:I3,rotate:x3,mobileHeaderActions:N3,mobileThemeToggle:D3},O3=({title:n,hasSideNav:e=!0})=>{const t=or(),{isMobileSidebarOpen:i}=We(l=>l.ui),a=()=>{e&&t(Il(!i))};return T.jsxs("header",{className:vs.mobileHeader,children:[T.jsxs("div",{className:`${vs.mobileHeaderPill} ${i?vs.mobileHeaderPillActive:""} ${e?"":vs.mobileHeaderPillDisabled}`,onClick:a,children:[T.jsx("span",{className:vs.mobileHeaderText,children:n}),e&&T.jsx(zC,{className:`${vs.mobileHeaderChevron} ${i?vs.rotate:""}`})]}),T.jsxs("div",{className:vs.mobileHeaderActions,children:[T.jsx(Rm,{className:vs.mobileThemeToggle}),T.jsx($C,{})]})]})};var ln=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(ln||{}),Nl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(Nl||{});const rv=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],oA=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],KC=n=>{const e=[];return Object.entries(n).forEach(([t,i])=>{i.forEach(a=>{e.push(`${t}|${a}`)})}),e},YC=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`},Ul=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),M3={firebaseUser:null,userData:null,loading:!0,error:null},sd=Kr("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=sr($t,"users",n),i=await rh(t);if(!i.exists()){const a="chris.sm.kang542@gmail.com",l=Ro.currentUser,c=(l==null?void 0:l.email)===a,f={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await pm(t,f),f}return i.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),ad=Kr("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const i=sr($t,"users",n),a={...e};return a.teamPositions&&(a.indexedAssignments=KC(a.teamPositions)),await H1(i,a),a}catch(i){return t(i instanceof Error?i.message:"Failed to update profile")}}),QC=Ba({name:"auth",initialState:M3,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(sd.pending,e=>{e.loading=!0,e.error=null}).addCase(sd.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(sd.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(ad.pending,e=>{e.error=null}).addCase(ad.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(ad.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:P3,setUserData:XC,setLoading:tz,logout:V3}=QC.actions,L3=QC.reducer,j3={entries:{},dirtyEntries:{},loading:!0,initialLoad:!1,saving:!1,error:null},ty=Kr("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=za(Os($t,"roster")),i=await au(t),a={};return i.docs.forEach(l=>{const c=l.data(),f=c.updatedAt,m={...c,updatedAt:f&&typeof f=="object"&&"toMillis"in f?f.toMillis():f};a[l.id]={...m,id:l.id}}),a}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),Cc=Kr("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=q1($t),i=Date.now(),a={};return Object.values(n).forEach(l=>{const c=sr($t,"roster",l.id),f={...l,updatedAt:i};t.set(c,f),a[l.id]=f}),await t.commit(),a}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),WC=Ba({name:"roster",initialState:j3,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:i,userIdentifier:a,positionGroupNames:l,maxConflict:c}=e.payload,f=n.dirtyEntries[t]||n.entries[t];let m;f?m=JSON.parse(JSON.stringify(f)):m={id:t,date:t,teams:{},absence:{}},m.teams[i]||(m.teams[i]={});const p=m.teams[i][a]||[],y=l.findIndex(D=>p.includes(D)),v=y>=0?l[y]:null;let S=null;v===null?S=l[0]:y<l.length-1?S=l[y+1]:S=null;const w=p.filter(D=>!l.includes(D));if(S){if(m.absence[a]){n.error=`Cannot assign ${a} because they are marked as absent on ${t}.`;return}if(w.length<c)w.push(S);else{n.error=`User already has ${c} assignment(s) in this team.`;return}}w.length===0?delete m.teams[i][a]:m.teams[i][a]=w,n.dirtyEntries[t]=m},updateLocalEventName(n,e){const{date:t,eventName:i}=e.payload,a=n.dirtyEntries[t]||n.entries[t];let l;a?l=JSON.parse(JSON.stringify(a)):l={id:t,date:t,teams:{},absence:{}},l.eventName=i,n.dirtyEntries[t]=l},resetRosterEdits(n){n.dirtyEntries={},n.error=null},setRosterEntries(n,e){n.entries=e.payload,n.loading=!1,n.initialLoad=!0},setLoading(n,e){n.loading=e.payload},updateLocalAbsence(n,e){var m;const{date:t,userIdentifier:i,reason:a,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let f;c?f=JSON.parse(JSON.stringify(c)):f={id:t,date:t,teams:{},absence:{}},l?(f.absence[i]={reason:a??((m=f.absence[i])==null?void 0:m.reason)??""},Object.keys(f.teams).forEach(p=>{f.teams[p][i]&&delete f.teams[p][i]})):delete f.absence[i],n.dirtyEntries[t]=f}},extraReducers:n=>{n.addCase(ty.pending,e=>{e.loading=!0,e.error=null}).addCase(ty.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(ty.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Cc.pending,e=>{e.saving=!0,e.error=null}).addCase(Cc.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(Cc.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:nz,updateLocalAssignment:k3,updateLocalEventName:U3,resetRosterEdits:JC,setRosterEntries:z3,setLoading:lA,updateLocalAbsence:ny}=WC.actions,B3=WC.reducer,H3={allUsers:[],originalUsers:[],loading:!1,saving:!1,error:null},ry=Kr("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=Os($t,"users"),i=za(t),a=await au(i),l=[];return a.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,f)=>(c.name||"").localeCompare(f.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),od=Kr("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=q1($t);n.forEach(i=>{const{id:a,...l}=i;l.teamPositions&&(l.indexedAssignments=KC(l.teamPositions)),t.update(sr($t,"users",a),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),ZC=Ba({name:"userManagement",initialState:H3,reducers:{updateUserField(n,e){const{id:t,field:i,value:a}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[i]=a)},toggleUserTeam(n,e){const{userId:t,teamName:i}=e.payload,a=n.allUsers.find(l=>l.id===t);if(a){const l=a.teams||[],c=l.includes(i)?l.filter(f=>f!==i):[...l,i];a.teams=c,a.teamPositions||(a.teamPositions={}),c.includes(i)?a.teamPositions[i]||(a.teamPositions[i]=[]):delete a.teamPositions[i]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:i,posName:a}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[i]||(l.teamPositions[i]=[]);const c=l.teamPositions[i],f=c.includes(a)?c.filter(m=>m!==a):[...c,a];l.teamPositions[i]=f}},moveUserTeam(n,e){const{userId:t,teamName:i,direction:a}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l&&l.teams){const c=l.teams.indexOf(i);if(c===-1)return;const f=a==="up"?c-1:c+1;if(f<0||f>=l.teams.length)return;const m=[...l.teams];[m[c],m[f]]=[m[f],m[c]],l.teams=m}},resetUserChanges(n){n.allUsers=JSON.parse(JSON.stringify(n.originalUsers))},setAllUsers(n,e){n.allUsers=e.payload,n.originalUsers=JSON.parse(JSON.stringify(e.payload)),n.loading=!1}},extraReducers:n=>{n.addCase(ry.pending,e=>{e.loading=!0,e.error=null}).addCase(ry.fulfilled,(e,t)=>{e.allUsers=t.payload,e.originalUsers=JSON.parse(JSON.stringify(t.payload)),e.loading=!1}).addCase(ry.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(od.pending,e=>{e.saving=!0,e.error=null}).addCase(od.fulfilled,e=>{e.saving=!1,e.originalUsers=JSON.parse(JSON.stringify(e.allUsers))}).addCase(od.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:F3,toggleUserTeam:q3,toggleUserTeamPosition:G3,moveUserTeam:$3,resetUserChanges:K3,setAllUsers:Y3}=ZC.actions,Q3=ZC.reducer,X3=()=>{const n=or(),{firebaseUser:e,userData:t}=We(i=>i.auth);i3(e,t),s3(),V.useEffect(()=>{n(lA(!0));const i=za(Os($t,"roster")),a=po(i,{next:m=>{const p={};m.docs.forEach(y=>{const v=y.data(),S=v.updatedAt,w={...v,updatedAt:S&&typeof S=="object"&&"toMillis"in S?S.toMillis():S};p[y.id]={...w,id:y.id}}),n(z3(p))},error:m=>{console.error("Roster sync error:",m),n(lA(!1))}}),l=po(sr($t,"metadata","teams"),m=>{if(m.exists()){const p=m.data(),y=Array.isArray(p.list)?p.list.map(v=>({...v,maxConflict:v.maxConflict||1})):[];n(sk(y))}},m=>console.error("Teams sync error:",m)),c=po(sr($t,"metadata","positions"),m=>{if(m.exists()){const p=m.data(),y=Array.isArray(p.list)?p.list:[];n(nk(y))}},m=>console.error("Positions sync error:",m)),f=po(Os($t,"users"),m=>{const p=[];m.forEach(v=>{p.push({...v.data(),id:v.id})});const y=p.sort((v,S)=>(v.name||"").localeCompare(S.name||""));n(Y3(y))},m=>console.error("Users sync error:",m));return()=>{a(),l(),c(),f()}},[n]),V.useEffect(()=>{if(!(e!=null&&e.uid))return;const i=po(sr($t,"users",e.uid),a=>{a.exists()&&n(XC(a.data()))},a=>console.error("Profile sync error:",a));return()=>i()},[n,e==null?void 0:e.uid])},W3="_modalOverlay_ah937_1",J3="_modalContent_ah937_16",Z3="_modalHeader_ah937_34",eU="_closeButton_ah937_48",tU="_modalBody_ah937_64",nU="_modalFooter_ah937_70",vl={modalOverlay:W3,modalContent:J3,modalHeader:Z3,closeButton:eU,modalBody:tU,modalFooter:nU},iv=({isOpen:n,onClose:e,title:t,children:i,footer:a})=>{if(V.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),!n)return null;const l=T.jsx("div",{className:vl.modalOverlay,onClick:e,children:T.jsxs("div",{className:vl.modalContent,onClick:c=>c.stopPropagation(),children:[T.jsxs("div",{className:vl.modalHeader,children:[T.jsx("h2",{children:t}),T.jsx("button",{className:vl.closeButton,onClick:e,"aria-label":"Close",children:T.jsx(nv,{size:24})})]}),T.jsx("div",{className:vl.modalBody,children:i}),a&&T.jsx("div",{className:vl.modalFooter,children:a})]})});return QA.createPortal(l,document.body)},rU="_confirmModalBody_17sxu_1",iU="_confirmModalMessage_17sxu_8",sU="_footer_17sxu_12",aU="_cancelButton_17sxu_19",oU="_confirmButton_17sxu_34",lc={confirmModalBody:rU,confirmModalMessage:iU,footer:sU,cancelButton:aU,confirmButton:oU},lU=()=>{const n=or(),{alertConfig:e}=We(l=>l.ui);if(!e)return null;const t=()=>{n(aA())},i=()=>{e.onConfirm&&e.onConfirm(),n(aA())},a=T.jsxs("div",{className:lc.footer,children:[e.showCancel!==!1&&T.jsx("button",{className:lc.cancelButton,onClick:t,children:e.cancelText||"Cancel"}),T.jsx("button",{className:lc.confirmButton,onClick:i,children:e.confirmText||"OK"})]});return T.jsx(iv,{isOpen:!!e,onClose:t,title:e.title,footer:a,children:T.jsx("div",{className:lc.confirmModalBody,children:T.jsx("div",{className:lc.confirmModalMessage,children:e.message})})})},uU="_bottomNavContainer_1c0tq_1",cU="_bottomNav_1c0tq_1",hU="_bottomNavBtn_1c0tq_18",fU="_bottomNavBtnActive_1c0tq_42",Bf={bottomNavContainer:uU,bottomNav:cU,bottomNavBtn:hU,bottomNavBtnActive:fU},dU=()=>{const n=No(),e=fi(),{lastVisitedPaths:t}=We(l=>l.ui),i=e.pathname.includes("/settings")?ln.SETTINGS:e.pathname.includes("/dashboard")?ln.DASHBOARD:ln.ROSTER,a=l=>{if(i===l){l===ln.DASHBOARD&&n("/app/dashboard");return}const c=t[l];n(c||`/app/${l}`)};return T.jsx("nav",{className:Bf.bottomNavContainer,children:T.jsx("div",{className:Bf.bottomNav,children:rv.map(l=>T.jsxs("button",{className:`${Bf.bottomNavBtn} ${i===l.id?Bf.bottomNavBtnActive:""}`,onClick:()=>a(l.id),children:[T.jsx("span",{children:l.icon}),T.jsx("span",{children:l.label})]},l.id))})})},mU="_sideNav_1youa_1",pU="_menuOpen_1youa_20",gU="_sidebarContent_1youa_26",yU="_tabletSidebarHeader_1youa_34",_U="_sideMenuList_1youa_38",vU="_sidenavMenuSubheading_1youa_43",EU="_sideNavItem_1youa_67",TU="_sideNavItemActive_1youa_95",bU="_sideEmoji_1youa_102",SU="_loading_1youa_109",AU="_sidebarToggleButton_1youa_116",wU="_sidebarFooter_1youa_117",CU="_sidebarCollapsed_1youa_173",RU="_adminOnlySectionWrapper_1youa_209",IU="_sidebarThemeToggle_1youa_239",xU="_sidebarThemeIcon_1youa_248",mt={sideNav:mU,menuOpen:pU,sidebarContent:gU,tabletSidebarHeader:yU,sideMenuList:_U,sidenavMenuSubheading:vU,sideNavItem:EU,sideNavItemActive:TU,sideEmoji:bU,loading:SU,sidebarToggleButton:AU,sidebarFooter:wU,sidebarCollapsed:CU,adminOnlySectionWrapper:RU,sidebarThemeToggle:IU,sidebarThemeIcon:xU},NU=()=>{var ie;const n=No(),e=fi(),{teamName:t,positionName:i,section:a}=Gd(),l=or(),{userData:c}=We(ne=>ne.auth),{isDesktopSidebarExpanded:f,isMobileSidebarOpen:m,expandedTeams:p}=We(ne=>ne.ui),{teams:y,fetched:v,loading:S}=We(ne=>ne.teams),{fetched:w}=We(ne=>ne.positions),D=e.pathname.includes("/settings")?ln.SETTINGS:e.pathname.includes("/dashboard")?ln.DASHBOARD:ln.ROSTER,z=i||a,M=V.useRef(void 0);V.useEffect(()=>{t&&D===ln.ROSTER&&t!==M.current&&l(Fk(t)),M.current=t},[t,D,l]),V.useEffect(()=>{v||l(wc()),w||l(kl())},[l,v,w]);const B=V.useCallback(ne=>{n(ne)},[n]),F=ne=>{l(Hk(ne))},G=()=>{const ne=rv.find(I=>I.id===D),A=ne?ne.label:"GIG ROSTER";return t&&z?`${t}  ${z}`:t||(z?`${A}  ${z}`:A)},ee=[mt.sideNav,m?mt.menuOpen:"",f?"":mt.sidebarCollapsed].filter(Boolean).join(" ");return T.jsxs("aside",{className:ee,children:[T.jsxs("div",{className:mt.sidebarContent,children:[T.jsxs("div",{className:mt.tabletSidebarHeader,children:[f&&T.jsx("h3",{children:G()}),T.jsx("button",{className:mt.sidebarToggleButton,onClick:()=>l(zk(!f)),"aria-label":f?"Collapse sidebar":"Expand sidebar",children:f?T.jsx(Ik,{size:20}):T.jsx(Nk,{size:20})})]}),T.jsxs("nav",{className:mt.sideMenuList,children:[D===ln.ROSTER&&S&&T.jsx("div",{className:`${mt.sideNavItem} ${mt.loading}`,children:"Loading teams..."}),D===ln.ROSTER?(ie=c==null?void 0:c.teams)==null?void 0:ie.map(ne=>{var P,O;const A=y.find(L=>L.name===ne);if(!A)return null;const I=c.teams.length===1,C=I||p.includes(A.name);return T.jsxs("div",{children:[!I&&T.jsxs("div",{className:`${mt.sidenavMenuSubheading} ${mt.sidenavMenuSubheadingClickable}`,style:{cursor:"pointer"},onClick:()=>{F(A.name),B(`/app/roster/${A.name}/All`)},children:[T.jsxs("div",{children:[A.emoji," ",f&&A.name]}),T.jsx("span",{className:mt.expandIcon,children:C?"":""})]}),C&&T.jsxs("div",{className:mt.sideNavSubItems,children:[T.jsxs("button",{className:`${mt.sideNavItem} ${mt.sideNavItemSub} ${z==="All"&&t===A.name?mt.sideNavItemActive:""}`,onClick:()=>{B(`/app/roster/${A.name}/All`),l(Il(!1))},style:{borderLeft:z==="All"&&t===A.name?"4px solid var(--color-primary)":"4px solid transparent",backgroundColor:z==="All"&&t===A.name?"var(--background-toggle-on-transparent)":"transparent",color:z==="All"&&t===A.name?"var(--color-primary)":""},children:[T.jsx("span",{className:mt.sideEmoji,children:""})," ",f&&"All"]}),(O=(P=A.positions)==null?void 0:P.filter(L=>!L.parentId))==null?void 0:O.map(L=>{const x=z===L.name&&t===A.name;return T.jsxs("button",{className:`${mt.sideNavItem} ${mt.sideNavItemSub} ${x?mt.sideNavItemActive:""}`,onClick:()=>{B(`/app/roster/${A.name}/${L.name}`),l(Il(!1))},style:{borderLeft:x?`4px solid ${L.colour}`:"4px solid transparent",backgroundColor:x?`${L.colour}15`:"transparent",color:x?L.colour:""},children:[T.jsx("span",{className:mt.sideEmoji,children:L.emoji})," ",f&&L.name]},L.name)}),A.allowAbsence!==!1&&T.jsxs("button",{className:`${mt.sideNavItem} ${mt.sideNavItemSub} ${z==="Absence"&&t===A.name?mt.sideNavItemActive:""}`,onClick:()=>{B(`/app/roster/${A.name}/Absence`),l(Il(!1))},style:{borderLeft:z==="Absence"&&t===A.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:z==="Absence"&&t===A.name?"var(--background-toggle-off-transparent)":"transparent"},children:[T.jsx("span",{className:mt.sideEmoji,children:""})," ",f&&"Absence"]})]})]},A.name)}):oA.filter(ne=>!ne.adminOnly).map(ne=>T.jsxs("button",{className:`${mt.sideNavItem} ${z===ne.id?mt.sideNavItemActive:""}`,onClick:()=>{B(`/app/settings/${ne.id}`),l(Il(!1))},children:[T.jsx("span",{className:mt.sideEmoji,children:ne.icon})," ",f&&ne.label]},ne.id))]})]}),(c==null?void 0:c.isAdmin)&&D===ln.SETTINGS&&T.jsxs("div",{className:mt.adminOnlySectionWrapper,children:[T.jsx("div",{className:mt.sidenavMenuSubheading,children:f&&T.jsx("h4",{children:"Admin Only"})}),oA.filter(ne=>ne.adminOnly).map(ne=>T.jsxs("button",{className:`${mt.sideNavItem} ${z===ne.id?mt.sideNavItemActive:""}`,onClick:()=>{B(`/app/settings/${ne.id}`),l(Il(!1))},children:[T.jsx("span",{className:mt.sideEmoji,children:ne.icon})," ",f&&ne.label]},ne.id))]}),T.jsxs("div",{className:mt.sidebarFooter,children:[T.jsx(Rm,{className:mt.sidebarThemeToggle,iconClassName:mt.sidebarThemeIcon}),T.jsx($C,{variant:"sidebar",showText:f})]})]})},DU="_layoutWrapper_ysxiy_1",OU="_innerWrapper_ysxiy_13",MU="_mainContent_ysxiy_21",El={layoutWrapper:DU,innerWrapper:OU,mainContent:MU},PU=()=>{const n=or(),e=No(),t=fi(),i=Gd(),{userData:a}=We(M=>M.auth);X3();const{teams:l}=We(M=>M.teams),{isMobileSidebarOpen:c,isDesktopSidebarExpanded:f,lastVisitedPaths:m}=We(M=>M.ui),p=t.pathname.includes("/settings")?ln.SETTINGS:t.pathname.includes("/dashboard")?ln.DASHBOARD:ln.ROSTER,{teamName:y,positionName:v,section:S}=i,w=v||S||null,D=p!==ln.DASHBOARD;V.useEffect(()=>{const M=p===ln.ROSTER&&!y,B=p===ln.SETTINGS&&!w;if(t.pathname.startsWith("/app/")&&!M&&!B&&p!==ln.DASHBOARD){const F=t.pathname+t.search;n(Bk({tabId:p,path:F}))}},[t.pathname,t.search,p,y,w,n]),V.useEffect(()=>{var G;const M=t.pathname==="/app"||t.pathname==="/app/",B=p===ln.ROSTER&&!y,F=p===ln.SETTINGS&&!w;if(M)e(m[ln.DASHBOARD]||"/app/dashboard",{replace:!0});else if(B){const ee=m[ln.ROSTER];if(ee)e(ee,{replace:!0});else if((G=a==null?void 0:a.teams)!=null&&G[0]&&l.length>0){const ie=l.find(ne=>ne.name===a.teams[0]);ie&&e(`/app/roster/${ie.name}/All`,{replace:!0})}}else if(F){const ee=m[ln.SETTINGS];e(ee||`/app/settings/${Nl.PROFILE}`,{replace:!0})}},[p,y,w,a,l,e,t.pathname,t.search,m]);const z=()=>{const M=rv.find(F=>F.id===p),B=M?M.label:"GIG ROSTER";return y&&w?`${y}  ${w}`:y||(w?`${B}  ${w}`:B)};return T.jsxs("div",{className:`${El.layoutWrapper} ${c?El.menuOpen:""} ${f?El.sidebarExpanded:El.sidebarCollapsed}`,children:[D&&T.jsx(NU,{}),T.jsxs("div",{className:El.innerWrapper,children:[T.jsx(O3,{title:z(),hasSideNav:D}),T.jsx("main",{className:El.mainContent,children:T.jsx(FA,{})}),T.jsx(dU,{})]}),T.jsx(lU,{})]})},VU="_rosterSaveFooter_1ce1v_1",LU="_saveFooterContent_1ce1v_23",jU="_changesLabel_1ce1v_32",kU="_saveFooterActions_1ce1v_37",UU="_saveBtn_1ce1v_42",zU="_cancelBtn_1ce1v_57",BU="_sidebarCollapsed_1ce1v_77",HU="_noSidebar_1ce1v_81",ga={rosterSaveFooter:VU,saveFooterContent:LU,changesLabel:jU,saveFooterActions:kU,saveBtn:UU,cancelBtn:zU,sidebarCollapsed:BU,noSidebar:HU},uu=({label:n="You have unsaved changes",onSave:e,onCancel:t,isSaving:i,saveText:a="Save",discardText:l="Discard",hasSideNav:c=!0})=>{const{isDesktopSidebarExpanded:f}=We(p=>p.ui),m=[ga.rosterSaveFooter,c?"":ga.noSidebar,!f&&c?ga.sidebarCollapsed:""].filter(Boolean).join(" ");return T.jsx("div",{className:m,children:T.jsxs("div",{className:ga.saveFooterContent,children:[T.jsx("span",{className:ga.changesLabel,children:n}),T.jsxs("div",{className:ga.saveFooterActions,children:[T.jsx("button",{className:ga.cancelBtn,onClick:t,disabled:i,children:l}),T.jsx("button",{className:ga.saveBtn,onClick:e,disabled:i,children:i?"Saving...":a})]})]})})},ld=(n,e,t)=>{const i=[],a=new Date;a.setHours(0,0,0,0);const l=a.getFullYear(),c=e||l,f=t||l,m={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},p=n.map(w=>m[w]);let y;c===l?y=new Date(a):y=new Date(c,0,1),y.setHours(0,0,0,0);const v=new Date(f,11,31);v.setHours(23,59,59,999);const S=new Date(y);for(;S.getTime()<=v.getTime();)p.includes(S.getDay())&&i.push(new Date(S)),S.setDate(S.getDate()+1);return i.sort((w,D)=>w.getTime()-D.getTime()),i.map(w=>YC(w))},FU=(n,e,t=5)=>{const i=[],a=new Date(e);a.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(m=>l[m]),f=new Date(a);for(;i.length<t;){f.setDate(f.getDate()-1),c.includes(f.getDay())&&i.push(new Date(f));const m=new Date(a);if(m.setFullYear(m.getFullYear()-1),f<m)break}return i.map(m=>YC(m)).sort()},qU={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},ud=Kr("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=Os($t,"users"),i=za(t,mm("teams","array-contains",n)),a=await au(i),l=[];return a.forEach(c=>{l.push(c.data())}),l.sort((c,f)=>(c.name||"").localeCompare(f.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),cd=Kr("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:i})=>{if(!n||!e)return[];try{const c=i().positions.positions.filter(w=>w.parentId===e),m=[e,...c.map(w=>w.name)].map(w=>`${n}|${w}`),p=Os($t,"users"),y=za(p,mm("indexedAssignments","array-contains-any",m)),v=await au(y),S=[];return v.forEach(w=>{S.push(w.data())}),S.sort((w,D)=>(w.name||"").localeCompare(D.name||""))}catch(a){return console.error("Error fetching users:",a),t("Failed to load users.")}}),hd=Kr("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=sr($t,"metadata","teams"),i=await rh(t);if(i.exists()){const a=i.data();return(Array.isArray(a.list)?a.list.map(f=>({...f,preferredDays:f.preferredDays||[],positions:f.positions||[]})):[]).find(f=>f.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),eR=Ba({name:"rosterView",initialState:qU,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=FU(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=ld(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,i=ld(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...i]}}},extraReducers:n=>{n.addCase(cd.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(cd.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(cd.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(ud.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(ud.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(ud.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(hd.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(hd.fulfilled,(e,t)=>{var i;e.currentTeamData=t.payload,(i=t.payload)!=null&&i.preferredDays&&(e.rosterDates=ld(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(hd.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:GU,resetToUpcomingDates:$U,loadNextYearDates:KU}=eR.actions,YU=eR.reducer,QU="_dashboardContainer_y5fm3_1",XU="_dashboardHeader_y5fm3_10",WU="_dashboardHeaderActions_y5fm3_24",JU="_clearPastBtn_y5fm3_32",ZU="_eventNameContainer_y5fm3_48",e6="_dashboardEventNameInput_y5fm3_55",t6="_dashboardEventNameInputHasEvent_y5fm3_79",n6="_carouselOuterWrapper_y5fm3_90",r6="_eventsCarouselTrack_y5fm3_98",i6="_eventCardWrapper_y5fm3_112",s6="_peek_y5fm3_123",a6="_active_y5fm3_129",o6="_eventCardDate_y5fm3_135",l6="_dashboardTodayBadge_y5fm3_147",u6="_teamCardsContainer_y5fm3_158",c6="_teamEventCard_y5fm3_166",h6="_dashboardThemeToggle_y5fm3_174",f6="_teamEventHeader_y5fm3_178",d6="_teamCardEmoji_y5fm3_197",m6="_teamCardName_y5fm3_201",p6="_copyRosterBtn_y5fm3_205",g6="_copyRosterBtnSuccess_y5fm3_226",y6="_teamEventDetails_y5fm3_232",_6="_posAssignmentRow_y5fm3_238",v6="_posEmojiLabel_y5fm3_244",E6="_assignedNames_y5fm3_250",T6="_unassigned_y5fm3_256",b6="_meTag_y5fm3_264",S6="_carouselPagination_y5fm3_286",A6="_dashboardEmpty_y5fm3_295",Nt={dashboardContainer:QU,dashboardHeader:XU,dashboardHeaderActions:WU,clearPastBtn:JU,eventNameContainer:ZU,dashboardEventNameInput:e6,dashboardEventNameInputHasEvent:t6,carouselOuterWrapper:n6,eventsCarouselTrack:r6,eventCardWrapper:i6,peek:s6,active:a6,eventCardDate:o6,dashboardTodayBadge:l6,teamCardsContainer:u6,teamEventCard:c6,dashboardThemeToggle:h6,teamEventHeader:f6,teamCardEmoji:d6,teamCardName:m6,copyRosterBtn:p6,copyRosterBtnSuccess:g6,teamEventDetails:y6,posAssignmentRow:_6,posEmojiLabel:v6,assignedNames:E6,unassigned:T6,meTag:b6,carouselPagination:S6,dashboardEmpty:A6},w6=()=>{const n=or(),[e,t]=jD(),i=e.get("date"),{userData:a}=We(ue=>ue.auth),{teams:l}=We(ue=>ue.teams),{entries:c,dirtyEntries:f,loading:m,initialLoad:p,saving:y}=We(ue=>ue.roster),{positions:v}=We(ue=>ue.positions),[S,w]=V.useState([]),[D,z]=V.useState(!1),[M,B]=V.useState(null),[F,G]=V.useState(0),[ee,ie]=V.useState(0),[ne,A]=V.useState(!1),I=V.useRef(null),C=V.useRef(!1),P=Object.keys(f).length>0;V.useEffect(()=>{const ue=I.current;if(!ue)return;const Se=new ResizeObserver(xe=>{for(const ze of xe){const Be=ze.contentRect.width;Be>0&&ie(Be)}});return Se.observe(ue),()=>Se.disconnect()},[m,D,p]);const O=V.useMemo(()=>{const ue=Ul();if(!(a!=null&&a.teams)||l.length===0)return[];const Se=l.filter(Be=>a.teams.includes(Be.name)),xe=new Set;Se.forEach(Be=>{ld(Be.preferredDays).forEach(St=>xe.add(St))});const ze=Array.from(xe).sort();return i&&i<ue?[i]:ze.filter(Be=>{const st=Be;if(i===st)return!0;const St=c[st]||f[st];return St?Se.some(Ye=>{var Ot;const Et=((Ot=St.teams)==null?void 0:Ot[Ye.name])||{};return Object.values(Et).some(Qn=>Qn.length>0)}):!1})},[a,l,c,f,i]);V.useEffect(()=>{if(O.length===0||!I.current||m||ee===0)return;const ue=I.current,Se=(xe,ze)=>{const Be=ue.offsetWidth||ee;Be!==0&&(ue.style.scrollSnapType="none",ue.scrollTo({left:Be*xe,behavior:ze?"smooth":"auto"}),setTimeout(()=>{ue&&(ue.style.scrollSnapType="x mandatory"),A(!0)},50),G(xe),C.current=!0)};if(i){const xe=O.findIndex(ze=>ze===i);if(xe>=0){const ze=Math.round(ue.scrollLeft/(ue.offsetWidth||ee||1));!C.current||ze!==xe?requestAnimationFrame(()=>{Se(xe,C.current)}):A(!0)}else A(!0)}else ue.scrollLeft!==0?Se(0,!0):A(!0),C.current=!0},[i,O,m,ee]);const L=()=>{t({},{replace:!0})};V.useEffect(()=>{(async()=>{if(!(!(a!=null&&a.teams)||a.teams.length===0)){z(!0);try{const Se=Os($t,"users"),xe=za(Se,mm("teams","array-contains-any",a.teams)),ze=await au(xe),Be=[];ze.forEach(st=>Be.push(st.data())),w(Be)}catch(Se){console.error("Error fetching users for dashboard:",Se)}finally{z(!1)}}})()},[a==null?void 0:a.teams]);const x=V.useCallback(ue=>{if(!ue||!(a!=null&&a.teams)||l.length===0)return null;const Se=ue,xe=f[Se]||c[Se],st=l.filter(St=>a.teams.includes(St.name)).sort((St,Ye)=>{const Et=a.teams.indexOf(St.name),Ot=a.teams.indexOf(Ye.name);return Et-Ot}).map(St=>{var dn;const Ye=((dn=xe==null?void 0:xe.teams)==null?void 0:dn[St.name])||{},Et=[],Ot=St.positions.map(lr=>lr.name);let Qn=0;return Ot.forEach(lr=>{const Xn=v.find(Pt=>Pt.name===lr),Mt=[];Object.entries(Ye).forEach(([Pt,ur])=>{if(ur.includes(lr)){const di=S.find(qt=>qt.email===Pt);di?Mt.push(di):Mt.push({email:Pt,name:Pt}),Qn++}});const Jt=[...Mt].sort((Pt,ur)=>Xn!=null&&Xn.sortByGender&&Pt.gender!==ur.gender?Pt.gender==="Male"?-1:ur.gender==="Male"?1:(Pt.gender||"").localeCompare(ur.gender||""):(Pt.name||"").localeCompare(ur.name||""));Et.push({posName:lr,emoji:(Xn==null?void 0:Xn.emoji)||"",assignedUsers:Jt.map(Pt=>({name:Pt.name||Pt.email||"Unknown",isMe:Pt.email===a.email}))})}),{teamName:St.name,teamEmoji:St.emoji,positions:Et,hasAssignments:Qn>0}}).filter(St=>St.hasAssignments);return st.length>0?st:null},[c,f,a,l,v,S]),ge=(ue,Se,xe,ze,Be)=>{const St=new Date(ue).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"});let Ye="";Be&&(Ye+=` ${Be} 
`),Ye+=`${xe} ${Se}  ${St}
`,ze.forEach(Et=>{const Ot=Et.assignedUsers.length>0?Et.assignedUsers.map(Qn=>Qn.name).join(", "):"-";Ye+=`${Et.emoji}: ${Ot}
`}),navigator.clipboard.writeText(Ye).then(()=>{const Et=`${ue}-${Se}`;B(Et),setTimeout(()=>B(null),2e3)})},Te=()=>{if(!I.current)return;const ue=I.current,Se=ue.offsetWidth,xe=Math.round(ue.scrollLeft/Se);if(xe!==F&&O[xe]){G(xe);const ze=O[xe];if(i!==ze){const Be=Ul();xe===0&&Be===ze?t({},{replace:!0}):t({date:ze},{replace:!0})}}},H=(ue,Se)=>{n(U3({date:ue,eventName:Se}))},ae=()=>{n(Cc(f))},ye=()=>{n(JC())};if(m&&!p||D)return T.jsx(lu,{});if(O.length===0)return T.jsxs("div",{className:Nt.dashboardEmpty,children:[T.jsx("h2",{children:"No upcoming events found"}),T.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const pe=O[F],Ee=Ul(),j=pe&&pe<Ee,re=j?"Previous Event":"Upcoming Events",_e=ue=>new Date(ue).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),we=(ue,Se=!1)=>{const xe=x(ue);if(!xe)return null;const ze=f[ue]||c[ue],Be=ze==null?void 0:ze.eventName;return T.jsx("div",{className:Nt.teamCardsContainer,children:xe.map(st=>{const St=M===`${ue}-${st.teamName}`;return T.jsxs("div",{className:Nt.teamEventCard,children:[T.jsxs("div",{className:Nt.teamEventHeader,children:[T.jsxs("h3",{children:[T.jsx("span",{className:Nt.teamCardEmoji,children:st.teamEmoji}),T.jsx("span",{className:Nt.teamCardName,children:st.teamName})]}),!Se&&T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(Rm,{className:Nt.dashboardThemeToggle}),T.jsx("button",{className:`${Nt.copyRosterBtn} ${St?Nt.copyRosterBtnSuccess:""}`,onClick:()=>ge(ue,st.teamName,st.teamEmoji,st.positions,Be),title:"Copy to clipboard",children:St?T.jsxs(T.Fragment,{children:[T.jsx(vk,{size:16})," Copied"]}):T.jsxs(T.Fragment,{children:[T.jsx(Tk,{size:16})," Copy"]})})]})]}),T.jsx("div",{className:Nt.teamEventDetails,children:st.positions.map(Ye=>T.jsxs("div",{className:Nt.posAssignmentRow,children:[T.jsx("span",{className:Nt.posEmojiLabel,title:Ye.posName,children:Ye.emoji}),T.jsx("span",{className:`${Nt.assignedNames} ${Ye.assignedUsers.length===0?Nt.unassigned:""}`,children:Ye.assignedUsers.length>0?Ye.assignedUsers.map((Et,Ot)=>T.jsxs(V.Fragment,{children:[Et.name,Et.isMe&&T.jsx("span",{className:Nt.meTag,children:"Me"}),Ot<Ye.assignedUsers.length-1?", ":""]},`${Et.name}-${Ot}`)):"Unassigned"})]},Ye.posName))})]},st.teamName)})})};return T.jsxs("div",{className:Nt.dashboardContainer,children:[T.jsxs("div",{className:Nt.dashboardHeader,children:[T.jsx("h1",{children:re}),T.jsx("div",{className:Nt.dashboardHeaderActions,children:j&&T.jsx("button",{className:Nt.clearPastBtn,onClick:L,children:"Reset to upcoming"})})]}),T.jsx("div",{className:Nt.carouselOuterWrapper,style:{opacity:ne?1:0,transition:"opacity 0.3s ease-in-out"},children:T.jsx("div",{className:Nt.eventsCarouselTrack,ref:I,onScroll:Te,children:O.map((ue,Se)=>{const xe=ue,ze=f[xe]||c[xe],Be=(ze==null?void 0:ze.eventName)||"";return T.jsxs("div",{className:`${Nt.eventCardWrapper} ${Se===F?Nt.active:Nt.peek}`,children:[T.jsx("div",{className:Nt.eventNameContainer,children:T.jsx("input",{type:"text",className:`${Nt.dashboardEventNameInput} ${Be?Nt.dashboardEventNameInputHasEvent:""}`,placeholder:"Event name (e.g. Easter Sunday)",value:Be,onChange:st=>H(ue,st.target.value),disabled:Se!==F})}),T.jsxs("div",{className:Nt.eventCardDate,children:[_e(ue),ue===Ee&&T.jsx("span",{className:Nt.dashboardTodayBadge,children:"TODAY"})]}),we(ue,Se!==F)]},ue)})})}),T.jsxs("div",{className:Nt.carouselPagination,children:[F+1," / ",O.length]}),P&&T.jsx(uu,{label:"Unsaved event labels",saveText:"Save Changes",onSave:ae,onCancel:ye,isSaving:y,hasSideNav:!1})]})},C6="_button_4hh4s_1",R6="_primary_4hh4s_26",I6="_secondary_4hh4s_31",x6="_icon_4hh4s_42",N6="_small_4hh4s_48",Hf={button:C6,primary:R6,secondary:I6,delete:"_delete_4hh4s_36",icon:x6,small:N6},pr=({variant:n="primary",size:e="medium",isIcon:t=!1,className:i="",children:a,...l})=>{const c=[Hf.button,Hf[n],e==="small"?Hf.small:"",t?Hf.icon:"",i].filter(Boolean).join(" ");return T.jsx("button",{className:c,...l,children:a})},D6="_pillGroup_ti99d_1",O6="_pillGroupNowrap_ti99d_9",M6="_pill_ti99d_1",P6="_pillActive_ti99d_35",V6="_pillDisabled_ti99d_40",L6="_pillText_ti99d_61",Dl={pillGroup:D6,pillGroupNowrap:O6,pill:M6,pillActive:P6,pillDisabled:V6,pillText:L6},zl=({children:n,nowrap:e})=>T.jsx("div",{className:`${Dl.pillGroup} ${e?Dl.pillGroupNowrap:""}`,children:n}),Dr=({colour:n,isDropdown:e,isActive:t,isDisabled:i,minWidth:a,onClick:l,children:c})=>{const[f,m]=V.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),T.jsxs("div",{className:`${Dl.pill} ${Dl.pillText} ${t?Dl.pillActive:""} ${i?Dl.pillDisabled:""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:a?`${a}px`:"fit-content"},onClick:p=>{i||(m(y=>!y),l&&l(p))},children:[c,e&&T.jsx(zC,{style:{rotate:f?"90deg":"0"}})]})},j6="_settingsSection_5m9oe_1",k6="_sectionLabel_5m9oe_7",U6="_subSectionGroup_5m9oe_17",z6="_subSectionHeader_5m9oe_21",B6="_formGroup_5m9oe_31",H6="_summaryButton_5m9oe_35",F6="_summaryPrimary_5m9oe_57",q6="_summarySeparator_5m9oe_66",G6="_summarySecondary_5m9oe_73",$6="_summaryEmoji_5m9oe_78",K6="_remainingCount_5m9oe_82",Nn={settingsSection:j6,sectionLabel:k6,subSectionGroup:U6,subSectionHeader:z6,formGroup:B6,summaryButton:H6,summaryPrimary:F6,summarySeparator:q6,summarySecondary:G6,summaryEmoji:$6,remainingCount:K6},tR=({selectedTeams:n,teamPositions:e,onToggleTeam:t,onTogglePosition:i,onMoveTeam:a,availableTeams:l,globalPositions:c})=>T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:Nn.formGroup,children:[T.jsx("label",{className:Nn.sectionLabel,children:"Teams"}),T.jsx(zl,{children:l.map(f=>{const m=n.includes(f.name);return T.jsxs(Dr,{onClick:()=>t(f.name),isActive:m,children:[T.jsx("span",{children:f.emoji})," ",f.name]},f.name)})})]}),n.length>0&&T.jsxs("div",{className:Nn.settingsSection,children:[T.jsx("label",{className:Nn.sectionLabel,children:"Positions per Team"}),n.map((f,m)=>{var v;const p=l.find(S=>S.name===f);if(!p)return null;const y=((v=p.positions)==null?void 0:v.filter(S=>!S.parentId))||[];return T.jsxs("div",{className:Nn.subSectionGroup,children:[T.jsxs("div",{className:Nn.subSectionHeader,style:{justifyContent:"space-between"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.emoji," ",p.name]}),a&&T.jsxs("div",{style:{display:"flex",gap:"4px"},children:[T.jsx(pr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(f,"up"),disabled:m===0,children:""}),T.jsx(pr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(f,"down"),disabled:m===n.length-1,children:""})]})]}),y.length>0?T.jsx(zl,{children:y.map(S=>{var M;const w=c.find(B=>B.name===S.name),D=!!(w!=null&&w.isCustom),z=(M=e[f])==null?void 0:M.includes(S.name);return T.jsxs(Dr,{onClick:()=>i(f,S.name),isActive:z,isDisabled:D,colour:S.colour,children:[T.jsx("span",{children:S.emoji})," ",S.name]},S.name)})}):T.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-dim)",margin:"8px 0"},children:"No assignable positions for this team."})]},f)})]})]}),Y6="_formGroup_163vy_1",Q6="_formInput_163vy_16",X6="_formSelect_163vy_52",W6="_colorInput_163vy_86",J6="_fieldHint_163vy_104",As={formGroup:Y6,formInput:Q6,formSelect:X6,colorInput:W6,fieldHint:J6},Z6="_profileCard_1qei9_1",e9="_profileReadonly_1qei9_11",t9="_actionContainer_1qei9_59",iy={profileCard:Z6,profileReadonly:e9,actionContainer:t9},nR=({className:n})=>{const e=or(),{userData:t,firebaseUser:i}=We(M=>M.auth),{teams:a}=We(M=>M.teams),{positions:l}=We(M=>M.positions),[c,f]=V.useState({name:"",gender:"",isActive:!0,teams:[],teamPositions:{}}),[m,p]=V.useState("idle");V.useEffect(()=>{!t||m==="saving"||f(M=>!(M.name!==(t.name||"")||M.gender!==(t.gender||"")||M.isActive!==(t.isActive??!0)||JSON.stringify(M.teams)!==JSON.stringify(t.teams||[])||JSON.stringify(M.teamPositions)!==JSON.stringify(t.teamPositions||{}))||m==="idle"?{name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}}:M)},[t,m]);const y=V.useMemo(()=>{if(!t)return!1;const M={name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}};return JSON.stringify(c)!==JSON.stringify(M)},[c,t]),v=async()=>{if(i){p("saving");try{await e(ad({uid:i.uid,data:c})).unwrap(),p("success"),setTimeout(()=>p("idle"),2e3)}catch(M){console.error(M),p("idle")}}},S=()=>{t&&f({name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}})},w=M=>{f(B=>{const F=B.teams.includes(M),G=F?B.teams.filter(ie=>ie!==M):[...B.teams,M],ee={...B.teamPositions};return F?delete ee[M]:ee[M]||(ee[M]=[]),{...B,teams:G,teamPositions:ee}})},D=(M,B)=>{f(F=>{const G=F.teamPositions[M]||[],ee=G.includes(B)?G.filter(ie=>ie!==B):[...G,B];return{...F,teamPositions:{...F.teamPositions,[M]:ee}}})},z=(M,B)=>{f(F=>{const G=F.teams.indexOf(M);if(G===-1)return F;const ee=B==="up"?G-1:G+1;if(ee<0||ee>=F.teams.length)return F;const ie=[...F.teams];return[ie[G],ie[ee]]=[ie[ee],ie[G]],{...F,teams:ie}})};return t?T.jsxs("section",{className:`${iy.profileCard} ${n||""}`,children:[T.jsx("div",{className:iy.profileReadonly,children:T.jsxs("p",{children:[T.jsx("strong",{children:"Email:"})," ",t.email]})}),T.jsxs("div",{className:As.formGroup,children:[T.jsx("label",{children:"Name"}),T.jsx("input",{type:"text",value:c.name,onChange:M=>f(B=>({...B,name:M.target.value})),className:As.formInput})]}),T.jsxs("div",{className:As.formGroup,children:[T.jsx("label",{children:"Gender"}),T.jsx(zl,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(M=>T.jsx(Dr,{colour:M.colour,onClick:()=>f(B=>({...B,gender:M.value})),isActive:c.gender===M.value,children:M.value},M.value))})]}),T.jsx(tR,{selectedTeams:c.teams,teamPositions:c.teamPositions,onToggleTeam:w,onTogglePosition:D,onMoveTeam:z,availableTeams:a,globalPositions:l}),T.jsxs("div",{className:As.formGroup,children:[T.jsx("label",{children:"Availability Status"}),T.jsx(Dr,{colour:c.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>f(M=>({...M,isActive:!M.isActive})),isActive:!0,children:c.isActive?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),T.jsx("p",{className:As.fieldHint,children:"Turn off if you want to be hidden from the roster."})]}),T.jsx("div",{className:iy.actionContainer,children:T.jsx(pr,{variant:"delete",onClick:()=>Ro.signOut(),children:"Logout"})}),y&&T.jsx(uu,{label:"Unsaved profile changes",saveText:"Update Profile",onSave:v,onCancel:S,isSaving:m==="saving"})]}):T.jsx("div",{children:"Loading profile..."})},n9="_guestContainer_1m4dd_1",r9="_profileCardOverride_1m4dd_14",i9="_guestHeader_1m4dd_21",s9="_brandTitle_1m4dd_28",a9="_guestThemeToggleContainer_1m4dd_32",o9="_pendingLabel_1m4dd_38",Tl={guestContainer:n9,profileCardOverride:r9,guestHeader:i9,brandTitle:s9,guestThemeToggleContainer:a9,pendingLabel:o9},l9=()=>{const{userData:n,firebaseUser:e,loading:t}=We(i=>i.auth);return t?T.jsx(Wl,{}):e?n?n.isApproved?T.jsx(Aa,{to:"/app",replace:!0}):T.jsxs("div",{className:Tl.guestContainer,children:[T.jsxs("header",{className:Tl.guestHeader,children:[T.jsx("h2",{className:Tl.brandTitle,children:"God is Good"}),T.jsx("p",{className:Tl.pendingLabel,children:"PENDING ADMIN APPROVAL"}),T.jsx("div",{className:Tl.guestThemeToggleContainer,children:T.jsx(Rm,{})})]}),T.jsx(nR,{className:Tl.profileCardOverride})]}):T.jsx(Wl,{}):T.jsx(Aa,{to:"/login",replace:!0})},u9="_loginContainer_12x6v_1",c9="_loginHeader_12x6v_12",h9="_brandTitle_12x6v_16",f9="_brandSubtitle_12x6v_24",d9="_loginButtonContainer_12x6v_33",m9="_loginButton_12x6v_33",p9="_google_12x6v_57",fo={loginContainer:u9,loginHeader:c9,brandTitle:h9,brandSubtitle:f9,loginButtonContainer:d9,loginButton:m9,google:p9},g9=()=>{const{firebaseUser:n,loading:e}=We(i=>i.auth),t=()=>nL(Ro,WL);return e?null:n?T.jsx(Aa,{to:"/",replace:!0}):T.jsxs("div",{className:fo.loginContainer,children:[T.jsxs("header",{className:fo.loginHeader,children:[T.jsx("h1",{className:fo.brandTitle,children:"God is Good"}),T.jsx("p",{className:fo.brandSubtitle,children:"Worship Team Roster"})]}),T.jsx("div",{className:fo.loginButtonContainer,children:T.jsxs("button",{onClick:t,className:`${fo.loginButton} ${fo.google}`,children:[T.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},y9="_meTag_1i4gz_1",_9="_isMe_1i4gz_23",uA={meTag:y9,isMe:_9},rR=({displayName:n,isMe:e})=>T.jsxs(V.Fragment,{children:[T.jsx("span",{className:e?uA.isMe:"",children:n}),e&&T.jsx("span",{className:uA.meTag,children:"Me"})]}),v9="_rosterTableHeaderCell_mtecw_1",E9="_stickyCol_mtecw_10",T9="_dateHeaderContent_mtecw_26",b9="_dateHeaderActions_mtecw_33",S9="_loadPrevBtn_mtecw_38",A9="_resetDatesBtn_mtecw_60",w9="_peekHeader_mtecw_70",C9="_peekSelector_mtecw_78",R9="_stickyRight_mtecw_95",I9="_clickableHeader_mtecw_105",x9="_allViewPositionHeader_mtecw_115",N9="_allViewPositionName_mtecw_122",D9="_headerActions_mtecw_128",O9="_headerActionBtn_mtecw_135",M9="_removeHeaderBtn_mtecw_159",P9="_headerInput_mtecw_164",V9="_addColumnBtn_mtecw_190",L9="_highlightedHeader_mtecw_211",j9="_genderDividerCell_mtecw_216",k9="_genderLabel_mtecw_233",pt={rosterTableHeaderCell:v9,stickyCol:E9,dateHeaderContent:T9,dateHeaderActions:b9,loadPrevBtn:S9,resetDatesBtn:A9,peekHeader:w9,peekSelector:C9,stickyRight:R9,clickableHeader:I9,allViewPositionHeader:x9,allViewPositionName:N9,headerActions:D9,headerActionBtn:O9,removeHeaderBtn:M9,headerInput:P9,addColumnBtn:V9,highlightedHeader:L9,genderDividerCell:j9,genderLabel:k9},sy=V.memo(({viewType:n,rosterAllViewMode:e,allViewColumns:t,userData:i,assignedOnClosestDate:a,currentTeamData:l,teamName:c,navigate:f,hasPastDates:m,onLoadPrevious:p,onResetDates:y,currentPosition:v,handleUpdateCustomLabel:S,handleMoveCustomLabel:w,handleRemoveCustomLabel:D,handleAddCustomLabel:z,sortedUsers:M,genderDividerIndex:B,onToggleVisibility:F,peekPositionName:G,setPeekPositionName:ee,peekOptions:ie,allTeamUsers:ne})=>{const A=()=>T.jsx("th",{className:`${pt.rosterTableHeaderCell} ${pt.stickyCol}`,children:T.jsxs("div",{className:pt.dateHeaderContent,children:["Date",T.jsxs("div",{className:pt.dateHeaderActions,children:[T.jsx("button",{className:pt.loadPrevBtn,onClick:p,title:"Load 5 previous dates",children:""}),m&&T.jsx("button",{className:`${pt.loadPrevBtn} ${pt.resetDatesBtn}`,onClick:y,title:"Hide previous dates",children:""})]})]})}),I=()=>T.jsx("th",{className:`${pt.rosterTableHeaderCell} ${pt.stickyRight} ${pt.peekHeader}`,children:T.jsxs("select",{className:pt.peekSelector,value:G||"",onChange:C=>ee(C.target.value||null),children:[T.jsx("option",{value:"",children:"Peek Position..."}),ie.map(C=>T.jsxs("option",{value:C.name,children:[C.emoji," ",C.name]},C.name))]})});return n==="all"?T.jsx("thead",{children:T.jsxs("tr",{children:[A(),e==="user"?t.map(C=>{const P=C.id===(i==null?void 0:i.email);return T.jsx("th",{className:`${pt.rosterTableHeaderCell} ${C.id&&a.includes(C.id)?pt.highlightedHeader:""} ${P?pt.isMe:""}`,children:T.jsx(rR,{displayName:C.name,isMe:P})},C.id)}):((l==null?void 0:l.positions)||[]).map(C=>T.jsx("th",{className:`${pt.rosterTableHeaderCell} ${pt.clickableHeader}`,onClick:()=>f(`/app/roster/${c}/${C.name}`),children:T.jsxs("div",{className:pt.allViewPositionHeader,children:[T.jsx("span",{children:C.emoji}),T.jsx("span",{className:pt.allViewPositionName,children:C.name})]})},C.name))]})}):n==="absence"?T.jsx("thead",{children:T.jsxs("tr",{children:[A(),ne.map(C=>T.jsx("th",{className:`${pt.rosterTableHeaderCell} ${C.email&&a.includes(C.email)?pt.highlightedHeader:""}`,children:C.name},C.email)),T.jsx("th",{className:`${pt.genderDividerCell}`}),I()]})}):T.jsx("thead",{children:T.jsxs("tr",{children:[A(),v!=null&&v.isCustom?(v.customLabels||[]).map((C,P)=>{var O;return T.jsxs("th",{className:`${pt.rosterTableHeaderCell}`,children:[T.jsx("input",{type:"text",className:pt.headerInput,value:C,placeholder:"New Heading...",readOnly:!(i!=null&&i.isAdmin),onChange:L=>S(P,L.target.value)}),(i==null?void 0:i.isAdmin)&&T.jsxs("div",{className:pt.headerActions,children:[T.jsx("button",{className:pt.headerActionBtn,onClick:()=>w(P,"left"),disabled:P===0,title:"Move Left",children:T.jsx(mk,{size:12})}),T.jsx("button",{className:`${pt.headerActionBtn} ${pt.removeHeaderBtn}`,onClick:()=>D(P),title:"Remove Column",children:T.jsx(nv,{size:12})}),T.jsx("button",{className:pt.headerActionBtn,onClick:()=>w(P,"right"),disabled:P===(((O=v.customLabels)==null?void 0:O.length)||0)-1,title:"Move Right",children:T.jsx(gk,{size:12})})]})]},`custom-${P}`)}):M.map((C,P)=>T.jsxs(V.Fragment,{children:[B===P&&T.jsx("th",{className:`${pt.genderDividerCell}`}),T.jsxs("th",{className:`${pt.rosterTableHeaderCell} ${pt.clickableHeader} ${C.email&&a.includes(C.email)?pt.highlightedHeader:""}`,onClick:()=>C.email&&F(C.email),title:"Click to hide member",children:[C.name,(v==null?void 0:v.sortByGender)&&T.jsxs("span",{className:pt.genderLabel,children:["(",C.gender==="Male"?"M":C.gender==="Female"?"F":"?",")"]})]})]},C.email)),(v==null?void 0:v.isCustom)&&(i==null?void 0:i.isAdmin)&&T.jsx("th",{className:`${pt.rosterTableHeaderCell}`,children:T.jsx("button",{className:pt.addColumnBtn,onClick:z,title:"Add Column",children:T.jsx(lh,{size:16})})}),T.jsx("th",{className:`${pt.genderDividerCell}`}),I()]})})}),U9="_rosterCell_wdymz_1",z9="_clickable_wdymz_6",B9="_disabled_wdymz_15",H9="_focused_wdymz_21",F9="_highlightedCell_wdymz_27",q9="_absentStrike_wdymz_31",G9="_absentCell_wdymz_36",$9="_absenceInputContainer_wdymz_40",K9="_absenceReasonInput_wdymz_59",Y9="_removeAbsenceBtn_wdymz_71",Q9="_absenceRosterCell_wdymz_92",mr={rosterCell:U9,clickable:z9,disabled:B9,focused:H9,highlightedCell:F9,absentStrike:q9,absentCell:G9,absenceInputContainer:$9,absenceReasonInput:K9,removeAbsenceBtn:Y9,absenceRosterCell:Q9},uc=V.memo(({type:n,isFocused:e,onFocus:t,absent:i,absenceReason:a,isAssignedOnClosestDate:l,content:c,onClick:f,handleAbsenceReasonChange:m,disabled:p})=>{const y=[mr.rosterCell,e?mr.focused:"",l?mr.highlightedCell:""];return n==="all-user"?T.jsx("td",{className:[...y,mr.clickable,i?mr.absentStrike:""].filter(Boolean).join(" "),tabIndex:0,onClick:f,onFocus:t,children:i?T.jsx("span",{title:a,children:""}):c}):n==="all-position"?T.jsx("td",{className:y.filter(Boolean).join(" "),tabIndex:0,onFocus:t,children:c}):n==="roster-custom"?T.jsx("td",{className:[...y,mr.clickable].filter(Boolean).join(" "),onClick:f,tabIndex:0,onFocus:t,children:c}):n==="roster-user"?T.jsx("td",{className:[...y,p?mr.disabled:mr.clickable,i?mr.absentStrike:""].filter(Boolean).join(" "),onClick:f,tabIndex:0,onFocus:t,children:i?T.jsx("span",{title:a,children:""}):c}):n==="absence"?T.jsx("td",{className:[...y,mr.clickable,mr.absenceRosterCell,i?mr.absentCell:""].filter(Boolean).join(" "),onClick:f,tabIndex:0,onFocus:t,title:a,children:i?T.jsxs("div",{className:mr.absenceInputContainer,children:[T.jsx("input",{type:"text",className:mr.absenceReasonInput,value:a,placeholder:"Reason...",maxLength:20,autoFocus:e,onClick:v=>v.stopPropagation(),onChange:v=>m==null?void 0:m(v.target.value)}),T.jsx("button",{className:mr.removeAbsenceBtn,onClick:v=>{v.stopPropagation(),f==null||f()},title:"Mark as present",children:T.jsx(nv,{size:14})})]}):""}):null}),X9="_stickyCol_14jt9_1",W9="_dateCell_14jt9_11",J9="_clickable_14jt9_19",Z9="_dateCellContent_14jt9_31",e5="_specialEventDot_14jt9_39",t5="_rosterTodayDot_14jt9_50",n5="_pastDate_14jt9_61",r5="_noData_14jt9_65",i5="_closestNextDateRow_14jt9_77",s5="_todayDate_14jt9_78",a5="_peekCell_14jt9_89",o5="_genderDividerCell_14jt9_102",l5="_rosterCell_14jt9_111",u5="_stickyRight_14jt9_126",In={stickyCol:X9,dateCell:W9,clickable:J9,dateCellContent:Z9,specialEventDot:e5,rosterTodayDot:t5,pastDate:n5,noData:r5,closestNextDateRow:i5,todayDate:s5,peekCell:a5,genderDividerCell:o5,rosterCell:l5,stickyRight:u5},ay=V.memo(({viewType:n,dateString:e,rowIndex:t,rowClass:i,isToday:a,hasData:l,eventName:c,closestNextDate:f,onDateClick:m,focusedCell:p,setFocusedCell:y,rosterAllViewMode:v,allViewColumns:S,assignedOnClosestDate:w,currentTeamData:D,getAllViewUserCellContent:z,getAllViewPositionCellContent:M,getAssignmentsForIdentifier:B,navigate:F,teamName:G,currentPosition:ee,handleCellClick:ie,getCellContent:ne,sortedUsers:A,genderDividerIndex:I,isCellDisabled:C,isUserAbsent:P,getAbsenceReason:O,getPeekAssignedUsers:L,allTeamUsers:x,handleAbsenceClick:ge,handleAbsenceReasonChange:Te})=>{const H=[i==="past-date"?In.pastDate:"",i==="today-date"?In.todayDate:"",i==="future-date"?In.futureDate:"",l?"":In.noData,c?In.specialEventRow:"",e===f?In.closestNextDateRow:""].filter(Boolean).join(" "),ae=()=>T.jsx("td",{className:`${In.dateCell} ${In.stickyCol} ${l?In.clickable:""}`,onClick:()=>m(e),title:c,children:T.jsxs("div",{className:In.dateCellContent,children:[c&&T.jsx("span",{className:In.specialEventDot}),a&&T.jsx("span",{className:In.rosterTodayDot,title:"Today"}),new Date(e.replace(/-/g,"/")).toLocaleDateString()]})}),ye=()=>T.jsx("td",{className:`${In.rosterCell} ${In.peekCell} ${In.stickyRight}`,children:L(e).join(", ")||""});return n==="all"?T.jsxs("tr",{className:H,children:[ae(),v==="user"?S.map((pe,Ee)=>T.jsx(uc,{type:"all-user",dateString:e,rowIndex:t,colIndex:Ee,isFocused:(p==null?void 0:p.row)===t&&(p==null?void 0:p.col)===Ee&&(p==null?void 0:p.table)==="all",onFocus:()=>y({row:t,col:Ee,table:"all"}),absent:pe.id?P(e,pe.id):!1,absenceReason:pe.id?O(e,pe.id):"",isAssignedOnClosestDate:e===f&&pe.id!==void 0&&w.includes(pe.id),content:pe.id?z(e,pe.id):null,onClick:()=>{const j=B(e,pe.id);j.length>0&&F(`/app/roster/${G}/${j[0]}`)}},pe.id)):((D==null?void 0:D.positions)||[]).map((pe,Ee)=>T.jsx(uc,{type:"all-position",dateString:e,rowIndex:t,colIndex:Ee,isFocused:(p==null?void 0:p.row)===t&&(p==null?void 0:p.col)===Ee&&(p==null?void 0:p.table)==="all",onFocus:()=>y({row:t,col:Ee,table:"all"}),content:M(e,pe.name)},pe.name))]}):n==="absence"?T.jsxs("tr",{className:H,children:[ae(),x.map((pe,Ee)=>T.jsx(uc,{type:"absence",dateString:e,rowIndex:t,colIndex:Ee,isFocused:(p==null?void 0:p.row)===t&&(p==null?void 0:p.col)===Ee&&(p==null?void 0:p.table)==="absence",onFocus:()=>y({row:t,col:Ee,table:"absence"}),absent:pe.email?P(e,pe.email):!1,absenceReason:pe.email?O(e,pe.email):"",isAssignedOnClosestDate:!!(e===f&&pe.email&&w.includes(pe.email)),onClick:()=>{pe.email&&ge(e,pe.email,t,Ee)},handleAbsenceReasonChange:j=>{pe.email&&Te(e,pe.email,j)}},pe.email)),T.jsx("td",{className:In.genderDividerCell}),ye()]}):T.jsxs("tr",{className:H,children:[ae(),ee!=null&&ee.isCustom?(ee.customLabels||[]).map((pe,Ee)=>T.jsx(uc,{type:"roster-custom",dateString:e,rowIndex:t,colIndex:Ee,isFocused:(p==null?void 0:p.row)===t&&(p==null?void 0:p.col)===Ee&&(p==null?void 0:p.table)==="roster",onFocus:()=>y({row:t,col:Ee,table:"roster"}),content:pe&&ne(e,pe),onClick:()=>{pe&&ie(e,pe,t,Ee)}},`custom-cell-${Ee}`)):A.map((pe,Ee)=>T.jsxs(V.Fragment,{children:[I===Ee&&T.jsx("td",{className:In.genderDividerCell}),T.jsx(uc,{type:"roster-user",dateString:e,rowIndex:t,colIndex:Ee,isFocused:(p==null?void 0:p.row)===t&&(p==null?void 0:p.col)===Ee&&(p==null?void 0:p.table)==="roster",onFocus:()=>y({row:t,col:Ee,table:"roster"}),disabled:pe.email?C(e,pe.email):!1,absent:pe.email?P(e,pe.email):!1,absenceReason:pe.email?O(e,pe.email):"",isAssignedOnClosestDate:!!(e===f&&pe.email&&w.includes(pe.email)),content:pe.email?ne(e,pe.email):null,onClick:()=>{pe.email&&!C(e,pe.email)&&ie(e,pe.email,t,Ee)}})]},pe.email)),(ee==null?void 0:ee.isCustom)&&T.jsx("td",{className:`${In.rosterCell} ${In.disabled}`}),T.jsx("td",{className:In.genderDividerCell}),ye()]})}),c5="_topControls_edhcc_1",h5="_topControlsLeft_edhcc_14",f5="_viewToggleBar_edhcc_27",d5="_hiddenMembersBar_edhcc_38",m5="_hiddenMembersLabel_edhcc_50",p5="_hiddenMembersList_edhcc_58",g5="_toggleButtonGap_edhcc_64",y5="_unhideButton_edhcc_68",Es={topControls:c5,topControlsLeft:h5,viewToggleBar:f5,hiddenMembersBar:d5,hiddenMembersLabel:m5,hiddenMembersList:p5,toggleButtonGap:g5,unhideButton:y5},oy=({isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,allUsers:a,onToggleVisibility:l})=>{const c=or(),f=!e&&i.length>0;return!f&&!n?null:T.jsx("div",{className:Es.topControls,children:T.jsxs("div",{className:Es.topControlsLeft,children:[n&&T.jsxs("div",{className:Es.viewToggleBar,children:[T.jsxs(pr,{variant:t==="user"?"primary":"secondary",size:"small",onClick:()=>c(sA("user")),className:Es.toggleButtonGap,children:[T.jsx(Lk,{size:18})," ",T.jsx("span",{children:"User View"})]}),T.jsxs(pr,{variant:t==="position"?"primary":"secondary",size:"small",onClick:()=>c(sA("position")),className:Es.toggleButtonGap,children:[T.jsx(Ak,{size:18})," ",T.jsx("span",{children:"Position View"})]})]}),f&&T.jsxs("div",{className:Es.hiddenMembersBar,children:[T.jsx("span",{className:Es.hiddenMembersLabel,children:"Hidden Members:"}),T.jsx("div",{className:Es.hiddenMembersList,children:i.map(m=>{const p=a.find(y=>y.email===m);return T.jsxs(pr,{variant:"secondary",size:"small",onClick:()=>l(m),className:Es.unhideButton,children:[(p==null?void 0:p.name)||m," ",T.jsx(lh,{size:14})]},m)})})]})]})})},_5="_rosterTableContainer_xj9jl_1",v5="_rosterTable_xj9jl_1",E5="_rosterTableLoading_xj9jl_44",T5="_rosterTableError_xj9jl_45",b5="_rosterTableWrapper_xj9jl_52",S5="_rosterSection_xj9jl_60",A5="_loadMoreFooter_xj9jl_64",w5="_loadNextYearBtn_xj9jl_70",C5="_assignedPositions_xj9jl_88",Ft={rosterTableContainer:_5,rosterTable:v5,rosterTableLoading:E5,rosterTableError:T5,rosterTableWrapper:b5,rosterSection:S5,loadMoreFooter:A5,loadNextYearBtn:w5,assignedPositions:C5},R5=()=>{const n=or(),e=No(),{teamName:t,positionName:i}=Gd(),{userData:a}=We(oe=>oe.auth),{users:l,allTeamUsers:c,rosterDates:f,currentTeamData:m,loadingUsers:p,loadingTeam:y,loadingAllTeamUsers:v,error:S}=We(oe=>oe.rosterView),{entries:w,dirtyEntries:D,saving:z,loading:M,initialLoad:B,error:F}=We(oe=>oe.roster),{positions:G,isDirty:ee}=We(oe=>oe.positions),{teams:ie}=We(oe=>oe.teams),{hiddenUsers:ne,rosterAllViewMode:A}=We(oe=>oe.ui),[I,C]=V.useState(null),[P,O]=V.useState(null),L=Object.keys(D).length>0,x=L||ee,ge=i==="Absence",Te=i==="All",H=V.useMemo(()=>G.find(oe=>oe.name===i),[G,i]),ae=V.useMemo(()=>m?m.positions.filter(oe=>oe.name!==i):[],[m,i]),ye=V.useMemo(()=>{var oe;return!t||!i?[]:((oe=ne[t])==null?void 0:oe[i])||[]},[ne,t,i]),pe=V.useMemo(()=>c.filter(oe=>{var Ce;return!oe.isActive||!t?!1:(((Ce=oe.teamPositions)==null?void 0:Ce[t])||[]).length>0}),[c,t]),Ee=V.useMemo(()=>{const oe=pe.map(de=>({id:de.email||"",name:de.name||"",isUser:!0,gender:de.gender}));if(!m)return oe;const ve=m.positions.map(de=>de.name),Ce=Array.from(new Set(G.filter(de=>ve.includes(de.name)&&de.isCustom).flatMap(de=>de.customLabels||[]).map(de=>de.trim()).filter(de=>de!==""))).map(de=>({id:de,name:de,isUser:!1}));return[...oe,...Ce]},[pe,m,G]),j=V.useMemo(()=>{const oe=l.filter(ve=>ve.email&&!ye.includes(ve.email)&&ve.isActive);return H!=null&&H.sortByGender?oe.sort((ve,Ce)=>ve.gender===Ce.gender?(ve.name||"").localeCompare(Ce.name||""):ve.gender==="Male"?-1:Ce.gender==="Male"?1:(ve.gender||"").localeCompare(Ce.gender||"")):oe},[l,H,ye]),re=V.useMemo(()=>{if(!(H!=null&&H.sortByGender)||j.length===0)return-1;const oe=j.findIndex(ve=>ve.gender==="Female");return oe>0&&oe<j.length?oe:-1},[H,j]),_e=oe=>{!t||!i||n(qk({teamName:t,positionName:i,userEmail:oe}))},we=()=>{n(GU())},ue=()=>{n($U())},Se=()=>{n(KU())},xe=oe=>{ze(oe)&&e(`/app/dashboard?date=${oe}`)},ze=V.useCallback(oe=>{const ve=oe.split("T")[0],Ce=D[ve]||w[ve];return Ce?Object.values(Ce.teams).some(de=>Object.values(de).some(De=>De.length>0)):!1},[w,D]),Be=V.useCallback(oe=>{if(!P||!t)return[];const ve=oe.split("T")[0],Ce=D[ve]||w[ve];return!Ce||!Ce.teams[t]?[]:Object.entries(Ce.teams[t]).filter(([,de])=>de.includes(P)).map(([de])=>{const De=c.find(Pe=>Pe.email===de);return(De==null?void 0:De.name)||de})},[P,t,D,w,c]);V.useEffect(()=>{i&&t&&!["Absence","All"].includes(i)&&n(cd({teamName:t,positionName:i}))},[i,t,n]),V.useEffect(()=>{t&&(n(hd(t)),n(ud(t)))},[t,n]);const st=V.useCallback((oe,ve)=>{const Ce=oe,de=D[Ce]||w[Ce];return!!(de&&de.absence&&de.absence[ve])},[D,w]),St=V.useCallback((oe,ve)=>{var De,Pe;const Ce=oe,de=D[Ce]||w[Ce];return((Pe=(De=de==null?void 0:de.absence)==null?void 0:De[ve])==null?void 0:Pe.reason)||""},[D,w]),Ye=V.useCallback((oe,ve)=>{if(!t||!i||i==="Absence")return!1;if(st(oe,ve))return!0;const Ce=oe,de=D[Ce]||w[Ce],De=ie.find(mn=>mn.name===t),Pe=(De==null?void 0:De.maxConflict)||1;if(!de||!de.teams[t]||!de.teams[t][ve])return!1;const Kt=de.teams[t][ve],lt=G.filter(mn=>mn.parentId===i),At=[i,...lt.map(mn=>mn.name)];return Kt.some(mn=>At.includes(mn))?!1:Kt.length>=Pe},[t,i,st,D,w,ie,G]),Et=V.useCallback((oe,ve,Ce,de)=>{if(!t||!i||i==="Absence"||Ye(oe,ve)){C({row:Ce,col:de,table:"roster"});return}C({row:Ce,col:de,table:"roster"});const De=ie.find(At=>At.name===t),Pe=(De==null?void 0:De.maxConflict)||1,Kt=G.filter(At=>At.parentId===i),lt=[i,...Kt.map(At=>At.name)];n(k3({date:oe,teamName:t,userIdentifier:ve,positionGroupNames:lt,maxConflict:Pe}))},[n,t,i,Ye,ie,G]),Ot=V.useCallback((oe,ve,Ce,de)=>{C({row:Ce,col:de,table:"absence"});const De=st(oe,ve);if(!De){const Pe=oe,Kt=D[Pe]||w[Pe],lt=[];if(Kt&&Object.entries(Kt.teams).forEach(([At,Tt])=>{Tt[ve]&&Tt[ve].length>0&&lt.push(`${At}: ${Tt[ve].join(", ")}`)}),lt.length>0){n(Na({title:"Clear Existing Assignments?",message:`User is already assigned to:

${lt.join(`
`)}

Marking them as absent will remove these assignments. Continue?`,confirmText:"Mark Absent",onConfirm:()=>{n(ny({date:oe,userIdentifier:ve,isAbsent:!0}))}}));return}}n(ny({date:oe,userIdentifier:ve,isAbsent:!De}))},[n,st,D,w]),Qn=V.useCallback((oe,ve,Ce)=>{n(ny({date:oe,userIdentifier:ve,reason:Ce,isAbsent:!0}))},[n]),dn=V.useCallback(()=>{L&&n(Cc(D)),ee&&n(tv(G))},[n,D,G,L,ee]),lr=()=>{if(!H||!i)return;const oe=H.customLabels||[];n(zf({positionName:i,labels:[...oe,""]}))},Xn=(oe,ve)=>{if(!H||!i)return;const Ce=[...H.customLabels||[]];Ce[oe]=ve,n(zf({positionName:i,labels:Ce}))},Mt=(oe,ve)=>{if(!H||!i)return;const Ce=[...H.customLabels||[]],de=ve==="left"?oe-1:oe+1;if(de<0||de>=Ce.length)return;const De=Ce[oe];Ce[oe]=Ce[de],Ce[de]=De,n(zf({positionName:i,labels:Ce}))},Jt=oe=>{!H||!i||n(Na({title:"Remove Column",message:"Are you sure you want to remove this column?",confirmText:"Remove",onConfirm:()=>{const ve=[...H.customLabels||[]];ve.splice(oe,1),n(zf({positionName:i,labels:ve}))}}))},Pt=V.useCallback(()=>{L&&n(JC()),ee&&(n(tk()),n(kl())),C(null)},[n,L,ee]),ur=(oe,ve)=>{const Ce=oe.split("T")[0],de=D[Ce]||w[Ce];if(!de||!t||!de.teams[t])return[];let De=de.teams[t][ve]||[];if(De.length===0){const Pe=ve.trim(),Kt=Object.keys(de.teams[t]).find(lt=>lt.trim()===Pe);Kt&&(De=de.teams[t][Kt])}return De},di=(oe,ve)=>{const Ce=ur(oe,ve);return Ce.length===0?"":T.jsx("div",{className:Ft.assignedPositions,children:Ce.map(de=>{const De=G.find(Pe=>Pe.name===de);return T.jsx("span",{className:Ft.posEmoji,onClick:Pe=>{Pe.stopPropagation(),e(`/app/roster/${t}/${de}`)},title:de,style:{cursor:"pointer"},children:(De==null?void 0:De.emoji)||""},de)})})},qt=(oe,ve)=>{const Ce=oe.split("T")[0],de=D[Ce]||w[Ce];if(!de||!t)return"";const De=Object.entries(de.teams[t]||{}).filter(([,Pe])=>Pe.includes(ve));return T.jsx("div",{className:Ft.assignedUsersText,children:De.map(([Pe],Kt)=>{const lt=pe.find(mn=>mn.email===Pe),At=Pe===(a==null?void 0:a.email),Tt=lt?lt.name:Pe;return T.jsxs(V.Fragment,{children:[T.jsx(rR,{displayName:Tt,isMe:At}),Kt<De.length-1?", ":""]},Pe)})})},cr=(oe,ve)=>{var Kt;const Ce=oe,de=D[Ce]||w[Ce];if(!de||!t)return"";const De=((Kt=de.teams[t])==null?void 0:Kt[ve])||[],Pe=[];return Object.entries(de.teams).forEach(([lt,At])=>{lt!==t&&At[ve]&&Pe.push({team:lt,positions:At[ve]})}),De.length===0&&Pe.length===0?"":T.jsxs("div",{className:Ft.assignedPositions,children:[De.map(lt=>{const At=G.find(Tt=>Tt.name===lt);return T.jsx("span",{title:`${t}: ${lt}`,className:Ft.posEmoji,children:(At==null?void 0:At.emoji)||""},lt)}),Pe.map(lt=>lt.positions.map(At=>{const Tt=G.find(mn=>mn.name===At);return T.jsx("span",{title:`${lt.team}: ${At}`,className:`${Ft.posEmoji} ${Ft.otherTeamEmoji}`,children:(Tt==null?void 0:Tt.emoji)||""},`${lt.team}-${At}`)}))]})};V.useEffect(()=>{const oe=ve=>{const Ce=ve.target;if(Ce.tagName==="INPUT"||Ce.tagName==="TEXTAREA"||!I)return;const{row:de,col:De,table:Pe}=I,Kt=f;let lt=[];switch(Pe==="roster"?lt=j:Pe==="absence"?lt=c:Pe==="all"&&(lt=A==="user"?Ee:(m==null?void 0:m.positions)||[]),ve.key){case"ArrowUp":ve.preventDefault(),de>0&&C({row:de-1,col:De,table:Pe});break;case"ArrowDown":ve.preventDefault(),de<Kt.length-1&&C({row:de+1,col:De,table:Pe});break;case"ArrowLeft":ve.preventDefault(),De>0&&C({row:de,col:De-1,table:Pe});break;case"ArrowRight":ve.preventDefault(),De<lt.length-1&&C({row:de,col:De+1,table:Pe});break;case"Tab":ve.preventDefault(),ve.shiftKey?de>0&&C({row:de-1,col:De,table:Pe}):de<Kt.length-1&&C({row:de+1,col:De,table:Pe});break;case" ":{if(ve.preventDefault(),Pe==="all")break;const At=f[de],Tt=lt[De];Tt!=null&&Tt.email&&(Pe==="roster"?Et(At,Tt.email,de,De):Ot(At,Tt.email,de,De));break}case"Enter":x&&(ve.preventDefault(),dn());break;case"Escape":x&&(ve.preventDefault(),Pt());break}};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[I,f,j,c,x,Et,Ot,dn,Pt,A,Ee,m==null?void 0:m.positions]);const Yr=V.useMemo(()=>{const oe=Ul();return f.length===0?!1:f[0]<oe},[f]),Wn=V.useMemo(()=>{const oe=Ul();return f.find(ve=>ve.split("T")[0]>=oe)},[f]),Zt=V.useMemo(()=>{if(!Wn||!t||!i)return[];const oe=Wn.split("T")[0],ve=D[oe]||w[oe];if(!ve||!ve.teams[t])return[];const Ce=G.filter(De=>De.parentId===i),de=[i,...Ce.map(De=>De.name)];return Object.entries(ve.teams[t]).filter(([,De])=>De.some(Pe=>de.includes(Pe))).map(([De])=>De)},[Wn,t,i,D,w,G]),bn=V.useCallback(oe=>{const ve=Ul(),Ce=oe.split("T")[0];return Ce<ve?"past-date":Ce===ve?"today-date":"future-date"},[]);if(p||y||v||M&&!B)return T.jsx(lu,{});const xi=S||F;return xi?T.jsxs("div",{className:Ft.rosterTableError,children:["Error: ",xi]}):Te?T.jsxs("div",{className:Ft.rosterTableWrapper,children:[T.jsx(oy,{isAllView:Te,isAbsenceView:ge,rosterAllViewMode:A,hiddenUserList:ye,allUsers:l,onToggleVisibility:_e}),T.jsxs("div",{className:Ft.rosterSection,children:[T.jsx("div",{className:Ft.rosterTableContainer,children:T.jsxs("table",{className:Ft.rosterTable,children:[T.jsx(sy,{viewType:"all",rosterAllViewMode:A,allViewColumns:Ee,userData:a,assignedOnClosestDate:Zt,currentTeamData:m,teamName:t,navigate:e,hasPastDates:Yr,onLoadPrevious:we,onResetDates:ue,peekPositionName:P,setPeekPositionName:O,peekOptions:ae,sortedUsers:[],genderDividerIndex:-1,onToggleVisibility:()=>{},handleUpdateCustomLabel:()=>{},handleMoveCustomLabel:()=>{},handleRemoveCustomLabel:()=>{},handleAddCustomLabel:()=>{},allTeamUsers:[]}),T.jsx("tbody",{children:f.map((oe,ve)=>{var Ce;return T.jsx(ay,{viewType:"all",dateString:oe,rowIndex:ve,rowClass:bn(oe),isToday:bn(oe)==="today-date",hasData:ze(oe),eventName:(Ce=D[oe.split("T")[0]]||w[oe.split("T")[0]])==null?void 0:Ce.eventName,closestNextDate:Wn,onDateClick:xe,focusedCell:I,setFocusedCell:C,rosterAllViewMode:A,allViewColumns:Ee,assignedOnClosestDate:Zt,currentTeamData:m,getAllViewUserCellContent:di,getAllViewPositionCellContent:qt,getAssignmentsForIdentifier:ur,navigate:e,teamName:t,sortedUsers:[],genderDividerIndex:-1,isCellDisabled:()=>!1,isUserAbsent:st,getAbsenceReason:St,getPeekAssignedUsers:()=>[],handleCellClick:()=>{},getCellContent:()=>null,allTeamUsers:[],handleAbsenceClick:()=>{},handleAbsenceReasonChange:()=>{}},oe)})})]})}),T.jsx("div",{className:Ft.loadMoreFooter,children:T.jsx("button",{className:Ft.loadNextYearBtn,onClick:Se,children:"Load Next Year "})})]})]}):!ge&&!(H!=null&&H.isCustom)&&j.length===0?T.jsxs("div",{className:Ft.rosterTableWrapper,children:[T.jsx(oy,{isAllView:Te,isAbsenceView:ge,rosterAllViewMode:A,hiddenUserList:ye,allUsers:l,onToggleVisibility:_e}),T.jsx("div",{className:Ft.rosterTableLoading,children:"No users found for this position."})]}):T.jsxs("div",{className:Ft.rosterTableWrapper,children:[T.jsx(oy,{isAllView:Te,isAbsenceView:ge,rosterAllViewMode:A,hiddenUserList:ye,allUsers:l,onToggleVisibility:_e}),ge?T.jsxs("div",{className:Ft.rosterSection,children:[T.jsx("div",{className:Ft.rosterTableContainer,children:T.jsxs("table",{className:`${Ft.rosterTable} ${Ft.absenceTable}`,children:[T.jsx(sy,{viewType:"absence",allTeamUsers:c,userData:a,assignedOnClosestDate:Zt,currentTeamData:m,teamName:t,navigate:e,hasPastDates:Yr,onLoadPrevious:we,onResetDates:ue,peekPositionName:P,setPeekPositionName:O,peekOptions:ae,allViewColumns:[],sortedUsers:[],genderDividerIndex:-1,onToggleVisibility:()=>{},handleUpdateCustomLabel:()=>{},handleMoveCustomLabel:()=>{},handleRemoveCustomLabel:()=>{},handleAddCustomLabel:()=>{}}),T.jsx("tbody",{children:f.map((oe,ve)=>{var Ce;return T.jsx(ay,{viewType:"absence",dateString:oe,rowIndex:ve,rowClass:bn(oe),isToday:bn(oe)==="today-date",hasData:ze(oe),eventName:(Ce=D[oe.split("T")[0]]||w[oe.split("T")[0]])==null?void 0:Ce.eventName,closestNextDate:Wn,onDateClick:xe,focusedCell:I,setFocusedCell:C,allTeamUsers:c,handleAbsenceClick:Ot,handleAbsenceReasonChange:Qn,isUserAbsent:st,getAbsenceReason:St,getPeekAssignedUsers:Be,allViewColumns:[],assignedOnClosestDate:Zt,currentTeamData:m,getAllViewUserCellContent:()=>null,getAllViewPositionCellContent:()=>null,getAssignmentsForIdentifier:()=>[],navigate:e,teamName:t,sortedUsers:[],genderDividerIndex:-1,handleCellClick:()=>{},getCellContent:()=>null,isCellDisabled:()=>!1},oe)})})]})}),T.jsx("div",{className:Ft.loadMoreFooter,children:T.jsx("button",{className:Ft.loadNextYearBtn,onClick:Se,children:"Load Next Year "})})]}):T.jsxs("div",{className:Ft.rosterSection,children:[T.jsx("div",{className:Ft.rosterTableContainer,children:T.jsxs("table",{className:Ft.rosterTable,children:[T.jsx(sy,{viewType:"roster",userData:a,assignedOnClosestDate:Zt,currentTeamData:m,teamName:t,navigate:e,hasPastDates:Yr,onLoadPrevious:we,onResetDates:ue,currentPosition:H,handleUpdateCustomLabel:Xn,handleMoveCustomLabel:Mt,handleRemoveCustomLabel:Jt,handleAddCustomLabel:lr,sortedUsers:j,genderDividerIndex:re,onToggleVisibility:_e,peekPositionName:P,setPeekPositionName:O,peekOptions:ae,allViewColumns:[],allTeamUsers:[]}),T.jsx("tbody",{children:f.map((oe,ve)=>{var Ce;return T.jsx(ay,{viewType:"roster",dateString:oe,rowIndex:ve,rowClass:bn(oe),isToday:bn(oe)==="today-date",hasData:ze(oe),eventName:(Ce=D[oe.split("T")[0]]||w[oe.split("T")[0]])==null?void 0:Ce.eventName,closestNextDate:Wn,onDateClick:xe,focusedCell:I,setFocusedCell:C,currentPosition:H,handleCellClick:Et,getCellContent:cr,sortedUsers:j,genderDividerIndex:re,isCellDisabled:Ye,isUserAbsent:st,getAbsenceReason:St,getPeekAssignedUsers:Be,allViewColumns:[],assignedOnClosestDate:Zt,currentTeamData:m,getAllViewUserCellContent:()=>null,getAllViewPositionCellContent:()=>null,getAssignmentsForIdentifier:()=>[],navigate:e,teamName:t,allTeamUsers:[],handleAbsenceClick:()=>{},handleAbsenceReasonChange:()=>{}},oe)})})]})}),T.jsx("div",{className:Ft.loadMoreFooter,children:T.jsx("button",{className:Ft.loadNextYearBtn,onClick:Se,children:"Load Next Year "})})]}),x&&T.jsx(uu,{onSave:dn,onCancel:Pt,isSaving:z,saveText:"Save Roster"})]})},I5="_rosterPage_z6eme_1",x5={rosterPage:I5},N5=()=>T.jsx("div",{className:x5.rosterPage,children:T.jsx(R5,{})}),D5="_appTableContainer_1wf07_1",O5="_appTable_1wf07_1",M5="_colorPickerGroup_1wf07_50",P5="_stickyCol_1wf07_60",Hc={appTableContainer:D5,appTable:O5,colorPickerGroup:M5,stickyCol:P5},V5=({text:n,textAlign:e="left",width:t,minWidth:i})=>T.jsx("th",{className:Hc.stickyCol,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:i?`${i}px`:"auto"},children:n}),cn=({isSticky:n=!1,textAlign:e="left",className:t,children:i})=>T.jsx("td",{style:{textAlign:e,display:e==="center"?"table-cell":void 0},className:`${t||""} ${n?Hc.stickyCol:""}
`,children:T.jsx("div",{style:{display:"flex",justifyContent:e==="center"?"center":e==="right"?"flex-end":"flex-start",alignItems:"center",gap:"8px",height:"100%"},children:i})}),ui=({name:n,value:e,placeholder:t,type:i="text",isSticky:a,isReadOnly:l=!1,isChild:c=!1,onChange:f})=>T.jsxs(cn,{isSticky:a,children:[c&&T.jsx(BC,{}),T.jsx("input",{name:n,className:As.formInput,type:i,placeholder:t,value:e,onChange:f,readOnly:l})]}),iR=({name:n,value:e,placeholder:t,onChange:i})=>T.jsxs(cn,{className:Hc.colorPickerGroup,children:[T.jsx("input",{name:n,type:"color",className:As.colorInput,value:e||"#FFFFFF",onChange:i}),T.jsx("input",{name:n,className:As.formInput,value:e,placeholder:t,onChange:i})]}),sv=({headers:n,children:e})=>T.jsx("div",{className:Hc.appTableContainer,children:T.jsxs("table",{className:Hc.appTable,children:[T.jsx("thead",{children:T.jsx("tr",{children:n.map((t,i)=>T.jsx(V5,{...t},i))})}),T.jsx("tbody",{children:e})]})}),L5=({position:n,index:e,onUpdate:t,onMove:i,onDelete:a,onAddChild:l,isFirst:c,isLast:f})=>T.jsxs("tr",{children:[T.jsx(ui,{name:`name-${e}`,value:n.name,onChange:m=>t(e,"name",m.target.value),isSticky:!0}),T.jsx(cn,{textAlign:"center",children:n.parentId?T.jsx(BC,{}):T.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[T.jsx(pr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>i(e,"up"),disabled:c,children:""}),T.jsx(pr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>i(e,"down"),disabled:f,children:""})]})}),T.jsx(ui,{name:`emoji-${e}`,value:n.emoji,onChange:m=>t(e,"emoji",m.target.value)}),T.jsx(iR,{name:`colour-${e}`,value:n.colour,onChange:m=>t(e,"colour",m.target.value)}),T.jsx(cn,{textAlign:"center",children:T.jsx(Dr,{colour:n.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.sortByGender,onClick:()=>t(e,"sortByGender",!n.sortByGender),isDisabled:n.isCustom,children:n.sortByGender?"YES":"NO"})}),T.jsx(cn,{textAlign:"center",children:T.jsx(Dr,{colour:n.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.isCustom,onClick:()=>t(e,"isCustom",!n.isCustom),children:n.isCustom?"YES":"NO"})}),T.jsx(cn,{textAlign:"center",children:!n.parentId&&T.jsxs(pr,{variant:"secondary",size:"small",onClick:()=>l(n.name),title:"Add Child Position",children:[T.jsx(lh,{size:14,style:{marginRight:"4px"}}),"Add"]})}),T.jsx(cn,{textAlign:"center",children:T.jsxs(pr,{variant:"delete",size:"small",onClick:()=>a(e),children:[T.jsx(HC,{size:14,style:{marginRight:"4px"}}),"Delete"]})})]}),j5="_settingsContainer_w7sc3_1",k5="_managementWrapper_w7sc3_13",Bl={settingsContainer:j5,managementWrapper:k5},ly={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},U5=()=>{const n=or(),{positions:e,loading:t}=We(B=>B.positions),[i,a]=V.useState(e),[l,c]=V.useState(ly),[f,m]=V.useState("idle"),p=V.useMemo(()=>{const B=F=>F.map(G=>({name:G.name||"",emoji:G.emoji||"",colour:G.colour||"",parentId:G.parentId||void 0,sortByGender:!!G.sortByGender,isCustom:!!G.isCustom}));return JSON.stringify(B(i))!==JSON.stringify(B(e))},[i,e]);V.useEffect(()=>{a(e)},[e]);const y=(B,F,G)=>{const ee=[...i];ee[B]={...ee[B],[F]:G},a(ee)},v=(B,F)=>{const G=[...i],ee=G[B],ie=ee.parentId,ne=A=>{const I=G[A];if(!I)return{block:[],startIndex:-1,endIndex:-1};const C=[],P=[I],O=new Set;let L=A,x=A,ge=0;for(;ge<P.length;){const H=P[ge++];O.has(H.name)||(O.add(H.name),C.push(H),G.forEach((ae,ye)=>{ae.parentId===H.name&&!O.has(ae.name)&&(P.push(ae),L=Math.min(L,ye),x=Math.max(x,ye))}))}return{block:C,startIndex:L,endIndex:x}};if(ie){const A=G.filter(ge=>ge.parentId===ie),C=A.findIndex(ge=>ge.name===ee.name)+(F==="up"?-1:1);if(C<0||C>=A.length)return;const P=A[C],O=G.indexOf(ee),L=G.indexOf(P);if(O===-1||L===-1)return;const x=[...G];x[O]=P,x[L]=ee,a(x)}else{const A=ne(B),{block:I,startIndex:C,endIndex:P}=A;if(!I||I.length===0)return;if(F==="up"){if(C===0)return;let O=C-1;for(;O>=0&&G[O].parentId;)O--;if(O<0)return;const L=ne(O),{block:x,startIndex:ge}=L;if(!x||x.length===0)return;const Te=[...G.slice(0,ge),...I,...x,...G.slice(P+1)].filter(Boolean);a(Te)}else{if(P===G.length-1)return;let O=P+1;for(;O<G.length&&G[O].parentId;)O++;if(O>=G.length)return;const L=ne(O),{block:x,startIndex:ge}=L;if(!x||x.length===0)return;const Te=[...G.slice(0,C),...x,...I,...G.slice(ge+x.length)].filter(Boolean);a(Te)}}},S=()=>{if(!l.name.trim()||!l.emoji.trim()){n(Na({title:"Missing Information",message:"Please provide both an emoji and a name.",showCancel:!1}));return}a([...i,l]),c(ly)},w=B=>{n(Na({title:"Delete Position",message:"Delete this position? This will remove it from the global list, and any associated child positions.",confirmText:"Delete",onConfirm:()=>{const F=i[B];let G=i.filter((ee,ie)=>ie!==B);F.parentId||(G=G.filter(ee=>ee.parentId!==F.name)),a(G)}}))},D=async()=>{m("saving");try{const B=i.map(F=>{const G={name:F.name||"",emoji:F.emoji||"",colour:F.colour||"",sortByGender:!!F.sortByGender,isCustom:!!F.isCustom,customLabels:F.customLabels||[]};return F.parentId&&(G.parentId=F.parentId),G});await n(tv(B)).unwrap(),m("success"),setTimeout(()=>m("idle"),2e3)}catch(B){console.error("Save Error:",B),n(Na({title:"Save Error",message:"Error saving: "+(B instanceof Error?B.message:"Unknown error"),showCancel:!1})),m("idle")}},z=B=>{a(F=>{const G={...ly,parentId:B},ee=F.findIndex(A=>A.name===B);if(ee===-1)return[...F,G];let ie=ee;for(;ie+1<F.length&&F[ie+1].parentId===B;)ie++;return[...F.slice(0,ie+1),G,...F.slice(ie+1)]})},M=()=>{a(e)};return t?T.jsx(lu,{}):T.jsxs("div",{className:Bl.managementWrapper,children:[T.jsxs(sv,{headers:[{text:"Name",minWidth:80,width:200,textAlign:"center"},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Colour",minWidth:100,textAlign:"center"},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Custom Headings",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[i.map((B,F)=>T.jsx(L5,{position:B,index:F,onUpdate:y,onMove:v,onDelete:w,onAddChild:z,isFirst:F===0,isLast:F===i.length-1},`${B.emoji}-${F}`)),T.jsxs("tr",{className:"pos-row-new",children:[T.jsx(ui,{name:"new-name",value:l.name,placeholder:"Position Name",onChange:B=>c({...l,name:B.target.value}),isSticky:!0}),T.jsx(cn,{textAlign:"center",children:""}),T.jsx(ui,{name:"new-emoji",value:l.emoji,placeholder:"",onChange:B=>c({...l,emoji:B.target.value})}),T.jsx(iR,{name:"new-colour",value:l.colour,placeholder:"#FFFFFF",onChange:B=>c({...l,colour:B.target.value})}),T.jsx(cn,{textAlign:"center",children:T.jsx(Dr,{colour:l.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:l.sortByGender,onClick:()=>c({...l,sortByGender:!l.sortByGender}),isDisabled:l.isCustom,children:l.sortByGender?"YES":"NO"})}),T.jsx(cn,{textAlign:"center",children:T.jsx(Dr,{colour:l.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:l.isCustom,onClick:()=>c({...l,isCustom:!l.isCustom}),children:l.isCustom?"YES":"NO"})}),T.jsx(cn,{textAlign:"center",children:T.jsxs(pr,{onClick:S,disabled:!l.name.trim()||!l.emoji.trim(),children:[T.jsx(lh,{size:16,style:{marginRight:"6px"}}),"Add"]})}),T.jsx(cn,{textAlign:"center",children:""})]})]}),p&&T.jsx(uu,{label:"Unsaved position changes",saveText:"Save Positions",onSave:D,onCancel:M,isSaving:f==="saving"})]})},z5=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],sR=({isOpen:n,onClose:e,team:t,availablePositions:i,onTogglePosition:a,onToggleDay:l,onToggleAllowAbsence:c})=>{var f;return T.jsxs(iv,{isOpen:n,onClose:e,title:`Edit Team: ${t.name}`,children:[T.jsxs("div",{className:Nn.formGroup,children:[T.jsx("label",{className:Nn.sectionLabel,children:"Allowed Positions"}),T.jsx(zl,{children:(f=i==null?void 0:i.filter(m=>!m.parentId))==null?void 0:f.map(m=>{var y;const p=(y=t.positions)==null?void 0:y.some(v=>v.name===m.name);return T.jsxs(Dr,{colour:m.colour,isActive:p,onClick:()=>a(m),children:[m.emoji," ",m.name]},m.name)})})]}),T.jsxs("div",{className:Nn.formGroup,children:[T.jsx("label",{className:Nn.sectionLabel,children:"Preferred Days"}),T.jsx(zl,{children:z5.map(m=>{var y;const p=(y=t.preferredDays)==null?void 0:y.includes(m);return T.jsx(Dr,{isActive:p,onClick:()=>l(m),children:m},m)})})]}),T.jsxs("div",{className:Nn.formGroup,children:[T.jsx("label",{className:Nn.sectionLabel,children:"Feature Settings"}),T.jsx(zl,{children:T.jsxs(Dr,{isActive:t.allowAbsence!==!1,onClick:()=>c(t.allowAbsence===!1),colour:t.allowAbsence!==!1?"var(--color-success-dark)":"var(--color-text-dim)",children:["Allow Absence: ",t.allowAbsence!==!1?"YES":"NO"]})})]})]})},av=({primaryText:n,secondaryText:e,onClick:t})=>T.jsxs("button",{className:Nn.summaryButton,onClick:t,type:"button",children:[T.jsx("span",{className:Nn.summaryPrimary,children:n}),e&&T.jsxs(T.Fragment,{children:[T.jsx("span",{className:Nn.summarySeparator,children:""}),T.jsx("span",{className:Nn.summarySecondary,children:e})]})]}),B5=({team:n,teamIndex:e,availablePositions:t,onUpdate:i,onMove:a,onDelete:l,onTogglePosition:c,onToggleDay:f,onToggleAllowAbsence:m,isFirst:p,isLast:y})=>{var z;const[v,S]=V.useState(!1),w=()=>{if(!n.positions||n.positions.length===0)return"No positions";const M=n.positions.slice(0,3).map(F=>T.jsx("span",{className:Nn.summaryEmoji,children:F.emoji},F.name)),B=n.positions.length-3;return T.jsxs(T.Fragment,{children:[M,B>0&&T.jsxs("span",{className:Nn.remainingCount,children:["+",B]})]})},D=()=>!n.preferredDays||n.preferredDays.length===0?"No days":n.preferredDays.map(M=>M.substring(0,3)).join(", ");return T.jsxs(T.Fragment,{children:[T.jsxs("tr",{children:[T.jsx(ui,{name:`team-name-${e}`,value:n.name,onChange:M=>i(e,"name",M.target.value),isSticky:!0}),T.jsx(cn,{children:T.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[T.jsx(pr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(e,"up"),disabled:p,children:""}),T.jsx(pr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(e,"down"),disabled:y,children:""})]})}),T.jsx(ui,{name:`team-emoji-${e}`,value:n.emoji,onChange:M=>i(e,"emoji",M.target.value)}),T.jsx(ui,{name:`team-maxConflict-${e}`,value:((z=n.maxConflict)==null?void 0:z.toString())||"1",type:"number",onChange:M=>i(e,"maxConflict",parseInt(M.target.value)||1)}),T.jsx(cn,{children:T.jsx(av,{primaryText:w(),secondaryText:D(),onClick:()=>S(!0)})}),T.jsx(cn,{children:T.jsxs(pr,{variant:"delete",size:"small",onClick:()=>l(e),children:[T.jsx(HC,{size:14,style:{marginRight:"6px"}}),"Delete"]})})]}),T.jsx(sR,{isOpen:v,onClose:()=>S(!1),team:n,availablePositions:t,onTogglePosition:M=>c(e,M),onToggleDay:M=>f(e,M),onToggleAllowAbsence:M=>m(e,M)})]})},cA={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1,allowAbsence:!0},H5=()=>{var L;const n=or(),{teams:e,loading:t}=We(x=>x.teams),{positions:i,loading:a}=We(x=>x.positions),[l,c]=V.useState(e),[f,m]=V.useState(cA),[p,y]=V.useState("idle"),[v,S]=V.useState(!1),w=V.useMemo(()=>{const x=ge=>ge.map(Te=>({name:Te.name||"",emoji:Te.emoji||"",positions:(Te.positions||[]).map(H=>H.name).sort(),preferredDays:[...Te.preferredDays||[]].sort(),maxConflict:Te.maxConflict||1,allowAbsence:Te.allowAbsence!==!1}));return JSON.stringify(x(l))!==JSON.stringify(x(e))},[l,e]);V.useEffect(()=>{c(e)},[e]);const D=(x,ge,Te)=>{const H=[...l];H[x]={...H[x],[ge]:Te},c(H)},z=(x,ge)=>{const Te=[...l],H=ge==="up"?x-1:x+1;if(H<0||H>=Te.length)return;const ae=Te[x];Te[x]=Te[H],Te[H]=ae,c(Te)},M=(x,ge)=>{const Te=l.map((H,ae)=>{if(ae!==x)return H;const ye=H.positions||[],pe=ye.find(Ee=>Ee.name===ge.name)?ye.filter(Ee=>Ee.name!==ge.name):[...ye,ge];return{...H,positions:pe}});c(Te)},B=(x,ge)=>{const Te=l.map((H,ae)=>{if(ae!==x)return H;const ye=H.preferredDays||[],pe=ye.includes(ge)?ye.filter(Ee=>Ee!==ge):[...ye,ge];return{...H,preferredDays:pe}});c(Te)},F=(x,ge)=>{const Te=l.map((H,ae)=>ae!==x?H:{...H,allowAbsence:ge});c(Te)},G=x=>{const ge=f.positions||[],Te=ge.some(H=>H.name===x.name)?ge.filter(H=>H.name!==x.name):[...ge,x];m({...f,positions:Te})},ee=x=>{const ge=f.preferredDays||[],Te=ge.includes(x)?ge.filter(H=>H!==x):[...ge,x];m({...f,preferredDays:Te})},ie=x=>{m({...f,allowAbsence:x})},ne=()=>{if(!f.name.trim()||!f.emoji.trim()){n(Na({title:"Missing Information",message:"Please provide both an emoji and a name for the team.",showCancel:!1}));return}c([...l,f]),m(cA)},A=x=>{n(Na({title:"Delete Team",message:"Are you sure you want to delete this team?",confirmText:"Delete",onConfirm:()=>{c(l.filter((ge,Te)=>Te!==x))}}))},I=async()=>{y("saving");try{const x=l.map(ge=>({name:ge.name||"",emoji:ge.emoji||"",maxConflict:ge.maxConflict||1,allowAbsence:ge.allowAbsence!==!1,preferredDays:ge.preferredDays||[],positions:(ge.positions||[]).map(Te=>({name:Te.name||"",emoji:Te.emoji||"",colour:Te.colour||"",sortByGender:!!Te.sortByGender,isCustom:!!Te.isCustom,customLabels:Te.customLabels||[],...Te.parentId?{parentId:Te.parentId}:{}}))}));await n(id(x)).unwrap(),y("success"),setTimeout(()=>y("idle"),2e3)}catch(x){console.error("Save Error:",x),n(Na({title:"Save Error",message:"Error saving: "+(x instanceof Error?x.message:"Unknown error"),showCancel:!1})),y("idle")}},C=()=>{c(e)};if(t||a)return T.jsx(lu,{});const P=()=>{if(!f.positions||f.positions.length===0)return"No positions";const x=f.positions.slice(0,3).map(Te=>T.jsx("span",{className:Bl.summaryEmoji,children:Te.emoji},Te.name)),ge=f.positions.length-3;return T.jsxs(T.Fragment,{children:[x,ge>0&&T.jsxs("span",{className:Bl.remainingCount,children:["+",ge]})]})},O=()=>!f.preferredDays||f.preferredDays.length===0?"No days":f.preferredDays.map(x=>x.substring(0,3)).join(", ");return T.jsxs("div",{className:Bl.managementWrapper,children:[T.jsxs(sv,{headers:[{text:"Name",minWidth:100,width:120,textAlign:"center"},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Conflicts",width:60,textAlign:"center"},{text:"Config",minWidth:180,textAlign:"center"},{text:"",width:50}],children:[l.map((x,ge)=>T.jsx(B5,{team:x,teamIndex:ge,availablePositions:i,onUpdate:D,onMove:z,onDelete:A,onTogglePosition:M,onToggleDay:B,onToggleAllowAbsence:F,isFirst:ge===0,isLast:ge===l.length-1},`${x.emoji}-${ge}`)),T.jsxs("tr",{className:"team-row-new",children:[T.jsx(ui,{name:"new-team-name",value:f.name,placeholder:"Team Name",onChange:x=>m({...f,name:x.target.value}),isSticky:!0}),T.jsx(cn,{children:""}),T.jsx(ui,{name:"new-team-emoji",value:f.emoji,placeholder:"",onChange:x=>m({...f,emoji:x.target.value})}),T.jsx(ui,{name:"new-team-maxConflict",value:((L=f.maxConflict)==null?void 0:L.toString())||"1",type:"number",onChange:x=>m({...f,maxConflict:parseInt(x.target.value)||1})}),T.jsx(cn,{children:T.jsx(av,{primaryText:P(),secondaryText:O(),onClick:()=>S(!0)})}),T.jsx(cn,{children:T.jsxs(pr,{onClick:ne,disabled:!f.name.trim()||!f.emoji.trim(),children:[T.jsx(lh,{size:16,style:{marginRight:"6px"}}),"Add"]})})]})]}),T.jsx(sR,{isOpen:v,onClose:()=>S(!1),team:f,availablePositions:i,onTogglePosition:G,onToggleDay:ee,onToggleAllowAbsence:ie}),w&&T.jsx(uu,{label:"Unsaved team changes",saveText:"Save All Team Changes",onSave:I,onCancel:C,isSaving:p==="saving"})]})},F5=({isOpen:n,onClose:e,user:t,availableTeams:i})=>{const a=or(),{positions:l}=We(p=>p.positions),c=p=>{a(q3({userId:t.id,teamName:p}))},f=(p,y)=>{a(G3({userId:t.id,teamName:p,posName:y}))},m=(p,y)=>{a($3({userId:t.id,teamName:p,direction:y}))};return T.jsx(iv,{isOpen:n,onClose:e,title:`Edit Assignments: ${t.name}`,children:T.jsx(tR,{selectedTeams:t.teams||[],teamPositions:t.teamPositions||{},onToggleTeam:c,onTogglePosition:f,onMoveTeam:m,availableTeams:i,globalPositions:l})})},q5=({user:n,availableTeams:e,adminEmail:t})=>{const i=or(),{positions:a}=We(y=>y.positions),[l,c]=V.useState(!1),f=(y,v)=>{i(F3({id:n.id,field:y,value:v}))},m=()=>{if(!n.teams||n.teams.length===0)return"No teams";const y=n.teams.map(w=>{const D=e.find(z=>z.name===w);return(D==null?void 0:D.emoji)||""}).filter(Boolean),v=y.slice(0,3).map((w,D)=>T.jsx("span",{className:Nn.summaryEmoji,children:w},D)),S=y.length-3;return T.jsxs(T.Fragment,{children:[v,S>0&&T.jsxs("span",{className:Nn.remainingCount,children:["+",S]})]})},p=()=>n.teamPositions?Object.entries(n.teamPositions).reduce((y,[,v])=>{const S=v.filter(w=>{const D=a.find(z=>z.name===w);return!(D!=null&&D.isCustom)});return y+S.length},0):0;return T.jsxs(T.Fragment,{children:[T.jsxs("tr",{children:[T.jsx(ui,{name:`name-${n.id}`,value:n.name||"",onChange:y=>f("name",y.target.value),isSticky:!0}),T.jsx(ui,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),T.jsx(cn,{children:T.jsxs("select",{name:`gender-${n.id}`,className:As.formSelect,value:n.gender,onChange:y=>f("gender",y.target.value),children:[T.jsx("option",{value:"",children:"-"}),T.jsx("option",{value:"Male",children:"Male"}),T.jsx("option",{value:"Female",children:"Female"})]})}),T.jsx(cn,{children:T.jsx(av,{primaryText:m(),secondaryText:`(${p()} pos)`,onClick:()=>c(!0)})}),T.jsx(cn,{textAlign:"center",children:T.jsx(Dr,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),T.jsx(cn,{textAlign:"center",children:T.jsx(Dr,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),T.jsx(cn,{textAlign:"center",children:T.jsx(Dr,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id),T.jsx(F5,{isOpen:l,onClose:()=>c(!1),user:n,availableTeams:e})]})},G5=()=>{const n=or(),{allUsers:e,originalUsers:t,loading:i,saving:a,error:l}=We(y=>y.userManagement),c=We(y=>y.teams.teams),f=V.useMemo(()=>{const y=v=>v.map(S=>({name:S.name||"",gender:S.gender||"",teams:[...S.teams||[]].sort(),teamPositions:Object.keys(S.teamPositions||{}).sort().reduce((w,D)=>{var z;return w[D]=[...((z=S.teamPositions)==null?void 0:z[D])||[]].sort(),w},{}),isActive:!!S.isActive,isApproved:!!S.isApproved,isAdmin:!!S.isAdmin}));return JSON.stringify(y(e))!==JSON.stringify(y(t))},[e,t]),m=()=>{n(od(e))},p=()=>{n(K3())};return i?T.jsx(lu,{}):l?T.jsxs("div",{children:["Error: ",l]}):T.jsxs("div",{className:Bl.managementWrapper,children:[T.jsx(sv,{headers:[{text:"Name",minWidth:70,width:100,textAlign:"center"},{text:"Email",minWidth:170,textAlign:"center"},{text:"Gender",minWidth:90,textAlign:"center"},{text:"Assignments",minWidth:150,textAlign:"center"},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(y=>T.jsx(q5,{user:y,availableTeams:c,adminEmail:"chris.sm.kang542@gmail.com"},y.id))}),f&&T.jsx(uu,{label:"Unsaved user changes",saveText:"Save All User Changes",onSave:m,onCancel:p,isSaving:a})]})},$5=()=>{const{userData:n}=We(t=>t.auth),{section:e}=Gd();return n?T.jsxs("div",{className:Bl.settingsContainer,children:[e===Nl.PROFILE&&T.jsx(nR,{}),e===Nl.USER_MANAGEMENT&&(n.isAdmin?T.jsx(G5,{}):T.jsx("p",{children:"Access Denied"})),e===Nl.TEAMS&&(n.isAdmin?T.jsx(H5,{}):T.jsx("p",{children:"Access Denied"})),e===Nl.POSITIONS&&(n.isAdmin?T.jsx(U5,{}):T.jsx("p",{children:"Access Denied"}))]}):null},K5=[{path:"/",element:T.jsx(rj,{})},{path:"/login",element:T.jsx(g9,{})},{path:"/guest",element:T.jsx(l9,{})},{path:"/app",element:T.jsx(ok,{}),children:[{path:"",element:T.jsx(PU,{}),children:[{path:"dashboard",element:T.jsx(w6,{})},{path:"roster/:teamName?/:positionName?",element:T.jsx(N5,{})},{path:"settings/:section?",element:T.jsx($5,{})}]}]}];let hA=!1;const Y5=n=>{if(!hA){hA=!0;let e;LV(Ro,t=>{if(t){n.dispatch(P3(t)),n.dispatch(sd(t.uid));const i=sr($t,"users",t.uid);e=po(i,a=>{if(a.exists()){const l=a.data();n.dispatch(XC(l))}})}else n.dispatch(V3()),e&&e()})}return e=>t=>e(t)},Q5=Pj({reducer:{auth:L3,positions:rk,presence:Jk,roster:B3,rosterView:YU,teams:ak,ui:Gk,userManagement:Q3},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(Y5)}),X5=ND(K5);QI.createRoot(document.getElementById("root")).render(T.jsx(dA.StrictMode,{children:T.jsx(cx,{store:Q5,children:T.jsx(GD,{children:T.jsx(JL,{children:T.jsx(FD,{router:X5})})})})}));
