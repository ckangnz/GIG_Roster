var xC=Object.defineProperty;var OC=(n,e,t)=>e in n?xC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Bp=(n,e,t)=>OC(n,typeof e!="symbol"?e+"":e,t);function MC(n,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function _S(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Fp={exports:{}},Iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT;function VC(){if(UT)return Iu;UT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:a,key:c,ref:s!==void 0?s:null,props:l}}return Iu.Fragment=e,Iu.jsx=t,Iu.jsxs=t,Iu}var jT;function PC(){return jT||(jT=1,Fp.exports=VC()),Fp.exports}var D=PC(),Hp={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function LC(){if(zT)return ze;zT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function C(V){return V===null||typeof V!="object"?null:(V=S&&V[S]||V["@@iterator"],typeof V=="function"?V:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,M={};function G(V,te,de){this.props=V,this.context=te,this.refs=M,this.updater=de||L}G.prototype.isReactComponent={},G.prototype.setState=function(V,te){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,te,"setState")},G.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function q(){}q.prototype=G.prototype;function K(V,te,de){this.props=V,this.context=te,this.refs=M,this.updater=de||L}var Z=K.prototype=new q;Z.constructor=K,z(Z,G.prototype),Z.isPureReactComponent=!0;var se=Array.isArray;function Q(){}var b={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(V,te,de){var pe=de.ref;return{$$typeof:n,type:V,key:te,ref:pe!==void 0?pe:null,props:de}}function N(V,te){return R(V.type,te,V.props)}function x(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function k(V){var te={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(de){return te[de]})}var O=/\/+/g;function Me(V,te){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):te.toString(36)}function qe(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(Q,Q):(V.status="pending",V.then(function(te){V.status==="pending"&&(V.status="fulfilled",V.value=te)},function(te){V.status==="pending"&&(V.status="rejected",V.reason=te)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function j(V,te,de,pe,we){var De=typeof V;(De==="undefined"||De==="boolean")&&(V=null);var Ye=!1;if(V===null)Ye=!0;else switch(De){case"bigint":case"string":case"number":Ye=!0;break;case"object":switch(V.$$typeof){case n:case e:Ye=!0;break;case v:return Ye=V._init,j(Ye(V._payload),te,de,pe,we)}}if(Ye)return we=we(V),Ye=pe===""?"."+Me(V,0):pe,se(we)?(de="",Ye!=null&&(de=Ye.replace(O,"$&/")+"/"),j(we,te,de,"",function(Ii){return Ii})):we!=null&&(x(we)&&(we=N(we,de+(we.key==null||V&&V.key===we.key?"":(""+we.key).replace(O,"$&/")+"/")+Ye)),te.push(we)),1;Ye=0;var bt=pe===""?".":pe+":";if(se(V))for(var wt=0;wt<V.length;wt++)pe=V[wt],De=bt+Me(pe,wt),Ye+=j(pe,te,de,De,we);else if(wt=C(V),typeof wt=="function")for(V=wt.call(V),wt=0;!(pe=V.next()).done;)pe=pe.value,De=bt+Me(pe,wt++),Ye+=j(pe,te,de,De,we);else if(De==="object"){if(typeof V.then=="function")return j(qe(V),te,de,pe,we);throw te=String(V),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ye}function ne(V,te,de){if(V==null)return V;var pe=[],we=0;return j(V,pe,"","",function(De){return te.call(de,De,we++)}),pe}function ie(V){if(V._status===-1){var te=V._result;te=te(),te.then(function(de){(V._status===0||V._status===-1)&&(V._status=1,V._result=de)},function(de){(V._status===0||V._status===-1)&&(V._status=2,V._result=de)}),V._status===-1&&(V._status=0,V._result=te)}if(V._status===1)return V._result.default;throw V._result}var me=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ee={map:ne,forEach:function(V,te,de){ne(V,function(){te.apply(this,arguments)},de)},count:function(V){var te=0;return ne(V,function(){te++}),te},toArray:function(V){return ne(V,function(te){return te})||[]},only:function(V){if(!x(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return ze.Activity=E,ze.Children=Ee,ze.Component=G,ze.Fragment=t,ze.Profiler=s,ze.PureComponent=K,ze.StrictMode=a,ze.Suspense=p,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=b,ze.__COMPILER_RUNTIME={__proto__:null,c:function(V){return b.H.useMemoCache(V)}},ze.cache=function(V){return function(){return V.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(V,te,de){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var pe=z({},V.props),we=V.key;if(te!=null)for(De in te.key!==void 0&&(we=""+te.key),te)!A.call(te,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&te.ref===void 0||(pe[De]=te[De]);var De=arguments.length-2;if(De===1)pe.children=de;else if(1<De){for(var Ye=Array(De),bt=0;bt<De;bt++)Ye[bt]=arguments[bt+2];pe.children=Ye}return R(V.type,we,pe)},ze.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},ze.createElement=function(V,te,de){var pe,we={},De=null;if(te!=null)for(pe in te.key!==void 0&&(De=""+te.key),te)A.call(te,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(we[pe]=te[pe]);var Ye=arguments.length-2;if(Ye===1)we.children=de;else if(1<Ye){for(var bt=Array(Ye),wt=0;wt<Ye;wt++)bt[wt]=arguments[wt+2];we.children=bt}if(V&&V.defaultProps)for(pe in Ye=V.defaultProps,Ye)we[pe]===void 0&&(we[pe]=Ye[pe]);return R(V,De,we)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(V){return{$$typeof:d,render:V}},ze.isValidElement=x,ze.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:ie}},ze.memo=function(V,te){return{$$typeof:g,type:V,compare:te===void 0?null:te}},ze.startTransition=function(V){var te=b.T,de={};b.T=de;try{var pe=V(),we=b.S;we!==null&&we(de,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(Q,me)}catch(De){me(De)}finally{te!==null&&de.types!==null&&(te.types=de.types),b.T=te}},ze.unstable_useCacheRefresh=function(){return b.H.useCacheRefresh()},ze.use=function(V){return b.H.use(V)},ze.useActionState=function(V,te,de){return b.H.useActionState(V,te,de)},ze.useCallback=function(V,te){return b.H.useCallback(V,te)},ze.useContext=function(V){return b.H.useContext(V)},ze.useDebugValue=function(){},ze.useDeferredValue=function(V,te){return b.H.useDeferredValue(V,te)},ze.useEffect=function(V,te){return b.H.useEffect(V,te)},ze.useEffectEvent=function(V){return b.H.useEffectEvent(V)},ze.useId=function(){return b.H.useId()},ze.useImperativeHandle=function(V,te,de){return b.H.useImperativeHandle(V,te,de)},ze.useInsertionEffect=function(V,te){return b.H.useInsertionEffect(V,te)},ze.useLayoutEffect=function(V,te){return b.H.useLayoutEffect(V,te)},ze.useMemo=function(V,te){return b.H.useMemo(V,te)},ze.useOptimistic=function(V,te){return b.H.useOptimistic(V,te)},ze.useReducer=function(V,te,de){return b.H.useReducer(V,te,de)},ze.useRef=function(V){return b.H.useRef(V)},ze.useState=function(V){return b.H.useState(V)},ze.useSyncExternalStore=function(V,te,de){return b.H.useSyncExternalStore(V,te,de)},ze.useTransition=function(){return b.H.useTransition()},ze.version="19.2.4",ze}var BT;function ud(){return BT||(BT=1,Hp.exports=LC()),Hp.exports}var B=ud();const ES=_S(B),kC=MC({__proto__:null,default:ES},[B]);var qp={exports:{}},Du={},Gp={exports:{}},$p={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT;function UC(){return FT||(FT=1,(function(n){function e(j,ne){var ie=j.length;j.push(ne);e:for(;0<ie;){var me=ie-1>>>1,Ee=j[me];if(0<s(Ee,ne))j[me]=ne,j[ie]=Ee,ie=me;else break e}}function t(j){return j.length===0?null:j[0]}function a(j){if(j.length===0)return null;var ne=j[0],ie=j.pop();if(ie!==ne){j[0]=ie;e:for(var me=0,Ee=j.length,V=Ee>>>1;me<V;){var te=2*(me+1)-1,de=j[te],pe=te+1,we=j[pe];if(0>s(de,ie))pe<Ee&&0>s(we,de)?(j[me]=we,j[pe]=ie,me=pe):(j[me]=de,j[te]=ie,me=te);else if(pe<Ee&&0>s(we,ie))j[me]=we,j[pe]=ie,me=pe;else break e}}return ne}function s(j,ne){var ie=j.sortIndex-ne.sortIndex;return ie!==0?ie:j.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,E=null,S=3,C=!1,L=!1,z=!1,M=!1,G=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function Z(j){for(var ne=t(g);ne!==null;){if(ne.callback===null)a(g);else if(ne.startTime<=j)a(g),ne.sortIndex=ne.expirationTime,e(p,ne);else break;ne=t(g)}}function se(j){if(z=!1,Z(j),!L)if(t(p)!==null)L=!0,Q||(Q=!0,k());else{var ne=t(g);ne!==null&&qe(se,ne.startTime-j)}}var Q=!1,b=-1,A=5,R=-1;function N(){return M?!0:!(n.unstable_now()-R<A)}function x(){if(M=!1,Q){var j=n.unstable_now();R=j;var ne=!0;try{e:{L=!1,z&&(z=!1,q(b),b=-1),C=!0;var ie=S;try{t:{for(Z(j),E=t(p);E!==null&&!(E.expirationTime>j&&N());){var me=E.callback;if(typeof me=="function"){E.callback=null,S=E.priorityLevel;var Ee=me(E.expirationTime<=j);if(j=n.unstable_now(),typeof Ee=="function"){E.callback=Ee,Z(j),ne=!0;break t}E===t(p)&&a(p),Z(j)}else a(p);E=t(p)}if(E!==null)ne=!0;else{var V=t(g);V!==null&&qe(se,V.startTime-j),ne=!1}}break e}finally{E=null,S=ie,C=!1}ne=void 0}}finally{ne?k():Q=!1}}}var k;if(typeof K=="function")k=function(){K(x)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Me=O.port2;O.port1.onmessage=x,k=function(){Me.postMessage(null)}}else k=function(){G(x,0)};function qe(j,ne){b=G(function(){j(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(j){switch(S){case 1:case 2:case 3:var ne=3;break;default:ne=S}var ie=S;S=ne;try{return j()}finally{S=ie}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(j,ne){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ie=S;S=j;try{return ne()}finally{S=ie}},n.unstable_scheduleCallback=function(j,ne,ie){var me=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?me+ie:me):ie=me,j){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ie+Ee,j={id:v++,callback:ne,priorityLevel:j,startTime:ie,expirationTime:Ee,sortIndex:-1},ie>me?(j.sortIndex=ie,e(g,j),t(p)===null&&j===t(g)&&(z?(q(b),b=-1):z=!0,qe(se,ie-me))):(j.sortIndex=Ee,e(p,j),L||C||(L=!0,Q||(Q=!0,k()))),j},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(j){var ne=S;return function(){var ie=S;S=ne;try{return j.apply(this,arguments)}finally{S=ie}}}})($p)),$p}var HT;function jC(){return HT||(HT=1,Gp.exports=UC()),Gp.exports}var Kp={exports:{}},Cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function zC(){if(qT)return Cn;qT=1;var n=ud();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:p,containerInfo:g,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Cn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},Cn.flushSync=function(p){var g=c.T,v=a.p;try{if(c.T=null,a.p=2,p)return p()}finally{c.T=g,a.p=v,a.d.f()}},Cn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},Cn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},Cn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:C}):v==="script"&&a.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Cn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},Cn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin);a.d.L(p,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Cn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},Cn.requestFormReset=function(p){a.d.r(p)},Cn.unstable_batchedUpdates=function(p,g){return p(g)},Cn.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},Cn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Cn.version="19.2.4",Cn}var GT;function TS(){if(GT)return Kp.exports;GT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kp.exports=zC(),Kp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T;function BC(){if($T)return Du;$T=1;var n=jC(),e=ud(),t=TS();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(a(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,u=i;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return p(h),r;if(m===u)return p(h),i;m=m.sibling}throw Error(a(188))}if(o.return!==u.return)o=h,u=m;else{for(var _=!1,w=h.child;w;){if(w===o){_=!0,o=h,u=m;break}if(w===u){_=!0,u=h,o=m;break}w=w.sibling}if(!_){for(w=m.child;w;){if(w===o){_=!0,o=m,u=h;break}if(w===u){_=!0,u=m,o=h;break}w=w.sibling}if(!_)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function v(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=v(r),i!==null)return i;r=r.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),K=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function k(r){return r===null||typeof r!="object"?null:(r=x&&r[x]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function Me(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case z:return"Fragment";case G:return"Profiler";case M:return"StrictMode";case se:return"Suspense";case Q:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case L:return"Portal";case K:return r.displayName||"Context";case q:return(r._context.displayName||"Context")+".Consumer";case Z:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case b:return i=r.displayName||null,i!==null?i:Me(r.type)||"Memo";case A:i=r._payload,r=r._init;try{return Me(r(i))}catch{}}return null}var qe=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},me=[],Ee=-1;function V(r){return{current:r}}function te(r){0>Ee||(r.current=me[Ee],me[Ee]=null,Ee--)}function de(r,i){Ee++,me[Ee]=r.current,r.current=i}var pe=V(null),we=V(null),De=V(null),Ye=V(null);function bt(r,i){switch(de(De,i),de(we,r),de(pe,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?oT(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=oT(i),r=lT(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}te(pe),de(pe,r)}function wt(){te(pe),te(we),te(De)}function Ii(r){r.memoizedState!==null&&de(Ye,r);var i=pe.current,o=lT(i,r.type);i!==o&&(de(we,r),de(pe,o))}function fa(r){we.current===r&&(te(pe),te(we)),Ye.current===r&&(te(Ye),Au._currentValue=ie)}var Ut,Jn;function Zn(r){if(Ut===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Ut=i&&i[1]||"",Jn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ut+r+Jn}var gs=!1;function Mn(r,i){if(!r||gs)return"";gs=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ae){var ee=ae}Reflect.construct(r,[],ce)}else{try{ce.call()}catch(ae){ee=ae}r.call(ce.prototype)}}else{try{throw Error()}catch(ae){ee=ae}(ce=r())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ae){if(ae&&ee&&typeof ae.stack=="string")return[ae.stack,ee.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],w=m[1];if(_&&w){var U=_.split(`
`),W=w.split(`
`);for(h=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;h<W.length&&!W[h].includes("DetermineComponentFrameRoot");)h++;if(u===U.length||h===W.length)for(u=U.length-1,h=W.length-1;1<=u&&0<=h&&U[u]!==W[h];)h--;for(;1<=u&&0<=h;u--,h--)if(U[u]!==W[h]){if(u!==1||h!==1)do if(u--,h--,0>h||U[u]!==W[h]){var oe=`
`+U[u].replace(" at new "," at ");return r.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",r.displayName)),oe}while(1<=u&&0<=h);break}}}finally{gs=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Zn(o):""}function ys(r,i){switch(r.tag){case 26:case 27:case 5:return Zn(r.type);case 16:return Zn("Lazy");case 13:return r.child!==i&&i!==null?Zn("Suspense Fallback"):Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 15:return Mn(r.type,!1);case 11:return Mn(r.type.render,!1);case 1:return Mn(r.type,!0);case 31:return Zn("Activity");default:return""}}function vs(r){try{var i="",o=null;do i+=ys(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var jt=Object.prototype.hasOwnProperty,Kt=n.unstable_scheduleCallback,ni=n.unstable_cancelCallback,Pl=n.unstable_shouldYield,fo=n.unstable_requestPaint,zt=n.unstable_now,er=n.unstable_getCurrentPriorityLevel,ha=n.unstable_ImmediatePriority,Di=n.unstable_UserBlockingPriority,fn=n.unstable_NormalPriority,tr=n.unstable_LowPriority,_s=n.unstable_IdlePriority,ho=n.log,da=n.unstable_setDisableYieldValue,nr=null,St=null;function Vn(r){if(typeof ho=="function"&&da(r),St&&typeof St.setStrictMode=="function")try{St.setStrictMode(nr,r)}catch{}}var Vt=Math.clz32?Math.clz32:Ts,Es=Math.log,ma=Math.LN2;function Ts(r){return r>>>=0,r===0?32:31-(Es(r)/ma|0)|0}var Pn=256,ri=262144,Pt=4194304;function br(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function rr(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var h=0,m=r.suspendedLanes,_=r.pingedLanes;r=r.warmLanes;var w=u&134217727;return w!==0?(u=w&~m,u!==0?h=br(u):(_&=w,_!==0?h=br(_):o||(o=w&~r,o!==0&&(h=br(o))))):(w=u&~m,w!==0?h=br(w):_!==0?h=br(_):o||(o=u&~r,o!==0&&(h=br(o)))),h===0?0:i!==0&&i!==h&&(i&m)===0&&(m=h&-h,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:h}function ir(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function mo(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ni(){var r=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),r}function Ln(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function ii(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ll(r,i,o,u,h,m){var _=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var w=r.entanglements,U=r.expirationTimes,W=r.hiddenUpdates;for(o=_&~o;0<o;){var oe=31-Vt(o),ce=1<<oe;w[oe]=0,U[oe]=-1;var ee=W[oe];if(ee!==null)for(W[oe]=null,oe=0;oe<ee.length;oe++){var ae=ee[oe];ae!==null&&(ae.lane&=-536870913)}o&=~ce}u!==0&&xi(r,u,0),m!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=m&~(_&~i))}function xi(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Vt(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function P(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Vt(o),h=1<<u;h&i|r[u]&i&&(r[u]|=i),o&=~h}}function H(r,i){var o=i&-i;return o=(o&42)!==0?1:J(o),(o&(r.suspendedLanes|i))!==0?0:o}function J(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function he(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ge(){var r=ne.p;return r!==0?r:(r=window.event,r===void 0?32:xT(r.type))}function be(r,i){var o=ne.p;try{return ne.p=r,i()}finally{ne.p=o}}var Re=Math.random().toString(36).slice(2),ye="__reactFiber$"+Re,_e="__reactProps$"+Re,Ae="__reactContainer$"+Re,Pe="__reactEvents$"+Re,Ne="__reactListeners$"+Re,Ue="__reactHandles$"+Re,Qe="__reactResources$"+Re,gt="__reactMarker$"+Re;function Nt(r){delete r[ye],delete r[_e],delete r[Pe],delete r[Ne],delete r[Ue]}function Rt(r){var i=r[ye];if(i)return i;for(var o=r.parentNode;o;){if(i=o[Ae]||o[ye]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=pT(r);r!==null;){if(o=r[ye])return o;r=pT(r)}return i}r=o,o=r.parentNode}return null}function Ge(r){if(r=r[ye]||r[Ae]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function Ct(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function hn(r){var i=r[Qe];return i||(i=r[Qe]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function It(r){r[gt]=!0}var Bn=new Set,wn={};function Fn(r,i){Rn(r,i),Rn(r+"Capture",i)}function Rn(r,i){for(wn[r]=i,r=0;r<i.length;r++)Bn.add(i[r])}var ar=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ai={},si={};function We(r){return jt.call(si,r)?!0:jt.call(ai,r)?!1:ar.test(r)?si[r]=!0:(ai[r]=!0,!1)}function Bt(r,i,o){if(We(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function Zt(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function yt(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function $e(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function sr(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function pa(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var h=u.get,m=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function ut(r){if(!r._valueTracker){var i=sr(r)?"checked":"value";r._valueTracker=pa(r,i,""+r[i])}}function bs(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=sr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function oi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ss=/[\n"\\]/g;function Hn(r){return r.replace(Ss,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function po(r,i,o,u,h,m,_,w){r.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.type=_:r.removeAttribute("type"),i!=null?_==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+$e(i)):r.value!==""+$e(i)&&(r.value=""+$e(i)):_!=="submit"&&_!=="reset"||r.removeAttribute("value"),i!=null?kl(r,_,$e(i)):o!=null?kl(r,_,$e(o)):u!=null&&r.removeAttribute("value"),h==null&&m!=null&&(r.defaultChecked=!!m),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+$e(w):r.removeAttribute("name")}function xc(r,i,o,u,h,m,_,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){ut(r);return}o=o!=null?""+$e(o):"",i=i!=null?""+$e(i):o,w||i===r.value||(r.value=i),r.defaultValue=i}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=w?r.checked:!!u,r.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.name=_),ut(r)}function kl(r,i,o){i==="number"&&oi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function ga(r,i,o,u){if(r=r.options,i){i={};for(var h=0;h<o.length;h++)i["$"+o[h]]=!0;for(o=0;o<r.length;o++)h=i.hasOwnProperty("$"+r[o].value),r[o].selected!==h&&(r[o].selected=h),h&&u&&(r[o].defaultSelected=!0)}else{for(o=""+$e(o),i=null,h=0;h<r.length;h++){if(r[h].value===o){r[h].selected=!0,u&&(r[h].defaultSelected=!0);return}i!==null||r[h].disabled||(i=r[h])}i!==null&&(i.selected=!0)}}function Oc(r,i,o){if(i!=null&&(i=""+$e(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+$e(o):""}function ya(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(qe(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=$e(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),ut(r)}function qn(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var Mc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ul(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||Mc.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function jl(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var h in i)u=i[h],i.hasOwnProperty(h)&&o[h]!==u&&Ul(r,h,u)}else for(var m in i)i.hasOwnProperty(m)&&Ul(r,m,i[m])}function go(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),va=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yo(r){return va.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function zr(){}var zl=null;function Sr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _a=null,li=null;function As(r){var i=Ge(r);if(i&&(r=i.stateNode)){var o=r[_e]||null;e:switch(r=i.stateNode,i.type){case"input":if(po(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Hn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var h=u[_e]||null;if(!h)throw Error(a(90));po(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&bs(u)}break e;case"textarea":Oc(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&ga(r,!!o.multiple,i,!1)}}}var vo=!1;function Ea(r,i,o){if(vo)return r(i,o);vo=!0;try{var u=r(i);return u}finally{if(vo=!1,(_a!==null||li!==null)&&(If(),_a&&(i=_a,r=li,li=_a=null,As(i),r)))for(i=0;i<r.length;i++)As(r[i])}}function Br(r,i){var o=r.stateNode;if(o===null)return null;var u=o[_e]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ws=!1;if(Ar)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){ws=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{ws=!1}var ui=null,Bl=null,Rs=null;function Fl(){if(Rs)return Rs;var r,i=Bl,o=i.length,u,h="value"in ui?ui.value:ui.textContent,m=h.length;for(r=0;r<o&&i[r]===h[r];r++);var _=o-r;for(u=1;u<=_&&i[o-u]===h[m-u];u++);return Rs=h.slice(r,1<u?1-u:void 0)}function Cs(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Oi(){return!0}function Fr(){return!1}function gn(r){function i(o,u,h,m,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(o=r[w],this[w]=o?o(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Oi:Fr,this.isPropagationStopped=Fr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),i}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ci=gn(Mi),Ta=E({},Mi,{view:0,detail:0}),Hl=gn(Ta),ba,_o,fi,Eo=E({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==fi&&(fi&&r.type==="mousemove"?(ba=r.screenX-fi.screenX,_o=r.screenY-fi.screenY):_o=ba=0,fi=r),ba)},movementY:function(r){return"movementY"in r?r.movementY:_o}}),ql=gn(Eo),Is=E({},Eo,{dataTransfer:0}),Pc=gn(Is),Lc=E({},Ta,{relatedTarget:0}),Ds=gn(Lc),Gl=E({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),kc=gn(Gl),To=E({},Mi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Uc=gn(To),jc=E({},Mi,{data:0}),hi=gn(jc),zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hc(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Fc[r])?!!i[r]:!1}function Sa(){return Hc}var kn=E({},Ta,{key:function(r){if(r.key){var i=zc[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Cs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Bc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sa,charCode:function(r){return r.type==="keypress"?Cs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Cs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),qc=gn(kn),Gc=E({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vi=gn(Gc),f=E({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sa}),y=gn(f),T=E({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=gn(T),Y=E({},Eo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),re=gn(Y),ve=E({},Mi,{newState:0,oldState:0}),Fe=gn(ve),Yt=[9,13,27,32],ct=Ar&&"CompositionEvent"in window,Lt=null;Ar&&"documentMode"in document&&(Lt=document.documentMode);var wr=Ar&&"TextEvent"in window&&!Lt,di=Ar&&(!ct||Lt&&8<Lt&&11>=Lt),Hr=" ",qr=!1;function Ns(r,i){switch(r){case"keyup":return Yt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var So=!1;function t1(r,i){switch(r){case"compositionend":return bo(i);case"keypress":return i.which!==32?null:(qr=!0,Hr);case"textInput":return r=i.data,r===Hr&&qr?null:r;default:return null}}function n1(r,i){if(So)return r==="compositionend"||!ct&&Ns(r,i)?(r=Fl(),Rs=Bl=ui=null,So=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return di&&i.locale!=="ko"?null:i.data;default:return null}}var r1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vv(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!r1[r.type]:i==="textarea"}function _v(r,i,o,u){_a?li?li.push(u):li=[u]:_a=u,i=Pf(i,"onChange"),0<i.length&&(o=new ci("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var $l=null,Kl=null;function i1(r){tT(r,0)}function $c(r){var i=Ct(r);if(bs(i))return r}function Ev(r,i){if(r==="change")return i}var Tv=!1;if(Ar){var Yd;if(Ar){var Qd="oninput"in document;if(!Qd){var bv=document.createElement("div");bv.setAttribute("oninput","return;"),Qd=typeof bv.oninput=="function"}Yd=Qd}else Yd=!1;Tv=Yd&&(!document.documentMode||9<document.documentMode)}function Sv(){$l&&($l.detachEvent("onpropertychange",Av),Kl=$l=null)}function Av(r){if(r.propertyName==="value"&&$c(Kl)){var i=[];_v(i,Kl,r,Sr(r)),Ea(i1,i)}}function a1(r,i,o){r==="focusin"?(Sv(),$l=i,Kl=o,$l.attachEvent("onpropertychange",Av)):r==="focusout"&&Sv()}function s1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return $c(Kl)}function o1(r,i){if(r==="click")return $c(i)}function l1(r,i){if(r==="input"||r==="change")return $c(i)}function u1(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var or=typeof Object.is=="function"?Object.is:u1;function Yl(r,i){if(or(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!jt.call(i,h)||!or(r[h],i[h]))return!1}return!0}function wv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Rv(r,i){var o=wv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=wv(o)}}function Cv(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Cv(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Iv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=oi(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=oi(r.document)}return i}function Xd(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var c1=Ar&&"documentMode"in document&&11>=document.documentMode,Ao=null,Wd=null,Ql=null,Jd=!1;function Dv(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Jd||Ao==null||Ao!==oi(u)||(u=Ao,"selectionStart"in u&&Xd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ql&&Yl(Ql,u)||(Ql=u,u=Pf(Wd,"onSelect"),0<u.length&&(i=new ci("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Ao)))}function xs(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var wo={animationend:xs("Animation","AnimationEnd"),animationiteration:xs("Animation","AnimationIteration"),animationstart:xs("Animation","AnimationStart"),transitionrun:xs("Transition","TransitionRun"),transitionstart:xs("Transition","TransitionStart"),transitioncancel:xs("Transition","TransitionCancel"),transitionend:xs("Transition","TransitionEnd")},Zd={},Nv={};Ar&&(Nv=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function Os(r){if(Zd[r])return Zd[r];if(!wo[r])return r;var i=wo[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Nv)return Zd[r]=i[o];return r}var xv=Os("animationend"),Ov=Os("animationiteration"),Mv=Os("animationstart"),f1=Os("transitionrun"),h1=Os("transitionstart"),d1=Os("transitioncancel"),Vv=Os("transitionend"),Pv=new Map,em="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");em.push("scrollEnd");function Gr(r,i){Pv.set(r,i),Fn(i,[r])}var Kc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Rr=[],Ro=0,tm=0;function Yc(){for(var r=Ro,i=tm=Ro=0;i<r;){var o=Rr[i];Rr[i++]=null;var u=Rr[i];Rr[i++]=null;var h=Rr[i];Rr[i++]=null;var m=Rr[i];if(Rr[i++]=null,u!==null&&h!==null){var _=u.pending;_===null?h.next=h:(h.next=_.next,_.next=h),u.pending=h}m!==0&&Lv(o,h,m)}}function Qc(r,i,o,u){Rr[Ro++]=r,Rr[Ro++]=i,Rr[Ro++]=o,Rr[Ro++]=u,tm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function nm(r,i,o,u){return Qc(r,i,o,u),Xc(r)}function Ms(r,i){return Qc(r,null,null,i),Xc(r)}function Lv(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var h=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(h=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,h&&i!==null&&(h=31-Vt(o),r=m.hiddenUpdates,u=r[h],u===null?r[h]=[i]:u.push(i),i.lane=o|536870912),m):null}function Xc(r){if(50<yu)throw yu=0,fp=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Co={};function m1(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(r,i,o,u){return new m1(r,i,o,u)}function rm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Pi(r,i){var o=r.alternate;return o===null?(o=lr(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function kv(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Wc(r,i,o,u,h,m){var _=0;if(u=r,typeof r=="function")rm(r)&&(_=1);else if(typeof r=="string")_=_C(r,o,pe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=lr(31,o,i,h),r.elementType=R,r.lanes=m,r;case z:return Vs(o.children,h,m,i);case M:_=8,h|=24;break;case G:return r=lr(12,o,i,h|2),r.elementType=G,r.lanes=m,r;case se:return r=lr(13,o,i,h),r.elementType=se,r.lanes=m,r;case Q:return r=lr(19,o,i,h),r.elementType=Q,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case K:_=10;break e;case q:_=9;break e;case Z:_=11;break e;case b:_=14;break e;case A:_=16,u=null;break e}_=29,o=Error(a(130,r===null?"null":typeof r,"")),u=null}return i=lr(_,o,i,h),i.elementType=r,i.type=u,i.lanes=m,i}function Vs(r,i,o,u){return r=lr(7,r,u,i),r.lanes=o,r}function im(r,i,o){return r=lr(6,r,null,i),r.lanes=o,r}function Uv(r){var i=lr(18,null,null,0);return i.stateNode=r,i}function am(r,i,o){return i=lr(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var jv=new WeakMap;function Cr(r,i){if(typeof r=="object"&&r!==null){var o=jv.get(r);return o!==void 0?o:(i={value:r,source:i,stack:vs(i)},jv.set(r,i),i)}return{value:r,source:i,stack:vs(i)}}var Io=[],Do=0,Jc=null,Xl=0,Ir=[],Dr=0,Aa=null,mi=1,pi="";function Li(r,i){Io[Do++]=Xl,Io[Do++]=Jc,Jc=r,Xl=i}function zv(r,i,o){Ir[Dr++]=mi,Ir[Dr++]=pi,Ir[Dr++]=Aa,Aa=r;var u=mi;r=pi;var h=32-Vt(u)-1;u&=~(1<<h),o+=1;var m=32-Vt(i)+h;if(30<m){var _=h-h%5;m=(u&(1<<_)-1).toString(32),u>>=_,h-=_,mi=1<<32-Vt(i)+h|o<<h|u,pi=m+r}else mi=1<<m|o<<h|u,pi=r}function sm(r){r.return!==null&&(Li(r,1),zv(r,1,0))}function om(r){for(;r===Jc;)Jc=Io[--Do],Io[Do]=null,Xl=Io[--Do],Io[Do]=null;for(;r===Aa;)Aa=Ir[--Dr],Ir[Dr]=null,pi=Ir[--Dr],Ir[Dr]=null,mi=Ir[--Dr],Ir[Dr]=null}function Bv(r,i){Ir[Dr++]=mi,Ir[Dr++]=pi,Ir[Dr++]=Aa,mi=i.id,pi=i.overflow,Aa=r}var yn=null,xt=null,at=!1,wa=null,Nr=!1,lm=Error(a(519));function Ra(r){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wl(Cr(i,r)),lm}function Fv(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[ye]=r,i[_e]=u,o){case"dialog":Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":case"embed":Ze("load",i);break;case"video":case"audio":for(o=0;o<_u.length;o++)Ze(_u[o],i);break;case"source":Ze("error",i);break;case"img":case"image":case"link":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"input":Ze("invalid",i),xc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ze("invalid",i);break;case"textarea":Ze("invalid",i),ya(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||aT(i.textContent,o)?(u.popover!=null&&(Ze("beforetoggle",i),Ze("toggle",i)),u.onScroll!=null&&Ze("scroll",i),u.onScrollEnd!=null&&Ze("scrollend",i),u.onClick!=null&&(i.onclick=zr),i=!0):i=!1,i||Ra(r,!0)}function Hv(r){for(yn=r.return;yn;)switch(yn.tag){case 5:case 31:case 13:Nr=!1;return;case 27:case 3:Nr=!0;return;default:yn=yn.return}}function No(r){if(r!==yn)return!1;if(!at)return Hv(r),at=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Rp(r.type,r.memoizedProps)),o=!o),o&&xt&&Ra(r),Hv(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));xt=mT(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));xt=mT(r)}else i===27?(i=xt,za(r.type)?(r=xp,xp=null,xt=r):xt=i):xt=yn?Or(r.stateNode.nextSibling):null;return!0}function Ps(){xt=yn=null,at=!1}function um(){var r=wa;return r!==null&&(Yn===null?Yn=r:Yn.push.apply(Yn,r),wa=null),r}function Wl(r){wa===null?wa=[r]:wa.push(r)}var cm=V(null),Ls=null,ki=null;function Ca(r,i,o){de(cm,i._currentValue),i._currentValue=o}function Ui(r){r._currentValue=cm.current,te(cm)}function fm(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function hm(r,i,o,u){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var m=h.dependencies;if(m!==null){var _=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var U=0;U<i.length;U++)if(w.context===i[U]){m.lanes|=o,w=m.alternate,w!==null&&(w.lanes|=o),fm(m.return,o,r),u||(_=null);break e}m=w.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(a(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),fm(_,o,r),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===r){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function xo(r,i,o,u){r=null;for(var h=i,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var w=h.type;or(h.pendingProps.value,_.value)||(r!==null?r.push(w):r=[w])}}else if(h===Ye.current){if(_=h.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(Au):r=[Au])}h=h.return}r!==null&&hm(i,r,o,u),i.flags|=262144}function Zc(r){for(r=r.firstContext;r!==null;){if(!or(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ks(r){Ls=r,ki=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function vn(r){return qv(Ls,r)}function ef(r,i){return Ls===null&&ks(r),qv(r,i)}function qv(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ki===null){if(r===null)throw Error(a(308));ki=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else ki=ki.next=i;return o}var p1=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},g1=n.unstable_scheduleCallback,y1=n.unstable_NormalPriority,en={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dm(){return{controller:new p1,data:new Map,refCount:0}}function Jl(r){r.refCount--,r.refCount===0&&g1(y1,function(){r.controller.abort()})}var Zl=null,mm=0,Oo=0,Mo=null;function v1(r,i){if(Zl===null){var o=Zl=[];mm=0,Oo=yp(),Mo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return mm++,i.then(Gv,Gv),i}function Gv(){if(--mm===0&&Zl!==null){Mo!==null&&(Mo.status="fulfilled");var r=Zl;Zl=null,Oo=0,Mo=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function _1(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var h=0;h<o.length;h++)(0,o[h])(i)},function(h){for(u.status="rejected",u.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),u}var $v=j.S;j.S=function(r,i){DE=zt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&v1(r,i),$v!==null&&$v(r,i)};var Us=V(null);function pm(){var r=Us.current;return r!==null?r:At.pooledCache}function tf(r,i){i===null?de(Us,Us.current):de(Us,i.pool)}function Kv(){var r=pm();return r===null?null:{parent:en._currentValue,pool:r}}var Vo=Error(a(460)),gm=Error(a(474)),nf=Error(a(542)),rf={then:function(){}};function Yv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Qv(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(zr,zr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Wv(r),r;default:if(typeof i.status=="string")i.then(zr,zr);else{if(r=At,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=u}},function(u){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Wv(r),r}throw zs=i,Vo}}function js(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(zs=o,Vo):o}}var zs=null;function Xv(){if(zs===null)throw Error(a(459));var r=zs;return zs=null,r}function Wv(r){if(r===Vo||r===nf)throw Error(a(483))}var Po=null,eu=0;function af(r){var i=eu;return eu+=1,Po===null&&(Po=[]),Qv(Po,r,i)}function tu(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function sf(r,i){throw i.$$typeof===S?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Jv(r){function i($,F){if(r){var X=$.deletions;X===null?($.deletions=[F],$.flags|=16):X.push(F)}}function o($,F){if(!r)return null;for(;F!==null;)i($,F),F=F.sibling;return null}function u($){for(var F=new Map;$!==null;)$.key!==null?F.set($.key,$):F.set($.index,$),$=$.sibling;return F}function h($,F){return $=Pi($,F),$.index=0,$.sibling=null,$}function m($,F,X){return $.index=X,r?(X=$.alternate,X!==null?(X=X.index,X<F?($.flags|=67108866,F):X):($.flags|=67108866,F)):($.flags|=1048576,F)}function _($){return r&&$.alternate===null&&($.flags|=67108866),$}function w($,F,X,le){return F===null||F.tag!==6?(F=im(X,$.mode,le),F.return=$,F):(F=h(F,X),F.return=$,F)}function U($,F,X,le){var xe=X.type;return xe===z?oe($,F,X.props.children,le,X.key):F!==null&&(F.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===A&&js(xe)===F.type)?(F=h(F,X.props),tu(F,X),F.return=$,F):(F=Wc(X.type,X.key,X.props,null,$.mode,le),tu(F,X),F.return=$,F)}function W($,F,X,le){return F===null||F.tag!==4||F.stateNode.containerInfo!==X.containerInfo||F.stateNode.implementation!==X.implementation?(F=am(X,$.mode,le),F.return=$,F):(F=h(F,X.children||[]),F.return=$,F)}function oe($,F,X,le,xe){return F===null||F.tag!==7?(F=Vs(X,$.mode,le,xe),F.return=$,F):(F=h(F,X),F.return=$,F)}function ce($,F,X){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=im(""+F,$.mode,X),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case C:return X=Wc(F.type,F.key,F.props,null,$.mode,X),tu(X,F),X.return=$,X;case L:return F=am(F,$.mode,X),F.return=$,F;case A:return F=js(F),ce($,F,X)}if(qe(F)||k(F))return F=Vs(F,$.mode,X,null),F.return=$,F;if(typeof F.then=="function")return ce($,af(F),X);if(F.$$typeof===K)return ce($,ef($,F),X);sf($,F)}return null}function ee($,F,X,le){var xe=F!==null?F.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return xe!==null?null:w($,F,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case C:return X.key===xe?U($,F,X,le):null;case L:return X.key===xe?W($,F,X,le):null;case A:return X=js(X),ee($,F,X,le)}if(qe(X)||k(X))return xe!==null?null:oe($,F,X,le,null);if(typeof X.then=="function")return ee($,F,af(X),le);if(X.$$typeof===K)return ee($,F,ef($,X),le);sf($,X)}return null}function ae($,F,X,le,xe){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return $=$.get(X)||null,w(F,$,""+le,xe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case C:return $=$.get(le.key===null?X:le.key)||null,U(F,$,le,xe);case L:return $=$.get(le.key===null?X:le.key)||null,W(F,$,le,xe);case A:return le=js(le),ae($,F,X,le,xe)}if(qe(le)||k(le))return $=$.get(X)||null,oe(F,$,le,xe,null);if(typeof le.then=="function")return ae($,F,X,af(le),xe);if(le.$$typeof===K)return ae($,F,X,ef(F,le),xe);sf(F,le)}return null}function Ce($,F,X,le){for(var xe=null,ot=null,Ie=F,Ke=F=0,tt=null;Ie!==null&&Ke<X.length;Ke++){Ie.index>Ke?(tt=Ie,Ie=null):tt=Ie.sibling;var lt=ee($,Ie,X[Ke],le);if(lt===null){Ie===null&&(Ie=tt);break}r&&Ie&&lt.alternate===null&&i($,Ie),F=m(lt,F,Ke),ot===null?xe=lt:ot.sibling=lt,ot=lt,Ie=tt}if(Ke===X.length)return o($,Ie),at&&Li($,Ke),xe;if(Ie===null){for(;Ke<X.length;Ke++)Ie=ce($,X[Ke],le),Ie!==null&&(F=m(Ie,F,Ke),ot===null?xe=Ie:ot.sibling=Ie,ot=Ie);return at&&Li($,Ke),xe}for(Ie=u(Ie);Ke<X.length;Ke++)tt=ae(Ie,$,Ke,X[Ke],le),tt!==null&&(r&&tt.alternate!==null&&Ie.delete(tt.key===null?Ke:tt.key),F=m(tt,F,Ke),ot===null?xe=tt:ot.sibling=tt,ot=tt);return r&&Ie.forEach(function(Ga){return i($,Ga)}),at&&Li($,Ke),xe}function Ve($,F,X,le){if(X==null)throw Error(a(151));for(var xe=null,ot=null,Ie=F,Ke=F=0,tt=null,lt=X.next();Ie!==null&&!lt.done;Ke++,lt=X.next()){Ie.index>Ke?(tt=Ie,Ie=null):tt=Ie.sibling;var Ga=ee($,Ie,lt.value,le);if(Ga===null){Ie===null&&(Ie=tt);break}r&&Ie&&Ga.alternate===null&&i($,Ie),F=m(Ga,F,Ke),ot===null?xe=Ga:ot.sibling=Ga,ot=Ga,Ie=tt}if(lt.done)return o($,Ie),at&&Li($,Ke),xe;if(Ie===null){for(;!lt.done;Ke++,lt=X.next())lt=ce($,lt.value,le),lt!==null&&(F=m(lt,F,Ke),ot===null?xe=lt:ot.sibling=lt,ot=lt);return at&&Li($,Ke),xe}for(Ie=u(Ie);!lt.done;Ke++,lt=X.next())lt=ae(Ie,$,Ke,lt.value,le),lt!==null&&(r&&lt.alternate!==null&&Ie.delete(lt.key===null?Ke:lt.key),F=m(lt,F,Ke),ot===null?xe=lt:ot.sibling=lt,ot=lt);return r&&Ie.forEach(function(NC){return i($,NC)}),at&&Li($,Ke),xe}function Tt($,F,X,le){if(typeof X=="object"&&X!==null&&X.type===z&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case C:e:{for(var xe=X.key;F!==null;){if(F.key===xe){if(xe=X.type,xe===z){if(F.tag===7){o($,F.sibling),le=h(F,X.props.children),le.return=$,$=le;break e}}else if(F.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===A&&js(xe)===F.type){o($,F.sibling),le=h(F,X.props),tu(le,X),le.return=$,$=le;break e}o($,F);break}else i($,F);F=F.sibling}X.type===z?(le=Vs(X.props.children,$.mode,le,X.key),le.return=$,$=le):(le=Wc(X.type,X.key,X.props,null,$.mode,le),tu(le,X),le.return=$,$=le)}return _($);case L:e:{for(xe=X.key;F!==null;){if(F.key===xe)if(F.tag===4&&F.stateNode.containerInfo===X.containerInfo&&F.stateNode.implementation===X.implementation){o($,F.sibling),le=h(F,X.children||[]),le.return=$,$=le;break e}else{o($,F);break}else i($,F);F=F.sibling}le=am(X,$.mode,le),le.return=$,$=le}return _($);case A:return X=js(X),Tt($,F,X,le)}if(qe(X))return Ce($,F,X,le);if(k(X)){if(xe=k(X),typeof xe!="function")throw Error(a(150));return X=xe.call(X),Ve($,F,X,le)}if(typeof X.then=="function")return Tt($,F,af(X),le);if(X.$$typeof===K)return Tt($,F,ef($,X),le);sf($,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,F!==null&&F.tag===6?(o($,F.sibling),le=h(F,X),le.return=$,$=le):(o($,F),le=im(X,$.mode,le),le.return=$,$=le),_($)):o($,F)}return function($,F,X,le){try{eu=0;var xe=Tt($,F,X,le);return Po=null,xe}catch(Ie){if(Ie===Vo||Ie===nf)throw Ie;var ot=lr(29,Ie,null,$.mode);return ot.lanes=le,ot.return=$,ot}finally{}}}var Bs=Jv(!0),Zv=Jv(!1),Ia=!1;function ym(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Da(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Na(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ft&2)!==0){var h=u.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),u.pending=i,i=Xc(r),Lv(r,null,o),i}return Qc(r,u,i,o),Xc(r)}function nu(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,P(r,o)}}function _m(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?h=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?h=m=i:m=m.next=i}else h=m=i;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var Em=!1;function ru(){if(Em){var r=Mo;if(r!==null)throw r}}function iu(r,i,o,u){Em=!1;var h=r.updateQueue;Ia=!1;var m=h.firstBaseUpdate,_=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var U=w,W=U.next;U.next=null,_===null?m=W:_.next=W,_=U;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,w=oe.lastBaseUpdate,w!==_&&(w===null?oe.firstBaseUpdate=W:w.next=W,oe.lastBaseUpdate=U))}if(m!==null){var ce=h.baseState;_=0,oe=W=U=null,w=m;do{var ee=w.lane&-536870913,ae=ee!==w.lane;if(ae?(et&ee)===ee:(u&ee)===ee){ee!==0&&ee===Oo&&(Em=!0),oe!==null&&(oe=oe.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ce=r,Ve=w;ee=i;var Tt=o;switch(Ve.tag){case 1:if(Ce=Ve.payload,typeof Ce=="function"){ce=Ce.call(Tt,ce,ee);break e}ce=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Ve.payload,ee=typeof Ce=="function"?Ce.call(Tt,ce,ee):Ce,ee==null)break e;ce=E({},ce,ee);break e;case 2:Ia=!0}}ee=w.callback,ee!==null&&(r.flags|=64,ae&&(r.flags|=8192),ae=h.callbacks,ae===null?h.callbacks=[ee]:ae.push(ee))}else ae={lane:ee,tag:w.tag,payload:w.payload,callback:w.callback,next:null},oe===null?(W=oe=ae,U=ce):oe=oe.next=ae,_|=ee;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;ae=w,w=ae.next,ae.next=null,h.lastBaseUpdate=ae,h.shared.pending=null}}while(!0);oe===null&&(U=ce),h.baseState=U,h.firstBaseUpdate=W,h.lastBaseUpdate=oe,m===null&&(h.shared.lanes=0),Pa|=_,r.lanes=_,r.memoizedState=ce}}function e_(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function t_(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)e_(o[r],i)}var Lo=V(null),of=V(0);function n_(r,i){r=Ki,de(of,r),de(Lo,i),Ki=r|i.baseLanes}function Tm(){de(of,Ki),de(Lo,Lo.current)}function bm(){Ki=of.current,te(Lo),te(of)}var ur=V(null),xr=null;function xa(r){var i=r.alternate;de(Qt,Qt.current&1),de(ur,r),xr===null&&(i===null||Lo.current!==null||i.memoizedState!==null)&&(xr=r)}function Sm(r){de(Qt,Qt.current),de(ur,r),xr===null&&(xr=r)}function r_(r){r.tag===22?(de(Qt,Qt.current),de(ur,r),xr===null&&(xr=r)):Oa()}function Oa(){de(Qt,Qt.current),de(ur,ur.current)}function cr(r){te(ur),xr===r&&(xr=null),te(Qt)}var Qt=V(0);function lf(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Dp(o)||Np(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ji=0,He=null,_t=null,tn=null,uf=!1,ko=!1,Fs=!1,cf=0,au=0,Uo=null,E1=0;function Ht(){throw Error(a(321))}function Am(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!or(r[o],i[o]))return!1;return!0}function wm(r,i,o,u,h,m){return ji=m,He=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,j.H=r===null||r.memoizedState===null?z_:zm,Fs=!1,m=o(u,h),Fs=!1,ko&&(m=a_(i,o,u,h)),i_(r),m}function i_(r){j.H=lu;var i=_t!==null&&_t.next!==null;if(ji=0,tn=_t=He=null,uf=!1,au=0,Uo=null,i)throw Error(a(300));r===null||nn||(r=r.dependencies,r!==null&&Zc(r)&&(nn=!0))}function a_(r,i,o,u){He=r;var h=0;do{if(ko&&(Uo=null),au=0,ko=!1,25<=h)throw Error(a(301));if(h+=1,tn=_t=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}j.H=B_,m=i(o,u)}while(ko);return m}function T1(){var r=j.H,i=r.useState()[0];return i=typeof i.then=="function"?su(i):i,r=r.useState()[0],(_t!==null?_t.memoizedState:null)!==r&&(He.flags|=1024),i}function Rm(){var r=cf!==0;return cf=0,r}function Cm(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Im(r){if(uf){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}uf=!1}ji=0,tn=_t=He=null,ko=!1,au=cf=0,Uo=null}function Un(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?He.memoizedState=tn=r:tn=tn.next=r,tn}function Xt(){if(_t===null){var r=He.alternate;r=r!==null?r.memoizedState:null}else r=_t.next;var i=tn===null?He.memoizedState:tn.next;if(i!==null)tn=i,_t=r;else{if(r===null)throw He.alternate===null?Error(a(467)):Error(a(310));_t=r,r={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},tn===null?He.memoizedState=tn=r:tn=tn.next=r}return tn}function ff(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function su(r){var i=au;return au+=1,Uo===null&&(Uo=[]),r=Qv(Uo,r,i),i=He,(tn===null?i.memoizedState:tn.next)===null&&(i=i.alternate,j.H=i===null||i.memoizedState===null?z_:zm),r}function hf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return su(r);if(r.$$typeof===K)return vn(r)}throw Error(a(438,String(r)))}function Dm(r){var i=null,o=He.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=He.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=ff(),He.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=N;return i.index++,o}function zi(r,i){return typeof i=="function"?i(r):i}function df(r){var i=Xt();return Nm(i,_t,r)}function Nm(r,i,o){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var h=r.baseQueue,m=u.pending;if(m!==null){if(h!==null){var _=h.next;h.next=m.next,m.next=_}i.baseQueue=h=m,u.pending=null}if(m=r.baseState,h===null)r.memoizedState=m;else{i=h.next;var w=_=null,U=null,W=i,oe=!1;do{var ce=W.lane&-536870913;if(ce!==W.lane?(et&ce)===ce:(ji&ce)===ce){var ee=W.revertLane;if(ee===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ce===Oo&&(oe=!0);else if((ji&ee)===ee){W=W.next,ee===Oo&&(oe=!0);continue}else ce={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},U===null?(w=U=ce,_=m):U=U.next=ce,He.lanes|=ee,Pa|=ee;ce=W.action,Fs&&o(m,ce),m=W.hasEagerState?W.eagerState:o(m,ce)}else ee={lane:ce,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},U===null?(w=U=ee,_=m):U=U.next=ee,He.lanes|=ce,Pa|=ce;W=W.next}while(W!==null&&W!==i);if(U===null?_=m:U.next=w,!or(m,r.memoizedState)&&(nn=!0,oe&&(o=Mo,o!==null)))throw o;r.memoizedState=m,r.baseState=_,r.baseQueue=U,u.lastRenderedState=m}return h===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function xm(r){var i=Xt(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var u=o.dispatch,h=o.pending,m=i.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do m=r(m,_.action),_=_.next;while(_!==h);or(m,i.memoizedState)||(nn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function s_(r,i,o){var u=He,h=Xt(),m=at;if(m){if(o===void 0)throw Error(a(407));o=o()}else o=i();var _=!or((_t||h).memoizedState,o);if(_&&(h.memoizedState=o,nn=!0),h=h.queue,Vm(u_.bind(null,u,h,r),[r]),h.getSnapshot!==i||_||tn!==null&&tn.memoizedState.tag&1){if(u.flags|=2048,jo(9,{destroy:void 0},l_.bind(null,u,h,o,i),null),At===null)throw Error(a(349));m||(ji&127)!==0||o_(u,i,o)}return o}function o_(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=He.updateQueue,i===null?(i=ff(),He.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function l_(r,i,o,u){i.value=o,i.getSnapshot=u,c_(i)&&f_(r)}function u_(r,i,o){return o(function(){c_(i)&&f_(r)})}function c_(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!or(r,o)}catch{return!0}}function f_(r){var i=Ms(r,2);i!==null&&Qn(i,r,2)}function Om(r){var i=Un();if(typeof r=="function"){var o=r;if(r=o(),Fs){Vn(!0);try{o()}finally{Vn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:r},i}function h_(r,i,o,u){return r.baseState=o,Nm(r,_t,typeof u=="function"?u:zi)}function b1(r,i,o,u,h){if(gf(r))throw Error(a(485));if(r=i.action,r!==null){var m={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};j.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,d_(i,m)):(m.next=o.next,i.pending=o.next=m)}}function d_(r,i){var o=i.action,u=i.payload,h=r.state;if(i.isTransition){var m=j.T,_={};j.T=_;try{var w=o(h,u),U=j.S;U!==null&&U(_,w),m_(r,i,w)}catch(W){Mm(r,i,W)}finally{m!==null&&_.types!==null&&(m.types=_.types),j.T=m}}else try{m=o(h,u),m_(r,i,m)}catch(W){Mm(r,i,W)}}function m_(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){p_(r,i,u)},function(u){return Mm(r,i,u)}):p_(r,i,o)}function p_(r,i,o){i.status="fulfilled",i.value=o,g_(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,d_(r,o)))}function Mm(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,g_(i),i=i.next;while(i!==u)}r.action=null}function g_(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function y_(r,i){return i}function v_(r,i){if(at){var o=At.formState;if(o!==null){e:{var u=He;if(at){if(xt){t:{for(var h=xt,m=Nr;h.nodeType!==8;){if(!m){h=null;break t}if(h=Or(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){xt=Or(h.nextSibling),u=h.data==="F!";break e}}Ra(u)}u=!1}u&&(i=o[0])}}return o=Un(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y_,lastRenderedState:i},o.queue=u,o=k_.bind(null,He,u),u.dispatch=o,u=Om(!1),m=jm.bind(null,He,!1,u.queue),u=Un(),h={state:i,dispatch:null,action:r,pending:null},u.queue=h,o=b1.bind(null,He,h,m,o),h.dispatch=o,u.memoizedState=r,[i,o,!1]}function __(r){var i=Xt();return E_(i,_t,r)}function E_(r,i,o){if(i=Nm(r,i,y_)[0],r=df(zi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=su(i)}catch(_){throw _===Vo?nf:_}else u=i;i=Xt();var h=i.queue,m=h.dispatch;return o!==i.memoizedState&&(He.flags|=2048,jo(9,{destroy:void 0},S1.bind(null,h,o),null)),[u,m,r]}function S1(r,i){r.action=i}function T_(r){var i=Xt(),o=_t;if(o!==null)return E_(i,o,r);Xt(),i=i.memoizedState,o=Xt();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function jo(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=He.updateQueue,i===null&&(i=ff(),He.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function b_(){return Xt().memoizedState}function mf(r,i,o,u){var h=Un();He.flags|=r,h.memoizedState=jo(1|i,{destroy:void 0},o,u===void 0?null:u)}function pf(r,i,o,u){var h=Xt();u=u===void 0?null:u;var m=h.memoizedState.inst;_t!==null&&u!==null&&Am(u,_t.memoizedState.deps)?h.memoizedState=jo(i,m,o,u):(He.flags|=r,h.memoizedState=jo(1|i,m,o,u))}function S_(r,i){mf(8390656,8,r,i)}function Vm(r,i){pf(2048,8,r,i)}function A1(r){He.flags|=4;var i=He.updateQueue;if(i===null)i=ff(),He.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function A_(r){var i=Xt().memoizedState;return A1({ref:i,nextImpl:r}),function(){if((ft&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function w_(r,i){return pf(4,2,r,i)}function R_(r,i){return pf(4,4,r,i)}function C_(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function I_(r,i,o){o=o!=null?o.concat([r]):null,pf(4,4,C_.bind(null,i,r),o)}function Pm(){}function D_(r,i){var o=Xt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Am(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function N_(r,i){var o=Xt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Am(i,u[1]))return u[0];if(u=r(),Fs){Vn(!0);try{r()}finally{Vn(!1)}}return o.memoizedState=[u,i],u}function Lm(r,i,o){return o===void 0||(ji&1073741824)!==0&&(et&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=xE(),He.lanes|=r,Pa|=r,o)}function x_(r,i,o,u){return or(o,i)?o:Lo.current!==null?(r=Lm(r,o,u),or(r,i)||(nn=!0),r):(ji&42)===0||(ji&1073741824)!==0&&(et&261930)===0?(nn=!0,r.memoizedState=o):(r=xE(),He.lanes|=r,Pa|=r,i)}function O_(r,i,o,u,h){var m=ne.p;ne.p=m!==0&&8>m?m:8;var _=j.T,w={};j.T=w,jm(r,!1,i,o);try{var U=h(),W=j.S;if(W!==null&&W(w,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var oe=_1(U,u);ou(r,i,oe,dr(r))}else ou(r,i,u,dr(r))}catch(ce){ou(r,i,{then:function(){},status:"rejected",reason:ce},dr())}finally{ne.p=m,_!==null&&w.types!==null&&(_.types=w.types),j.T=_}}function w1(){}function km(r,i,o,u){if(r.tag!==5)throw Error(a(476));var h=M_(r).queue;O_(r,h,i,ie,o===null?w1:function(){return V_(r),o(u)})}function M_(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:ie},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function V_(r){var i=M_(r);i.next===null&&(i=r.alternate.memoizedState),ou(r,i.next.queue,{},dr())}function Um(){return vn(Au)}function P_(){return Xt().memoizedState}function L_(){return Xt().memoizedState}function R1(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=dr();r=Da(o);var u=Na(i,r,o);u!==null&&(Qn(u,i,o),nu(u,i,o)),i={cache:dm()},r.payload=i;return}i=i.return}}function C1(r,i,o){var u=dr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},gf(r)?U_(i,o):(o=nm(r,i,o,u),o!==null&&(Qn(o,r,u),j_(o,i,u)))}function k_(r,i,o){var u=dr();ou(r,i,o,u)}function ou(r,i,o,u){var h={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(gf(r))U_(i,h);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,w=m(_,o);if(h.hasEagerState=!0,h.eagerState=w,or(w,_))return Qc(r,i,h,0),At===null&&Yc(),!1}catch{}finally{}if(o=nm(r,i,h,u),o!==null)return Qn(o,r,u),j_(o,i,u),!0}return!1}function jm(r,i,o,u){if(u={lane:2,revertLane:yp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},gf(r)){if(i)throw Error(a(479))}else i=nm(r,o,u,2),i!==null&&Qn(i,r,2)}function gf(r){var i=r.alternate;return r===He||i!==null&&i===He}function U_(r,i){ko=uf=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function j_(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,P(r,o)}}var lu={readContext:vn,use:hf,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};lu.useEffectEvent=Ht;var z_={readContext:vn,use:hf,useCallback:function(r,i){return Un().memoizedState=[r,i===void 0?null:i],r},useContext:vn,useEffect:S_,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,mf(4194308,4,C_.bind(null,i,r),o)},useLayoutEffect:function(r,i){return mf(4194308,4,r,i)},useInsertionEffect:function(r,i){mf(4,2,r,i)},useMemo:function(r,i){var o=Un();i=i===void 0?null:i;var u=r();if(Fs){Vn(!0);try{r()}finally{Vn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=Un();if(o!==void 0){var h=o(i);if(Fs){Vn(!0);try{o(i)}finally{Vn(!1)}}}else h=i;return u.memoizedState=u.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},u.queue=r,r=r.dispatch=C1.bind(null,He,r),[u.memoizedState,r]},useRef:function(r){var i=Un();return r={current:r},i.memoizedState=r},useState:function(r){r=Om(r);var i=r.queue,o=k_.bind(null,He,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Pm,useDeferredValue:function(r,i){var o=Un();return Lm(o,r,i)},useTransition:function(){var r=Om(!1);return r=O_.bind(null,He,r.queue,!0,!1),Un().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=He,h=Un();if(at){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),At===null)throw Error(a(349));(et&127)!==0||o_(u,i,o)}h.memoizedState=o;var m={value:o,getSnapshot:i};return h.queue=m,S_(u_.bind(null,u,m,r),[r]),u.flags|=2048,jo(9,{destroy:void 0},l_.bind(null,u,m,o,i),null),o},useId:function(){var r=Un(),i=At.identifierPrefix;if(at){var o=pi,u=mi;o=(u&~(1<<32-Vt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=cf++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=E1++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Um,useFormState:v_,useActionState:v_,useOptimistic:function(r){var i=Un();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=jm.bind(null,He,!0,o),o.dispatch=i,[r,i]},useMemoCache:Dm,useCacheRefresh:function(){return Un().memoizedState=R1.bind(null,He)},useEffectEvent:function(r){var i=Un(),o={impl:r};return i.memoizedState=o,function(){if((ft&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},zm={readContext:vn,use:hf,useCallback:D_,useContext:vn,useEffect:Vm,useImperativeHandle:I_,useInsertionEffect:w_,useLayoutEffect:R_,useMemo:N_,useReducer:df,useRef:b_,useState:function(){return df(zi)},useDebugValue:Pm,useDeferredValue:function(r,i){var o=Xt();return x_(o,_t.memoizedState,r,i)},useTransition:function(){var r=df(zi)[0],i=Xt().memoizedState;return[typeof r=="boolean"?r:su(r),i]},useSyncExternalStore:s_,useId:P_,useHostTransitionStatus:Um,useFormState:__,useActionState:__,useOptimistic:function(r,i){var o=Xt();return h_(o,_t,r,i)},useMemoCache:Dm,useCacheRefresh:L_};zm.useEffectEvent=A_;var B_={readContext:vn,use:hf,useCallback:D_,useContext:vn,useEffect:Vm,useImperativeHandle:I_,useInsertionEffect:w_,useLayoutEffect:R_,useMemo:N_,useReducer:xm,useRef:b_,useState:function(){return xm(zi)},useDebugValue:Pm,useDeferredValue:function(r,i){var o=Xt();return _t===null?Lm(o,r,i):x_(o,_t.memoizedState,r,i)},useTransition:function(){var r=xm(zi)[0],i=Xt().memoizedState;return[typeof r=="boolean"?r:su(r),i]},useSyncExternalStore:s_,useId:P_,useHostTransitionStatus:Um,useFormState:T_,useActionState:T_,useOptimistic:function(r,i){var o=Xt();return _t!==null?h_(o,_t,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Dm,useCacheRefresh:L_};B_.useEffectEvent=A_;function Bm(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Fm={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=dr(),h=Da(u);h.payload=i,o!=null&&(h.callback=o),i=Na(r,h,u),i!==null&&(Qn(i,r,u),nu(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=dr(),h=Da(u);h.tag=1,h.payload=i,o!=null&&(h.callback=o),i=Na(r,h,u),i!==null&&(Qn(i,r,u),nu(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=dr(),u=Da(o);u.tag=2,i!=null&&(u.callback=i),i=Na(r,u,o),i!==null&&(Qn(i,r,o),nu(i,r,o))}};function F_(r,i,o,u,h,m,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,_):i.prototype&&i.prototype.isPureReactComponent?!Yl(o,u)||!Yl(h,m):!0}function H_(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&Fm.enqueueReplaceState(i,i.state,null)}function Hs(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=E({},o));for(var h in r)o[h]===void 0&&(o[h]=r[h])}return o}function q_(r){Kc(r)}function G_(r){console.error(r)}function $_(r){Kc(r)}function yf(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function K_(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Hm(r,i,o){return o=Da(o),o.tag=3,o.payload={element:null},o.callback=function(){yf(r,i)},o}function Y_(r){return r=Da(r),r.tag=3,r}function Q_(r,i,o,u){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var m=u.value;r.payload=function(){return h(m)},r.callback=function(){K_(i,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){K_(i,o,u),typeof h!="function"&&(La===null?La=new Set([this]):La.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function I1(r,i,o,u,h){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&xo(i,o,h,!0),o=ur.current,o!==null){switch(o.tag){case 31:case 13:return xr===null?Df():o.alternate===null&&qt===0&&(qt=3),o.flags&=-257,o.flags|=65536,o.lanes=h,u===rf?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),mp(r,u,h)),!1;case 22:return o.flags|=65536,u===rf?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),mp(r,u,h)),!1}throw Error(a(435,o.tag))}return mp(r,u,h),Df(),!1}if(at)return i=ur.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,u!==lm&&(r=Error(a(422),{cause:u}),Wl(Cr(r,o)))):(u!==lm&&(i=Error(a(423),{cause:u}),Wl(Cr(i,o))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,u=Cr(u,o),h=Hm(r.stateNode,u,h),_m(r,h),qt!==4&&(qt=2)),!1;var m=Error(a(520),{cause:u});if(m=Cr(m,o),gu===null?gu=[m]:gu.push(m),qt!==4&&(qt=2),i===null)return!0;u=Cr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=h&-h,o.lanes|=r,r=Hm(o.stateNode,u,r),_m(o,r),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(La===null||!La.has(m))))return o.flags|=65536,h&=-h,o.lanes|=h,h=Y_(h),Q_(h,r,o,u),_m(o,h),!1}o=o.return}while(o!==null);return!1}var qm=Error(a(461)),nn=!1;function _n(r,i,o,u){i.child=r===null?Zv(i,null,o,u):Bs(i,r.child,o,u)}function X_(r,i,o,u,h){o=o.render;var m=i.ref;if("ref"in u){var _={};for(var w in u)w!=="ref"&&(_[w]=u[w])}else _=u;return ks(i),u=wm(r,i,o,_,m,h),w=Rm(),r!==null&&!nn?(Cm(r,i,h),Bi(r,i,h)):(at&&w&&sm(i),i.flags|=1,_n(r,i,u,h),i.child)}function W_(r,i,o,u,h){if(r===null){var m=o.type;return typeof m=="function"&&!rm(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,J_(r,i,m,u,h)):(r=Wc(o.type,null,u,i,i.mode,h),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!Jm(r,h)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:Yl,o(_,u)&&r.ref===i.ref)return Bi(r,i,h)}return i.flags|=1,r=Pi(m,u),r.ref=i.ref,r.return=i,i.child=r}function J_(r,i,o,u,h){if(r!==null){var m=r.memoizedProps;if(Yl(m,u)&&r.ref===i.ref)if(nn=!1,i.pendingProps=u=m,Jm(r,h))(r.flags&131072)!==0&&(nn=!0);else return i.lanes=r.lanes,Bi(r,i,h)}return Gm(r,i,o,u,h)}function Z_(r,i,o,u){var h=u.children,m=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,r!==null){for(u=i.child=r.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;u=h&~m}else u=0,i.child=null;return eE(r,i,m,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&tf(i,m!==null?m.cachePool:null),m!==null?n_(i,m):Tm(),r_(i);else return u=i.lanes=536870912,eE(r,i,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(tf(i,m.cachePool),n_(i,m),Oa(),i.memoizedState=null):(r!==null&&tf(i,null),Tm(),Oa());return _n(r,i,h,o),i.child}function uu(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function eE(r,i,o,u,h){var m=pm();return m=m===null?null:{parent:en._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},r!==null&&tf(i,null),Tm(),r_(i),r!==null&&xo(r,i,u,!0),i.childLanes=h,null}function vf(r,i){return i=Ef({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function tE(r,i,o){return Bs(i,r.child,null,o),r=vf(i,i.pendingProps),r.flags|=2,cr(i),i.memoizedState=null,r}function D1(r,i,o){var u=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(at){if(u.mode==="hidden")return r=vf(i,u),i.lanes=536870912,uu(null,r);if(Sm(i),(r=xt)?(r=dT(r,Nr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Aa!==null?{id:mi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},o=Uv(r),o.return=i,i.child=o,yn=i,xt=null)):r=null,r===null)throw Ra(i);return i.lanes=536870912,null}return vf(i,u)}var m=r.memoizedState;if(m!==null){var _=m.dehydrated;if(Sm(i),h)if(i.flags&256)i.flags&=-257,i=tE(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(a(558));else if(nn||xo(r,i,o,!1),h=(o&r.childLanes)!==0,nn||h){if(u=At,u!==null&&(_=H(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,Ms(r,_),Qn(u,r,_),qm;Df(),i=tE(r,i,o)}else r=m.treeContext,xt=Or(_.nextSibling),yn=i,at=!0,wa=null,Nr=!1,r!==null&&Bv(i,r),i=vf(i,u),i.flags|=4096;return i}return r=Pi(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function _f(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function Gm(r,i,o,u,h){return ks(i),o=wm(r,i,o,u,void 0,h),u=Rm(),r!==null&&!nn?(Cm(r,i,h),Bi(r,i,h)):(at&&u&&sm(i),i.flags|=1,_n(r,i,o,h),i.child)}function nE(r,i,o,u,h,m){return ks(i),i.updateQueue=null,o=a_(i,u,o,h),i_(r),u=Rm(),r!==null&&!nn?(Cm(r,i,m),Bi(r,i,m)):(at&&u&&sm(i),i.flags|=1,_n(r,i,o,m),i.child)}function rE(r,i,o,u,h){if(ks(i),i.stateNode===null){var m=Co,_=o.contextType;typeof _=="object"&&_!==null&&(m=vn(_)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Fm,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},ym(i),_=o.contextType,m.context=typeof _=="object"&&_!==null?vn(_):Co,m.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Bm(i,o,_,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Fm.enqueueReplaceState(m,m.state,null),iu(i,u,m,h),ru(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var w=i.memoizedProps,U=Hs(o,w);m.props=U;var W=m.context,oe=o.contextType;_=Co,typeof oe=="object"&&oe!==null&&(_=vn(oe));var ce=o.getDerivedStateFromProps;oe=typeof ce=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,oe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||W!==_)&&H_(i,m,u,_),Ia=!1;var ee=i.memoizedState;m.state=ee,iu(i,u,m,h),ru(),W=i.memoizedState,w||ee!==W||Ia?(typeof ce=="function"&&(Bm(i,o,ce,u),W=i.memoizedState),(U=Ia||F_(i,o,U,u,ee,W,_))?(oe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=W),m.props=u,m.state=W,m.context=_,u=U):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,vm(r,i),_=i.memoizedProps,oe=Hs(o,_),m.props=oe,ce=i.pendingProps,ee=m.context,W=o.contextType,U=Co,typeof W=="object"&&W!==null&&(U=vn(W)),w=o.getDerivedStateFromProps,(W=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ce||ee!==U)&&H_(i,m,u,U),Ia=!1,ee=i.memoizedState,m.state=ee,iu(i,u,m,h),ru();var ae=i.memoizedState;_!==ce||ee!==ae||Ia||r!==null&&r.dependencies!==null&&Zc(r.dependencies)?(typeof w=="function"&&(Bm(i,o,w,u),ae=i.memoizedState),(oe=Ia||F_(i,o,oe,u,ee,ae,U)||r!==null&&r.dependencies!==null&&Zc(r.dependencies))?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ae,U),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ae,U)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ae),m.props=u,m.state=ae,m.context=U,u=oe):(typeof m.componentDidUpdate!="function"||_===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,_f(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=Bs(i,r.child,null,h),i.child=Bs(i,null,o,h)):_n(r,i,o,h),i.memoizedState=m.state,r=i.child):r=Bi(r,i,h),r}function iE(r,i,o,u){return Ps(),i.flags|=256,_n(r,i,o,u),i.child}var $m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Km(r){return{baseLanes:r,cachePool:Kv()}}function Ym(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=hr),r}function aE(r,i,o){var u=i.pendingProps,h=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=r!==null&&r.memoizedState===null?!1:(Qt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,r===null){if(at){if(h?xa(i):Oa(),(r=xt)?(r=dT(r,Nr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Aa!==null?{id:mi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},o=Uv(r),o.return=i,i.child=o,yn=i,xt=null)):r=null,r===null)throw Ra(i);return Np(r)?i.lanes=32:i.lanes=536870912,null}var w=u.children;return u=u.fallback,h?(Oa(),h=i.mode,w=Ef({mode:"hidden",children:w},h),u=Vs(u,h,o,null),w.return=i,u.return=i,w.sibling=u,i.child=w,u=i.child,u.memoizedState=Km(o),u.childLanes=Ym(r,_,o),i.memoizedState=$m,uu(null,u)):(xa(i),Qm(i,w))}var U=r.memoizedState;if(U!==null&&(w=U.dehydrated,w!==null)){if(m)i.flags&256?(xa(i),i.flags&=-257,i=Xm(r,i,o)):i.memoizedState!==null?(Oa(),i.child=r.child,i.flags|=128,i=null):(Oa(),w=u.fallback,h=i.mode,u=Ef({mode:"visible",children:u.children},h),w=Vs(w,h,o,null),w.flags|=2,u.return=i,w.return=i,u.sibling=w,i.child=u,Bs(i,r.child,null,o),u=i.child,u.memoizedState=Km(o),u.childLanes=Ym(r,_,o),i.memoizedState=$m,i=uu(null,u));else if(xa(i),Np(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var W=_.dgst;_=W,u=Error(a(419)),u.stack="",u.digest=_,Wl({value:u,source:null,stack:null}),i=Xm(r,i,o)}else if(nn||xo(r,i,o,!1),_=(o&r.childLanes)!==0,nn||_){if(_=At,_!==null&&(u=H(_,o),u!==0&&u!==U.retryLane))throw U.retryLane=u,Ms(r,u),Qn(_,r,u),qm;Dp(w)||Df(),i=Xm(r,i,o)}else Dp(w)?(i.flags|=192,i.child=r.child,i=null):(r=U.treeContext,xt=Or(w.nextSibling),yn=i,at=!0,wa=null,Nr=!1,r!==null&&Bv(i,r),i=Qm(i,u.children),i.flags|=4096);return i}return h?(Oa(),w=u.fallback,h=i.mode,U=r.child,W=U.sibling,u=Pi(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,W!==null?w=Pi(W,w):(w=Vs(w,h,o,null),w.flags|=2),w.return=i,u.return=i,u.sibling=w,i.child=u,uu(null,u),u=i.child,w=r.child.memoizedState,w===null?w=Km(o):(h=w.cachePool,h!==null?(U=en._currentValue,h=h.parent!==U?{parent:U,pool:U}:h):h=Kv(),w={baseLanes:w.baseLanes|o,cachePool:h}),u.memoizedState=w,u.childLanes=Ym(r,_,o),i.memoizedState=$m,uu(r.child,u)):(xa(i),o=r.child,r=o.sibling,o=Pi(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(_=i.deletions,_===null?(i.deletions=[r],i.flags|=16):_.push(r)),i.child=o,i.memoizedState=null,o)}function Qm(r,i){return i=Ef({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Ef(r,i){return r=lr(22,r,null,i),r.lanes=0,r}function Xm(r,i,o){return Bs(i,r.child,null,o),r=Qm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function sE(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),fm(r.return,i,o)}function Wm(r,i,o,u,h,m){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=h,_.treeForkCount=m)}function oE(r,i,o){var u=i.pendingProps,h=u.revealOrder,m=u.tail;u=u.children;var _=Qt.current,w=(_&2)!==0;if(w?(_=_&1|2,i.flags|=128):_&=1,de(Qt,_),_n(r,i,u,o),u=at?Xl:0,!w&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&sE(r,o,i);else if(r.tag===19)sE(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(h){case"forwards":for(o=i.child,h=null;o!==null;)r=o.alternate,r!==null&&lf(r)===null&&(h=o),o=o.sibling;o=h,o===null?(h=i.child,i.child=null):(h=o.sibling,o.sibling=null),Wm(i,!1,h,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,h=i.child,i.child=null;h!==null;){if(r=h.alternate,r!==null&&lf(r)===null){i.child=h;break}r=h.sibling,h.sibling=o,o=h,h=r}Wm(i,!0,o,null,m,u);break;case"together":Wm(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Bi(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Pa|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(xo(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=Pi(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Pi(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Jm(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Zc(r)))}function N1(r,i,o){switch(i.tag){case 3:bt(i,i.stateNode.containerInfo),Ca(i,en,r.memoizedState.cache),Ps();break;case 27:case 5:Ii(i);break;case 4:bt(i,i.stateNode.containerInfo);break;case 10:Ca(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Sm(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(xa(i),i.flags|=128,null):(o&i.child.childLanes)!==0?aE(r,i,o):(xa(i),r=Bi(r,i,o),r!==null?r.sibling:null);xa(i);break;case 19:var h=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(xo(r,i,o,!1),u=(o&i.childLanes)!==0),h){if(u)return oE(r,i,o);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),de(Qt,Qt.current),u)break;return null;case 22:return i.lanes=0,Z_(r,i,o,i.pendingProps);case 24:Ca(i,en,r.memoizedState.cache)}return Bi(r,i,o)}function lE(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)nn=!0;else{if(!Jm(r,o)&&(i.flags&128)===0)return nn=!1,N1(r,i,o);nn=(r.flags&131072)!==0}else nn=!1,at&&(i.flags&1048576)!==0&&zv(i,Xl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=js(i.elementType),i.type=r,typeof r=="function")rm(r)?(u=Hs(r,u),i.tag=1,i=rE(null,i,r,u,o)):(i.tag=0,i=Gm(null,i,r,u,o));else{if(r!=null){var h=r.$$typeof;if(h===Z){i.tag=11,i=X_(null,i,r,u,o);break e}else if(h===b){i.tag=14,i=W_(null,i,r,u,o);break e}}throw i=Me(r)||r,Error(a(306,i,""))}}return i;case 0:return Gm(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,h=Hs(u,i.pendingProps),rE(r,i,u,h,o);case 3:e:{if(bt(i,i.stateNode.containerInfo),r===null)throw Error(a(387));u=i.pendingProps;var m=i.memoizedState;h=m.element,vm(r,i),iu(i,u,null,o);var _=i.memoizedState;if(u=_.cache,Ca(i,en,u),u!==m.cache&&hm(i,[en],o,!0),ru(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=iE(r,i,u,o);break e}else if(u!==h){h=Cr(Error(a(424)),i),Wl(h),i=iE(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(xt=Or(r.firstChild),yn=i,at=!0,wa=null,Nr=!0,o=Zv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ps(),u===h){i=Bi(r,i,o);break e}_n(r,i,u,o)}i=i.child}return i;case 26:return _f(r,i),r===null?(o=_T(i.type,null,i.pendingProps,null))?i.memoizedState=o:at||(o=i.type,r=i.pendingProps,u=Lf(De.current).createElement(o),u[ye]=i,u[_e]=r,En(u,o,r),It(u),i.stateNode=u):i.memoizedState=_T(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Ii(i),r===null&&at&&(u=i.stateNode=gT(i.type,i.pendingProps,De.current),yn=i,Nr=!0,h=xt,za(i.type)?(xp=h,xt=Or(u.firstChild)):xt=h),_n(r,i,i.pendingProps.children,o),_f(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&at&&((h=u=xt)&&(u=sC(u,i.type,i.pendingProps,Nr),u!==null?(i.stateNode=u,yn=i,xt=Or(u.firstChild),Nr=!1,h=!0):h=!1),h||Ra(i)),Ii(i),h=i.type,m=i.pendingProps,_=r!==null?r.memoizedProps:null,u=m.children,Rp(h,m)?u=null:_!==null&&Rp(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=wm(r,i,T1,null,null,o),Au._currentValue=h),_f(r,i),_n(r,i,u,o),i.child;case 6:return r===null&&at&&((r=o=xt)&&(o=oC(o,i.pendingProps,Nr),o!==null?(i.stateNode=o,yn=i,xt=null,r=!0):r=!1),r||Ra(i)),null;case 13:return aE(r,i,o);case 4:return bt(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Bs(i,null,u,o):_n(r,i,u,o),i.child;case 11:return X_(r,i,i.type,i.pendingProps,o);case 7:return _n(r,i,i.pendingProps,o),i.child;case 8:return _n(r,i,i.pendingProps.children,o),i.child;case 12:return _n(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ca(i,i.type,u.value),_n(r,i,u.children,o),i.child;case 9:return h=i.type._context,u=i.pendingProps.children,ks(i),h=vn(h),u=u(h),i.flags|=1,_n(r,i,u,o),i.child;case 14:return W_(r,i,i.type,i.pendingProps,o);case 15:return J_(r,i,i.type,i.pendingProps,o);case 19:return oE(r,i,o);case 31:return D1(r,i,o);case 22:return Z_(r,i,o,i.pendingProps);case 24:return ks(i),u=vn(en),r===null?(h=pm(),h===null&&(h=At,m=dm(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=o),h=m),i.memoizedState={parent:u,cache:h},ym(i),Ca(i,en,h)):((r.lanes&o)!==0&&(vm(r,i),iu(i,null,null,o),ru()),h=r.memoizedState,m=i.memoizedState,h.parent!==u?(h={parent:u,cache:u},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ca(i,en,u)):(u=m.cache,Ca(i,en,u),u!==h.cache&&hm(i,[en],o,!0))),_n(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Fi(r){r.flags|=4}function Zm(r,i,o,u,h){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(h&335544128)===h)if(r.stateNode.complete)r.flags|=8192;else if(PE())r.flags|=8192;else throw zs=rf,gm}else r.flags&=-16777217}function uE(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!AT(i))if(PE())r.flags|=8192;else throw zs=rf,gm}function Tf(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Ni():536870912,r.lanes|=i,Ho|=i)}function cu(r,i){if(!at)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Ot(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var h=r.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function x1(r,i,o){var u=i.pendingProps;switch(om(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(i),null;case 1:return Ot(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Ui(en),wt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(No(i)?Fi(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,um())),Ot(i),null;case 26:var h=i.type,m=i.memoizedState;return r===null?(Fi(i),m!==null?(Ot(i),uE(i,m)):(Ot(i),Zm(i,h,null,u,o))):m?m!==r.memoizedState?(Fi(i),Ot(i),uE(i,m)):(Ot(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&Fi(i),Ot(i),Zm(i,h,r,u,o)),null;case 27:if(fa(i),o=De.current,h=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Fi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Ot(i),null}r=pe.current,No(i)?Fv(i):(r=gT(h,u,o),i.stateNode=r,Fi(i))}return Ot(i),null;case 5:if(fa(i),h=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Fi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Ot(i),null}if(m=pe.current,No(i))Fv(i);else{var _=Lf(De.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(h,{is:u.is}):_.createElement(h)}}m[ye]=i,m[_e]=u;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(En(m,h,u),h){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Fi(i)}}return Ot(i),Zm(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Fi(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(r=De.current,No(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,h=yn,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}r[ye]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||aT(r.nodeValue,o)),r||Ra(i,!0)}else r=Lf(r).createTextNode(u),r[ye]=i,i.stateNode=r}return Ot(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=No(i),o!==null){if(r===null){if(!u)throw Error(a(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(557));r[ye]=i}else Ps(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ot(i),r=!1}else o=um(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(cr(i),i):(cr(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Ot(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=No(i),u!==null&&u.dehydrated!==null){if(r===null){if(!h)throw Error(a(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[ye]=i}else Ps(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ot(i),h=!1}else h=um(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(cr(i),i):(cr(i),null)}return cr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),Tf(i,i.updateQueue),Ot(i),null);case 4:return wt(),r===null&&Tp(i.stateNode.containerInfo),Ot(i),null;case 10:return Ui(i.type),Ot(i),null;case 19:if(te(Qt),u=i.memoizedState,u===null)return Ot(i),null;if(h=(i.flags&128)!==0,m=u.rendering,m===null)if(h)cu(u,!1);else{if(qt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=lf(r),m!==null){for(i.flags|=128,cu(u,!1),r=m.updateQueue,i.updateQueue=r,Tf(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)kv(o,r),o=o.sibling;return de(Qt,Qt.current&1|2),at&&Li(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&zt()>Rf&&(i.flags|=128,h=!0,cu(u,!1),i.lanes=4194304)}else{if(!h)if(r=lf(m),r!==null){if(i.flags|=128,h=!0,r=r.updateQueue,i.updateQueue=r,Tf(i,r),cu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!at)return Ot(i),null}else 2*zt()-u.renderingStartTime>Rf&&o!==536870912&&(i.flags|=128,h=!0,cu(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(r=u.last,r!==null?r.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=zt(),r.sibling=null,o=Qt.current,de(Qt,h?o&1|2:o&1),at&&Li(i,u.treeForkCount),r):(Ot(i),null);case 22:case 23:return cr(i),bm(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Ot(i),i.subtreeFlags&6&&(i.flags|=8192)):Ot(i),o=i.updateQueue,o!==null&&Tf(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&te(Us),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ui(en),Ot(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function O1(r,i){switch(om(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Ui(en),wt(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return fa(i),null;case 31:if(i.memoizedState!==null){if(cr(i),i.alternate===null)throw Error(a(340));Ps()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(cr(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Ps()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return te(Qt),null;case 4:return wt(),null;case 10:return Ui(i.type),null;case 22:case 23:return cr(i),bm(),r!==null&&te(Us),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Ui(en),null;case 25:return null;default:return null}}function cE(r,i){switch(om(i),i.tag){case 3:Ui(en),wt();break;case 26:case 27:case 5:fa(i);break;case 4:wt();break;case 31:i.memoizedState!==null&&cr(i);break;case 13:cr(i);break;case 19:te(Qt);break;case 10:Ui(i.type);break;case 22:case 23:cr(i),bm(),r!==null&&te(Us);break;case 24:Ui(en)}}function fu(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var h=u.next;o=h;do{if((o.tag&r)===r){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==h)}}catch(w){mt(i,i.return,w)}}function Ma(r,i,o){try{var u=i.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var m=h.next;u=m;do{if((u.tag&r)===r){var _=u.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,h=i;var U=o,W=w;try{W()}catch(oe){mt(h,U,oe)}}}u=u.next}while(u!==m)}}catch(oe){mt(i,i.return,oe)}}function fE(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{t_(i,o)}catch(u){mt(r,r.return,u)}}}function hE(r,i,o){o.props=Hs(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){mt(r,i,u)}}function hu(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(h){mt(r,i,h)}}function gi(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(h){mt(r,i,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){mt(r,i,h)}else o.current=null}function dE(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(h){mt(r,r.return,h)}}function ep(r,i,o){try{var u=r.stateNode;eC(u,r.type,o,i),u[_e]=i}catch(h){mt(r,r.return,h)}}function mE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&za(r.type)||r.tag===4}function tp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||mE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&za(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function np(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=zr));else if(u!==4&&(u===27&&za(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(np(r,i,o),r=r.sibling;r!==null;)np(r,i,o),r=r.sibling}function bf(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&za(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(bf(r,i,o),r=r.sibling;r!==null;)bf(r,i,o),r=r.sibling}function pE(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);En(i,u,o),i[ye]=r,i[_e]=o}catch(m){mt(r,r.return,m)}}var Hi=!1,rn=!1,rp=!1,gE=typeof WeakSet=="function"?WeakSet:Set,dn=null;function M1(r,i){if(r=r.containerInfo,Ap=Hf,r=Iv(r),Xd(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,w=-1,U=-1,W=0,oe=0,ce=r,ee=null;t:for(;;){for(var ae;ce!==o||h!==0&&ce.nodeType!==3||(w=_+h),ce!==m||u!==0&&ce.nodeType!==3||(U=_+u),ce.nodeType===3&&(_+=ce.nodeValue.length),(ae=ce.firstChild)!==null;)ee=ce,ce=ae;for(;;){if(ce===r)break t;if(ee===o&&++W===h&&(w=_),ee===m&&++oe===u&&(U=_),(ae=ce.nextSibling)!==null)break;ce=ee,ee=ce.parentNode}ce=ae}o=w===-1||U===-1?null:{start:w,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(wp={focusedElem:r,selectionRange:o},Hf=!1,dn=i;dn!==null;)if(i=dn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,dn=r;else for(;dn!==null;){switch(i=dn,m=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)h=r[o],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=i,h=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Ce=Hs(o.type,h);r=u.getSnapshotBeforeUpdate(Ce,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ve){mt(o,o.return,Ve)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Ip(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Ip(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,dn=r;break}dn=i.return}}function yE(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Gi(r,o),u&4&&fu(5,o);break;case 1:if(Gi(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(_){mt(o,o.return,_)}else{var h=Hs(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(h,i,r.__reactInternalSnapshotBeforeUpdate)}catch(_){mt(o,o.return,_)}}u&64&&fE(o),u&512&&hu(o,o.return);break;case 3:if(Gi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{t_(r,i)}catch(_){mt(o,o.return,_)}}break;case 27:i===null&&u&4&&pE(o);case 26:case 5:Gi(r,o),i===null&&u&4&&dE(o),u&512&&hu(o,o.return);break;case 12:Gi(r,o);break;case 31:Gi(r,o),u&4&&EE(r,o);break;case 13:Gi(r,o),u&4&&TE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=F1.bind(null,o),lC(r,o))));break;case 22:if(u=o.memoizedState!==null||Hi,!u){i=i!==null&&i.memoizedState!==null||rn,h=Hi;var m=rn;Hi=u,(rn=i)&&!m?$i(r,o,(o.subtreeFlags&8772)!==0):Gi(r,o),Hi=h,rn=m}break;case 30:break;default:Gi(r,o)}}function vE(r){var i=r.alternate;i!==null&&(r.alternate=null,vE(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Nt(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var kt=null,Gn=!1;function qi(r,i,o){for(o=o.child;o!==null;)_E(r,i,o),o=o.sibling}function _E(r,i,o){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(nr,o)}catch{}switch(o.tag){case 26:rn||gi(o,i),qi(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:rn||gi(o,i);var u=kt,h=Gn;za(o.type)&&(kt=o.stateNode,Gn=!1),qi(r,i,o),Tu(o.stateNode),kt=u,Gn=h;break;case 5:rn||gi(o,i);case 6:if(u=kt,h=Gn,kt=null,qi(r,i,o),kt=u,Gn=h,kt!==null)if(Gn)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(o.stateNode)}catch(m){mt(o,i,m)}else try{kt.removeChild(o.stateNode)}catch(m){mt(o,i,m)}break;case 18:kt!==null&&(Gn?(r=kt,fT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Wo(r)):fT(kt,o.stateNode));break;case 4:u=kt,h=Gn,kt=o.stateNode.containerInfo,Gn=!0,qi(r,i,o),kt=u,Gn=h;break;case 0:case 11:case 14:case 15:Ma(2,o,i),rn||Ma(4,o,i),qi(r,i,o);break;case 1:rn||(gi(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&hE(o,i,u)),qi(r,i,o);break;case 21:qi(r,i,o);break;case 22:rn=(u=rn)||o.memoizedState!==null,qi(r,i,o),rn=u;break;default:qi(r,i,o)}}function EE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Wo(r)}catch(o){mt(i,i.return,o)}}}function TE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Wo(r)}catch(o){mt(i,i.return,o)}}function V1(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new gE),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new gE),i;default:throw Error(a(435,r.tag))}}function Sf(r,i){var o=V1(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var h=H1.bind(null,r,u);u.then(h,h)}})}function $n(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u],m=r,_=i,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(za(w.type)){kt=w.stateNode,Gn=!1;break e}break;case 5:kt=w.stateNode,Gn=!1;break e;case 3:case 4:kt=w.stateNode.containerInfo,Gn=!0;break e}w=w.return}if(kt===null)throw Error(a(160));_E(m,_,h),kt=null,Gn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)bE(i,r),i=i.sibling}var $r=null;function bE(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:$n(i,r),Kn(r),u&4&&(Ma(3,r,r.return),fu(3,r),Ma(5,r,r.return));break;case 1:$n(i,r),Kn(r),u&512&&(rn||o===null||gi(o,o.return)),u&64&&Hi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var h=$r;if($n(i,r),Kn(r),u&512&&(rn||o===null||gi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":m=h.getElementsByTagName("title")[0],(!m||m[gt]||m[ye]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(u),h.head.insertBefore(m,h.querySelector("head > title"))),En(m,u,o),m[ye]=r,It(m),u=m;break e;case"link":var _=bT("link","href",h).get(u+(o.href||""));if(_){for(var w=0;w<_.length;w++)if(m=_[w],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(w,1);break t}}m=h.createElement(u),En(m,u,o),h.head.appendChild(m);break;case"meta":if(_=bT("meta","content",h).get(u+(o.content||""))){for(w=0;w<_.length;w++)if(m=_[w],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(w,1);break t}}m=h.createElement(u),En(m,u,o),h.head.appendChild(m);break;default:throw Error(a(468,u))}m[ye]=r,It(m),u=m}r.stateNode=u}else ST(h,r.type,r.stateNode);else r.stateNode=TT(h,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?ST(h,r.type,r.stateNode):TT(h,u,r.memoizedProps)):u===null&&r.stateNode!==null&&ep(r,r.memoizedProps,o.memoizedProps)}break;case 27:$n(i,r),Kn(r),u&512&&(rn||o===null||gi(o,o.return)),o!==null&&u&4&&ep(r,r.memoizedProps,o.memoizedProps);break;case 5:if($n(i,r),Kn(r),u&512&&(rn||o===null||gi(o,o.return)),r.flags&32){h=r.stateNode;try{qn(h,"")}catch(Ce){mt(r,r.return,Ce)}}u&4&&r.stateNode!=null&&(h=r.memoizedProps,ep(r,h,o!==null?o.memoizedProps:h)),u&1024&&(rp=!0);break;case 6:if($n(i,r),Kn(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Ce){mt(r,r.return,Ce)}}break;case 3:if(jf=null,h=$r,$r=kf(i.containerInfo),$n(i,r),$r=h,Kn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Wo(i.containerInfo)}catch(Ce){mt(r,r.return,Ce)}rp&&(rp=!1,SE(r));break;case 4:u=$r,$r=kf(r.stateNode.containerInfo),$n(i,r),Kn(r),$r=u;break;case 12:$n(i,r),Kn(r);break;case 31:$n(i,r),Kn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Sf(r,u)));break;case 13:$n(i,r),Kn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(wf=zt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Sf(r,u)));break;case 22:h=r.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,W=Hi,oe=rn;if(Hi=W||h,rn=oe||U,$n(i,r),rn=oe,Hi=W,Kn(r),u&8192)e:for(i=r.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(o===null||U||Hi||rn||qs(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){U=o=i;try{if(m=U.stateNode,h)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=U.stateNode;var ce=U.memoizedProps.style,ee=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;w.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Ce){mt(U,U.return,Ce)}}}else if(i.tag===6){if(o===null){U=i;try{U.stateNode.nodeValue=h?"":U.memoizedProps}catch(Ce){mt(U,U.return,Ce)}}}else if(i.tag===18){if(o===null){U=i;try{var ae=U.stateNode;h?hT(ae,!0):hT(U.stateNode,!1)}catch(Ce){mt(U,U.return,Ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Sf(r,o))));break;case 19:$n(i,r),Kn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Sf(r,u)));break;case 30:break;case 21:break;default:$n(i,r),Kn(r)}}function Kn(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(mE(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var h=o.stateNode,m=tp(r);bf(r,m,h);break;case 5:var _=o.stateNode;o.flags&32&&(qn(_,""),o.flags&=-33);var w=tp(r);bf(r,w,_);break;case 3:case 4:var U=o.stateNode.containerInfo,W=tp(r);np(r,W,U);break;default:throw Error(a(161))}}catch(oe){mt(r,r.return,oe)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function SE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;SE(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Gi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)yE(r,i.alternate,i),i=i.sibling}function qs(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ma(4,i,i.return),qs(i);break;case 1:gi(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&hE(i,i.return,o),qs(i);break;case 27:Tu(i.stateNode);case 26:case 5:gi(i,i.return),qs(i);break;case 22:i.memoizedState===null&&qs(i);break;case 30:qs(i);break;default:qs(i)}r=r.sibling}}function $i(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,h=r,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:$i(h,m,o),fu(4,m);break;case 1:if($i(h,m,o),u=m,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(W){mt(u,u.return,W)}if(u=m,h=u.updateQueue,h!==null){var w=u.stateNode;try{var U=h.shared.hiddenCallbacks;if(U!==null)for(h.shared.hiddenCallbacks=null,h=0;h<U.length;h++)e_(U[h],w)}catch(W){mt(u,u.return,W)}}o&&_&64&&fE(m),hu(m,m.return);break;case 27:pE(m);case 26:case 5:$i(h,m,o),o&&u===null&&_&4&&dE(m),hu(m,m.return);break;case 12:$i(h,m,o);break;case 31:$i(h,m,o),o&&_&4&&EE(h,m);break;case 13:$i(h,m,o),o&&_&4&&TE(h,m);break;case 22:m.memoizedState===null&&$i(h,m,o),hu(m,m.return);break;case 30:break;default:$i(h,m,o)}i=i.sibling}}function ip(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Jl(o))}function ap(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Jl(r))}function Kr(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)AE(r,i,o,u),i=i.sibling}function AE(r,i,o,u){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Kr(r,i,o,u),h&2048&&fu(9,i);break;case 1:Kr(r,i,o,u);break;case 3:Kr(r,i,o,u),h&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Jl(r)));break;case 12:if(h&2048){Kr(r,i,o,u),r=i.stateNode;try{var m=i.memoizedProps,_=m.id,w=m.onPostCommit;typeof w=="function"&&w(_,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(U){mt(i,i.return,U)}}else Kr(r,i,o,u);break;case 31:Kr(r,i,o,u);break;case 13:Kr(r,i,o,u);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?Kr(r,i,o,u):du(r,i):m._visibility&2?Kr(r,i,o,u):(m._visibility|=2,zo(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),h&2048&&ip(_,i);break;case 24:Kr(r,i,o,u),h&2048&&ap(i.alternate,i);break;default:Kr(r,i,o,u)}}function zo(r,i,o,u,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=r,_=i,w=o,U=u,W=_.flags;switch(_.tag){case 0:case 11:case 15:zo(m,_,w,U,h),fu(8,_);break;case 23:break;case 22:var oe=_.stateNode;_.memoizedState!==null?oe._visibility&2?zo(m,_,w,U,h):du(m,_):(oe._visibility|=2,zo(m,_,w,U,h)),h&&W&2048&&ip(_.alternate,_);break;case 24:zo(m,_,w,U,h),h&&W&2048&&ap(_.alternate,_);break;default:zo(m,_,w,U,h)}i=i.sibling}}function du(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,h=u.flags;switch(u.tag){case 22:du(o,u),h&2048&&ip(u.alternate,u);break;case 24:du(o,u),h&2048&&ap(u.alternate,u);break;default:du(o,u)}i=i.sibling}}var mu=8192;function Bo(r,i,o){if(r.subtreeFlags&mu)for(r=r.child;r!==null;)wE(r,i,o),r=r.sibling}function wE(r,i,o){switch(r.tag){case 26:Bo(r,i,o),r.flags&mu&&r.memoizedState!==null&&EC(o,$r,r.memoizedState,r.memoizedProps);break;case 5:Bo(r,i,o);break;case 3:case 4:var u=$r;$r=kf(r.stateNode.containerInfo),Bo(r,i,o),$r=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=mu,mu=16777216,Bo(r,i,o),mu=u):Bo(r,i,o));break;default:Bo(r,i,o)}}function RE(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function pu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];dn=u,IE(u,r)}RE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)CE(r),r=r.sibling}function CE(r){switch(r.tag){case 0:case 11:case 15:pu(r),r.flags&2048&&Ma(9,r,r.return);break;case 3:pu(r);break;case 12:pu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Af(r)):pu(r);break;default:pu(r)}}function Af(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];dn=u,IE(u,r)}RE(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ma(8,i,i.return),Af(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Af(i));break;default:Af(i)}r=r.sibling}}function IE(r,i){for(;dn!==null;){var o=dn;switch(o.tag){case 0:case 11:case 15:Ma(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Jl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,dn=u;else e:for(o=r;dn!==null;){u=dn;var h=u.sibling,m=u.return;if(vE(u),u===o){dn=null;break e}if(h!==null){h.return=m,dn=h;break e}dn=m}}}var P1={getCacheForType:function(r){var i=vn(en),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return vn(en).controller.signal}},L1=typeof WeakMap=="function"?WeakMap:Map,ft=0,At=null,Je=null,et=0,dt=0,fr=null,Va=!1,Fo=!1,sp=!1,Ki=0,qt=0,Pa=0,Gs=0,op=0,hr=0,Ho=0,gu=null,Yn=null,lp=!1,wf=0,DE=0,Rf=1/0,Cf=null,La=null,ln=0,ka=null,qo=null,Yi=0,up=0,cp=null,NE=null,yu=0,fp=null;function dr(){return(ft&2)!==0&&et!==0?et&-et:j.T!==null?yp():ge()}function xE(){if(hr===0)if((et&536870912)===0||at){var r=ri;ri<<=1,(ri&3932160)===0&&(ri=262144),hr=r}else hr=536870912;return r=ur.current,r!==null&&(r.flags|=32),hr}function Qn(r,i,o){(r===At&&(dt===2||dt===9)||r.cancelPendingCommit!==null)&&(Go(r,0),Ua(r,et,hr,!1)),ii(r,o),((ft&2)===0||r!==At)&&(r===At&&((ft&2)===0&&(Gs|=o),qt===4&&Ua(r,et,hr,!1)),yi(r))}function OE(r,i,o){if((ft&6)!==0)throw Error(a(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||ir(r,i),h=u?j1(r,i):dp(r,i,!0),m=u;do{if(h===0){Fo&&!u&&Ua(r,i,0,!1);break}else{if(o=r.current.alternate,m&&!k1(o)){h=dp(r,i,!1),m=!1;continue}if(h===2){if(m=i,r.errorRecoveryDisabledLanes&m)var _=0;else _=r.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var w=r;h=gu;var U=w.current.memoizedState.isDehydrated;if(U&&(Go(w,_).flags|=256),_=dp(w,_,!1),_!==2){if(sp&&!U){w.errorRecoveryDisabledLanes|=m,Gs|=m,h=4;break e}m=Yn,Yn=h,m!==null&&(Yn===null?Yn=m:Yn.push.apply(Yn,m))}h=_}if(m=!1,h!==2)continue}}if(h===1){Go(r,0),Ua(r,i,0,!0);break}e:{switch(u=r,m=h,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ua(u,i,hr,!Va);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(h=wf+300-zt(),10<h)){if(Ua(u,i,hr,!Va),rr(u,0,!0)!==0)break e;Yi=i,u.timeoutHandle=uT(ME.bind(null,u,o,Yn,Cf,lp,i,hr,Gs,Ho,Va,m,"Throttled",-0,0),h);break e}ME(u,o,Yn,Cf,lp,i,hr,Gs,Ho,Va,m,null,-0,0)}}break}while(!0);yi(r)}function ME(r,i,o,u,h,m,_,w,U,W,oe,ce,ee,ae){if(r.timeoutHandle=-1,ce=i.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zr},wE(i,m,ce);var Ce=(m&62914560)===m?wf-zt():(m&4194048)===m?DE-zt():0;if(Ce=TC(ce,Ce),Ce!==null){Yi=m,r.cancelPendingCommit=Ce(BE.bind(null,r,i,m,o,u,h,_,w,U,oe,ce,null,ee,ae)),Ua(r,m,_,!W);return}}BE(r,i,m,o,u,h,_,w,U)}function k1(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var h=o[u],m=h.getSnapshot;h=h.value;try{if(!or(m(),h))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ua(r,i,o,u){i&=~op,i&=~Gs,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var h=i;0<h;){var m=31-Vt(h),_=1<<m;u[m]=-1,h&=~_}o!==0&&xi(r,o,i)}function If(){return(ft&6)===0?(vu(0),!1):!0}function hp(){if(Je!==null){if(dt===0)var r=Je.return;else r=Je,ki=Ls=null,Im(r),Po=null,eu=0,r=Je;for(;r!==null;)cE(r.alternate,r),r=r.return;Je=null}}function Go(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,rC(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Yi=0,hp(),At=r,Je=o=Pi(r.current,null),et=i,dt=0,fr=null,Va=!1,Fo=ir(r,i),sp=!1,Ho=hr=op=Gs=Pa=qt=0,Yn=gu=null,lp=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var h=31-Vt(u),m=1<<h;i|=r[h],u&=~m}return Ki=i,Yc(),o}function VE(r,i){He=null,j.H=lu,i===Vo||i===nf?(i=Xv(),dt=3):i===gm?(i=Xv(),dt=4):dt=i===qm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fr=i,Je===null&&(qt=1,yf(r,Cr(i,r.current)))}function PE(){var r=ur.current;return r===null?!0:(et&4194048)===et?xr===null:(et&62914560)===et||(et&536870912)!==0?r===xr:!1}function LE(){var r=j.H;return j.H=lu,r===null?lu:r}function kE(){var r=j.A;return j.A=P1,r}function Df(){qt=4,Va||(et&4194048)!==et&&ur.current!==null||(Fo=!0),(Pa&134217727)===0&&(Gs&134217727)===0||At===null||Ua(At,et,hr,!1)}function dp(r,i,o){var u=ft;ft|=2;var h=LE(),m=kE();(At!==r||et!==i)&&(Cf=null,Go(r,i)),i=!1;var _=qt;e:do try{if(dt!==0&&Je!==null){var w=Je,U=fr;switch(dt){case 8:hp(),_=6;break e;case 3:case 2:case 9:case 6:ur.current===null&&(i=!0);var W=dt;if(dt=0,fr=null,$o(r,w,U,W),o&&Fo){_=0;break e}break;default:W=dt,dt=0,fr=null,$o(r,w,U,W)}}U1(),_=qt;break}catch(oe){VE(r,oe)}while(!0);return i&&r.shellSuspendCounter++,ki=Ls=null,ft=u,j.H=h,j.A=m,Je===null&&(At=null,et=0,Yc()),_}function U1(){for(;Je!==null;)UE(Je)}function j1(r,i){var o=ft;ft|=2;var u=LE(),h=kE();At!==r||et!==i?(Cf=null,Rf=zt()+500,Go(r,i)):Fo=ir(r,i);e:do try{if(dt!==0&&Je!==null){i=Je;var m=fr;t:switch(dt){case 1:dt=0,fr=null,$o(r,i,m,1);break;case 2:case 9:if(Yv(m)){dt=0,fr=null,jE(i);break}i=function(){dt!==2&&dt!==9||At!==r||(dt=7),yi(r)},m.then(i,i);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Yv(m)?(dt=0,fr=null,jE(i)):(dt=0,fr=null,$o(r,i,m,7));break;case 5:var _=null;switch(Je.tag){case 26:_=Je.memoizedState;case 5:case 27:var w=Je;if(_?AT(_):w.stateNode.complete){dt=0,fr=null;var U=w.sibling;if(U!==null)Je=U;else{var W=w.return;W!==null?(Je=W,Nf(W)):Je=null}break t}}dt=0,fr=null,$o(r,i,m,5);break;case 6:dt=0,fr=null,$o(r,i,m,6);break;case 8:hp(),qt=6;break e;default:throw Error(a(462))}}z1();break}catch(oe){VE(r,oe)}while(!0);return ki=Ls=null,j.H=u,j.A=h,ft=o,Je!==null?0:(At=null,et=0,Yc(),qt)}function z1(){for(;Je!==null&&!Pl();)UE(Je)}function UE(r){var i=lE(r.alternate,r,Ki);r.memoizedProps=r.pendingProps,i===null?Nf(r):Je=i}function jE(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=nE(o,i,i.pendingProps,i.type,void 0,et);break;case 11:i=nE(o,i,i.pendingProps,i.type.render,i.ref,et);break;case 5:Im(i);default:cE(o,i),i=Je=kv(i,Ki),i=lE(o,i,Ki)}r.memoizedProps=r.pendingProps,i===null?Nf(r):Je=i}function $o(r,i,o,u){ki=Ls=null,Im(i),Po=null,eu=0;var h=i.return;try{if(I1(r,h,i,o,et)){qt=1,yf(r,Cr(o,r.current)),Je=null;return}}catch(m){if(h!==null)throw Je=h,m;qt=1,yf(r,Cr(o,r.current)),Je=null;return}i.flags&32768?(at||u===1?r=!0:Fo||(et&536870912)!==0?r=!1:(Va=r=!0,(u===2||u===9||u===3||u===6)&&(u=ur.current,u!==null&&u.tag===13&&(u.flags|=16384))),zE(i,r)):Nf(i)}function Nf(r){var i=r;do{if((i.flags&32768)!==0){zE(i,Va);return}r=i.return;var o=x1(i.alternate,i,Ki);if(o!==null){Je=o;return}if(i=i.sibling,i!==null){Je=i;return}Je=i=r}while(i!==null);qt===0&&(qt=5)}function zE(r,i){do{var o=O1(r.alternate,r);if(o!==null){o.flags&=32767,Je=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){Je=r;return}Je=r=o}while(r!==null);qt=6,Je=null}function BE(r,i,o,u,h,m,_,w,U){r.cancelPendingCommit=null;do xf();while(ln!==0);if((ft&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=tm,Ll(r,o,m,_,w,U),r===At&&(Je=At=null,et=0),qo=i,ka=r,Yi=o,up=m,cp=h,NE=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,q1(fn,function(){return $E(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=j.T,j.T=null,h=ne.p,ne.p=2,_=ft,ft|=4;try{M1(r,i,o)}finally{ft=_,ne.p=h,j.T=u}}ln=1,FE(),HE(),qE()}}function FE(){if(ln===1){ln=0;var r=ka,i=qo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=j.T,j.T=null;var u=ne.p;ne.p=2;var h=ft;ft|=4;try{bE(i,r);var m=wp,_=Iv(r.containerInfo),w=m.focusedElem,U=m.selectionRange;if(_!==w&&w&&w.ownerDocument&&Cv(w.ownerDocument.documentElement,w)){if(U!==null&&Xd(w)){var W=U.start,oe=U.end;if(oe===void 0&&(oe=W),"selectionStart"in w)w.selectionStart=W,w.selectionEnd=Math.min(oe,w.value.length);else{var ce=w.ownerDocument||document,ee=ce&&ce.defaultView||window;if(ee.getSelection){var ae=ee.getSelection(),Ce=w.textContent.length,Ve=Math.min(U.start,Ce),Tt=U.end===void 0?Ve:Math.min(U.end,Ce);!ae.extend&&Ve>Tt&&(_=Tt,Tt=Ve,Ve=_);var $=Rv(w,Ve),F=Rv(w,Tt);if($&&F&&(ae.rangeCount!==1||ae.anchorNode!==$.node||ae.anchorOffset!==$.offset||ae.focusNode!==F.node||ae.focusOffset!==F.offset)){var X=ce.createRange();X.setStart($.node,$.offset),ae.removeAllRanges(),Ve>Tt?(ae.addRange(X),ae.extend(F.node,F.offset)):(X.setEnd(F.node,F.offset),ae.addRange(X))}}}}for(ce=[],ae=w;ae=ae.parentNode;)ae.nodeType===1&&ce.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ce.length;w++){var le=ce[w];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Hf=!!Ap,wp=Ap=null}finally{ft=h,ne.p=u,j.T=o}}r.current=i,ln=2}}function HE(){if(ln===2){ln=0;var r=ka,i=qo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=j.T,j.T=null;var u=ne.p;ne.p=2;var h=ft;ft|=4;try{yE(r,i.alternate,i)}finally{ft=h,ne.p=u,j.T=o}}ln=3}}function qE(){if(ln===4||ln===3){ln=0,fo();var r=ka,i=qo,o=Yi,u=NE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ln=5:(ln=0,qo=ka=null,GE(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&(La=null),he(o),i=i.stateNode,St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(nr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=j.T,h=ne.p,ne.p=2,j.T=null;try{for(var m=r.onRecoverableError,_=0;_<u.length;_++){var w=u[_];m(w.value,{componentStack:w.stack})}}finally{j.T=i,ne.p=h}}(Yi&3)!==0&&xf(),yi(r),h=r.pendingLanes,(o&261930)!==0&&(h&42)!==0?r===fp?yu++:(yu=0,fp=r):yu=0,vu(0)}}function GE(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Jl(i)))}function xf(){return FE(),HE(),qE(),$E()}function $E(){if(ln!==5)return!1;var r=ka,i=up;up=0;var o=he(Yi),u=j.T,h=ne.p;try{ne.p=32>o?32:o,j.T=null,o=cp,cp=null;var m=ka,_=Yi;if(ln=0,qo=ka=null,Yi=0,(ft&6)!==0)throw Error(a(331));var w=ft;if(ft|=4,CE(m.current),AE(m,m.current,_,o),ft=w,vu(0,!1),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(nr,m)}catch{}return!0}finally{ne.p=h,j.T=u,GE(r,i)}}function KE(r,i,o){i=Cr(o,i),i=Hm(r.stateNode,i,2),r=Na(r,i,2),r!==null&&(ii(r,2),yi(r))}function mt(r,i,o){if(r.tag===3)KE(r,r,o);else for(;i!==null;){if(i.tag===3){KE(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(La===null||!La.has(u))){r=Cr(o,r),o=Y_(2),u=Na(i,o,2),u!==null&&(Q_(o,u,i,r),ii(u,2),yi(u));break}}i=i.return}}function mp(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new L1;var h=new Set;u.set(i,h)}else h=u.get(i),h===void 0&&(h=new Set,u.set(i,h));h.has(o)||(sp=!0,h.add(o),r=B1.bind(null,r,i,o),i.then(r,r))}function B1(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,At===r&&(et&o)===o&&(qt===4||qt===3&&(et&62914560)===et&&300>zt()-wf?(ft&2)===0&&Go(r,0):op|=o,Ho===et&&(Ho=0)),yi(r)}function YE(r,i){i===0&&(i=Ni()),r=Ms(r,i),r!==null&&(ii(r,i),yi(r))}function F1(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),YE(r,o)}function H1(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,h=r.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),YE(r,o)}function q1(r,i){return Kt(r,i)}var Of=null,Ko=null,pp=!1,Mf=!1,gp=!1,ja=0;function yi(r){r!==Ko&&r.next===null&&(Ko===null?Of=Ko=r:Ko=Ko.next=r),Mf=!0,pp||(pp=!0,$1())}function vu(r,i){if(!gp&&Mf){gp=!0;do for(var o=!1,u=Of;u!==null;){if(r!==0){var h=u.pendingLanes;if(h===0)var m=0;else{var _=u.suspendedLanes,w=u.pingedLanes;m=(1<<31-Vt(42|r)+1)-1,m&=h&~(_&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,JE(u,m))}else m=et,m=rr(u,u===At?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ir(u,m)||(o=!0,JE(u,m));u=u.next}while(o);gp=!1}}function G1(){QE()}function QE(){Mf=pp=!1;var r=0;ja!==0&&nC()&&(r=ja);for(var i=zt(),o=null,u=Of;u!==null;){var h=u.next,m=XE(u,i);m===0?(u.next=null,o===null?Of=h:o.next=h,h===null&&(Ko=o)):(o=u,(r!==0||(m&3)!==0)&&(Mf=!0)),u=h}ln!==0&&ln!==5||vu(r),ja!==0&&(ja=0)}function XE(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,h=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var _=31-Vt(m),w=1<<_,U=h[_];U===-1?((w&o)===0||(w&u)!==0)&&(h[_]=mo(w,i)):U<=i&&(r.expiredLanes|=w),m&=~w}if(i=At,o=et,o=rr(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(dt===2||dt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&ni(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||ir(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&ni(u),he(o)){case 2:case 8:o=Di;break;case 32:o=fn;break;case 268435456:o=_s;break;default:o=fn}return u=WE.bind(null,r),o=Kt(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&ni(u),r.callbackPriority=2,r.callbackNode=null,2}function WE(r,i){if(ln!==0&&ln!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(xf()&&r.callbackNode!==o)return null;var u=et;return u=rr(r,r===At?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(OE(r,u,i),XE(r,zt()),r.callbackNode!=null&&r.callbackNode===o?WE.bind(null,r):null)}function JE(r,i){if(xf())return null;OE(r,i,!0)}function $1(){iC(function(){(ft&6)!==0?Kt(ha,G1):QE()})}function yp(){if(ja===0){var r=Oo;r===0&&(r=Pn,Pn<<=1,(Pn&261888)===0&&(Pn=256)),ja=r}return ja}function ZE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:yo(""+r)}function eT(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function K1(r,i,o,u,h){if(i==="submit"&&o&&o.stateNode===h){var m=ZE((h[_e]||null).action),_=u.submitter;_&&(i=(i=_[_e]||null)?ZE(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var w=new ci("action","action",null,u,h);r.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ja!==0){var U=_?eT(h,_):new FormData(h);km(o,{pending:!0,data:U,method:h.method,action:m},null,U)}}else typeof m=="function"&&(w.preventDefault(),U=_?eT(h,_):new FormData(h),km(o,{pending:!0,data:U,method:h.method,action:m},m,U))},currentTarget:h}]})}}for(var vp=0;vp<em.length;vp++){var _p=em[vp],Y1=_p.toLowerCase(),Q1=_p[0].toUpperCase()+_p.slice(1);Gr(Y1,"on"+Q1)}Gr(xv,"onAnimationEnd"),Gr(Ov,"onAnimationIteration"),Gr(Mv,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(f1,"onTransitionRun"),Gr(h1,"onTransitionStart"),Gr(d1,"onTransitionCancel"),Gr(Vv,"onTransitionEnd"),Rn("onMouseEnter",["mouseout","mouseover"]),Rn("onMouseLeave",["mouseout","mouseover"]),Rn("onPointerEnter",["pointerout","pointerover"]),Rn("onPointerLeave",["pointerout","pointerover"]),Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function tT(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],h=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var _=u.length-1;0<=_;_--){var w=u[_],U=w.instance,W=w.currentTarget;if(w=w.listener,U!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=W;try{m(h)}catch(oe){Kc(oe)}h.currentTarget=null,m=U}else for(_=0;_<u.length;_++){if(w=u[_],U=w.instance,W=w.currentTarget,w=w.listener,U!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=W;try{m(h)}catch(oe){Kc(oe)}h.currentTarget=null,m=U}}}}function Ze(r,i){var o=i[Pe];o===void 0&&(o=i[Pe]=new Set);var u=r+"__bubble";o.has(u)||(nT(i,r,2,!1),o.add(u))}function Ep(r,i,o){var u=0;i&&(u|=4),nT(o,r,u,i)}var Vf="_reactListening"+Math.random().toString(36).slice(2);function Tp(r){if(!r[Vf]){r[Vf]=!0,Bn.forEach(function(o){o!=="selectionchange"&&(X1.has(o)||Ep(o,!1,r),Ep(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Vf]||(i[Vf]=!0,Ep("selectionchange",!1,i))}}function nT(r,i,o,u){switch(xT(i)){case 2:var h=AC;break;case 8:h=wC;break;default:h=Lp}o=h.bind(null,i,o,r),h=void 0,!ws||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),u?h!==void 0?r.addEventListener(i,o,{capture:!0,passive:h}):r.addEventListener(i,o,!0):h!==void 0?r.addEventListener(i,o,{passive:h}):r.addEventListener(i,o,!1)}function bp(r,i,o,u,h){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var w=u.stateNode.containerInfo;if(w===h)break;if(_===4)for(_=u.return;_!==null;){var U=_.tag;if((U===3||U===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;w!==null;){if(_=Rt(w),_===null)return;if(U=_.tag,U===5||U===6||U===26||U===27){u=m=_;continue e}w=w.parentNode}}u=u.return}Ea(function(){var W=m,oe=Sr(o),ce=[];e:{var ee=Pv.get(r);if(ee!==void 0){var ae=ci,Ce=r;switch(r){case"keypress":if(Cs(o)===0)break e;case"keydown":case"keyup":ae=qc;break;case"focusin":Ce="focus",ae=Ds;break;case"focusout":Ce="blur",ae=Ds;break;case"beforeblur":case"afterblur":ae=Ds;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Pc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=y;break;case xv:case Ov:case Mv:ae=kc;break;case Vv:ae=I;break;case"scroll":case"scrollend":ae=Hl;break;case"wheel":ae=re;break;case"copy":case"cut":case"paste":ae=Uc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Vi;break;case"toggle":case"beforetoggle":ae=Fe}var Ve=(i&4)!==0,Tt=!Ve&&(r==="scroll"||r==="scrollend"),$=Ve?ee!==null?ee+"Capture":null:ee;Ve=[];for(var F=W,X;F!==null;){var le=F;if(X=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||X===null||$===null||(le=Br(F,$),le!=null&&Ve.push(Eu(F,le,X))),Tt)break;F=F.return}0<Ve.length&&(ee=new ae(ee,Ce,null,o,oe),ce.push({event:ee,listeners:Ve}))}}if((i&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",ee&&o!==zl&&(Ce=o.relatedTarget||o.fromElement)&&(Rt(Ce)||Ce[Ae]))break e;if((ae||ee)&&(ee=oe.window===oe?oe:(ee=oe.ownerDocument)?ee.defaultView||ee.parentWindow:window,ae?(Ce=o.relatedTarget||o.toElement,ae=W,Ce=Ce?Rt(Ce):null,Ce!==null&&(Tt=l(Ce),Ve=Ce.tag,Ce!==Tt||Ve!==5&&Ve!==27&&Ve!==6)&&(Ce=null)):(ae=null,Ce=W),ae!==Ce)){if(Ve=ql,le="onMouseLeave",$="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(Ve=Vi,le="onPointerLeave",$="onPointerEnter",F="pointer"),Tt=ae==null?ee:Ct(ae),X=Ce==null?ee:Ct(Ce),ee=new Ve(le,F+"leave",ae,o,oe),ee.target=Tt,ee.relatedTarget=X,le=null,Rt(oe)===W&&(Ve=new Ve($,F+"enter",Ce,o,oe),Ve.target=X,Ve.relatedTarget=Tt,le=Ve),Tt=le,ae&&Ce)t:{for(Ve=W1,$=ae,F=Ce,X=0,le=$;le;le=Ve(le))X++;le=0;for(var xe=F;xe;xe=Ve(xe))le++;for(;0<X-le;)$=Ve($),X--;for(;0<le-X;)F=Ve(F),le--;for(;X--;){if($===F||F!==null&&$===F.alternate){Ve=$;break t}$=Ve($),F=Ve(F)}Ve=null}else Ve=null;ae!==null&&rT(ce,ee,ae,Ve,!1),Ce!==null&&Tt!==null&&rT(ce,Tt,Ce,Ve,!0)}}e:{if(ee=W?Ct(W):window,ae=ee.nodeName&&ee.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ee.type==="file")var ot=Ev;else if(vv(ee))if(Tv)ot=l1;else{ot=s1;var Ie=a1}else ae=ee.nodeName,!ae||ae.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?W&&go(W.elementType)&&(ot=Ev):ot=o1;if(ot&&(ot=ot(r,W))){_v(ce,ot,o,oe);break e}Ie&&Ie(r,ee,W),r==="focusout"&&W&&ee.type==="number"&&W.memoizedProps.value!=null&&kl(ee,"number",ee.value)}switch(Ie=W?Ct(W):window,r){case"focusin":(vv(Ie)||Ie.contentEditable==="true")&&(Ao=Ie,Wd=W,Ql=null);break;case"focusout":Ql=Wd=Ao=null;break;case"mousedown":Jd=!0;break;case"contextmenu":case"mouseup":case"dragend":Jd=!1,Dv(ce,o,oe);break;case"selectionchange":if(c1)break;case"keydown":case"keyup":Dv(ce,o,oe)}var Ke;if(ct)e:{switch(r){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else So?Ns(r,o)&&(tt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(tt="onCompositionStart");tt&&(di&&o.locale!=="ko"&&(So||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&So&&(Ke=Fl()):(ui=oe,Bl="value"in ui?ui.value:ui.textContent,So=!0)),Ie=Pf(W,tt),0<Ie.length&&(tt=new hi(tt,r,null,o,oe),ce.push({event:tt,listeners:Ie}),Ke?tt.data=Ke:(Ke=bo(o),Ke!==null&&(tt.data=Ke)))),(Ke=wr?t1(r,o):n1(r,o))&&(tt=Pf(W,"onBeforeInput"),0<tt.length&&(Ie=new hi("onBeforeInput","beforeinput",null,o,oe),ce.push({event:Ie,listeners:tt}),Ie.data=Ke)),K1(ce,r,W,o,oe)}tT(ce,i)})}function Eu(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Pf(r,i){for(var o=i+"Capture",u=[];r!==null;){var h=r,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=Br(r,o),h!=null&&u.unshift(Eu(r,h,m)),h=Br(r,i),h!=null&&u.push(Eu(r,h,m))),r.tag===3)return u;r=r.return}return[]}function W1(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function rT(r,i,o,u,h){for(var m=i._reactName,_=[];o!==null&&o!==u;){var w=o,U=w.alternate,W=w.stateNode;if(w=w.tag,U!==null&&U===u)break;w!==5&&w!==26&&w!==27||W===null||(U=W,h?(W=Br(o,m),W!=null&&_.unshift(Eu(o,W,U))):h||(W=Br(o,m),W!=null&&_.push(Eu(o,W,U)))),o=o.return}_.length!==0&&r.push({event:i,listeners:_})}var J1=/\r\n?/g,Z1=/\u0000|\uFFFD/g;function iT(r){return(typeof r=="string"?r:""+r).replace(J1,`
`).replace(Z1,"")}function aT(r,i){return i=iT(i),iT(r)===i}function Et(r,i,o,u,h,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||qn(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&qn(r,""+u);break;case"className":Zt(r,"class",u);break;case"tabIndex":Zt(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Zt(r,o,u);break;case"style":jl(r,u,m);break;case"data":if(i!=="object"){Zt(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=yo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&Et(r,i,"name",h.name,h,null),Et(r,i,"formEncType",h.formEncType,h,null),Et(r,i,"formMethod",h.formMethod,h,null),Et(r,i,"formTarget",h.formTarget,h,null)):(Et(r,i,"encType",h.encType,h,null),Et(r,i,"method",h.method,h,null),Et(r,i,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=yo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=zr);break;case"onScroll":u!=null&&Ze("scroll",r);break;case"onScrollEnd":u!=null&&Ze("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=yo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ze("beforetoggle",r),Ze("toggle",r),Bt(r,"popover",u);break;case"xlinkActuate":yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":yt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":yt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":yt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":yt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Bt(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Vc.get(o)||o,Bt(r,o,u))}}function Sp(r,i,o,u,h,m){switch(o){case"style":jl(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof u=="string"?qn(r,u):(typeof u=="number"||typeof u=="bigint")&&qn(r,""+u);break;case"onScroll":u!=null&&Ze("scroll",r);break;case"onScrollEnd":u!=null&&Ze("scrollend",r);break;case"onClick":u!=null&&(r.onclick=zr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),i=o.slice(2,h?o.length-7:void 0),m=r[_e]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(i,m,h),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,h);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Bt(r,o,u)}}}function En(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",r),Ze("load",r);var u=!1,h=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Et(r,i,m,_,o,null)}}h&&Et(r,i,"srcSet",o.srcSet,o,null),u&&Et(r,i,"src",o.src,o,null);return;case"input":Ze("invalid",r);var w=m=_=h=null,U=null,W=null;for(u in o)if(o.hasOwnProperty(u)){var oe=o[u];if(oe!=null)switch(u){case"name":h=oe;break;case"type":_=oe;break;case"checked":U=oe;break;case"defaultChecked":W=oe;break;case"value":m=oe;break;case"defaultValue":w=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,i));break;default:Et(r,i,u,oe,o,null)}}xc(r,m,w,U,W,_,h,!1);return;case"select":Ze("invalid",r),u=_=m=null;for(h in o)if(o.hasOwnProperty(h)&&(w=o[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":_=w;break;case"multiple":u=w;default:Et(r,i,h,w,o,null)}i=m,o=_,r.multiple=!!u,i!=null?ga(r,!!u,i,!1):o!=null&&ga(r,!!u,o,!0);return;case"textarea":Ze("invalid",r),m=h=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(w=o[_],w!=null))switch(_){case"value":u=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(a(91));break;default:Et(r,i,_,w,o,null)}ya(r,u,h,m);return;case"option":for(U in o)if(o.hasOwnProperty(U)&&(u=o[U],u!=null))switch(U){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Et(r,i,U,u,o,null)}return;case"dialog":Ze("beforetoggle",r),Ze("toggle",r),Ze("cancel",r),Ze("close",r);break;case"iframe":case"object":Ze("load",r);break;case"video":case"audio":for(u=0;u<_u.length;u++)Ze(_u[u],r);break;case"image":Ze("error",r),Ze("load",r);break;case"details":Ze("toggle",r);break;case"embed":case"source":case"link":Ze("error",r),Ze("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(u=o[W],u!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Et(r,i,W,u,o,null)}return;default:if(go(i)){for(oe in o)o.hasOwnProperty(oe)&&(u=o[oe],u!==void 0&&Sp(r,i,oe,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&Et(r,i,w,u,o,null))}function eC(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,_=null,w=null,U=null,W=null,oe=null;for(ae in o){var ce=o[ae];if(o.hasOwnProperty(ae)&&ce!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":U=ce;default:u.hasOwnProperty(ae)||Et(r,i,ae,null,u,ce)}}for(var ee in u){var ae=u[ee];if(ce=o[ee],u.hasOwnProperty(ee)&&(ae!=null||ce!=null))switch(ee){case"type":m=ae;break;case"name":h=ae;break;case"checked":W=ae;break;case"defaultChecked":oe=ae;break;case"value":_=ae;break;case"defaultValue":w=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,i));break;default:ae!==ce&&Et(r,i,ee,ae,u,ce)}}po(r,_,w,U,W,oe,m,h);return;case"select":ae=_=w=ee=null;for(m in o)if(U=o[m],o.hasOwnProperty(m)&&U!=null)switch(m){case"value":break;case"multiple":ae=U;default:u.hasOwnProperty(m)||Et(r,i,m,null,u,U)}for(h in u)if(m=u[h],U=o[h],u.hasOwnProperty(h)&&(m!=null||U!=null))switch(h){case"value":ee=m;break;case"defaultValue":w=m;break;case"multiple":_=m;default:m!==U&&Et(r,i,h,m,u,U)}i=w,o=_,u=ae,ee!=null?ga(r,!!o,ee,!1):!!u!=!!o&&(i!=null?ga(r,!!o,i,!0):ga(r,!!o,o?[]:"",!1));return;case"textarea":ae=ee=null;for(w in o)if(h=o[w],o.hasOwnProperty(w)&&h!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Et(r,i,w,null,u,h)}for(_ in u)if(h=u[_],m=o[_],u.hasOwnProperty(_)&&(h!=null||m!=null))switch(_){case"value":ee=h;break;case"defaultValue":ae=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==m&&Et(r,i,_,h,u,m)}Oc(r,ee,ae);return;case"option":for(var Ce in o)if(ee=o[Ce],o.hasOwnProperty(Ce)&&ee!=null&&!u.hasOwnProperty(Ce))switch(Ce){case"selected":r.selected=!1;break;default:Et(r,i,Ce,null,u,ee)}for(U in u)if(ee=u[U],ae=o[U],u.hasOwnProperty(U)&&ee!==ae&&(ee!=null||ae!=null))switch(U){case"selected":r.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Et(r,i,U,ee,u,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in o)ee=o[Ve],o.hasOwnProperty(Ve)&&ee!=null&&!u.hasOwnProperty(Ve)&&Et(r,i,Ve,null,u,ee);for(W in u)if(ee=u[W],ae=o[W],u.hasOwnProperty(W)&&ee!==ae&&(ee!=null||ae!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,i));break;default:Et(r,i,W,ee,u,ae)}return;default:if(go(i)){for(var Tt in o)ee=o[Tt],o.hasOwnProperty(Tt)&&ee!==void 0&&!u.hasOwnProperty(Tt)&&Sp(r,i,Tt,void 0,u,ee);for(oe in u)ee=u[oe],ae=o[oe],!u.hasOwnProperty(oe)||ee===ae||ee===void 0&&ae===void 0||Sp(r,i,oe,ee,u,ae);return}}for(var $ in o)ee=o[$],o.hasOwnProperty($)&&ee!=null&&!u.hasOwnProperty($)&&Et(r,i,$,null,u,ee);for(ce in u)ee=u[ce],ae=o[ce],!u.hasOwnProperty(ce)||ee===ae||ee==null&&ae==null||Et(r,i,ce,ee,u,ae)}function sT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tC(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var h=o[u],m=h.transferSize,_=h.initiatorType,w=h.duration;if(m&&w&&sT(_)){for(_=0,w=h.responseEnd,u+=1;u<o.length;u++){var U=o[u],W=U.startTime;if(W>w)break;var oe=U.transferSize,ce=U.initiatorType;oe&&sT(ce)&&(U=U.responseEnd,_+=oe*(U<w?1:(w-W)/(U-W)))}if(--u,i+=8*(m+_)/(h.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Ap=null,wp=null;function Lf(r){return r.nodeType===9?r:r.ownerDocument}function oT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lT(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Rp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Cp=null;function nC(){var r=window.event;return r&&r.type==="popstate"?r===Cp?!1:(Cp=r,!0):(Cp=null,!1)}var uT=typeof setTimeout=="function"?setTimeout:void 0,rC=typeof clearTimeout=="function"?clearTimeout:void 0,cT=typeof Promise=="function"?Promise:void 0,iC=typeof queueMicrotask=="function"?queueMicrotask:typeof cT<"u"?function(r){return cT.resolve(null).then(r).catch(aC)}:uT;function aC(r){setTimeout(function(){throw r})}function za(r){return r==="head"}function fT(r,i){var o=i,u=0;do{var h=o.nextSibling;if(r.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(h),Wo(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Tu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Tu(o);for(var m=o.firstChild;m;){var _=m.nextSibling,w=m.nodeName;m[gt]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&Tu(r.ownerDocument.body);o=h}while(o);Wo(i)}function hT(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Ip(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ip(o),Nt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function sC(r,i,o,u){for(;r.nodeType===1;){var h=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[gt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Or(r.nextSibling),r===null)break}return null}function oC(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Or(r.nextSibling),r===null))return null;return r}function dT(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Or(r.nextSibling),r===null))return null;return r}function Dp(r){return r.data==="$?"||r.data==="$~"}function Np(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function lC(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Or(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var xp=null;function mT(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return Or(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function pT(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function gT(r,i,o){switch(i=Lf(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function Tu(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Nt(r)}var Mr=new Map,yT=new Set;function kf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Qi=ne.d;ne.d={f:uC,r:cC,D:fC,C:hC,L:dC,m:mC,X:gC,S:pC,M:yC};function uC(){var r=Qi.f(),i=If();return r||i}function cC(r){var i=Ge(r);i!==null&&i.tag===5&&i.type==="form"?V_(i):Qi.r(r)}var Yo=typeof document>"u"?null:document;function vT(r,i,o){var u=Yo;if(u&&typeof i=="string"&&i){var h=Hn(i);h='link[rel="'+r+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),yT.has(h)||(yT.add(h),r={rel:r,crossOrigin:o,href:i},u.querySelector(h)===null&&(i=u.createElement("link"),En(i,"link",r),It(i),u.head.appendChild(i)))}}function fC(r){Qi.D(r),vT("dns-prefetch",r,null)}function hC(r,i){Qi.C(r,i),vT("preconnect",r,i)}function dC(r,i,o){Qi.L(r,i,o);var u=Yo;if(u&&r&&i){var h='link[rel="preload"][as="'+Hn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+Hn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+Hn(o.imageSizes)+'"]')):h+='[href="'+Hn(r)+'"]';var m=h;switch(i){case"style":m=Qo(r);break;case"script":m=Xo(r)}Mr.has(m)||(r=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Mr.set(m,r),u.querySelector(h)!==null||i==="style"&&u.querySelector(bu(m))||i==="script"&&u.querySelector(Su(m))||(i=u.createElement("link"),En(i,"link",r),It(i),u.head.appendChild(i)))}}function mC(r,i){Qi.m(r,i);var o=Yo;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Hn(u)+'"][href="'+Hn(r)+'"]',m=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Xo(r)}if(!Mr.has(m)&&(r=E({rel:"modulepreload",href:r},i),Mr.set(m,r),o.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Su(m)))return}u=o.createElement("link"),En(u,"link",r),It(u),o.head.appendChild(u)}}}function pC(r,i,o){Qi.S(r,i,o);var u=Yo;if(u&&r){var h=hn(u).hoistableStyles,m=Qo(r);i=i||"default";var _=h.get(m);if(!_){var w={loading:0,preload:null};if(_=u.querySelector(bu(m)))w.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Mr.get(m))&&Op(r,o);var U=_=u.createElement("link");It(U),En(U,"link",r),U._p=new Promise(function(W,oe){U.onload=W,U.onerror=oe}),U.addEventListener("load",function(){w.loading|=1}),U.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Uf(_,i,u)}_={type:"stylesheet",instance:_,count:1,state:w},h.set(m,_)}}}function gC(r,i){Qi.X(r,i);var o=Yo;if(o&&r){var u=hn(o).hoistableScripts,h=Xo(r),m=u.get(h);m||(m=o.querySelector(Su(h)),m||(r=E({src:r,async:!0},i),(i=Mr.get(h))&&Mp(r,i),m=o.createElement("script"),It(m),En(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function yC(r,i){Qi.M(r,i);var o=Yo;if(o&&r){var u=hn(o).hoistableScripts,h=Xo(r),m=u.get(h);m||(m=o.querySelector(Su(h)),m||(r=E({src:r,async:!0,type:"module"},i),(i=Mr.get(h))&&Mp(r,i),m=o.createElement("script"),It(m),En(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function _T(r,i,o,u){var h=(h=De.current)?kf(h):null;if(!h)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Qo(o.href),o=hn(h).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Qo(o.href);var m=hn(h).hoistableStyles,_=m.get(r);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,_),(m=h.querySelector(bu(r)))&&!m._p&&(_.instance=m,_.state.loading=5),Mr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Mr.set(r,o),m||vC(h,r,o,_.state))),i&&u===null)throw Error(a(528,""));return _}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Xo(o),o=hn(h).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function Qo(r){return'href="'+Hn(r)+'"'}function bu(r){return'link[rel="stylesheet"]['+r+"]"}function ET(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function vC(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),En(i,"link",o),It(i),r.head.appendChild(i))}function Xo(r){return'[src="'+Hn(r)+'"]'}function Su(r){return"script[async]"+r}function TT(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Hn(o.href)+'"]');if(u)return i.instance=u,It(u),u;var h=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),It(u),En(u,"style",h),Uf(u,o.precedence,r),i.instance=u;case"stylesheet":h=Qo(o.href);var m=r.querySelector(bu(h));if(m)return i.state.loading|=4,i.instance=m,It(m),m;u=ET(o),(h=Mr.get(h))&&Op(u,h),m=(r.ownerDocument||r).createElement("link"),It(m);var _=m;return _._p=new Promise(function(w,U){_.onload=w,_.onerror=U}),En(m,"link",u),i.state.loading|=4,Uf(m,o.precedence,r),i.instance=m;case"script":return m=Xo(o.src),(h=r.querySelector(Su(m)))?(i.instance=h,It(h),h):(u=o,(h=Mr.get(m))&&(u=E({},o),Mp(u,h)),r=r.ownerDocument||r,h=r.createElement("script"),It(h),En(h,"link",u),r.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Uf(u,o.precedence,r));return i.instance}function Uf(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,m=h,_=0;_<u.length;_++){var w=u[_];if(w.dataset.precedence===i)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Op(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Mp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var jf=null;function bT(r,i,o){if(jf===null){var u=new Map,h=jf=new Map;h.set(o,u)}else h=jf,u=h.get(o),u||(u=new Map,h.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),h=0;h<o.length;h++){var m=o[h];if(!(m[gt]||m[ye]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=r+_;var w=u.get(_);w?w.push(m):u.set(_,[m])}}return u}function ST(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function _C(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function AT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function EC(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var h=Qo(u.href),m=i.querySelector(bu(h));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=zf.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=m,It(m);return}m=i.ownerDocument||i,u=ET(u),(h=Mr.get(h))&&Op(u,h),m=m.createElement("link"),It(m);var _=m;_._p=new Promise(function(w,U){_.onload=w,_.onerror=U}),En(m,"link",u),o.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=zf.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var Vp=0;function TC(r,i){return r.stylesheets&&r.count===0&&Ff(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Ff(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4+i);0<r.imgBytes&&Vp===0&&(Vp=62500*tC());var h=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Ff(r,r.stylesheets),r.unsuspend)){var m=r.unsuspend;r.unsuspend=null,m()}},(r.imgBytes>Vp?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(h)}}:null}function zf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ff(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Bf=null;function Ff(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Bf=new Map,i.forEach(bC,r),Bf=null,zf.call(r))}function bC(r,i){if(!(i.state.loading&4)){var o=Bf.get(r);if(o)var u=o.get(null);else{o=new Map,Bf.set(r,o);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var _=h[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}h=i.instance,_=h.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,h),o.set(_,h),this.count++,u=zf.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),m?m.parentNode.insertBefore(h,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),i.state.loading|=4}}var Au={$$typeof:K,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function SC(r,i,o,u,h,m,_,w,U){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ln(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ln(0),this.hiddenUpdates=Ln(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function wT(r,i,o,u,h,m,_,w,U,W,oe,ce){return r=new SC(r,i,o,_,U,W,oe,ce,w),i=1,m===!0&&(i|=24),m=lr(3,null,null,i),r.current=m,m.stateNode=r,i=dm(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},ym(m),r}function RT(r){return r?(r=Co,r):Co}function CT(r,i,o,u,h,m){h=RT(h),u.context===null?u.context=h:u.pendingContext=h,u=Da(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Na(r,u,i),o!==null&&(Qn(o,r,i),nu(o,r,i))}function IT(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Pp(r,i){IT(r,i),(r=r.alternate)&&IT(r,i)}function DT(r){if(r.tag===13||r.tag===31){var i=Ms(r,67108864);i!==null&&Qn(i,r,67108864),Pp(r,67108864)}}function NT(r){if(r.tag===13||r.tag===31){var i=dr();i=J(i);var o=Ms(r,i);o!==null&&Qn(o,r,i),Pp(r,i)}}var Hf=!0;function AC(r,i,o,u){var h=j.T;j.T=null;var m=ne.p;try{ne.p=2,Lp(r,i,o,u)}finally{ne.p=m,j.T=h}}function wC(r,i,o,u){var h=j.T;j.T=null;var m=ne.p;try{ne.p=8,Lp(r,i,o,u)}finally{ne.p=m,j.T=h}}function Lp(r,i,o,u){if(Hf){var h=kp(u);if(h===null)bp(r,i,u,qf,o),OT(r,u);else if(CC(h,r,i,o,u))u.stopPropagation();else if(OT(r,u),i&4&&-1<RC.indexOf(r)){for(;h!==null;){var m=Ge(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=br(m.pendingLanes);if(_!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var U=1<<31-Vt(_);w.entanglements[1]|=U,_&=~U}yi(m),(ft&6)===0&&(Rf=zt()+500,vu(0))}}break;case 31:case 13:w=Ms(m,2),w!==null&&Qn(w,m,2),If(),Pp(m,2)}if(m=kp(u),m===null&&bp(r,i,u,qf,o),m===h)break;h=m}h!==null&&u.stopPropagation()}else bp(r,i,u,null,o)}}function kp(r){return r=Sr(r),Up(r)}var qf=null;function Up(r){if(qf=null,r=Rt(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return qf=r,null}function xT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(er()){case ha:return 2;case Di:return 8;case fn:case tr:return 32;case _s:return 268435456;default:return 32}default:return 32}}var jp=!1,Ba=null,Fa=null,Ha=null,wu=new Map,Ru=new Map,qa=[],RC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function OT(r,i){switch(r){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Fa=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":wu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(i.pointerId)}}function Cu(r,i,o,u,h,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[h]},i!==null&&(i=Ge(i),i!==null&&DT(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),r)}function CC(r,i,o,u,h){switch(i){case"focusin":return Ba=Cu(Ba,r,i,o,u,h),!0;case"dragenter":return Fa=Cu(Fa,r,i,o,u,h),!0;case"mouseover":return Ha=Cu(Ha,r,i,o,u,h),!0;case"pointerover":var m=h.pointerId;return wu.set(m,Cu(wu.get(m)||null,r,i,o,u,h)),!0;case"gotpointercapture":return m=h.pointerId,Ru.set(m,Cu(Ru.get(m)||null,r,i,o,u,h)),!0}return!1}function MT(r){var i=Rt(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,be(r.priority,function(){NT(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,be(r.priority,function(){NT(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Gf(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=kp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);zl=u,o.target.dispatchEvent(u),zl=null}else return i=Ge(o),i!==null&&DT(i),r.blockedOn=o,!1;i.shift()}return!0}function VT(r,i,o){Gf(r)&&o.delete(i)}function IC(){jp=!1,Ba!==null&&Gf(Ba)&&(Ba=null),Fa!==null&&Gf(Fa)&&(Fa=null),Ha!==null&&Gf(Ha)&&(Ha=null),wu.forEach(VT),Ru.forEach(VT)}function $f(r,i){r.blockedOn===i&&(r.blockedOn=null,jp||(jp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,IC)))}var Kf=null;function PT(r){Kf!==r&&(Kf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Kf===r&&(Kf=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],h=r[i+2];if(typeof u!="function"){if(Up(u||o)===null)continue;break}var m=Ge(o);m!==null&&(r.splice(i,3),i-=3,km(m,{pending:!0,data:h,method:o.method,action:u},u,h))}}))}function Wo(r){function i(U){return $f(U,r)}Ba!==null&&$f(Ba,r),Fa!==null&&$f(Fa,r),Ha!==null&&$f(Ha,r),wu.forEach(i),Ru.forEach(i);for(var o=0;o<qa.length;o++){var u=qa[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<qa.length&&(o=qa[0],o.blockedOn===null);)MT(o),o.blockedOn===null&&qa.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var h=o[u],m=o[u+1],_=h[_e]||null;if(typeof m=="function")_||PT(o);else if(_){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,_=m[_e]||null)w=_.formAction;else if(Up(h)!==null)continue}else w=_.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),PT(o)}}}function LT(){function r(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,h=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function zp(r){this._internalRoot=r}Yf.prototype.render=zp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=dr();CT(o,u,r,i,null,null)},Yf.prototype.unmount=zp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;CT(r.current,2,null,r,null,null),If(),i[Ae]=null}};function Yf(r){this._internalRoot=r}Yf.prototype.unstable_scheduleHydration=function(r){if(r){var i=ge();r={blockedOn:null,target:r,priority:i};for(var o=0;o<qa.length&&i!==0&&i<qa[o].priority;o++);qa.splice(o,0,r),o===0&&MT(r)}};var kT=e.version;if(kT!=="19.2.4")throw Error(a(527,kT,"19.2.4"));ne.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=g(i),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var DC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qf.isDisabled&&Qf.supportsFiber)try{nr=Qf.inject(DC),St=Qf}catch{}}return Du.createRoot=function(r,i){if(!s(r))throw Error(a(299));var o=!1,u="",h=q_,m=G_,_=$_;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=wT(r,1,!1,null,null,o,u,null,h,m,_,LT),r[Ae]=i.current,Tp(r),new zp(i)},Du.hydrateRoot=function(r,i,o){if(!s(r))throw Error(a(299));var u=!1,h="",m=q_,_=G_,w=$_,U=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(U=o.formState)),i=wT(r,1,!0,i,o??null,u,h,U,m,_,w,LT),i.context=RT(null),o=i.current,u=dr(),u=J(u),h=Da(u),h.callback=null,Na(o,h,u),o=u,i.current.lanes=o,ii(i,o),yi(i),r[Ae]=i.current,Tp(r),new Yf(i)},Du.version="19.2.4",Du}var KT;function FC(){if(KT)return qp.exports;KT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qp.exports=BC(),qp.exports}var HC=FC();const qC=_S(HC);var Yp={exports:{}},Qp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT;function GC(){if(YT)return Qp;YT=1;var n=ud();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,a=n.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return Qp.useSyncExternalStoreWithSelector=function(p,g,v,E,S){var C=s(null);if(C.current===null){var L={hasValue:!1,value:null};C.current=L}else L=C.current;C=c(function(){function M(se){if(!G){if(G=!0,q=se,se=E(se),S!==void 0&&L.hasValue){var Q=L.value;if(S(Q,se))return K=Q}return K=se}if(Q=K,t(q,se))return Q;var b=E(se);return S!==void 0&&S(Q,b)?(q=se,Q):(q=se,K=b)}var G=!1,q,K,Z=v===void 0?null:v;return[function(){return M(g())},Z===null?void 0:function(){return M(Z())}]},[g,v,E,S]);var z=a(p,C[0],C[1]);return l(function(){L.hasValue=!0,L.value=z},[z]),d(z),z},Qp}var QT;function $C(){return QT||(QT=1,Yp.exports=GC()),Yp.exports}var KC=$C();function YC(n){n()}function QC(){let n=null,e=null;return{clear(){n=null,e=null},notify(){YC(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let a=n;for(;a;)t.push(a),a=a.next;return t},subscribe(t){let a=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!a||n===null||(a=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var XT={notify(){},get:()=>[]};function XC(n,e){let t,a=XT,s=0,l=!1;function c(z){v();const M=a.subscribe(z);let G=!1;return()=>{G||(G=!0,M(),E())}}function d(){a.notify()}function p(){L.onStateChange&&L.onStateChange()}function g(){return l}function v(){s++,t||(t=n.subscribe(p),a=QC())}function E(){s--,t&&s===0&&(t(),t=void 0,a.clear(),a=XT)}function S(){l||(l=!0,v())}function C(){l&&(l=!1,E())}const L={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:p,isSubscribed:g,trySubscribe:S,tryUnsubscribe:C,getListeners:()=>a};return L}var WC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JC=WC(),ZC=()=>typeof navigator<"u"&&navigator.product==="ReactNative",eI=ZC(),tI=()=>JC||eI?B.useLayoutEffect:B.useEffect,nI=tI(),Xp=Symbol.for("react-redux-context"),Wp=typeof globalThis<"u"?globalThis:{};function rI(){if(!B.createContext)return{};const n=Wp[Xp]??(Wp[Xp]=new Map);let e=n.get(B.createContext);return e||(e=B.createContext(null),n.set(B.createContext,e)),e}var ss=rI();function iI(n){const{children:e,context:t,serverState:a,store:s}=n,l=B.useMemo(()=>{const p=XC(s);return{store:s,subscription:p,getServerState:a?()=>a:void 0}},[s,a]),c=B.useMemo(()=>s.getState(),[s]);nI(()=>{const{subscription:p}=l;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==s.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[l,c]);const d=t||ss;return B.createElement(d.Provider,{value:l},e)}var aI=iI;function sy(n=ss){return function(){return B.useContext(n)}}var bS=sy();function SS(n=ss){const e=n===ss?bS:sy(n),t=()=>{const{store:a}=e();return a};return Object.assign(t,{withTypes:()=>t}),t}var sI=SS();function oI(n=ss){const e=n===ss?sI:SS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var lI=oI(),uI=(n,e)=>n===e;function cI(n=ss){const e=n===ss?bS:sy(n),t=(a,s={})=>{const{equalityFn:l=uI}=typeof s=="function"?{equalityFn:s}:s,c=e(),{store:d,subscription:p,getServerState:g}=c;B.useRef(!0);const v=B.useCallback({[a.name](S){return a(S)}}[a.name],[a]),E=KC.useSyncExternalStoreWithSelector(p.addNestedSub,d.getState,g||d.getState,v,l);return B.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var fI=cI();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var AS=n=>{throw TypeError(n)},hI=(n,e,t)=>e.has(n)||AS("Cannot "+t),Jp=(n,e,t)=>(hI(n,e,"read from private field"),t?t.call(n):e.get(n)),dI=(n,e,t)=>e.has(n)?AS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),WT="popstate";function mI(n={}){function e(s,l){let{pathname:c="/",search:d="",hash:p=""}=la(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Xu("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=s.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof l=="string"?l:wi(l))}function a(s,l){$t(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return gI(e,t,a,n)}function Xe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function $t(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pI(){return Math.random().toString(36).substring(2,10)}function JT(n,e){return{usr:n.state,key:n.key,idx:e}}function Xu(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?la(e):e,state:t,key:e&&e.key||a||pI()}}function wi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function la(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function gI(n,e,t,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,d="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let M=v(),G=M==null?null:M-g;g=M,p&&p({action:d,location:z.location,delta:G})}function S(M,G){d="PUSH";let q=Xu(z.location,M,G);t&&t(q,M),g=v()+1;let K=JT(q,g),Z=z.createHref(q);try{c.pushState(K,"",Z)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;s.location.assign(Z)}l&&p&&p({action:d,location:z.location,delta:1})}function C(M,G){d="REPLACE";let q=Xu(z.location,M,G);t&&t(q,M),g=v();let K=JT(q,g),Z=z.createHref(q);c.replaceState(K,"",Z),l&&p&&p({action:d,location:z.location,delta:0})}function L(M){return wS(M)}let z={get action(){return d},get location(){return n(s,c)},listen(M){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(WT,E),p=M,()=>{s.removeEventListener(WT,E),p=null}},createHref(M){return e(s,M)},createURL:L,encodeLocation(M){let G=L(M);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:S,replace:C,go(M){return c.go(M)}};return z}function wS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:wi(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}var Vu,ZT=class{constructor(n){if(dI(this,Vu,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Jp(this,Vu).has(n))return Jp(this,Vu).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Jp(this,Vu).set(n,e)}};Vu=new WeakMap;var yI=new Set(["lazy","caseSensitive","path","id","index","children"]);function vI(n){return yI.has(n)}var _I=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function EI(n){return _I.has(n)}function TI(n){return n.index===!0}function Wu(n,e,t=[],a={},s=!1){return n.map((l,c)=>{let d=[...t,String(c)],p=typeof l.id=="string"?l.id:d.join("-");if(Xe(l.index!==!0||!l.children,"Cannot specify children on an index route"),Xe(s||!a[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),TI(l)){let g={...l,id:p};return a[p]=e0(g,e(g)),g}else{let g={...l,id:p,children:void 0};return a[p]=e0(g,e(g)),l.children&&(g.children=Wu(l.children,e,d,a,s)),g}})}function e0(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function Ka(n,e,t="/"){return Pu(n,e,t,!1)}function Pu(n,e,t,a){let s=typeof e=="string"?la(e):e,l=kr(s.pathname||"/",t);if(l==null)return null;let c=RS(n);SI(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=VI(l);d=OI(c[p],g,a)}return d}function bI(n,e){let{route:t,pathname:a,params:s}=n;return{id:t.id,pathname:a,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function RS(n,e=[],t=[],a="",s=!1){let l=(c,d,p=s,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(a)&&p)return;Xe(v.relativePath.startsWith(a),`Absolute route path "${v.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(a.length)}let E=Ei([a,v.relativePath]),S=t.concat(v);c.children&&c.children.length>0&&(Xe(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),RS(c.children,e,S,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:NI(E,c.index),routesMeta:S})};return n.forEach((c,d)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,d);else for(let g of CS(c.path))l(c,d,!0,g)}),e}function CS(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=CS(a.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),s&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function SI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:xI(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var AI=/^:[\w-]+$/,wI=3,RI=2,CI=1,II=10,DI=-2,t0=n=>n==="*";function NI(n,e){let t=n.split("/"),a=t.length;return t.some(t0)&&(a+=DI),e&&(a+=RI),t.filter(s=>!t0(s)).reduce((s,l)=>s+(AI.test(l)?wI:l===""?CI:II),a)}function xI(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function OI(n,e,t=!1){let{routesMeta:a}=n,s={},l="/",c=[];for(let d=0;d<a.length;++d){let p=a[d],g=d===a.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=Mh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),S=p.route;if(!E&&g&&t&&!a[a.length-1].route.index&&(E=Mh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:Ei([l,E.pathname]),pathnameBase:kI(Ei([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Ei([l,E.pathnameBase]))}return c}function Mh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=MI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((g,{paramName:v,isOptional:E},S)=>{if(v==="*"){let L=d[S]||"";c=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const C=d[S];return E&&!C?g[v]=void 0:g[v]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function MI(n,e=!1,t=!0){$t(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(a.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function VI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $t(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function kr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function PI({basename:n,pathname:e}){return e==="/"?n:Ei([n,e])}var IS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oy=n=>IS.test(n);function LI(n,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof n=="string"?la(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=n0(t.substring(1),"/"):l=n0(t,e)):l=e,{pathname:l,search:UI(a),hash:jI(s)}}function n0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Zp(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cd(n){let e=DS(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function fd(n,e,t,a=!1){let s;typeof n=="string"?s=la(n):(s={...n},Xe(!s.pathname||!s.pathname.includes("?"),Zp("?","pathname","search",s)),Xe(!s.pathname||!s.pathname.includes("#"),Zp("#","pathname","hash",s)),Xe(!s.search||!s.search.includes("#"),Zp("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!a&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;s.pathname=S.join("/")}d=E>=0?e[E]:"/"}let p=LI(s,d),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Ei=n=>n.join("/").replace(/\/\/+/g,"/"),kI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),UI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,cc=class{constructor(n,e,t,a=!1){this.status=n,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Ju(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function fc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var NS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xS(n,e){let t=n;if(typeof t!="string"||!IS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,s=!1;if(NS)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=kr(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:s=!0}catch{$t(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:t}}var Ja=Symbol("Uninstrumented");function zI(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let d of c)l[d]&&t[d].push(l[d])}}));let a={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=al(t.lazy,e.lazy,()=>{});s&&(a.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],d=t[`lazy.${l}`];if(typeof c=="function"&&d.length>0){let p=al(d,c,()=>{});p&&(a.lazy=Object.assign(a.lazy||{},{[l]:p}))}})}return["loader","action"].forEach(s=>{let l=e[s];if(typeof l=="function"&&t[s].length>0){let c=l[Ja]??l,d=al(t[s],c,(...p)=>r0(p[0]));d&&(s==="loader"&&c.hydrate===!0&&(d.hydrate=!0),d[Ja]=c,a[s]=d)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(a.middleware=e.middleware.map(s=>{let l=s[Ja]??s,c=al(t.middleware,l,(...d)=>r0(d[0]));return c?(c[Ja]=l,c):s})),a}function BI(n,e){let t={navigate:[],fetch:[]};if(e.forEach(a=>a({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&t[c].push(s[c])}})),t.navigate.length>0){let a=n.navigate[Ja]??n.navigate,s=al(t.navigate,a,(...l)=>{let[c,d]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?wi(c):".",...i0(n,d??{})}});s&&(s[Ja]=a,n.navigate=s)}if(t.fetch.length>0){let a=n.fetch[Ja]??n.fetch,s=al(t.fetch,a,(...l)=>{let[c,,d,p]=l;return{href:d??".",fetcherKey:c,...i0(n,p??{})}});s&&(s[Ja]=a,n.fetch=s)}return n}function al(n,e,t){return n.length===0?null:async(...a)=>{let s=await OS(n,t(...a),()=>e(...a),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function OS(n,e,t,a){let s=n[a],l;if(s){let c,d=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=OS(n,e,t,a-1),l=await c,Xe(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(d,e)}catch(p){console.error("An instrumentation function threw an error:",p)}c||await d(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function r0(n){let{request:e,context:t,params:a,unstable_pattern:s}=n;return{request:FI(e),params:{...a},unstable_pattern:s,context:HI(t)}}function i0(n,e){return{currentUrl:wi(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function FI(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function HI(n){if(GI(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var qI=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function GI(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===qI}var MS=["POST","PUT","PATCH","DELETE"],$I=new Set(MS),KI=["GET",...MS],YI=new Set(KI),VS=new Set([301,302,303,307,308]),QI=new Set([307,308]),eg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},XI={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Nu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},WI=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),PS="remix-router-transitions",LS=Symbol("ResetLoaderData");function JI(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Xe(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=n.hydrationRouteProperties||[],s=n.mapRouteProperties||WI,l=s;if(n.unstable_instrumentations){let P=n.unstable_instrumentations;l=H=>({...s(H),...zI(P.map(J=>J.route).filter(Boolean),H)})}let c={},d=Wu(n.routes,l,void 0,c),p,g=n.basename||"/";g.startsWith("/")||(g=`/${g}`);let v=n.dataStrategy||rD,E={...n.future},S=null,C=new Set,L=null,z=null,M=null,G=n.hydrationData!=null,q=Ka(d,n.history.location,g),K=!1,Z=null,se;if(q==null&&!n.patchRoutesOnNavigation){let P=Vr(404,{pathname:n.history.location.pathname}),{matches:H,route:J}=Xf(d);se=!0,q=H,Z={[J.id]:P}}else if(q&&!n.hydrationData&&Ni(q,d,n.history.location.pathname).active&&(q=null),q)if(q.some(P=>P.route.lazy))se=!1;else if(!q.some(P=>ly(P.route)))se=!0;else{let P=n.hydrationData?n.hydrationData.loaderData:null,H=n.hydrationData?n.hydrationData.errors:null;if(H){let J=q.findIndex(he=>H[he.route.id]!==void 0);se=q.slice(0,J+1).every(he=>!Ag(he.route,P,H))}else se=q.every(J=>!Ag(J.route,P,H))}else{se=!1,q=[];let P=Ni(null,d,n.history.location.pathname);P.active&&P.matches&&(K=!0,q=P.matches)}let Q,b={historyAction:n.history.action,location:n.history.location,matches:q,initialized:se,navigation:eg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||Z,fetchers:new Map,blockers:new Map},A="POP",R=null,N=!1,x,k=!1,O=new Map,Me=null,qe=!1,j=!1,ne=new Set,ie=new Map,me=0,Ee=-1,V=new Map,te=new Set,de=new Map,pe=new Map,we=new Set,De=new Map,Ye,bt=null;function wt(){if(S=n.history.listen(({action:P,location:H,delta:J})=>{if(Ye){Ye(),Ye=void 0;return}$t(De.size===0||J!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let he=ri({currentLocation:b.location,nextLocation:H,historyAction:P});if(he&&J!=null){let ge=new Promise(be=>{Ye=be});n.history.go(J*-1),Pn(he,{state:"blocked",location:H,proceed(){Pn(he,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),ge.then(()=>n.history.go(J))},reset(){let be=new Map(b.blockers);be.set(he,Nu),Ut({blockers:be})}}),R==null||R.resolve(),R=null;return}return Mn(P,H)}),t){TD(e,O);let P=()=>bD(e,O);e.addEventListener("pagehide",P),Me=()=>e.removeEventListener("pagehide",P)}return b.initialized||Mn("POP",b.location,{initialHydration:!0}),Q}function Ii(){S&&S(),Me&&Me(),C.clear(),x&&x.abort(),b.fetchers.forEach((P,H)=>da(H)),b.blockers.forEach((P,H)=>Ts(H))}function fa(P){return C.add(P),()=>C.delete(P)}function Ut(P,H={}){P.matches&&(P.matches=P.matches.map(ge=>{let be=c[ge.route.id],Re=ge.route;return Re.element!==be.element||Re.errorElement!==be.errorElement||Re.hydrateFallbackElement!==be.hydrateFallbackElement?{...ge,route:be}:ge})),b={...b,...P};let J=[],he=[];b.fetchers.forEach((ge,be)=>{ge.state==="idle"&&(we.has(be)?J.push(be):he.push(be))}),we.forEach(ge=>{!b.fetchers.has(ge)&&!ie.has(ge)&&J.push(ge)}),[...C].forEach(ge=>ge(b,{deletedFetchers:J,newErrors:P.errors??null,viewTransitionOpts:H.viewTransitionOpts,flushSync:H.flushSync===!0})),J.forEach(ge=>da(ge)),he.forEach(ge=>b.fetchers.delete(ge))}function Jn(P,H,{flushSync:J}={}){var Pe,Ne;let he=b.actionData!=null&&b.navigation.formMethod!=null&&Dn(b.navigation.formMethod)&&b.navigation.state==="loading"&&((Pe=P.state)==null?void 0:Pe._isRedirect)!==!0,ge;H.actionData?Object.keys(H.actionData).length>0?ge=H.actionData:ge=null:he?ge=b.actionData:ge=null;let be=H.loaderData?m0(b.loaderData,H.loaderData,H.matches||[],H.errors):b.loaderData,Re=b.blockers;Re.size>0&&(Re=new Map(Re),Re.forEach((Ue,Qe)=>Re.set(Qe,Nu)));let ye=qe?!1:mo(P,H.matches||b.matches),_e=N===!0||b.navigation.formMethod!=null&&Dn(b.navigation.formMethod)&&((Ne=P.state)==null?void 0:Ne._isRedirect)!==!0;p&&(d=p,p=void 0),qe||A==="POP"||(A==="PUSH"?n.history.push(P,P.state):A==="REPLACE"&&n.history.replace(P,P.state));let Ae;if(A==="POP"){let Ue=O.get(b.location.pathname);Ue&&Ue.has(P.pathname)?Ae={currentLocation:b.location,nextLocation:P}:O.has(P.pathname)&&(Ae={currentLocation:P,nextLocation:b.location})}else if(k){let Ue=O.get(b.location.pathname);Ue?Ue.add(P.pathname):(Ue=new Set([P.pathname]),O.set(b.location.pathname,Ue)),Ae={currentLocation:b.location,nextLocation:P}}Ut({...H,actionData:ge,loaderData:be,historyAction:A,location:P,initialized:!0,navigation:eg,revalidation:"idle",restoreScrollPosition:ye,preventScrollReset:_e,blockers:Re},{viewTransitionOpts:Ae,flushSync:J===!0}),A="POP",N=!1,k=!1,qe=!1,j=!1,R==null||R.resolve(),R=null,bt==null||bt.resolve(),bt=null}async function Zn(P,H){if(R==null||R.resolve(),R=null,typeof P=="number"){R||(R=v0());let Qe=R.promise;return n.history.go(P),Qe}let J=Sg(b.location,b.matches,g,P,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:he,submission:ge,error:be}=a0(!1,J,H),Re=b.location,ye=Xu(b.location,he,H&&H.state);ye={...ye,...n.history.encodeLocation(ye)};let _e=H&&H.replace!=null?H.replace:void 0,Ae="PUSH";_e===!0?Ae="REPLACE":_e===!1||ge!=null&&Dn(ge.formMethod)&&ge.formAction===b.location.pathname+b.location.search&&(Ae="REPLACE");let Pe=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,Ne=(H&&H.flushSync)===!0,Ue=ri({currentLocation:Re,nextLocation:ye,historyAction:Ae});if(Ue){Pn(Ue,{state:"blocked",location:ye,proceed(){Pn(Ue,{state:"proceeding",proceed:void 0,reset:void 0,location:ye}),Zn(P,H)},reset(){let Qe=new Map(b.blockers);Qe.set(Ue,Nu),Ut({blockers:Qe})}});return}await Mn(Ae,ye,{submission:ge,pendingError:be,preventScrollReset:Pe,replace:H&&H.replace,enableViewTransition:H&&H.viewTransition,flushSync:Ne,callSiteDefaultShouldRevalidate:H&&H.unstable_defaultShouldRevalidate})}function gs(){bt||(bt=v0()),Di(),Ut({revalidation:"loading"});let P=bt.promise;return b.navigation.state==="submitting"?P:b.navigation.state==="idle"?(Mn(b.historyAction,b.location,{startUninterruptedRevalidation:!0}),P):(Mn(A||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation,enableViewTransition:k===!0}),P)}async function Mn(P,H,J){x&&x.abort(),x=null,A=P,qe=(J&&J.startUninterruptedRevalidation)===!0,ir(b.location,b.matches),N=(J&&J.preventScrollReset)===!0,k=(J&&J.enableViewTransition)===!0;let he=p||d,ge=J&&J.overrideNavigation,be=J!=null&&J.initialHydration&&b.matches&&b.matches.length>0&&!K?b.matches:Ka(he,H,g),Re=(J&&J.flushSync)===!0;if(be&&b.initialized&&!j&&fD(b.location,H)&&!(J&&J.submission&&Dn(J.submission.formMethod))){Jn(H,{matches:be},{flushSync:Re});return}let ye=Ni(be,he,H.pathname);if(ye.active&&ye.matches&&(be=ye.matches),!be){let{error:Nt,notFoundMatches:Rt,route:Ge}=Pt(H.pathname);Jn(H,{matches:Rt,loaderData:{},errors:{[Ge.id]:Nt}},{flushSync:Re});return}x=new AbortController;let _e=Zo(n.history,H,x.signal,J&&J.submission),Ae=n.getContext?await n.getContext():new ZT,Pe;if(J&&J.pendingError)Pe=[Ya(be).route.id,{type:"error",error:J.pendingError}];else if(J&&J.submission&&Dn(J.submission.formMethod)){let Nt=await ys(_e,H,J.submission,be,Ae,ye.active,J&&J.initialHydration===!0,{replace:J.replace,flushSync:Re});if(Nt.shortCircuited)return;if(Nt.pendingActionResult){let[Rt,Ge]=Nt.pendingActionResult;if(mr(Ge)&&Ju(Ge.error)&&Ge.error.status===404){x=null,Jn(H,{matches:Nt.matches,loaderData:{},errors:{[Rt]:Ge.error}});return}}be=Nt.matches||be,Pe=Nt.pendingActionResult,ge=tg(H,J.submission),Re=!1,ye.active=!1,_e=Zo(n.history,_e.url,_e.signal)}let{shortCircuited:Ne,matches:Ue,loaderData:Qe,errors:gt}=await vs(_e,H,be,Ae,ye.active,ge,J&&J.submission,J&&J.fetcherSubmission,J&&J.replace,J&&J.initialHydration===!0,Re,Pe,J&&J.callSiteDefaultShouldRevalidate);Ne||(x=null,Jn(H,{matches:Ue||be,...p0(Pe),loaderData:Qe,errors:gt}))}async function ys(P,H,J,he,ge,be,Re,ye={}){Di();let _e=_D(H,J);if(Ut({navigation:_e},{flushSync:ye.flushSync===!0}),be){let Ne=await Ln(he,H.pathname,P.signal);if(Ne.type==="aborted")return{shortCircuited:!0};if(Ne.type==="error"){if(Ne.partialMatches.length===0){let{matches:Qe,route:gt}=Xf(d);return{matches:Qe,pendingActionResult:[gt.id,{type:"error",error:Ne.error}]}}let Ue=Ya(Ne.partialMatches).route.id;return{matches:Ne.partialMatches,pendingActionResult:[Ue,{type:"error",error:Ne.error}]}}else if(Ne.matches)he=Ne.matches;else{let{notFoundMatches:Ue,error:Qe,route:gt}=Pt(H.pathname);return{matches:Ue,pendingActionResult:[gt.id,{type:"error",error:Qe}]}}}let Ae,Pe=lh(he,H);if(!Pe.route.action&&!Pe.route.lazy)Ae={type:"error",error:Vr(405,{method:P.method,pathname:H.pathname,routeId:Pe.route.id})};else{let Ne=ol(l,c,P,he,Pe,Re?[]:a,ge),Ue=await er(P,Ne,ge,null);if(Ae=Ue[Pe.route.id],!Ae){for(let Qe of he)if(Ue[Qe.route.id]){Ae=Ue[Qe.route.id];break}}if(P.signal.aborted)return{shortCircuited:!0}}if(Ks(Ae)){let Ne;return ye&&ye.replace!=null?Ne=ye.replace:Ne=f0(Ae.response.headers.get("Location"),new URL(P.url),g,n.history)===b.location.pathname+b.location.search,await zt(P,Ae,!0,{submission:J,replace:Ne}),{shortCircuited:!0}}if(mr(Ae)){let Ne=Ya(he,Pe.route.id);return(ye&&ye.replace)!==!0&&(A="PUSH"),{matches:he,pendingActionResult:[Ne.route.id,Ae,Pe.route.id]}}return{matches:he,pendingActionResult:[Pe.route.id,Ae]}}async function vs(P,H,J,he,ge,be,Re,ye,_e,Ae,Pe,Ne,Ue){let Qe=be||tg(H,Re),gt=Re||ye||y0(Qe),Nt=!qe&&!Ae;if(ge){if(Nt){let Bt=jt(Ne);Ut({navigation:Qe,...Bt!==void 0?{actionData:Bt}:{}},{flushSync:Pe})}let We=await Ln(J,H.pathname,P.signal);if(We.type==="aborted")return{shortCircuited:!0};if(We.type==="error"){if(We.partialMatches.length===0){let{matches:Zt,route:yt}=Xf(d);return{matches:Zt,loaderData:{},errors:{[yt.id]:We.error}}}let Bt=Ya(We.partialMatches).route.id;return{matches:We.partialMatches,loaderData:{},errors:{[Bt]:We.error}}}else if(We.matches)J=We.matches;else{let{error:Bt,notFoundMatches:Zt,route:yt}=Pt(H.pathname);return{matches:Zt,loaderData:{},errors:{[yt.id]:Bt}}}}let Rt=p||d,{dsMatches:Ge,revalidatingFetchers:Ct}=s0(P,he,l,c,n.history,b,J,gt,H,Ae?[]:a,Ae===!0,j,ne,we,de,te,Rt,g,n.patchRoutesOnNavigation!=null,Ne,Ue);if(Ee=++me,!n.dataStrategy&&!Ge.some(We=>We.shouldLoad)&&!Ge.some(We=>We.route.middleware&&We.route.middleware.length>0)&&Ct.length===0){let We=Vt();return Jn(H,{matches:J,loaderData:{},errors:Ne&&mr(Ne[1])?{[Ne[0]]:Ne[1].error}:null,...p0(Ne),...We?{fetchers:new Map(b.fetchers)}:{}},{flushSync:Pe}),{shortCircuited:!0}}if(Nt){let We={};if(!ge){We.navigation=Qe;let Bt=jt(Ne);Bt!==void 0&&(We.actionData=Bt)}Ct.length>0&&(We.fetchers=Kt(Ct)),Ut(We,{flushSync:Pe})}Ct.forEach(We=>{St(We.key),We.controller&&ie.set(We.key,We.controller)});let hn=()=>Ct.forEach(We=>St(We.key));x&&x.signal.addEventListener("abort",hn);let{loaderResults:It,fetcherResults:Bn}=await ha(Ge,Ct,P,he);if(P.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",hn),Ct.forEach(We=>ie.delete(We.key));let wn=Wf(It);if(wn)return await zt(P,wn.result,!0,{replace:_e}),{shortCircuited:!0};if(wn=Wf(Bn),wn)return te.add(wn.key),await zt(P,wn.result,!0,{replace:_e}),{shortCircuited:!0};let{loaderData:Fn,errors:Rn}=d0(b,J,It,Ne,Ct,Bn);Ae&&b.errors&&(Rn={...b.errors,...Rn});let ar=Vt(),ai=Es(Ee),si=ar||ai||Ct.length>0;return{matches:J,loaderData:Fn,errors:Rn,...si?{fetchers:new Map(b.fetchers)}:{}}}function jt(P){if(P&&!mr(P[1]))return{[P[0]]:P[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function Kt(P){return P.forEach(H=>{let J=b.fetchers.get(H.key),he=xu(void 0,J?J.data:void 0);b.fetchers.set(H.key,he)}),new Map(b.fetchers)}async function ni(P,H,J,he){St(P);let ge=(he&&he.flushSync)===!0,be=p||d,Re=Sg(b.location,b.matches,g,J,H,he==null?void 0:he.relative),ye=Ka(be,Re,g),_e=Ni(ye,be,Re);if(_e.active&&_e.matches&&(ye=_e.matches),!ye){tr(P,H,Vr(404,{pathname:Re}),{flushSync:ge});return}let{path:Ae,submission:Pe,error:Ne}=a0(!0,Re,he);if(Ne){tr(P,H,Ne,{flushSync:ge});return}let Ue=n.getContext?await n.getContext():new ZT,Qe=(he&&he.preventScrollReset)===!0;if(Pe&&Dn(Pe.formMethod)){await Pl(P,H,Ae,ye,Ue,_e.active,ge,Qe,Pe,he&&he.unstable_defaultShouldRevalidate);return}de.set(P,{routeId:H,path:Ae}),await fo(P,H,Ae,ye,Ue,_e.active,ge,Qe,Pe)}async function Pl(P,H,J,he,ge,be,Re,ye,_e,Ae){Di(),de.delete(P);let Pe=b.fetchers.get(P);fn(P,ED(_e,Pe),{flushSync:Re});let Ne=new AbortController,Ue=Zo(n.history,J,Ne.signal,_e);if(be){let $e=await Ln(he,new URL(Ue.url).pathname,Ue.signal,P);if($e.type==="aborted")return;if($e.type==="error"){tr(P,H,$e.error,{flushSync:Re});return}else if($e.matches)he=$e.matches;else{tr(P,H,Vr(404,{pathname:J}),{flushSync:Re});return}}let Qe=lh(he,J);if(!Qe.route.action&&!Qe.route.lazy){let $e=Vr(405,{method:_e.formMethod,pathname:J,routeId:H});tr(P,H,$e,{flushSync:Re});return}ie.set(P,Ne);let gt=me,Nt=ol(l,c,Ue,he,Qe,a,ge),Rt=await er(Ue,Nt,ge,P),Ge=Rt[Qe.route.id];if(!Ge){for(let $e of Nt)if(Rt[$e.route.id]){Ge=Rt[$e.route.id];break}}if(Ue.signal.aborted){ie.get(P)===Ne&&ie.delete(P);return}if(we.has(P)){if(Ks(Ge)||mr(Ge)){fn(P,Xi(void 0));return}}else{if(Ks(Ge))if(ie.delete(P),Ee>gt){fn(P,Xi(void 0));return}else return te.add(P),fn(P,xu(_e)),zt(Ue,Ge,!1,{fetcherSubmission:_e,preventScrollReset:ye});if(mr(Ge)){tr(P,H,Ge.error);return}}let Ct=b.navigation.location||b.location,hn=Zo(n.history,Ct,Ne.signal),It=p||d,Bn=b.navigation.state!=="idle"?Ka(It,b.navigation.location,g):b.matches;Xe(Bn,"Didn't find any matches after fetcher action");let wn=++me;V.set(P,wn);let Fn=xu(_e,Ge.data);b.fetchers.set(P,Fn);let{dsMatches:Rn,revalidatingFetchers:ar}=s0(hn,ge,l,c,n.history,b,Bn,_e,Ct,a,!1,j,ne,we,de,te,It,g,n.patchRoutesOnNavigation!=null,[Qe.route.id,Ge],Ae);ar.filter($e=>$e.key!==P).forEach($e=>{let sr=$e.key,pa=b.fetchers.get(sr),ut=xu(void 0,pa?pa.data:void 0);b.fetchers.set(sr,ut),St(sr),$e.controller&&ie.set(sr,$e.controller)}),Ut({fetchers:new Map(b.fetchers)});let ai=()=>ar.forEach($e=>St($e.key));Ne.signal.addEventListener("abort",ai);let{loaderResults:si,fetcherResults:We}=await ha(Rn,ar,hn,ge);if(Ne.signal.aborted)return;if(Ne.signal.removeEventListener("abort",ai),V.delete(P),ie.delete(P),ar.forEach($e=>ie.delete($e.key)),b.fetchers.has(P)){let $e=Xi(Ge.data);b.fetchers.set(P,$e)}let Bt=Wf(si);if(Bt)return zt(hn,Bt.result,!1,{preventScrollReset:ye});if(Bt=Wf(We),Bt)return te.add(Bt.key),zt(hn,Bt.result,!1,{preventScrollReset:ye});let{loaderData:Zt,errors:yt}=d0(b,Bn,si,void 0,ar,We);Es(wn),b.navigation.state==="loading"&&wn>Ee?(Xe(A,"Expected pending action"),x&&x.abort(),Jn(b.navigation.location,{matches:Bn,loaderData:Zt,errors:yt,fetchers:new Map(b.fetchers)})):(Ut({errors:yt,loaderData:m0(b.loaderData,Zt,Bn,yt),fetchers:new Map(b.fetchers)}),j=!1)}async function fo(P,H,J,he,ge,be,Re,ye,_e){let Ae=b.fetchers.get(P);fn(P,xu(_e,Ae?Ae.data:void 0),{flushSync:Re});let Pe=new AbortController,Ne=Zo(n.history,J,Pe.signal);if(be){let Ge=await Ln(he,new URL(Ne.url).pathname,Ne.signal,P);if(Ge.type==="aborted")return;if(Ge.type==="error"){tr(P,H,Ge.error,{flushSync:Re});return}else if(Ge.matches)he=Ge.matches;else{tr(P,H,Vr(404,{pathname:J}),{flushSync:Re});return}}let Ue=lh(he,J);ie.set(P,Pe);let Qe=me,gt=ol(l,c,Ne,he,Ue,a,ge),Rt=(await er(Ne,gt,ge,P))[Ue.route.id];if(ie.get(P)===Pe&&ie.delete(P),!Ne.signal.aborted){if(we.has(P)){fn(P,Xi(void 0));return}if(Ks(Rt))if(Ee>Qe){fn(P,Xi(void 0));return}else{te.add(P),await zt(Ne,Rt,!1,{preventScrollReset:ye});return}if(mr(Rt)){tr(P,H,Rt.error);return}fn(P,Xi(Rt.data))}}async function zt(P,H,J,{submission:he,fetcherSubmission:ge,preventScrollReset:be,replace:Re}={}){J||(R==null||R.resolve(),R=null),H.response.headers.has("X-Remix-Revalidate")&&(j=!0);let ye=H.response.headers.get("Location");Xe(ye,"Expected a Location header on the redirect Response"),ye=f0(ye,new URL(P.url),g,n.history);let _e=Xu(b.location,ye,{_isRedirect:!0});if(t){let gt=!1;if(H.response.headers.has("X-Remix-Reload-Document"))gt=!0;else if(oy(ye)){const Nt=wS(ye,!0);gt=Nt.origin!==e.location.origin||kr(Nt.pathname,g)==null}if(gt){Re?e.location.replace(ye):e.location.assign(ye);return}}x=null;let Ae=Re===!0||H.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Pe,formAction:Ne,formEncType:Ue}=b.navigation;!he&&!ge&&Pe&&Ne&&Ue&&(he=y0(b.navigation));let Qe=he||ge;if(QI.has(H.response.status)&&Qe&&Dn(Qe.formMethod))await Mn(Ae,_e,{submission:{...Qe,formAction:ye},preventScrollReset:be||N,enableViewTransition:J?k:void 0});else{let gt=tg(_e,he);await Mn(Ae,_e,{overrideNavigation:gt,fetcherSubmission:ge,preventScrollReset:be||N,enableViewTransition:J?k:void 0})}}async function er(P,H,J,he){var Re;let ge,be={};try{ge=await aD(v,P,H,he,J,!1)}catch(ye){return H.filter(_e=>_e.shouldLoad).forEach(_e=>{be[_e.route.id]={type:"error",error:ye}}),be}if(P.signal.aborted)return be;if(!Dn(P.method))for(let ye of H){if(((Re=ge[ye.route.id])==null?void 0:Re.type)==="error")break;!ge.hasOwnProperty(ye.route.id)&&!b.loaderData.hasOwnProperty(ye.route.id)&&(!b.errors||!b.errors.hasOwnProperty(ye.route.id))&&ye.shouldCallHandler()&&(ge[ye.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${ye.route.id}`)})}for(let[ye,_e]of Object.entries(ge))if(pD(_e)){let Ae=_e.result;be[ye]={type:"redirect",response:uD(Ae,P,ye,H,g)}}else be[ye]=await lD(_e);return be}async function ha(P,H,J,he){let ge=er(J,P,he,null),be=Promise.all(H.map(async _e=>{if(_e.matches&&_e.match&&_e.request&&_e.controller){let Pe=(await er(_e.request,_e.matches,he,_e.key))[_e.match.route.id];return{[_e.key]:Pe}}else return Promise.resolve({[_e.key]:{type:"error",error:Vr(404,{pathname:_e.path})}})})),Re=await ge,ye=(await be).reduce((_e,Ae)=>Object.assign(_e,Ae),{});return{loaderResults:Re,fetcherResults:ye}}function Di(){j=!0,de.forEach((P,H)=>{ie.has(H)&&ne.add(H),St(H)})}function fn(P,H,J={}){b.fetchers.set(P,H),Ut({fetchers:new Map(b.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function tr(P,H,J,he={}){let ge=Ya(b.matches,H);da(P),Ut({errors:{[ge.route.id]:J},fetchers:new Map(b.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function _s(P){return pe.set(P,(pe.get(P)||0)+1),we.has(P)&&we.delete(P),b.fetchers.get(P)||XI}function ho(P,H){St(P,H==null?void 0:H.reason),fn(P,Xi(null))}function da(P){let H=b.fetchers.get(P);ie.has(P)&&!(H&&H.state==="loading"&&V.has(P))&&St(P),de.delete(P),V.delete(P),te.delete(P),we.delete(P),ne.delete(P),b.fetchers.delete(P)}function nr(P){let H=(pe.get(P)||0)-1;H<=0?(pe.delete(P),we.add(P)):pe.set(P,H),Ut({fetchers:new Map(b.fetchers)})}function St(P,H){let J=ie.get(P);J&&(J.abort(H),ie.delete(P))}function Vn(P){for(let H of P){let J=_s(H),he=Xi(J.data);b.fetchers.set(H,he)}}function Vt(){let P=[],H=!1;for(let J of te){let he=b.fetchers.get(J);Xe(he,`Expected fetcher: ${J}`),he.state==="loading"&&(te.delete(J),P.push(J),H=!0)}return Vn(P),H}function Es(P){let H=[];for(let[J,he]of V)if(he<P){let ge=b.fetchers.get(J);Xe(ge,`Expected fetcher: ${J}`),ge.state==="loading"&&(St(J),V.delete(J),H.push(J))}return Vn(H),H.length>0}function ma(P,H){let J=b.blockers.get(P)||Nu;return De.get(P)!==H&&De.set(P,H),J}function Ts(P){b.blockers.delete(P),De.delete(P)}function Pn(P,H){let J=b.blockers.get(P)||Nu;Xe(J.state==="unblocked"&&H.state==="blocked"||J.state==="blocked"&&H.state==="blocked"||J.state==="blocked"&&H.state==="proceeding"||J.state==="blocked"&&H.state==="unblocked"||J.state==="proceeding"&&H.state==="unblocked",`Invalid blocker state transition: ${J.state} -> ${H.state}`);let he=new Map(b.blockers);he.set(P,H),Ut({blockers:he})}function ri({currentLocation:P,nextLocation:H,historyAction:J}){if(De.size===0)return;De.size>1&&$t(!1,"A router only supports one blocker at a time");let he=Array.from(De.entries()),[ge,be]=he[he.length-1],Re=b.blockers.get(ge);if(!(Re&&Re.state==="proceeding")&&be({currentLocation:P,nextLocation:H,historyAction:J}))return ge}function Pt(P){let H=Vr(404,{pathname:P}),J=p||d,{matches:he,route:ge}=Xf(J);return{notFoundMatches:he,route:ge,error:H}}function br(P,H,J){if(L=P,M=H,z=J||null,!G&&b.navigation===eg){G=!0;let he=mo(b.location,b.matches);he!=null&&Ut({restoreScrollPosition:he})}return()=>{L=null,M=null,z=null}}function rr(P,H){return z&&z(P,H.map(he=>bI(he,b.loaderData)))||P.key}function ir(P,H){if(L&&M){let J=rr(P,H);L[J]=M()}}function mo(P,H){if(L){let J=rr(P,H),he=L[J];if(typeof he=="number")return he}return null}function Ni(P,H,J){if(n.patchRoutesOnNavigation)if(P){if(Object.keys(P[0].params).length>0)return{active:!0,matches:Pu(H,J,g,!0)}}else return{active:!0,matches:Pu(H,J,g,!0)||[]};return{active:!1,matches:null}}async function Ln(P,H,J,he){if(!n.patchRoutesOnNavigation)return{type:"success",matches:P};let ge=P;for(;;){let be=p==null,Re=p||d,ye=c;try{await n.patchRoutesOnNavigation({signal:J,path:H,matches:ge,fetcherKey:he,patch:(Pe,Ne)=>{J.aborted||o0(Pe,Ne,Re,ye,l,!1)}})}catch(Pe){return{type:"error",error:Pe,partialMatches:ge}}finally{be&&!J.aborted&&(d=[...d])}if(J.aborted)return{type:"aborted"};let _e=Ka(Re,H,g),Ae=null;if(_e){if(Object.keys(_e[0].params).length===0)return{type:"success",matches:_e};if(Ae=Pu(Re,H,g,!0),!(Ae&&ge.length<Ae.length&&ii(ge,Ae.slice(0,ge.length))))return{type:"success",matches:_e}}if(Ae||(Ae=Pu(Re,H,g,!0)),!Ae||ii(ge,Ae))return{type:"success",matches:null};ge=Ae}}function ii(P,H){return P.length===H.length&&P.every((J,he)=>J.route.id===H[he].route.id)}function Ll(P){c={},p=Wu(P,l,void 0,c)}function xi(P,H,J=!1){let he=p==null;o0(P,H,p||d,c,l,J),he&&(d=[...d],Ut({}))}return Q={get basename(){return g},get future(){return E},get state(){return b},get routes(){return d},get window(){return e},initialize:wt,subscribe:fa,enableScrollRestoration:br,navigate:Zn,fetch:ni,revalidate:gs,createHref:P=>n.history.createHref(P),encodeLocation:P=>n.history.encodeLocation(P),getFetcher:_s,resetFetcher:ho,deleteFetcher:nr,dispose:Ii,getBlocker:ma,deleteBlocker:Ts,patchRoutes:xi,_internalFetchControllers:ie,_internalSetRoutes:Ll,_internalSetStateDoNotUseOrYouWillBreakYourApp(P){Ut(P)}},n.unstable_instrumentations&&(Q=BI(Q,n.unstable_instrumentations.map(P=>P.router).filter(Boolean))),Q}function ZI(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Sg(n,e,t,a,s,l){let c,d;if(s){c=[];for(let g of e)if(c.push(g),g.route.id===s){d=g;break}}else c=e,d=e[e.length-1];let p=fd(a||".",cd(c),kr(n.pathname,t)||n.pathname,l==="path");if(a==null&&(p.search=n.search,p.hash=n.hash),(a==null||a===""||a===".")&&d){let g=cy(p.search);if(d.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let v=new URLSearchParams(p.search),E=v.getAll("index");v.delete("index"),E.filter(C=>C).forEach(C=>v.append("index",C));let S=v.toString();p.search=S?`?${S}`:""}}return t!=="/"&&(p.pathname=PI({basename:t,pathname:p.pathname})),wi(p)}function a0(n,e,t){if(!t||!ZI(t))return{path:e};if(t.formMethod&&!vD(t.formMethod))return{path:e,error:Vr(405,{method:t.formMethod})};let a=()=>({path:e,error:Vr(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=FS(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Dn(l))return a();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((S,[C,L])=>`${S}${C}=${L}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!Dn(l))return a();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return a()}}}Xe(typeof FormData=="function","FormData is not available in this environment");let d,p;if(t.formData)d=Rg(t.formData),p=t.formData;else if(t.body instanceof FormData)d=Rg(t.body),p=t.body;else if(t.body instanceof URLSearchParams)d=t.body,p=h0(d);else if(t.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(t.body),p=h0(d)}catch{return a()}let g={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Dn(g.formMethod))return{path:e,submission:g};let v=la(e);return n&&v.search&&cy(v.search)&&d.append("index",""),v.search=`?${d}`,{path:wi(v),submission:g}}function s0(n,e,t,a,s,l,c,d,p,g,v,E,S,C,L,z,M,G,q,K,Z){var qe;let se=K?mr(K[1])?K[1].error:K[1].data:void 0,Q=s.createURL(l.location),b=s.createURL(p),A;if(v&&l.errors){let j=Object.keys(l.errors)[0];A=c.findIndex(ne=>ne.route.id===j)}else if(K&&mr(K[1])){let j=K[0];A=c.findIndex(ne=>ne.route.id===j)-1}let R=K?K[1].statusCode:void 0,N=R&&R>=400,x={currentUrl:Q,currentParams:((qe=l.matches[0])==null?void 0:qe.params)||{},nextUrl:b,nextParams:c[0].params,...d,actionResult:se,actionStatus:R},k=fc(c),O=c.map((j,ne)=>{let{route:ie}=j,me=null;if(A!=null&&ne>A?me=!1:ie.lazy?me=!0:ly(ie)?v?me=Ag(ie,l.loaderData,l.errors):eD(l.loaderData,l.matches[ne],j)&&(me=!0):me=!1,me!==null)return wg(t,a,n,k,j,g,e,me);let Ee=!1;typeof Z=="boolean"?Ee=Z:N?Ee=!1:(E||Q.pathname+Q.search===b.pathname+b.search||Q.search!==b.search||tD(l.matches[ne],j))&&(Ee=!0);let V={...x,defaultShouldRevalidate:Ee},te=Fu(j,V);return wg(t,a,n,k,j,g,e,te,V,Z)}),Me=[];return L.forEach((j,ne)=>{if(v||!c.some(we=>we.route.id===j.routeId)||C.has(ne))return;let ie=l.fetchers.get(ne),me=ie&&ie.state!=="idle"&&ie.data===void 0,Ee=Ka(M,j.path,G);if(!Ee){if(q&&me)return;Me.push({key:ne,routeId:j.routeId,path:j.path,matches:null,match:null,request:null,controller:null});return}if(z.has(ne))return;let V=lh(Ee,j.path),te=new AbortController,de=Zo(s,j.path,te.signal),pe=null;if(S.has(ne))S.delete(ne),pe=ol(t,a,de,Ee,V,g,e);else if(me)E&&(pe=ol(t,a,de,Ee,V,g,e));else{let we;typeof Z=="boolean"?we=Z:N?we=!1:we=E;let De={...x,defaultShouldRevalidate:we};Fu(V,De)&&(pe=ol(t,a,de,Ee,V,g,e,De))}pe&&Me.push({key:ne,routeId:j.routeId,path:j.path,matches:pe,match:V,request:de,controller:te})}),{dsMatches:O,revalidatingFetchers:Me}}function ly(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function Ag(n,e,t){if(n.lazy)return!0;if(!ly(n))return!1;let a=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!a&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!a&&!s}function eD(n,e,t){let a=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return a||s}function tD(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Fu(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function o0(n,e,t,a,s,l){let c;if(n){let g=a[n];Xe(g,`No route found to patch children into: routeId = ${n}`),g.children||(g.children=[]),c=g.children}else c=t;let d=[],p=[];if(e.forEach(g=>{let v=c.find(E=>kS(g,E));v?p.push({existingRoute:v,newRoute:g}):d.push(g)}),d.length>0){let g=Wu(d,s,[n||"_","patch",String((c==null?void 0:c.length)||"0")],a);c.push(...g)}if(l&&p.length>0)for(let g=0;g<p.length;g++){let{existingRoute:v,newRoute:E}=p[g],S=v,[C]=Wu([E],s,[],{},!0);Object.assign(S,{element:C.element?C.element:S.element,errorElement:C.errorElement?C.errorElement:S.errorElement,hydrateFallbackElement:C.hydrateFallbackElement?C.hydrateFallbackElement:S.hydrateFallbackElement})}}function kS(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,a)=>{var s;return(s=e.children)==null?void 0:s.some(l=>kS(t,l))}):!1}var l0=new WeakMap,US=({key:n,route:e,manifest:t,mapRouteProperties:a})=>{let s=t[e.id];if(Xe(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=l0.get(s);c||(c={},l0.set(s,c));let d=c[n];if(d)return d;let p=(async()=>{let g=vI(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(g)$t(!g,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(E)$t(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let S=await l();S!=null&&(Object.assign(s,{[n]:S}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(S=>S===void 0)&&(s.lazy=void 0))})();return c[n]=p,p},u0=new WeakMap;function nD(n,e,t,a,s){let l=t[n.id];if(Xe(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let v=u0.get(l);if(v)return{lazyRoutePromise:v,lazyHandlerPromise:v};let E=(async()=>{Xe(typeof n.lazy=="function","No lazy route function found");let S=await n.lazy(),C={};for(let L in S){let z=S[L];if(z===void 0)continue;let M=EI(L),q=l[L]!==void 0&&L!=="hasErrorBoundary";M?$t(!M,"Route property "+L+" is not a supported property to be returned from a lazy route function. This property will be ignored."):q?$t(!q,`Route "${l.id}" has a static property "${L}" defined but its lazy function is also returning a value for this property. The lazy route property "${L}" will be ignored.`):C[L]=z}Object.assign(l,C),Object.assign(l,{...a(l),lazy:void 0})})();return u0.set(l,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(n.lazy),d=[],p;for(let v of c){if(s&&s.includes(v))continue;let E=US({key:v,route:n,manifest:t,mapRouteProperties:a});E&&(d.push(E),v===e&&(p=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),p==null||p.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:p}}async function c0(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function rD(n){return n.matches.some(e=>e.route.middleware)?jS(n,()=>c0(n)):c0(n)}function jS(n,e){return iD(n,e,a=>{if(yD(a))throw a;return a},dD,t);function t(a,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:a}}));{let{matches:c}=n,d=Math.min(Math.max(c.findIndex(g=>g.route.id===s),0),Math.max(c.findIndex(g=>g.shouldCallHandler()),0)),p=Ya(c,c[d].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:a}})}}}async function iD(n,e,t,a,s){let{matches:l,request:c,params:d,context:p,unstable_pattern:g}=n,v=l.flatMap(S=>S.route.middleware?S.route.middleware.map(C=>[S.route.id,C]):[]);return await zS({request:c,params:d,context:p,unstable_pattern:g},v,e,t,a,s)}async function zS(n,e,t,a,s,l,c=0){let{request:d}=n;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let p=e[c];if(!p)return await t();let[g,v]=p,E,S=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await zS(n,e,t,a,s,l,c+1)},E.value}catch(C){return E={value:await l(C,g,E)},E.value}};try{let C=await v(n,S),L=C!=null?a(C):void 0;return s(L)?L:E?L??E.value:(E={value:await S()},E.value)}catch(C){return await l(C,g,E)}}function BS(n,e,t,a,s){let l=US({key:"middleware",route:a.route,manifest:e,mapRouteProperties:n}),c=nD(a.route,Dn(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function wg(n,e,t,a,s,l,c,d,p=null,g){let v=!1,E=BS(n,e,t,s,l);return{...s,_lazyPromises:E,shouldLoad:d,shouldRevalidateArgs:p,shouldCallHandler(S){return v=!0,p?typeof g=="boolean"?Fu(s,{...p,defaultShouldRevalidate:g}):typeof S=="boolean"?Fu(s,{...p,defaultShouldRevalidate:S}):Fu(s,p):d},resolve(S){let{lazy:C,loader:L,middleware:z}=s.route,M=v||d||S&&!Dn(t.method)&&(C||L),G=z&&z.length>0&&!L&&!C;return M&&(Dn(t.method)||!G)?sD({request:t,unstable_pattern:a,match:s,lazyHandlerPromise:E==null?void 0:E.handler,lazyRoutePromise:E==null?void 0:E.route,handlerOverride:S,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function ol(n,e,t,a,s,l,c,d=null){return a.map(p=>p.route.id!==s.route.id?{...p,shouldLoad:!1,shouldRevalidateArgs:d,shouldCallHandler:()=>!1,_lazyPromises:BS(n,e,t,p,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:wg(n,e,t,fc(a),p,l,c,!0,d))}async function aD(n,e,t,a,s,l){t.some(g=>{var v;return(v=g._lazyPromises)==null?void 0:v.middleware})&&await Promise.all(t.map(g=>{var v;return(v=g._lazyPromises)==null?void 0:v.middleware}));let c={request:e,unstable_pattern:fc(t),params:t[0].params,context:s,matches:t},p=await n({...c,fetcherKey:a,runClientMiddleware:g=>{let v=c;return jS(v,()=>g({...v,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(g=>{var v,E;return[(v=g._lazyPromises)==null?void 0:v.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return p}async function sD({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let d,p,g=Dn(n.method),v=g?"action":"loader",E=S=>{let C,L=new Promise((G,q)=>C=q);p=()=>C(),n.signal.addEventListener("abort",p);let z=G=>typeof S!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${v}" [routeId: ${t.route.id}]`)):S({request:n,unstable_pattern:e,params:t.params,context:c},...G!==void 0?[G]:[]),M=(async()=>{try{return{type:"data",result:await(l?l(q=>z(q)):z())}}catch(G){return{type:"error",result:G}}})();return Promise.race([M,L])};try{let S=g?t.route.action:t.route.loader;if(a||s)if(S){let C,[L]=await Promise.all([E(S).catch(z=>{C=z}),a,s]);if(C!==void 0)throw C;d=L}else{await a;let C=g?t.route.action:t.route.loader;if(C)[d]=await Promise.all([E(C),s]);else if(v==="action"){let L=new URL(n.url),z=L.pathname+L.search;throw Vr(405,{method:n.method,pathname:z,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(S)d=await E(S);else{let C=new URL(n.url),L=C.pathname+C.search;throw Vr(404,{pathname:L})}}catch(S){return{type:"error",result:S}}finally{p&&n.signal.removeEventListener("abort",p)}return d}async function oD(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function lD(n){var a,s,l,c,d;let{result:e,type:t}=n;if(uy(e)){let p;try{p=await oD(e)}catch(g){return{type:"error",error:g}}return t==="error"?{type:"error",error:new cc(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?g0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:hD(e),statusCode:Ju(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Ju(e)?e.status:void 0}:g0(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function uD(n,e,t,a,s){let l=n.headers.get("Location");if(Xe(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!oy(l)){let c=a.slice(0,a.findIndex(d=>d.route.id===t)+1);l=Sg(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function f0(n,e,t,a){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(oy(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let d=kr(c.pathname,t)!=null;if(c.origin===e.origin&&d)return c.pathname+c.search+c.hash}try{let l=a.createURL(n);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function Zo(n,e,t,a){let s=n.createURL(FS(e)).toString(),l={signal:t};if(a&&Dn(a.formMethod)){let{formMethod:c,formEncType:d}=a;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(a.json)):d==="text/plain"?l.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?l.body=Rg(a.formData):l.body=a.formData}return new Request(s,l)}function Rg(n){let e=new URLSearchParams;for(let[t,a]of n.entries())e.append(t,typeof a=="string"?a:a.name);return e}function h0(n){let e=new FormData;for(let[t,a]of n.entries())e.append(t,a);return e}function cD(n,e,t,a=!1,s=!1){let l={},c=null,d,p=!1,g={},v=t&&mr(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let S=E.route.id,C=e[S];if(Xe(!Ks(C),"Cannot handle redirect results in processLoaderData"),mr(C)){let L=C.error;if(v!==void 0&&(L=v,v=void 0),c=c||{},s)c[S]=L;else{let z=Ya(n,S);c[z.route.id]==null&&(c[z.route.id]=L)}a||(l[S]=LS),p||(p=!0,d=Ju(C.error)?C.error.status:500),C.headers&&(g[S]=C.headers)}else l[S]=C.data,C.statusCode&&C.statusCode!==200&&!p&&(d=C.statusCode),C.headers&&(g[S]=C.headers)}),v!==void 0&&t&&(c={[t[0]]:v},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:g}}function d0(n,e,t,a,s,l){let{loaderData:c,errors:d}=cD(e,t,a);return s.filter(p=>!p.matches||p.matches.some(g=>g.shouldLoad)).forEach(p=>{let{key:g,match:v,controller:E}=p;if(E&&E.signal.aborted)return;let S=l[g];if(Xe(S,"Did not find corresponding fetcher result"),mr(S)){let C=Ya(n.matches,v==null?void 0:v.route.id);d&&d[C.route.id]||(d={...d,[C.route.id]:S.error}),n.fetchers.delete(g)}else if(Ks(S))Xe(!1,"Unhandled fetcher revalidation redirect");else{let C=Xi(S.data);n.fetchers.set(g,C)}}),{loaderData:c,errors:d}}function m0(n,e,t,a){let s=Object.entries(e).filter(([,l])=>l!==LS).reduce((l,[c,d])=>(l[c]=d,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),a&&a.hasOwnProperty(c))break}return s}function p0(n){return n?mr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Ya(n,e){return(e?n.slice(0,n.findIndex(a=>a.route.id===e)+1):[...n]).reverse().find(a=>a.route.hasErrorBoundary===!0)||n[0]}function Xf(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Vr(n,{pathname:e,routeId:t,method:a,type:s,message:l}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(c="Bad Request",a&&e&&t?d=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(c="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",d=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",a&&e&&t?d=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new cc(n||500,c,new Error(d),!0)}function Wf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[a,s]=e[t];if(Ks(s))return{key:a,result:s}}}function FS(n){let e=typeof n=="string"?la(n):n;return wi({...e,hash:""})}function fD(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function hD(n){var e,t;return new cc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function dD(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&mD(t))}function mD(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function pD(n){return uy(n.result)&&VS.has(n.result.status)}function mr(n){return n.type==="error"}function Ks(n){return(n&&n.type)==="redirect"}function g0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function uy(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function gD(n){return VS.has(n)}function yD(n){return uy(n)&&gD(n.status)&&n.headers.has("Location")}function vD(n){return YI.has(n.toUpperCase())}function Dn(n){return $I.has(n.toUpperCase())}function cy(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function lh(n,e){let t=typeof e=="string"?la(e).search:e.search;if(n[n.length-1].route.index&&cy(t||""))return n[n.length-1];let a=DS(n);return a[a.length-1]}function y0(n){let{formMethod:e,formAction:t,formEncType:a,text:s,formData:l,json:c}=n;if(!(!e||!t||!a)){if(s!=null)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:a,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:c,text:void 0}}}function tg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function _D(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function xu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ED(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Xi(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function TD(n,e){try{let t=n.sessionStorage.getItem(PS);if(t){let a=JSON.parse(t);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function bD(n,e){if(e.size>0){let t={};for(let[a,s]of e)t[a]=[...s];try{n.sessionStorage.setItem(PS,JSON.stringify(t))}catch(a){$t(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function v0(){let n,e,t=new Promise((a,s)=>{n=async l=>{a(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var so=B.createContext(null);so.displayName="DataRouter";var hc=B.createContext(null);hc.displayName="DataRouterState";var HS=B.createContext(!1);function SD(){return B.useContext(HS)}var fy=B.createContext({isTransitioning:!1});fy.displayName="ViewTransition";var qS=B.createContext(new Map);qS.displayName="Fetchers";var AD=B.createContext(null);AD.displayName="Await";var Er=B.createContext(null);Er.displayName="Navigation";var hd=B.createContext(null);hd.displayName="Location";var jr=B.createContext({outlet:null,matches:[],isDataRoute:!1});jr.displayName="Route";var hy=B.createContext(null);hy.displayName="RouteError";var GS="REACT_ROUTER_ERROR",wD="REDIRECT",RD="ROUTE_ERROR_RESPONSE";function CD(n){if(n.startsWith(`${GS}:${wD}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function ID(n){if(n.startsWith(`${GS}:${RD}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new cc(e.status,e.statusText,e.data)}catch{}}function DD(n,{relative:e}={}){Xe(Rl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=B.useContext(Er),{hash:s,pathname:l,search:c}=mc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ei([t,l])),a.createHref({pathname:d,search:c,hash:s})}function Rl(){return B.useContext(hd)!=null}function ti(){return Xe(Rl(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(hd).location}var $S="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KS(n){B.useContext(Er).static||B.useLayoutEffect(n)}function dc(){let{isDataRoute:n}=B.useContext(jr);return n?qD():ND()}function ND(){Xe(Rl(),"useNavigate() may be used only in the context of a <Router> component.");let n=B.useContext(so),{basename:e,navigator:t}=B.useContext(Er),{matches:a}=B.useContext(jr),{pathname:s}=ti(),l=JSON.stringify(cd(a)),c=B.useRef(!1);return KS(()=>{c.current=!0}),B.useCallback((p,g={})=>{if($t(c.current,$S),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=fd(p,JSON.parse(l),s,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ei([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,s,n])}var xD=B.createContext(null);function OD(n){let e=B.useContext(jr).outlet;return B.useMemo(()=>e&&B.createElement(xD.Provider,{value:n},e),[e,n])}function dd(){let{matches:n}=B.useContext(jr),e=n[n.length-1];return e?e.params:{}}function mc(n,{relative:e}={}){let{matches:t}=B.useContext(jr),{pathname:a}=ti(),s=JSON.stringify(cd(t));return B.useMemo(()=>fd(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function MD(n,e,t,a,s){Xe(Rl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=B.useContext(Er),{matches:c}=B.useContext(jr),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let q=E&&E.path||"";QS(g,!E||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let S=ti(),C;C=S;let L=C.pathname||"/",z=L;if(v!=="/"){let q=v.replace(/^\//,"").split("/");z="/"+L.replace(/^\//,"").split("/").slice(q.length).join("/")}let M=Ka(n,{pathname:z});return $t(E||M!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),$t(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),UD(M&&M.map(q=>Object.assign({},q,{params:Object.assign({},p,q.params),pathname:Ei([v,l.encodeLocation?l.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?v:Ei([v,l.encodeLocation?l.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),c,t,a,s)}function VD(){let n=HD(),e=Ju(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=B.createElement(B.Fragment,null,B.createElement("p",null," Hey developer "),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:l},"ErrorBoundary")," or"," ",B.createElement("code",{style:l},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:s},t):null,c)}var PD=B.createElement(VD,null),YS=class extends B.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=ID(n.digest);t&&(n=t)}let e=n!==void 0?B.createElement(jr.Provider,{value:this.props.routeContext},B.createElement(hy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?B.createElement(LD,{error:n},e):e}};YS.contextType=HS;var ng=new WeakMap;function LD({children:n,error:e}){let{basename:t}=B.useContext(Er);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=CD(e.digest);if(a){let s=ng.get(e);if(s)throw s;let l=xS(a.location,t);if(NS&&!ng.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw ng.set(e,c),c}return B.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function kD({routeContext:n,match:e,children:t}){let a=B.useContext(so);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(jr.Provider,{value:n},t)}function UD(n,e=[],t=null,a=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let v=l.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);Xe(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,p=-1;if(t)for(let v=0;v<l.length;v++){let E=l[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=v),E.route.id){let{loaderData:S,errors:C}=t,L=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!C||C[E.route.id]===void 0);if(E.route.lazy||L){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&a?(v,E)=>{var S,C;a(v,{location:t.location,params:((C=(S=t.matches)==null?void 0:S[0])==null?void 0:C.params)??{},unstable_pattern:fc(t.matches),errorInfo:E})}:void 0;return l.reduceRight((v,E,S)=>{let C,L=!1,z=null,M=null;t&&(C=c&&E.route.id?c[E.route.id]:void 0,z=E.route.errorElement||PD,d&&(p<0&&S===0?(QS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,M=null):p===S&&(L=!0,M=E.route.hydrateFallbackElement||null)));let G=e.concat(l.slice(0,S+1)),q=()=>{let K;return C?K=z:L?K=M:E.route.Component?K=B.createElement(E.route.Component,null):E.route.element?K=E.route.element:K=v,B.createElement(kD,{match:E,routeContext:{outlet:v,matches:G,isDataRoute:t!=null},children:K})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?B.createElement(YS,{location:t.location,revalidation:t.revalidation,component:z,error:C,children:q(),routeContext:{outlet:null,matches:G,isDataRoute:!0},onError:g}):q()},null)}function dy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jD(n){let e=B.useContext(so);return Xe(e,dy(n)),e}function zD(n){let e=B.useContext(hc);return Xe(e,dy(n)),e}function BD(n){let e=B.useContext(jr);return Xe(e,dy(n)),e}function my(n){let e=BD(n),t=e.matches[e.matches.length-1];return Xe(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function FD(){return my("useRouteId")}function HD(){var a;let n=B.useContext(hy),e=zD("useRouteError"),t=my("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function qD(){let{router:n}=jD("useNavigate"),e=my("useNavigate"),t=B.useRef(!1);return KS(()=>{t.current=!0}),B.useCallback(async(s,l={})=>{$t(t.current,$S),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var _0={};function QS(n,e,t){!e&&!_0[n]&&(_0[n]=!0,$t(!1,t))}var E0={};function T0(n,e){!n&&!E0[e]&&(E0[e]=!0,console.warn(e))}var GD="useOptimistic",b0=kC[GD],$D=()=>{};function KD(n){return b0?b0(n):[n,$D]}function YD(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&$t(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:B.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&$t(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:B.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&$t(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:B.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var QD=["HydrateFallback","hydrateFallbackElement"],XD=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}};function WD({router:n,flushSync:e,onError:t,unstable_useTransitions:a}){a=SD()||a;let[l,c]=B.useState(n.state),[d,p]=KD(l),[g,v]=B.useState(),[E,S]=B.useState({isTransitioning:!1}),[C,L]=B.useState(),[z,M]=B.useState(),[G,q]=B.useState(),K=B.useRef(new Map),Z=B.useCallback((A,{deletedFetchers:R,newErrors:N,flushSync:x,viewTransitionOpts:k})=>{N&&t&&Object.values(N).forEach(Me=>{var qe;return t(Me,{location:A.location,params:((qe=A.matches[0])==null?void 0:qe.params)??{},unstable_pattern:fc(A.matches)})}),A.fetchers.forEach((Me,qe)=>{Me.data!==void 0&&K.current.set(qe,Me.data)}),R.forEach(Me=>K.current.delete(Me)),T0(x===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let O=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(T0(k==null||O,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!k||!O){e&&x?e(()=>c(A)):a===!1?c(A):B.startTransition(()=>{a===!0&&p(Me=>S0(Me,A)),c(A)});return}if(e&&x){e(()=>{z&&(C==null||C.resolve(),z.skipTransition()),S({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let Me=n.window.document.startViewTransition(()=>{e(()=>c(A))});Me.finished.finally(()=>{e(()=>{L(void 0),M(void 0),v(void 0),S({isTransitioning:!1})})}),e(()=>M(Me));return}z?(C==null||C.resolve(),z.skipTransition(),q({state:A,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(v(A),S({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[n.window,e,z,C,a,p,t]);B.useLayoutEffect(()=>n.subscribe(Z),[n,Z]),B.useEffect(()=>{E.isTransitioning&&!E.flushSync&&L(new XD)},[E]),B.useEffect(()=>{if(C&&g&&n.window){let A=g,R=C.promise,N=n.window.document.startViewTransition(async()=>{a===!1?c(A):B.startTransition(()=>{a===!0&&p(x=>S0(x,A)),c(A)}),await R});N.finished.finally(()=>{L(void 0),M(void 0),v(void 0),S({isTransitioning:!1})}),M(N)}},[g,C,n.window,a,p]),B.useEffect(()=>{C&&g&&d.location.key===g.location.key&&C.resolve()},[C,z,d.location,g]),B.useEffect(()=>{!E.isTransitioning&&G&&(v(G.state),S({isTransitioning:!0,flushSync:!1,currentLocation:G.currentLocation,nextLocation:G.nextLocation}),q(void 0))},[E.isTransitioning,G]);let se=B.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:A=>n.navigate(A),push:(A,R,N)=>n.navigate(A,{state:R,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(A,R,N)=>n.navigate(A,{replace:!0,state:R,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[n]),Q=n.basename||"/",b=B.useMemo(()=>({router:n,navigator:se,static:!1,basename:Q,onError:t}),[n,se,Q,t]);return B.createElement(B.Fragment,null,B.createElement(so.Provider,{value:b},B.createElement(hc.Provider,{value:d},B.createElement(qS.Provider,{value:K.current},B.createElement(fy.Provider,{value:E},B.createElement(eN,{basename:Q,location:d.location,navigationType:d.historyAction,navigator:se,unstable_useTransitions:a},B.createElement(JD,{routes:n.routes,future:n.future,state:d,onError:t})))))),null)}function S0(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var JD=B.memo(ZD);function ZD({routes:n,future:e,state:t,onError:a}){return MD(n,void 0,t,a,e)}function es({to:n,replace:e,state:t,relative:a}){Xe(Rl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=B.useContext(Er);$t(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=B.useContext(jr),{pathname:c}=ti(),d=dc(),p=fd(n,cd(l),c,a==="path"),g=JSON.stringify(p);return B.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:a})},[d,g,a,e,t]),null}function XS(n){return OD(n.context)}function eN({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){Xe(!Rl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=B.useMemo(()=>({basename:d,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[d,s,l,c]);typeof t=="string"&&(t=la(t));let{pathname:g="/",search:v="",hash:E="",state:S=null,key:C="default"}=t,L=B.useMemo(()=>{let z=kr(g,d);return z==null?null:{location:{pathname:z,search:v,hash:E,state:S,key:C},navigationType:a}},[d,g,v,E,S,C,a]);return $t(L!=null,`<Router basename="${d}"> is not able to match the URL "${g}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:B.createElement(Er.Provider,{value:p},B.createElement(hd.Provider,{children:e,value:L}))}var uh="get",ch="application/x-www-form-urlencoded";function md(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function tN(n){return md(n)&&n.tagName.toLowerCase()==="button"}function nN(n){return md(n)&&n.tagName.toLowerCase()==="form"}function rN(n){return md(n)&&n.tagName.toLowerCase()==="input"}function iN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aN(n,e){return n.button===0&&(!e||e==="_self")&&!iN(n)}var Jf=null;function sN(){if(Jf===null)try{new FormData(document.createElement("form"),0),Jf=!1}catch{Jf=!0}return Jf}var oN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rg(n){return n!=null&&!oN.has(n)?($t(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ch}"`),null):n}function lN(n,e){let t,a,s,l,c;if(nN(n)){let d=n.getAttribute("action");a=d?kr(d,e):null,t=n.getAttribute("method")||uh,s=rg(n.getAttribute("enctype"))||ch,l=new FormData(n)}else if(tN(n)||rN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(a=p?kr(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||uh,s=rg(n.getAttribute("formenctype"))||rg(d.getAttribute("enctype"))||ch,l=new FormData(d,n),!sN()){let{name:g,type:v,value:E}=n;if(v==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,E)}}else{if(md(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=uh,a=null,s=ch,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function py(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function uN(n,e,t,a){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:e&&kr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function cN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function hN(n,e,t){let a=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await cN(l,t);return c.links?c.links():[]}return[]}));return gN(a.flat(1).filter(fN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function A0(n,e,t,a,s,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var v;return t[g].pathname!==p.pathname||((v=t[g].route.path)==null?void 0:v.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{var E;let v=a.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function dN(n,e,{includeHydrateFallback:t}={}){return mN(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function mN(n){return[...new Set(n)]}function pN(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function gN(n,e){let t=new Set;return new Set(e),n.reduce((a,s)=>{let l=JSON.stringify(pN(s));return t.has(l)||(t.add(l),a.push({key:l,link:s})),a},[])}function WS(){let n=B.useContext(so);return py(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function yN(){let n=B.useContext(hc);return py(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gy=B.createContext(void 0);gy.displayName="FrameworkContext";function JS(){let n=B.useContext(gy);return py(n,"You must render this element inside a <HydratedRouter> element"),n}function vN(n,e){let t=B.useContext(gy),[a,s]=B.useState(!1),[l,c]=B.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:E}=e,S=B.useRef(null);B.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let z=G=>{G.forEach(q=>{c(q.isIntersecting)})},M=new IntersectionObserver(z,{threshold:.5});return S.current&&M.observe(S.current),()=>{M.disconnect()}}},[n]),B.useEffect(()=>{if(a){let z=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(z)}}},[a]);let C=()=>{s(!0)},L=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:Ou(d,C),onBlur:Ou(p,L),onMouseEnter:Ou(g,C),onMouseLeave:Ou(v,L),onTouchStart:Ou(E,C)}]:[!1,S,{}]}function Ou(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function _N({page:n,...e}){let{router:t}=WS(),a=B.useMemo(()=>Ka(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?B.createElement(TN,{page:n,matches:a,...e}):null}function EN(n){let{manifest:e,routeModules:t}=JS(),[a,s]=B.useState([]);return B.useEffect(()=>{let l=!1;return hN(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),a}function TN({page:n,matches:e,...t}){let a=ti(),{future:s,manifest:l,routeModules:c}=JS(),{basename:d}=WS(),{loaderData:p,matches:g}=yN(),v=B.useMemo(()=>A0(n,e,g,l,a,"data"),[n,e,g,l,a]),E=B.useMemo(()=>A0(n,e,g,l,a,"assets"),[n,e,g,l,a]),S=B.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let z=new Set,M=!1;if(e.forEach(q=>{var Z;let K=l.routes[q.route.id];!K||!K.hasLoader||(!v.some(se=>se.route.id===q.route.id)&&q.route.id in p&&((Z=c[q.route.id])!=null&&Z.shouldRevalidate)||K.hasClientLoader?M=!0:z.add(q.route.id))}),z.size===0)return[];let G=uN(n,d,s.unstable_trailingSlashAwareDataRequests,"data");return M&&z.size>0&&G.searchParams.set("_routes",e.filter(q=>z.has(q.route.id)).map(q=>q.route.id).join(",")),[G.pathname+G.search]},[d,s.unstable_trailingSlashAwareDataRequests,p,a,l,v,e,n,c]),C=B.useMemo(()=>dN(E,l),[E,l]),L=EN(E);return B.createElement(B.Fragment,null,S.map(z=>B.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),C.map(z=>B.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),L.map(({key:z,link:M})=>B.createElement("link",{key:z,nonce:t.nonce,...M,crossOrigin:M.crossOrigin??t.crossOrigin})))}function bN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var SN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{SN&&(window.__reactRouterVersion="7.13.0")}catch{}function AN(n,e){return JI({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:mI({window:e==null?void 0:e.window}),hydrationData:wN(),routes:n,mapRouteProperties:YD,hydrationRouteProperties:QD,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function wN(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:RN(n.errors)}),n}function RN(n){if(!n)return null;let e=Object.entries(n),t={};for(let[a,s]of e)if(s&&s.__type==="RouteErrorResponse")t[a]=new cc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[a]=c}catch{}}if(t[a]==null){let l=new Error(s.message);l.stack="",t[a]=l}}else t[a]=s;return t}var ZS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eA=B.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S,...C},L){let{basename:z,unstable_useTransitions:M}=B.useContext(Er),G=typeof g=="string"&&ZS.test(g),q=xS(g,z);g=q.to;let K=DD(g,{relative:s}),[Z,se,Q]=vN(a,C),b=NN(g,{replace:c,state:d,target:p,preventScrollReset:v,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:S,unstable_useTransitions:M});function A(N){e&&e(N),N.defaultPrevented||b(N)}let R=B.createElement("a",{...C,...Q,href:q.absoluteURL||K,onClick:q.isExternal||l?e:A,ref:bN(L,se),target:p,"data-discover":!G&&t==="render"?"true":void 0});return Z&&!G?B.createElement(B.Fragment,null,R,B.createElement(_N,{page:K})):R});eA.displayName="Link";var CN=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:p,...g},v){let E=mc(c,{relative:g.relative}),S=ti(),C=B.useContext(hc),{navigator:L,basename:z}=B.useContext(Er),M=C!=null&&PN(E)&&d===!0,G=L.encodeLocation?L.encodeLocation(E).pathname:E.pathname,q=S.pathname,K=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(q=q.toLowerCase(),K=K?K.toLowerCase():null,G=G.toLowerCase()),K&&z&&(K=kr(K,z)||K);const Z=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let se=q===G||!s&&q.startsWith(G)&&q.charAt(Z)==="/",Q=K!=null&&(K===G||!s&&K.startsWith(G)&&K.charAt(G.length)==="/"),b={isActive:se,isPending:Q,isTransitioning:M},A=se?e:void 0,R;typeof a=="function"?R=a(b):R=[a,se?"active":null,Q?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(b):l;return B.createElement(eA,{...g,"aria-current":A,className:R,ref:v,style:N,to:c,viewTransition:d},typeof p=="function"?p(b):p)});CN.displayName="NavLink";var IN=B.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:l,method:c=uh,action:d,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S,...C},L)=>{let{unstable_useTransitions:z}=B.useContext(Er),M=MN(),G=VN(d,{relative:g}),q=c.toLowerCase()==="get"?"get":"post",K=typeof d=="string"&&ZS.test(d),Z=se=>{if(p&&p(se),se.defaultPrevented)return;se.preventDefault();let Q=se.nativeEvent.submitter,b=(Q==null?void 0:Q.getAttribute("formmethod"))||c,A=()=>M(Q||se.currentTarget,{fetcherKey:e,method:b,navigate:t,replace:s,state:l,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S});z&&t!==!1?B.startTransition(()=>A()):A()};return B.createElement("form",{ref:L,method:q,action:G,onSubmit:a?p:Z,...C,"data-discover":!K&&n==="render"?"true":void 0})});IN.displayName="Form";function DN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tA(n){let e=B.useContext(so);return Xe(e,DN(n)),e}function NN(n,{target:e,replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=dc(),v=ti(),E=mc(n,{relative:l});return B.useCallback(S=>{if(aN(S,e)){S.preventDefault();let C=t!==void 0?t:wi(v)===wi(E),L=()=>g(n,{replace:C,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?B.startTransition(()=>L()):L()}},[v,g,E,t,a,e,n,s,l,c,d,p])}var xN=0,ON=()=>`__${String(++xN)}__`;function MN(){let{router:n}=tA("useSubmit"),{basename:e}=B.useContext(Er),t=FD(),a=n.fetch,s=n.navigate;return B.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:v,body:E}=lN(l,e);if(c.navigate===!1){let S=c.fetcherKey||ON();await a(S,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,s,e,t])}function VN(n,{relative:e}={}){let{basename:t}=B.useContext(Er),a=B.useContext(jr);Xe(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...mc(n||".",{relative:e})},c=ti();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ei([t,l.pathname])),wi(l)}function PN(n,{relative:e}={}){let t=B.useContext(fy);Xe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=tA("useViewTransitionState"),s=mc(n,{relative:e});if(!t.isTransitioning)return!1;let l=kr(t.currentLocation.pathname,a)||t.currentLocation.pathname,c=kr(t.nextLocation.pathname,a)||t.nextLocation.pathname;return Mh(s.pathname,c)!=null||Mh(s.pathname,l)!=null}var LN=TS();function kN(n){return B.createElement(WD,{flushSync:LN.flushSync,...n})}const UN=B.createContext(void 0),ua=()=>lI(),pt=fI.withTypes(),jN=({children:n})=>{const e=pt(t=>t.auth.loading);return D.jsx(UN.Provider,{value:{isLoading:e},children:n})},zN=()=>{};var w0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let s=n.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},BN=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const s=n[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],d=n[t++],p=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},rA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,d=c?n[s+1]:0,p=s+2<n.length,g=p?n[s+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,C=g&63;p||(C=64,c||(S=64)),a.push(t[v],t[E],t[S],t[C])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new FN;const S=l<<2|d>>4;if(a.push(S),g!==64){const C=d<<4&240|g>>2;if(a.push(C),E!==64){const L=g<<6&192|E;a.push(L)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class FN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HN=function(n){const e=nA(n);return rA.encodeByteArray(e,!0)},Vh=function(n){return HN(n).replace(/\./g,"")},iA=function(n){try{return rA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=()=>qN().__FIREBASE_DEFAULTS__,$N=()=>{if(typeof process>"u"||typeof w0>"u")return;const n=w0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&iA(n[1]);return e&&JSON.parse(e)},pd=()=>{try{return zN()||GN()||$N()||KN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aA=n=>{var e,t;return(t=(e=pd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},YN=n=>{const e=aA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},sA=()=>{var n;return(n=pd())==null?void 0:n.config},oA=n=>{var e;return(e=pd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Vh(JSON.stringify(t)),Vh(JSON.stringify(c)),""].join(".")}const Hu={};function WN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Hu))Hu[e]?n.emulator.push(e):n.prod.push(e);return n}function JN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let R0=!1;function uA(n,e){if(typeof window>"u"||typeof document>"u"||!Cl(window.location.host)||Hu[n]===e||Hu[n]||R0)return;Hu[n]=e;function t(S){return`__firebase__banner__${S}`}const a="__firebase__banner",l=WN().prod.length>0;function c(){const S=document.getElementById(a);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,C){S.setAttribute("width","24"),S.setAttribute("id",C),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{R0=!0,c()},S}function v(S,C){S.setAttribute("id",C),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=JN(a),C=t("text"),L=document.getElementById(C)||document.createElement("span"),z=t("learnmore"),M=document.getElementById(z)||document.createElement("a"),G=t("preprendIcon"),q=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const K=S.element;d(K),v(M,z);const Z=g();p(q,G),K.append(q,L,M,Z),document.body.appendChild(K)}l?(L.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function e2(){var e;const n=(e=pd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function r2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i2(){const n=On();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function a2(){return!e2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s2(){try{return typeof indexedDB=="object"}catch{return!1}}function o2(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="FirebaseError";class ca extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=l2,Object.setPrototypeOf(this,ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pc.prototype.create)}}class pc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?u2(l,a):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new ca(s,d,a)}}function u2(n,e){return n.replace(c2,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const c2=/\{\$([^}]+)}/g;function f2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function eo(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=n[s],c=e[s];if(C0(l)&&C0(c)){if(!eo(l,c))return!1}else if(l!==c)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function C0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function h2(n,e){const t=new d2(n,e);return t.subscribe.bind(t)}class d2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");m2(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=ig),s.error===void 0&&(s.error=ig),s.complete===void 0&&(s.complete=ig);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function m2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ig(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(n){return n&&n._delegate?n._delegate:n}class to{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new QN;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y2(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&c.resolve(s)}return s}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const l=this.instances.get(a);return l&&e(l,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:g2(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g2(n){return n===$s?void 0:n}function y2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new p2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const _2={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},E2=nt.INFO,T2={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},b2=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),s=T2[e];if(s)console[s](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yy{constructor(e){this.name=e,this._logLevel=E2,this._logHandler=b2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const S2=(n,e)=>e.some(t=>n instanceof t);let I0,D0;function A2(){return I0||(I0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function w2(){return D0||(D0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cA=new WeakMap,Cg=new WeakMap,fA=new WeakMap,ag=new WeakMap,vy=new WeakMap;function R2(n){const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ts(n.result)),s()},c=()=>{a(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&cA.set(t,n)}).catch(()=>{}),vy.set(e,n),e}function C2(n){if(Cg.has(n))return;const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{a(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Cg.set(n,e)}let Ig={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Cg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||fA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ts(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function I2(n){Ig=n(Ig)}function D2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(sg(this),e,...t);return fA.set(a,e.sort?e.sort():[e]),ts(a)}:w2().includes(n)?function(...e){return n.apply(sg(this),e),ts(cA.get(this))}:function(...e){return ts(n.apply(sg(this),e))}}function N2(n){return typeof n=="function"?D2(n):(n instanceof IDBTransaction&&C2(n),S2(n,A2())?new Proxy(n,Ig):n)}function ts(n){if(n instanceof IDBRequest)return R2(n);if(ag.has(n))return ag.get(n);const e=N2(n);return e!==n&&(ag.set(n,e),vy.set(e,n)),e}const sg=n=>vy.get(n);function x2(n,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),d=ts(c);return a&&c.addEventListener("upgradeneeded",p=>{a(ts(c.result),p.oldVersion,p.newVersion,ts(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const O2=["get","getKey","getAll","getAllKeys","count"],M2=["put","add","delete","clear"],og=new Map;function N0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(og.get(e))return og.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=M2.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||O2.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,s?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&p.done]))[0]};return og.set(e,l),l}I2(n=>({...n,get:(e,t,a)=>N0(e,t)||n.get(e,t,a),has:(e,t)=>!!N0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(P2(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function P2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dg="@firebase/app",x0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new yy("@firebase/app"),L2="@firebase/app-compat",k2="@firebase/analytics-compat",U2="@firebase/analytics",j2="@firebase/app-check-compat",z2="@firebase/app-check",B2="@firebase/auth",F2="@firebase/auth-compat",H2="@firebase/database",q2="@firebase/data-connect",G2="@firebase/database-compat",$2="@firebase/functions",K2="@firebase/functions-compat",Y2="@firebase/installations",Q2="@firebase/installations-compat",X2="@firebase/messaging",W2="@firebase/messaging-compat",J2="@firebase/performance",Z2="@firebase/performance-compat",ex="@firebase/remote-config",tx="@firebase/remote-config-compat",nx="@firebase/storage",rx="@firebase/storage-compat",ix="@firebase/firestore",ax="@firebase/ai",sx="@firebase/firestore-compat",ox="firebase",lx="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="[DEFAULT]",ux={[Dg]:"fire-core",[L2]:"fire-core-compat",[U2]:"fire-analytics",[k2]:"fire-analytics-compat",[z2]:"fire-app-check",[j2]:"fire-app-check-compat",[B2]:"fire-auth",[F2]:"fire-auth-compat",[H2]:"fire-rtdb",[q2]:"fire-data-connect",[G2]:"fire-rtdb-compat",[$2]:"fire-fn",[K2]:"fire-fn-compat",[Y2]:"fire-iid",[Q2]:"fire-iid-compat",[X2]:"fire-fcm",[W2]:"fire-fcm-compat",[J2]:"fire-perf",[Z2]:"fire-perf-compat",[ex]:"fire-rc",[tx]:"fire-rc-compat",[nx]:"fire-gcs",[rx]:"fire-gcs-compat",[ix]:"fire-fst",[sx]:"fire-fst-compat",[ax]:"fire-vertex","fire-js":"fire-js",[ox]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new Map,cx=new Map,xg=new Map;function O0(n,e){try{n.container.addComponent(e)}catch(t){ra.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ml(n){const e=n.name;if(xg.has(e))return ra.debug(`There were multiple attempts to register component ${e}.`),!1;xg.set(e,n);for(const t of Ph.values())O0(t,n);for(const t of cx.values())O0(t,n);return!0}function _y(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Yr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new pc("app","Firebase",fx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new to("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=lx;function hA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a={name:Ng,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw ns.create("bad-app-name",{appName:String(s)});if(t||(t=sA()),!t)throw ns.create("no-options");const l=Ph.get(s);if(l){if(eo(t,l.options)&&eo(a,l.config))return l;throw ns.create("duplicate-app",{appName:s})}const c=new v2(s);for(const p of xg.values())c.addComponent(p);const d=new hx(t,a,c);return Ph.set(s,d),d}function dA(n=Ng){const e=Ph.get(n);if(!e&&n===Ng&&sA())return hA();if(!e)throw ns.create("no-app",{appName:n});return e}function rs(n,e,t){let a=ux[n]??n;t&&(a+=`-${t}`);const s=a.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ra.warn(c.join(" "));return}ml(new to(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="firebase-heartbeat-database",mx=1,Zu="firebase-heartbeat-store";let lg=null;function mA(){return lg||(lg=x2(dx,mx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Zu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ns.create("idb-open",{originalErrorMessage:n.message})})),lg}async function px(n){try{const t=(await mA()).transaction(Zu),a=await t.objectStore(Zu).get(pA(n));return await t.done,a}catch(e){if(e instanceof ca)ra.warn(e.message);else{const t=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ra.warn(t.message)}}}async function M0(n,e){try{const a=(await mA()).transaction(Zu,"readwrite");await a.objectStore(Zu).put(e,pA(n)),await a.done}catch(t){if(t instanceof ca)ra.warn(t.message);else{const a=ns.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ra.warn(a.message)}}}function pA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=1024,yx=30;class vx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ex(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=V0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>yx){const c=Tx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){ra.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=V0(),{heartbeatsToSend:a,unsentEntries:s}=_x(this._heartbeatsCache.heartbeats),l=Vh(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ra.warn(t),""}}}function V0(){return new Date().toISOString().substring(0,10)}function _x(n,e=gx){const t=[];let a=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),P0(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),P0(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class Ex{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s2()?o2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await px(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return M0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return M0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function P0(n){return Vh(JSON.stringify({version:2,heartbeats:n})).length}function Tx(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(n){ml(new to("platform-logger",e=>new V2(e),"PRIVATE")),ml(new to("heartbeat",e=>new vx(e),"PRIVATE")),rs(Dg,x0,n),rs(Dg,x0,"esm2020"),rs("fire-js","")}bx("");var L0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,gA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,A){function R(){}R.prototype=A.prototype,b.F=A.prototype,b.prototype=new R,b.prototype.constructor=b,b.D=function(N,x,k){for(var O=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)O[Me-2]=arguments[Me];return A.prototype[x].apply(N,O)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,A,R){R||(R=0);const N=Array(16);if(typeof A=="string")for(var x=0;x<16;++x)N[x]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(x=0;x<16;++x)N[x]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=b.g[0],R=b.g[1],x=b.g[2];let k=b.g[3],O;O=A+(k^R&(x^k))+N[0]+3614090360&4294967295,A=R+(O<<7&4294967295|O>>>25),O=k+(x^A&(R^x))+N[1]+3905402710&4294967295,k=A+(O<<12&4294967295|O>>>20),O=x+(R^k&(A^R))+N[2]+606105819&4294967295,x=k+(O<<17&4294967295|O>>>15),O=R+(A^x&(k^A))+N[3]+3250441966&4294967295,R=x+(O<<22&4294967295|O>>>10),O=A+(k^R&(x^k))+N[4]+4118548399&4294967295,A=R+(O<<7&4294967295|O>>>25),O=k+(x^A&(R^x))+N[5]+1200080426&4294967295,k=A+(O<<12&4294967295|O>>>20),O=x+(R^k&(A^R))+N[6]+2821735955&4294967295,x=k+(O<<17&4294967295|O>>>15),O=R+(A^x&(k^A))+N[7]+4249261313&4294967295,R=x+(O<<22&4294967295|O>>>10),O=A+(k^R&(x^k))+N[8]+1770035416&4294967295,A=R+(O<<7&4294967295|O>>>25),O=k+(x^A&(R^x))+N[9]+2336552879&4294967295,k=A+(O<<12&4294967295|O>>>20),O=x+(R^k&(A^R))+N[10]+4294925233&4294967295,x=k+(O<<17&4294967295|O>>>15),O=R+(A^x&(k^A))+N[11]+2304563134&4294967295,R=x+(O<<22&4294967295|O>>>10),O=A+(k^R&(x^k))+N[12]+1804603682&4294967295,A=R+(O<<7&4294967295|O>>>25),O=k+(x^A&(R^x))+N[13]+4254626195&4294967295,k=A+(O<<12&4294967295|O>>>20),O=x+(R^k&(A^R))+N[14]+2792965006&4294967295,x=k+(O<<17&4294967295|O>>>15),O=R+(A^x&(k^A))+N[15]+1236535329&4294967295,R=x+(O<<22&4294967295|O>>>10),O=A+(x^k&(R^x))+N[1]+4129170786&4294967295,A=R+(O<<5&4294967295|O>>>27),O=k+(R^x&(A^R))+N[6]+3225465664&4294967295,k=A+(O<<9&4294967295|O>>>23),O=x+(A^R&(k^A))+N[11]+643717713&4294967295,x=k+(O<<14&4294967295|O>>>18),O=R+(k^A&(x^k))+N[0]+3921069994&4294967295,R=x+(O<<20&4294967295|O>>>12),O=A+(x^k&(R^x))+N[5]+3593408605&4294967295,A=R+(O<<5&4294967295|O>>>27),O=k+(R^x&(A^R))+N[10]+38016083&4294967295,k=A+(O<<9&4294967295|O>>>23),O=x+(A^R&(k^A))+N[15]+3634488961&4294967295,x=k+(O<<14&4294967295|O>>>18),O=R+(k^A&(x^k))+N[4]+3889429448&4294967295,R=x+(O<<20&4294967295|O>>>12),O=A+(x^k&(R^x))+N[9]+568446438&4294967295,A=R+(O<<5&4294967295|O>>>27),O=k+(R^x&(A^R))+N[14]+3275163606&4294967295,k=A+(O<<9&4294967295|O>>>23),O=x+(A^R&(k^A))+N[3]+4107603335&4294967295,x=k+(O<<14&4294967295|O>>>18),O=R+(k^A&(x^k))+N[8]+1163531501&4294967295,R=x+(O<<20&4294967295|O>>>12),O=A+(x^k&(R^x))+N[13]+2850285829&4294967295,A=R+(O<<5&4294967295|O>>>27),O=k+(R^x&(A^R))+N[2]+4243563512&4294967295,k=A+(O<<9&4294967295|O>>>23),O=x+(A^R&(k^A))+N[7]+1735328473&4294967295,x=k+(O<<14&4294967295|O>>>18),O=R+(k^A&(x^k))+N[12]+2368359562&4294967295,R=x+(O<<20&4294967295|O>>>12),O=A+(R^x^k)+N[5]+4294588738&4294967295,A=R+(O<<4&4294967295|O>>>28),O=k+(A^R^x)+N[8]+2272392833&4294967295,k=A+(O<<11&4294967295|O>>>21),O=x+(k^A^R)+N[11]+1839030562&4294967295,x=k+(O<<16&4294967295|O>>>16),O=R+(x^k^A)+N[14]+4259657740&4294967295,R=x+(O<<23&4294967295|O>>>9),O=A+(R^x^k)+N[1]+2763975236&4294967295,A=R+(O<<4&4294967295|O>>>28),O=k+(A^R^x)+N[4]+1272893353&4294967295,k=A+(O<<11&4294967295|O>>>21),O=x+(k^A^R)+N[7]+4139469664&4294967295,x=k+(O<<16&4294967295|O>>>16),O=R+(x^k^A)+N[10]+3200236656&4294967295,R=x+(O<<23&4294967295|O>>>9),O=A+(R^x^k)+N[13]+681279174&4294967295,A=R+(O<<4&4294967295|O>>>28),O=k+(A^R^x)+N[0]+3936430074&4294967295,k=A+(O<<11&4294967295|O>>>21),O=x+(k^A^R)+N[3]+3572445317&4294967295,x=k+(O<<16&4294967295|O>>>16),O=R+(x^k^A)+N[6]+76029189&4294967295,R=x+(O<<23&4294967295|O>>>9),O=A+(R^x^k)+N[9]+3654602809&4294967295,A=R+(O<<4&4294967295|O>>>28),O=k+(A^R^x)+N[12]+3873151461&4294967295,k=A+(O<<11&4294967295|O>>>21),O=x+(k^A^R)+N[15]+530742520&4294967295,x=k+(O<<16&4294967295|O>>>16),O=R+(x^k^A)+N[2]+3299628645&4294967295,R=x+(O<<23&4294967295|O>>>9),O=A+(x^(R|~k))+N[0]+4096336452&4294967295,A=R+(O<<6&4294967295|O>>>26),O=k+(R^(A|~x))+N[7]+1126891415&4294967295,k=A+(O<<10&4294967295|O>>>22),O=x+(A^(k|~R))+N[14]+2878612391&4294967295,x=k+(O<<15&4294967295|O>>>17),O=R+(k^(x|~A))+N[5]+4237533241&4294967295,R=x+(O<<21&4294967295|O>>>11),O=A+(x^(R|~k))+N[12]+1700485571&4294967295,A=R+(O<<6&4294967295|O>>>26),O=k+(R^(A|~x))+N[3]+2399980690&4294967295,k=A+(O<<10&4294967295|O>>>22),O=x+(A^(k|~R))+N[10]+4293915773&4294967295,x=k+(O<<15&4294967295|O>>>17),O=R+(k^(x|~A))+N[1]+2240044497&4294967295,R=x+(O<<21&4294967295|O>>>11),O=A+(x^(R|~k))+N[8]+1873313359&4294967295,A=R+(O<<6&4294967295|O>>>26),O=k+(R^(A|~x))+N[15]+4264355552&4294967295,k=A+(O<<10&4294967295|O>>>22),O=x+(A^(k|~R))+N[6]+2734768916&4294967295,x=k+(O<<15&4294967295|O>>>17),O=R+(k^(x|~A))+N[13]+1309151649&4294967295,R=x+(O<<21&4294967295|O>>>11),O=A+(x^(R|~k))+N[4]+4149444226&4294967295,A=R+(O<<6&4294967295|O>>>26),O=k+(R^(A|~x))+N[11]+3174756917&4294967295,k=A+(O<<10&4294967295|O>>>22),O=x+(A^(k|~R))+N[2]+718787259&4294967295,x=k+(O<<15&4294967295|O>>>17),O=R+(k^(x|~A))+N[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(x+(O<<21&4294967295|O>>>11))&4294967295,b.g[2]=b.g[2]+x&4294967295,b.g[3]=b.g[3]+k&4294967295}a.prototype.v=function(b,A){A===void 0&&(A=b.length);const R=A-this.blockSize,N=this.C;let x=this.h,k=0;for(;k<A;){if(x==0)for(;k<=R;)s(this,b,k),k+=this.blockSize;if(typeof b=="string"){for(;k<A;)if(N[x++]=b.charCodeAt(k++),x==this.blockSize){s(this,N),x=0;break}}else for(;k<A;)if(N[x++]=b[k++],x==this.blockSize){s(this,N),x=0;break}}this.h=x,this.o+=A},a.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;A=this.o*8;for(var R=b.length-8;R<b.length;++R)b[R]=A&255,A/=256;for(this.v(b),b=Array(16),A=0,R=0;R<4;++R)for(let N=0;N<32;N+=8)b[A++]=this.g[R]>>>N&255;return b};function l(b,A){var R=d;return Object.prototype.hasOwnProperty.call(R,b)?R[b]:R[b]=A(b)}function c(b,A){this.h=A;const R=[];let N=!0;for(let x=b.length-1;x>=0;x--){const k=b[x]|0;N&&k==A||(R[x]=k,N=!1)}this.g=R}var d={};function p(b){return-128<=b&&b<128?l(b,function(A){return new c([A|0],A<0?-1:0)}):new c([b|0],b<0?-1:0)}function g(b){if(isNaN(b)||!isFinite(b))return E;if(b<0)return M(g(-b));const A=[];let R=1;for(let N=0;b>=R;N++)A[N]=b/R|0,R*=4294967296;return new c(A,0)}function v(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return M(v(b.substring(1),A));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(A,8));let N=E;for(let k=0;k<b.length;k+=8){var x=Math.min(8,b.length-k);const O=parseInt(b.substring(k,k+x),A);x<8?(x=g(Math.pow(A,x)),N=N.j(x).add(g(O))):(N=N.j(R),N=N.add(g(O)))}return N}var E=p(0),S=p(1),C=p(16777216);n=c.prototype,n.m=function(){if(z(this))return-M(this).m();let b=0,A=1;for(let R=0;R<this.g.length;R++){const N=this.i(R);b+=(N>=0?N:4294967296+N)*A,A*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(L(this))return"0";if(z(this))return"-"+M(this).toString(b);const A=g(Math.pow(b,6));var R=this;let N="";for(;;){const x=Z(R,A).g;R=G(R,x.j(A));let k=((R.g.length>0?R.g[0]:R.h)>>>0).toString(b);if(R=x,L(R))return k+N;for(;k.length<6;)k="0"+k;N=k+N}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function L(b){if(b.h!=0)return!1;for(let A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function z(b){return b.h==-1}n.l=function(b){return b=G(this,b),z(b)?-1:L(b)?0:1};function M(b){const A=b.g.length,R=[];for(let N=0;N<A;N++)R[N]=~b.g[N];return new c(R,~b.h).add(S)}n.abs=function(){return z(this)?M(this):this},n.add=function(b){const A=Math.max(this.g.length,b.g.length),R=[];let N=0;for(let x=0;x<=A;x++){let k=N+(this.i(x)&65535)+(b.i(x)&65535),O=(k>>>16)+(this.i(x)>>>16)+(b.i(x)>>>16);N=O>>>16,k&=65535,O&=65535,R[x]=O<<16|k}return new c(R,R[R.length-1]&-2147483648?-1:0)};function G(b,A){return b.add(M(A))}n.j=function(b){if(L(this)||L(b))return E;if(z(this))return z(b)?M(this).j(M(b)):M(M(this).j(b));if(z(b))return M(this.j(M(b)));if(this.l(C)<0&&b.l(C)<0)return g(this.m()*b.m());const A=this.g.length+b.g.length,R=[];for(var N=0;N<2*A;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<b.g.length;x++){const k=this.i(N)>>>16,O=this.i(N)&65535,Me=b.i(x)>>>16,qe=b.i(x)&65535;R[2*N+2*x]+=O*qe,q(R,2*N+2*x),R[2*N+2*x+1]+=k*qe,q(R,2*N+2*x+1),R[2*N+2*x+1]+=O*Me,q(R,2*N+2*x+1),R[2*N+2*x+2]+=k*Me,q(R,2*N+2*x+2)}for(b=0;b<A;b++)R[b]=R[2*b+1]<<16|R[2*b];for(b=A;b<2*A;b++)R[b]=0;return new c(R,0)};function q(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function K(b,A){this.g=b,this.h=A}function Z(b,A){if(L(A))throw Error("division by zero");if(L(b))return new K(E,E);if(z(b))return A=Z(M(b),A),new K(M(A.g),M(A.h));if(z(A))return A=Z(b,M(A)),new K(M(A.g),A.h);if(b.g.length>30){if(z(b)||z(A))throw Error("slowDivide_ only works with positive integers.");for(var R=S,N=A;N.l(b)<=0;)R=se(R),N=se(N);var x=Q(R,1),k=Q(N,1);for(N=Q(N,2),R=Q(R,2);!L(N);){var O=k.add(N);O.l(b)<=0&&(x=x.add(R),k=O),N=Q(N,1),R=Q(R,1)}return A=G(b,x.j(A)),new K(x,A)}for(x=E;b.l(A)>=0;){for(R=Math.max(1,Math.floor(b.m()/A.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),k=g(R),O=k.j(A);z(O)||O.l(b)>0;)R-=N,k=g(R),O=k.j(A);L(k)&&(k=S),x=x.add(k),b=G(b,O)}return new K(x,b)}n.B=function(b){return Z(this,b).h},n.and=function(b){const A=Math.max(this.g.length,b.g.length),R=[];for(let N=0;N<A;N++)R[N]=this.i(N)&b.i(N);return new c(R,this.h&b.h)},n.or=function(b){const A=Math.max(this.g.length,b.g.length),R=[];for(let N=0;N<A;N++)R[N]=this.i(N)|b.i(N);return new c(R,this.h|b.h)},n.xor=function(b){const A=Math.max(this.g.length,b.g.length),R=[];for(let N=0;N<A;N++)R[N]=this.i(N)^b.i(N);return new c(R,this.h^b.h)};function se(b){const A=b.g.length+1,R=[];for(let N=0;N<A;N++)R[N]=b.i(N)<<1|b.i(N-1)>>>31;return new c(R,b.h)}function Q(b,A){const R=A>>5;A%=32;const N=b.g.length-R,x=[];for(let k=0;k<N;k++)x[k]=A>0?b.i(k+R)>>>A|b.i(k+R+1)<<32-A:b.i(k+R);return new c(x,b.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,gA=a,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,is=c}).apply(typeof L0<"u"?L0:typeof self<"u"?self:typeof window<"u"?window:{});var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yA,Lu,vA,fh,Og,_A,EA,TA;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zf=="object"&&Zf];for(var y=0;y<f.length;++y){var T=f[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=t(this);function s(f,y){if(y)e:{var T=a;f=f.split(".");for(var I=0;I<f.length-1;I++){var Y=f[I];if(!(Y in T))break e;T=T[Y]}f=f[f.length-1],I=T[f],y=y(I),y!=I&&y!=null&&e(T,f,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(y){var T=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&T.push([I,y[I]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function p(f,y,T){return f.call.apply(f.bind,arguments)}function g(f,y,T){return g=p,g.apply(null,arguments)}function v(f,y){var T=Array.prototype.slice.call(arguments,1);return function(){var I=T.slice();return I.push.apply(I,arguments),f.apply(this,I)}}function E(f,y){function T(){}T.prototype=y.prototype,f.Z=y.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(I,Y,re){for(var ve=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)ve[Fe-2]=arguments[Fe];return y.prototype[Y].apply(I,ve)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function C(f){const y=f.length;if(y>0){const T=Array(y);for(let I=0;I<y;I++)T[I]=f[I];return T}return[]}function L(f,y){for(let I=1;I<arguments.length;I++){const Y=arguments[I];var T=typeof Y;if(T=T!="object"?T:Y?Array.isArray(Y)?"array":T:"null",T=="array"||T=="object"&&typeof Y.length=="number"){T=f.length||0;const re=Y.length||0;f.length=T+re;for(let ve=0;ve<re;ve++)f[T+ve]=Y[ve]}else f.push(Y)}}class z{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function M(f){c.setTimeout(()=>{throw f},0)}function G(){var f=b;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class q{constructor(){this.h=this.g=null}add(y,T){const I=K.get();I.set(y,T),this.h?this.h.next=I:this.g=I,this.h=I}}var K=new z(()=>new Z,f=>f.reset());class Z{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let se,Q=!1,b=new q,A=()=>{const f=Promise.resolve(void 0);se=()=>{f.then(R)}};function R(){for(var f;f=G();){try{f.h.call(f.g)}catch(T){M(T)}var y=K;y.j(f),y.h<100&&(y.h++,f.next=y.g,y.g=f)}Q=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return f})();function O(f){return/^[\s\xa0]*$/.test(f)}function Me(f,y){x.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,y)}E(Me,x),Me.prototype.init=function(f,y){const T=this.type=f.type,I=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget,y||(T=="mouseover"?y=f.fromElement:T=="mouseout"&&(y=f.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var qe="closure_listenable_"+(Math.random()*1e6|0),j=0;function ne(f,y,T,I,Y){this.listener=f,this.proxy=null,this.src=y,this.type=T,this.capture=!!I,this.ha=Y,this.key=++j,this.da=this.fa=!1}function ie(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function me(f,y,T){for(const I in f)y.call(T,f[I],I,f)}function Ee(f,y){for(const T in f)y.call(void 0,f[T],T,f)}function V(f){const y={};for(const T in f)y[T]=f[T];return y}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(f,y){let T,I;for(let Y=1;Y<arguments.length;Y++){I=arguments[Y];for(T in I)f[T]=I[T];for(let re=0;re<te.length;re++)T=te[re],Object.prototype.hasOwnProperty.call(I,T)&&(f[T]=I[T])}}function pe(f){this.src=f,this.g={},this.h=0}pe.prototype.add=function(f,y,T,I,Y){const re=f.toString();f=this.g[re],f||(f=this.g[re]=[],this.h++);const ve=De(f,y,I,Y);return ve>-1?(y=f[ve],T||(y.fa=!1)):(y=new ne(y,this.src,re,!!I,Y),y.fa=T,f.push(y)),y};function we(f,y){const T=y.type;if(T in f.g){var I=f.g[T],Y=Array.prototype.indexOf.call(I,y,void 0),re;(re=Y>=0)&&Array.prototype.splice.call(I,Y,1),re&&(ie(y),f.g[T].length==0&&(delete f.g[T],f.h--))}}function De(f,y,T,I){for(let Y=0;Y<f.length;++Y){const re=f[Y];if(!re.da&&re.listener==y&&re.capture==!!T&&re.ha==I)return Y}return-1}var Ye="closure_lm_"+(Math.random()*1e6|0),bt={};function wt(f,y,T,I,Y){if(Array.isArray(y)){for(let re=0;re<y.length;re++)wt(f,y[re],T,I,Y);return null}return T=vs(T),f&&f[qe]?f.J(y,T,d(I)?!!I.capture:!1,Y):Ii(f,y,T,!1,I,Y)}function Ii(f,y,T,I,Y,re){if(!y)throw Error("Invalid event type");const ve=d(Y)?!!Y.capture:!!Y;let Fe=Mn(f);if(Fe||(f[Ye]=Fe=new pe(f)),T=Fe.add(y,T,I,ve,re),T.proxy)return T;if(I=fa(),T.proxy=I,I.src=f,I.listener=T,f.addEventListener)k||(Y=ve),Y===void 0&&(Y=!1),f.addEventListener(y.toString(),I,Y);else if(f.attachEvent)f.attachEvent(Zn(y.toString()),I);else if(f.addListener&&f.removeListener)f.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return T}function fa(){function f(T){return y.call(f.src,f.listener,T)}const y=gs;return f}function Ut(f,y,T,I,Y){if(Array.isArray(y))for(var re=0;re<y.length;re++)Ut(f,y[re],T,I,Y);else I=d(I)?!!I.capture:!!I,T=vs(T),f&&f[qe]?(f=f.i,re=String(y).toString(),re in f.g&&(y=f.g[re],T=De(y,T,I,Y),T>-1&&(ie(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete f.g[re],f.h--)))):f&&(f=Mn(f))&&(y=f.g[y.toString()],f=-1,y&&(f=De(y,T,I,Y)),(T=f>-1?y[f]:null)&&Jn(T))}function Jn(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[qe])we(y.i,f);else{var T=f.type,I=f.proxy;y.removeEventListener?y.removeEventListener(T,I,f.capture):y.detachEvent?y.detachEvent(Zn(T),I):y.addListener&&y.removeListener&&y.removeListener(I),(T=Mn(y))?(we(T,f),T.h==0&&(T.src=null,y[Ye]=null)):ie(f)}}}function Zn(f){return f in bt?bt[f]:bt[f]="on"+f}function gs(f,y){if(f.da)f=!0;else{y=new Me(y,this);const T=f.listener,I=f.ha||f.src;f.fa&&Jn(f),f=T.call(I,y)}return f}function Mn(f){return f=f[Ye],f instanceof pe?f:null}var ys="__closure_events_fn_"+(Math.random()*1e9>>>0);function vs(f){return typeof f=="function"?f:(f[ys]||(f[ys]=function(y){return f.handleEvent(y)}),f[ys])}function jt(){N.call(this),this.i=new pe(this),this.M=this,this.G=null}E(jt,N),jt.prototype[qe]=!0,jt.prototype.removeEventListener=function(f,y,T,I){Ut(this,f,y,T,I)};function Kt(f,y){var T,I=f.G;if(I)for(T=[];I;I=I.G)T.push(I);if(f=f.M,I=y.type||y,typeof y=="string")y=new x(y,f);else if(y instanceof x)y.target=y.target||f;else{var Y=y;y=new x(I,f),de(y,Y)}Y=!0;let re,ve;if(T)for(ve=T.length-1;ve>=0;ve--)re=y.g=T[ve],Y=ni(re,I,!0,y)&&Y;if(re=y.g=f,Y=ni(re,I,!0,y)&&Y,Y=ni(re,I,!1,y)&&Y,T)for(ve=0;ve<T.length;ve++)re=y.g=T[ve],Y=ni(re,I,!1,y)&&Y}jt.prototype.N=function(){if(jt.Z.N.call(this),this.i){var f=this.i;for(const y in f.g){const T=f.g[y];for(let I=0;I<T.length;I++)ie(T[I]);delete f.g[y],f.h--}}this.G=null},jt.prototype.J=function(f,y,T,I){return this.i.add(String(f),y,!1,T,I)},jt.prototype.K=function(f,y,T,I){return this.i.add(String(f),y,!0,T,I)};function ni(f,y,T,I){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();let Y=!0;for(let re=0;re<y.length;++re){const ve=y[re];if(ve&&!ve.da&&ve.capture==T){const Fe=ve.listener,Yt=ve.ha||ve.src;ve.fa&&we(f.i,ve),Y=Fe.call(Yt,I)!==!1&&Y}}return Y&&!I.defaultPrevented}function Pl(f,y){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(f,y||0)}function fo(f){f.g=Pl(()=>{f.g=null,f.i&&(f.i=!1,fo(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class zt extends N{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:fo(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(f){N.call(this),this.h=f,this.g={}}E(er,N);var ha=[];function Di(f){me(f.g,function(y,T){this.g.hasOwnProperty(T)&&Jn(y)},f),f.g={}}er.prototype.N=function(){er.Z.N.call(this),Di(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fn=c.JSON.stringify,tr=c.JSON.parse,_s=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function ho(){}function da(){}var nr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function St(){x.call(this,"d")}E(St,x);function Vn(){x.call(this,"c")}E(Vn,x);var Vt={},Es=null;function ma(){return Es=Es||new jt}Vt.Ia="serverreachability";function Ts(f){x.call(this,Vt.Ia,f)}E(Ts,x);function Pn(f){const y=ma();Kt(y,new Ts(y))}Vt.STAT_EVENT="statevent";function ri(f,y){x.call(this,Vt.STAT_EVENT,f),this.stat=y}E(ri,x);function Pt(f){const y=ma();Kt(y,new ri(y,f))}Vt.Ja="timingevent";function br(f,y){x.call(this,Vt.Ja,f),this.size=y}E(br,x);function rr(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},y)}function ir(){this.g=!0}ir.prototype.ua=function(){this.g=!1};function mo(f,y,T,I,Y,re){f.info(function(){if(f.g)if(re){var ve="",Fe=re.split("&");for(let ct=0;ct<Fe.length;ct++){var Yt=Fe[ct].split("=");if(Yt.length>1){const Lt=Yt[0];Yt=Yt[1];const wr=Lt.split("_");ve=wr.length>=2&&wr[1]=="type"?ve+(Lt+"="+Yt+"&"):ve+(Lt+"=redacted&")}}}else ve=null;else ve=re;return"XMLHTTP REQ ("+I+") [attempt "+Y+"]: "+y+`
`+T+`
`+ve})}function Ni(f,y,T,I,Y,re,ve){f.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Y+"]: "+y+`
`+T+`
`+re+" "+ve})}function Ln(f,y,T,I){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ll(f,T)+(I?" "+I:"")})}function ii(f,y){f.info(function(){return"TIMEOUT: "+y})}ir.prototype.info=function(){};function Ll(f,y){if(!f.g)return y;if(!y)return null;try{const re=JSON.parse(y);if(re){for(f=0;f<re.length;f++)if(Array.isArray(re[f])){var T=re[f];if(!(T.length<2)){var I=T[1];if(Array.isArray(I)&&!(I.length<1)){var Y=I[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let ve=1;ve<I.length;ve++)I[ve]=""}}}}return fn(re)}catch{return y}}var xi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},P={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},H;function J(){}E(J,ho),J.prototype.g=function(){return new XMLHttpRequest},H=new J;function he(f){return encodeURIComponent(String(f))}function ge(f){var y=1;f=f.split(":");const T=[];for(;y>0&&f.length;)T.push(f.shift()),y--;return f.length&&T.push(f.join(":")),T}function be(f,y,T,I){this.j=f,this.i=y,this.l=T,this.S=I||1,this.V=new er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}var ye={},_e={};function Ae(f,y,T){f.M=1,f.A=bs(yt(y)),f.u=T,f.R=!0,Pe(f,null)}function Pe(f,y){f.F=Date.now(),gt(f),f.B=yt(f.A);var T=f.B,I=f.S;Array.isArray(I)||(I=[String(I)]),go(T.i,"t",I),f.C=0,T=f.j.L,f.h=new Re,f.g=Fc(f.j,T?y:null,!f.u),f.P>0&&(f.O=new zt(g(f.Y,f,f.g),f.P)),y=f.V,T=f.g,I=f.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(ha[0]=Y.toString()),Y=ha);for(let re=0;re<Y.length;re++){const ve=wt(T,Y[re],I||y.handleEvent,!1,y.h||y);if(!ve)break;y.g[ve.key]=ve}y=f.J?V(f.J):{},f.u?(f.v||(f.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,y)):(f.v="GET",f.g.ea(f.B,f.v,null,y)),Pn(),mo(f.i,f.v,f.B,f.l,f.S,f.u)}be.prototype.ba=function(f){f=f.target;const y=this.O;y&&Fr(f)==3?y.j():this.Y(f)},be.prototype.Y=function(f){try{if(f==this.g)e:{const Fe=Fr(this.g),Yt=this.g.ya(),ct=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||gn(this.g)))){this.K||Fe!=4||Yt==7||(Yt==8||ct<=0?Pn(3):Pn(2)),Rt(this);var y=this.g.ca();this.X=y;var T=Ne(this);if(this.o=y==200,Ni(this.i,this.v,this.B,this.l,this.S,Fe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,Y=this.g;if((I=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(I)){var re=I;break t}}re=null}if(f=re)Ln(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hn(this,f);else{this.o=!1,this.m=3,Pt(12),Ct(this),Ge(this);break e}}if(this.R){f=!0;let Lt;for(;!this.K&&this.C<T.length;)if(Lt=Qe(this,T),Lt==_e){Fe==4&&(this.m=4,Pt(14),f=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==ye){this.m=4,Pt(15),Ln(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else Ln(this.i,this.l,Lt,null),hn(this,Lt);if(Ue(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||T.length!=0||this.h.h||(this.m=1,Pt(16),f=!1),this.o=this.o&&f,!f)Ln(this.i,this.l,T,"[Invalid Chunked Response]"),Ct(this),Ge(this);else if(T.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Gl(ve),ve.P=!0,Pt(11))}}else Ln(this.i,this.l,T,null),hn(this,T);Fe==4&&Ct(this),this.o&&!this.K&&(Fe==4?Uc(this.j,this):(this.o=!1,gt(this)))}else Mi(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),Ct(this),Ge(this)}}}catch{}finally{}};function Ne(f){if(!Ue(f))return f.g.la();const y=gn(f.g);if(y==="")return"";let T="";const I=y.length,Y=Fr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Ct(f),Ge(f),"";f.h.i=new c.TextDecoder}for(let re=0;re<I;re++)f.h.h=!0,T+=f.h.i.decode(y[re],{stream:!(Y&&re==I-1)});return y.length=0,f.h.g+=T,f.C=0,f.h.g}function Ue(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Qe(f,y){var T=f.C,I=y.indexOf(`
`,T);return I==-1?_e:(T=Number(y.substring(T,I)),isNaN(T)?ye:(I+=1,I+T>y.length?_e:(y=y.slice(I,I+T),f.C=I+T,y)))}be.prototype.cancel=function(){this.K=!0,Ct(this)};function gt(f){f.T=Date.now()+f.H,Nt(f,f.H)}function Nt(f,y){if(f.D!=null)throw Error("WatchDog timer not null");f.D=rr(g(f.aa,f),y)}function Rt(f){f.D&&(c.clearTimeout(f.D),f.D=null)}be.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(ii(this.i,this.B),this.M!=2&&(Pn(),Pt(17)),Ct(this),this.m=2,Ge(this)):Nt(this,this.T-f)};function Ge(f){f.j.I==0||f.K||Uc(f.j,f)}function Ct(f){Rt(f);var y=f.O;y&&typeof y.dispose=="function"&&y.dispose(),f.O=null,Di(f.V),f.g&&(y=f.g,f.g=null,y.abort(),y.dispose())}function hn(f,y){try{var T=f.j;if(T.I!=0&&(T.g==f||Rn(T.h,f))){if(!f.L&&Rn(T.h,f)&&T.I==3){try{var I=T.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Y=I;if(Y[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)To(T),ba(T);else break e;Ds(T),Pt(18)}}else T.xa=Y[1],0<T.xa-T.K&&Y[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=rr(g(T.Va,T),6e3));Fn(T.h)<=1&&T.ta&&(T.ta=void 0)}else hi(T,11)}else if((f.L||T.g==f)&&To(T),!O(y))for(Y=T.Ba.g.parse(y),y=0;y<Y.length;y++){let ct=Y[y];const Lt=ct[0];if(!(Lt<=T.K))if(T.K=Lt,ct=ct[1],T.I==2)if(ct[0]=="c"){T.M=ct[1],T.ba=ct[2];const wr=ct[3];wr!=null&&(T.ka=wr,T.j.info("VER="+T.ka));const di=ct[4];di!=null&&(T.za=di,T.j.info("SVER="+T.za));const Hr=ct[5];Hr!=null&&typeof Hr=="number"&&Hr>0&&(I=1.5*Hr,T.O=I,T.j.info("backChannelRequestTimeoutMs_="+I)),I=T;const qr=f.g;if(qr){const Ns=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ns){var re=I.h;re.g||Ns.indexOf("spdy")==-1&&Ns.indexOf("quic")==-1&&Ns.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(ar(re,re.h),re.h=null))}if(I.G){const bo=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;bo&&(I.wa=bo,ut(I.J,I.G,bo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),I=T;var ve=f;if(I.na=Bc(I,I.L?I.ba:null,I.W),ve.L){ai(I.h,ve);var Fe=ve,Yt=I.O;Yt&&(Fe.H=Yt),Fe.D&&(Rt(Fe),gt(Fe)),I.g=ve}else Lc(I);T.i.length>0&&fi(T)}else ct[0]!="stop"&&ct[0]!="close"||hi(T,7);else T.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?hi(T,7):Hl(T):ct[0]!="noop"&&T.l&&T.l.qa(ct),T.A=0)}}Pn(4)}catch{}}var It=class{constructor(f,y){this.g=f,this.map=y}};function Bn(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wn(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Fn(f){return f.h?1:f.g?f.g.size:0}function Rn(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function ar(f,y){f.g?f.g.add(y):f.h=y}function ai(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}Bn.prototype.cancel=function(){if(this.i=si(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function si(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const T of f.g.values())y=y.concat(T.G);return y}return C(f.i)}var We=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bt(f,y){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const I=f[T].indexOf("=");let Y,re=null;I>=0?(Y=f[T].substring(0,I),re=f[T].substring(I+1)):Y=f[T],y(Y,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Zt(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;f instanceof Zt?(this.l=f.l,$e(this,f.j),this.o=f.o,this.g=f.g,sr(this,f.u),this.h=f.h,pa(this,Vc(f.i)),this.m=f.m):f&&(y=String(f).match(We))?(this.l=!1,$e(this,y[1]||"",!0),this.o=oi(y[2]||""),this.g=oi(y[3]||"",!0),sr(this,y[4]),this.h=oi(y[5]||"",!0),pa(this,y[6]||"",!0),this.m=oi(y[7]||"")):(this.l=!1,this.i=new ya(null,this.l))}Zt.prototype.toString=function(){const f=[];var y=this.j;y&&f.push(Ss(y,po,!0),":");var T=this.g;return(T||y=="file")&&(f.push("//"),(y=this.o)&&f.push(Ss(y,po,!0),"@"),f.push(he(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(Ss(T,T.charAt(0)=="/"?kl:xc,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",Ss(T,Oc)),f.join("")},Zt.prototype.resolve=function(f){const y=yt(this);let T=!!f.j;T?$e(y,f.j):T=!!f.o,T?y.o=f.o:T=!!f.g,T?y.g=f.g:T=f.u!=null;var I=f.h;if(T)sr(y,f.u);else if(T=!!f.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var Y=y.h.lastIndexOf("/");Y!=-1&&(I=y.h.slice(0,Y+1)+I)}if(Y=I,Y==".."||Y==".")I="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){I=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const re=[];for(let ve=0;ve<Y.length;){const Fe=Y[ve++];Fe=="."?I&&ve==Y.length&&re.push(""):Fe==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),I&&ve==Y.length&&re.push("")):(re.push(Fe),I=!0)}I=re.join("/")}else I=Y}return T?y.h=I:T=f.i.toString()!=="",T?pa(y,Vc(f.i)):T=!!f.m,T&&(y.m=f.m),y};function yt(f){return new Zt(f)}function $e(f,y,T){f.j=T?oi(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function sr(f,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);f.u=y}else f.u=null}function pa(f,y,T){y instanceof ya?(f.i=y,yo(f.i,f.l)):(T||(y=Ss(y,ga)),f.i=new ya(y,f.l))}function ut(f,y,T){f.i.set(y,T)}function bs(f){return ut(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function oi(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ss(f,y,T){return typeof f=="string"?(f=encodeURI(f).replace(y,Hn),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Hn(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var po=/[#\/\?@]/g,xc=/[#\?:]/g,kl=/[#\?]/g,ga=/[#\?@]/g,Oc=/#/g;function ya(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function qn(f){f.g||(f.g=new Map,f.h=0,f.i&&Bt(f.i,function(y,T){f.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=ya.prototype,n.add=function(f,y){qn(this),this.i=null,f=va(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(y),this.h+=1,this};function Mc(f,y){qn(f),y=va(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Ul(f,y){return qn(f),y=va(f,y),f.g.has(y)}n.forEach=function(f,y){qn(this),this.g.forEach(function(T,I){T.forEach(function(Y){f.call(y,Y,I,this)},this)},this)};function jl(f,y){qn(f);let T=[];if(typeof y=="string")Ul(f,y)&&(T=T.concat(f.g.get(va(f,y))));else for(f=Array.from(f.g.values()),y=0;y<f.length;y++)T=T.concat(f[y]);return T}n.set=function(f,y){return qn(this),this.i=null,f=va(this,f),Ul(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f?(f=jl(this,f),f.length>0?String(f[0]):y):y};function go(f,y,T){Mc(f,y),T.length>0&&(f.i=null,f.g.set(va(f,y),C(T)),f.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var T=y[I];const Y=he(T);T=jl(this,T);for(let re=0;re<T.length;re++){let ve=Y;T[re]!==""&&(ve+="="+he(T[re])),f.push(ve)}}return this.i=f.join("&")};function Vc(f){const y=new ya;return y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),y}function va(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function yo(f,y){y&&!f.j&&(qn(f),f.i=null,f.g.forEach(function(T,I){const Y=I.toLowerCase();I!=Y&&(Mc(this,I),go(this,Y,T))},f)),f.j=y}function zr(f,y){const T=new ir;if(c.Image){const I=new Image;I.onload=v(Sr,T,"TestLoadImage: loaded",!0,y,I),I.onerror=v(Sr,T,"TestLoadImage: error",!1,y,I),I.onabort=v(Sr,T,"TestLoadImage: abort",!1,y,I),I.ontimeout=v(Sr,T,"TestLoadImage: timeout",!1,y,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=f}else y(!1)}function zl(f,y){const T=new ir,I=new AbortController,Y=setTimeout(()=>{I.abort(),Sr(T,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:I.signal}).then(re=>{clearTimeout(Y),re.ok?Sr(T,"TestPingServer: ok",!0,y):Sr(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Y),Sr(T,"TestPingServer: error",!1,y)})}function Sr(f,y,T,I,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),I(T)}catch{}}function _a(){this.g=new _s}function li(f){this.i=f.Sb||null,this.h=f.ab||!1}E(li,ho),li.prototype.g=function(){return new As(this.i,this.h)};function As(f,y){jt.call(this),this.H=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(As,jt),n=As.prototype,n.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=y,this.readyState=1,Br(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(y.body=f),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Br(this)),this.g&&(this.readyState=3,Br(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vo(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function vo(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?Ea(this):Br(this),this.readyState==3&&vo(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Ea(this))},n.Na=function(f){this.g&&(this.response=f,Ea(this))},n.ga=function(){this.g&&Ea(this)};function Ea(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Br(f)}n.setRequestHeader=function(f,y){this.A.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=y.next();return f.join(`\r
`)};function Br(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(As.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ar(f){let y="";return me(f,function(T,I){y+=I,y+=":",y+=T,y+=`\r
`}),y}function ws(f,y,T){e:{for(I in T){var I=!1;break e}I=!0}I||(T=Ar(T),typeof f=="string"?T!=null&&he(T):ut(f,y,T))}function vt(f){jt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(vt,jt);var ui=/^https?$/i,Bl=["POST","PUT"];n=vt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,y,T,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():H.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(re){Rs(this,re);return}if(f=T||"",T=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Y in I)T.set(Y,I[Y]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const re of I.keys())T.set(re,I.get(re));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),Y=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(Bl,y,void 0)>=0)||I||Y||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ve]of T)this.g.setRequestHeader(re,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(re){Rs(this,re)}};function Rs(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.o=5,Fl(f),Oi(f)}function Fl(f){f.A||(f.A=!0,Kt(f,"complete"),Kt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Kt(this,"complete"),Kt(this,"abort"),Oi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),vt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Cs(this):this.Xa())},n.Xa=function(){Cs(this)};function Cs(f){if(f.h&&typeof l<"u"){if(f.v&&Fr(f)==4)setTimeout(f.Ca.bind(f),0);else if(Kt(f,"readystatechange"),Fr(f)==4){f.h=!1;try{const re=f.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var I;if(I=re===0){let ve=String(f.D).match(We)[1]||null;!ve&&c.self&&c.self.location&&(ve=c.self.location.protocol.slice(0,-1)),I=!ui.test(ve?ve.toLowerCase():"")}T=I}if(T)Kt(f,"complete"),Kt(f,"success");else{f.o=6;try{var Y=Fr(f)>2?f.g.statusText:""}catch{Y=""}f.l=Y+" ["+f.ca()+"]",Fl(f)}}finally{Oi(f)}}}}function Oi(f,y){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,y||Kt(f,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Fr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Fr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),tr(y)}};function gn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Mi(f){const y={};f=(f.g&&Fr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<f.length;I++){if(O(f[I]))continue;var T=ge(f[I]);const Y=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=y[Y]||[];y[Y]=re,re.push(T)}Ee(y,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ci(f,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||y}function Ta(f){this.za=0,this.i=[],this.j=new ir,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ci("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ci("baseRetryDelayMs",5e3,f),this.Za=ci("retryDelaySeedMs",1e4,f),this.Ta=ci("forwardChannelMaxRetries",2,f),this.va=ci("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Bn(f&&f.concurrentRequestLimit),this.Ba=new _a,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ta.prototype,n.ka=8,n.I=1,n.connect=function(f,y,T,I){Pt(0),this.W=f,this.H=y||{},T&&I!==void 0&&(this.H.OSID=T,this.H.OAID=I),this.F=this.X,this.J=Bc(this,null,this.W),fi(this)};function Hl(f){if(_o(f),f.I==3){var y=f.V++,T=yt(f.J);if(ut(T,"SID",f.M),ut(T,"RID",y),ut(T,"TYPE","terminate"),Is(f,T),y=new be(f,f.j,y),y.M=2,y.A=bs(yt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=Fc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),gt(y)}zc(f)}function ba(f){f.g&&(Gl(f),f.g.cancel(),f.g=null)}function _o(f){ba(f),f.v&&(c.clearTimeout(f.v),f.v=null),To(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function fi(f){if(!wn(f.h)&&!f.m){f.m=!0;var y=f.Ea;se||A(),Q||(se(),Q=!0),b.add(y,f),f.D=0}}function Eo(f,y){return Fn(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=y.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=rr(g(f.Ea,f,y),jc(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Y=new be(this,this.j,f);let re=this.o;if(this.U&&(re?(re=V(re),de(re,this.U)):re=this.U),this.u!==null||this.R||(Y.J=re,re=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var I=this.i[T];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=Pc(this,Y,y),T=yt(this.J),ut(T,"RID",f),ut(T,"CVER",22),this.G&&ut(T,"X-HTTP-Session-Id",this.G),Is(this,T),re&&(this.R?y="headers="+he(Ar(re))+"&"+y:this.u&&ws(T,this.u,re)),ar(this.h,Y),this.Ra&&ut(T,"TYPE","init"),this.S?(ut(T,"$req",y),ut(T,"SID","null"),Y.U=!0,Ae(Y,T,null)):Ae(Y,T,y),this.I=2}}else this.I==3&&(f?ql(this,f):this.i.length==0||wn(this.h)||ql(this))};function ql(f,y){var T;y?T=y.l:T=f.V++;const I=yt(f.J);ut(I,"SID",f.M),ut(I,"RID",T),ut(I,"AID",f.K),Is(f,I),f.u&&f.o&&ws(I,f.u,f.o),T=new be(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),y&&(f.i=y.G.concat(f.i)),y=Pc(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),ar(f.h,T),Ae(T,I,y)}function Is(f,y){f.H&&me(f.H,function(T,I){ut(y,I,T)}),f.l&&me({},function(T,I){ut(y,I,T)})}function Pc(f,y,T){T=Math.min(f.i.length,T);const I=f.l?g(f.l.Ka,f.l,f):null;e:{var Y=f.i;let Fe=-1;for(;;){const Yt=["count="+T];Fe==-1?T>0?(Fe=Y[0].g,Yt.push("ofs="+Fe)):Fe=0:Yt.push("ofs="+Fe);let ct=!0;for(let Lt=0;Lt<T;Lt++){var re=Y[Lt].g;const wr=Y[Lt].map;if(re-=Fe,re<0)Fe=Math.max(0,Y[Lt].g-100),ct=!1;else try{re="req"+re+"_"||"";try{var ve=wr instanceof Map?wr:Object.entries(wr);for(const[di,Hr]of ve){let qr=Hr;d(Hr)&&(qr=fn(Hr)),Yt.push(re+di+"="+encodeURIComponent(qr))}}catch(di){throw Yt.push(re+"type="+encodeURIComponent("_badmap")),di}}catch{I&&I(wr)}}if(ct){ve=Yt.join("&");break e}}ve=void 0}return f=f.i.splice(0,T),y.G=f,ve}function Lc(f){if(!f.g&&!f.v){f.Y=1;var y=f.Da;se||A(),Q||(se(),Q=!0),b.add(y,f),f.A=0}}function Ds(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=rr(g(f.Da,f),jc(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,kc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=rr(g(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),ba(this),kc(this))};function Gl(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function kc(f){f.g=new be(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var y=yt(f.na);ut(y,"RID","rpc"),ut(y,"SID",f.M),ut(y,"AID",f.K),ut(y,"CI",f.F?"0":"1"),!f.F&&f.ia&&ut(y,"TO",f.ia),ut(y,"TYPE","xmlhttp"),Is(f,y),f.u&&f.o&&ws(y,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=bs(yt(y)),T.u=null,T.R=!0,Pe(T,f)}n.Va=function(){this.C!=null&&(this.C=null,ba(this),Ds(this),Pt(19))};function To(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function Uc(f,y){var T=null;if(f.g==y){To(f),Gl(f),f.g=null;var I=2}else if(Rn(f.h,y))T=y.G,ai(f.h,y),I=1;else return;if(f.I!=0){if(y.o)if(I==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var Y=f.D;I=ma(),Kt(I,new br(I,T)),fi(f)}else Lc(f);else if(Y=y.m,Y==3||Y==0&&y.X>0||!(I==1&&Eo(f,y)||I==2&&Ds(f)))switch(T&&T.length>0&&(y=f.h,y.i=y.i.concat(T)),Y){case 1:hi(f,5);break;case 4:hi(f,10);break;case 3:hi(f,6);break;default:hi(f,2)}}}function jc(f,y){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*y}function hi(f,y){if(f.j.info("Error code "+y),y==2){var T=g(f.bb,f),I=f.Ua;const Y=!I;I=new Zt(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||$e(I,"https"),bs(I),Y?zr(I.toString(),T):zl(I.toString(),T)}else Pt(2);f.I=0,f.l&&f.l.pa(y),zc(f),_o(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function zc(f){if(f.I=0,f.ja=[],f.l){const y=si(f.h);(y.length!=0||f.i.length!=0)&&(L(f.ja,y),L(f.ja,f.i),f.h.i.length=0,C(f.i),f.i.length=0),f.l.oa()}}function Bc(f,y,T){var I=T instanceof Zt?yt(T):new Zt(T);if(I.g!="")y&&(I.g=y+"."+I.g),sr(I,I.u);else{var Y=c.location;I=Y.protocol,y=y?y+"."+Y.hostname:Y.hostname,Y=+Y.port;const re=new Zt(null);I&&$e(re,I),y&&(re.g=y),Y&&sr(re,Y),T&&(re.h=T),I=re}return T=f.G,y=f.wa,T&&y&&ut(I,T,y),ut(I,"VER",f.ka),Is(f,I),I}function Fc(f,y,T){if(y&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Aa&&!f.ma?new vt(new li({ab:T})):new vt(f.ma),y.Fa(f.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hc(){}n=Hc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Sa(){}Sa.prototype.g=function(f,y){return new kn(f,y)};function kn(f,y){jt.call(this),this.g=new Ta(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(f?f["X-WebChannel-Client-Profile"]=y.sa:f={"X-WebChannel-Client-Profile":y.sa}),this.g.U=f,(f=y&&y.Qb)&&!O(f)&&(this.g.u=f),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new Vi(this)}E(kn,jt),kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Hl(this.g)},kn.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=fn(f),f=T);y.i.push(new It(y.Ya++,f)),y.I==3&&fi(y)},kn.prototype.N=function(){this.g.l=null,delete this.j,Hl(this.g),delete this.g,kn.Z.N.call(this)};function qc(f){St.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const T in y){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}E(qc,St);function Gc(){Vn.call(this),this.status=1}E(Gc,Vn);function Vi(f){this.g=f}E(Vi,Hc),Vi.prototype.ra=function(){Kt(this.g,"a")},Vi.prototype.qa=function(f){Kt(this.g,new qc(f))},Vi.prototype.pa=function(f){Kt(this.g,new Gc)},Vi.prototype.oa=function(){Kt(this.g,"b")},Sa.prototype.createWebChannel=Sa.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,TA=function(){return new Sa},EA=function(){return ma()},_A=Vt,Og={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xi.NO_ERROR=0,xi.TIMEOUT=8,xi.HTTP_ERROR=6,fh=xi,P.COMPLETE="complete",vA=P,da.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",jt.prototype.listen=jt.prototype.J,Lu=da,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,yA=vt}).apply(typeof Zf<"u"?Zf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl="12.8.0";function Sx(n){Dl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new yy("@firebase/firestore");function el(){return no.logLevel}function Se(n,...e){if(no.logLevel<=nt.DEBUG){const t=e.map(Ey);no.debug(`Firestore (${Dl}): ${n}`,...t)}}function ia(n,...e){if(no.logLevel<=nt.ERROR){const t=e.map(Ey);no.error(`Firestore (${Dl}): ${n}`,...t)}}function pl(n,...e){if(no.logLevel<=nt.WARN){const t=e.map(Ey);no.warn(`Firestore (${Dl}): ${n}`,...t)}}function Ey(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,bA(n,a,t)}function bA(n,e,t){let a=`FIRESTORE (${Dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw ia(a),new Error(a)}function ht(n,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,n||bA(e,s,a)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends ca{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ax{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Nn.UNAUTHENTICATED)))}shutdown(){}}class wx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Rx{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ht(this.o===void 0,42304);let a=this.i;const s=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let l=new ta;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ta,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await s(this.currentUser)}))},d=p=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ta)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ht(typeof a.accessToken=="string",31837,{l:a}),new SA(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class Cx{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Ix{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new Cx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class k0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ht(this.o===void 0,3512);const a=l=>{l.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Se("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const s=l=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new k0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new k0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=Nx(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function rt(n,e){return n<e?-1:n>e?1:0}function Mg(n,e){const t=Math.min(n.length,e.length);for(let a=0;a<t;a++){const s=n.charAt(a),l=e.charAt(a);if(s!==l)return ug(s)===ug(l)?rt(s,l):ug(s)?1:-1}return rt(n.length,e.length)}const xx=55296,Ox=57343;function ug(n){const e=n.charCodeAt(0);return e>=xx&&e<=Ox}function gl(n,e,t){return n.length===e.length&&n.every(((a,s)=>t(a,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="__name__";class vi{constructor(e,t,a){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Le(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vi?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=vi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return rt(e.length,t.length)}static compareSegments(e,t){const a=vi.isNumericId(e),s=vi.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?vi.extractNumericId(e).compare(vi.extractNumericId(t)):Mg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return is.fromString(e.substring(4,e.length-2))}}class Dt extends vi{construct(e,t,a){return new Dt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Te(ue.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((s=>s.length>0)))}return new Dt(t)}static emptyPath(){return new Dt([])}}const Mx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sn extends vi{construct(e,t,a){return new Sn(e,t,a)}static isValidIdentifier(e){return Mx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U0}static keyField(){return new Sn([U0])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new Te(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Te(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Te(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(a+=d,s++):(l(),s++)}if(l(),c)throw new Te(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sn(t)}static emptyPath(){return new Sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Dt.fromString(e))}static fromName(e){return new Oe(Dt.fromString(e).popFirst(5))}static empty(){return new Oe(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(n,e,t){if(!t)throw new Te(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Vx(n,e,t,a){if(e===!0&&a===!0)throw new Te(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function j0(n){if(!Oe.isDocumentKey(n))throw new Te(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function z0(n){if(Oe.isDocumentKey(n))throw new Te(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function gd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Le(12329,{type:typeof n})}function vr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gd(n);throw new Te(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(n,e){const t={typeString:n};return e&&(t.value=e),t}function yc(n,e){if(!wA(n))throw new Te(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const s=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){t=`JSON missing required field: '${a}'`;break}const c=n[a];if(s&&typeof c!==s){t=`JSON field '${a}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new Te(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=-62135596800,F0=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*F0);return new Mt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<B0)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/F0}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yc(e,Mt._jsonSchema))return new Mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:on("string",Mt._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new Mt(0,0))}static max(){return new je(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=-1;function Px(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,s=je.fromTimestamp(a===1e9?new Mt(t+1,0):new Mt(t,a));return new os(s,Oe.empty(),e)}function Lx(n){return new os(n.readTime,n.key,ec)}class os{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new os(je.min(),Oe.empty(),ec)}static max(){return new os(je.max(),Oe.empty(),ec)}}function kx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:rt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==Ux)throw n;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,a)=>{t(e)}))}static reject(e){return new fe(((t,a)=>{a(e)}))}static waitFor(e){return new fe(((t,a)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(p=>a(p)))})),c=!0,l===s&&t()}))}static or(e){let t=fe.resolve(!1);for(const a of e)t=t.next((s=>s?fe.resolve(s):a()));return t}static forEach(e,t){const a=[];return e.forEach(((s,l)=>{a.push(t.call(this,s,l))})),this.waitFor(a)}static mapArray(e,t){return new fe(((a,s)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&a(c)}),(v=>s(v)))}}))}static doWhile(e,t){return new fe(((a,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):a()};l()}))}}function zx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=-1;function vd(n){return n==null}function Lh(n){return n===0&&1/n==-1/0}function Bx(n){return typeof n=="number"&&Number.isInteger(n)&&!Lh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="";function Fx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=H0(e)),e=Hx(n.get(t),e);return H0(e)}function Hx(n,e){let t=e;const a=n.length;for(let s=0;s<a;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case RA:t+="";break;default:t+=l}}return t}function H0(n){return n+RA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ms(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t){this.comparator=e,this.root=t||bn.EMPTY}insert(e,t){return new Ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new Ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??bn.RED,this.left=s??bn.EMPTY,this.right=l??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new bn(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return bn.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new G0(this.data.getIterator())}getIteratorFrom(e){return new G0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class G0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new gr([])}unionWith(e){let t=new un(Sn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new gr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gl(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new IA("Invalid base64 string: "+l):l}})(e);return new An(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new An(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const qx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(n){if(ht(!!n,39018),typeof n=="string"){let e=0;const t=qx.exec(n);if(ht(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Wt(n.seconds),nanos:Wt(n.nanos)}}function Wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function us(n){return typeof n=="string"?An.fromBase64String(n):An.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="server_timestamp",NA="__type__",xA="__previous_value__",OA="__local_write_time__";function Sy(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[NA])==null?void 0:a.stringValue)===DA}function _d(n){const e=n.mapValue.fields[xA];return Sy(e)?_d(e):e}function tc(n){const e=ls(n.mapValue.fields[OA].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t,a,s,l,c,d,p,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=E}}const kh="(default)";class nc{constructor(e,t){this.projectId=e,this.database=t||kh}static empty(){return new nc("","")}get isDefaultDatabase(){return this.database===kh}isEqual(e){return e instanceof nc&&e.projectId===this.projectId&&e.database===this.database}}function $x(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Te(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="__type__",Kx="__max__",th={mapValue:{}},VA="__vector__",Uh="value";function cs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sy(n)?4:Qx(n)?9007199254740991:Yx(n)?10:11:Le(28295,{value:n})}function Ri(n,e){if(n===e)return!0;const t=cs(n);if(t!==cs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tc(n).isEqual(tc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=ls(s.timestampValue),d=ls(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return us(s.bytesValue).isEqual(us(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return Wt(s.geoPointValue.latitude)===Wt(l.geoPointValue.latitude)&&Wt(s.geoPointValue.longitude)===Wt(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return Wt(s.integerValue)===Wt(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=Wt(s.doubleValue),d=Wt(l.doubleValue);return c===d?Lh(c)===Lh(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return gl(n.arrayValue.values||[],e.arrayValue.values||[],Ri);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if(q0(c)!==q0(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ri(c[p],d[p])))return!1;return!0})(n,e);default:return Le(52216,{left:n})}}function rc(n,e){return(n.values||[]).find((t=>Ri(t,e)))!==void 0}function yl(n,e){if(n===e)return 0;const t=cs(n),a=cs(e);if(t!==a)return rt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return rt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Wt(l.integerValue||l.doubleValue),p=Wt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return $0(n.timestampValue,e.timestampValue);case 4:return $0(tc(n),tc(e));case 5:return Mg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=us(l),p=us(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=rt(d[g],p[g]);if(v!==0)return v}return rt(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=rt(Wt(l.latitude),Wt(c.latitude));return d!==0?d:rt(Wt(l.longitude),Wt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return K0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,C,L,z;const d=l.fields||{},p=c.fields||{},g=(S=d[Uh])==null?void 0:S.arrayValue,v=(C=p[Uh])==null?void 0:C.arrayValue,E=rt(((L=g==null?void 0:g.values)==null?void 0:L.length)||0,((z=v==null?void 0:v.values)==null?void 0:z.length)||0);return E!==0?E:K0(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===th.mapValue&&c===th.mapValue)return 0;if(l===th.mapValue)return 1;if(c===th.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const S=Mg(p[E],v[E]);if(S!==0)return S;const C=yl(d[p[E]],g[v[E]]);if(C!==0)return C}return rt(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function $0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return rt(n,e);const t=ls(n),a=ls(e),s=rt(t.seconds,a.seconds);return s!==0?s:rt(t.nanos,a.nanos)}function K0(n,e){const t=n.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=yl(t[s],a[s]);if(l)return l}return rt(t.length,a.length)}function vl(n){return Vg(n)}function Vg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const a=ls(t);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return us(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Oe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=Vg(l);return a+"]"})(n.arrayValue):"mapValue"in n?(function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of a)l?l=!1:s+=",",s+=`${c}:${Vg(t.fields[c])}`;return s+"}"})(n.mapValue):Le(61005,{value:n})}function hh(n){switch(cs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_d(n);return e?16+hh(e):16;case 5:return 2*n.stringValue.length;case 6:return us(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((s,l)=>s+hh(l)),0)})(n.arrayValue);case 10:case 11:return(function(a){let s=0;return ms(a.fields,((l,c)=>{s+=l.length+hh(c)})),s})(n.mapValue);default:throw Le(13486,{value:n})}}function Y0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Pg(n){return!!n&&"integerValue"in n}function Ay(n){return!!n&&"arrayValue"in n}function Q0(n){return!!n&&"nullValue"in n}function X0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dh(n){return!!n&&"mapValue"in n}function Yx(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[MA])==null?void 0:a.stringValue)===VA}function qu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ms(n.mapValue.fields,((t,a)=>e.mapValue.fields[t]=qu(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qu(n.arrayValue.values[t]);return e}return{...n}}function Qx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Kx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!dh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qu(t)}setAll(e){let t=Sn.emptyPath(),a={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,a,s),a={},s=[],t=d.popLast()}c?a[d.lastSegment()]=qu(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());dh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];dh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){ms(t,((s,l)=>e[s]=l));for(const s of a)delete e[s]}clone(){return new Wn(qu(this.value))}}function PA(n){const e=[];return ms(n.fields,((t,a)=>{const s=new Sn([t]);if(dh(a)){const l=PA(a.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,t,a,s,l,c,d){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new xn(e,0,je.min(),je.min(),je.min(),Wn.empty(),0)}static newFoundDocument(e,t,a,s){return new xn(e,1,t,je.min(),a,s,0)}static newNoDocument(e,t){return new xn(e,2,t,je.min(),je.min(),Wn.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,je.min(),je.min(),Wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t){this.position=e,this.inclusive=t}}function W0(n,e,t){let a=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?a=Oe.comparator(Oe.fromName(c.referenceValue),t.key):a=yl(c,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function J0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ri(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{}class sn extends LA{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new Jx(e,t,a):t==="array-contains"?new tO(e,a):t==="in"?new nO(e,a):t==="not-in"?new rO(e,a):t==="array-contains-any"?new iO(e,a):new sn(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new Zx(e,a):new eO(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(yl(t,this.value)):t!==null&&cs(this.value)===cs(t)&&this.matchesComparison(yl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zr extends LA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Zr(e,t)}matches(e){return kA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kA(n){return n.op==="and"}function UA(n){return Wx(n)&&kA(n)}function Wx(n){for(const e of n.filters)if(e instanceof Zr)return!1;return!0}function Lg(n){if(n instanceof sn)return n.field.canonicalString()+n.op.toString()+vl(n.value);if(UA(n))return n.filters.map((e=>Lg(e))).join(",");{const e=n.filters.map((t=>Lg(t))).join(",");return`${n.op}(${e})`}}function jA(n,e){return n instanceof sn?(function(a,s){return s instanceof sn&&a.op===s.op&&a.field.isEqual(s.field)&&Ri(a.value,s.value)})(n,e):n instanceof Zr?(function(a,s){return s instanceof Zr&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce(((l,c,d)=>l&&jA(c,s.filters[d])),!0):!1})(n,e):void Le(19439)}function zA(n){return n instanceof sn?(function(t){return`${t.field.canonicalString()} ${t.op} ${vl(t.value)}`})(n):n instanceof Zr?(function(t){return t.op.toString()+" {"+t.getFilters().map(zA).join(" ,")+"}"})(n):"Filter"}class Jx extends sn{constructor(e,t,a){super(e,t,a),this.key=Oe.fromName(a.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Zx extends sn{constructor(e,t){super(e,"in",t),this.keys=BA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class eO extends sn{constructor(e,t){super(e,"not-in",t),this.keys=BA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function BA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>Oe.fromName(a.referenceValue)))}class tO extends sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ay(t)&&rc(t.arrayValue,this.value)}}class nO extends sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&rc(this.value.arrayValue,t)}}class rO extends sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!rc(this.value.arrayValue,t)}}class iO extends sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ay(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>rc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,t=null,a=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Z0(n,e=null,t=[],a=[],s=null,l=null,c=null){return new aO(n,e,t,a,s,l,c)}function wy(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>Lg(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),vd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>vl(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>vl(a))).join(",")),e.Te=t}return e.Te}function Ry(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Xx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!J0(n.startAt,e.startAt)&&J0(n.endAt,e.endAt)}function kg(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t=null,a=[],s=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function sO(n,e,t,a,s,l,c,d){return new vc(n,e,t,a,s,l,c,d)}function Ed(n){return new vc(n)}function eb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oO(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function FA(n){return n.collectionGroup!==null}function Gu(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new un(Sn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new zh(l,a))})),t.has(Sn.keyField().canonicalString())||e.Ie.push(new zh(Sn.keyField(),a))}return e.Ie}function Ti(n){const e=Be(n);return e.Ee||(e.Ee=lO(e,Gu(n))),e.Ee}function lO(n,e){if(n.limitType==="F")return Z0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new zh(s.field,l)}));const t=n.endAt?new jh(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new jh(n.startAt.position,n.startAt.inclusive):null;return Z0(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function Ug(n,e){const t=n.filters.concat([e]);return new vc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jg(n,e,t){return new vc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Td(n,e){return Ry(Ti(n),Ti(e))&&n.limitType===e.limitType}function HA(n){return`${wy(Ti(n))}|lt:${n.limitType}`}function tl(n){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((s=>zA(s))).join(", ")}]`),vd(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>vl(s))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>vl(s))).join(",")),`Target(${a})`})(Ti(n))}; limitType=${n.limitType})`}function bd(n,e){return e.isFoundDocument()&&(function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):Oe.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(n,e)&&(function(a,s){for(const l of Gu(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(a,s){return!(a.startAt&&!(function(c,d,p){const g=W0(c,d,p);return c.inclusive?g<=0:g<0})(a.startAt,Gu(a),s)||a.endAt&&!(function(c,d,p){const g=W0(c,d,p);return c.inclusive?g>=0:g>0})(a.endAt,Gu(a),s))})(n,e)}function uO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qA(n){return(e,t)=>{let a=!1;for(const s of Gu(n)){const l=cO(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function cO(n,e,t){const a=n.field.isKeyField()?Oe.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?yl(p,g):Le(42886)})(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return Le(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ms(this.inner,((t,a)=>{for(const[s,l]of a)e(s,l)}))}isEmpty(){return CA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=new Ft(Oe.comparator);function aa(){return fO}const GA=new Ft(Oe.comparator);function ku(...n){let e=GA;for(const t of n)e=e.insert(t.key,t);return e}function $A(n){let e=GA;return n.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function Ys(){return $u()}function KA(){return $u()}function $u(){return new oo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const hO=new Ft(Oe.comparator),dO=new un(Oe.comparator);function it(...n){let e=dO;for(const t of n)e=e.add(t);return e}const mO=new un(rt);function pO(){return mO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function YA(n){return{integerValue:""+n}}function gO(n,e){return Bx(e)?YA(e):Cy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this._=void 0}}function yO(n,e,t){return n instanceof Bh?(function(s,l){const c={fields:{[NA]:{stringValue:DA},[OA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Sy(l)&&(l=_d(l)),l&&(c.fields[xA]=l),{mapValue:c}})(t,e):n instanceof ic?XA(n,e):n instanceof ac?WA(n,e):(function(s,l){const c=QA(s,l),d=tb(c)+tb(s.Ae);return Pg(c)&&Pg(s.Ae)?YA(d):Cy(s.serializer,d)})(n,e)}function vO(n,e,t){return n instanceof ic?XA(n,e):n instanceof ac?WA(n,e):t}function QA(n,e){return n instanceof Fh?(function(a){return Pg(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class Bh extends Sd{}class ic extends Sd{constructor(e){super(),this.elements=e}}function XA(n,e){const t=JA(e);for(const a of n.elements)t.some((s=>Ri(s,a)))||t.push(a);return{arrayValue:{values:t}}}class ac extends Sd{constructor(e){super(),this.elements=e}}function WA(n,e){let t=JA(e);for(const a of n.elements)t=t.filter((s=>!Ri(s,a)));return{arrayValue:{values:t}}}class Fh extends Sd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function tb(n){return Wt(n.integerValue||n.doubleValue)}function JA(n){return Ay(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _O(n,e){return n.field.isEqual(e.field)&&(function(a,s){return a instanceof ic&&s instanceof ic||a instanceof ac&&s instanceof ac?gl(a.elements,s.elements,Ri):a instanceof Fh&&s instanceof Fh?Ri(a.Ae,s.Ae):a instanceof Bh&&s instanceof Bh})(n.transform,e.transform)}class EO{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ad{}function ZA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Iy(n.key,_r.none()):new _c(n.key,n.data,_r.none());{const t=n.data,a=Wn.empty();let s=new un(Sn.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?a.delete(l):a.set(l,c),s=s.add(l)}return new ps(n.key,a,new gr(s.toArray()),_r.none())}}function TO(n,e,t){n instanceof _c?(function(s,l,c){const d=s.value.clone(),p=rb(s.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof ps?(function(s,l,c){if(!mh(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=rb(s.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(ew(s)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ku(n,e,t,a){return n instanceof _c?(function(l,c,d,p){if(!mh(l.precondition,c))return d;const g=l.value.clone(),v=ib(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,a):n instanceof ps?(function(l,c,d,p){if(!mh(l.precondition,c))return d;const g=ib(l.fieldTransforms,p,c),v=c.data;return v.setAll(ew(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,a):(function(l,c,d){return mh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function bO(n,e){let t=null;for(const a of n.fieldTransforms){const s=e.data.field(a.field),l=QA(a.transform,s||null);l!=null&&(t===null&&(t=Wn.empty()),t.set(a.field,l))}return t||null}function nb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&gl(a,s,((l,c)=>_O(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _c extends Ad{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ps extends Ad{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ew(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}})),e}function rb(n,e,t){const a=new Map;ht(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,d=e.data.field(l.field);a.set(l.field,vO(c,d,t[s]))}return a}function ib(n,e,t){const a=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);a.set(s.field,yO(l,c,e))}return a}class Iy extends Ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SO extends Ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&TO(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Ku(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Ku(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=KA();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const p=ZA(c,d);p!==null&&a.set(s.key,p),c.isValidDocument()||c.convertToNoDocument(je.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),it())}isEqual(e){return this.batchId===e.batchId&&gl(this.mutations,e.mutations,((t,a)=>nb(t,a)))&&gl(this.baseMutations,e.baseMutations,((t,a)=>nb(t,a)))}}class Dy{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){ht(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let s=(function(){return hO})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,a[c].version);return new Dy(e,t,a,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,st;function CO(n){switch(n){case ue.OK:return Le(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Le(15467,{code:n})}}function tw(n){if(n===void 0)return ia("GRPC error has no .code"),ue.UNKNOWN;switch(n){case an.OK:return ue.OK;case an.CANCELLED:return ue.CANCELLED;case an.UNKNOWN:return ue.UNKNOWN;case an.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case an.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case an.INTERNAL:return ue.INTERNAL;case an.UNAVAILABLE:return ue.UNAVAILABLE;case an.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case an.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case an.NOT_FOUND:return ue.NOT_FOUND;case an.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case an.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case an.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case an.ABORTED:return ue.ABORTED;case an.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case an.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case an.DATA_LOSS:return ue.DATA_LOSS;default:return Le(39323,{code:n})}}(st=an||(an={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=new is([4294967295,4294967295],0);function ab(n){const e=IO().encode(n),t=new gA;return t.update(e),new Uint8Array(t.digest())}function sb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new is([t,a],0),new is([s,l],0)]}class Ny{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new Uu(`Invalid padding: ${t}`);if(a<0)throw new Uu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Uu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new Uu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=is.fromNumber(this.ge)}ye(e,t,a){let s=e.add(t.multiply(is.fromNumber(a)));return s.compare(DO)===1&&(s=new is([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ab(e),[a,s]=sb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);if(!this.we(c))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ny(l,s,t);return a.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=ab(e),[a,s]=sb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class Uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new wd(je.min(),s,new Ft(rt),aa(),it())}}class Ec{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Ec(a,t,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t,a,s){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=s}}class nw{constructor(e,t){this.targetId=e,this.Ce=t}}class rw{constructor(e,t,a=An.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class ob{constructor(){this.ve=0,this.Fe=lb(),this.Me=An.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=it(),t=it(),a=it();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:Le(38017,{changeType:l})}})),new Ec(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=lb()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class NO{constructor(e){this.Ge=e,this.ze=new Map,this.je=aa(),this.He=nh(),this.Je=nh(),this.Ze=new Ft(rt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,a=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(kg(l))if(a===0){const c=new Oe(l.path);this.et(t,c,xn.newNoDocument(c,je.min()))}else ht(a===1,20013,{expectedCount:a});else{const c=this._t(t);if(c!==a){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=us(a).toUint8Array()}catch(p){if(p instanceof IA)return pl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Ny(c,s,l)}catch(p){return pl(p instanceof Uu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let s=0;return a.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&kg(d.target)){const p=new Oe(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,xn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let a=it();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(a=a.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new wd(e,t,this.Ze,this.je,a);return this.je=aa(),this.He=nh(),this.Je=nh(),this.Ze=new Ft(rt),s}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new ob,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new un(rt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new un(rt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ob),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nh(){return new Ft(Oe.comparator)}function lb(){return new Ft(Oe.comparator)}const xO={asc:"ASCENDING",desc:"DESCENDING"},OO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MO={and:"AND",or:"OR"};class VO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zg(n,e){return n.useProto3Json||vd(e)?e:{value:e}}function Hh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function PO(n,e){return Hh(n,e.toTimestamp())}function bi(n){return ht(!!n,49232),je.fromTimestamp((function(t){const a=ls(t);return new Mt(a.seconds,a.nanos)})(n))}function xy(n,e){return Bg(n,e).canonicalString()}function Bg(n,e){const t=(function(s){return new Dt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function aw(n){const e=Dt.fromString(n);return ht(cw(e),10190,{key:e.toString()}),e}function Fg(n,e){return xy(n.databaseId,e.path)}function cg(n,e){const t=aw(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(ow(t))}function sw(n,e){return xy(n.databaseId,e)}function LO(n){const e=aw(n);return e.length===4?Dt.emptyPath():ow(e)}function Hg(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ow(n){return ht(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ub(n,e,t){return{name:Fg(n,e),fields:t.value.mapValue.fields}}function kO(n,e){let t;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Le(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(ht(v===void 0||typeof v=="string",58123),An.fromBase64String(v||"")):(ht(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),An.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?ue.UNKNOWN:tw(g.code);return new Te(v,g.message||"")})(c);t=new rw(a,s,l,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=cg(n,a.document.name),l=bi(a.document.updateTime),c=a.document.createTime?bi(a.document.createTime):je.min(),d=new Wn({mapValue:{fields:a.document.fields}}),p=xn.newFoundDocument(s,l,c,d),g=a.targetIds||[],v=a.removedTargetIds||[];t=new ph(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=cg(n,a.document),l=a.readTime?bi(a.readTime):je.min(),c=xn.newNoDocument(s,l),d=a.removedTargetIds||[];t=new ph([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=cg(n,a.document),l=a.removedTargetIds||[];t=new ph([],l,s,null)}else{if(!("filter"in e))return Le(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,c=new RO(s,l),d=a.targetId;t=new nw(d,c)}}return t}function UO(n,e){let t;if(e instanceof _c)t={update:ub(n,e.key,e.value)};else if(e instanceof Iy)t={delete:Fg(n,e.key)};else if(e instanceof ps)t={update:ub(n,e.key,e.data),updateMask:KO(e.fieldMask)};else{if(!(e instanceof SO))return Le(16599,{dt:e.type});t={verify:Fg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,c){const d=c.transform;if(d instanceof Bh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ic)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ac)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Fh)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Le(20930,{transform:c.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:PO(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Le(27497)})(n,e.precondition)),t}function jO(n,e){return n&&n.length>0?(ht(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?bi(s.updateTime):bi(l);return c.isEqual(je.min())&&(c=bi(l)),new EO(c,s.transformResults||[])})(t,e)))):[]}function zO(n,e){return{documents:[sw(n,e.path)]}}function BO(n,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=sw(n,s);const l=(function(g){if(g.length!==0)return uw(Zr.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(S){return{field:nl(S.field),direction:qO(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=zg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:s}}function FO(n){let e=LO(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){ht(a===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=lw(E);return S instanceof Zr&&UA(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(L){return new zh(rl(L.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,vd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,C=E.values||[];return new jh(C,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,C=E.values||[];return new jh(C,S)})(t.endAt)),sO(e,s,c,l,d,"F",p,g)}function HO(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=rl(t.unaryFilter.field);return sn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=rl(t.unaryFilter.field);return sn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=rl(t.unaryFilter.field);return sn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=rl(t.unaryFilter.field);return sn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(n):n.fieldFilter!==void 0?(function(t){return sn.create(rl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Zr.create(t.compositeFilter.filters.map((a=>lw(a))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(n):Le(30097,{filter:n})}function qO(n){return xO[n]}function GO(n){return OO[n]}function $O(n){return MO[n]}function nl(n){return{fieldPath:n.canonicalString()}}function rl(n){return Sn.fromServerFormat(n.fieldPath)}function uw(n){return n instanceof sn?(function(t){if(t.op==="=="){if(X0(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NAN"}};if(Q0(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(X0(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NOT_NAN"}};if(Q0(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nl(t.field),op:GO(t.op),value:t.value}}})(n):n instanceof Zr?(function(t){const a=t.getFilters().map((s=>uw(s)));return a.length===1?a[0]:{compositeFilter:{op:$O(t.op),filters:a}}})(n):Le(54877,{filter:n})}function KO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function cw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function fw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t,a,s,l=je.min(),c=je.min(),d=An.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.yt=e}}function QO(n){const e=FO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.Sn=new WO}addToCollectionParentIndex(e,t){return this.Sn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(os.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(os.min())}updateCollectionGroup(e,t,a){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class WO{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new un(Dt.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new un(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hw=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(hw,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new _l(0)}static ar(){return new _l(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="LruGarbageCollector",JO=1048576;function hb([n,e],[t,a]){const s=rt(n,t);return s===0?rt(e,a):s}class ZO{constructor(e){this.Pr=e,this.buffer=new un(hb),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();hb(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eM{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Se(fb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xl(t)?Se(fb,"Ignoring IndexedDB error during garbage collection: ",t):await Nl(t)}await this.Ar(3e5)}))}}class tM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(yd.ce);const a=new ZO(t);return this.Vr.forEachTarget(e,(s=>a.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>a.Er(s))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(cb)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cb):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,s,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(a=E,d=Date.now(),this.removeTargets(e,a,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(g=Date.now(),el()<=nt.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function nM(n,e){return new tM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.changes=new oo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?fe.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(a=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(a!==null&&Ku(a.mutation,s,gr.empty(),Mt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,it()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=it()){const s=Ys();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,a).next((l=>{let c=ku();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const a=Ys();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,it())))}populateOverlays(e,t,a){const s=[];return a.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,a,s){let l=aa();const c=$u(),d=(function(){return $u()})();return t.forEach(((p,g)=>{const v=a.get(g.key);s.has(g.key)&&(v===void 0||v.mutation instanceof ps)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Ku(v.mutation,g,v.mutation.getFieldMask(),Mt.now())):c.set(g.key,gr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new iM(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const a=$u();let s=new Ft(((c,d)=>c-d)),l=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=a.get(p)||gr.empty();v=d.applyToLocalView(g,v),a.set(p,v);const E=(s.get(d.batchId)||it()).add(p);s=s.insert(d.batchId,E)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,E=KA();v.forEach((S=>{if(!l.has(S)){const C=ZA(t.get(S),a.get(S));C!==null&&E.set(S,C),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return fe.waitFor(c)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,s){return oO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):FA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):fe.resolve(Ys());let d=ec,p=l;return c.next((g=>fe.forEach(g,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?fe.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,it()))).next((v=>({batchId:d,changes:$A(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next((a=>{let s=ku();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let c=ku();return this.indexManager.getCollectionParents(e,l).next((d=>fe.forEach(d,(p=>{const g=(function(E,S){return new vc(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,a,s).next((v=>{v.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,xn.newInvalidDocument(v)))}));let d=ku();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Ku(v.mutation,g,gr.empty(),Mt.now()),bd(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return fe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:bi(s.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:QO(s.bundledQuery),readTime:bi(s.readTime)}})(t)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.overlays=new Ft(Oe.comparator),this.Lr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Ys();return fe.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((s,l)=>{this.bt(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.Lr.get(a);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),fe.resolve()}getOverlaysForCollection(e,t,a){const s=Ys(),l=t.length+1,c=new Oe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>a&&s.set(p.getKey(),p)}return fe.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new Ft(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let v=l.get(g.largestBatchId);v===null&&(v=Ys(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Ys(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=s)););return fe.resolve(d)}bt(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(a.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(a.key,new wO(t,a));let l=this.Lr.get(t);l===void 0&&(l=it(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this.kr=new un(mn.Kr),this.qr=new un(mn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new mn(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new mn(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new Oe(new Dt([])),a=new mn(t,e),s=new mn(t,e+1),l=[];return this.qr.forEachInRange([a,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Oe(new Dt([])),a=new mn(t,e),s=new mn(t,e+1);let l=it();return this.qr.forEachInRange([a,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new mn(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class mn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Oe.comparator(e.key,t.key)||rt(e.Hr,t.Hr)}static Ur(e,t){return rt(e.Hr,t.Hr)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new un(mn.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new AO(l,t,a,s);this.mutationQueue.push(c);for(const d of s)this.Jr=this.Jr.add(new mn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.Xr(a),l=s<0?0:s;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?by:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new mn(t,0),s=new mn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,s],(c=>{const d=this.Zr(c.Hr);l.push(d)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new un(rt);return t.forEach((s=>{const l=new mn(s,0),c=new mn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{a=a.add(d.Hr)}))})),fe.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;Oe.isDocumentKey(l)||(l=l.child(""));const c=new mn(new Oe(l),0);let d=new un(rt);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!a.isPrefixOf(g)&&(g.length===s&&(d=d.add(p.Hr)),!0)}),c),fe.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((a=>{const s=this.Zr(a);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ht(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return fe.forEach(t.mutations,(s=>{const l=new mn(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new mn(t,0),s=this.Jr.firstAfterOrEqual(a);return fe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.ti=e,this.docs=(function(){return new Ft(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return fe.resolve(a?a.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let a=aa();return t.forEach((s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():xn.newInvalidDocument(s))})),fe.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=aa();const c=t.path,d=new Oe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||kx(Lx(v),a)<=0||(s.has(v.key)||bd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,a,s){Le(9500)}ni(e,t){return fe.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new fM(this)}getSize(e){return fe.resolve(this.size)}}class fM extends rM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(a)})),fe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.persistence=e,this.ri=new oo((t=>wy(t)),Ry),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.ii=0,this.si=new Oy,this.targetCount=0,this.oi=_l._r()}forEachTarget(e,t){return this.ri.forEach(((a,s)=>t(s))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),fe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new _l(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.lr(t),fe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&a.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),fe.waitFor(l).next((()=>s))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return fe.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),fe.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return fe.resolve(a)}containsKey(e,t){return fe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t){this._i={},this.overlays={},this.ai=new yd(0),this.ui=!1,this.ui=!0,this.ci=new lM,this.referenceDelegate=e(this),this.li=new hM(this),this.indexManager=new XO,this.remoteDocumentCache=(function(s){return new cM(s)})((a=>this.referenceDelegate.hi(a))),this.serializer=new YO(t),this.Pi=new sM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new uM(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){Se("MemoryPersistence","Starting transaction:",e);const s=new dM(this.ai.next());return this.referenceDelegate.Ti(),a(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return fe.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class dM extends jx{constructor(e){super(),this.currentSequenceNumber=e}}class My{constructor(e){this.persistence=e,this.Ri=new Oy,this.Ai=null}static Vi(e){return new My(e)}get di(){if(this.Ai)return this.Ai;throw Le(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),fe.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(a=>{const s=Oe.fromPath(a);return this.mi(e,s).next((l=>{l||t.removeEntry(s,je.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class qh{constructor(e,t){this.persistence=e,this.fi=new oo((a=>Fx(a.path)),((a,s)=>a.isEqual(s))),this.garbageCollector=nM(this,t)}static Vi(e,t){return new qh(e,t)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return fe.forEach(this.fi,((a,s)=>this.wr(e,a,s).next((l=>l?fe.resolve():t(s)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(a++,l.removeEntry(c,je.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hh(e.data.value)),t}wr(e,t,a){return fe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return fe.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=s}static Es(e,t){let a=it(),s=it();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Vy(e,t.fromCache,a,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return a2()?8:zx(On())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,a).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new mM;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,a,s){return a.documentReadCount<this.Vs?(el()<=nt.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",tl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(el()<=nt.DEBUG&&Se("QueryEngine","Query:",tl(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.ds*s?(el()<=nt.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",tl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(t))):fe.resolve())}gs(e,t){if(eb(t))return fe.resolve(null);let a=Ti(t);return this.indexManager.getIndexType(e,a).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=jg(t,null,"F"),a=Ti(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const c=it(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,a).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,jg(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,a,s){return eb(t)||s.isEqual(je.min())?fe.resolve(null):this.fs.getDocuments(e,a).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,a,s)?fe.resolve(null):(el()<=nt.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),tl(t)),this.Ds(e,c,t,Px(s,ec)).next((d=>d)))}))}bs(e,t){let a=new un(qA(e));return t.forEach(((s,l)=>{bd(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,a){return el()<=nt.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",tl(t)),this.fs.getDocumentsMatchingQuery(e,t,os.min(),a)}Ds(e,t,a,s){return this.fs.getDocumentsMatchingQuery(e,a,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="LocalStore",gM=3e8;class yM{constructor(e,t,a,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new Ft(rt),this.Fs=new oo((l=>wy(l)),Ry),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function vM(n,e,t,a){return new yM(n,e,t,a)}async function mw(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const c=[],d=[];let p=it();for(const g of s){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(a,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function _M(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const E=g.batch,S=E.keys();let C=fe.resolve();return S.forEach((L=>{C=C.next((()=>v.getEntry(p,L))).next((z=>{const M=g.docVersions.get(L);ht(M!==null,48541),z.version.compareTo(M)<0&&(E.applyToRemoteDocument(z,g),z.isValidDocument()&&(z.setReadTime(g.commitVersion),v.addEntry(z)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(d){let p=it();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(a,s)))}))}function pw(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function EM(n,e){const t=Be(n),a=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const S=s.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,E))));let C=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(An.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,a)),s=s.insert(E,C),(function(z,M,G){return z.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=gM?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(S,C,v)&&d.push(t.li.updateTargetData(l,C))}));let p=aa(),g=it();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(TM(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!a.isEqual(je.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));d.push(v)}return fe.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=s,l)))}function TM(n,e,t){let a=it(),s=it();return t.forEach((l=>a=a.add(l))),e.getEntries(n,a).next((l=>{let c=aa();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),p.isNoDocument()&&p.version.isEqual(je.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Se(Py,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:s}}))}function bM(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=by),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function SM(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let s;return t.li.getTargetData(a,e).next((l=>l?(s=l,fe.resolve(s)):t.li.allocateTargetId(a).next((c=>(s=new Za(e,c,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,s).next((()=>s)))))))})).then((a=>{const s=t.vs.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function qg(n,e,t){const a=Be(n),s=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(c=>a.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!xl(c))throw c;Se(Py,`Failed to update sequence numbers for target ${e}: ${c}`)}a.vs=a.vs.remove(e),a.Fs.delete(s.target)}function db(n,e,t){const a=Be(n);let s=je.min(),l=it();return a.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const E=Be(p),S=E.Fs.get(v);return S!==void 0?fe.resolve(E.vs.get(S)):E.li.getTargetData(g,v)})(a,c,Ti(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>a.Cs.getDocumentsMatchingQuery(c,e,t?s:je.min(),t?l:it()))).next((d=>(AM(a,uO(e),d),{documents:d,ks:l})))))}function AM(n,e,t){let a=n.Ms.get(e)||je.min();t.forEach(((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),n.Ms.set(e,a)}class mb{constructor(){this.activeTargetIds=pO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wM{constructor(){this.vo=new mb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new mb,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="ConnectivityMonitor";class gb{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Se(pb,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Se(pb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function Gg(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="RestConnection",CM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class IM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${s}`,this.$o=this.databaseId.database===kh?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Wo(e,t,a,s,l){const c=Gg(),d=this.Qo(e,t.toUriEncodedString());Se(fg,`Sending RPC '${e}' ${c}:`,d,a);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,s,l);const{host:g}=new URL(d),v=Cl(g);return this.zo(e,d,p,a,v).then((E=>(Se(fg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw pl(fg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",a),E}))}jo(e,t,a,s,l,c){return this.Wo(e,t,a,s,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),a&&a.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const a=CM[e];let s=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection",Mu=(n,e,t)=>{n.listen(e,(a=>{try{t(a)}catch(s){setTimeout((()=>{throw s}),0)}}))};class ll extends IM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ll.c_){const e=EA();Mu(e,_A.STAT_EVENT,(t=>{t.stat===Og.PROXY?Se(In,"STAT_EVENT: detected buffering proxy"):t.stat===Og.NOPROXY&&Se(In,"STAT_EVENT: detected no buffering proxy")})),ll.c_=!0}}zo(e,t,a,s,l){const c=Gg();return new Promise(((d,p)=>{const g=new yA;g.setWithCredentials(!0),g.listenOnce(vA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case fh.NO_ERROR:const E=g.getResponseJson();Se(In,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case fh.TIMEOUT:Se(In,`RPC '${e}' ${c} timed out`),p(new Te(ue.DEADLINE_EXCEEDED,"Request time out"));break;case fh.HTTP_ERROR:const S=g.getStatus();if(Se(In,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const L=C==null?void 0:C.error;if(L&&L.status&&L.message){const z=(function(G){const q=G.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(q)>=0?q:ue.UNKNOWN})(L.status);p(new Te(z,L.message))}else p(new Te(ue.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Te(ue.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Se(In,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(s);Se(In,`RPC '${e}' ${c} sending request:`,s),g.send(t,"POST",v,a,15)}))}T_(e,t,a){const s=Gg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,a),d.encodeInitMessageHeaders=!0;const g=l.join("");Se(In,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let E=!1,S=!1;const C=new DM({Ho:L=>{S?Se(In,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(E||(Se(In,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),Se(In,`RPC '${e}' stream ${s} sending:`,L),v.send(L))},Jo:()=>v.close()});return Mu(v,Lu.EventType.OPEN,(()=>{S||(Se(In,`RPC '${e}' stream ${s} transport opened.`),C.i_())})),Mu(v,Lu.EventType.CLOSE,(()=>{S||(S=!0,Se(In,`RPC '${e}' stream ${s} transport closed`),C.o_(),this.E_(v))})),Mu(v,Lu.EventType.ERROR,(L=>{S||(S=!0,pl(In,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),C.o_(new Te(ue.UNAVAILABLE,"The operation could not be completed")))})),Mu(v,Lu.EventType.MESSAGE,(L=>{var z;if(!S){const M=L.data[0];ht(!!M,16349);const G=M,q=(G==null?void 0:G.error)||((z=G[0])==null?void 0:z.error);if(q){Se(In,`RPC '${e}' stream ${s} received error:`,q);const K=q.status;let Z=(function(b){const A=an[b];if(A!==void 0)return tw(A)})(K),se=q.message;Z===void 0&&(Z=ue.INTERNAL,se="Unknown error status: "+K+" with message "+q.message),S=!0,C.o_(new Te(Z,se)),v.close()}else Se(In,`RPC '${e}' stream ${s} received:`,M),C.__(M)}})),ll.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return TA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(n){return new ll(n)}function hg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(n){return new VO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ll.c_=!1;class gw{constructor(e,t,a=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-a);s>0&&Se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="PersistentStream";class yw{constructor(e,t,a,s,l,c,d,p){this.Ci=e,this.b_=a,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(ia(t.toString()),ia("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,s])=>{this.D_===t&&this.G_(a,s)}),(a=>{e((()=>{const s=new Te(ue.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(s)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{a((()=>this.z_(s)))})),this.stream.onMessage((s=>{a((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(yb,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Se(yb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xM extends yw{constructor(e,t,a,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=kO(this.serializer,e),a=(function(l){if(!("targetChange"in l))return je.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?je.min():c.readTime?bi(c.readTime):je.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=Hg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=kg(p)?{documents:zO(l,p)}:{query:BO(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=iw(l,c.resumeToken);const g=zg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(je.min())>0){d.readTime=Hh(l,c.snapshotVersion.toTimestamp());const g=zg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const a=HO(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=Hg(this.serializer),t.removeTarget=e,this.K_(t)}}class OM extends yw{constructor(e,t,a,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=jO(e.writeResults,e.commitTime),a=bi(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=Hg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>UO(this.serializer,a)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{}class VM extends MM{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Bg(t,a),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(ue.UNKNOWN,l.toString())}))}jo(e,t,a,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,Bg(t,a),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(ue.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function PM(n,e,t,a){return new VM(n,e,t,a)}class LM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ia(t),this.aa=!1):Se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="RemoteStore";class kM{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{a.enqueueAndForget((async()=>{lo(this)&&(Se(ro,"Restarting streams for network reachability change."),await(async function(p){const g=Be(p);g.Ea.add(4),await Tc(g),g.Va.set("Unknown"),g.Ea.delete(4),await Cd(g)})(this))}))})),this.Va=new LM(a,s)}}async function Cd(n){if(lo(n))for(const e of n.Ra)await e(!0)}async function Tc(n){for(const e of n.Ra)await e(!1)}function vw(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),jy(t)?Uy(t):Ol(t).O_()&&ky(t,e))}function Ly(n,e){const t=Be(n),a=Ol(t);t.Ia.delete(e),a.O_()&&_w(t,e),t.Ia.size===0&&(a.O_()?a.L_():lo(t)&&t.Va.set("Unknown"))}function ky(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ol(n).Z_(e)}function _w(n,e){n.da.$e(e),Ol(n).X_(e)}function Uy(n){n.da=new NO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ol(n).start(),n.Va.ua()}function jy(n){return lo(n)&&!Ol(n).x_()&&n.Ia.size>0}function lo(n){return Be(n).Ea.size===0}function Ew(n){n.da=void 0}async function UM(n){n.Va.set("Online")}async function jM(n){n.Ia.forEach(((e,t)=>{ky(n,e)}))}async function zM(n,e){Ew(n),jy(n)?(n.Va.ha(e),Uy(n)):n.Va.set("Unknown")}async function BM(n,e,t){if(n.Va.set("Online"),e instanceof rw&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(a){Se(ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Gh(n,a)}else if(e instanceof ph?n.da.Xe(e):e instanceof nw?n.da.st(e):n.da.tt(e),!t.isEqual(je.min()))try{const a=await pw(n.localStore);t.compareTo(a)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(An.EMPTY_BYTE_STRING,v.snapshotVersion)),_w(l,p);const E=new Za(v.target,p,g,v.sequenceNumber);ky(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(a){Se(ro,"Failed to raise snapshot:",a),await Gh(n,a)}}async function Gh(n,e,t){if(!xl(e))throw e;n.Ea.add(1),await Tc(n),n.Va.set("Offline"),t||(t=()=>pw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Se(ro,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Cd(n)}))}function Tw(n,e){return e().catch((t=>Gh(n,t,e)))}async function Id(n){const e=Be(n),t=fs(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:by;for(;FM(e);)try{const s=await bM(e.localStore,a);if(s===null){e.Ta.length===0&&t.L_();break}a=s.batchId,HM(e,s)}catch(s){await Gh(e,s)}bw(e)&&Sw(e)}function FM(n){return lo(n)&&n.Ta.length<10}function HM(n,e){n.Ta.push(e);const t=fs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function bw(n){return lo(n)&&!fs(n).x_()&&n.Ta.length>0}function Sw(n){fs(n).start()}async function qM(n){fs(n).ra()}async function GM(n){const e=fs(n);for(const t of n.Ta)e.ea(t.mutations)}async function $M(n,e,t){const a=n.Ta.shift(),s=Dy.from(a,e,t);await Tw(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Id(n)}async function KM(n,e){e&&fs(n).Y_&&await(async function(a,s){if((function(c){return CO(c)&&c!==ue.ABORTED})(s.code)){const l=a.Ta.shift();fs(a).B_(),await Tw(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Id(a)}})(n,e),bw(n)&&Sw(n)}async function vb(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),Se(ro,"RemoteStore received new credentials");const a=lo(t);t.Ea.add(3),await Tc(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Cd(t)}async function YM(n,e){const t=Be(n);e?(t.Ea.delete(2),await Cd(t)):e||(t.Ea.add(2),await Tc(t),t.Va.set("Unknown"))}function Ol(n){return n.ma||(n.ma=(function(t,a,s){const l=Be(t);return l.sa(),new xM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:UM.bind(null,n),Yo:jM.bind(null,n),t_:zM.bind(null,n),J_:BM.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),jy(n)?Uy(n):n.Va.set("Unknown")):(await n.ma.stop(),Ew(n))}))),n.ma}function fs(n){return n.fa||(n.fa=(function(t,a,s){const l=Be(t);return l.sa(),new OM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:qM.bind(null,n),t_:KM.bind(null,n),ta:GM.bind(null,n),na:$M.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Id(n)):(await n.fa.stop(),n.Ta.length>0&&(Se(ro,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const c=Date.now()+a,d=new zy(e,t,c,s,l);return d.start(a),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function By(n,e){if(ia("AsyncQueue",`${e}: ${n}`),xl(n))return new Te(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{static emptySet(e){return new ul(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Oe.comparator(t.key,a.key):(t,a)=>Oe.comparator(t.key,a.key),this.keyedMap=ku(),this.sortedSet=new Ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ul)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new ul;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.ga=new Ft(Oe.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class El{constructor(e,t,a,s,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new El(e,t,ul.emptySet(t),c,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class XM{constructor(){this.queries=Eb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const s=Be(t),l=s.queries;s.queries=Eb(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(a)}))})(this,new Te(ue.ABORTED,"Firestore shutting down"))}}function Eb(){return new oo((n=>HA(n)),Td)}async function Fy(n,e){const t=Be(n);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(a=2):(l=new QM,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=By(c,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&qy(t)}async function Hy(n,e){const t=Be(n),a=e.query;let s=3;const l=t.queries.get(a);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function WM(n,e){const t=Be(n);let a=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(s)&&(a=!0);c.wa=s}}a&&qy(t)}function JM(n,e,t){const a=Be(n),s=a.queries.get(e);if(s)for(const l of s.ba)l.onError(t);a.queries.delete(e)}function qy(n){n.Ca.forEach((e=>{e.next()}))}var $g,Tb;(Tb=$g||($g={})).Ma="default",Tb.Cache="cache";class Gy{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new El(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=El.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$g.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.key=e}}class ww{constructor(e){this.key=e}}class ZM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=it(),this.mutatedKeys=it(),this.eu=qA(e),this.tu=new ul(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new _b,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,E)=>{const S=s.get(v),C=bd(this.query,E)?E:null,L=!!S&&this.mutatedKeys.has(S.key),z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let M=!1;S&&C?S.data.isEqual(C.data)?L!==z&&(a.track({type:3,doc:C}),M=!0):this.su(S,C)||(a.track({type:2,doc:C}),M=!0,(p&&this.eu(C,p)>0||g&&this.eu(C,g)<0)&&(d=!0)):!S&&C?(a.track({type:0,doc:C}),M=!0):S&&!C&&(a.track({type:1,doc:S}),M=!0,(p||g)&&(d=!0)),M&&(C?(c=c.add(C),l=z?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),a.track({type:1,doc:v})}return{tu:c,iu:a,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(C,L){const z=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Vt:M})}};return z(C)-z(L)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(a),s=s??!1;const d=t&&!s?this._u():[],p=this.Ya.size===0&&this.current&&!s?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new El(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _b,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=it(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new ww(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new Aw(a))})),t}cu(e){this.Za=e.ks,this.Ya=it();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return El.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const $y="SyncEngine";class eV{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class tV{constructor(e){this.key=e,this.hu=!1}}class nV{constructor(e,t,a,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new oo((d=>HA(d)),Td),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ft(Oe.comparator),this.Au=new Map,this.Vu=new Oy,this.du={},this.mu=new Map,this.fu=_l.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rV(n,e,t=!0){const a=xw(n);let s;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await Rw(a,e,t,!0),s}async function iV(n,e){const t=xw(n);await Rw(t,e,!0,!1)}async function Rw(n,e,t,a){const s=await SM(n.localStore,Ti(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return a&&(d=await aV(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&vw(n.remoteStore,s),d}async function aV(n,e,t,a,s){n.pu=(E,S,C)=>(async function(z,M,G,q){let K=M.view.ru(G);K.Ss&&(K=await db(z.localStore,M.query,!1).then((({documents:b})=>M.view.ru(b,K))));const Z=q&&q.targetChanges.get(M.targetId),se=q&&q.targetMismatches.get(M.targetId)!=null,Q=M.view.applyChanges(K,z.isPrimaryClient,Z,se);return Sb(z,M.targetId,Q.au),Q.snapshot})(n,E,S,C);const l=await db(n.localStore,e,!0),c=new ZM(e,l.ks),d=c.ru(l.documents),p=Ec.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",s),g=c.applyChanges(d,n.isPrimaryClient,p);Sb(n,t,g.au);const v=new eV(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function sV(n,e,t){const a=Be(n),s=a.Tu.get(e),l=a.Iu.get(s.targetId);if(l.length>1)return a.Iu.set(s.targetId,l.filter((c=>!Td(c,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await qg(a.localStore,s.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(s.targetId),t&&Ly(a.remoteStore,s.targetId),Kg(a,s.targetId)})).catch(Nl)):(Kg(a,s.targetId),await qg(a.localStore,s.targetId,!0))}async function oV(n,e){const t=Be(n),a=t.Tu.get(e),s=t.Iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),Ly(t.remoteStore,a.targetId))}async function lV(n,e,t){const a=pV(n);try{const s=await(function(c,d){const p=Be(c),g=Mt.now(),v=d.reduce(((C,L)=>C.add(L.key)),it());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let L=aa(),z=it();return p.xs.getEntries(C,v).next((M=>{L=M,L.forEach(((G,q)=>{q.isValidDocument()||(z=z.add(G))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,L))).next((M=>{E=M;const G=[];for(const q of d){const K=bO(q,E.get(q.key).overlayedDocument);K!=null&&G.push(new ps(q.key,K,PA(K.value.mapValue),_r.exists(!0)))}return p.mutationQueue.addMutationBatch(C,g,G,d)})).next((M=>{S=M;const G=M.applyToLocalDocumentSet(E,z);return p.documentOverlayCache.saveOverlays(C,M.batchId,G)}))})).then((()=>({batchId:S.batchId,changes:$A(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new Ft(rt)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(a,s.batchId,t),await bc(a,s.changes),await Id(a.remoteStore)}catch(s){const l=By(s,"Failed to persist write");t.reject(l)}}async function Cw(n,e){const t=Be(n);try{const a=await EM(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(ht(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?ht(c.hu,14607):s.removedDocuments.size>0&&(ht(c.hu,42227),c.hu=!1))})),await bc(t,a,e)}catch(a){await Nl(a)}}function bb(n,e,t){const a=Be(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const p=Be(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,E)=>{for(const S of E.ba)S.va(d)&&(g=!0)})),g&&qy(p)})(a.eventManager,e),s.length&&a.Pu.J_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function uV(n,e,t){const a=Be(n);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a.Au.get(e),l=s&&s.key;if(l){let c=new Ft(Oe.comparator);c=c.insert(l,xn.newNoDocument(l,je.min()));const d=it().add(l),p=new wd(je.min(),new Map,new Ft(rt),c,d);await Cw(a,p),a.Ru=a.Ru.remove(l),a.Au.delete(e),Ky(a)}else await qg(a.localStore,e,!1).then((()=>Kg(a,e,t))).catch(Nl)}async function cV(n,e){const t=Be(n),a=e.batch.batchId;try{const s=await _M(t.localStore,e);Dw(t,a,null),Iw(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await bc(t,s)}catch(s){await Nl(s)}}async function fV(n,e,t){const a=Be(n);try{const s=await(function(c,d){const p=Be(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(ht(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(a.localStore,e);Dw(a,e,t),Iw(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await bc(a,s)}catch(s){await Nl(s)}}function Iw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Dw(n,e,t){const a=Be(n);let s=a.du[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.du[a.currentUser.toKey()]=s}}function Kg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),t&&n.Pu.yu(a,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||Nw(n,a)}))}function Nw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Ly(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Ky(n))}function Sb(n,e,t){for(const a of t)a instanceof Aw?(n.Vu.addReference(a.key,e),hV(n,a)):a instanceof ww?(Se($y,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||Nw(n,a.key)):Le(19791,{wu:a})}function hV(n,e){const t=e.key,a=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(a)||(Se($y,"New document in limbo: "+t),n.Eu.add(a),Ky(n))}function Ky(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Oe(Dt.fromString(e)),a=n.fu.next();n.Au.set(a,new tV(t)),n.Ru=n.Ru.insert(t,a),vw(n.remoteStore,new Za(Ti(Ed(t.path)),a,"TargetPurposeLimboResolution",yd.ce))}}async function bc(n,e,t){const a=Be(n),s=[],l=[],c=[];a.Tu.isEmpty()||(a.Tu.forEach(((d,p)=>{c.push(a.pu(p,e,t).then((g=>{var v;if((g||t)&&a.isPrimaryClient){const E=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;a.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){s.push(g);const E=Vy.Es(p.targetId,g);l.push(E)}})))})),await Promise.all(c),a.Pu.J_(s),await(async function(p,g){const v=Be(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>fe.forEach(g,(S=>fe.forEach(S.Ts,(C=>v.persistence.referenceDelegate.addReference(E,S.targetId,C))).next((()=>fe.forEach(S.Is,(C=>v.persistence.referenceDelegate.removeReference(E,S.targetId,C)))))))))}catch(E){if(!xl(E))throw E;Se(Py,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const C=v.vs.get(S),L=C.snapshotVersion,z=C.withLastLimboFreeSnapshotVersion(L);v.vs=v.vs.insert(S,z)}}})(a.localStore,l))}async function dV(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){Se($y,"User change. New user:",e.toKey());const a=await mw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new Te(ue.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await bc(t,a.Ns)}}function mV(n,e){const t=Be(n),a=t.Au.get(e);if(a&&a.hu)return it().add(a.key);{let s=it();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function xw(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uV.bind(null,e),e.Pu.J_=WM.bind(null,e.eventManager),e.Pu.yu=JM.bind(null,e.eventManager),e}function pV(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fV.bind(null,e),e}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return vM(this.persistence,new pM,e.initialUser,this.serializer)}Cu(e){return new dw(My.Vi,this.serializer)}Du(e){return new wM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class gV extends $h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ht(this.persistence.referenceDelegate instanceof qh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new eM(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new dw((a=>qh.Vi(a,t)),this.serializer)}}class Yg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>bb(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=dV.bind(null,this.syncEngine),await YM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new XM})()}createDatastore(e){const t=Rd(e.databaseInfo.databaseId),a=NM(e.databaseInfo);return PM(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,s,l,c,d){return new kM(a,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>bb(this.syncEngine,t,0)),(function(){return gb.v()?new gb:new RM})())}createSyncEngine(e,t){return(function(s,l,c,d,p,g,v){const E=new nV(s,l,c,d,p,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Be(s);Se(ro,"RemoteStore shutting down."),l.Ea.add(5),await Tc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Yg.provider={build:()=>new Yg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ia("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class yV{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=s,this.user=Nn.UNAUTHENTICATED,this.clientId=Ty.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async c=>{Se(hs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(a,(c=>(Se(hs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=By(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function dg(n,e){n.asyncQueue.verifyOperationInProgress(),Se(hs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener((async s=>{a.isEqual(s)||(await mw(e.localStore,s),a=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Ab(n,e){n.asyncQueue.verifyOperationInProgress();const t=await vV(n);Se(hs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((a=>vb(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,s)=>vb(e.remoteStore,s))),n._onlineComponents=e}async function vV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Se(hs,"Using user provided OfflineComponentProvider");try{await dg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;pl("Error using user provided cache. Falling back to memory cache: "+t),await dg(n,new $h)}}else Se(hs,"Using default OfflineComponentProvider"),await dg(n,new gV(void 0));return n._offlineComponents}async function Ow(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Se(hs,"Using user provided OnlineComponentProvider"),await Ab(n,n._uninitializedComponentsProvider._online)):(Se(hs,"Using default OnlineComponentProvider"),await Ab(n,new Yg))),n._onlineComponents}function _V(n){return Ow(n).then((e=>e.syncEngine))}async function Kh(n){const e=await Ow(n),t=e.eventManager;return t.onListen=rV.bind(null,e.syncEngine),t.onUnlisten=sV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oV.bind(null,e.syncEngine),t}function EV(n,e,t,a){const s=new Yy(a),l=new Gy(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>Fy(await Kh(n),l))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>Hy(await Kh(n),l)))}}function TV(n,e,t={}){const a=new ta;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new Yy({next:S=>{v.Nu(),c.enqueueAndForget((()=>Hy(l,E)));const C=S.docs.has(d);!C&&S.fromCache?g.reject(new Te(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&S.fromCache&&p&&p.source==="server"?g.reject(new Te(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new Gy(Ed(d.path),v,{includeMetadataChanges:!0,Ka:!0});return Fy(l,E)})(await Kh(n),n.asyncQueue,e,t,a))),a.promise}function bV(n,e,t={}){const a=new ta;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new Yy({next:S=>{v.Nu(),c.enqueueAndForget((()=>Hy(l,E))),S.fromCache&&p.source==="server"?g.reject(new Te(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new Gy(d,v,{includeMetadataChanges:!0,Ka:!0});return Fy(l,E)})(await Kh(n),n.asyncQueue,e,t,a))),a.promise}function SV(n,e){const t=new ta;return n.asyncQueue.enqueueAndForget((async()=>lV(await _V(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV="ComponentProvider",wb=new Map;function wV(n,e,t,a,s){return new Gx(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,Mw(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="firestore.googleapis.com",Rb=!0;class Cb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vw,this.ssl=Rb}else this.host=e.host,this.ssl=e.ssl??Rb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JO)throw new Te(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mw(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dd{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Ax;switch(a.type){case"firstParty":return new Ix(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Te(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=wb.get(t);a&&(Se(AV,"Removing Datastore"),wb.delete(t),a.terminate())})(this),Promise.resolve()}}function RV(n,e,t,a={}){var g;n=vr(n,Dd);const s=Cl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(lA(`https://${d}`),uA("Firestore",!0)),l.host!==Vw&&l.host!==d&&pl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:s,emulatorOptions:a};if(!eo(p,c)&&(n._setSettings(p),a.mockUserToken)){let v,E;if(typeof a.mockUserToken=="string")v=a.mockUserToken,E=Nn.MOCK_USER;else{v=XN(a.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const S=a.mockUserToken.sub||a.mockUserToken.user_id;if(!S)throw new Te(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Nn(S)}n._authCredentials=new wx(new SA(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new uo(this.firestore,e,this._query)}}class Gt{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(yc(t,Gt._jsonSchema))return new Gt(e,a||null,new Oe(Dt.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:on("string",Gt._jsonSchemaVersion),referencePath:on("string")};class as extends uo{constructor(e,t,a){super(e,t,Ed(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new Oe(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function Nd(n,e,...t){if(n=cn(n),AA("collection","path",e),n instanceof Dd){const a=Dt.fromString(e,...t);return z0(a),new as(n,null,a)}{if(!(n instanceof Gt||n instanceof as))throw new Te(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Dt.fromString(e,...t));return z0(a),new as(n.firestore,null,a)}}function Ur(n,e,...t){if(n=cn(n),arguments.length===1&&(e=Ty.newId()),AA("doc","path",e),n instanceof Dd){const a=Dt.fromString(e,...t);return j0(a),new Gt(n,null,new Oe(a))}{if(!(n instanceof Gt||n instanceof as))throw new Te(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Dt.fromString(e,...t));return j0(a),new Gt(n.firestore,n instanceof as?n.converter:null,new Oe(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="AsyncQueue";class Db{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gw(this,"async_queue_retry"),this._c=()=>{const a=hg();a&&Se(Ib,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=hg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=hg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ta;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!xl(e))throw e;Se(Ib,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,ia("INTERNAL UNHANDLED ERROR: ",Nb(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=zy.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Le(47125,{Pc:Nb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Nb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ds extends Dd{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new Db,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Db(e),this._firestoreClient=void 0,await e}}}function CV(n,e){const t=typeof n=="object"?n:dA(),a=typeof n=="string"?n:kh,s=_y(t,"firestore").getImmediate({identifier:a});if(!s._initialized){const l=YN("firestore");l&&RV(s,...l)}return s}function Sc(n){if(n._terminated)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||IV(n),n._firestoreClient}function IV(n){var a,s,l,c;const e=n._freezeSettings(),t=wV(n._databaseId,((a=n._app)==null?void 0:a.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new yV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lr(An.fromBase64String(e))}catch(t){throw new Te(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lr(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yc(e,Lr._jsonSchema))return Lr.fromBase64String(e.bytes)}}Lr._jsonSchemaVersion="firestore/bytes/1.0",Lr._jsonSchema={type:on("string",Lr._jsonSchemaVersion),bytes:on("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Si._jsonSchemaVersion}}static fromJSON(e){if(yc(e,Si._jsonSchema))return new Si(e.latitude,e.longitude)}}Si._jsonSchemaVersion="firestore/geoPoint/1.0",Si._jsonSchema={type:on("string",Si._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yc(e,Wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Wr(e.vectorValues);throw new Te(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wr._jsonSchemaVersion="firestore/vectorValue/1.0",Wr._jsonSchema={type:on("string",Wr._jsonSchemaVersion),vectorValues:on("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=/^__.*__$/;class NV{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new ps(e,this.data,this.fieldMask,t,this.fieldTransforms):new _c(e,this.data,t,this.fieldTransforms)}}class Pw{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new ps(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{dataSource:n})}}class Xy{constructor(e,t,a,s,l,c){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Xy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Yh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Lw(this.dataSource)&&DV.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class xV{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Rd(e)}createContext(e,t,a,s=!1){return new Xy({dataSource:e,methodName:t,targetDoc:a,path:Sn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Od(n){const e=n._freezeSettings(),t=Rd(n._databaseId);return new xV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kw(n,e,t,a,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);Wy("Data must be an object, but it was:",c,a);const d=zw(a,c);let p,g;if(l.merge)p=new gr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=Tl(e,E,t);if(!c.contains(S))throw new Te(ue.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Hw(v,S)||v.push(S)}p=new gr(v),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new NV(new Wn(d),p,g)}class Md extends Qy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Md}}function Uw(n,e,t,a){const s=n.createContext(1,e,t);Wy("Data must be an object, but it was:",s,a);const l=[],c=Wn.empty();ms(a,((p,g)=>{const v=Fw(e,p,t);g=cn(g);const E=s.childContextForFieldPath(v);if(g instanceof Md)l.push(v);else{const S=Ac(g,E);S!=null&&(l.push(v),c.set(v,S))}}));const d=new gr(l);return new Pw(c,d,s.fieldTransforms)}function jw(n,e,t,a,s,l){const c=n.createContext(1,e,t),d=[Tl(e,a,t)],p=[s];if(l.length%2!=0)throw new Te(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Tl(e,l[S])),p.push(l[S+1]);const g=[],v=Wn.empty();for(let S=d.length-1;S>=0;--S)if(!Hw(g,d[S])){const C=d[S];let L=p[S];L=cn(L);const z=c.childContextForFieldPath(C);if(L instanceof Md)g.push(C);else{const M=Ac(L,z);M!=null&&(g.push(C),v.set(C,M))}}const E=new gr(g);return new Pw(v,E,c.fieldTransforms)}function OV(n,e,t,a=!1){return Ac(t,n.createContext(a?4:3,e))}function Ac(n,e){if(Bw(n=cn(n)))return Wy("Unsupported field value:",e,n),zw(n,e);if(n instanceof Qy)return(function(a,s){if(!Lw(s.dataSource))throw s.createError(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,s){const l=[];let c=0;for(const d of a){let p=Ac(d,s.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(a,s){if((a=cn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return gO(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Mt.fromDate(a);return{timestampValue:Hh(s.serializer,l)}}if(a instanceof Mt){const l=new Mt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Hh(s.serializer,l)}}if(a instanceof Si)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Lr)return{bytesValue:iw(s.serializer,a._byteString)};if(a instanceof Gt){const l=s.databaseId,c=a.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:xy(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof Wr)return(function(c,d){const p=c instanceof Wr?c.toArray():c;return{mapValue:{fields:{[MA]:{stringValue:VA},[Uh]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return Cy(d.serializer,v)}))}}}}}})(a,s);if(fw(a))return a._toProto(s.serializer);throw s.createError(`Unsupported field value: ${gd(a)}`)})(n,e)}function zw(n,e){const t={};return CA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ms(n,((a,s)=>{const l=Ac(s,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function Bw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof Si||n instanceof Lr||n instanceof Gt||n instanceof Qy||n instanceof Wr||fw(n))}function Wy(n,e,t){if(!Bw(t)||!wA(t)){const a=gd(t);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function Tl(n,e,t){if((e=cn(e))instanceof xd)return e._internalPath;if(typeof e=="string")return Fw(n,e);throw Yh("Field path arguments must be of type string or ",n,!1,void 0,t)}const MV=new RegExp("[~\\*/\\[\\]]");function Fw(n,e,t){if(e.search(MV)>=0)throw Yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xd(...e.split("."))._internalPath}catch{throw Yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yh(n,e,t,a,s){const l=a&&!a.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${a}`),c&&(p+=` in document ${s}`),p+=")"),new Te(ue.INVALID_ARGUMENT,d+n+p)}function Hw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{convertValue(e,t="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return ms(e,((s,l)=>{a[s]=this.convertValue(l,t)})),a}convertVectorValue(e){var a,s,l;const t=(l=(s=(a=e.fields)==null?void 0:a[Uh].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>Wt(c.doubleValue)));return new Wr(t)}convertGeoPoint(e){return new Si(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=_d(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(tc(e));default:return null}}convertTimestamp(e){const t=ls(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Dt.fromString(e);ht(cw(a),9688,{name:e});const s=new nc(a.get(1),a.get(3)),l=new Oe(a.popFirst(5));return s.isEqual(t)||ia(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy extends VV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}const xb="@firebase/firestore",Ob="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(n){return(function(t,a){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of a)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Tl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class PV extends qw{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Te(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zy{}class LV extends Zy{}function Vd(n,e,...t){let a=[];e instanceof Zy&&a.push(e),a=a.concat(t),(function(l){const c=l.filter((p=>p instanceof ev)).length,d=l.filter((p=>p instanceof Pd)).length;if(c>1||c>0&&d>0)throw new Te(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const s of a)n=s._apply(n);return n}class Pd extends LV{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Pd(e,t,a)}_apply(e){const t=this._parse(e);return Kw(e._query,t),new uo(e.firestore,e.converter,Ug(e._query,t))}_parse(e){const t=Od(e.firestore);return(function(l,c,d,p,g,v,E){let S;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Te(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Pb(E,v);const L=[];for(const z of E)L.push(Vb(p,l,z));S={arrayValue:{values:L}}}else S=Vb(p,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Pb(E,v),S=OV(d,c,E,v==="in"||v==="not-in");return sn.create(g,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function $w(n,e,t){const a=e,s=Tl("where",n);return Pd._create(s,a,t)}class ev extends Zy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ev(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:Zr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const p of d)Kw(c,p),c=Ug(c,p)})(e._query,t),new uo(e.firestore,e.converter,Ug(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Vb(n,e,t){if(typeof(t=cn(t))=="string"){if(t==="")throw new Te(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FA(e)&&t.indexOf("/")!==-1)throw new Te(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Dt.fromString(t));if(!Oe.isDocumentKey(a))throw new Te(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Y0(n,new Oe(a))}if(t instanceof Gt)return Y0(n,t._key);throw new Te(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gd(t)}.`)}function Pb(n,e){if(!Array.isArray(n)||n.length===0)throw new Te(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kw(n,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Te(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Yw(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}class ju{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xs extends qw{constructor(e,t,a,s,l,c){super(e,t,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Tl("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Xs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xs._jsonSchema={type:on("string",Xs._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class gh extends Xs{data(e={}){return super.data(e)}}class Ws{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ju(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new gh(this._firestore,this._userDataWriter,a.key,a,new ju(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const p=new gh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new ju(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new gh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new ju(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:kV(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ws._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ty.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ws._jsonSchemaVersion="firestore/querySnapshot/1.0",Ws._jsonSchema={type:on("string",Ws._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Od(e)}set(e,t,a){this._verifyNotCommitted();const s=mg(e,this._firestore),l=Yw(s.converter,t,a),c=kw(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,a);return this._mutations.push(c.toMutation(s._key,_r.none())),this}update(e,t,a,...s){this._verifyNotCommitted();const l=mg(e,this._firestore);let c;return c=typeof(t=cn(t))=="string"||t instanceof xd?jw(this._dataReader,"WriteBatch.update",l._key,t,a,s):Uw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,_r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mg(e,this._firestore);return this._mutations=this._mutations.concat(new Iy(t._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mg(n,e){if((n=cn(n)).firestore!==e)throw new Te(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n){n=vr(n,Gt);const e=vr(n.firestore,ds),t=Sc(e);return TV(t,n._key).then((a=>Qw(e,n,a)))}function Ld(n){n=vr(n,uo);const e=vr(n.firestore,ds),t=Sc(e),a=new Jy(e);return Gw(n._query),bV(t,n._query).then((s=>new Ws(e,a,n,s)))}function jV(n,e,t){n=vr(n,Gt);const a=vr(n.firestore,ds),s=Yw(n.converter,e,t),l=Od(a);return tv(a,[kw(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,_r.none())])}function kd(n,e,t,...a){n=vr(n,Gt);const s=vr(n.firestore,ds),l=Od(s);let c;return c=typeof(e=cn(e))=="string"||e instanceof xd?jw(l,"updateDoc",n._key,e,t,a):Uw(l,"updateDoc",n._key,e),tv(s,[c.toMutation(n._key,_r.exists(!0))])}function zV(n,...e){var g,v,E;n=cn(n);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Mb(e[a])||(t=e[a++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Mb(e[a])){const S=e[a];e[a]=(g=S.next)==null?void 0:g.bind(S),e[a+1]=(v=S.error)==null?void 0:v.bind(S),e[a+2]=(E=S.complete)==null?void 0:E.bind(S)}let l,c,d;if(n instanceof Gt)c=vr(n.firestore,ds),d=Ed(n._key.path),l={next:S=>{e[a]&&e[a](Qw(c,n,S))},error:e[a+1],complete:e[a+2]};else{const S=vr(n,uo);c=vr(S.firestore,ds),d=S._query;const C=new Jy(c);l={next:L=>{e[a]&&e[a](new Ws(c,C,S,L))},error:e[a+1],complete:e[a+2]},Gw(n._query)}const p=Sc(c);return EV(p,d,s,l)}function tv(n,e){const t=Sc(n);return SV(t,e)}function Qw(n,e,t){const a=t.docs.get(e._key),s=new Jy(n);return new Xs(n,s,e._key,a,new ju(t.hasPendingWrites,t.fromCache),e.converter)}function Xw(n){return n=vr(n,ds),Sc(n),new UV(n,(e=>tv(n,e)))}(function(e,t=!0){Sx(Il),ml(new to("firestore",((a,{instanceIdentifier:s,options:l})=>{const c=a.getProvider("app").getImmediate(),d=new ds(new Rx(a.getProvider("auth-internal")),new Dx(c,a.getProvider("app-check-internal")),$x(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),rs(xb,Ob,e),rs(xb,Ob,"esm2020")})();var BV="firebase",FV="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(BV,FV,"app");function Ww(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HV=Ww,Jw=new pc("auth","Firebase",Ww());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new yy("@firebase/auth");function qV(n,...e){Qh.logLevel<=nt.WARN&&Qh.warn(`Auth (${Il}): ${n}`,...e)}function yh(n,...e){Qh.logLevel<=nt.ERROR&&Qh.error(`Auth (${Il}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(n,...e){throw rv(n,...e)}function Jr(n,...e){return rv(n,...e)}function nv(n,e,t){const a={...HV(),[e]:t};return new pc("auth","Firebase",a).create(e,{appName:n.name})}function Js(n){return nv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GV(n,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Ci(n,"argument-error"),nv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rv(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return Jw.create(n,...e)}function ke(n,e,...t){if(!n)throw rv(e,...t)}function Zi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw yh(e),new Error(e)}function sa(n,e){n||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function $V(){return Lb()==="http:"||Lb()==="https:"}function Lb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($V()||n2()||"connection"in navigator)?navigator.onLine:!0}function YV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t){this.shortDelay=e,this.longDelay=t,sa(t>e,"Short delay should be less than long delay!"),this.isMobile=ZN()||r2()}get(){return KV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(n,e){sa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],WV=new Rc(3e4,6e4);function av(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ml(n,e,t,a,s={}){return eR(n,s,async()=>{let l={},c={};a&&(e==="GET"?c=a:l={body:JSON.stringify(a)});const d=gc({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return t2()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Cl(n.emulatorConfig.host)&&(g.credentials="include"),Zw.fetch()(await tR(n,n.config.apiHost,t,d),g)})}async function eR(n,e,t){n._canInitEmulator=!1;const a={...QV,...e};try{const s=new ZV(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw ih(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw ih(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw ih(n,"user-disabled",c);const v=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw nv(n,v,g);Ci(n,v)}}catch(s){if(s instanceof ca)throw s;Ci(n,"network-request-failed",{message:String(s)})}}async function JV(n,e,t,a,s={}){const l=await Ml(n,e,t,a,s);return"mfaPendingCredential"in l&&Ci(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function tR(n,e,t,a){const s=`${e}${t}?${a}`,l=n,c=l.config.emulator?iv(n.config,s):`${n.config.apiScheme}://${s}`;return XV.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class ZV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Jr(this.auth,"network-request-failed")),WV.get())})}}function ih(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=Jr(n,e,a);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e4(n,e){return Ml(n,"POST","/v1/accounts:delete",e)}async function Xh(n,e){return Ml(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function t4(n,e=!1){const t=cn(n),a=await t.getIdToken(e),s=sv(a);ke(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:a,authTime:Yu(pg(s.auth_time)),issuedAtTime:Yu(pg(s.iat)),expirationTime:Yu(pg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function pg(n){return Number(n)*1e3}function sv(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return yh("JWT malformed, contained fewer than 3 sections"),null;try{const s=iA(t);return s?JSON.parse(s):(yh("Failed to decode base64 JWT payload"),null)}catch(s){return yh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function kb(n){const e=sv(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof ca&&n4(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function n4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yu(this.lastLoginAt),this.creationTime=Yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wh(n){var E;const e=n.auth,t=await n.getIdToken(),a=await sc(n,Xh(e,{idToken:t}));ke(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?nR(s.providerUserInfo):[],c=a4(n.providerData,l),d=n.isAnonymous,p=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Xg(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function i4(n){const e=cn(n);await Wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function a4(n,e){return[...n.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function nR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(n,e){const t=await eR(n,{},async()=>{const a=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await tR(n,s,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:a};return n.emulatorConfig&&Cl(n.emulatorConfig.host)&&(p.credentials="include"),Zw.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function o4(n,e){return Ml(n,"POST","/v2/accounts:revokeToken",av(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=kb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await s4(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,c=new cl;return a&&(ke(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&(ke(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(ke(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xr{constructor({uid:e,auth:t,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new r4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await sc(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return t4(this,e)}reload(){return i4(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await Wh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yr(this.auth.app))return Promise.reject(Js(this.auth));const e=await this.getIdToken();return await sc(this,e4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:C,providerData:L,stsTokenManager:z}=t;ke(E&&z,e,"internal-error");const M=cl.fromJSON(this.name,z);ke(typeof E=="string",e,"internal-error"),$a(a,e.name),$a(s,e.name),ke(typeof S=="boolean",e,"internal-error"),ke(typeof C=="boolean",e,"internal-error"),$a(l,e.name),$a(c,e.name),$a(d,e.name),$a(p,e.name),$a(g,e.name),$a(v,e.name);const G=new Xr({uid:E,auth:e,email:s,emailVerified:S,displayName:a,isAnonymous:C,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:M,createdAt:g,lastLoginAt:v});return L&&Array.isArray(L)&&(G.providerData=L.map(q=>({...q}))),p&&(G._redirectEventId=p),G}static async _fromIdTokenResponse(e,t,a=!1){const s=new cl;s.updateFromServerResponse(t);const l=new Xr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await Wh(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];ke(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?nR(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),d=new cl;d.updateFromIdToken(a);const p=new Xr({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Xg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=new Map;function ea(n){sa(n instanceof Function,"Expected a class definition");let e=Ub.get(n);return e?(sa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ub.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rR.type="NONE";const jb=rR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(n,e,t){return`firebase:${n}:${e}:${t}`}class fl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=vh(this.userKey,s.apiKey,l),this.fullPersistenceKey=vh("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Xh(this.auth,{idToken:e}).catch(()=>{});return t?Xr._fromGetAccountInfoResponse(this.auth,t,e):null}return Xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new fl(ea(jb),e,a);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||ea(jb);const c=vh(a,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const S=await Xh(e,{idToken:v}).catch(()=>{});if(!S)break;E=await Xr._fromGetAccountInfoResponse(e,S,v)}else E=Xr._fromJSON(e,v);g!==l&&(d=E),l=g;break}}catch{}const p=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new fl(l,e,a):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new fl(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uR(e))return"Blackberry";if(cR(e))return"Webos";if(aR(e))return"Safari";if((e.includes("chrome/")||sR(e))&&!e.includes("edge/"))return"Chrome";if(lR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function iR(n=On()){return/firefox\//i.test(n)}function aR(n=On()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sR(n=On()){return/crios\//i.test(n)}function oR(n=On()){return/iemobile/i.test(n)}function lR(n=On()){return/android/i.test(n)}function uR(n=On()){return/blackberry/i.test(n)}function cR(n=On()){return/webos/i.test(n)}function ov(n=On()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function l4(n=On()){var e;return ov(n)&&!!((e=window.navigator)!=null&&e.standalone)}function u4(){return i2()&&document.documentMode===10}function fR(n=On()){return ov(n)||lR(n)||cR(n)||uR(n)||/windows phone/i.test(n)||oR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(n,e=[]){let t;switch(n){case"Browser":t=zb(On());break;case"Worker":t=`${zb(On())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Il}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4(n,e={}){return Ml(n,"GET","/v2/passwordPolicy",av(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=6;class d4{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??h4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bb(this),this.idTokenSubscription=new Bb(this),this.beforeStateQueue=new c4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ea(t)),this._initializationPromise=this.queue(async()=>{var a,s,l;if(!this._deleted&&(this.persistenceManager=await fl.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xh(this,{idToken:e}),a=await Xr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Yr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(a=p.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yr(this.app))return Promise.reject(Js(this));const t=e?cn(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yr(this.app)?Promise.reject(Js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yr(this.app)?Promise.reject(Js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ea(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f4(this),t=new d4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await o4(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ea(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await fl.create(this,[ea(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,s);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(Yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&qV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ud(n){return cn(n)}class Bb{constructor(e){this.auth=e,this.observer=null,this.addObserver=h2(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function p4(n){lv=n}function g4(n){return lv.loadJS(n)}function y4(){return lv.gapiScript}function v4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(n,e){const t=_y(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(eo(l,e??{}))return s;Ci(s,"already-initialized")}return t.initialize({options:e})}function E4(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(ea);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function T4(n,e,t){const a=Ud(n);ke(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=dR(e),{host:c,port:d}=b4(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){ke(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),ke(eo(g,a.config.emulator)&&eo(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,Cl(c)?(lA(`${l}//${c}${p}`),uA("Auth",!0)):S4()}function dR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function b4(n){const e=dR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:Fb(a.substr(l.length+1))}}else{const[l,c]=a.split(":");return{host:l,port:Fb(c)}}}function Fb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function S4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,t){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(n,e){return JV(n,"POST","/v1/accounts:signInWithIdp",av(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="http://localhost";class io extends mR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...l}=t;if(!a||!s)return null;const c=new io(a,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return hl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,hl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hl(e,t)}buildRequest(){const e={requestUri:A4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends uv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends Cc{constructor(){super("facebook.com")}static credential(e){return io._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qa.credential(e.oauthAccessToken)}catch{return null}}}Qa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Cc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return io._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return Ji.credential(t,a)}catch{return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com";Ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends Cc{constructor(){super("github.com")}static credential(e){return io._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xa.credential(e.oauthAccessToken)}catch{return null}}}Xa.GITHUB_SIGN_IN_METHOD="github.com";Xa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends Cc{constructor(){super("twitter.com")}static credential(e,t){return io._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return Wa.credential(t,a)}catch{return null}}}Wa.TWITTER_SIGN_IN_METHOD="twitter.com";Wa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await Xr._fromIdTokenResponse(e,a,s),c=Hb(a);return new bl({user:l,providerId:c,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=Hb(a);return new bl({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function Hb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh extends ca{constructor(e,t,a,s){super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,Jh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new Jh(e,t,a,s)}}function pR(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Jh._fromErrorAndOperation(n,l,e,a):l})}async function w4(n,e,t=!1){const a=await sc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return bl._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(n,e,t=!1){const{auth:a}=n;if(Yr(a.app))return Promise.reject(Js(a));const s="reauthenticate";try{const l=await sc(n,pR(a,s,e,n),t);ke(l.idToken,a,"internal-error");const c=sv(l.idToken);ke(c,a,"internal-error");const{sub:d}=c;return ke(n.uid===d,a,"user-mismatch"),bl._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ci(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(n,e,t=!1){if(Yr(n.app))return Promise.reject(Js(n));const a="signIn",s=await pR(n,a,e),l=await bl._fromIdTokenResponse(n,a,s);return t||await n._updateCurrentUser(l.user),l}function I4(n,e,t,a){return cn(n).onIdTokenChanged(e,t,a)}function D4(n,e,t){return cn(n).beforeAuthStateChanged(e,t)}function N4(n,e,t,a){return cn(n).onAuthStateChanged(e,t,a)}const Zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zh,"1"),this.storage.removeItem(Zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=1e3,O4=10;class yR extends gR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!t&&this.localCache[a]===c||this.notifyListeners(a,c)},l=this.storage.getItem(a);u4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,O4):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},x4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yR.type="LOCAL";const M4=yR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR extends gR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vR.type="SESSION";const _R=vR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new jd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await V4(d);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=cv("",20);s.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(){return window}function L4(n){Ai().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}async function k4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function U4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function j4(){return ER()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="firebaseLocalStorageDb",z4=1,ed="firebaseLocalStorage",bR="fbase_key";class Ic{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zd(n,e){return n.transaction([ed],e?"readwrite":"readonly").objectStore(ed)}function B4(){const n=indexedDB.deleteDatabase(TR);return new Ic(n).toPromise()}function Wg(){const n=indexedDB.open(TR,z4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(ed,{keyPath:bR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(ed)?e(a):(a.close(),await B4(),e(await Wg()))})})}async function qb(n,e,t){const a=zd(n,!0).put({[bR]:e,value:t});return new Ic(a).toPromise()}async function F4(n,e){const t=zd(n,!1).get(e),a=await new Ic(t).toPromise();return a===void 0?null:a.value}function Gb(n,e){const t=zd(n,!0).delete(e);return new Ic(t).toPromise()}const H4=800,q4=3;class SR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>q4)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ER()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jd._getInstance(j4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await k4(),!this.activeServiceWorker)return;this.sender=new P4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||U4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wg();return await qb(e,Zh,"1"),await Gb(e,Zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>qb(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>F4(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Gb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=zd(s,!1).getAll();return new Ic(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SR.type="LOCAL";const G4=SR;new Rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(n,e){return e?ea(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv extends mR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $4(n){return C4(n.auth,new fv(n),n.bypassAuthState)}function K4(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),R4(t,new fv(n),n.bypassAuthState)}async function Y4(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),w4(t,new fv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $4;case"linkViaPopup":case"linkViaRedirect":return Y4;case"reauthViaPopup":case"reauthViaRedirect":return K4;default:Ci(this.auth,"internal-error")}}resolve(e){sa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=new Rc(2e3,1e4);async function X4(n,e,t){if(Yr(n.app))return Promise.reject(Jr(n,"operation-not-supported-in-this-environment"));const a=Ud(n);GV(n,e,uv);const s=AR(a,t);return new Qs(a,"signInViaPopup",e,s).executeNotNull()}class Qs extends wR{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,Qs.currentPopupAction&&Qs.currentPopupAction.cancel(),Qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){sa(this.filter.length===1,"Popup operations only handle one event");const e=cv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q4.get())};e()}}Qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="pendingRedirect",_h=new Map;class J4 extends wR{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=_h.get(this.auth._key());if(!e){try{const a=await Z4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}_h.set(this.auth._key(),e)}return this.bypassAuthState||_h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z4(n,e){const t=nP(e),a=tP(n);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}function eP(n,e){_h.set(n._key(),e)}function tP(n){return ea(n._redirectPersistence)}function nP(n){return vh(W4,n.config.apiKey,n.name)}async function rP(n,e,t=!1){if(Yr(n.app))return Promise.reject(Js(n));const a=Ud(n),s=AR(a,e),c=await new J4(a,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=600*1e3;class aP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!RR(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(Jr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iP&&this.cachedEventUids.clear(),this.cachedEventUids.has($b(e))}saveEventToCache(e){this.cachedEventUids.add($b(e)),this.lastProcessedEventTime=Date.now()}}function $b(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function RR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP(n,e={}){return Ml(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uP=/^https?/;async function cP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await oP(n);for(const t of e)try{if(fP(t))return}catch{}Ci(n,"unauthorized-domain")}function fP(n){const e=Qg(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===a}if(!uP.test(t))return!1;if(lP.test(n))return a===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=new Rc(3e4,6e4);function Kb(){const n=Ai().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function dP(n){return new Promise((e,t)=>{var s,l,c;function a(){Kb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kb(),t(Jr(n,"network-request-failed"))},timeout:hP.get()})}if((l=(s=Ai().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Ai().gapi)!=null&&c.load)a();else{const d=v4("iframefcb");return Ai()[d]=()=>{gapi.load?a():t(Jr(n,"network-request-failed"))},g4(`${y4()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Eh=null,e})}let Eh=null;function mP(n){return Eh=Eh||dP(n),Eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=new Rc(5e3,15e3),gP="__/auth/iframe",yP="emulator/auth/iframe",vP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_P=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EP(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?iv(e,yP):`https://${n.config.authDomain}/${gP}`,a={apiKey:e.apiKey,appName:n.name,v:Il},s=_P.get(n.config.apiHost);s&&(a.eid=s);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${gc(a).slice(1)}`}async function TP(n){const e=await mP(n),t=Ai().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:EP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vP,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const c=Jr(n,"network-request-failed"),d=Ai().setTimeout(()=>{l(c)},pP.get());function p(){Ai().clearTimeout(d),s(a)}a.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SP=500,AP=600,wP="_blank",RP="http://localhost";class Yb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CP(n,e,t,a=SP,s=AP){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const p={...bP,width:a.toString(),height:s.toString(),top:l,left:c},g=On().toLowerCase();t&&(d=sR(g)?wP:t),iR(g)&&(e=e||RP,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[C,L])=>`${S}${C}=${L},`,"");if(l4(g)&&d!=="_self")return IP(e||"",d),new Yb(null);const E=window.open(e||"",d,v);ke(E,n,"popup-blocked");try{E.focus()}catch{}return new Yb(E)}function IP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="__/auth/handler",NP="emulator/auth/handler",xP=encodeURIComponent("fac");async function Qb(n,e,t,a,s,l){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:Il,eventId:s};if(e instanceof uv){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",f2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Cc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),g=p?`#${xP}=${encodeURIComponent(p)}`:"";return`${OP(n)}?${gc(d).slice(1)}${g}`}function OP({config:n}){return n.emulator?iv(n,NP):`https://${n.authDomain}/${DP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="webStorageSupport";class MP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_R,this._completeRedirectFn=rP,this._overrideRedirectResult=eP}async _openPopup(e,t,a,s){var c;sa((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await Qb(e,t,a,Qg(),s);return CP(e,l,cv())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await Qb(e,t,a,Qg(),s);return L4(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(sa(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await TP(e),a=new aP(e);return t.register("authEvent",s=>(ke(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gg,{type:gg},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[gg];l!==void 0&&t(!!l),Ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fR()||aR()||ov()}}const VP=MP;var Xb="@firebase/auth",Wb="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kP(n){ml(new to("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=a.options;ke(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hR(n)},g=new m4(a,s,l,p);return E4(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),ml(new to("auth-internal",e=>{const t=Ud(e.getProvider("auth").getImmediate());return(a=>new PP(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(Xb,Wb,LP(n)),rs(Xb,Wb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=300,jP=oA("authIdTokenMaxAge")||UP;let Jb=null;const zP=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>jP)return;const s=t==null?void 0:t.token;Jb!==s&&(Jb=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function BP(n=dA()){const e=_y(n,"auth");if(e.isInitialized())return e.getImmediate();const t=_4(n,{popupRedirectResolver:VP,persistence:[G4,M4,_R]}),a=oA("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const c=zP(l.toString());D4(t,c,()=>c(t.currentUser)),I4(t,d=>c(d))}}const s=aA("auth");return s&&T4(t,`http://${s}`),t}function FP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}p4({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=s=>{const l=Jr("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",FP().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kP("Browser");const HP={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function Jo(n){const e=HP[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const qP={apiKey:Jo("VITE_FIREBASE_API_KEY"),authDomain:Jo("VITE_FIREBASE_AUTH_DOMAIN"),projectId:Jo("VITE_FIREBASE_PROJECT_ID"),storageBucket:Jo("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:Jo("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:Jo("VITE_FIREBASE_APP_ID")},CR=hA(qP),Sl=BP(CR),GP=new Ji,pn=CV(CR),IR=B.createContext(void 0),$P=({children:n})=>{const[e,t]=B.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),a=B.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);B.useEffect(()=>{a(e)},[e,a]);const s=B.useCallback(c=>{t(c),a(c);const d=Sl.currentUser;if(d){const p=Ur(pn,"users",d.uid);kd(p,{preferredTheme:c}).catch(g=>console.error("Error updating preferred theme in Firebase:",g))}},[a]),l=B.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return B.useEffect(()=>Sl.onAuthStateChanged(async d=>{if(d){const p=Ur(pn,"users",d.uid),g=await wc(p);if(g.exists()&&g.data().preferredTheme){const v=g.data().preferredTheme;t(v),a(v)}}}),[a]),D.jsx(IR.Provider,{value:{theme:e,toggleTheme:l,setTheme:s},children:n})},Dc=({container:n=!0})=>{const e=D.jsx("div",{className:"spinner"});return n?D.jsx("div",{className:"spinner-container",children:e}):e},Al=()=>D.jsx("div",{className:"loading-container",children:D.jsx(Dc,{container:!1})}),KP=()=>{const n=pt(a=>a.auth.firebaseUser),e=pt(a=>a.auth.userData);return pt(a=>a.auth.loading)?D.jsx(Al,{}):n?e?e.isApproved?D.jsx(es,{to:"/app/roster",replace:!0}):D.jsx(es,{to:"/guest",replace:!0}):D.jsx(Al,{}):D.jsx(es,{to:"/login",replace:!0})};function Tn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var YP=typeof Symbol=="function"&&Symbol.observable||"@@observable",Zb=YP,yg=()=>Math.random().toString(36).substring(7).split("").join("."),QP={INIT:`@@redux/INIT${yg()}`,REPLACE:`@@redux/REPLACE${yg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${yg()}`},td=QP;function hv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function DR(n,e,t){if(typeof n!="function")throw new Error(Tn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Tn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Tn(1));return t(DR)(n,e)}let a=n,s=e,l=new Map,c=l,d=0,p=!1;function g(){c===l&&(c=new Map,l.forEach((M,G)=>{c.set(G,M)}))}function v(){if(p)throw new Error(Tn(3));return s}function E(M){if(typeof M!="function")throw new Error(Tn(4));if(p)throw new Error(Tn(5));let G=!0;g();const q=d++;return c.set(q,M),function(){if(G){if(p)throw new Error(Tn(6));G=!1,g(),c.delete(q),l=null}}}function S(M){if(!hv(M))throw new Error(Tn(7));if(typeof M.type>"u")throw new Error(Tn(8));if(typeof M.type!="string")throw new Error(Tn(17));if(p)throw new Error(Tn(9));try{p=!0,s=a(s,M)}finally{p=!1}return(l=c).forEach(q=>{q()}),M}function C(M){if(typeof M!="function")throw new Error(Tn(10));a=M,S({type:td.REPLACE})}function L(){const M=E;return{subscribe(G){if(typeof G!="object"||G===null)throw new Error(Tn(11));function q(){const Z=G;Z.next&&Z.next(v())}return q(),{unsubscribe:M(q)}},[Zb](){return this}}}return S({type:td.INIT}),{dispatch:S,subscribe:E,getState:v,replaceReducer:C,[Zb]:L}}function XP(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:td.INIT})>"u")throw new Error(Tn(12));if(typeof t(void 0,{type:td.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Tn(13))})}function WP(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const a=Object.keys(t);let s;try{XP(t)}catch(l){s=l}return function(c={},d){if(s)throw s;let p=!1;const g={};for(let v=0;v<a.length;v++){const E=a[v],S=t[E],C=c[E],L=S(C,d);if(typeof L>"u")throw d&&d.type,new Error(Tn(14));g[E]=L,p=p||L!==C}return p=p||a.length!==Object.keys(c).length,p?g:c}}function nd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...a)=>e(t(...a)))}function JP(...n){return e=>(t,a)=>{const s=e(t,a);let l=()=>{throw new Error(Tn(15))};const c={getState:s.getState,dispatch:(p,...g)=>l(p,...g)},d=n.map(p=>p(c));return l=nd(...d)(s.dispatch),{...s,dispatch:l}}}function ZP(n){return hv(n)&&"type"in n&&typeof n.type=="string"}var NR=Symbol.for("immer-nothing"),eS=Symbol.for("immer-draftable"),zn=Symbol.for("immer-state");function Qr(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var yr=Object,wl=yr.getPrototypeOf,rd="constructor",Bd="prototype",Jg="configurable",id="enumerable",Th="writable",oc="value",oa=n=>!!n&&!!n[zn];function ei(n){var e;return n?xR(n)||Hd(n)||!!n[eS]||!!((e=n[rd])!=null&&e[eS])||qd(n)||Gd(n):!1}var eL=yr[Bd][rd].toString(),tS=new WeakMap;function xR(n){if(!n||!dv(n))return!1;const e=wl(n);if(e===null||e===yr[Bd])return!0;const t=yr.hasOwnProperty.call(e,rd)&&e[rd];if(t===Object)return!0;if(!il(t))return!1;let a=tS.get(t);return a===void 0&&(a=Function.toString.call(t),tS.set(t,a)),a===eL}function Fd(n,e,t=!0){Nc(n)===0?(t?Reflect.ownKeys(n):yr.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((a,s)=>e(s,a,n))}function Nc(n){const e=n[zn];return e?e.type_:Hd(n)?1:qd(n)?2:Gd(n)?3:0}var nS=(n,e,t=Nc(n))=>t===2?n.has(e):yr[Bd].hasOwnProperty.call(n,e),Zg=(n,e,t=Nc(n))=>t===2?n.get(e):n[e],ad=(n,e,t,a=Nc(n))=>{a===2?n.set(e,t):a===3?n.add(t):n[e]=t};function tL(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var Hd=Array.isArray,qd=n=>n instanceof Map,Gd=n=>n instanceof Set,dv=n=>typeof n=="object",il=n=>typeof n=="function",vg=n=>typeof n=="boolean";function nL(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var Wi=n=>n.copy_||n.base_,mv=n=>n.modified_?n.copy_:n.base_;function ey(n,e){if(qd(n))return new Map(n);if(Gd(n))return new Set(n);if(Hd(n))return Array[Bd].slice.call(n);const t=xR(n);if(e===!0||e==="class_only"&&!t){const a=yr.getOwnPropertyDescriptors(n);delete a[zn];let s=Reflect.ownKeys(a);for(let l=0;l<s.length;l++){const c=s[l],d=a[c];d[Th]===!1&&(d[Th]=!0,d[Jg]=!0),(d.get||d.set)&&(a[c]={[Jg]:!0,[Th]:!0,[id]:d[id],[oc]:n[c]})}return yr.create(wl(n),a)}else{const a=wl(n);if(a!==null&&t)return{...n};const s=yr.create(a);return yr.assign(s,n)}}function pv(n,e=!1){return $d(n)||oa(n)||!ei(n)||(Nc(n)>1&&yr.defineProperties(n,{set:ah,add:ah,clear:ah,delete:ah}),yr.freeze(n),e&&Fd(n,(t,a)=>{pv(a,!0)},!1)),n}function rL(){Qr(2)}var ah={[oc]:rL};function $d(n){return n===null||!dv(n)?!0:yr.isFrozen(n)}var sd="MapSet",ty="Patches",rS="ArrayMethods",OR={};function ao(n){const e=OR[n];return e||Qr(0,n),e}var iS=n=>!!OR[n],lc,MR=()=>lc,iL=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:iS(sd)?ao(sd):void 0,arrayMethodsPlugin_:iS(rS)?ao(rS):void 0});function aS(n,e){e&&(n.patchPlugin_=ao(ty),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function ny(n){ry(n),n.drafts_.forEach(aL),n.drafts_=null}function ry(n){n===lc&&(lc=n.parent_)}var sS=n=>lc=iL(lc,n);function aL(n){const e=n[zn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function oS(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[zn].modified_&&(ny(e),Qr(4)),ei(n)&&(n=lS(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[zn].base_,n,e)}else n=lS(e,t);return sL(e,n,!0),ny(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==NR?n:void 0}function lS(n,e){if($d(e))return e;const t=e[zn];if(!t)return od(e,n.handledSet_,n);if(!Kd(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:a}=t;if(a)for(;a.length>0;)a.pop()(n);LR(t,n)}return t.copy_}function sL(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&pv(e,t)}function VR(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var Kd=(n,e)=>n.scope_===e,oL=[];function PR(n,e,t,a){const s=Wi(n),l=n.type_;if(a!==void 0&&Zg(s,a,l)===e){ad(s,a,t,l);return}if(!n.draftLocations_){const d=n.draftLocations_=new Map;Fd(s,(p,g)=>{if(oa(g)){const v=d.get(g)||[];v.push(p),d.set(g,v)}})}const c=n.draftLocations_.get(e)??oL;for(const d of c)ad(s,d,t,l)}function lL(n,e,t){n.callbacks_.push(function(s){var d;const l=e;if(!l||!Kd(l,s))return;(d=s.mapSetPlugin_)==null||d.fixSetContents(l);const c=mv(l);PR(n,l.draft_??l,c,t),LR(l,s)})}function LR(n,e){var a;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((a=n.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const l=s.getPath(n);l&&s.generatePatches_(n,l,e)}VR(n)}}function uL(n,e,t){const{scope_:a}=n;if(oa(t)){const s=t[zn];Kd(s,a)&&s.callbacks_.push(function(){bh(n);const c=mv(s);PR(n,t,c,e)})}else ei(t)&&n.callbacks_.push(function(){const l=Wi(n);n.type_===3?l.has(t)&&od(t,a.handledSet_,a):Zg(l,e,n.type_)===t&&a.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&od(Zg(n.copy_,e,n.type_),a.handledSet_,a)})}function od(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||oa(n)||e.has(n)||!ei(n)||$d(n)||(e.add(n),Fd(n,(a,s)=>{if(oa(s)){const l=s[zn];if(Kd(l,t)){const c=mv(l);ad(n,a,c,n.type_),VR(l)}}else ei(s)&&od(s,e,t)})),n}function cL(n,e){const t=Hd(n),a={type_:t?1:0,scope_:e?e.scope_:MR(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,l=ld;t&&(s=[a],l=uc);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return a.draft_=d,a.revoke_=c,[d,a]}var ld={get(n,e){if(e===zn)return n;let t=n.scope_.arrayMethodsPlugin_;const a=n.type_===1&&typeof e=="string";if(a&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=Wi(n);if(!nS(s,e,n.type_))return fL(n,s,e);const l=s[e];if(n.finalized_||!ei(l)||a&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&nL(e))return l;if(l===_g(n.base_,e)){bh(n);const c=n.type_===1?+e:e,d=ay(n.scope_,l,n,c);return n.copy_[c]=d}return l},has(n,e){return e in Wi(n)},ownKeys(n){return Reflect.ownKeys(Wi(n))},set(n,e,t){const a=kR(Wi(n),e);if(a!=null&&a.set)return a.set.call(n.draft_,t),!0;if(!n.modified_){const s=_g(Wi(n),e),l=s==null?void 0:s[zn];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(tL(t,s)&&(t!==void 0||nS(n.base_,e,n.type_)))return!0;bh(n),iy(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),uL(n,e,t)),!0},deleteProperty(n,e){return bh(n),_g(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),iy(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Wi(n),a=Reflect.getOwnPropertyDescriptor(t,e);return a&&{[Th]:!0,[Jg]:n.type_!==1||e!=="length",[id]:a[id],[oc]:t[e]}},defineProperty(){Qr(11)},getPrototypeOf(n){return wl(n.base_)},setPrototypeOf(){Qr(12)}},uc={};for(let n in ld){let e=ld[n];uc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}uc.deleteProperty=function(n,e){return uc.set.call(this,n,e,void 0)};uc.set=function(n,e,t){return ld.set.call(this,n[0],e,t,n[0])};function _g(n,e){const t=n[zn];return(t?Wi(t):n)[e]}function fL(n,e,t){var s;const a=kR(e,t);return a?oc in a?a[oc]:(s=a.get)==null?void 0:s.call(n.draft_):void 0}function kR(n,e){if(!(e in n))return;let t=wl(n);for(;t;){const a=Object.getOwnPropertyDescriptor(t,e);if(a)return a;t=wl(t)}}function iy(n){n.modified_||(n.modified_=!0,n.parent_&&iy(n.parent_))}function bh(n){n.copy_||(n.assigned_=new Map,n.copy_=ey(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var hL=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{if(il(e)&&!il(t)){const l=t;t=e;const c=this;return function(p=l,...g){return c.produce(p,v=>t.call(this,v,...g))}}il(t)||Qr(6),a!==void 0&&!il(a)&&Qr(7);let s;if(ei(e)){const l=sS(this),c=ay(l,e,void 0);let d=!0;try{s=t(c),d=!1}finally{d?ny(l):ry(l)}return aS(l,a),oS(s,l)}else if(!e||!dv(e)){if(s=t(e),s===void 0&&(s=e),s===NR&&(s=void 0),this.autoFreeze_&&pv(s,!0),a){const l=[],c=[];ao(ty).generateReplacementPatches_(e,s,{patches_:l,inversePatches_:c}),a(l,c)}return s}else Qr(1,e)},this.produceWithPatches=(e,t)=>{if(il(e))return(c,...d)=>this.produceWithPatches(c,p=>e(p,...d));let a,s;return[this.produce(e,t,(c,d)=>{a=c,s=d}),a,s]},vg(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),vg(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),vg(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){ei(n)||Qr(8),oa(n)&&(n=dL(n));const e=sS(this),t=ay(e,n,void 0);return t[zn].isManual_=!0,ry(e),t}finishDraft(n,e){const t=n&&n[zn];(!t||!t.isManual_)&&Qr(9);const{scope_:a}=t;return aS(a,e),oS(void 0,a)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const a=ao(ty).applyPatches_;return oa(n)?a(n,e):this.produce(n,s=>a(s,e))}};function ay(n,e,t,a){const[s,l]=qd(e)?ao(sd).proxyMap_(e,t):Gd(e)?ao(sd).proxySet_(e,t):cL(e,t);return((t==null?void 0:t.scope_)??MR()).drafts_.push(s),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=a,t&&a!==void 0?lL(t,l,a):l.callbacks_.push(function(p){var v;(v=p.mapSetPlugin_)==null||v.fixSetContents(l);const{patchPlugin_:g}=p;l.modified_&&g&&g.generatePatches_(l,[],p)}),s}function dL(n){return oa(n)||Qr(10,n),UR(n)}function UR(n){if(!ei(n)||$d(n))return n;const e=n[zn];let t,a=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=ey(n,e.scope_.immer_.useStrictShallowCopy_),a=e.scope_.immer_.shouldUseStrictIteration()}else t=ey(n,!0);return Fd(t,(s,l)=>{ad(t,s,UR(l))},a),e&&(e.finalized_=!1),t}var mL=new hL,jR=mL.produce;function zR(n){return({dispatch:t,getState:a})=>s=>l=>typeof l=="function"?l(t,a,n):s(l)}var pL=zR(),gL=zR,yL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?nd:nd.apply(null,arguments)},vL=n=>n&&typeof n.match=="function";function Qu(n,e){function t(...a){if(e){let s=e(...a);if(!s)throw new Error(na(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:a[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=a=>ZP(a)&&a.type===n,t}var BR=class zu extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,zu.prototype)}static get[Symbol.species](){return zu}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new zu(...e[0].concat(this)):new zu(...e.concat(this))}};function uS(n){return ei(n)?jR(n,()=>{}):n}function sh(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function _L(n){return typeof n=="boolean"}var EL=()=>function(e){const{thunk:t=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=e??{};let c=new BR;return t&&(_L(t)?c.push(pL):c.push(gL(t.extraArgument))),c},TL="RTK_autoBatch",cS=n=>e=>{setTimeout(e,n)},bL=(n={type:"raf"})=>e=>(...t)=>{const a=e(...t);let s=!0,l=!1,c=!1;const d=new Set,p=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:cS(10):n.type==="callback"?n.queueNotification:cS(n.timeout),g=()=>{c=!1,l&&(l=!1,d.forEach(v=>v()))};return Object.assign({},a,{subscribe(v){const E=()=>s&&v(),S=a.subscribe(E);return d.add(v),()=>{S(),d.delete(v)}},dispatch(v){var E;try{return s=!((E=v==null?void 0:v.meta)!=null&&E[TL]),l=!s,l&&(c||(c=!0,p(g))),a.dispatch(v)}finally{s=!0}}})},SL=n=>function(t){const{autoBatch:a=!0}=t??{};let s=new BR(n);return a&&s.push(bL(typeof a=="object"?a:void 0)),s};function AL(n){const e=EL(),{reducer:t=void 0,middleware:a,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(hv(t))d=WP(t);else throw new Error(na(1));let p;typeof a=="function"?p=a(e):p=e();let g=nd;s&&(g=yL({trace:!1,...typeof s=="object"&&s}));const v=JP(...p),E=SL(v);let S=typeof c=="function"?c(E):E();const C=g(...S);return DR(d,l,C)}function FR(n){const e={},t=[];let a;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(na(28));if(d in e)throw new Error(na(29));return e[d]=c,s},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return t.push({matcher:l,reducer:c}),s},addDefaultCase(l){return a=l,s}};return n(s),[e,t,a]}function wL(n){return typeof n=="function"}function RL(n,e){let[t,a,s]=FR(e),l;if(wL(n))l=()=>uS(n());else{const d=uS(n);l=()=>d}function c(d=l(),p){let g=[t[p.type],...a.filter(({matcher:v})=>v(p)).map(({reducer:v})=>v)];return g.filter(v=>!!v).length===0&&(g=[s]),g.reduce((v,E)=>{if(E)if(oa(v)){const C=E(v,p);return C===void 0?v:C}else{if(ei(v))return jR(v,S=>E(S,p));{const S=E(v,p);if(S===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return v},d)}return c.getInitialState=l,c}var CL=(n,e)=>vL(n)?n.match(e):n(e);function IL(...n){return e=>n.some(t=>CL(t,e))}var DL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",NL=(n=21)=>{let e="",t=n;for(;t--;)e+=DL[Math.random()*64|0];return e},xL=["name","message","stack","code"],Eg=class{constructor(n,e){Bp(this,"_type");this.payload=n,this.meta=e}},fS=class{constructor(n,e){Bp(this,"_type");this.payload=n,this.meta=e}},OL=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of xL)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},hS="External signal was aborted",Tr=(()=>{function n(e,t,a){const s=Qu(e+"/fulfilled",(p,g,v,E)=>({payload:p,meta:{...E||{},arg:v,requestId:g,requestStatus:"fulfilled"}})),l=Qu(e+"/pending",(p,g,v)=>({payload:void 0,meta:{...v||{},arg:g,requestId:p,requestStatus:"pending"}})),c=Qu(e+"/rejected",(p,g,v,E,S)=>({payload:E,error:(a&&a.serializeError||OL)(p||"Rejected"),meta:{...S||{},arg:v,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function d(p,{signal:g}={}){return(v,E,S)=>{const C=a!=null&&a.idGenerator?a.idGenerator(p):NL(),L=new AbortController;let z,M;function G(K){M=K,L.abort()}g&&(g.aborted?G(hS):g.addEventListener("abort",()=>G(hS),{once:!0}));const q=(async function(){var se,Q;let K;try{let b=(se=a==null?void 0:a.condition)==null?void 0:se.call(a,p,{getState:E,extra:S});if(VL(b)&&(b=await b),b===!1||L.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const A=new Promise((R,N)=>{z=()=>{N({name:"AbortError",message:M||"Aborted"})},L.signal.addEventListener("abort",z,{once:!0})});v(l(C,p,(Q=a==null?void 0:a.getPendingMeta)==null?void 0:Q.call(a,{requestId:C,arg:p},{getState:E,extra:S}))),K=await Promise.race([A,Promise.resolve(t(p,{dispatch:v,getState:E,extra:S,requestId:C,signal:L.signal,abort:G,rejectWithValue:(R,N)=>new Eg(R,N),fulfillWithValue:(R,N)=>new fS(R,N)})).then(R=>{if(R instanceof Eg)throw R;return R instanceof fS?s(R.payload,C,p,R.meta):s(R,C,p)})])}catch(b){K=b instanceof Eg?c(null,C,p,b.payload,b.meta):c(b,C,p)}finally{z&&L.signal.removeEventListener("abort",z)}return a&&!a.dispatchConditionRejection&&c.match(K)&&K.meta.condition||v(K),K})();return Object.assign(q,{abort:G,requestId:C,arg:p,unwrap(){return q.then(ML)}})}}return Object.assign(d,{pending:l,rejected:c,fulfilled:s,settled:IL(c,s),typePrefix:e})}return n.withTypes=()=>n,n})();function ML(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function VL(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var PL=Symbol.for("rtk-slice-createasyncthunk");function LL(n,e){return`${n}/${e}`}function kL({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[PL];return function(s){const{name:l,reducerPath:c=l}=s;if(!l)throw new Error(na(11));const d=(typeof s.reducers=="function"?s.reducers(jL()):s.reducers)||{},p=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(Z,se){const Q=typeof Z=="string"?Z:Z.type;if(!Q)throw new Error(na(12));if(Q in g.sliceCaseReducersByType)throw new Error(na(13));return g.sliceCaseReducersByType[Q]=se,v},addMatcher(Z,se){return g.sliceMatchers.push({matcher:Z,reducer:se}),v},exposeAction(Z,se){return g.actionCreators[Z]=se,v},exposeCaseReducer(Z,se){return g.sliceCaseReducersByName[Z]=se,v}};p.forEach(Z=>{const se=d[Z],Q={reducerName:Z,type:LL(l,Z),createNotation:typeof s.reducers=="function"};BL(se)?HL(Q,se,v,e):zL(Q,se,v)});function E(){const[Z={},se=[],Q=void 0]=typeof s.extraReducers=="function"?FR(s.extraReducers):[s.extraReducers],b={...Z,...g.sliceCaseReducersByType};return RL(s.initialState,A=>{for(let R in b)A.addCase(R,b[R]);for(let R of g.sliceMatchers)A.addMatcher(R.matcher,R.reducer);for(let R of se)A.addMatcher(R.matcher,R.reducer);Q&&A.addDefaultCase(Q)})}const S=Z=>Z,C=new Map,L=new WeakMap;let z;function M(Z,se){return z||(z=E()),z(Z,se)}function G(){return z||(z=E()),z.getInitialState()}function q(Z,se=!1){function Q(A){let R=A[Z];return typeof R>"u"&&se&&(R=sh(L,Q,G)),R}function b(A=S){const R=sh(C,se,()=>new WeakMap);return sh(R,A,()=>{const N={};for(const[x,k]of Object.entries(s.selectors??{}))N[x]=UL(k,A,()=>sh(L,A,G),se);return N})}return{reducerPath:Z,getSelectors:b,get selectors(){return b(Q)},selectSlice:Q}}const K={name:l,reducer:M,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:G,...q(c),injectInto(Z,{reducerPath:se,...Q}={}){const b=se??c;return Z.inject({reducerPath:b,reducer:M},Q),{...K,...q(b,!0)}}};return K}}function UL(n,e,t,a){function s(l,...c){let d=e(l);return typeof d>"u"&&a&&(d=t()),n(d,...c)}return s.unwrapped=n,s}var co=kL();function jL(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function zL({type:n,reducerName:e,createNotation:t},a,s){let l,c;if("reducer"in a){if(t&&!FL(a))throw new Error(na(17));l=a.reducer,c=a.prepare}else l=a;s.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?Qu(n,c):Qu(n))}function BL(n){return n._reducerDefinitionType==="asyncThunk"}function FL(n){return n._reducerDefinitionType==="reducerWithPrepare"}function HL({type:n,reducerName:e},t,a,s){if(!s)throw new Error(na(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:p,settled:g,options:v}=t,E=s(n,l,v);a.exposeAction(e,E),c&&a.addCase(E.fulfilled,c),d&&a.addCase(E.pending,d),p&&a.addCase(E.rejected,p),g&&a.addMatcher(E.settled,g),a.exposeCaseReducer(e,{fulfilled:c||oh,pending:d||oh,rejected:p||oh,settled:g||oh})}function oh(){}function na(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const qL={positions:[],loading:!1,error:null,fetched:!1},Zs=Tr("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=Ur(pn,"metadata","positions"),a=await wc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),HR=Tr("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=Ur(pn,"metadata","positions");return await kd(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),GL=co({name:"positions",initialState:qL,reducers:{},extraReducers:n=>{n.addCase(Zs.pending,e=>{e.loading=!0,e.error=null}).addCase(Zs.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(Zs.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(HR.fulfilled,(e,t)=>{e.positions=t.payload})}}),$L=GL.reducer,KL={teams:[],loading:!1,error:null,fetched:!1},dl=Tr("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=Ur(pn,"metadata","teams"),a=await wc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),Sh=Tr("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=Ur(pn,"metadata","teams");return await kd(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),qR=co({name:"teams",initialState:KL,reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(dl.pending,e=>{e.loading=!0,e.error=null}).addCase(dl.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(dl.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Sh.pending,e=>{e.error=null}).addCase(Sh.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(Sh.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:tU}=qR.actions,YL=qR.reducer,QL=()=>{const n=ua(),{firebaseUser:e,userData:t,loading:a}=pt(c=>c.auth),{fetched:s}=pt(c=>c.teams),{fetched:l}=pt(c=>c.positions);return B.useEffect(()=>{e&&(s||n(dl()),l||n(Zs()))},[n,e,s,l]),a?D.jsx(Al,{}):e?t?t.isApproved?D.jsx(XS,{}):D.jsx(es,{to:"/guest",replace:!0}):D.jsx(Al,{}):D.jsx(es,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=(...n)=>n.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=n=>{const e=WL(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=B.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},p)=>B.createElement("svg",{ref:p,...JL,width:e,height:e,stroke:n,strokeWidth:a?Number(t)*24/Number(e):t,className:GR("lucide",s),...!l&&!ZL(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,v])=>B.createElement(g,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=(n,e)=>{const t=B.forwardRef(({className:a,...s},l)=>B.createElement(ek,{ref:l,iconNode:e,className:GR(`lucide-${XL(dS(n))}`,`lucide-${n}`,a),...s}));return t.displayName=dS(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],$R=Vl("chevron-up",tk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],KR=Vl("corner-down-right",nk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ik=Vl("moon",rk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],sk=Vl("panel-left-close",ak);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],lk=Vl("panel-left-open",ok);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ck=Vl("sun",uk),fk={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[]},YR=co({name:"ui",initialState:fk,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},toggleTeamExpansion:(n,e)=>{const t=e.payload,a=n.expandedTeams.indexOf(t);a>=0?n.expandedTeams.splice(a,1):n.expandedTeams.push(t)}}}),{setMobileSidebarOpen:Bu,setDesktopSidebarExpanded:hk,toggleTeamExpansion:dk}=YR.actions,mk=YR.reducer,pk=()=>{const n=B.useContext(IR);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},gv=({showText:n})=>{const{theme:e,toggleTheme:t}=pk();return D.jsxs("button",{className:"theme-toggle-button",onClick:t,"aria-label":"Toggle theme",children:[e==="dark"?D.jsx(ck,{size:20}):D.jsx(ik,{size:20}),n&&D.jsx("span",{children:"Toggle theme"})]})},gk=({title:n})=>{const e=ua(),{isMobileSidebarOpen:t}=pt(a=>a.ui);return D.jsxs("header",{className:"mobile-header",children:[D.jsxs("div",{className:`mobile-header-pill ${t?"mobile-header-pill-active":""}`,onClick:()=>e(Bu(!t)),children:[D.jsx("span",{className:"mobile-header-text",children:n}),D.jsx($R,{className:`mobile-header-chevron ${t?"rotate":""}`})]}),D.jsx(gv,{})]})};var pr=(n=>(n.ROSTER="roster",n.SETTINGS="settings",n))(pr||{}),sl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(sl||{});const QR=[{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],Tg=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],yk=()=>{const n=dc(),t=ti().pathname.includes("/settings")?pr.SETTINGS:pr.ROSTER,a=s=>{n(`/app/${s}`)};return D.jsx("nav",{className:"bottom-nav-container",children:D.jsx("div",{className:"bottom-nav",children:QR.map(s=>D.jsxs("button",{className:`bottom-nav-btn ${t===s.id?"bottom-nav-btn-active":""}`,onClick:()=>a(s.id),children:[D.jsx("span",{children:s.icon}),D.jsx("span",{children:s.label})]},s.id))})})},vk=()=>{var K;const n=dc(),e=ti(),t=dd(),a=ua(),{userData:s}=pt(Z=>Z.auth),{isDesktopSidebarExpanded:l,expandedTeams:c}=pt(Z=>Z.ui),{teams:d,fetched:p,loading:g}=pt(Z=>Z.teams),{fetched:v}=pt(Z=>Z.positions),E=e.pathname.includes("/settings")?pr.SETTINGS:pr.ROSTER,{teamName:S,positionName:C,section:L}=t,z=C||L;B.useEffect(()=>{p||a(dl()),v||a(Zs())},[a,p,v]);const M=B.useCallback(Z=>{n(Z)},[n]),G=Z=>{a(dk(Z))},q=()=>{const Z=E===pr.ROSTER?{label:"Roster"}:Tg.find(Q=>Q.id===z)||{label:"Settings"},se=Z?Z.label:"GIG ROSTER";return S&&z?`${S}  ${z}`:S||(z?`${se}  ${z}`:se)};return D.jsxs("aside",{className:"side-nav",children:[D.jsxs("div",{className:"sidebar-content",children:[D.jsxs("div",{className:"tablet-sidebar-header",children:[l&&D.jsx("h3",{children:q()}),D.jsx("button",{className:"sidebar-toggle-button",onClick:()=>a(hk(!l)),"aria-label":l?"Collapse sidebar":"Expand sidebar",children:l?D.jsx(sk,{size:20}):D.jsx(lk,{size:20})})]}),D.jsxs("nav",{className:"side-menu-list",children:[E===pr.ROSTER&&g&&D.jsx("div",{className:"side-nav-item loading",children:"Loading teams..."}),E===pr.ROSTER?(K=s==null?void 0:s.teams)==null?void 0:K.map(Z=>{var A,R;const se=d.find(N=>N.name===Z);if(!se)return null;const Q=s.teams.length===1,b=Q||c.includes(se.name);return D.jsxs("div",{children:[!Q&&D.jsxs("div",{className:"sidenav-menu-subheading sidenav-menu-subheading-clickable",style:{cursor:"pointer"},onClick:()=>G(se.name),children:[D.jsxs("div",{children:[se.emoji," ",l&&se.name]}),D.jsx("span",{className:"expand-icon",children:b?"":""})]}),b&&D.jsxs("div",{className:"side-nav-sub-items",children:[(R=(A=se.positions)==null?void 0:A.filter(N=>!N.parentId))==null?void 0:R.map(N=>{const x=z===N.name&&S===se.name;return D.jsxs("button",{className:`side-nav-item side-nav-item-sub ${x?"side-nav-item-active":""}`,onClick:()=>{M(`/app/roster/${se.name}/${N.name}`),a(Bu(!1))},style:{borderLeft:x?`4px solid ${N.colour}`:"4px solid transparent",backgroundColor:x?`${N.colour}15`:"transparent",color:x?N.colour:""},children:[D.jsx("span",{className:"side-emoji",children:N.emoji})," ",l&&N.name]},N.name)}),D.jsxs("button",{className:`side-nav-item side-nav-item-sub ${z==="Absence"&&S===se.name?"side-nav-item-active":""}`,onClick:()=>{M(`/app/roster/${se.name}/Absence`),a(Bu(!1))},style:{borderLeft:z==="Absence"&&S===se.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:z==="Absence"&&S===se.name?"var(--background-toggle-off-transparent)":"transparent"},children:[D.jsx("span",{className:"side-emoji",children:""})," ",l&&"Absence Roster"]})]})]},se.name)}):Tg.filter(Z=>!Z.adminOnly).map(Z=>D.jsxs("button",{className:`side-nav-item ${z===Z.id?"side-nav-item-active":""}`,onClick:()=>{M(`/app/settings/${Z.id}`),a(Bu(!1))},children:[D.jsx("span",{className:"side-emoji",children:Z.icon})," ",l&&Z.label]},Z.id))]})]}),(s==null?void 0:s.isAdmin)&&E===pr.SETTINGS&&D.jsxs("div",{className:"admin-only-section-wrapper",children:[D.jsx("div",{className:"sidenav-menu-subheading",children:l&&D.jsx("h4",{children:"Admin Only"})}),Tg.filter(Z=>Z.adminOnly).map(Z=>D.jsxs("button",{className:`side-nav-item ${z===Z.id?"side-nav-item-active":""}`,onClick:()=>{M(`/app/settings/${Z.id}`),a(Bu(!1))},children:[D.jsx("span",{className:"side-emoji",children:Z.icon})," ",l&&Z.label]},Z.id))]}),D.jsx("div",{className:"sidebar-footer",children:D.jsx(gv,{showText:l})})]})},_k=()=>{const n=dc(),e=ti(),t=dd(),{userData:a}=pt(L=>L.auth),{teams:s}=pt(L=>L.teams),{isMobileSidebarOpen:l,isDesktopSidebarExpanded:c}=pt(L=>L.ui),d=e.pathname.includes("/settings")?pr.SETTINGS:pr.ROSTER,{teamName:p,positionName:g,section:v}=t,E=g||v||null;B.useEffect(()=>{if(d===pr.ROSTER&&!p&&!E){if(a!=null&&a.teams&&a.teams.length>0&&s.length>0){const L=a.teams[0],z=s.find(M=>M.name===L);z&&z.positions&&z.positions.length>0&&n(`/app/roster/${z.name}/${z.positions[0].name}`,{replace:!0})}}else d===pr.SETTINGS&&!E&&n(`/app/settings/${sl.PROFILE}`,{replace:!0})},[d,p,E,a,s,n]);const S=()=>{const L=QR.find(M=>M.id===d),z=L?L.label:"GIG ROSTER";return p&&E?`${p}  ${E}`:p||(E?`${z}  ${E}`:z)},C=["app-shell",l?"menu-open":"",c?"sidebar-expanded":"sidebar-collapsed"].filter(Boolean).join(" ");return D.jsxs(D.Fragment,{children:[D.jsx(gk,{title:S()}),D.jsxs("div",{className:C,children:[D.jsx(vk,{}),D.jsx("main",{className:"main-content",children:D.jsx("div",{className:"content-container",children:D.jsx(XS,{})})}),D.jsx(yk,{})]})]})},_i=({children:n,nowrap:e})=>D.jsx("div",{className:`pill-group ${e?"pill-group-nowrap":""}`,children:n}),jn=({colour:n,isDropdown:e,isActive:t,isDisabled:a,minWidth:s,onClick:l,children:c})=>{const[d,p]=B.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),D.jsxs("div",{className:`pill pill--text ${t?"pill-active":""} ${a?"pill-disabled":""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:s?`${s}px`:"fit-content"},onClick:g=>{a||(p(v=>!v),l&&l(g))},children:[c,e&&D.jsx($R,{style:{rotate:d?"90deg":"0"}})]})},XR=n=>{const e=[];return Object.entries(n).forEach(([t,a])=>{a.forEach(s=>{e.push(`${t}|${s}`)})}),e},Ek={firebaseUser:null,userData:null,loading:!0,error:null},Ah=Tr("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=Ur(pn,"users",n),a=await wc(t);if(!a.exists()){const s="chris.sm.kang542@gmail.com",l=Sl.currentUser,c=(l==null?void 0:l.email)===s,d={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await jV(t,d),d}return a.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),wh=Tr("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const a=Ur(pn,"users",n),s={...e};return s.teamPositions&&(s.indexedAssignments=XR(s.teamPositions)),await kd(a,s),s}catch(a){return t(a instanceof Error?a.message:"Failed to update profile")}}),WR=co({name:"auth",initialState:Ek,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(Ah.pending,e=>{e.loading=!0,e.error=null}).addCase(Ah.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(Ah.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(wh.pending,e=>{e.error=null}).addCase(wh.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(wh.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:Tk,setUserData:bk,setLoading:nU,logout:Sk}=WR.actions,Ak=WR.reducer,JR=()=>{const n=ua(),{userData:e,firebaseUser:t}=pt(K=>K.auth),a=pt(K=>K.teams.teams),[s,l]=B.useState((e==null?void 0:e.name)||""),[c,d]=B.useState((e==null?void 0:e.gender)||""),[p,g]=B.useState((e==null?void 0:e.isActive)??!0),[v,E]=B.useState((e==null?void 0:e.teams)||[]),[S,C]=B.useState((e==null?void 0:e.teamPositions)||{}),[L,z]=B.useState("idle"),M=async()=>{if(t){z("saving");try{const K={name:s,gender:c,isActive:p,teams:v,teamPositions:S};await n(wh({uid:t.uid,data:K})).unwrap(),z("success"),setTimeout(()=>z("idle"),2e3)}catch(K){console.error(K),z("idle")}}},G=K=>{E(Z=>{const se=Z.includes(K),Q=se?Z.filter(b=>b!==K):[...Z,K];return C(b=>{const A={...b};return se?delete A[K]:A[K]||(A[K]=[]),A}),Q})},q=(K,Z)=>{C(se=>{const Q=se[K]||[],b=Q.includes(Z)?Q.filter(A=>A!==Z):[...Q,Z];return{...se,[K]:b}})};return e?D.jsxs("section",{className:"profile-card",children:[D.jsx("div",{className:"profile-readonly",children:D.jsxs("p",{children:[D.jsx("strong",{children:"Email:"})," ",e.email]})}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Name"}),D.jsx(_i,{children:D.jsx("input",{type:"text",value:s,onChange:K=>l(K.target.value),className:"form-input form-input-width-auto"})})]}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Gender"}),D.jsx(_i,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(K=>D.jsx(jn,{colour:K.colour,onClick:()=>d(K.value),isActive:c===K.value,children:K.value},K.value))})]}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"My Teams"}),D.jsx(_i,{children:a.map(K=>{const Z=v.includes(K.name);return D.jsxs(jn,{onClick:()=>G(K.name),isActive:Z,children:[D.jsx("span",{children:K.emoji})," ",K.name]},K.name)})})]}),v.length>0&&D.jsxs("div",{className:"team-positions-section",children:[D.jsx("label",{className:"section-label",children:"Positions per Team"}),v.map(K=>{var se,Q;const Z=a.find(b=>b.name===K);return Z?D.jsxs("div",{className:"team-position-group",children:[D.jsxs("div",{className:"team-position-header",children:[Z.emoji," ",Z.name]}),D.jsx(_i,{children:(Q=(se=Z.positions)==null?void 0:se.filter(b=>!b.parentId))==null?void 0:Q.map(b=>{var R;const A=(R=S[K])==null?void 0:R.includes(b.name);return D.jsxs(jn,{onClick:()=>q(K,b.name),isActive:A,colour:b.colour,children:[D.jsx("span",{children:b.emoji})," ",b.name]},b.name)})})]},K):null})]}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Availability Status"}),D.jsx(jn,{colour:p?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>g(!p),isActive:!0,children:p?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),D.jsx("p",{className:"form-field-hint",children:"Turn off if you want to be hidden from the roster."})]}),D.jsxs("div",{className:"action-container",children:[D.jsx("button",{onClick:M,disabled:L!=="idle",className:`save-button ${L}`,children:L==="saving"?"Saving...":L==="success"?"Done ":"Update Profile"}),D.jsx("button",{onClick:()=>Sl.signOut(),className:"logout-btn",children:"Logout"})]})]}):D.jsx("div",{children:"Loading profile..."})},wk=()=>{const{userData:n,firebaseUser:e,loading:t}=pt(a=>a.auth);return t?D.jsx(Al,{}):e?n?n.isApproved?D.jsx(es,{to:"/app",replace:!0}):D.jsxs("div",{className:"guest-container",children:[D.jsxs("header",{className:"guest-header",children:[D.jsx("h2",{className:"brand-title",children:"God is Good"}),D.jsx("p",{className:"pending-label",children:"PENDING ADMIN APPROVAL"}),D.jsx("div",{className:"guest-theme-toggle-container",children:D.jsx(gv,{})})]}),D.jsx(JR,{})]}):D.jsx(Al,{}):D.jsx(es,{to:"/login",replace:!0})},Rk=()=>{const{firebaseUser:n,loading:e}=pt(a=>a.auth),t=()=>X4(Sl,GP);return e?null:n?D.jsx(es,{to:"/",replace:!0}):D.jsxs("div",{className:"login-container",children:[D.jsxs("header",{className:"login-header",children:[D.jsx("h1",{className:"brand-title",children:"God is Good"}),D.jsx("p",{className:"brand-subtitle",children:"Worship Team Roster"})]}),D.jsx("div",{className:"login-button-container",children:D.jsxs("button",{onClick:t,className:"login-button google",children:[D.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},Ck={entries:{},dirtyEntries:{},loading:!1,saving:!1,error:null},Rh=Tr("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Vd(Nd(pn,"roster")),a=await Ld(t),s={};return a.docs.forEach(l=>{const c=l.data(),d=c.updatedAt,p={...c,updatedAt:d&&typeof d=="object"&&"toMillis"in d?d.toMillis():d};s[l.id]={...p,id:l.id}}),s}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),Ch=Tr("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=Xw(pn),a=Date.now(),s={};return Object.values(n).forEach(l=>{const c=Ur(pn,"roster",l.id),d={...l,updatedAt:a};t.set(c,d),s[l.id]=d}),await t.commit(),s}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),ZR=co({name:"roster",initialState:Ck,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:a,userIdentifier:s,positionGroupNames:l,maxConflict:c}=e.payload,d=n.dirtyEntries[t]||n.entries[t];let p;d?p=JSON.parse(JSON.stringify(d)):p={id:t,date:t,teams:{},absence:{}},p.teams[a]||(p.teams[a]={});const g=p.teams[a][s]||[],v=l.findIndex(L=>g.includes(L)),E=v>=0?l[v]:null;let S=null;E===null?S=l[0]:v<l.length-1?S=l[v+1]:S=null;const C=g.filter(L=>!l.includes(L));if(S)if(C.length<c)C.push(S);else{n.error=`User already has ${c} assignment(s) in this team.`;return}C.length===0?delete p.teams[a][s]:p.teams[a][s]=C,n.dirtyEntries[t]=p},resetRosterEdits(n){n.dirtyEntries={},n.error=null},updateLocalAbsence(n,e){var p;const{date:t,userIdentifier:a,reason:s,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let d;c?d=JSON.parse(JSON.stringify(c)):d={id:t,date:t,teams:{},absence:{}},l?d.absence[a]={reason:s||((p=d.absence[a])==null?void 0:p.reason)||""}:delete d.absence[a],n.dirtyEntries[t]=d}},extraReducers:n=>{n.addCase(Rh.pending,e=>{e.loading=!0,e.error=null}).addCase(Rh.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(Rh.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Ch.pending,e=>{e.saving=!0,e.error=null}).addCase(Ch.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(Ch.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:rU,updateLocalAssignment:Ik,resetRosterEdits:Dk,updateLocalAbsence:mS}=ZR.actions,Nk=ZR.reducer,xk=n=>{const e=[],t=new Date;t.setHours(0,0,0,0);const a=t.getFullYear(),s=new Date(a,11,31);s.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(v=>l[v]),d=new Date(t);let p=!1;for(;!p;)if(c.includes(d.getDay()))p=!0;else if(d.setDate(d.getDate()+1),d.getFullYear()>a)return[];const g=new Date(d);for(;g.getTime()<=s.getTime();)c.includes(g.getDay())&&e.push(new Date(g)),g.setDate(g.getDate()+1);return e.sort((v,E)=>v.getTime()-E.getTime()),e.map(v=>v.toISOString())},Ok={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},Ih=Tr("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=Nd(pn,"users"),a=Vd(t,$w("teams","array-contains",n)),s=await Ld(a),l=[];return s.forEach(c=>{l.push(c.data())}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),Dh=Tr("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:a})=>{if(!n||!e)return[];try{const c=a().positions.positions.filter(C=>C.parentId===e),p=[e,...c.map(C=>C.name)].map(C=>`${n}|${C}`),g=Nd(pn,"users"),v=Vd(g,$w("indexedAssignments","array-contains-any",p)),E=await Ld(v),S=[];return E.forEach(C=>{S.push(C.data())}),S.sort((C,L)=>(C.name||"").localeCompare(L.name||""))}catch(s){return console.error("Error fetching users:",s),t("Failed to load users.")}}),Nh=Tr("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=Ur(pn,"metadata","teams"),a=await wc(t);if(a.exists()){const s=a.data();return(Array.isArray(s.list)?s.list.map(d=>({...d,preferredDays:d.preferredDays||[],positions:d.positions||[]})):[]).find(d=>d.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),Mk=co({name:"rosterView",initialState:Ok,reducers:{},extraReducers:n=>{n.addCase(Dh.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(Dh.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(Dh.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(Ih.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(Ih.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(Ih.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(Nh.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(Nh.fulfilled,(e,t)=>{var a;e.currentTeamData=t.payload,(a=t.payload)!=null&&a.preferredDays&&(e.rosterDates=xk(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(Nh.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),Vk=Mk.reducer,Pk=()=>{const n=ua(),{teamName:e,positionName:t}=dd(),{users:a,allTeamUsers:s,rosterDates:l,loadingUsers:c,loadingTeam:d,loadingAllTeamUsers:p,error:g}=pt(j=>j.rosterView),{entries:v,dirtyEntries:E,saving:S,error:C}=pt(j=>j.roster),{teams:L}=pt(j=>j.teams),{positions:z}=pt(j=>j.positions),[M,G]=B.useState(null),q=Object.keys(E).length>0,K=B.useMemo(()=>z.find(j=>j.name===t),[z,t]),Z=B.useMemo(()=>{const j=[...a];return K!=null&&K.sortByGender?j.sort((ne,ie)=>ne.gender===ie.gender?(ne.name||"").localeCompare(ie.name||""):ne.gender==="Male"?-1:ie.gender==="Male"?1:(ne.gender||"").localeCompare(ie.gender||"")):j},[a,K]);B.useEffect(()=>{n(Rh())},[n]),B.useEffect(()=>{t&&e&&t!=="Absence"&&n(Dh({teamName:e,positionName:t}))},[t,e,n]),B.useEffect(()=>{e&&(n(Nh(e)),n(Ih(e)))},[e,n]);const se=B.useCallback((j,ne)=>{const ie=j.split("T")[0],me=E[ie]||v[ie];return!!(me&&me.absence&&me.absence[ne])},[E,v]),Q=B.useCallback((j,ne)=>{var Ee,V;const ie=j.split("T")[0],me=E[ie]||v[ie];return((V=(Ee=me==null?void 0:me.absence)==null?void 0:Ee[ne])==null?void 0:V.reason)||""},[E,v]),b=B.useCallback((j,ne)=>{if(!e||!t||t==="Absence")return!1;if(se(j,ne))return!0;const ie=j.split("T")[0],me=E[ie]||v[ie],Ee=L.find(De=>De.name===e),V=(Ee==null?void 0:Ee.maxConflict)||1;if(!me||!me.teams[e]||!me.teams[e][ne])return!1;const te=me.teams[e][ne],de=z.filter(De=>De.parentId===t),pe=[t,...de.map(De=>De.name)];return te.some(De=>pe.includes(De))?!1:te.length>=V},[e,t,se,E,v,L,z]),A=B.useCallback((j,ne,ie,me)=>{if(!e||!t||t==="Absence"||b(j,ne)){G({row:ie,col:me,table:"roster"});return}G({row:ie,col:me,table:"roster"});const Ee=L.find(pe=>pe.name===e),V=(Ee==null?void 0:Ee.maxConflict)||1,te=z.filter(pe=>pe.parentId===t),de=[t,...te.map(pe=>pe.name)];n(Ik({date:j.split("T")[0],teamName:e,userIdentifier:ne,positionGroupNames:de,maxConflict:V}))},[n,e,t,b,L,z]),R=B.useCallback((j,ne,ie,me)=>{G({row:ie,col:me,table:"absence"});const Ee=se(j,ne);n(mS({date:j.split("T")[0],userIdentifier:ne,isAbsent:!Ee}))},[n,se]),N=B.useCallback((j,ne,ie)=>{n(mS({date:j.split("T")[0],userIdentifier:ne,reason:ie.substring(0,20),isAbsent:!0}))},[n]),x=B.useCallback(()=>{n(Ch(E))},[n,E]),k=B.useCallback(()=>{n(Dk())},[n]),O=(j,ne)=>{const ie=j.split("T")[0],me=E[ie]||v[ie];if(!me||!e||!me.teams[e]||!me.teams[e][ne])return"-";const Ee=me.teams[e][ne];return D.jsx("div",{className:"assigned-positions",children:Ee.map(V=>{const te=z.find(de=>de.name===V);return D.jsx("span",{title:V,className:"pos-emoji",children:(te==null?void 0:te.emoji)||""},V)})})};if(B.useEffect(()=>{const j=ne=>{if(!M)return;const{row:ie,col:me,table:Ee}=M,V=l,te=Ee==="roster"?Z:s;switch(ne.key){case"ArrowUp":ne.preventDefault(),ie>0&&G({row:ie-1,col:me,table:Ee});break;case"ArrowDown":ne.preventDefault(),ie<V.length-1&&G({row:ie+1,col:me,table:Ee});break;case"ArrowLeft":ne.preventDefault(),me>0&&G({row:ie,col:me-1,table:Ee});break;case"ArrowRight":ne.preventDefault(),me<te.length-1&&G({row:ie,col:me+1,table:Ee});break;case"Tab":ne.preventDefault(),ne.shiftKey?ie>0&&G({row:ie-1,col:me,table:Ee}):ie<V.length-1&&G({row:ie+1,col:me,table:Ee});break;case" ":{ne.preventDefault();const de=l[ie],pe=te[me];pe!=null&&pe.email&&(Ee==="roster"?A(de,pe.email,ie,me):R(de,pe.email,ie,me));break}case"Enter":q&&(ne.preventDefault(),x());break;case"Escape":q&&(ne.preventDefault(),k());break}};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[M,l,Z,s,q,A,R,x,k]),c||d||p)return D.jsx(Dc,{});const Me=g||C;if(Me)return D.jsxs("div",{className:"roster-table-error",children:["Error: ",Me]});const qe=t==="Absence";return!qe&&Z.length===0?D.jsx("div",{className:"roster-table-loading",children:"No users found for this position."}):D.jsxs("div",{className:"roster-table-wrapper",children:[!qe&&D.jsx("div",{className:"roster-section",children:D.jsx("div",{className:"roster-table-container",children:D.jsxs("table",{className:"roster-table",children:[D.jsx("thead",{children:D.jsxs("tr",{children:[D.jsx("th",{className:"roster-table-header-cell",children:"Date"}),Z.map(j=>D.jsxs("th",{className:"roster-table-header-cell",children:[j.name,(K==null?void 0:K.sortByGender)&&D.jsxs("span",{className:"gender-label",children:["(",j.gender==="Male"?"M":j.gender==="Female"?"F":"?",")"]})]},j.email))]})}),D.jsx("tbody",{children:l.map((j,ne)=>D.jsxs("tr",{children:[D.jsx("td",{className:"date-cell",children:new Date(j).toLocaleDateString()}),Z.map((ie,me)=>{const Ee=(M==null?void 0:M.row)===ne&&(M==null?void 0:M.col)===me&&(M==null?void 0:M.table)==="roster",V=ie.email?b(j,ie.email):!1,te=ie.email?se(j,ie.email):!1;return D.jsx("td",{className:`roster-cell ${V?"disabled":"clickable"} ${Ee?"focused":""} ${te?"absent-strike":""}`,onClick:()=>{ie.email&&!V&&A(j,ie.email,ne,me)},tabIndex:0,onFocus:()=>G({row:ne,col:me,table:"roster"}),children:ie.email&&(te?"":O(j,ie.email))},ie.email)})]},j))})]})})}),D.jsxs("div",{className:"roster-section absence-section",children:[D.jsx("h3",{className:"section-title",children:"Absence Roster"}),D.jsx("div",{className:"roster-table-container",children:D.jsxs("table",{className:"roster-table absence-table",children:[D.jsx("thead",{children:D.jsxs("tr",{children:[D.jsx("th",{className:"roster-table-header-cell",children:"Date"}),s.map(j=>D.jsx("th",{className:"roster-table-header-cell",children:j.name},j.email))]})}),D.jsx("tbody",{children:l.map((j,ne)=>D.jsxs("tr",{children:[D.jsx("td",{className:"date-cell",children:new Date(j).toLocaleDateString()}),s.map((ie,me)=>{const Ee=(M==null?void 0:M.row)===ne&&(M==null?void 0:M.col)===me&&(M==null?void 0:M.table)==="absence",V=ie.email?se(j,ie.email):!1,te=ie.email?Q(j,ie.email):"";return D.jsx("td",{className:`roster-cell clickable absence-roster-cell ${Ee?"focused":""} ${V?"absent-cell":""}`,onClick:()=>{ie.email&&R(j,ie.email,ne,me)},tabIndex:0,onFocus:()=>G({row:ne,col:me,table:"absence"}),title:te,children:V?D.jsxs("div",{className:"absence-input-container",children:[D.jsx("input",{type:"text",className:"absence-reason-input",value:te,placeholder:"Reason...",maxLength:20,autoFocus:Ee,onClick:de=>de.stopPropagation(),onChange:de=>{ie.email&&N(j,ie.email,de.target.value)}}),D.jsx("button",{className:"remove-absence-btn",onClick:de=>{de.stopPropagation(),ie.email&&R(j,ie.email,ne,me)},title:"Mark as present",children:""})]}):"-"},ie.email)})]},j))})]})})]}),q&&D.jsx("div",{className:"roster-save-footer",children:D.jsxs("div",{className:"save-footer-content",children:[D.jsx("span",{className:"changes-label",children:"You have unsaved changes"}),D.jsxs("div",{className:"save-footer-actions",children:[D.jsx("button",{className:"cancel-btn",onClick:k,disabled:S,children:"Discard"}),D.jsx("button",{className:"save-btn",onClick:x,disabled:S,children:S?"Saving...":"Save Roster"})]})]})})]})},Lk=()=>D.jsx("div",{className:"roster-page",style:{height:"100%"},children:D.jsx(Pk,{})}),kk=({text:n,textAlign:e="left",width:t,minWidth:a,isSticky:s=!1})=>D.jsx("th",{className:s?"sticky-col":void 0,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:a?`${a}px`:"auto"},children:n}),Jt=({isSticky:n=!1,textAlign:e="left",className:t,children:a})=>D.jsx("td",{style:{textAlign:e},className:`${t||""} ${n?"sticky-col":""}
`,children:a}),Pr=({name:n,value:e,placeholder:t,type:a="text",isSticky:s,isReadOnly:l=!1,isChild:c=!1,onChange:d})=>D.jsxs(Jt,{isSticky:s,children:[c&&D.jsx(KR,{}),D.jsx("input",{name:n,className:"form-input",type:a,placeholder:t,value:e,onChange:d,readOnly:l})]}),pS=({name:n,value:e,placeholder:t,onChange:a})=>D.jsxs(Jt,{className:"color-picker-group",children:[D.jsx("input",{name:n,type:"color",value:e||"#FFFFFF",onChange:a}),D.jsx("input",{name:n,className:"form-input",value:e,placeholder:t,onChange:a})]}),yv=({headers:n,children:e})=>D.jsx("div",{className:"app-table-container",children:D.jsxs("table",{className:"app-table",children:[D.jsx("thead",{children:D.jsx("tr",{children:n.map((t,a)=>D.jsx(kk,{...t},a))})}),D.jsx("tbody",{children:e})]})}),bg={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},Uk=()=>{const n=ua(),{positions:e,fetched:t,loading:a}=pt(M=>M.positions),[s,l]=B.useState(e),[c,d]=B.useState(bg),[p,g]=B.useState("idle");B.useEffect(()=>{t||n(Zs())},[n,t]),B.useEffect(()=>{l(e)},[e]);const v=(M,G,q)=>{const K=[...s];K[M]={...K[M],[G]:q},l(K)},E=(M,G)=>{const q=[...s],K=q[M],Z=K.parentId,se=Q=>{const b=q[Q];if(!b)return{block:[],startIndex:-1,endIndex:-1};const A=[],R=[b],N=new Set;let x=Q,k=Q,O=0;for(;O<R.length;){const qe=R[O++];N.has(qe.name)||(N.add(qe.name),A.push(qe),q.forEach((j,ne)=>{j.parentId===qe.name&&!N.has(j.name)&&(R.push(j),x=Math.min(x,ne),k=Math.max(k,ne))}))}return{block:A,startIndex:x,endIndex:k}};if(Z){const Q=q.filter(O=>O.parentId===Z),A=Q.findIndex(O=>O.name===K.name)+(G==="up"?-1:1);if(A<0||A>=Q.length)return;const R=Q[A],N=q.indexOf(K),x=q.indexOf(R);if(N===-1||x===-1)return;const k=[...q];k[N]=R,k[x]=K,l(k)}else{const Q=se(M),{block:b,startIndex:A,endIndex:R}=Q;if(!b||b.length===0)return;if(G==="up"){if(A===0)return;let N=A-1;for(;N>=0&&q[N].parentId;)N--;if(N<0)return;const x=se(N),{block:k,startIndex:O}=x;if(!k||k.length===0)return;const Me=[...q.slice(0,O),...b,...k,...q.slice(R+1)].filter(Boolean);l(Me)}else{if(R===q.length-1)return;let N=R+1;for(;N<q.length&&q[N].parentId;)N++;if(N>=q.length)return;const x=se(N),{block:k,startIndex:O}=x;if(!k||k.length===0)return;const Me=[...q.slice(0,A),...k,...b,...q.slice(O+k.length)].filter(Boolean);l(Me)}}},S=()=>{if(!c.name.trim()||!c.emoji.trim())return alert("Please provide both an emoji and a name.");l([...s,c]),d(bg)},C=M=>{if(window.confirm("Delete this position? This will remove it from the global list, and any associated child positions.")){const G=s[M];let q=s.filter((K,Z)=>Z!==M);G.parentId||(q=q.filter(K=>K.parentId!==G.name)),l(q)}},L=async()=>{g("saving");try{const M=s.map(G=>({...G,parentId:G.parentId===void 0?void 0:G.parentId}));await n(HR(M)).unwrap(),g("success"),setTimeout(()=>g("idle"),2e3)}catch(M){console.error("Save Error:",M),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),g("idle")}},z=M=>{l(G=>{const q={...bg,parentId:M},K=G.findIndex(Q=>Q.name===M);if(K===-1)return[...G,q];let Z=K;for(;Z+1<G.length&&G[Z+1].parentId===M;)Z++;return[...G.slice(0,Z+1),q,...G.slice(Z+1)]})};return a?D.jsx(Dc,{}):D.jsxs(D.Fragment,{children:[D.jsxs(yv,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:80},{text:"Colour",minWidth:100},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[s.map((M,G)=>D.jsxs("tr",{children:[D.jsx(Jt,{textAlign:"center",children:M.parentId?D.jsx(KR,{}):D.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[D.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>E(G,"up"),disabled:G===0,children:""}),D.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>E(G,"down"),disabled:G===s.length-1,children:""})]})}),D.jsx(Pr,{name:`emoji-${G}`,value:M.emoji,onChange:q=>v(G,"emoji",q.target.value)}),D.jsx(Pr,{name:`name-${G}`,value:M.name,onChange:q=>v(G,"name",q.target.value)}),D.jsx(pS,{name:`colour-${G}`,value:M.colour,onChange:q=>v(G,"colour",q.target.value)}),D.jsx(Jt,{textAlign:"center",children:D.jsx(jn,{colour:M.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:M.sortByGender,onClick:()=>v(G,"sortByGender",!M.sortByGender),children:M.sortByGender?"YES":"NO"})}),D.jsx(Jt,{textAlign:"center",children:!M.parentId&&D.jsx("button",{className:"icon-button icon-button--add-child",onClick:()=>z(M.name),title:"Add Child Position",children:"+"})}),D.jsx(Jt,{textAlign:"center",children:D.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>C(G),children:""})})]},`${M.emoji}-${G}`)),D.jsxs("tr",{className:"pos-row-new",children:[D.jsx("td",{className:"",children:""}),D.jsx(Pr,{name:"new-emoji",value:c.emoji,placeholder:"",onChange:M=>d({...c,emoji:M.target.value})}),D.jsx(Pr,{name:"new-name",value:c.name,placeholder:"Position Name",onChange:M=>d({...c,name:M.target.value})}),D.jsx(pS,{name:"new-colour",value:c.colour,placeholder:"#FFFFFF",onChange:M=>d({...c,colour:M.target.value})}),D.jsx(Jt,{textAlign:"center",children:D.jsx(jn,{colour:c.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.sortByGender,onClick:()=>d({...c,sortByGender:!c.sortByGender}),children:c.sortByGender?"YES":"NO"})}),D.jsx(Jt,{textAlign:"center",children:D.jsx("button",{onClick:S,className:"icon-button icon-button--add",disabled:!c.name.trim()||!c.emoji.trim(),children:"Add"})})]})]}),D.jsx("div",{className:"settings-footer",children:D.jsx("button",{className:`save-button ${p}`,onClick:L,disabled:p!=="idle",children:p==="saving"?"Saving...":p==="success"?"Done ":"Save"})})]})},gS={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1},yS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],jk=()=>{var Z,se;const n=ua(),{teams:e,fetched:t,loading:a}=pt(Q=>Q.teams),{positions:s,fetched:l,loading:c}=pt(Q=>Q.positions),[d,p]=B.useState(e),[g,v]=B.useState(gS),[E,S]=B.useState("idle");B.useEffect(()=>{t||n(dl()),l||n(Zs())},[n,t,l]),B.useEffect(()=>{p(e)},[e]);const C=(Q,b,A)=>{const R=[...d];R[Q]={...R[Q],[b]:A},p(R)},L=(Q,b)=>{const A=[...d],R=b==="up"?Q-1:Q+1;if(R<0||R>=A.length)return;const N=A[Q];A[Q]=A[R],A[R]=N,p(A)},z=(Q,b)=>{const A=d.map((R,N)=>{if(N!==Q)return R;const x=R.positions||[],k=x.find(O=>O.name===b.name)?x.filter(O=>O.name!==b.name):[...x,b];return{...R,positions:k}});p(A)},M=(Q,b)=>{const A=d.map((R,N)=>{if(N!==Q)return R;const x=R.preferredDays||[],k=x.includes(b)?x.filter(O=>O!==b):[...x,b];return{...R,preferredDays:k}});p(A)},G=()=>{if(!g.name.trim()||!g.emoji.trim())return alert("Please provide both an emoji and a name for the team.");p([...d,g]),v(gS)},q=Q=>{window.confirm("Are you sure you want to delete this team?")&&p(d.filter((b,A)=>A!==Q))},K=async()=>{S("saving");try{await n(Sh(d)).unwrap(),S("success"),setTimeout(()=>S("idle"),2e3)}catch(Q){console.error("Save Error:",Q),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),S("idle")}};return a||c?D.jsx(Dc,{}):D.jsxs(D.Fragment,{children:[D.jsxs(yv,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:100},{text:"Conflicts",width:60,textAlign:"center"},{text:"Allowed Positions",minWidth:200},{text:"Preferred Days",minWidth:250},{text:"",width:50}],children:[d.map((Q,b)=>{var A,R;return D.jsxs("tr",{children:[D.jsxs(Jt,{children:[" ",D.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[D.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>L(b,"up"),disabled:b===0,children:""}),D.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>L(b,"down"),disabled:b===d.length-1,children:""})]})]}),D.jsx(Pr,{name:`team-emoji-${b}`,value:Q.emoji,onChange:N=>C(b,"emoji",N.target.value)}),D.jsx(Pr,{name:`team-name-${b}`,value:Q.name,onChange:N=>C(b,"name",N.target.value)}),D.jsx(Pr,{name:`team-maxConflict-${b}`,value:((A=Q.maxConflict)==null?void 0:A.toString())||"1",type:"number",onChange:N=>C(b,"maxConflict",parseInt(N.target.value)||1)}),D.jsx(Jt,{children:D.jsx(_i,{nowrap:!0,children:(R=s==null?void 0:s.filter(N=>!N.parentId))==null?void 0:R.map(N=>{var k;const x=(k=Q.positions)==null?void 0:k.some(O=>O.name===N.name);return D.jsx(jn,{colour:N.colour,isActive:x,onClick:()=>z(b,N),children:N.emoji},N.name)})})}),D.jsx(Jt,{children:D.jsx(_i,{nowrap:!0,children:yS.map(N=>{var k;const x=(k=Q.preferredDays)==null?void 0:k.includes(N);return D.jsx(jn,{isActive:x,onClick:()=>M(b,N),children:N.substring(0,3)},N)})})}),D.jsx(Jt,{children:D.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>q(b),children:""})})]},`${Q.emoji}-${b}`)}),D.jsxs("tr",{className:"team-row-new",children:[D.jsx("td",{className:"",children:""}),D.jsx(Pr,{name:"new-team-emoji",value:g.emoji,placeholder:"",onChange:Q=>v({...g,emoji:Q.target.value})}),D.jsx(Pr,{name:"new-team-name",value:g.name,placeholder:"Team Name",onChange:Q=>v({...g,name:Q.target.value})}),D.jsx(Pr,{name:"new-team-maxConflict",value:((Z=g.maxConflict)==null?void 0:Z.toString())||"1",type:"number",onChange:Q=>v({...g,maxConflict:parseInt(Q.target.value)||1})}),D.jsx(Jt,{children:D.jsx(_i,{nowrap:!0,children:(se=s==null?void 0:s.filter(Q=>!Q.parentId))==null?void 0:se.map(Q=>{var A;const b=(A=g.positions)==null?void 0:A.some(R=>R.name===Q.name);return D.jsx(jn,{colour:Q.colour,isActive:b,onClick:()=>v(R=>{const N=R.positions||[],x=N.some(k=>k.name===Q.name)?N.filter(k=>k.name!==Q.name):[...N,Q];return{...R,positions:x}}),children:Q.emoji},`new-${Q.name}`)})})}),D.jsx(Jt,{children:D.jsx(_i,{nowrap:!0,children:yS.map(Q=>{var A;const b=(A=g.preferredDays)==null?void 0:A.includes(Q);return D.jsx(jn,{isActive:b,onClick:()=>v(R=>{const N=R.preferredDays||[],x=N.includes(Q)?N.filter(k=>k!==Q):[...N,Q];return{...R,preferredDays:x}}),children:Q.substring(0,3)},`new-team-${Q}`)})})}),D.jsx(Jt,{children:D.jsx("button",{onClick:G,className:"icon-button icon-button--add",disabled:!g.name.trim()||!g.emoji.trim(),children:"+"})})]})]}),D.jsx("div",{className:"settings-footer",children:D.jsx("button",{className:`save-button ${E}`,onClick:K,disabled:E!=="idle",children:E==="saving"?"Saving...":E==="success"?"Done ":"Save All Team Changes"})})]})},zk={allUsers:[],loading:!1,saving:!1,error:null},xh=Tr("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=Nd(pn,"users"),a=Vd(t),s=await Ld(a),l=[];return s.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),Oh=Tr("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=Xw(pn);n.forEach(a=>{const{id:s,...l}=a;l.teamPositions&&(l.indexedAssignments=XR(l.teamPositions)),t.update(Ur(pn,"users",s),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),e1=co({name:"userManagement",initialState:zk,reducers:{updateUserField(n,e){const{id:t,field:a,value:s}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[a]=s)},toggleUserTeam(n,e){const{userId:t,teamName:a}=e.payload,s=n.allUsers.find(l=>l.id===t);if(s){const l=s.teams||[],c=l.includes(a)?l.filter(d=>d!==a):[...l,a];s.teams=c,s.teamPositions||(s.teamPositions={}),c.includes(a)?s.teamPositions[a]||(s.teamPositions[a]=[]):delete s.teamPositions[a]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:a,posName:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[a]||(l.teamPositions[a]=[]);const c=l.teamPositions[a],d=c.includes(s)?c.filter(p=>p!==s):[...c,s];l.teamPositions[a]=d}}},extraReducers:n=>{n.addCase(xh.pending,e=>{e.loading=!0,e.error=null}).addCase(xh.fulfilled,(e,t)=>{e.allUsers=t.payload,e.loading=!1}).addCase(xh.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Oh.pending,e=>{e.saving=!0,e.error=null}).addCase(Oh.fulfilled,e=>{e.saving=!1}).addCase(Oh.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:Bk,toggleUserTeam:Fk,toggleUserTeamPosition:Hk}=e1.actions,qk=e1.reducer,Gk=({user:n,availableTeams:e,adminEmail:t})=>{var d;const a=ua(),s=(p,g)=>{a(Bk({id:n.id,field:p,value:g}))},l=p=>{a(Fk({userId:n.id,teamName:p}))},c=(p,g)=>{a(Hk({userId:n.id,teamName:p,posName:g}))};return D.jsxs("tr",{children:[D.jsx(Pr,{name:`name-${n.id}`,value:n.name||"",onChange:p=>s("name",p.target.value),isSticky:!0}),D.jsx(Pr,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),D.jsx(Jt,{children:D.jsxs("select",{name:`gender-${n.id}`,className:"form-select",value:n.gender,onChange:p=>s("gender",p.target.value),children:[D.jsx("option",{value:"",children:"-"}),D.jsx("option",{value:"Male",children:"Male"}),D.jsx("option",{value:"Female",children:"Female"})]})}),D.jsx(Jt,{children:D.jsx(_i,{children:e.map(p=>{var v;const g=(v=n.teams)==null?void 0:v.includes(p.name);return D.jsxs(jn,{onClick:()=>l(p.name),isActive:g,children:[D.jsx("span",{children:p.emoji})," ",p.name]},p.name)})})}),D.jsx(Jt,{children:(d=n.teams)==null?void 0:d.map(p=>{var v,E;const g=e.find(S=>S.name===p);return g?D.jsxs("div",{style:{marginBottom:"12px"},children:[D.jsxs("div",{style:{fontSize:"0.65rem",fontWeight:"bold",marginBottom:"4px",color:"var(--color-text-dim)",textTransform:"uppercase"},children:[g.emoji," ",g.name]}),D.jsx(_i,{children:(E=(v=g.positions)==null?void 0:v.filter(S=>!S.parentId))==null?void 0:E.map(S=>{var L,z;const C=(z=(L=n.teamPositions)==null?void 0:L[p])==null?void 0:z.includes(S.name);return D.jsx(jn,{colour:S.colour,isActive:C,onClick:()=>c(p,S.name),children:S.emoji},S.name)})})]},p):null})}),D.jsx(Jt,{children:D.jsx(jn,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),D.jsx(Jt,{children:D.jsx(jn,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),D.jsx(Jt,{children:D.jsx(jn,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id)},$k=()=>{const n=ua(),{allUsers:e,loading:t,saving:a,error:s}=pt(d=>d.userManagement),l=pt(d=>d.teams.teams);B.useEffect(()=>{n(xh())},[n]);const c=()=>{n(Oh(e))};return t?D.jsx(Dc,{}):s?D.jsxs("div",{children:["Error: ",s]}):D.jsxs(D.Fragment,{children:[D.jsx(yv,{headers:[{text:"Name",minWidth:70,isSticky:!0},{text:"Email",minWidth:170},{text:"Gender",minWidth:90},{text:"Teams",minWidth:200},{text:"Positions",minWidth:200},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(d=>D.jsx(Gk,{user:d,availableTeams:l,adminEmail:"chris.sm.kang542@gmail.com"},d.id))}),D.jsx("div",{className:"settings-footer",children:D.jsx("button",{className:`save-button ${a?"saving":""}`,onClick:c,disabled:a,children:a?"Saving Changes...":"Save All User Changes"})})]})},Kk=()=>{const{userData:n}=pt(t=>t.auth),{section:e}=dd();return n?D.jsxs("div",{className:"settings-container",children:[e===sl.PROFILE&&D.jsx(JR,{}),e===sl.USER_MANAGEMENT&&(n.isAdmin?D.jsx($k,{}):D.jsx("p",{children:"Access Denied"})),e===sl.TEAMS&&(n.isAdmin?D.jsx(jk,{}):D.jsx("p",{children:"Access Denied"})),e===sl.POSITIONS&&(n.isAdmin?D.jsx(Uk,{}):D.jsx("p",{children:"Access Denied"}))]}):null},Yk=[{path:"/",element:D.jsx(KP,{})},{path:"/login",element:D.jsx(Rk,{})},{path:"/guest",element:D.jsx(wk,{})},{path:"/app",element:D.jsx(QL,{}),children:[{path:"",element:D.jsx(_k,{}),children:[{path:"roster/:teamName?/:positionName?",element:D.jsx(Lk,{})},{path:"settings/:section?",element:D.jsx(Kk,{})}]}]}];let vS=!1;const Qk=n=>{if(!vS){vS=!0;let e;N4(Sl,t=>{if(t){n.dispatch(Tk(t)),n.dispatch(Ah(t.uid));const a=Ur(pn,"users",t.uid);e=zV(a,s=>{if(s.exists()){const l=s.data();n.dispatch(bk(l))}})}else n.dispatch(Sk()),e&&e()})}return e=>t=>e(t)},Xk=AL({reducer:{auth:Ak,positions:$L,roster:Nk,rosterView:Vk,teams:YL,ui:mk,userManagement:qk},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(Qk)}),Wk=AN(Yk);qC.createRoot(document.getElementById("root")).render(D.jsx(ES.StrictMode,{children:D.jsx(aI,{store:Xk,children:D.jsx(jN,{children:D.jsx($P,{children:D.jsx(kN,{router:Wk})})})})}));
