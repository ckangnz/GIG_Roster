var dI=Object.defineProperty;var mI=(n,e,t)=>e in n?dI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var lg=(n,e,t)=>mI(n,typeof e!="symbol"?e+"":e,t);function pI(n,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function YS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ug={exports:{}},Gu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function gI(){if(cb)return Gu;cb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:a,key:c,ref:s!==void 0?s:null,props:l}}return Gu.Fragment=e,Gu.jsx=t,Gu.jsxs=t,Gu}var hb;function yI(){return hb||(hb=1,ug.exports=gI()),ug.exports}var b=yI(),cg={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb;function _I(){if(fb)return et;fb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function w(L){return L===null||typeof L!="object"?null:(L=S&&L[S]||L["@@iterator"],typeof L=="function"?L:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,U={};function Y(L,se,Ee){this.props=L,this.context=se,this.refs=U,this.updater=Ee||M}Y.prototype.isReactComponent={},Y.prototype.setState=function(L,se){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,se,"setState")},Y.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function z(){}z.prototype=Y.prototype;function Q(L,se,Ee){this.props=L,this.context=se,this.refs=U,this.updater=Ee||M}var ne=Q.prototype=new z;ne.constructor=Q,B(ne,Y.prototype),ne.isPureReactComponent=!0;var ue=Array.isArray;function G(){}var A={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(L,se,Ee){var oe=Ee.ref;return{$$typeof:n,type:L,key:se,ref:oe!==void 0?oe:null,props:Ee}}function x(L,se){return N(L.type,se,L.props)}function O(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function k(L){var se={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Ee){return se[Ee]})}var I=/\/+/g;function ie(L,se){return typeof L=="object"&&L!==null&&L.key!=null?k(""+L.key):se.toString(36)}function Te(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(G,G):(L.status="pending",L.then(function(se){L.status==="pending"&&(L.status="fulfilled",L.value=se)},function(se){L.status==="pending"&&(L.status="rejected",L.reason=se)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function F(L,se,Ee,oe,_e){var be=typeof L;(be==="undefined"||be==="boolean")&&(L=null);var De=!1;if(L===null)De=!0;else switch(be){case"bigint":case"string":case"number":De=!0;break;case"object":switch(L.$$typeof){case n:case e:De=!0;break;case y:return De=L._init,F(De(L._payload),se,Ee,oe,_e)}}if(De)return _e=_e(L),De=oe===""?"."+ie(L,0):oe,ue(_e)?(Ee="",De!=null&&(Ee=De.replace(I,"$&/")+"/"),F(_e,se,Ee,"",function(gt){return gt})):_e!=null&&(O(_e)&&(_e=x(_e,Ee+(_e.key==null||L&&L.key===_e.key?"":(""+_e.key).replace(I,"$&/")+"/")+De)),se.push(_e)),1;De=0;var Be=oe===""?".":oe+":";if(ue(L))for(var $e=0;$e<L.length;$e++)oe=L[$e],be=Be+ie(oe,$e),De+=F(oe,se,Ee,be,_e);else if($e=w(L),typeof $e=="function")for(L=$e.call(L),$e=0;!(oe=L.next()).done;)oe=oe.value,be=Be+ie(oe,$e++),De+=F(oe,se,Ee,be,_e);else if(be==="object"){if(typeof L.then=="function")return F(Te(L),se,Ee,oe,_e);throw se=String(L),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return De}function me(L,se,Ee){if(L==null)return L;var oe=[],_e=0;return F(L,oe,"","",function(be){return se.call(Ee,be,_e++)}),oe}function ye(L){if(L._status===-1){var se=L._result;se=se(),se.then(function(Ee){(L._status===0||L._status===-1)&&(L._status=1,L._result=Ee)},function(Ee){(L._status===0||L._status===-1)&&(L._status=2,L._result=Ee)}),L._status===-1&&(L._status=0,L._result=se)}if(L._status===1)return L._result.default;throw L._result}var Me=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Ue={map:me,forEach:function(L,se,Ee){me(L,function(){se.apply(this,arguments)},Ee)},count:function(L){var se=0;return me(L,function(){se++}),se},toArray:function(L){return me(L,function(se){return se})||[]},only:function(L){if(!O(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return et.Activity=E,et.Children=Ue,et.Component=Y,et.Fragment=t,et.Profiler=s,et.PureComponent=Q,et.StrictMode=a,et.Suspense=m,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,et.__COMPILER_RUNTIME={__proto__:null,c:function(L){return A.H.useMemoCache(L)}},et.cache=function(L){return function(){return L.apply(null,arguments)}},et.cacheSignal=function(){return null},et.cloneElement=function(L,se,Ee){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var oe=B({},L.props),_e=L.key;if(se!=null)for(be in se.key!==void 0&&(_e=""+se.key),se)!R.call(se,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&se.ref===void 0||(oe[be]=se[be]);var be=arguments.length-2;if(be===1)oe.children=Ee;else if(1<be){for(var De=Array(be),Be=0;Be<be;Be++)De[Be]=arguments[Be+2];oe.children=De}return N(L.type,_e,oe)},et.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},et.createElement=function(L,se,Ee){var oe,_e={},be=null;if(se!=null)for(oe in se.key!==void 0&&(be=""+se.key),se)R.call(se,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(_e[oe]=se[oe]);var De=arguments.length-2;if(De===1)_e.children=Ee;else if(1<De){for(var Be=Array(De),$e=0;$e<De;$e++)Be[$e]=arguments[$e+2];_e.children=Be}if(L&&L.defaultProps)for(oe in De=L.defaultProps,De)_e[oe]===void 0&&(_e[oe]=De[oe]);return N(L,be,_e)},et.createRef=function(){return{current:null}},et.forwardRef=function(L){return{$$typeof:d,render:L}},et.isValidElement=O,et.lazy=function(L){return{$$typeof:y,_payload:{_status:-1,_result:L},_init:ye}},et.memo=function(L,se){return{$$typeof:g,type:L,compare:se===void 0?null:se}},et.startTransition=function(L){var se=A.T,Ee={};A.T=Ee;try{var oe=L(),_e=A.S;_e!==null&&_e(Ee,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(G,Me)}catch(be){Me(be)}finally{se!==null&&Ee.types!==null&&(se.types=Ee.types),A.T=se}},et.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},et.use=function(L){return A.H.use(L)},et.useActionState=function(L,se,Ee){return A.H.useActionState(L,se,Ee)},et.useCallback=function(L,se){return A.H.useCallback(L,se)},et.useContext=function(L){return A.H.useContext(L)},et.useDebugValue=function(){},et.useDeferredValue=function(L,se){return A.H.useDeferredValue(L,se)},et.useEffect=function(L,se){return A.H.useEffect(L,se)},et.useEffectEvent=function(L){return A.H.useEffectEvent(L)},et.useId=function(){return A.H.useId()},et.useImperativeHandle=function(L,se,Ee){return A.H.useImperativeHandle(L,se,Ee)},et.useInsertionEffect=function(L,se){return A.H.useInsertionEffect(L,se)},et.useLayoutEffect=function(L,se){return A.H.useLayoutEffect(L,se)},et.useMemo=function(L,se){return A.H.useMemo(L,se)},et.useOptimistic=function(L,se){return A.H.useOptimistic(L,se)},et.useReducer=function(L,se,Ee){return A.H.useReducer(L,se,Ee)},et.useRef=function(L){return A.H.useRef(L)},et.useState=function(L){return A.H.useState(L)},et.useSyncExternalStore=function(L,se,Ee){return A.H.useSyncExternalStore(L,se,Ee)},et.useTransition=function(){return A.H.useTransition()},et.version="19.2.4",et}var db;function Od(){return db||(db=1,cg.exports=_I()),cg.exports}var P=Od();const QS=YS(P),vI=pI({__proto__:null,default:QS},[P]);var hg={exports:{}},$u={},fg={exports:{}},dg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb;function EI(){return mb||(mb=1,(function(n){function e(F,me){var ye=F.length;F.push(me);e:for(;0<ye;){var Me=ye-1>>>1,Ue=F[Me];if(0<s(Ue,me))F[Me]=me,F[ye]=Ue,ye=Me;else break e}}function t(F){return F.length===0?null:F[0]}function a(F){if(F.length===0)return null;var me=F[0],ye=F.pop();if(ye!==me){F[0]=ye;e:for(var Me=0,Ue=F.length,L=Ue>>>1;Me<L;){var se=2*(Me+1)-1,Ee=F[se],oe=se+1,_e=F[oe];if(0>s(Ee,ye))oe<Ue&&0>s(_e,Ee)?(F[Me]=_e,F[oe]=ye,Me=oe):(F[Me]=Ee,F[se]=ye,Me=se);else if(oe<Ue&&0>s(_e,ye))F[Me]=_e,F[oe]=ye,Me=oe;else break e}}return me}function s(F,me){var ye=F.sortIndex-me.sortIndex;return ye!==0?ye:F.id-me.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],y=1,E=null,S=3,w=!1,M=!1,B=!1,U=!1,Y=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ne(F){for(var me=t(g);me!==null;){if(me.callback===null)a(g);else if(me.startTime<=F)a(g),me.sortIndex=me.expirationTime,e(m,me);else break;me=t(g)}}function ue(F){if(B=!1,ne(F),!M)if(t(m)!==null)M=!0,G||(G=!0,k());else{var me=t(g);me!==null&&Te(ue,me.startTime-F)}}var G=!1,A=-1,R=5,N=-1;function x(){return U?!0:!(n.unstable_now()-N<R)}function O(){if(U=!1,G){var F=n.unstable_now();N=F;var me=!0;try{e:{M=!1,B&&(B=!1,z(A),A=-1),w=!0;var ye=S;try{t:{for(ne(F),E=t(m);E!==null&&!(E.expirationTime>F&&x());){var Me=E.callback;if(typeof Me=="function"){E.callback=null,S=E.priorityLevel;var Ue=Me(E.expirationTime<=F);if(F=n.unstable_now(),typeof Ue=="function"){E.callback=Ue,ne(F),me=!0;break t}E===t(m)&&a(m),ne(F)}else a(m);E=t(m)}if(E!==null)me=!0;else{var L=t(g);L!==null&&Te(ue,L.startTime-F),me=!1}}break e}finally{E=null,S=ye,w=!1}me=void 0}}finally{me?k():G=!1}}}var k;if(typeof Q=="function")k=function(){Q(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ie=I.port2;I.port1.onmessage=O,k=function(){ie.postMessage(null)}}else k=function(){Y(O,0)};function Te(F,me){A=Y(function(){F(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(F){switch(S){case 1:case 2:case 3:var me=3;break;default:me=S}var ye=S;S=me;try{return F()}finally{S=ye}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(F,me){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ye=S;S=F;try{return me()}finally{S=ye}},n.unstable_scheduleCallback=function(F,me,ye){var Me=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Me+ye:Me):ye=Me,F){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ye+Ue,F={id:y++,callback:me,priorityLevel:F,startTime:ye,expirationTime:Ue,sortIndex:-1},ye>Me?(F.sortIndex=ye,e(g,F),t(m)===null&&F===t(g)&&(B?(z(A),A=-1):B=!0,Te(ue,ye-Me))):(F.sortIndex=Ue,e(m,F),M||w||(M=!0,G||(G=!0,k()))),F},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(F){var me=S;return function(){var ye=S;S=me;try{return F.apply(this,arguments)}finally{S=ye}}}})(dg)),dg}var pb;function TI(){return pb||(pb=1,fg.exports=EI()),fg.exports}var mg={exports:{}},Jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gb;function bI(){if(gb)return Jn;gb=1;var n=Od();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(m,g,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:m,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Jn.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,y)},Jn.flushSync=function(m){var g=c.T,y=a.p;try{if(c.T=null,a.p=2,m)return m()}finally{c.T=g,a.p=y,a.d.f()}},Jn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(m,g))},Jn.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},Jn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,E=d(y,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?a.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:w}):y==="script"&&a.d.X(m,{crossOrigin:E,integrity:S,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Jn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);a.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(m)},Jn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,E=d(y,g.crossOrigin);a.d.L(m,y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Jn.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=d(g.as,g.crossOrigin);a.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(m)},Jn.requestFormReset=function(m){a.d.r(m)},Jn.unstable_batchedUpdates=function(m,g){return m(g)},Jn.useFormState=function(m,g,y){return c.H.useFormState(m,g,y)},Jn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Jn.version="19.2.4",Jn}var yb;function XS(){if(yb)return mg.exports;yb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mg.exports=bI(),mg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b;function SI(){if(_b)return $u;_b=1;var n=TI(),e=Od(),t=XS();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(a(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,u=i;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),r;if(p===u)return m(f),i;p=p.sibling}throw Error(a(188))}if(o.return!==u.return)o=f,u=p;else{for(var v=!1,C=f.child;C;){if(C===o){v=!0,o=f,u=p;break}if(C===u){v=!0,u=f,o=p;break}C=C.sibling}if(!v){for(C=p.child;C;){if(C===o){v=!0,o=p,u=f;break}if(C===u){v=!0,u=p,o=f;break}C=C.sibling}if(!v)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function y(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=y(r),i!==null)return i;r=r.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function k(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var I=Symbol.for("react.client.reference");function ie(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===I?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case B:return"Fragment";case Y:return"Profiler";case U:return"StrictMode";case ue:return"Suspense";case G:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case M:return"Portal";case Q:return r.displayName||"Context";case z:return(r._context.displayName||"Context")+".Consumer";case ne:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case A:return i=r.displayName||null,i!==null?i:ie(r.type)||"Memo";case R:i=r._payload,r=r._init;try{return ie(r(i))}catch{}}return null}var Te=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Me=[],Ue=-1;function L(r){return{current:r}}function se(r){0>Ue||(r.current=Me[Ue],Me[Ue]=null,Ue--)}function Ee(r,i){Ue++,Me[Ue]=r.current,r.current=i}var oe=L(null),_e=L(null),be=L(null),De=L(null);function Be(r,i){switch(Ee(be,i),Ee(_e,r),Ee(oe,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?MT(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=MT(i),r=PT(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}se(oe),Ee(oe,r)}function $e(){se(oe),se(_e),se(be)}function gt(r){r.memoizedState!==null&&Ee(De,r);var i=oe.current,o=PT(i,r.type);i!==o&&(Ee(_e,r),Ee(oe,o))}function jt(r){_e.current===r&&(se(oe),se(_e)),De.current===r&&(se(De),Bu._currentValue=ye)}var dt,en;function hn(r){if(dt===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);dt=i&&i[1]||"",en=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dt+r+en}var Br=!1;function rn(r,i){if(!r||Br)return"";Br=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ae){var te=ae}Reflect.construct(r,[],de)}else{try{de.call()}catch(ae){te=ae}r.call(de.prototype)}}else{try{throw Error()}catch(ae){te=ae}(de=r())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),v=p[0],C=p[1];if(v&&C){var j=v.split(`
`),Z=C.split(`
`);for(f=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(u===j.length||f===Z.length)for(u=j.length-1,f=Z.length-1;1<=u&&0<=f&&j[u]!==Z[f];)f--;for(;1<=u&&0<=f;u--,f--)if(j[u]!==Z[f]){if(u!==1||f!==1)do if(u--,f--,0>f||j[u]!==Z[f]){var le=`
`+j[u].replace(" at new "," at ");return r.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",r.displayName)),le}while(1<=u&&0<=f);break}}}finally{Br=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?hn(o):""}function Mn(r,i){switch(r.tag){case 26:case 27:case 5:return hn(r.type);case 16:return hn("Lazy");case 13:return r.child!==i&&i!==null?hn("Suspense Fallback"):hn("Suspense");case 19:return hn("SuspenseList");case 0:case 15:return rn(r.type,!1);case 11:return rn(r.type.render,!1);case 1:return rn(r.type,!0);case 31:return hn("Activity");default:return""}}function lr(r){try{var i="",o=null;do i+=Mn(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var qt=Object.prototype.hasOwnProperty,ht=n.unstable_scheduleCallback,En=n.unstable_cancelCallback,Hr=n.unstable_shouldYield,Pn=n.unstable_requestPaint,xt=n.unstable_now,Un=n.unstable_getCurrentPriorityLevel,ci=n.unstable_ImmediatePriority,q=n.unstable_UserBlockingPriority,ce=n.unstable_NormalPriority,Ce=n.unstable_LowPriority,ve=n.unstable_IdlePriority,xe=n.log,Fe=n.unstable_setDisableYieldValue,yt=null,Oe=null;function Xe(r){if(typeof xe=="function"&&Fe(r),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(yt,r)}catch{}}var Se=Math.clz32?Math.clz32:kn,it=Math.log,pn=Math.LN2;function kn(r){return r>>>=0,r===0?32:31-(it(r)/pn|0)|0}var an=256,zn=262144,Ot=4194304;function Fr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Er(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,p=r.suspendedLanes,v=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~p,u!==0?f=Fr(u):(v&=C,v!==0?f=Fr(v):o||(o=C&~r,o!==0&&(f=Fr(o))))):(C=u&~p,C!==0?f=Fr(C):v!==0?f=Fr(v):o||(o=u&~r,o!==0&&(f=Fr(o)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,o=i&-i,p>=o||p===32&&(o&4194048)!==0)?i:f}function Tr(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Co(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qi(){var r=Ot;return Ot<<=1,(Ot&62914560)===0&&(Ot=4194304),r}function ir(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Ci(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Zl(r,i,o,u,f,p){var v=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var C=r.entanglements,j=r.expirationTimes,Z=r.hiddenUpdates;for(o=v&~o;0<o;){var le=31-Se(o),de=1<<le;C[le]=0,j[le]=-1;var te=Z[le];if(te!==null)for(Z[le]=null,le=0;le<te.length;le++){var ae=te[le];ae!==null&&(ae.lane&=-536870913)}o&=~de}u!==0&&Xi(r,u,0),p!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=p&~(v&~i))}function Xi(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Se(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function V(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Se(o),f=1<<u;f&i|r[u]&i&&(r[u]|=i),o&=~f}}function $(r,i){var o=i&-i;return o=(o&42)!==0?1:ee(o),(o&(r.suspendedLanes|i))!==0?0:o}function ee(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ge(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ae(){var r=me.p;return r!==0?r:(r=window.event,r===void 0?32:rb(r.type))}function Pe(r,i){var o=me.p;try{return me.p=r,i()}finally{me.p=o}}var je=Math.random().toString(36).slice(2),we="__reactFiber$"+je,Ie="__reactProps$"+je,Ve="__reactContainer$"+je,Ye="__reactEvents$"+je,He="__reactListeners$"+je,Je="__reactHandles$"+je,ut="__reactResources$"+je,Lt="__reactMarker$"+je;function Xt(r){delete r[we],delete r[Ie],delete r[Ye],delete r[He],delete r[Je]}function $t(r){var i=r[we];if(i)return i;for(var o=r.parentNode;o;){if(i=o[Ve]||o[we]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=BT(r);r!==null;){if(o=r[we])return o;r=BT(r)}return i}r=o,o=r.parentNode}return null}function at(r){if(r=r[we]||r[Ve]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function Kt(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function Vn(r){var i=r[ut];return i||(i=r[ut]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Yt(r){r[Lt]=!0}var ur=new Set,Xn={};function cr(r,i){Wn(r,i),Wn(r+"Capture",i)}function Wn(r,i){for(Xn[r]=i,r=0;r<i.length;r++)ur.add(i[r])}var br=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ri={},Ii={};function ft(r){return qt.call(Ii,r)?!0:qt.call(Ri,r)?!1:br.test(r)?Ii[r]=!0:(Ri[r]=!0,!1)}function sn(r,i,o){if(ft(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function Tn(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function Ut(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function st(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Sr(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function xa(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,p=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,p.call(this,v)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function It(r){if(!r._valueTracker){var i=Sr(r)?"checked":"value";r._valueTracker=xa(r,i,""+r[i])}}function Ms(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=Sr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function Di(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ps=/[\n"\\]/g;function hr(r){return r.replace(Ps,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ro(r,i,o,u,f,p,v,C){r.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?r.type=v:r.removeAttribute("type"),i!=null?v==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+st(i)):r.value!==""+st(i)&&(r.value=""+st(i)):v!=="submit"&&v!=="reset"||r.removeAttribute("value"),i!=null?eu(r,v,st(i)):o!=null?eu(r,v,st(o)):u!=null&&r.removeAttribute("value"),f==null&&p!=null&&(r.defaultChecked=!!p),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+st(C):r.removeAttribute("name")}function Jc(r,i,o,u,f,p,v,C){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){It(r);return}o=o!=null?""+st(o):"",i=i!=null?""+st(i):o,C||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.name=v),It(r)}function eu(r,i,o){i==="number"&&Di(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Oa(r,i,o,u){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+st(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function Zc(r,i,o){if(i!=null&&(i=""+st(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+st(o):""}function Ma(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(Te(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=st(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),It(r)}function fr(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var eh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tu(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||eh.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function nu(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&tu(r,f,u)}else for(var p in i)i.hasOwnProperty(p)&&tu(r,p,i[p])}function Io(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var th=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Do(r){return Pa.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function hi(){}var ru=null;function qr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ka=null,Ni=null;function ks(r){var i=at(r);if(i&&(r=i.stateNode)){var o=r[Ie]||null;e:switch(r=i.stateNode,i.type){case"input":if(Ro(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+hr(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var f=u[Ie]||null;if(!f)throw Error(a(90));Ro(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&Ms(u)}break e;case"textarea":Zc(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Oa(r,!!o.multiple,i,!1)}}}var No=!1;function Va(r,i,o){if(No)return r(i,o);No=!0;try{var u=r(i);return u}finally{if(No=!1,(ka!==null||Ni!==null)&&(Yh(),ka&&(i=ka,r=Ni,Ni=ka=null,ks(i),r)))for(i=0;i<r.length;i++)ks(r[i])}}function fi(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Ie]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vs=!1;if(Gr)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Vs=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{Vs=!1}var xi=null,iu=null,js=null;function au(){if(js)return js;var r,i=iu,o=i.length,u,f="value"in xi?xi.value:xi.textContent,p=f.length;for(r=0;r<o&&i[r]===f[r];r++);var v=o-r;for(u=1;u<=v&&i[o-u]===f[p-u];u++);return js=f.slice(r,1<u?1-u:void 0)}function Ls(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Wi(){return!0}function di(){return!1}function Bn(r){function i(o,u,f,p,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(o=r[C],this[C]=o?o(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Wi:di,this.isPropagationStopped=di,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),i}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=Bn(Ji),ja=E({},Ji,{view:0,detail:0}),su=Bn(ja),La,xo,Mi,Oo=E({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Mi&&(Mi&&r.type==="mousemove"?(La=r.screenX-Mi.screenX,xo=r.screenY-Mi.screenY):xo=La=0,Mi=r),La)},movementY:function(r){return"movementY"in r?r.movementY:xo}}),ou=Bn(Oo),Us=E({},Oo,{dataTransfer:0}),nh=Bn(Us),rh=E({},ja,{relatedTarget:0}),zs=Bn(rh),lu=E({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),ih=Bn(lu),Mo=E({},Ji,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ah=Bn(Mo),sh=E({},Ji,{data:0}),Pi=Bn(sh),oh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ch(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=uh[r])?!!i[r]:!1}function Ua(){return ch}var ar=E({},ja,{key:function(r){if(r.key){var i=oh[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ls(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?lh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(r){return r.type==="keypress"?Ls(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ls(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),hh=Bn(ar),fh=E({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zi=Bn(fh),h=E({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),_=Bn(h),T=E({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=Bn(T),W=E({},Oo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),re=Bn(W),Re=E({},Ji,{newState:0,oldState:0}),nt=Bn(Re),gn=[9,13,27,32],Dt=Gr&&"CompositionEvent"in window,tn=null;Gr&&"documentMode"in document&&(tn=document.documentMode);var $r=Gr&&"TextEvent"in window&&!tn,ki=Gr&&(!Dt||tn&&8<tn&&11>=tn),mi=" ",pi=!1;function Bs(r,i){switch(r){case"keyup":return gn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Po(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ko=!1;function jC(r,i){switch(r){case"compositionend":return Po(i);case"keypress":return i.which!==32?null:(pi=!0,mi);case"textInput":return r=i.data,r===mi&&pi?null:r;default:return null}}function LC(r,i){if(ko)return r==="compositionend"||!Dt&&Bs(r,i)?(r=au(),js=iu=xi=null,ko=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ki&&i.locale!=="ko"?null:i.data;default:return null}}var UC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q_(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!UC[r.type]:i==="textarea"}function G_(r,i,o,u){ka?Ni?Ni.push(u):Ni=[u]:ka=u,i=tf(i,"onChange"),0<i.length&&(o=new Oi("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var uu=null,cu=null;function zC(r){RT(r,0)}function dh(r){var i=Kt(r);if(Ms(i))return r}function $_(r,i){if(r==="change")return i}var K_=!1;if(Gr){var pm;if(Gr){var gm="oninput"in document;if(!gm){var Y_=document.createElement("div");Y_.setAttribute("oninput","return;"),gm=typeof Y_.oninput=="function"}pm=gm}else pm=!1;K_=pm&&(!document.documentMode||9<document.documentMode)}function Q_(){uu&&(uu.detachEvent("onpropertychange",X_),cu=uu=null)}function X_(r){if(r.propertyName==="value"&&dh(cu)){var i=[];G_(i,cu,r,qr(r)),Va(zC,i)}}function BC(r,i,o){r==="focusin"?(Q_(),uu=i,cu=o,uu.attachEvent("onpropertychange",X_)):r==="focusout"&&Q_()}function HC(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return dh(cu)}function FC(r,i){if(r==="click")return dh(i)}function qC(r,i){if(r==="input"||r==="change")return dh(i)}function GC(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Ar=typeof Object.is=="function"?Object.is:GC;function hu(r,i){if(Ar(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!qt.call(i,f)||!Ar(r[f],i[f]))return!1}return!0}function W_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function J_(r,i){var o=W_(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=W_(o)}}function Z_(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Z_(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function ev(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Di(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=Di(r.document)}return i}function ym(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var $C=Gr&&"documentMode"in document&&11>=document.documentMode,Vo=null,_m=null,fu=null,vm=!1;function tv(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;vm||Vo==null||Vo!==Di(u)||(u=Vo,"selectionStart"in u&&ym(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),fu&&hu(fu,u)||(fu=u,u=tf(_m,"onSelect"),0<u.length&&(i=new Oi("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Vo)))}function Hs(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var jo={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionrun:Hs("Transition","TransitionRun"),transitionstart:Hs("Transition","TransitionStart"),transitioncancel:Hs("Transition","TransitionCancel"),transitionend:Hs("Transition","TransitionEnd")},Em={},nv={};Gr&&(nv=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function Fs(r){if(Em[r])return Em[r];if(!jo[r])return r;var i=jo[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in nv)return Em[r]=i[o];return r}var rv=Fs("animationend"),iv=Fs("animationiteration"),av=Fs("animationstart"),KC=Fs("transitionrun"),YC=Fs("transitionstart"),QC=Fs("transitioncancel"),sv=Fs("transitionend"),ov=new Map,Tm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tm.push("scrollEnd");function gi(r,i){ov.set(r,i),cr(i,[r])}var mh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Kr=[],Lo=0,bm=0;function ph(){for(var r=Lo,i=bm=Lo=0;i<r;){var o=Kr[i];Kr[i++]=null;var u=Kr[i];Kr[i++]=null;var f=Kr[i];Kr[i++]=null;var p=Kr[i];if(Kr[i++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}p!==0&&lv(o,f,p)}}function gh(r,i,o,u){Kr[Lo++]=r,Kr[Lo++]=i,Kr[Lo++]=o,Kr[Lo++]=u,bm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Sm(r,i,o,u){return gh(r,i,o,u),yh(r)}function qs(r,i){return gh(r,null,null,i),yh(r)}function lv(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(f=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,f&&i!==null&&(f=31-Se(o),r=p.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=o|536870912),p):null}function yh(r){if(50<Pu)throw Pu=0,Op=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Uo={};function XC(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(r,i,o,u){return new XC(r,i,o,u)}function Am(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ea(r,i){var o=r.alternate;return o===null?(o=wr(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function uv(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function _h(r,i,o,u,f,p){var v=0;if(u=r,typeof r=="function")Am(r)&&(v=1);else if(typeof r=="string")v=tI(r,o,oe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=wr(31,o,i,f),r.elementType=N,r.lanes=p,r;case B:return Gs(o.children,f,p,i);case U:v=8,f|=24;break;case Y:return r=wr(12,o,i,f|2),r.elementType=Y,r.lanes=p,r;case ue:return r=wr(13,o,i,f),r.elementType=ue,r.lanes=p,r;case G:return r=wr(19,o,i,f),r.elementType=G,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Q:v=10;break e;case z:v=9;break e;case ne:v=11;break e;case A:v=14;break e;case R:v=16,u=null;break e}v=29,o=Error(a(130,r===null?"null":typeof r,"")),u=null}return i=wr(v,o,i,f),i.elementType=r,i.type=u,i.lanes=p,i}function Gs(r,i,o,u){return r=wr(7,r,u,i),r.lanes=o,r}function wm(r,i,o){return r=wr(6,r,null,i),r.lanes=o,r}function cv(r){var i=wr(18,null,null,0);return i.stateNode=r,i}function Cm(r,i,o){return i=wr(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var hv=new WeakMap;function Yr(r,i){if(typeof r=="object"&&r!==null){var o=hv.get(r);return o!==void 0?o:(i={value:r,source:i,stack:lr(i)},hv.set(r,i),i)}return{value:r,source:i,stack:lr(i)}}var zo=[],Bo=0,vh=null,du=0,Qr=[],Xr=0,za=null,Vi=1,ji="";function ta(r,i){zo[Bo++]=du,zo[Bo++]=vh,vh=r,du=i}function fv(r,i,o){Qr[Xr++]=Vi,Qr[Xr++]=ji,Qr[Xr++]=za,za=r;var u=Vi;r=ji;var f=32-Se(u)-1;u&=~(1<<f),o+=1;var p=32-Se(i)+f;if(30<p){var v=f-f%5;p=(u&(1<<v)-1).toString(32),u>>=v,f-=v,Vi=1<<32-Se(i)+f|o<<f|u,ji=p+r}else Vi=1<<p|o<<f|u,ji=r}function Rm(r){r.return!==null&&(ta(r,1),fv(r,1,0))}function Im(r){for(;r===vh;)vh=zo[--Bo],zo[Bo]=null,du=zo[--Bo],zo[Bo]=null;for(;r===za;)za=Qr[--Xr],Qr[Xr]=null,ji=Qr[--Xr],Qr[Xr]=null,Vi=Qr[--Xr],Qr[Xr]=null}function dv(r,i){Qr[Xr++]=Vi,Qr[Xr++]=ji,Qr[Xr++]=za,Vi=i.id,ji=i.overflow,za=r}var Hn=null,Wt=null,St=!1,Ba=null,Wr=!1,Dm=Error(a(519));function Ha(r){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mu(Yr(i,r)),Dm}function mv(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[we]=r,i[Ie]=u,o){case"dialog":pt("cancel",i),pt("close",i);break;case"iframe":case"object":case"embed":pt("load",i);break;case"video":case"audio":for(o=0;o<Vu.length;o++)pt(Vu[o],i);break;case"source":pt("error",i);break;case"img":case"image":case"link":pt("error",i),pt("load",i);break;case"details":pt("toggle",i);break;case"input":pt("invalid",i),Jc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":pt("invalid",i);break;case"textarea":pt("invalid",i),Ma(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||xT(i.textContent,o)?(u.popover!=null&&(pt("beforetoggle",i),pt("toggle",i)),u.onScroll!=null&&pt("scroll",i),u.onScrollEnd!=null&&pt("scrollend",i),u.onClick!=null&&(i.onclick=hi),i=!0):i=!1,i||Ha(r,!0)}function pv(r){for(Hn=r.return;Hn;)switch(Hn.tag){case 5:case 31:case 13:Wr=!1;return;case 27:case 3:Wr=!0;return;default:Hn=Hn.return}}function Ho(r){if(r!==Hn)return!1;if(!St)return pv(r),St=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Kp(r.type,r.memoizedProps)),o=!o),o&&Wt&&Ha(r),pv(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Wt=zT(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Wt=zT(r)}else i===27?(i=Wt,ns(r.type)?(r=Jp,Jp=null,Wt=r):Wt=i):Wt=Hn?Zr(r.stateNode.nextSibling):null;return!0}function $s(){Wt=Hn=null,St=!1}function Nm(){var r=Ba;return r!==null&&(gr===null?gr=r:gr.push.apply(gr,r),Ba=null),r}function mu(r){Ba===null?Ba=[r]:Ba.push(r)}var xm=L(null),Ks=null,na=null;function Fa(r,i,o){Ee(xm,i._currentValue),i._currentValue=o}function ra(r){r._currentValue=xm.current,se(xm)}function Om(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function Mm(r,i,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var p=f.dependencies;if(p!==null){var v=f.child;p=p.firstContext;e:for(;p!==null;){var C=p;p=f;for(var j=0;j<i.length;j++)if(C.context===i[j]){p.lanes|=o,C=p.alternate,C!==null&&(C.lanes|=o),Om(p.return,o,r),u||(v=null);break e}p=C.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(a(341));v.lanes|=o,p=v.alternate,p!==null&&(p.lanes|=o),Om(v,o,r),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===r){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Fo(r,i,o,u){r=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var C=f.type;Ar(f.pendingProps.value,v.value)||(r!==null?r.push(C):r=[C])}}else if(f===De.current){if(v=f.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Bu):r=[Bu])}f=f.return}r!==null&&Mm(i,r,o,u),i.flags|=262144}function Eh(r){for(r=r.firstContext;r!==null;){if(!Ar(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ys(r){Ks=r,na=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Fn(r){return gv(Ks,r)}function Th(r,i){return Ks===null&&Ys(r),gv(r,i)}function gv(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},na===null){if(r===null)throw Error(a(308));na=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else na=na.next=i;return o}var WC=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},JC=n.unstable_scheduleCallback,ZC=n.unstable_NormalPriority,bn={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pm(){return{controller:new WC,data:new Map,refCount:0}}function pu(r){r.refCount--,r.refCount===0&&JC(ZC,function(){r.controller.abort()})}var gu=null,km=0,qo=0,Go=null;function eR(r,i){if(gu===null){var o=gu=[];km=0,qo=Lp(),Go={status:"pending",value:void 0,then:function(u){o.push(u)}}}return km++,i.then(yv,yv),i}function yv(){if(--km===0&&gu!==null){Go!==null&&(Go.status="fulfilled");var r=gu;gu=null,qo=0,Go=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function tR(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var _v=F.S;F.S=function(r,i){tT=xt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&eR(r,i),_v!==null&&_v(r,i)};var Qs=L(null);function Vm(){var r=Qs.current;return r!==null?r:Gt.pooledCache}function bh(r,i){i===null?Ee(Qs,Qs.current):Ee(Qs,i.pool)}function vv(){var r=Vm();return r===null?null:{parent:bn._currentValue,pool:r}}var $o=Error(a(460)),jm=Error(a(474)),Sh=Error(a(542)),Ah={then:function(){}};function Ev(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Tv(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(hi,hi),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Sv(r),r;default:if(typeof i.status=="string")i.then(hi,hi);else{if(r=Gt,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Sv(r),r}throw Ws=i,$o}}function Xs(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ws=o,$o):o}}var Ws=null;function bv(){if(Ws===null)throw Error(a(459));var r=Ws;return Ws=null,r}function Sv(r){if(r===$o||r===Sh)throw Error(a(483))}var Ko=null,yu=0;function wh(r){var i=yu;return yu+=1,Ko===null&&(Ko=[]),Tv(Ko,r,i)}function _u(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Ch(r,i){throw i.$$typeof===S?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Av(r){function i(K,H){if(r){var J=K.deletions;J===null?(K.deletions=[H],K.flags|=16):J.push(H)}}function o(K,H){if(!r)return null;for(;H!==null;)i(K,H),H=H.sibling;return null}function u(K){for(var H=new Map;K!==null;)K.key!==null?H.set(K.key,K):H.set(K.index,K),K=K.sibling;return H}function f(K,H){return K=ea(K,H),K.index=0,K.sibling=null,K}function p(K,H,J){return K.index=J,r?(J=K.alternate,J!==null?(J=J.index,J<H?(K.flags|=67108866,H):J):(K.flags|=67108866,H)):(K.flags|=1048576,H)}function v(K){return r&&K.alternate===null&&(K.flags|=67108866),K}function C(K,H,J,he){return H===null||H.tag!==6?(H=wm(J,K.mode,he),H.return=K,H):(H=f(H,J),H.return=K,H)}function j(K,H,J,he){var qe=J.type;return qe===B?le(K,H,J.props.children,he,J.key):H!==null&&(H.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===R&&Xs(qe)===H.type)?(H=f(H,J.props),_u(H,J),H.return=K,H):(H=_h(J.type,J.key,J.props,null,K.mode,he),_u(H,J),H.return=K,H)}function Z(K,H,J,he){return H===null||H.tag!==4||H.stateNode.containerInfo!==J.containerInfo||H.stateNode.implementation!==J.implementation?(H=Cm(J,K.mode,he),H.return=K,H):(H=f(H,J.children||[]),H.return=K,H)}function le(K,H,J,he,qe){return H===null||H.tag!==7?(H=Gs(J,K.mode,he,qe),H.return=K,H):(H=f(H,J),H.return=K,H)}function de(K,H,J){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=wm(""+H,K.mode,J),H.return=K,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return J=_h(H.type,H.key,H.props,null,K.mode,J),_u(J,H),J.return=K,J;case M:return H=Cm(H,K.mode,J),H.return=K,H;case R:return H=Xs(H),de(K,H,J)}if(Te(H)||k(H))return H=Gs(H,K.mode,J,null),H.return=K,H;if(typeof H.then=="function")return de(K,wh(H),J);if(H.$$typeof===Q)return de(K,Th(K,H),J);Ch(K,H)}return null}function te(K,H,J,he){var qe=H!==null?H.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return qe!==null?null:C(K,H,""+J,he);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return J.key===qe?j(K,H,J,he):null;case M:return J.key===qe?Z(K,H,J,he):null;case R:return J=Xs(J),te(K,H,J,he)}if(Te(J)||k(J))return qe!==null?null:le(K,H,J,he,null);if(typeof J.then=="function")return te(K,H,wh(J),he);if(J.$$typeof===Q)return te(K,H,Th(K,J),he);Ch(K,J)}return null}function ae(K,H,J,he,qe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return K=K.get(J)||null,C(H,K,""+he,qe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case w:return K=K.get(he.key===null?J:he.key)||null,j(H,K,he,qe);case M:return K=K.get(he.key===null?J:he.key)||null,Z(H,K,he,qe);case R:return he=Xs(he),ae(K,H,J,he,qe)}if(Te(he)||k(he))return K=K.get(J)||null,le(H,K,he,qe,null);if(typeof he.then=="function")return ae(K,H,J,wh(he),qe);if(he.$$typeof===Q)return ae(K,H,J,Th(H,he),qe);Ch(H,he)}return null}function Le(K,H,J,he){for(var qe=null,Ct=null,ze=H,ot=H=0,vt=null;ze!==null&&ot<J.length;ot++){ze.index>ot?(vt=ze,ze=null):vt=ze.sibling;var Rt=te(K,ze,J[ot],he);if(Rt===null){ze===null&&(ze=vt);break}r&&ze&&Rt.alternate===null&&i(K,ze),H=p(Rt,H,ot),Ct===null?qe=Rt:Ct.sibling=Rt,Ct=Rt,ze=vt}if(ot===J.length)return o(K,ze),St&&ta(K,ot),qe;if(ze===null){for(;ot<J.length;ot++)ze=de(K,J[ot],he),ze!==null&&(H=p(ze,H,ot),Ct===null?qe=ze:Ct.sibling=ze,Ct=ze);return St&&ta(K,ot),qe}for(ze=u(ze);ot<J.length;ot++)vt=ae(ze,K,ot,J[ot],he),vt!==null&&(r&&vt.alternate!==null&&ze.delete(vt.key===null?ot:vt.key),H=p(vt,H,ot),Ct===null?qe=vt:Ct.sibling=vt,Ct=vt);return r&&ze.forEach(function(os){return i(K,os)}),St&&ta(K,ot),qe}function Ke(K,H,J,he){if(J==null)throw Error(a(151));for(var qe=null,Ct=null,ze=H,ot=H=0,vt=null,Rt=J.next();ze!==null&&!Rt.done;ot++,Rt=J.next()){ze.index>ot?(vt=ze,ze=null):vt=ze.sibling;var os=te(K,ze,Rt.value,he);if(os===null){ze===null&&(ze=vt);break}r&&ze&&os.alternate===null&&i(K,ze),H=p(os,H,ot),Ct===null?qe=os:Ct.sibling=os,Ct=os,ze=vt}if(Rt.done)return o(K,ze),St&&ta(K,ot),qe;if(ze===null){for(;!Rt.done;ot++,Rt=J.next())Rt=de(K,Rt.value,he),Rt!==null&&(H=p(Rt,H,ot),Ct===null?qe=Rt:Ct.sibling=Rt,Ct=Rt);return St&&ta(K,ot),qe}for(ze=u(ze);!Rt.done;ot++,Rt=J.next())Rt=ae(ze,K,ot,Rt.value,he),Rt!==null&&(r&&Rt.alternate!==null&&ze.delete(Rt.key===null?ot:Rt.key),H=p(Rt,H,ot),Ct===null?qe=Rt:Ct.sibling=Rt,Ct=Rt);return r&&ze.forEach(function(fI){return i(K,fI)}),St&&ta(K,ot),qe}function Ft(K,H,J,he){if(typeof J=="object"&&J!==null&&J.type===B&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case w:e:{for(var qe=J.key;H!==null;){if(H.key===qe){if(qe=J.type,qe===B){if(H.tag===7){o(K,H.sibling),he=f(H,J.props.children),he.return=K,K=he;break e}}else if(H.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===R&&Xs(qe)===H.type){o(K,H.sibling),he=f(H,J.props),_u(he,J),he.return=K,K=he;break e}o(K,H);break}else i(K,H);H=H.sibling}J.type===B?(he=Gs(J.props.children,K.mode,he,J.key),he.return=K,K=he):(he=_h(J.type,J.key,J.props,null,K.mode,he),_u(he,J),he.return=K,K=he)}return v(K);case M:e:{for(qe=J.key;H!==null;){if(H.key===qe)if(H.tag===4&&H.stateNode.containerInfo===J.containerInfo&&H.stateNode.implementation===J.implementation){o(K,H.sibling),he=f(H,J.children||[]),he.return=K,K=he;break e}else{o(K,H);break}else i(K,H);H=H.sibling}he=Cm(J,K.mode,he),he.return=K,K=he}return v(K);case R:return J=Xs(J),Ft(K,H,J,he)}if(Te(J))return Le(K,H,J,he);if(k(J)){if(qe=k(J),typeof qe!="function")throw Error(a(150));return J=qe.call(J),Ke(K,H,J,he)}if(typeof J.then=="function")return Ft(K,H,wh(J),he);if(J.$$typeof===Q)return Ft(K,H,Th(K,J),he);Ch(K,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,H!==null&&H.tag===6?(o(K,H.sibling),he=f(H,J),he.return=K,K=he):(o(K,H),he=wm(J,K.mode,he),he.return=K,K=he),v(K)):o(K,H)}return function(K,H,J,he){try{yu=0;var qe=Ft(K,H,J,he);return Ko=null,qe}catch(ze){if(ze===$o||ze===Sh)throw ze;var Ct=wr(29,ze,null,K.mode);return Ct.lanes=he,Ct.return=K,Ct}finally{}}}var Js=Av(!0),wv=Av(!1),qa=!1;function Lm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Um(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ga(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function $a(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Nt&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=yh(r),lv(r,null,o),i}return gh(r,u,i,o),yh(r)}function vu(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,V(r,o)}}function zm(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?f=p=i:p=p.next=i}else f=p=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var Bm=!1;function Eu(){if(Bm){var r=Go;if(r!==null)throw r}}function Tu(r,i,o,u){Bm=!1;var f=r.updateQueue;qa=!1;var p=f.firstBaseUpdate,v=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var j=C,Z=j.next;j.next=null,v===null?p=Z:v.next=Z,v=j;var le=r.alternate;le!==null&&(le=le.updateQueue,C=le.lastBaseUpdate,C!==v&&(C===null?le.firstBaseUpdate=Z:C.next=Z,le.lastBaseUpdate=j))}if(p!==null){var de=f.baseState;v=0,le=Z=j=null,C=p;do{var te=C.lane&-536870913,ae=te!==C.lane;if(ae?(_t&te)===te:(u&te)===te){te!==0&&te===qo&&(Bm=!0),le!==null&&(le=le.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Le=r,Ke=C;te=i;var Ft=o;switch(Ke.tag){case 1:if(Le=Ke.payload,typeof Le=="function"){de=Le.call(Ft,de,te);break e}de=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Ke.payload,te=typeof Le=="function"?Le.call(Ft,de,te):Le,te==null)break e;de=E({},de,te);break e;case 2:qa=!0}}te=C.callback,te!==null&&(r.flags|=64,ae&&(r.flags|=8192),ae=f.callbacks,ae===null?f.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:C.tag,payload:C.payload,callback:C.callback,next:null},le===null?(Z=le=ae,j=de):le=le.next=ae,v|=te;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;ae=C,C=ae.next,ae.next=null,f.lastBaseUpdate=ae,f.shared.pending=null}}while(!0);le===null&&(j=de),f.baseState=j,f.firstBaseUpdate=Z,f.lastBaseUpdate=le,p===null&&(f.shared.lanes=0),Wa|=v,r.lanes=v,r.memoizedState=de}}function Cv(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function Rv(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Cv(o[r],i)}var Yo=L(null),Rh=L(0);function Iv(r,i){r=fa,Ee(Rh,r),Ee(Yo,i),fa=r|i.baseLanes}function Hm(){Ee(Rh,fa),Ee(Yo,Yo.current)}function Fm(){fa=Rh.current,se(Yo),se(Rh)}var Cr=L(null),Jr=null;function Ka(r){var i=r.alternate;Ee(yn,yn.current&1),Ee(Cr,r),Jr===null&&(i===null||Yo.current!==null||i.memoizedState!==null)&&(Jr=r)}function qm(r){Ee(yn,yn.current),Ee(Cr,r),Jr===null&&(Jr=r)}function Dv(r){r.tag===22?(Ee(yn,yn.current),Ee(Cr,r),Jr===null&&(Jr=r)):Ya()}function Ya(){Ee(yn,yn.current),Ee(Cr,Cr.current)}function Rr(r){se(Cr),Jr===r&&(Jr=null),se(yn)}var yn=L(0);function Ih(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Xp(o)||Wp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ia=0,rt=null,Bt=null,Sn=null,Dh=!1,Qo=!1,Zs=!1,Nh=0,bu=0,Xo=null,nR=0;function fn(){throw Error(a(321))}function Gm(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!Ar(r[o],i[o]))return!1;return!0}function $m(r,i,o,u,f,p){return ia=p,rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=r===null||r.memoizedState===null?fE:op,Zs=!1,p=o(u,f),Zs=!1,Qo&&(p=xv(i,o,u,f)),Nv(r),p}function Nv(r){F.H=wu;var i=Bt!==null&&Bt.next!==null;if(ia=0,Sn=Bt=rt=null,Dh=!1,bu=0,Xo=null,i)throw Error(a(300));r===null||An||(r=r.dependencies,r!==null&&Eh(r)&&(An=!0))}function xv(r,i,o,u){rt=r;var f=0;do{if(Qo&&(Xo=null),bu=0,Qo=!1,25<=f)throw Error(a(301));if(f+=1,Sn=Bt=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}F.H=dE,p=i(o,u)}while(Qo);return p}function rR(){var r=F.H,i=r.useState()[0];return i=typeof i.then=="function"?Su(i):i,r=r.useState()[0],(Bt!==null?Bt.memoizedState:null)!==r&&(rt.flags|=1024),i}function Km(){var r=Nh!==0;return Nh=0,r}function Ym(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Qm(r){if(Dh){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dh=!1}ia=0,Sn=Bt=rt=null,Qo=!1,bu=Nh=0,Xo=null}function sr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?rt.memoizedState=Sn=r:Sn=Sn.next=r,Sn}function _n(){if(Bt===null){var r=rt.alternate;r=r!==null?r.memoizedState:null}else r=Bt.next;var i=Sn===null?rt.memoizedState:Sn.next;if(i!==null)Sn=i,Bt=r;else{if(r===null)throw rt.alternate===null?Error(a(467)):Error(a(310));Bt=r,r={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Sn===null?rt.memoizedState=Sn=r:Sn=Sn.next=r}return Sn}function xh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Su(r){var i=bu;return bu+=1,Xo===null&&(Xo=[]),r=Tv(Xo,r,i),i=rt,(Sn===null?i.memoizedState:Sn.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?fE:op),r}function Oh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Su(r);if(r.$$typeof===Q)return Fn(r)}throw Error(a(438,String(r)))}function Xm(r){var i=null,o=rt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=rt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=xh(),rt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=x;return i.index++,o}function aa(r,i){return typeof i=="function"?i(r):i}function Mh(r){var i=_n();return Wm(i,Bt,r)}function Wm(r,i,o){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var f=r.baseQueue,p=u.pending;if(p!==null){if(f!==null){var v=f.next;f.next=p.next,p.next=v}i.baseQueue=f=p,u.pending=null}if(p=r.baseState,f===null)r.memoizedState=p;else{i=f.next;var C=v=null,j=null,Z=i,le=!1;do{var de=Z.lane&-536870913;if(de!==Z.lane?(_t&de)===de:(ia&de)===de){var te=Z.revertLane;if(te===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),de===qo&&(le=!0);else if((ia&te)===te){Z=Z.next,te===qo&&(le=!0);continue}else de={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},j===null?(C=j=de,v=p):j=j.next=de,rt.lanes|=te,Wa|=te;de=Z.action,Zs&&o(p,de),p=Z.hasEagerState?Z.eagerState:o(p,de)}else te={lane:de,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},j===null?(C=j=te,v=p):j=j.next=te,rt.lanes|=de,Wa|=de;Z=Z.next}while(Z!==null&&Z!==i);if(j===null?v=p:j.next=C,!Ar(p,r.memoizedState)&&(An=!0,le&&(o=Go,o!==null)))throw o;r.memoizedState=p,r.baseState=v,r.baseQueue=j,u.lastRenderedState=p}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Jm(r){var i=_n(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,p=i.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do p=r(p,v.action),v=v.next;while(v!==f);Ar(p,i.memoizedState)||(An=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,u]}function Ov(r,i,o){var u=rt,f=_n(),p=St;if(p){if(o===void 0)throw Error(a(407));o=o()}else o=i();var v=!Ar((Bt||f).memoizedState,o);if(v&&(f.memoizedState=o,An=!0),f=f.queue,tp(kv.bind(null,u,f,r),[r]),f.getSnapshot!==i||v||Sn!==null&&Sn.memoizedState.tag&1){if(u.flags|=2048,Wo(9,{destroy:void 0},Pv.bind(null,u,f,o,i),null),Gt===null)throw Error(a(349));p||(ia&127)!==0||Mv(u,i,o)}return o}function Mv(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=rt.updateQueue,i===null?(i=xh(),rt.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function Pv(r,i,o,u){i.value=o,i.getSnapshot=u,Vv(i)&&jv(r)}function kv(r,i,o){return o(function(){Vv(i)&&jv(r)})}function Vv(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!Ar(r,o)}catch{return!0}}function jv(r){var i=qs(r,2);i!==null&&yr(i,r,2)}function Zm(r){var i=sr();if(typeof r=="function"){var o=r;if(r=o(),Zs){Xe(!0);try{o()}finally{Xe(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:r},i}function Lv(r,i,o,u){return r.baseState=o,Wm(r,Bt,typeof u=="function"?u:aa)}function iR(r,i,o,u,f){if(Vh(r))throw Error(a(485));if(r=i.action,r!==null){var p={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};F.T!==null?o(!0):p.isTransition=!1,u(p),o=i.pending,o===null?(p.next=i.pending=p,Uv(i,p)):(p.next=o.next,i.pending=o.next=p)}}function Uv(r,i){var o=i.action,u=i.payload,f=r.state;if(i.isTransition){var p=F.T,v={};F.T=v;try{var C=o(f,u),j=F.S;j!==null&&j(v,C),zv(r,i,C)}catch(Z){ep(r,i,Z)}finally{p!==null&&v.types!==null&&(p.types=v.types),F.T=p}}else try{p=o(f,u),zv(r,i,p)}catch(Z){ep(r,i,Z)}}function zv(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Bv(r,i,u)},function(u){return ep(r,i,u)}):Bv(r,i,o)}function Bv(r,i,o){i.status="fulfilled",i.value=o,Hv(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,Uv(r,o)))}function ep(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Hv(i),i=i.next;while(i!==u)}r.action=null}function Hv(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function Fv(r,i){return i}function qv(r,i){if(St){var o=Gt.formState;if(o!==null){e:{var u=rt;if(St){if(Wt){t:{for(var f=Wt,p=Wr;f.nodeType!==8;){if(!p){f=null;break t}if(f=Zr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Wt=Zr(f.nextSibling),u=f.data==="F!";break e}}Ha(u)}u=!1}u&&(i=o[0])}}return o=sr(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fv,lastRenderedState:i},o.queue=u,o=uE.bind(null,rt,u),u.dispatch=o,u=Zm(!1),p=sp.bind(null,rt,!1,u.queue),u=sr(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,o=iR.bind(null,rt,f,p,o),f.dispatch=o,u.memoizedState=r,[i,o,!1]}function Gv(r){var i=_n();return $v(i,Bt,r)}function $v(r,i,o){if(i=Wm(r,i,Fv)[0],r=Mh(aa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Su(i)}catch(v){throw v===$o?Sh:v}else u=i;i=_n();var f=i.queue,p=f.dispatch;return o!==i.memoizedState&&(rt.flags|=2048,Wo(9,{destroy:void 0},aR.bind(null,f,o),null)),[u,p,r]}function aR(r,i){r.action=i}function Kv(r){var i=_n(),o=Bt;if(o!==null)return $v(i,o,r);_n(),i=i.memoizedState,o=_n();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function Wo(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=rt.updateQueue,i===null&&(i=xh(),rt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function Yv(){return _n().memoizedState}function Ph(r,i,o,u){var f=sr();rt.flags|=r,f.memoizedState=Wo(1|i,{destroy:void 0},o,u===void 0?null:u)}function kh(r,i,o,u){var f=_n();u=u===void 0?null:u;var p=f.memoizedState.inst;Bt!==null&&u!==null&&Gm(u,Bt.memoizedState.deps)?f.memoizedState=Wo(i,p,o,u):(rt.flags|=r,f.memoizedState=Wo(1|i,p,o,u))}function Qv(r,i){Ph(8390656,8,r,i)}function tp(r,i){kh(2048,8,r,i)}function sR(r){rt.flags|=4;var i=rt.updateQueue;if(i===null)i=xh(),rt.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function Xv(r){var i=_n().memoizedState;return sR({ref:i,nextImpl:r}),function(){if((Nt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Wv(r,i){return kh(4,2,r,i)}function Jv(r,i){return kh(4,4,r,i)}function Zv(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function eE(r,i,o){o=o!=null?o.concat([r]):null,kh(4,4,Zv.bind(null,i,r),o)}function np(){}function tE(r,i){var o=_n();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Gm(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function nE(r,i){var o=_n();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Gm(i,u[1]))return u[0];if(u=r(),Zs){Xe(!0);try{r()}finally{Xe(!1)}}return o.memoizedState=[u,i],u}function rp(r,i,o){return o===void 0||(ia&1073741824)!==0&&(_t&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=rT(),rt.lanes|=r,Wa|=r,o)}function rE(r,i,o,u){return Ar(o,i)?o:Yo.current!==null?(r=rp(r,o,u),Ar(r,i)||(An=!0),r):(ia&42)===0||(ia&1073741824)!==0&&(_t&261930)===0?(An=!0,r.memoizedState=o):(r=rT(),rt.lanes|=r,Wa|=r,i)}function iE(r,i,o,u,f){var p=me.p;me.p=p!==0&&8>p?p:8;var v=F.T,C={};F.T=C,sp(r,!1,i,o);try{var j=f(),Z=F.S;if(Z!==null&&Z(C,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var le=tR(j,u);Au(r,i,le,Nr(r))}else Au(r,i,u,Nr(r))}catch(de){Au(r,i,{then:function(){},status:"rejected",reason:de},Nr())}finally{me.p=p,v!==null&&C.types!==null&&(v.types=C.types),F.T=v}}function oR(){}function ip(r,i,o,u){if(r.tag!==5)throw Error(a(476));var f=aE(r).queue;iE(r,f,i,ye,o===null?oR:function(){return sE(r),o(u)})}function aE(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:ye},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function sE(r){var i=aE(r);i.next===null&&(i=r.alternate.memoizedState),Au(r,i.next.queue,{},Nr())}function ap(){return Fn(Bu)}function oE(){return _n().memoizedState}function lE(){return _n().memoizedState}function lR(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Nr();r=Ga(o);var u=$a(i,r,o);u!==null&&(yr(u,i,o),vu(u,i,o)),i={cache:Pm()},r.payload=i;return}i=i.return}}function uR(r,i,o){var u=Nr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Vh(r)?cE(i,o):(o=Sm(r,i,o,u),o!==null&&(yr(o,r,u),hE(o,i,u)))}function uE(r,i,o){var u=Nr();Au(r,i,o,u)}function Au(r,i,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Vh(r))cE(i,f);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,C=p(v,o);if(f.hasEagerState=!0,f.eagerState=C,Ar(C,v))return gh(r,i,f,0),Gt===null&&ph(),!1}catch{}finally{}if(o=Sm(r,i,f,u),o!==null)return yr(o,r,u),hE(o,i,u),!0}return!1}function sp(r,i,o,u){if(u={lane:2,revertLane:Lp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Vh(r)){if(i)throw Error(a(479))}else i=Sm(r,o,u,2),i!==null&&yr(i,r,2)}function Vh(r){var i=r.alternate;return r===rt||i!==null&&i===rt}function cE(r,i){Qo=Dh=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function hE(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,V(r,o)}}var wu={readContext:Fn,use:Oh,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useInsertionEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useSyncExternalStore:fn,useId:fn,useHostTransitionStatus:fn,useFormState:fn,useActionState:fn,useOptimistic:fn,useMemoCache:fn,useCacheRefresh:fn};wu.useEffectEvent=fn;var fE={readContext:Fn,use:Oh,useCallback:function(r,i){return sr().memoizedState=[r,i===void 0?null:i],r},useContext:Fn,useEffect:Qv,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Ph(4194308,4,Zv.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Ph(4194308,4,r,i)},useInsertionEffect:function(r,i){Ph(4,2,r,i)},useMemo:function(r,i){var o=sr();i=i===void 0?null:i;var u=r();if(Zs){Xe(!0);try{r()}finally{Xe(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=sr();if(o!==void 0){var f=o(i);if(Zs){Xe(!0);try{o(i)}finally{Xe(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=uR.bind(null,rt,r),[u.memoizedState,r]},useRef:function(r){var i=sr();return r={current:r},i.memoizedState=r},useState:function(r){r=Zm(r);var i=r.queue,o=uE.bind(null,rt,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:np,useDeferredValue:function(r,i){var o=sr();return rp(o,r,i)},useTransition:function(){var r=Zm(!1);return r=iE.bind(null,rt,r.queue,!0,!1),sr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=rt,f=sr();if(St){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),Gt===null)throw Error(a(349));(_t&127)!==0||Mv(u,i,o)}f.memoizedState=o;var p={value:o,getSnapshot:i};return f.queue=p,Qv(kv.bind(null,u,p,r),[r]),u.flags|=2048,Wo(9,{destroy:void 0},Pv.bind(null,u,p,o,i),null),o},useId:function(){var r=sr(),i=Gt.identifierPrefix;if(St){var o=ji,u=Vi;o=(u&~(1<<32-Se(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Nh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=nR++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:ap,useFormState:qv,useActionState:qv,useOptimistic:function(r){var i=sr();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=sp.bind(null,rt,!0,o),o.dispatch=i,[r,i]},useMemoCache:Xm,useCacheRefresh:function(){return sr().memoizedState=lR.bind(null,rt)},useEffectEvent:function(r){var i=sr(),o={impl:r};return i.memoizedState=o,function(){if((Nt&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},op={readContext:Fn,use:Oh,useCallback:tE,useContext:Fn,useEffect:tp,useImperativeHandle:eE,useInsertionEffect:Wv,useLayoutEffect:Jv,useMemo:nE,useReducer:Mh,useRef:Yv,useState:function(){return Mh(aa)},useDebugValue:np,useDeferredValue:function(r,i){var o=_n();return rE(o,Bt.memoizedState,r,i)},useTransition:function(){var r=Mh(aa)[0],i=_n().memoizedState;return[typeof r=="boolean"?r:Su(r),i]},useSyncExternalStore:Ov,useId:oE,useHostTransitionStatus:ap,useFormState:Gv,useActionState:Gv,useOptimistic:function(r,i){var o=_n();return Lv(o,Bt,r,i)},useMemoCache:Xm,useCacheRefresh:lE};op.useEffectEvent=Xv;var dE={readContext:Fn,use:Oh,useCallback:tE,useContext:Fn,useEffect:tp,useImperativeHandle:eE,useInsertionEffect:Wv,useLayoutEffect:Jv,useMemo:nE,useReducer:Jm,useRef:Yv,useState:function(){return Jm(aa)},useDebugValue:np,useDeferredValue:function(r,i){var o=_n();return Bt===null?rp(o,r,i):rE(o,Bt.memoizedState,r,i)},useTransition:function(){var r=Jm(aa)[0],i=_n().memoizedState;return[typeof r=="boolean"?r:Su(r),i]},useSyncExternalStore:Ov,useId:oE,useHostTransitionStatus:ap,useFormState:Kv,useActionState:Kv,useOptimistic:function(r,i){var o=_n();return Bt!==null?Lv(o,Bt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Xm,useCacheRefresh:lE};dE.useEffectEvent=Xv;function lp(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var up={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Nr(),f=Ga(u);f.payload=i,o!=null&&(f.callback=o),i=$a(r,f,u),i!==null&&(yr(i,r,u),vu(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Nr(),f=Ga(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=$a(r,f,u),i!==null&&(yr(i,r,u),vu(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Nr(),u=Ga(o);u.tag=2,i!=null&&(u.callback=i),i=$a(r,u,o),i!==null&&(yr(i,r,o),vu(i,r,o))}};function mE(r,i,o,u,f,p,v){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,v):i.prototype&&i.prototype.isPureReactComponent?!hu(o,u)||!hu(f,p):!0}function pE(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&up.enqueueReplaceState(i,i.state,null)}function eo(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=E({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}function gE(r){mh(r)}function yE(r){console.error(r)}function _E(r){mh(r)}function jh(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function vE(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function cp(r,i,o){return o=Ga(o),o.tag=3,o.payload={element:null},o.callback=function(){jh(r,i)},o}function EE(r){return r=Ga(r),r.tag=3,r}function TE(r,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;r.payload=function(){return f(p)},r.callback=function(){vE(i,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(r.callback=function(){vE(i,o,u),typeof f!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function cR(r,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Fo(i,o,f,!0),o=Cr.current,o!==null){switch(o.tag){case 31:case 13:return Jr===null?Qh():o.alternate===null&&dn===0&&(dn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Ah?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),kp(r,u,f)),!1;case 22:return o.flags|=65536,u===Ah?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),kp(r,u,f)),!1}throw Error(a(435,o.tag))}return kp(r,u,f),Qh(),!1}if(St)return i=Cr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Dm&&(r=Error(a(422),{cause:u}),mu(Yr(r,o)))):(u!==Dm&&(i=Error(a(423),{cause:u}),mu(Yr(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Yr(u,o),f=cp(r.stateNode,u,f),zm(r,f),dn!==4&&(dn=2)),!1;var p=Error(a(520),{cause:u});if(p=Yr(p,o),Mu===null?Mu=[p]:Mu.push(p),dn!==4&&(dn=2),i===null)return!0;u=Yr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=cp(o.stateNode,u,r),zm(o,r),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ja===null||!Ja.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=EE(f),TE(f,r,o,u),zm(o,f),!1}o=o.return}while(o!==null);return!1}var hp=Error(a(461)),An=!1;function qn(r,i,o,u){i.child=r===null?wv(i,null,o,u):Js(i,r.child,o,u)}function bE(r,i,o,u,f){o=o.render;var p=i.ref;if("ref"in u){var v={};for(var C in u)C!=="ref"&&(v[C]=u[C])}else v=u;return Ys(i),u=$m(r,i,o,v,p,f),C=Km(),r!==null&&!An?(Ym(r,i,f),sa(r,i,f)):(St&&C&&Rm(i),i.flags|=1,qn(r,i,u,f),i.child)}function SE(r,i,o,u,f){if(r===null){var p=o.type;return typeof p=="function"&&!Am(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,AE(r,i,p,u,f)):(r=_h(o.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(p=r.child,!vp(r,f)){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:hu,o(v,u)&&r.ref===i.ref)return sa(r,i,f)}return i.flags|=1,r=ea(p,u),r.ref=i.ref,r.return=i,i.child=r}function AE(r,i,o,u,f){if(r!==null){var p=r.memoizedProps;if(hu(p,u)&&r.ref===i.ref)if(An=!1,i.pendingProps=u=p,vp(r,f))(r.flags&131072)!==0&&(An=!0);else return i.lanes=r.lanes,sa(r,i,f)}return fp(r,i,o,u,f)}function wE(r,i,o,u){var f=u.children,p=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,r!==null){for(u=i.child=r.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~p}else u=0,i.child=null;return CE(r,i,p,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&bh(i,p!==null?p.cachePool:null),p!==null?Iv(i,p):Hm(),Dv(i);else return u=i.lanes=536870912,CE(r,i,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(bh(i,p.cachePool),Iv(i,p),Ya(),i.memoizedState=null):(r!==null&&bh(i,null),Hm(),Ya());return qn(r,i,f,o),i.child}function Cu(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function CE(r,i,o,u,f){var p=Vm();return p=p===null?null:{parent:bn._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},r!==null&&bh(i,null),Hm(),Dv(i),r!==null&&Fo(r,i,u,!0),i.childLanes=f,null}function Lh(r,i){return i=zh({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function RE(r,i,o){return Js(i,r.child,null,o),r=Lh(i,i.pendingProps),r.flags|=2,Rr(i),i.memoizedState=null,r}function hR(r,i,o){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(St){if(u.mode==="hidden")return r=Lh(i,u),i.lanes=536870912,Cu(null,r);if(qm(i),(r=Wt)?(r=UT(r,Wr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:za!==null?{id:Vi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},o=cv(r),o.return=i,i.child=o,Hn=i,Wt=null)):r=null,r===null)throw Ha(i);return i.lanes=536870912,null}return Lh(i,u)}var p=r.memoizedState;if(p!==null){var v=p.dehydrated;if(qm(i),f)if(i.flags&256)i.flags&=-257,i=RE(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(a(558));else if(An||Fo(r,i,o,!1),f=(o&r.childLanes)!==0,An||f){if(u=Gt,u!==null&&(v=$(u,o),v!==0&&v!==p.retryLane))throw p.retryLane=v,qs(r,v),yr(u,r,v),hp;Qh(),i=RE(r,i,o)}else r=p.treeContext,Wt=Zr(v.nextSibling),Hn=i,St=!0,Ba=null,Wr=!1,r!==null&&dv(i,r),i=Lh(i,u),i.flags|=4096;return i}return r=ea(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Uh(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function fp(r,i,o,u,f){return Ys(i),o=$m(r,i,o,u,void 0,f),u=Km(),r!==null&&!An?(Ym(r,i,f),sa(r,i,f)):(St&&u&&Rm(i),i.flags|=1,qn(r,i,o,f),i.child)}function IE(r,i,o,u,f,p){return Ys(i),i.updateQueue=null,o=xv(i,u,o,f),Nv(r),u=Km(),r!==null&&!An?(Ym(r,i,p),sa(r,i,p)):(St&&u&&Rm(i),i.flags|=1,qn(r,i,o,p),i.child)}function DE(r,i,o,u,f){if(Ys(i),i.stateNode===null){var p=Uo,v=o.contextType;typeof v=="object"&&v!==null&&(p=Fn(v)),p=new o(u,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=up,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=u,p.state=i.memoizedState,p.refs={},Lm(i),v=o.contextType,p.context=typeof v=="object"&&v!==null?Fn(v):Uo,p.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(lp(i,o,v,u),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&up.enqueueReplaceState(p,p.state,null),Tu(i,u,p,f),Eu(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){p=i.stateNode;var C=i.memoizedProps,j=eo(o,C);p.props=j;var Z=p.context,le=o.contextType;v=Uo,typeof le=="object"&&le!==null&&(v=Fn(le));var de=o.getDerivedStateFromProps;le=typeof de=="function"||typeof p.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,le||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(C||Z!==v)&&pE(i,p,u,v),qa=!1;var te=i.memoizedState;p.state=te,Tu(i,u,p,f),Eu(),Z=i.memoizedState,C||te!==Z||qa?(typeof de=="function"&&(lp(i,o,de,u),Z=i.memoizedState),(j=qa||mE(i,o,j,u,te,Z,v))?(le||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Z),p.props=u,p.state=Z,p.context=v,u=j):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{p=i.stateNode,Um(r,i),v=i.memoizedProps,le=eo(o,v),p.props=le,de=i.pendingProps,te=p.context,Z=o.contextType,j=Uo,typeof Z=="object"&&Z!==null&&(j=Fn(Z)),C=o.getDerivedStateFromProps,(Z=typeof C=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==de||te!==j)&&pE(i,p,u,j),qa=!1,te=i.memoizedState,p.state=te,Tu(i,u,p,f),Eu();var ae=i.memoizedState;v!==de||te!==ae||qa||r!==null&&r.dependencies!==null&&Eh(r.dependencies)?(typeof C=="function"&&(lp(i,o,C,u),ae=i.memoizedState),(le=qa||mE(i,o,le,u,te,ae,j)||r!==null&&r.dependencies!==null&&Eh(r.dependencies))?(Z||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,ae,j),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,ae,j)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ae),p.props=u,p.state=ae,p.context=j,u=le):(typeof p.componentDidUpdate!="function"||v===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),u=!1)}return p=u,Uh(r,i),u=(i.flags&128)!==0,p||u?(p=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,r!==null&&u?(i.child=Js(i,r.child,null,f),i.child=Js(i,null,o,f)):qn(r,i,o,f),i.memoizedState=p.state,r=i.child):r=sa(r,i,f),r}function NE(r,i,o,u){return $s(),i.flags|=256,qn(r,i,o,u),i.child}var dp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mp(r){return{baseLanes:r,cachePool:vv()}}function pp(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=Dr),r}function xE(r,i,o){var u=i.pendingProps,f=!1,p=(i.flags&128)!==0,v;if((v=p)||(v=r!==null&&r.memoizedState===null?!1:(yn.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,r===null){if(St){if(f?Ka(i):Ya(),(r=Wt)?(r=UT(r,Wr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:za!==null?{id:Vi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},o=cv(r),o.return=i,i.child=o,Hn=i,Wt=null)):r=null,r===null)throw Ha(i);return Wp(r)?i.lanes=32:i.lanes=536870912,null}var C=u.children;return u=u.fallback,f?(Ya(),f=i.mode,C=zh({mode:"hidden",children:C},f),u=Gs(u,f,o,null),C.return=i,u.return=i,C.sibling=u,i.child=C,u=i.child,u.memoizedState=mp(o),u.childLanes=pp(r,v,o),i.memoizedState=dp,Cu(null,u)):(Ka(i),gp(i,C))}var j=r.memoizedState;if(j!==null&&(C=j.dehydrated,C!==null)){if(p)i.flags&256?(Ka(i),i.flags&=-257,i=yp(r,i,o)):i.memoizedState!==null?(Ya(),i.child=r.child,i.flags|=128,i=null):(Ya(),C=u.fallback,f=i.mode,u=zh({mode:"visible",children:u.children},f),C=Gs(C,f,o,null),C.flags|=2,u.return=i,C.return=i,u.sibling=C,i.child=u,Js(i,r.child,null,o),u=i.child,u.memoizedState=mp(o),u.childLanes=pp(r,v,o),i.memoizedState=dp,i=Cu(null,u));else if(Ka(i),Wp(C)){if(v=C.nextSibling&&C.nextSibling.dataset,v)var Z=v.dgst;v=Z,u=Error(a(419)),u.stack="",u.digest=v,mu({value:u,source:null,stack:null}),i=yp(r,i,o)}else if(An||Fo(r,i,o,!1),v=(o&r.childLanes)!==0,An||v){if(v=Gt,v!==null&&(u=$(v,o),u!==0&&u!==j.retryLane))throw j.retryLane=u,qs(r,u),yr(v,r,u),hp;Xp(C)||Qh(),i=yp(r,i,o)}else Xp(C)?(i.flags|=192,i.child=r.child,i=null):(r=j.treeContext,Wt=Zr(C.nextSibling),Hn=i,St=!0,Ba=null,Wr=!1,r!==null&&dv(i,r),i=gp(i,u.children),i.flags|=4096);return i}return f?(Ya(),C=u.fallback,f=i.mode,j=r.child,Z=j.sibling,u=ea(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&65011712,Z!==null?C=ea(Z,C):(C=Gs(C,f,o,null),C.flags|=2),C.return=i,u.return=i,u.sibling=C,i.child=u,Cu(null,u),u=i.child,C=r.child.memoizedState,C===null?C=mp(o):(f=C.cachePool,f!==null?(j=bn._currentValue,f=f.parent!==j?{parent:j,pool:j}:f):f=vv(),C={baseLanes:C.baseLanes|o,cachePool:f}),u.memoizedState=C,u.childLanes=pp(r,v,o),i.memoizedState=dp,Cu(r.child,u)):(Ka(i),o=r.child,r=o.sibling,o=ea(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(v=i.deletions,v===null?(i.deletions=[r],i.flags|=16):v.push(r)),i.child=o,i.memoizedState=null,o)}function gp(r,i){return i=zh({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function zh(r,i){return r=wr(22,r,null,i),r.lanes=0,r}function yp(r,i,o){return Js(i,r.child,null,o),r=gp(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function OE(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),Om(r.return,i,o)}function _p(r,i,o,u,f,p){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f,v.treeForkCount=p)}function ME(r,i,o){var u=i.pendingProps,f=u.revealOrder,p=u.tail;u=u.children;var v=yn.current,C=(v&2)!==0;if(C?(v=v&1|2,i.flags|=128):v&=1,Ee(yn,v),qn(r,i,u,o),u=St?du:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&OE(r,o,i);else if(r.tag===19)OE(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&Ih(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),_p(i,!1,f,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&Ih(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}_p(i,!0,o,null,p,u);break;case"together":_p(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function sa(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Wa|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Fo(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=ea(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=ea(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function vp(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Eh(r)))}function fR(r,i,o){switch(i.tag){case 3:Be(i,i.stateNode.containerInfo),Fa(i,bn,r.memoizedState.cache),$s();break;case 27:case 5:gt(i);break;case 4:Be(i,i.stateNode.containerInfo);break;case 10:Fa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,qm(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ka(i),i.flags|=128,null):(o&i.child.childLanes)!==0?xE(r,i,o):(Ka(i),r=sa(r,i,o),r!==null?r.sibling:null);Ka(i);break;case 19:var f=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Fo(r,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return ME(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ee(yn,yn.current),u)break;return null;case 22:return i.lanes=0,wE(r,i,o,i.pendingProps);case 24:Fa(i,bn,r.memoizedState.cache)}return sa(r,i,o)}function PE(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)An=!0;else{if(!vp(r,o)&&(i.flags&128)===0)return An=!1,fR(r,i,o);An=(r.flags&131072)!==0}else An=!1,St&&(i.flags&1048576)!==0&&fv(i,du,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=Xs(i.elementType),i.type=r,typeof r=="function")Am(r)?(u=eo(r,u),i.tag=1,i=DE(null,i,r,u,o)):(i.tag=0,i=fp(null,i,r,u,o));else{if(r!=null){var f=r.$$typeof;if(f===ne){i.tag=11,i=bE(null,i,r,u,o);break e}else if(f===A){i.tag=14,i=SE(null,i,r,u,o);break e}}throw i=ie(r)||r,Error(a(306,i,""))}}return i;case 0:return fp(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=eo(u,i.pendingProps),DE(r,i,u,f,o);case 3:e:{if(Be(i,i.stateNode.containerInfo),r===null)throw Error(a(387));u=i.pendingProps;var p=i.memoizedState;f=p.element,Um(r,i),Tu(i,u,null,o);var v=i.memoizedState;if(u=v.cache,Fa(i,bn,u),u!==p.cache&&Mm(i,[bn],o,!0),Eu(),u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=NE(r,i,u,o);break e}else if(u!==f){f=Yr(Error(a(424)),i),mu(f),i=NE(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Wt=Zr(r.firstChild),Hn=i,St=!0,Ba=null,Wr=!0,o=wv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if($s(),u===f){i=sa(r,i,o);break e}qn(r,i,u,o)}i=i.child}return i;case 26:return Uh(r,i),r===null?(o=GT(i.type,null,i.pendingProps,null))?i.memoizedState=o:St||(o=i.type,r=i.pendingProps,u=nf(be.current).createElement(o),u[we]=i,u[Ie]=r,Gn(u,o,r),Yt(u),i.stateNode=u):i.memoizedState=GT(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return gt(i),r===null&&St&&(u=i.stateNode=HT(i.type,i.pendingProps,be.current),Hn=i,Wr=!0,f=Wt,ns(i.type)?(Jp=f,Wt=Zr(u.firstChild)):Wt=f),qn(r,i,i.pendingProps.children,o),Uh(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&St&&((f=u=Wt)&&(u=HR(u,i.type,i.pendingProps,Wr),u!==null?(i.stateNode=u,Hn=i,Wt=Zr(u.firstChild),Wr=!1,f=!0):f=!1),f||Ha(i)),gt(i),f=i.type,p=i.pendingProps,v=r!==null?r.memoizedProps:null,u=p.children,Kp(f,p)?u=null:v!==null&&Kp(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=$m(r,i,rR,null,null,o),Bu._currentValue=f),Uh(r,i),qn(r,i,u,o),i.child;case 6:return r===null&&St&&((r=o=Wt)&&(o=FR(o,i.pendingProps,Wr),o!==null?(i.stateNode=o,Hn=i,Wt=null,r=!0):r=!1),r||Ha(i)),null;case 13:return xE(r,i,o);case 4:return Be(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Js(i,null,u,o):qn(r,i,u,o),i.child;case 11:return bE(r,i,i.type,i.pendingProps,o);case 7:return qn(r,i,i.pendingProps,o),i.child;case 8:return qn(r,i,i.pendingProps.children,o),i.child;case 12:return qn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Fa(i,i.type,u.value),qn(r,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,Ys(i),f=Fn(f),u=u(f),i.flags|=1,qn(r,i,u,o),i.child;case 14:return SE(r,i,i.type,i.pendingProps,o);case 15:return AE(r,i,i.type,i.pendingProps,o);case 19:return ME(r,i,o);case 31:return hR(r,i,o);case 22:return wE(r,i,o,i.pendingProps);case 24:return Ys(i),u=Fn(bn),r===null?(f=Vm(),f===null&&(f=Gt,p=Pm(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),i.memoizedState={parent:u,cache:f},Lm(i),Fa(i,bn,f)):((r.lanes&o)!==0&&(Um(r,i),Tu(i,null,null,o),Eu()),f=r.memoizedState,p=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Fa(i,bn,u)):(u=p.cache,Fa(i,bn,u),u!==f.cache&&Mm(i,[bn],o,!0))),qn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function oa(r){r.flags|=4}function Ep(r,i,o,u,f){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(f&335544128)===f)if(r.stateNode.complete)r.flags|=8192;else if(oT())r.flags|=8192;else throw Ws=Ah,jm}else r.flags&=-16777217}function kE(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!XT(i))if(oT())r.flags|=8192;else throw Ws=Ah,jm}function Bh(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Qi():536870912,r.lanes|=i,tl|=i)}function Ru(r,i){if(!St)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Jt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function dR(r,i,o){var u=i.pendingProps;switch(Im(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(i),null;case 1:return Jt(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ra(bn),$e(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Ho(i)?oa(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Nm())),Jt(i),null;case 26:var f=i.type,p=i.memoizedState;return r===null?(oa(i),p!==null?(Jt(i),kE(i,p)):(Jt(i),Ep(i,f,null,u,o))):p?p!==r.memoizedState?(oa(i),Jt(i),kE(i,p)):(Jt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&oa(i),Jt(i),Ep(i,f,r,u,o)),null;case 27:if(jt(i),o=be.current,f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&oa(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Jt(i),null}r=oe.current,Ho(i)?mv(i):(r=HT(f,u,o),i.stateNode=r,oa(i))}return Jt(i),null;case 5:if(jt(i),f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&oa(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Jt(i),null}if(p=oe.current,Ho(i))mv(i);else{var v=nf(be.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}p[we]=i,p[Ie]=u;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=p;e:switch(Gn(p,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&oa(i)}}return Jt(i),Ep(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&oa(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(r=be.current,Ho(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,f=Hn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[we]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||xT(r.nodeValue,o)),r||Ha(i,!0)}else r=nf(r).createTextNode(u),r[we]=i,i.stateNode=r}return Jt(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=Ho(i),o!==null){if(r===null){if(!u)throw Error(a(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(557));r[we]=i}else $s(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Jt(i),r=!1}else o=Nm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(Rr(i),i):(Rr(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Jt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Ho(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[we]=i}else $s(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Jt(i),f=!1}else f=Nm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Rr(i),i):(Rr(i),null)}return Rr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),Bh(i,i.updateQueue),Jt(i),null);case 4:return $e(),r===null&&Hp(i.stateNode.containerInfo),Jt(i),null;case 10:return ra(i.type),Jt(i),null;case 19:if(se(yn),u=i.memoizedState,u===null)return Jt(i),null;if(f=(i.flags&128)!==0,p=u.rendering,p===null)if(f)Ru(u,!1);else{if(dn!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(p=Ih(r),p!==null){for(i.flags|=128,Ru(u,!1),r=p.updateQueue,i.updateQueue=r,Bh(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)uv(o,r),o=o.sibling;return Ee(yn,yn.current&1|2),St&&ta(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&xt()>$h&&(i.flags|=128,f=!0,Ru(u,!1),i.lanes=4194304)}else{if(!f)if(r=Ih(p),r!==null){if(i.flags|=128,f=!0,r=r.updateQueue,i.updateQueue=r,Bh(i,r),Ru(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!St)return Jt(i),null}else 2*xt()-u.renderingStartTime>$h&&o!==536870912&&(i.flags|=128,f=!0,Ru(u,!1),i.lanes=4194304);u.isBackwards?(p.sibling=i.child,i.child=p):(r=u.last,r!==null?r.sibling=p:i.child=p,u.last=p)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=xt(),r.sibling=null,o=yn.current,Ee(yn,f?o&1|2:o&1),St&&ta(i,u.treeForkCount),r):(Jt(i),null);case 22:case 23:return Rr(i),Fm(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Jt(i),i.subtreeFlags&6&&(i.flags|=8192)):Jt(i),o=i.updateQueue,o!==null&&Bh(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&se(Qs),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ra(bn),Jt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function mR(r,i){switch(Im(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return ra(bn),$e(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return jt(i),null;case 31:if(i.memoizedState!==null){if(Rr(i),i.alternate===null)throw Error(a(340));$s()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(Rr(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));$s()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return se(yn),null;case 4:return $e(),null;case 10:return ra(i.type),null;case 22:case 23:return Rr(i),Fm(),r!==null&&se(Qs),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return ra(bn),null;case 25:return null;default:return null}}function VE(r,i){switch(Im(i),i.tag){case 3:ra(bn),$e();break;case 26:case 27:case 5:jt(i);break;case 4:$e();break;case 31:i.memoizedState!==null&&Rr(i);break;case 13:Rr(i);break;case 19:se(yn);break;case 10:ra(i.type);break;case 22:case 23:Rr(i),Fm(),r!==null&&se(Qs);break;case 24:ra(bn)}}function Iu(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var p=o.create,v=o.inst;u=p(),v.destroy=u}o=o.next}while(o!==f)}}catch(C){Vt(i,i.return,C)}}function Qa(r,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&r)===r){var v=u.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,f=i;var j=o,Z=C;try{Z()}catch(le){Vt(f,j,le)}}}u=u.next}while(u!==p)}}catch(le){Vt(i,i.return,le)}}function jE(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{Rv(i,o)}catch(u){Vt(r,r.return,u)}}}function LE(r,i,o){o.props=eo(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){Vt(r,i,u)}}function Du(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){Vt(r,i,f)}}function Li(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){Vt(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Vt(r,i,f)}else o.current=null}function UE(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){Vt(r,r.return,f)}}function Tp(r,i,o){try{var u=r.stateNode;VR(u,r.type,o,i),u[Ie]=i}catch(f){Vt(r,r.return,f)}}function zE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ns(r.type)||r.tag===4}function bp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||zE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ns(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Sp(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=hi));else if(u!==4&&(u===27&&ns(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(Sp(r,i,o),r=r.sibling;r!==null;)Sp(r,i,o),r=r.sibling}function Hh(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&ns(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Hh(r,i,o),r=r.sibling;r!==null;)Hh(r,i,o),r=r.sibling}function BE(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Gn(i,u,o),i[we]=r,i[Ie]=o}catch(p){Vt(r,r.return,p)}}var la=!1,wn=!1,Ap=!1,HE=typeof WeakSet=="function"?WeakSet:Set,jn=null;function pR(r,i){if(r=r.containerInfo,Gp=cf,r=ev(r),ym(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,C=-1,j=-1,Z=0,le=0,de=r,te=null;t:for(;;){for(var ae;de!==o||f!==0&&de.nodeType!==3||(C=v+f),de!==p||u!==0&&de.nodeType!==3||(j=v+u),de.nodeType===3&&(v+=de.nodeValue.length),(ae=de.firstChild)!==null;)te=de,de=ae;for(;;){if(de===r)break t;if(te===o&&++Z===f&&(C=v),te===p&&++le===u&&(j=v),(ae=de.nextSibling)!==null)break;de=te,te=de.parentNode}de=ae}o=C===-1||j===-1?null:{start:C,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for($p={focusedElem:r,selectionRange:o},cf=!1,jn=i;jn!==null;)if(i=jn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,jn=r;else for(;jn!==null;){switch(i=jn,p=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)f=r[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=i,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Le=eo(o.type,f);r=u.getSnapshotBeforeUpdate(Le,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ke){Vt(o,o.return,Ke)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Qp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Qp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,jn=r;break}jn=i.return}}function FE(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ca(r,o),u&4&&Iu(5,o);break;case 1:if(ca(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(v){Vt(o,o.return,v)}else{var f=eo(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(v){Vt(o,o.return,v)}}u&64&&jE(o),u&512&&Du(o,o.return);break;case 3:if(ca(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Rv(r,i)}catch(v){Vt(o,o.return,v)}}break;case 27:i===null&&u&4&&BE(o);case 26:case 5:ca(r,o),i===null&&u&4&&UE(o),u&512&&Du(o,o.return);break;case 12:ca(r,o);break;case 31:ca(r,o),u&4&&$E(r,o);break;case 13:ca(r,o),u&4&&KE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=AR.bind(null,o),qR(r,o))));break;case 22:if(u=o.memoizedState!==null||la,!u){i=i!==null&&i.memoizedState!==null||wn,f=la;var p=wn;la=u,(wn=i)&&!p?ha(r,o,(o.subtreeFlags&8772)!==0):ca(r,o),la=f,wn=p}break;case 30:break;default:ca(r,o)}}function qE(r){var i=r.alternate;i!==null&&(r.alternate=null,qE(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Xt(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var nn=null,dr=!1;function ua(r,i,o){for(o=o.child;o!==null;)GE(r,i,o),o=o.sibling}function GE(r,i,o){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(yt,o)}catch{}switch(o.tag){case 26:wn||Li(o,i),ua(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:wn||Li(o,i);var u=nn,f=dr;ns(o.type)&&(nn=o.stateNode,dr=!1),ua(r,i,o),Lu(o.stateNode),nn=u,dr=f;break;case 5:wn||Li(o,i);case 6:if(u=nn,f=dr,nn=null,ua(r,i,o),nn=u,dr=f,nn!==null)if(dr)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(o.stateNode)}catch(p){Vt(o,i,p)}else try{nn.removeChild(o.stateNode)}catch(p){Vt(o,i,p)}break;case 18:nn!==null&&(dr?(r=nn,jT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),ul(r)):jT(nn,o.stateNode));break;case 4:u=nn,f=dr,nn=o.stateNode.containerInfo,dr=!0,ua(r,i,o),nn=u,dr=f;break;case 0:case 11:case 14:case 15:Qa(2,o,i),wn||Qa(4,o,i),ua(r,i,o);break;case 1:wn||(Li(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&LE(o,i,u)),ua(r,i,o);break;case 21:ua(r,i,o);break;case 22:wn=(u=wn)||o.memoizedState!==null,ua(r,i,o),wn=u;break;default:ua(r,i,o)}}function $E(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ul(r)}catch(o){Vt(i,i.return,o)}}}function KE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ul(r)}catch(o){Vt(i,i.return,o)}}function gR(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new HE),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new HE),i;default:throw Error(a(435,r.tag))}}function Fh(r,i){var o=gR(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var f=wR.bind(null,r,u);u.then(f,f)}})}function mr(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=r,v=i,C=v;e:for(;C!==null;){switch(C.tag){case 27:if(ns(C.type)){nn=C.stateNode,dr=!1;break e}break;case 5:nn=C.stateNode,dr=!1;break e;case 3:case 4:nn=C.stateNode.containerInfo,dr=!0;break e}C=C.return}if(nn===null)throw Error(a(160));GE(p,v,f),nn=null,dr=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)YE(i,r),i=i.sibling}var yi=null;function YE(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:mr(i,r),pr(r),u&4&&(Qa(3,r,r.return),Iu(3,r),Qa(5,r,r.return));break;case 1:mr(i,r),pr(r),u&512&&(wn||o===null||Li(o,o.return)),u&64&&la&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=yi;if(mr(i,r),pr(r),u&512&&(wn||o===null||Li(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Lt]||p[we]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),Gn(p,u,o),p[we]=r,Yt(p),u=p;break e;case"link":var v=YT("link","href",f).get(u+(o.href||""));if(v){for(var C=0;C<v.length;C++)if(p=v[C],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(C,1);break t}}p=f.createElement(u),Gn(p,u,o),f.head.appendChild(p);break;case"meta":if(v=YT("meta","content",f).get(u+(o.content||""))){for(C=0;C<v.length;C++)if(p=v[C],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(C,1);break t}}p=f.createElement(u),Gn(p,u,o),f.head.appendChild(p);break;default:throw Error(a(468,u))}p[we]=r,Yt(p),u=p}r.stateNode=u}else QT(f,r.type,r.stateNode);else r.stateNode=KT(f,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?QT(f,r.type,r.stateNode):KT(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Tp(r,r.memoizedProps,o.memoizedProps)}break;case 27:mr(i,r),pr(r),u&512&&(wn||o===null||Li(o,o.return)),o!==null&&u&4&&Tp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(mr(i,r),pr(r),u&512&&(wn||o===null||Li(o,o.return)),r.flags&32){f=r.stateNode;try{fr(f,"")}catch(Le){Vt(r,r.return,Le)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,Tp(r,f,o!==null?o.memoizedProps:f)),u&1024&&(Ap=!0);break;case 6:if(mr(i,r),pr(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Le){Vt(r,r.return,Le)}}break;case 3:if(sf=null,f=yi,yi=rf(i.containerInfo),mr(i,r),yi=f,pr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ul(i.containerInfo)}catch(Le){Vt(r,r.return,Le)}Ap&&(Ap=!1,QE(r));break;case 4:u=yi,yi=rf(r.stateNode.containerInfo),mr(i,r),pr(r),yi=u;break;case 12:mr(i,r),pr(r);break;case 31:mr(i,r),pr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Fh(r,u)));break;case 13:mr(i,r),pr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Gh=xt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Fh(r,u)));break;case 22:f=r.memoizedState!==null;var j=o!==null&&o.memoizedState!==null,Z=la,le=wn;if(la=Z||f,wn=le||j,mr(i,r),wn=le,la=Z,pr(r),u&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||j||la||wn||to(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){j=o=i;try{if(p=j.stateNode,f)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=j.stateNode;var de=j.memoizedProps.style,te=de!=null&&de.hasOwnProperty("display")?de.display:null;C.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Le){Vt(j,j.return,Le)}}}else if(i.tag===6){if(o===null){j=i;try{j.stateNode.nodeValue=f?"":j.memoizedProps}catch(Le){Vt(j,j.return,Le)}}}else if(i.tag===18){if(o===null){j=i;try{var ae=j.stateNode;f?LT(ae,!0):LT(j.stateNode,!1)}catch(Le){Vt(j,j.return,Le)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Fh(r,o))));break;case 19:mr(i,r),pr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Fh(r,u)));break;case 30:break;case 21:break;default:mr(i,r),pr(r)}}function pr(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(zE(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,p=bp(r);Hh(r,p,f);break;case 5:var v=o.stateNode;o.flags&32&&(fr(v,""),o.flags&=-33);var C=bp(r);Hh(r,C,v);break;case 3:case 4:var j=o.stateNode.containerInfo,Z=bp(r);Sp(r,Z,j);break;default:throw Error(a(161))}}catch(le){Vt(r,r.return,le)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function QE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;QE(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function ca(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)FE(r,i.alternate,i),i=i.sibling}function to(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Qa(4,i,i.return),to(i);break;case 1:Li(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&LE(i,i.return,o),to(i);break;case 27:Lu(i.stateNode);case 26:case 5:Li(i,i.return),to(i);break;case 22:i.memoizedState===null&&to(i);break;case 30:to(i);break;default:to(i)}r=r.sibling}}function ha(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,p=i,v=p.flags;switch(p.tag){case 0:case 11:case 15:ha(f,p,o),Iu(4,p);break;case 1:if(ha(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){Vt(u,u.return,Z)}if(u=p,f=u.updateQueue,f!==null){var C=u.stateNode;try{var j=f.shared.hiddenCallbacks;if(j!==null)for(f.shared.hiddenCallbacks=null,f=0;f<j.length;f++)Cv(j[f],C)}catch(Z){Vt(u,u.return,Z)}}o&&v&64&&jE(p),Du(p,p.return);break;case 27:BE(p);case 26:case 5:ha(f,p,o),o&&u===null&&v&4&&UE(p),Du(p,p.return);break;case 12:ha(f,p,o);break;case 31:ha(f,p,o),o&&v&4&&$E(f,p);break;case 13:ha(f,p,o),o&&v&4&&KE(f,p);break;case 22:p.memoizedState===null&&ha(f,p,o),Du(p,p.return);break;case 30:break;default:ha(f,p,o)}i=i.sibling}}function wp(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&pu(o))}function Cp(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&pu(r))}function _i(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)XE(r,i,o,u),i=i.sibling}function XE(r,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:_i(r,i,o,u),f&2048&&Iu(9,i);break;case 1:_i(r,i,o,u);break;case 3:_i(r,i,o,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&pu(r)));break;case 12:if(f&2048){_i(r,i,o,u),r=i.stateNode;try{var p=i.memoizedProps,v=p.id,C=p.onPostCommit;typeof C=="function"&&C(v,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(j){Vt(i,i.return,j)}}else _i(r,i,o,u);break;case 31:_i(r,i,o,u);break;case 13:_i(r,i,o,u);break;case 23:break;case 22:p=i.stateNode,v=i.alternate,i.memoizedState!==null?p._visibility&2?_i(r,i,o,u):Nu(r,i):p._visibility&2?_i(r,i,o,u):(p._visibility|=2,Jo(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&wp(v,i);break;case 24:_i(r,i,o,u),f&2048&&Cp(i.alternate,i);break;default:_i(r,i,o,u)}}function Jo(r,i,o,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=r,v=i,C=o,j=u,Z=v.flags;switch(v.tag){case 0:case 11:case 15:Jo(p,v,C,j,f),Iu(8,v);break;case 23:break;case 22:var le=v.stateNode;v.memoizedState!==null?le._visibility&2?Jo(p,v,C,j,f):Nu(p,v):(le._visibility|=2,Jo(p,v,C,j,f)),f&&Z&2048&&wp(v.alternate,v);break;case 24:Jo(p,v,C,j,f),f&&Z&2048&&Cp(v.alternate,v);break;default:Jo(p,v,C,j,f)}i=i.sibling}}function Nu(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,f=u.flags;switch(u.tag){case 22:Nu(o,u),f&2048&&wp(u.alternate,u);break;case 24:Nu(o,u),f&2048&&Cp(u.alternate,u);break;default:Nu(o,u)}i=i.sibling}}var xu=8192;function Zo(r,i,o){if(r.subtreeFlags&xu)for(r=r.child;r!==null;)WE(r,i,o),r=r.sibling}function WE(r,i,o){switch(r.tag){case 26:Zo(r,i,o),r.flags&xu&&r.memoizedState!==null&&nI(o,yi,r.memoizedState,r.memoizedProps);break;case 5:Zo(r,i,o);break;case 3:case 4:var u=yi;yi=rf(r.stateNode.containerInfo),Zo(r,i,o),yi=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=xu,xu=16777216,Zo(r,i,o),xu=u):Zo(r,i,o));break;default:Zo(r,i,o)}}function JE(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Ou(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];jn=u,eT(u,r)}JE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ZE(r),r=r.sibling}function ZE(r){switch(r.tag){case 0:case 11:case 15:Ou(r),r.flags&2048&&Qa(9,r,r.return);break;case 3:Ou(r);break;case 12:Ou(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,qh(r)):Ou(r);break;default:Ou(r)}}function qh(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];jn=u,eT(u,r)}JE(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Qa(8,i,i.return),qh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,qh(i));break;default:qh(i)}r=r.sibling}}function eT(r,i){for(;jn!==null;){var o=jn;switch(o.tag){case 0:case 11:case 15:Qa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:pu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,jn=u;else e:for(o=r;jn!==null;){u=jn;var f=u.sibling,p=u.return;if(qE(u),u===o){jn=null;break e}if(f!==null){f.return=p,jn=f;break e}jn=p}}}var yR={getCacheForType:function(r){var i=Fn(bn),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return Fn(bn).controller.signal}},_R=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Gt=null,mt=null,_t=0,kt=0,Ir=null,Xa=!1,el=!1,Rp=!1,fa=0,dn=0,Wa=0,no=0,Ip=0,Dr=0,tl=0,Mu=null,gr=null,Dp=!1,Gh=0,tT=0,$h=1/0,Kh=null,Ja=null,Dn=0,Za=null,nl=null,da=0,Np=0,xp=null,nT=null,Pu=0,Op=null;function Nr(){return(Nt&2)!==0&&_t!==0?_t&-_t:F.T!==null?Lp():Ae()}function rT(){if(Dr===0)if((_t&536870912)===0||St){var r=zn;zn<<=1,(zn&3932160)===0&&(zn=262144),Dr=r}else Dr=536870912;return r=Cr.current,r!==null&&(r.flags|=32),Dr}function yr(r,i,o){(r===Gt&&(kt===2||kt===9)||r.cancelPendingCommit!==null)&&(rl(r,0),es(r,_t,Dr,!1)),Ci(r,o),((Nt&2)===0||r!==Gt)&&(r===Gt&&((Nt&2)===0&&(no|=o),dn===4&&es(r,_t,Dr,!1)),Ui(r))}function iT(r,i,o){if((Nt&6)!==0)throw Error(a(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||Tr(r,i),f=u?TR(r,i):Pp(r,i,!0),p=u;do{if(f===0){el&&!u&&es(r,i,0,!1);break}else{if(o=r.current.alternate,p&&!vR(o)){f=Pp(r,i,!1),p=!1;continue}if(f===2){if(p=i,r.errorRecoveryDisabledLanes&p)var v=0;else v=r.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var C=r;f=Mu;var j=C.current.memoizedState.isDehydrated;if(j&&(rl(C,v).flags|=256),v=Pp(C,v,!1),v!==2){if(Rp&&!j){C.errorRecoveryDisabledLanes|=p,no|=p,f=4;break e}p=gr,gr=f,p!==null&&(gr===null?gr=p:gr.push.apply(gr,p))}f=v}if(p=!1,f!==2)continue}}if(f===1){rl(r,0),es(r,i,0,!0);break}e:{switch(u=r,p=f,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:es(u,i,Dr,!Xa);break e;case 2:gr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Gh+300-xt(),10<f)){if(es(u,i,Dr,!Xa),Er(u,0,!0)!==0)break e;da=i,u.timeoutHandle=kT(aT.bind(null,u,o,gr,Kh,Dp,i,Dr,no,tl,Xa,p,"Throttled",-0,0),f);break e}aT(u,o,gr,Kh,Dp,i,Dr,no,tl,Xa,p,null,-0,0)}}break}while(!0);Ui(r)}function aT(r,i,o,u,f,p,v,C,j,Z,le,de,te,ae){if(r.timeoutHandle=-1,de=i.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},WE(i,p,de);var Le=(p&62914560)===p?Gh-xt():(p&4194048)===p?tT-xt():0;if(Le=rI(de,Le),Le!==null){da=p,r.cancelPendingCommit=Le(dT.bind(null,r,i,p,o,u,f,v,C,j,le,de,null,te,ae)),es(r,p,v,!Z);return}}dT(r,i,p,o,u,f,v,C,j)}function vR(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!Ar(p(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function es(r,i,o,u){i&=~Ip,i&=~no,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var p=31-Se(f),v=1<<p;u[p]=-1,f&=~v}o!==0&&Xi(r,o,i)}function Yh(){return(Nt&6)===0?(ku(0),!1):!0}function Mp(){if(mt!==null){if(kt===0)var r=mt.return;else r=mt,na=Ks=null,Qm(r),Ko=null,yu=0,r=mt;for(;r!==null;)VE(r.alternate,r),r=r.return;mt=null}}function rl(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,UR(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),da=0,Mp(),Gt=r,mt=o=ea(r.current,null),_t=i,kt=0,Ir=null,Xa=!1,el=Tr(r,i),Rp=!1,tl=Dr=Ip=no=Wa=dn=0,gr=Mu=null,Dp=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-Se(u),p=1<<f;i|=r[f],u&=~p}return fa=i,ph(),o}function sT(r,i){rt=null,F.H=wu,i===$o||i===Sh?(i=bv(),kt=3):i===jm?(i=bv(),kt=4):kt=i===hp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ir=i,mt===null&&(dn=1,jh(r,Yr(i,r.current)))}function oT(){var r=Cr.current;return r===null?!0:(_t&4194048)===_t?Jr===null:(_t&62914560)===_t||(_t&536870912)!==0?r===Jr:!1}function lT(){var r=F.H;return F.H=wu,r===null?wu:r}function uT(){var r=F.A;return F.A=yR,r}function Qh(){dn=4,Xa||(_t&4194048)!==_t&&Cr.current!==null||(el=!0),(Wa&134217727)===0&&(no&134217727)===0||Gt===null||es(Gt,_t,Dr,!1)}function Pp(r,i,o){var u=Nt;Nt|=2;var f=lT(),p=uT();(Gt!==r||_t!==i)&&(Kh=null,rl(r,i)),i=!1;var v=dn;e:do try{if(kt!==0&&mt!==null){var C=mt,j=Ir;switch(kt){case 8:Mp(),v=6;break e;case 3:case 2:case 9:case 6:Cr.current===null&&(i=!0);var Z=kt;if(kt=0,Ir=null,il(r,C,j,Z),o&&el){v=0;break e}break;default:Z=kt,kt=0,Ir=null,il(r,C,j,Z)}}ER(),v=dn;break}catch(le){sT(r,le)}while(!0);return i&&r.shellSuspendCounter++,na=Ks=null,Nt=u,F.H=f,F.A=p,mt===null&&(Gt=null,_t=0,ph()),v}function ER(){for(;mt!==null;)cT(mt)}function TR(r,i){var o=Nt;Nt|=2;var u=lT(),f=uT();Gt!==r||_t!==i?(Kh=null,$h=xt()+500,rl(r,i)):el=Tr(r,i);e:do try{if(kt!==0&&mt!==null){i=mt;var p=Ir;t:switch(kt){case 1:kt=0,Ir=null,il(r,i,p,1);break;case 2:case 9:if(Ev(p)){kt=0,Ir=null,hT(i);break}i=function(){kt!==2&&kt!==9||Gt!==r||(kt=7),Ui(r)},p.then(i,i);break e;case 3:kt=7;break e;case 4:kt=5;break e;case 7:Ev(p)?(kt=0,Ir=null,hT(i)):(kt=0,Ir=null,il(r,i,p,7));break;case 5:var v=null;switch(mt.tag){case 26:v=mt.memoizedState;case 5:case 27:var C=mt;if(v?XT(v):C.stateNode.complete){kt=0,Ir=null;var j=C.sibling;if(j!==null)mt=j;else{var Z=C.return;Z!==null?(mt=Z,Xh(Z)):mt=null}break t}}kt=0,Ir=null,il(r,i,p,5);break;case 6:kt=0,Ir=null,il(r,i,p,6);break;case 8:Mp(),dn=6;break e;default:throw Error(a(462))}}bR();break}catch(le){sT(r,le)}while(!0);return na=Ks=null,F.H=u,F.A=f,Nt=o,mt!==null?0:(Gt=null,_t=0,ph(),dn)}function bR(){for(;mt!==null&&!Hr();)cT(mt)}function cT(r){var i=PE(r.alternate,r,fa);r.memoizedProps=r.pendingProps,i===null?Xh(r):mt=i}function hT(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=IE(o,i,i.pendingProps,i.type,void 0,_t);break;case 11:i=IE(o,i,i.pendingProps,i.type.render,i.ref,_t);break;case 5:Qm(i);default:VE(o,i),i=mt=uv(i,fa),i=PE(o,i,fa)}r.memoizedProps=r.pendingProps,i===null?Xh(r):mt=i}function il(r,i,o,u){na=Ks=null,Qm(i),Ko=null,yu=0;var f=i.return;try{if(cR(r,f,i,o,_t)){dn=1,jh(r,Yr(o,r.current)),mt=null;return}}catch(p){if(f!==null)throw mt=f,p;dn=1,jh(r,Yr(o,r.current)),mt=null;return}i.flags&32768?(St||u===1?r=!0:el||(_t&536870912)!==0?r=!1:(Xa=r=!0,(u===2||u===9||u===3||u===6)&&(u=Cr.current,u!==null&&u.tag===13&&(u.flags|=16384))),fT(i,r)):Xh(i)}function Xh(r){var i=r;do{if((i.flags&32768)!==0){fT(i,Xa);return}r=i.return;var o=dR(i.alternate,i,fa);if(o!==null){mt=o;return}if(i=i.sibling,i!==null){mt=i;return}mt=i=r}while(i!==null);dn===0&&(dn=5)}function fT(r,i){do{var o=mR(r.alternate,r);if(o!==null){o.flags&=32767,mt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){mt=r;return}mt=r=o}while(r!==null);dn=6,mt=null}function dT(r,i,o,u,f,p,v,C,j){r.cancelPendingCommit=null;do Wh();while(Dn!==0);if((Nt&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=bm,Zl(r,o,p,v,C,j),r===Gt&&(mt=Gt=null,_t=0),nl=i,Za=r,da=o,Np=p,xp=f,nT=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,CR(ce,function(){return _T(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=F.T,F.T=null,f=me.p,me.p=2,v=Nt,Nt|=4;try{pR(r,i,o)}finally{Nt=v,me.p=f,F.T=u}}Dn=1,mT(),pT(),gT()}}function mT(){if(Dn===1){Dn=0;var r=Za,i=nl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=F.T,F.T=null;var u=me.p;me.p=2;var f=Nt;Nt|=4;try{YE(i,r);var p=$p,v=ev(r.containerInfo),C=p.focusedElem,j=p.selectionRange;if(v!==C&&C&&C.ownerDocument&&Z_(C.ownerDocument.documentElement,C)){if(j!==null&&ym(C)){var Z=j.start,le=j.end;if(le===void 0&&(le=Z),"selectionStart"in C)C.selectionStart=Z,C.selectionEnd=Math.min(le,C.value.length);else{var de=C.ownerDocument||document,te=de&&de.defaultView||window;if(te.getSelection){var ae=te.getSelection(),Le=C.textContent.length,Ke=Math.min(j.start,Le),Ft=j.end===void 0?Ke:Math.min(j.end,Le);!ae.extend&&Ke>Ft&&(v=Ft,Ft=Ke,Ke=v);var K=J_(C,Ke),H=J_(C,Ft);if(K&&H&&(ae.rangeCount!==1||ae.anchorNode!==K.node||ae.anchorOffset!==K.offset||ae.focusNode!==H.node||ae.focusOffset!==H.offset)){var J=de.createRange();J.setStart(K.node,K.offset),ae.removeAllRanges(),Ke>Ft?(ae.addRange(J),ae.extend(H.node,H.offset)):(J.setEnd(H.node,H.offset),ae.addRange(J))}}}}for(de=[],ae=C;ae=ae.parentNode;)ae.nodeType===1&&de.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<de.length;C++){var he=de[C];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}cf=!!Gp,$p=Gp=null}finally{Nt=f,me.p=u,F.T=o}}r.current=i,Dn=2}}function pT(){if(Dn===2){Dn=0;var r=Za,i=nl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=F.T,F.T=null;var u=me.p;me.p=2;var f=Nt;Nt|=4;try{FE(r,i.alternate,i)}finally{Nt=f,me.p=u,F.T=o}}Dn=3}}function gT(){if(Dn===4||Dn===3){Dn=0,Pn();var r=Za,i=nl,o=da,u=nT;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Dn=5:(Dn=0,nl=Za=null,yT(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Ja=null),ge(o),i=i.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(yt,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=F.T,f=me.p,me.p=2,F.T=null;try{for(var p=r.onRecoverableError,v=0;v<u.length;v++){var C=u[v];p(C.value,{componentStack:C.stack})}}finally{F.T=i,me.p=f}}(da&3)!==0&&Wh(),Ui(r),f=r.pendingLanes,(o&261930)!==0&&(f&42)!==0?r===Op?Pu++:(Pu=0,Op=r):Pu=0,ku(0)}}function yT(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,pu(i)))}function Wh(){return mT(),pT(),gT(),_T()}function _T(){if(Dn!==5)return!1;var r=Za,i=Np;Np=0;var o=ge(da),u=F.T,f=me.p;try{me.p=32>o?32:o,F.T=null,o=xp,xp=null;var p=Za,v=da;if(Dn=0,nl=Za=null,da=0,(Nt&6)!==0)throw Error(a(331));var C=Nt;if(Nt|=4,ZE(p.current),XE(p,p.current,v,o),Nt=C,ku(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(yt,p)}catch{}return!0}finally{me.p=f,F.T=u,yT(r,i)}}function vT(r,i,o){i=Yr(o,i),i=cp(r.stateNode,i,2),r=$a(r,i,2),r!==null&&(Ci(r,2),Ui(r))}function Vt(r,i,o){if(r.tag===3)vT(r,r,o);else for(;i!==null;){if(i.tag===3){vT(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ja===null||!Ja.has(u))){r=Yr(o,r),o=EE(2),u=$a(i,o,2),u!==null&&(TE(o,u,i,r),Ci(u,2),Ui(u));break}}i=i.return}}function kp(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new _R;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(Rp=!0,f.add(o),r=SR.bind(null,r,i,o),i.then(r,r))}function SR(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Gt===r&&(_t&o)===o&&(dn===4||dn===3&&(_t&62914560)===_t&&300>xt()-Gh?(Nt&2)===0&&rl(r,0):Ip|=o,tl===_t&&(tl=0)),Ui(r)}function ET(r,i){i===0&&(i=Qi()),r=qs(r,i),r!==null&&(Ci(r,i),Ui(r))}function AR(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),ET(r,o)}function wR(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),ET(r,o)}function CR(r,i){return ht(r,i)}var Jh=null,al=null,Vp=!1,Zh=!1,jp=!1,ts=0;function Ui(r){r!==al&&r.next===null&&(al===null?Jh=al=r:al=al.next=r),Zh=!0,Vp||(Vp=!0,IR())}function ku(r,i){if(!jp&&Zh){jp=!0;do for(var o=!1,u=Jh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var v=u.suspendedLanes,C=u.pingedLanes;p=(1<<31-Se(42|r)+1)-1,p&=f&~(v&~C),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,AT(u,p))}else p=_t,p=Er(u,u===Gt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Tr(u,p)||(o=!0,AT(u,p));u=u.next}while(o);jp=!1}}function RR(){TT()}function TT(){Zh=Vp=!1;var r=0;ts!==0&&LR()&&(r=ts);for(var i=xt(),o=null,u=Jh;u!==null;){var f=u.next,p=bT(u,i);p===0?(u.next=null,o===null?Jh=f:o.next=f,f===null&&(al=o)):(o=u,(r!==0||(p&3)!==0)&&(Zh=!0)),u=f}Dn!==0&&Dn!==5||ku(r),ts!==0&&(ts=0)}function bT(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var v=31-Se(p),C=1<<v,j=f[v];j===-1?((C&o)===0||(C&u)!==0)&&(f[v]=Co(C,i)):j<=i&&(r.expiredLanes|=C),p&=~C}if(i=Gt,o=_t,o=Er(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(kt===2||kt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&En(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Tr(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&En(u),ge(o)){case 2:case 8:o=q;break;case 32:o=ce;break;case 268435456:o=ve;break;default:o=ce}return u=ST.bind(null,r),o=ht(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&En(u),r.callbackPriority=2,r.callbackNode=null,2}function ST(r,i){if(Dn!==0&&Dn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Wh()&&r.callbackNode!==o)return null;var u=_t;return u=Er(r,r===Gt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(iT(r,u,i),bT(r,xt()),r.callbackNode!=null&&r.callbackNode===o?ST.bind(null,r):null)}function AT(r,i){if(Wh())return null;iT(r,i,!0)}function IR(){zR(function(){(Nt&6)!==0?ht(ci,RR):TT()})}function Lp(){if(ts===0){var r=qo;r===0&&(r=an,an<<=1,(an&261888)===0&&(an=256)),ts=r}return ts}function wT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Do(""+r)}function CT(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function DR(r,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var p=wT((f[Ie]||null).action),v=u.submitter;v&&(i=(i=v[Ie]||null)?wT(i.formAction):v.getAttribute("formAction"),i!==null&&(p=i,v=null));var C=new Oi("action","action",null,u,f);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ts!==0){var j=v?CT(f,v):new FormData(f);ip(o,{pending:!0,data:j,method:f.method,action:p},null,j)}}else typeof p=="function"&&(C.preventDefault(),j=v?CT(f,v):new FormData(f),ip(o,{pending:!0,data:j,method:f.method,action:p},p,j))},currentTarget:f}]})}}for(var Up=0;Up<Tm.length;Up++){var zp=Tm[Up],NR=zp.toLowerCase(),xR=zp[0].toUpperCase()+zp.slice(1);gi(NR,"on"+xR)}gi(rv,"onAnimationEnd"),gi(iv,"onAnimationIteration"),gi(av,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(KC,"onTransitionRun"),gi(YC,"onTransitionStart"),gi(QC,"onTransitionCancel"),gi(sv,"onTransitionEnd"),Wn("onMouseEnter",["mouseout","mouseover"]),Wn("onMouseLeave",["mouseout","mouseover"]),Wn("onPointerEnter",["pointerout","pointerover"]),Wn("onPointerLeave",["pointerout","pointerover"]),cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vu));function RT(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var v=u.length-1;0<=v;v--){var C=u[v],j=C.instance,Z=C.currentTarget;if(C=C.listener,j!==p&&f.isPropagationStopped())break e;p=C,f.currentTarget=Z;try{p(f)}catch(le){mh(le)}f.currentTarget=null,p=j}else for(v=0;v<u.length;v++){if(C=u[v],j=C.instance,Z=C.currentTarget,C=C.listener,j!==p&&f.isPropagationStopped())break e;p=C,f.currentTarget=Z;try{p(f)}catch(le){mh(le)}f.currentTarget=null,p=j}}}}function pt(r,i){var o=i[Ye];o===void 0&&(o=i[Ye]=new Set);var u=r+"__bubble";o.has(u)||(IT(i,r,2,!1),o.add(u))}function Bp(r,i,o){var u=0;i&&(u|=4),IT(o,r,u,i)}var ef="_reactListening"+Math.random().toString(36).slice(2);function Hp(r){if(!r[ef]){r[ef]=!0,ur.forEach(function(o){o!=="selectionchange"&&(OR.has(o)||Bp(o,!1,r),Bp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[ef]||(i[ef]=!0,Bp("selectionchange",!1,i))}}function IT(r,i,o,u){switch(rb(i)){case 2:var f=sI;break;case 8:f=oI;break;default:f=rg}o=f.bind(null,i,o,r),f=void 0,!Vs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function Fp(r,i,o,u,f){var p=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var C=u.stateNode.containerInfo;if(C===f)break;if(v===4)for(v=u.return;v!==null;){var j=v.tag;if((j===3||j===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;C!==null;){if(v=$t(C),v===null)return;if(j=v.tag,j===5||j===6||j===26||j===27){u=p=v;continue e}C=C.parentNode}}u=u.return}Va(function(){var Z=p,le=qr(o),de=[];e:{var te=ov.get(r);if(te!==void 0){var ae=Oi,Le=r;switch(r){case"keypress":if(Ls(o)===0)break e;case"keydown":case"keyup":ae=hh;break;case"focusin":Le="focus",ae=zs;break;case"focusout":Le="blur",ae=zs;break;case"beforeblur":case"afterblur":ae=zs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=nh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=_;break;case rv:case iv:case av:ae=ih;break;case sv:ae=D;break;case"scroll":case"scrollend":ae=su;break;case"wheel":ae=re;break;case"copy":case"cut":case"paste":ae=ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Zi;break;case"toggle":case"beforetoggle":ae=nt}var Ke=(i&4)!==0,Ft=!Ke&&(r==="scroll"||r==="scrollend"),K=Ke?te!==null?te+"Capture":null:te;Ke=[];for(var H=Z,J;H!==null;){var he=H;if(J=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||J===null||K===null||(he=fi(H,K),he!=null&&Ke.push(ju(H,he,J))),Ft)break;H=H.return}0<Ke.length&&(te=new ae(te,Le,null,o,le),de.push({event:te,listeners:Ke}))}}if((i&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",te&&o!==ru&&(Le=o.relatedTarget||o.fromElement)&&($t(Le)||Le[Ve]))break e;if((ae||te)&&(te=le.window===le?le:(te=le.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(Le=o.relatedTarget||o.toElement,ae=Z,Le=Le?$t(Le):null,Le!==null&&(Ft=l(Le),Ke=Le.tag,Le!==Ft||Ke!==5&&Ke!==27&&Ke!==6)&&(Le=null)):(ae=null,Le=Z),ae!==Le)){if(Ke=ou,he="onMouseLeave",K="onMouseEnter",H="mouse",(r==="pointerout"||r==="pointerover")&&(Ke=Zi,he="onPointerLeave",K="onPointerEnter",H="pointer"),Ft=ae==null?te:Kt(ae),J=Le==null?te:Kt(Le),te=new Ke(he,H+"leave",ae,o,le),te.target=Ft,te.relatedTarget=J,he=null,$t(le)===Z&&(Ke=new Ke(K,H+"enter",Le,o,le),Ke.target=J,Ke.relatedTarget=Ft,he=Ke),Ft=he,ae&&Le)t:{for(Ke=MR,K=ae,H=Le,J=0,he=K;he;he=Ke(he))J++;he=0;for(var qe=H;qe;qe=Ke(qe))he++;for(;0<J-he;)K=Ke(K),J--;for(;0<he-J;)H=Ke(H),he--;for(;J--;){if(K===H||H!==null&&K===H.alternate){Ke=K;break t}K=Ke(K),H=Ke(H)}Ke=null}else Ke=null;ae!==null&&DT(de,te,ae,Ke,!1),Le!==null&&Ft!==null&&DT(de,Ft,Le,Ke,!0)}}e:{if(te=Z?Kt(Z):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var Ct=$_;else if(q_(te))if(K_)Ct=qC;else{Ct=HC;var ze=BC}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Io(Z.elementType)&&(Ct=$_):Ct=FC;if(Ct&&(Ct=Ct(r,Z))){G_(de,Ct,o,le);break e}ze&&ze(r,te,Z),r==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&eu(te,"number",te.value)}switch(ze=Z?Kt(Z):window,r){case"focusin":(q_(ze)||ze.contentEditable==="true")&&(Vo=ze,_m=Z,fu=null);break;case"focusout":fu=_m=Vo=null;break;case"mousedown":vm=!0;break;case"contextmenu":case"mouseup":case"dragend":vm=!1,tv(de,o,le);break;case"selectionchange":if($C)break;case"keydown":case"keyup":tv(de,o,le)}var ot;if(Dt)e:{switch(r){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else ko?Bs(r,o)&&(vt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(vt="onCompositionStart");vt&&(ki&&o.locale!=="ko"&&(ko||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ko&&(ot=au()):(xi=le,iu="value"in xi?xi.value:xi.textContent,ko=!0)),ze=tf(Z,vt),0<ze.length&&(vt=new Pi(vt,r,null,o,le),de.push({event:vt,listeners:ze}),ot?vt.data=ot:(ot=Po(o),ot!==null&&(vt.data=ot)))),(ot=$r?jC(r,o):LC(r,o))&&(vt=tf(Z,"onBeforeInput"),0<vt.length&&(ze=new Pi("onBeforeInput","beforeinput",null,o,le),de.push({event:ze,listeners:vt}),ze.data=ot)),DR(de,r,Z,o,le)}RT(de,i)})}function ju(r,i,o){return{instance:r,listener:i,currentTarget:o}}function tf(r,i){for(var o=i+"Capture",u=[];r!==null;){var f=r,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=fi(r,o),f!=null&&u.unshift(ju(r,f,p)),f=fi(r,i),f!=null&&u.push(ju(r,f,p))),r.tag===3)return u;r=r.return}return[]}function MR(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function DT(r,i,o,u,f){for(var p=i._reactName,v=[];o!==null&&o!==u;){var C=o,j=C.alternate,Z=C.stateNode;if(C=C.tag,j!==null&&j===u)break;C!==5&&C!==26&&C!==27||Z===null||(j=Z,f?(Z=fi(o,p),Z!=null&&v.unshift(ju(o,Z,j))):f||(Z=fi(o,p),Z!=null&&v.push(ju(o,Z,j)))),o=o.return}v.length!==0&&r.push({event:i,listeners:v})}var PR=/\r\n?/g,kR=/\u0000|\uFFFD/g;function NT(r){return(typeof r=="string"?r:""+r).replace(PR,`
`).replace(kR,"")}function xT(r,i){return i=NT(i),NT(r)===i}function Ht(r,i,o,u,f,p){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||fr(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&fr(r,""+u);break;case"className":Tn(r,"class",u);break;case"tabIndex":Tn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(r,o,u);break;case"style":nu(r,u,p);break;case"data":if(i!=="object"){Tn(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Do(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&Ht(r,i,"name",f.name,f,null),Ht(r,i,"formEncType",f.formEncType,f,null),Ht(r,i,"formMethod",f.formMethod,f,null),Ht(r,i,"formTarget",f.formTarget,f,null)):(Ht(r,i,"encType",f.encType,f,null),Ht(r,i,"method",f.method,f,null),Ht(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Do(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=hi);break;case"onScroll":u!=null&&pt("scroll",r);break;case"onScrollEnd":u!=null&&pt("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Do(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":pt("beforetoggle",r),pt("toggle",r),sn(r,"popover",u);break;case"xlinkActuate":Ut(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ut(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ut(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ut(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ut(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ut(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ut(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ut(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ut(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":sn(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=th.get(o)||o,sn(r,o,u))}}function qp(r,i,o,u,f,p){switch(o){case"style":nu(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof u=="string"?fr(r,u):(typeof u=="number"||typeof u=="bigint")&&fr(r,""+u);break;case"onScroll":u!=null&&pt("scroll",r);break;case"onScrollEnd":u!=null&&pt("scrollend",r);break;case"onClick":u!=null&&(r.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),p=r[Ie]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(i,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):sn(r,o,u)}}}function Gn(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",r),pt("load",r);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var v=o[p];if(v!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ht(r,i,p,v,o,null)}}f&&Ht(r,i,"srcSet",o.srcSet,o,null),u&&Ht(r,i,"src",o.src,o,null);return;case"input":pt("invalid",r);var C=p=v=f=null,j=null,Z=null;for(u in o)if(o.hasOwnProperty(u)){var le=o[u];if(le!=null)switch(u){case"name":f=le;break;case"type":v=le;break;case"checked":j=le;break;case"defaultChecked":Z=le;break;case"value":p=le;break;case"defaultValue":C=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(137,i));break;default:Ht(r,i,u,le,o,null)}}Jc(r,p,C,j,Z,v,f,!1);return;case"select":pt("invalid",r),u=v=p=null;for(f in o)if(o.hasOwnProperty(f)&&(C=o[f],C!=null))switch(f){case"value":p=C;break;case"defaultValue":v=C;break;case"multiple":u=C;default:Ht(r,i,f,C,o,null)}i=p,o=v,r.multiple=!!u,i!=null?Oa(r,!!u,i,!1):o!=null&&Oa(r,!!u,o,!0);return;case"textarea":pt("invalid",r),p=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(C=o[v],C!=null))switch(v){case"value":u=C;break;case"defaultValue":f=C;break;case"children":p=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(a(91));break;default:Ht(r,i,v,C,o,null)}Ma(r,u,f,p);return;case"option":for(j in o)if(o.hasOwnProperty(j)&&(u=o[j],u!=null))switch(j){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ht(r,i,j,u,o,null)}return;case"dialog":pt("beforetoggle",r),pt("toggle",r),pt("cancel",r),pt("close",r);break;case"iframe":case"object":pt("load",r);break;case"video":case"audio":for(u=0;u<Vu.length;u++)pt(Vu[u],r);break;case"image":pt("error",r),pt("load",r);break;case"details":pt("toggle",r);break;case"embed":case"source":case"link":pt("error",r),pt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(u=o[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ht(r,i,Z,u,o,null)}return;default:if(Io(i)){for(le in o)o.hasOwnProperty(le)&&(u=o[le],u!==void 0&&qp(r,i,le,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&Ht(r,i,C,u,o,null))}function VR(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,v=null,C=null,j=null,Z=null,le=null;for(ae in o){var de=o[ae];if(o.hasOwnProperty(ae)&&de!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":j=de;default:u.hasOwnProperty(ae)||Ht(r,i,ae,null,u,de)}}for(var te in u){var ae=u[te];if(de=o[te],u.hasOwnProperty(te)&&(ae!=null||de!=null))switch(te){case"type":p=ae;break;case"name":f=ae;break;case"checked":Z=ae;break;case"defaultChecked":le=ae;break;case"value":v=ae;break;case"defaultValue":C=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,i));break;default:ae!==de&&Ht(r,i,te,ae,u,de)}}Ro(r,v,C,j,Z,le,p,f);return;case"select":ae=v=C=te=null;for(p in o)if(j=o[p],o.hasOwnProperty(p)&&j!=null)switch(p){case"value":break;case"multiple":ae=j;default:u.hasOwnProperty(p)||Ht(r,i,p,null,u,j)}for(f in u)if(p=u[f],j=o[f],u.hasOwnProperty(f)&&(p!=null||j!=null))switch(f){case"value":te=p;break;case"defaultValue":C=p;break;case"multiple":v=p;default:p!==j&&Ht(r,i,f,p,u,j)}i=C,o=v,u=ae,te!=null?Oa(r,!!o,te,!1):!!u!=!!o&&(i!=null?Oa(r,!!o,i,!0):Oa(r,!!o,o?[]:"",!1));return;case"textarea":ae=te=null;for(C in o)if(f=o[C],o.hasOwnProperty(C)&&f!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ht(r,i,C,null,u,f)}for(v in u)if(f=u[v],p=o[v],u.hasOwnProperty(v)&&(f!=null||p!=null))switch(v){case"value":te=f;break;case"defaultValue":ae=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==p&&Ht(r,i,v,f,u,p)}Zc(r,te,ae);return;case"option":for(var Le in o)if(te=o[Le],o.hasOwnProperty(Le)&&te!=null&&!u.hasOwnProperty(Le))switch(Le){case"selected":r.selected=!1;break;default:Ht(r,i,Le,null,u,te)}for(j in u)if(te=u[j],ae=o[j],u.hasOwnProperty(j)&&te!==ae&&(te!=null||ae!=null))switch(j){case"selected":r.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Ht(r,i,j,te,u,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in o)te=o[Ke],o.hasOwnProperty(Ke)&&te!=null&&!u.hasOwnProperty(Ke)&&Ht(r,i,Ke,null,u,te);for(Z in u)if(te=u[Z],ae=o[Z],u.hasOwnProperty(Z)&&te!==ae&&(te!=null||ae!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,i));break;default:Ht(r,i,Z,te,u,ae)}return;default:if(Io(i)){for(var Ft in o)te=o[Ft],o.hasOwnProperty(Ft)&&te!==void 0&&!u.hasOwnProperty(Ft)&&qp(r,i,Ft,void 0,u,te);for(le in u)te=u[le],ae=o[le],!u.hasOwnProperty(le)||te===ae||te===void 0&&ae===void 0||qp(r,i,le,te,u,ae);return}}for(var K in o)te=o[K],o.hasOwnProperty(K)&&te!=null&&!u.hasOwnProperty(K)&&Ht(r,i,K,null,u,te);for(de in u)te=u[de],ae=o[de],!u.hasOwnProperty(de)||te===ae||te==null&&ae==null||Ht(r,i,de,te,u,ae)}function OT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jR(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],p=f.transferSize,v=f.initiatorType,C=f.duration;if(p&&C&&OT(v)){for(v=0,C=f.responseEnd,u+=1;u<o.length;u++){var j=o[u],Z=j.startTime;if(Z>C)break;var le=j.transferSize,de=j.initiatorType;le&&OT(de)&&(j=j.responseEnd,v+=le*(j<C?1:(C-Z)/(j-Z)))}if(--u,i+=8*(p+v)/(f.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Gp=null,$p=null;function nf(r){return r.nodeType===9?r:r.ownerDocument}function MT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function PT(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Kp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Yp=null;function LR(){var r=window.event;return r&&r.type==="popstate"?r===Yp?!1:(Yp=r,!0):(Yp=null,!1)}var kT=typeof setTimeout=="function"?setTimeout:void 0,UR=typeof clearTimeout=="function"?clearTimeout:void 0,VT=typeof Promise=="function"?Promise:void 0,zR=typeof queueMicrotask=="function"?queueMicrotask:typeof VT<"u"?function(r){return VT.resolve(null).then(r).catch(BR)}:kT;function BR(r){setTimeout(function(){throw r})}function ns(r){return r==="head"}function jT(r,i){var o=i,u=0;do{var f=o.nextSibling;if(r.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(f),ul(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Lu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Lu(o);for(var p=o.firstChild;p;){var v=p.nextSibling,C=p.nodeName;p[Lt]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=v}}else o==="body"&&Lu(r.ownerDocument.body);o=f}while(o);ul(i)}function LT(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Qp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Qp(o),Xt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function HR(r,i,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Lt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=Zr(r.nextSibling),r===null)break}return null}function FR(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Zr(r.nextSibling),r===null))return null;return r}function UT(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Zr(r.nextSibling),r===null))return null;return r}function Xp(r){return r.data==="$?"||r.data==="$~"}function Wp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function qR(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Zr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Jp=null;function zT(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return Zr(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function BT(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function HT(r,i,o){switch(i=nf(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function Lu(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Xt(r)}var ei=new Map,FT=new Set;function rf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ma=me.d;me.d={f:GR,r:$R,D:KR,C:YR,L:QR,m:XR,X:JR,S:WR,M:ZR};function GR(){var r=ma.f(),i=Yh();return r||i}function $R(r){var i=at(r);i!==null&&i.tag===5&&i.type==="form"?sE(i):ma.r(r)}var sl=typeof document>"u"?null:document;function qT(r,i,o){var u=sl;if(u&&typeof i=="string"&&i){var f=hr(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),FT.has(f)||(FT.add(f),r={rel:r,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),Gn(i,"link",r),Yt(i),u.head.appendChild(i)))}}function KR(r){ma.D(r),qT("dns-prefetch",r,null)}function YR(r,i){ma.C(r,i),qT("preconnect",r,i)}function QR(r,i,o){ma.L(r,i,o);var u=sl;if(u&&r&&i){var f='link[rel="preload"][as="'+hr(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+hr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+hr(o.imageSizes)+'"]')):f+='[href="'+hr(r)+'"]';var p=f;switch(i){case"style":p=ol(r);break;case"script":p=ll(r)}ei.has(p)||(r=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),ei.set(p,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(Uu(p))||i==="script"&&u.querySelector(zu(p))||(i=u.createElement("link"),Gn(i,"link",r),Yt(i),u.head.appendChild(i)))}}function XR(r,i){ma.m(r,i);var o=sl;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+hr(u)+'"][href="'+hr(r)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ll(r)}if(!ei.has(p)&&(r=E({rel:"modulepreload",href:r},i),ei.set(p,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(zu(p)))return}u=o.createElement("link"),Gn(u,"link",r),Yt(u),o.head.appendChild(u)}}}function WR(r,i,o){ma.S(r,i,o);var u=sl;if(u&&r){var f=Vn(u).hoistableStyles,p=ol(r);i=i||"default";var v=f.get(p);if(!v){var C={loading:0,preload:null};if(v=u.querySelector(Uu(p)))C.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":i},o),(o=ei.get(p))&&Zp(r,o);var j=v=u.createElement("link");Yt(j),Gn(j,"link",r),j._p=new Promise(function(Z,le){j.onload=Z,j.onerror=le}),j.addEventListener("load",function(){C.loading|=1}),j.addEventListener("error",function(){C.loading|=2}),C.loading|=4,af(v,i,u)}v={type:"stylesheet",instance:v,count:1,state:C},f.set(p,v)}}}function JR(r,i){ma.X(r,i);var o=sl;if(o&&r){var u=Vn(o).hoistableScripts,f=ll(r),p=u.get(f);p||(p=o.querySelector(zu(f)),p||(r=E({src:r,async:!0},i),(i=ei.get(f))&&eg(r,i),p=o.createElement("script"),Yt(p),Gn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function ZR(r,i){ma.M(r,i);var o=sl;if(o&&r){var u=Vn(o).hoistableScripts,f=ll(r),p=u.get(f);p||(p=o.querySelector(zu(f)),p||(r=E({src:r,async:!0,type:"module"},i),(i=ei.get(f))&&eg(r,i),p=o.createElement("script"),Yt(p),Gn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function GT(r,i,o,u){var f=(f=be.current)?rf(f):null;if(!f)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=ol(o.href),o=Vn(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=ol(o.href);var p=Vn(f).hoistableStyles,v=p.get(r);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,v),(p=f.querySelector(Uu(r)))&&!p._p&&(v.instance=p,v.state.loading=5),ei.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ei.set(r,o),p||eI(f,r,o,v.state))),i&&u===null)throw Error(a(528,""));return v}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ll(o),o=Vn(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function ol(r){return'href="'+hr(r)+'"'}function Uu(r){return'link[rel="stylesheet"]['+r+"]"}function $T(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function eI(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Gn(i,"link",o),Yt(i),r.head.appendChild(i))}function ll(r){return'[src="'+hr(r)+'"]'}function zu(r){return"script[async]"+r}function KT(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+hr(o.href)+'"]');if(u)return i.instance=u,Yt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Yt(u),Gn(u,"style",f),af(u,o.precedence,r),i.instance=u;case"stylesheet":f=ol(o.href);var p=r.querySelector(Uu(f));if(p)return i.state.loading|=4,i.instance=p,Yt(p),p;u=$T(o),(f=ei.get(f))&&Zp(u,f),p=(r.ownerDocument||r).createElement("link"),Yt(p);var v=p;return v._p=new Promise(function(C,j){v.onload=C,v.onerror=j}),Gn(p,"link",u),i.state.loading|=4,af(p,o.precedence,r),i.instance=p;case"script":return p=ll(o.src),(f=r.querySelector(zu(p)))?(i.instance=f,Yt(f),f):(u=o,(f=ei.get(p))&&(u=E({},o),eg(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),Yt(f),Gn(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,af(u,o.precedence,r));return i.instance}function af(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,v=0;v<u.length;v++){var C=u[v];if(C.dataset.precedence===i)p=C;else if(p!==f)break}p?p.parentNode.insertBefore(r,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Zp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function eg(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var sf=null;function YT(r,i,o){if(sf===null){var u=new Map,f=sf=new Map;f.set(o,u)}else f=sf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var p=o[f];if(!(p[Lt]||p[we]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(i)||"";v=r+v;var C=u.get(v);C?C.push(p):u.set(v,[p])}}return u}function QT(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function tI(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function XT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function nI(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=ol(u.href),p=i.querySelector(Uu(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=of.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=p,Yt(p);return}p=i.ownerDocument||i,u=$T(u),(f=ei.get(f))&&Zp(u,f),p=p.createElement("link"),Yt(p);var v=p;v._p=new Promise(function(C,j){v.onload=C,v.onerror=j}),Gn(p,"link",u),o.instance=p}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=of.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var tg=0;function rI(r,i){return r.stylesheets&&r.count===0&&uf(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&uf(r,r.stylesheets),r.unsuspend){var p=r.unsuspend;r.unsuspend=null,p()}},6e4+i);0<r.imgBytes&&tg===0&&(tg=62500*jR());var f=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&uf(r,r.stylesheets),r.unsuspend)){var p=r.unsuspend;r.unsuspend=null,p()}},(r.imgBytes>tg?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function of(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var lf=null;function uf(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,lf=new Map,i.forEach(iI,r),lf=null,of.call(r))}function iI(r,i){if(!(i.state.loading&4)){var o=lf.get(r);if(o)var u=o.get(null);else{o=new Map,lf.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var v=f[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=i.instance,v=f.getAttribute("data-precedence"),p=o.get(v)||u,p===u&&o.set(null,f),o.set(v,f),this.count++,u=of.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var Bu={$$typeof:Q,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function aI(r,i,o,u,f,p,v,C,j){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ir(0),this.hiddenUpdates=ir(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function WT(r,i,o,u,f,p,v,C,j,Z,le,de){return r=new aI(r,i,o,v,j,Z,le,de,C),i=1,p===!0&&(i|=24),p=wr(3,null,null,i),r.current=p,p.stateNode=r,i=Pm(),i.refCount++,r.pooledCache=i,i.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:i},Lm(p),r}function JT(r){return r?(r=Uo,r):Uo}function ZT(r,i,o,u,f,p){f=JT(f),u.context===null?u.context=f:u.pendingContext=f,u=Ga(i),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=$a(r,u,i),o!==null&&(yr(o,r,i),vu(o,r,i))}function eb(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function ng(r,i){eb(r,i),(r=r.alternate)&&eb(r,i)}function tb(r){if(r.tag===13||r.tag===31){var i=qs(r,67108864);i!==null&&yr(i,r,67108864),ng(r,67108864)}}function nb(r){if(r.tag===13||r.tag===31){var i=Nr();i=ee(i);var o=qs(r,i);o!==null&&yr(o,r,i),ng(r,i)}}var cf=!0;function sI(r,i,o,u){var f=F.T;F.T=null;var p=me.p;try{me.p=2,rg(r,i,o,u)}finally{me.p=p,F.T=f}}function oI(r,i,o,u){var f=F.T;F.T=null;var p=me.p;try{me.p=8,rg(r,i,o,u)}finally{me.p=p,F.T=f}}function rg(r,i,o,u){if(cf){var f=ig(u);if(f===null)Fp(r,i,u,hf,o),ib(r,u);else if(uI(f,r,i,o,u))u.stopPropagation();else if(ib(r,u),i&4&&-1<lI.indexOf(r)){for(;f!==null;){var p=at(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Fr(p.pendingLanes);if(v!==0){var C=p;for(C.pendingLanes|=2,C.entangledLanes|=2;v;){var j=1<<31-Se(v);C.entanglements[1]|=j,v&=~j}Ui(p),(Nt&6)===0&&($h=xt()+500,ku(0))}}break;case 31:case 13:C=qs(p,2),C!==null&&yr(C,p,2),Yh(),ng(p,2)}if(p=ig(u),p===null&&Fp(r,i,u,hf,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Fp(r,i,u,null,o)}}function ig(r){return r=qr(r),ag(r)}var hf=null;function ag(r){if(hf=null,r=$t(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return hf=r,null}function rb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Un()){case ci:return 2;case q:return 8;case ce:case Ce:return 32;case ve:return 268435456;default:return 32}default:return 32}}var sg=!1,rs=null,is=null,as=null,Hu=new Map,Fu=new Map,ss=[],lI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ib(r,i){switch(r){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Hu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fu.delete(i.pointerId)}}function qu(r,i,o,u,f,p){return r===null||r.nativeEvent!==p?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},i!==null&&(i=at(i),i!==null&&tb(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function uI(r,i,o,u,f){switch(i){case"focusin":return rs=qu(rs,r,i,o,u,f),!0;case"dragenter":return is=qu(is,r,i,o,u,f),!0;case"mouseover":return as=qu(as,r,i,o,u,f),!0;case"pointerover":var p=f.pointerId;return Hu.set(p,qu(Hu.get(p)||null,r,i,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Fu.set(p,qu(Fu.get(p)||null,r,i,o,u,f)),!0}return!1}function ab(r){var i=$t(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,Pe(r.priority,function(){nb(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,Pe(r.priority,function(){nb(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ff(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=ig(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);ru=u,o.target.dispatchEvent(u),ru=null}else return i=at(o),i!==null&&tb(i),r.blockedOn=o,!1;i.shift()}return!0}function sb(r,i,o){ff(r)&&o.delete(i)}function cI(){sg=!1,rs!==null&&ff(rs)&&(rs=null),is!==null&&ff(is)&&(is=null),as!==null&&ff(as)&&(as=null),Hu.forEach(sb),Fu.forEach(sb)}function df(r,i){r.blockedOn===i&&(r.blockedOn=null,sg||(sg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,cI)))}var mf=null;function ob(r){mf!==r&&(mf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){mf===r&&(mf=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(ag(u||o)===null)continue;break}var p=at(o);p!==null&&(r.splice(i,3),i-=3,ip(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function ul(r){function i(j){return df(j,r)}rs!==null&&df(rs,r),is!==null&&df(is,r),as!==null&&df(as,r),Hu.forEach(i),Fu.forEach(i);for(var o=0;o<ss.length;o++){var u=ss[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ss.length&&(o=ss[0],o.blockedOn===null);)ab(o),o.blockedOn===null&&ss.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],v=f[Ie]||null;if(typeof p=="function")v||ob(o);else if(v){var C=null;if(p&&p.hasAttribute("formAction")){if(f=p,v=p[Ie]||null)C=v.formAction;else if(ag(f)!==null)continue}else C=v.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),ob(o)}}}function lb(){function r(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function og(r){this._internalRoot=r}pf.prototype.render=og.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=Nr();ZT(o,u,r,i,null,null)},pf.prototype.unmount=og.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;ZT(r.current,2,null,r,null,null),Yh(),i[Ve]=null}};function pf(r){this._internalRoot=r}pf.prototype.unstable_scheduleHydration=function(r){if(r){var i=Ae();r={blockedOn:null,target:r,priority:i};for(var o=0;o<ss.length&&i!==0&&i<ss[o].priority;o++);ss.splice(o,0,r),o===0&&ab(r)}};var ub=e.version;if(ub!=="19.2.4")throw Error(a(527,ub,"19.2.4"));me.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=g(i),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var hI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gf.isDisabled&&gf.supportsFiber)try{yt=gf.inject(hI),Oe=gf}catch{}}return $u.createRoot=function(r,i){if(!s(r))throw Error(a(299));var o=!1,u="",f=gE,p=yE,v=_E;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=WT(r,1,!1,null,null,o,u,null,f,p,v,lb),r[Ve]=i.current,Hp(r),new og(i)},$u.hydrateRoot=function(r,i,o){if(!s(r))throw Error(a(299));var u=!1,f="",p=gE,v=yE,C=_E,j=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.formState!==void 0&&(j=o.formState)),i=WT(r,1,!0,i,o??null,u,f,j,p,v,C,lb),i.context=JT(null),o=i.current,u=Nr(),u=ee(u),f=Ga(u),f.callback=null,$a(o,f,u),o=u,i.current.lanes=o,Ci(i,o),Ui(i),r[Ve]=i.current,Hp(r),new pf(i)},$u.version="19.2.4",$u}var vb;function AI(){if(vb)return hg.exports;vb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hg.exports=SI(),hg.exports}var wI=AI();const CI=YS(wI);var pg={exports:{}},gg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eb;function RI(){if(Eb)return gg;Eb=1;var n=Od();function e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var t=typeof Object.is=="function"?Object.is:e,a=n.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return gg.useSyncExternalStoreWithSelector=function(m,g,y,E,S){var w=s(null);if(w.current===null){var M={hasValue:!1,value:null};w.current=M}else M=w.current;w=c(function(){function U(ue){if(!Y){if(Y=!0,z=ue,ue=E(ue),S!==void 0&&M.hasValue){var G=M.value;if(S(G,ue))return Q=G}return Q=ue}if(G=Q,t(z,ue))return G;var A=E(ue);return S!==void 0&&S(G,A)?(z=ue,G):(z=ue,Q=A)}var Y=!1,z,Q,ne=y===void 0?null:y;return[function(){return U(g())},ne===null?void 0:function(){return U(ne())}]},[g,y,E,S]);var B=a(m,w[0],w[1]);return l(function(){M.hasValue=!0,M.value=B},[B]),d(B),B},gg}var Tb;function II(){return Tb||(Tb=1,pg.exports=RI()),pg.exports}var DI=II();function NI(n){n()}function xI(){let n=null,e=null;return{clear(){n=null,e=null},notify(){NI(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let a=n;for(;a;)t.push(a),a=a.next;return t},subscribe(t){let a=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!a||n===null||(a=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var bb={notify(){},get:()=>[]};function OI(n,e){let t,a=bb,s=0,l=!1;function c(B){y();const U=a.subscribe(B);let Y=!1;return()=>{Y||(Y=!0,U(),E())}}function d(){a.notify()}function m(){M.onStateChange&&M.onStateChange()}function g(){return l}function y(){s++,t||(t=n.subscribe(m),a=xI())}function E(){s--,t&&s===0&&(t(),t=void 0,a.clear(),a=bb)}function S(){l||(l=!0,y())}function w(){l&&(l=!1,E())}const M={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:m,isSubscribed:g,trySubscribe:S,tryUnsubscribe:w,getListeners:()=>a};return M}var MI=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PI=MI(),kI=()=>typeof navigator<"u"&&navigator.product==="ReactNative",VI=kI(),jI=()=>PI||VI?P.useLayoutEffect:P.useEffect,LI=jI(),yg=Symbol.for("react-redux-context"),_g=typeof globalThis<"u"?globalThis:{};function UI(){if(!P.createContext)return{};const n=_g[yg]??(_g[yg]=new Map);let e=n.get(P.createContext);return e||(e=P.createContext(null),n.set(P.createContext,e)),e}var Ss=UI();function zI(n){const{children:e,context:t,serverState:a,store:s}=n,l=P.useMemo(()=>{const m=OI(s);return{store:s,subscription:m,getServerState:a?()=>a:void 0}},[s,a]),c=P.useMemo(()=>s.getState(),[s]);LI(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==s.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,c]);const d=t||Ss;return P.createElement(d.Provider,{value:l},e)}var BI=zI;function Iy(n=Ss){return function(){return P.useContext(n)}}var WS=Iy();function JS(n=Ss){const e=n===Ss?WS:Iy(n),t=()=>{const{store:a}=e();return a};return Object.assign(t,{withTypes:()=>t}),t}var HI=JS();function FI(n=Ss){const e=n===Ss?HI:JS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var qI=FI(),GI=(n,e)=>n===e;function $I(n=Ss){const e=n===Ss?WS:Iy(n),t=(a,s={})=>{const{equalityFn:l=GI}=typeof s=="function"?{equalityFn:s}:s,c=e(),{store:d,subscription:m,getServerState:g}=c;P.useRef(!0);const y=P.useCallback({[a.name](S){return a(S)}}[a.name],[a]),E=DI.useSyncExternalStoreWithSelector(m.addNestedSub,d.getState,g||d.getState,y,l);return P.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var KI=$I();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ZS=n=>{throw TypeError(n)},YI=(n,e,t)=>e.has(n)||ZS("Cannot "+t),vg=(n,e,t)=>(YI(n,e,"read from private field"),t?t.call(n):e.get(n)),QI=(n,e,t)=>e.has(n)?ZS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Sb="popstate";function XI(n={}){function e(s,l){let{pathname:c="/",search:d="",hash:m=""}=Da(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),mc("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=s.location.href,g=m.indexOf("#");d=g===-1?m:m.slice(0,g)}return d+"#"+(typeof l=="string"?l:$i(l))}function a(s,l){un(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return JI(e,t,a,n)}function ct(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function un(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WI(){return Math.random().toString(36).substring(2,10)}function Ab(n,e){return{usr:n.state,key:n.key,idx:e}}function mc(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Da(e):e,state:t,key:e&&e.key||a||WI()}}function $i({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Da(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function JI(n,e,t,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,d="POP",m=null,g=y();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function y(){return(c.state||{idx:null}).idx}function E(){d="POP";let U=y(),Y=U==null?null:U-g;g=U,m&&m({action:d,location:B.location,delta:Y})}function S(U,Y){d="PUSH";let z=mc(B.location,U,Y);t&&t(z,U),g=y()+1;let Q=Ab(z,g),ne=B.createHref(z);try{c.pushState(Q,"",ne)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;s.location.assign(ne)}l&&m&&m({action:d,location:B.location,delta:1})}function w(U,Y){d="REPLACE";let z=mc(B.location,U,Y);t&&t(z,U),g=y();let Q=Ab(z,g),ne=B.createHref(z);c.replaceState(Q,"",ne),l&&m&&m({action:d,location:B.location,delta:0})}function M(U){return eA(U)}let B={get action(){return d},get location(){return n(s,c)},listen(U){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(Sb,E),m=U,()=>{s.removeEventListener(Sb,E),m=null}},createHref(U){return e(s,U)},createURL:M,encodeLocation(U){let Y=M(U);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:S,replace:w,go(U){return c.go(U)}};return B}function eA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ct(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:$i(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}var Wu,wb=class{constructor(n){if(QI(this,Wu,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(vg(this,Wu).has(n))return vg(this,Wu).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){vg(this,Wu).set(n,e)}};Wu=new WeakMap;var ZI=new Set(["lazy","caseSensitive","path","id","index","children"]);function eD(n){return ZI.has(n)}var tD=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function nD(n){return tD.has(n)}function rD(n){return n.index===!0}function pc(n,e,t=[],a={},s=!1){return n.map((l,c)=>{let d=[...t,String(c)],m=typeof l.id=="string"?l.id:d.join("-");if(ct(l.index!==!0||!l.children,"Cannot specify children on an index route"),ct(s||!a[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),rD(l)){let g={...l,id:m};return a[m]=Cb(g,e(g)),g}else{let g={...l,id:m,children:void 0};return a[m]=Cb(g,e(g)),l.children&&(g.children=pc(l.children,e,d,a,s)),g}})}function Cb(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function cs(n,e,t="/"){return Ju(n,e,t,!1)}function Ju(n,e,t,a){let s=typeof e=="string"?Da(e):e,l=ai(s.pathname||"/",t);if(l==null)return null;let c=tA(n);aD(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=gD(l);d=mD(c[m],g,a)}return d}function iD(n,e){let{route:t,pathname:a,params:s}=n;return{id:t.id,pathname:a,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function tA(n,e=[],t=[],a="",s=!1){let l=(c,d,m=s,g)=>{let y={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(a)&&m)return;ct(y.relativePath.startsWith(a),`Absolute route path "${y.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(a.length)}let E=Bi([a,y.relativePath]),S=t.concat(y);c.children&&c.children.length>0&&(ct(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),tA(c.children,e,S,E,m)),!(c.path==null&&!c.index)&&e.push({path:E,score:fD(E,c.index),routesMeta:S})};return n.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))l(c,d);else for(let g of nA(c.path))l(c,d,!0,g)}),e}function nA(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=nA(a.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),s&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function aD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:dD(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var sD=/^:[\w-]+$/,oD=3,lD=2,uD=1,cD=10,hD=-2,Rb=n=>n==="*";function fD(n,e){let t=n.split("/"),a=t.length;return t.some(Rb)&&(a+=hD),e&&(a+=lD),t.filter(s=>!Rb(s)).reduce((s,l)=>s+(sD.test(l)?oD:l===""?uD:cD),a)}function dD(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function mD(n,e,t=!1){let{routesMeta:a}=n,s={},l="/",c=[];for(let d=0;d<a.length;++d){let m=a[d],g=d===a.length-1,y=l==="/"?e:e.slice(l.length)||"/",E=td({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),S=m.route;if(!E&&g&&t&&!a[a.length-1].route.index&&(E=td({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:Bi([l,E.pathname]),pathnameBase:vD(Bi([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Bi([l,E.pathnameBase]))}return c}function td(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=pD(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((g,{paramName:y,isOptional:E},S)=>{if(y==="*"){let M=d[S]||"";c=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const w=d[S];return E&&!w?g[y]=void 0:g[y]=(w||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function pD(n,e=!1,t=!0){un(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(a.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function gD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return un(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ai(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function yD({basename:n,pathname:e}){return e==="/"?n:Bi([n,e])}var rA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dy=n=>rA.test(n);function _D(n,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof n=="string"?Da(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=Ib(t.substring(1),"/"):l=Ib(t,e)):l=e,{pathname:l,search:ED(a),hash:TD(s)}}function Ib(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Eg(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Md(n){let e=iA(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function Pd(n,e,t,a=!1){let s;typeof n=="string"?s=Da(n):(s={...n},ct(!s.pathname||!s.pathname.includes("?"),Eg("?","pathname","search",s)),ct(!s.pathname||!s.pathname.includes("#"),Eg("#","pathname","hash",s)),ct(!s.search||!s.search.includes("#"),Eg("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!a&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;s.pathname=S.join("/")}d=E>=0?e[E]:"/"}let m=_D(s,d),g=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var Bi=n=>n.join("/").replace(/\/\/+/g,"/"),vD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ED=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,TD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Nc=class{constructor(n,e,t,a=!1){this.status=n,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function gc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function xc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var aA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sA(n,e){let t=n;if(typeof t!="string"||!rA.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,s=!1;if(aA)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=ai(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:s=!0}catch{un(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:t}}var ps=Symbol("Uninstrumented");function bD(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let d of c)l[d]&&t[d].push(l[d])}}));let a={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=Tl(t.lazy,e.lazy,()=>{});s&&(a.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],d=t[`lazy.${l}`];if(typeof c=="function"&&d.length>0){let m=Tl(d,c,()=>{});m&&(a.lazy=Object.assign(a.lazy||{},{[l]:m}))}})}return["loader","action"].forEach(s=>{let l=e[s];if(typeof l=="function"&&t[s].length>0){let c=l[ps]??l,d=Tl(t[s],c,(...m)=>Db(m[0]));d&&(s==="loader"&&c.hydrate===!0&&(d.hydrate=!0),d[ps]=c,a[s]=d)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(a.middleware=e.middleware.map(s=>{let l=s[ps]??s,c=Tl(t.middleware,l,(...d)=>Db(d[0]));return c?(c[ps]=l,c):s})),a}function SD(n,e){let t={navigate:[],fetch:[]};if(e.forEach(a=>a({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&t[c].push(s[c])}})),t.navigate.length>0){let a=n.navigate[ps]??n.navigate,s=Tl(t.navigate,a,(...l)=>{let[c,d]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?$i(c):".",...Nb(n,d??{})}});s&&(s[ps]=a,n.navigate=s)}if(t.fetch.length>0){let a=n.fetch[ps]??n.fetch,s=Tl(t.fetch,a,(...l)=>{let[c,,d,m]=l;return{href:d??".",fetcherKey:c,...Nb(n,m??{})}});s&&(s[ps]=a,n.fetch=s)}return n}function Tl(n,e,t){return n.length===0?null:async(...a)=>{let s=await oA(n,t(...a),()=>e(...a),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function oA(n,e,t,a){let s=n[a],l;if(s){let c,d=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=oA(n,e,t,a-1),l=await c,ct(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(d,e)}catch(m){console.error("An instrumentation function threw an error:",m)}c||await d(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Db(n){let{request:e,context:t,params:a,unstable_pattern:s}=n;return{request:AD(e),params:{...a},unstable_pattern:s,context:wD(t)}}function Nb(n,e){return{currentUrl:$i(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function AD(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function wD(n){if(RD(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var CD=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function RD(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===CD}var lA=["POST","PUT","PATCH","DELETE"],ID=new Set(lA),DD=["GET",...lA],ND=new Set(DD),uA=new Set([301,302,303,307,308]),xD=new Set([307,308]),Tg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},OD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ku={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},MD=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),cA="remix-router-transitions",hA=Symbol("ResetLoaderData");function PD(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";ct(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=n.hydrationRouteProperties||[],s=n.mapRouteProperties||MD,l=s;if(n.unstable_instrumentations){let V=n.unstable_instrumentations;l=$=>({...s($),...bD(V.map(ee=>ee.route).filter(Boolean),$)})}let c={},d=pc(n.routes,l,void 0,c),m,g=n.basename||"/";g.startsWith("/")||(g=`/${g}`);let y=n.dataStrategy||UD,E={...n.future},S=null,w=new Set,M=null,B=null,U=null,Y=n.hydrationData!=null,z=cs(d,n.history.location,g),Q=!1,ne=null,ue;if(z==null&&!n.patchRoutesOnNavigation){let V=ti(404,{pathname:n.history.location.pathname}),{matches:$,route:ee}=yf(d);ue=!0,z=$,ne={[ee.id]:V}}else if(z&&!n.hydrationData&&Qi(z,d,n.history.location.pathname).active&&(z=null),z)if(z.some(V=>V.route.lazy))ue=!1;else if(!z.some(V=>Ny(V.route)))ue=!0;else{let V=n.hydrationData?n.hydrationData.loaderData:null,$=n.hydrationData?n.hydrationData.errors:null;if($){let ee=z.findIndex(ge=>$[ge.route.id]!==void 0);ue=z.slice(0,ee+1).every(ge=>!Gg(ge.route,V,$))}else ue=z.every(ee=>!Gg(ee.route,V,$))}else{ue=!1,z=[];let V=Qi(null,d,n.history.location.pathname);V.active&&V.matches&&(Q=!0,z=V.matches)}let G,A={historyAction:n.history.action,location:n.history.location,matches:z,initialized:ue,navigation:Tg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||ne,fetchers:new Map,blockers:new Map},R="POP",N=null,x=!1,O,k=!1,I=new Map,ie=null,Te=!1,F=!1,me=new Set,ye=new Map,Me=0,Ue=-1,L=new Map,se=new Set,Ee=new Map,oe=new Map,_e=new Set,be=new Map,De,Be=null;function $e(){if(S=n.history.listen(({action:V,location:$,delta:ee})=>{if(De){De(),De=void 0;return}un(be.size===0||ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ge=zn({currentLocation:A.location,nextLocation:$,historyAction:V});if(ge&&ee!=null){let Ae=new Promise(Pe=>{De=Pe});n.history.go(ee*-1),an(ge,{state:"blocked",location:$,proceed(){an(ge,{state:"proceeding",proceed:void 0,reset:void 0,location:$}),Ae.then(()=>n.history.go(ee))},reset(){let Pe=new Map(A.blockers);Pe.set(ge,Ku),dt({blockers:Pe})}}),N==null||N.resolve(),N=null;return}return rn(V,$)}),t){rN(e,I);let V=()=>iN(e,I);e.addEventListener("pagehide",V),ie=()=>e.removeEventListener("pagehide",V)}return A.initialized||rn("POP",A.location,{initialHydration:!0}),G}function gt(){S&&S(),ie&&ie(),w.clear(),O&&O.abort(),A.fetchers.forEach((V,$)=>Fe($)),A.blockers.forEach((V,$)=>kn($))}function jt(V){return w.add(V),()=>w.delete(V)}function dt(V,$={}){V.matches&&(V.matches=V.matches.map(Ae=>{let Pe=c[Ae.route.id],je=Ae.route;return je.element!==Pe.element||je.errorElement!==Pe.errorElement||je.hydrateFallbackElement!==Pe.hydrateFallbackElement?{...Ae,route:Pe}:Ae})),A={...A,...V};let ee=[],ge=[];A.fetchers.forEach((Ae,Pe)=>{Ae.state==="idle"&&(_e.has(Pe)?ee.push(Pe):ge.push(Pe))}),_e.forEach(Ae=>{!A.fetchers.has(Ae)&&!ye.has(Ae)&&ee.push(Ae)}),[...w].forEach(Ae=>Ae(A,{deletedFetchers:ee,newErrors:V.errors??null,viewTransitionOpts:$.viewTransitionOpts,flushSync:$.flushSync===!0})),ee.forEach(Ae=>Fe(Ae)),ge.forEach(Ae=>A.fetchers.delete(Ae))}function en(V,$,{flushSync:ee}={}){var Ye,He;let ge=A.actionData!=null&&A.navigation.formMethod!=null&&er(A.navigation.formMethod)&&A.navigation.state==="loading"&&((Ye=V.state)==null?void 0:Ye._isRedirect)!==!0,Ae;$.actionData?Object.keys($.actionData).length>0?Ae=$.actionData:Ae=null:ge?Ae=A.actionData:Ae=null;let Pe=$.loaderData?zb(A.loaderData,$.loaderData,$.matches||[],$.errors):A.loaderData,je=A.blockers;je.size>0&&(je=new Map(je),je.forEach((Je,ut)=>je.set(ut,Ku)));let we=Te?!1:Co(V,$.matches||A.matches),Ie=x===!0||A.navigation.formMethod!=null&&er(A.navigation.formMethod)&&((He=V.state)==null?void 0:He._isRedirect)!==!0;m&&(d=m,m=void 0),Te||R==="POP"||(R==="PUSH"?n.history.push(V,V.state):R==="REPLACE"&&n.history.replace(V,V.state));let Ve;if(R==="POP"){let Je=I.get(A.location.pathname);Je&&Je.has(V.pathname)?Ve={currentLocation:A.location,nextLocation:V}:I.has(V.pathname)&&(Ve={currentLocation:V,nextLocation:A.location})}else if(k){let Je=I.get(A.location.pathname);Je?Je.add(V.pathname):(Je=new Set([V.pathname]),I.set(A.location.pathname,Je)),Ve={currentLocation:A.location,nextLocation:V}}dt({...$,actionData:Ae,loaderData:Pe,historyAction:R,location:V,initialized:!0,navigation:Tg,revalidation:"idle",restoreScrollPosition:we,preventScrollReset:Ie,blockers:je},{viewTransitionOpts:Ve,flushSync:ee===!0}),R="POP",x=!1,k=!1,Te=!1,F=!1,N==null||N.resolve(),N=null,Be==null||Be.resolve(),Be=null}async function hn(V,$){if(N==null||N.resolve(),N=null,typeof V=="number"){N||(N=qb());let ut=N.promise;return n.history.go(V),ut}let ee=qg(A.location,A.matches,g,V,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:ge,submission:Ae,error:Pe}=xb(!1,ee,$),je=A.location,we=mc(A.location,ge,$&&$.state);we={...we,...n.history.encodeLocation(we)};let Ie=$&&$.replace!=null?$.replace:void 0,Ve="PUSH";Ie===!0?Ve="REPLACE":Ie===!1||Ae!=null&&er(Ae.formMethod)&&Ae.formAction===A.location.pathname+A.location.search&&(Ve="REPLACE");let Ye=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,He=($&&$.flushSync)===!0,Je=zn({currentLocation:je,nextLocation:we,historyAction:Ve});if(Je){an(Je,{state:"blocked",location:we,proceed(){an(Je,{state:"proceeding",proceed:void 0,reset:void 0,location:we}),hn(V,$)},reset(){let ut=new Map(A.blockers);ut.set(Je,Ku),dt({blockers:ut})}});return}await rn(Ve,we,{submission:Ae,pendingError:Pe,preventScrollReset:Ye,replace:$&&$.replace,enableViewTransition:$&&$.viewTransition,flushSync:He,callSiteDefaultShouldRevalidate:$&&$.unstable_defaultShouldRevalidate})}function Br(){Be||(Be=qb()),q(),dt({revalidation:"loading"});let V=Be.promise;return A.navigation.state==="submitting"?V:A.navigation.state==="idle"?(rn(A.historyAction,A.location,{startUninterruptedRevalidation:!0}),V):(rn(R||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:k===!0}),V)}async function rn(V,$,ee){O&&O.abort(),O=null,R=V,Te=(ee&&ee.startUninterruptedRevalidation)===!0,Tr(A.location,A.matches),x=(ee&&ee.preventScrollReset)===!0,k=(ee&&ee.enableViewTransition)===!0;let ge=m||d,Ae=ee&&ee.overrideNavigation,Pe=ee!=null&&ee.initialHydration&&A.matches&&A.matches.length>0&&!Q?A.matches:cs(ge,$,g),je=(ee&&ee.flushSync)===!0;if(Pe&&A.initialized&&!F&&KD(A.location,$)&&!(ee&&ee.submission&&er(ee.submission.formMethod))){en($,{matches:Pe},{flushSync:je});return}let we=Qi(Pe,ge,$.pathname);if(we.active&&we.matches&&(Pe=we.matches),!Pe){let{error:Xt,notFoundMatches:$t,route:at}=Ot($.pathname);en($,{matches:$t,loaderData:{},errors:{[at.id]:Xt}},{flushSync:je});return}O=new AbortController;let Ie=ml(n.history,$,O.signal,ee&&ee.submission),Ve=n.getContext?await n.getContext():new wb,Ye;if(ee&&ee.pendingError)Ye=[hs(Pe).route.id,{type:"error",error:ee.pendingError}];else if(ee&&ee.submission&&er(ee.submission.formMethod)){let Xt=await Mn(Ie,$,ee.submission,Pe,Ve,we.active,ee&&ee.initialHydration===!0,{replace:ee.replace,flushSync:je});if(Xt.shortCircuited)return;if(Xt.pendingActionResult){let[$t,at]=Xt.pendingActionResult;if(xr(at)&&gc(at.error)&&at.error.status===404){O=null,en($,{matches:Xt.matches,loaderData:{},errors:{[$t]:at.error}});return}}Pe=Xt.matches||Pe,Ye=Xt.pendingActionResult,Ae=bg($,ee.submission),je=!1,we.active=!1,Ie=ml(n.history,Ie.url,Ie.signal)}let{shortCircuited:He,matches:Je,loaderData:ut,errors:Lt}=await lr(Ie,$,Pe,Ve,we.active,Ae,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,je,Ye,ee&&ee.callSiteDefaultShouldRevalidate);He||(O=null,en($,{matches:Je||Pe,...Bb(Ye),loaderData:ut,errors:Lt}))}async function Mn(V,$,ee,ge,Ae,Pe,je,we={}){q();let Ie=tN($,ee);if(dt({navigation:Ie},{flushSync:we.flushSync===!0}),Pe){let He=await ir(ge,$.pathname,V.signal);if(He.type==="aborted")return{shortCircuited:!0};if(He.type==="error"){if(He.partialMatches.length===0){let{matches:ut,route:Lt}=yf(d);return{matches:ut,pendingActionResult:[Lt.id,{type:"error",error:He.error}]}}let Je=hs(He.partialMatches).route.id;return{matches:He.partialMatches,pendingActionResult:[Je,{type:"error",error:He.error}]}}else if(He.matches)ge=He.matches;else{let{notFoundMatches:Je,error:ut,route:Lt}=Ot($.pathname);return{matches:Je,pendingActionResult:[Lt.id,{type:"error",error:ut}]}}}let Ve,Ye=xf(ge,$);if(!Ye.route.action&&!Ye.route.lazy)Ve={type:"error",error:ti(405,{method:V.method,pathname:$.pathname,routeId:Ye.route.id})};else{let He=Al(l,c,V,ge,Ye,je?[]:a,Ae),Je=await Un(V,He,Ae,null);if(Ve=Je[Ye.route.id],!Ve){for(let ut of ge)if(Je[ut.route.id]){Ve=Je[ut.route.id];break}}if(V.signal.aborted)return{shortCircuited:!0}}if(so(Ve)){let He;return we&&we.replace!=null?He=we.replace:He=jb(Ve.response.headers.get("Location"),new URL(V.url),g,n.history)===A.location.pathname+A.location.search,await xt(V,Ve,!0,{submission:ee,replace:He}),{shortCircuited:!0}}if(xr(Ve)){let He=hs(ge,Ye.route.id);return(we&&we.replace)!==!0&&(R="PUSH"),{matches:ge,pendingActionResult:[He.route.id,Ve,Ye.route.id]}}return{matches:ge,pendingActionResult:[Ye.route.id,Ve]}}async function lr(V,$,ee,ge,Ae,Pe,je,we,Ie,Ve,Ye,He,Je){let ut=Pe||bg($,je),Lt=je||we||Fb(ut),Xt=!Te&&!Ve;if(Ae){if(Xt){let sn=qt(He);dt({navigation:ut,...sn!==void 0?{actionData:sn}:{}},{flushSync:Ye})}let ft=await ir(ee,$.pathname,V.signal);if(ft.type==="aborted")return{shortCircuited:!0};if(ft.type==="error"){if(ft.partialMatches.length===0){let{matches:Tn,route:Ut}=yf(d);return{matches:Tn,loaderData:{},errors:{[Ut.id]:ft.error}}}let sn=hs(ft.partialMatches).route.id;return{matches:ft.partialMatches,loaderData:{},errors:{[sn]:ft.error}}}else if(ft.matches)ee=ft.matches;else{let{error:sn,notFoundMatches:Tn,route:Ut}=Ot($.pathname);return{matches:Tn,loaderData:{},errors:{[Ut.id]:sn}}}}let $t=m||d,{dsMatches:at,revalidatingFetchers:Kt}=Ob(V,ge,l,c,n.history,A,ee,Lt,$,Ve?[]:a,Ve===!0,F,me,_e,Ee,se,$t,g,n.patchRoutesOnNavigation!=null,He,Je);if(Ue=++Me,!n.dataStrategy&&!at.some(ft=>ft.shouldLoad)&&!at.some(ft=>ft.route.middleware&&ft.route.middleware.length>0)&&Kt.length===0){let ft=Se();return en($,{matches:ee,loaderData:{},errors:He&&xr(He[1])?{[He[0]]:He[1].error}:null,...Bb(He),...ft?{fetchers:new Map(A.fetchers)}:{}},{flushSync:Ye}),{shortCircuited:!0}}if(Xt){let ft={};if(!Ae){ft.navigation=ut;let sn=qt(He);sn!==void 0&&(ft.actionData=sn)}Kt.length>0&&(ft.fetchers=ht(Kt)),dt(ft,{flushSync:Ye})}Kt.forEach(ft=>{Oe(ft.key),ft.controller&&ye.set(ft.key,ft.controller)});let Vn=()=>Kt.forEach(ft=>Oe(ft.key));O&&O.signal.addEventListener("abort",Vn);let{loaderResults:Yt,fetcherResults:ur}=await ci(at,Kt,V,ge);if(V.signal.aborted)return{shortCircuited:!0};O&&O.signal.removeEventListener("abort",Vn),Kt.forEach(ft=>ye.delete(ft.key));let Xn=_f(Yt);if(Xn)return await xt(V,Xn.result,!0,{replace:Ie}),{shortCircuited:!0};if(Xn=_f(ur),Xn)return se.add(Xn.key),await xt(V,Xn.result,!0,{replace:Ie}),{shortCircuited:!0};let{loaderData:cr,errors:Wn}=Ub(A,ee,Yt,He,Kt,ur);Ve&&A.errors&&(Wn={...A.errors,...Wn});let br=Se(),Ri=it(Ue),Ii=br||Ri||Kt.length>0;return{matches:ee,loaderData:cr,errors:Wn,...Ii?{fetchers:new Map(A.fetchers)}:{}}}function qt(V){if(V&&!xr(V[1]))return{[V[0]]:V[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function ht(V){return V.forEach($=>{let ee=A.fetchers.get($.key),ge=Yu(void 0,ee?ee.data:void 0);A.fetchers.set($.key,ge)}),new Map(A.fetchers)}async function En(V,$,ee,ge){Oe(V);let Ae=(ge&&ge.flushSync)===!0,Pe=m||d,je=qg(A.location,A.matches,g,ee,$,ge==null?void 0:ge.relative),we=cs(Pe,je,g),Ie=Qi(we,Pe,je);if(Ie.active&&Ie.matches&&(we=Ie.matches),!we){Ce(V,$,ti(404,{pathname:je}),{flushSync:Ae});return}let{path:Ve,submission:Ye,error:He}=xb(!0,je,ge);if(He){Ce(V,$,He,{flushSync:Ae});return}let Je=n.getContext?await n.getContext():new wb,ut=(ge&&ge.preventScrollReset)===!0;if(Ye&&er(Ye.formMethod)){await Hr(V,$,Ve,we,Je,Ie.active,Ae,ut,Ye,ge&&ge.unstable_defaultShouldRevalidate);return}Ee.set(V,{routeId:$,path:Ve}),await Pn(V,$,Ve,we,Je,Ie.active,Ae,ut,Ye)}async function Hr(V,$,ee,ge,Ae,Pe,je,we,Ie,Ve){q(),Ee.delete(V);let Ye=A.fetchers.get(V);ce(V,nN(Ie,Ye),{flushSync:je});let He=new AbortController,Je=ml(n.history,ee,He.signal,Ie);if(Pe){let st=await ir(ge,new URL(Je.url).pathname,Je.signal,V);if(st.type==="aborted")return;if(st.type==="error"){Ce(V,$,st.error,{flushSync:je});return}else if(st.matches)ge=st.matches;else{Ce(V,$,ti(404,{pathname:ee}),{flushSync:je});return}}let ut=xf(ge,ee);if(!ut.route.action&&!ut.route.lazy){let st=ti(405,{method:Ie.formMethod,pathname:ee,routeId:$});Ce(V,$,st,{flushSync:je});return}ye.set(V,He);let Lt=Me,Xt=Al(l,c,Je,ge,ut,a,Ae),$t=await Un(Je,Xt,Ae,V),at=$t[ut.route.id];if(!at){for(let st of Xt)if($t[st.route.id]){at=$t[st.route.id];break}}if(Je.signal.aborted){ye.get(V)===He&&ye.delete(V);return}if(_e.has(V)){if(so(at)||xr(at)){ce(V,pa(void 0));return}}else{if(so(at))if(ye.delete(V),Ue>Lt){ce(V,pa(void 0));return}else return se.add(V),ce(V,Yu(Ie)),xt(Je,at,!1,{fetcherSubmission:Ie,preventScrollReset:we});if(xr(at)){Ce(V,$,at.error);return}}let Kt=A.navigation.location||A.location,Vn=ml(n.history,Kt,He.signal),Yt=m||d,ur=A.navigation.state!=="idle"?cs(Yt,A.navigation.location,g):A.matches;ct(ur,"Didn't find any matches after fetcher action");let Xn=++Me;L.set(V,Xn);let cr=Yu(Ie,at.data);A.fetchers.set(V,cr);let{dsMatches:Wn,revalidatingFetchers:br}=Ob(Vn,Ae,l,c,n.history,A,ur,Ie,Kt,a,!1,F,me,_e,Ee,se,Yt,g,n.patchRoutesOnNavigation!=null,[ut.route.id,at],Ve);br.filter(st=>st.key!==V).forEach(st=>{let Sr=st.key,xa=A.fetchers.get(Sr),It=Yu(void 0,xa?xa.data:void 0);A.fetchers.set(Sr,It),Oe(Sr),st.controller&&ye.set(Sr,st.controller)}),dt({fetchers:new Map(A.fetchers)});let Ri=()=>br.forEach(st=>Oe(st.key));He.signal.addEventListener("abort",Ri);let{loaderResults:Ii,fetcherResults:ft}=await ci(Wn,br,Vn,Ae);if(He.signal.aborted)return;if(He.signal.removeEventListener("abort",Ri),L.delete(V),ye.delete(V),br.forEach(st=>ye.delete(st.key)),A.fetchers.has(V)){let st=pa(at.data);A.fetchers.set(V,st)}let sn=_f(Ii);if(sn)return xt(Vn,sn.result,!1,{preventScrollReset:we});if(sn=_f(ft),sn)return se.add(sn.key),xt(Vn,sn.result,!1,{preventScrollReset:we});let{loaderData:Tn,errors:Ut}=Ub(A,ur,Ii,void 0,br,ft);it(Xn),A.navigation.state==="loading"&&Xn>Ue?(ct(R,"Expected pending action"),O&&O.abort(),en(A.navigation.location,{matches:ur,loaderData:Tn,errors:Ut,fetchers:new Map(A.fetchers)})):(dt({errors:Ut,loaderData:zb(A.loaderData,Tn,ur,Ut),fetchers:new Map(A.fetchers)}),F=!1)}async function Pn(V,$,ee,ge,Ae,Pe,je,we,Ie){let Ve=A.fetchers.get(V);ce(V,Yu(Ie,Ve?Ve.data:void 0),{flushSync:je});let Ye=new AbortController,He=ml(n.history,ee,Ye.signal);if(Pe){let at=await ir(ge,new URL(He.url).pathname,He.signal,V);if(at.type==="aborted")return;if(at.type==="error"){Ce(V,$,at.error,{flushSync:je});return}else if(at.matches)ge=at.matches;else{Ce(V,$,ti(404,{pathname:ee}),{flushSync:je});return}}let Je=xf(ge,ee);ye.set(V,Ye);let ut=Me,Lt=Al(l,c,He,ge,Je,a,Ae),$t=(await Un(He,Lt,Ae,V))[Je.route.id];if(ye.get(V)===Ye&&ye.delete(V),!He.signal.aborted){if(_e.has(V)){ce(V,pa(void 0));return}if(so($t))if(Ue>ut){ce(V,pa(void 0));return}else{se.add(V),await xt(He,$t,!1,{preventScrollReset:we});return}if(xr($t)){Ce(V,$,$t.error);return}ce(V,pa($t.data))}}async function xt(V,$,ee,{submission:ge,fetcherSubmission:Ae,preventScrollReset:Pe,replace:je}={}){ee||(N==null||N.resolve(),N=null),$.response.headers.has("X-Remix-Revalidate")&&(F=!0);let we=$.response.headers.get("Location");ct(we,"Expected a Location header on the redirect Response"),we=jb(we,new URL(V.url),g,n.history);let Ie=mc(A.location,we,{_isRedirect:!0});if(t){let Lt=!1;if($.response.headers.has("X-Remix-Reload-Document"))Lt=!0;else if(Dy(we)){const Xt=eA(we,!0);Lt=Xt.origin!==e.location.origin||ai(Xt.pathname,g)==null}if(Lt){je?e.location.replace(we):e.location.assign(we);return}}O=null;let Ve=je===!0||$.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ye,formAction:He,formEncType:Je}=A.navigation;!ge&&!Ae&&Ye&&He&&Je&&(ge=Fb(A.navigation));let ut=ge||Ae;if(xD.has($.response.status)&&ut&&er(ut.formMethod))await rn(Ve,Ie,{submission:{...ut,formAction:we},preventScrollReset:Pe||x,enableViewTransition:ee?k:void 0});else{let Lt=bg(Ie,ge);await rn(Ve,Ie,{overrideNavigation:Lt,fetcherSubmission:Ae,preventScrollReset:Pe||x,enableViewTransition:ee?k:void 0})}}async function Un(V,$,ee,ge){var je;let Ae,Pe={};try{Ae=await BD(y,V,$,ge,ee,!1)}catch(we){return $.filter(Ie=>Ie.shouldLoad).forEach(Ie=>{Pe[Ie.route.id]={type:"error",error:we}}),Pe}if(V.signal.aborted)return Pe;if(!er(V.method))for(let we of $){if(((je=Ae[we.route.id])==null?void 0:je.type)==="error")break;!Ae.hasOwnProperty(we.route.id)&&!A.loaderData.hasOwnProperty(we.route.id)&&(!A.errors||!A.errors.hasOwnProperty(we.route.id))&&we.shouldCallHandler()&&(Ae[we.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${we.route.id}`)})}for(let[we,Ie]of Object.entries(Ae))if(WD(Ie)){let Ve=Ie.result;Pe[we]={type:"redirect",response:GD(Ve,V,we,$,g)}}else Pe[we]=await qD(Ie);return Pe}async function ci(V,$,ee,ge){let Ae=Un(ee,V,ge,null),Pe=Promise.all($.map(async Ie=>{if(Ie.matches&&Ie.match&&Ie.request&&Ie.controller){let Ye=(await Un(Ie.request,Ie.matches,ge,Ie.key))[Ie.match.route.id];return{[Ie.key]:Ye}}else return Promise.resolve({[Ie.key]:{type:"error",error:ti(404,{pathname:Ie.path})}})})),je=await Ae,we=(await Pe).reduce((Ie,Ve)=>Object.assign(Ie,Ve),{});return{loaderResults:je,fetcherResults:we}}function q(){F=!0,Ee.forEach((V,$)=>{ye.has($)&&me.add($),Oe($)})}function ce(V,$,ee={}){A.fetchers.set(V,$),dt({fetchers:new Map(A.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function Ce(V,$,ee,ge={}){let Ae=hs(A.matches,$);Fe(V),dt({errors:{[Ae.route.id]:ee},fetchers:new Map(A.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function ve(V){return oe.set(V,(oe.get(V)||0)+1),_e.has(V)&&_e.delete(V),A.fetchers.get(V)||OD}function xe(V,$){Oe(V,$==null?void 0:$.reason),ce(V,pa(null))}function Fe(V){let $=A.fetchers.get(V);ye.has(V)&&!($&&$.state==="loading"&&L.has(V))&&Oe(V),Ee.delete(V),L.delete(V),se.delete(V),_e.delete(V),me.delete(V),A.fetchers.delete(V)}function yt(V){let $=(oe.get(V)||0)-1;$<=0?(oe.delete(V),_e.add(V)):oe.set(V,$),dt({fetchers:new Map(A.fetchers)})}function Oe(V,$){let ee=ye.get(V);ee&&(ee.abort($),ye.delete(V))}function Xe(V){for(let $ of V){let ee=ve($),ge=pa(ee.data);A.fetchers.set($,ge)}}function Se(){let V=[],$=!1;for(let ee of se){let ge=A.fetchers.get(ee);ct(ge,`Expected fetcher: ${ee}`),ge.state==="loading"&&(se.delete(ee),V.push(ee),$=!0)}return Xe(V),$}function it(V){let $=[];for(let[ee,ge]of L)if(ge<V){let Ae=A.fetchers.get(ee);ct(Ae,`Expected fetcher: ${ee}`),Ae.state==="loading"&&(Oe(ee),L.delete(ee),$.push(ee))}return Xe($),$.length>0}function pn(V,$){let ee=A.blockers.get(V)||Ku;return be.get(V)!==$&&be.set(V,$),ee}function kn(V){A.blockers.delete(V),be.delete(V)}function an(V,$){let ee=A.blockers.get(V)||Ku;ct(ee.state==="unblocked"&&$.state==="blocked"||ee.state==="blocked"&&$.state==="blocked"||ee.state==="blocked"&&$.state==="proceeding"||ee.state==="blocked"&&$.state==="unblocked"||ee.state==="proceeding"&&$.state==="unblocked",`Invalid blocker state transition: ${ee.state} -> ${$.state}`);let ge=new Map(A.blockers);ge.set(V,$),dt({blockers:ge})}function zn({currentLocation:V,nextLocation:$,historyAction:ee}){if(be.size===0)return;be.size>1&&un(!1,"A router only supports one blocker at a time");let ge=Array.from(be.entries()),[Ae,Pe]=ge[ge.length-1],je=A.blockers.get(Ae);if(!(je&&je.state==="proceeding")&&Pe({currentLocation:V,nextLocation:$,historyAction:ee}))return Ae}function Ot(V){let $=ti(404,{pathname:V}),ee=m||d,{matches:ge,route:Ae}=yf(ee);return{notFoundMatches:ge,route:Ae,error:$}}function Fr(V,$,ee){if(M=V,U=$,B=ee||null,!Y&&A.navigation===Tg){Y=!0;let ge=Co(A.location,A.matches);ge!=null&&dt({restoreScrollPosition:ge})}return()=>{M=null,U=null,B=null}}function Er(V,$){return B&&B(V,$.map(ge=>iD(ge,A.loaderData)))||V.key}function Tr(V,$){if(M&&U){let ee=Er(V,$);M[ee]=U()}}function Co(V,$){if(M){let ee=Er(V,$),ge=M[ee];if(typeof ge=="number")return ge}return null}function Qi(V,$,ee){if(n.patchRoutesOnNavigation)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:Ju($,ee,g,!0)}}else return{active:!0,matches:Ju($,ee,g,!0)||[]};return{active:!1,matches:null}}async function ir(V,$,ee,ge){if(!n.patchRoutesOnNavigation)return{type:"success",matches:V};let Ae=V;for(;;){let Pe=m==null,je=m||d,we=c;try{await n.patchRoutesOnNavigation({signal:ee,path:$,matches:Ae,fetcherKey:ge,patch:(Ye,He)=>{ee.aborted||Mb(Ye,He,je,we,l,!1)}})}catch(Ye){return{type:"error",error:Ye,partialMatches:Ae}}finally{Pe&&!ee.aborted&&(d=[...d])}if(ee.aborted)return{type:"aborted"};let Ie=cs(je,$,g),Ve=null;if(Ie){if(Object.keys(Ie[0].params).length===0)return{type:"success",matches:Ie};if(Ve=Ju(je,$,g,!0),!(Ve&&Ae.length<Ve.length&&Ci(Ae,Ve.slice(0,Ae.length))))return{type:"success",matches:Ie}}if(Ve||(Ve=Ju(je,$,g,!0)),!Ve||Ci(Ae,Ve))return{type:"success",matches:null};Ae=Ve}}function Ci(V,$){return V.length===$.length&&V.every((ee,ge)=>ee.route.id===$[ge].route.id)}function Zl(V){c={},m=pc(V,l,void 0,c)}function Xi(V,$,ee=!1){let ge=m==null;Mb(V,$,m||d,c,l,ee),ge&&(d=[...d],dt({}))}return G={get basename(){return g},get future(){return E},get state(){return A},get routes(){return d},get window(){return e},initialize:$e,subscribe:jt,enableScrollRestoration:Fr,navigate:hn,fetch:En,revalidate:Br,createHref:V=>n.history.createHref(V),encodeLocation:V=>n.history.encodeLocation(V),getFetcher:ve,resetFetcher:xe,deleteFetcher:yt,dispose:gt,getBlocker:pn,deleteBlocker:kn,patchRoutes:Xi,_internalFetchControllers:ye,_internalSetRoutes:Zl,_internalSetStateDoNotUseOrYouWillBreakYourApp(V){dt(V)}},n.unstable_instrumentations&&(G=SD(G,n.unstable_instrumentations.map(V=>V.router).filter(Boolean))),G}function kD(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function qg(n,e,t,a,s,l){let c,d;if(s){c=[];for(let g of e)if(c.push(g),g.route.id===s){d=g;break}}else c=e,d=e[e.length-1];let m=Pd(a||".",Md(c),ai(n.pathname,t)||n.pathname,l==="path");if(a==null&&(m.search=n.search,m.hash=n.hash),(a==null||a===""||a===".")&&d){let g=Oy(m.search);if(d.route.index&&!g)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let y=new URLSearchParams(m.search),E=y.getAll("index");y.delete("index"),E.filter(w=>w).forEach(w=>y.append("index",w));let S=y.toString();m.search=S?`?${S}`:""}}return t!=="/"&&(m.pathname=yD({basename:t,pathname:m.pathname})),$i(m)}function xb(n,e,t){if(!t||!kD(t))return{path:e};if(t.formMethod&&!eN(t.formMethod))return{path:e,error:ti(405,{method:t.formMethod})};let a=()=>({path:e,error:ti(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=yA(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!er(l))return a();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((S,[w,M])=>`${S}${w}=${M}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!er(l))return a();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return a()}}}ct(typeof FormData=="function","FormData is not available in this environment");let d,m;if(t.formData)d=Kg(t.formData),m=t.formData;else if(t.body instanceof FormData)d=Kg(t.body),m=t.body;else if(t.body instanceof URLSearchParams)d=t.body,m=Lb(d);else if(t.body==null)d=new URLSearchParams,m=new FormData;else try{d=new URLSearchParams(t.body),m=Lb(d)}catch{return a()}let g={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(er(g.formMethod))return{path:e,submission:g};let y=Da(e);return n&&y.search&&Oy(y.search)&&d.append("index",""),y.search=`?${d}`,{path:$i(y),submission:g}}function Ob(n,e,t,a,s,l,c,d,m,g,y,E,S,w,M,B,U,Y,z,Q,ne){var Te;let ue=Q?xr(Q[1])?Q[1].error:Q[1].data:void 0,G=s.createURL(l.location),A=s.createURL(m),R;if(y&&l.errors){let F=Object.keys(l.errors)[0];R=c.findIndex(me=>me.route.id===F)}else if(Q&&xr(Q[1])){let F=Q[0];R=c.findIndex(me=>me.route.id===F)-1}let N=Q?Q[1].statusCode:void 0,x=N&&N>=400,O={currentUrl:G,currentParams:((Te=l.matches[0])==null?void 0:Te.params)||{},nextUrl:A,nextParams:c[0].params,...d,actionResult:ue,actionStatus:N},k=xc(c),I=c.map((F,me)=>{let{route:ye}=F,Me=null;if(R!=null&&me>R?Me=!1:ye.lazy?Me=!0:Ny(ye)?y?Me=Gg(ye,l.loaderData,l.errors):VD(l.loaderData,l.matches[me],F)&&(Me=!0):Me=!1,Me!==null)return $g(t,a,n,k,F,g,e,Me);let Ue=!1;typeof ne=="boolean"?Ue=ne:x?Ue=!1:(E||G.pathname+G.search===A.pathname+A.search||G.search!==A.search||jD(l.matches[me],F))&&(Ue=!0);let L={...O,defaultShouldRevalidate:Ue},se=ic(F,L);return $g(t,a,n,k,F,g,e,se,L,ne)}),ie=[];return M.forEach((F,me)=>{if(y||!c.some(_e=>_e.route.id===F.routeId)||w.has(me))return;let ye=l.fetchers.get(me),Me=ye&&ye.state!=="idle"&&ye.data===void 0,Ue=cs(U,F.path,Y);if(!Ue){if(z&&Me)return;ie.push({key:me,routeId:F.routeId,path:F.path,matches:null,match:null,request:null,controller:null});return}if(B.has(me))return;let L=xf(Ue,F.path),se=new AbortController,Ee=ml(s,F.path,se.signal),oe=null;if(S.has(me))S.delete(me),oe=Al(t,a,Ee,Ue,L,g,e);else if(Me)E&&(oe=Al(t,a,Ee,Ue,L,g,e));else{let _e;typeof ne=="boolean"?_e=ne:x?_e=!1:_e=E;let be={...O,defaultShouldRevalidate:_e};ic(L,be)&&(oe=Al(t,a,Ee,Ue,L,g,e,be))}oe&&ie.push({key:me,routeId:F.routeId,path:F.path,matches:oe,match:L,request:Ee,controller:se})}),{dsMatches:I,revalidatingFetchers:ie}}function Ny(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function Gg(n,e,t){if(n.lazy)return!0;if(!Ny(n))return!1;let a=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!a&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!a&&!s}function VD(n,e,t){let a=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return a||s}function jD(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function ic(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Mb(n,e,t,a,s,l){let c;if(n){let g=a[n];ct(g,`No route found to patch children into: routeId = ${n}`),g.children||(g.children=[]),c=g.children}else c=t;let d=[],m=[];if(e.forEach(g=>{let y=c.find(E=>fA(g,E));y?m.push({existingRoute:y,newRoute:g}):d.push(g)}),d.length>0){let g=pc(d,s,[n||"_","patch",String((c==null?void 0:c.length)||"0")],a);c.push(...g)}if(l&&m.length>0)for(let g=0;g<m.length;g++){let{existingRoute:y,newRoute:E}=m[g],S=y,[w]=pc([E],s,[],{},!0);Object.assign(S,{element:w.element?w.element:S.element,errorElement:w.errorElement?w.errorElement:S.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:S.hydrateFallbackElement})}}function fA(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,a)=>{var s;return(s=e.children)==null?void 0:s.some(l=>fA(t,l))}):!1}var Pb=new WeakMap,dA=({key:n,route:e,manifest:t,mapRouteProperties:a})=>{let s=t[e.id];if(ct(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=Pb.get(s);c||(c={},Pb.set(s,c));let d=c[n];if(d)return d;let m=(async()=>{let g=eD(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(g)un(!g,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(E)un(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let S=await l();S!=null&&(Object.assign(s,{[n]:S}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(S=>S===void 0)&&(s.lazy=void 0))})();return c[n]=m,m},kb=new WeakMap;function LD(n,e,t,a,s){let l=t[n.id];if(ct(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let y=kb.get(l);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let E=(async()=>{ct(typeof n.lazy=="function","No lazy route function found");let S=await n.lazy(),w={};for(let M in S){let B=S[M];if(B===void 0)continue;let U=nD(M),z=l[M]!==void 0&&M!=="hasErrorBoundary";U?un(!U,"Route property "+M+" is not a supported property to be returned from a lazy route function. This property will be ignored."):z?un(!z,`Route "${l.id}" has a static property "${M}" defined but its lazy function is also returning a value for this property. The lazy route property "${M}" will be ignored.`):w[M]=B}Object.assign(l,w),Object.assign(l,{...a(l),lazy:void 0})})();return kb.set(l,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(n.lazy),d=[],m;for(let y of c){if(s&&s.includes(y))continue;let E=dA({key:y,route:n,manifest:t,mapRouteProperties:a});E&&(d.push(E),y===e&&(m=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),m==null||m.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:m}}async function Vb(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function UD(n){return n.matches.some(e=>e.route.middleware)?mA(n,()=>Vb(n)):Vb(n)}function mA(n,e){return zD(n,e,a=>{if(ZD(a))throw a;return a},QD,t);function t(a,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:a}}));{let{matches:c}=n,d=Math.min(Math.max(c.findIndex(g=>g.route.id===s),0),Math.max(c.findIndex(g=>g.shouldCallHandler()),0)),m=hs(c,c[d].route.id).route.id;return Promise.resolve({[m]:{type:"error",result:a}})}}}async function zD(n,e,t,a,s){let{matches:l,request:c,params:d,context:m,unstable_pattern:g}=n,y=l.flatMap(S=>S.route.middleware?S.route.middleware.map(w=>[S.route.id,w]):[]);return await pA({request:c,params:d,context:m,unstable_pattern:g},y,e,t,a,s)}async function pA(n,e,t,a,s,l,c=0){let{request:d}=n;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let m=e[c];if(!m)return await t();let[g,y]=m,E,S=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await pA(n,e,t,a,s,l,c+1)},E.value}catch(w){return E={value:await l(w,g,E)},E.value}};try{let w=await y(n,S),M=w!=null?a(w):void 0;return s(M)?M:E?M??E.value:(E={value:await S()},E.value)}catch(w){return await l(w,g,E)}}function gA(n,e,t,a,s){let l=dA({key:"middleware",route:a.route,manifest:e,mapRouteProperties:n}),c=LD(a.route,er(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function $g(n,e,t,a,s,l,c,d,m=null,g){let y=!1,E=gA(n,e,t,s,l);return{...s,_lazyPromises:E,shouldLoad:d,shouldRevalidateArgs:m,shouldCallHandler(S){return y=!0,m?typeof g=="boolean"?ic(s,{...m,defaultShouldRevalidate:g}):typeof S=="boolean"?ic(s,{...m,defaultShouldRevalidate:S}):ic(s,m):d},resolve(S){let{lazy:w,loader:M,middleware:B}=s.route,U=y||d||S&&!er(t.method)&&(w||M),Y=B&&B.length>0&&!M&&!w;return U&&(er(t.method)||!Y)?HD({request:t,unstable_pattern:a,match:s,lazyHandlerPromise:E==null?void 0:E.handler,lazyRoutePromise:E==null?void 0:E.route,handlerOverride:S,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Al(n,e,t,a,s,l,c,d=null){return a.map(m=>m.route.id!==s.route.id?{...m,shouldLoad:!1,shouldRevalidateArgs:d,shouldCallHandler:()=>!1,_lazyPromises:gA(n,e,t,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:$g(n,e,t,xc(a),m,l,c,!0,d))}async function BD(n,e,t,a,s,l){t.some(g=>{var y;return(y=g._lazyPromises)==null?void 0:y.middleware})&&await Promise.all(t.map(g=>{var y;return(y=g._lazyPromises)==null?void 0:y.middleware}));let c={request:e,unstable_pattern:xc(t),params:t[0].params,context:s,matches:t},m=await n({...c,fetcherKey:a,runClientMiddleware:g=>{let y=c;return mA(y,()=>g({...y,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(g=>{var y,E;return[(y=g._lazyPromises)==null?void 0:y.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return m}async function HD({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let d,m,g=er(n.method),y=g?"action":"loader",E=S=>{let w,M=new Promise((Y,z)=>w=z);m=()=>w(),n.signal.addEventListener("abort",m);let B=Y=>typeof S!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${y}" [routeId: ${t.route.id}]`)):S({request:n,unstable_pattern:e,params:t.params,context:c},...Y!==void 0?[Y]:[]),U=(async()=>{try{return{type:"data",result:await(l?l(z=>B(z)):B())}}catch(Y){return{type:"error",result:Y}}})();return Promise.race([U,M])};try{let S=g?t.route.action:t.route.loader;if(a||s)if(S){let w,[M]=await Promise.all([E(S).catch(B=>{w=B}),a,s]);if(w!==void 0)throw w;d=M}else{await a;let w=g?t.route.action:t.route.loader;if(w)[d]=await Promise.all([E(w),s]);else if(y==="action"){let M=new URL(n.url),B=M.pathname+M.search;throw ti(405,{method:n.method,pathname:B,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(S)d=await E(S);else{let w=new URL(n.url),M=w.pathname+w.search;throw ti(404,{pathname:M})}}catch(S){return{type:"error",result:S}}finally{m&&n.signal.removeEventListener("abort",m)}return d}async function FD(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function qD(n){var a,s,l,c,d;let{result:e,type:t}=n;if(xy(e)){let m;try{m=await FD(e)}catch(g){return{type:"error",error:g}}return t==="error"?{type:"error",error:new Nc(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:"data",data:m,statusCode:e.status,headers:e.headers}}return t==="error"?Hb(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:YD(e),statusCode:gc(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:gc(e)?e.status:void 0}:Hb(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function GD(n,e,t,a,s){let l=n.headers.get("Location");if(ct(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!Dy(l)){let c=a.slice(0,a.findIndex(d=>d.route.id===t)+1);l=qg(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function jb(n,e,t,a){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(Dy(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let d=ai(c.pathname,t)!=null;if(c.origin===e.origin&&d)return c.pathname+c.search+c.hash}try{let l=a.createURL(n);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function ml(n,e,t,a){let s=n.createURL(yA(e)).toString(),l={signal:t};if(a&&er(a.formMethod)){let{formMethod:c,formEncType:d}=a;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(a.json)):d==="text/plain"?l.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?l.body=Kg(a.formData):l.body=a.formData}return new Request(s,l)}function Kg(n){let e=new URLSearchParams;for(let[t,a]of n.entries())e.append(t,typeof a=="string"?a:a.name);return e}function Lb(n){let e=new FormData;for(let[t,a]of n.entries())e.append(t,a);return e}function $D(n,e,t,a=!1,s=!1){let l={},c=null,d,m=!1,g={},y=t&&xr(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let S=E.route.id,w=e[S];if(ct(!so(w),"Cannot handle redirect results in processLoaderData"),xr(w)){let M=w.error;if(y!==void 0&&(M=y,y=void 0),c=c||{},s)c[S]=M;else{let B=hs(n,S);c[B.route.id]==null&&(c[B.route.id]=M)}a||(l[S]=hA),m||(m=!0,d=gc(w.error)?w.error.status:500),w.headers&&(g[S]=w.headers)}else l[S]=w.data,w.statusCode&&w.statusCode!==200&&!m&&(d=w.statusCode),w.headers&&(g[S]=w.headers)}),y!==void 0&&t&&(c={[t[0]]:y},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:g}}function Ub(n,e,t,a,s,l){let{loaderData:c,errors:d}=$D(e,t,a);return s.filter(m=>!m.matches||m.matches.some(g=>g.shouldLoad)).forEach(m=>{let{key:g,match:y,controller:E}=m;if(E&&E.signal.aborted)return;let S=l[g];if(ct(S,"Did not find corresponding fetcher result"),xr(S)){let w=hs(n.matches,y==null?void 0:y.route.id);d&&d[w.route.id]||(d={...d,[w.route.id]:S.error}),n.fetchers.delete(g)}else if(so(S))ct(!1,"Unhandled fetcher revalidation redirect");else{let w=pa(S.data);n.fetchers.set(g,w)}}),{loaderData:c,errors:d}}function zb(n,e,t,a){let s=Object.entries(e).filter(([,l])=>l!==hA).reduce((l,[c,d])=>(l[c]=d,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),a&&a.hasOwnProperty(c))break}return s}function Bb(n){return n?xr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function hs(n,e){return(e?n.slice(0,n.findIndex(a=>a.route.id===e)+1):[...n]).reverse().find(a=>a.route.hasErrorBoundary===!0)||n[0]}function yf(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ti(n,{pathname:e,routeId:t,method:a,type:s,message:l}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(c="Bad Request",a&&e&&t?d=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(c="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",d=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",a&&e&&t?d=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new Nc(n||500,c,new Error(d),!0)}function _f(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[a,s]=e[t];if(so(s))return{key:a,result:s}}}function yA(n){let e=typeof n=="string"?Da(n):n;return $i({...e,hash:""})}function KD(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function YD(n){var e,t;return new Nc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function QD(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&XD(t))}function XD(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function WD(n){return xy(n.result)&&uA.has(n.result.status)}function xr(n){return n.type==="error"}function so(n){return(n&&n.type)==="redirect"}function Hb(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function xy(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function JD(n){return uA.has(n)}function ZD(n){return xy(n)&&JD(n.status)&&n.headers.has("Location")}function eN(n){return ND.has(n.toUpperCase())}function er(n){return ID.has(n.toUpperCase())}function Oy(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function xf(n,e){let t=typeof e=="string"?Da(e).search:e.search;if(n[n.length-1].route.index&&Oy(t||""))return n[n.length-1];let a=iA(n);return a[a.length-1]}function Fb(n){let{formMethod:e,formAction:t,formEncType:a,text:s,formData:l,json:c}=n;if(!(!e||!t||!a)){if(s!=null)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:a,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:c,text:void 0}}}function bg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function tN(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Yu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function nN(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function pa(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function rN(n,e){try{let t=n.sessionStorage.getItem(cA);if(t){let a=JSON.parse(t);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function iN(n,e){if(e.size>0){let t={};for(let[a,s]of e)t[a]=[...s];try{n.sessionStorage.setItem(cA,JSON.stringify(t))}catch(a){un(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function qb(){let n,e,t=new Promise((a,s)=>{n=async l=>{a(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Eo=P.createContext(null);Eo.displayName="DataRouter";var Oc=P.createContext(null);Oc.displayName="DataRouterState";var _A=P.createContext(!1);function aN(){return P.useContext(_A)}var My=P.createContext({isTransitioning:!1});My.displayName="ViewTransition";var vA=P.createContext(new Map);vA.displayName="Fetchers";var sN=P.createContext(null);sN.displayName="Await";var Lr=P.createContext(null);Lr.displayName="Navigation";var kd=P.createContext(null);kd.displayName="Location";var oi=P.createContext({outlet:null,matches:[],isDataRoute:!1});oi.displayName="Route";var Py=P.createContext(null);Py.displayName="RouteError";var EA="REACT_ROUTER_ERROR",oN="REDIRECT",lN="ROUTE_ERROR_RESPONSE";function uN(n){if(n.startsWith(`${EA}:${oN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function cN(n){if(n.startsWith(`${EA}:${lN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Nc(e.status,e.statusText,e.data)}catch{}}function hN(n,{relative:e}={}){ct(Fl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=P.useContext(Lr),{hash:s,pathname:l,search:c}=Mc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Bi([t,l])),a.createHref({pathname:d,search:c,hash:s})}function Fl(){return P.useContext(kd)!=null}function li(){return ct(Fl(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(kd).location}var TA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bA(n){P.useContext(Lr).static||P.useLayoutEffect(n)}function To(){let{isDataRoute:n}=P.useContext(oi);return n?CN():fN()}function fN(){ct(Fl(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Eo),{basename:e,navigator:t}=P.useContext(Lr),{matches:a}=P.useContext(oi),{pathname:s}=li(),l=JSON.stringify(Md(a)),c=P.useRef(!1);return bA(()=>{c.current=!0}),P.useCallback((m,g={})=>{if(un(c.current,TA),!c.current)return;if(typeof m=="number"){t.go(m);return}let y=Pd(m,JSON.parse(l),s,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Bi([e,y.pathname])),(g.replace?t.replace:t.push)(y,g.state,g)},[e,t,l,s,n])}var dN=P.createContext(null);function mN(n){let e=P.useContext(oi).outlet;return P.useMemo(()=>e&&P.createElement(dN.Provider,{value:n},e),[e,n])}function Vd(){let{matches:n}=P.useContext(oi),e=n[n.length-1];return e?e.params:{}}function Mc(n,{relative:e}={}){let{matches:t}=P.useContext(oi),{pathname:a}=li(),s=JSON.stringify(Md(t));return P.useMemo(()=>Pd(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function pN(n,e,t,a,s){ct(Fl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=P.useContext(Lr),{matches:c}=P.useContext(oi),d=c[c.length-1],m=d?d.params:{},g=d?d.pathname:"/",y=d?d.pathnameBase:"/",E=d&&d.route;{let z=E&&E.path||"";AA(g,!E||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let S=li(),w;w=S;let M=w.pathname||"/",B=M;if(y!=="/"){let z=y.replace(/^\//,"").split("/");B="/"+M.replace(/^\//,"").split("/").slice(z.length).join("/")}let U=cs(n,{pathname:B});return un(E||U!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),un(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),EN(U&&U.map(z=>Object.assign({},z,{params:Object.assign({},m,z.params),pathname:Bi([y,l.encodeLocation?l.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?y:Bi([y,l.encodeLocation?l.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),c,t,a,s)}function gN(){let n=wN(),e=gc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,c)}var yN=P.createElement(gN,null),SA=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=cN(n.digest);t&&(n=t)}let e=n!==void 0?P.createElement(oi.Provider,{value:this.props.routeContext},P.createElement(Py.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?P.createElement(_N,{error:n},e):e}};SA.contextType=_A;var Sg=new WeakMap;function _N({children:n,error:e}){let{basename:t}=P.useContext(Lr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=uN(e.digest);if(a){let s=Sg.get(e);if(s)throw s;let l=sA(a.location,t);if(aA&&!Sg.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw Sg.set(e,c),c}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function vN({routeContext:n,match:e,children:t}){let a=P.useContext(Eo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(oi.Provider,{value:n},t)}function EN(n,e=[],t=null,a=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let y=l.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);ct(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,m=-1;if(t)for(let y=0;y<l.length;y++){let E=l[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=y),E.route.id){let{loaderData:S,errors:w}=t,M=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!w||w[E.route.id]===void 0);if(E.route.lazy||M){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=t&&a?(y,E)=>{var S,w;a(y,{location:t.location,params:((w=(S=t.matches)==null?void 0:S[0])==null?void 0:w.params)??{},unstable_pattern:xc(t.matches),errorInfo:E})}:void 0;return l.reduceRight((y,E,S)=>{let w,M=!1,B=null,U=null;t&&(w=c&&E.route.id?c[E.route.id]:void 0,B=E.route.errorElement||yN,d&&(m<0&&S===0?(AA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,U=null):m===S&&(M=!0,U=E.route.hydrateFallbackElement||null)));let Y=e.concat(l.slice(0,S+1)),z=()=>{let Q;return w?Q=B:M?Q=U:E.route.Component?Q=P.createElement(E.route.Component,null):E.route.element?Q=E.route.element:Q=y,P.createElement(vN,{match:E,routeContext:{outlet:y,matches:Y,isDataRoute:t!=null},children:Q})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?P.createElement(SA,{location:t.location,revalidation:t.revalidation,component:B,error:w,children:z(),routeContext:{outlet:null,matches:Y,isDataRoute:!0},onError:g}):z()},null)}function ky(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TN(n){let e=P.useContext(Eo);return ct(e,ky(n)),e}function bN(n){let e=P.useContext(Oc);return ct(e,ky(n)),e}function SN(n){let e=P.useContext(oi);return ct(e,ky(n)),e}function Vy(n){let e=SN(n),t=e.matches[e.matches.length-1];return ct(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function AN(){return Vy("useRouteId")}function wN(){var a;let n=P.useContext(Py),e=bN("useRouteError"),t=Vy("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function CN(){let{router:n}=TN("useNavigate"),e=Vy("useNavigate"),t=P.useRef(!1);return bA(()=>{t.current=!0}),P.useCallback(async(s,l={})=>{un(t.current,TA),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var Gb={};function AA(n,e,t){!e&&!Gb[n]&&(Gb[n]=!0,un(!1,t))}var $b={};function Kb(n,e){!n&&!$b[e]&&($b[e]=!0,console.warn(e))}var RN="useOptimistic",Yb=vI[RN],IN=()=>{};function DN(n){return Yb?Yb(n):[n,IN]}function NN(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&un(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:P.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&un(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:P.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&un(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:P.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var xN=["HydrateFallback","hydrateFallbackElement"],ON=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}};function MN({router:n,flushSync:e,onError:t,unstable_useTransitions:a}){a=aN()||a;let[l,c]=P.useState(n.state),[d,m]=DN(l),[g,y]=P.useState(),[E,S]=P.useState({isTransitioning:!1}),[w,M]=P.useState(),[B,U]=P.useState(),[Y,z]=P.useState(),Q=P.useRef(new Map),ne=P.useCallback((R,{deletedFetchers:N,newErrors:x,flushSync:O,viewTransitionOpts:k})=>{x&&t&&Object.values(x).forEach(ie=>{var Te;return t(ie,{location:R.location,params:((Te=R.matches[0])==null?void 0:Te.params)??{},unstable_pattern:xc(R.matches)})}),R.fetchers.forEach((ie,Te)=>{ie.data!==void 0&&Q.current.set(Te,ie.data)}),N.forEach(ie=>Q.current.delete(ie)),Kb(O===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let I=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(Kb(k==null||I,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!k||!I){e&&O?e(()=>c(R)):a===!1?c(R):P.startTransition(()=>{a===!0&&m(ie=>Qb(ie,R)),c(R)});return}if(e&&O){e(()=>{B&&(w==null||w.resolve(),B.skipTransition()),S({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let ie=n.window.document.startViewTransition(()=>{e(()=>c(R))});ie.finished.finally(()=>{e(()=>{M(void 0),U(void 0),y(void 0),S({isTransitioning:!1})})}),e(()=>U(ie));return}B?(w==null||w.resolve(),B.skipTransition(),z({state:R,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(y(R),S({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[n.window,e,B,w,a,m,t]);P.useLayoutEffect(()=>n.subscribe(ne),[n,ne]),P.useEffect(()=>{E.isTransitioning&&!E.flushSync&&M(new ON)},[E]),P.useEffect(()=>{if(w&&g&&n.window){let R=g,N=w.promise,x=n.window.document.startViewTransition(async()=>{a===!1?c(R):P.startTransition(()=>{a===!0&&m(O=>Qb(O,R)),c(R)}),await N});x.finished.finally(()=>{M(void 0),U(void 0),y(void 0),S({isTransitioning:!1})}),U(x)}},[g,w,n.window,a,m]),P.useEffect(()=>{w&&g&&d.location.key===g.location.key&&w.resolve()},[w,B,d.location,g]),P.useEffect(()=>{!E.isTransitioning&&Y&&(y(Y.state),S({isTransitioning:!0,flushSync:!1,currentLocation:Y.currentLocation,nextLocation:Y.nextLocation}),z(void 0))},[E.isTransitioning,Y]);let ue=P.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:R=>n.navigate(R),push:(R,N,x)=>n.navigate(R,{state:N,preventScrollReset:x==null?void 0:x.preventScrollReset}),replace:(R,N,x)=>n.navigate(R,{replace:!0,state:N,preventScrollReset:x==null?void 0:x.preventScrollReset})}),[n]),G=n.basename||"/",A=P.useMemo(()=>({router:n,navigator:ue,static:!1,basename:G,onError:t}),[n,ue,G,t]);return P.createElement(P.Fragment,null,P.createElement(Eo.Provider,{value:A},P.createElement(Oc.Provider,{value:d},P.createElement(vA.Provider,{value:Q.current},P.createElement(My.Provider,{value:E},P.createElement(VN,{basename:G,location:d.location,navigationType:d.historyAction,navigator:ue,unstable_useTransitions:a},P.createElement(PN,{routes:n.routes,future:n.future,state:d,onError:t})))))),null)}function Qb(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var PN=P.memo(kN);function kN({routes:n,future:e,state:t,onError:a}){return pN(n,void 0,t,a,e)}function ys({to:n,replace:e,state:t,relative:a}){ct(Fl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(Lr);un(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=P.useContext(oi),{pathname:c}=li(),d=To(),m=Pd(n,Md(l),c,a==="path"),g=JSON.stringify(m);return P.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:a})},[d,g,a,e,t]),null}function wA(n){return mN(n.context)}function VN({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){ct(!Fl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:d,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[d,s,l,c]);typeof t=="string"&&(t=Da(t));let{pathname:g="/",search:y="",hash:E="",state:S=null,key:w="default"}=t,M=P.useMemo(()=>{let B=ai(g,d);return B==null?null:{location:{pathname:B,search:y,hash:E,state:S,key:w},navigationType:a}},[d,g,y,E,S,w,a]);return un(M!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:P.createElement(Lr.Provider,{value:m},P.createElement(kd.Provider,{children:e,value:M}))}var Of="get",Mf="application/x-www-form-urlencoded";function jd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function jN(n){return jd(n)&&n.tagName.toLowerCase()==="button"}function LN(n){return jd(n)&&n.tagName.toLowerCase()==="form"}function UN(n){return jd(n)&&n.tagName.toLowerCase()==="input"}function zN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BN(n,e){return n.button===0&&(!e||e==="_self")&&!zN(n)}function Yg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let a=n[t];return e.concat(Array.isArray(a)?a.map(s=>[t,s]):[[t,a]])},[]))}function HN(n,e){let t=Yg(n);return e&&e.forEach((a,s)=>{t.has(s)||e.getAll(s).forEach(l=>{t.append(s,l)})}),t}var vf=null;function FN(){if(vf===null)try{new FormData(document.createElement("form"),0),vf=!1}catch{vf=!0}return vf}var qN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ag(n){return n!=null&&!qN.has(n)?(un(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mf}"`),null):n}function GN(n,e){let t,a,s,l,c;if(LN(n)){let d=n.getAttribute("action");a=d?ai(d,e):null,t=n.getAttribute("method")||Of,s=Ag(n.getAttribute("enctype"))||Mf,l=new FormData(n)}else if(jN(n)||UN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(a=m?ai(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Of,s=Ag(n.getAttribute("formenctype"))||Ag(d.getAttribute("enctype"))||Mf,l=new FormData(d,n),!FN()){let{name:g,type:y,value:E}=n;if(y==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,E)}}else{if(jd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Of,a=null,s=Mf,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function $N(n,e,t,a){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:e&&ai(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function KN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function YN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function QN(n,e,t){let a=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await KN(l,t);return c.links?c.links():[]}return[]}));return ZN(a.flat(1).filter(YN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Xb(n,e,t,a,s,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>{var y;return t[g].pathname!==m.pathname||((y=t[g].route.path)==null?void 0:y.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{var E;let y=a.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function XN(n,e,{includeHydrateFallback:t}={}){return WN(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function WN(n){return[...new Set(n)]}function JN(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function ZN(n,e){let t=new Set;return new Set(e),n.reduce((a,s)=>{let l=JSON.stringify(JN(s));return t.has(l)||(t.add(l),a.push({key:l,link:s})),a},[])}function CA(){let n=P.useContext(Eo);return jy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function ex(){let n=P.useContext(Oc);return jy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ly=P.createContext(void 0);Ly.displayName="FrameworkContext";function RA(){let n=P.useContext(Ly);return jy(n,"You must render this element inside a <HydratedRouter> element"),n}function tx(n,e){let t=P.useContext(Ly),[a,s]=P.useState(!1),[l,c]=P.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:E}=e,S=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let B=Y=>{Y.forEach(z=>{c(z.isIntersecting)})},U=new IntersectionObserver(B,{threshold:.5});return S.current&&U.observe(S.current),()=>{U.disconnect()}}},[n]),P.useEffect(()=>{if(a){let B=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(B)}}},[a]);let w=()=>{s(!0)},M=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:Qu(d,w),onBlur:Qu(m,M),onMouseEnter:Qu(g,w),onMouseLeave:Qu(y,M),onTouchStart:Qu(E,w)}]:[!1,S,{}]}function Qu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function nx({page:n,...e}){let{router:t}=CA(),a=P.useMemo(()=>cs(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?P.createElement(ix,{page:n,matches:a,...e}):null}function rx(n){let{manifest:e,routeModules:t}=RA(),[a,s]=P.useState([]);return P.useEffect(()=>{let l=!1;return QN(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),a}function ix({page:n,matches:e,...t}){let a=li(),{future:s,manifest:l,routeModules:c}=RA(),{basename:d}=CA(),{loaderData:m,matches:g}=ex(),y=P.useMemo(()=>Xb(n,e,g,l,a,"data"),[n,e,g,l,a]),E=P.useMemo(()=>Xb(n,e,g,l,a,"assets"),[n,e,g,l,a]),S=P.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let B=new Set,U=!1;if(e.forEach(z=>{var ne;let Q=l.routes[z.route.id];!Q||!Q.hasLoader||(!y.some(ue=>ue.route.id===z.route.id)&&z.route.id in m&&((ne=c[z.route.id])!=null&&ne.shouldRevalidate)||Q.hasClientLoader?U=!0:B.add(z.route.id))}),B.size===0)return[];let Y=$N(n,d,s.unstable_trailingSlashAwareDataRequests,"data");return U&&B.size>0&&Y.searchParams.set("_routes",e.filter(z=>B.has(z.route.id)).map(z=>z.route.id).join(",")),[Y.pathname+Y.search]},[d,s.unstable_trailingSlashAwareDataRequests,m,a,l,y,e,n,c]),w=P.useMemo(()=>XN(E,l),[E,l]),M=rx(E);return P.createElement(P.Fragment,null,S.map(B=>P.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...t})),w.map(B=>P.createElement("link",{key:B,rel:"modulepreload",href:B,...t})),M.map(({key:B,link:U})=>P.createElement("link",{key:B,nonce:t.nonce,...U,crossOrigin:U.crossOrigin??t.crossOrigin})))}function ax(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sx&&(window.__reactRouterVersion="7.13.0")}catch{}function ox(n,e){return PD({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:XI({window:e==null?void 0:e.window}),hydrationData:lx(),routes:n,mapRouteProperties:NN,hydrationRouteProperties:xN,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function lx(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:ux(n.errors)}),n}function ux(n){if(!n)return null;let e=Object.entries(n),t={};for(let[a,s]of e)if(s&&s.__type==="RouteErrorResponse")t[a]=new Nc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[a]=c}catch{}}if(t[a]==null){let l=new Error(s.message);l.stack="",t[a]=l}}else t[a]=s;return t}var IA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DA=P.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:S,...w},M){let{basename:B,unstable_useTransitions:U}=P.useContext(Lr),Y=typeof g=="string"&&IA.test(g),z=sA(g,B);g=z.to;let Q=hN(g,{relative:s}),[ne,ue,G]=tx(a,w),A=dx(g,{replace:c,state:d,target:m,preventScrollReset:y,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:S,unstable_useTransitions:U});function R(x){e&&e(x),x.defaultPrevented||A(x)}let N=P.createElement("a",{...w,...G,href:z.absoluteURL||Q,onClick:z.isExternal||l?e:R,ref:ax(M,ue),target:m,"data-discover":!Y&&t==="render"?"true":void 0});return ne&&!Y?P.createElement(P.Fragment,null,N,P.createElement(nx,{page:Q})):N});DA.displayName="Link";var cx=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:m,...g},y){let E=Mc(c,{relative:g.relative}),S=li(),w=P.useContext(Oc),{navigator:M,basename:B}=P.useContext(Lr),U=w!=null&&vx(E)&&d===!0,Y=M.encodeLocation?M.encodeLocation(E).pathname:E.pathname,z=S.pathname,Q=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(z=z.toLowerCase(),Q=Q?Q.toLowerCase():null,Y=Y.toLowerCase()),Q&&B&&(Q=ai(Q,B)||Q);const ne=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let ue=z===Y||!s&&z.startsWith(Y)&&z.charAt(ne)==="/",G=Q!=null&&(Q===Y||!s&&Q.startsWith(Y)&&Q.charAt(Y.length)==="/"),A={isActive:ue,isPending:G,isTransitioning:U},R=ue?e:void 0,N;typeof a=="function"?N=a(A):N=[a,ue?"active":null,G?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let x=typeof l=="function"?l(A):l;return P.createElement(DA,{...g,"aria-current":R,className:N,ref:y,style:x,to:c,viewTransition:d},typeof m=="function"?m(A):m)});cx.displayName="NavLink";var hx=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:l,method:c=Of,action:d,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:S,...w},M)=>{let{unstable_useTransitions:B}=P.useContext(Lr),U=yx(),Y=_x(d,{relative:g}),z=c.toLowerCase()==="get"?"get":"post",Q=typeof d=="string"&&IA.test(d),ne=ue=>{if(m&&m(ue),ue.defaultPrevented)return;ue.preventDefault();let G=ue.nativeEvent.submitter,A=(G==null?void 0:G.getAttribute("formmethod"))||c,R=()=>U(G||ue.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:l,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:S});B&&t!==!1?P.startTransition(()=>R()):R()};return P.createElement("form",{ref:M,method:z,action:Y,onSubmit:a?m:ne,...w,"data-discover":!Q&&n==="render"?"true":void 0})});hx.displayName="Form";function fx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NA(n){let e=P.useContext(Eo);return ct(e,fx(n)),e}function dx(n,{target:e,replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:m}={}){let g=To(),y=li(),E=Mc(n,{relative:l});return P.useCallback(S=>{if(BN(S,e)){S.preventDefault();let w=t!==void 0?t:$i(y)===$i(E),M=()=>g(n,{replace:w,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});m?P.startTransition(()=>M()):M()}},[y,g,E,t,a,e,n,s,l,c,d,m])}function mx(n){un(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(Yg(n)),t=P.useRef(!1),a=li(),s=P.useMemo(()=>HN(a.search,t.current?null:e.current),[a.search]),l=To(),c=P.useCallback((d,m)=>{const g=Yg(typeof d=="function"?d(new URLSearchParams(s)):d);t.current=!0,l("?"+g,m)},[l,s]);return[s,c]}var px=0,gx=()=>`__${String(++px)}__`;function yx(){let{router:n}=NA("useSubmit"),{basename:e}=P.useContext(Lr),t=AN(),a=n.fetch,s=n.navigate;return P.useCallback(async(l,c={})=>{let{action:d,method:m,encType:g,formData:y,body:E}=GN(l,e);if(c.navigate===!1){let S=c.fetcherKey||gx();await a(S,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:E,formMethod:c.method||m,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:E,formMethod:c.method||m,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,s,e,t])}function _x(n,{relative:e}={}){let{basename:t}=P.useContext(Lr),a=P.useContext(oi);ct(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...Mc(n||".",{relative:e})},c=li();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(y=>y==="")){d.delete("index"),m.filter(E=>E).forEach(E=>d.append("index",E));let y=d.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Bi([t,l.pathname])),$i(l)}function vx(n,{relative:e}={}){let t=P.useContext(My);ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=NA("useViewTransitionState"),s=Mc(n,{relative:e});if(!t.isTransitioning)return!1;let l=ai(t.currentLocation.pathname,a)||t.currentLocation.pathname,c=ai(t.nextLocation.pathname,a)||t.nextLocation.pathname;return td(s.pathname,c)!=null||td(s.pathname,l)!=null}var xA=XS();function Ex(n){return P.createElement(MN,{flushSync:xA.flushSync,...n})}const Tx=P.createContext(void 0),ui=()=>qI(),lt=KI.withTypes(),bx=({children:n})=>{const e=lt(t=>t.auth.loading);return b.jsx(Tx.Provider,{value:{isLoading:e},children:n})},Sx=()=>{};var Wb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let s=n.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Ax=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const s=n[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],d=n[t++],m=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(m>>10)),e[a++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},MA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,d=c?n[s+1]:0,m=s+2<n.length,g=m?n[s+2]:0,y=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,w=g&63;m||(w=64,c||(S=64)),a.push(t[y],t[E],t[S],t[w])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(OA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ax(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new wx;const S=l<<2|d>>4;if(a.push(S),g!==64){const w=d<<4&240|g>>2;if(a.push(w),E!==64){const M=g<<6&192|E;a.push(M)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class wx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Cx=function(n){const e=OA(n);return MA.encodeByteArray(e,!0)},nd=function(n){return Cx(n).replace(/\./g,"")},PA=function(n){try{return MA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=()=>Rx().__FIREBASE_DEFAULTS__,Dx=()=>{if(typeof process>"u"||typeof Wb>"u")return;const n=Wb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Nx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&PA(n[1]);return e&&JSON.parse(e)},Ld=()=>{try{return Sx()||Ix()||Dx()||Nx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},kA=n=>{var e,t;return(t=(e=Ld())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},xx=n=>{const e=kA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},VA=()=>{var n;return(n=Ld())==null?void 0:n.config},jA=n=>{var e;return(e=Ld())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[nd(JSON.stringify(t)),nd(JSON.stringify(c)),""].join(".")}const ac={};function Px(){const n={prod:[],emulator:[]};for(const e of Object.keys(ac))ac[e]?n.emulator.push(e):n.prod.push(e);return n}function kx(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Jb=!1;function UA(n,e){if(typeof window>"u"||typeof document>"u"||!ql(window.location.host)||ac[n]===e||ac[n]||Jb)return;ac[n]=e;function t(S){return`__firebase__banner__${S}`}const a="__firebase__banner",l=Px().prod.length>0;function c(){const S=document.getElementById(a);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Jb=!0,c()},S}function y(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=kx(a),w=t("text"),M=document.getElementById(w)||document.createElement("span"),B=t("learnmore"),U=document.getElementById(B)||document.createElement("a"),Y=t("preprendIcon"),z=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Q=S.element;d(Q),y(U,B);const ne=g();m(z,Y),Q.append(z,M,U,ne),document.body.appendChild(Q)}l?(M.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rr())}function jx(){var e;const n=(e=Ld())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Lx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ux(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bx(){const n=rr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Hx(){return!jx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fx(){try{return typeof indexedDB=="object"}catch{return!1}}function qx(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="FirebaseError";class Na extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=Gx,Object.setPrototypeOf(this,Na.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pc.prototype.create)}}class Pc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?$x(l,a):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new Na(s,d,a)}}function $x(n,e){return n.replace(Kx,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const Kx=/\{\$([^}]+)}/g;function Yx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function mo(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=n[s],c=e[s];if(Zb(l)&&Zb(c)){if(!mo(l,c))return!1}else if(l!==c)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function Zb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Qx(n,e){const t=new Xx(n,e);return t.subscribe.bind(t)}class Xx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");Wx(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=wg),s.error===void 0&&(s.error=wg),s.complete===void 0&&(s.complete=wg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wx(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){return n&&n._delegate?n._delegate:n}class po{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new Ox;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(e2(e))try{this.getOrInitializeService({instanceIdentifier:ao})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ao){return this.instances.has(e)}getOptions(e=ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&c.resolve(s)}return s}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const l=this.instances.get(a);return l&&e(l,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Zx(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ao){return this.component?this.component.multipleInstances?e:ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zx(n){return n===ao?void 0:n}function e2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Jx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Et||(Et={}));const n2={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},r2=Et.INFO,i2={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},a2=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),s=i2[e];if(s)console[s](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uy{constructor(e){this.name=e,this._logLevel=r2,this._logHandler=a2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?n2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...e),this._logHandler(this,Et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...e),this._logHandler(this,Et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...e),this._logHandler(this,Et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...e),this._logHandler(this,Et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...e),this._logHandler(this,Et.ERROR,...e)}}const s2=(n,e)=>e.some(t=>n instanceof t);let e0,t0;function o2(){return e0||(e0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function l2(){return t0||(t0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zA=new WeakMap,Qg=new WeakMap,BA=new WeakMap,Cg=new WeakMap,zy=new WeakMap;function u2(n){const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(_s(n.result)),s()},c=()=>{a(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&zA.set(t,n)}).catch(()=>{}),zy.set(e,n),e}function c2(n){if(Qg.has(n))return;const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{a(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Qg.set(n,e)}let Xg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Qg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||BA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _s(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function h2(n){Xg=n(Xg)}function f2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(Rg(this),e,...t);return BA.set(a,e.sort?e.sort():[e]),_s(a)}:l2().includes(n)?function(...e){return n.apply(Rg(this),e),_s(zA.get(this))}:function(...e){return _s(n.apply(Rg(this),e))}}function d2(n){return typeof n=="function"?f2(n):(n instanceof IDBTransaction&&c2(n),s2(n,o2())?new Proxy(n,Xg):n)}function _s(n){if(n instanceof IDBRequest)return u2(n);if(Cg.has(n))return Cg.get(n);const e=d2(n);return e!==n&&(Cg.set(n,e),zy.set(e,n)),e}const Rg=n=>zy.get(n);function m2(n,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),d=_s(c);return a&&c.addEventListener("upgradeneeded",m=>{a(_s(c.result),m.oldVersion,m.newVersion,_s(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),s&&m.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const p2=["get","getKey","getAll","getAllKeys","count"],g2=["put","add","delete","clear"],Ig=new Map;function n0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ig.get(e))return Ig.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=g2.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||p2.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,s?"readwrite":"readonly");let g=m.store;return a&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&m.done]))[0]};return Ig.set(e,l),l}h2(n=>({...n,get:(e,t,a)=>n0(e,t)||n.get(e,t,a),has:(e,t)=>!!n0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_2(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function _2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wg="@firebase/app",r0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new Uy("@firebase/app"),v2="@firebase/app-compat",E2="@firebase/analytics-compat",T2="@firebase/analytics",b2="@firebase/app-check-compat",S2="@firebase/app-check",A2="@firebase/auth",w2="@firebase/auth-compat",C2="@firebase/database",R2="@firebase/data-connect",I2="@firebase/database-compat",D2="@firebase/functions",N2="@firebase/functions-compat",x2="@firebase/installations",O2="@firebase/installations-compat",M2="@firebase/messaging",P2="@firebase/messaging-compat",k2="@firebase/performance",V2="@firebase/performance-compat",j2="@firebase/remote-config",L2="@firebase/remote-config-compat",U2="@firebase/storage",z2="@firebase/storage-compat",B2="@firebase/firestore",H2="@firebase/ai",F2="@firebase/firestore-compat",q2="firebase",G2="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="[DEFAULT]",$2={[Wg]:"fire-core",[v2]:"fire-core-compat",[T2]:"fire-analytics",[E2]:"fire-analytics-compat",[S2]:"fire-app-check",[b2]:"fire-app-check-compat",[A2]:"fire-auth",[w2]:"fire-auth-compat",[C2]:"fire-rtdb",[R2]:"fire-data-connect",[I2]:"fire-rtdb-compat",[D2]:"fire-fn",[N2]:"fire-fn-compat",[x2]:"fire-iid",[O2]:"fire-iid-compat",[M2]:"fire-fcm",[P2]:"fire-fcm-compat",[k2]:"fire-perf",[V2]:"fire-perf-compat",[j2]:"fire-rc",[L2]:"fire-rc-compat",[U2]:"fire-gcs",[z2]:"fire-gcs-compat",[B2]:"fire-fst",[F2]:"fire-fst-compat",[H2]:"fire-vertex","fire-js":"fire-js",[q2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=new Map,K2=new Map,Zg=new Map;function i0(n,e){try{n.container.addComponent(e)}catch(t){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xl(n){const e=n.name;if(Zg.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;Zg.set(e,n);for(const t of rd.values())i0(t,n);for(const t of K2.values())i0(t,n);return!0}function By(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new Pc("app","Firebase",Y2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new po("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=G2;function HA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a={name:Jg,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw vs.create("bad-app-name",{appName:String(s)});if(t||(t=VA()),!t)throw vs.create("no-options");const l=rd.get(s);if(l){if(mo(t,l.options)&&mo(a,l.config))return l;throw vs.create("duplicate-app",{appName:s})}const c=new t2(s);for(const m of Zg.values())c.addComponent(m);const d=new Q2(t,a,c);return rd.set(s,d),d}function FA(n=Jg){const e=rd.get(n);if(!e&&n===Jg&&VA())return HA();if(!e)throw vs.create("no-app",{appName:n});return e}function Es(n,e,t){let a=$2[n]??n;t&&(a+=`-${t}`);const s=a.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Aa.warn(c.join(" "));return}xl(new po(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="firebase-heartbeat-database",W2=1,yc="firebase-heartbeat-store";let Dg=null;function qA(){return Dg||(Dg=m2(X2,W2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yc)}catch(t){console.warn(t)}}}}).catch(n=>{throw vs.create("idb-open",{originalErrorMessage:n.message})})),Dg}async function J2(n){try{const t=(await qA()).transaction(yc),a=await t.objectStore(yc).get(GA(n));return await t.done,a}catch(e){if(e instanceof Na)Aa.warn(e.message);else{const t=vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Aa.warn(t.message)}}}async function a0(n,e){try{const a=(await qA()).transaction(yc,"readwrite");await a.objectStore(yc).put(e,GA(n)),await a.done}catch(t){if(t instanceof Na)Aa.warn(t.message);else{const a=vs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Aa.warn(a.message)}}}function GA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=1024,eO=30;class tO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rO(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=s0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>eO){const c=iO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Aa.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=s0(),{heartbeatsToSend:a,unsentEntries:s}=nO(this._heartbeatsCache.heartbeats),l=nd(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Aa.warn(t),""}}}function s0(){return new Date().toISOString().substring(0,10)}function nO(n,e=Z2){const t=[];let a=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),o0(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),o0(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class rO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fx()?qx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await J2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return a0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return a0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function o0(n){return nd(JSON.stringify({version:2,heartbeats:n})).length}function iO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(n){xl(new po("platform-logger",e=>new y2(e),"PRIVATE")),xl(new po("heartbeat",e=>new tO(e),"PRIVATE")),Es(Wg,r0,n),Es(Wg,r0,"esm2020"),Es("fire-js","")}aO("");var l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ts,$A;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,R){function N(){}N.prototype=R.prototype,A.F=R.prototype,A.prototype=new N,A.prototype.constructor=A,A.D=function(x,O,k){for(var I=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)I[ie-2]=arguments[ie];return R.prototype[O].apply(x,I)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,R,N){N||(N=0);const x=Array(16);if(typeof R=="string")for(var O=0;O<16;++O)x[O]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(O=0;O<16;++O)x[O]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=A.g[0],N=A.g[1],O=A.g[2];let k=A.g[3],I;I=R+(k^N&(O^k))+x[0]+3614090360&4294967295,R=N+(I<<7&4294967295|I>>>25),I=k+(O^R&(N^O))+x[1]+3905402710&4294967295,k=R+(I<<12&4294967295|I>>>20),I=O+(N^k&(R^N))+x[2]+606105819&4294967295,O=k+(I<<17&4294967295|I>>>15),I=N+(R^O&(k^R))+x[3]+3250441966&4294967295,N=O+(I<<22&4294967295|I>>>10),I=R+(k^N&(O^k))+x[4]+4118548399&4294967295,R=N+(I<<7&4294967295|I>>>25),I=k+(O^R&(N^O))+x[5]+1200080426&4294967295,k=R+(I<<12&4294967295|I>>>20),I=O+(N^k&(R^N))+x[6]+2821735955&4294967295,O=k+(I<<17&4294967295|I>>>15),I=N+(R^O&(k^R))+x[7]+4249261313&4294967295,N=O+(I<<22&4294967295|I>>>10),I=R+(k^N&(O^k))+x[8]+1770035416&4294967295,R=N+(I<<7&4294967295|I>>>25),I=k+(O^R&(N^O))+x[9]+2336552879&4294967295,k=R+(I<<12&4294967295|I>>>20),I=O+(N^k&(R^N))+x[10]+4294925233&4294967295,O=k+(I<<17&4294967295|I>>>15),I=N+(R^O&(k^R))+x[11]+2304563134&4294967295,N=O+(I<<22&4294967295|I>>>10),I=R+(k^N&(O^k))+x[12]+1804603682&4294967295,R=N+(I<<7&4294967295|I>>>25),I=k+(O^R&(N^O))+x[13]+4254626195&4294967295,k=R+(I<<12&4294967295|I>>>20),I=O+(N^k&(R^N))+x[14]+2792965006&4294967295,O=k+(I<<17&4294967295|I>>>15),I=N+(R^O&(k^R))+x[15]+1236535329&4294967295,N=O+(I<<22&4294967295|I>>>10),I=R+(O^k&(N^O))+x[1]+4129170786&4294967295,R=N+(I<<5&4294967295|I>>>27),I=k+(N^O&(R^N))+x[6]+3225465664&4294967295,k=R+(I<<9&4294967295|I>>>23),I=O+(R^N&(k^R))+x[11]+643717713&4294967295,O=k+(I<<14&4294967295|I>>>18),I=N+(k^R&(O^k))+x[0]+3921069994&4294967295,N=O+(I<<20&4294967295|I>>>12),I=R+(O^k&(N^O))+x[5]+3593408605&4294967295,R=N+(I<<5&4294967295|I>>>27),I=k+(N^O&(R^N))+x[10]+38016083&4294967295,k=R+(I<<9&4294967295|I>>>23),I=O+(R^N&(k^R))+x[15]+3634488961&4294967295,O=k+(I<<14&4294967295|I>>>18),I=N+(k^R&(O^k))+x[4]+3889429448&4294967295,N=O+(I<<20&4294967295|I>>>12),I=R+(O^k&(N^O))+x[9]+568446438&4294967295,R=N+(I<<5&4294967295|I>>>27),I=k+(N^O&(R^N))+x[14]+3275163606&4294967295,k=R+(I<<9&4294967295|I>>>23),I=O+(R^N&(k^R))+x[3]+4107603335&4294967295,O=k+(I<<14&4294967295|I>>>18),I=N+(k^R&(O^k))+x[8]+1163531501&4294967295,N=O+(I<<20&4294967295|I>>>12),I=R+(O^k&(N^O))+x[13]+2850285829&4294967295,R=N+(I<<5&4294967295|I>>>27),I=k+(N^O&(R^N))+x[2]+4243563512&4294967295,k=R+(I<<9&4294967295|I>>>23),I=O+(R^N&(k^R))+x[7]+1735328473&4294967295,O=k+(I<<14&4294967295|I>>>18),I=N+(k^R&(O^k))+x[12]+2368359562&4294967295,N=O+(I<<20&4294967295|I>>>12),I=R+(N^O^k)+x[5]+4294588738&4294967295,R=N+(I<<4&4294967295|I>>>28),I=k+(R^N^O)+x[8]+2272392833&4294967295,k=R+(I<<11&4294967295|I>>>21),I=O+(k^R^N)+x[11]+1839030562&4294967295,O=k+(I<<16&4294967295|I>>>16),I=N+(O^k^R)+x[14]+4259657740&4294967295,N=O+(I<<23&4294967295|I>>>9),I=R+(N^O^k)+x[1]+2763975236&4294967295,R=N+(I<<4&4294967295|I>>>28),I=k+(R^N^O)+x[4]+1272893353&4294967295,k=R+(I<<11&4294967295|I>>>21),I=O+(k^R^N)+x[7]+4139469664&4294967295,O=k+(I<<16&4294967295|I>>>16),I=N+(O^k^R)+x[10]+3200236656&4294967295,N=O+(I<<23&4294967295|I>>>9),I=R+(N^O^k)+x[13]+681279174&4294967295,R=N+(I<<4&4294967295|I>>>28),I=k+(R^N^O)+x[0]+3936430074&4294967295,k=R+(I<<11&4294967295|I>>>21),I=O+(k^R^N)+x[3]+3572445317&4294967295,O=k+(I<<16&4294967295|I>>>16),I=N+(O^k^R)+x[6]+76029189&4294967295,N=O+(I<<23&4294967295|I>>>9),I=R+(N^O^k)+x[9]+3654602809&4294967295,R=N+(I<<4&4294967295|I>>>28),I=k+(R^N^O)+x[12]+3873151461&4294967295,k=R+(I<<11&4294967295|I>>>21),I=O+(k^R^N)+x[15]+530742520&4294967295,O=k+(I<<16&4294967295|I>>>16),I=N+(O^k^R)+x[2]+3299628645&4294967295,N=O+(I<<23&4294967295|I>>>9),I=R+(O^(N|~k))+x[0]+4096336452&4294967295,R=N+(I<<6&4294967295|I>>>26),I=k+(N^(R|~O))+x[7]+1126891415&4294967295,k=R+(I<<10&4294967295|I>>>22),I=O+(R^(k|~N))+x[14]+2878612391&4294967295,O=k+(I<<15&4294967295|I>>>17),I=N+(k^(O|~R))+x[5]+4237533241&4294967295,N=O+(I<<21&4294967295|I>>>11),I=R+(O^(N|~k))+x[12]+1700485571&4294967295,R=N+(I<<6&4294967295|I>>>26),I=k+(N^(R|~O))+x[3]+2399980690&4294967295,k=R+(I<<10&4294967295|I>>>22),I=O+(R^(k|~N))+x[10]+4293915773&4294967295,O=k+(I<<15&4294967295|I>>>17),I=N+(k^(O|~R))+x[1]+2240044497&4294967295,N=O+(I<<21&4294967295|I>>>11),I=R+(O^(N|~k))+x[8]+1873313359&4294967295,R=N+(I<<6&4294967295|I>>>26),I=k+(N^(R|~O))+x[15]+4264355552&4294967295,k=R+(I<<10&4294967295|I>>>22),I=O+(R^(k|~N))+x[6]+2734768916&4294967295,O=k+(I<<15&4294967295|I>>>17),I=N+(k^(O|~R))+x[13]+1309151649&4294967295,N=O+(I<<21&4294967295|I>>>11),I=R+(O^(N|~k))+x[4]+4149444226&4294967295,R=N+(I<<6&4294967295|I>>>26),I=k+(N^(R|~O))+x[11]+3174756917&4294967295,k=R+(I<<10&4294967295|I>>>22),I=O+(R^(k|~N))+x[2]+718787259&4294967295,O=k+(I<<15&4294967295|I>>>17),I=N+(k^(O|~R))+x[9]+3951481745&4294967295,A.g[0]=A.g[0]+R&4294967295,A.g[1]=A.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+O&4294967295,A.g[3]=A.g[3]+k&4294967295}a.prototype.v=function(A,R){R===void 0&&(R=A.length);const N=R-this.blockSize,x=this.C;let O=this.h,k=0;for(;k<R;){if(O==0)for(;k<=N;)s(this,A,k),k+=this.blockSize;if(typeof A=="string"){for(;k<R;)if(x[O++]=A.charCodeAt(k++),O==this.blockSize){s(this,x),O=0;break}}else for(;k<R;)if(x[O++]=A[k++],O==this.blockSize){s(this,x),O=0;break}}this.h=O,this.o+=R},a.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var R=1;R<A.length-8;++R)A[R]=0;R=this.o*8;for(var N=A.length-8;N<A.length;++N)A[N]=R&255,R/=256;for(this.v(A),A=Array(16),R=0,N=0;N<4;++N)for(let x=0;x<32;x+=8)A[R++]=this.g[N]>>>x&255;return A};function l(A,R){var N=d;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=R(A)}function c(A,R){this.h=R;const N=[];let x=!0;for(let O=A.length-1;O>=0;O--){const k=A[O]|0;x&&k==R||(N[O]=k,x=!1)}this.g=N}var d={};function m(A){return-128<=A&&A<128?l(A,function(R){return new c([R|0],R<0?-1:0)}):new c([A|0],A<0?-1:0)}function g(A){if(isNaN(A)||!isFinite(A))return E;if(A<0)return U(g(-A));const R=[];let N=1;for(let x=0;A>=N;x++)R[x]=A/N|0,N*=4294967296;return new c(R,0)}function y(A,R){if(A.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(A.charAt(0)=="-")return U(y(A.substring(1),R));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(R,8));let x=E;for(let k=0;k<A.length;k+=8){var O=Math.min(8,A.length-k);const I=parseInt(A.substring(k,k+O),R);O<8?(O=g(Math.pow(R,O)),x=x.j(O).add(g(I))):(x=x.j(N),x=x.add(g(I)))}return x}var E=m(0),S=m(1),w=m(16777216);n=c.prototype,n.m=function(){if(B(this))return-U(this).m();let A=0,R=1;for(let N=0;N<this.g.length;N++){const x=this.i(N);A+=(x>=0?x:4294967296+x)*R,R*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(M(this))return"0";if(B(this))return"-"+U(this).toString(A);const R=g(Math.pow(A,6));var N=this;let x="";for(;;){const O=ne(N,R).g;N=Y(N,O.j(R));let k=((N.g.length>0?N.g[0]:N.h)>>>0).toString(A);if(N=O,M(N))return k+x;for(;k.length<6;)k="0"+k;x=k+x}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function M(A){if(A.h!=0)return!1;for(let R=0;R<A.g.length;R++)if(A.g[R]!=0)return!1;return!0}function B(A){return A.h==-1}n.l=function(A){return A=Y(this,A),B(A)?-1:M(A)?0:1};function U(A){const R=A.g.length,N=[];for(let x=0;x<R;x++)N[x]=~A.g[x];return new c(N,~A.h).add(S)}n.abs=function(){return B(this)?U(this):this},n.add=function(A){const R=Math.max(this.g.length,A.g.length),N=[];let x=0;for(let O=0;O<=R;O++){let k=x+(this.i(O)&65535)+(A.i(O)&65535),I=(k>>>16)+(this.i(O)>>>16)+(A.i(O)>>>16);x=I>>>16,k&=65535,I&=65535,N[O]=I<<16|k}return new c(N,N[N.length-1]&-2147483648?-1:0)};function Y(A,R){return A.add(U(R))}n.j=function(A){if(M(this)||M(A))return E;if(B(this))return B(A)?U(this).j(U(A)):U(U(this).j(A));if(B(A))return U(this.j(U(A)));if(this.l(w)<0&&A.l(w)<0)return g(this.m()*A.m());const R=this.g.length+A.g.length,N=[];for(var x=0;x<2*R;x++)N[x]=0;for(x=0;x<this.g.length;x++)for(let O=0;O<A.g.length;O++){const k=this.i(x)>>>16,I=this.i(x)&65535,ie=A.i(O)>>>16,Te=A.i(O)&65535;N[2*x+2*O]+=I*Te,z(N,2*x+2*O),N[2*x+2*O+1]+=k*Te,z(N,2*x+2*O+1),N[2*x+2*O+1]+=I*ie,z(N,2*x+2*O+1),N[2*x+2*O+2]+=k*ie,z(N,2*x+2*O+2)}for(A=0;A<R;A++)N[A]=N[2*A+1]<<16|N[2*A];for(A=R;A<2*R;A++)N[A]=0;return new c(N,0)};function z(A,R){for(;(A[R]&65535)!=A[R];)A[R+1]+=A[R]>>>16,A[R]&=65535,R++}function Q(A,R){this.g=A,this.h=R}function ne(A,R){if(M(R))throw Error("division by zero");if(M(A))return new Q(E,E);if(B(A))return R=ne(U(A),R),new Q(U(R.g),U(R.h));if(B(R))return R=ne(A,U(R)),new Q(U(R.g),R.h);if(A.g.length>30){if(B(A)||B(R))throw Error("slowDivide_ only works with positive integers.");for(var N=S,x=R;x.l(A)<=0;)N=ue(N),x=ue(x);var O=G(N,1),k=G(x,1);for(x=G(x,2),N=G(N,2);!M(x);){var I=k.add(x);I.l(A)<=0&&(O=O.add(N),k=I),x=G(x,1),N=G(N,1)}return R=Y(A,O.j(R)),new Q(O,R)}for(O=E;A.l(R)>=0;){for(N=Math.max(1,Math.floor(A.m()/R.m())),x=Math.ceil(Math.log(N)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),k=g(N),I=k.j(R);B(I)||I.l(A)>0;)N-=x,k=g(N),I=k.j(R);M(k)&&(k=S),O=O.add(k),A=Y(A,I)}return new Q(O,A)}n.B=function(A){return ne(this,A).h},n.and=function(A){const R=Math.max(this.g.length,A.g.length),N=[];for(let x=0;x<R;x++)N[x]=this.i(x)&A.i(x);return new c(N,this.h&A.h)},n.or=function(A){const R=Math.max(this.g.length,A.g.length),N=[];for(let x=0;x<R;x++)N[x]=this.i(x)|A.i(x);return new c(N,this.h|A.h)},n.xor=function(A){const R=Math.max(this.g.length,A.g.length),N=[];for(let x=0;x<R;x++)N[x]=this.i(x)^A.i(x);return new c(N,this.h^A.h)};function ue(A){const R=A.g.length+1,N=[];for(let x=0;x<R;x++)N[x]=A.i(x)<<1|A.i(x-1)>>>31;return new c(N,A.h)}function G(A,R){const N=R>>5;R%=32;const x=A.g.length-N,O=[];for(let k=0;k<x;k++)O[k]=R>0?A.i(k+N)>>>R|A.i(k+N+1)<<32-R:A.i(k+N);return new c(O,A.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,$A=a,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,Ts=c}).apply(typeof l0<"u"?l0:typeof self<"u"?self:typeof window<"u"?window:{});var Ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KA,Zu,YA,Pf,ey,QA,XA,WA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ef=="object"&&Ef];for(var _=0;_<h.length;++_){var T=h[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=t(this);function s(h,_){if(_)e:{var T=a;h=h.split(".");for(var D=0;D<h.length-1;D++){var W=h[D];if(!(W in T))break e;T=T[W]}h=h[h.length-1],D=T[h],_=_(D),_!=D&&_!=null&&e(T,h,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(_){var T=[],D;for(D in _)Object.prototype.hasOwnProperty.call(_,D)&&T.push([D,_[D]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,T){return h.call.apply(h.bind,arguments)}function g(h,_,T){return g=m,g.apply(null,arguments)}function y(h,_){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function E(h,_){function T(){}T.prototype=_.prototype,h.Z=_.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(D,W,re){for(var Re=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)Re[nt-2]=arguments[nt];return _.prototype[W].apply(D,Re)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const _=h.length;if(_>0){const T=Array(_);for(let D=0;D<_;D++)T[D]=h[D];return T}return[]}function M(h,_){for(let D=1;D<arguments.length;D++){const W=arguments[D];var T=typeof W;if(T=T!="object"?T:W?Array.isArray(W)?"array":T:"null",T=="array"||T=="object"&&typeof W.length=="number"){T=h.length||0;const re=W.length||0;h.length=T+re;for(let Re=0;Re<re;Re++)h[T+Re]=W[Re]}else h.push(W)}}class B{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function U(h){c.setTimeout(()=>{throw h},0)}function Y(){var h=A;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class z{constructor(){this.h=this.g=null}add(_,T){const D=Q.get();D.set(_,T),this.h?this.h.next=D:this.g=D,this.h=D}}var Q=new B(()=>new ne,h=>h.reset());class ne{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,G=!1,A=new z,R=()=>{const h=Promise.resolve(void 0);ue=()=>{h.then(N)}};function N(){for(var h;h=Y();){try{h.h.call(h.g)}catch(T){U(T)}var _=Q;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}G=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,_),c.removeEventListener("test",T,_)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function ie(h,_){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}E(ie,O),ie.prototype.init=function(h,_){const T=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(T=="mouseover"?_=h.fromElement:T=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),F=0;function me(h,_,T,D,W){this.listener=h,this.proxy=null,this.src=_,this.type=T,this.capture=!!D,this.ha=W,this.key=++F,this.da=this.fa=!1}function ye(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Me(h,_,T){for(const D in h)_.call(T,h[D],D,h)}function Ue(h,_){for(const T in h)_.call(void 0,h[T],T,h)}function L(h){const _={};for(const T in h)_[T]=h[T];return _}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(h,_){let T,D;for(let W=1;W<arguments.length;W++){D=arguments[W];for(T in D)h[T]=D[T];for(let re=0;re<se.length;re++)T=se[re],Object.prototype.hasOwnProperty.call(D,T)&&(h[T]=D[T])}}function oe(h){this.src=h,this.g={},this.h=0}oe.prototype.add=function(h,_,T,D,W){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const Re=be(h,_,D,W);return Re>-1?(_=h[Re],T||(_.fa=!1)):(_=new me(_,this.src,re,!!D,W),_.fa=T,h.push(_)),_};function _e(h,_){const T=_.type;if(T in h.g){var D=h.g[T],W=Array.prototype.indexOf.call(D,_,void 0),re;(re=W>=0)&&Array.prototype.splice.call(D,W,1),re&&(ye(_),h.g[T].length==0&&(delete h.g[T],h.h--))}}function be(h,_,T,D){for(let W=0;W<h.length;++W){const re=h[W];if(!re.da&&re.listener==_&&re.capture==!!T&&re.ha==D)return W}return-1}var De="closure_lm_"+(Math.random()*1e6|0),Be={};function $e(h,_,T,D,W){if(Array.isArray(_)){for(let re=0;re<_.length;re++)$e(h,_[re],T,D,W);return null}return T=lr(T),h&&h[Te]?h.J(_,T,d(D)?!!D.capture:!1,W):gt(h,_,T,!1,D,W)}function gt(h,_,T,D,W,re){if(!_)throw Error("Invalid event type");const Re=d(W)?!!W.capture:!!W;let nt=rn(h);if(nt||(h[De]=nt=new oe(h)),T=nt.add(_,T,D,Re,re),T.proxy)return T;if(D=jt(),T.proxy=D,D.src=h,D.listener=T,h.addEventListener)k||(W=Re),W===void 0&&(W=!1),h.addEventListener(_.toString(),D,W);else if(h.attachEvent)h.attachEvent(hn(_.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function jt(){function h(T){return _.call(h.src,h.listener,T)}const _=Br;return h}function dt(h,_,T,D,W){if(Array.isArray(_))for(var re=0;re<_.length;re++)dt(h,_[re],T,D,W);else D=d(D)?!!D.capture:!!D,T=lr(T),h&&h[Te]?(h=h.i,re=String(_).toString(),re in h.g&&(_=h.g[re],T=be(_,T,D,W),T>-1&&(ye(_[T]),Array.prototype.splice.call(_,T,1),_.length==0&&(delete h.g[re],h.h--)))):h&&(h=rn(h))&&(_=h.g[_.toString()],h=-1,_&&(h=be(_,T,D,W)),(T=h>-1?_[h]:null)&&en(T))}function en(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Te])_e(_.i,h);else{var T=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(T,D,h.capture):_.detachEvent?_.detachEvent(hn(T),D):_.addListener&&_.removeListener&&_.removeListener(D),(T=rn(_))?(_e(T,h),T.h==0&&(T.src=null,_[De]=null)):ye(h)}}}function hn(h){return h in Be?Be[h]:Be[h]="on"+h}function Br(h,_){if(h.da)h=!0;else{_=new ie(_,this);const T=h.listener,D=h.ha||h.src;h.fa&&en(h),h=T.call(D,_)}return h}function rn(h){return h=h[De],h instanceof oe?h:null}var Mn="__closure_events_fn_"+(Math.random()*1e9>>>0);function lr(h){return typeof h=="function"?h:(h[Mn]||(h[Mn]=function(_){return h.handleEvent(_)}),h[Mn])}function qt(){x.call(this),this.i=new oe(this),this.M=this,this.G=null}E(qt,x),qt.prototype[Te]=!0,qt.prototype.removeEventListener=function(h,_,T,D){dt(this,h,_,T,D)};function ht(h,_){var T,D=h.G;if(D)for(T=[];D;D=D.G)T.push(D);if(h=h.M,D=_.type||_,typeof _=="string")_=new O(_,h);else if(_ instanceof O)_.target=_.target||h;else{var W=_;_=new O(D,h),Ee(_,W)}W=!0;let re,Re;if(T)for(Re=T.length-1;Re>=0;Re--)re=_.g=T[Re],W=En(re,D,!0,_)&&W;if(re=_.g=h,W=En(re,D,!0,_)&&W,W=En(re,D,!1,_)&&W,T)for(Re=0;Re<T.length;Re++)re=_.g=T[Re],W=En(re,D,!1,_)&&W}qt.prototype.N=function(){if(qt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const T=h.g[_];for(let D=0;D<T.length;D++)ye(T[D]);delete h.g[_],h.h--}}this.G=null},qt.prototype.J=function(h,_,T,D){return this.i.add(String(h),_,!1,T,D)},qt.prototype.K=function(h,_,T,D){return this.i.add(String(h),_,!0,T,D)};function En(h,_,T,D){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let W=!0;for(let re=0;re<_.length;++re){const Re=_[re];if(Re&&!Re.da&&Re.capture==T){const nt=Re.listener,gn=Re.ha||Re.src;Re.fa&&_e(h.i,Re),W=nt.call(gn,D)!==!1&&W}}return W&&!D.defaultPrevented}function Hr(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function Pn(h){h.g=Hr(()=>{h.g=null,h.i&&(h.i=!1,Pn(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class xt extends x{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Pn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Un(h){x.call(this),this.h=h,this.g={}}E(Un,x);var ci=[];function q(h){Me(h.g,function(_,T){this.g.hasOwnProperty(T)&&en(_)},h),h.g={}}Un.prototype.N=function(){Un.Z.N.call(this),q(this)},Un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=c.JSON.stringify,Ce=c.JSON.parse,ve=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function xe(){}function Fe(){}var yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Oe(){O.call(this,"d")}E(Oe,O);function Xe(){O.call(this,"c")}E(Xe,O);var Se={},it=null;function pn(){return it=it||new qt}Se.Ia="serverreachability";function kn(h){O.call(this,Se.Ia,h)}E(kn,O);function an(h){const _=pn();ht(_,new kn(_))}Se.STAT_EVENT="statevent";function zn(h,_){O.call(this,Se.STAT_EVENT,h),this.stat=_}E(zn,O);function Ot(h){const _=pn();ht(_,new zn(_,h))}Se.Ja="timingevent";function Fr(h,_){O.call(this,Se.Ja,h),this.size=_}E(Fr,O);function Er(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function Tr(){this.g=!0}Tr.prototype.ua=function(){this.g=!1};function Co(h,_,T,D,W,re){h.info(function(){if(h.g)if(re){var Re="",nt=re.split("&");for(let Dt=0;Dt<nt.length;Dt++){var gn=nt[Dt].split("=");if(gn.length>1){const tn=gn[0];gn=gn[1];const $r=tn.split("_");Re=$r.length>=2&&$r[1]=="type"?Re+(tn+"="+gn+"&"):Re+(tn+"=redacted&")}}}else Re=null;else Re=re;return"XMLHTTP REQ ("+D+") [attempt "+W+"]: "+_+`
`+T+`
`+Re})}function Qi(h,_,T,D,W,re,Re){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+W+"]: "+_+`
`+T+`
`+re+" "+Re})}function ir(h,_,T,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Zl(h,T)+(D?" "+D:"")})}function Ci(h,_){h.info(function(){return"TIMEOUT: "+_})}Tr.prototype.info=function(){};function Zl(h,_){if(!h.g)return _;if(!_)return null;try{const re=JSON.parse(_);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var T=re[h];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var W=D[0];if(W!="noop"&&W!="stop"&&W!="close")for(let Re=1;Re<D.length;Re++)D[Re]=""}}}}return ce(re)}catch{return _}}var Xi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},V={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$;function ee(){}E(ee,xe),ee.prototype.g=function(){return new XMLHttpRequest},$=new ee;function ge(h){return encodeURIComponent(String(h))}function Ae(h){var _=1;h=h.split(":");const T=[];for(;_>0&&h.length;)T.push(h.shift()),_--;return h.length&&T.push(h.join(":")),T}function Pe(h,_,T,D){this.j=h,this.i=_,this.l=T,this.S=D||1,this.V=new Un(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}var we={},Ie={};function Ve(h,_,T){h.M=1,h.A=Ms(Ut(_)),h.u=T,h.R=!0,Ye(h,null)}function Ye(h,_){h.F=Date.now(),Lt(h),h.B=Ut(h.A);var T=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),Io(T.i,"t",D),h.C=0,T=h.j.L,h.h=new je,h.g=uh(h.j,T?_:null,!h.u),h.P>0&&(h.O=new xt(g(h.Y,h,h.g),h.P)),_=h.V,T=h.g,D=h.ba;var W="readystatechange";Array.isArray(W)||(W&&(ci[0]=W.toString()),W=ci);for(let re=0;re<W.length;re++){const Re=$e(T,W[re],D||_.handleEvent,!1,_.h||_);if(!Re)break;_.g[Re.key]=Re}_=h.J?L(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),an(),Co(h.i,h.v,h.B,h.l,h.S,h.u)}Pe.prototype.ba=function(h){h=h.target;const _=this.O;_&&di(h)==3?_.j():this.Y(h)},Pe.prototype.Y=function(h){try{if(h==this.g)e:{const nt=di(this.g),gn=this.g.ya(),Dt=this.g.ca();if(!(nt<3)&&(nt!=3||this.g&&(this.h.h||this.g.la()||Bn(this.g)))){this.K||nt!=4||gn==7||(gn==8||Dt<=0?an(3):an(2)),$t(this);var _=this.g.ca();this.X=_;var T=He(this);if(this.o=_==200,Qi(this.i,this.v,this.B,this.l,this.S,nt,_),this.o){if(this.U&&!this.L){t:{if(this.g){var D,W=this.g;if((D=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(D)){var re=D;break t}}re=null}if(h=re)ir(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vn(this,h);else{this.o=!1,this.m=3,Ot(12),Kt(this),at(this);break e}}if(this.R){h=!0;let tn;for(;!this.K&&this.C<T.length;)if(tn=ut(this,T),tn==Ie){nt==4&&(this.m=4,Ot(14),h=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==we){this.m=4,Ot(15),ir(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else ir(this.i,this.l,tn,null),Vn(this,tn);if(Je(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||T.length!=0||this.h.h||(this.m=1,Ot(16),h=!1),this.o=this.o&&h,!h)ir(this.i,this.l,T,"[Invalid Chunked Response]"),Kt(this),at(this);else if(T.length>0&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.aa&&!Re.P&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),lu(Re),Re.P=!0,Ot(11))}}else ir(this.i,this.l,T,null),Vn(this,T);nt==4&&Kt(this),this.o&&!this.K&&(nt==4?ah(this.j,this):(this.o=!1,Lt(this)))}else Ji(this.g),_==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Kt(this),at(this)}}}catch{}finally{}};function He(h){if(!Je(h))return h.g.la();const _=Bn(h.g);if(_==="")return"";let T="";const D=_.length,W=di(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Kt(h),at(h),"";h.h.i=new c.TextDecoder}for(let re=0;re<D;re++)h.h.h=!0,T+=h.h.i.decode(_[re],{stream:!(W&&re==D-1)});return _.length=0,h.h.g+=T,h.C=0,h.h.g}function Je(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ut(h,_){var T=h.C,D=_.indexOf(`
`,T);return D==-1?Ie:(T=Number(_.substring(T,D)),isNaN(T)?we:(D+=1,D+T>_.length?Ie:(_=_.slice(D,D+T),h.C=D+T,_)))}Pe.prototype.cancel=function(){this.K=!0,Kt(this)};function Lt(h){h.T=Date.now()+h.H,Xt(h,h.H)}function Xt(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Er(g(h.aa,h),_)}function $t(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Pe.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ci(this.i,this.B),this.M!=2&&(an(),Ot(17)),Kt(this),this.m=2,at(this)):Xt(this,this.T-h)};function at(h){h.j.I==0||h.K||ah(h.j,h)}function Kt(h){$t(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,q(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Vn(h,_){try{var T=h.j;if(T.I!=0&&(T.g==h||Wn(T.h,h))){if(!h.L&&Wn(T.h,h)&&T.I==3){try{var D=T.Ba.g.parse(_)}catch{D=null}if(Array.isArray(D)&&D.length==3){var W=D;if(W[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Mo(T),La(T);else break e;zs(T),Ot(18)}}else T.xa=W[1],0<T.xa-T.K&&W[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Er(g(T.Va,T),6e3));cr(T.h)<=1&&T.ta&&(T.ta=void 0)}else Pi(T,11)}else if((h.L||T.g==h)&&Mo(T),!I(_))for(W=T.Ba.g.parse(_),_=0;_<W.length;_++){let Dt=W[_];const tn=Dt[0];if(!(tn<=T.K))if(T.K=tn,Dt=Dt[1],T.I==2)if(Dt[0]=="c"){T.M=Dt[1],T.ba=Dt[2];const $r=Dt[3];$r!=null&&(T.ka=$r,T.j.info("VER="+T.ka));const ki=Dt[4];ki!=null&&(T.za=ki,T.j.info("SVER="+T.za));const mi=Dt[5];mi!=null&&typeof mi=="number"&&mi>0&&(D=1.5*mi,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const pi=h.g;if(pi){const Bs=pi.g?pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var re=D.h;re.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(br(re,re.h),re.h=null))}if(D.G){const Po=pi.g?pi.g.getResponseHeader("X-HTTP-Session-Id"):null;Po&&(D.wa=Po,It(D.J,D.G,Po))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var Re=h;if(D.na=lh(D,D.L?D.ba:null,D.W),Re.L){Ri(D.h,Re);var nt=Re,gn=D.O;gn&&(nt.H=gn),nt.D&&($t(nt),Lt(nt)),D.g=Re}else rh(D);T.i.length>0&&Mi(T)}else Dt[0]!="stop"&&Dt[0]!="close"||Pi(T,7);else T.I==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Pi(T,7):su(T):Dt[0]!="noop"&&T.l&&T.l.qa(Dt),T.A=0)}}an(4)}catch{}}var Yt=class{constructor(h,_){this.g=h,this.map=_}};function ur(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function cr(h){return h.h?1:h.g?h.g.size:0}function Wn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function br(h,_){h.g?h.g.add(_):h.h=_}function Ri(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}ur.prototype.cancel=function(){if(this.i=Ii(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ii(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const T of h.g.values())_=_.concat(T.G);return _}return w(h.i)}var ft=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sn(h,_){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const D=h[T].indexOf("=");let W,re=null;D>=0?(W=h[T].substring(0,D),re=h[T].substring(D+1)):W=h[T],_(W,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Tn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof Tn?(this.l=h.l,st(this,h.j),this.o=h.o,this.g=h.g,Sr(this,h.u),this.h=h.h,xa(this,th(h.i)),this.m=h.m):h&&(_=String(h).match(ft))?(this.l=!1,st(this,_[1]||"",!0),this.o=Di(_[2]||""),this.g=Di(_[3]||"",!0),Sr(this,_[4]),this.h=Di(_[5]||"",!0),xa(this,_[6]||"",!0),this.m=Di(_[7]||"")):(this.l=!1,this.i=new Ma(null,this.l))}Tn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Ps(_,Ro,!0),":");var T=this.g;return(T||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Ps(_,Ro,!0),"@"),h.push(ge(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Ps(T,T.charAt(0)=="/"?eu:Jc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Ps(T,Zc)),h.join("")},Tn.prototype.resolve=function(h){const _=Ut(this);let T=!!h.j;T?st(_,h.j):T=!!h.o,T?_.o=h.o:T=!!h.g,T?_.g=h.g:T=h.u!=null;var D=h.h;if(T)Sr(_,h.u);else if(T=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var W=_.h.lastIndexOf("/");W!=-1&&(D=_.h.slice(0,W+1)+D)}if(W=D,W==".."||W==".")D="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){D=W.lastIndexOf("/",0)==0,W=W.split("/");const re=[];for(let Re=0;Re<W.length;){const nt=W[Re++];nt=="."?D&&Re==W.length&&re.push(""):nt==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),D&&Re==W.length&&re.push("")):(re.push(nt),D=!0)}D=re.join("/")}else D=W}return T?_.h=D:T=h.i.toString()!=="",T?xa(_,th(h.i)):T=!!h.m,T&&(_.m=h.m),_};function Ut(h){return new Tn(h)}function st(h,_,T){h.j=T?Di(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Sr(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function xa(h,_,T){_ instanceof Ma?(h.i=_,Do(h.i,h.l)):(T||(_=Ps(_,Oa)),h.i=new Ma(_,h.l))}function It(h,_,T){h.i.set(_,T)}function Ms(h){return It(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Di(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ps(h,_,T){return typeof h=="string"?(h=encodeURI(h).replace(_,hr),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function hr(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ro=/[#\/\?@]/g,Jc=/[#\?:]/g,eu=/[#\?]/g,Oa=/[#\?@]/g,Zc=/#/g;function Ma(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function fr(h){h.g||(h.g=new Map,h.h=0,h.i&&sn(h.i,function(_,T){h.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}n=Ma.prototype,n.add=function(h,_){fr(this),this.i=null,h=Pa(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(_),this.h+=1,this};function eh(h,_){fr(h),_=Pa(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function tu(h,_){return fr(h),_=Pa(h,_),h.g.has(_)}n.forEach=function(h,_){fr(this),this.g.forEach(function(T,D){T.forEach(function(W){h.call(_,W,D,this)},this)},this)};function nu(h,_){fr(h);let T=[];if(typeof _=="string")tu(h,_)&&(T=T.concat(h.g.get(Pa(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)T=T.concat(h[_]);return T}n.set=function(h,_){return fr(this),this.i=null,h=Pa(this,h),tu(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=nu(this,h),h.length>0?String(h[0]):_):_};function Io(h,_,T){eh(h,_),T.length>0&&(h.i=null,h.g.set(Pa(h,_),w(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let D=0;D<_.length;D++){var T=_[D];const W=ge(T);T=nu(this,T);for(let re=0;re<T.length;re++){let Re=W;T[re]!==""&&(Re+="="+ge(T[re])),h.push(Re)}}return this.i=h.join("&")};function th(h){const _=new Ma;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Pa(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Do(h,_){_&&!h.j&&(fr(h),h.i=null,h.g.forEach(function(T,D){const W=D.toLowerCase();D!=W&&(eh(this,D),Io(this,W,T))},h)),h.j=_}function hi(h,_){const T=new Tr;if(c.Image){const D=new Image;D.onload=y(qr,T,"TestLoadImage: loaded",!0,_,D),D.onerror=y(qr,T,"TestLoadImage: error",!1,_,D),D.onabort=y(qr,T,"TestLoadImage: abort",!1,_,D),D.ontimeout=y(qr,T,"TestLoadImage: timeout",!1,_,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}function ru(h,_){const T=new Tr,D=new AbortController,W=setTimeout(()=>{D.abort(),qr(T,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:D.signal}).then(re=>{clearTimeout(W),re.ok?qr(T,"TestPingServer: ok",!0,_):qr(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(W),qr(T,"TestPingServer: error",!1,_)})}function qr(h,_,T,D,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),D(T)}catch{}}function ka(){this.g=new ve}function Ni(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ni,xe),Ni.prototype.g=function(){return new ks(this.i,this.h)};function ks(h,_){qt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ks,qt),n=ks.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,fi(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Va(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;No(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function No(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Va(this):fi(this),this.readyState==3&&No(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Va(this))},n.Na=function(h){this.g&&(this.response=h,Va(this))},n.ga=function(){this.g&&Va(this)};function Va(h){h.readyState=4,h.l=null,h.j=null,h.B=null,fi(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=_.next();return h.join(`\r
`)};function fi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Gr(h){let _="";return Me(h,function(T,D){_+=D,_+=":",_+=T,_+=`\r
`}),_}function Vs(h,_,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=Gr(T),typeof h=="string"?T!=null&&ge(T):It(h,_,T))}function zt(h){qt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(zt,qt);var xi=/^https?$/i,iu=["POST","PUT"];n=zt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(re){js(this,re);return}if(h=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var W in D)T.set(W,D[W]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const re of D.keys())T.set(re,D.get(re));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),W=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(iu,_,void 0)>=0)||D||W||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Re]of T)this.g.setRequestHeader(re,Re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){js(this,re)}};function js(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,au(h),Wi(h)}function au(h){h.A||(h.A=!0,ht(h,"complete"),ht(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ht(this,"complete"),ht(this,"abort"),Wi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wi(this,!0)),zt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ls(this):this.Xa())},n.Xa=function(){Ls(this)};function Ls(h){if(h.h&&typeof l<"u"){if(h.v&&di(h)==4)setTimeout(h.Ca.bind(h),0);else if(ht(h,"readystatechange"),di(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var D;if(D=re===0){let Re=String(h.D).match(ft)[1]||null;!Re&&c.self&&c.self.location&&(Re=c.self.location.protocol.slice(0,-1)),D=!xi.test(Re?Re.toLowerCase():"")}T=D}if(T)ht(h,"complete"),ht(h,"success");else{h.o=6;try{var W=di(h)>2?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.ca()+"]",au(h)}}finally{Wi(h)}}}}function Wi(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,_||ht(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function di(h){return h.g?h.g.readyState:0}n.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Ce(_)}};function Bn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ji(h){const _={};h=(h.g&&di(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(I(h[D]))continue;var T=Ae(h[D]);const W=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=_[W]||[];_[W]=re,re.push(T)}Ue(_,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(h,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||_}function ja(h){this.za=0,this.i=[],this.j=new Tr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oi("baseRetryDelayMs",5e3,h),this.Za=Oi("retryDelaySeedMs",1e4,h),this.Ta=Oi("forwardChannelMaxRetries",2,h),this.va=Oi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ur(h&&h.concurrentRequestLimit),this.Ba=new ka,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ja.prototype,n.ka=8,n.I=1,n.connect=function(h,_,T,D){Ot(0),this.W=h,this.H=_||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=lh(this,null,this.W),Mi(this)};function su(h){if(xo(h),h.I==3){var _=h.V++,T=Ut(h.J);if(It(T,"SID",h.M),It(T,"RID",_),It(T,"TYPE","terminate"),Us(h,T),_=new Pe(h,h.j,_),_.M=2,_.A=Ms(Ut(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=_.A,T=!0),T||(_.g=uh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Lt(_)}oh(h)}function La(h){h.g&&(lu(h),h.g.cancel(),h.g=null)}function xo(h){La(h),h.v&&(c.clearTimeout(h.v),h.v=null),Mo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Mi(h){if(!Xn(h.h)&&!h.m){h.m=!0;var _=h.Ea;ue||R(),G||(ue(),G=!0),A.add(_,h),h.D=0}}function Oo(h,_){return cr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Er(g(h.Ea,h,_),sh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const W=new Pe(this,this.j,h);let re=this.o;if(this.U&&(re?(re=L(re),Ee(re,this.U)):re=this.U),this.u!==null||this.R||(W.J=re,re=null),this.S)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(_+=D,_>4096){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=nh(this,W,_),T=Ut(this.J),It(T,"RID",h),It(T,"CVER",22),this.G&&It(T,"X-HTTP-Session-Id",this.G),Us(this,T),re&&(this.R?_="headers="+ge(Gr(re))+"&"+_:this.u&&Vs(T,this.u,re)),br(this.h,W),this.Ra&&It(T,"TYPE","init"),this.S?(It(T,"$req",_),It(T,"SID","null"),W.U=!0,Ve(W,T,null)):Ve(W,T,_),this.I=2}}else this.I==3&&(h?ou(this,h):this.i.length==0||Xn(this.h)||ou(this))};function ou(h,_){var T;_?T=_.l:T=h.V++;const D=Ut(h.J);It(D,"SID",h.M),It(D,"RID",T),It(D,"AID",h.K),Us(h,D),h.u&&h.o&&Vs(D,h.u,h.o),T=new Pe(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),_&&(h.i=_.G.concat(h.i)),_=nh(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),br(h.h,T),Ve(T,D,_)}function Us(h,_){h.H&&Me(h.H,function(T,D){It(_,D,T)}),h.l&&Me({},function(T,D){It(_,D,T)})}function nh(h,_,T){T=Math.min(h.i.length,T);const D=h.l?g(h.l.Ka,h.l,h):null;e:{var W=h.i;let nt=-1;for(;;){const gn=["count="+T];nt==-1?T>0?(nt=W[0].g,gn.push("ofs="+nt)):nt=0:gn.push("ofs="+nt);let Dt=!0;for(let tn=0;tn<T;tn++){var re=W[tn].g;const $r=W[tn].map;if(re-=nt,re<0)nt=Math.max(0,W[tn].g-100),Dt=!1;else try{re="req"+re+"_"||"";try{var Re=$r instanceof Map?$r:Object.entries($r);for(const[ki,mi]of Re){let pi=mi;d(mi)&&(pi=ce(mi)),gn.push(re+ki+"="+encodeURIComponent(pi))}}catch(ki){throw gn.push(re+"type="+encodeURIComponent("_badmap")),ki}}catch{D&&D($r)}}if(Dt){Re=gn.join("&");break e}}Re=void 0}return h=h.i.splice(0,T),_.G=h,Re}function rh(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;ue||R(),G||(ue(),G=!0),A.add(_,h),h.A=0}}function zs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Er(g(h.Da,h),sh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ih(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Er(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),La(this),ih(this))};function lu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ih(h){h.g=new Pe(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Ut(h.na);It(_,"RID","rpc"),It(_,"SID",h.M),It(_,"AID",h.K),It(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&It(_,"TO",h.ia),It(_,"TYPE","xmlhttp"),Us(h,_),h.u&&h.o&&Vs(_,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=Ms(Ut(_)),T.u=null,T.R=!0,Ye(T,h)}n.Va=function(){this.C!=null&&(this.C=null,La(this),zs(this),Ot(19))};function Mo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function ah(h,_){var T=null;if(h.g==_){Mo(h),lu(h),h.g=null;var D=2}else if(Wn(h.h,_))T=_.G,Ri(h.h,_),D=1;else return;if(h.I!=0){if(_.o)if(D==1){T=_.u?_.u.length:0,_=Date.now()-_.F;var W=h.D;D=pn(),ht(D,new Fr(D,T)),Mi(h)}else rh(h);else if(W=_.m,W==3||W==0&&_.X>0||!(D==1&&Oo(h,_)||D==2&&zs(h)))switch(T&&T.length>0&&(_=h.h,_.i=_.i.concat(T)),W){case 1:Pi(h,5);break;case 4:Pi(h,10);break;case 3:Pi(h,6);break;default:Pi(h,2)}}}function sh(h,_){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*_}function Pi(h,_){if(h.j.info("Error code "+_),_==2){var T=g(h.bb,h),D=h.Ua;const W=!D;D=new Tn(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||st(D,"https"),Ms(D),W?hi(D.toString(),T):ru(D.toString(),T)}else Ot(2);h.I=0,h.l&&h.l.pa(_),oh(h),xo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function oh(h){if(h.I=0,h.ja=[],h.l){const _=Ii(h.h);(_.length!=0||h.i.length!=0)&&(M(h.ja,_),M(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function lh(h,_,T){var D=T instanceof Tn?Ut(T):new Tn(T);if(D.g!="")_&&(D.g=_+"."+D.g),Sr(D,D.u);else{var W=c.location;D=W.protocol,_=_?_+"."+W.hostname:W.hostname,W=+W.port;const re=new Tn(null);D&&st(re,D),_&&(re.g=_),W&&Sr(re,W),T&&(re.h=T),D=re}return T=h.G,_=h.wa,T&&_&&It(D,T,_),It(D,"VER",h.ka),Us(h,D),D}function uh(h,_,T){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new zt(new Ni({ab:T})):new zt(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ch(){}n=ch.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ua(){}Ua.prototype.g=function(h,_){return new ar(h,_)};function ar(h,_){qt.call(this),this.g=new ja(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!I(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!I(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Zi(this)}E(ar,qt),ar.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ar.prototype.close=function(){su(this.g)},ar.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=ce(h),h=T);_.i.push(new Yt(_.Ya++,h)),_.I==3&&Mi(_)},ar.prototype.N=function(){this.g.l=null,delete this.j,su(this.g),delete this.g,ar.Z.N.call(this)};function hh(h){Oe.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const T in _){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}E(hh,Oe);function fh(){Xe.call(this),this.status=1}E(fh,Xe);function Zi(h){this.g=h}E(Zi,ch),Zi.prototype.ra=function(){ht(this.g,"a")},Zi.prototype.qa=function(h){ht(this.g,new hh(h))},Zi.prototype.pa=function(h){ht(this.g,new fh)},Zi.prototype.oa=function(){ht(this.g,"b")},Ua.prototype.createWebChannel=Ua.prototype.g,ar.prototype.send=ar.prototype.o,ar.prototype.open=ar.prototype.m,ar.prototype.close=ar.prototype.close,WA=function(){return new Ua},XA=function(){return pn()},QA=Se,ey={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xi.NO_ERROR=0,Xi.TIMEOUT=8,Xi.HTTP_ERROR=6,Pf=Xi,V.COMPLETE="complete",YA=V,Fe.EventType=yt,yt.OPEN="a",yt.CLOSE="b",yt.ERROR="c",yt.MESSAGE="d",qt.prototype.listen=qt.prototype.J,Zu=Fe,zt.prototype.listenOnce=zt.prototype.K,zt.prototype.getLastError=zt.prototype.Ha,zt.prototype.getLastErrorCode=zt.prototype.ya,zt.prototype.getStatus=zt.prototype.ca,zt.prototype.getResponseJson=zt.prototype.La,zt.prototype.getResponseText=zt.prototype.la,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Fa,KA=zt}).apply(typeof Ef<"u"?Ef:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tr.UNAUTHENTICATED=new tr(null),tr.GOOGLE_CREDENTIALS=new tr("google-credentials-uid"),tr.FIRST_PARTY=new tr("first-party-uid"),tr.MOCK_USER=new tr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l="12.8.0";function sO(n){$l=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new Uy("@firebase/firestore");function pl(){return go.logLevel}function ke(n,...e){if(go.logLevel<=Et.DEBUG){const t=e.map(Hy);go.debug(`Firestore (${$l}): ${n}`,...t)}}function wa(n,...e){if(go.logLevel<=Et.ERROR){const t=e.map(Hy);go.error(`Firestore (${$l}): ${n}`,...t)}}function Ol(n,...e){if(go.logLevel<=Et.WARN){const t=e.map(Hy);go.warn(`Firestore (${$l}): ${n}`,...t)}}function Hy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,JA(n,a,t)}function JA(n,e,t){let a=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw wa(a),new Error(a)}function Pt(n,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,n||JA(e,s,a)}function tt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Na{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tr.UNAUTHENTICATED)))}shutdown(){}}class lO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class uO{constructor(e){this.t=e,this.currentUser=tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pt(this.o===void 0,42304);let a=this.i;const s=m=>this.i!==a?(a=this.i,t(m)):Promise.resolve();let l=new Ta;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ta,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},d=m=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ta)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Pt(typeof a.accessToken=="string",31837,{l:a}),new ZA(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string",2055,{h:e}),new tr(e)}}class cO{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=tr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class hO{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new cO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class u0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pt(this.o===void 0,3512);const a=l=>{l.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const s=l=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new u0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Pt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new u0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=dO(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function Tt(n,e){return n<e?-1:n>e?1:0}function ty(n,e){const t=Math.min(n.length,e.length);for(let a=0;a<t;a++){const s=n.charAt(a),l=e.charAt(a);if(s!==l)return Ng(s)===Ng(l)?Tt(s,l):Ng(s)?1:-1}return Tt(n.length,e.length)}const mO=55296,pO=57343;function Ng(n){const e=n.charCodeAt(0);return e>=mO&&e<=pO}function Ml(n,e,t){return n.length===e.length&&n.every(((a,s)=>t(a,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="__name__";class zi{constructor(e,t,a){t===void 0?t=0:t>e.length&&Qe(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Qe(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=zi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Tt(e.length,t.length)}static compareSegments(e,t){const a=zi.isNumericId(e),s=zi.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?zi.extractNumericId(e).compare(zi.extractNumericId(t)):ty(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ts.fromString(e.substring(4,e.length-2))}}class Qt extends zi{construct(e,t,a){return new Qt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((s=>s.length>0)))}return new Qt(t)}static emptyPath(){return new Qt([])}}const gO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yn extends zi{construct(e,t,a){return new Yn(e,t,a)}static isValidIdentifier(e){return gO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===c0}static keyField(){return new Yn([c0])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Ne(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ne(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=m,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(a+=d,s++):(l(),s++)}if(l(),c)throw new Ne(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yn(t)}static emptyPath(){return new Yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Qt.fromString(e))}static fromName(e){return new Ge(Qt.fromString(e).popFirst(5))}static empty(){return new Ge(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(n,e,t){if(!t)throw new Ne(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yO(n,e,t,a){if(e===!0&&a===!0)throw new Ne(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function h0(n){if(!Ge.isDocumentKey(n))throw new Ne(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function f0(n){if(Ge.isDocumentKey(n))throw new Ne(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ud(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Qe(12329,{type:typeof n})}function Vr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ud(n);throw new Ne(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(n,e){const t={typeString:n};return e&&(t.value=e),t}function Vc(n,e){if(!tw(n))throw new Ne(fe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const s=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){t=`JSON missing required field: '${a}'`;break}const c=n[a];if(s&&typeof c!==s){t=`JSON field '${a}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new Ne(fe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=-62135596800,m0=1e6;class Zt{static now(){return Zt.fromMillis(Date.now())}static fromDate(e){return Zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*m0);return new Zt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<d0)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/m0}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vc(e,Zt._jsonSchema))return new Zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-d0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Zt._jsonSchemaVersion="firestore/timestamp/1.0",Zt._jsonSchema={type:In("string",Zt._jsonSchemaVersion),seconds:In("number"),nanoseconds:In("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new Zt(0,0))}static max(){return new Ze(new Zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=-1;function _O(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,s=Ze.fromTimestamp(a===1e9?new Zt(t+1,0):new Zt(t,a));return new As(s,Ge.empty(),e)}function vO(n){return new As(n.readTime,n.key,_c)}class As{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new As(Ze.min(),Ge.empty(),_c)}static max(){return new As(Ze.max(),Ge.empty(),_c)}}function EO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ge.comparator(n.documentKey,e.documentKey),t!==0?t:Tt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==TO)throw n;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe(((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.reject(t)}static resolve(e){return new pe(((t,a)=>{t(e)}))}static reject(e){return new pe(((t,a)=>{a(e)}))}static waitFor(e){return new pe(((t,a)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(m=>a(m)))})),c=!0,l===s&&t()}))}static or(e){let t=pe.resolve(!1);for(const a of e)t=t.next((s=>s?pe.resolve(s):a()));return t}static forEach(e,t){const a=[];return e.forEach(((s,l)=>{a.push(t.call(this,s,l))})),this.waitFor(a)}static mapArray(e,t){return new pe(((a,s)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((y=>{c[g]=y,++d,d===l&&a(c)}),(y=>s(y)))}}))}static doWhile(e,t){return new pe(((a,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):a()};l()}))}}function SO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=-1;function Bd(n){return n==null}function id(n){return n===0&&1/n==-1/0}function AO(n){return typeof n=="number"&&Number.isInteger(n)&&!id(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="";function wO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=p0(e)),e=CO(n.get(t),e);return p0(e)}function CO(n,e){let t=e;const a=n.length;for(let s=0;s<a;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case nw:t+="";break;default:t+=l}}return t}function p0(n){return n+nw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t){this.comparator=e,this.root=t||Kn.EMPTY}insert(e,t){return new cn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kn.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tf(this.root,e,this.comparator,!0)}}class Tf{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kn{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??Kn.RED,this.left=s??Kn.EMPTY,this.right=l??Kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new Kn(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Kn.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Qe(27949);return e+(this.isRed()?0:1)}}Kn.EMPTY=null,Kn.RED=!0,Kn.BLACK=!1;Kn.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe(57766)}get value(){throw Qe(16141)}get color(){throw Qe(16727)}get left(){throw Qe(29726)}get right(){throw Qe(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new Kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new y0(this.data.getIterator())}getIteratorFrom(e){return new y0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class y0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.fields=e,e.sort(Yn.comparator)}static empty(){return new Mr([])}unionWith(e){let t=new Nn(Yn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Mr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ml(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new iw("Invalid base64 string: "+l):l}})(e);return new Qn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new Qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qn.EMPTY_BYTE_STRING=new Qn("");const RO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(n){if(Pt(!!n,39018),typeof n=="string"){let e=0;const t=RO.exec(n);if(Pt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:vn(n.seconds),nanos:vn(n.nanos)}}function vn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cs(n){return typeof n=="string"?Qn.fromBase64String(n):Qn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="server_timestamp",sw="__type__",ow="__previous_value__",lw="__local_write_time__";function Gy(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[sw])==null?void 0:a.stringValue)===aw}function Hd(n){const e=n.mapValue.fields[ow];return Gy(e)?Hd(e):e}function vc(n){const e=ws(n.mapValue.fields[lw].timestampValue);return new Zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,t,a,s,l,c,d,m,g,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=y,this.apiKey=E}}const ad="(default)";class Ec{constructor(e,t){this.projectId=e,this.database=t||ad}static empty(){return new Ec("","")}get isDefaultDatabase(){return this.database===ad}isEqual(e){return e instanceof Ec&&e.projectId===this.projectId&&e.database===this.database}}function DO(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Ne(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ec(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="__type__",NO="__max__",bf={mapValue:{}},cw="__vector__",sd="value";function Rs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gy(n)?4:OO(n)?9007199254740991:xO(n)?10:11:Qe(28295,{value:n})}function Ki(n,e){if(n===e)return!0;const t=Rs(n);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vc(n).isEqual(vc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=ws(s.timestampValue),d=ws(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return Cs(s.bytesValue).isEqual(Cs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return vn(s.geoPointValue.latitude)===vn(l.geoPointValue.latitude)&&vn(s.geoPointValue.longitude)===vn(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return vn(s.integerValue)===vn(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=vn(s.doubleValue),d=vn(l.doubleValue);return c===d?id(c)===id(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Ml(n.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if(g0(c)!==g0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Ki(c[m],d[m])))return!1;return!0})(n,e);default:return Qe(52216,{left:n})}}function Tc(n,e){return(n.values||[]).find((t=>Ki(t,e)))!==void 0}function Pl(n,e){if(n===e)return 0;const t=Rs(n),a=Rs(e);if(t!==a)return Tt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=vn(l.integerValue||l.doubleValue),m=vn(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return _0(n.timestampValue,e.timestampValue);case 4:return _0(vc(n),vc(e));case 5:return ty(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=Cs(l),m=Cs(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const y=Tt(d[g],m[g]);if(y!==0)return y}return Tt(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Tt(vn(l.latitude),vn(c.latitude));return d!==0?d:Tt(vn(l.longitude),vn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return v0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,w,M,B;const d=l.fields||{},m=c.fields||{},g=(S=d[sd])==null?void 0:S.arrayValue,y=(w=m[sd])==null?void 0:w.arrayValue,E=Tt(((M=g==null?void 0:g.values)==null?void 0:M.length)||0,((B=y==null?void 0:y.values)==null?void 0:B.length)||0);return E!==0?E:v0(g,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===bf.mapValue&&c===bf.mapValue)return 0;if(l===bf.mapValue)return 1;if(c===bf.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let E=0;E<m.length&&E<y.length;++E){const S=ty(m[E],y[E]);if(S!==0)return S;const w=Pl(d[m[E]],g[y[E]]);if(w!==0)return w}return Tt(m.length,y.length)})(n.mapValue,e.mapValue);default:throw Qe(23264,{he:t})}}function _0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Tt(n,e);const t=ws(n),a=ws(e),s=Tt(t.seconds,a.seconds);return s!==0?s:Tt(t.nanos,a.nanos)}function v0(n,e){const t=n.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=Pl(t[s],a[s]);if(l)return l}return Tt(t.length,a.length)}function kl(n){return ny(n)}function ny(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const a=ws(t);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Cs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ge.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=ny(l);return a+"]"})(n.arrayValue):"mapValue"in n?(function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of a)l?l=!1:s+=",",s+=`${c}:${ny(t.fields[c])}`;return s+"}"})(n.mapValue):Qe(61005,{value:n})}function kf(n){switch(Rs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hd(n);return e?16+kf(e):16;case 5:return 2*n.stringValue.length;case 6:return Cs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((s,l)=>s+kf(l)),0)})(n.arrayValue);case 10:case 11:return(function(a){let s=0;return xs(a.fields,((l,c)=>{s+=l.length+kf(c)})),s})(n.mapValue);default:throw Qe(13486,{value:n})}}function E0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ry(n){return!!n&&"integerValue"in n}function $y(n){return!!n&&"arrayValue"in n}function T0(n){return!!n&&"nullValue"in n}function b0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vf(n){return!!n&&"mapValue"in n}function xO(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[uw])==null?void 0:a.stringValue)===cw}function sc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return xs(n.mapValue.fields,((t,a)=>e.mapValue.fields[t]=sc(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sc(n.arrayValue.values[t]);return e}return{...n}}function OO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===NO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.value=e}static empty(){return new vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Vf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(t)}setAll(e){let t=Yn.emptyPath(),a={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,a,s),a={},s=[],t=d.popLast()}c?a[d.lastSegment()]=sc(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());Vf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];Vf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){xs(t,((s,l)=>e[s]=l));for(const s of a)delete e[s]}clone(){return new vr(sc(this.value))}}function hw(n){const e=[];return xs(n.fields,((t,a)=>{const s=new Yn([t]);if(Vf(a)){const l=hw(a.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new Mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t,a,s,l,c,d){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new nr(e,0,Ze.min(),Ze.min(),Ze.min(),vr.empty(),0)}static newFoundDocument(e,t,a,s){return new nr(e,1,t,Ze.min(),a,s,0)}static newNoDocument(e,t){return new nr(e,2,t,Ze.min(),Ze.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new nr(e,3,t,Ze.min(),Ze.min(),vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.position=e,this.inclusive=t}}function S0(n,e,t){let a=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?a=Ge.comparator(Ge.fromName(c.referenceValue),t.key):a=Pl(c,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function A0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ki(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t="asc"){this.field=e,this.dir=t}}function MO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{}class Rn extends fw{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new kO(e,t,a):t==="array-contains"?new LO(e,a):t==="in"?new UO(e,a):t==="not-in"?new zO(e,a):t==="array-contains-any"?new BO(e,a):new Rn(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new VO(e,a):new jO(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Pl(t,this.value)):t!==null&&Rs(this.value)===Rs(t)&&this.matchesComparison(Pl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends fw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ai(e,t)}matches(e){return dw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dw(n){return n.op==="and"}function mw(n){return PO(n)&&dw(n)}function PO(n){for(const e of n.filters)if(e instanceof Ai)return!1;return!0}function iy(n){if(n instanceof Rn)return n.field.canonicalString()+n.op.toString()+kl(n.value);if(mw(n))return n.filters.map((e=>iy(e))).join(",");{const e=n.filters.map((t=>iy(t))).join(",");return`${n.op}(${e})`}}function pw(n,e){return n instanceof Rn?(function(a,s){return s instanceof Rn&&a.op===s.op&&a.field.isEqual(s.field)&&Ki(a.value,s.value)})(n,e):n instanceof Ai?(function(a,s){return s instanceof Ai&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce(((l,c,d)=>l&&pw(c,s.filters[d])),!0):!1})(n,e):void Qe(19439)}function gw(n){return n instanceof Rn?(function(t){return`${t.field.canonicalString()} ${t.op} ${kl(t.value)}`})(n):n instanceof Ai?(function(t){return t.op.toString()+" {"+t.getFilters().map(gw).join(" ,")+"}"})(n):"Filter"}class kO extends Rn{constructor(e,t,a){super(e,t,a),this.key=Ge.fromName(a.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class VO extends Rn{constructor(e,t){super(e,"in",t),this.keys=yw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jO extends Rn{constructor(e,t){super(e,"not-in",t),this.keys=yw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>Ge.fromName(a.referenceValue)))}class LO extends Rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $y(t)&&Tc(t.arrayValue,this.value)}}class UO extends Rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tc(this.value.arrayValue,t)}}class zO extends Rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tc(this.value.arrayValue,t)}}class BO extends Rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$y(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>Tc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,t=null,a=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function w0(n,e=null,t=[],a=[],s=null,l=null,c=null){return new HO(n,e,t,a,s,l,c)}function Ky(n){const e=tt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>iy(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),Bd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>kl(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>kl(a))).join(",")),e.Te=t}return e.Te}function Yy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!MO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!A0(n.startAt,e.startAt)&&A0(n.endAt,e.endAt)}function ay(n){return Ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t=null,a=[],s=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function FO(n,e,t,a,s,l,c,d){return new jc(n,e,t,a,s,l,c,d)}function Fd(n){return new jc(n)}function C0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qO(n){return Ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function _w(n){return n.collectionGroup!==null}function oc(n){const e=tt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Nn(Yn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ld(l,a))})),t.has(Yn.keyField().canonicalString())||e.Ie.push(new ld(Yn.keyField(),a))}return e.Ie}function Hi(n){const e=tt(n);return e.Ee||(e.Ee=GO(e,oc(n))),e.Ee}function GO(n,e){if(n.limitType==="F")return w0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new ld(s.field,l)}));const t=n.endAt?new od(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new od(n.startAt.position,n.startAt.inclusive):null;return w0(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function sy(n,e){const t=n.filters.concat([e]);return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function oy(n,e,t){return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qd(n,e){return Yy(Hi(n),Hi(e))&&n.limitType===e.limitType}function vw(n){return`${Ky(Hi(n))}|lt:${n.limitType}`}function gl(n){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((s=>gw(s))).join(", ")}]`),Bd(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>kl(s))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>kl(s))).join(",")),`Target(${a})`})(Hi(n))}; limitType=${n.limitType})`}function Gd(n,e){return e.isFoundDocument()&&(function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):Ge.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(n,e)&&(function(a,s){for(const l of oc(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(a,s){return!(a.startAt&&!(function(c,d,m){const g=S0(c,d,m);return c.inclusive?g<=0:g<0})(a.startAt,oc(a),s)||a.endAt&&!(function(c,d,m){const g=S0(c,d,m);return c.inclusive?g>=0:g>0})(a.endAt,oc(a),s))})(n,e)}function $O(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ew(n){return(e,t)=>{let a=!1;for(const s of oc(n)){const l=KO(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function KO(n,e,t){const a=n.field.isKeyField()?Ge.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Pl(m,g):Qe(42886)})(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return Qe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,((t,a)=>{for(const[s,l]of a)e(s,l)}))}isEmpty(){return rw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=new cn(Ge.comparator);function Ca(){return YO}const Tw=new cn(Ge.comparator);function ec(...n){let e=Tw;for(const t of n)e=e.insert(t.key,t);return e}function bw(n){let e=Tw;return n.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function oo(){return lc()}function Sw(){return lc()}function lc(){return new bo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const QO=new cn(Ge.comparator),XO=new Nn(Ge.comparator);function bt(...n){let e=XO;for(const t of n)e=e.add(t);return e}const WO=new Nn(Tt);function JO(){return WO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:id(e)?"-0":e}}function Aw(n){return{integerValue:""+n}}function ZO(n,e){return AO(e)?Aw(e):Qy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(){this._=void 0}}function eM(n,e,t){return n instanceof ud?(function(s,l){const c={fields:{[sw]:{stringValue:aw},[lw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Gy(l)&&(l=Hd(l)),l&&(c.fields[ow]=l),{mapValue:c}})(t,e):n instanceof bc?Cw(n,e):n instanceof Sc?Rw(n,e):(function(s,l){const c=ww(s,l),d=R0(c)+R0(s.Ae);return ry(c)&&ry(s.Ae)?Aw(d):Qy(s.serializer,d)})(n,e)}function tM(n,e,t){return n instanceof bc?Cw(n,e):n instanceof Sc?Rw(n,e):t}function ww(n,e){return n instanceof cd?(function(a){return ry(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class ud extends $d{}class bc extends $d{constructor(e){super(),this.elements=e}}function Cw(n,e){const t=Iw(e);for(const a of n.elements)t.some((s=>Ki(s,a)))||t.push(a);return{arrayValue:{values:t}}}class Sc extends $d{constructor(e){super(),this.elements=e}}function Rw(n,e){let t=Iw(e);for(const a of n.elements)t=t.filter((s=>!Ki(s,a)));return{arrayValue:{values:t}}}class cd extends $d{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function R0(n){return vn(n.integerValue||n.doubleValue)}function Iw(n){return $y(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function nM(n,e){return n.field.isEqual(e.field)&&(function(a,s){return a instanceof bc&&s instanceof bc||a instanceof Sc&&s instanceof Sc?Ml(a.elements,s.elements,Ki):a instanceof cd&&s instanceof cd?Ki(a.Ae,s.Ae):a instanceof ud&&s instanceof ud})(n.transform,e.transform)}class rM{constructor(e,t){this.version=e,this.transformResults=t}}class jr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jr}static exists(e){return new jr(void 0,e)}static updateTime(e){return new jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Kd{}function Dw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Xy(n.key,jr.none()):new Lc(n.key,n.data,jr.none());{const t=n.data,a=vr.empty();let s=new Nn(Yn.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?a.delete(l):a.set(l,c),s=s.add(l)}return new Os(n.key,a,new Mr(s.toArray()),jr.none())}}function iM(n,e,t){n instanceof Lc?(function(s,l,c){const d=s.value.clone(),m=D0(s.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Os?(function(s,l,c){if(!jf(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=D0(s.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Nw(s)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function uc(n,e,t,a){return n instanceof Lc?(function(l,c,d,m){if(!jf(l.precondition,c))return d;const g=l.value.clone(),y=N0(l.fieldTransforms,m,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,a):n instanceof Os?(function(l,c,d,m){if(!jf(l.precondition,c))return d;const g=N0(l.fieldTransforms,m,c),y=c.data;return y.setAll(Nw(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,a):(function(l,c,d){return jf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function aM(n,e){let t=null;for(const a of n.fieldTransforms){const s=e.data.field(a.field),l=ww(a.transform,s||null);l!=null&&(t===null&&(t=vr.empty()),t.set(a.field,l))}return t||null}function I0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&Ml(a,s,((l,c)=>nM(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Lc extends Kd{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Os extends Kd{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Nw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}})),e}function D0(n,e,t){const a=new Map;Pt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,d=e.data.field(l.field);a.set(l.field,tM(c,d,t[s]))}return a}function N0(n,e,t){const a=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);a.set(s.field,eM(l,c,e))}return a}class Xy extends Kd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sM extends Kd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&iM(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=uc(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=uc(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=Sw();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const m=Dw(c,d);m!==null&&a.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(Ze.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),bt())}isEqual(e){return this.batchId===e.batchId&&Ml(this.mutations,e.mutations,((t,a)=>I0(t,a)))&&Ml(this.baseMutations,e.baseMutations,((t,a)=>I0(t,a)))}}class Wy{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){Pt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let s=(function(){return QO})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,a[c].version);return new Wy(e,t,a,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,At;function cM(n){switch(n){case fe.OK:return Qe(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Qe(15467,{code:n})}}function xw(n){if(n===void 0)return wa("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Cn.OK:return fe.OK;case Cn.CANCELLED:return fe.CANCELLED;case Cn.UNKNOWN:return fe.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return fe.INTERNAL;case Cn.UNAVAILABLE:return fe.UNAVAILABLE;case Cn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Cn.NOT_FOUND:return fe.NOT_FOUND;case Cn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Cn.ABORTED:return fe.ABORTED;case Cn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Cn.DATA_LOSS:return fe.DATA_LOSS;default:return Qe(39323,{code:n})}}(At=Cn||(Cn={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=new Ts([4294967295,4294967295],0);function x0(n){const e=hM().encode(n),t=new $A;return t.update(e),new Uint8Array(t.digest())}function O0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ts([t,a],0),new Ts([s,l],0)]}class Jy{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new tc(`Invalid padding: ${t}`);if(a<0)throw new tc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new tc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ts.fromNumber(this.ge)}ye(e,t,a){let s=e.add(t.multiply(Ts.fromNumber(a)));return s.compare(fM)===1&&(s=new Ts([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=x0(e),[a,s]=O0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);if(!this.we(c))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Jy(l,s,t);return a.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=x0(e),[a,s]=O0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,Uc.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Yd(Ze.min(),s,new cn(Tt),Ca(),bt())}}class Uc{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Uc(a,t,bt(),bt(),bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t,a,s){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=s}}class Ow{constructor(e,t){this.targetId=e,this.Ce=t}}class Mw{constructor(e,t,a=Qn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class M0{constructor(){this.ve=0,this.Fe=P0(),this.Me=Qn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=bt(),t=bt(),a=bt();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:Qe(38017,{changeType:l})}})),new Uc(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=P0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Pt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class dM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ca(),this.He=Sf(),this.Je=Sf(),this.Ze=new cn(Tt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Qe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,a=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(ay(l))if(a===0){const c=new Ge(l.path);this.et(t,c,nr.newNoDocument(c,Ze.min()))}else Pt(a===1,20013,{expectedCount:a});else{const c=this._t(t);if(c!==a){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=Cs(a).toUint8Array()}catch(m){if(m instanceof iw)return Ol("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Jy(c,s,l)}catch(m){return Ol(m instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let s=0;return a.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&ay(d.target)){const m=new Ge(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,nr.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let a=bt();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(a=a.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new Yd(e,t,this.Ze,this.je,a);return this.je=Ca(),this.He=Sf(),this.Je=Sf(),this.Ze=new cn(Tt),s}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new M0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Nn(Tt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Nn(Tt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ke("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new M0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Sf(){return new cn(Ge.comparator)}function P0(){return new cn(Ge.comparator)}const mM={asc:"ASCENDING",desc:"DESCENDING"},pM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gM={and:"AND",or:"OR"};class yM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ly(n,e){return n.useProto3Json||Bd(e)?e:{value:e}}function hd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _M(n,e){return hd(n,e.toTimestamp())}function Fi(n){return Pt(!!n,49232),Ze.fromTimestamp((function(t){const a=ws(t);return new Zt(a.seconds,a.nanos)})(n))}function Zy(n,e){return uy(n,e).canonicalString()}function uy(n,e){const t=(function(s){return new Qt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function kw(n){const e=Qt.fromString(n);return Pt(zw(e),10190,{key:e.toString()}),e}function cy(n,e){return Zy(n.databaseId,e.path)}function xg(n,e){const t=kw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(jw(t))}function Vw(n,e){return Zy(n.databaseId,e)}function vM(n){const e=kw(n);return e.length===4?Qt.emptyPath():jw(e)}function hy(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jw(n){return Pt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function k0(n,e,t){return{name:cy(n,e),fields:t.value.mapValue.fields}}function EM(n,e){let t;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Qe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(Pt(y===void 0||typeof y=="string",58123),Qn.fromBase64String(y||"")):(Pt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Qn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const y=g.code===void 0?fe.UNKNOWN:xw(g.code);return new Ne(y,g.message||"")})(c);t=new Mw(a,s,l,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=xg(n,a.document.name),l=Fi(a.document.updateTime),c=a.document.createTime?Fi(a.document.createTime):Ze.min(),d=new vr({mapValue:{fields:a.document.fields}}),m=nr.newFoundDocument(s,l,c,d),g=a.targetIds||[],y=a.removedTargetIds||[];t=new Lf(g,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=xg(n,a.document),l=a.readTime?Fi(a.readTime):Ze.min(),c=nr.newNoDocument(s,l),d=a.removedTargetIds||[];t=new Lf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=xg(n,a.document),l=a.removedTargetIds||[];t=new Lf([],l,s,null)}else{if(!("filter"in e))return Qe(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,c=new uM(s,l),d=a.targetId;t=new Ow(d,c)}}return t}function TM(n,e){let t;if(e instanceof Lc)t={update:k0(n,e.key,e.value)};else if(e instanceof Xy)t={delete:cy(n,e.key)};else if(e instanceof Os)t={update:k0(n,e.key,e.data),updateMask:NM(e.fieldMask)};else{if(!(e instanceof sM))return Qe(16599,{dt:e.type});t={verify:cy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,c){const d=c.transform;if(d instanceof ud)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof bc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Sc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof cd)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Qe(20930,{transform:c.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:_M(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Qe(27497)})(n,e.precondition)),t}function bM(n,e){return n&&n.length>0?(Pt(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?Fi(s.updateTime):Fi(l);return c.isEqual(Ze.min())&&(c=Fi(l)),new rM(c,s.transformResults||[])})(t,e)))):[]}function SM(n,e){return{documents:[Vw(n,e.path)]}}function AM(n,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=Vw(n,s);const l=(function(g){if(g.length!==0)return Uw(Ai.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((y=>(function(S){return{field:yl(S.field),direction:RM(S.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=ly(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:s}}function wM(n){let e=vM(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){Pt(a===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(E){const S=Lw(E);return S instanceof Ai&&mw(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(M){return new ld(_l(M.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,Bd(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(E){const S=!!E.before,w=E.values||[];return new od(w,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,w=E.values||[];return new od(w,S)})(t.endAt)),FO(e,s,c,l,d,"F",m,g)}function CM(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Lw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=_l(t.unaryFilter.field);return Rn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=_l(t.unaryFilter.field);return Rn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=_l(t.unaryFilter.field);return Rn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=_l(t.unaryFilter.field);return Rn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qe(61313);default:return Qe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Rn.create(_l(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qe(58110);default:return Qe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ai.create(t.compositeFilter.filters.map((a=>Lw(a))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Qe(1026)}})(t.compositeFilter.op))})(n):Qe(30097,{filter:n})}function RM(n){return mM[n]}function IM(n){return pM[n]}function DM(n){return gM[n]}function yl(n){return{fieldPath:n.canonicalString()}}function _l(n){return Yn.fromServerFormat(n.fieldPath)}function Uw(n){return n instanceof Rn?(function(t){if(t.op==="=="){if(b0(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NAN"}};if(T0(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(b0(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NAN"}};if(T0(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(t.field),op:IM(t.op),value:t.value}}})(n):n instanceof Ai?(function(t){const a=t.getFilters().map((s=>Uw(s)));return a.length===1?a[0]:{compositeFilter:{op:DM(t.op),filters:a}}})(n):Qe(54877,{filter:n})}function NM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function zw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Bw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t,a,s,l=Ze.min(),c=Ze.min(),d=Qn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.yt=e}}function OM(n){const e=wM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?oy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.Sn=new PM}addToCollectionParentIndex(e,t){return this.Sn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(As.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(As.min())}updateCollectionGroup(e,t,a){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class PM{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new Nn(Qt.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new Nn(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hw=41943040;class _r{static withCacheSize(e){return new _r(e,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r.DEFAULT_COLLECTION_PERCENTILE=10,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_r.DEFAULT=new _r(Hw,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_r.DISABLED=new _r(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Vl(0)}static ar(){return new Vl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="LruGarbageCollector",kM=1048576;function L0([n,e],[t,a]){const s=Tt(n,t);return s===0?Tt(e,a):s}class VM{constructor(e){this.Pr=e,this.buffer=new Nn(L0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();L0(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jM{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ke(j0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yl(t)?ke(j0,"Ignoring IndexedDB error during garbage collection: ",t):await Kl(t)}await this.Ar(3e5)}))}}class LM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return pe.resolve(zd.ce);const a=new VM(t);return this.Vr.forEachTarget(e,(s=>a.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>a.Er(s))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(V0)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,s,l,c,d,m,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(a=E,d=Date.now(),this.removeTargets(e,a,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(g=Date.now(),pl()<=Et.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-y}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function UM(n,e){return new LM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this.changes=new bo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?pe.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(a=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(a!==null&&uc(a.mutation,s,Mr.empty(),Zt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,bt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=bt()){const s=oo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,a).next((l=>{let c=ec();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const a=oo();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,bt())))}populateOverlays(e,t,a){const s=[];return a.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,a,s){let l=Ca();const c=lc(),d=(function(){return lc()})();return t.forEach(((m,g)=>{const y=a.get(g.key);s.has(g.key)&&(y===void 0||y.mutation instanceof Os)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),uc(y.mutation,g,y.mutation.getFieldMask(),Zt.now())):c.set(g.key,Mr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,y)=>c.set(g,y))),t.forEach(((g,y)=>d.set(g,new BM(y,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const a=lc();let s=new cn(((c,d)=>c-d)),l=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let y=a.get(m)||Mr.empty();y=d.applyToLocalView(g,y),a.set(m,y);const E=(s.get(d.batchId)||bt()).add(m);s=s.insert(d.batchId,E)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,y=m.value,E=Sw();y.forEach((S=>{if(!l.has(S)){const w=Dw(t.get(S),a.get(S));w!==null&&E.set(S,w),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return pe.waitFor(c)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,s){return qO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_w(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):pe.resolve(oo());let d=_c,m=l;return c.next((g=>pe.forEach(g,((y,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(y)?pe.resolve():this.remoteDocumentCache.getEntry(e,y).next((S=>{m=m.insert(y,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,bt()))).next((y=>({batchId:d,changes:bw(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next((a=>{let s=ec();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let c=ec();return this.indexManager.getCollectionParents(e,l).next((d=>pe.forEach(d,(m=>{const g=(function(E,S){return new jc(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,a,s).next((y=>{y.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s)))).next((c=>{l.forEach(((m,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,nr.newInvalidDocument(y)))}));let d=ec();return c.forEach(((m,g)=>{const y=l.get(m);y!==void 0&&uc(y.mutation,g,Mr.empty(),Zt.now()),Gd(t,g)&&(d=d.insert(m,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return pe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Fi(s.createTime)}})(t)),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:OM(s.bundledQuery),readTime:Fi(s.readTime)}})(t)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(){this.overlays=new cn(Ge.comparator),this.Lr=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const a=oo();return pe.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((s,l)=>{this.bt(e,t,l)})),pe.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.Lr.get(a);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),pe.resolve()}getOverlaysForCollection(e,t,a){const s=oo(),l=t.length+1,c=new Ge(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>a&&s.set(m.getKey(),m)}return pe.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new cn(((g,y)=>g-y));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let y=l.get(g.largestBatchId);y===null&&(y=oo(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const d=oo(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,y)=>d.set(g,y))),!(d.size()>=s)););return pe.resolve(d)}bt(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(a.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(a.key,new lM(t,a));let l=this.Lr.get(t);l===void 0&&(l=bt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this.sessionToken=Qn.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.kr=new Nn(Ln.Kr),this.qr=new Nn(Ln.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new Ln(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new Ln(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new Ge(new Qt([])),a=new Ln(t,e),s=new Ln(t,e+1),l=[];return this.qr.forEachInRange([a,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ge(new Qt([])),a=new Ln(t,e),s=new Ln(t,e+1);let l=bt();return this.qr.forEachInRange([a,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ln(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Ln{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ge.comparator(e.key,t.key)||Tt(e.Hr,t.Hr)}static Ur(e,t){return Tt(e.Hr,t.Hr)||Ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Nn(Ln.Kr)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new oM(l,t,a,s);this.mutationQueue.push(c);for(const d of s)this.Jr=this.Jr.add(new Ln(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,t){return pe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.Xr(a),l=s<0?0:s;return pe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?qy:this.Yn-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Ln(t,0),s=new Ln(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,s],(c=>{const d=this.Zr(c.Hr);l.push(d)})),pe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Nn(Tt);return t.forEach((s=>{const l=new Ln(s,0),c=new Ln(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{a=a.add(d.Hr)}))})),pe.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;Ge.isDocumentKey(l)||(l=l.child(""));const c=new Ln(new Ge(l),0);let d=new Nn(Tt);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!a.isPrefixOf(g)&&(g.length===s&&(d=d.add(m.Hr)),!0)}),c),pe.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((a=>{const s=this.Zr(a);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Pt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return pe.forEach(t.mutations,(s=>{const l=new Ln(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new Ln(t,0),s=this.Jr.firstAfterOrEqual(a);return pe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.ti=e,this.docs=(function(){return new cn(Ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return pe.resolve(a?a.document.mutableCopy():nr.newInvalidDocument(t))}getEntries(e,t){let a=Ca();return t.forEach((s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():nr.newInvalidDocument(s))})),pe.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=Ca();const c=t.path,d=new Ge(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||EO(vO(y),a)<=0||(s.has(y.key)||Gd(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return pe.resolve(l)}getAllFromCollectionGroup(e,t,a,s){Qe(9500)}ni(e,t){return pe.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new YM(this)}getSize(e){return pe.resolve(this.size)}}class YM extends zM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(a)})),pe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.persistence=e,this.ri=new bo((t=>Ky(t)),Yy),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.ii=0,this.si=new e_,this.targetCount=0,this.oi=Vl._r()}forEachTarget(e,t){return this.ri.forEach(((a,s)=>t(s))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),pe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Vl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.lr(t),pe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&a.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),pe.waitFor(l).next((()=>s))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return pe.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),pe.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),pe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return pe.resolve(a)}containsKey(e,t){return pe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t){this._i={},this.overlays={},this.ai=new zd(0),this.ui=!1,this.ui=!0,this.ci=new GM,this.referenceDelegate=e(this),this.li=new QM(this),this.indexManager=new MM,this.remoteDocumentCache=(function(s){return new KM(s)})((a=>this.referenceDelegate.hi(a))),this.serializer=new xM(t),this.Pi=new FM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new $M(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){ke("MemoryPersistence","Starting transaction:",e);const s=new XM(this.ai.next());return this.referenceDelegate.Ti(),a(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return pe.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class XM extends bO{constructor(e){super(),this.currentSequenceNumber=e}}class t_{constructor(e){this.persistence=e,this.Ri=new e_,this.Ai=null}static Vi(e){return new t_(e)}get di(){if(this.Ai)return this.Ai;throw Qe(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),pe.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.di,(a=>{const s=Ge.fromPath(a);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Ze.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return pe.or([()=>pe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class fd{constructor(e,t){this.persistence=e,this.fi=new bo((a=>wO(a.path)),((a,s)=>a.isEqual(s))),this.garbageCollector=UM(this,t)}static Vi(e,t){return new fd(e,t)}Ti(){}Ii(e){return pe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return pe.forEach(this.fi,((a,s)=>this.wr(e,a,s).next((l=>l?pe.resolve():t(s)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(a++,l.removeEntry(c,Ze.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),pe.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),pe.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),pe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kf(e.data.value)),t}wr(e,t,a){return pe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return pe.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=s}static Es(e,t){let a=bt(),s=bt();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new n_(e,t.fromCache,a,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Hx()?8:SO(rr())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,a).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new WM;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,a,s){return a.documentReadCount<this.Vs?(pl()<=Et.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),pe.resolve()):(pl()<=Et.DEBUG&&ke("QueryEngine","Query:",gl(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.ds*s?(pl()<=Et.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(t))):pe.resolve())}gs(e,t){if(C0(t))return pe.resolve(null);let a=Hi(t);return this.indexManager.getIndexType(e,a).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=oy(t,null,"F"),a=Hi(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const c=bt(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,a).next((m=>{const g=this.bs(t,d);return this.Ss(t,g,c,m.readTime)?this.gs(e,oy(t,null,"F")):this.Ds(e,g,t,m)}))))})))))}ps(e,t,a,s){return C0(t)||s.isEqual(Ze.min())?pe.resolve(null):this.fs.getDocuments(e,a).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,a,s)?pe.resolve(null):(pl()<=Et.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),gl(t)),this.Ds(e,c,t,_O(s,_c)).next((d=>d)))}))}bs(e,t){let a=new Nn(Ew(e));return t.forEach(((s,l)=>{Gd(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,a){return pl()<=Et.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",gl(t)),this.fs.getDocumentsMatchingQuery(e,t,As.min(),a)}Ds(e,t,a,s){return this.fs.getDocumentsMatchingQuery(e,a,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="LocalStore",ZM=3e8;class eP{constructor(e,t,a,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new cn(Tt),this.Fs=new bo((l=>Ky(l)),Yy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function tP(n,e,t,a){return new eP(n,e,t,a)}async function qw(n,e){const t=tt(n);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const c=[],d=[];let m=bt();for(const g of s){c.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){d.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(a,m).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function nP(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,y){const E=g.batch,S=E.keys();let w=pe.resolve();return S.forEach((M=>{w=w.next((()=>y.getEntry(m,M))).next((B=>{const U=g.docVersions.get(M);Pt(U!==null,48541),B.version.compareTo(U)<0&&(E.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),y.addEntry(B)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(m,E)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(d){let m=bt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(a,s)))}))}function Gw(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function rP(n,e){const t=tt(n),a=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((y,E)=>{const S=s.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(l,y.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,y.addedDocuments,E))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(Qn.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,a)),s=s.insert(E,w),(function(B,U,Y){return B.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=ZM?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(S,w,y)&&d.push(t.li.updateTargetData(l,w))}));let m=Ca(),g=bt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(iP(l,c,e.documentUpdates).next((y=>{m=y.Bs,g=y.Ls}))),!a.isEqual(Ze.min())){const y=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));d.push(y)}return pe.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.vs=s,l)))}function iP(n,e,t){let a=bt(),s=bt();return t.forEach((l=>a=a.add(l))),e.getEntries(n,a).next((l=>{let c=Ca();return t.forEach(((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),m.isNoDocument()&&m.version.isEqual(Ze.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):ke(r_,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{Bs:c,Ls:s}}))}function aP(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=qy),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function sP(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let s;return t.li.getTargetData(a,e).next((l=>l?(s=l,pe.resolve(s)):t.li.allocateTargetId(a).next((c=>(s=new gs(e,c,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,s).next((()=>s)))))))})).then((a=>{const s=t.vs.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function fy(n,e,t){const a=tt(n),s=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(c=>a.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Yl(c))throw c;ke(r_,`Failed to update sequence numbers for target ${e}: ${c}`)}a.vs=a.vs.remove(e),a.Fs.delete(s.target)}function U0(n,e,t){const a=tt(n);let s=Ze.min(),l=bt();return a.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,y){const E=tt(m),S=E.Fs.get(y);return S!==void 0?pe.resolve(E.vs.get(S)):E.li.getTargetData(g,y)})(a,c,Hi(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>a.Cs.getDocumentsMatchingQuery(c,e,t?s:Ze.min(),t?l:bt()))).next((d=>(oP(a,$O(e),d),{documents:d,ks:l})))))}function oP(n,e,t){let a=n.Ms.get(e)||Ze.min();t.forEach(((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),n.Ms.set(e,a)}class z0{constructor(){this.activeTargetIds=JO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lP{constructor(){this.vo=new z0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new z0,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="ConnectivityMonitor";class H0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ke(B0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ke(B0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af=null;function dy(){return Af===null?Af=(function(){return 268435456+Math.round(2147483648*Math.random())})():Af++,"0x"+Af.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="RestConnection",cP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class hP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${s}`,this.$o=this.databaseId.database===ad?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Wo(e,t,a,s,l){const c=dy(),d=this.Qo(e,t.toUriEncodedString());ke(Og,`Sending RPC '${e}' ${c}:`,d,a);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,s,l);const{host:g}=new URL(d),y=ql(g);return this.zo(e,d,m,a,y).then((E=>(ke(Og,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Ol(Og,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",a),E}))}jo(e,t,a,s,l,c){return this.Wo(e,t,a,s,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),a&&a.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const a=cP[e];let s=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="WebChannelConnection",Xu=(n,e,t)=>{n.listen(e,(a=>{try{t(a)}catch(s){setTimeout((()=>{throw s}),0)}}))};class wl extends hP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!wl.c_){const e=XA();Xu(e,QA.STAT_EVENT,(t=>{t.stat===ey.PROXY?ke(Zn,"STAT_EVENT: detected buffering proxy"):t.stat===ey.NOPROXY&&ke(Zn,"STAT_EVENT: detected no buffering proxy")})),wl.c_=!0}}zo(e,t,a,s,l){const c=dy();return new Promise(((d,m)=>{const g=new KA;g.setWithCredentials(!0),g.listenOnce(YA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Pf.NO_ERROR:const E=g.getResponseJson();ke(Zn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case Pf.TIMEOUT:ke(Zn,`RPC '${e}' ${c} timed out`),m(new Ne(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Pf.HTTP_ERROR:const S=g.getStatus();if(ke(Zn,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let w=g.getResponseJson();Array.isArray(w)&&(w=w[0]);const M=w==null?void 0:w.error;if(M&&M.status&&M.message){const B=(function(Y){const z=Y.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(z)>=0?z:fe.UNKNOWN})(M.status);m(new Ne(B,M.message))}else m(new Ne(fe.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Ne(fe.UNAVAILABLE,"Connection failed."));break;default:Qe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ke(Zn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(s);ke(Zn,`RPC '${e}' ${c} sending request:`,s),g.send(t,"POST",y,a,15)}))}T_(e,t,a){const s=dy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,a),d.encodeInitMessageHeaders=!0;const g=l.join("");ke(Zn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const y=c.createWebChannel(g,d);this.I_(y);let E=!1,S=!1;const w=new fP({Ho:M=>{S?ke(Zn,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(E||(ke(Zn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),E=!0),ke(Zn,`RPC '${e}' stream ${s} sending:`,M),y.send(M))},Jo:()=>y.close()});return Xu(y,Zu.EventType.OPEN,(()=>{S||(ke(Zn,`RPC '${e}' stream ${s} transport opened.`),w.i_())})),Xu(y,Zu.EventType.CLOSE,(()=>{S||(S=!0,ke(Zn,`RPC '${e}' stream ${s} transport closed`),w.o_(),this.E_(y))})),Xu(y,Zu.EventType.ERROR,(M=>{S||(S=!0,Ol(Zn,`RPC '${e}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),w.o_(new Ne(fe.UNAVAILABLE,"The operation could not be completed")))})),Xu(y,Zu.EventType.MESSAGE,(M=>{var B;if(!S){const U=M.data[0];Pt(!!U,16349);const Y=U,z=(Y==null?void 0:Y.error)||((B=Y[0])==null?void 0:B.error);if(z){ke(Zn,`RPC '${e}' stream ${s} received error:`,z);const Q=z.status;let ne=(function(A){const R=Cn[A];if(R!==void 0)return xw(R)})(Q),ue=z.message;ne===void 0&&(ne=fe.INTERNAL,ue="Unknown error status: "+Q+" with message "+z.message),S=!0,w.o_(new Ne(ne,ue)),y.close()}else ke(Zn,`RPC '${e}' stream ${s} received:`,U),w.__(U)}})),wl.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return WA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(n){return new wl(n)}function Mg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(n){return new yM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wl.c_=!1;class $w{constructor(e,t,a=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-a);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="PersistentStream";class Kw{constructor(e,t,a,s,l,c,d,m){this.Ci=e,this.b_=a,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $w(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(wa(t.toString()),wa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,s])=>{this.D_===t&&this.G_(a,s)}),(a=>{e((()=>{const s=new Ne(fe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(s)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{a((()=>this.z_(s)))})),this.stream.onMessage((s=>{a((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(F0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ke(F0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mP extends Kw{constructor(e,t,a,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=EM(this.serializer,e),a=(function(l){if(!("targetChange"in l))return Ze.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ze.min():c.readTime?Fi(c.readTime):Ze.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=hy(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=ay(m)?{documents:SM(l,m)}:{query:AM(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Pw(l,c.resumeToken);const g=ly(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ze.min())>0){d.readTime=hd(l,c.snapshotVersion.toTimestamp());const g=ly(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const a=CM(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=hy(this.serializer),t.removeTarget=e,this.K_(t)}}class pP extends Kw{constructor(e,t,a,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=bM(e.writeResults,e.commitTime),a=Fi(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=hy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>TM(this.serializer,a)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{}class yP extends gP{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ne(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,uy(t,a),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ne(fe.UNKNOWN,l.toString())}))}jo(e,t,a,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,uy(t,a),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ne(fe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function _P(n,e,t,a){return new yP(n,e,t,a)}class vP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wa(t),this.aa=!1):ke("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class EP{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{a.enqueueAndForget((async()=>{So(this)&&(ke(yo,"Restarting streams for network reachability change."),await(async function(m){const g=tt(m);g.Ea.add(4),await zc(g),g.Va.set("Unknown"),g.Ea.delete(4),await Xd(g)})(this))}))})),this.Va=new vP(a,s)}}async function Xd(n){if(So(n))for(const e of n.Ra)await e(!0)}async function zc(n){for(const e of n.Ra)await e(!1)}function Yw(n,e){const t=tt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),o_(t)?s_(t):Ql(t).O_()&&a_(t,e))}function i_(n,e){const t=tt(n),a=Ql(t);t.Ia.delete(e),a.O_()&&Qw(t,e),t.Ia.size===0&&(a.O_()?a.L_():So(t)&&t.Va.set("Unknown"))}function a_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ql(n).Z_(e)}function Qw(n,e){n.da.$e(e),Ql(n).X_(e)}function s_(n){n.da=new dM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ql(n).start(),n.Va.ua()}function o_(n){return So(n)&&!Ql(n).x_()&&n.Ia.size>0}function So(n){return tt(n).Ea.size===0}function Xw(n){n.da=void 0}async function TP(n){n.Va.set("Online")}async function bP(n){n.Ia.forEach(((e,t)=>{a_(n,e)}))}async function SP(n,e){Xw(n),o_(n)?(n.Va.ha(e),s_(n)):n.Va.set("Unknown")}async function AP(n,e,t){if(n.Va.set("Online"),e instanceof Mw&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(a){ke(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await dd(n,a)}else if(e instanceof Lf?n.da.Xe(e):e instanceof Ow?n.da.st(e):n.da.tt(e),!t.isEqual(Ze.min()))try{const a=await Gw(n.localStore);t.compareTo(a)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(g);y&&l.Ia.set(g,y.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(Qn.EMPTY_BYTE_STRING,y.snapshotVersion)),Qw(l,m);const E=new gs(y.target,m,g,y.sequenceNumber);a_(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(a){ke(yo,"Failed to raise snapshot:",a),await dd(n,a)}}async function dd(n,e,t){if(!Yl(e))throw e;n.Ea.add(1),await zc(n),n.Va.set("Offline"),t||(t=()=>Gw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ke(yo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Xd(n)}))}function Ww(n,e){return e().catch((t=>dd(n,t,e)))}async function Wd(n){const e=tt(n),t=Is(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qy;for(;wP(e);)try{const s=await aP(e.localStore,a);if(s===null){e.Ta.length===0&&t.L_();break}a=s.batchId,CP(e,s)}catch(s){await dd(e,s)}Jw(e)&&Zw(e)}function wP(n){return So(n)&&n.Ta.length<10}function CP(n,e){n.Ta.push(e);const t=Is(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Jw(n){return So(n)&&!Is(n).x_()&&n.Ta.length>0}function Zw(n){Is(n).start()}async function RP(n){Is(n).ra()}async function IP(n){const e=Is(n);for(const t of n.Ta)e.ea(t.mutations)}async function DP(n,e,t){const a=n.Ta.shift(),s=Wy.from(a,e,t);await Ww(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Wd(n)}async function NP(n,e){e&&Is(n).Y_&&await(async function(a,s){if((function(c){return cM(c)&&c!==fe.ABORTED})(s.code)){const l=a.Ta.shift();Is(a).B_(),await Ww(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Wd(a)}})(n,e),Jw(n)&&Zw(n)}async function q0(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),ke(yo,"RemoteStore received new credentials");const a=So(t);t.Ea.add(3),await zc(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xd(t)}async function xP(n,e){const t=tt(n);e?(t.Ea.delete(2),await Xd(t)):e||(t.Ea.add(2),await zc(t),t.Va.set("Unknown"))}function Ql(n){return n.ma||(n.ma=(function(t,a,s){const l=tt(t);return l.sa(),new mP(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:TP.bind(null,n),Yo:bP.bind(null,n),t_:SP.bind(null,n),J_:AP.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),o_(n)?s_(n):n.Va.set("Unknown")):(await n.ma.stop(),Xw(n))}))),n.ma}function Is(n){return n.fa||(n.fa=(function(t,a,s){const l=tt(t);return l.sa(),new pP(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:RP.bind(null,n),t_:NP.bind(null,n),ta:IP.bind(null,n),na:DP.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Wd(n)):(await n.fa.stop(),n.Ta.length>0&&(ke(yo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new Ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const c=Date.now()+a,d=new l_(e,t,c,s,l);return d.start(a),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function u_(n,e){if(wa("AsyncQueue",`${e}: ${n}`),Yl(n))return new Ne(fe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{static emptySet(e){return new Cl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Ge.comparator(t.key,a.key):(t,a)=>Ge.comparator(t.key,a.key),this.keyedMap=ec(),this.sortedSet=new cn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Cl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this.ga=new cn(Ge.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Qe(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class jl{constructor(e,t,a,s,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new jl(e,t,Cl.emptySet(t),c,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class MP{constructor(){this.queries=$0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const s=tt(t),l=s.queries;s.queries=$0(),l.forEach(((c,d)=>{for(const m of d.ba)m.onError(a)}))})(this,new Ne(fe.ABORTED,"Firestore shutting down"))}}function $0(){return new bo((n=>vw(n)),qd)}async function c_(n,e){const t=tt(n);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(a=2):(l=new OP,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=u_(c,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&f_(t)}async function h_(n,e){const t=tt(n),a=e.query;let s=3;const l=t.queries.get(a);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function PP(n,e){const t=tt(n);let a=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(s)&&(a=!0);c.wa=s}}a&&f_(t)}function kP(n,e,t){const a=tt(n),s=a.queries.get(e);if(s)for(const l of s.ba)l.onError(t);a.queries.delete(e)}function f_(n){n.Ca.forEach((e=>{e.next()}))}var my,K0;(K0=my||(my={})).Ma="default",K0.Cache="cache";class d_{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new jl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==my.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.key=e}}class t1{constructor(e){this.key=e}}class VP{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=bt(),this.mutatedKeys=bt(),this.eu=Ew(e),this.tu=new Cl(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new G0,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,E)=>{const S=s.get(y),w=Gd(this.query,E)?E:null,M=!!S&&this.mutatedKeys.has(S.key),B=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let U=!1;S&&w?S.data.isEqual(w.data)?M!==B&&(a.track({type:3,doc:w}),U=!0):this.su(S,w)||(a.track({type:2,doc:w}),U=!0,(m&&this.eu(w,m)>0||g&&this.eu(w,g)<0)&&(d=!0)):!S&&w?(a.track({type:0,doc:w}),U=!0):S&&!w&&(a.track({type:1,doc:S}),U=!0,(m||g)&&(d=!0)),U&&(w?(c=c.add(w),l=B?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),a.track({type:1,doc:y})}return{tu:c,iu:a,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,E)=>(function(w,M){const B=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe(20277,{Vt:U})}};return B(w)-B(M)})(y.type,E.type)||this.eu(y.doc,E.doc))),this.ou(a),s=s??!1;const d=t&&!s?this._u():[],m=this.Ya.size===0&&this.current&&!s?1:0,g=m!==this.Xa;return this.Xa=m,c.length!==0||g?{snapshot:new jl(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new G0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=bt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new t1(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new e1(a))})),t}cu(e){this.Za=e.ks,this.Ya=bt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return jl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const m_="SyncEngine";class jP{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class LP{constructor(e){this.key=e,this.hu=!1}}class UP{constructor(e,t,a,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new bo((d=>vw(d)),qd),this.Iu=new Map,this.Eu=new Set,this.Ru=new cn(Ge.comparator),this.Au=new Map,this.Vu=new e_,this.du={},this.mu=new Map,this.fu=Vl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zP(n,e,t=!0){const a=o1(n);let s;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await n1(a,e,t,!0),s}async function BP(n,e){const t=o1(n);await n1(t,e,!0,!1)}async function n1(n,e,t,a){const s=await sP(n.localStore,Hi(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return a&&(d=await HP(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&Yw(n.remoteStore,s),d}async function HP(n,e,t,a,s){n.pu=(E,S,w)=>(async function(B,U,Y,z){let Q=U.view.ru(Y);Q.Ss&&(Q=await U0(B.localStore,U.query,!1).then((({documents:A})=>U.view.ru(A,Q))));const ne=z&&z.targetChanges.get(U.targetId),ue=z&&z.targetMismatches.get(U.targetId)!=null,G=U.view.applyChanges(Q,B.isPrimaryClient,ne,ue);return Q0(B,U.targetId,G.au),G.snapshot})(n,E,S,w);const l=await U0(n.localStore,e,!0),c=new VP(e,l.ks),d=c.ru(l.documents),m=Uc.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",s),g=c.applyChanges(d,n.isPrimaryClient,m);Q0(n,t,g.au);const y=new jP(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function FP(n,e,t){const a=tt(n),s=a.Tu.get(e),l=a.Iu.get(s.targetId);if(l.length>1)return a.Iu.set(s.targetId,l.filter((c=>!qd(c,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await fy(a.localStore,s.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(s.targetId),t&&i_(a.remoteStore,s.targetId),py(a,s.targetId)})).catch(Kl)):(py(a,s.targetId),await fy(a.localStore,s.targetId,!0))}async function qP(n,e){const t=tt(n),a=t.Tu.get(e),s=t.Iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),i_(t.remoteStore,a.targetId))}async function GP(n,e,t){const a=JP(n);try{const s=await(function(c,d){const m=tt(c),g=Zt.now(),y=d.reduce(((w,M)=>w.add(M.key)),bt());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let M=Ca(),B=bt();return m.xs.getEntries(w,y).next((U=>{M=U,M.forEach(((Y,z)=>{z.isValidDocument()||(B=B.add(Y))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,M))).next((U=>{E=U;const Y=[];for(const z of d){const Q=aM(z,E.get(z.key).overlayedDocument);Q!=null&&Y.push(new Os(z.key,Q,hw(Q.value.mapValue),jr.exists(!0)))}return m.mutationQueue.addMutationBatch(w,g,Y,d)})).next((U=>{S=U;const Y=U.applyToLocalDocumentSet(E,B);return m.documentOverlayCache.saveOverlays(w,U.batchId,Y)}))})).then((()=>({batchId:S.batchId,changes:bw(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),(function(c,d,m){let g=c.du[c.currentUser.toKey()];g||(g=new cn(Tt)),g=g.insert(d,m),c.du[c.currentUser.toKey()]=g})(a,s.batchId,t),await Bc(a,s.changes),await Wd(a.remoteStore)}catch(s){const l=u_(s,"Failed to persist write");t.reject(l)}}async function r1(n,e){const t=tt(n);try{const a=await rP(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(Pt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Pt(c.hu,14607):s.removedDocuments.size>0&&(Pt(c.hu,42227),c.hu=!1))})),await Bc(t,a,e)}catch(a){await Kl(a)}}function Y0(n,e,t){const a=tt(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const m=tt(c);m.onlineState=d;let g=!1;m.queries.forEach(((y,E)=>{for(const S of E.ba)S.va(d)&&(g=!0)})),g&&f_(m)})(a.eventManager,e),s.length&&a.Pu.J_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function $P(n,e,t){const a=tt(n);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a.Au.get(e),l=s&&s.key;if(l){let c=new cn(Ge.comparator);c=c.insert(l,nr.newNoDocument(l,Ze.min()));const d=bt().add(l),m=new Yd(Ze.min(),new Map,new cn(Tt),c,d);await r1(a,m),a.Ru=a.Ru.remove(l),a.Au.delete(e),p_(a)}else await fy(a.localStore,e,!1).then((()=>py(a,e,t))).catch(Kl)}async function KP(n,e){const t=tt(n),a=e.batch.batchId;try{const s=await nP(t.localStore,e);a1(t,a,null),i1(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Bc(t,s)}catch(s){await Kl(s)}}async function YP(n,e,t){const a=tt(n);try{const s=await(function(c,d){const m=tt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return m.mutationQueue.lookupMutationBatch(g,d).next((E=>(Pt(E!==null,37113),y=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>m.localDocuments.getDocuments(g,y)))}))})(a.localStore,e);a1(a,e,t),i1(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Bc(a,s)}catch(s){await Kl(s)}}function i1(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function a1(n,e,t){const a=tt(n);let s=a.du[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.du[a.currentUser.toKey()]=s}}function py(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),t&&n.Pu.yu(a,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||s1(n,a)}))}function s1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(i_(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),p_(n))}function Q0(n,e,t){for(const a of t)a instanceof e1?(n.Vu.addReference(a.key,e),QP(n,a)):a instanceof t1?(ke(m_,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||s1(n,a.key)):Qe(19791,{wu:a})}function QP(n,e){const t=e.key,a=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(a)||(ke(m_,"New document in limbo: "+t),n.Eu.add(a),p_(n))}function p_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ge(Qt.fromString(e)),a=n.fu.next();n.Au.set(a,new LP(t)),n.Ru=n.Ru.insert(t,a),Yw(n.remoteStore,new gs(Hi(Fd(t.path)),a,"TargetPurposeLimboResolution",zd.ce))}}async function Bc(n,e,t){const a=tt(n),s=[],l=[],c=[];a.Tu.isEmpty()||(a.Tu.forEach(((d,m)=>{c.push(a.pu(m,e,t).then((g=>{var y;if((g||t)&&a.isPrimaryClient){const E=g?!g.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:y.current;a.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){s.push(g);const E=n_.Es(m.targetId,g);l.push(E)}})))})),await Promise.all(c),a.Pu.J_(s),await(async function(m,g){const y=tt(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>pe.forEach(g,(S=>pe.forEach(S.Ts,(w=>y.persistence.referenceDelegate.addReference(E,S.targetId,w))).next((()=>pe.forEach(S.Is,(w=>y.persistence.referenceDelegate.removeReference(E,S.targetId,w)))))))))}catch(E){if(!Yl(E))throw E;ke(r_,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const w=y.vs.get(S),M=w.snapshotVersion,B=w.withLastLimboFreeSnapshotVersion(M);y.vs=y.vs.insert(S,B)}}})(a.localStore,l))}async function XP(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){ke(m_,"User change. New user:",e.toKey());const a=await qw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new Ne(fe.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Bc(t,a.Ns)}}function WP(n,e){const t=tt(n),a=t.Au.get(e);if(a&&a.hu)return bt().add(a.key);{let s=bt();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function o1(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=r1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$P.bind(null,e),e.Pu.J_=PP.bind(null,e.eventManager),e.Pu.yu=kP.bind(null,e.eventManager),e}function JP(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YP.bind(null,e),e}class md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return tP(this.persistence,new JM,e.initialUser,this.serializer)}Cu(e){return new Fw(t_.Vi,this.serializer)}Du(e){return new lP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}md.provider={build:()=>new md};class ZP extends md{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Pt(this.persistence.referenceDelegate instanceof fd,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new jM(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_r.withCacheSize(this.cacheSizeBytes):_r.DEFAULT;return new Fw((a=>fd.Vi(a,t)),this.serializer)}}class gy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Y0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=XP.bind(null,this.syncEngine),await xP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new MP})()}createDatastore(e){const t=Qd(e.databaseInfo.databaseId),a=dP(e.databaseInfo);return _P(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,s,l,c,d){return new EP(a,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Y0(this.syncEngine,t,0)),(function(){return H0.v()?new H0:new uP})())}createSyncEngine(e,t){return(function(s,l,c,d,m,g,y){const E=new UP(s,l,c,d,m,g);return y&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=tt(s);ke(yo,"RemoteStore shutting down."),l.Ea.add(5),await zc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}gy.provider={build:()=>new gy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="FirestoreClient";class e4{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=s,this.user=tr.UNAUTHENTICATED,this.clientId=Fy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async c=>{ke(Ds,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(a,(c=>(ke(Ds,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=u_(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Pg(n,e){n.asyncQueue.verifyOperationInProgress(),ke(Ds,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener((async s=>{a.isEqual(s)||(await qw(e.localStore,s),a=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function X0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await t4(n);ke(Ds,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((a=>q0(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,s)=>q0(e.remoteStore,s))),n._onlineComponents=e}async function t4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ke(Ds,"Using user provided OfflineComponentProvider");try{await Pg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ol("Error using user provided cache. Falling back to memory cache: "+t),await Pg(n,new md)}}else ke(Ds,"Using default OfflineComponentProvider"),await Pg(n,new ZP(void 0));return n._offlineComponents}async function l1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ke(Ds,"Using user provided OnlineComponentProvider"),await X0(n,n._uninitializedComponentsProvider._online)):(ke(Ds,"Using default OnlineComponentProvider"),await X0(n,new gy))),n._onlineComponents}function n4(n){return l1(n).then((e=>e.syncEngine))}async function pd(n){const e=await l1(n),t=e.eventManager;return t.onListen=zP.bind(null,e.syncEngine),t.onUnlisten=FP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qP.bind(null,e.syncEngine),t}function r4(n,e,t,a){const s=new g_(a),l=new d_(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>c_(await pd(n),l))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>h_(await pd(n),l)))}}function i4(n,e,t={}){const a=new Ta;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const y=new g_({next:S=>{y.Nu(),c.enqueueAndForget((()=>h_(l,E)));const w=S.docs.has(d);!w&&S.fromCache?g.reject(new Ne(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&m&&m.source==="server"?g.reject(new Ne(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new d_(Fd(d.path),y,{includeMetadataChanges:!0,Ka:!0});return c_(l,E)})(await pd(n),n.asyncQueue,e,t,a))),a.promise}function a4(n,e,t={}){const a=new Ta;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const y=new g_({next:S=>{y.Nu(),c.enqueueAndForget((()=>h_(l,E))),S.fromCache&&m.source==="server"?g.reject(new Ne(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new d_(d,y,{includeMetadataChanges:!0,Ka:!0});return c_(l,E)})(await pd(n),n.asyncQueue,e,t,a))),a.promise}function s4(n,e){const t=new Ta;return n.asyncQueue.enqueueAndForget((async()=>GP(await n4(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="ComponentProvider",W0=new Map;function l4(n,e,t,a,s){return new IO(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,u1(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="firestore.googleapis.com",J0=!0;class Z0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=c1,this.ssl=J0}else this.host=e.host,this.ssl=e.ssl??J0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Hw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kM)throw new Ne(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u1(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ne(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ne(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ne(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new oO;switch(a.type){case"firstParty":return new hO(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ne(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=W0.get(t);a&&(ke(o4,"Removing Datastore"),W0.delete(t),a.terminate())})(this),Promise.resolve()}}function u4(n,e,t,a={}){var g;n=Vr(n,Jd);const s=ql(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(LA(`https://${d}`),UA("Firestore",!0)),l.host!==c1&&l.host!==d&&Ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:s,emulatorOptions:a};if(!mo(m,c)&&(n._setSettings(m),a.mockUserToken)){let y,E;if(typeof a.mockUserToken=="string")y=a.mockUserToken,E=tr.MOCK_USER;else{y=Mx(a.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const S=a.mockUserToken.sub||a.mockUserToken.user_id;if(!S)throw new Ne(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new tr(S)}n._authCredentials=new lO(new ZA(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ao(this.firestore,e,this._query)}}class mn{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Vc(t,mn._jsonSchema))return new mn(e,a||null,new Ge(Qt.fromString(t.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:In("string",mn._jsonSchemaVersion),referencePath:In("string")};class bs extends Ao{constructor(e,t,a){super(e,t,Fd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new Ge(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function Hc(n,e,...t){if(n=xn(n),ew("collection","path",e),n instanceof Jd){const a=Qt.fromString(e,...t);return f0(a),new bs(n,null,a)}{if(!(n instanceof mn||n instanceof bs))throw new Ne(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Qt.fromString(e,...t));return f0(a),new bs(n.firestore,null,a)}}function si(n,e,...t){if(n=xn(n),arguments.length===1&&(e=Fy.newId()),ew("doc","path",e),n instanceof Jd){const a=Qt.fromString(e,...t);return h0(a),new mn(n,null,new Ge(a))}{if(!(n instanceof mn||n instanceof bs))throw new Ne(fe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Qt.fromString(e,...t));return h0(a),new mn(n.firestore,n instanceof bs?n.converter:null,new Ge(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="AsyncQueue";class tS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $w(this,"async_queue_retry"),this._c=()=>{const a=Mg();a&&ke(eS,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=Mg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Mg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ta;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Yl(e))throw e;ke(eS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,wa("INTERNAL UNHANDLED ERROR: ",nS(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=l_.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Qe(47125,{Pc:nS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function nS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ns extends Jd{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new tS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tS(e),this._firestoreClient=void 0,await e}}}function c4(n,e){const t=typeof n=="object"?n:FA(),a=typeof n=="string"?n:ad,s=By(t,"firestore").getImmediate({identifier:a});if(!s._initialized){const l=xx("firestore");l&&u4(s,...l)}return s}function Fc(n){if(n._terminated)throw new Ne(fe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||h4(n),n._firestoreClient}function h4(n){var a,s,l,c;const e=n._freezeSettings(),t=l4(n._databaseId,((a=n._app)==null?void 0:a.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new e4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ni(Qn.fromBase64String(e))}catch(t){throw new Ne(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ni(Qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ni._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vc(e,ni._jsonSchema))return ni.fromBase64String(e.bytes)}}ni._jsonSchemaVersion="firestore/bytes/1.0",ni._jsonSchema={type:In("string",ni._jsonSchemaVersion),bytes:In("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ne(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qi._jsonSchemaVersion}}static fromJSON(e){if(Vc(e,qi._jsonSchema))return new qi(e.latitude,e.longitude)}}qi._jsonSchemaVersion="firestore/geoPoint/1.0",qi._jsonSchema={type:In("string",qi._jsonSchemaVersion),latitude:In("number"),longitude:In("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vc(e,bi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new bi(e.vectorValues);throw new Ne(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bi._jsonSchemaVersion="firestore/vectorValue/1.0",bi._jsonSchema={type:In("string",bi._jsonSchemaVersion),vectorValues:In("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=/^__.*__$/;class d4{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lc(e,this.data,t,this.fieldTransforms)}}class h1{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Os(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function f1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe(40011,{dataSource:n})}}class __{constructor(e,t,a,s,l,c){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new __({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return gd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(f1(this.dataSource)&&f4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class m4{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Qd(e)}createContext(e,t,a,s=!1){return new __({dataSource:e,methodName:t,targetDoc:a,path:Yn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function em(n){const e=n._freezeSettings(),t=Qd(n._databaseId);return new m4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function d1(n,e,t,a,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);v_("Data must be an object, but it was:",c,a);const d=g1(a,c);let m,g;if(l.merge)m=new Mr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const E of l.mergeFields){const S=Ll(e,E,t);if(!c.contains(S))throw new Ne(fe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);v1(y,S)||y.push(S)}m=new Mr(y),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new d4(new vr(d),m,g)}class tm extends y_{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tm}}function m1(n,e,t,a){const s=n.createContext(1,e,t);v_("Data must be an object, but it was:",s,a);const l=[],c=vr.empty();xs(a,((m,g)=>{const y=_1(e,m,t);g=xn(g);const E=s.childContextForFieldPath(y);if(g instanceof tm)l.push(y);else{const S=qc(g,E);S!=null&&(l.push(y),c.set(y,S))}}));const d=new Mr(l);return new h1(c,d,s.fieldTransforms)}function p1(n,e,t,a,s,l){const c=n.createContext(1,e,t),d=[Ll(e,a,t)],m=[s];if(l.length%2!=0)throw new Ne(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Ll(e,l[S])),m.push(l[S+1]);const g=[],y=vr.empty();for(let S=d.length-1;S>=0;--S)if(!v1(g,d[S])){const w=d[S];let M=m[S];M=xn(M);const B=c.childContextForFieldPath(w);if(M instanceof tm)g.push(w);else{const U=qc(M,B);U!=null&&(g.push(w),y.set(w,U))}}const E=new Mr(g);return new h1(y,E,c.fieldTransforms)}function p4(n,e,t,a=!1){return qc(t,n.createContext(a?4:3,e))}function qc(n,e){if(y1(n=xn(n)))return v_("Unsupported field value:",e,n),g1(n,e);if(n instanceof y_)return(function(a,s){if(!f1(s.dataSource))throw s.createError(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,s){const l=[];let c=0;for(const d of a){let m=qc(d,s.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(a,s){if((a=xn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return ZO(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Zt.fromDate(a);return{timestampValue:hd(s.serializer,l)}}if(a instanceof Zt){const l=new Zt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:hd(s.serializer,l)}}if(a instanceof qi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ni)return{bytesValue:Pw(s.serializer,a._byteString)};if(a instanceof mn){const l=s.databaseId,c=a.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Zy(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof bi)return(function(c,d){const m=c instanceof bi?c.toArray():c;return{mapValue:{fields:{[uw]:{stringValue:cw},[sd]:{arrayValue:{values:m.map((y=>{if(typeof y!="number")throw d.createError("VectorValues must only contain numeric values.");return Qy(d.serializer,y)}))}}}}}})(a,s);if(Bw(a))return a._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Ud(a)}`)})(n,e)}function g1(n,e){const t={};return rw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(n,((a,s)=>{const l=qc(s,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function y1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Zt||n instanceof qi||n instanceof ni||n instanceof mn||n instanceof y_||n instanceof bi||Bw(n))}function v_(n,e,t){if(!y1(t)||!tw(t)){const a=Ud(t);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function Ll(n,e,t){if((e=xn(e))instanceof Zd)return e._internalPath;if(typeof e=="string")return _1(n,e);throw gd("Field path arguments must be of type string or ",n,!1,void 0,t)}const g4=new RegExp("[~\\*/\\[\\]]");function _1(n,e,t){if(e.search(g4)>=0)throw gd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zd(...e.split("."))._internalPath}catch{throw gd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gd(n,e,t,a,s){const l=a&&!a.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${a}`),c&&(m+=` in document ${s}`),m+=")"),new Ne(fe.INVALID_ARGUMENT,d+n+m)}function v1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return xs(e,((s,l)=>{a[s]=this.convertValue(l,t)})),a}convertVectorValue(e){var a,s,l;const t=(l=(s=(a=e.fields)==null?void 0:a[sd].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>vn(c.doubleValue)));return new bi(t)}convertGeoPoint(e){return new qi(vn(e.latitude),vn(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Hd(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(vc(e));default:return null}}convertTimestamp(e){const t=ws(e);return new Zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Qt.fromString(e);Pt(zw(a),9688,{name:e});const s=new Ec(a.get(1),a.get(3)),l=new Ge(a.popFirst(5));return s.isEqual(t)||wa(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_ extends y4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ni(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}const rS="@firebase/firestore",iS="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(n){return(function(t,a){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of a)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Ll("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _4 extends E1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ne(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class T_{}class v4 extends T_{}function Gc(n,e,...t){let a=[];e instanceof T_&&a.push(e),a=a.concat(t),(function(l){const c=l.filter((m=>m instanceof S_)).length,d=l.filter((m=>m instanceof nm)).length;if(c>1||c>0&&d>0)throw new Ne(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const s of a)n=s._apply(n);return n}class nm extends v4{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new nm(e,t,a)}_apply(e){const t=this._parse(e);return b1(e._query,t),new Ao(e.firestore,e.converter,sy(e._query,t))}_parse(e){const t=em(e.firestore);return(function(l,c,d,m,g,y,E){let S;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){oS(E,y);const M=[];for(const B of E)M.push(sS(m,l,B));S={arrayValue:{values:M}}}else S=sS(m,l,E)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||oS(E,y),S=p4(d,c,E,y==="in"||y==="not-in");return Rn.create(g,y,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function b_(n,e,t){const a=e,s=Ll("where",n);return nm._create(s,a,t)}class S_ extends T_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new S_(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:Ai.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const m of d)b1(c,m),c=sy(c,m)})(e._query,t),new Ao(e.firestore,e.converter,sy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function sS(n,e,t){if(typeof(t=xn(t))=="string"){if(t==="")throw new Ne(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_w(e)&&t.indexOf("/")!==-1)throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Qt.fromString(t));if(!Ge.isDocumentKey(a))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return E0(n,new Ge(a))}if(t instanceof mn)return E0(n,t._key);throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ud(t)}.`)}function oS(n,e){if(!Array.isArray(n)||n.length===0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b1(n,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ne(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function S1(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}class nc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uo extends E1{constructor(e,t,a,s,l,c){super(e,t,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Ll("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=uo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",uo._jsonSchema={type:In("string",uo._jsonSchemaVersion),bundleSource:In("string","DocumentSnapshot"),bundleName:In("string"),bundle:In("string")};class Uf extends uo{data(e={}){return super.data(e)}}class co{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new nc(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Uf(this._firestore,this._userDataWriter,a.key,a,new nc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const m=new Uf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new nc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Uf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new nc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,y=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:E4(d.type),doc:m,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function E4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */co._jsonSchemaVersion="firestore/querySnapshot/1.0",co._jsonSchema={type:In("string",co._jsonSchemaVersion),bundleSource:In("string","QuerySnapshot"),bundleName:In("string"),bundle:In("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=em(e)}set(e,t,a){this._verifyNotCommitted();const s=kg(e,this._firestore),l=S1(s.converter,t,a),c=d1(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,a);return this._mutations.push(c.toMutation(s._key,jr.none())),this}update(e,t,a,...s){this._verifyNotCommitted();const l=kg(e,this._firestore);let c;return c=typeof(t=xn(t))=="string"||t instanceof Zd?p1(this._dataReader,"WriteBatch.update",l._key,t,a,s):m1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,jr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kg(e,this._firestore);return this._mutations=this._mutations.concat(new Xy(t._key,jr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kg(n,e){if((n=xn(n)).firestore!==e)throw new Ne(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){n=Vr(n,mn);const e=Vr(n.firestore,Ns),t=Fc(e);return i4(t,n._key).then((a=>w1(e,n,a)))}function Kc(n){n=Vr(n,Ao);const e=Vr(n.firestore,Ns),t=Fc(e),a=new E_(e);return T1(n._query),a4(t,n._query).then((s=>new co(e,a,n,s)))}function A_(n,e,t){n=Vr(n,mn);const a=Vr(n.firestore,Ns),s=S1(n.converter,e,t),l=em(a);return w_(a,[d1(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,jr.none())])}function A1(n,e,t,...a){n=Vr(n,mn);const s=Vr(n.firestore,Ns),l=em(s);let c;return c=typeof(e=xn(e))=="string"||e instanceof Zd?p1(l,"updateDoc",n._key,e,t,a):m1(l,"updateDoc",n._key,e),w_(s,[c.toMutation(n._key,jr.exists(!0))])}function b4(n,...e){var g,y,E;n=xn(n);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||aS(e[a])||(t=e[a++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(aS(e[a])){const S=e[a];e[a]=(g=S.next)==null?void 0:g.bind(S),e[a+1]=(y=S.error)==null?void 0:y.bind(S),e[a+2]=(E=S.complete)==null?void 0:E.bind(S)}let l,c,d;if(n instanceof mn)c=Vr(n.firestore,Ns),d=Fd(n._key.path),l={next:S=>{e[a]&&e[a](w1(c,n,S))},error:e[a+1],complete:e[a+2]};else{const S=Vr(n,Ao);c=Vr(S.firestore,Ns),d=S._query;const w=new E_(c);l={next:M=>{e[a]&&e[a](new co(c,w,S,M))},error:e[a+1],complete:e[a+2]},T1(n._query)}const m=Fc(c);return r4(m,d,s,l)}function w_(n,e){const t=Fc(n);return s4(t,e)}function w1(n,e,t){const a=t.docs.get(e._key),s=new E_(n);return new uo(n,s,e._key,a,new nc(t.hasPendingWrites,t.fromCache),e.converter)}function C1(n){return n=Vr(n,Ns),Fc(n),new T4(n,(e=>w_(n,e)))}(function(e,t=!0){sO(Gl),xl(new po("firestore",((a,{instanceIdentifier:s,options:l})=>{const c=a.getProvider("app").getImmediate(),d=new Ns(new uO(a.getProvider("auth-internal")),new fO(c,a.getProvider("app-check-internal")),DO(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Es(rS,iS,e),Es(rS,iS,"esm2020")})();var S4="firebase",A4="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Es(S4,A4,"app");function R1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w4=R1,I1=new Pc("auth","Firebase",R1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Uy("@firebase/auth");function C4(n,...e){yd.logLevel<=Et.WARN&&yd.warn(`Auth (${Gl}): ${n}`,...e)}function zf(n,...e){yd.logLevel<=Et.ERROR&&yd.error(`Auth (${Gl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n,...e){throw R_(n,...e)}function Si(n,...e){return R_(n,...e)}function C_(n,e,t){const a={...w4(),[e]:t};return new Pc("auth","Firebase",a).create(e,{appName:n.name})}function ho(n){return C_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function R4(n,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Yi(n,"argument-error"),C_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function R_(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return I1.create(n,...e)}function We(n,e,...t){if(!n)throw R_(e,...t)}function va(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zf(e),new Error(e)}function Ra(n,e){n||va(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function I4(){return lS()==="http:"||lS()==="https:"}function lS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(I4()||Ux()||"connection"in navigator)?navigator.onLine:!0}function N4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ra(t>e,"Short delay should be less than long delay!"),this.isMobile=Vx()||zx()}get(){return D4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(n,e){Ra(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;va("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;va("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;va("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],M4=new Yc(3e4,6e4);function D_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Xl(n,e,t,a,s={}){return N1(n,s,async()=>{let l={},c={};a&&(e==="GET"?c=a:l={body:JSON.stringify(a)});const d=kc({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return Lx()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&ql(n.emulatorConfig.host)&&(g.credentials="include"),D1.fetch()(await x1(n,n.config.apiHost,t,d),g)})}async function N1(n,e,t){n._canInitEmulator=!1;const a={...x4,...e};try{const s=new k4(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw wf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw wf(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw wf(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw wf(n,"user-disabled",c);const y=a[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw C_(n,y,g);Yi(n,y)}}catch(s){if(s instanceof Na)throw s;Yi(n,"network-request-failed",{message:String(s)})}}async function P4(n,e,t,a,s={}){const l=await Xl(n,e,t,a,s);return"mfaPendingCredential"in l&&Yi(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function x1(n,e,t,a){const s=`${e}${t}?${a}`,l=n,c=l.config.emulator?I_(n.config,s):`${n.config.apiScheme}://${s}`;return O4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class k4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Si(this.auth,"network-request-failed")),M4.get())})}}function wf(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=Si(n,e,a);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(n,e){return Xl(n,"POST","/v1/accounts:delete",e)}async function _d(n,e){return Xl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function j4(n,e=!1){const t=xn(n),a=await t.getIdToken(e),s=N_(a);We(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:a,authTime:cc(Vg(s.auth_time)),issuedAtTime:cc(Vg(s.iat)),expirationTime:cc(Vg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Vg(n){return Number(n)*1e3}function N_(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return zf("JWT malformed, contained fewer than 3 sections"),null;try{const s=PA(t);return s?JSON.parse(s):(zf("Failed to decode base64 JWT payload"),null)}catch(s){return zf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function uS(n){const e=N_(n);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Na&&L4(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function L4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(n){var E;const e=n.auth,t=await n.getIdToken(),a=await Ac(n,_d(e,{idToken:t}));We(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?O1(s.providerUserInfo):[],c=B4(n.providerData,l),d=n.isAnonymous,m=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),g=d?m:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new _y(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function z4(n){const e=xn(n);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function B4(n,e){return[...n.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function O1(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H4(n,e){const t=await N1(n,{},async()=>{const a=kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await x1(n,s,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:a};return n.emulatorConfig&&ql(n.emulatorConfig.host)&&(m.credentials="include"),D1.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function F4(n,e){return Xl(n,"POST","/v2/accounts:revokeToken",D_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=uS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await H4(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,c=new Rl;return a&&(We(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&(We(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(We(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return va("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(n,e){We(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ti{constructor({uid:e,auth:t,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new U4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _y(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ac(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return j4(this,e)}reload(){return z4(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await vd(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vi(this.auth.app))return Promise.reject(ho(this.auth));const e=await this.getIdToken();return await Ac(this,V4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:w,providerData:M,stsTokenManager:B}=t;We(E&&B,e,"internal-error");const U=Rl.fromJSON(this.name,B);We(typeof E=="string",e,"internal-error"),ls(a,e.name),ls(s,e.name),We(typeof S=="boolean",e,"internal-error"),We(typeof w=="boolean",e,"internal-error"),ls(l,e.name),ls(c,e.name),ls(d,e.name),ls(m,e.name),ls(g,e.name),ls(y,e.name);const Y=new Ti({uid:E,auth:e,email:s,emailVerified:S,displayName:a,isAnonymous:w,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:U,createdAt:g,lastLoginAt:y});return M&&Array.isArray(M)&&(Y.providerData=M.map(z=>({...z}))),m&&(Y._redirectEventId=m),Y}static async _fromIdTokenResponse(e,t,a=!1){const s=new Rl;s.updateFromServerResponse(t);const l=new Ti({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await vd(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];We(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?O1(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),d=new Rl;d.updateFromIdToken(a);const m=new Ti({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new _y(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=new Map;function Ea(n){Ra(n instanceof Function,"Expected a class definition");let e=cS.get(n);return e?(Ra(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,cS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}M1.type="NONE";const hS=M1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(n,e,t){return`firebase:${n}:${e}:${t}`}class Il{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=Bf(this.userKey,s.apiKey,l),this.fullPersistenceKey=Bf("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await _d(this.auth,{idToken:e}).catch(()=>{});return t?Ti._fromGetAccountInfoResponse(this.auth,t,e):null}return Ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Il(Ea(hS),e,a);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||Ea(hS);const c=Bf(a,e.config.apiKey,e.name);let d=null;for(const g of t)try{const y=await g._get(c);if(y){let E;if(typeof y=="string"){const S=await _d(e,{idToken:y}).catch(()=>{});if(!S)break;E=await Ti._fromGetAccountInfoResponse(e,S,y)}else E=Ti._fromJSON(e,y);g!==l&&(d=E),l=g;break}}catch{}const m=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Il(l,e,a):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Il(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(P1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(U1(e))return"Blackberry";if(z1(e))return"Webos";if(k1(e))return"Safari";if((e.includes("chrome/")||V1(e))&&!e.includes("edge/"))return"Chrome";if(L1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function P1(n=rr()){return/firefox\//i.test(n)}function k1(n=rr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function V1(n=rr()){return/crios\//i.test(n)}function j1(n=rr()){return/iemobile/i.test(n)}function L1(n=rr()){return/android/i.test(n)}function U1(n=rr()){return/blackberry/i.test(n)}function z1(n=rr()){return/webos/i.test(n)}function x_(n=rr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function q4(n=rr()){var e;return x_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function G4(){return Bx()&&document.documentMode===10}function B1(n=rr()){return x_(n)||L1(n)||z1(n)||U1(n)||/windows phone/i.test(n)||j1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(n,e=[]){let t;switch(n){case"Browser":t=fS(rr());break;case"Worker":t=`${fS(rr())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Gl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K4(n,e={}){return Xl(n,"GET","/v2/passwordPolicy",D_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=6;class Q4{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Y4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dS(this),this.idTokenSubscription=new dS(this),this.beforeStateQueue=new $4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ea(t)),this._initializationPromise=this.queue(async()=>{var a,s,l;if(!this._deleted&&(this.persistenceManager=await Il.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _d(this,{idToken:e}),a=await Ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(vi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(a=m.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vi(this.app))return Promise.reject(ho(this));const t=e?xn(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vi(this.app)?Promise.reject(ho(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vi(this.app)?Promise.reject(ho(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ea(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await K4(this),t=new Q4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await F4(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ea(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await Il.create(this,[Ea(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,a,s);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=H1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&C4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function rm(n){return xn(n)}class dS{constructor(e){this.auth=e,this.observer=null,this.addObserver=Qx(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W4(n){O_=n}function J4(n){return O_.loadJS(n)}function Z4(){return O_.gapiScript}function ek(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(n,e){const t=By(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(mo(l,e??{}))return s;Yi(s,"already-initialized")}return t.initialize({options:e})}function nk(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(Ea);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function rk(n,e,t){const a=rm(n);We(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=F1(e),{host:c,port:d}=ik(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){We(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),We(mo(g,a.config.emulator)&&mo(y,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=y,a.settings.appVerificationDisabledForTesting=!0,ql(c)?(LA(`${l}//${c}${m}`),UA("Auth",!0)):ak()}function F1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ik(n){const e=F1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:mS(a.substr(l.length+1))}}else{const[l,c]=a.split(":");return{host:l,port:mS(c)}}}function mS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ak(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return va("not implemented")}_getIdTokenResponse(e){return va("not implemented")}_linkToIdToken(e,t){return va("not implemented")}_getReauthenticationResolver(e){return va("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(n,e){return P4(n,"POST","/v1/accounts:signInWithIdp",D_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="http://localhost";class _o extends q1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...l}=t;if(!a||!s)return null;const c=new _o(a,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Dl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Dl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Dl(e,t)}buildRequest(){const e={requestUri:sk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends M_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Qc{constructor(){super("facebook.com")}static credential(e){return _o._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends Qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _o._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return ya.credential(t,a)}catch{return null}}}ya.GOOGLE_SIGN_IN_METHOD="google.com";ya.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Qc{constructor(){super("github.com")}static credential(e){return _o._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Qc{constructor(){super("twitter.com")}static credential(e,t){return _o._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ms.credential(t,a)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await Ti._fromIdTokenResponse(e,a,s),c=pS(a);return new Ul({user:l,providerId:c,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=pS(a);return new Ul({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function pS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed extends Na{constructor(e,t,a,s){super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new Ed(e,t,a,s)}}function G1(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ed._fromErrorAndOperation(n,l,e,a):l})}async function ok(n,e,t=!1){const a=await Ac(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ul._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(n,e,t=!1){const{auth:a}=n;if(vi(a.app))return Promise.reject(ho(a));const s="reauthenticate";try{const l=await Ac(n,G1(a,s,e,n),t);We(l.idToken,a,"internal-error");const c=N_(l.idToken);We(c,a,"internal-error");const{sub:d}=c;return We(n.uid===d,a,"user-mismatch"),Ul._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Yi(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(n,e,t=!1){if(vi(n.app))return Promise.reject(ho(n));const a="signIn",s=await G1(n,a,e),l=await Ul._fromIdTokenResponse(n,a,s);return t||await n._updateCurrentUser(l.user),l}function ck(n,e,t,a){return xn(n).onIdTokenChanged(e,t,a)}function hk(n,e,t){return xn(n).beforeAuthStateChanged(e,t)}function fk(n,e,t,a){return xn(n).onAuthStateChanged(e,t,a)}const Td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Td,"1"),this.storage.removeItem(Td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=1e3,mk=10;class K1 extends $1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!t&&this.localCache[a]===c||this.notifyListeners(a,c)},l=this.storage.getItem(a);G4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,mk):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},dk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}K1.type="LOCAL";const pk=K1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1 extends $1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Y1.type="SESSION";const Q1=Y1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new im(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await gk(d);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}im.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=P_("",20);s.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(){return window}function _k(n){Gi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(){return typeof Gi().WorkerGlobalScope<"u"&&typeof Gi().importScripts=="function"}async function vk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ek(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Tk(){return X1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="firebaseLocalStorageDb",bk=1,bd="firebaseLocalStorage",J1="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function am(n,e){return n.transaction([bd],e?"readwrite":"readonly").objectStore(bd)}function Sk(){const n=indexedDB.deleteDatabase(W1);return new Xc(n).toPromise()}function vy(){const n=indexedDB.open(W1,bk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(bd,{keyPath:J1})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(bd)?e(a):(a.close(),await Sk(),e(await vy()))})})}async function gS(n,e,t){const a=am(n,!0).put({[J1]:e,value:t});return new Xc(a).toPromise()}async function Ak(n,e){const t=am(n,!1).get(e),a=await new Xc(t).toPromise();return a===void 0?null:a.value}function yS(n,e){const t=am(n,!0).delete(e);return new Xc(t).toPromise()}const wk=800,Ck=3;class Z1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>Ck)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=im._getInstance(Tk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await vk(),!this.activeServiceWorker)return;this.sender=new yk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ek()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vy();return await gS(e,Td,"1"),await yS(e,Td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>gS(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>Ak(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=am(s,!1).getAll();return new Xc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Z1.type="LOCAL";const Rk=Z1;new Yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(n,e){return e?Ea(e):(We(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends q1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Dl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ik(n){return uk(n.auth,new k_(n),n.bypassAuthState)}function Dk(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),lk(t,new k_(n),n.bypassAuthState)}async function Nk(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),ok(t,new k_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ik;case"linkViaPopup":case"linkViaRedirect":return Nk;case"reauthViaPopup":case"reauthViaRedirect":return Dk;default:Yi(this.auth,"internal-error")}}resolve(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=new Yc(2e3,1e4);async function Ok(n,e,t){if(vi(n.app))return Promise.reject(Si(n,"operation-not-supported-in-this-environment"));const a=rm(n);R4(n,e,M_);const s=eC(a,t);return new lo(a,"signInViaPopup",e,s).executeNotNull()}class lo extends tC{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){Ra(this.filter.length===1,"Popup operations only handle one event");const e=P_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xk.get())};e()}}lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="pendingRedirect",Hf=new Map;class Pk extends tC{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Hf.get(this.auth._key());if(!e){try{const a=await kk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Hf.set(this.auth._key(),e)}return this.bypassAuthState||Hf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kk(n,e){const t=Lk(e),a=jk(n);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}function Vk(n,e){Hf.set(n._key(),e)}function jk(n){return Ea(n._redirectPersistence)}function Lk(n){return Bf(Mk,n.config.apiKey,n.name)}async function Uk(n,e,t=!1){if(vi(n.app))return Promise.reject(ho(n));const a=rm(n),s=eC(a,e),c=await new Pk(a,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=600*1e3;class Bk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Hk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!nC(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(Si(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zk&&this.cachedEventUids.clear(),this.cachedEventUids.has(_S(e))}saveEventToCache(e){this.cachedEventUids.add(_S(e)),this.lastProcessedEventTime=Date.now()}}function _S(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Hk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(n,e={}){return Xl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gk=/^https?/;async function $k(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Fk(n);for(const t of e)try{if(Kk(t))return}catch{}Yi(n,"unauthorized-domain")}function Kk(n){const e=yy(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===a}if(!Gk.test(t))return!1;if(qk.test(n))return a===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new Yc(3e4,6e4);function vS(){const n=Gi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Qk(n){return new Promise((e,t)=>{var s,l,c;function a(){vS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vS(),t(Si(n,"network-request-failed"))},timeout:Yk.get()})}if((l=(s=Gi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Gi().gapi)!=null&&c.load)a();else{const d=ek("iframefcb");return Gi()[d]=()=>{gapi.load?a():t(Si(n,"network-request-failed"))},J4(`${Z4()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw Ff=null,e})}let Ff=null;function Xk(n){return Ff=Ff||Qk(n),Ff}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=new Yc(5e3,15e3),Jk="__/auth/iframe",Zk="emulator/auth/iframe",eV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nV(n){const e=n.config;We(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?I_(e,Zk):`https://${n.config.authDomain}/${Jk}`,a={apiKey:e.apiKey,appName:n.name,v:Gl},s=tV.get(n.config.apiHost);s&&(a.eid=s);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${kc(a).slice(1)}`}async function rV(n){const e=await Xk(n),t=Gi().gapi;return We(t,n,"internal-error"),e.open({where:document.body,url:nV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eV,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const c=Si(n,"network-request-failed"),d=Gi().setTimeout(()=>{l(c)},Wk.get());function m(){Gi().clearTimeout(d),s(a)}a.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aV=500,sV=600,oV="_blank",lV="http://localhost";class ES{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uV(n,e,t,a=aV,s=sV){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const m={...iV,width:a.toString(),height:s.toString(),top:l,left:c},g=rr().toLowerCase();t&&(d=V1(g)?oV:t),P1(g)&&(e=e||lV,m.scrollbars="yes");const y=Object.entries(m).reduce((S,[w,M])=>`${S}${w}=${M},`,"");if(q4(g)&&d!=="_self")return cV(e||"",d),new ES(null);const E=window.open(e||"",d,y);We(E,n,"popup-blocked");try{E.focus()}catch{}return new ES(E)}function cV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV="__/auth/handler",fV="emulator/auth/handler",dV=encodeURIComponent("fac");async function TS(n,e,t,a,s,l){We(n.config.authDomain,n,"auth-domain-config-required"),We(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:Gl,eventId:s};if(e instanceof M_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Yx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))c[y]=E}if(e instanceof Qc){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const m=await n._getAppCheckToken(),g=m?`#${dV}=${encodeURIComponent(m)}`:"";return`${mV(n)}?${kc(d).slice(1)}${g}`}function mV({config:n}){return n.emulator?I_(n,fV):`https://${n.authDomain}/${hV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="webStorageSupport";class pV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q1,this._completeRedirectFn=Uk,this._overrideRedirectResult=Vk}async _openPopup(e,t,a,s){var c;Ra((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await TS(e,t,a,yy(),s);return uV(e,l,P_())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await TS(e,t,a,yy(),s);return _k(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(Ra(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await rV(e),a=new Bk(e);return t.register("authEvent",s=>(We(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jg,{type:jg},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[jg];l!==void 0&&t(!!l),Yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$k(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return B1()||k1()||x_()}}const gV=pV;var bS="@firebase/auth",SS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vV(n){xl(new po("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=a.options;We(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:H1(n)},g=new X4(a,s,l,m);return nk(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),xl(new po("auth-internal",e=>{const t=rm(e.getProvider("auth").getImmediate());return(a=>new yV(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Es(bS,SS,_V(n)),Es(bS,SS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=300,TV=jA("authIdTokenMaxAge")||EV;let AS=null;const bV=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>TV)return;const s=t==null?void 0:t.token;AS!==s&&(AS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function SV(n=FA()){const e=By(n,"auth");if(e.isInitialized())return e.getImmediate();const t=tk(n,{popupRedirectResolver:gV,persistence:[Rk,pk,Q1]}),a=jA("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const c=bV(l.toString());hk(t,c,()=>c(t.currentUser)),ck(t,d=>c(d))}}const s=kA("auth");return s&&rk(t,`http://${s}`),t}function AV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}W4({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=s=>{const l=Si("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",AV().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vV("Browser");const wV={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function cl(n){const e=wV[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const CV={apiKey:cl("VITE_FIREBASE_API_KEY"),authDomain:cl("VITE_FIREBASE_AUTH_DOMAIN"),projectId:cl("VITE_FIREBASE_PROJECT_ID"),storageBucket:cl("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:cl("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:cl("VITE_FIREBASE_APP_ID")},rC=HA(CV),zl=SV(rC),RV=new ya,On=c4(rC),iC=P.createContext(void 0),IV=({children:n})=>{const[e,t]=P.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),a=P.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);P.useEffect(()=>{a(e)},[e,a]);const s=P.useCallback(c=>{t(c),a(c);const d=zl.currentUser;if(d){const m=si(On,"users",d.uid);A1(m,{preferredTheme:c}).catch(g=>console.error("Error updating preferred theme in Firebase:",g))}},[a]),l=P.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return P.useEffect(()=>zl.onAuthStateChanged(async d=>{if(d){const m=si(On,"users",d.uid),g=await $c(m);if(g.exists()&&g.data().preferredTheme){const y=g.data().preferredTheme;t(y),a(y)}}}),[a]),b.jsx(iC.Provider,{value:{theme:e,toggleTheme:l,setTheme:s},children:n})},DV="_spinner_5jyct_1",NV="_spinnerContainer_5jyct_19",wS={spinner:DV,spinnerContainer:NV},Wl=({container:n=!0})=>{const e=b.jsx("div",{className:wS.spinner});return n?b.jsx("div",{className:wS.spinnerContainer,children:e}):e},xV="_loadingContainer_1n1m5_1",OV={loadingContainer:xV},Bl=()=>b.jsx("div",{className:OV.loadingContainer,children:b.jsx(Wl,{container:!1})}),MV=()=>{const n=lt(a=>a.auth.firebaseUser),e=lt(a=>a.auth.userData);return lt(a=>a.auth.loading)?b.jsx(Bl,{}):n?e?e.isApproved?b.jsx(ys,{to:"/app/dashboard",replace:!0}):b.jsx(ys,{to:"/guest",replace:!0}):b.jsx(Bl,{}):b.jsx(ys,{to:"/login",replace:!0})};function $n(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var PV=typeof Symbol=="function"&&Symbol.observable||"@@observable",CS=PV,Lg=()=>Math.random().toString(36).substring(7).split("").join("."),kV={INIT:`@@redux/INIT${Lg()}`,REPLACE:`@@redux/REPLACE${Lg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Lg()}`},Sd=kV;function V_(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function aC(n,e,t){if(typeof n!="function")throw new Error($n(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error($n(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error($n(1));return t(aC)(n,e)}let a=n,s=e,l=new Map,c=l,d=0,m=!1;function g(){c===l&&(c=new Map,l.forEach((U,Y)=>{c.set(Y,U)}))}function y(){if(m)throw new Error($n(3));return s}function E(U){if(typeof U!="function")throw new Error($n(4));if(m)throw new Error($n(5));let Y=!0;g();const z=d++;return c.set(z,U),function(){if(Y){if(m)throw new Error($n(6));Y=!1,g(),c.delete(z),l=null}}}function S(U){if(!V_(U))throw new Error($n(7));if(typeof U.type>"u")throw new Error($n(8));if(typeof U.type!="string")throw new Error($n(17));if(m)throw new Error($n(9));try{m=!0,s=a(s,U)}finally{m=!1}return(l=c).forEach(z=>{z()}),U}function w(U){if(typeof U!="function")throw new Error($n(10));a=U,S({type:Sd.REPLACE})}function M(){const U=E;return{subscribe(Y){if(typeof Y!="object"||Y===null)throw new Error($n(11));function z(){const ne=Y;ne.next&&ne.next(y())}return z(),{unsubscribe:U(z)}},[CS](){return this}}}return S({type:Sd.INIT}),{dispatch:S,subscribe:E,getState:y,replaceReducer:w,[CS]:M}}function VV(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Sd.INIT})>"u")throw new Error($n(12));if(typeof t(void 0,{type:Sd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error($n(13))})}function jV(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const a=Object.keys(t);let s;try{VV(t)}catch(l){s=l}return function(c={},d){if(s)throw s;let m=!1;const g={};for(let y=0;y<a.length;y++){const E=a[y],S=t[E],w=c[E],M=S(w,d);if(typeof M>"u")throw d&&d.type,new Error($n(14));g[E]=M,m=m||M!==w}return m=m||a.length!==Object.keys(c).length,m?g:c}}function Ad(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...a)=>e(t(...a)))}function LV(...n){return e=>(t,a)=>{const s=e(t,a);let l=()=>{throw new Error($n(15))};const c={getState:s.getState,dispatch:(m,...g)=>l(m,...g)},d=n.map(m=>m(c));return l=Ad(...d)(s.dispatch),{...s,dispatch:l}}}function UV(n){return V_(n)&&"type"in n&&typeof n.type=="string"}var sC=Symbol.for("immer-nothing"),RS=Symbol.for("immer-draftable"),or=Symbol.for("immer-state");function Ei(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Pr=Object,Hl=Pr.getPrototypeOf,wd="constructor",sm="prototype",Ey="configurable",Cd="enumerable",qf="writable",wc="value",Ia=n=>!!n&&!!n[or];function wi(n){var e;return n?oC(n)||lm(n)||!!n[RS]||!!((e=n[wd])!=null&&e[RS])||um(n)||cm(n):!1}var zV=Pr[sm][wd].toString(),IS=new WeakMap;function oC(n){if(!n||!j_(n))return!1;const e=Hl(n);if(e===null||e===Pr[sm])return!0;const t=Pr.hasOwnProperty.call(e,wd)&&e[wd];if(t===Object)return!0;if(!vl(t))return!1;let a=IS.get(t);return a===void 0&&(a=Function.toString.call(t),IS.set(t,a)),a===zV}function om(n,e,t=!0){Wc(n)===0?(t?Reflect.ownKeys(n):Pr.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((a,s)=>e(s,a,n))}function Wc(n){const e=n[or];return e?e.type_:lm(n)?1:um(n)?2:cm(n)?3:0}var DS=(n,e,t=Wc(n))=>t===2?n.has(e):Pr[sm].hasOwnProperty.call(n,e),Ty=(n,e,t=Wc(n))=>t===2?n.get(e):n[e],Rd=(n,e,t,a=Wc(n))=>{a===2?n.set(e,t):a===3?n.add(t):n[e]=t};function BV(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var lm=Array.isArray,um=n=>n instanceof Map,cm=n=>n instanceof Set,j_=n=>typeof n=="object",vl=n=>typeof n=="function",Ug=n=>typeof n=="boolean";function HV(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var ga=n=>n.copy_||n.base_,L_=n=>n.modified_?n.copy_:n.base_;function by(n,e){if(um(n))return new Map(n);if(cm(n))return new Set(n);if(lm(n))return Array[sm].slice.call(n);const t=oC(n);if(e===!0||e==="class_only"&&!t){const a=Pr.getOwnPropertyDescriptors(n);delete a[or];let s=Reflect.ownKeys(a);for(let l=0;l<s.length;l++){const c=s[l],d=a[c];d[qf]===!1&&(d[qf]=!0,d[Ey]=!0),(d.get||d.set)&&(a[c]={[Ey]:!0,[qf]:!0,[Cd]:d[Cd],[wc]:n[c]})}return Pr.create(Hl(n),a)}else{const a=Hl(n);if(a!==null&&t)return{...n};const s=Pr.create(a);return Pr.assign(s,n)}}function U_(n,e=!1){return hm(n)||Ia(n)||!wi(n)||(Wc(n)>1&&Pr.defineProperties(n,{set:Cf,add:Cf,clear:Cf,delete:Cf}),Pr.freeze(n),e&&om(n,(t,a)=>{U_(a,!0)},!1)),n}function FV(){Ei(2)}var Cf={[wc]:FV};function hm(n){return n===null||!j_(n)?!0:Pr.isFrozen(n)}var Id="MapSet",Sy="Patches",NS="ArrayMethods",lC={};function vo(n){const e=lC[n];return e||Ei(0,n),e}var xS=n=>!!lC[n],Cc,uC=()=>Cc,qV=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:xS(Id)?vo(Id):void 0,arrayMethodsPlugin_:xS(NS)?vo(NS):void 0});function OS(n,e){e&&(n.patchPlugin_=vo(Sy),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function Ay(n){wy(n),n.drafts_.forEach(GV),n.drafts_=null}function wy(n){n===Cc&&(Cc=n.parent_)}var MS=n=>Cc=qV(Cc,n);function GV(n){const e=n[or];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function PS(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[or].modified_&&(Ay(e),Ei(4)),wi(n)&&(n=kS(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[or].base_,n,e)}else n=kS(e,t);return $V(e,n,!0),Ay(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==sC?n:void 0}function kS(n,e){if(hm(e))return e;const t=e[or];if(!t)return Dd(e,n.handledSet_,n);if(!fm(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:a}=t;if(a)for(;a.length>0;)a.pop()(n);fC(t,n)}return t.copy_}function $V(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&U_(e,t)}function cC(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var fm=(n,e)=>n.scope_===e,KV=[];function hC(n,e,t,a){const s=ga(n),l=n.type_;if(a!==void 0&&Ty(s,a,l)===e){Rd(s,a,t,l);return}if(!n.draftLocations_){const d=n.draftLocations_=new Map;om(s,(m,g)=>{if(Ia(g)){const y=d.get(g)||[];y.push(m),d.set(g,y)}})}const c=n.draftLocations_.get(e)??KV;for(const d of c)Rd(s,d,t,l)}function YV(n,e,t){n.callbacks_.push(function(s){var d;const l=e;if(!l||!fm(l,s))return;(d=s.mapSetPlugin_)==null||d.fixSetContents(l);const c=L_(l);hC(n,l.draft_??l,c,t),fC(l,s)})}function fC(n,e){var a;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((a=n.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const l=s.getPath(n);l&&s.generatePatches_(n,l,e)}cC(n)}}function QV(n,e,t){const{scope_:a}=n;if(Ia(t)){const s=t[or];fm(s,a)&&s.callbacks_.push(function(){Gf(n);const c=L_(s);hC(n,t,c,e)})}else wi(t)&&n.callbacks_.push(function(){const l=ga(n);n.type_===3?l.has(t)&&Dd(t,a.handledSet_,a):Ty(l,e,n.type_)===t&&a.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&Dd(Ty(n.copy_,e,n.type_),a.handledSet_,a)})}function Dd(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Ia(n)||e.has(n)||!wi(n)||hm(n)||(e.add(n),om(n,(a,s)=>{if(Ia(s)){const l=s[or];if(fm(l,t)){const c=L_(l);Rd(n,a,c,n.type_),cC(l)}}else wi(s)&&Dd(s,e,t)})),n}function XV(n,e){const t=lm(n),a={type_:t?1:0,scope_:e?e.scope_:uC(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,l=Nd;t&&(s=[a],l=Rc);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return a.draft_=d,a.revoke_=c,[d,a]}var Nd={get(n,e){if(e===or)return n;let t=n.scope_.arrayMethodsPlugin_;const a=n.type_===1&&typeof e=="string";if(a&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=ga(n);if(!DS(s,e,n.type_))return WV(n,s,e);const l=s[e];if(n.finalized_||!wi(l)||a&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&HV(e))return l;if(l===zg(n.base_,e)){Gf(n);const c=n.type_===1?+e:e,d=Ry(n.scope_,l,n,c);return n.copy_[c]=d}return l},has(n,e){return e in ga(n)},ownKeys(n){return Reflect.ownKeys(ga(n))},set(n,e,t){const a=dC(ga(n),e);if(a!=null&&a.set)return a.set.call(n.draft_,t),!0;if(!n.modified_){const s=zg(ga(n),e),l=s==null?void 0:s[or];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(BV(t,s)&&(t!==void 0||DS(n.base_,e,n.type_)))return!0;Gf(n),Cy(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),QV(n,e,t)),!0},deleteProperty(n,e){return Gf(n),zg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),Cy(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=ga(n),a=Reflect.getOwnPropertyDescriptor(t,e);return a&&{[qf]:!0,[Ey]:n.type_!==1||e!=="length",[Cd]:a[Cd],[wc]:t[e]}},defineProperty(){Ei(11)},getPrototypeOf(n){return Hl(n.base_)},setPrototypeOf(){Ei(12)}},Rc={};for(let n in Nd){let e=Nd[n];Rc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}Rc.deleteProperty=function(n,e){return Rc.set.call(this,n,e,void 0)};Rc.set=function(n,e,t){return Nd.set.call(this,n[0],e,t,n[0])};function zg(n,e){const t=n[or];return(t?ga(t):n)[e]}function WV(n,e,t){var s;const a=dC(e,t);return a?wc in a?a[wc]:(s=a.get)==null?void 0:s.call(n.draft_):void 0}function dC(n,e){if(!(e in n))return;let t=Hl(n);for(;t;){const a=Object.getOwnPropertyDescriptor(t,e);if(a)return a;t=Hl(t)}}function Cy(n){n.modified_||(n.modified_=!0,n.parent_&&Cy(n.parent_))}function Gf(n){n.copy_||(n.assigned_=new Map,n.copy_=by(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var JV=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{if(vl(e)&&!vl(t)){const l=t;t=e;const c=this;return function(m=l,...g){return c.produce(m,y=>t.call(this,y,...g))}}vl(t)||Ei(6),a!==void 0&&!vl(a)&&Ei(7);let s;if(wi(e)){const l=MS(this),c=Ry(l,e,void 0);let d=!0;try{s=t(c),d=!1}finally{d?Ay(l):wy(l)}return OS(l,a),PS(s,l)}else if(!e||!j_(e)){if(s=t(e),s===void 0&&(s=e),s===sC&&(s=void 0),this.autoFreeze_&&U_(s,!0),a){const l=[],c=[];vo(Sy).generateReplacementPatches_(e,s,{patches_:l,inversePatches_:c}),a(l,c)}return s}else Ei(1,e)},this.produceWithPatches=(e,t)=>{if(vl(e))return(c,...d)=>this.produceWithPatches(c,m=>e(m,...d));let a,s;return[this.produce(e,t,(c,d)=>{a=c,s=d}),a,s]},Ug(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),Ug(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),Ug(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){wi(n)||Ei(8),Ia(n)&&(n=ZV(n));const e=MS(this),t=Ry(e,n,void 0);return t[or].isManual_=!0,wy(e),t}finishDraft(n,e){const t=n&&n[or];(!t||!t.isManual_)&&Ei(9);const{scope_:a}=t;return OS(a,e),PS(void 0,a)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const a=vo(Sy).applyPatches_;return Ia(n)?a(n,e):this.produce(n,s=>a(s,e))}};function Ry(n,e,t,a){const[s,l]=um(e)?vo(Id).proxyMap_(e,t):cm(e)?vo(Id).proxySet_(e,t):XV(e,t);return((t==null?void 0:t.scope_)??uC()).drafts_.push(s),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=a,t&&a!==void 0?YV(t,l,a):l.callbacks_.push(function(m){var y;(y=m.mapSetPlugin_)==null||y.fixSetContents(l);const{patchPlugin_:g}=m;l.modified_&&g&&g.generatePatches_(l,[],m)}),s}function ZV(n){return Ia(n)||Ei(10,n),mC(n)}function mC(n){if(!wi(n)||hm(n))return n;const e=n[or];let t,a=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=by(n,e.scope_.immer_.useStrictShallowCopy_),a=e.scope_.immer_.shouldUseStrictIteration()}else t=by(n,!0);return om(t,(s,l)=>{Rd(t,s,mC(l))},a),e&&(e.finalized_=!1),t}var ej=new JV,pC=ej.produce;function gC(n){return({dispatch:t,getState:a})=>s=>l=>typeof l=="function"?l(t,a,n):s(l)}var tj=gC(),nj=gC,rj=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ad:Ad.apply(null,arguments)},ij=n=>n&&typeof n.match=="function";function hc(n,e){function t(...a){if(e){let s=e(...a);if(!s)throw new Error(ba(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:a[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=a=>UV(a)&&a.type===n,t}var yC=class rc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,rc.prototype)}static get[Symbol.species](){return rc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new rc(...e[0].concat(this)):new rc(...e.concat(this))}};function VS(n){return wi(n)?pC(n,()=>{}):n}function Rf(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function aj(n){return typeof n=="boolean"}var sj=()=>function(e){const{thunk:t=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=e??{};let c=new yC;return t&&(aj(t)?c.push(tj):c.push(nj(t.extraArgument))),c},oj="RTK_autoBatch",jS=n=>e=>{setTimeout(e,n)},lj=(n={type:"raf"})=>e=>(...t)=>{const a=e(...t);let s=!0,l=!1,c=!1;const d=new Set,m=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:jS(10):n.type==="callback"?n.queueNotification:jS(n.timeout),g=()=>{c=!1,l&&(l=!1,d.forEach(y=>y()))};return Object.assign({},a,{subscribe(y){const E=()=>s&&y(),S=a.subscribe(E);return d.add(y),()=>{S(),d.delete(y)}},dispatch(y){var E;try{return s=!((E=y==null?void 0:y.meta)!=null&&E[oj]),l=!s,l&&(c||(c=!0,m(g))),a.dispatch(y)}finally{s=!0}}})},uj=n=>function(t){const{autoBatch:a=!0}=t??{};let s=new yC(n);return a&&s.push(lj(typeof a=="object"?a:void 0)),s};function cj(n){const e=sj(),{reducer:t=void 0,middleware:a,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(V_(t))d=jV(t);else throw new Error(ba(1));let m;typeof a=="function"?m=a(e):m=e();let g=Ad;s&&(g=rj({trace:!1,...typeof s=="object"&&s}));const y=LV(...m),E=uj(y);let S=typeof c=="function"?c(E):E();const w=g(...S);return aC(d,l,w)}function _C(n){const e={},t=[];let a;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(ba(28));if(d in e)throw new Error(ba(29));return e[d]=c,s},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return t.push({matcher:l,reducer:c}),s},addDefaultCase(l){return a=l,s}};return n(s),[e,t,a]}function hj(n){return typeof n=="function"}function fj(n,e){let[t,a,s]=_C(e),l;if(hj(n))l=()=>VS(n());else{const d=VS(n);l=()=>d}function c(d=l(),m){let g=[t[m.type],...a.filter(({matcher:y})=>y(m)).map(({reducer:y})=>y)];return g.filter(y=>!!y).length===0&&(g=[s]),g.reduce((y,E)=>{if(E)if(Ia(y)){const w=E(y,m);return w===void 0?y:w}else{if(wi(y))return pC(y,S=>E(S,m));{const S=E(y,m);if(S===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return y},d)}return c.getInitialState=l,c}var dj=(n,e)=>ij(n)?n.match(e):n(e);function mj(...n){return e=>n.some(t=>dj(t,e))}var pj="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",gj=(n=21)=>{let e="",t=n;for(;t--;)e+=pj[Math.random()*64|0];return e},yj=["name","message","stack","code"],Bg=class{constructor(n,e){lg(this,"_type");this.payload=n,this.meta=e}},LS=class{constructor(n,e){lg(this,"_type");this.payload=n,this.meta=e}},_j=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of yj)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},US="External signal was aborted",Ur=(()=>{function n(e,t,a){const s=hc(e+"/fulfilled",(m,g,y,E)=>({payload:m,meta:{...E||{},arg:y,requestId:g,requestStatus:"fulfilled"}})),l=hc(e+"/pending",(m,g,y)=>({payload:void 0,meta:{...y||{},arg:g,requestId:m,requestStatus:"pending"}})),c=hc(e+"/rejected",(m,g,y,E,S)=>({payload:E,error:(a&&a.serializeError||_j)(m||"Rejected"),meta:{...S||{},arg:y,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(m==null?void 0:m.name)==="AbortError",condition:(m==null?void 0:m.name)==="ConditionError"}}));function d(m,{signal:g}={}){return(y,E,S)=>{const w=a!=null&&a.idGenerator?a.idGenerator(m):gj(),M=new AbortController;let B,U;function Y(Q){U=Q,M.abort()}g&&(g.aborted?Y(US):g.addEventListener("abort",()=>Y(US),{once:!0}));const z=(async function(){var ue,G;let Q;try{let A=(ue=a==null?void 0:a.condition)==null?void 0:ue.call(a,m,{getState:E,extra:S});if(Ej(A)&&(A=await A),A===!1||M.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const R=new Promise((N,x)=>{B=()=>{x({name:"AbortError",message:U||"Aborted"})},M.signal.addEventListener("abort",B,{once:!0})});y(l(w,m,(G=a==null?void 0:a.getPendingMeta)==null?void 0:G.call(a,{requestId:w,arg:m},{getState:E,extra:S}))),Q=await Promise.race([R,Promise.resolve(t(m,{dispatch:y,getState:E,extra:S,requestId:w,signal:M.signal,abort:Y,rejectWithValue:(N,x)=>new Bg(N,x),fulfillWithValue:(N,x)=>new LS(N,x)})).then(N=>{if(N instanceof Bg)throw N;return N instanceof LS?s(N.payload,w,m,N.meta):s(N,w,m)})])}catch(A){Q=A instanceof Bg?c(null,w,m,A.payload,A.meta):c(A,w,m)}finally{B&&M.signal.removeEventListener("abort",B)}return a&&!a.dispatchConditionRejection&&c.match(Q)&&Q.meta.condition||y(Q),Q})();return Object.assign(z,{abort:Y,requestId:w,arg:m,unwrap(){return z.then(vj)}})}}return Object.assign(d,{pending:l,rejected:c,fulfilled:s,settled:mj(c,s),typePrefix:e})}return n.withTypes=()=>n,n})();function vj(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function Ej(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var Tj=Symbol.for("rtk-slice-createasyncthunk");function bj(n,e){return`${n}/${e}`}function Sj({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[Tj];return function(s){const{name:l,reducerPath:c=l}=s;if(!l)throw new Error(ba(11));const d=(typeof s.reducers=="function"?s.reducers(wj()):s.reducers)||{},m=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(ne,ue){const G=typeof ne=="string"?ne:ne.type;if(!G)throw new Error(ba(12));if(G in g.sliceCaseReducersByType)throw new Error(ba(13));return g.sliceCaseReducersByType[G]=ue,y},addMatcher(ne,ue){return g.sliceMatchers.push({matcher:ne,reducer:ue}),y},exposeAction(ne,ue){return g.actionCreators[ne]=ue,y},exposeCaseReducer(ne,ue){return g.sliceCaseReducersByName[ne]=ue,y}};m.forEach(ne=>{const ue=d[ne],G={reducerName:ne,type:bj(l,ne),createNotation:typeof s.reducers=="function"};Rj(ue)?Dj(G,ue,y,e):Cj(G,ue,y)});function E(){const[ne={},ue=[],G=void 0]=typeof s.extraReducers=="function"?_C(s.extraReducers):[s.extraReducers],A={...ne,...g.sliceCaseReducersByType};return fj(s.initialState,R=>{for(let N in A)R.addCase(N,A[N]);for(let N of g.sliceMatchers)R.addMatcher(N.matcher,N.reducer);for(let N of ue)R.addMatcher(N.matcher,N.reducer);G&&R.addDefaultCase(G)})}const S=ne=>ne,w=new Map,M=new WeakMap;let B;function U(ne,ue){return B||(B=E()),B(ne,ue)}function Y(){return B||(B=E()),B.getInitialState()}function z(ne,ue=!1){function G(R){let N=R[ne];return typeof N>"u"&&ue&&(N=Rf(M,G,Y)),N}function A(R=S){const N=Rf(w,ue,()=>new WeakMap);return Rf(N,R,()=>{const x={};for(const[O,k]of Object.entries(s.selectors??{}))x[O]=Aj(k,R,()=>Rf(M,R,Y),ue);return x})}return{reducerPath:ne,getSelectors:A,get selectors(){return A(G)},selectSlice:G}}const Q={name:l,reducer:U,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:Y,...z(c),injectInto(ne,{reducerPath:ue,...G}={}){const A=ue??c;return ne.inject({reducerPath:A,reducer:U},G),{...Q,...z(A,!0)}}};return Q}}function Aj(n,e,t,a){function s(l,...c){let d=e(l);return typeof d>"u"&&a&&(d=t()),n(d,...c)}return s.unwrapped=n,s}var wo=Sj();function wj(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function Cj({type:n,reducerName:e,createNotation:t},a,s){let l,c;if("reducer"in a){if(t&&!Ij(a))throw new Error(ba(17));l=a.reducer,c=a.prepare}else l=a;s.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?hc(n,c):hc(n))}function Rj(n){return n._reducerDefinitionType==="asyncThunk"}function Ij(n){return n._reducerDefinitionType==="reducerWithPrepare"}function Dj({type:n,reducerName:e},t,a,s){if(!s)throw new Error(ba(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:m,settled:g,options:y}=t,E=s(n,l,y);a.exposeAction(e,E),c&&a.addCase(E.fulfilled,c),d&&a.addCase(E.pending,d),m&&a.addCase(E.rejected,m),g&&a.addMatcher(E.settled,g),a.exposeCaseReducer(e,{fulfilled:c||If,pending:d||If,rejected:m||If,settled:g||If})}function If(){}function ba(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const Nj={positions:[],loading:!1,error:null,fetched:!1,isDirty:!1},Sa=Ur("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=si(On,"metadata","positions"),a=await $c(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),z_=Ur("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=si(On,"metadata","positions");return await A_(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),vC=wo({name:"positions",initialState:Nj,reducers:{updatePositionCustomLabels:(n,e)=>{const{positionName:t,labels:a}=e.payload,s=n.positions.find(l=>l.name===t);s&&(s.customLabels=a,n.isDirty=!0)},resetPositionsDirty:n=>{n.isDirty=!1}},extraReducers:n=>{n.addCase(Sa.pending,e=>{e.loading=!0,e.error=null}).addCase(Sa.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(Sa.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(z_.fulfilled,(e,t)=>{e.positions=t.payload,e.isDirty=!1})}}),{updatePositionCustomLabels:zS,resetPositionsDirty:xj}=vC.actions,Oj=vC.reducer,Mj={teams:[],loading:!1,error:null,fetched:!1},fo=Ur("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=si(On,"metadata","teams"),a=await $c(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),$f=Ur("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=si(On,"metadata","teams");return await A_(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),EC=wo({name:"teams",initialState:Mj,reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(fo.pending,e=>{e.loading=!0,e.error=null}).addCase(fo.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(fo.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase($f.pending,e=>{e.error=null}).addCase($f.fulfilled,(e,t)=>{e.teams=t.payload}).addCase($f.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:R9}=EC.actions,Pj=EC.reducer,kj=()=>{const n=ui(),{firebaseUser:e,userData:t,loading:a}=lt(m=>m.auth),{fetched:s,loading:l}=lt(m=>m.teams),{fetched:c,loading:d}=lt(m=>m.positions);return P.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!s&&!l&&n(fo()),!c&&!d&&n(Sa()))},[n,e,t,s,l,c,d]),a||t!=null&&t.isApproved&&(!s||!c)?b.jsx(Bl,{}):e?t?t.isApproved?b.jsx(wA,{}):b.jsx(ys,{to:"/guest",replace:!0}):b.jsx(Bl,{}):b.jsx(ys,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=(...n)=>n.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=n=>{const e=jj(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},m)=>P.createElement("svg",{ref:m,...Lj,width:e,height:e,stroke:n,strokeWidth:a?Number(t)*24/Number(e):t,className:TC("lucide",s),...!l&&!Uj(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,y])=>P.createElement(g,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=(n,e)=>{const t=P.forwardRef(({className:a,...s},l)=>P.createElement(zj,{ref:l,iconNode:e,className:TC(`lucide-${Vj(BS(n))}`,`lucide-${n}`,a),...s}));return t.displayName=BS(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],bC=zr("chevron-up",Bj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Fj=zr("circle-check",Hj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Gj=zr("copy",qj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],SC=zr("corner-down-right",$j);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Yj=zr("layout-grid",Kj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Xj=zr("moon",Qj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Jj=zr("panel-left-close",Wj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],eL=zr("panel-left-open",Zj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xd=zr("plus",tL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],rL=zr("sun",nL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],AC=zr("trash-2",iL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],sL=zr("users",aL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lL=zr("x",oL),uL=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},cL={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:uL(),lastVisitedPaths:{},rosterAllViewMode:"user"},wC=wo({name:"ui",initialState:cL,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setRosterAllViewMode:(n,e)=>{n.rosterAllViewMode=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:a}=e.payload;n.lastVisitedPaths[t]=a},toggleTeamExpansion:(n,e)=>{const t=e.payload,a=n.expandedTeams.indexOf(t);a>=0?n.expandedTeams.splice(a,1):n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:a,userEmail:s}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][a]||(n.hiddenUsers[t][a]=[]);const l=n.hiddenUsers[t][a],c=l.indexOf(s);c>=0?l.splice(c,1):l.push(s),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))}}}),{setMobileSidebarOpen:El,setDesktopSidebarExpanded:hL,setRosterAllViewMode:HS,setLastVisitedPath:fL,toggleTeamExpansion:dL,toggleUserVisibility:mL}=wC.actions,pL=wC.reducer,gL=()=>{const n=P.useContext(iC);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},yL="_themeToggleButton_yikav_1",_L={themeToggleButton:yL},dm=({showText:n,className:e})=>{const{theme:t,toggleTheme:a}=gL();return b.jsxs("button",{className:`${_L.themeToggleButton} ${e||""}`,onClick:a,"aria-label":"Toggle theme",children:[t==="dark"?b.jsx(rL,{size:20}):b.jsx(Xj,{size:20}),n&&b.jsx("span",{children:"Toggle theme"})]})},vL="_mobileHeader_rrb9m_1",EL="_mobileHeaderPill_rrb9m_16",TL="_mobileHeaderPillDisabled_rrb9m_28",bL="_mobileHeaderPillActive_rrb9m_32",SL="_mobileHeaderText_rrb9m_43",AL="_mobileHeaderChevron_rrb9m_51",wL="_rotate_rrb9m_56",ro={mobileHeader:vL,mobileHeaderPill:EL,mobileHeaderPillDisabled:TL,mobileHeaderPillActive:bL,mobileHeaderText:SL,mobileHeaderChevron:AL,rotate:wL},CL=({title:n,hasSideNav:e=!0})=>{const t=ui(),{isMobileSidebarOpen:a}=lt(l=>l.ui),s=()=>{e&&t(El(!a))};return b.jsxs("header",{className:ro.mobileHeader,children:[b.jsxs("div",{className:`${ro.mobileHeaderPill} ${a?ro.mobileHeaderPillActive:""} ${e?"":ro.mobileHeaderPillDisabled}`,onClick:s,children:[b.jsx("span",{className:ro.mobileHeaderText,children:n}),e&&b.jsx(bC,{className:`${ro.mobileHeaderChevron} ${a?ro.rotate:""}`})]}),b.jsx(dm,{})]})};var on=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(on||{}),bl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(bl||{});const B_=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],FS=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],RL="_bottomNavContainer_mfegy_1",IL="_bottomNav_mfegy_1",DL="_bottomNavBtn_mfegy_18",NL="_bottomNavBtnActive_mfegy_42",Df={bottomNavContainer:RL,bottomNav:IL,bottomNavBtn:DL,bottomNavBtnActive:NL},xL=()=>{const n=To(),e=li(),{lastVisitedPaths:t}=lt(l=>l.ui),a=e.pathname.includes("/settings")?on.SETTINGS:e.pathname.includes("/dashboard")?on.DASHBOARD:on.ROSTER,s=l=>{if(a===l){l===on.DASHBOARD&&n("/app/dashboard");return}const c=t[l];n(c||`/app/${l}`)};return b.jsx("nav",{className:Df.bottomNavContainer,children:b.jsx("div",{className:Df.bottomNav,children:B_.map(l=>b.jsxs("button",{className:`${Df.bottomNavBtn} ${a===l.id?Df.bottomNavBtnActive:""}`,onClick:()=>s(l.id),children:[b.jsx("span",{children:l.icon}),b.jsx("span",{children:l.label})]},l.id))})})},OL="_sideNav_wbcy2_1",ML="_menuOpen_wbcy2_21",PL="_sidebarContent_wbcy2_27",kL="_tabletSidebarHeader_wbcy2_34",VL="_sideMenuList_wbcy2_38",jL="_sidenavMenuSubheading_wbcy2_43",LL="_sideNavItem_wbcy2_67",UL="_sideNavItemActive_wbcy2_95",zL="_sideEmoji_wbcy2_102",BL="_loading_wbcy2_109",HL="_sidebarToggleButton_wbcy2_116",FL="_sidebarFooter_wbcy2_117",qL="_sidebarCollapsed_wbcy2_173",GL="_adminOnlySectionWrapper_wbcy2_194",wt={sideNav:OL,menuOpen:ML,sidebarContent:PL,tabletSidebarHeader:kL,sideMenuList:VL,sidenavMenuSubheading:jL,sideNavItem:LL,sideNavItemActive:UL,sideEmoji:zL,loading:BL,sidebarToggleButton:HL,sidebarFooter:FL,sidebarCollapsed:qL,adminOnlySectionWrapper:GL},$L=()=>{var ue;const n=To(),e=li(),t=Vd(),a=ui(),{userData:s}=lt(G=>G.auth),{isDesktopSidebarExpanded:l,isMobileSidebarOpen:c,expandedTeams:d}=lt(G=>G.ui),{teams:m,fetched:g,loading:y}=lt(G=>G.teams),{fetched:E}=lt(G=>G.positions),S=e.pathname.includes("/settings")?on.SETTINGS:e.pathname.includes("/dashboard")?on.DASHBOARD:on.ROSTER,{teamName:w,positionName:M,section:B}=t,U=M||B;P.useEffect(()=>{g||a(fo()),E||a(Sa())},[a,g,E]);const Y=P.useCallback(G=>{n(G)},[n]),z=G=>{a(dL(G))},Q=()=>{const G=B_.find(R=>R.id===S),A=G?G.label:"GIG ROSTER";return w&&U?`${w}  ${U}`:w||(U?`${A}  ${U}`:A)},ne=[wt.sideNav,c?wt.menuOpen:"",l?"":wt.sidebarCollapsed].filter(Boolean).join(" ");return b.jsxs("aside",{className:ne,children:[b.jsxs("div",{className:wt.sidebarContent,children:[b.jsxs("div",{className:wt.tabletSidebarHeader,children:[l&&b.jsx("h3",{children:Q()}),b.jsx("button",{className:wt.sidebarToggleButton,onClick:()=>a(hL(!l)),"aria-label":l?"Collapse sidebar":"Expand sidebar",children:l?b.jsx(Jj,{size:20}):b.jsx(eL,{size:20})})]}),b.jsxs("nav",{className:wt.sideMenuList,children:[S===on.ROSTER&&y&&b.jsx("div",{className:`${wt.sideNavItem} ${wt.loading}`,children:"Loading teams..."}),S===on.ROSTER?(ue=s==null?void 0:s.teams)==null?void 0:ue.map(G=>{var x,O;const A=m.find(k=>k.name===G);if(!A)return null;const R=s.teams.length===1,N=R||d.includes(A.name);return b.jsxs("div",{children:[!R&&b.jsxs("div",{className:`${wt.sidenavMenuSubheading} ${wt.sidenavMenuSubheadingClickable}`,style:{cursor:"pointer"},onClick:()=>{z(A.name),Y(`/app/roster/${A.name}/All`)},children:[b.jsxs("div",{children:[A.emoji," ",l&&A.name]}),b.jsx("span",{className:wt.expandIcon,children:N?"":""})]}),N&&b.jsxs("div",{className:wt.sideNavSubItems,children:[b.jsxs("button",{className:`${wt.sideNavItem} ${wt.sideNavItemSub} ${U==="All"&&w===A.name?wt.sideNavItemActive:""}`,onClick:()=>{Y(`/app/roster/${A.name}/All`),a(El(!1))},style:{borderLeft:U==="All"&&w===A.name?"4px solid var(--color-primary)":"4px solid transparent",backgroundColor:U==="All"&&w===A.name?"var(--background-toggle-on-transparent)":"transparent",color:U==="All"&&w===A.name?"var(--color-primary)":""},children:[b.jsx("span",{className:wt.sideEmoji,children:""})," ",l&&"All"]}),(O=(x=A.positions)==null?void 0:x.filter(k=>!k.parentId))==null?void 0:O.map(k=>{const I=U===k.name&&w===A.name;return b.jsxs("button",{className:`${wt.sideNavItem} ${wt.sideNavItemSub} ${I?wt.sideNavItemActive:""}`,onClick:()=>{Y(`/app/roster/${A.name}/${k.name}`),a(El(!1))},style:{borderLeft:I?`4px solid ${k.colour}`:"4px solid transparent",backgroundColor:I?`${k.colour}15`:"transparent",color:I?k.colour:""},children:[b.jsx("span",{className:wt.sideEmoji,children:k.emoji})," ",l&&k.name]},k.name)}),b.jsxs("button",{className:`${wt.sideNavItem} ${wt.sideNavItemSub} ${U==="Absence"&&w===A.name?wt.sideNavItemActive:""}`,onClick:()=>{Y(`/app/roster/${A.name}/Absence`),a(El(!1))},style:{borderLeft:U==="Absence"&&w===A.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:U==="Absence"&&w===A.name?"var(--background-toggle-off-transparent)":"transparent"},children:[b.jsx("span",{className:wt.sideEmoji,children:""})," ",l&&"Absence"]})]})]},A.name)}):FS.filter(G=>!G.adminOnly).map(G=>b.jsxs("button",{className:`${wt.sideNavItem} ${U===G.id?wt.sideNavItemActive:""}`,onClick:()=>{Y(`/app/settings/${G.id}`),a(El(!1))},children:[b.jsx("span",{className:wt.sideEmoji,children:G.icon})," ",l&&G.label]},G.id))]})]}),(s==null?void 0:s.isAdmin)&&S===on.SETTINGS&&b.jsxs("div",{className:wt.adminOnlySectionWrapper,children:[b.jsx("div",{className:wt.sidenavMenuSubheading,children:l&&b.jsx("h4",{children:"Admin Only"})}),FS.filter(G=>G.adminOnly).map(G=>b.jsxs("button",{className:`${wt.sideNavItem} ${U===G.id?wt.sideNavItemActive:""}`,onClick:()=>{Y(`/app/settings/${G.id}`),a(El(!1))},children:[b.jsx("span",{className:wt.sideEmoji,children:G.icon})," ",l&&G.label]},G.id))]}),b.jsx("div",{className:wt.sidebarFooter,children:b.jsx(dm,{showText:l})})]})},KL="_layoutWrapper_1iqp0_1",YL="_innerWrapper_1iqp0_13",QL="_mainContent_1iqp0_21",hl={layoutWrapper:KL,innerWrapper:YL,mainContent:QL},XL=()=>{const n=ui(),e=To(),t=li(),a=Vd(),{userData:s}=lt(U=>U.auth),{teams:l}=lt(U=>U.teams),{isMobileSidebarOpen:c,isDesktopSidebarExpanded:d,lastVisitedPaths:m}=lt(U=>U.ui),g=t.pathname.includes("/settings")?on.SETTINGS:t.pathname.includes("/dashboard")?on.DASHBOARD:on.ROSTER,{teamName:y,positionName:E,section:S}=a,w=E||S||null,M=g!==on.DASHBOARD;P.useEffect(()=>{const U=g===on.ROSTER&&!y,Y=g===on.SETTINGS&&!w;if(t.pathname.startsWith("/app/")&&!U&&!Y&&g!==on.DASHBOARD){const z=t.pathname+t.search;n(fL({tabId:g,path:z}))}},[t.pathname,t.search,g,y,w,n]),P.useEffect(()=>{var Q;const U=t.pathname==="/app"||t.pathname==="/app/",Y=g===on.ROSTER&&!y,z=g===on.SETTINGS&&!w;if(U)e(m[on.DASHBOARD]||"/app/dashboard",{replace:!0});else if(Y){const ne=m[on.ROSTER];if(ne)e(ne,{replace:!0});else if((Q=s==null?void 0:s.teams)!=null&&Q[0]&&l.length>0){const ue=l.find(G=>G.name===s.teams[0]);ue&&e(`/app/roster/${ue.name}/All`,{replace:!0})}}else if(z){const ne=m[on.SETTINGS];e(ne||`/app/settings/${bl.PROFILE}`,{replace:!0})}},[g,y,w,s,l,e,t.pathname,t.search,m]);const B=()=>{const U=B_.find(z=>z.id===g),Y=U?U.label:"GIG ROSTER";return y&&w?`${y}  ${w}`:y||(w?`${Y}  ${w}`:Y)};return b.jsxs("div",{className:`${hl.layoutWrapper} ${c?hl.menuOpen:""} ${d?hl.sidebarExpanded:hl.sidebarCollapsed}`,children:[M&&b.jsx($L,{}),b.jsxs("div",{className:hl.innerWrapper,children:[b.jsx(CL,{title:B(),hasSideNav:M}),b.jsx("main",{className:hl.mainContent,children:b.jsx(wA,{})}),b.jsx(xL,{})]})]})},WL="_rosterSaveFooter_xkueo_1",JL="_saveFooterContent_xkueo_23",ZL="_changesLabel_xkueo_32",eU="_saveFooterActions_xkueo_37",tU="_saveBtn_xkueo_42",nU="_cancelBtn_xkueo_57",rU="_sidebarCollapsed_xkueo_77",iU="_noSidebar_xkueo_81",us={rosterSaveFooter:WL,saveFooterContent:JL,changesLabel:ZL,saveFooterActions:eU,saveBtn:tU,cancelBtn:nU,sidebarCollapsed:rU,noSidebar:iU},Jl=({label:n="You have unsaved changes",onSave:e,onCancel:t,isSaving:a,saveText:s="Save",discardText:l="Discard",hasSideNav:c=!0})=>{const{isDesktopSidebarExpanded:d}=lt(g=>g.ui),m=[us.rosterSaveFooter,c?"":us.noSidebar,!d&&c?us.sidebarCollapsed:""].filter(Boolean).join(" ");return b.jsx("div",{className:m,children:b.jsxs("div",{className:us.saveFooterContent,children:[b.jsx("span",{className:us.changesLabel,children:n}),b.jsxs("div",{className:us.saveFooterActions,children:[b.jsx("button",{className:us.cancelBtn,onClick:t,disabled:a,children:l}),b.jsx("button",{className:us.saveBtn,onClick:e,disabled:a,children:a?"Saving...":s})]})]})})},CC=n=>{const e=[];return Object.entries(n).forEach(([t,a])=>{a.forEach(s=>{e.push(`${t}|${s}`)})}),e},RC=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${a}`},Nl=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),aU={entries:{},dirtyEntries:{},loading:!1,saving:!1,error:null},fc=Ur("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Gc(Hc(On,"roster")),a=await Kc(t),s={};return a.docs.forEach(l=>{const c=l.data(),d=c.updatedAt,m={...c,updatedAt:d&&typeof d=="object"&&"toMillis"in d?d.toMillis():d};s[l.id]={...m,id:l.id}}),s}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),dc=Ur("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=C1(On),a=Date.now(),s={};return Object.values(n).forEach(l=>{const c=si(On,"roster",l.id),d={...l,updatedAt:a};t.set(c,d),s[l.id]=d}),await t.commit(),s}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),IC=wo({name:"roster",initialState:aU,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:a,userIdentifier:s,positionGroupNames:l,maxConflict:c}=e.payload,d=n.dirtyEntries[t]||n.entries[t];let m;d?m=JSON.parse(JSON.stringify(d)):m={id:t,date:t,teams:{},absence:{}},m.teams[a]||(m.teams[a]={});const g=m.teams[a][s]||[],y=l.findIndex(M=>g.includes(M)),E=y>=0?l[y]:null;let S=null;E===null?S=l[0]:y<l.length-1?S=l[y+1]:S=null;const w=g.filter(M=>!l.includes(M));if(S)if(w.length<c)w.push(S);else{n.error=`User already has ${c} assignment(s) in this team.`;return}w.length===0?delete m.teams[a][s]:m.teams[a][s]=w,n.dirtyEntries[t]=m},updateLocalEventName(n,e){const{date:t,eventName:a}=e.payload,s=n.dirtyEntries[t]||n.entries[t];let l;s?l=JSON.parse(JSON.stringify(s)):l={id:t,date:t,teams:{},absence:{}},l.eventName=a,n.dirtyEntries[t]=l},resetRosterEdits(n){n.dirtyEntries={},n.error=null},updateLocalAbsence(n,e){var m;const{date:t,userIdentifier:a,reason:s,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let d;c?d=JSON.parse(JSON.stringify(c)):d={id:t,date:t,teams:{},absence:{}},l?d.absence[a]={reason:s??((m=d.absence[a])==null?void 0:m.reason)??""}:delete d.absence[a],n.dirtyEntries[t]=d}},extraReducers:n=>{n.addCase(fc.pending,e=>{e.loading=!0,e.error=null}).addCase(fc.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(fc.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(dc.pending,e=>{e.saving=!0,e.error=null}).addCase(dc.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(dc.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:I9,updateLocalAssignment:sU,updateLocalEventName:oU,resetRosterEdits:DC,updateLocalAbsence:qS}=IC.actions,lU=IC.reducer,Kf=(n,e,t)=>{const a=[],s=new Date;s.setHours(0,0,0,0);const l=s.getFullYear(),c=e||l,d=t||l,m={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g=n.map(w=>m[w]);let y;c===l?y=new Date(s):y=new Date(c,0,1),y.setHours(0,0,0,0);const E=new Date(d,11,31);E.setHours(23,59,59,999);const S=new Date(y);for(;S.getTime()<=E.getTime();)g.includes(S.getDay())&&a.push(new Date(S)),S.setDate(S.getDate()+1);return a.sort((w,M)=>w.getTime()-M.getTime()),a.map(w=>RC(w))},uU=(n,e,t=5)=>{const a=[],s=new Date(e);s.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(m=>l[m]),d=new Date(s);for(;a.length<t;){d.setDate(d.getDate()-1),c.includes(d.getDay())&&a.push(new Date(d));const m=new Date(s);if(m.setFullYear(m.getFullYear()-1),d<m)break}return a.map(m=>RC(m)).sort()},cU={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},Yf=Ur("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=Hc(On,"users"),a=Gc(t,b_("teams","array-contains",n)),s=await Kc(a),l=[];return s.forEach(c=>{l.push(c.data())}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),Qf=Ur("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:a})=>{if(!n||!e)return[];try{const c=a().positions.positions.filter(w=>w.parentId===e),m=[e,...c.map(w=>w.name)].map(w=>`${n}|${w}`),g=Hc(On,"users"),y=Gc(g,b_("indexedAssignments","array-contains-any",m)),E=await Kc(y),S=[];return E.forEach(w=>{S.push(w.data())}),S.sort((w,M)=>(w.name||"").localeCompare(M.name||""))}catch(s){return console.error("Error fetching users:",s),t("Failed to load users.")}}),Xf=Ur("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=si(On,"metadata","teams"),a=await $c(t);if(a.exists()){const s=a.data();return(Array.isArray(s.list)?s.list.map(d=>({...d,preferredDays:d.preferredDays||[],positions:d.positions||[]})):[]).find(d=>d.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),NC=wo({name:"rosterView",initialState:cU,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=uU(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=Kf(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,a=Kf(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...a]}}},extraReducers:n=>{n.addCase(Qf.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(Qf.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(Qf.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(Yf.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(Yf.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(Yf.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(Xf.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(Xf.fulfilled,(e,t)=>{var a;e.currentTeamData=t.payload,(a=t.payload)!=null&&a.preferredDays&&(e.rosterDates=Kf(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(Xf.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:hU,resetToUpcomingDates:fU,loadNextYearDates:dU}=NC.actions,mU=NC.reducer,pU="_dashboardContainer_19qve_1",gU="_dashboardHeader_19qve_10",yU="_dashboardHeaderActions_19qve_24",_U="_clearPastBtn_19qve_32",vU="_eventNameContainer_19qve_48",EU="_dashboardEventNameInput_19qve_55",TU="_dashboardEventNameInputHasEvent_19qve_79",bU="_carouselOuterWrapper_19qve_90",SU="_eventsCarouselTrack_19qve_98",AU="_eventCardWrapper_19qve_112",wU="_peek_19qve_123",CU="_active_19qve_129",RU="_eventCardDate_19qve_135",IU="_dashboardTodayBadge_19qve_147",DU="_teamCardsContainer_19qve_158",NU="_teamEventCard_19qve_166",xU="_dashboardThemeToggle_19qve_174",OU="_teamEventHeader_19qve_178",MU="_teamCardEmoji_19qve_197",PU="_teamCardName_19qve_201",kU="_copyRosterBtn_19qve_205",VU="_copyRosterBtnSuccess_19qve_226",jU="_teamEventDetails_19qve_232",LU="_posAssignmentRow_19qve_238",UU="_posEmojiLabel_19qve_244",zU="_assignedNames_19qve_250",BU="_unassigned_19qve_256",HU="_meTag_19qve_264",FU="_carouselPagination_19qve_286",qU="_dashboardEmpty_19qve_295",Mt={dashboardContainer:pU,dashboardHeader:gU,dashboardHeaderActions:yU,clearPastBtn:_U,eventNameContainer:vU,dashboardEventNameInput:EU,dashboardEventNameInputHasEvent:TU,carouselOuterWrapper:bU,eventsCarouselTrack:SU,eventCardWrapper:AU,peek:wU,active:CU,eventCardDate:RU,dashboardTodayBadge:IU,teamCardsContainer:DU,teamEventCard:NU,dashboardThemeToggle:xU,teamEventHeader:OU,teamCardEmoji:MU,teamCardName:PU,copyRosterBtn:kU,copyRosterBtnSuccess:VU,teamEventDetails:jU,posAssignmentRow:LU,posEmojiLabel:UU,assignedNames:zU,unassigned:BU,meTag:HU,carouselPagination:FU,dashboardEmpty:qU},GU=()=>{const n=ui(),[e,t]=mx(),a=e.get("date"),{userData:s}=lt(oe=>oe.auth),{teams:l}=lt(oe=>oe.teams),{entries:c,dirtyEntries:d,loading:m,saving:g}=lt(oe=>oe.roster),{positions:y}=lt(oe=>oe.positions),[E,S]=P.useState([]),[w,M]=P.useState(!1),[B,U]=P.useState(null),[Y,z]=P.useState(0),[Q,ne]=P.useState(0),[ue,G]=P.useState(!1),A=P.useRef(null),R=P.useRef(!1),N=Object.keys(d).length>0;P.useEffect(()=>{n(fc())},[n]),P.useEffect(()=>{const oe=A.current;if(!oe)return;const _e=new ResizeObserver(be=>{for(const De of be){const Be=De.contentRect.width;Be>0&&ne(Be)}});return _e.observe(oe),()=>_e.disconnect()},[m,w]);const x=P.useMemo(()=>{const oe=Nl();if(!(s!=null&&s.teams)||l.length===0)return[];const _e=l.filter(Be=>s.teams.includes(Be.name)),be=new Set;_e.forEach(Be=>{Kf(Be.preferredDays).forEach(gt=>be.add(gt))});const De=Array.from(be).sort();return a&&a<oe?[a]:De.filter(Be=>{const $e=Be;if(a===$e)return!0;const gt=c[$e]||d[$e];return gt?_e.some(jt=>{var en;const dt=((en=gt.teams)==null?void 0:en[jt.name])||{};return Object.values(dt).some(hn=>hn.length>0)}):!1})},[s,l,c,d,a]);P.useEffect(()=>{if(x.length===0||!A.current||m||Q===0)return;const oe=A.current,_e=(be,De)=>{const Be=oe.offsetWidth||Q;Be!==0&&(oe.style.scrollSnapType="none",oe.scrollTo({left:Be*be,behavior:De?"smooth":"auto"}),setTimeout(()=>{oe&&(oe.style.scrollSnapType="x mandatory"),G(!0)},50),z(be),R.current=!0)};if(a){const be=x.findIndex(De=>De===a);if(be>=0){const De=Math.round(oe.scrollLeft/(oe.offsetWidth||Q||1));!R.current||De!==be?requestAnimationFrame(()=>{_e(be,R.current)}):G(!0)}else G(!0)}else oe.scrollLeft!==0?_e(0,!0):G(!0),R.current=!0},[a,x,m,Q]);const O=()=>{t({},{replace:!0})};P.useEffect(()=>{(async()=>{if(!(!(s!=null&&s.teams)||s.teams.length===0)){M(!0);try{const _e=Hc(On,"users"),be=Gc(_e,b_("teams","array-contains-any",s.teams)),De=await Kc(be),Be=[];De.forEach($e=>Be.push($e.data())),S(Be)}catch(_e){console.error("Error fetching users for dashboard:",_e)}finally{M(!1)}}})()},[s==null?void 0:s.teams]);const k=P.useCallback(oe=>{if(!oe||!(s!=null&&s.teams)||l.length===0)return null;const _e=oe,be=d[_e]||c[_e],$e=l.filter(gt=>s.teams.includes(gt.name)).sort((gt,jt)=>{const dt=s.teams.indexOf(gt.name),en=s.teams.indexOf(jt.name);return dt-en}).map(gt=>{var Br;const jt=((Br=be==null?void 0:be.teams)==null?void 0:Br[gt.name])||{},dt=[],en=gt.positions.map(rn=>rn.name);let hn=0;return en.forEach(rn=>{const Mn=y.find(ht=>ht.name===rn),lr=[];Object.entries(jt).forEach(([ht,En])=>{if(En.includes(rn)){const Hr=E.find(Pn=>Pn.email===ht);Hr?lr.push(Hr):lr.push({email:ht,name:ht}),hn++}});const qt=[...lr].sort((ht,En)=>Mn!=null&&Mn.sortByGender&&ht.gender!==En.gender?ht.gender==="Male"?-1:En.gender==="Male"?1:(ht.gender||"").localeCompare(En.gender||""):(ht.name||"").localeCompare(En.name||""));dt.push({posName:rn,emoji:(Mn==null?void 0:Mn.emoji)||"",assignedUsers:qt.map(ht=>({name:ht.name||ht.email||"Unknown",isMe:ht.email===s.email}))})}),{teamName:gt.name,teamEmoji:gt.emoji,positions:dt,hasAssignments:hn>0}}).filter(gt=>gt.hasAssignments);return $e.length>0?$e:null},[c,d,s,l,y,E]),I=(oe,_e,be,De)=>{const $e=new Date(oe).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"});let gt=`${be} ${_e} - ${$e}
`;De.forEach(jt=>{const dt=jt.assignedUsers.length>0?jt.assignedUsers.map(en=>en.name).join(", "):"-";gt+=`${jt.emoji}: ${dt}
`}),navigator.clipboard.writeText(gt).then(()=>{const jt=`${oe}-${_e}`;U(jt),setTimeout(()=>U(null),2e3)})},ie=()=>{if(!A.current)return;const oe=A.current,_e=oe.offsetWidth,be=Math.round(oe.scrollLeft/_e);if(be!==Y&&x[be]){z(be);const De=x[be];if(a!==De){const Be=Nl();be===0&&Be===De?t({},{replace:!0}):t({date:De},{replace:!0})}}},Te=(oe,_e)=>{n(oU({date:oe,eventName:_e}))},F=()=>{n(dc(d))},me=()=>{n(DC())};if(m||w)return b.jsx(Wl,{});if(x.length===0)return b.jsxs("div",{className:Mt.dashboardEmpty,children:[b.jsx("h2",{children:"No upcoming events found"}),b.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const ye=x[Y],Me=Nl(),Ue=ye&&ye<Me,L=Ue?"Previous Event":"Upcoming Events",se=oe=>new Date(oe).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),Ee=(oe,_e=!1)=>{const be=k(oe);return be?b.jsx("div",{className:Mt.teamCardsContainer,children:be.map(De=>{const Be=B===`${oe}-${De.teamName}`;return b.jsxs("div",{className:Mt.teamEventCard,children:[b.jsxs("div",{className:Mt.teamEventHeader,children:[b.jsxs("h3",{children:[b.jsx("span",{className:Mt.teamCardEmoji,children:De.teamEmoji}),b.jsx("span",{className:Mt.teamCardName,children:De.teamName})]}),!_e&&b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[b.jsx(dm,{className:Mt.dashboardThemeToggle}),b.jsx("button",{className:`${Mt.copyRosterBtn} ${Be?Mt.copyRosterBtnSuccess:""}`,onClick:()=>I(oe,De.teamName,De.teamEmoji,De.positions),title:"Copy to clipboard",children:Be?b.jsxs(b.Fragment,{children:[b.jsx(Fj,{size:16})," Copied"]}):b.jsxs(b.Fragment,{children:[b.jsx(Gj,{size:16})," Copy"]})})]})]}),b.jsx("div",{className:Mt.teamEventDetails,children:De.positions.map($e=>b.jsxs("div",{className:Mt.posAssignmentRow,children:[b.jsx("span",{className:Mt.posEmojiLabel,title:$e.posName,children:$e.emoji}),b.jsx("span",{className:`${Mt.assignedNames} ${$e.assignedUsers.length===0?Mt.unassigned:""}`,children:$e.assignedUsers.length>0?$e.assignedUsers.map((gt,jt)=>b.jsxs(P.Fragment,{children:[gt.name,gt.isMe&&b.jsx("span",{className:Mt.meTag,children:"Me"}),jt<$e.assignedUsers.length-1?", ":""]},`${gt.name}-${jt}`)):"Unassigned"})]},$e.posName))})]},De.teamName)})}):null};return b.jsxs("div",{className:Mt.dashboardContainer,children:[b.jsxs("div",{className:Mt.dashboardHeader,children:[b.jsx("h1",{children:L}),b.jsx("div",{className:Mt.dashboardHeaderActions,children:Ue&&b.jsx("button",{className:Mt.clearPastBtn,onClick:O,children:"Reset to upcoming"})})]}),b.jsx("div",{className:Mt.carouselOuterWrapper,style:{opacity:ue?1:0,transition:"opacity 0.3s ease-in-out"},children:b.jsx("div",{className:Mt.eventsCarouselTrack,ref:A,onScroll:ie,children:x.map((oe,_e)=>{const be=oe,De=d[be]||c[be],Be=(De==null?void 0:De.eventName)||"";return b.jsxs("div",{className:`${Mt.eventCardWrapper} ${_e===Y?Mt.active:Mt.peek}`,children:[b.jsx("div",{className:Mt.eventNameContainer,children:b.jsx("input",{type:"text",className:`${Mt.dashboardEventNameInput} ${Be?Mt.dashboardEventNameInputHasEvent:""}`,placeholder:"Event name (e.g. Easter Sunday)",value:Be,onChange:$e=>Te(oe,$e.target.value),disabled:_e!==Y})}),b.jsxs("div",{className:Mt.eventCardDate,children:[se(oe),oe===Me&&b.jsx("span",{className:Mt.dashboardTodayBadge,children:"TODAY"})]}),Ee(oe,_e!==Y)]},oe)})})}),b.jsxs("div",{className:Mt.carouselPagination,children:[Y+1," / ",x.length]}),N&&b.jsx(Jl,{label:"Unsaved event labels",saveText:"Save Changes",onSave:F,onCancel:me,isSaving:g,hasSideNav:!1})]})},$U="_button_1huns_1",KU="_primary_1huns_26",YU="_secondary_1huns_31",QU="_icon_1huns_42",XU="_small_1huns_48",Nf={button:$U,primary:KU,secondary:YU,delete:"_delete_1huns_36",icon:QU,small:XU},ri=({variant:n="primary",size:e="medium",isIcon:t=!1,className:a="",children:s,...l})=>{const c=[Nf.button,Nf[n],e==="small"?Nf.small:"",t?Nf.icon:"",a].filter(Boolean).join(" ");return b.jsx("button",{className:c,...l,children:s})},WU="_pillGroup_ti99d_1",JU="_pillGroupNowrap_ti99d_9",ZU="_pill_ti99d_1",e3="_pillActive_ti99d_35",t3="_pillDisabled_ti99d_40",n3="_pillText_ti99d_61",Sl={pillGroup:WU,pillGroupNowrap:JU,pill:ZU,pillActive:e3,pillDisabled:t3,pillText:n3},Ic=({children:n,nowrap:e})=>b.jsx("div",{className:`${Sl.pillGroup} ${e?Sl.pillGroupNowrap:""}`,children:n}),kr=({colour:n,isDropdown:e,isActive:t,isDisabled:a,minWidth:s,onClick:l,children:c})=>{const[d,m]=P.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),b.jsxs("div",{className:`${Sl.pill} ${Sl.pillText} ${t?Sl.pillActive:""} ${a?Sl.pillDisabled:""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:s?`${s}px`:"fit-content"},onClick:g=>{a||(m(y=>!y),l&&l(g))},children:[c,e&&b.jsx(bC,{style:{rotate:d?"90deg":"0"}})]})},r3="_settingsSection_1k4no_1",i3="_sectionLabel_1k4no_7",a3="_subSectionGroup_1k4no_17",s3="_subSectionHeader_1k4no_21",o3="_formGroup_1k4no_31",l3="_summaryButton_1k4no_35",u3="_summaryPrimary_1k4no_57",c3="_summarySecondary_1k4no_62",Or={settingsSection:r3,sectionLabel:i3,subSectionGroup:a3,subSectionHeader:s3,formGroup:o3,summaryButton:l3,summaryPrimary:u3,summarySecondary:c3},xC=({selectedTeams:n,teamPositions:e,onToggleTeam:t,onTogglePosition:a,onMoveTeam:s,availableTeams:l,globalPositions:c})=>b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:Or.formGroup,children:[b.jsx("label",{className:Or.sectionLabel,children:"Teams"}),b.jsx(Ic,{children:l.map(d=>{const m=n.includes(d.name);return b.jsxs(kr,{onClick:()=>t(d.name),isActive:m,children:[b.jsx("span",{children:d.emoji})," ",d.name]},d.name)})})]}),n.length>0&&b.jsxs("div",{className:Or.settingsSection,children:[b.jsx("label",{className:Or.sectionLabel,children:"Positions per Team"}),n.map((d,m)=>{var E;const g=l.find(S=>S.name===d);if(!g)return null;const y=((E=g.positions)==null?void 0:E.filter(S=>{const w=c.find(M=>M.name===S.name);return!S.parentId&&!(w!=null&&w.isCustom)}))||[];return b.jsxs("div",{className:Or.subSectionGroup,children:[b.jsxs("div",{className:Or.subSectionHeader,style:{justifyContent:"space-between"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[g.emoji," ",g.name]}),s&&b.jsxs("div",{style:{display:"flex",gap:"4px"},children:[b.jsx(ri,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(d,"up"),disabled:m===0,children:""}),b.jsx(ri,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(d,"down"),disabled:m===n.length-1,children:""})]})]}),y.length>0?b.jsx(Ic,{children:y.map(S=>{var M;const w=(M=e[d])==null?void 0:M.includes(S.name);return b.jsxs(kr,{onClick:()=>a(d,S.name),isActive:w,colour:S.colour,children:[b.jsx("span",{children:S.emoji})," ",S.name]},S.name)})}):b.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-dim)",margin:"8px 0"},children:"No assignable positions for this team."})]},d)})]})]}),h3={firebaseUser:null,userData:null,loading:!0,error:null},Wf=Ur("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=si(On,"users",n),a=await $c(t);if(!a.exists()){const s="chris.sm.kang542@gmail.com",l=zl.currentUser,c=(l==null?void 0:l.email)===s,d={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await A_(t,d),d}return a.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),Jf=Ur("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const a=si(On,"users",n),s={...e};return s.teamPositions&&(s.indexedAssignments=CC(s.teamPositions)),await A1(a,s),s}catch(a){return t(a instanceof Error?a.message:"Failed to update profile")}}),OC=wo({name:"auth",initialState:h3,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(Wf.pending,e=>{e.loading=!0,e.error=null}).addCase(Wf.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(Wf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Jf.pending,e=>{e.error=null}).addCase(Jf.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(Jf.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:f3,setUserData:d3,setLoading:D9,logout:m3}=OC.actions,p3=OC.reducer,g3="_formGroup_163vy_1",y3="_formInput_163vy_16",_3="_formSelect_163vy_52",v3="_colorInput_163vy_86",E3="_fieldHint_163vy_104",_a={formGroup:g3,formInput:y3,formSelect:_3,colorInput:v3,fieldHint:E3},T3="_profileCard_1v6ck_1",b3="_profileReadonly_1v6ck_19",S3="_actionContainer_1v6ck_67",Hg={profileCard:T3,profileReadonly:b3,actionContainer:S3},MC=({className:n})=>{const e=ui(),{userData:t,firebaseUser:a}=lt(x=>x.auth),{teams:s,fetched:l}=lt(x=>x.teams),{positions:c,fetched:d}=lt(x=>x.positions),[m,g]=P.useState((t==null?void 0:t.name)||""),[y,E]=P.useState((t==null?void 0:t.gender)||""),[S,w]=P.useState((t==null?void 0:t.isActive)??!0),[M,B]=P.useState((t==null?void 0:t.teams)||[]),[U,Y]=P.useState((t==null?void 0:t.teamPositions)||{}),[z,Q]=P.useState("idle");P.useEffect(()=>{l||e(fo()),d||e(Sa())},[e,l,d]);const ne=P.useMemo(()=>{if(!t)return!1;const x={name:m,gender:y,isActive:S,teams:M,teamPositions:U},O={name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}};return JSON.stringify(x)!==JSON.stringify(O)},[m,y,S,M,U,t]),ue=async()=>{if(a){Q("saving");try{const x={name:m,gender:y,isActive:S,teams:M,teamPositions:U};await e(Jf({uid:a.uid,data:x})).unwrap(),Q("success"),setTimeout(()=>Q("idle"),2e3)}catch(x){console.error(x),Q("idle")}}},G=()=>{t&&(g(t.name||""),E(t.gender||""),w(t.isActive??!0),B(t.teams||[]),Y(t.teamPositions||{}))},A=x=>{B(O=>{const k=O.includes(x),I=k?O.filter(ie=>ie!==x):[...O,x];return Y(ie=>{const Te={...ie};return k?delete Te[x]:Te[x]||(Te[x]=[]),Te}),I})},R=(x,O)=>{Y(k=>{const I=k[x]||[],ie=I.includes(O)?I.filter(Te=>Te!==O):[...I,O];return{...k,[x]:ie}})},N=(x,O)=>{const k=M.indexOf(x);if(k===-1)return;const I=O==="up"?k-1:k+1;if(I<0||I>=M.length)return;const ie=[...M];[ie[k],ie[I]]=[ie[I],ie[k]],B(ie)};return t?b.jsxs("section",{className:`${Hg.profileCard} ${n||""}`,children:[b.jsx("div",{className:Hg.profileReadonly,children:b.jsxs("p",{children:[b.jsx("strong",{children:"Email:"})," ",t.email]})}),b.jsxs("div",{className:_a.formGroup,children:[b.jsx("label",{children:"Name"}),b.jsx("input",{type:"text",value:m,onChange:x=>g(x.target.value),className:_a.formInput})]}),b.jsxs("div",{className:_a.formGroup,children:[b.jsx("label",{children:"Gender"}),b.jsx(Ic,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(x=>b.jsx(kr,{colour:x.colour,onClick:()=>E(x.value),isActive:y===x.value,children:x.value},x.value))})]}),b.jsx(xC,{selectedTeams:M,teamPositions:U,onToggleTeam:A,onTogglePosition:R,onMoveTeam:N,availableTeams:s,globalPositions:c}),b.jsxs("div",{className:_a.formGroup,children:[b.jsx("label",{children:"Availability Status"}),b.jsx(kr,{colour:S?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>w(!S),isActive:!0,children:S?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),b.jsx("p",{className:_a.fieldHint,children:"Turn off if you want to be hidden from the roster."})]}),b.jsx("div",{className:Hg.actionContainer,children:b.jsx(ri,{variant:"delete",onClick:()=>zl.signOut(),children:"Logout"})}),ne&&b.jsx(Jl,{label:"Unsaved profile changes",saveText:"Update Profile",onSave:ue,onCancel:G,isSaving:z==="saving"})]}):b.jsx("div",{children:"Loading profile..."})},A3="_guestContainer_1m4dd_1",w3="_profileCardOverride_1m4dd_14",C3="_guestHeader_1m4dd_21",R3="_brandTitle_1m4dd_28",I3="_guestThemeToggleContainer_1m4dd_32",D3="_pendingLabel_1m4dd_38",fl={guestContainer:A3,profileCardOverride:w3,guestHeader:C3,brandTitle:R3,guestThemeToggleContainer:I3,pendingLabel:D3},N3=()=>{const{userData:n,firebaseUser:e,loading:t}=lt(a=>a.auth);return t?b.jsx(Bl,{}):e?n?n.isApproved?b.jsx(ys,{to:"/app",replace:!0}):b.jsxs("div",{className:fl.guestContainer,children:[b.jsxs("header",{className:fl.guestHeader,children:[b.jsx("h2",{className:fl.brandTitle,children:"God is Good"}),b.jsx("p",{className:fl.pendingLabel,children:"PENDING ADMIN APPROVAL"}),b.jsx("div",{className:fl.guestThemeToggleContainer,children:b.jsx(dm,{})})]}),b.jsx(MC,{className:fl.profileCardOverride})]}):b.jsx(Bl,{}):b.jsx(ys,{to:"/login",replace:!0})},x3="_loginContainer_12x6v_1",O3="_loginHeader_12x6v_12",M3="_brandTitle_12x6v_16",P3="_brandSubtitle_12x6v_24",k3="_loginButtonContainer_12x6v_33",V3="_loginButton_12x6v_33",j3="_google_12x6v_57",io={loginContainer:x3,loginHeader:O3,brandTitle:M3,brandSubtitle:P3,loginButtonContainer:k3,loginButton:V3,google:j3},L3=()=>{const{firebaseUser:n,loading:e}=lt(a=>a.auth),t=()=>Ok(zl,RV);return e?null:n?b.jsx(ys,{to:"/",replace:!0}):b.jsxs("div",{className:io.loginContainer,children:[b.jsxs("header",{className:io.loginHeader,children:[b.jsx("h1",{className:io.brandTitle,children:"God is Good"}),b.jsx("p",{className:io.brandSubtitle,children:"Worship Team Roster"})]}),b.jsx("div",{className:io.loginButtonContainer,children:b.jsxs("button",{onClick:t,className:`${io.loginButton} ${io.google}`,children:[b.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},U3="_rosterTableContainer_2ncja_1",z3="_rosterTable_2ncja_1",B3="_stickyCol_2ncja_35",H3="_rosterTableHeaderCell_2ncja_58",F3="_rosterTableLoading_2ncja_63",q3="_rosterTableError_2ncja_64",G3="_rosterTableWrapper_2ncja_71",$3="_loadMoreFooter_2ncja_78",K3="_loadNextYearBtn_2ncja_84",Y3="_clickable_2ncja_102",Q3="_disabled_2ncja_111",X3="_dateCell_2ncja_117",W3="_rosterCell_2ncja_125",J3="_genderDividerCell_2ncja_130",Z3="_assignedPositions_2ncja_144",e6="_posEmoji_2ncja_151",t6="_otherTeamEmoji_2ncja_155",n6="_dateHeaderContent_2ncja_161",r6="_dateHeaderActions_2ncja_168",i6="_loadPrevBtn_2ncja_173",a6="_resetDatesBtn_2ncja_195",s6="_peekHeader_2ncja_205",o6="_peekSelector_2ncja_210",l6="_peekCell_2ncja_227",u6="_stickyRight_2ncja_237",c6="_clickableHeader_2ncja_248",h6="_hiddenMembersBar_2ncja_258",f6="_hiddenMembersLabel_2ncja_270",d6="_hiddenMembersList_2ncja_278",m6="_unhidePill_2ncja_284",p6="_absentStrike_2ncja_318",g6="_pastDate_2ncja_323",y6="_noData_2ncja_327",_6="_closestNextDateRow_2ncja_339",v6="_todayDate_2ncja_340",E6="_dateCellContent_2ncja_358",T6="_highlightedHeader_2ncja_382",b6="_highlightedCell_2ncja_387",S6="_specialEventDot_2ncja_391",A6="_rosterTodayDot_2ncja_402",w6="_absentCell_2ncja_413",C6="_absenceInputContainer_2ncja_417",R6="_absenceReasonInput_2ncja_424",I6="_removeAbsenceBtn_2ncja_447",D6="_absenceRosterCell_2ncja_467",N6="_genderLabel_2ncja_471",x6="_focused_2ncja_478",O6="_viewToggleBar_2ncja_500",M6="_toggleBtn_2ncja_511",P6="_activeToggle_2ncja_531",k6="_allViewPositionHeader_2ncja_536",V6="_allViewPositionName_2ncja_543",j6="_assignedUsersText_2ncja_549",L6="_meTag_2ncja_555",U6="_isMe_2ncja_577",z6="_headerInput_2ncja_586",B6="_addColumnBtn_2ncja_612",X={rosterTableContainer:U3,rosterTable:z3,stickyCol:B3,rosterTableHeaderCell:H3,rosterTableLoading:F3,rosterTableError:q3,rosterTableWrapper:G3,loadMoreFooter:$3,loadNextYearBtn:K3,clickable:Y3,disabled:Q3,dateCell:X3,rosterCell:W3,genderDividerCell:J3,assignedPositions:Z3,posEmoji:e6,otherTeamEmoji:t6,dateHeaderContent:n6,dateHeaderActions:r6,loadPrevBtn:i6,resetDatesBtn:a6,peekHeader:s6,peekSelector:o6,peekCell:l6,stickyRight:u6,clickableHeader:c6,hiddenMembersBar:h6,hiddenMembersLabel:f6,hiddenMembersList:d6,unhidePill:m6,absentStrike:p6,pastDate:g6,noData:y6,closestNextDateRow:_6,todayDate:v6,dateCellContent:E6,highlightedHeader:T6,highlightedCell:b6,specialEventDot:S6,rosterTodayDot:A6,absentCell:w6,absenceInputContainer:C6,absenceReasonInput:R6,removeAbsenceBtn:I6,absenceRosterCell:D6,genderLabel:N6,focused:x6,viewToggleBar:O6,toggleBtn:M6,activeToggle:P6,allViewPositionHeader:k6,allViewPositionName:V6,assignedUsersText:j6,meTag:L6,isMe:U6,headerInput:z6,addColumnBtn:B6},H6=()=>{const n=ui(),e=To(),{teamName:t,positionName:a}=Vd(),{userData:s}=lt(q=>q.auth),{users:l,allTeamUsers:c,rosterDates:d,currentTeamData:m,loadingUsers:g,loadingTeam:y,loadingAllTeamUsers:E,error:S}=lt(q=>q.rosterView),{entries:w,dirtyEntries:M,saving:B,error:U}=lt(q=>q.roster),{positions:Y,isDirty:z}=lt(q=>q.positions),{teams:Q}=lt(q=>q.teams),{hiddenUsers:ne,rosterAllViewMode:ue}=lt(q=>q.ui),[G,A]=P.useState(null),[R,N]=P.useState(null),x=Object.keys(M).length>0,O=x||z,k=a==="Absence",I=a==="All",ie=P.useMemo(()=>Y.find(q=>q.name===a),[Y,a]),Te=P.useMemo(()=>m?m.positions.filter(q=>q.name!==a):[],[m,a]),F=P.useMemo(()=>{var q;return!t||!a?[]:((q=ne[t])==null?void 0:q[a])||[]},[ne,t,a]),me=P.useMemo(()=>c.filter(q=>{var Ce;return!q.isActive||!t?!1:(((Ce=q.teamPositions)==null?void 0:Ce[t])||[]).length>0}),[c,t]),ye=P.useMemo(()=>{const q=me.map(ve=>({id:ve.email||"",name:ve.name||"",isUser:!0,gender:ve.gender}));if(!m)return q;const ce=m.positions.map(ve=>ve.name),Ce=Array.from(new Set(Y.filter(ve=>ce.includes(ve.name)&&ve.isCustom).flatMap(ve=>ve.customLabels||[]).map(ve=>ve.trim()).filter(ve=>ve!==""))).map(ve=>({id:ve,name:ve,isUser:!1}));return[...q,...Ce]},[me,m,Y]),Me=P.useMemo(()=>{const q=l.filter(ce=>ce.email&&!F.includes(ce.email)&&ce.isActive);return ie!=null&&ie.sortByGender?q.sort((ce,Ce)=>ce.gender===Ce.gender?(ce.name||"").localeCompare(Ce.name||""):ce.gender==="Male"?-1:Ce.gender==="Male"?1:(ce.gender||"").localeCompare(Ce.gender||"")):q},[l,ie,F]),Ue=P.useMemo(()=>{if(!(ie!=null&&ie.sortByGender)||Me.length===0)return-1;const q=Me.findIndex(ce=>ce.gender==="Female");return q>0&&q<Me.length?q:-1},[ie,Me]),L=q=>{!t||!a||n(mL({teamName:t,positionName:a,userEmail:q}))},se=()=>{n(hU())},Ee=()=>{n(fU())},oe=()=>{n(dU())},_e=q=>{be(q)&&e(`/app/dashboard?date=${q}`)},be=P.useCallback(q=>{const ce=q.split("T")[0],Ce=M[ce]||w[ce];return Ce?Object.values(Ce.teams).some(ve=>Object.values(ve).some(xe=>xe.length>0)):!1},[w,M]),De=P.useCallback(q=>{if(!R||!t)return[];const ce=q.split("T")[0],Ce=M[ce]||w[ce];return!Ce||!Ce.teams[t]?[]:Object.entries(Ce.teams[t]).filter(([,ve])=>ve.includes(R)).map(([ve])=>{const xe=c.find(Fe=>Fe.email===ve);return(xe==null?void 0:xe.name)||ve})},[R,t,M,w,c]);P.useEffect(()=>{n(fc())},[n]),P.useEffect(()=>{a&&t&&!["Absence","All"].includes(a)&&n(Qf({teamName:t,positionName:a}))},[a,t,n]),P.useEffect(()=>{t&&(n(Xf(t)),n(Yf(t)))},[t,n]);const Be=P.useCallback((q,ce)=>{const Ce=q,ve=M[Ce]||w[Ce];return!!(ve&&ve.absence&&ve.absence[ce])},[M,w]),$e=P.useCallback((q,ce)=>{var xe,Fe;const Ce=q,ve=M[Ce]||w[Ce];return((Fe=(xe=ve==null?void 0:ve.absence)==null?void 0:xe[ce])==null?void 0:Fe.reason)||""},[M,w]),gt=P.useCallback((q,ce)=>{if(!t||!a||a==="Absence")return!1;if(Be(q,ce))return!0;const Ce=q,ve=M[Ce]||w[Ce],xe=Q.find(it=>it.name===t),Fe=(xe==null?void 0:xe.maxConflict)||1;if(!ve||!ve.teams[t]||!ve.teams[t][ce])return!1;const yt=ve.teams[t][ce],Oe=Y.filter(it=>it.parentId===a),Xe=[a,...Oe.map(it=>it.name)];return yt.some(it=>Xe.includes(it))?!1:yt.length>=Fe},[t,a,Be,M,w,Q,Y]),jt=P.useCallback((q,ce,Ce,ve)=>{if(!t||!a||a==="Absence"||gt(q,ce)){A({row:Ce,col:ve,table:"roster"});return}A({row:Ce,col:ve,table:"roster"});const xe=Q.find(Xe=>Xe.name===t),Fe=(xe==null?void 0:xe.maxConflict)||1,yt=Y.filter(Xe=>Xe.parentId===a),Oe=[a,...yt.map(Xe=>Xe.name)];n(sU({date:q,teamName:t,userIdentifier:ce,positionGroupNames:Oe,maxConflict:Fe}))},[n,t,a,gt,Q,Y]),dt=P.useCallback((q,ce,Ce,ve)=>{A({row:Ce,col:ve,table:"absence"});const xe=Be(q,ce);n(qS({date:q,userIdentifier:ce,isAbsent:!xe}))},[n,Be]),en=P.useCallback((q,ce,Ce)=>{n(qS({date:q,userIdentifier:ce,reason:Ce,isAbsent:!0}))},[n]),hn=P.useCallback(()=>{x&&n(dc(M)),z&&n(z_(Y))},[n,M,Y,x,z]),Br=()=>{if(!ie||!a)return;const q=ie.customLabels||[];n(zS({positionName:a,labels:[...q,""]}))},rn=(q,ce)=>{if(!ie||!a)return;const Ce=[...ie.customLabels||[]];Ce[q]=ce,n(zS({positionName:a,labels:Ce}))},Mn=P.useCallback(()=>{x&&n(DC()),z&&(n(xj()),n(Sa())),A(null)},[n,x,z]),lr=(q,ce)=>{const Ce=q.split("T")[0],ve=M[Ce]||w[Ce];if(!ve||!t||!ve.teams[t])return[];let xe=ve.teams[t][ce]||[];if(xe.length===0){const Fe=ce.trim(),yt=Object.keys(ve.teams[t]).find(Oe=>Oe.trim()===Fe);yt&&(xe=ve.teams[t][yt])}return xe},qt=(q,ce)=>{const Ce=lr(q,ce);return Ce.length===0?"":b.jsx("div",{className:X.assignedPositions,children:Ce.map(ve=>{const xe=Y.find(Fe=>Fe.name===ve);return b.jsx("span",{className:X.posEmoji,onClick:Fe=>{Fe.stopPropagation(),e(`/app/roster/${t}/${ve}`)},title:ve,style:{cursor:"pointer"},children:(xe==null?void 0:xe.emoji)||""},ve)})})},ht=(q,ce)=>{const Ce=q.split("T")[0],ve=M[Ce]||w[Ce];if(!ve||!t)return"";const xe=Y.filter(Oe=>Oe.parentId===ce),Fe=[ce,...xe.map(Oe=>Oe.name)],yt=Object.entries(ve.teams[t]||{}).filter(([,Oe])=>Oe.some(Xe=>Fe.includes(Xe)));return b.jsx("div",{className:X.assignedUsersText,children:yt.map(([Oe],Xe)=>{const Se=me.find(kn=>kn.email===Oe),it=Oe===(s==null?void 0:s.email),pn=Se?Se.name:Oe;return b.jsxs(P.Fragment,{children:[b.jsx("span",{className:it?X.isMe:"",children:pn}),it&&b.jsx("span",{className:X.meTag,children:"Me"}),Xe<yt.length-1?", ":""]},Oe)})})},En=(q,ce)=>{var yt;const Ce=q,ve=M[Ce]||w[Ce];if(!ve||!t)return"";const xe=((yt=ve.teams[t])==null?void 0:yt[ce])||[],Fe=[];return Object.entries(ve.teams).forEach(([Oe,Xe])=>{Oe!==t&&Xe[ce]&&Fe.push({team:Oe,positions:Xe[ce]})}),xe.length===0&&Fe.length===0?"":b.jsxs("div",{className:X.assignedPositions,children:[xe.map(Oe=>{const Xe=Y.find(Se=>Se.name===Oe);return b.jsx("span",{title:`${t}: ${Oe}`,className:X.posEmoji,children:(Xe==null?void 0:Xe.emoji)||""},Oe)}),Fe.map(Oe=>Oe.positions.map(Xe=>{const Se=Y.find(it=>it.name===Xe);return b.jsx("span",{title:`${Oe.team}: ${Xe}`,className:`${X.posEmoji} ${X.otherTeamEmoji}`,children:(Se==null?void 0:Se.emoji)||""},`${Oe.team}-${Xe}`)}))]})};P.useEffect(()=>{const q=ce=>{const Ce=ce.target;if(Ce.tagName==="INPUT"||Ce.tagName==="TEXTAREA"||!G)return;const{row:ve,col:xe,table:Fe}=G,yt=d;let Oe=[];switch(Fe==="roster"?Oe=Me:Fe==="absence"?Oe=c:Fe==="all"&&(Oe=ue==="user"?ye:(m==null?void 0:m.positions)||[]),ce.key){case"ArrowUp":ce.preventDefault(),ve>0&&A({row:ve-1,col:xe,table:Fe});break;case"ArrowDown":ce.preventDefault(),ve<yt.length-1&&A({row:ve+1,col:xe,table:Fe});break;case"ArrowLeft":ce.preventDefault(),xe>0&&A({row:ve,col:xe-1,table:Fe});break;case"ArrowRight":ce.preventDefault(),xe<Oe.length-1&&A({row:ve,col:xe+1,table:Fe});break;case"Tab":ce.preventDefault(),ce.shiftKey?ve>0&&A({row:ve-1,col:xe,table:Fe}):ve<yt.length-1&&A({row:ve+1,col:xe,table:Fe});break;case" ":{if(ce.preventDefault(),Fe==="all")break;const Xe=d[ve],Se=Oe[xe];Se!=null&&Se.email&&(Fe==="roster"?jt(Xe,Se.email,ve,xe):dt(Xe,Se.email,ve,xe));break}case"Enter":O&&(ce.preventDefault(),hn());break;case"Escape":O&&(ce.preventDefault(),Mn());break}};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[G,d,Me,c,O,jt,dt,hn,Mn,ue,ye,m==null?void 0:m.positions]);const Hr=P.useMemo(()=>{const q=Nl();return d.length===0?!1:d[0]<q},[d]),Pn=P.useMemo(()=>{const q=Nl();return d.find(ce=>ce.split("T")[0]>=q)},[d]),xt=P.useMemo(()=>{if(!Pn||!t||!a)return[];const q=Pn.split("T")[0],ce=M[q]||w[q];if(!ce||!ce.teams[t])return[];const Ce=Y.filter(xe=>xe.parentId===a),ve=[a,...Ce.map(xe=>xe.name)];return Object.entries(ce.teams[t]).filter(([,xe])=>xe.some(Fe=>ve.includes(Fe))).map(([xe])=>xe)},[Pn,t,a,M,w,Y]),Un=P.useCallback(q=>{const ce=Nl(),Ce=q.split("T")[0];return Ce<ce?"past-date":Ce===ce?"today-date":"future-date"},[]);if(g||y||E)return b.jsx(Wl,{});const ci=S||U;return ci?b.jsxs("div",{className:X.rosterTableError,children:["Error: ",ci]}):I?b.jsxs("div",{className:X.rosterTableWrapper,children:[b.jsxs("div",{className:X.viewToggleBar,children:[b.jsxs("button",{className:`${X.toggleBtn} ${ue==="user"?X.activeToggle:""}`,onClick:()=>n(HS("user")),children:[b.jsx(sL,{size:18})," ",b.jsx("span",{children:"User View"})]}),b.jsxs("button",{className:`${X.toggleBtn} ${ue==="position"?X.activeToggle:""}`,onClick:()=>n(HS("position")),children:[b.jsx(Yj,{size:18})," ",b.jsx("span",{children:"Position View"})]})]}),b.jsxs("div",{className:X.rosterSection,children:[b.jsx("div",{className:X.rosterTableContainer,children:b.jsxs("table",{className:X.rosterTable,children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:`${X.rosterTableHeaderCell} ${X.stickyCol} sticky-header`,children:b.jsxs("div",{className:X.dateHeaderContent,children:["Date",b.jsxs("div",{className:X.dateHeaderActions,children:[b.jsx("button",{className:X.loadPrevBtn,onClick:se,title:"Load 5 previous dates",children:""}),Hr&&b.jsx("button",{className:`${X.loadPrevBtn} ${X.resetDatesBtn}`,onClick:Ee,title:"Hide previous dates",children:""})]})]})}),ue==="user"?ye.map(q=>{const ce=q.id===(s==null?void 0:s.email);return b.jsxs("th",{className:`${X.rosterTableHeaderCell} sticky-header ${q.id&&xt.includes(q.id)?X.highlightedHeader:""} ${ce?X.isMe:""}`,children:[q.name,ce&&b.jsx("span",{className:X.meTag,children:"Me"})]},q.id)}):((m==null?void 0:m.positions)||[]).filter(q=>!q.parentId).map(q=>b.jsx("th",{className:`${X.rosterTableHeaderCell} ${X.clickableHeader} sticky-header`,onClick:()=>e(`/app/roster/${t}/${q.name}`),children:b.jsxs("div",{className:X.allViewPositionHeader,children:[b.jsx("span",{children:q.emoji}),b.jsx("span",{className:X.allViewPositionName,children:q.name})]})},q.name))]})}),b.jsx("tbody",{children:d.map((q,ce)=>{const Ce=q.split("T")[0],ve=M[Ce]||w[Ce],xe=ve==null?void 0:ve.eventName,Fe=Un(q),yt=Fe==="today-date",Oe=be(q),Xe=[Fe==="past-date"?X.pastDate:"",Fe==="today-date"?X.todayDate:"",Fe==="future-date"?X.futureDate:"",Oe?"":X.noData,xe?X.specialEventRow:"",q===Pn?X.closestNextDateRow:""].filter(Boolean).join(" ");return b.jsxs("tr",{className:Xe,children:[b.jsx("td",{className:`${X.dateCell} ${X.stickyCol} ${Oe?X.clickable:""}`,onClick:()=>_e(q),title:xe,children:b.jsxs("div",{className:X.dateCellContent,children:[xe&&b.jsx("span",{className:X.specialEventDot}),yt&&b.jsx("span",{className:X.rosterTodayDot,title:"Today"}),new Date(q.replace(/-/g,"/")).toLocaleDateString()]})}),ue==="user"?ye.map((Se,it)=>{const pn=(G==null?void 0:G.row)===ce&&(G==null?void 0:G.col)===it&&(G==null?void 0:G.table)==="all",kn=Se.id?Be(q,Se.id):!1,an=q===Pn&&Se.id&&xt.includes(Se.id);return b.jsx("td",{className:`${X.rosterCell} ${X.clickable} ${pn?X.focused:""} ${kn?X.absentStrike:""} ${an?X.highlightedCell:""}`,tabIndex:0,onClick:()=>{const zn=lr(q,Se.id);zn.length>0&&e(`/app/roster/${t}/${zn[0]}`)},onFocus:()=>A({row:ce,col:it,table:"all"}),children:Se.id&&(kn?b.jsx("span",{title:$e(q,Se.id),children:""}):qt(q,Se.id))},Se.id)}):((m==null?void 0:m.positions)||[]).filter(Se=>!Se.parentId).map((Se,it)=>{const pn=(G==null?void 0:G.row)===ce&&(G==null?void 0:G.col)===it&&(G==null?void 0:G.table)==="all";return b.jsx("td",{className:`${X.rosterCell} ${pn?X.focused:""}`,tabIndex:0,onFocus:()=>A({row:ce,col:it,table:"all"}),children:ht(q,Se.name)},Se.name)})]},q)})})]})}),b.jsx("div",{className:X.loadMoreFooter,children:b.jsx("button",{className:X.loadNextYearBtn,onClick:oe,children:"Load Next Year "})})]})]}):!k&&!(ie!=null&&ie.isCustom)&&Me.length===0?b.jsxs("div",{className:X.rosterTableLoading,children:[!k&&F.length>0&&b.jsxs("div",{className:X.hiddenMembersBar,children:[b.jsx("span",{className:X.hiddenMembersLabel,children:"Hidden Members:"}),b.jsx("div",{className:X.hiddenMembersList,children:F.map(q=>{const ce=l.find(Ce=>Ce.email===q);return b.jsxs("button",{className:X.unhidePill,onClick:()=>L(q),title:"Click to unhide",children:[(ce==null?void 0:ce.name)||q," ",b.jsx("span",{children:"+"})]},q)})})]}),"No users found for this position."]}):b.jsxs("div",{className:X.rosterTableWrapper,children:[!k&&F.length>0&&b.jsxs("div",{className:X.hiddenMembersBar,children:[b.jsx("span",{className:X.hiddenMembersLabel,children:"Hidden Members:"}),b.jsx("div",{className:X.hiddenMembersList,children:F.map(q=>{const ce=l.find(Ce=>Ce.email===q);return b.jsxs("button",{className:X.unhidePill,onClick:()=>L(q),title:"Click to unhide",children:[(ce==null?void 0:ce.name)||q," ",b.jsx("span",{children:"+"})]},q)})})]}),k?b.jsxs("div",{className:`${X.rosterSection} ${X.absenceSection}`,children:[b.jsx("div",{className:X.rosterTableContainer,children:b.jsxs("table",{className:`${X.rosterTable} ${X.absenceTable}`,children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:`${X.rosterTableHeaderCell} ${X.stickyCol} sticky-header`,children:b.jsxs("div",{className:X.dateHeaderContent,children:["Date",b.jsxs("div",{className:X.dateHeaderActions,children:[b.jsx("button",{className:X.loadPrevBtn,onClick:se,title:"Load 5 previous dates",children:""}),Hr&&b.jsx("button",{className:`${X.loadPrevBtn} ${X.resetDatesBtn}`,onClick:Ee,title:"Hide previous dates",children:""})]})]})}),c.map(q=>b.jsx("th",{className:`${X.rosterTableHeaderCell} sticky-header ${q.email&&xt.includes(q.email)?X.highlightedHeader:""}`,children:q.name},q.email)),b.jsx("th",{className:`${X.genderDividerCell} sticky-header`}),b.jsx("th",{className:`${X.rosterTableHeaderCell} sticky-header ${X.stickyRight} ${X.peekHeader}`,children:b.jsxs("select",{className:X.peekSelector,value:R||"",onChange:q=>N(q.target.value||null),children:[b.jsx("option",{value:"",children:"Peek Position..."}),Te.map(q=>b.jsxs("option",{value:q.name,children:[q.emoji," ",q.name]},q.name))]})})]})}),b.jsx("tbody",{children:d.map((q,ce)=>{const Ce=q.split("T")[0],ve=M[Ce]||w[Ce],xe=ve==null?void 0:ve.eventName,Fe=Un(q),yt=Fe==="today-date",Oe=be(q),Xe=[Fe==="past-date"?X.pastDate:"",Fe==="today-date"?X.todayDate:"",Fe==="future-date"?X.futureDate:"",Oe?"":X.noData,xe?X.specialEventRow:"",q===Pn?X.closestNextDateRow:""].filter(Boolean).join(" ");return b.jsxs("tr",{className:Xe,children:[b.jsx("td",{className:`${X.dateCell} ${X.stickyCol} ${Oe?X.clickable:""}`,onClick:()=>_e(q),title:xe,children:b.jsxs("div",{className:X.dateCellContent,children:[xe&&b.jsx("span",{className:X.specialEventDot}),new Date(q.replace(/-/g,"/")).toLocaleDateString(),yt&&b.jsx("span",{className:X.rosterTodayDot,title:"Today"})]})}),c.map((Se,it)=>{const pn=(G==null?void 0:G.row)===ce&&(G==null?void 0:G.col)===it&&(G==null?void 0:G.table)==="absence",kn=Se.email?Be(q,Se.email):!1,an=Se.email?$e(q,Se.email):"",zn=q===Pn&&Se.email&&xt.includes(Se.email);return b.jsx("td",{className:`${X.rosterCell} ${X.clickable} ${X.absenceRosterCell} ${pn?X.focused:""} ${kn?X.absentCell:""} ${zn?X.highlightedCell:""}`,onClick:()=>{Se.email&&dt(q,Se.email,ce,it)},tabIndex:0,onFocus:()=>A({row:ce,col:it,table:"absence"}),title:an,children:kn?b.jsxs("div",{className:X.absenceInputContainer,children:[b.jsx("input",{type:"text",className:X.absenceReasonInput,value:an,placeholder:"Reason...",maxLength:20,autoFocus:pn,onClick:Ot=>Ot.stopPropagation(),onChange:Ot=>{Se.email&&en(q,Se.email,Ot.target.value)}}),b.jsx("button",{className:X.removeAbsenceBtn,onClick:Ot=>{Ot.stopPropagation(),Se.email&&dt(q,Se.email,ce,it)},title:"Mark as present",children:""})]}):""},Se.email)}),b.jsx("td",{className:X.genderDividerCell}),b.jsx("td",{className:`${X.rosterCell} ${X.peekCell} ${X.stickyRight}`,children:De(q).join(", ")||""})]},q)})})]})}),b.jsx("div",{className:X.loadMoreFooter,children:b.jsx("button",{className:X.loadNextYearBtn,onClick:oe,children:"Load Next Year "})})]}):b.jsxs("div",{className:X.rosterSection,children:[b.jsx("div",{className:X.rosterTableContainer,children:b.jsxs("table",{className:X.rosterTable,children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:`${X.rosterTableHeaderCell} ${X.stickyCol} sticky-header`,children:b.jsxs("div",{className:X.dateHeaderContent,children:["Date",b.jsxs("div",{className:X.dateHeaderActions,children:[b.jsx("button",{className:X.loadPrevBtn,onClick:se,title:"Load 5 previous dates",children:""}),Hr&&b.jsx("button",{className:`${X.loadPrevBtn} ${X.resetDatesBtn}`,onClick:Ee,title:"Hide previous dates",children:""})]})]})}),ie!=null&&ie.isCustom?(ie.customLabels||[]).map((q,ce)=>b.jsx("th",{className:`${X.rosterTableHeaderCell} sticky-header`,children:b.jsx("input",{type:"text",className:X.headerInput,value:q,placeholder:"New Heading...",onChange:Ce=>rn(ce,Ce.target.value)})},`custom-${ce}`)):Me.map((q,ce)=>b.jsxs(P.Fragment,{children:[Ue===ce&&b.jsx("th",{className:`${X.genderDividerCell} sticky-header`}),b.jsxs("th",{className:`${X.rosterTableHeaderCell} sticky-header ${X.clickableHeader} ${q.email&&xt.includes(q.email)?X.highlightedHeader:""}`,onClick:()=>q.email&&L(q.email),title:"Click to hide member",children:[q.name,(ie==null?void 0:ie.sortByGender)&&b.jsxs("span",{className:X.genderLabel,children:["(",q.gender==="Male"?"M":q.gender==="Female"?"F":"?",")"]})]})]},q.email)),(ie==null?void 0:ie.isCustom)&&b.jsx("th",{className:`${X.rosterTableHeaderCell} sticky-header`,children:b.jsx("button",{className:X.addColumnBtn,onClick:Br,title:"Add Column",children:b.jsx(xd,{size:16})})}),b.jsx("th",{className:`${X.genderDividerCell} sticky-header`}),b.jsx("th",{className:`${X.rosterTableHeaderCell} sticky-header ${X.stickyRight} ${X.peekHeader}`,children:b.jsxs("select",{className:X.peekSelector,value:R||"",onChange:q=>N(q.target.value||null),children:[b.jsx("option",{value:"",children:"Peek Position..."}),Te.map(q=>b.jsxs("option",{value:q.name,children:[q.emoji," ",q.name]},q.name))]})})]})}),b.jsx("tbody",{children:d.map((q,ce)=>{const Ce=q.split("T")[0],ve=M[Ce]||w[Ce],xe=ve==null?void 0:ve.eventName,Fe=Un(q),yt=Fe==="today-date",Oe=be(q),Xe=[Fe==="past-date"?X.pastDate:"",Fe==="today-date"?X.todayDate:"",Fe==="future-date"?X.futureDate:"",Oe?"":X.noData,xe?X.specialEventRow:"",q===Pn?X.closestNextDateRow:""].filter(Boolean).join(" ");return b.jsxs("tr",{className:Xe,children:[b.jsx("td",{className:`${X.dateCell} ${X.stickyCol} ${Oe?X.clickable:""}`,onClick:()=>_e(q),title:xe,children:b.jsxs("div",{className:X.dateCellContent,children:[xe&&b.jsx("span",{className:X.specialEventDot}),yt&&b.jsx("span",{className:X.rosterTodayDot,title:"Today"}),new Date(q.replace(/-/g,"/")).toLocaleDateString()]})}),ie!=null&&ie.isCustom?(ie.customLabels||[]).map((Se,it)=>{const pn=(G==null?void 0:G.row)===ce&&(G==null?void 0:G.col)===it&&(G==null?void 0:G.table)==="roster";return b.jsx("td",{className:`${X.rosterCell} ${X.clickable} ${pn?X.focused:""}`,onClick:()=>{Se&&jt(q,Se,ce,it)},tabIndex:0,onFocus:()=>A({row:ce,col:it,table:"roster"}),children:Se&&En(q,Se)},`custom-cell-${it}`)}):Me.map((Se,it)=>{const pn=(G==null?void 0:G.row)===ce&&(G==null?void 0:G.col)===it&&(G==null?void 0:G.table)==="roster",kn=Se.email?gt(q,Se.email):!1,an=Se.email?Be(q,Se.email):!1,zn=q===Pn&&Se.email&&xt.includes(Se.email);return b.jsxs(P.Fragment,{children:[Ue===it&&b.jsx("td",{className:X.genderDividerCell}),b.jsx("td",{className:`${X.rosterCell} ${kn?X.disabled:X.clickable} ${pn?X.focused:""} ${an?X.absentStrike:""} ${zn?X.highlightedCell:""}`,onClick:()=>{Se.email&&!kn&&jt(q,Se.email,ce,it)},tabIndex:0,onFocus:()=>A({row:ce,col:it,table:"roster"}),children:Se.email&&(an?b.jsx("span",{title:$e(q,Se.email),children:""}):En(q,Se.email))})]},Se.email)}),(ie==null?void 0:ie.isCustom)&&b.jsx("td",{className:`${X.rosterCell} ${X.disabled}`}),b.jsx("td",{className:X.genderDividerCell}),b.jsx("td",{className:`${X.rosterCell} ${X.peekCell} ${X.stickyRight}`,children:De(q).join(", ")||""})]},q)})})]})}),b.jsx("div",{className:X.loadMoreFooter,children:b.jsx("button",{className:X.loadNextYearBtn,onClick:oe,children:"Load Next Year "})})]}),O&&b.jsx(Jl,{onSave:hn,onCancel:Mn,isSaving:B,saveText:"Save Roster"})]})},F6="_rosterPage_z6eme_1",q6={rosterPage:F6},G6=()=>b.jsx("div",{className:q6.rosterPage,children:b.jsx(H6,{})}),$6="_appTableContainer_1bvz5_1",K6="_appTable_1bvz5_1",Y6="_colorPickerGroup_1bvz5_44",Q6="_stickyCol_1bvz5_54",Dc={appTableContainer:$6,appTable:K6,colorPickerGroup:Y6,stickyCol:Q6},X6=({text:n,textAlign:e="left",width:t,minWidth:a,isSticky:s=!1})=>b.jsx("th",{className:s?Dc.stickyCol:void 0,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:a?`${a}px`:"auto"},children:n}),ln=({isSticky:n=!1,textAlign:e="left",className:t,children:a})=>b.jsx("td",{style:{textAlign:e,display:e==="center"?"table-cell":void 0},className:`${t||""} ${n?Dc.stickyCol:""}
`,children:b.jsx("div",{style:{display:"flex",justifyContent:e==="center"?"center":e==="right"?"flex-end":"flex-start",alignItems:"center",gap:"8px",height:"100%"},children:a})}),ii=({name:n,value:e,placeholder:t,type:a="text",isSticky:s,isReadOnly:l=!1,isChild:c=!1,onChange:d})=>b.jsxs(ln,{isSticky:s,children:[c&&b.jsx(SC,{}),b.jsx("input",{name:n,className:_a.formInput,type:a,placeholder:t,value:e,onChange:d,readOnly:l})]}),GS=({name:n,value:e,placeholder:t,onChange:a})=>b.jsxs(ln,{className:Dc.colorPickerGroup,children:[b.jsx("input",{name:n,type:"color",className:_a.colorInput,value:e||"#FFFFFF",onChange:a}),b.jsx("input",{name:n,className:_a.formInput,value:e,placeholder:t,onChange:a})]}),H_=({headers:n,children:e})=>b.jsx("div",{className:Dc.appTableContainer,children:b.jsxs("table",{className:Dc.appTable,children:[b.jsx("thead",{children:b.jsx("tr",{children:n.map((t,a)=>b.jsx(X6,{...t},a))})}),b.jsx("tbody",{children:e})]})}),W6="_settingsContainer_1c9s2_1",J6="_managementWrapper_1c9s2_13",mm={settingsContainer:W6,managementWrapper:J6},Fg={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},Z6=()=>{const n=ui(),{positions:e,fetched:t,loading:a}=lt(z=>z.positions),[s,l]=P.useState(e),[c,d]=P.useState(Fg),[m,g]=P.useState("idle"),y=P.useMemo(()=>{const z=Q=>Q.map(ne=>({name:ne.name||"",emoji:ne.emoji||"",colour:ne.colour||"",parentId:ne.parentId||void 0,sortByGender:!!ne.sortByGender,isCustom:!!ne.isCustom}));return JSON.stringify(z(s))!==JSON.stringify(z(e))},[s,e]);P.useEffect(()=>{t||n(Sa())},[n,t]),P.useEffect(()=>{l(e)},[e]);const E=(z,Q,ne)=>{const ue=[...s];ue[z]={...ue[z],[Q]:ne},l(ue)},S=(z,Q)=>{const ne=[...s],ue=ne[z],G=ue.parentId,A=R=>{const N=ne[R];if(!N)return{block:[],startIndex:-1,endIndex:-1};const x=[],O=[N],k=new Set;let I=R,ie=R,Te=0;for(;Te<O.length;){const me=O[Te++];k.has(me.name)||(k.add(me.name),x.push(me),ne.forEach((ye,Me)=>{ye.parentId===me.name&&!k.has(ye.name)&&(O.push(ye),I=Math.min(I,Me),ie=Math.max(ie,Me))}))}return{block:x,startIndex:I,endIndex:ie}};if(G){const R=ne.filter(Te=>Te.parentId===G),x=R.findIndex(Te=>Te.name===ue.name)+(Q==="up"?-1:1);if(x<0||x>=R.length)return;const O=R[x],k=ne.indexOf(ue),I=ne.indexOf(O);if(k===-1||I===-1)return;const ie=[...ne];ie[k]=O,ie[I]=ue,l(ie)}else{const R=A(z),{block:N,startIndex:x,endIndex:O}=R;if(!N||N.length===0)return;if(Q==="up"){if(x===0)return;let k=x-1;for(;k>=0&&ne[k].parentId;)k--;if(k<0)return;const I=A(k),{block:ie,startIndex:Te}=I;if(!ie||ie.length===0)return;const F=[...ne.slice(0,Te),...N,...ie,...ne.slice(O+1)].filter(Boolean);l(F)}else{if(O===ne.length-1)return;let k=O+1;for(;k<ne.length&&ne[k].parentId;)k++;if(k>=ne.length)return;const I=A(k),{block:ie,startIndex:Te}=I;if(!ie||ie.length===0)return;const F=[...ne.slice(0,x),...ie,...N,...ne.slice(Te+ie.length)].filter(Boolean);l(F)}}},w=()=>{if(!c.name.trim()||!c.emoji.trim())return alert("Please provide both an emoji and a name.");l([...s,c]),d(Fg)},M=z=>{if(window.confirm("Delete this position? This will remove it from the global list, and any associated child positions.")){const Q=s[z];let ne=s.filter((ue,G)=>G!==z);Q.parentId||(ne=ne.filter(ue=>ue.parentId!==Q.name)),l(ne)}},B=async()=>{g("saving");try{const z=s.map(Q=>{const ne={name:Q.name||"",emoji:Q.emoji||"",colour:Q.colour||"",sortByGender:!!Q.sortByGender,isCustom:!!Q.isCustom,customLabels:Q.customLabels||[]};return Q.parentId&&(ne.parentId=Q.parentId),ne});await n(z_(z)).unwrap(),g("success"),setTimeout(()=>g("idle"),2e3)}catch(z){console.error("Save Error:",z),alert("Error saving: "+(z instanceof Error?z.message:"Unknown error")),g("idle")}},U=z=>{l(Q=>{const ne={...Fg,parentId:z},ue=Q.findIndex(R=>R.name===z);if(ue===-1)return[...Q,ne];let G=ue;for(;G+1<Q.length&&Q[G+1].parentId===z;)G++;return[...Q.slice(0,G+1),ne,...Q.slice(G+1)]})},Y=()=>{l(e)};return a?b.jsx(Wl,{}):b.jsxs("div",{className:mm.managementWrapper,children:[b.jsxs(H_,{headers:[{text:"Name",minWidth:80,textAlign:"center",isSticky:!0},{text:"Order",minWidth:50},{text:"Emoji",width:30},{text:"Colour",minWidth:100},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Custom Headings",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[s.map((z,Q)=>b.jsxs("tr",{children:[b.jsx(ii,{name:`name-${Q}`,value:z.name,onChange:ne=>E(Q,"name",ne.target.value),isSticky:!0}),b.jsx(ln,{textAlign:"center",children:z.parentId?b.jsx(SC,{}):b.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[b.jsx(ri,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>S(Q,"up"),disabled:Q===0,children:""}),b.jsx(ri,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>S(Q,"down"),disabled:Q===s.length-1,children:""})]})}),b.jsx(ii,{name:`emoji-${Q}`,value:z.emoji,onChange:ne=>E(Q,"emoji",ne.target.value)}),b.jsx(GS,{name:`colour-${Q}`,value:z.colour,onChange:ne=>E(Q,"colour",ne.target.value)}),b.jsx(ln,{textAlign:"center",children:b.jsx(kr,{colour:z.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:z.sortByGender,onClick:()=>E(Q,"sortByGender",!z.sortByGender),isDisabled:z.isCustom,children:z.sortByGender?"YES":"NO"})}),b.jsx(ln,{textAlign:"center",children:b.jsx(kr,{colour:z.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:z.isCustom,onClick:()=>E(Q,"isCustom",!z.isCustom),children:z.isCustom?"YES":"NO"})}),b.jsx(ln,{textAlign:"center",children:!z.parentId&&b.jsxs(ri,{variant:"secondary",size:"small",onClick:()=>U(z.name),title:"Add Child Position",children:[b.jsx(xd,{size:14,style:{marginRight:"4px"}}),"Add"]})}),b.jsx(ln,{textAlign:"center",children:b.jsxs(ri,{variant:"delete",size:"small",onClick:()=>M(Q),children:[b.jsx(AC,{size:14,style:{marginRight:"4px"}}),"Delete"]})})]},`${z.emoji}-${Q}`)),b.jsxs("tr",{className:"pos-row-new",children:[b.jsx(ii,{name:"new-name",value:c.name,placeholder:"Position Name",onChange:z=>d({...c,name:z.target.value}),isSticky:!0}),b.jsx(ln,{textAlign:"center",children:""}),b.jsx(ii,{name:"new-emoji",value:c.emoji,placeholder:"",onChange:z=>d({...c,emoji:z.target.value})}),b.jsx(GS,{name:"new-colour",value:c.colour,placeholder:"#FFFFFF",onChange:z=>d({...c,colour:z.target.value})}),b.jsx(ln,{textAlign:"center",children:b.jsx(kr,{colour:c.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.sortByGender,onClick:()=>d({...c,sortByGender:!c.sortByGender}),isDisabled:c.isCustom,children:c.sortByGender?"YES":"NO"})}),b.jsx(ln,{textAlign:"center",children:b.jsx(kr,{colour:c.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.isCustom,onClick:()=>d({...c,isCustom:!c.isCustom}),children:c.isCustom?"YES":"NO"})}),b.jsx(ln,{textAlign:"center",children:b.jsxs(ri,{onClick:w,disabled:!c.name.trim()||!c.emoji.trim(),children:[b.jsx(xd,{size:16,style:{marginRight:"6px"}}),"Add"]})}),b.jsx(ln,{textAlign:"center",children:""})]})]}),y&&b.jsx(Jl,{label:"Unsaved position changes",saveText:"Save Positions",onSave:B,onCancel:Y,isSaving:m==="saving"})]})},e9="_modalOverlay_ah937_1",t9="_modalContent_ah937_16",n9="_modalHeader_ah937_34",r9="_closeButton_ah937_48",i9="_modalBody_ah937_64",a9="_modalFooter_ah937_70",dl={modalOverlay:e9,modalContent:t9,modalHeader:n9,closeButton:r9,modalBody:i9,modalFooter:a9},PC=({isOpen:n,onClose:e,title:t,children:a,footer:s})=>{if(P.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),!n)return null;const l=b.jsx("div",{className:dl.modalOverlay,onClick:e,children:b.jsxs("div",{className:dl.modalContent,onClick:c=>c.stopPropagation(),children:[b.jsxs("div",{className:dl.modalHeader,children:[b.jsx("h2",{children:t}),b.jsx("button",{className:dl.closeButton,onClick:e,"aria-label":"Close",children:b.jsx(lL,{size:24})})]}),b.jsx("div",{className:dl.modalBody,children:a}),s&&b.jsx("div",{className:dl.modalFooter,children:s})]})});return xA.createPortal(l,document.body)},s9=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],kC=({isOpen:n,onClose:e,team:t,availablePositions:a,onTogglePosition:s,onToggleDay:l})=>{var c;return b.jsxs(PC,{isOpen:n,onClose:e,title:`Edit Team: ${t.name}`,children:[b.jsxs("div",{className:Or.formGroup,children:[b.jsx("label",{className:Or.sectionLabel,children:"Allowed Positions"}),b.jsx(Ic,{children:(c=a==null?void 0:a.filter(d=>!d.parentId))==null?void 0:c.map(d=>{var g;const m=(g=t.positions)==null?void 0:g.some(y=>y.name===d.name);return b.jsxs(kr,{colour:d.colour,isActive:m,onClick:()=>s(d),children:[d.emoji," ",d.name]},d.name)})})]}),b.jsxs("div",{className:Or.settingsSection,children:[b.jsx("label",{className:Or.sectionLabel,children:"Preferred Days"}),b.jsx(Ic,{children:s9.map(d=>{var g;const m=(g=t.preferredDays)==null?void 0:g.includes(d);return b.jsx(kr,{isActive:m,onClick:()=>l(d),children:d},d)})})]})]})},F_=({primaryText:n,secondaryText:e,onClick:t})=>b.jsxs("button",{className:Or.summaryButton,onClick:t,children:[b.jsx("span",{className:Or.summaryPrimary,children:n}),e&&b.jsx("span",{className:Or.summarySecondary,children:e})]}),o9=({team:n,teamIndex:e,availablePositions:t,onUpdate:a,onMove:s,onDelete:l,onTogglePosition:c,onToggleDay:d,isFirst:m,isLast:g})=>{var M;const[y,E]=P.useState(!1),S=()=>!n.positions||n.positions.length===0?"No positions":n.positions.map(B=>B.emoji).join(" "),w=()=>!n.preferredDays||n.preferredDays.length===0?"No days":n.preferredDays.map(B=>B.substring(0,3)).join(", ");return b.jsxs(b.Fragment,{children:[b.jsxs("tr",{children:[b.jsx(ii,{name:`team-name-${e}`,value:n.name,onChange:B=>a(e,"name",B.target.value),isSticky:!0}),b.jsx(ln,{children:b.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[b.jsx(ri,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(e,"up"),disabled:m,children:""}),b.jsx(ri,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(e,"down"),disabled:g,children:""})]})}),b.jsx(ii,{name:`team-emoji-${e}`,value:n.emoji,onChange:B=>a(e,"emoji",B.target.value)}),b.jsx(ii,{name:`team-maxConflict-${e}`,value:((M=n.maxConflict)==null?void 0:M.toString())||"1",type:"number",onChange:B=>a(e,"maxConflict",parseInt(B.target.value)||1)}),b.jsx(ln,{children:b.jsx(F_,{primaryText:S(),secondaryText:w(),onClick:()=>E(!0)})}),b.jsx(ln,{children:b.jsxs(ri,{variant:"delete",size:"small",onClick:()=>l(e),children:[b.jsx(AC,{size:14,style:{marginRight:"6px"}}),"Delete"]})})]}),b.jsx(kC,{isOpen:y,onClose:()=>E(!1),team:n,availablePositions:t,onTogglePosition:B=>c(e,B),onToggleDay:B=>d(e,B)})]})},$S={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1},l9=()=>{var k;const n=ui(),{teams:e,fetched:t,loading:a}=lt(I=>I.teams),{positions:s,fetched:l,loading:c}=lt(I=>I.positions),[d,m]=P.useState(e),[g,y]=P.useState($S),[E,S]=P.useState("idle"),[w,M]=P.useState(!1),B=P.useMemo(()=>{const I=ie=>ie.map(Te=>({name:Te.name||"",emoji:Te.emoji||"",positions:(Te.positions||[]).map(F=>F.name).sort(),preferredDays:[...Te.preferredDays||[]].sort(),maxConflict:Te.maxConflict||1}));return JSON.stringify(I(d))!==JSON.stringify(I(e))},[d,e]);P.useEffect(()=>{t||n(fo()),l||n(Sa())},[n,t,l]),P.useEffect(()=>{m(e)},[e]);const U=(I,ie,Te)=>{const F=[...d];F[I]={...F[I],[ie]:Te},m(F)},Y=(I,ie)=>{const Te=[...d],F=ie==="up"?I-1:I+1;if(F<0||F>=Te.length)return;const me=Te[I];Te[I]=Te[F],Te[F]=me,m(Te)},z=(I,ie)=>{const Te=d.map((F,me)=>{if(me!==I)return F;const ye=F.positions||[],Me=ye.find(Ue=>Ue.name===ie.name)?ye.filter(Ue=>Ue.name!==ie.name):[...ye,ie];return{...F,positions:Me}});m(Te)},Q=(I,ie)=>{const Te=d.map((F,me)=>{if(me!==I)return F;const ye=F.preferredDays||[],Me=ye.includes(ie)?ye.filter(Ue=>Ue!==ie):[...ye,ie];return{...F,preferredDays:Me}});m(Te)},ne=I=>{const ie=g.positions||[],Te=ie.some(F=>F.name===I.name)?ie.filter(F=>F.name!==I.name):[...ie,I];y({...g,positions:Te})},ue=I=>{const ie=g.preferredDays||[],Te=ie.includes(I)?ie.filter(F=>F!==I):[...ie,I];y({...g,preferredDays:Te})},G=()=>{if(!g.name.trim()||!g.emoji.trim())return alert("Please provide both an emoji and a name for the team.");m([...d,g]),y($S)},A=I=>{window.confirm("Are you sure you want to delete this team?")&&m(d.filter((ie,Te)=>Te!==I))},R=async()=>{S("saving");try{const I=d.map(ie=>({name:ie.name||"",emoji:ie.emoji||"",maxConflict:ie.maxConflict||1,preferredDays:ie.preferredDays||[],positions:(ie.positions||[]).map(Te=>({name:Te.name||"",emoji:Te.emoji||"",colour:Te.colour||"",sortByGender:!!Te.sortByGender,isCustom:!!Te.isCustom,customLabels:Te.customLabels||[],...Te.parentId?{parentId:Te.parentId}:{}}))}));await n($f(I)).unwrap(),S("success"),setTimeout(()=>S("idle"),2e3)}catch(I){console.error("Save Error:",I),alert("Error saving: "+(I instanceof Error?I.message:"Unknown error")),S("idle")}},N=()=>{m(e)};if(a||c)return b.jsx(Wl,{});const x=()=>!g.positions||g.positions.length===0?"No positions":g.positions.map(I=>I.emoji).join(" "),O=()=>!g.preferredDays||g.preferredDays.length===0?"No days":g.preferredDays.map(I=>I.substring(0,3)).join(", ");return b.jsxs("div",{className:mm.managementWrapper,children:[b.jsxs(H_,{headers:[{text:"Name",minWidth:100,isSticky:!0},{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Conflicts",width:60,textAlign:"center"},{text:"Config",minWidth:150},{text:"",width:50}],children:[d.map((I,ie)=>b.jsx(o9,{team:I,teamIndex:ie,availablePositions:s,onUpdate:U,onMove:Y,onDelete:A,onTogglePosition:z,onToggleDay:Q,isFirst:ie===0,isLast:ie===d.length-1},`${I.emoji}-${ie}`)),b.jsxs("tr",{className:"team-row-new",children:[b.jsx(ii,{name:"new-team-name",value:g.name,placeholder:"Team Name",onChange:I=>y({...g,name:I.target.value}),isSticky:!0}),b.jsx(ln,{children:""}),b.jsx(ii,{name:"new-team-emoji",value:g.emoji,placeholder:"",onChange:I=>y({...g,emoji:I.target.value})}),b.jsx(ii,{name:"new-team-maxConflict",value:((k=g.maxConflict)==null?void 0:k.toString())||"1",type:"number",onChange:I=>y({...g,maxConflict:parseInt(I.target.value)||1})}),b.jsx(ln,{children:b.jsx(F_,{primaryText:x(),secondaryText:O(),onClick:()=>M(!0)})}),b.jsx(ln,{children:b.jsxs(ri,{onClick:G,disabled:!g.name.trim()||!g.emoji.trim(),children:[b.jsx(xd,{size:16,style:{marginRight:"6px"}}),"Add"]})})]})]}),b.jsx(kC,{isOpen:w,onClose:()=>M(!1),team:g,availablePositions:s,onTogglePosition:ne,onToggleDay:ue}),B&&b.jsx(Jl,{label:"Unsaved team changes",saveText:"Save All Team Changes",onSave:R,onCancel:N,isSaving:E==="saving"})]})},u9={allUsers:[],originalUsers:[],loading:!1,saving:!1,error:null},Zf=Ur("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=Hc(On,"users"),a=Gc(t),s=await Kc(a),l=[];return s.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),ed=Ur("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=C1(On);n.forEach(a=>{const{id:s,...l}=a;l.teamPositions&&(l.indexedAssignments=CC(l.teamPositions)),t.update(si(On,"users",s),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),VC=wo({name:"userManagement",initialState:u9,reducers:{updateUserField(n,e){const{id:t,field:a,value:s}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[a]=s)},toggleUserTeam(n,e){const{userId:t,teamName:a}=e.payload,s=n.allUsers.find(l=>l.id===t);if(s){const l=s.teams||[],c=l.includes(a)?l.filter(d=>d!==a):[...l,a];s.teams=c,s.teamPositions||(s.teamPositions={}),c.includes(a)?s.teamPositions[a]||(s.teamPositions[a]=[]):delete s.teamPositions[a]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:a,posName:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[a]||(l.teamPositions[a]=[]);const c=l.teamPositions[a],d=c.includes(s)?c.filter(m=>m!==s):[...c,s];l.teamPositions[a]=d}},moveUserTeam(n,e){const{userId:t,teamName:a,direction:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l&&l.teams){const c=l.teams.indexOf(a);if(c===-1)return;const d=s==="up"?c-1:c+1;if(d<0||d>=l.teams.length)return;const m=[...l.teams];[m[c],m[d]]=[m[d],m[c]],l.teams=m}},resetUserChanges(n){n.allUsers=JSON.parse(JSON.stringify(n.originalUsers))}},extraReducers:n=>{n.addCase(Zf.pending,e=>{e.loading=!0,e.error=null}).addCase(Zf.fulfilled,(e,t)=>{e.allUsers=t.payload,e.originalUsers=JSON.parse(JSON.stringify(t.payload)),e.loading=!1}).addCase(Zf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(ed.pending,e=>{e.saving=!0,e.error=null}).addCase(ed.fulfilled,e=>{e.saving=!1,e.originalUsers=JSON.parse(JSON.stringify(e.allUsers))}).addCase(ed.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:c9,toggleUserTeam:h9,toggleUserTeamPosition:f9,moveUserTeam:d9,resetUserChanges:m9}=VC.actions,p9=VC.reducer,g9=({isOpen:n,onClose:e,user:t,availableTeams:a})=>{const s=ui(),{positions:l}=lt(g=>g.positions),c=g=>{s(h9({userId:t.id,teamName:g}))},d=(g,y)=>{s(f9({userId:t.id,teamName:g,posName:y}))},m=(g,y)=>{s(d9({userId:t.id,teamName:g,direction:y}))};return b.jsx(PC,{isOpen:n,onClose:e,title:`Edit Assignments: ${t.name}`,children:b.jsx(xC,{selectedTeams:t.teams||[],teamPositions:t.teamPositions||{},onToggleTeam:c,onTogglePosition:d,onMoveTeam:m,availableTeams:a,globalPositions:l})})},y9=({user:n,availableTeams:e,adminEmail:t})=>{const a=ui(),{positions:s}=lt(y=>y.positions),[l,c]=P.useState(!1),d=(y,E)=>{a(c9({id:n.id,field:y,value:E}))},m=()=>!n.teams||n.teams.length===0?"No teams":n.teams.map(y=>{const E=e.find(S=>S.name===y);return(E==null?void 0:E.emoji)||""}).join(" "),g=()=>n.teamPositions?Object.entries(n.teamPositions).reduce((y,[,E])=>{const S=E.filter(w=>{const M=s.find(B=>B.name===w);return!(M!=null&&M.isCustom)});return y+S.length},0):0;return b.jsxs(b.Fragment,{children:[b.jsxs("tr",{children:[b.jsx(ii,{name:`name-${n.id}`,value:n.name||"",onChange:y=>d("name",y.target.value),isSticky:!0}),b.jsx(ii,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),b.jsx(ln,{children:b.jsxs("select",{name:`gender-${n.id}`,className:_a.formSelect,value:n.gender,onChange:y=>d("gender",y.target.value),children:[b.jsx("option",{value:"",children:"-"}),b.jsx("option",{value:"Male",children:"Male"}),b.jsx("option",{value:"Female",children:"Female"})]})}),b.jsx(ln,{children:b.jsx(F_,{primaryText:m(),secondaryText:`(${g()} pos)`,onClick:()=>c(!0)})}),b.jsx(ln,{textAlign:"center",children:b.jsx(kr,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>d("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),b.jsx(ln,{textAlign:"center",children:b.jsx(kr,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>d("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),b.jsx(ln,{textAlign:"center",children:b.jsx(kr,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>d("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id),b.jsx(g9,{isOpen:l,onClose:()=>c(!1),user:n,availableTeams:e})]})},_9=()=>{const n=ui(),{allUsers:e,originalUsers:t,loading:a,saving:s,error:l}=lt(y=>y.userManagement),c=lt(y=>y.teams.teams),d=P.useMemo(()=>{const y=E=>E.map(S=>({name:S.name||"",gender:S.gender||"",teams:[...S.teams||[]].sort(),teamPositions:Object.keys(S.teamPositions||{}).sort().reduce((w,M)=>{var B;return w[M]=[...((B=S.teamPositions)==null?void 0:B[M])||[]].sort(),w},{}),isActive:!!S.isActive,isApproved:!!S.isApproved,isAdmin:!!S.isAdmin}));return JSON.stringify(y(e))!==JSON.stringify(y(t))},[e,t]);P.useEffect(()=>{n(Zf())},[n]);const m=()=>{n(ed(e))},g=()=>{n(m9())};return a?b.jsx(Wl,{}):l?b.jsxs("div",{children:["Error: ",l]}):b.jsxs("div",{className:mm.managementWrapper,children:[b.jsx(H_,{headers:[{text:"Name",minWidth:70,isSticky:!0},{text:"Email",minWidth:170},{text:"Gender",minWidth:90},{text:"Assignments",minWidth:150},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(y=>b.jsx(y9,{user:y,availableTeams:c,adminEmail:"chris.sm.kang542@gmail.com"},y.id))}),d&&b.jsx(Jl,{label:"Unsaved user changes",saveText:"Save All User Changes",onSave:m,onCancel:g,isSaving:s})]})},v9=()=>{const{userData:n}=lt(t=>t.auth),{section:e}=Vd();return n?b.jsxs("div",{className:mm.settingsContainer,children:[e===bl.PROFILE&&b.jsx(MC,{}),e===bl.USER_MANAGEMENT&&(n.isAdmin?b.jsx(_9,{}):b.jsx("p",{children:"Access Denied"})),e===bl.TEAMS&&(n.isAdmin?b.jsx(l9,{}):b.jsx("p",{children:"Access Denied"})),e===bl.POSITIONS&&(n.isAdmin?b.jsx(Z6,{}):b.jsx("p",{children:"Access Denied"}))]}):null},E9=[{path:"/",element:b.jsx(MV,{})},{path:"/login",element:b.jsx(L3,{})},{path:"/guest",element:b.jsx(N3,{})},{path:"/app",element:b.jsx(kj,{}),children:[{path:"",element:b.jsx(XL,{}),children:[{path:"dashboard",element:b.jsx(GU,{})},{path:"roster/:teamName?/:positionName?",element:b.jsx(G6,{})},{path:"settings/:section?",element:b.jsx(v9,{})}]}]}];let KS=!1;const T9=n=>{if(!KS){KS=!0;let e;fk(zl,t=>{if(t){n.dispatch(f3(t)),n.dispatch(Wf(t.uid));const a=si(On,"users",t.uid);e=b4(a,s=>{if(s.exists()){const l=s.data();n.dispatch(d3(l))}})}else n.dispatch(m3()),e&&e()})}return e=>t=>e(t)},b9=cj({reducer:{auth:p3,positions:Oj,roster:lU,rosterView:mU,teams:Pj,ui:pL,userManagement:p9},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(T9)}),S9=ox(E9);CI.createRoot(document.getElementById("root")).render(b.jsx(QS.StrictMode,{children:b.jsx(BI,{store:b9,children:b.jsx(bx,{children:b.jsx(IV,{children:b.jsx(Ex,{router:S9})})})})}));
