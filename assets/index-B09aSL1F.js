var kC=Object.defineProperty;var UC=(n,e,t)=>e in n?kC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Hp=(n,e,t)=>UC(n,typeof e!="symbol"?e+"":e,t);function jC(n,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function AS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qp={exports:{}},Nu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT;function zC(){if(FT)return Nu;FT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:a,key:c,ref:s!==void 0?s:null,props:l}}return Nu.Fragment=e,Nu.jsx=t,Nu.jsxs=t,Nu}var HT;function BC(){return HT||(HT=1,qp.exports=zC()),qp.exports}var w=BC(),Gp={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function FC(){if(qT)return We;qT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function C(j){return j===null||typeof j!="object"?null:(j=S&&j[S]||j["@@iterator"],typeof j=="function"?j:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,V={};function H(j,K,oe){this.props=j,this.context=K,this.refs=V,this.updater=oe||U}H.prototype.isReactComponent={},H.prototype.setState=function(j,K){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,K,"setState")},H.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function q(){}q.prototype=H.prototype;function F(j,K,oe){this.props=j,this.context=K,this.refs=V,this.updater=oe||U}var Q=F.prototype=new q;Q.constructor=F,B(Q,H.prototype),Q.isPureReactComponent=!0;var re=Array.isArray;function Y(){}var b={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function I(j,K,oe){var ce=oe.ref;return{$$typeof:n,type:j,key:K,ref:ce!==void 0?ce:null,props:oe}}function N(j,K){return I(j.type,K,j.props)}function x(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function P(j){var K={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(oe){return K[oe]})}var O=/\/+/g;function Ue(j,K){return typeof j=="object"&&j!==null&&j.key!=null?P(""+j.key):K.toString(36)}function Ze(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(Y,Y):(j.status="pending",j.then(function(K){j.status==="pending"&&(j.status="fulfilled",j.value=K)},function(K){j.status==="pending"&&(j.status="rejected",j.reason=K)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function W(j,K,oe,ce,pe){var Ee=typeof j;(Ee==="undefined"||Ee==="boolean")&&(j=null);var Pe=!1;if(j===null)Pe=!0;else switch(Ee){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(j.$$typeof){case n:case e:Pe=!0;break;case v:return Pe=j._init,W(Pe(j._payload),K,oe,ce,pe)}}if(Pe)return pe=pe(j),Pe=ce===""?"."+Ue(j,0):ce,re(pe)?(oe="",Pe!=null&&(oe=Pe.replace(O,"$&/")+"/"),W(pe,K,oe,"",function(vn){return vn})):pe!=null&&(x(pe)&&(pe=N(pe,oe+(pe.key==null||j&&j.key===pe.key?"":(""+pe.key).replace(O,"$&/")+"/")+Pe)),K.push(pe)),1;Pe=0;var Ke=ce===""?".":ce+":";if(re(j))for(var lt=0;lt<j.length;lt++)ce=j[lt],Ee=Ke+Ue(ce,lt),Pe+=W(ce,K,oe,Ee,pe);else if(lt=C(j),typeof lt=="function")for(j=lt.call(j),lt=0;!(ce=j.next()).done;)ce=ce.value,Ee=Ke+Ue(ce,lt++),Pe+=W(ce,K,oe,Ee,pe);else if(Ee==="object"){if(typeof j.then=="function")return W(Ze(j),K,oe,ce,pe);throw K=String(j),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function me(j,K,oe){if(j==null)return j;var ce=[],pe=0;return W(j,ce,"","",function(Ee){return K.call(oe,Ee,pe++)}),ce}function ge(j){if(j._status===-1){var K=j._result;K=K(),K.then(function(oe){(j._status===0||j._status===-1)&&(j._status=1,j._result=oe)},function(oe){(j._status===0||j._status===-1)&&(j._status=2,j._result=oe)}),j._status===-1&&(j._status=0,j._result=K)}if(j._status===1)return j._result.default;throw j._result}var je=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Me={map:me,forEach:function(j,K,oe){me(j,function(){K.apply(this,arguments)},oe)},count:function(j){var K=0;return me(j,function(){K++}),K},toArray:function(j){return me(j,function(K){return K})||[]},only:function(j){if(!x(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return We.Activity=E,We.Children=Me,We.Component=H,We.Fragment=t,We.Profiler=s,We.PureComponent=F,We.StrictMode=a,We.Suspense=p,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=b,We.__COMPILER_RUNTIME={__proto__:null,c:function(j){return b.H.useMemoCache(j)}},We.cache=function(j){return function(){return j.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(j,K,oe){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ce=B({},j.props),pe=j.key;if(K!=null)for(Ee in K.key!==void 0&&(pe=""+K.key),K)!A.call(K,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&K.ref===void 0||(ce[Ee]=K[Ee]);var Ee=arguments.length-2;if(Ee===1)ce.children=oe;else if(1<Ee){for(var Pe=Array(Ee),Ke=0;Ke<Ee;Ke++)Pe[Ke]=arguments[Ke+2];ce.children=Pe}return I(j.type,pe,ce)},We.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},We.createElement=function(j,K,oe){var ce,pe={},Ee=null;if(K!=null)for(ce in K.key!==void 0&&(Ee=""+K.key),K)A.call(K,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(pe[ce]=K[ce]);var Pe=arguments.length-2;if(Pe===1)pe.children=oe;else if(1<Pe){for(var Ke=Array(Pe),lt=0;lt<Pe;lt++)Ke[lt]=arguments[lt+2];pe.children=Ke}if(j&&j.defaultProps)for(ce in Pe=j.defaultProps,Pe)pe[ce]===void 0&&(pe[ce]=Pe[ce]);return I(j,Ee,pe)},We.createRef=function(){return{current:null}},We.forwardRef=function(j){return{$$typeof:d,render:j}},We.isValidElement=x,We.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:ge}},We.memo=function(j,K){return{$$typeof:g,type:j,compare:K===void 0?null:K}},We.startTransition=function(j){var K=b.T,oe={};b.T=oe;try{var ce=j(),pe=b.S;pe!==null&&pe(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(Y,je)}catch(Ee){je(Ee)}finally{K!==null&&oe.types!==null&&(K.types=oe.types),b.T=K}},We.unstable_useCacheRefresh=function(){return b.H.useCacheRefresh()},We.use=function(j){return b.H.use(j)},We.useActionState=function(j,K,oe){return b.H.useActionState(j,K,oe)},We.useCallback=function(j,K){return b.H.useCallback(j,K)},We.useContext=function(j){return b.H.useContext(j)},We.useDebugValue=function(){},We.useDeferredValue=function(j,K){return b.H.useDeferredValue(j,K)},We.useEffect=function(j,K){return b.H.useEffect(j,K)},We.useEffectEvent=function(j){return b.H.useEffectEvent(j)},We.useId=function(){return b.H.useId()},We.useImperativeHandle=function(j,K,oe){return b.H.useImperativeHandle(j,K,oe)},We.useInsertionEffect=function(j,K){return b.H.useInsertionEffect(j,K)},We.useLayoutEffect=function(j,K){return b.H.useLayoutEffect(j,K)},We.useMemo=function(j,K){return b.H.useMemo(j,K)},We.useOptimistic=function(j,K){return b.H.useOptimistic(j,K)},We.useReducer=function(j,K,oe){return b.H.useReducer(j,K,oe)},We.useRef=function(j){return b.H.useRef(j)},We.useState=function(j){return b.H.useState(j)},We.useSyncExternalStore=function(j,K,oe){return b.H.useSyncExternalStore(j,K,oe)},We.useTransition=function(){return b.H.useTransition()},We.version="19.2.4",We}var GT;function md(){return GT||(GT=1,Gp.exports=FC()),Gp.exports}var M=md();const wS=AS(M),HC=jC({__proto__:null,default:wS},[M]);var $p={exports:{}},xu={},Kp={exports:{}},Yp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T;function qC(){return $T||($T=1,(function(n){function e(W,me){var ge=W.length;W.push(me);e:for(;0<ge;){var je=ge-1>>>1,Me=W[je];if(0<s(Me,me))W[je]=me,W[ge]=Me,ge=je;else break e}}function t(W){return W.length===0?null:W[0]}function a(W){if(W.length===0)return null;var me=W[0],ge=W.pop();if(ge!==me){W[0]=ge;e:for(var je=0,Me=W.length,j=Me>>>1;je<j;){var K=2*(je+1)-1,oe=W[K],ce=K+1,pe=W[ce];if(0>s(oe,ge))ce<Me&&0>s(pe,oe)?(W[je]=pe,W[ce]=ge,je=ce):(W[je]=oe,W[K]=ge,je=K);else if(ce<Me&&0>s(pe,ge))W[je]=pe,W[ce]=ge,je=ce;else break e}}return me}function s(W,me){var ge=W.sortIndex-me.sortIndex;return ge!==0?ge:W.id-me.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,E=null,S=3,C=!1,U=!1,B=!1,V=!1,H=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function Q(W){for(var me=t(g);me!==null;){if(me.callback===null)a(g);else if(me.startTime<=W)a(g),me.sortIndex=me.expirationTime,e(p,me);else break;me=t(g)}}function re(W){if(B=!1,Q(W),!U)if(t(p)!==null)U=!0,Y||(Y=!0,P());else{var me=t(g);me!==null&&Ze(re,me.startTime-W)}}var Y=!1,b=-1,A=5,I=-1;function N(){return V?!0:!(n.unstable_now()-I<A)}function x(){if(V=!1,Y){var W=n.unstable_now();I=W;var me=!0;try{e:{U=!1,B&&(B=!1,q(b),b=-1),C=!0;var ge=S;try{t:{for(Q(W),E=t(p);E!==null&&!(E.expirationTime>W&&N());){var je=E.callback;if(typeof je=="function"){E.callback=null,S=E.priorityLevel;var Me=je(E.expirationTime<=W);if(W=n.unstable_now(),typeof Me=="function"){E.callback=Me,Q(W),me=!0;break t}E===t(p)&&a(p),Q(W)}else a(p);E=t(p)}if(E!==null)me=!0;else{var j=t(g);j!==null&&Ze(re,j.startTime-W),me=!1}}break e}finally{E=null,S=ge,C=!1}me=void 0}}finally{me?P():Y=!1}}}var P;if(typeof F=="function")P=function(){F(x)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Ue=O.port2;O.port1.onmessage=x,P=function(){Ue.postMessage(null)}}else P=function(){H(x,0)};function Ze(W,me){b=H(function(){W(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(W){switch(S){case 1:case 2:case 3:var me=3;break;default:me=S}var ge=S;S=me;try{return W()}finally{S=ge}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(W,me){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ge=S;S=W;try{return me()}finally{S=ge}},n.unstable_scheduleCallback=function(W,me,ge){var je=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?je+ge:je):ge=je,W){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=ge+Me,W={id:v++,callback:me,priorityLevel:W,startTime:ge,expirationTime:Me,sortIndex:-1},ge>je?(W.sortIndex=ge,e(g,W),t(p)===null&&W===t(g)&&(B?(q(b),b=-1):B=!0,Ze(re,ge-je))):(W.sortIndex=Me,e(p,W),U||C||(U=!0,Y||(Y=!0,P()))),W},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(W){var me=S;return function(){var ge=S;S=me;try{return W.apply(this,arguments)}finally{S=ge}}}})(Yp)),Yp}var KT;function GC(){return KT||(KT=1,Kp.exports=qC()),Kp.exports}var Qp={exports:{}},zn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT;function $C(){if(YT)return zn;YT=1;var n=md();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:p,containerInfo:g,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,zn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},zn.flushSync=function(p){var g=c.T,v=a.p;try{if(c.T=null,a.p=2,p)return p()}finally{c.T=g,a.p=v,a.d.f()}},zn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},zn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},zn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:C}):v==="script"&&a.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},zn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},zn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin);a.d.L(p,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},zn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},zn.requestFormReset=function(p){a.d.r(p)},zn.unstable_batchedUpdates=function(p,g){return p(g)},zn.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},zn.useFormStatus=function(){return c.H.useHostTransitionStatus()},zn.version="19.2.4",zn}var QT;function RS(){if(QT)return Qp.exports;QT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qp.exports=$C(),Qp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function KC(){if(XT)return xu;XT=1;var n=GC(),e=md(),t=RS();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(a(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,u=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),r;if(m===u)return p(f),i;m=m.sibling}throw Error(a(188))}if(o.return!==u.return)o=f,u=m;else{for(var _=!1,R=f.child;R;){if(R===o){_=!0,o=f,u=m;break}if(R===u){_=!0,u=f,o=m;break}R=R.sibling}if(!_){for(R=m.child;R;){if(R===o){_=!0,o=m,u=f;break}if(R===u){_=!0,u=m,o=f;break}R=R.sibling}if(!_)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function v(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=v(r),i!==null)return i;r=r.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),F=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function P(r){return r===null||typeof r!="object"?null:(r=x&&r[x]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function Ue(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case B:return"Fragment";case H:return"Profiler";case V:return"StrictMode";case re:return"Suspense";case Y:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case U:return"Portal";case F:return r.displayName||"Context";case q:return(r._context.displayName||"Context")+".Consumer";case Q:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case b:return i=r.displayName||null,i!==null?i:Ue(r.type)||"Memo";case A:i=r._payload,r=r._init;try{return Ue(r(i))}catch{}}return null}var Ze=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},je=[],Me=-1;function j(r){return{current:r}}function K(r){0>Me||(r.current=je[Me],je[Me]=null,Me--)}function oe(r,i){Me++,je[Me]=r.current,r.current=i}var ce=j(null),pe=j(null),Ee=j(null),Pe=j(null);function Ke(r,i){switch(oe(Ee,i),oe(pe,r),oe(ce,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?hT(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=hT(i),r=fT(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}K(ce),oe(ce,r)}function lt(){K(ce),K(pe),K(Ee)}function vn(r){r.memoizedState!==null&&oe(Pe,r);var i=ce.current,o=fT(i,r.type);i!==o&&(oe(pe,r),oe(ce,o))}function kn(r){pe.current===r&&(K(ce),K(pe)),Pe.current===r&&(K(Pe),Ru._currentValue=ge)}var _t,ae;function _e(r){if(_t===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);_t=i&&i[1]||"",ae=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_t+r+ae}var Oe=!1;function Ae(r,i){if(!r||Oe)return"";Oe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ie){var te=ie}Reflect.construct(r,[],he)}else{try{he.call()}catch(ie){te=ie}r.call(he.prototype)}}else{try{throw Error()}catch(ie){te=ie}(he=r())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],R=m[1];if(_&&R){var k=_.split(`
`),Z=R.split(`
`);for(f=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(u===k.length||f===Z.length)for(u=k.length-1,f=Z.length-1;1<=u&&0<=f&&k[u]!==Z[f];)f--;for(;1<=u&&0<=f;u--,f--)if(k[u]!==Z[f]){if(u!==1||f!==1)do if(u--,f--,0>f||k[u]!==Z[f]){var se=`
`+k[u].replace(" at new "," at ");return r.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",r.displayName)),se}while(1<=u&&0<=f);break}}}finally{Oe=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?_e(o):""}function ze(r,i){switch(r.tag){case 26:case 27:case 5:return _e(r.type);case 16:return _e("Lazy");case 13:return r.child!==i&&i!==null?_e("Suspense Fallback"):_e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return Ae(r.type,!1);case 11:return Ae(r.type.render,!1);case 1:return Ae(r.type,!0);case 31:return _e("Activity");default:return""}}function Fe(r){try{var i="",o=null;do i+=ze(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Qe=Object.prototype.hasOwnProperty,Ge=n.unstable_scheduleCallback,Ve=n.unstable_cancelCallback,Dt=n.unstable_shouldYield,rn=n.unstable_requestPaint,Rt=n.unstable_now,_n=n.unstable_getCurrentPriorityLevel,Zn=n.unstable_ImmediatePriority,ki=n.unstable_UserBlockingPriority,An=n.unstable_NormalPriority,hr=n.unstable_LowPriority,Ts=n.unstable_IdlePriority,go=n.log,va=n.unstable_setDisableYieldValue,fr=null,Lt=null;function $n(r){if(typeof go=="function"&&va(r),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(fr,r)}catch{}}var $t=Math.clz32?Math.clz32:Ss,bs=Math.log,_a=Math.LN2;function Ss(r){return r>>>=0,r===0?32:31-(bs(r)/_a|0)|0}var Kn=256,fi=262144,Kt=4194304;function xr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function dr(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,_=r.pingedLanes;r=r.warmLanes;var R=u&134217727;return R!==0?(u=R&~m,u!==0?f=xr(u):(_&=R,_!==0?f=xr(_):o||(o=R&~r,o!==0&&(f=xr(o))))):(R=u&~m,R!==0?f=xr(R):_!==0?f=xr(_):o||(o=u&~r,o!==0&&(f=xr(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function mr(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function yo(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ui(){var r=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),r}function Yn(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function di(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ul(r,i,o,u,f,m){var _=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var R=r.entanglements,k=r.expirationTimes,Z=r.hiddenUpdates;for(o=_&~o;0<o;){var se=31-$t(o),he=1<<se;R[se]=0,k[se]=-1;var te=Z[se];if(te!==null)for(Z[se]=null,se=0;se<te.length;se++){var ie=te[se];ie!==null&&(ie.lane&=-536870913)}o&=~he}u!==0&&ji(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(_&~i))}function ji(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-$t(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function L(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-$t(o),f=1<<u;f&i|r[u]&i&&(r[u]|=i),o&=~f}}function G(r,i){var o=i&-i;return o=(o&42)!==0?1:ee(o),(o&(r.suspendedLanes|i))!==0?0:o}function ee(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function de(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ye(){var r=me.p;return r!==0?r:(r=window.event,r===void 0?32:PT(r.type))}function we(r,i){var o=me.p;try{return me.p=r,i()}finally{me.p=o}}var Ie=Math.random().toString(36).slice(2),ve="__reactFiber$"+Ie,be="__reactProps$"+Ie,Ce="__reactContainer$"+Ie,He="__reactEvents$"+Ie,xe="__reactListeners$"+Ie,Ye="__reactHandles$"+Ie,at="__reactResources$"+Ie,Nt="__reactMarker$"+Ie;function Ft(r){delete r[ve],delete r[be],delete r[He],delete r[xe],delete r[Ye]}function Ut(r){var i=r[ve];if(i)return i;for(var o=r.parentNode;o;){if(i=o[Ce]||o[ve]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=_T(r);r!==null;){if(o=r[ve])return o;r=_T(r)}return i}r=o,o=r.parentNode}return null}function nt(r){if(r=r[ve]||r[Ce]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function jt(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function wn(r){var i=r[at];return i||(i=r[at]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function zt(r){r[Nt]=!0}var er=new Set,Un={};function tr(r,i){jn(r,i),jn(r+"Capture",i)}function jn(r,i){for(Un[r]=i,r=0;r<i.length;r++)er.add(i[r])}var pr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mi={},pi={};function ot(r){return Qe.call(pi,r)?!0:Qe.call(mi,r)?!1:pr.test(r)?pi[r]=!0:(mi[r]=!0,!1)}function Xt(r,i,o){if(ot(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function cn(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function xt(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function rt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function gr(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ea(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function bt(r){if(!r._valueTracker){var i=gr(r)?"checked":"value";r._valueTracker=Ea(r,i,""+r[i])}}function As(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=gr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function gi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ws=/[\n"\\]/g;function nr(r){return r.replace(ws,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function vo(r,i,o,u,f,m,_,R){r.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.type=_:r.removeAttribute("type"),i!=null?_==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+rt(i)):r.value!==""+rt(i)&&(r.value=""+rt(i)):_!=="submit"&&_!=="reset"||r.removeAttribute("value"),i!=null?jl(r,_,rt(i)):o!=null?jl(r,_,rt(o)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+rt(R):r.removeAttribute("name")}function kc(r,i,o,u,f,m,_,R){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){bt(r);return}o=o!=null?""+rt(o):"",i=i!=null?""+rt(i):o,R||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=R?r.checked:!!u,r.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.name=_),bt(r)}function jl(r,i,o){i==="number"&&gi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ta(r,i,o,u){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+rt(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function Uc(r,i,o){if(i!=null&&(i=""+rt(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+rt(o):""}function ba(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(Ze(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=rt(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),bt(r)}function rr(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var jc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zl(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||jc.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function Bl(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&zl(r,f,u)}else for(var m in i)i.hasOwnProperty(m)&&zl(r,m,i[m])}function _o(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Eo(r){return Sa.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Xr(){}var Fl=null;function Or(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Aa=null,yi=null;function Rs(r){var i=nt(r);if(i&&(r=i.stateNode)){var o=r[be]||null;e:switch(r=i.stateNode,i.type){case"input":if(vo(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+nr(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var f=u[be]||null;if(!f)throw Error(a(90));vo(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&As(u)}break e;case"textarea":Uc(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ta(r,!!o.multiple,i,!1)}}}var To=!1;function wa(r,i,o){if(To)return r(i,o);To=!0;try{var u=r(i);return u}finally{if(To=!1,(Aa!==null||yi!==null)&&(Mh(),Aa&&(i=Aa,r=yi,yi=Aa=null,Rs(i),r)))for(i=0;i<r.length;i++)Rs(r[i])}}function Wr(r,i){var o=r.stateNode;if(o===null)return null;var u=o[be]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cs=!1;if(Mr)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Cs=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch{Cs=!1}var vi=null,Hl=null,Is=null;function ql(){if(Is)return Is;var r,i=Hl,o=i.length,u,f="value"in vi?vi.value:vi.textContent,m=f.length;for(r=0;r<o&&i[r]===f[r];r++);var _=o-r;for(u=1;u<=_&&i[o-u]===f[m-u];u++);return Is=f.slice(r,1<u?1-u:void 0)}function Ds(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function zi(){return!0}function Jr(){return!1}function In(r){function i(o,u,f,m,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(o=r[R],this[R]=o?o(m):m[R]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?zi:Jr,this.isPropagationStopped=Jr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),i}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_i=In(Bi),Ra=E({},Bi,{view:0,detail:0}),Gl=In(Ra),Ca,bo,Ei,So=E({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ia,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ei&&(Ei&&r.type==="mousemove"?(Ca=r.screenX-Ei.screenX,bo=r.screenY-Ei.screenY):bo=Ca=0,Ei=r),Ca)},movementY:function(r){return"movementY"in r?r.movementY:bo}}),$l=In(So),Ns=E({},So,{dataTransfer:0}),Bc=In(Ns),Fc=E({},Ra,{relatedTarget:0}),xs=In(Fc),Kl=E({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Hc=In(Kl),Ao=E({},Bi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),qc=In(Ao),Gc=E({},Bi,{data:0}),Ti=In(Gc),$c={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qc(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Yc[r])?!!i[r]:!1}function Ia(){return Qc}var Qn=E({},Ra,{key:function(r){if(r.key){var i=$c[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ds(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Kc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ia,charCode:function(r){return r.type==="keypress"?Ds(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ds(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Xc=In(Qn),Wc=E({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fi=In(Wc),h=E({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ia}),y=In(h),T=E({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=In(T),X=E({},So,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=In(X),Te=E({},Bi,{newState:0,oldState:0}),et=In(Te),an=[9,13,27,32],St=Mr&&"CompositionEvent"in window,Yt=null;Mr&&"documentMode"in document&&(Yt=document.documentMode);var Vr=Mr&&"TextEvent"in window&&!Yt,bi=Mr&&(!St||Yt&&8<Yt&&11>=Yt),Zr=" ",ei=!1;function Os(r,i){switch(r){case"keyup":return an.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ro=!1;function o1(r,i){switch(r){case"compositionend":return wo(i);case"keypress":return i.which!==32?null:(ei=!0,Zr);case"textInput":return r=i.data,r===Zr&&ei?null:r;default:return null}}function l1(r,i){if(Ro)return r==="compositionend"||!St&&Os(r,i)?(r=ql(),Is=Hl=vi=null,Ro=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return bi&&i.locale!=="ko"?null:i.data;default:return null}}var u1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bv(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!u1[r.type]:i==="textarea"}function Sv(r,i,o,u){Aa?yi?yi.push(u):yi=[u]:Aa=u,i=zh(i,"onChange"),0<i.length&&(o=new _i("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var Yl=null,Ql=null;function c1(r){aT(r,0)}function Jc(r){var i=jt(r);if(As(i))return r}function Av(r,i){if(r==="change")return i}var wv=!1;if(Mr){var Xd;if(Mr){var Wd="oninput"in document;if(!Wd){var Rv=document.createElement("div");Rv.setAttribute("oninput","return;"),Wd=typeof Rv.oninput=="function"}Xd=Wd}else Xd=!1;wv=Xd&&(!document.documentMode||9<document.documentMode)}function Cv(){Yl&&(Yl.detachEvent("onpropertychange",Iv),Ql=Yl=null)}function Iv(r){if(r.propertyName==="value"&&Jc(Ql)){var i=[];Sv(i,Ql,r,Or(r)),wa(c1,i)}}function h1(r,i,o){r==="focusin"?(Cv(),Yl=i,Ql=o,Yl.attachEvent("onpropertychange",Iv)):r==="focusout"&&Cv()}function f1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Jc(Ql)}function d1(r,i){if(r==="click")return Jc(i)}function m1(r,i){if(r==="input"||r==="change")return Jc(i)}function p1(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var yr=typeof Object.is=="function"?Object.is:p1;function Xl(r,i){if(yr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Qe.call(i,f)||!yr(r[f],i[f]))return!1}return!0}function Dv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Nv(r,i){var o=Dv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Dv(o)}}function xv(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?xv(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Ov(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=gi(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=gi(r.document)}return i}function Jd(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var g1=Mr&&"documentMode"in document&&11>=document.documentMode,Co=null,Zd=null,Wl=null,em=!1;function Mv(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;em||Co==null||Co!==gi(u)||(u=Co,"selectionStart"in u&&Jd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Wl&&Xl(Wl,u)||(Wl=u,u=zh(Zd,"onSelect"),0<u.length&&(i=new _i("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Co)))}function Ms(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Io={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},tm={},Vv={};Mr&&(Vv=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Vs(r){if(tm[r])return tm[r];if(!Io[r])return r;var i=Io[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Vv)return tm[r]=i[o];return r}var Pv=Vs("animationend"),Lv=Vs("animationiteration"),kv=Vs("animationstart"),y1=Vs("transitionrun"),v1=Vs("transitionstart"),_1=Vs("transitioncancel"),Uv=Vs("transitionend"),jv=new Map,nm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nm.push("scrollEnd");function ti(r,i){jv.set(r,i),tr(i,[r])}var Zc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Pr=[],Do=0,rm=0;function eh(){for(var r=Do,i=rm=Do=0;i<r;){var o=Pr[i];Pr[i++]=null;var u=Pr[i];Pr[i++]=null;var f=Pr[i];Pr[i++]=null;var m=Pr[i];if(Pr[i++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}m!==0&&zv(o,f,m)}}function th(r,i,o,u){Pr[Do++]=r,Pr[Do++]=i,Pr[Do++]=o,Pr[Do++]=u,rm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function im(r,i,o,u){return th(r,i,o,u),nh(r)}function Ps(r,i){return th(r,null,null,i),nh(r)}function zv(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&i!==null&&(f=31-$t(o),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=o|536870912),m):null}function nh(r){if(50<_u)throw _u=0,dp=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var No={};function E1(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(r,i,o,u){return new E1(r,i,o,u)}function am(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Hi(r,i){var o=r.alternate;return o===null?(o=vr(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Bv(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function rh(r,i,o,u,f,m){var _=0;if(u=r,typeof r=="function")am(r)&&(_=1);else if(typeof r=="string")_=wC(r,o,ce.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=vr(31,o,i,f),r.elementType=I,r.lanes=m,r;case B:return Ls(o.children,f,m,i);case V:_=8,f|=24;break;case H:return r=vr(12,o,i,f|2),r.elementType=H,r.lanes=m,r;case re:return r=vr(13,o,i,f),r.elementType=re,r.lanes=m,r;case Y:return r=vr(19,o,i,f),r.elementType=Y,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case F:_=10;break e;case q:_=9;break e;case Q:_=11;break e;case b:_=14;break e;case A:_=16,u=null;break e}_=29,o=Error(a(130,r===null?"null":typeof r,"")),u=null}return i=vr(_,o,i,f),i.elementType=r,i.type=u,i.lanes=m,i}function Ls(r,i,o,u){return r=vr(7,r,u,i),r.lanes=o,r}function sm(r,i,o){return r=vr(6,r,null,i),r.lanes=o,r}function Fv(r){var i=vr(18,null,null,0);return i.stateNode=r,i}function om(r,i,o){return i=vr(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Hv=new WeakMap;function Lr(r,i){if(typeof r=="object"&&r!==null){var o=Hv.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Fe(i)},Hv.set(r,i),i)}return{value:r,source:i,stack:Fe(i)}}var xo=[],Oo=0,ih=null,Jl=0,kr=[],Ur=0,Da=null,Si=1,Ai="";function qi(r,i){xo[Oo++]=Jl,xo[Oo++]=ih,ih=r,Jl=i}function qv(r,i,o){kr[Ur++]=Si,kr[Ur++]=Ai,kr[Ur++]=Da,Da=r;var u=Si;r=Ai;var f=32-$t(u)-1;u&=~(1<<f),o+=1;var m=32-$t(i)+f;if(30<m){var _=f-f%5;m=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Si=1<<32-$t(i)+f|o<<f|u,Ai=m+r}else Si=1<<m|o<<f|u,Ai=r}function lm(r){r.return!==null&&(qi(r,1),qv(r,1,0))}function um(r){for(;r===ih;)ih=xo[--Oo],xo[Oo]=null,Jl=xo[--Oo],xo[Oo]=null;for(;r===Da;)Da=kr[--Ur],kr[Ur]=null,Ai=kr[--Ur],kr[Ur]=null,Si=kr[--Ur],kr[Ur]=null}function Gv(r,i){kr[Ur++]=Si,kr[Ur++]=Ai,kr[Ur++]=Da,Si=i.id,Ai=i.overflow,Da=r}var Dn=null,Ht=null,gt=!1,Na=null,jr=!1,cm=Error(a(519));function xa(r){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zl(Lr(i,r)),cm}function $v(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[ve]=r,i[be]=u,o){case"dialog":ct("cancel",i),ct("close",i);break;case"iframe":case"object":case"embed":ct("load",i);break;case"video":case"audio":for(o=0;o<Tu.length;o++)ct(Tu[o],i);break;case"source":ct("error",i);break;case"img":case"image":case"link":ct("error",i),ct("load",i);break;case"details":ct("toggle",i);break;case"input":ct("invalid",i),kc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ct("invalid",i);break;case"textarea":ct("invalid",i),ba(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||uT(i.textContent,o)?(u.popover!=null&&(ct("beforetoggle",i),ct("toggle",i)),u.onScroll!=null&&ct("scroll",i),u.onScrollEnd!=null&&ct("scrollend",i),u.onClick!=null&&(i.onclick=Xr),i=!0):i=!1,i||xa(r,!0)}function Kv(r){for(Dn=r.return;Dn;)switch(Dn.tag){case 5:case 31:case 13:jr=!1;return;case 27:case 3:jr=!0;return;default:Dn=Dn.return}}function Mo(r){if(r!==Dn)return!1;if(!gt)return Kv(r),gt=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Ip(r.type,r.memoizedProps)),o=!o),o&&Ht&&xa(r),Kv(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Ht=vT(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Ht=vT(r)}else i===27?(i=Ht,Ga(r.type)?(r=Mp,Mp=null,Ht=r):Ht=i):Ht=Dn?Br(r.stateNode.nextSibling):null;return!0}function ks(){Ht=Dn=null,gt=!1}function hm(){var r=Na;return r!==null&&(or===null?or=r:or.push.apply(or,r),Na=null),r}function Zl(r){Na===null?Na=[r]:Na.push(r)}var fm=j(null),Us=null,Gi=null;function Oa(r,i,o){oe(fm,i._currentValue),i._currentValue=o}function $i(r){r._currentValue=fm.current,K(fm)}function dm(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function mm(r,i,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var R=m;m=f;for(var k=0;k<i.length;k++)if(R.context===i[k]){m.lanes|=o,R=m.alternate,R!==null&&(R.lanes|=o),dm(m.return,o,r),u||(_=null);break e}m=R.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(a(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),dm(_,o,r),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===r){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Vo(r,i,o,u){r=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var R=f.type;yr(f.pendingProps.value,_.value)||(r!==null?r.push(R):r=[R])}}else if(f===Pe.current){if(_=f.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Ru):r=[Ru])}f=f.return}r!==null&&mm(i,r,o,u),i.flags|=262144}function ah(r){for(r=r.firstContext;r!==null;){if(!yr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function js(r){Us=r,Gi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Nn(r){return Yv(Us,r)}function sh(r,i){return Us===null&&js(r),Yv(r,i)}function Yv(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Gi===null){if(r===null)throw Error(a(308));Gi=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Gi=Gi.next=i;return o}var T1=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},b1=n.unstable_scheduleCallback,S1=n.unstable_NormalPriority,hn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pm(){return{controller:new T1,data:new Map,refCount:0}}function eu(r){r.refCount--,r.refCount===0&&b1(S1,function(){r.controller.abort()})}var tu=null,gm=0,Po=0,Lo=null;function A1(r,i){if(tu===null){var o=tu=[];gm=0,Po=_p(),Lo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return gm++,i.then(Qv,Qv),i}function Qv(){if(--gm===0&&tu!==null){Lo!==null&&(Lo.status="fulfilled");var r=tu;tu=null,Po=0,Lo=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function w1(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Xv=W.S;W.S=function(r,i){ME=Rt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&A1(r,i),Xv!==null&&Xv(r,i)};var zs=j(null);function ym(){var r=zs.current;return r!==null?r:kt.pooledCache}function oh(r,i){i===null?oe(zs,zs.current):oe(zs,i.pool)}function Wv(){var r=ym();return r===null?null:{parent:hn._currentValue,pool:r}}var ko=Error(a(460)),vm=Error(a(474)),lh=Error(a(542)),uh={then:function(){}};function Jv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Zv(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(Xr,Xr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,t_(r),r;default:if(typeof i.status=="string")i.then(Xr,Xr);else{if(r=kt,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,t_(r),r}throw Fs=i,ko}}function Bs(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Fs=o,ko):o}}var Fs=null;function e_(){if(Fs===null)throw Error(a(459));var r=Fs;return Fs=null,r}function t_(r){if(r===ko||r===lh)throw Error(a(483))}var Uo=null,nu=0;function ch(r){var i=nu;return nu+=1,Uo===null&&(Uo=[]),Zv(Uo,r,i)}function ru(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function hh(r,i){throw i.$$typeof===S?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function n_(r){function i($,z){if(r){var J=$.deletions;J===null?($.deletions=[z],$.flags|=16):J.push(z)}}function o($,z){if(!r)return null;for(;z!==null;)i($,z),z=z.sibling;return null}function u($){for(var z=new Map;$!==null;)$.key!==null?z.set($.key,$):z.set($.index,$),$=$.sibling;return z}function f($,z){return $=Hi($,z),$.index=0,$.sibling=null,$}function m($,z,J){return $.index=J,r?(J=$.alternate,J!==null?(J=J.index,J<z?($.flags|=67108866,z):J):($.flags|=67108866,z)):($.flags|=1048576,z)}function _($){return r&&$.alternate===null&&($.flags|=67108866),$}function R($,z,J,le){return z===null||z.tag!==6?(z=sm(J,$.mode,le),z.return=$,z):(z=f(z,J),z.return=$,z)}function k($,z,J,le){var Le=J.type;return Le===B?se($,z,J.props.children,le,J.key):z!==null&&(z.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===A&&Bs(Le)===z.type)?(z=f(z,J.props),ru(z,J),z.return=$,z):(z=rh(J.type,J.key,J.props,null,$.mode,le),ru(z,J),z.return=$,z)}function Z($,z,J,le){return z===null||z.tag!==4||z.stateNode.containerInfo!==J.containerInfo||z.stateNode.implementation!==J.implementation?(z=om(J,$.mode,le),z.return=$,z):(z=f(z,J.children||[]),z.return=$,z)}function se($,z,J,le,Le){return z===null||z.tag!==7?(z=Ls(J,$.mode,le,Le),z.return=$,z):(z=f(z,J),z.return=$,z)}function he($,z,J){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=sm(""+z,$.mode,J),z.return=$,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case C:return J=rh(z.type,z.key,z.props,null,$.mode,J),ru(J,z),J.return=$,J;case U:return z=om(z,$.mode,J),z.return=$,z;case A:return z=Bs(z),he($,z,J)}if(Ze(z)||P(z))return z=Ls(z,$.mode,J,null),z.return=$,z;if(typeof z.then=="function")return he($,ch(z),J);if(z.$$typeof===F)return he($,sh($,z),J);hh($,z)}return null}function te($,z,J,le){var Le=z!==null?z.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Le!==null?null:R($,z,""+J,le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case C:return J.key===Le?k($,z,J,le):null;case U:return J.key===Le?Z($,z,J,le):null;case A:return J=Bs(J),te($,z,J,le)}if(Ze(J)||P(J))return Le!==null?null:se($,z,J,le,null);if(typeof J.then=="function")return te($,z,ch(J),le);if(J.$$typeof===F)return te($,z,sh($,J),le);hh($,J)}return null}function ie($,z,J,le,Le){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return $=$.get(J)||null,R(z,$,""+le,Le);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case C:return $=$.get(le.key===null?J:le.key)||null,k(z,$,le,Le);case U:return $=$.get(le.key===null?J:le.key)||null,Z(z,$,le,Le);case A:return le=Bs(le),ie($,z,J,le,Le)}if(Ze(le)||P(le))return $=$.get(J)||null,se(z,$,le,Le,null);if(typeof le.then=="function")return ie($,z,J,ch(le),Le);if(le.$$typeof===F)return ie($,z,J,sh(z,le),Le);hh(z,le)}return null}function De($,z,J,le){for(var Le=null,Et=null,Ne=z,it=z=0,ft=null;Ne!==null&&it<J.length;it++){Ne.index>it?(ft=Ne,Ne=null):ft=Ne.sibling;var Tt=te($,Ne,J[it],le);if(Tt===null){Ne===null&&(Ne=ft);break}r&&Ne&&Tt.alternate===null&&i($,Ne),z=m(Tt,z,it),Et===null?Le=Tt:Et.sibling=Tt,Et=Tt,Ne=ft}if(it===J.length)return o($,Ne),gt&&qi($,it),Le;if(Ne===null){for(;it<J.length;it++)Ne=he($,J[it],le),Ne!==null&&(z=m(Ne,z,it),Et===null?Le=Ne:Et.sibling=Ne,Et=Ne);return gt&&qi($,it),Le}for(Ne=u(Ne);it<J.length;it++)ft=ie(Ne,$,it,J[it],le),ft!==null&&(r&&ft.alternate!==null&&Ne.delete(ft.key===null?it:ft.key),z=m(ft,z,it),Et===null?Le=ft:Et.sibling=ft,Et=ft);return r&&Ne.forEach(function(Xa){return i($,Xa)}),gt&&qi($,it),Le}function Be($,z,J,le){if(J==null)throw Error(a(151));for(var Le=null,Et=null,Ne=z,it=z=0,ft=null,Tt=J.next();Ne!==null&&!Tt.done;it++,Tt=J.next()){Ne.index>it?(ft=Ne,Ne=null):ft=Ne.sibling;var Xa=te($,Ne,Tt.value,le);if(Xa===null){Ne===null&&(Ne=ft);break}r&&Ne&&Xa.alternate===null&&i($,Ne),z=m(Xa,z,it),Et===null?Le=Xa:Et.sibling=Xa,Et=Xa,Ne=ft}if(Tt.done)return o($,Ne),gt&&qi($,it),Le;if(Ne===null){for(;!Tt.done;it++,Tt=J.next())Tt=he($,Tt.value,le),Tt!==null&&(z=m(Tt,z,it),Et===null?Le=Tt:Et.sibling=Tt,Et=Tt);return gt&&qi($,it),Le}for(Ne=u(Ne);!Tt.done;it++,Tt=J.next())Tt=ie(Ne,$,it,Tt.value,le),Tt!==null&&(r&&Tt.alternate!==null&&Ne.delete(Tt.key===null?it:Tt.key),z=m(Tt,z,it),Et===null?Le=Tt:Et.sibling=Tt,Et=Tt);return r&&Ne.forEach(function(LC){return i($,LC)}),gt&&qi($,it),Le}function Pt($,z,J,le){if(typeof J=="object"&&J!==null&&J.type===B&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case C:e:{for(var Le=J.key;z!==null;){if(z.key===Le){if(Le=J.type,Le===B){if(z.tag===7){o($,z.sibling),le=f(z,J.props.children),le.return=$,$=le;break e}}else if(z.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===A&&Bs(Le)===z.type){o($,z.sibling),le=f(z,J.props),ru(le,J),le.return=$,$=le;break e}o($,z);break}else i($,z);z=z.sibling}J.type===B?(le=Ls(J.props.children,$.mode,le,J.key),le.return=$,$=le):(le=rh(J.type,J.key,J.props,null,$.mode,le),ru(le,J),le.return=$,$=le)}return _($);case U:e:{for(Le=J.key;z!==null;){if(z.key===Le)if(z.tag===4&&z.stateNode.containerInfo===J.containerInfo&&z.stateNode.implementation===J.implementation){o($,z.sibling),le=f(z,J.children||[]),le.return=$,$=le;break e}else{o($,z);break}else i($,z);z=z.sibling}le=om(J,$.mode,le),le.return=$,$=le}return _($);case A:return J=Bs(J),Pt($,z,J,le)}if(Ze(J))return De($,z,J,le);if(P(J)){if(Le=P(J),typeof Le!="function")throw Error(a(150));return J=Le.call(J),Be($,z,J,le)}if(typeof J.then=="function")return Pt($,z,ch(J),le);if(J.$$typeof===F)return Pt($,z,sh($,J),le);hh($,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,z!==null&&z.tag===6?(o($,z.sibling),le=f(z,J),le.return=$,$=le):(o($,z),le=sm(J,$.mode,le),le.return=$,$=le),_($)):o($,z)}return function($,z,J,le){try{nu=0;var Le=Pt($,z,J,le);return Uo=null,Le}catch(Ne){if(Ne===ko||Ne===lh)throw Ne;var Et=vr(29,Ne,null,$.mode);return Et.lanes=le,Et.return=$,Et}finally{}}}var Hs=n_(!0),r_=n_(!1),Ma=!1;function _m(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Em(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Va(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Pa(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(At&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=nh(r),zv(r,null,o),i}return th(r,u,i,o),nh(r)}function iu(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,L(r,o)}}function Tm(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var bm=!1;function au(){if(bm){var r=Lo;if(r!==null)throw r}}function su(r,i,o,u){bm=!1;var f=r.updateQueue;Ma=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var k=R,Z=k.next;k.next=null,_===null?m=Z:_.next=Z,_=k;var se=r.alternate;se!==null&&(se=se.updateQueue,R=se.lastBaseUpdate,R!==_&&(R===null?se.firstBaseUpdate=Z:R.next=Z,se.lastBaseUpdate=k))}if(m!==null){var he=f.baseState;_=0,se=Z=k=null,R=m;do{var te=R.lane&-536870913,ie=te!==R.lane;if(ie?(ht&te)===te:(u&te)===te){te!==0&&te===Po&&(bm=!0),se!==null&&(se=se.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var De=r,Be=R;te=i;var Pt=o;switch(Be.tag){case 1:if(De=Be.payload,typeof De=="function"){he=De.call(Pt,he,te);break e}he=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Be.payload,te=typeof De=="function"?De.call(Pt,he,te):De,te==null)break e;he=E({},he,te);break e;case 2:Ma=!0}}te=R.callback,te!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:R.tag,payload:R.payload,callback:R.callback,next:null},se===null?(Z=se=ie,k=he):se=se.next=ie,_|=te;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;ie=R,R=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);se===null&&(k=he),f.baseState=k,f.firstBaseUpdate=Z,f.lastBaseUpdate=se,m===null&&(f.shared.lanes=0),za|=_,r.lanes=_,r.memoizedState=he}}function i_(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function a_(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)i_(o[r],i)}var jo=j(null),fh=j(0);function s_(r,i){r=ta,oe(fh,r),oe(jo,i),ta=r|i.baseLanes}function Sm(){oe(fh,ta),oe(jo,jo.current)}function Am(){ta=fh.current,K(jo),K(fh)}var _r=j(null),zr=null;function La(r){var i=r.alternate;oe(sn,sn.current&1),oe(_r,r),zr===null&&(i===null||jo.current!==null||i.memoizedState!==null)&&(zr=r)}function wm(r){oe(sn,sn.current),oe(_r,r),zr===null&&(zr=r)}function o_(r){r.tag===22?(oe(sn,sn.current),oe(_r,r),zr===null&&(zr=r)):ka()}function ka(){oe(sn,sn.current),oe(_r,_r.current)}function Er(r){K(_r),zr===r&&(zr=null),K(sn)}var sn=j(0);function dh(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||xp(o)||Op(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ki=0,tt=null,Mt=null,fn=null,mh=!1,zo=!1,qs=!1,ph=0,ou=0,Bo=null,R1=0;function en(){throw Error(a(321))}function Rm(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!yr(r[o],i[o]))return!1;return!0}function Cm(r,i,o,u,f,m){return Ki=m,tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,W.H=r===null||r.memoizedState===null?q_:Fm,qs=!1,m=o(u,f),qs=!1,zo&&(m=u_(i,o,u,f)),l_(r),m}function l_(r){W.H=cu;var i=Mt!==null&&Mt.next!==null;if(Ki=0,fn=Mt=tt=null,mh=!1,ou=0,Bo=null,i)throw Error(a(300));r===null||dn||(r=r.dependencies,r!==null&&ah(r)&&(dn=!0))}function u_(r,i,o,u){tt=r;var f=0;do{if(zo&&(Bo=null),ou=0,zo=!1,25<=f)throw Error(a(301));if(f+=1,fn=Mt=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}W.H=G_,m=i(o,u)}while(zo);return m}function C1(){var r=W.H,i=r.useState()[0];return i=typeof i.then=="function"?lu(i):i,r=r.useState()[0],(Mt!==null?Mt.memoizedState:null)!==r&&(tt.flags|=1024),i}function Im(){var r=ph!==0;return ph=0,r}function Dm(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Nm(r){if(mh){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mh=!1}Ki=0,fn=Mt=tt=null,zo=!1,ou=ph=0,Bo=null}function Xn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?tt.memoizedState=fn=r:fn=fn.next=r,fn}function on(){if(Mt===null){var r=tt.alternate;r=r!==null?r.memoizedState:null}else r=Mt.next;var i=fn===null?tt.memoizedState:fn.next;if(i!==null)fn=i,Mt=r;else{if(r===null)throw tt.alternate===null?Error(a(467)):Error(a(310));Mt=r,r={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},fn===null?tt.memoizedState=fn=r:fn=fn.next=r}return fn}function gh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(r){var i=ou;return ou+=1,Bo===null&&(Bo=[]),r=Zv(Bo,r,i),i=tt,(fn===null?i.memoizedState:fn.next)===null&&(i=i.alternate,W.H=i===null||i.memoizedState===null?q_:Fm),r}function yh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return lu(r);if(r.$$typeof===F)return Nn(r)}throw Error(a(438,String(r)))}function xm(r){var i=null,o=tt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=tt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=gh(),tt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=N;return i.index++,o}function Yi(r,i){return typeof i=="function"?i(r):i}function vh(r){var i=on();return Om(i,Mt,r)}function Om(r,i,o){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}i.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{i=f.next;var R=_=null,k=null,Z=i,se=!1;do{var he=Z.lane&-536870913;if(he!==Z.lane?(ht&he)===he:(Ki&he)===he){var te=Z.revertLane;if(te===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),he===Po&&(se=!0);else if((Ki&te)===te){Z=Z.next,te===Po&&(se=!0);continue}else he={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},k===null?(R=k=he,_=m):k=k.next=he,tt.lanes|=te,za|=te;he=Z.action,qs&&o(m,he),m=Z.hasEagerState?Z.eagerState:o(m,he)}else te={lane:he,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},k===null?(R=k=te,_=m):k=k.next=te,tt.lanes|=he,za|=he;Z=Z.next}while(Z!==null&&Z!==i);if(k===null?_=m:k.next=R,!yr(m,r.memoizedState)&&(dn=!0,se&&(o=Lo,o!==null)))throw o;r.memoizedState=m,r.baseState=_,r.baseQueue=k,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Mm(r){var i=on(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=r(m,_.action),_=_.next;while(_!==f);yr(m,i.memoizedState)||(dn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function c_(r,i,o){var u=tt,f=on(),m=gt;if(m){if(o===void 0)throw Error(a(407));o=o()}else o=i();var _=!yr((Mt||f).memoizedState,o);if(_&&(f.memoizedState=o,dn=!0),f=f.queue,Lm(d_.bind(null,u,f,r),[r]),f.getSnapshot!==i||_||fn!==null&&fn.memoizedState.tag&1){if(u.flags|=2048,Fo(9,{destroy:void 0},f_.bind(null,u,f,o,i),null),kt===null)throw Error(a(349));m||(Ki&127)!==0||h_(u,i,o)}return o}function h_(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=tt.updateQueue,i===null?(i=gh(),tt.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function f_(r,i,o,u){i.value=o,i.getSnapshot=u,m_(i)&&p_(r)}function d_(r,i,o){return o(function(){m_(i)&&p_(r)})}function m_(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!yr(r,o)}catch{return!0}}function p_(r){var i=Ps(r,2);i!==null&&lr(i,r,2)}function Vm(r){var i=Xn();if(typeof r=="function"){var o=r;if(r=o(),qs){$n(!0);try{o()}finally{$n(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:r},i}function g_(r,i,o,u){return r.baseState=o,Om(r,Mt,typeof u=="function"?u:Yi)}function I1(r,i,o,u,f){if(Th(r))throw Error(a(485));if(r=i.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};W.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,y_(i,m)):(m.next=o.next,i.pending=o.next=m)}}function y_(r,i){var o=i.action,u=i.payload,f=r.state;if(i.isTransition){var m=W.T,_={};W.T=_;try{var R=o(f,u),k=W.S;k!==null&&k(_,R),v_(r,i,R)}catch(Z){Pm(r,i,Z)}finally{m!==null&&_.types!==null&&(m.types=_.types),W.T=m}}else try{m=o(f,u),v_(r,i,m)}catch(Z){Pm(r,i,Z)}}function v_(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){__(r,i,u)},function(u){return Pm(r,i,u)}):__(r,i,o)}function __(r,i,o){i.status="fulfilled",i.value=o,E_(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,y_(r,o)))}function Pm(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,E_(i),i=i.next;while(i!==u)}r.action=null}function E_(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function T_(r,i){return i}function b_(r,i){if(gt){var o=kt.formState;if(o!==null){e:{var u=tt;if(gt){if(Ht){t:{for(var f=Ht,m=jr;f.nodeType!==8;){if(!m){f=null;break t}if(f=Br(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ht=Br(f.nextSibling),u=f.data==="F!";break e}}xa(u)}u=!1}u&&(i=o[0])}}return o=Xn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:T_,lastRenderedState:i},o.queue=u,o=B_.bind(null,tt,u),u.dispatch=o,u=Vm(!1),m=Bm.bind(null,tt,!1,u.queue),u=Xn(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,o=I1.bind(null,tt,f,m,o),f.dispatch=o,u.memoizedState=r,[i,o,!1]}function S_(r){var i=on();return A_(i,Mt,r)}function A_(r,i,o){if(i=Om(r,i,T_)[0],r=vh(Yi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=lu(i)}catch(_){throw _===ko?lh:_}else u=i;i=on();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(tt.flags|=2048,Fo(9,{destroy:void 0},D1.bind(null,f,o),null)),[u,m,r]}function D1(r,i){r.action=i}function w_(r){var i=on(),o=Mt;if(o!==null)return A_(i,o,r);on(),i=i.memoizedState,o=on();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function Fo(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=tt.updateQueue,i===null&&(i=gh(),tt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function R_(){return on().memoizedState}function _h(r,i,o,u){var f=Xn();tt.flags|=r,f.memoizedState=Fo(1|i,{destroy:void 0},o,u===void 0?null:u)}function Eh(r,i,o,u){var f=on();u=u===void 0?null:u;var m=f.memoizedState.inst;Mt!==null&&u!==null&&Rm(u,Mt.memoizedState.deps)?f.memoizedState=Fo(i,m,o,u):(tt.flags|=r,f.memoizedState=Fo(1|i,m,o,u))}function C_(r,i){_h(8390656,8,r,i)}function Lm(r,i){Eh(2048,8,r,i)}function N1(r){tt.flags|=4;var i=tt.updateQueue;if(i===null)i=gh(),tt.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function I_(r){var i=on().memoizedState;return N1({ref:i,nextImpl:r}),function(){if((At&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function D_(r,i){return Eh(4,2,r,i)}function N_(r,i){return Eh(4,4,r,i)}function x_(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function O_(r,i,o){o=o!=null?o.concat([r]):null,Eh(4,4,x_.bind(null,i,r),o)}function km(){}function M_(r,i){var o=on();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Rm(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function V_(r,i){var o=on();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Rm(i,u[1]))return u[0];if(u=r(),qs){$n(!0);try{r()}finally{$n(!1)}}return o.memoizedState=[u,i],u}function Um(r,i,o){return o===void 0||(Ki&1073741824)!==0&&(ht&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=PE(),tt.lanes|=r,za|=r,o)}function P_(r,i,o,u){return yr(o,i)?o:jo.current!==null?(r=Um(r,o,u),yr(r,i)||(dn=!0),r):(Ki&42)===0||(Ki&1073741824)!==0&&(ht&261930)===0?(dn=!0,r.memoizedState=o):(r=PE(),tt.lanes|=r,za|=r,i)}function L_(r,i,o,u,f){var m=me.p;me.p=m!==0&&8>m?m:8;var _=W.T,R={};W.T=R,Bm(r,!1,i,o);try{var k=f(),Z=W.S;if(Z!==null&&Z(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var se=w1(k,u);uu(r,i,se,Sr(r))}else uu(r,i,u,Sr(r))}catch(he){uu(r,i,{then:function(){},status:"rejected",reason:he},Sr())}finally{me.p=m,_!==null&&R.types!==null&&(_.types=R.types),W.T=_}}function x1(){}function jm(r,i,o,u){if(r.tag!==5)throw Error(a(476));var f=k_(r).queue;L_(r,f,i,ge,o===null?x1:function(){return U_(r),o(u)})}function k_(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:ge},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function U_(r){var i=k_(r);i.next===null&&(i=r.alternate.memoizedState),uu(r,i.next.queue,{},Sr())}function zm(){return Nn(Ru)}function j_(){return on().memoizedState}function z_(){return on().memoizedState}function O1(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Sr();r=Va(o);var u=Pa(i,r,o);u!==null&&(lr(u,i,o),iu(u,i,o)),i={cache:pm()},r.payload=i;return}i=i.return}}function M1(r,i,o){var u=Sr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Th(r)?F_(i,o):(o=im(r,i,o,u),o!==null&&(lr(o,r,u),H_(o,i,u)))}function B_(r,i,o){var u=Sr();uu(r,i,o,u)}function uu(r,i,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Th(r))F_(i,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,R=m(_,o);if(f.hasEagerState=!0,f.eagerState=R,yr(R,_))return th(r,i,f,0),kt===null&&eh(),!1}catch{}finally{}if(o=im(r,i,f,u),o!==null)return lr(o,r,u),H_(o,i,u),!0}return!1}function Bm(r,i,o,u){if(u={lane:2,revertLane:_p(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Th(r)){if(i)throw Error(a(479))}else i=im(r,o,u,2),i!==null&&lr(i,r,2)}function Th(r){var i=r.alternate;return r===tt||i!==null&&i===tt}function F_(r,i){zo=mh=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function H_(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,L(r,o)}}var cu={readContext:Nn,use:yh,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en};cu.useEffectEvent=en;var q_={readContext:Nn,use:yh,useCallback:function(r,i){return Xn().memoizedState=[r,i===void 0?null:i],r},useContext:Nn,useEffect:C_,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,_h(4194308,4,x_.bind(null,i,r),o)},useLayoutEffect:function(r,i){return _h(4194308,4,r,i)},useInsertionEffect:function(r,i){_h(4,2,r,i)},useMemo:function(r,i){var o=Xn();i=i===void 0?null:i;var u=r();if(qs){$n(!0);try{r()}finally{$n(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=Xn();if(o!==void 0){var f=o(i);if(qs){$n(!0);try{o(i)}finally{$n(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=M1.bind(null,tt,r),[u.memoizedState,r]},useRef:function(r){var i=Xn();return r={current:r},i.memoizedState=r},useState:function(r){r=Vm(r);var i=r.queue,o=B_.bind(null,tt,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:km,useDeferredValue:function(r,i){var o=Xn();return Um(o,r,i)},useTransition:function(){var r=Vm(!1);return r=L_.bind(null,tt,r.queue,!0,!1),Xn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=tt,f=Xn();if(gt){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),kt===null)throw Error(a(349));(ht&127)!==0||h_(u,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,C_(d_.bind(null,u,m,r),[r]),u.flags|=2048,Fo(9,{destroy:void 0},f_.bind(null,u,m,o,i),null),o},useId:function(){var r=Xn(),i=kt.identifierPrefix;if(gt){var o=Ai,u=Si;o=(u&~(1<<32-$t(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=ph++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=R1++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:zm,useFormState:b_,useActionState:b_,useOptimistic:function(r){var i=Xn();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Bm.bind(null,tt,!0,o),o.dispatch=i,[r,i]},useMemoCache:xm,useCacheRefresh:function(){return Xn().memoizedState=O1.bind(null,tt)},useEffectEvent:function(r){var i=Xn(),o={impl:r};return i.memoizedState=o,function(){if((At&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},Fm={readContext:Nn,use:yh,useCallback:M_,useContext:Nn,useEffect:Lm,useImperativeHandle:O_,useInsertionEffect:D_,useLayoutEffect:N_,useMemo:V_,useReducer:vh,useRef:R_,useState:function(){return vh(Yi)},useDebugValue:km,useDeferredValue:function(r,i){var o=on();return P_(o,Mt.memoizedState,r,i)},useTransition:function(){var r=vh(Yi)[0],i=on().memoizedState;return[typeof r=="boolean"?r:lu(r),i]},useSyncExternalStore:c_,useId:j_,useHostTransitionStatus:zm,useFormState:S_,useActionState:S_,useOptimistic:function(r,i){var o=on();return g_(o,Mt,r,i)},useMemoCache:xm,useCacheRefresh:z_};Fm.useEffectEvent=I_;var G_={readContext:Nn,use:yh,useCallback:M_,useContext:Nn,useEffect:Lm,useImperativeHandle:O_,useInsertionEffect:D_,useLayoutEffect:N_,useMemo:V_,useReducer:Mm,useRef:R_,useState:function(){return Mm(Yi)},useDebugValue:km,useDeferredValue:function(r,i){var o=on();return Mt===null?Um(o,r,i):P_(o,Mt.memoizedState,r,i)},useTransition:function(){var r=Mm(Yi)[0],i=on().memoizedState;return[typeof r=="boolean"?r:lu(r),i]},useSyncExternalStore:c_,useId:j_,useHostTransitionStatus:zm,useFormState:w_,useActionState:w_,useOptimistic:function(r,i){var o=on();return Mt!==null?g_(o,Mt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:xm,useCacheRefresh:z_};G_.useEffectEvent=I_;function Hm(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var qm={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Sr(),f=Va(u);f.payload=i,o!=null&&(f.callback=o),i=Pa(r,f,u),i!==null&&(lr(i,r,u),iu(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Sr(),f=Va(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Pa(r,f,u),i!==null&&(lr(i,r,u),iu(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Sr(),u=Va(o);u.tag=2,i!=null&&(u.callback=i),i=Pa(r,u,o),i!==null&&(lr(i,r,o),iu(i,r,o))}};function $_(r,i,o,u,f,m,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,_):i.prototype&&i.prototype.isPureReactComponent?!Xl(o,u)||!Xl(f,m):!0}function K_(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&qm.enqueueReplaceState(i,i.state,null)}function Gs(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=E({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}function Y_(r){Zc(r)}function Q_(r){console.error(r)}function X_(r){Zc(r)}function bh(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function W_(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Gm(r,i,o){return o=Va(o),o.tag=3,o.payload={element:null},o.callback=function(){bh(r,i)},o}function J_(r){return r=Va(r),r.tag=3,r}function Z_(r,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){W_(i,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){W_(i,o,u),typeof f!="function"&&(Ba===null?Ba=new Set([this]):Ba.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function V1(r,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Vo(i,o,f,!0),o=_r.current,o!==null){switch(o.tag){case 31:case 13:return zr===null?Vh():o.alternate===null&&tn===0&&(tn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===uh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),gp(r,u,f)),!1;case 22:return o.flags|=65536,u===uh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),gp(r,u,f)),!1}throw Error(a(435,o.tag))}return gp(r,u,f),Vh(),!1}if(gt)return i=_r.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==cm&&(r=Error(a(422),{cause:u}),Zl(Lr(r,o)))):(u!==cm&&(i=Error(a(423),{cause:u}),Zl(Lr(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Lr(u,o),f=Gm(r.stateNode,u,f),Tm(r,f),tn!==4&&(tn=2)),!1;var m=Error(a(520),{cause:u});if(m=Lr(m,o),vu===null?vu=[m]:vu.push(m),tn!==4&&(tn=2),i===null)return!0;u=Lr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=Gm(o.stateNode,u,r),Tm(o,r),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ba===null||!Ba.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=J_(f),Z_(f,r,o,u),Tm(o,f),!1}o=o.return}while(o!==null);return!1}var $m=Error(a(461)),dn=!1;function xn(r,i,o,u){i.child=r===null?r_(i,null,o,u):Hs(i,r.child,o,u)}function eE(r,i,o,u,f){o=o.render;var m=i.ref;if("ref"in u){var _={};for(var R in u)R!=="ref"&&(_[R]=u[R])}else _=u;return js(i),u=Cm(r,i,o,_,m,f),R=Im(),r!==null&&!dn?(Dm(r,i,f),Qi(r,i,f)):(gt&&R&&lm(i),i.flags|=1,xn(r,i,u,f),i.child)}function tE(r,i,o,u,f){if(r===null){var m=o.type;return typeof m=="function"&&!am(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,nE(r,i,m,u,f)):(r=rh(o.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!ep(r,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:Xl,o(_,u)&&r.ref===i.ref)return Qi(r,i,f)}return i.flags|=1,r=Hi(m,u),r.ref=i.ref,r.return=i,i.child=r}function nE(r,i,o,u,f){if(r!==null){var m=r.memoizedProps;if(Xl(m,u)&&r.ref===i.ref)if(dn=!1,i.pendingProps=u=m,ep(r,f))(r.flags&131072)!==0&&(dn=!0);else return i.lanes=r.lanes,Qi(r,i,f)}return Km(r,i,o,u,f)}function rE(r,i,o,u){var f=u.children,m=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,r!==null){for(u=i.child=r.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,i.child=null;return iE(r,i,m,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&oh(i,m!==null?m.cachePool:null),m!==null?s_(i,m):Sm(),o_(i);else return u=i.lanes=536870912,iE(r,i,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(oh(i,m.cachePool),s_(i,m),ka(),i.memoizedState=null):(r!==null&&oh(i,null),Sm(),ka());return xn(r,i,f,o),i.child}function hu(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function iE(r,i,o,u,f){var m=ym();return m=m===null?null:{parent:hn._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},r!==null&&oh(i,null),Sm(),o_(i),r!==null&&Vo(r,i,u,!0),i.childLanes=f,null}function Sh(r,i){return i=wh({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function aE(r,i,o){return Hs(i,r.child,null,o),r=Sh(i,i.pendingProps),r.flags|=2,Er(i),i.memoizedState=null,r}function P1(r,i,o){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(gt){if(u.mode==="hidden")return r=Sh(i,u),i.lanes=536870912,hu(null,r);if(wm(i),(r=Ht)?(r=yT(r,jr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Da!==null?{id:Si,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},o=Fv(r),o.return=i,i.child=o,Dn=i,Ht=null)):r=null,r===null)throw xa(i);return i.lanes=536870912,null}return Sh(i,u)}var m=r.memoizedState;if(m!==null){var _=m.dehydrated;if(wm(i),f)if(i.flags&256)i.flags&=-257,i=aE(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(a(558));else if(dn||Vo(r,i,o,!1),f=(o&r.childLanes)!==0,dn||f){if(u=kt,u!==null&&(_=G(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,Ps(r,_),lr(u,r,_),$m;Vh(),i=aE(r,i,o)}else r=m.treeContext,Ht=Br(_.nextSibling),Dn=i,gt=!0,Na=null,jr=!1,r!==null&&Gv(i,r),i=Sh(i,u),i.flags|=4096;return i}return r=Hi(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Ah(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function Km(r,i,o,u,f){return js(i),o=Cm(r,i,o,u,void 0,f),u=Im(),r!==null&&!dn?(Dm(r,i,f),Qi(r,i,f)):(gt&&u&&lm(i),i.flags|=1,xn(r,i,o,f),i.child)}function sE(r,i,o,u,f,m){return js(i),i.updateQueue=null,o=u_(i,u,o,f),l_(r),u=Im(),r!==null&&!dn?(Dm(r,i,m),Qi(r,i,m)):(gt&&u&&lm(i),i.flags|=1,xn(r,i,o,m),i.child)}function oE(r,i,o,u,f){if(js(i),i.stateNode===null){var m=No,_=o.contextType;typeof _=="object"&&_!==null&&(m=Nn(_)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=qm,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},_m(i),_=o.contextType,m.context=typeof _=="object"&&_!==null?Nn(_):No,m.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Hm(i,o,_,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&qm.enqueueReplaceState(m,m.state,null),su(i,u,m,f),au(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var R=i.memoizedProps,k=Gs(o,R);m.props=k;var Z=m.context,se=o.contextType;_=No,typeof se=="object"&&se!==null&&(_=Nn(se));var he=o.getDerivedStateFromProps;se=typeof he=="function"||typeof m.getSnapshotBeforeUpdate=="function",R=i.pendingProps!==R,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(R||Z!==_)&&K_(i,m,u,_),Ma=!1;var te=i.memoizedState;m.state=te,su(i,u,m,f),au(),Z=i.memoizedState,R||te!==Z||Ma?(typeof he=="function"&&(Hm(i,o,he,u),Z=i.memoizedState),(k=Ma||$_(i,o,k,u,te,Z,_))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Z),m.props=u,m.state=Z,m.context=_,u=k):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,Em(r,i),_=i.memoizedProps,se=Gs(o,_),m.props=se,he=i.pendingProps,te=m.context,Z=o.contextType,k=No,typeof Z=="object"&&Z!==null&&(k=Nn(Z)),R=o.getDerivedStateFromProps,(Z=typeof R=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==he||te!==k)&&K_(i,m,u,k),Ma=!1,te=i.memoizedState,m.state=te,su(i,u,m,f),au();var ie=i.memoizedState;_!==he||te!==ie||Ma||r!==null&&r.dependencies!==null&&ah(r.dependencies)?(typeof R=="function"&&(Hm(i,o,R,u),ie=i.memoizedState),(se=Ma||$_(i,o,se,u,te,ie,k)||r!==null&&r.dependencies!==null&&ah(r.dependencies))?(Z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ie,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ie,k)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ie),m.props=u,m.state=ie,m.context=k,u=se):(typeof m.componentDidUpdate!="function"||_===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,Ah(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=Hs(i,r.child,null,f),i.child=Hs(i,null,o,f)):xn(r,i,o,f),i.memoizedState=m.state,r=i.child):r=Qi(r,i,f),r}function lE(r,i,o,u){return ks(),i.flags|=256,xn(r,i,o,u),i.child}var Ym={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qm(r){return{baseLanes:r,cachePool:Wv()}}function Xm(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=br),r}function uE(r,i,o){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=r!==null&&r.memoizedState===null?!1:(sn.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,r===null){if(gt){if(f?La(i):ka(),(r=Ht)?(r=yT(r,jr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Da!==null?{id:Si,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},o=Fv(r),o.return=i,i.child=o,Dn=i,Ht=null)):r=null,r===null)throw xa(i);return Op(r)?i.lanes=32:i.lanes=536870912,null}var R=u.children;return u=u.fallback,f?(ka(),f=i.mode,R=wh({mode:"hidden",children:R},f),u=Ls(u,f,o,null),R.return=i,u.return=i,R.sibling=u,i.child=R,u=i.child,u.memoizedState=Qm(o),u.childLanes=Xm(r,_,o),i.memoizedState=Ym,hu(null,u)):(La(i),Wm(i,R))}var k=r.memoizedState;if(k!==null&&(R=k.dehydrated,R!==null)){if(m)i.flags&256?(La(i),i.flags&=-257,i=Jm(r,i,o)):i.memoizedState!==null?(ka(),i.child=r.child,i.flags|=128,i=null):(ka(),R=u.fallback,f=i.mode,u=wh({mode:"visible",children:u.children},f),R=Ls(R,f,o,null),R.flags|=2,u.return=i,R.return=i,u.sibling=R,i.child=u,Hs(i,r.child,null,o),u=i.child,u.memoizedState=Qm(o),u.childLanes=Xm(r,_,o),i.memoizedState=Ym,i=hu(null,u));else if(La(i),Op(R)){if(_=R.nextSibling&&R.nextSibling.dataset,_)var Z=_.dgst;_=Z,u=Error(a(419)),u.stack="",u.digest=_,Zl({value:u,source:null,stack:null}),i=Jm(r,i,o)}else if(dn||Vo(r,i,o,!1),_=(o&r.childLanes)!==0,dn||_){if(_=kt,_!==null&&(u=G(_,o),u!==0&&u!==k.retryLane))throw k.retryLane=u,Ps(r,u),lr(_,r,u),$m;xp(R)||Vh(),i=Jm(r,i,o)}else xp(R)?(i.flags|=192,i.child=r.child,i=null):(r=k.treeContext,Ht=Br(R.nextSibling),Dn=i,gt=!0,Na=null,jr=!1,r!==null&&Gv(i,r),i=Wm(i,u.children),i.flags|=4096);return i}return f?(ka(),R=u.fallback,f=i.mode,k=r.child,Z=k.sibling,u=Hi(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,Z!==null?R=Hi(Z,R):(R=Ls(R,f,o,null),R.flags|=2),R.return=i,u.return=i,u.sibling=R,i.child=u,hu(null,u),u=i.child,R=r.child.memoizedState,R===null?R=Qm(o):(f=R.cachePool,f!==null?(k=hn._currentValue,f=f.parent!==k?{parent:k,pool:k}:f):f=Wv(),R={baseLanes:R.baseLanes|o,cachePool:f}),u.memoizedState=R,u.childLanes=Xm(r,_,o),i.memoizedState=Ym,hu(r.child,u)):(La(i),o=r.child,r=o.sibling,o=Hi(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(_=i.deletions,_===null?(i.deletions=[r],i.flags|=16):_.push(r)),i.child=o,i.memoizedState=null,o)}function Wm(r,i){return i=wh({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function wh(r,i){return r=vr(22,r,null,i),r.lanes=0,r}function Jm(r,i,o){return Hs(i,r.child,null,o),r=Wm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function cE(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),dm(r.return,i,o)}function Zm(r,i,o,u,f,m){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function hE(r,i,o){var u=i.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var _=sn.current,R=(_&2)!==0;if(R?(_=_&1|2,i.flags|=128):_&=1,oe(sn,_),xn(r,i,u,o),u=gt?Jl:0,!R&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&cE(r,o,i);else if(r.tag===19)cE(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&dh(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Zm(i,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&dh(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}Zm(i,!0,o,null,m,u);break;case"together":Zm(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Qi(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),za|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Vo(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=Hi(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Hi(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function ep(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&ah(r)))}function L1(r,i,o){switch(i.tag){case 3:Ke(i,i.stateNode.containerInfo),Oa(i,hn,r.memoizedState.cache),ks();break;case 27:case 5:vn(i);break;case 4:Ke(i,i.stateNode.containerInfo);break;case 10:Oa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,wm(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(La(i),i.flags|=128,null):(o&i.child.childLanes)!==0?uE(r,i,o):(La(i),r=Qi(r,i,o),r!==null?r.sibling:null);La(i);break;case 19:var f=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Vo(r,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return hE(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(sn,sn.current),u)break;return null;case 22:return i.lanes=0,rE(r,i,o,i.pendingProps);case 24:Oa(i,hn,r.memoizedState.cache)}return Qi(r,i,o)}function fE(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)dn=!0;else{if(!ep(r,o)&&(i.flags&128)===0)return dn=!1,L1(r,i,o);dn=(r.flags&131072)!==0}else dn=!1,gt&&(i.flags&1048576)!==0&&qv(i,Jl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=Bs(i.elementType),i.type=r,typeof r=="function")am(r)?(u=Gs(r,u),i.tag=1,i=oE(null,i,r,u,o)):(i.tag=0,i=Km(null,i,r,u,o));else{if(r!=null){var f=r.$$typeof;if(f===Q){i.tag=11,i=eE(null,i,r,u,o);break e}else if(f===b){i.tag=14,i=tE(null,i,r,u,o);break e}}throw i=Ue(r)||r,Error(a(306,i,""))}}return i;case 0:return Km(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=Gs(u,i.pendingProps),oE(r,i,u,f,o);case 3:e:{if(Ke(i,i.stateNode.containerInfo),r===null)throw Error(a(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,Em(r,i),su(i,u,null,o);var _=i.memoizedState;if(u=_.cache,Oa(i,hn,u),u!==m.cache&&mm(i,[hn],o,!0),au(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=lE(r,i,u,o);break e}else if(u!==f){f=Lr(Error(a(424)),i),Zl(f),i=lE(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ht=Br(r.firstChild),Dn=i,gt=!0,Na=null,jr=!0,o=r_(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ks(),u===f){i=Qi(r,i,o);break e}xn(r,i,u,o)}i=i.child}return i;case 26:return Ah(r,i),r===null?(o=ST(i.type,null,i.pendingProps,null))?i.memoizedState=o:gt||(o=i.type,r=i.pendingProps,u=Bh(Ee.current).createElement(o),u[ve]=i,u[be]=r,On(u,o,r),zt(u),i.stateNode=u):i.memoizedState=ST(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return vn(i),r===null&&gt&&(u=i.stateNode=ET(i.type,i.pendingProps,Ee.current),Dn=i,jr=!0,f=Ht,Ga(i.type)?(Mp=f,Ht=Br(u.firstChild)):Ht=f),xn(r,i,i.pendingProps.children,o),Ah(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&gt&&((f=u=Ht)&&(u=fC(u,i.type,i.pendingProps,jr),u!==null?(i.stateNode=u,Dn=i,Ht=Br(u.firstChild),jr=!1,f=!0):f=!1),f||xa(i)),vn(i),f=i.type,m=i.pendingProps,_=r!==null?r.memoizedProps:null,u=m.children,Ip(f,m)?u=null:_!==null&&Ip(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Cm(r,i,C1,null,null,o),Ru._currentValue=f),Ah(r,i),xn(r,i,u,o),i.child;case 6:return r===null&&gt&&((r=o=Ht)&&(o=dC(o,i.pendingProps,jr),o!==null?(i.stateNode=o,Dn=i,Ht=null,r=!0):r=!1),r||xa(i)),null;case 13:return uE(r,i,o);case 4:return Ke(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Hs(i,null,u,o):xn(r,i,u,o),i.child;case 11:return eE(r,i,i.type,i.pendingProps,o);case 7:return xn(r,i,i.pendingProps,o),i.child;case 8:return xn(r,i,i.pendingProps.children,o),i.child;case 12:return xn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Oa(i,i.type,u.value),xn(r,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,js(i),f=Nn(f),u=u(f),i.flags|=1,xn(r,i,u,o),i.child;case 14:return tE(r,i,i.type,i.pendingProps,o);case 15:return nE(r,i,i.type,i.pendingProps,o);case 19:return hE(r,i,o);case 31:return P1(r,i,o);case 22:return rE(r,i,o,i.pendingProps);case 24:return js(i),u=Nn(hn),r===null?(f=ym(),f===null&&(f=kt,m=pm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:u,cache:f},_m(i),Oa(i,hn,f)):((r.lanes&o)!==0&&(Em(r,i),su(i,null,null,o),au()),f=r.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Oa(i,hn,u)):(u=m.cache,Oa(i,hn,u),u!==f.cache&&mm(i,[hn],o,!0))),xn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Xi(r){r.flags|=4}function tp(r,i,o,u,f){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(f&335544128)===f)if(r.stateNode.complete)r.flags|=8192;else if(jE())r.flags|=8192;else throw Fs=uh,vm}else r.flags&=-16777217}function dE(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!IT(i))if(jE())r.flags|=8192;else throw Fs=uh,vm}function Rh(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Ui():536870912,r.lanes|=i,$o|=i)}function fu(r,i){if(!gt)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function qt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function k1(r,i,o){var u=i.pendingProps;switch(um(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return qt(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),$i(hn),lt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Mo(i)?Xi(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,hm())),qt(i),null;case 26:var f=i.type,m=i.memoizedState;return r===null?(Xi(i),m!==null?(qt(i),dE(i,m)):(qt(i),tp(i,f,null,u,o))):m?m!==r.memoizedState?(Xi(i),qt(i),dE(i,m)):(qt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&Xi(i),qt(i),tp(i,f,r,u,o)),null;case 27:if(kn(i),o=Ee.current,f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Xi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return qt(i),null}r=ce.current,Mo(i)?$v(i):(r=ET(f,u,o),i.stateNode=r,Xi(i))}return qt(i),null;case 5:if(kn(i),f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Xi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return qt(i),null}if(m=ce.current,Mo(i))$v(i);else{var _=Bh(Ee.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}m[ve]=i,m[be]=u;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(On(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Xi(i)}}return qt(i),tp(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Xi(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(r=Ee.current,Mo(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,f=Dn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[ve]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||uT(r.nodeValue,o)),r||xa(i,!0)}else r=Bh(r).createTextNode(u),r[ve]=i,i.stateNode=r}return qt(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=Mo(i),o!==null){if(r===null){if(!u)throw Error(a(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(557));r[ve]=i}else ks(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),r=!1}else o=hm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(Er(i),i):(Er(i),null);if((i.flags&128)!==0)throw Error(a(558))}return qt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Mo(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[ve]=i}else ks(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),f=!1}else f=hm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Er(i),i):(Er(i),null)}return Er(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),Rh(i,i.updateQueue),qt(i),null);case 4:return lt(),r===null&&Sp(i.stateNode.containerInfo),qt(i),null;case 10:return $i(i.type),qt(i),null;case 19:if(K(sn),u=i.memoizedState,u===null)return qt(i),null;if(f=(i.flags&128)!==0,m=u.rendering,m===null)if(f)fu(u,!1);else{if(tn!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=dh(r),m!==null){for(i.flags|=128,fu(u,!1),r=m.updateQueue,i.updateQueue=r,Rh(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)Bv(o,r),o=o.sibling;return oe(sn,sn.current&1|2),gt&&qi(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&Rt()>xh&&(i.flags|=128,f=!0,fu(u,!1),i.lanes=4194304)}else{if(!f)if(r=dh(m),r!==null){if(i.flags|=128,f=!0,r=r.updateQueue,i.updateQueue=r,Rh(i,r),fu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!gt)return qt(i),null}else 2*Rt()-u.renderingStartTime>xh&&o!==536870912&&(i.flags|=128,f=!0,fu(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(r=u.last,r!==null?r.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Rt(),r.sibling=null,o=sn.current,oe(sn,f?o&1|2:o&1),gt&&qi(i,u.treeForkCount),r):(qt(i),null);case 22:case 23:return Er(i),Am(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),o=i.updateQueue,o!==null&&Rh(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&K(zs),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),$i(hn),qt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function U1(r,i){switch(um(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return $i(hn),lt(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return kn(i),null;case 31:if(i.memoizedState!==null){if(Er(i),i.alternate===null)throw Error(a(340));ks()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(Er(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));ks()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return K(sn),null;case 4:return lt(),null;case 10:return $i(i.type),null;case 22:case 23:return Er(i),Am(),r!==null&&K(zs),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return $i(hn),null;case 25:return null;default:return null}}function mE(r,i){switch(um(i),i.tag){case 3:$i(hn),lt();break;case 26:case 27:case 5:kn(i);break;case 4:lt();break;case 31:i.memoizedState!==null&&Er(i);break;case 13:Er(i);break;case 19:K(sn);break;case 10:$i(i.type);break;case 22:case 23:Er(i),Am(),r!==null&&K(zs);break;case 24:$i(hn)}}function du(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==f)}}catch(R){It(i,i.return,R)}}function Ua(r,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var _=u.inst,R=_.destroy;if(R!==void 0){_.destroy=void 0,f=i;var k=o,Z=R;try{Z()}catch(se){It(f,k,se)}}}u=u.next}while(u!==m)}}catch(se){It(i,i.return,se)}}function pE(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{a_(i,o)}catch(u){It(r,r.return,u)}}}function gE(r,i,o){o.props=Gs(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){It(r,i,u)}}function mu(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){It(r,i,f)}}function wi(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){It(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){It(r,i,f)}else o.current=null}function yE(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){It(r,r.return,f)}}function np(r,i,o){try{var u=r.stateNode;sC(u,r.type,o,i),u[be]=i}catch(f){It(r,r.return,f)}}function vE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ga(r.type)||r.tag===4}function rp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||vE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ga(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ip(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Xr));else if(u!==4&&(u===27&&Ga(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(ip(r,i,o),r=r.sibling;r!==null;)ip(r,i,o),r=r.sibling}function Ch(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&Ga(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Ch(r,i,o),r=r.sibling;r!==null;)Ch(r,i,o),r=r.sibling}function _E(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);On(i,u,o),i[ve]=r,i[be]=o}catch(m){It(r,r.return,m)}}var Wi=!1,mn=!1,ap=!1,EE=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function j1(r,i){if(r=r.containerInfo,Rp=Yh,r=Ov(r),Jd(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,R=-1,k=-1,Z=0,se=0,he=r,te=null;t:for(;;){for(var ie;he!==o||f!==0&&he.nodeType!==3||(R=_+f),he!==m||u!==0&&he.nodeType!==3||(k=_+u),he.nodeType===3&&(_+=he.nodeValue.length),(ie=he.firstChild)!==null;)te=he,he=ie;for(;;){if(he===r)break t;if(te===o&&++Z===f&&(R=_),te===m&&++se===u&&(k=_),(ie=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=ie}o=R===-1||k===-1?null:{start:R,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Cp={focusedElem:r,selectionRange:o},Yh=!1,Rn=i;Rn!==null;)if(i=Rn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Rn=r;else for(;Rn!==null;){switch(i=Rn,m=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)f=r[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var De=Gs(o.type,f);r=u.getSnapshotBeforeUpdate(De,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Be){It(o,o.return,Be)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Np(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Np(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,Rn=r;break}Rn=i.return}}function TE(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Zi(r,o),u&4&&du(5,o);break;case 1:if(Zi(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(_){It(o,o.return,_)}else{var f=Gs(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(_){It(o,o.return,_)}}u&64&&pE(o),u&512&&mu(o,o.return);break;case 3:if(Zi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{a_(r,i)}catch(_){It(o,o.return,_)}}break;case 27:i===null&&u&4&&_E(o);case 26:case 5:Zi(r,o),i===null&&u&4&&yE(o),u&512&&mu(o,o.return);break;case 12:Zi(r,o);break;case 31:Zi(r,o),u&4&&AE(r,o);break;case 13:Zi(r,o),u&4&&wE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=Y1.bind(null,o),mC(r,o))));break;case 22:if(u=o.memoizedState!==null||Wi,!u){i=i!==null&&i.memoizedState!==null||mn,f=Wi;var m=mn;Wi=u,(mn=i)&&!m?ea(r,o,(o.subtreeFlags&8772)!==0):Zi(r,o),Wi=f,mn=m}break;case 30:break;default:Zi(r,o)}}function bE(r){var i=r.alternate;i!==null&&(r.alternate=null,bE(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Ft(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Qt=null,ir=!1;function Ji(r,i,o){for(o=o.child;o!==null;)SE(r,i,o),o=o.sibling}function SE(r,i,o){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(fr,o)}catch{}switch(o.tag){case 26:mn||wi(o,i),Ji(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:mn||wi(o,i);var u=Qt,f=ir;Ga(o.type)&&(Qt=o.stateNode,ir=!1),Ji(r,i,o),Su(o.stateNode),Qt=u,ir=f;break;case 5:mn||wi(o,i);case 6:if(u=Qt,f=ir,Qt=null,Ji(r,i,o),Qt=u,ir=f,Qt!==null)if(ir)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(o.stateNode)}catch(m){It(o,i,m)}else try{Qt.removeChild(o.stateNode)}catch(m){It(o,i,m)}break;case 18:Qt!==null&&(ir?(r=Qt,pT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),el(r)):pT(Qt,o.stateNode));break;case 4:u=Qt,f=ir,Qt=o.stateNode.containerInfo,ir=!0,Ji(r,i,o),Qt=u,ir=f;break;case 0:case 11:case 14:case 15:Ua(2,o,i),mn||Ua(4,o,i),Ji(r,i,o);break;case 1:mn||(wi(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&gE(o,i,u)),Ji(r,i,o);break;case 21:Ji(r,i,o);break;case 22:mn=(u=mn)||o.memoizedState!==null,Ji(r,i,o),mn=u;break;default:Ji(r,i,o)}}function AE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{el(r)}catch(o){It(i,i.return,o)}}}function wE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{el(r)}catch(o){It(i,i.return,o)}}function z1(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new EE),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new EE),i;default:throw Error(a(435,r.tag))}}function Ih(r,i){var o=z1(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var f=Q1.bind(null,r,u);u.then(f,f)}})}function ar(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=r,_=i,R=_;e:for(;R!==null;){switch(R.tag){case 27:if(Ga(R.type)){Qt=R.stateNode,ir=!1;break e}break;case 5:Qt=R.stateNode,ir=!1;break e;case 3:case 4:Qt=R.stateNode.containerInfo,ir=!0;break e}R=R.return}if(Qt===null)throw Error(a(160));SE(m,_,f),Qt=null,ir=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)RE(i,r),i=i.sibling}var ni=null;function RE(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:ar(i,r),sr(r),u&4&&(Ua(3,r,r.return),du(3,r),Ua(5,r,r.return));break;case 1:ar(i,r),sr(r),u&512&&(mn||o===null||wi(o,o.return)),u&64&&Wi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ni;if(ar(i,r),sr(r),u&512&&(mn||o===null||wi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Nt]||m[ve]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),On(m,u,o),m[ve]=r,zt(m),u=m;break e;case"link":var _=RT("link","href",f).get(u+(o.href||""));if(_){for(var R=0;R<_.length;R++)if(m=_[R],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(R,1);break t}}m=f.createElement(u),On(m,u,o),f.head.appendChild(m);break;case"meta":if(_=RT("meta","content",f).get(u+(o.content||""))){for(R=0;R<_.length;R++)if(m=_[R],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(R,1);break t}}m=f.createElement(u),On(m,u,o),f.head.appendChild(m);break;default:throw Error(a(468,u))}m[ve]=r,zt(m),u=m}r.stateNode=u}else CT(f,r.type,r.stateNode);else r.stateNode=wT(f,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?CT(f,r.type,r.stateNode):wT(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&np(r,r.memoizedProps,o.memoizedProps)}break;case 27:ar(i,r),sr(r),u&512&&(mn||o===null||wi(o,o.return)),o!==null&&u&4&&np(r,r.memoizedProps,o.memoizedProps);break;case 5:if(ar(i,r),sr(r),u&512&&(mn||o===null||wi(o,o.return)),r.flags&32){f=r.stateNode;try{rr(f,"")}catch(De){It(r,r.return,De)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,np(r,f,o!==null?o.memoizedProps:f)),u&1024&&(ap=!0);break;case 6:if(ar(i,r),sr(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(De){It(r,r.return,De)}}break;case 3:if(qh=null,f=ni,ni=Fh(i.containerInfo),ar(i,r),ni=f,sr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{el(i.containerInfo)}catch(De){It(r,r.return,De)}ap&&(ap=!1,CE(r));break;case 4:u=ni,ni=Fh(r.stateNode.containerInfo),ar(i,r),sr(r),ni=u;break;case 12:ar(i,r),sr(r);break;case 31:ar(i,r),sr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ih(r,u)));break;case 13:ar(i,r),sr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Nh=Rt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ih(r,u)));break;case 22:f=r.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,Z=Wi,se=mn;if(Wi=Z||f,mn=se||k,ar(i,r),mn=se,Wi=Z,sr(r),u&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||k||Wi||mn||$s(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){k=o=i;try{if(m=k.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{R=k.stateNode;var he=k.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;R.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(De){It(k,k.return,De)}}}else if(i.tag===6){if(o===null){k=i;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch(De){It(k,k.return,De)}}}else if(i.tag===18){if(o===null){k=i;try{var ie=k.stateNode;f?gT(ie,!0):gT(k.stateNode,!1)}catch(De){It(k,k.return,De)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ih(r,o))));break;case 19:ar(i,r),sr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ih(r,u)));break;case 30:break;case 21:break;default:ar(i,r),sr(r)}}function sr(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(vE(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,m=rp(r);Ch(r,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(rr(_,""),o.flags&=-33);var R=rp(r);Ch(r,R,_);break;case 3:case 4:var k=o.stateNode.containerInfo,Z=rp(r);ip(r,Z,k);break;default:throw Error(a(161))}}catch(se){It(r,r.return,se)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function CE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;CE(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Zi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)TE(r,i.alternate,i),i=i.sibling}function $s(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ua(4,i,i.return),$s(i);break;case 1:wi(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&gE(i,i.return,o),$s(i);break;case 27:Su(i.stateNode);case 26:case 5:wi(i,i.return),$s(i);break;case 22:i.memoizedState===null&&$s(i);break;case 30:$s(i);break;default:$s(i)}r=r.sibling}}function ea(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:ea(f,m,o),du(4,m);break;case 1:if(ea(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){It(u,u.return,Z)}if(u=m,f=u.updateQueue,f!==null){var R=u.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)i_(k[f],R)}catch(Z){It(u,u.return,Z)}}o&&_&64&&pE(m),mu(m,m.return);break;case 27:_E(m);case 26:case 5:ea(f,m,o),o&&u===null&&_&4&&yE(m),mu(m,m.return);break;case 12:ea(f,m,o);break;case 31:ea(f,m,o),o&&_&4&&AE(f,m);break;case 13:ea(f,m,o),o&&_&4&&wE(f,m);break;case 22:m.memoizedState===null&&ea(f,m,o),mu(m,m.return);break;case 30:break;default:ea(f,m,o)}i=i.sibling}}function sp(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&eu(o))}function op(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&eu(r))}function ri(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)IE(r,i,o,u),i=i.sibling}function IE(r,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ri(r,i,o,u),f&2048&&du(9,i);break;case 1:ri(r,i,o,u);break;case 3:ri(r,i,o,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&eu(r)));break;case 12:if(f&2048){ri(r,i,o,u),r=i.stateNode;try{var m=i.memoizedProps,_=m.id,R=m.onPostCommit;typeof R=="function"&&R(_,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(k){It(i,i.return,k)}}else ri(r,i,o,u);break;case 31:ri(r,i,o,u);break;case 13:ri(r,i,o,u);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?ri(r,i,o,u):pu(r,i):m._visibility&2?ri(r,i,o,u):(m._visibility|=2,Ho(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&sp(_,i);break;case 24:ri(r,i,o,u),f&2048&&op(i.alternate,i);break;default:ri(r,i,o,u)}}function Ho(r,i,o,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=r,_=i,R=o,k=u,Z=_.flags;switch(_.tag){case 0:case 11:case 15:Ho(m,_,R,k,f),du(8,_);break;case 23:break;case 22:var se=_.stateNode;_.memoizedState!==null?se._visibility&2?Ho(m,_,R,k,f):pu(m,_):(se._visibility|=2,Ho(m,_,R,k,f)),f&&Z&2048&&sp(_.alternate,_);break;case 24:Ho(m,_,R,k,f),f&&Z&2048&&op(_.alternate,_);break;default:Ho(m,_,R,k,f)}i=i.sibling}}function pu(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,f=u.flags;switch(u.tag){case 22:pu(o,u),f&2048&&sp(u.alternate,u);break;case 24:pu(o,u),f&2048&&op(u.alternate,u);break;default:pu(o,u)}i=i.sibling}}var gu=8192;function qo(r,i,o){if(r.subtreeFlags&gu)for(r=r.child;r!==null;)DE(r,i,o),r=r.sibling}function DE(r,i,o){switch(r.tag){case 26:qo(r,i,o),r.flags&gu&&r.memoizedState!==null&&RC(o,ni,r.memoizedState,r.memoizedProps);break;case 5:qo(r,i,o);break;case 3:case 4:var u=ni;ni=Fh(r.stateNode.containerInfo),qo(r,i,o),ni=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=gu,gu=16777216,qo(r,i,o),gu=u):qo(r,i,o));break;default:qo(r,i,o)}}function NE(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function yu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Rn=u,OE(u,r)}NE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)xE(r),r=r.sibling}function xE(r){switch(r.tag){case 0:case 11:case 15:yu(r),r.flags&2048&&Ua(9,r,r.return);break;case 3:yu(r);break;case 12:yu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Dh(r)):yu(r);break;default:yu(r)}}function Dh(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Rn=u,OE(u,r)}NE(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ua(8,i,i.return),Dh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Dh(i));break;default:Dh(i)}r=r.sibling}}function OE(r,i){for(;Rn!==null;){var o=Rn;switch(o.tag){case 0:case 11:case 15:Ua(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:eu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Rn=u;else e:for(o=r;Rn!==null;){u=Rn;var f=u.sibling,m=u.return;if(bE(u),u===o){Rn=null;break e}if(f!==null){f.return=m,Rn=f;break e}Rn=m}}}var B1={getCacheForType:function(r){var i=Nn(hn),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return Nn(hn).controller.signal}},F1=typeof WeakMap=="function"?WeakMap:Map,At=0,kt=null,ut=null,ht=0,Ct=0,Tr=null,ja=!1,Go=!1,lp=!1,ta=0,tn=0,za=0,Ks=0,up=0,br=0,$o=0,vu=null,or=null,cp=!1,Nh=0,ME=0,xh=1/0,Oh=null,Ba=null,En=0,Fa=null,Ko=null,na=0,hp=0,fp=null,VE=null,_u=0,dp=null;function Sr(){return(At&2)!==0&&ht!==0?ht&-ht:W.T!==null?_p():ye()}function PE(){if(br===0)if((ht&536870912)===0||gt){var r=fi;fi<<=1,(fi&3932160)===0&&(fi=262144),br=r}else br=536870912;return r=_r.current,r!==null&&(r.flags|=32),br}function lr(r,i,o){(r===kt&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)&&(Yo(r,0),Ha(r,ht,br,!1)),di(r,o),((At&2)===0||r!==kt)&&(r===kt&&((At&2)===0&&(Ks|=o),tn===4&&Ha(r,ht,br,!1)),Ri(r))}function LE(r,i,o){if((At&6)!==0)throw Error(a(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||mr(r,i),f=u?G1(r,i):pp(r,i,!0),m=u;do{if(f===0){Go&&!u&&Ha(r,i,0,!1);break}else{if(o=r.current.alternate,m&&!H1(o)){f=pp(r,i,!1),m=!1;continue}if(f===2){if(m=i,r.errorRecoveryDisabledLanes&m)var _=0;else _=r.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var R=r;f=vu;var k=R.current.memoizedState.isDehydrated;if(k&&(Yo(R,_).flags|=256),_=pp(R,_,!1),_!==2){if(lp&&!k){R.errorRecoveryDisabledLanes|=m,Ks|=m,f=4;break e}m=or,or=f,m!==null&&(or===null?or=m:or.push.apply(or,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){Yo(r,0),Ha(r,i,0,!0);break}e:{switch(u=r,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ha(u,i,br,!ja);break e;case 2:or=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Nh+300-Rt(),10<f)){if(Ha(u,i,br,!ja),dr(u,0,!0)!==0)break e;na=i,u.timeoutHandle=dT(kE.bind(null,u,o,or,Oh,cp,i,br,Ks,$o,ja,m,"Throttled",-0,0),f);break e}kE(u,o,or,Oh,cp,i,br,Ks,$o,ja,m,null,-0,0)}}break}while(!0);Ri(r)}function kE(r,i,o,u,f,m,_,R,k,Z,se,he,te,ie){if(r.timeoutHandle=-1,he=i.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xr},DE(i,m,he);var De=(m&62914560)===m?Nh-Rt():(m&4194048)===m?ME-Rt():0;if(De=CC(he,De),De!==null){na=m,r.cancelPendingCommit=De(GE.bind(null,r,i,m,o,u,f,_,R,k,se,he,null,te,ie)),Ha(r,m,_,!Z);return}}GE(r,i,m,o,u,f,_,R,k)}function H1(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!yr(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ha(r,i,o,u){i&=~up,i&=~Ks,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var m=31-$t(f),_=1<<m;u[m]=-1,f&=~_}o!==0&&ji(r,o,i)}function Mh(){return(At&6)===0?(Eu(0),!1):!0}function mp(){if(ut!==null){if(Ct===0)var r=ut.return;else r=ut,Gi=Us=null,Nm(r),Uo=null,nu=0,r=ut;for(;r!==null;)mE(r.alternate,r),r=r.return;ut=null}}function Yo(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,uC(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),na=0,mp(),kt=r,ut=o=Hi(r.current,null),ht=i,Ct=0,Tr=null,ja=!1,Go=mr(r,i),lp=!1,$o=br=up=Ks=za=tn=0,or=vu=null,cp=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-$t(u),m=1<<f;i|=r[f],u&=~m}return ta=i,eh(),o}function UE(r,i){tt=null,W.H=cu,i===ko||i===lh?(i=e_(),Ct=3):i===vm?(i=e_(),Ct=4):Ct=i===$m?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Tr=i,ut===null&&(tn=1,bh(r,Lr(i,r.current)))}function jE(){var r=_r.current;return r===null?!0:(ht&4194048)===ht?zr===null:(ht&62914560)===ht||(ht&536870912)!==0?r===zr:!1}function zE(){var r=W.H;return W.H=cu,r===null?cu:r}function BE(){var r=W.A;return W.A=B1,r}function Vh(){tn=4,ja||(ht&4194048)!==ht&&_r.current!==null||(Go=!0),(za&134217727)===0&&(Ks&134217727)===0||kt===null||Ha(kt,ht,br,!1)}function pp(r,i,o){var u=At;At|=2;var f=zE(),m=BE();(kt!==r||ht!==i)&&(Oh=null,Yo(r,i)),i=!1;var _=tn;e:do try{if(Ct!==0&&ut!==null){var R=ut,k=Tr;switch(Ct){case 8:mp(),_=6;break e;case 3:case 2:case 9:case 6:_r.current===null&&(i=!0);var Z=Ct;if(Ct=0,Tr=null,Qo(r,R,k,Z),o&&Go){_=0;break e}break;default:Z=Ct,Ct=0,Tr=null,Qo(r,R,k,Z)}}q1(),_=tn;break}catch(se){UE(r,se)}while(!0);return i&&r.shellSuspendCounter++,Gi=Us=null,At=u,W.H=f,W.A=m,ut===null&&(kt=null,ht=0,eh()),_}function q1(){for(;ut!==null;)FE(ut)}function G1(r,i){var o=At;At|=2;var u=zE(),f=BE();kt!==r||ht!==i?(Oh=null,xh=Rt()+500,Yo(r,i)):Go=mr(r,i);e:do try{if(Ct!==0&&ut!==null){i=ut;var m=Tr;t:switch(Ct){case 1:Ct=0,Tr=null,Qo(r,i,m,1);break;case 2:case 9:if(Jv(m)){Ct=0,Tr=null,HE(i);break}i=function(){Ct!==2&&Ct!==9||kt!==r||(Ct=7),Ri(r)},m.then(i,i);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:Jv(m)?(Ct=0,Tr=null,HE(i)):(Ct=0,Tr=null,Qo(r,i,m,7));break;case 5:var _=null;switch(ut.tag){case 26:_=ut.memoizedState;case 5:case 27:var R=ut;if(_?IT(_):R.stateNode.complete){Ct=0,Tr=null;var k=R.sibling;if(k!==null)ut=k;else{var Z=R.return;Z!==null?(ut=Z,Ph(Z)):ut=null}break t}}Ct=0,Tr=null,Qo(r,i,m,5);break;case 6:Ct=0,Tr=null,Qo(r,i,m,6);break;case 8:mp(),tn=6;break e;default:throw Error(a(462))}}$1();break}catch(se){UE(r,se)}while(!0);return Gi=Us=null,W.H=u,W.A=f,At=o,ut!==null?0:(kt=null,ht=0,eh(),tn)}function $1(){for(;ut!==null&&!Dt();)FE(ut)}function FE(r){var i=fE(r.alternate,r,ta);r.memoizedProps=r.pendingProps,i===null?Ph(r):ut=i}function HE(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=sE(o,i,i.pendingProps,i.type,void 0,ht);break;case 11:i=sE(o,i,i.pendingProps,i.type.render,i.ref,ht);break;case 5:Nm(i);default:mE(o,i),i=ut=Bv(i,ta),i=fE(o,i,ta)}r.memoizedProps=r.pendingProps,i===null?Ph(r):ut=i}function Qo(r,i,o,u){Gi=Us=null,Nm(i),Uo=null,nu=0;var f=i.return;try{if(V1(r,f,i,o,ht)){tn=1,bh(r,Lr(o,r.current)),ut=null;return}}catch(m){if(f!==null)throw ut=f,m;tn=1,bh(r,Lr(o,r.current)),ut=null;return}i.flags&32768?(gt||u===1?r=!0:Go||(ht&536870912)!==0?r=!1:(ja=r=!0,(u===2||u===9||u===3||u===6)&&(u=_r.current,u!==null&&u.tag===13&&(u.flags|=16384))),qE(i,r)):Ph(i)}function Ph(r){var i=r;do{if((i.flags&32768)!==0){qE(i,ja);return}r=i.return;var o=k1(i.alternate,i,ta);if(o!==null){ut=o;return}if(i=i.sibling,i!==null){ut=i;return}ut=i=r}while(i!==null);tn===0&&(tn=5)}function qE(r,i){do{var o=U1(r.alternate,r);if(o!==null){o.flags&=32767,ut=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){ut=r;return}ut=r=o}while(r!==null);tn=6,ut=null}function GE(r,i,o,u,f,m,_,R,k){r.cancelPendingCommit=null;do Lh();while(En!==0);if((At&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=rm,Ul(r,o,m,_,R,k),r===kt&&(ut=kt=null,ht=0),Ko=i,Fa=r,na=o,hp=m,fp=f,VE=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,X1(An,function(){return XE(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=W.T,W.T=null,f=me.p,me.p=2,_=At,At|=4;try{j1(r,i,o)}finally{At=_,me.p=f,W.T=u}}En=1,$E(),KE(),YE()}}function $E(){if(En===1){En=0;var r=Fa,i=Ko,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var u=me.p;me.p=2;var f=At;At|=4;try{RE(i,r);var m=Cp,_=Ov(r.containerInfo),R=m.focusedElem,k=m.selectionRange;if(_!==R&&R&&R.ownerDocument&&xv(R.ownerDocument.documentElement,R)){if(k!==null&&Jd(R)){var Z=k.start,se=k.end;if(se===void 0&&(se=Z),"selectionStart"in R)R.selectionStart=Z,R.selectionEnd=Math.min(se,R.value.length);else{var he=R.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var ie=te.getSelection(),De=R.textContent.length,Be=Math.min(k.start,De),Pt=k.end===void 0?Be:Math.min(k.end,De);!ie.extend&&Be>Pt&&(_=Pt,Pt=Be,Be=_);var $=Nv(R,Be),z=Nv(R,Pt);if($&&z&&(ie.rangeCount!==1||ie.anchorNode!==$.node||ie.anchorOffset!==$.offset||ie.focusNode!==z.node||ie.focusOffset!==z.offset)){var J=he.createRange();J.setStart($.node,$.offset),ie.removeAllRanges(),Be>Pt?(ie.addRange(J),ie.extend(z.node,z.offset)):(J.setEnd(z.node,z.offset),ie.addRange(J))}}}}for(he=[],ie=R;ie=ie.parentNode;)ie.nodeType===1&&he.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<he.length;R++){var le=he[R];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Yh=!!Rp,Cp=Rp=null}finally{At=f,me.p=u,W.T=o}}r.current=i,En=2}}function KE(){if(En===2){En=0;var r=Fa,i=Ko,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var u=me.p;me.p=2;var f=At;At|=4;try{TE(r,i.alternate,i)}finally{At=f,me.p=u,W.T=o}}En=3}}function YE(){if(En===4||En===3){En=0,rn();var r=Fa,i=Ko,o=na,u=VE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?En=5:(En=0,Ko=Fa=null,QE(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Ba=null),de(o),i=i.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(fr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=W.T,f=me.p,me.p=2,W.T=null;try{for(var m=r.onRecoverableError,_=0;_<u.length;_++){var R=u[_];m(R.value,{componentStack:R.stack})}}finally{W.T=i,me.p=f}}(na&3)!==0&&Lh(),Ri(r),f=r.pendingLanes,(o&261930)!==0&&(f&42)!==0?r===dp?_u++:(_u=0,dp=r):_u=0,Eu(0)}}function QE(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,eu(i)))}function Lh(){return $E(),KE(),YE(),XE()}function XE(){if(En!==5)return!1;var r=Fa,i=hp;hp=0;var o=de(na),u=W.T,f=me.p;try{me.p=32>o?32:o,W.T=null,o=fp,fp=null;var m=Fa,_=na;if(En=0,Ko=Fa=null,na=0,(At&6)!==0)throw Error(a(331));var R=At;if(At|=4,xE(m.current),IE(m,m.current,_,o),At=R,Eu(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(fr,m)}catch{}return!0}finally{me.p=f,W.T=u,QE(r,i)}}function WE(r,i,o){i=Lr(o,i),i=Gm(r.stateNode,i,2),r=Pa(r,i,2),r!==null&&(di(r,2),Ri(r))}function It(r,i,o){if(r.tag===3)WE(r,r,o);else for(;i!==null;){if(i.tag===3){WE(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ba===null||!Ba.has(u))){r=Lr(o,r),o=J_(2),u=Pa(i,o,2),u!==null&&(Z_(o,u,i,r),di(u,2),Ri(u));break}}i=i.return}}function gp(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new F1;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(lp=!0,f.add(o),r=K1.bind(null,r,i,o),i.then(r,r))}function K1(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,kt===r&&(ht&o)===o&&(tn===4||tn===3&&(ht&62914560)===ht&&300>Rt()-Nh?(At&2)===0&&Yo(r,0):up|=o,$o===ht&&($o=0)),Ri(r)}function JE(r,i){i===0&&(i=Ui()),r=Ps(r,i),r!==null&&(di(r,i),Ri(r))}function Y1(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),JE(r,o)}function Q1(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),JE(r,o)}function X1(r,i){return Ge(r,i)}var kh=null,Xo=null,yp=!1,Uh=!1,vp=!1,qa=0;function Ri(r){r!==Xo&&r.next===null&&(Xo===null?kh=Xo=r:Xo=Xo.next=r),Uh=!0,yp||(yp=!0,J1())}function Eu(r,i){if(!vp&&Uh){vp=!0;do for(var o=!1,u=kh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var _=u.suspendedLanes,R=u.pingedLanes;m=(1<<31-$t(42|r)+1)-1,m&=f&~(_&~R),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,nT(u,m))}else m=ht,m=dr(u,u===kt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||mr(u,m)||(o=!0,nT(u,m));u=u.next}while(o);vp=!1}}function W1(){ZE()}function ZE(){Uh=yp=!1;var r=0;qa!==0&&lC()&&(r=qa);for(var i=Rt(),o=null,u=kh;u!==null;){var f=u.next,m=eT(u,i);m===0?(u.next=null,o===null?kh=f:o.next=f,f===null&&(Xo=o)):(o=u,(r!==0||(m&3)!==0)&&(Uh=!0)),u=f}En!==0&&En!==5||Eu(r),qa!==0&&(qa=0)}function eT(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var _=31-$t(m),R=1<<_,k=f[_];k===-1?((R&o)===0||(R&u)!==0)&&(f[_]=yo(R,i)):k<=i&&(r.expiredLanes|=R),m&=~R}if(i=kt,o=ht,o=dr(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Ve(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||mr(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&Ve(u),de(o)){case 2:case 8:o=ki;break;case 32:o=An;break;case 268435456:o=Ts;break;default:o=An}return u=tT.bind(null,r),o=Ge(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&Ve(u),r.callbackPriority=2,r.callbackNode=null,2}function tT(r,i){if(En!==0&&En!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Lh()&&r.callbackNode!==o)return null;var u=ht;return u=dr(r,r===kt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(LE(r,u,i),eT(r,Rt()),r.callbackNode!=null&&r.callbackNode===o?tT.bind(null,r):null)}function nT(r,i){if(Lh())return null;LE(r,i,!0)}function J1(){cC(function(){(At&6)!==0?Ge(Zn,W1):ZE()})}function _p(){if(qa===0){var r=Po;r===0&&(r=Kn,Kn<<=1,(Kn&261888)===0&&(Kn=256)),qa=r}return qa}function rT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Eo(""+r)}function iT(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function Z1(r,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var m=rT((f[be]||null).action),_=u.submitter;_&&(i=(i=_[be]||null)?rT(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var R=new _i("action","action",null,u,f);r.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(qa!==0){var k=_?iT(f,_):new FormData(f);jm(o,{pending:!0,data:k,method:f.method,action:m},null,k)}}else typeof m=="function"&&(R.preventDefault(),k=_?iT(f,_):new FormData(f),jm(o,{pending:!0,data:k,method:f.method,action:m},m,k))},currentTarget:f}]})}}for(var Ep=0;Ep<nm.length;Ep++){var Tp=nm[Ep],eC=Tp.toLowerCase(),tC=Tp[0].toUpperCase()+Tp.slice(1);ti(eC,"on"+tC)}ti(Pv,"onAnimationEnd"),ti(Lv,"onAnimationIteration"),ti(kv,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(y1,"onTransitionRun"),ti(v1,"onTransitionStart"),ti(_1,"onTransitionCancel"),ti(Uv,"onTransitionEnd"),jn("onMouseEnter",["mouseout","mouseover"]),jn("onMouseLeave",["mouseout","mouseover"]),jn("onPointerEnter",["pointerout","pointerover"]),jn("onPointerLeave",["pointerout","pointerover"]),tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tu));function aT(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var _=u.length-1;0<=_;_--){var R=u[_],k=R.instance,Z=R.currentTarget;if(R=R.listener,k!==m&&f.isPropagationStopped())break e;m=R,f.currentTarget=Z;try{m(f)}catch(se){Zc(se)}f.currentTarget=null,m=k}else for(_=0;_<u.length;_++){if(R=u[_],k=R.instance,Z=R.currentTarget,R=R.listener,k!==m&&f.isPropagationStopped())break e;m=R,f.currentTarget=Z;try{m(f)}catch(se){Zc(se)}f.currentTarget=null,m=k}}}}function ct(r,i){var o=i[He];o===void 0&&(o=i[He]=new Set);var u=r+"__bubble";o.has(u)||(sT(i,r,2,!1),o.add(u))}function bp(r,i,o){var u=0;i&&(u|=4),sT(o,r,u,i)}var jh="_reactListening"+Math.random().toString(36).slice(2);function Sp(r){if(!r[jh]){r[jh]=!0,er.forEach(function(o){o!=="selectionchange"&&(nC.has(o)||bp(o,!1,r),bp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[jh]||(i[jh]=!0,bp("selectionchange",!1,i))}}function sT(r,i,o,u){switch(PT(i)){case 2:var f=NC;break;case 8:f=xC;break;default:f=Up}o=f.bind(null,i,o,r),f=void 0,!Cs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function Ap(r,i,o,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var R=u.stateNode.containerInfo;if(R===f)break;if(_===4)for(_=u.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;R!==null;){if(_=Ut(R),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){u=m=_;continue e}R=R.parentNode}}u=u.return}wa(function(){var Z=m,se=Or(o),he=[];e:{var te=jv.get(r);if(te!==void 0){var ie=_i,De=r;switch(r){case"keypress":if(Ds(o)===0)break e;case"keydown":case"keyup":ie=Xc;break;case"focusin":De="focus",ie=xs;break;case"focusout":De="blur",ie=xs;break;case"beforeblur":case"afterblur":ie=xs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=$l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Bc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=y;break;case Pv:case Lv:case kv:ie=Hc;break;case Uv:ie=D;break;case"scroll":case"scrollend":ie=Gl;break;case"wheel":ie=ne;break;case"copy":case"cut":case"paste":ie=qc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Fi;break;case"toggle":case"beforetoggle":ie=et}var Be=(i&4)!==0,Pt=!Be&&(r==="scroll"||r==="scrollend"),$=Be?te!==null?te+"Capture":null:te;Be=[];for(var z=Z,J;z!==null;){var le=z;if(J=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||J===null||$===null||(le=Wr(z,$),le!=null&&Be.push(bu(z,le,J))),Pt)break;z=z.return}0<Be.length&&(te=new ie(te,De,null,o,se),he.push({event:te,listeners:Be}))}}if((i&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",te&&o!==Fl&&(De=o.relatedTarget||o.fromElement)&&(Ut(De)||De[Ce]))break e;if((ie||te)&&(te=se.window===se?se:(te=se.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(De=o.relatedTarget||o.toElement,ie=Z,De=De?Ut(De):null,De!==null&&(Pt=l(De),Be=De.tag,De!==Pt||Be!==5&&Be!==27&&Be!==6)&&(De=null)):(ie=null,De=Z),ie!==De)){if(Be=$l,le="onMouseLeave",$="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(Be=Fi,le="onPointerLeave",$="onPointerEnter",z="pointer"),Pt=ie==null?te:jt(ie),J=De==null?te:jt(De),te=new Be(le,z+"leave",ie,o,se),te.target=Pt,te.relatedTarget=J,le=null,Ut(se)===Z&&(Be=new Be($,z+"enter",De,o,se),Be.target=J,Be.relatedTarget=Pt,le=Be),Pt=le,ie&&De)t:{for(Be=rC,$=ie,z=De,J=0,le=$;le;le=Be(le))J++;le=0;for(var Le=z;Le;Le=Be(Le))le++;for(;0<J-le;)$=Be($),J--;for(;0<le-J;)z=Be(z),le--;for(;J--;){if($===z||z!==null&&$===z.alternate){Be=$;break t}$=Be($),z=Be(z)}Be=null}else Be=null;ie!==null&&oT(he,te,ie,Be,!1),De!==null&&Pt!==null&&oT(he,Pt,De,Be,!0)}}e:{if(te=Z?jt(Z):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var Et=Av;else if(bv(te))if(wv)Et=m1;else{Et=f1;var Ne=h1}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&_o(Z.elementType)&&(Et=Av):Et=d1;if(Et&&(Et=Et(r,Z))){Sv(he,Et,o,se);break e}Ne&&Ne(r,te,Z),r==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&jl(te,"number",te.value)}switch(Ne=Z?jt(Z):window,r){case"focusin":(bv(Ne)||Ne.contentEditable==="true")&&(Co=Ne,Zd=Z,Wl=null);break;case"focusout":Wl=Zd=Co=null;break;case"mousedown":em=!0;break;case"contextmenu":case"mouseup":case"dragend":em=!1,Mv(he,o,se);break;case"selectionchange":if(g1)break;case"keydown":case"keyup":Mv(he,o,se)}var it;if(St)e:{switch(r){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Ro?Os(r,o)&&(ft="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ft="onCompositionStart");ft&&(bi&&o.locale!=="ko"&&(Ro||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Ro&&(it=ql()):(vi=se,Hl="value"in vi?vi.value:vi.textContent,Ro=!0)),Ne=zh(Z,ft),0<Ne.length&&(ft=new Ti(ft,r,null,o,se),he.push({event:ft,listeners:Ne}),it?ft.data=it:(it=wo(o),it!==null&&(ft.data=it)))),(it=Vr?o1(r,o):l1(r,o))&&(ft=zh(Z,"onBeforeInput"),0<ft.length&&(Ne=new Ti("onBeforeInput","beforeinput",null,o,se),he.push({event:Ne,listeners:ft}),Ne.data=it)),Z1(he,r,Z,o,se)}aT(he,i)})}function bu(r,i,o){return{instance:r,listener:i,currentTarget:o}}function zh(r,i){for(var o=i+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Wr(r,o),f!=null&&u.unshift(bu(r,f,m)),f=Wr(r,i),f!=null&&u.push(bu(r,f,m))),r.tag===3)return u;r=r.return}return[]}function rC(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function oT(r,i,o,u,f){for(var m=i._reactName,_=[];o!==null&&o!==u;){var R=o,k=R.alternate,Z=R.stateNode;if(R=R.tag,k!==null&&k===u)break;R!==5&&R!==26&&R!==27||Z===null||(k=Z,f?(Z=Wr(o,m),Z!=null&&_.unshift(bu(o,Z,k))):f||(Z=Wr(o,m),Z!=null&&_.push(bu(o,Z,k)))),o=o.return}_.length!==0&&r.push({event:i,listeners:_})}var iC=/\r\n?/g,aC=/\u0000|\uFFFD/g;function lT(r){return(typeof r=="string"?r:""+r).replace(iC,`
`).replace(aC,"")}function uT(r,i){return i=lT(i),lT(r)===i}function Vt(r,i,o,u,f,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||rr(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&rr(r,""+u);break;case"className":cn(r,"class",u);break;case"tabIndex":cn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":cn(r,o,u);break;case"style":Bl(r,u,m);break;case"data":if(i!=="object"){cn(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Eo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&Vt(r,i,"name",f.name,f,null),Vt(r,i,"formEncType",f.formEncType,f,null),Vt(r,i,"formMethod",f.formMethod,f,null),Vt(r,i,"formTarget",f.formTarget,f,null)):(Vt(r,i,"encType",f.encType,f,null),Vt(r,i,"method",f.method,f,null),Vt(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Eo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Xr);break;case"onScroll":u!=null&&ct("scroll",r);break;case"onScrollEnd":u!=null&&ct("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Eo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":ct("beforetoggle",r),ct("toggle",r),Xt(r,"popover",u);break;case"xlinkActuate":xt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Xt(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=zc.get(o)||o,Xt(r,o,u))}}function wp(r,i,o,u,f,m){switch(o){case"style":Bl(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof u=="string"?rr(r,u):(typeof u=="number"||typeof u=="bigint")&&rr(r,""+u);break;case"onScroll":u!=null&&ct("scroll",r);break;case"onScrollEnd":u!=null&&ct("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Xr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Un.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=r[be]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Xt(r,o,u)}}}function On(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",r),ct("load",r);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Vt(r,i,m,_,o,null)}}f&&Vt(r,i,"srcSet",o.srcSet,o,null),u&&Vt(r,i,"src",o.src,o,null);return;case"input":ct("invalid",r);var R=m=_=f=null,k=null,Z=null;for(u in o)if(o.hasOwnProperty(u)){var se=o[u];if(se!=null)switch(u){case"name":f=se;break;case"type":_=se;break;case"checked":k=se;break;case"defaultChecked":Z=se;break;case"value":m=se;break;case"defaultValue":R=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,i));break;default:Vt(r,i,u,se,o,null)}}kc(r,m,R,k,Z,_,f,!1);return;case"select":ct("invalid",r),u=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(R=o[f],R!=null))switch(f){case"value":m=R;break;case"defaultValue":_=R;break;case"multiple":u=R;default:Vt(r,i,f,R,o,null)}i=m,o=_,r.multiple=!!u,i!=null?Ta(r,!!u,i,!1):o!=null&&Ta(r,!!u,o,!0);return;case"textarea":ct("invalid",r),m=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(R=o[_],R!=null))switch(_){case"value":u=R;break;case"defaultValue":f=R;break;case"children":m=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(a(91));break;default:Vt(r,i,_,R,o,null)}ba(r,u,f,m);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(u=o[k],u!=null))switch(k){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Vt(r,i,k,u,o,null)}return;case"dialog":ct("beforetoggle",r),ct("toggle",r),ct("cancel",r),ct("close",r);break;case"iframe":case"object":ct("load",r);break;case"video":case"audio":for(u=0;u<Tu.length;u++)ct(Tu[u],r);break;case"image":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"embed":case"source":case"link":ct("error",r),ct("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(u=o[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Vt(r,i,Z,u,o,null)}return;default:if(_o(i)){for(se in o)o.hasOwnProperty(se)&&(u=o[se],u!==void 0&&wp(r,i,se,u,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(u=o[R],u!=null&&Vt(r,i,R,u,o,null))}function sC(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,R=null,k=null,Z=null,se=null;for(ie in o){var he=o[ie];if(o.hasOwnProperty(ie)&&he!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":k=he;default:u.hasOwnProperty(ie)||Vt(r,i,ie,null,u,he)}}for(var te in u){var ie=u[te];if(he=o[te],u.hasOwnProperty(te)&&(ie!=null||he!=null))switch(te){case"type":m=ie;break;case"name":f=ie;break;case"checked":Z=ie;break;case"defaultChecked":se=ie;break;case"value":_=ie;break;case"defaultValue":R=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,i));break;default:ie!==he&&Vt(r,i,te,ie,u,he)}}vo(r,_,R,k,Z,se,m,f);return;case"select":ie=_=R=te=null;for(m in o)if(k=o[m],o.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":ie=k;default:u.hasOwnProperty(m)||Vt(r,i,m,null,u,k)}for(f in u)if(m=u[f],k=o[f],u.hasOwnProperty(f)&&(m!=null||k!=null))switch(f){case"value":te=m;break;case"defaultValue":R=m;break;case"multiple":_=m;default:m!==k&&Vt(r,i,f,m,u,k)}i=R,o=_,u=ie,te!=null?Ta(r,!!o,te,!1):!!u!=!!o&&(i!=null?Ta(r,!!o,i,!0):Ta(r,!!o,o?[]:"",!1));return;case"textarea":ie=te=null;for(R in o)if(f=o[R],o.hasOwnProperty(R)&&f!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Vt(r,i,R,null,u,f)}for(_ in u)if(f=u[_],m=o[_],u.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":te=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&Vt(r,i,_,f,u,m)}Uc(r,te,ie);return;case"option":for(var De in o)if(te=o[De],o.hasOwnProperty(De)&&te!=null&&!u.hasOwnProperty(De))switch(De){case"selected":r.selected=!1;break;default:Vt(r,i,De,null,u,te)}for(k in u)if(te=u[k],ie=o[k],u.hasOwnProperty(k)&&te!==ie&&(te!=null||ie!=null))switch(k){case"selected":r.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Vt(r,i,k,te,u,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in o)te=o[Be],o.hasOwnProperty(Be)&&te!=null&&!u.hasOwnProperty(Be)&&Vt(r,i,Be,null,u,te);for(Z in u)if(te=u[Z],ie=o[Z],u.hasOwnProperty(Z)&&te!==ie&&(te!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,i));break;default:Vt(r,i,Z,te,u,ie)}return;default:if(_o(i)){for(var Pt in o)te=o[Pt],o.hasOwnProperty(Pt)&&te!==void 0&&!u.hasOwnProperty(Pt)&&wp(r,i,Pt,void 0,u,te);for(se in u)te=u[se],ie=o[se],!u.hasOwnProperty(se)||te===ie||te===void 0&&ie===void 0||wp(r,i,se,te,u,ie);return}}for(var $ in o)te=o[$],o.hasOwnProperty($)&&te!=null&&!u.hasOwnProperty($)&&Vt(r,i,$,null,u,te);for(he in u)te=u[he],ie=o[he],!u.hasOwnProperty(he)||te===ie||te==null&&ie==null||Vt(r,i,he,te,u,ie)}function cT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oC(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,_=f.initiatorType,R=f.duration;if(m&&R&&cT(_)){for(_=0,R=f.responseEnd,u+=1;u<o.length;u++){var k=o[u],Z=k.startTime;if(Z>R)break;var se=k.transferSize,he=k.initiatorType;se&&cT(he)&&(k=k.responseEnd,_+=se*(k<R?1:(R-Z)/(k-Z)))}if(--u,i+=8*(m+_)/(f.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Rp=null,Cp=null;function Bh(r){return r.nodeType===9?r:r.ownerDocument}function hT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fT(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Ip(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Dp=null;function lC(){var r=window.event;return r&&r.type==="popstate"?r===Dp?!1:(Dp=r,!0):(Dp=null,!1)}var dT=typeof setTimeout=="function"?setTimeout:void 0,uC=typeof clearTimeout=="function"?clearTimeout:void 0,mT=typeof Promise=="function"?Promise:void 0,cC=typeof queueMicrotask=="function"?queueMicrotask:typeof mT<"u"?function(r){return mT.resolve(null).then(r).catch(hC)}:dT;function hC(r){setTimeout(function(){throw r})}function Ga(r){return r==="head"}function pT(r,i){var o=i,u=0;do{var f=o.nextSibling;if(r.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(f),el(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Su(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Su(o);for(var m=o.firstChild;m;){var _=m.nextSibling,R=m.nodeName;m[Nt]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&Su(r.ownerDocument.body);o=f}while(o);el(i)}function gT(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Np(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Np(o),Ft(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function fC(r,i,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Nt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Br(r.nextSibling),r===null)break}return null}function dC(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Br(r.nextSibling),r===null))return null;return r}function yT(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Br(r.nextSibling),r===null))return null;return r}function xp(r){return r.data==="$?"||r.data==="$~"}function Op(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function mC(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Br(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Mp=null;function vT(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return Br(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function _T(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function ET(r,i,o){switch(i=Bh(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function Su(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Ft(r)}var Fr=new Map,TT=new Set;function Fh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ra=me.d;me.d={f:pC,r:gC,D:yC,C:vC,L:_C,m:EC,X:bC,S:TC,M:SC};function pC(){var r=ra.f(),i=Mh();return r||i}function gC(r){var i=nt(r);i!==null&&i.tag===5&&i.type==="form"?U_(i):ra.r(r)}var Wo=typeof document>"u"?null:document;function bT(r,i,o){var u=Wo;if(u&&typeof i=="string"&&i){var f=nr(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),TT.has(f)||(TT.add(f),r={rel:r,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),On(i,"link",r),zt(i),u.head.appendChild(i)))}}function yC(r){ra.D(r),bT("dns-prefetch",r,null)}function vC(r,i){ra.C(r,i),bT("preconnect",r,i)}function _C(r,i,o){ra.L(r,i,o);var u=Wo;if(u&&r&&i){var f='link[rel="preload"][as="'+nr(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+nr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+nr(o.imageSizes)+'"]')):f+='[href="'+nr(r)+'"]';var m=f;switch(i){case"style":m=Jo(r);break;case"script":m=Zo(r)}Fr.has(m)||(r=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Fr.set(m,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(Au(m))||i==="script"&&u.querySelector(wu(m))||(i=u.createElement("link"),On(i,"link",r),zt(i),u.head.appendChild(i)))}}function EC(r,i){ra.m(r,i);var o=Wo;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+nr(u)+'"][href="'+nr(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Zo(r)}if(!Fr.has(m)&&(r=E({rel:"modulepreload",href:r},i),Fr.set(m,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(wu(m)))return}u=o.createElement("link"),On(u,"link",r),zt(u),o.head.appendChild(u)}}}function TC(r,i,o){ra.S(r,i,o);var u=Wo;if(u&&r){var f=wn(u).hoistableStyles,m=Jo(r);i=i||"default";var _=f.get(m);if(!_){var R={loading:0,preload:null};if(_=u.querySelector(Au(m)))R.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Fr.get(m))&&Vp(r,o);var k=_=u.createElement("link");zt(k),On(k,"link",r),k._p=new Promise(function(Z,se){k.onload=Z,k.onerror=se}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Hh(_,i,u)}_={type:"stylesheet",instance:_,count:1,state:R},f.set(m,_)}}}function bC(r,i){ra.X(r,i);var o=Wo;if(o&&r){var u=wn(o).hoistableScripts,f=Zo(r),m=u.get(f);m||(m=o.querySelector(wu(f)),m||(r=E({src:r,async:!0},i),(i=Fr.get(f))&&Pp(r,i),m=o.createElement("script"),zt(m),On(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function SC(r,i){ra.M(r,i);var o=Wo;if(o&&r){var u=wn(o).hoistableScripts,f=Zo(r),m=u.get(f);m||(m=o.querySelector(wu(f)),m||(r=E({src:r,async:!0,type:"module"},i),(i=Fr.get(f))&&Pp(r,i),m=o.createElement("script"),zt(m),On(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function ST(r,i,o,u){var f=(f=Ee.current)?Fh(f):null;if(!f)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Jo(o.href),o=wn(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Jo(o.href);var m=wn(f).hoistableStyles,_=m.get(r);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,_),(m=f.querySelector(Au(r)))&&!m._p&&(_.instance=m,_.state.loading=5),Fr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Fr.set(r,o),m||AC(f,r,o,_.state))),i&&u===null)throw Error(a(528,""));return _}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Zo(o),o=wn(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function Jo(r){return'href="'+nr(r)+'"'}function Au(r){return'link[rel="stylesheet"]['+r+"]"}function AT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function AC(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),On(i,"link",o),zt(i),r.head.appendChild(i))}function Zo(r){return'[src="'+nr(r)+'"]'}function wu(r){return"script[async]"+r}function wT(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+nr(o.href)+'"]');if(u)return i.instance=u,zt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),zt(u),On(u,"style",f),Hh(u,o.precedence,r),i.instance=u;case"stylesheet":f=Jo(o.href);var m=r.querySelector(Au(f));if(m)return i.state.loading|=4,i.instance=m,zt(m),m;u=AT(o),(f=Fr.get(f))&&Vp(u,f),m=(r.ownerDocument||r).createElement("link"),zt(m);var _=m;return _._p=new Promise(function(R,k){_.onload=R,_.onerror=k}),On(m,"link",u),i.state.loading|=4,Hh(m,o.precedence,r),i.instance=m;case"script":return m=Zo(o.src),(f=r.querySelector(wu(m)))?(i.instance=f,zt(f),f):(u=o,(f=Fr.get(m))&&(u=E({},o),Pp(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),zt(f),On(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Hh(u,o.precedence,r));return i.instance}function Hh(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,_=0;_<u.length;_++){var R=u[_];if(R.dataset.precedence===i)m=R;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Vp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Pp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var qh=null;function RT(r,i,o){if(qh===null){var u=new Map,f=qh=new Map;f.set(o,u)}else f=qh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[Nt]||m[ve]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=r+_;var R=u.get(_);R?R.push(m):u.set(_,[m])}}return u}function CT(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function wC(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function IT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function RC(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Jo(u.href),m=i.querySelector(Au(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Gh.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=m,zt(m);return}m=i.ownerDocument||i,u=AT(u),(f=Fr.get(f))&&Vp(u,f),m=m.createElement("link"),zt(m);var _=m;_._p=new Promise(function(R,k){_.onload=R,_.onerror=k}),On(m,"link",u),o.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=Gh.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var Lp=0;function CC(r,i){return r.stylesheets&&r.count===0&&Kh(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Kh(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4+i);0<r.imgBytes&&Lp===0&&(Lp=62500*oC());var f=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Kh(r,r.stylesheets),r.unsuspend)){var m=r.unsuspend;r.unsuspend=null,m()}},(r.imgBytes>Lp?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Gh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var $h=null;function Kh(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,$h=new Map,i.forEach(IC,r),$h=null,Gh.call(r))}function IC(r,i){if(!(i.state.loading&4)){var o=$h.get(r);if(o)var u=o.get(null);else{o=new Map,$h.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=i.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,f),o.set(_,f),this.count++,u=Gh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var Ru={$$typeof:F,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function DC(r,i,o,u,f,m,_,R,k){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yn(0),this.hiddenUpdates=Yn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function DT(r,i,o,u,f,m,_,R,k,Z,se,he){return r=new DC(r,i,o,_,k,Z,se,he,R),i=1,m===!0&&(i|=24),m=vr(3,null,null,i),r.current=m,m.stateNode=r,i=pm(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},_m(m),r}function NT(r){return r?(r=No,r):No}function xT(r,i,o,u,f,m){f=NT(f),u.context===null?u.context=f:u.pendingContext=f,u=Va(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Pa(r,u,i),o!==null&&(lr(o,r,i),iu(o,r,i))}function OT(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function kp(r,i){OT(r,i),(r=r.alternate)&&OT(r,i)}function MT(r){if(r.tag===13||r.tag===31){var i=Ps(r,67108864);i!==null&&lr(i,r,67108864),kp(r,67108864)}}function VT(r){if(r.tag===13||r.tag===31){var i=Sr();i=ee(i);var o=Ps(r,i);o!==null&&lr(o,r,i),kp(r,i)}}var Yh=!0;function NC(r,i,o,u){var f=W.T;W.T=null;var m=me.p;try{me.p=2,Up(r,i,o,u)}finally{me.p=m,W.T=f}}function xC(r,i,o,u){var f=W.T;W.T=null;var m=me.p;try{me.p=8,Up(r,i,o,u)}finally{me.p=m,W.T=f}}function Up(r,i,o,u){if(Yh){var f=jp(u);if(f===null)Ap(r,i,u,Qh,o),LT(r,u);else if(MC(f,r,i,o,u))u.stopPropagation();else if(LT(r,u),i&4&&-1<OC.indexOf(r)){for(;f!==null;){var m=nt(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=xr(m.pendingLanes);if(_!==0){var R=m;for(R.pendingLanes|=2,R.entangledLanes|=2;_;){var k=1<<31-$t(_);R.entanglements[1]|=k,_&=~k}Ri(m),(At&6)===0&&(xh=Rt()+500,Eu(0))}}break;case 31:case 13:R=Ps(m,2),R!==null&&lr(R,m,2),Mh(),kp(m,2)}if(m=jp(u),m===null&&Ap(r,i,u,Qh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Ap(r,i,u,null,o)}}function jp(r){return r=Or(r),zp(r)}var Qh=null;function zp(r){if(Qh=null,r=Ut(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Qh=r,null}function PT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_n()){case Zn:return 2;case ki:return 8;case An:case hr:return 32;case Ts:return 268435456;default:return 32}default:return 32}}var Bp=!1,$a=null,Ka=null,Ya=null,Cu=new Map,Iu=new Map,Qa=[],OC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LT(r,i){switch(r){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":Cu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(i.pointerId)}}function Du(r,i,o,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=nt(i),i!==null&&MT(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function MC(r,i,o,u,f){switch(i){case"focusin":return $a=Du($a,r,i,o,u,f),!0;case"dragenter":return Ka=Du(Ka,r,i,o,u,f),!0;case"mouseover":return Ya=Du(Ya,r,i,o,u,f),!0;case"pointerover":var m=f.pointerId;return Cu.set(m,Du(Cu.get(m)||null,r,i,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Iu.set(m,Du(Iu.get(m)||null,r,i,o,u,f)),!0}return!1}function kT(r){var i=Ut(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,we(r.priority,function(){VT(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,we(r.priority,function(){VT(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Xh(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=jp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Fl=u,o.target.dispatchEvent(u),Fl=null}else return i=nt(o),i!==null&&MT(i),r.blockedOn=o,!1;i.shift()}return!0}function UT(r,i,o){Xh(r)&&o.delete(i)}function VC(){Bp=!1,$a!==null&&Xh($a)&&($a=null),Ka!==null&&Xh(Ka)&&(Ka=null),Ya!==null&&Xh(Ya)&&(Ya=null),Cu.forEach(UT),Iu.forEach(UT)}function Wh(r,i){r.blockedOn===i&&(r.blockedOn=null,Bp||(Bp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,VC)))}var Jh=null;function jT(r){Jh!==r&&(Jh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Jh===r&&(Jh=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(zp(u||o)===null)continue;break}var m=nt(o);m!==null&&(r.splice(i,3),i-=3,jm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function el(r){function i(k){return Wh(k,r)}$a!==null&&Wh($a,r),Ka!==null&&Wh(Ka,r),Ya!==null&&Wh(Ya,r),Cu.forEach(i),Iu.forEach(i);for(var o=0;o<Qa.length;o++){var u=Qa[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Qa.length&&(o=Qa[0],o.blockedOn===null);)kT(o),o.blockedOn===null&&Qa.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],_=f[be]||null;if(typeof m=="function")_||jT(o);else if(_){var R=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[be]||null)R=_.formAction;else if(zp(f)!==null)continue}else R=_.action;typeof R=="function"?o[u+1]=R:(o.splice(u,3),u-=3),jT(o)}}}function zT(){function r(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Fp(r){this._internalRoot=r}Zh.prototype.render=Fp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=Sr();xT(o,u,r,i,null,null)},Zh.prototype.unmount=Fp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;xT(r.current,2,null,r,null,null),Mh(),i[Ce]=null}};function Zh(r){this._internalRoot=r}Zh.prototype.unstable_scheduleHydration=function(r){if(r){var i=ye();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Qa.length&&i!==0&&i<Qa[o].priority;o++);Qa.splice(o,0,r),o===0&&kT(r)}};var BT=e.version;if(BT!=="19.2.4")throw Error(a(527,BT,"19.2.4"));me.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=g(i),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var PC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{fr=ef.inject(PC),Lt=ef}catch{}}return xu.createRoot=function(r,i){if(!s(r))throw Error(a(299));var o=!1,u="",f=Y_,m=Q_,_=X_;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=DT(r,1,!1,null,null,o,u,null,f,m,_,zT),r[Ce]=i.current,Sp(r),new Fp(i)},xu.hydrateRoot=function(r,i,o){if(!s(r))throw Error(a(299));var u=!1,f="",m=Y_,_=Q_,R=X_,k=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),i=DT(r,1,!0,i,o??null,u,f,k,m,_,R,zT),i.context=NT(null),o=i.current,u=Sr(),u=ee(u),f=Va(u),f.callback=null,Pa(o,f,u),o=u,i.current.lanes=o,di(i,o),Ri(i),r[Ce]=i.current,Sp(r),new Zh(i)},xu.version="19.2.4",xu}var WT;function YC(){if(WT)return $p.exports;WT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$p.exports=KC(),$p.exports}var QC=YC();const XC=AS(QC);var Xp={exports:{}},Wp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT;function WC(){if(JT)return Wp;JT=1;var n=md();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,a=n.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return Wp.useSyncExternalStoreWithSelector=function(p,g,v,E,S){var C=s(null);if(C.current===null){var U={hasValue:!1,value:null};C.current=U}else U=C.current;C=c(function(){function V(re){if(!H){if(H=!0,q=re,re=E(re),S!==void 0&&U.hasValue){var Y=U.value;if(S(Y,re))return F=Y}return F=re}if(Y=F,t(q,re))return Y;var b=E(re);return S!==void 0&&S(Y,b)?(q=re,Y):(q=re,F=b)}var H=!1,q,F,Q=v===void 0?null:v;return[function(){return V(g())},Q===null?void 0:function(){return V(Q())}]},[g,v,E,S]);var B=a(p,C[0],C[1]);return l(function(){U.hasValue=!0,U.value=B},[B]),d(B),B},Wp}var ZT;function JC(){return ZT||(ZT=1,Xp.exports=WC()),Xp.exports}var ZC=JC();function eI(n){n()}function tI(){let n=null,e=null;return{clear(){n=null,e=null},notify(){eI(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let a=n;for(;a;)t.push(a),a=a.next;return t},subscribe(t){let a=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!a||n===null||(a=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var e0={notify(){},get:()=>[]};function nI(n,e){let t,a=e0,s=0,l=!1;function c(B){v();const V=a.subscribe(B);let H=!1;return()=>{H||(H=!0,V(),E())}}function d(){a.notify()}function p(){U.onStateChange&&U.onStateChange()}function g(){return l}function v(){s++,t||(t=n.subscribe(p),a=tI())}function E(){s--,t&&s===0&&(t(),t=void 0,a.clear(),a=e0)}function S(){l||(l=!0,v())}function C(){l&&(l=!1,E())}const U={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:p,isSubscribed:g,trySubscribe:S,tryUnsubscribe:C,getListeners:()=>a};return U}var rI=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iI=rI(),aI=()=>typeof navigator<"u"&&navigator.product==="ReactNative",sI=aI(),oI=()=>iI||sI?M.useLayoutEffect:M.useEffect,lI=oI(),Jp=Symbol.for("react-redux-context"),Zp=typeof globalThis<"u"?globalThis:{};function uI(){if(!M.createContext)return{};const n=Zp[Jp]??(Zp[Jp]=new Map);let e=n.get(M.createContext);return e||(e=M.createContext(null),n.set(M.createContext,e)),e}var hs=uI();function cI(n){const{children:e,context:t,serverState:a,store:s}=n,l=M.useMemo(()=>{const p=nI(s);return{store:s,subscription:p,getServerState:a?()=>a:void 0}},[s,a]),c=M.useMemo(()=>s.getState(),[s]);lI(()=>{const{subscription:p}=l;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==s.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[l,c]);const d=t||hs;return M.createElement(d.Provider,{value:l},e)}var hI=cI;function ly(n=hs){return function(){return M.useContext(n)}}var CS=ly();function IS(n=hs){const e=n===hs?CS:ly(n),t=()=>{const{store:a}=e();return a};return Object.assign(t,{withTypes:()=>t}),t}var fI=IS();function dI(n=hs){const e=n===hs?fI:IS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var mI=dI(),pI=(n,e)=>n===e;function gI(n=hs){const e=n===hs?CS:ly(n),t=(a,s={})=>{const{equalityFn:l=pI}=typeof s=="function"?{equalityFn:s}:s,c=e(),{store:d,subscription:p,getServerState:g}=c;M.useRef(!0);const v=M.useCallback({[a.name](S){return a(S)}}[a.name],[a]),E=ZC.useSyncExternalStoreWithSelector(p.addNestedSub,d.getState,g||d.getState,v,l);return M.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var yI=gI();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var DS=n=>{throw TypeError(n)},vI=(n,e,t)=>e.has(n)||DS("Cannot "+t),eg=(n,e,t)=>(vI(n,e,"read from private field"),t?t.call(n):e.get(n)),_I=(n,e,t)=>e.has(n)?DS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),t0="popstate";function EI(n={}){function e(s,l){let{pathname:c="/",search:d="",hash:p=""}=ga(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),tc("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=s.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof l=="string"?l:Vi(l))}function a(s,l){Jt(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return bI(e,t,a,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jt(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TI(){return Math.random().toString(36).substring(2,10)}function n0(n,e){return{usr:n.state,key:n.key,idx:e}}function tc(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ga(e):e,state:t,key:e&&e.key||a||TI()}}function Vi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ga(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function bI(n,e,t,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,d="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let V=v(),H=V==null?null:V-g;g=V,p&&p({action:d,location:B.location,delta:H})}function S(V,H){d="PUSH";let q=tc(B.location,V,H);t&&t(q,V),g=v()+1;let F=n0(q,g),Q=B.createHref(q);try{c.pushState(F,"",Q)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;s.location.assign(Q)}l&&p&&p({action:d,location:B.location,delta:1})}function C(V,H){d="REPLACE";let q=tc(B.location,V,H);t&&t(q,V),g=v();let F=n0(q,g),Q=B.createHref(q);c.replaceState(F,"",Q),l&&p&&p({action:d,location:B.location,delta:0})}function U(V){return NS(V)}let B={get action(){return d},get location(){return n(s,c)},listen(V){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(t0,E),p=V,()=>{s.removeEventListener(t0,E),p=null}},createHref(V){return e(s,V)},createURL:U,encodeLocation(V){let H=U(V);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:S,replace:C,go(V){return c.go(V)}};return B}function NS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),st(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:Vi(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}var Lu,r0=class{constructor(n){if(_I(this,Lu,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(eg(this,Lu).has(n))return eg(this,Lu).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){eg(this,Lu).set(n,e)}};Lu=new WeakMap;var SI=new Set(["lazy","caseSensitive","path","id","index","children"]);function AI(n){return SI.has(n)}var wI=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function RI(n){return wI.has(n)}function CI(n){return n.index===!0}function nc(n,e,t=[],a={},s=!1){return n.map((l,c)=>{let d=[...t,String(c)],p=typeof l.id=="string"?l.id:d.join("-");if(st(l.index!==!0||!l.children,"Cannot specify children on an index route"),st(s||!a[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),CI(l)){let g={...l,id:p};return a[p]=i0(g,e(g)),g}else{let g={...l,id:p,children:void 0};return a[p]=i0(g,e(g)),l.children&&(g.children=nc(l.children,e,d,a,s)),g}})}function i0(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function Ja(n,e,t="/"){return ku(n,e,t,!1)}function ku(n,e,t,a){let s=typeof e=="string"?ga(e):e,l=$r(s.pathname||"/",t);if(l==null)return null;let c=xS(n);DI(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=zI(l);d=UI(c[p],g,a)}return d}function II(n,e){let{route:t,pathname:a,params:s}=n;return{id:t.id,pathname:a,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function xS(n,e=[],t=[],a="",s=!1){let l=(c,d,p=s,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(a)&&p)return;st(v.relativePath.startsWith(a),`Absolute route path "${v.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(a.length)}let E=Di([a,v.relativePath]),S=t.concat(v);c.children&&c.children.length>0&&(st(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),xS(c.children,e,S,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:LI(E,c.index),routesMeta:S})};return n.forEach((c,d)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,d);else for(let g of OS(c.path))l(c,d,!0,g)}),e}function OS(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=OS(a.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),s&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function DI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:kI(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var NI=/^:[\w-]+$/,xI=3,OI=2,MI=1,VI=10,PI=-2,a0=n=>n==="*";function LI(n,e){let t=n.split("/"),a=t.length;return t.some(a0)&&(a+=PI),e&&(a+=OI),t.filter(s=>!a0(s)).reduce((s,l)=>s+(NI.test(l)?xI:l===""?MI:VI),a)}function kI(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function UI(n,e,t=!1){let{routesMeta:a}=n,s={},l="/",c=[];for(let d=0;d<a.length;++d){let p=a[d],g=d===a.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=Uf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),S=p.route;if(!E&&g&&t&&!a[a.length-1].route.index&&(E=Uf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:Di([l,E.pathname]),pathnameBase:HI(Di([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Di([l,E.pathnameBase]))}return c}function Uf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=jI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((g,{paramName:v,isOptional:E},S)=>{if(v==="*"){let U=d[S]||"";c=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const C=d[S];return E&&!C?g[v]=void 0:g[v]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function jI(n,e=!1,t=!0){Jt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(a.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function zI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function $r(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function BI({basename:n,pathname:e}){return e==="/"?n:Di([n,e])}var MS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uy=n=>MS.test(n);function FI(n,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof n=="string"?ga(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=s0(t.substring(1),"/"):l=s0(t,e)):l=e,{pathname:l,search:qI(a),hash:GI(s)}}function s0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function tg(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function pd(n){let e=VS(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function gd(n,e,t,a=!1){let s;typeof n=="string"?s=ga(n):(s={...n},st(!s.pathname||!s.pathname.includes("?"),tg("?","pathname","search",s)),st(!s.pathname||!s.pathname.includes("#"),tg("#","pathname","hash",s)),st(!s.search||!s.search.includes("#"),tg("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!a&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;s.pathname=S.join("/")}d=E>=0?e[E]:"/"}let p=FI(s,d),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Di=n=>n.join("/").replace(/\/\/+/g,"/"),HI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),qI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,GI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,pc=class{constructor(n,e,t,a=!1){this.status=n,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function rc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function gc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var PS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function LS(n,e){let t=n;if(typeof t!="string"||!MS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,s=!1;if(PS)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=$r(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:s=!0}catch{Jt(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:t}}var rs=Symbol("Uninstrumented");function $I(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let d of c)l[d]&&t[d].push(l[d])}}));let a={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=ll(t.lazy,e.lazy,()=>{});s&&(a.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],d=t[`lazy.${l}`];if(typeof c=="function"&&d.length>0){let p=ll(d,c,()=>{});p&&(a.lazy=Object.assign(a.lazy||{},{[l]:p}))}})}return["loader","action"].forEach(s=>{let l=e[s];if(typeof l=="function"&&t[s].length>0){let c=l[rs]??l,d=ll(t[s],c,(...p)=>o0(p[0]));d&&(s==="loader"&&c.hydrate===!0&&(d.hydrate=!0),d[rs]=c,a[s]=d)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(a.middleware=e.middleware.map(s=>{let l=s[rs]??s,c=ll(t.middleware,l,(...d)=>o0(d[0]));return c?(c[rs]=l,c):s})),a}function KI(n,e){let t={navigate:[],fetch:[]};if(e.forEach(a=>a({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&t[c].push(s[c])}})),t.navigate.length>0){let a=n.navigate[rs]??n.navigate,s=ll(t.navigate,a,(...l)=>{let[c,d]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?Vi(c):".",...l0(n,d??{})}});s&&(s[rs]=a,n.navigate=s)}if(t.fetch.length>0){let a=n.fetch[rs]??n.fetch,s=ll(t.fetch,a,(...l)=>{let[c,,d,p]=l;return{href:d??".",fetcherKey:c,...l0(n,p??{})}});s&&(s[rs]=a,n.fetch=s)}return n}function ll(n,e,t){return n.length===0?null:async(...a)=>{let s=await kS(n,t(...a),()=>e(...a),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function kS(n,e,t,a){let s=n[a],l;if(s){let c,d=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=kS(n,e,t,a-1),l=await c,st(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(d,e)}catch(p){console.error("An instrumentation function threw an error:",p)}c||await d(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function o0(n){let{request:e,context:t,params:a,unstable_pattern:s}=n;return{request:YI(e),params:{...a},unstable_pattern:s,context:QI(t)}}function l0(n,e){return{currentUrl:Vi(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function YI(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function QI(n){if(WI(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var XI=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function WI(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===XI}var US=["POST","PUT","PATCH","DELETE"],JI=new Set(US),ZI=["GET",...US],eD=new Set(ZI),jS=new Set([301,302,303,307,308]),tD=new Set([307,308]),ng={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},nD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ou={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},rD=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),zS="remix-router-transitions",BS=Symbol("ResetLoaderData");function iD(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";st(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=n.hydrationRouteProperties||[],s=n.mapRouteProperties||rD,l=s;if(n.unstable_instrumentations){let L=n.unstable_instrumentations;l=G=>({...s(G),...$I(L.map(ee=>ee.route).filter(Boolean),G)})}let c={},d=nc(n.routes,l,void 0,c),p,g=n.basename||"/";g.startsWith("/")||(g=`/${g}`);let v=n.dataStrategy||uD,E={...n.future},S=null,C=new Set,U=null,B=null,V=null,H=n.hydrationData!=null,q=Ja(d,n.history.location,g),F=!1,Q=null,re;if(q==null&&!n.patchRoutesOnNavigation){let L=Hr(404,{pathname:n.history.location.pathname}),{matches:G,route:ee}=tf(d);re=!0,q=G,Q={[ee.id]:L}}else if(q&&!n.hydrationData&&Ui(q,d,n.history.location.pathname).active&&(q=null),q)if(q.some(L=>L.route.lazy))re=!1;else if(!q.some(L=>cy(L.route)))re=!0;else{let L=n.hydrationData?n.hydrationData.loaderData:null,G=n.hydrationData?n.hydrationData.errors:null;if(G){let ee=q.findIndex(de=>G[de.route.id]!==void 0);re=q.slice(0,ee+1).every(de=>!wg(de.route,L,G))}else re=q.every(ee=>!wg(ee.route,L,G))}else{re=!1,q=[];let L=Ui(null,d,n.history.location.pathname);L.active&&L.matches&&(F=!0,q=L.matches)}let Y,b={historyAction:n.history.action,location:n.history.location,matches:q,initialized:re,navigation:ng,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||Q,fetchers:new Map,blockers:new Map},A="POP",I=null,N=!1,x,P=!1,O=new Map,Ue=null,Ze=!1,W=!1,me=new Set,ge=new Map,je=0,Me=-1,j=new Map,K=new Set,oe=new Map,ce=new Map,pe=new Set,Ee=new Map,Pe,Ke=null;function lt(){if(S=n.history.listen(({action:L,location:G,delta:ee})=>{if(Pe){Pe(),Pe=void 0;return}Jt(Ee.size===0||ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let de=fi({currentLocation:b.location,nextLocation:G,historyAction:L});if(de&&ee!=null){let ye=new Promise(we=>{Pe=we});n.history.go(ee*-1),Kn(de,{state:"blocked",location:G,proceed(){Kn(de,{state:"proceeding",proceed:void 0,reset:void 0,location:G}),ye.then(()=>n.history.go(ee))},reset(){let we=new Map(b.blockers);we.set(de,Ou),_t({blockers:we})}}),I==null||I.resolve(),I=null;return}return Ae(L,G)}),t){CD(e,O);let L=()=>ID(e,O);e.addEventListener("pagehide",L),Ue=()=>e.removeEventListener("pagehide",L)}return b.initialized||Ae("POP",b.location,{initialHydration:!0}),Y}function vn(){S&&S(),Ue&&Ue(),C.clear(),x&&x.abort(),b.fetchers.forEach((L,G)=>va(G)),b.blockers.forEach((L,G)=>Ss(G))}function kn(L){return C.add(L),()=>C.delete(L)}function _t(L,G={}){L.matches&&(L.matches=L.matches.map(ye=>{let we=c[ye.route.id],Ie=ye.route;return Ie.element!==we.element||Ie.errorElement!==we.errorElement||Ie.hydrateFallbackElement!==we.hydrateFallbackElement?{...ye,route:we}:ye})),b={...b,...L};let ee=[],de=[];b.fetchers.forEach((ye,we)=>{ye.state==="idle"&&(pe.has(we)?ee.push(we):de.push(we))}),pe.forEach(ye=>{!b.fetchers.has(ye)&&!ge.has(ye)&&ee.push(ye)}),[...C].forEach(ye=>ye(b,{deletedFetchers:ee,newErrors:L.errors??null,viewTransitionOpts:G.viewTransitionOpts,flushSync:G.flushSync===!0})),ee.forEach(ye=>va(ye)),de.forEach(ye=>b.fetchers.delete(ye))}function ae(L,G,{flushSync:ee}={}){var He,xe;let de=b.actionData!=null&&b.navigation.formMethod!=null&&Fn(b.navigation.formMethod)&&b.navigation.state==="loading"&&((He=L.state)==null?void 0:He._isRedirect)!==!0,ye;G.actionData?Object.keys(G.actionData).length>0?ye=G.actionData:ye=null:de?ye=b.actionData:ye=null;let we=G.loaderData?v0(b.loaderData,G.loaderData,G.matches||[],G.errors):b.loaderData,Ie=b.blockers;Ie.size>0&&(Ie=new Map(Ie),Ie.forEach((Ye,at)=>Ie.set(at,Ou)));let ve=Ze?!1:yo(L,G.matches||b.matches),be=N===!0||b.navigation.formMethod!=null&&Fn(b.navigation.formMethod)&&((xe=L.state)==null?void 0:xe._isRedirect)!==!0;p&&(d=p,p=void 0),Ze||A==="POP"||(A==="PUSH"?n.history.push(L,L.state):A==="REPLACE"&&n.history.replace(L,L.state));let Ce;if(A==="POP"){let Ye=O.get(b.location.pathname);Ye&&Ye.has(L.pathname)?Ce={currentLocation:b.location,nextLocation:L}:O.has(L.pathname)&&(Ce={currentLocation:L,nextLocation:b.location})}else if(P){let Ye=O.get(b.location.pathname);Ye?Ye.add(L.pathname):(Ye=new Set([L.pathname]),O.set(b.location.pathname,Ye)),Ce={currentLocation:b.location,nextLocation:L}}_t({...G,actionData:ye,loaderData:we,historyAction:A,location:L,initialized:!0,navigation:ng,revalidation:"idle",restoreScrollPosition:ve,preventScrollReset:be,blockers:Ie},{viewTransitionOpts:Ce,flushSync:ee===!0}),A="POP",N=!1,P=!1,Ze=!1,W=!1,I==null||I.resolve(),I=null,Ke==null||Ke.resolve(),Ke=null}async function _e(L,G){if(I==null||I.resolve(),I=null,typeof L=="number"){I||(I=b0());let at=I.promise;return n.history.go(L),at}let ee=Ag(b.location,b.matches,g,L,G==null?void 0:G.fromRouteId,G==null?void 0:G.relative),{path:de,submission:ye,error:we}=u0(!1,ee,G),Ie=b.location,ve=tc(b.location,de,G&&G.state);ve={...ve,...n.history.encodeLocation(ve)};let be=G&&G.replace!=null?G.replace:void 0,Ce="PUSH";be===!0?Ce="REPLACE":be===!1||ye!=null&&Fn(ye.formMethod)&&ye.formAction===b.location.pathname+b.location.search&&(Ce="REPLACE");let He=G&&"preventScrollReset"in G?G.preventScrollReset===!0:void 0,xe=(G&&G.flushSync)===!0,Ye=fi({currentLocation:Ie,nextLocation:ve,historyAction:Ce});if(Ye){Kn(Ye,{state:"blocked",location:ve,proceed(){Kn(Ye,{state:"proceeding",proceed:void 0,reset:void 0,location:ve}),_e(L,G)},reset(){let at=new Map(b.blockers);at.set(Ye,Ou),_t({blockers:at})}});return}await Ae(Ce,ve,{submission:ye,pendingError:we,preventScrollReset:He,replace:G&&G.replace,enableViewTransition:G&&G.viewTransition,flushSync:xe,callSiteDefaultShouldRevalidate:G&&G.unstable_defaultShouldRevalidate})}function Oe(){Ke||(Ke=b0()),ki(),_t({revalidation:"loading"});let L=Ke.promise;return b.navigation.state==="submitting"?L:b.navigation.state==="idle"?(Ae(b.historyAction,b.location,{startUninterruptedRevalidation:!0}),L):(Ae(A||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation,enableViewTransition:P===!0}),L)}async function Ae(L,G,ee){x&&x.abort(),x=null,A=L,Ze=(ee&&ee.startUninterruptedRevalidation)===!0,mr(b.location,b.matches),N=(ee&&ee.preventScrollReset)===!0,P=(ee&&ee.enableViewTransition)===!0;let de=p||d,ye=ee&&ee.overrideNavigation,we=ee!=null&&ee.initialHydration&&b.matches&&b.matches.length>0&&!F?b.matches:Ja(de,G,g),Ie=(ee&&ee.flushSync)===!0;if(we&&b.initialized&&!W&&yD(b.location,G)&&!(ee&&ee.submission&&Fn(ee.submission.formMethod))){ae(G,{matches:we},{flushSync:Ie});return}let ve=Ui(we,de,G.pathname);if(ve.active&&ve.matches&&(we=ve.matches),!we){let{error:Ft,notFoundMatches:Ut,route:nt}=Kt(G.pathname);ae(G,{matches:Ut,loaderData:{},errors:{[nt.id]:Ft}},{flushSync:Ie});return}x=new AbortController;let be=nl(n.history,G,x.signal,ee&&ee.submission),Ce=n.getContext?await n.getContext():new r0,He;if(ee&&ee.pendingError)He=[Za(we).route.id,{type:"error",error:ee.pendingError}];else if(ee&&ee.submission&&Fn(ee.submission.formMethod)){let Ft=await ze(be,G,ee.submission,we,Ce,ve.active,ee&&ee.initialHydration===!0,{replace:ee.replace,flushSync:Ie});if(Ft.shortCircuited)return;if(Ft.pendingActionResult){let[Ut,nt]=Ft.pendingActionResult;if(Ar(nt)&&rc(nt.error)&&nt.error.status===404){x=null,ae(G,{matches:Ft.matches,loaderData:{},errors:{[Ut]:nt.error}});return}}we=Ft.matches||we,He=Ft.pendingActionResult,ye=rg(G,ee.submission),Ie=!1,ve.active=!1,be=nl(n.history,be.url,be.signal)}let{shortCircuited:xe,matches:Ye,loaderData:at,errors:Nt}=await Fe(be,G,we,Ce,ve.active,ye,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,Ie,He,ee&&ee.callSiteDefaultShouldRevalidate);xe||(x=null,ae(G,{matches:Ye||we,..._0(He),loaderData:at,errors:Nt}))}async function ze(L,G,ee,de,ye,we,Ie,ve={}){ki();let be=wD(G,ee);if(_t({navigation:be},{flushSync:ve.flushSync===!0}),we){let xe=await Yn(de,G.pathname,L.signal);if(xe.type==="aborted")return{shortCircuited:!0};if(xe.type==="error"){if(xe.partialMatches.length===0){let{matches:at,route:Nt}=tf(d);return{matches:at,pendingActionResult:[Nt.id,{type:"error",error:xe.error}]}}let Ye=Za(xe.partialMatches).route.id;return{matches:xe.partialMatches,pendingActionResult:[Ye,{type:"error",error:xe.error}]}}else if(xe.matches)de=xe.matches;else{let{notFoundMatches:Ye,error:at,route:Nt}=Kt(G.pathname);return{matches:Ye,pendingActionResult:[Nt.id,{type:"error",error:at}]}}}let Ce,He=mf(de,G);if(!He.route.action&&!He.route.lazy)Ce={type:"error",error:Hr(405,{method:L.method,pathname:G.pathname,routeId:He.route.id})};else{let xe=cl(l,c,L,de,He,Ie?[]:a,ye),Ye=await _n(L,xe,ye,null);if(Ce=Ye[He.route.id],!Ce){for(let at of de)if(Ye[at.route.id]){Ce=Ye[at.route.id];break}}if(L.signal.aborted)return{shortCircuited:!0}}if(Qs(Ce)){let xe;return ve&&ve.replace!=null?xe=ve.replace:xe=p0(Ce.response.headers.get("Location"),new URL(L.url),g,n.history)===b.location.pathname+b.location.search,await Rt(L,Ce,!0,{submission:ee,replace:xe}),{shortCircuited:!0}}if(Ar(Ce)){let xe=Za(de,He.route.id);return(ve&&ve.replace)!==!0&&(A="PUSH"),{matches:de,pendingActionResult:[xe.route.id,Ce,He.route.id]}}return{matches:de,pendingActionResult:[He.route.id,Ce]}}async function Fe(L,G,ee,de,ye,we,Ie,ve,be,Ce,He,xe,Ye){let at=we||rg(G,Ie),Nt=Ie||ve||T0(at),Ft=!Ze&&!Ce;if(ye){if(Ft){let Xt=Qe(xe);_t({navigation:at,...Xt!==void 0?{actionData:Xt}:{}},{flushSync:He})}let ot=await Yn(ee,G.pathname,L.signal);if(ot.type==="aborted")return{shortCircuited:!0};if(ot.type==="error"){if(ot.partialMatches.length===0){let{matches:cn,route:xt}=tf(d);return{matches:cn,loaderData:{},errors:{[xt.id]:ot.error}}}let Xt=Za(ot.partialMatches).route.id;return{matches:ot.partialMatches,loaderData:{},errors:{[Xt]:ot.error}}}else if(ot.matches)ee=ot.matches;else{let{error:Xt,notFoundMatches:cn,route:xt}=Kt(G.pathname);return{matches:cn,loaderData:{},errors:{[xt.id]:Xt}}}}let Ut=p||d,{dsMatches:nt,revalidatingFetchers:jt}=c0(L,de,l,c,n.history,b,ee,Nt,G,Ce?[]:a,Ce===!0,W,me,pe,oe,K,Ut,g,n.patchRoutesOnNavigation!=null,xe,Ye);if(Me=++je,!n.dataStrategy&&!nt.some(ot=>ot.shouldLoad)&&!nt.some(ot=>ot.route.middleware&&ot.route.middleware.length>0)&&jt.length===0){let ot=$t();return ae(G,{matches:ee,loaderData:{},errors:xe&&Ar(xe[1])?{[xe[0]]:xe[1].error}:null,..._0(xe),...ot?{fetchers:new Map(b.fetchers)}:{}},{flushSync:He}),{shortCircuited:!0}}if(Ft){let ot={};if(!ye){ot.navigation=at;let Xt=Qe(xe);Xt!==void 0&&(ot.actionData=Xt)}jt.length>0&&(ot.fetchers=Ge(jt)),_t(ot,{flushSync:He})}jt.forEach(ot=>{Lt(ot.key),ot.controller&&ge.set(ot.key,ot.controller)});let wn=()=>jt.forEach(ot=>Lt(ot.key));x&&x.signal.addEventListener("abort",wn);let{loaderResults:zt,fetcherResults:er}=await Zn(nt,jt,L,de);if(L.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",wn),jt.forEach(ot=>ge.delete(ot.key));let Un=nf(zt);if(Un)return await Rt(L,Un.result,!0,{replace:be}),{shortCircuited:!0};if(Un=nf(er),Un)return K.add(Un.key),await Rt(L,Un.result,!0,{replace:be}),{shortCircuited:!0};let{loaderData:tr,errors:jn}=y0(b,ee,zt,xe,jt,er);Ce&&b.errors&&(jn={...b.errors,...jn});let pr=$t(),mi=bs(Me),pi=pr||mi||jt.length>0;return{matches:ee,loaderData:tr,errors:jn,...pi?{fetchers:new Map(b.fetchers)}:{}}}function Qe(L){if(L&&!Ar(L[1]))return{[L[0]]:L[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function Ge(L){return L.forEach(G=>{let ee=b.fetchers.get(G.key),de=Mu(void 0,ee?ee.data:void 0);b.fetchers.set(G.key,de)}),new Map(b.fetchers)}async function Ve(L,G,ee,de){Lt(L);let ye=(de&&de.flushSync)===!0,we=p||d,Ie=Ag(b.location,b.matches,g,ee,G,de==null?void 0:de.relative),ve=Ja(we,Ie,g),be=Ui(ve,we,Ie);if(be.active&&be.matches&&(ve=be.matches),!ve){hr(L,G,Hr(404,{pathname:Ie}),{flushSync:ye});return}let{path:Ce,submission:He,error:xe}=u0(!0,Ie,de);if(xe){hr(L,G,xe,{flushSync:ye});return}let Ye=n.getContext?await n.getContext():new r0,at=(de&&de.preventScrollReset)===!0;if(He&&Fn(He.formMethod)){await Dt(L,G,Ce,ve,Ye,be.active,ye,at,He,de&&de.unstable_defaultShouldRevalidate);return}oe.set(L,{routeId:G,path:Ce}),await rn(L,G,Ce,ve,Ye,be.active,ye,at,He)}async function Dt(L,G,ee,de,ye,we,Ie,ve,be,Ce){ki(),oe.delete(L);let He=b.fetchers.get(L);An(L,RD(be,He),{flushSync:Ie});let xe=new AbortController,Ye=nl(n.history,ee,xe.signal,be);if(we){let rt=await Yn(de,new URL(Ye.url).pathname,Ye.signal,L);if(rt.type==="aborted")return;if(rt.type==="error"){hr(L,G,rt.error,{flushSync:Ie});return}else if(rt.matches)de=rt.matches;else{hr(L,G,Hr(404,{pathname:ee}),{flushSync:Ie});return}}let at=mf(de,ee);if(!at.route.action&&!at.route.lazy){let rt=Hr(405,{method:be.formMethod,pathname:ee,routeId:G});hr(L,G,rt,{flushSync:Ie});return}ge.set(L,xe);let Nt=je,Ft=cl(l,c,Ye,de,at,a,ye),Ut=await _n(Ye,Ft,ye,L),nt=Ut[at.route.id];if(!nt){for(let rt of Ft)if(Ut[rt.route.id]){nt=Ut[rt.route.id];break}}if(Ye.signal.aborted){ge.get(L)===xe&&ge.delete(L);return}if(pe.has(L)){if(Qs(nt)||Ar(nt)){An(L,ia(void 0));return}}else{if(Qs(nt))if(ge.delete(L),Me>Nt){An(L,ia(void 0));return}else return K.add(L),An(L,Mu(be)),Rt(Ye,nt,!1,{fetcherSubmission:be,preventScrollReset:ve});if(Ar(nt)){hr(L,G,nt.error);return}}let jt=b.navigation.location||b.location,wn=nl(n.history,jt,xe.signal),zt=p||d,er=b.navigation.state!=="idle"?Ja(zt,b.navigation.location,g):b.matches;st(er,"Didn't find any matches after fetcher action");let Un=++je;j.set(L,Un);let tr=Mu(be,nt.data);b.fetchers.set(L,tr);let{dsMatches:jn,revalidatingFetchers:pr}=c0(wn,ye,l,c,n.history,b,er,be,jt,a,!1,W,me,pe,oe,K,zt,g,n.patchRoutesOnNavigation!=null,[at.route.id,nt],Ce);pr.filter(rt=>rt.key!==L).forEach(rt=>{let gr=rt.key,Ea=b.fetchers.get(gr),bt=Mu(void 0,Ea?Ea.data:void 0);b.fetchers.set(gr,bt),Lt(gr),rt.controller&&ge.set(gr,rt.controller)}),_t({fetchers:new Map(b.fetchers)});let mi=()=>pr.forEach(rt=>Lt(rt.key));xe.signal.addEventListener("abort",mi);let{loaderResults:pi,fetcherResults:ot}=await Zn(jn,pr,wn,ye);if(xe.signal.aborted)return;if(xe.signal.removeEventListener("abort",mi),j.delete(L),ge.delete(L),pr.forEach(rt=>ge.delete(rt.key)),b.fetchers.has(L)){let rt=ia(nt.data);b.fetchers.set(L,rt)}let Xt=nf(pi);if(Xt)return Rt(wn,Xt.result,!1,{preventScrollReset:ve});if(Xt=nf(ot),Xt)return K.add(Xt.key),Rt(wn,Xt.result,!1,{preventScrollReset:ve});let{loaderData:cn,errors:xt}=y0(b,er,pi,void 0,pr,ot);bs(Un),b.navigation.state==="loading"&&Un>Me?(st(A,"Expected pending action"),x&&x.abort(),ae(b.navigation.location,{matches:er,loaderData:cn,errors:xt,fetchers:new Map(b.fetchers)})):(_t({errors:xt,loaderData:v0(b.loaderData,cn,er,xt),fetchers:new Map(b.fetchers)}),W=!1)}async function rn(L,G,ee,de,ye,we,Ie,ve,be){let Ce=b.fetchers.get(L);An(L,Mu(be,Ce?Ce.data:void 0),{flushSync:Ie});let He=new AbortController,xe=nl(n.history,ee,He.signal);if(we){let nt=await Yn(de,new URL(xe.url).pathname,xe.signal,L);if(nt.type==="aborted")return;if(nt.type==="error"){hr(L,G,nt.error,{flushSync:Ie});return}else if(nt.matches)de=nt.matches;else{hr(L,G,Hr(404,{pathname:ee}),{flushSync:Ie});return}}let Ye=mf(de,ee);ge.set(L,He);let at=je,Nt=cl(l,c,xe,de,Ye,a,ye),Ut=(await _n(xe,Nt,ye,L))[Ye.route.id];if(ge.get(L)===He&&ge.delete(L),!xe.signal.aborted){if(pe.has(L)){An(L,ia(void 0));return}if(Qs(Ut))if(Me>at){An(L,ia(void 0));return}else{K.add(L),await Rt(xe,Ut,!1,{preventScrollReset:ve});return}if(Ar(Ut)){hr(L,G,Ut.error);return}An(L,ia(Ut.data))}}async function Rt(L,G,ee,{submission:de,fetcherSubmission:ye,preventScrollReset:we,replace:Ie}={}){ee||(I==null||I.resolve(),I=null),G.response.headers.has("X-Remix-Revalidate")&&(W=!0);let ve=G.response.headers.get("Location");st(ve,"Expected a Location header on the redirect Response"),ve=p0(ve,new URL(L.url),g,n.history);let be=tc(b.location,ve,{_isRedirect:!0});if(t){let Nt=!1;if(G.response.headers.has("X-Remix-Reload-Document"))Nt=!0;else if(uy(ve)){const Ft=NS(ve,!0);Nt=Ft.origin!==e.location.origin||$r(Ft.pathname,g)==null}if(Nt){Ie?e.location.replace(ve):e.location.assign(ve);return}}x=null;let Ce=Ie===!0||G.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:He,formAction:xe,formEncType:Ye}=b.navigation;!de&&!ye&&He&&xe&&Ye&&(de=T0(b.navigation));let at=de||ye;if(tD.has(G.response.status)&&at&&Fn(at.formMethod))await Ae(Ce,be,{submission:{...at,formAction:ve},preventScrollReset:we||N,enableViewTransition:ee?P:void 0});else{let Nt=rg(be,de);await Ae(Ce,be,{overrideNavigation:Nt,fetcherSubmission:ye,preventScrollReset:we||N,enableViewTransition:ee?P:void 0})}}async function _n(L,G,ee,de){var Ie;let ye,we={};try{ye=await hD(v,L,G,de,ee,!1)}catch(ve){return G.filter(be=>be.shouldLoad).forEach(be=>{we[be.route.id]={type:"error",error:ve}}),we}if(L.signal.aborted)return we;if(!Fn(L.method))for(let ve of G){if(((Ie=ye[ve.route.id])==null?void 0:Ie.type)==="error")break;!ye.hasOwnProperty(ve.route.id)&&!b.loaderData.hasOwnProperty(ve.route.id)&&(!b.errors||!b.errors.hasOwnProperty(ve.route.id))&&ve.shouldCallHandler()&&(ye[ve.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${ve.route.id}`)})}for(let[ve,be]of Object.entries(ye))if(TD(be)){let Ce=be.result;we[ve]={type:"redirect",response:pD(Ce,L,ve,G,g)}}else we[ve]=await mD(be);return we}async function Zn(L,G,ee,de){let ye=_n(ee,L,de,null),we=Promise.all(G.map(async be=>{if(be.matches&&be.match&&be.request&&be.controller){let He=(await _n(be.request,be.matches,de,be.key))[be.match.route.id];return{[be.key]:He}}else return Promise.resolve({[be.key]:{type:"error",error:Hr(404,{pathname:be.path})}})})),Ie=await ye,ve=(await we).reduce((be,Ce)=>Object.assign(be,Ce),{});return{loaderResults:Ie,fetcherResults:ve}}function ki(){W=!0,oe.forEach((L,G)=>{ge.has(G)&&me.add(G),Lt(G)})}function An(L,G,ee={}){b.fetchers.set(L,G),_t({fetchers:new Map(b.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function hr(L,G,ee,de={}){let ye=Za(b.matches,G);va(L),_t({errors:{[ye.route.id]:ee},fetchers:new Map(b.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function Ts(L){return ce.set(L,(ce.get(L)||0)+1),pe.has(L)&&pe.delete(L),b.fetchers.get(L)||nD}function go(L,G){Lt(L,G==null?void 0:G.reason),An(L,ia(null))}function va(L){let G=b.fetchers.get(L);ge.has(L)&&!(G&&G.state==="loading"&&j.has(L))&&Lt(L),oe.delete(L),j.delete(L),K.delete(L),pe.delete(L),me.delete(L),b.fetchers.delete(L)}function fr(L){let G=(ce.get(L)||0)-1;G<=0?(ce.delete(L),pe.add(L)):ce.set(L,G),_t({fetchers:new Map(b.fetchers)})}function Lt(L,G){let ee=ge.get(L);ee&&(ee.abort(G),ge.delete(L))}function $n(L){for(let G of L){let ee=Ts(G),de=ia(ee.data);b.fetchers.set(G,de)}}function $t(){let L=[],G=!1;for(let ee of K){let de=b.fetchers.get(ee);st(de,`Expected fetcher: ${ee}`),de.state==="loading"&&(K.delete(ee),L.push(ee),G=!0)}return $n(L),G}function bs(L){let G=[];for(let[ee,de]of j)if(de<L){let ye=b.fetchers.get(ee);st(ye,`Expected fetcher: ${ee}`),ye.state==="loading"&&(Lt(ee),j.delete(ee),G.push(ee))}return $n(G),G.length>0}function _a(L,G){let ee=b.blockers.get(L)||Ou;return Ee.get(L)!==G&&Ee.set(L,G),ee}function Ss(L){b.blockers.delete(L),Ee.delete(L)}function Kn(L,G){let ee=b.blockers.get(L)||Ou;st(ee.state==="unblocked"&&G.state==="blocked"||ee.state==="blocked"&&G.state==="blocked"||ee.state==="blocked"&&G.state==="proceeding"||ee.state==="blocked"&&G.state==="unblocked"||ee.state==="proceeding"&&G.state==="unblocked",`Invalid blocker state transition: ${ee.state} -> ${G.state}`);let de=new Map(b.blockers);de.set(L,G),_t({blockers:de})}function fi({currentLocation:L,nextLocation:G,historyAction:ee}){if(Ee.size===0)return;Ee.size>1&&Jt(!1,"A router only supports one blocker at a time");let de=Array.from(Ee.entries()),[ye,we]=de[de.length-1],Ie=b.blockers.get(ye);if(!(Ie&&Ie.state==="proceeding")&&we({currentLocation:L,nextLocation:G,historyAction:ee}))return ye}function Kt(L){let G=Hr(404,{pathname:L}),ee=p||d,{matches:de,route:ye}=tf(ee);return{notFoundMatches:de,route:ye,error:G}}function xr(L,G,ee){if(U=L,V=G,B=ee||null,!H&&b.navigation===ng){H=!0;let de=yo(b.location,b.matches);de!=null&&_t({restoreScrollPosition:de})}return()=>{U=null,V=null,B=null}}function dr(L,G){return B&&B(L,G.map(de=>II(de,b.loaderData)))||L.key}function mr(L,G){if(U&&V){let ee=dr(L,G);U[ee]=V()}}function yo(L,G){if(U){let ee=dr(L,G),de=U[ee];if(typeof de=="number")return de}return null}function Ui(L,G,ee){if(n.patchRoutesOnNavigation)if(L){if(Object.keys(L[0].params).length>0)return{active:!0,matches:ku(G,ee,g,!0)}}else return{active:!0,matches:ku(G,ee,g,!0)||[]};return{active:!1,matches:null}}async function Yn(L,G,ee,de){if(!n.patchRoutesOnNavigation)return{type:"success",matches:L};let ye=L;for(;;){let we=p==null,Ie=p||d,ve=c;try{await n.patchRoutesOnNavigation({signal:ee,path:G,matches:ye,fetcherKey:de,patch:(He,xe)=>{ee.aborted||h0(He,xe,Ie,ve,l,!1)}})}catch(He){return{type:"error",error:He,partialMatches:ye}}finally{we&&!ee.aborted&&(d=[...d])}if(ee.aborted)return{type:"aborted"};let be=Ja(Ie,G,g),Ce=null;if(be){if(Object.keys(be[0].params).length===0)return{type:"success",matches:be};if(Ce=ku(Ie,G,g,!0),!(Ce&&ye.length<Ce.length&&di(ye,Ce.slice(0,ye.length))))return{type:"success",matches:be}}if(Ce||(Ce=ku(Ie,G,g,!0)),!Ce||di(ye,Ce))return{type:"success",matches:null};ye=Ce}}function di(L,G){return L.length===G.length&&L.every((ee,de)=>ee.route.id===G[de].route.id)}function Ul(L){c={},p=nc(L,l,void 0,c)}function ji(L,G,ee=!1){let de=p==null;h0(L,G,p||d,c,l,ee),de&&(d=[...d],_t({}))}return Y={get basename(){return g},get future(){return E},get state(){return b},get routes(){return d},get window(){return e},initialize:lt,subscribe:kn,enableScrollRestoration:xr,navigate:_e,fetch:Ve,revalidate:Oe,createHref:L=>n.history.createHref(L),encodeLocation:L=>n.history.encodeLocation(L),getFetcher:Ts,resetFetcher:go,deleteFetcher:fr,dispose:vn,getBlocker:_a,deleteBlocker:Ss,patchRoutes:ji,_internalFetchControllers:ge,_internalSetRoutes:Ul,_internalSetStateDoNotUseOrYouWillBreakYourApp(L){_t(L)}},n.unstable_instrumentations&&(Y=KI(Y,n.unstable_instrumentations.map(L=>L.router).filter(Boolean))),Y}function aD(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Ag(n,e,t,a,s,l){let c,d;if(s){c=[];for(let g of e)if(c.push(g),g.route.id===s){d=g;break}}else c=e,d=e[e.length-1];let p=gd(a||".",pd(c),$r(n.pathname,t)||n.pathname,l==="path");if(a==null&&(p.search=n.search,p.hash=n.hash),(a==null||a===""||a===".")&&d){let g=fy(p.search);if(d.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let v=new URLSearchParams(p.search),E=v.getAll("index");v.delete("index"),E.filter(C=>C).forEach(C=>v.append("index",C));let S=v.toString();p.search=S?`?${S}`:""}}return t!=="/"&&(p.pathname=BI({basename:t,pathname:p.pathname})),Vi(p)}function u0(n,e,t){if(!t||!aD(t))return{path:e};if(t.formMethod&&!AD(t.formMethod))return{path:e,error:Hr(405,{method:t.formMethod})};let a=()=>({path:e,error:Hr(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=KS(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Fn(l))return a();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((S,[C,U])=>`${S}${C}=${U}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!Fn(l))return a();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return a()}}}st(typeof FormData=="function","FormData is not available in this environment");let d,p;if(t.formData)d=Cg(t.formData),p=t.formData;else if(t.body instanceof FormData)d=Cg(t.body),p=t.body;else if(t.body instanceof URLSearchParams)d=t.body,p=g0(d);else if(t.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(t.body),p=g0(d)}catch{return a()}let g={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Fn(g.formMethod))return{path:e,submission:g};let v=ga(e);return n&&v.search&&fy(v.search)&&d.append("index",""),v.search=`?${d}`,{path:Vi(v),submission:g}}function c0(n,e,t,a,s,l,c,d,p,g,v,E,S,C,U,B,V,H,q,F,Q){var Ze;let re=F?Ar(F[1])?F[1].error:F[1].data:void 0,Y=s.createURL(l.location),b=s.createURL(p),A;if(v&&l.errors){let W=Object.keys(l.errors)[0];A=c.findIndex(me=>me.route.id===W)}else if(F&&Ar(F[1])){let W=F[0];A=c.findIndex(me=>me.route.id===W)-1}let I=F?F[1].statusCode:void 0,N=I&&I>=400,x={currentUrl:Y,currentParams:((Ze=l.matches[0])==null?void 0:Ze.params)||{},nextUrl:b,nextParams:c[0].params,...d,actionResult:re,actionStatus:I},P=gc(c),O=c.map((W,me)=>{let{route:ge}=W,je=null;if(A!=null&&me>A?je=!1:ge.lazy?je=!0:cy(ge)?v?je=wg(ge,l.loaderData,l.errors):sD(l.loaderData,l.matches[me],W)&&(je=!0):je=!1,je!==null)return Rg(t,a,n,P,W,g,e,je);let Me=!1;typeof Q=="boolean"?Me=Q:N?Me=!1:(E||Y.pathname+Y.search===b.pathname+b.search||Y.search!==b.search||oD(l.matches[me],W))&&(Me=!0);let j={...x,defaultShouldRevalidate:Me},K=qu(W,j);return Rg(t,a,n,P,W,g,e,K,j,Q)}),Ue=[];return U.forEach((W,me)=>{if(v||!c.some(pe=>pe.route.id===W.routeId)||C.has(me))return;let ge=l.fetchers.get(me),je=ge&&ge.state!=="idle"&&ge.data===void 0,Me=Ja(V,W.path,H);if(!Me){if(q&&je)return;Ue.push({key:me,routeId:W.routeId,path:W.path,matches:null,match:null,request:null,controller:null});return}if(B.has(me))return;let j=mf(Me,W.path),K=new AbortController,oe=nl(s,W.path,K.signal),ce=null;if(S.has(me))S.delete(me),ce=cl(t,a,oe,Me,j,g,e);else if(je)E&&(ce=cl(t,a,oe,Me,j,g,e));else{let pe;typeof Q=="boolean"?pe=Q:N?pe=!1:pe=E;let Ee={...x,defaultShouldRevalidate:pe};qu(j,Ee)&&(ce=cl(t,a,oe,Me,j,g,e,Ee))}ce&&Ue.push({key:me,routeId:W.routeId,path:W.path,matches:ce,match:j,request:oe,controller:K})}),{dsMatches:O,revalidatingFetchers:Ue}}function cy(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function wg(n,e,t){if(n.lazy)return!0;if(!cy(n))return!1;let a=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!a&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!a&&!s}function sD(n,e,t){let a=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return a||s}function oD(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function qu(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function h0(n,e,t,a,s,l){let c;if(n){let g=a[n];st(g,`No route found to patch children into: routeId = ${n}`),g.children||(g.children=[]),c=g.children}else c=t;let d=[],p=[];if(e.forEach(g=>{let v=c.find(E=>FS(g,E));v?p.push({existingRoute:v,newRoute:g}):d.push(g)}),d.length>0){let g=nc(d,s,[n||"_","patch",String((c==null?void 0:c.length)||"0")],a);c.push(...g)}if(l&&p.length>0)for(let g=0;g<p.length;g++){let{existingRoute:v,newRoute:E}=p[g],S=v,[C]=nc([E],s,[],{},!0);Object.assign(S,{element:C.element?C.element:S.element,errorElement:C.errorElement?C.errorElement:S.errorElement,hydrateFallbackElement:C.hydrateFallbackElement?C.hydrateFallbackElement:S.hydrateFallbackElement})}}function FS(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,a)=>{var s;return(s=e.children)==null?void 0:s.some(l=>FS(t,l))}):!1}var f0=new WeakMap,HS=({key:n,route:e,manifest:t,mapRouteProperties:a})=>{let s=t[e.id];if(st(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=f0.get(s);c||(c={},f0.set(s,c));let d=c[n];if(d)return d;let p=(async()=>{let g=AI(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(g)Jt(!g,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(E)Jt(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let S=await l();S!=null&&(Object.assign(s,{[n]:S}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(S=>S===void 0)&&(s.lazy=void 0))})();return c[n]=p,p},d0=new WeakMap;function lD(n,e,t,a,s){let l=t[n.id];if(st(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let v=d0.get(l);if(v)return{lazyRoutePromise:v,lazyHandlerPromise:v};let E=(async()=>{st(typeof n.lazy=="function","No lazy route function found");let S=await n.lazy(),C={};for(let U in S){let B=S[U];if(B===void 0)continue;let V=RI(U),q=l[U]!==void 0&&U!=="hasErrorBoundary";V?Jt(!V,"Route property "+U+" is not a supported property to be returned from a lazy route function. This property will be ignored."):q?Jt(!q,`Route "${l.id}" has a static property "${U}" defined but its lazy function is also returning a value for this property. The lazy route property "${U}" will be ignored.`):C[U]=B}Object.assign(l,C),Object.assign(l,{...a(l),lazy:void 0})})();return d0.set(l,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(n.lazy),d=[],p;for(let v of c){if(s&&s.includes(v))continue;let E=HS({key:v,route:n,manifest:t,mapRouteProperties:a});E&&(d.push(E),v===e&&(p=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),p==null||p.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:p}}async function m0(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function uD(n){return n.matches.some(e=>e.route.middleware)?qS(n,()=>m0(n)):m0(n)}function qS(n,e){return cD(n,e,a=>{if(SD(a))throw a;return a},_D,t);function t(a,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:a}}));{let{matches:c}=n,d=Math.min(Math.max(c.findIndex(g=>g.route.id===s),0),Math.max(c.findIndex(g=>g.shouldCallHandler()),0)),p=Za(c,c[d].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:a}})}}}async function cD(n,e,t,a,s){let{matches:l,request:c,params:d,context:p,unstable_pattern:g}=n,v=l.flatMap(S=>S.route.middleware?S.route.middleware.map(C=>[S.route.id,C]):[]);return await GS({request:c,params:d,context:p,unstable_pattern:g},v,e,t,a,s)}async function GS(n,e,t,a,s,l,c=0){let{request:d}=n;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let p=e[c];if(!p)return await t();let[g,v]=p,E,S=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await GS(n,e,t,a,s,l,c+1)},E.value}catch(C){return E={value:await l(C,g,E)},E.value}};try{let C=await v(n,S),U=C!=null?a(C):void 0;return s(U)?U:E?U??E.value:(E={value:await S()},E.value)}catch(C){return await l(C,g,E)}}function $S(n,e,t,a,s){let l=HS({key:"middleware",route:a.route,manifest:e,mapRouteProperties:n}),c=lD(a.route,Fn(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Rg(n,e,t,a,s,l,c,d,p=null,g){let v=!1,E=$S(n,e,t,s,l);return{...s,_lazyPromises:E,shouldLoad:d,shouldRevalidateArgs:p,shouldCallHandler(S){return v=!0,p?typeof g=="boolean"?qu(s,{...p,defaultShouldRevalidate:g}):typeof S=="boolean"?qu(s,{...p,defaultShouldRevalidate:S}):qu(s,p):d},resolve(S){let{lazy:C,loader:U,middleware:B}=s.route,V=v||d||S&&!Fn(t.method)&&(C||U),H=B&&B.length>0&&!U&&!C;return V&&(Fn(t.method)||!H)?fD({request:t,unstable_pattern:a,match:s,lazyHandlerPromise:E==null?void 0:E.handler,lazyRoutePromise:E==null?void 0:E.route,handlerOverride:S,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function cl(n,e,t,a,s,l,c,d=null){return a.map(p=>p.route.id!==s.route.id?{...p,shouldLoad:!1,shouldRevalidateArgs:d,shouldCallHandler:()=>!1,_lazyPromises:$S(n,e,t,p,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Rg(n,e,t,gc(a),p,l,c,!0,d))}async function hD(n,e,t,a,s,l){t.some(g=>{var v;return(v=g._lazyPromises)==null?void 0:v.middleware})&&await Promise.all(t.map(g=>{var v;return(v=g._lazyPromises)==null?void 0:v.middleware}));let c={request:e,unstable_pattern:gc(t),params:t[0].params,context:s,matches:t},p=await n({...c,fetcherKey:a,runClientMiddleware:g=>{let v=c;return qS(v,()=>g({...v,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(g=>{var v,E;return[(v=g._lazyPromises)==null?void 0:v.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return p}async function fD({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let d,p,g=Fn(n.method),v=g?"action":"loader",E=S=>{let C,U=new Promise((H,q)=>C=q);p=()=>C(),n.signal.addEventListener("abort",p);let B=H=>typeof S!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${v}" [routeId: ${t.route.id}]`)):S({request:n,unstable_pattern:e,params:t.params,context:c},...H!==void 0?[H]:[]),V=(async()=>{try{return{type:"data",result:await(l?l(q=>B(q)):B())}}catch(H){return{type:"error",result:H}}})();return Promise.race([V,U])};try{let S=g?t.route.action:t.route.loader;if(a||s)if(S){let C,[U]=await Promise.all([E(S).catch(B=>{C=B}),a,s]);if(C!==void 0)throw C;d=U}else{await a;let C=g?t.route.action:t.route.loader;if(C)[d]=await Promise.all([E(C),s]);else if(v==="action"){let U=new URL(n.url),B=U.pathname+U.search;throw Hr(405,{method:n.method,pathname:B,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(S)d=await E(S);else{let C=new URL(n.url),U=C.pathname+C.search;throw Hr(404,{pathname:U})}}catch(S){return{type:"error",result:S}}finally{p&&n.signal.removeEventListener("abort",p)}return d}async function dD(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function mD(n){var a,s,l,c,d;let{result:e,type:t}=n;if(hy(e)){let p;try{p=await dD(e)}catch(g){return{type:"error",error:g}}return t==="error"?{type:"error",error:new pc(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?E0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:vD(e),statusCode:rc(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:rc(e)?e.status:void 0}:E0(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function pD(n,e,t,a,s){let l=n.headers.get("Location");if(st(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!uy(l)){let c=a.slice(0,a.findIndex(d=>d.route.id===t)+1);l=Ag(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function p0(n,e,t,a){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(uy(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let d=$r(c.pathname,t)!=null;if(c.origin===e.origin&&d)return c.pathname+c.search+c.hash}try{let l=a.createURL(n);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function nl(n,e,t,a){let s=n.createURL(KS(e)).toString(),l={signal:t};if(a&&Fn(a.formMethod)){let{formMethod:c,formEncType:d}=a;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(a.json)):d==="text/plain"?l.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?l.body=Cg(a.formData):l.body=a.formData}return new Request(s,l)}function Cg(n){let e=new URLSearchParams;for(let[t,a]of n.entries())e.append(t,typeof a=="string"?a:a.name);return e}function g0(n){let e=new FormData;for(let[t,a]of n.entries())e.append(t,a);return e}function gD(n,e,t,a=!1,s=!1){let l={},c=null,d,p=!1,g={},v=t&&Ar(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let S=E.route.id,C=e[S];if(st(!Qs(C),"Cannot handle redirect results in processLoaderData"),Ar(C)){let U=C.error;if(v!==void 0&&(U=v,v=void 0),c=c||{},s)c[S]=U;else{let B=Za(n,S);c[B.route.id]==null&&(c[B.route.id]=U)}a||(l[S]=BS),p||(p=!0,d=rc(C.error)?C.error.status:500),C.headers&&(g[S]=C.headers)}else l[S]=C.data,C.statusCode&&C.statusCode!==200&&!p&&(d=C.statusCode),C.headers&&(g[S]=C.headers)}),v!==void 0&&t&&(c={[t[0]]:v},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:g}}function y0(n,e,t,a,s,l){let{loaderData:c,errors:d}=gD(e,t,a);return s.filter(p=>!p.matches||p.matches.some(g=>g.shouldLoad)).forEach(p=>{let{key:g,match:v,controller:E}=p;if(E&&E.signal.aborted)return;let S=l[g];if(st(S,"Did not find corresponding fetcher result"),Ar(S)){let C=Za(n.matches,v==null?void 0:v.route.id);d&&d[C.route.id]||(d={...d,[C.route.id]:S.error}),n.fetchers.delete(g)}else if(Qs(S))st(!1,"Unhandled fetcher revalidation redirect");else{let C=ia(S.data);n.fetchers.set(g,C)}}),{loaderData:c,errors:d}}function v0(n,e,t,a){let s=Object.entries(e).filter(([,l])=>l!==BS).reduce((l,[c,d])=>(l[c]=d,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),a&&a.hasOwnProperty(c))break}return s}function _0(n){return n?Ar(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Za(n,e){return(e?n.slice(0,n.findIndex(a=>a.route.id===e)+1):[...n]).reverse().find(a=>a.route.hasErrorBoundary===!0)||n[0]}function tf(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Hr(n,{pathname:e,routeId:t,method:a,type:s,message:l}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(c="Bad Request",a&&e&&t?d=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(c="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",d=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",a&&e&&t?d=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new pc(n||500,c,new Error(d),!0)}function nf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[a,s]=e[t];if(Qs(s))return{key:a,result:s}}}function KS(n){let e=typeof n=="string"?ga(n):n;return Vi({...e,hash:""})}function yD(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function vD(n){var e,t;return new pc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function _D(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&ED(t))}function ED(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function TD(n){return hy(n.result)&&jS.has(n.result.status)}function Ar(n){return n.type==="error"}function Qs(n){return(n&&n.type)==="redirect"}function E0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function hy(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function bD(n){return jS.has(n)}function SD(n){return hy(n)&&bD(n.status)&&n.headers.has("Location")}function AD(n){return eD.has(n.toUpperCase())}function Fn(n){return JI.has(n.toUpperCase())}function fy(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function mf(n,e){let t=typeof e=="string"?ga(e).search:e.search;if(n[n.length-1].route.index&&fy(t||""))return n[n.length-1];let a=VS(n);return a[a.length-1]}function T0(n){let{formMethod:e,formAction:t,formEncType:a,text:s,formData:l,json:c}=n;if(!(!e||!t||!a)){if(s!=null)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:a,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:c,text:void 0}}}function rg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function wD(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Mu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function RD(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ia(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function CD(n,e){try{let t=n.sessionStorage.getItem(zS);if(t){let a=JSON.parse(t);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function ID(n,e){if(e.size>0){let t={};for(let[a,s]of e)t[a]=[...s];try{n.sessionStorage.setItem(zS,JSON.stringify(t))}catch(a){Jt(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function b0(){let n,e,t=new Promise((a,s)=>{n=async l=>{a(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var lo=M.createContext(null);lo.displayName="DataRouter";var yc=M.createContext(null);yc.displayName="DataRouterState";var YS=M.createContext(!1);function DD(){return M.useContext(YS)}var dy=M.createContext({isTransitioning:!1});dy.displayName="ViewTransition";var QS=M.createContext(new Map);QS.displayName="Fetchers";var ND=M.createContext(null);ND.displayName="Await";var Dr=M.createContext(null);Dr.displayName="Navigation";var yd=M.createContext(null);yd.displayName="Location";var Yr=M.createContext({outlet:null,matches:[],isDataRoute:!1});Yr.displayName="Route";var my=M.createContext(null);my.displayName="RouteError";var XS="REACT_ROUTER_ERROR",xD="REDIRECT",OD="ROUTE_ERROR_RESPONSE";function MD(n){if(n.startsWith(`${XS}:${xD}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function VD(n){if(n.startsWith(`${XS}:${OD}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new pc(e.status,e.statusText,e.data)}catch{}}function PD(n,{relative:e}={}){st(Dl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=M.useContext(Dr),{hash:s,pathname:l,search:c}=vc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Di([t,l])),a.createHref({pathname:d,search:c,hash:s})}function Dl(){return M.useContext(yd)!=null}function Qr(){return st(Dl(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(yd).location}var WS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function JS(n){M.useContext(Dr).static||M.useLayoutEffect(n)}function uo(){let{isDataRoute:n}=M.useContext(Yr);return n?XD():LD()}function LD(){st(Dl(),"useNavigate() may be used only in the context of a <Router> component.");let n=M.useContext(lo),{basename:e,navigator:t}=M.useContext(Dr),{matches:a}=M.useContext(Yr),{pathname:s}=Qr(),l=JSON.stringify(pd(a)),c=M.useRef(!1);return JS(()=>{c.current=!0}),M.useCallback((p,g={})=>{if(Jt(c.current,WS),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=gd(p,JSON.parse(l),s,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Di([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,s,n])}var kD=M.createContext(null);function UD(n){let e=M.useContext(Yr).outlet;return M.useMemo(()=>e&&M.createElement(kD.Provider,{value:n},e),[e,n])}function vd(){let{matches:n}=M.useContext(Yr),e=n[n.length-1];return e?e.params:{}}function vc(n,{relative:e}={}){let{matches:t}=M.useContext(Yr),{pathname:a}=Qr(),s=JSON.stringify(pd(t));return M.useMemo(()=>gd(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function jD(n,e,t,a,s){st(Dl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=M.useContext(Dr),{matches:c}=M.useContext(Yr),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let q=E&&E.path||"";eA(g,!E||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let S=Qr(),C;C=S;let U=C.pathname||"/",B=U;if(v!=="/"){let q=v.replace(/^\//,"").split("/");B="/"+U.replace(/^\//,"").split("/").slice(q.length).join("/")}let V=Ja(n,{pathname:B});return Jt(E||V!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Jt(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),qD(V&&V.map(q=>Object.assign({},q,{params:Object.assign({},p,q.params),pathname:Di([v,l.encodeLocation?l.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?v:Di([v,l.encodeLocation?l.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),c,t,a,s)}function zD(){let n=QD(),e=rc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:s},t):null,c)}var BD=M.createElement(zD,null),ZS=class extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=VD(n.digest);t&&(n=t)}let e=n!==void 0?M.createElement(Yr.Provider,{value:this.props.routeContext},M.createElement(my.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?M.createElement(FD,{error:n},e):e}};ZS.contextType=YS;var ig=new WeakMap;function FD({children:n,error:e}){let{basename:t}=M.useContext(Dr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=MD(e.digest);if(a){let s=ig.get(e);if(s)throw s;let l=LS(a.location,t);if(PS&&!ig.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw ig.set(e,c),c}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function HD({routeContext:n,match:e,children:t}){let a=M.useContext(lo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Yr.Provider,{value:n},t)}function qD(n,e=[],t=null,a=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let v=l.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);st(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,p=-1;if(t)for(let v=0;v<l.length;v++){let E=l[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=v),E.route.id){let{loaderData:S,errors:C}=t,U=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!C||C[E.route.id]===void 0);if(E.route.lazy||U){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&a?(v,E)=>{var S,C;a(v,{location:t.location,params:((C=(S=t.matches)==null?void 0:S[0])==null?void 0:C.params)??{},unstable_pattern:gc(t.matches),errorInfo:E})}:void 0;return l.reduceRight((v,E,S)=>{let C,U=!1,B=null,V=null;t&&(C=c&&E.route.id?c[E.route.id]:void 0,B=E.route.errorElement||BD,d&&(p<0&&S===0?(eA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,V=null):p===S&&(U=!0,V=E.route.hydrateFallbackElement||null)));let H=e.concat(l.slice(0,S+1)),q=()=>{let F;return C?F=B:U?F=V:E.route.Component?F=M.createElement(E.route.Component,null):E.route.element?F=E.route.element:F=v,M.createElement(HD,{match:E,routeContext:{outlet:v,matches:H,isDataRoute:t!=null},children:F})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?M.createElement(ZS,{location:t.location,revalidation:t.revalidation,component:B,error:C,children:q(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:g}):q()},null)}function py(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GD(n){let e=M.useContext(lo);return st(e,py(n)),e}function $D(n){let e=M.useContext(yc);return st(e,py(n)),e}function KD(n){let e=M.useContext(Yr);return st(e,py(n)),e}function gy(n){let e=KD(n),t=e.matches[e.matches.length-1];return st(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function YD(){return gy("useRouteId")}function QD(){var a;let n=M.useContext(my),e=$D("useRouteError"),t=gy("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function XD(){let{router:n}=GD("useNavigate"),e=gy("useNavigate"),t=M.useRef(!1);return JS(()=>{t.current=!0}),M.useCallback(async(s,l={})=>{Jt(t.current,WS),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var S0={};function eA(n,e,t){!e&&!S0[n]&&(S0[n]=!0,Jt(!1,t))}var A0={};function w0(n,e){!n&&!A0[e]&&(A0[e]=!0,console.warn(e))}var WD="useOptimistic",R0=HC[WD],JD=()=>{};function ZD(n){return R0?R0(n):[n,JD]}function eN(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&Jt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:M.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&Jt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:M.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&Jt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:M.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var tN=["HydrateFallback","hydrateFallbackElement"],nN=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}};function rN({router:n,flushSync:e,onError:t,unstable_useTransitions:a}){a=DD()||a;let[l,c]=M.useState(n.state),[d,p]=ZD(l),[g,v]=M.useState(),[E,S]=M.useState({isTransitioning:!1}),[C,U]=M.useState(),[B,V]=M.useState(),[H,q]=M.useState(),F=M.useRef(new Map),Q=M.useCallback((A,{deletedFetchers:I,newErrors:N,flushSync:x,viewTransitionOpts:P})=>{N&&t&&Object.values(N).forEach(Ue=>{var Ze;return t(Ue,{location:A.location,params:((Ze=A.matches[0])==null?void 0:Ze.params)??{},unstable_pattern:gc(A.matches)})}),A.fetchers.forEach((Ue,Ze)=>{Ue.data!==void 0&&F.current.set(Ze,Ue.data)}),I.forEach(Ue=>F.current.delete(Ue)),w0(x===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let O=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(w0(P==null||O,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!P||!O){e&&x?e(()=>c(A)):a===!1?c(A):M.startTransition(()=>{a===!0&&p(Ue=>C0(Ue,A)),c(A)});return}if(e&&x){e(()=>{B&&(C==null||C.resolve(),B.skipTransition()),S({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let Ue=n.window.document.startViewTransition(()=>{e(()=>c(A))});Ue.finished.finally(()=>{e(()=>{U(void 0),V(void 0),v(void 0),S({isTransitioning:!1})})}),e(()=>V(Ue));return}B?(C==null||C.resolve(),B.skipTransition(),q({state:A,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(v(A),S({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[n.window,e,B,C,a,p,t]);M.useLayoutEffect(()=>n.subscribe(Q),[n,Q]),M.useEffect(()=>{E.isTransitioning&&!E.flushSync&&U(new nN)},[E]),M.useEffect(()=>{if(C&&g&&n.window){let A=g,I=C.promise,N=n.window.document.startViewTransition(async()=>{a===!1?c(A):M.startTransition(()=>{a===!0&&p(x=>C0(x,A)),c(A)}),await I});N.finished.finally(()=>{U(void 0),V(void 0),v(void 0),S({isTransitioning:!1})}),V(N)}},[g,C,n.window,a,p]),M.useEffect(()=>{C&&g&&d.location.key===g.location.key&&C.resolve()},[C,B,d.location,g]),M.useEffect(()=>{!E.isTransitioning&&H&&(v(H.state),S({isTransitioning:!0,flushSync:!1,currentLocation:H.currentLocation,nextLocation:H.nextLocation}),q(void 0))},[E.isTransitioning,H]);let re=M.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:A=>n.navigate(A),push:(A,I,N)=>n.navigate(A,{state:I,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(A,I,N)=>n.navigate(A,{replace:!0,state:I,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[n]),Y=n.basename||"/",b=M.useMemo(()=>({router:n,navigator:re,static:!1,basename:Y,onError:t}),[n,re,Y,t]);return M.createElement(M.Fragment,null,M.createElement(lo.Provider,{value:b},M.createElement(yc.Provider,{value:d},M.createElement(QS.Provider,{value:F.current},M.createElement(dy.Provider,{value:E},M.createElement(sN,{basename:Y,location:d.location,navigationType:d.historyAction,navigator:re,unstable_useTransitions:a},M.createElement(iN,{routes:n.routes,future:n.future,state:d,onError:t})))))),null)}function C0(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var iN=M.memo(aN);function aN({routes:n,future:e,state:t,onError:a}){return jD(n,void 0,t,a,e)}function as({to:n,replace:e,state:t,relative:a}){st(Dl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=M.useContext(Dr);Jt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=M.useContext(Yr),{pathname:c}=Qr(),d=uo(),p=gd(n,pd(l),c,a==="path"),g=JSON.stringify(p);return M.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:a})},[d,g,a,e,t]),null}function tA(n){return UD(n.context)}function sN({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){st(!Dl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=M.useMemo(()=>({basename:d,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[d,s,l,c]);typeof t=="string"&&(t=ga(t));let{pathname:g="/",search:v="",hash:E="",state:S=null,key:C="default"}=t,U=M.useMemo(()=>{let B=$r(g,d);return B==null?null:{location:{pathname:B,search:v,hash:E,state:S,key:C},navigationType:a}},[d,g,v,E,S,C,a]);return Jt(U!=null,`<Router basename="${d}"> is not able to match the URL "${g}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:M.createElement(Dr.Provider,{value:p},M.createElement(yd.Provider,{children:e,value:U}))}var pf="get",gf="application/x-www-form-urlencoded";function _d(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function oN(n){return _d(n)&&n.tagName.toLowerCase()==="button"}function lN(n){return _d(n)&&n.tagName.toLowerCase()==="form"}function uN(n){return _d(n)&&n.tagName.toLowerCase()==="input"}function cN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function hN(n,e){return n.button===0&&(!e||e==="_self")&&!cN(n)}function Ig(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let a=n[t];return e.concat(Array.isArray(a)?a.map(s=>[t,s]):[[t,a]])},[]))}function fN(n,e){let t=Ig(n);return e&&e.forEach((a,s)=>{t.has(s)||e.getAll(s).forEach(l=>{t.append(s,l)})}),t}var rf=null;function dN(){if(rf===null)try{new FormData(document.createElement("form"),0),rf=!1}catch{rf=!0}return rf}var mN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ag(n){return n!=null&&!mN.has(n)?(Jt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gf}"`),null):n}function pN(n,e){let t,a,s,l,c;if(lN(n)){let d=n.getAttribute("action");a=d?$r(d,e):null,t=n.getAttribute("method")||pf,s=ag(n.getAttribute("enctype"))||gf,l=new FormData(n)}else if(oN(n)||uN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(a=p?$r(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||pf,s=ag(n.getAttribute("formenctype"))||ag(d.getAttribute("enctype"))||gf,l=new FormData(d,n),!dN()){let{name:g,type:v,value:E}=n;if(v==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,E)}}else{if(_d(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=pf,a=null,s=gf,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function gN(n,e,t,a){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:e&&$r(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function yN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function _N(n,e,t){let a=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await yN(l,t);return c.links?c.links():[]}return[]}));return SN(a.flat(1).filter(vN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function I0(n,e,t,a,s,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var v;return t[g].pathname!==p.pathname||((v=t[g].route.path)==null?void 0:v.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{var E;let v=a.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function EN(n,e,{includeHydrateFallback:t}={}){return TN(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function TN(n){return[...new Set(n)]}function bN(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function SN(n,e){let t=new Set;return new Set(e),n.reduce((a,s)=>{let l=JSON.stringify(bN(s));return t.has(l)||(t.add(l),a.push({key:l,link:s})),a},[])}function nA(){let n=M.useContext(lo);return yy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function AN(){let n=M.useContext(yc);return yy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var vy=M.createContext(void 0);vy.displayName="FrameworkContext";function rA(){let n=M.useContext(vy);return yy(n,"You must render this element inside a <HydratedRouter> element"),n}function wN(n,e){let t=M.useContext(vy),[a,s]=M.useState(!1),[l,c]=M.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:E}=e,S=M.useRef(null);M.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let B=H=>{H.forEach(q=>{c(q.isIntersecting)})},V=new IntersectionObserver(B,{threshold:.5});return S.current&&V.observe(S.current),()=>{V.disconnect()}}},[n]),M.useEffect(()=>{if(a){let B=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(B)}}},[a]);let C=()=>{s(!0)},U=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:Vu(d,C),onBlur:Vu(p,U),onMouseEnter:Vu(g,C),onMouseLeave:Vu(v,U),onTouchStart:Vu(E,C)}]:[!1,S,{}]}function Vu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function RN({page:n,...e}){let{router:t}=nA(),a=M.useMemo(()=>Ja(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?M.createElement(IN,{page:n,matches:a,...e}):null}function CN(n){let{manifest:e,routeModules:t}=rA(),[a,s]=M.useState([]);return M.useEffect(()=>{let l=!1;return _N(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),a}function IN({page:n,matches:e,...t}){let a=Qr(),{future:s,manifest:l,routeModules:c}=rA(),{basename:d}=nA(),{loaderData:p,matches:g}=AN(),v=M.useMemo(()=>I0(n,e,g,l,a,"data"),[n,e,g,l,a]),E=M.useMemo(()=>I0(n,e,g,l,a,"assets"),[n,e,g,l,a]),S=M.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let B=new Set,V=!1;if(e.forEach(q=>{var Q;let F=l.routes[q.route.id];!F||!F.hasLoader||(!v.some(re=>re.route.id===q.route.id)&&q.route.id in p&&((Q=c[q.route.id])!=null&&Q.shouldRevalidate)||F.hasClientLoader?V=!0:B.add(q.route.id))}),B.size===0)return[];let H=gN(n,d,s.unstable_trailingSlashAwareDataRequests,"data");return V&&B.size>0&&H.searchParams.set("_routes",e.filter(q=>B.has(q.route.id)).map(q=>q.route.id).join(",")),[H.pathname+H.search]},[d,s.unstable_trailingSlashAwareDataRequests,p,a,l,v,e,n,c]),C=M.useMemo(()=>EN(E,l),[E,l]),U=CN(E);return M.createElement(M.Fragment,null,S.map(B=>M.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...t})),C.map(B=>M.createElement("link",{key:B,rel:"modulepreload",href:B,...t})),U.map(({key:B,link:V})=>M.createElement("link",{key:B,nonce:t.nonce,...V,crossOrigin:V.crossOrigin??t.crossOrigin})))}function DN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var NN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{NN&&(window.__reactRouterVersion="7.13.0")}catch{}function xN(n,e){return iD({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:EI({window:e==null?void 0:e.window}),hydrationData:ON(),routes:n,mapRouteProperties:eN,hydrationRouteProperties:tN,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function ON(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:MN(n.errors)}),n}function MN(n){if(!n)return null;let e=Object.entries(n),t={};for(let[a,s]of e)if(s&&s.__type==="RouteErrorResponse")t[a]=new pc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[a]=c}catch{}}if(t[a]==null){let l=new Error(s.message);l.stack="",t[a]=l}}else t[a]=s;return t}var iA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aA=M.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S,...C},U){let{basename:B,unstable_useTransitions:V}=M.useContext(Dr),H=typeof g=="string"&&iA.test(g),q=LS(g,B);g=q.to;let F=PD(g,{relative:s}),[Q,re,Y]=wN(a,C),b=kN(g,{replace:c,state:d,target:p,preventScrollReset:v,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:S,unstable_useTransitions:V});function A(N){e&&e(N),N.defaultPrevented||b(N)}let I=M.createElement("a",{...C,...Y,href:q.absoluteURL||F,onClick:q.isExternal||l?e:A,ref:DN(U,re),target:p,"data-discover":!H&&t==="render"?"true":void 0});return Q&&!H?M.createElement(M.Fragment,null,I,M.createElement(RN,{page:F})):I});aA.displayName="Link";var VN=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:p,...g},v){let E=vc(c,{relative:g.relative}),S=Qr(),C=M.useContext(yc),{navigator:U,basename:B}=M.useContext(Dr),V=C!=null&&HN(E)&&d===!0,H=U.encodeLocation?U.encodeLocation(E).pathname:E.pathname,q=S.pathname,F=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(q=q.toLowerCase(),F=F?F.toLowerCase():null,H=H.toLowerCase()),F&&B&&(F=$r(F,B)||F);const Q=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let re=q===H||!s&&q.startsWith(H)&&q.charAt(Q)==="/",Y=F!=null&&(F===H||!s&&F.startsWith(H)&&F.charAt(H.length)==="/"),b={isActive:re,isPending:Y,isTransitioning:V},A=re?e:void 0,I;typeof a=="function"?I=a(b):I=[a,re?"active":null,Y?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(b):l;return M.createElement(aA,{...g,"aria-current":A,className:I,ref:v,style:N,to:c,viewTransition:d},typeof p=="function"?p(b):p)});VN.displayName="NavLink";var PN=M.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:l,method:c=pf,action:d,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S,...C},U)=>{let{unstable_useTransitions:B}=M.useContext(Dr),V=BN(),H=FN(d,{relative:g}),q=c.toLowerCase()==="get"?"get":"post",F=typeof d=="string"&&iA.test(d),Q=re=>{if(p&&p(re),re.defaultPrevented)return;re.preventDefault();let Y=re.nativeEvent.submitter,b=(Y==null?void 0:Y.getAttribute("formmethod"))||c,A=()=>V(Y||re.currentTarget,{fetcherKey:e,method:b,navigate:t,replace:s,state:l,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:S});B&&t!==!1?M.startTransition(()=>A()):A()};return M.createElement("form",{ref:U,method:q,action:H,onSubmit:a?p:Q,...C,"data-discover":!F&&n==="render"?"true":void 0})});PN.displayName="Form";function LN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sA(n){let e=M.useContext(lo);return st(e,LN(n)),e}function kN(n,{target:e,replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=uo(),v=Qr(),E=vc(n,{relative:l});return M.useCallback(S=>{if(hN(S,e)){S.preventDefault();let C=t!==void 0?t:Vi(v)===Vi(E),U=()=>g(n,{replace:C,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?M.startTransition(()=>U()):U()}},[v,g,E,t,a,e,n,s,l,c,d,p])}function UN(n){Jt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=M.useRef(Ig(n)),t=M.useRef(!1),a=Qr(),s=M.useMemo(()=>fN(a.search,t.current?null:e.current),[a.search]),l=uo(),c=M.useCallback((d,p)=>{const g=Ig(typeof d=="function"?d(new URLSearchParams(s)):d);t.current=!0,l("?"+g,p)},[l,s]);return[s,c]}var jN=0,zN=()=>`__${String(++jN)}__`;function BN(){let{router:n}=sA("useSubmit"),{basename:e}=M.useContext(Dr),t=YD(),a=n.fetch,s=n.navigate;return M.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:v,body:E}=pN(l,e);if(c.navigate===!1){let S=c.fetcherKey||zN();await a(S,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,s,e,t])}function FN(n,{relative:e}={}){let{basename:t}=M.useContext(Dr),a=M.useContext(Yr);st(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...vc(n||".",{relative:e})},c=Qr();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Di([t,l.pathname])),Vi(l)}function HN(n,{relative:e}={}){let t=M.useContext(dy);st(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=sA("useViewTransitionState"),s=vc(n,{relative:e});if(!t.isTransitioning)return!1;let l=$r(t.currentLocation.pathname,a)||t.currentLocation.pathname,c=$r(t.nextLocation.pathname,a)||t.nextLocation.pathname;return Uf(s.pathname,c)!=null||Uf(s.pathname,l)!=null}var qN=RS();function GN(n){return M.createElement(rN,{flushSync:qN.flushSync,...n})}const $N=M.createContext(void 0),hi=()=>mI(),yt=yI.withTypes(),KN=({children:n})=>{const e=yt(t=>t.auth.loading);return w.jsx($N.Provider,{value:{isLoading:e},children:n})},YN=()=>{};var D0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let s=n.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},QN=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const s=n[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],d=n[t++],p=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},lA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,d=c?n[s+1]:0,p=s+2<n.length,g=p?n[s+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,C=g&63;p||(C=64,c||(S=64)),a.push(t[v],t[E],t[S],t[C])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(oA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):QN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new XN;const S=l<<2|d>>4;if(a.push(S),g!==64){const C=d<<4&240|g>>2;if(a.push(C),E!==64){const U=g<<6&192|E;a.push(U)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class XN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WN=function(n){const e=oA(n);return lA.encodeByteArray(e,!0)},jf=function(n){return WN(n).replace(/\./g,"")},uA=function(n){try{return lA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=()=>JN().__FIREBASE_DEFAULTS__,ex=()=>{if(typeof process>"u"||typeof D0>"u")return;const n=D0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},tx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&uA(n[1]);return e&&JSON.parse(e)},Ed=()=>{try{return YN()||ZN()||ex()||tx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cA=n=>{var e,t;return(t=(e=Ed())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},nx=n=>{const e=cA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},hA=()=>{var n;return(n=Ed())==null?void 0:n.config},fA=n=>{var e;return(e=Ed())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[jf(JSON.stringify(t)),jf(JSON.stringify(c)),""].join(".")}const Gu={};function ax(){const n={prod:[],emulator:[]};for(const e of Object.keys(Gu))Gu[e]?n.emulator.push(e):n.prod.push(e);return n}function sx(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let N0=!1;function mA(n,e){if(typeof window>"u"||typeof document>"u"||!Nl(window.location.host)||Gu[n]===e||Gu[n]||N0)return;Gu[n]=e;function t(S){return`__firebase__banner__${S}`}const a="__firebase__banner",l=ax().prod.length>0;function c(){const S=document.getElementById(a);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,C){S.setAttribute("width","24"),S.setAttribute("id",C),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{N0=!0,c()},S}function v(S,C){S.setAttribute("id",C),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=sx(a),C=t("text"),U=document.getElementById(C)||document.createElement("span"),B=t("learnmore"),V=document.getElementById(B)||document.createElement("a"),H=t("preprendIcon"),q=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const F=S.element;d(F),v(V,B);const Q=g();p(q,H),F.append(q,U,V,Q),document.body.appendChild(F)}l?(U.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ox(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function lx(){var e;const n=(e=Ed())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ux(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fx(){const n=Gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function dx(){return!lx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mx(){try{return typeof indexedDB=="object"}catch{return!1}}function px(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="FirebaseError";class ya extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=gx,Object.setPrototypeOf(this,ya.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_c.prototype.create)}}class _c{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?yx(l,a):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new ya(s,d,a)}}function yx(n,e){return n.replace(vx,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const vx=/\{\$([^}]+)}/g;function _x(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function no(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=n[s],c=e[s];if(x0(l)&&x0(c)){if(!no(l,c))return!1}else if(l!==c)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function x0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Ex(n,e){const t=new Tx(n,e);return t.subscribe.bind(t)}class Tx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");bx(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=sg),s.error===void 0&&(s.error=sg),s.complete===void 0&&(s.complete=sg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bx(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function sg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(n){return n&&n._delegate?n._delegate:n}class ro{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new rx;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wx(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&c.resolve(s)}return s}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const l=this.instances.get(a);return l&&e(l,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Ax(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ax(n){return n===Ys?void 0:n}function wx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Sx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(dt||(dt={}));const Cx={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},Ix=dt.INFO,Dx={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},Nx=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),s=Dx[e];if(s)console[s](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _y{constructor(e){this.name=e,this._logLevel=Ix,this._logHandler=Nx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const xx=(n,e)=>e.some(t=>n instanceof t);let O0,M0;function Ox(){return O0||(O0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mx(){return M0||(M0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pA=new WeakMap,Dg=new WeakMap,gA=new WeakMap,og=new WeakMap,Ey=new WeakMap;function Vx(n){const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ss(n.result)),s()},c=()=>{a(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&pA.set(t,n)}).catch(()=>{}),Ey.set(e,n),e}function Px(n){if(Dg.has(n))return;const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{a(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Dg.set(n,e)}let Ng={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Dg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ss(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Lx(n){Ng=n(Ng)}function kx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(lg(this),e,...t);return gA.set(a,e.sort?e.sort():[e]),ss(a)}:Mx().includes(n)?function(...e){return n.apply(lg(this),e),ss(pA.get(this))}:function(...e){return ss(n.apply(lg(this),e))}}function Ux(n){return typeof n=="function"?kx(n):(n instanceof IDBTransaction&&Px(n),xx(n,Ox())?new Proxy(n,Ng):n)}function ss(n){if(n instanceof IDBRequest)return Vx(n);if(og.has(n))return og.get(n);const e=Ux(n);return e!==n&&(og.set(n,e),Ey.set(e,n)),e}const lg=n=>Ey.get(n);function jx(n,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),d=ss(c);return a&&c.addEventListener("upgradeneeded",p=>{a(ss(c.result),p.oldVersion,p.newVersion,ss(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const zx=["get","getKey","getAll","getAllKeys","count"],Bx=["put","add","delete","clear"],ug=new Map;function V0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=Bx.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||zx.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,s?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&p.done]))[0]};return ug.set(e,l),l}Lx(n=>({...n,get:(e,t,a)=>V0(e,t)||n.get(e,t,a),has:(e,t)=>!!V0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Hx(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function Hx(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xg="@firebase/app",P0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new _y("@firebase/app"),qx="@firebase/app-compat",Gx="@firebase/analytics-compat",$x="@firebase/analytics",Kx="@firebase/app-check-compat",Yx="@firebase/app-check",Qx="@firebase/auth",Xx="@firebase/auth-compat",Wx="@firebase/database",Jx="@firebase/data-connect",Zx="@firebase/database-compat",e2="@firebase/functions",t2="@firebase/functions-compat",n2="@firebase/installations",r2="@firebase/installations-compat",i2="@firebase/messaging",a2="@firebase/messaging-compat",s2="@firebase/performance",o2="@firebase/performance-compat",l2="@firebase/remote-config",u2="@firebase/remote-config-compat",c2="@firebase/storage",h2="@firebase/storage-compat",f2="@firebase/firestore",d2="@firebase/ai",m2="@firebase/firestore-compat",p2="firebase",g2="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="[DEFAULT]",y2={[xg]:"fire-core",[qx]:"fire-core-compat",[$x]:"fire-analytics",[Gx]:"fire-analytics-compat",[Yx]:"fire-app-check",[Kx]:"fire-app-check-compat",[Qx]:"fire-auth",[Xx]:"fire-auth-compat",[Wx]:"fire-rtdb",[Jx]:"fire-data-connect",[Zx]:"fire-rtdb-compat",[e2]:"fire-fn",[t2]:"fire-fn-compat",[n2]:"fire-iid",[r2]:"fire-iid-compat",[i2]:"fire-fcm",[a2]:"fire-fcm-compat",[s2]:"fire-perf",[o2]:"fire-perf-compat",[l2]:"fire-rc",[u2]:"fire-rc-compat",[c2]:"fire-gcs",[h2]:"fire-gcs-compat",[f2]:"fire-fst",[m2]:"fire-fst-compat",[d2]:"fire-vertex","fire-js":"fire-js",[p2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf=new Map,v2=new Map,Mg=new Map;function L0(n,e){try{n.container.addComponent(e)}catch(t){ha.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yl(n){const e=n.name;if(Mg.has(e))return ha.debug(`There were multiple attempts to register component ${e}.`),!1;Mg.set(e,n);for(const t of zf.values())L0(t,n);for(const t of v2.values())L0(t,n);return!0}function Ty(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ii(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new _c("app","Firebase",_2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=g2;function yA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a={name:Og,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw os.create("bad-app-name",{appName:String(s)});if(t||(t=hA()),!t)throw os.create("no-options");const l=zf.get(s);if(l){if(no(t,l.options)&&no(a,l.config))return l;throw os.create("duplicate-app",{appName:s})}const c=new Rx(s);for(const p of Mg.values())c.addComponent(p);const d=new E2(t,a,c);return zf.set(s,d),d}function vA(n=Og){const e=zf.get(n);if(!e&&n===Og&&hA())return yA();if(!e)throw os.create("no-app",{appName:n});return e}function ls(n,e,t){let a=y2[n]??n;t&&(a+=`-${t}`);const s=a.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ha.warn(c.join(" "));return}yl(new ro(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="firebase-heartbeat-database",b2=1,ic="firebase-heartbeat-store";let cg=null;function _A(){return cg||(cg=jx(T2,b2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ic)}catch(t){console.warn(t)}}}}).catch(n=>{throw os.create("idb-open",{originalErrorMessage:n.message})})),cg}async function S2(n){try{const t=(await _A()).transaction(ic),a=await t.objectStore(ic).get(EA(n));return await t.done,a}catch(e){if(e instanceof ya)ha.warn(e.message);else{const t=os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ha.warn(t.message)}}}async function k0(n,e){try{const a=(await _A()).transaction(ic,"readwrite");await a.objectStore(ic).put(e,EA(n)),await a.done}catch(t){if(t instanceof ya)ha.warn(t.message);else{const a=os.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ha.warn(a.message)}}}function EA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=1024,w2=30;class R2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new I2(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=U0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>w2){const c=D2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){ha.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=U0(),{heartbeatsToSend:a,unsentEntries:s}=C2(this._heartbeatsCache.heartbeats),l=jf(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ha.warn(t),""}}}function U0(){return new Date().toISOString().substring(0,10)}function C2(n,e=A2){const t=[];let a=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),j0(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),j0(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class I2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mx()?px().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await S2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return k0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return k0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function j0(n){return jf(JSON.stringify({version:2,heartbeats:n})).length}function D2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(n){yl(new ro("platform-logger",e=>new Fx(e),"PRIVATE")),yl(new ro("heartbeat",e=>new R2(e),"PRIVATE")),ls(xg,P0,n),ls(xg,P0,"esm2020"),ls("fire-js","")}N2("");var z0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,TA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,A){function I(){}I.prototype=A.prototype,b.F=A.prototype,b.prototype=new I,b.prototype.constructor=b,b.D=function(N,x,P){for(var O=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)O[Ue-2]=arguments[Ue];return A.prototype[x].apply(N,O)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,A,I){I||(I=0);const N=Array(16);if(typeof A=="string")for(var x=0;x<16;++x)N[x]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(x=0;x<16;++x)N[x]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=b.g[0],I=b.g[1],x=b.g[2];let P=b.g[3],O;O=A+(P^I&(x^P))+N[0]+3614090360&4294967295,A=I+(O<<7&4294967295|O>>>25),O=P+(x^A&(I^x))+N[1]+3905402710&4294967295,P=A+(O<<12&4294967295|O>>>20),O=x+(I^P&(A^I))+N[2]+606105819&4294967295,x=P+(O<<17&4294967295|O>>>15),O=I+(A^x&(P^A))+N[3]+3250441966&4294967295,I=x+(O<<22&4294967295|O>>>10),O=A+(P^I&(x^P))+N[4]+4118548399&4294967295,A=I+(O<<7&4294967295|O>>>25),O=P+(x^A&(I^x))+N[5]+1200080426&4294967295,P=A+(O<<12&4294967295|O>>>20),O=x+(I^P&(A^I))+N[6]+2821735955&4294967295,x=P+(O<<17&4294967295|O>>>15),O=I+(A^x&(P^A))+N[7]+4249261313&4294967295,I=x+(O<<22&4294967295|O>>>10),O=A+(P^I&(x^P))+N[8]+1770035416&4294967295,A=I+(O<<7&4294967295|O>>>25),O=P+(x^A&(I^x))+N[9]+2336552879&4294967295,P=A+(O<<12&4294967295|O>>>20),O=x+(I^P&(A^I))+N[10]+4294925233&4294967295,x=P+(O<<17&4294967295|O>>>15),O=I+(A^x&(P^A))+N[11]+2304563134&4294967295,I=x+(O<<22&4294967295|O>>>10),O=A+(P^I&(x^P))+N[12]+1804603682&4294967295,A=I+(O<<7&4294967295|O>>>25),O=P+(x^A&(I^x))+N[13]+4254626195&4294967295,P=A+(O<<12&4294967295|O>>>20),O=x+(I^P&(A^I))+N[14]+2792965006&4294967295,x=P+(O<<17&4294967295|O>>>15),O=I+(A^x&(P^A))+N[15]+1236535329&4294967295,I=x+(O<<22&4294967295|O>>>10),O=A+(x^P&(I^x))+N[1]+4129170786&4294967295,A=I+(O<<5&4294967295|O>>>27),O=P+(I^x&(A^I))+N[6]+3225465664&4294967295,P=A+(O<<9&4294967295|O>>>23),O=x+(A^I&(P^A))+N[11]+643717713&4294967295,x=P+(O<<14&4294967295|O>>>18),O=I+(P^A&(x^P))+N[0]+3921069994&4294967295,I=x+(O<<20&4294967295|O>>>12),O=A+(x^P&(I^x))+N[5]+3593408605&4294967295,A=I+(O<<5&4294967295|O>>>27),O=P+(I^x&(A^I))+N[10]+38016083&4294967295,P=A+(O<<9&4294967295|O>>>23),O=x+(A^I&(P^A))+N[15]+3634488961&4294967295,x=P+(O<<14&4294967295|O>>>18),O=I+(P^A&(x^P))+N[4]+3889429448&4294967295,I=x+(O<<20&4294967295|O>>>12),O=A+(x^P&(I^x))+N[9]+568446438&4294967295,A=I+(O<<5&4294967295|O>>>27),O=P+(I^x&(A^I))+N[14]+3275163606&4294967295,P=A+(O<<9&4294967295|O>>>23),O=x+(A^I&(P^A))+N[3]+4107603335&4294967295,x=P+(O<<14&4294967295|O>>>18),O=I+(P^A&(x^P))+N[8]+1163531501&4294967295,I=x+(O<<20&4294967295|O>>>12),O=A+(x^P&(I^x))+N[13]+2850285829&4294967295,A=I+(O<<5&4294967295|O>>>27),O=P+(I^x&(A^I))+N[2]+4243563512&4294967295,P=A+(O<<9&4294967295|O>>>23),O=x+(A^I&(P^A))+N[7]+1735328473&4294967295,x=P+(O<<14&4294967295|O>>>18),O=I+(P^A&(x^P))+N[12]+2368359562&4294967295,I=x+(O<<20&4294967295|O>>>12),O=A+(I^x^P)+N[5]+4294588738&4294967295,A=I+(O<<4&4294967295|O>>>28),O=P+(A^I^x)+N[8]+2272392833&4294967295,P=A+(O<<11&4294967295|O>>>21),O=x+(P^A^I)+N[11]+1839030562&4294967295,x=P+(O<<16&4294967295|O>>>16),O=I+(x^P^A)+N[14]+4259657740&4294967295,I=x+(O<<23&4294967295|O>>>9),O=A+(I^x^P)+N[1]+2763975236&4294967295,A=I+(O<<4&4294967295|O>>>28),O=P+(A^I^x)+N[4]+1272893353&4294967295,P=A+(O<<11&4294967295|O>>>21),O=x+(P^A^I)+N[7]+4139469664&4294967295,x=P+(O<<16&4294967295|O>>>16),O=I+(x^P^A)+N[10]+3200236656&4294967295,I=x+(O<<23&4294967295|O>>>9),O=A+(I^x^P)+N[13]+681279174&4294967295,A=I+(O<<4&4294967295|O>>>28),O=P+(A^I^x)+N[0]+3936430074&4294967295,P=A+(O<<11&4294967295|O>>>21),O=x+(P^A^I)+N[3]+3572445317&4294967295,x=P+(O<<16&4294967295|O>>>16),O=I+(x^P^A)+N[6]+76029189&4294967295,I=x+(O<<23&4294967295|O>>>9),O=A+(I^x^P)+N[9]+3654602809&4294967295,A=I+(O<<4&4294967295|O>>>28),O=P+(A^I^x)+N[12]+3873151461&4294967295,P=A+(O<<11&4294967295|O>>>21),O=x+(P^A^I)+N[15]+530742520&4294967295,x=P+(O<<16&4294967295|O>>>16),O=I+(x^P^A)+N[2]+3299628645&4294967295,I=x+(O<<23&4294967295|O>>>9),O=A+(x^(I|~P))+N[0]+4096336452&4294967295,A=I+(O<<6&4294967295|O>>>26),O=P+(I^(A|~x))+N[7]+1126891415&4294967295,P=A+(O<<10&4294967295|O>>>22),O=x+(A^(P|~I))+N[14]+2878612391&4294967295,x=P+(O<<15&4294967295|O>>>17),O=I+(P^(x|~A))+N[5]+4237533241&4294967295,I=x+(O<<21&4294967295|O>>>11),O=A+(x^(I|~P))+N[12]+1700485571&4294967295,A=I+(O<<6&4294967295|O>>>26),O=P+(I^(A|~x))+N[3]+2399980690&4294967295,P=A+(O<<10&4294967295|O>>>22),O=x+(A^(P|~I))+N[10]+4293915773&4294967295,x=P+(O<<15&4294967295|O>>>17),O=I+(P^(x|~A))+N[1]+2240044497&4294967295,I=x+(O<<21&4294967295|O>>>11),O=A+(x^(I|~P))+N[8]+1873313359&4294967295,A=I+(O<<6&4294967295|O>>>26),O=P+(I^(A|~x))+N[15]+4264355552&4294967295,P=A+(O<<10&4294967295|O>>>22),O=x+(A^(P|~I))+N[6]+2734768916&4294967295,x=P+(O<<15&4294967295|O>>>17),O=I+(P^(x|~A))+N[13]+1309151649&4294967295,I=x+(O<<21&4294967295|O>>>11),O=A+(x^(I|~P))+N[4]+4149444226&4294967295,A=I+(O<<6&4294967295|O>>>26),O=P+(I^(A|~x))+N[11]+3174756917&4294967295,P=A+(O<<10&4294967295|O>>>22),O=x+(A^(P|~I))+N[2]+718787259&4294967295,x=P+(O<<15&4294967295|O>>>17),O=I+(P^(x|~A))+N[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(x+(O<<21&4294967295|O>>>11))&4294967295,b.g[2]=b.g[2]+x&4294967295,b.g[3]=b.g[3]+P&4294967295}a.prototype.v=function(b,A){A===void 0&&(A=b.length);const I=A-this.blockSize,N=this.C;let x=this.h,P=0;for(;P<A;){if(x==0)for(;P<=I;)s(this,b,P),P+=this.blockSize;if(typeof b=="string"){for(;P<A;)if(N[x++]=b.charCodeAt(P++),x==this.blockSize){s(this,N),x=0;break}}else for(;P<A;)if(N[x++]=b[P++],x==this.blockSize){s(this,N),x=0;break}}this.h=x,this.o+=A},a.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;A=this.o*8;for(var I=b.length-8;I<b.length;++I)b[I]=A&255,A/=256;for(this.v(b),b=Array(16),A=0,I=0;I<4;++I)for(let N=0;N<32;N+=8)b[A++]=this.g[I]>>>N&255;return b};function l(b,A){var I=d;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=A(b)}function c(b,A){this.h=A;const I=[];let N=!0;for(let x=b.length-1;x>=0;x--){const P=b[x]|0;N&&P==A||(I[x]=P,N=!1)}this.g=I}var d={};function p(b){return-128<=b&&b<128?l(b,function(A){return new c([A|0],A<0?-1:0)}):new c([b|0],b<0?-1:0)}function g(b){if(isNaN(b)||!isFinite(b))return E;if(b<0)return V(g(-b));const A=[];let I=1;for(let N=0;b>=I;N++)A[N]=b/I|0,I*=4294967296;return new c(A,0)}function v(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return V(v(b.substring(1),A));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(A,8));let N=E;for(let P=0;P<b.length;P+=8){var x=Math.min(8,b.length-P);const O=parseInt(b.substring(P,P+x),A);x<8?(x=g(Math.pow(A,x)),N=N.j(x).add(g(O))):(N=N.j(I),N=N.add(g(O)))}return N}var E=p(0),S=p(1),C=p(16777216);n=c.prototype,n.m=function(){if(B(this))return-V(this).m();let b=0,A=1;for(let I=0;I<this.g.length;I++){const N=this.i(I);b+=(N>=0?N:4294967296+N)*A,A*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(U(this))return"0";if(B(this))return"-"+V(this).toString(b);const A=g(Math.pow(b,6));var I=this;let N="";for(;;){const x=Q(I,A).g;I=H(I,x.j(A));let P=((I.g.length>0?I.g[0]:I.h)>>>0).toString(b);if(I=x,U(I))return P+N;for(;P.length<6;)P="0"+P;N=P+N}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function U(b){if(b.h!=0)return!1;for(let A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function B(b){return b.h==-1}n.l=function(b){return b=H(this,b),B(b)?-1:U(b)?0:1};function V(b){const A=b.g.length,I=[];for(let N=0;N<A;N++)I[N]=~b.g[N];return new c(I,~b.h).add(S)}n.abs=function(){return B(this)?V(this):this},n.add=function(b){const A=Math.max(this.g.length,b.g.length),I=[];let N=0;for(let x=0;x<=A;x++){let P=N+(this.i(x)&65535)+(b.i(x)&65535),O=(P>>>16)+(this.i(x)>>>16)+(b.i(x)>>>16);N=O>>>16,P&=65535,O&=65535,I[x]=O<<16|P}return new c(I,I[I.length-1]&-2147483648?-1:0)};function H(b,A){return b.add(V(A))}n.j=function(b){if(U(this)||U(b))return E;if(B(this))return B(b)?V(this).j(V(b)):V(V(this).j(b));if(B(b))return V(this.j(V(b)));if(this.l(C)<0&&b.l(C)<0)return g(this.m()*b.m());const A=this.g.length+b.g.length,I=[];for(var N=0;N<2*A;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<b.g.length;x++){const P=this.i(N)>>>16,O=this.i(N)&65535,Ue=b.i(x)>>>16,Ze=b.i(x)&65535;I[2*N+2*x]+=O*Ze,q(I,2*N+2*x),I[2*N+2*x+1]+=P*Ze,q(I,2*N+2*x+1),I[2*N+2*x+1]+=O*Ue,q(I,2*N+2*x+1),I[2*N+2*x+2]+=P*Ue,q(I,2*N+2*x+2)}for(b=0;b<A;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=A;b<2*A;b++)I[b]=0;return new c(I,0)};function q(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function F(b,A){this.g=b,this.h=A}function Q(b,A){if(U(A))throw Error("division by zero");if(U(b))return new F(E,E);if(B(b))return A=Q(V(b),A),new F(V(A.g),V(A.h));if(B(A))return A=Q(b,V(A)),new F(V(A.g),A.h);if(b.g.length>30){if(B(b)||B(A))throw Error("slowDivide_ only works with positive integers.");for(var I=S,N=A;N.l(b)<=0;)I=re(I),N=re(N);var x=Y(I,1),P=Y(N,1);for(N=Y(N,2),I=Y(I,2);!U(N);){var O=P.add(N);O.l(b)<=0&&(x=x.add(I),P=O),N=Y(N,1),I=Y(I,1)}return A=H(b,x.j(A)),new F(x,A)}for(x=E;b.l(A)>=0;){for(I=Math.max(1,Math.floor(b.m()/A.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),P=g(I),O=P.j(A);B(O)||O.l(b)>0;)I-=N,P=g(I),O=P.j(A);U(P)&&(P=S),x=x.add(P),b=H(b,O)}return new F(x,b)}n.B=function(b){return Q(this,b).h},n.and=function(b){const A=Math.max(this.g.length,b.g.length),I=[];for(let N=0;N<A;N++)I[N]=this.i(N)&b.i(N);return new c(I,this.h&b.h)},n.or=function(b){const A=Math.max(this.g.length,b.g.length),I=[];for(let N=0;N<A;N++)I[N]=this.i(N)|b.i(N);return new c(I,this.h|b.h)},n.xor=function(b){const A=Math.max(this.g.length,b.g.length),I=[];for(let N=0;N<A;N++)I[N]=this.i(N)^b.i(N);return new c(I,this.h^b.h)};function re(b){const A=b.g.length+1,I=[];for(let N=0;N<A;N++)I[N]=b.i(N)<<1|b.i(N-1)>>>31;return new c(I,b.h)}function Y(b,A){const I=A>>5;A%=32;const N=b.g.length-I,x=[];for(let P=0;P<N;P++)x[P]=A>0?b.i(P+I)>>>A|b.i(P+I+1)<<32-A:b.i(P+I);return new c(x,b.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,TA=a,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,us=c}).apply(typeof z0<"u"?z0:typeof self<"u"?self:typeof window<"u"?window:{});var af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bA,Uu,SA,yf,Vg,AA,wA,RA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof af=="object"&&af];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=t(this);function s(h,y){if(y)e:{var T=a;h=h.split(".");for(var D=0;D<h.length-1;D++){var X=h[D];if(!(X in T))break e;T=T[X]}h=h[h.length-1],D=T[h],y=y(D),y!=D&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(y){var T=[],D;for(D in y)Object.prototype.hasOwnProperty.call(y,D)&&T.push([D,y[D]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,T){return h.call.apply(h.bind,arguments)}function g(h,y,T){return g=p,g.apply(null,arguments)}function v(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function E(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(D,X,ne){for(var Te=Array(arguments.length-2),et=2;et<arguments.length;et++)Te[et-2]=arguments[et];return y.prototype[X].apply(D,Te)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const y=h.length;if(y>0){const T=Array(y);for(let D=0;D<y;D++)T[D]=h[D];return T}return[]}function U(h,y){for(let D=1;D<arguments.length;D++){const X=arguments[D];var T=typeof X;if(T=T!="object"?T:X?Array.isArray(X)?"array":T:"null",T=="array"||T=="object"&&typeof X.length=="number"){T=h.length||0;const ne=X.length||0;h.length=T+ne;for(let Te=0;Te<ne;Te++)h[T+Te]=X[Te]}else h.push(X)}}class B{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function V(h){c.setTimeout(()=>{throw h},0)}function H(){var h=b;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class q{constructor(){this.h=this.g=null}add(y,T){const D=F.get();D.set(y,T),this.h?this.h.next=D:this.g=D,this.h=D}}var F=new B(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let re,Y=!1,b=new q,A=()=>{const h=Promise.resolve(void 0);re=()=>{h.then(I)}};function I(){for(var h;h=H();){try{h.h.call(h.g)}catch(T){V(T)}var y=F;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Y=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function O(h){return/^[\s\xa0]*$/.test(h)}function Ue(h,y){x.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Ue,x),Ue.prototype.init=function(h,y){const T=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ze="closure_listenable_"+(Math.random()*1e6|0),W=0;function me(h,y,T,D,X){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!D,this.ha=X,this.key=++W,this.da=this.fa=!1}function ge(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function je(h,y,T){for(const D in h)y.call(T,h[D],D,h)}function Me(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function j(h){const y={};for(const T in h)y[T]=h[T];return y}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,y){let T,D;for(let X=1;X<arguments.length;X++){D=arguments[X];for(T in D)h[T]=D[T];for(let ne=0;ne<K.length;ne++)T=K[ne],Object.prototype.hasOwnProperty.call(D,T)&&(h[T]=D[T])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,T,D,X){const ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);const Te=Ee(h,y,D,X);return Te>-1?(y=h[Te],T||(y.fa=!1)):(y=new me(y,this.src,ne,!!D,X),y.fa=T,h.push(y)),y};function pe(h,y){const T=y.type;if(T in h.g){var D=h.g[T],X=Array.prototype.indexOf.call(D,y,void 0),ne;(ne=X>=0)&&Array.prototype.splice.call(D,X,1),ne&&(ge(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Ee(h,y,T,D){for(let X=0;X<h.length;++X){const ne=h[X];if(!ne.da&&ne.listener==y&&ne.capture==!!T&&ne.ha==D)return X}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),Ke={};function lt(h,y,T,D,X){if(Array.isArray(y)){for(let ne=0;ne<y.length;ne++)lt(h,y[ne],T,D,X);return null}return T=Fe(T),h&&h[Ze]?h.J(y,T,d(D)?!!D.capture:!1,X):vn(h,y,T,!1,D,X)}function vn(h,y,T,D,X,ne){if(!y)throw Error("Invalid event type");const Te=d(X)?!!X.capture:!!X;let et=Ae(h);if(et||(h[Pe]=et=new ce(h)),T=et.add(y,T,D,Te,ne),T.proxy)return T;if(D=kn(),T.proxy=D,D.src=h,D.listener=T,h.addEventListener)P||(X=Te),X===void 0&&(X=!1),h.addEventListener(y.toString(),D,X);else if(h.attachEvent)h.attachEvent(_e(y.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function kn(){function h(T){return y.call(h.src,h.listener,T)}const y=Oe;return h}function _t(h,y,T,D,X){if(Array.isArray(y))for(var ne=0;ne<y.length;ne++)_t(h,y[ne],T,D,X);else D=d(D)?!!D.capture:!!D,T=Fe(T),h&&h[Ze]?(h=h.i,ne=String(y).toString(),ne in h.g&&(y=h.g[ne],T=Ee(y,T,D,X),T>-1&&(ge(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[ne],h.h--)))):h&&(h=Ae(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ee(y,T,D,X)),(T=h>-1?y[h]:null)&&ae(T))}function ae(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ze])pe(y.i,h);else{var T=h.type,D=h.proxy;y.removeEventListener?y.removeEventListener(T,D,h.capture):y.detachEvent?y.detachEvent(_e(T),D):y.addListener&&y.removeListener&&y.removeListener(D),(T=Ae(y))?(pe(T,h),T.h==0&&(T.src=null,y[Pe]=null)):ge(h)}}}function _e(h){return h in Ke?Ke[h]:Ke[h]="on"+h}function Oe(h,y){if(h.da)h=!0;else{y=new Ue(y,this);const T=h.listener,D=h.ha||h.src;h.fa&&ae(h),h=T.call(D,y)}return h}function Ae(h){return h=h[Pe],h instanceof ce?h:null}var ze="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fe(h){return typeof h=="function"?h:(h[ze]||(h[ze]=function(y){return h.handleEvent(y)}),h[ze])}function Qe(){N.call(this),this.i=new ce(this),this.M=this,this.G=null}E(Qe,N),Qe.prototype[Ze]=!0,Qe.prototype.removeEventListener=function(h,y,T,D){_t(this,h,y,T,D)};function Ge(h,y){var T,D=h.G;if(D)for(T=[];D;D=D.G)T.push(D);if(h=h.M,D=y.type||y,typeof y=="string")y=new x(y,h);else if(y instanceof x)y.target=y.target||h;else{var X=y;y=new x(D,h),oe(y,X)}X=!0;let ne,Te;if(T)for(Te=T.length-1;Te>=0;Te--)ne=y.g=T[Te],X=Ve(ne,D,!0,y)&&X;if(ne=y.g=h,X=Ve(ne,D,!0,y)&&X,X=Ve(ne,D,!1,y)&&X,T)for(Te=0;Te<T.length;Te++)ne=y.g=T[Te],X=Ve(ne,D,!1,y)&&X}Qe.prototype.N=function(){if(Qe.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let D=0;D<T.length;D++)ge(T[D]);delete h.g[y],h.h--}}this.G=null},Qe.prototype.J=function(h,y,T,D){return this.i.add(String(h),y,!1,T,D)},Qe.prototype.K=function(h,y,T,D){return this.i.add(String(h),y,!0,T,D)};function Ve(h,y,T,D){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let X=!0;for(let ne=0;ne<y.length;++ne){const Te=y[ne];if(Te&&!Te.da&&Te.capture==T){const et=Te.listener,an=Te.ha||Te.src;Te.fa&&pe(h.i,Te),X=et.call(an,D)!==!1&&X}}return X&&!D.defaultPrevented}function Dt(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function rn(h){h.g=Dt(()=>{h.g=null,h.i&&(h.i=!1,rn(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Rt extends N{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:rn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _n(h){N.call(this),this.h=h,this.g={}}E(_n,N);var Zn=[];function ki(h){je(h.g,function(y,T){this.g.hasOwnProperty(T)&&ae(y)},h),h.g={}}_n.prototype.N=function(){_n.Z.N.call(this),ki(this)},_n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=c.JSON.stringify,hr=c.JSON.parse,Ts=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function go(){}function va(){}var fr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Lt(){x.call(this,"d")}E(Lt,x);function $n(){x.call(this,"c")}E($n,x);var $t={},bs=null;function _a(){return bs=bs||new Qe}$t.Ia="serverreachability";function Ss(h){x.call(this,$t.Ia,h)}E(Ss,x);function Kn(h){const y=_a();Ge(y,new Ss(y))}$t.STAT_EVENT="statevent";function fi(h,y){x.call(this,$t.STAT_EVENT,h),this.stat=y}E(fi,x);function Kt(h){const y=_a();Ge(y,new fi(y,h))}$t.Ja="timingevent";function xr(h,y){x.call(this,$t.Ja,h),this.size=y}E(xr,x);function dr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function mr(){this.g=!0}mr.prototype.ua=function(){this.g=!1};function yo(h,y,T,D,X,ne){h.info(function(){if(h.g)if(ne){var Te="",et=ne.split("&");for(let St=0;St<et.length;St++){var an=et[St].split("=");if(an.length>1){const Yt=an[0];an=an[1];const Vr=Yt.split("_");Te=Vr.length>=2&&Vr[1]=="type"?Te+(Yt+"="+an+"&"):Te+(Yt+"=redacted&")}}}else Te=null;else Te=ne;return"XMLHTTP REQ ("+D+") [attempt "+X+"]: "+y+`
`+T+`
`+Te})}function Ui(h,y,T,D,X,ne,Te){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+X+"]: "+y+`
`+T+`
`+ne+" "+Te})}function Yn(h,y,T,D){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ul(h,T)+(D?" "+D:"")})}function di(h,y){h.info(function(){return"TIMEOUT: "+y})}mr.prototype.info=function(){};function Ul(h,y){if(!h.g)return y;if(!y)return null;try{const ne=JSON.parse(y);if(ne){for(h=0;h<ne.length;h++)if(Array.isArray(ne[h])){var T=ne[h];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var X=D[0];if(X!="noop"&&X!="stop"&&X!="close")for(let Te=1;Te<D.length;Te++)D[Te]=""}}}}return An(ne)}catch{return y}}var ji={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},L={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},G;function ee(){}E(ee,go),ee.prototype.g=function(){return new XMLHttpRequest},G=new ee;function de(h){return encodeURIComponent(String(h))}function ye(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function we(h,y,T,D){this.j=h,this.i=y,this.l=T,this.S=D||1,this.V=new _n(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ie}function Ie(){this.i=null,this.g="",this.h=!1}var ve={},be={};function Ce(h,y,T){h.M=1,h.A=As(xt(y)),h.u=T,h.R=!0,He(h,null)}function He(h,y){h.F=Date.now(),Nt(h),h.B=xt(h.A);var T=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),_o(T.i,"t",D),h.C=0,T=h.j.L,h.h=new Ie,h.g=Yc(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Rt(g(h.Y,h,h.g),h.P)),y=h.V,T=h.g,D=h.ba;var X="readystatechange";Array.isArray(X)||(X&&(Zn[0]=X.toString()),X=Zn);for(let ne=0;ne<X.length;ne++){const Te=lt(T,X[ne],D||y.handleEvent,!1,y.h||y);if(!Te)break;y.g[Te.key]=Te}y=h.J?j(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Kn(),yo(h.i,h.v,h.B,h.l,h.S,h.u)}we.prototype.ba=function(h){h=h.target;const y=this.O;y&&Jr(h)==3?y.j():this.Y(h)},we.prototype.Y=function(h){try{if(h==this.g)e:{const et=Jr(this.g),an=this.g.ya(),St=this.g.ca();if(!(et<3)&&(et!=3||this.g&&(this.h.h||this.g.la()||In(this.g)))){this.K||et!=4||an==7||(an==8||St<=0?Kn(3):Kn(2)),Ut(this);var y=this.g.ca();this.X=y;var T=xe(this);if(this.o=y==200,Ui(this.i,this.v,this.B,this.l,this.S,et,y),this.o){if(this.U&&!this.L){t:{if(this.g){var D,X=this.g;if((D=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(D)){var ne=D;break t}}ne=null}if(h=ne)Yn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wn(this,h);else{this.o=!1,this.m=3,Kt(12),jt(this),nt(this);break e}}if(this.R){h=!0;let Yt;for(;!this.K&&this.C<T.length;)if(Yt=at(this,T),Yt==be){et==4&&(this.m=4,Kt(14),h=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==ve){this.m=4,Kt(15),Yn(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Yn(this.i,this.l,Yt,null),wn(this,Yt);if(Ye(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||T.length!=0||this.h.h||(this.m=1,Kt(16),h=!1),this.o=this.o&&h,!h)Yn(this.i,this.l,T,"[Invalid Chunked Response]"),jt(this),nt(this);else if(T.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Kl(Te),Te.P=!0,Kt(11))}}else Yn(this.i,this.l,T,null),wn(this,T);et==4&&jt(this),this.o&&!this.K&&(et==4?qc(this.j,this):(this.o=!1,Nt(this)))}else Bi(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),jt(this),nt(this)}}}catch{}finally{}};function xe(h){if(!Ye(h))return h.g.la();const y=In(h.g);if(y==="")return"";let T="";const D=y.length,X=Jr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return jt(h),nt(h),"";h.h.i=new c.TextDecoder}for(let ne=0;ne<D;ne++)h.h.h=!0,T+=h.h.i.decode(y[ne],{stream:!(X&&ne==D-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function Ye(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function at(h,y){var T=h.C,D=y.indexOf(`
`,T);return D==-1?be:(T=Number(y.substring(T,D)),isNaN(T)?ve:(D+=1,D+T>y.length?be:(y=y.slice(D,D+T),h.C=D+T,y)))}we.prototype.cancel=function(){this.K=!0,jt(this)};function Nt(h){h.T=Date.now()+h.H,Ft(h,h.H)}function Ft(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=dr(g(h.aa,h),y)}function Ut(h){h.D&&(c.clearTimeout(h.D),h.D=null)}we.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(di(this.i,this.B),this.M!=2&&(Kn(),Kt(17)),jt(this),this.m=2,nt(this)):Ft(this,this.T-h)};function nt(h){h.j.I==0||h.K||qc(h.j,h)}function jt(h){Ut(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,ki(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function wn(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||jn(T.h,h))){if(!h.L&&jn(T.h,h)&&T.I==3){try{var D=T.Ba.g.parse(y)}catch{D=null}if(Array.isArray(D)&&D.length==3){var X=D;if(X[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Ao(T),Ca(T);else break e;xs(T),Kt(18)}}else T.xa=X[1],0<T.xa-T.K&&X[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=dr(g(T.Va,T),6e3));tr(T.h)<=1&&T.ta&&(T.ta=void 0)}else Ti(T,11)}else if((h.L||T.g==h)&&Ao(T),!O(y))for(X=T.Ba.g.parse(y),y=0;y<X.length;y++){let St=X[y];const Yt=St[0];if(!(Yt<=T.K))if(T.K=Yt,St=St[1],T.I==2)if(St[0]=="c"){T.M=St[1],T.ba=St[2];const Vr=St[3];Vr!=null&&(T.ka=Vr,T.j.info("VER="+T.ka));const bi=St[4];bi!=null&&(T.za=bi,T.j.info("SVER="+T.za));const Zr=St[5];Zr!=null&&typeof Zr=="number"&&Zr>0&&(D=1.5*Zr,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const ei=h.g;if(ei){const Os=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Os){var ne=D.h;ne.g||Os.indexOf("spdy")==-1&&Os.indexOf("quic")==-1&&Os.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(pr(ne,ne.h),ne.h=null))}if(D.G){const wo=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;wo&&(D.wa=wo,bt(D.J,D.G,wo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var Te=h;if(D.na=Kc(D,D.L?D.ba:null,D.W),Te.L){mi(D.h,Te);var et=Te,an=D.O;an&&(et.H=an),et.D&&(Ut(et),Nt(et)),D.g=Te}else Fc(D);T.i.length>0&&Ei(T)}else St[0]!="stop"&&St[0]!="close"||Ti(T,7);else T.I==3&&(St[0]=="stop"||St[0]=="close"?St[0]=="stop"?Ti(T,7):Gl(T):St[0]!="noop"&&T.l&&T.l.qa(St),T.A=0)}}Kn(4)}catch{}}var zt=class{constructor(h,y){this.g=h,this.map=y}};function er(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Un(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function tr(h){return h.h?1:h.g?h.g.size:0}function jn(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function pr(h,y){h.g?h.g.add(y):h.h=y}function mi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}er.prototype.cancel=function(){if(this.i=pi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function pi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return C(h.i)}var ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xt(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const D=h[T].indexOf("=");let X,ne=null;D>=0?(X=h[T].substring(0,D),ne=h[T].substring(D+1)):X=h[T],y(X,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function cn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof cn?(this.l=h.l,rt(this,h.j),this.o=h.o,this.g=h.g,gr(this,h.u),this.h=h.h,Ea(this,zc(h.i)),this.m=h.m):h&&(y=String(h).match(ot))?(this.l=!1,rt(this,y[1]||"",!0),this.o=gi(y[2]||""),this.g=gi(y[3]||"",!0),gr(this,y[4]),this.h=gi(y[5]||"",!0),Ea(this,y[6]||"",!0),this.m=gi(y[7]||"")):(this.l=!1,this.i=new ba(null,this.l))}cn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ws(y,vo,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ws(y,vo,!0),"@"),h.push(de(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(ws(T,T.charAt(0)=="/"?jl:kc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",ws(T,Uc)),h.join("")},cn.prototype.resolve=function(h){const y=xt(this);let T=!!h.j;T?rt(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var D=h.h;if(T)gr(y,h.u);else if(T=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var X=y.h.lastIndexOf("/");X!=-1&&(D=y.h.slice(0,X+1)+D)}if(X=D,X==".."||X==".")D="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){D=X.lastIndexOf("/",0)==0,X=X.split("/");const ne=[];for(let Te=0;Te<X.length;){const et=X[Te++];et=="."?D&&Te==X.length&&ne.push(""):et==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),D&&Te==X.length&&ne.push("")):(ne.push(et),D=!0)}D=ne.join("/")}else D=X}return T?y.h=D:T=h.i.toString()!=="",T?Ea(y,zc(h.i)):T=!!h.m,T&&(y.m=h.m),y};function xt(h){return new cn(h)}function rt(h,y,T){h.j=T?gi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function gr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ea(h,y,T){y instanceof ba?(h.i=y,Eo(h.i,h.l)):(T||(y=ws(y,Ta)),h.i=new ba(y,h.l))}function bt(h,y,T){h.i.set(y,T)}function As(h){return bt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function gi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ws(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,nr),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function nr(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var vo=/[#\/\?@]/g,kc=/[#\?:]/g,jl=/[#\?]/g,Ta=/[#\?@]/g,Uc=/#/g;function ba(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function rr(h){h.g||(h.g=new Map,h.h=0,h.i&&Xt(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=ba.prototype,n.add=function(h,y){rr(this),this.i=null,h=Sa(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function jc(h,y){rr(h),y=Sa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function zl(h,y){return rr(h),y=Sa(h,y),h.g.has(y)}n.forEach=function(h,y){rr(this),this.g.forEach(function(T,D){T.forEach(function(X){h.call(y,X,D,this)},this)},this)};function Bl(h,y){rr(h);let T=[];if(typeof y=="string")zl(h,y)&&(T=T.concat(h.g.get(Sa(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}n.set=function(h,y){return rr(this),this.i=null,h=Sa(this,h),zl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=Bl(this,h),h.length>0?String(h[0]):y):y};function _o(h,y,T){jc(h,y),T.length>0&&(h.i=null,h.g.set(Sa(h,y),C(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let D=0;D<y.length;D++){var T=y[D];const X=de(T);T=Bl(this,T);for(let ne=0;ne<T.length;ne++){let Te=X;T[ne]!==""&&(Te+="="+de(T[ne])),h.push(Te)}}return this.i=h.join("&")};function zc(h){const y=new ba;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Sa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Eo(h,y){y&&!h.j&&(rr(h),h.i=null,h.g.forEach(function(T,D){const X=D.toLowerCase();D!=X&&(jc(this,D),_o(this,X,T))},h)),h.j=y}function Xr(h,y){const T=new mr;if(c.Image){const D=new Image;D.onload=v(Or,T,"TestLoadImage: loaded",!0,y,D),D.onerror=v(Or,T,"TestLoadImage: error",!1,y,D),D.onabort=v(Or,T,"TestLoadImage: abort",!1,y,D),D.ontimeout=v(Or,T,"TestLoadImage: timeout",!1,y,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else y(!1)}function Fl(h,y){const T=new mr,D=new AbortController,X=setTimeout(()=>{D.abort(),Or(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:D.signal}).then(ne=>{clearTimeout(X),ne.ok?Or(T,"TestPingServer: ok",!0,y):Or(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(X),Or(T,"TestPingServer: error",!1,y)})}function Or(h,y,T,D,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),D(T)}catch{}}function Aa(){this.g=new Ts}function yi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(yi,go),yi.prototype.g=function(){return new Rs(this.i,this.h)};function Rs(h,y){Qe.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Rs,Qe),n=Rs.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Wr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wa(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;To(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function To(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?wa(this):Wr(this),this.readyState==3&&To(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,wa(this))},n.Na=function(h){this.g&&(this.response=h,wa(this))},n.ga=function(){this.g&&wa(this)};function wa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Wr(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Wr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Mr(h){let y="";return je(h,function(T,D){y+=D,y+=":",y+=T,y+=`\r
`}),y}function Cs(h,y,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=Mr(T),typeof h=="string"?T!=null&&de(T):bt(h,y,T))}function Ot(h){Qe.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Ot,Qe);var vi=/^https?$/i,Hl=["POST","PUT"];n=Ot.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():G.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ne){Is(this,ne);return}if(h=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var X in D)T.set(X,D[X]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ne of D.keys())T.set(ne,D.get(ne));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Hl,y,void 0)>=0)||D||X||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Te]of T)this.g.setRequestHeader(ne,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ne){Is(this,ne)}};function Is(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,ql(h),zi(h)}function ql(h){h.A||(h.A=!0,Ge(h,"complete"),Ge(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ge(this,"complete"),Ge(this,"abort"),zi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),Ot.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ds(this):this.Xa())},n.Xa=function(){Ds(this)};function Ds(h){if(h.h&&typeof l<"u"){if(h.v&&Jr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ge(h,"readystatechange"),Jr(h)==4){h.h=!1;try{const ne=h.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var D;if(D=ne===0){let Te=String(h.D).match(ot)[1]||null;!Te&&c.self&&c.self.location&&(Te=c.self.location.protocol.slice(0,-1)),D=!vi.test(Te?Te.toLowerCase():"")}T=D}if(T)Ge(h,"complete"),Ge(h,"success");else{h.o=6;try{var X=Jr(h)>2?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.ca()+"]",ql(h)}}finally{zi(h)}}}}function zi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||Ge(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Jr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Jr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),hr(y)}};function In(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(h){const y={};h=(h.g&&Jr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(O(h[D]))continue;var T=ye(h[D]);const X=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ne=y[X]||[];y[X]=ne,ne.push(T)}Me(y,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _i(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Ra(h){this.za=0,this.i=[],this.j=new mr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_i("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_i("baseRetryDelayMs",5e3,h),this.Za=_i("retryDelaySeedMs",1e4,h),this.Ta=_i("forwardChannelMaxRetries",2,h),this.va=_i("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new er(h&&h.concurrentRequestLimit),this.Ba=new Aa,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ra.prototype,n.ka=8,n.I=1,n.connect=function(h,y,T,D){Kt(0),this.W=h,this.H=y||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=Kc(this,null,this.W),Ei(this)};function Gl(h){if(bo(h),h.I==3){var y=h.V++,T=xt(h.J);if(bt(T,"SID",h.M),bt(T,"RID",y),bt(T,"TYPE","terminate"),Ns(h,T),y=new we(h,h.j,y),y.M=2,y.A=As(xt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=Yc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Nt(y)}$c(h)}function Ca(h){h.g&&(Kl(h),h.g.cancel(),h.g=null)}function bo(h){Ca(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ao(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ei(h){if(!Un(h.h)&&!h.m){h.m=!0;var y=h.Ea;re||A(),Y||(re(),Y=!0),b.add(y,h),h.D=0}}function So(h,y){return tr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=dr(g(h.Ea,h,y),Gc(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const X=new we(this,this.j,h);let ne=this.o;if(this.U&&(ne?(ne=j(ne),oe(ne,this.U)):ne=this.U),this.u!==null||this.R||(X.J=ne,ne=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(y+=D,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=Bc(this,X,y),T=xt(this.J),bt(T,"RID",h),bt(T,"CVER",22),this.G&&bt(T,"X-HTTP-Session-Id",this.G),Ns(this,T),ne&&(this.R?y="headers="+de(Mr(ne))+"&"+y:this.u&&Cs(T,this.u,ne)),pr(this.h,X),this.Ra&&bt(T,"TYPE","init"),this.S?(bt(T,"$req",y),bt(T,"SID","null"),X.U=!0,Ce(X,T,null)):Ce(X,T,y),this.I=2}}else this.I==3&&(h?$l(this,h):this.i.length==0||Un(this.h)||$l(this))};function $l(h,y){var T;y?T=y.l:T=h.V++;const D=xt(h.J);bt(D,"SID",h.M),bt(D,"RID",T),bt(D,"AID",h.K),Ns(h,D),h.u&&h.o&&Cs(D,h.u,h.o),T=new we(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Bc(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),pr(h.h,T),Ce(T,D,y)}function Ns(h,y){h.H&&je(h.H,function(T,D){bt(y,D,T)}),h.l&&je({},function(T,D){bt(y,D,T)})}function Bc(h,y,T){T=Math.min(h.i.length,T);const D=h.l?g(h.l.Ka,h.l,h):null;e:{var X=h.i;let et=-1;for(;;){const an=["count="+T];et==-1?T>0?(et=X[0].g,an.push("ofs="+et)):et=0:an.push("ofs="+et);let St=!0;for(let Yt=0;Yt<T;Yt++){var ne=X[Yt].g;const Vr=X[Yt].map;if(ne-=et,ne<0)et=Math.max(0,X[Yt].g-100),St=!1;else try{ne="req"+ne+"_"||"";try{var Te=Vr instanceof Map?Vr:Object.entries(Vr);for(const[bi,Zr]of Te){let ei=Zr;d(Zr)&&(ei=An(Zr)),an.push(ne+bi+"="+encodeURIComponent(ei))}}catch(bi){throw an.push(ne+"type="+encodeURIComponent("_badmap")),bi}}catch{D&&D(Vr)}}if(St){Te=an.join("&");break e}}Te=void 0}return h=h.i.splice(0,T),y.G=h,Te}function Fc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;re||A(),Y||(re(),Y=!0),b.add(y,h),h.A=0}}function xs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=dr(g(h.Da,h),Gc(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Hc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=dr(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),Ca(this),Hc(this))};function Kl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Hc(h){h.g=new we(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=xt(h.na);bt(y,"RID","rpc"),bt(y,"SID",h.M),bt(y,"AID",h.K),bt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&bt(y,"TO",h.ia),bt(y,"TYPE","xmlhttp"),Ns(h,y),h.u&&h.o&&Cs(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=As(xt(y)),T.u=null,T.R=!0,He(T,h)}n.Va=function(){this.C!=null&&(this.C=null,Ca(this),xs(this),Kt(19))};function Ao(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function qc(h,y){var T=null;if(h.g==y){Ao(h),Kl(h),h.g=null;var D=2}else if(jn(h.h,y))T=y.G,mi(h.h,y),D=1;else return;if(h.I!=0){if(y.o)if(D==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var X=h.D;D=_a(),Ge(D,new xr(D,T)),Ei(h)}else Fc(h);else if(X=y.m,X==3||X==0&&y.X>0||!(D==1&&So(h,y)||D==2&&xs(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),X){case 1:Ti(h,5);break;case 4:Ti(h,10);break;case 3:Ti(h,6);break;default:Ti(h,2)}}}function Gc(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function Ti(h,y){if(h.j.info("Error code "+y),y==2){var T=g(h.bb,h),D=h.Ua;const X=!D;D=new cn(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||rt(D,"https"),As(D),X?Xr(D.toString(),T):Fl(D.toString(),T)}else Kt(2);h.I=0,h.l&&h.l.pa(y),$c(h),bo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function $c(h){if(h.I=0,h.ja=[],h.l){const y=pi(h.h);(y.length!=0||h.i.length!=0)&&(U(h.ja,y),U(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function Kc(h,y,T){var D=T instanceof cn?xt(T):new cn(T);if(D.g!="")y&&(D.g=y+"."+D.g),gr(D,D.u);else{var X=c.location;D=X.protocol,y=y?y+"."+X.hostname:X.hostname,X=+X.port;const ne=new cn(null);D&&rt(ne,D),y&&(ne.g=y),X&&gr(ne,X),T&&(ne.h=T),D=ne}return T=h.G,y=h.wa,T&&y&&bt(D,T,y),bt(D,"VER",h.ka),Ns(h,D),D}function Yc(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Ot(new yi({ab:T})):new Ot(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qc(){}n=Qc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ia(){}Ia.prototype.g=function(h,y){return new Qn(h,y)};function Qn(h,y){Qe.call(this),this.g=new Ra(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!O(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Fi(this)}E(Qn,Qe),Qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){Gl(this.g)},Qn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=An(h),h=T);y.i.push(new zt(y.Ya++,h)),y.I==3&&Ei(y)},Qn.prototype.N=function(){this.g.l=null,delete this.j,Gl(this.g),delete this.g,Qn.Z.N.call(this)};function Xc(h){Lt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Xc,Lt);function Wc(){$n.call(this),this.status=1}E(Wc,$n);function Fi(h){this.g=h}E(Fi,Qc),Fi.prototype.ra=function(){Ge(this.g,"a")},Fi.prototype.qa=function(h){Ge(this.g,new Xc(h))},Fi.prototype.pa=function(h){Ge(this.g,new Wc)},Fi.prototype.oa=function(){Ge(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,RA=function(){return new Ia},wA=function(){return _a()},AA=$t,Vg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,yf=ji,L.COMPLETE="complete",SA=L,va.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",Qe.prototype.listen=Qe.prototype.J,Uu=va,Ot.prototype.listenOnce=Ot.prototype.K,Ot.prototype.getLastError=Ot.prototype.Ha,Ot.prototype.getLastErrorCode=Ot.prototype.ya,Ot.prototype.getStatus=Ot.prototype.ca,Ot.prototype.getResponseJson=Ot.prototype.La,Ot.prototype.getResponseText=Ot.prototype.la,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Fa,bA=Ot}).apply(typeof af<"u"?af:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hn.UNAUTHENTICATED=new Hn(null),Hn.GOOGLE_CREDENTIALS=new Hn("google-credentials-uid"),Hn.FIRST_PARTY=new Hn("first-party-uid"),Hn.MOCK_USER=new Hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="12.8.0";function x2(n){Ol=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new _y("@firebase/firestore");function rl(){return io.logLevel}function Re(n,...e){if(io.logLevel<=dt.DEBUG){const t=e.map(by);io.debug(`Firestore (${Ol}): ${n}`,...t)}}function fa(n,...e){if(io.logLevel<=dt.ERROR){const t=e.map(by);io.error(`Firestore (${Ol}): ${n}`,...t)}}function vl(n,...e){if(io.logLevel<=dt.WARN){const t=e.map(by);io.warn(`Firestore (${Ol}): ${n}`,...t)}}function by(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,CA(n,a,t)}function CA(n,e,t){let a=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw fa(a),new Error(a)}function wt(n,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,n||CA(e,s,a)}function Je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends ya{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Hn.UNAUTHENTICATED)))}shutdown(){}}class M2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class V2{constructor(e){this.t=e,this.currentUser=Hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(this.o===void 0,42304);let a=this.i;const s=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let l=new ua;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ua,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await s(this.currentUser)}))},d=p=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ua)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(wt(typeof a.accessToken=="string",31837,{l:a}),new IA(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new Hn(e)}}class P2{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Hn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class L2{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new P2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class B0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class k2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ii(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){wt(this.o===void 0,3512);const a=l=>{l.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const s=l=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new B0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(wt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new B0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=U2(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function mt(n,e){return n<e?-1:n>e?1:0}function Pg(n,e){const t=Math.min(n.length,e.length);for(let a=0;a<t;a++){const s=n.charAt(a),l=e.charAt(a);if(s!==l)return hg(s)===hg(l)?mt(s,l):hg(s)?1:-1}return mt(n.length,e.length)}const j2=55296,z2=57343;function hg(n){const e=n.charCodeAt(0);return e>=j2&&e<=z2}function _l(n,e,t){return n.length===e.length&&n.every(((a,s)=>t(a,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="__name__";class Ci{constructor(e,t,a){t===void 0?t=0:t>e.length&&qe(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&qe(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Ci.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ci?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=Ci.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return mt(e.length,t.length)}static compareSegments(e,t){const a=Ci.isNumericId(e),s=Ci.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?Ci.extractNumericId(e).compare(Ci.extractNumericId(t)):Pg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class Bt extends Ci{construct(e,t,a){return new Bt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Se(ue.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((s=>s.length>0)))}return new Bt(t)}static emptyPath(){return new Bt([])}}const B2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends Ci{construct(e,t,a){return new Pn(e,t,a)}static isValidIdentifier(e){return B2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===F0}static keyField(){return new Pn([F0])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new Se(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Se(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Se(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(a+=d,s++):(l(),s++)}if(l(),c)throw new Se(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(t)}static emptyPath(){return new Pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(Bt.fromString(e))}static fromName(e){return new ke(Bt.fromString(e).popFirst(5))}static empty(){return new ke(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new Bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(n,e,t){if(!t)throw new Se(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function F2(n,e,t,a){if(e===!0&&a===!0)throw new Se(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function H0(n){if(!ke.isDocumentKey(n))throw new Se(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function q0(n){if(ke.isDocumentKey(n))throw new Se(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function NA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Td(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":qe(12329,{type:typeof n})}function Cr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Td(n);throw new Se(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Tc(n,e){if(!NA(n))throw new Se(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const s=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){t=`JSON missing required field: '${a}'`;break}const c=n[a];if(s&&typeof c!==s){t=`JSON field '${a}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new Se(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=-62135596800,$0=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*$0);return new Gt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<G0)throw new Se(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$0}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tc(e,Gt._jsonSchema))return new Gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-G0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:yn("string",Gt._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Gt(0,0))}static max(){return new Xe(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=-1;function H2(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,s=Xe.fromTimestamp(a===1e9?new Gt(t+1,0):new Gt(t,a));return new fs(s,ke.empty(),e)}function q2(n){return new fs(n.readTime,n.key,ac)}class fs{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new fs(Xe.min(),ke.empty(),ac)}static max(){return new fs(Xe.max(),ke.empty(),ac)}}function G2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(n.documentKey,e.documentKey),t!==0?t:mt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==$2)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,a)=>{t(e)}))}static reject(e){return new fe(((t,a)=>{a(e)}))}static waitFor(e){return new fe(((t,a)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(p=>a(p)))})),c=!0,l===s&&t()}))}static or(e){let t=fe.resolve(!1);for(const a of e)t=t.next((s=>s?fe.resolve(s):a()));return t}static forEach(e,t){const a=[];return e.forEach(((s,l)=>{a.push(t.call(this,s,l))})),this.waitFor(a)}static mapArray(e,t){return new fe(((a,s)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&a(c)}),(v=>s(v)))}}))}static doWhile(e,t){return new fe(((a,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):a()};l()}))}}function Y2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=-1;function Sd(n){return n==null}function Bf(n){return n===0&&1/n==-1/0}function Q2(n){return typeof n=="number"&&Number.isInteger(n)&&!Bf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="";function X2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=K0(e)),e=W2(n.get(t),e);return K0(e)}function W2(n,e){let t=e;const a=n.length;for(let s=0;s<a;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case xA:t+="";break;default:t+=l}}return t}function K0(n){return n+xA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _s(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function OA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t){this.comparator=e,this.root=t||Vn.EMPTY}insert(e,t){return new Zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sf(this.root,e,this.comparator,!0)}}class sf{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??Vn.RED,this.left=s??Vn.EMPTY,this.right=l??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new Vn(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Vn.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qe(27949);return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw qe(57766)}get value(){throw qe(16141)}get color(){throw qe(16727)}get left(){throw qe(29726)}get right(){throw qe(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new Vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.comparator=e,this.data=new Zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Q0(this.data.getIterator())}getIteratorFrom(e){return new Q0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tn(this.comparator);return t.data=e,t}}class Q0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new wr([])}unionWith(e){let t=new Tn(Pn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new wr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _l(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new MA("Invalid base64 string: "+l):l}})(e);return new Ln(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new Ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ln.EMPTY_BYTE_STRING=new Ln("");const J2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(n){if(wt(!!n,39018),typeof n=="string"){let e=0;const t=J2.exec(n);if(wt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:ln(n.seconds),nanos:ln(n.nanos)}}function ln(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ms(n){return typeof n=="string"?Ln.fromBase64String(n):Ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="server_timestamp",PA="__type__",LA="__previous_value__",kA="__local_write_time__";function wy(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[PA])==null?void 0:a.stringValue)===VA}function Ad(n){const e=n.mapValue.fields[LA];return wy(e)?Ad(e):e}function sc(n){const e=ds(n.mapValue.fields[kA].timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,t,a,s,l,c,d,p,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=E}}const Ff="(default)";class oc{constructor(e,t){this.projectId=e,this.database=t||Ff}static empty(){return new oc("","")}get isDefaultDatabase(){return this.database===Ff}isEqual(e){return e instanceof oc&&e.projectId===this.projectId&&e.database===this.database}}function eO(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Se(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="__type__",tO="__max__",of={mapValue:{}},jA="__vector__",Hf="value";function ps(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wy(n)?4:rO(n)?9007199254740991:nO(n)?10:11:qe(28295,{value:n})}function Pi(n,e){if(n===e)return!0;const t=ps(n);if(t!==ps(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sc(n).isEqual(sc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=ds(s.timestampValue),d=ds(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return ms(s.bytesValue).isEqual(ms(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return ln(s.geoPointValue.latitude)===ln(l.geoPointValue.latitude)&&ln(s.geoPointValue.longitude)===ln(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return ln(s.integerValue)===ln(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=ln(s.doubleValue),d=ln(l.doubleValue);return c===d?Bf(c)===Bf(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return _l(n.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if(Y0(c)!==Y0(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Pi(c[p],d[p])))return!1;return!0})(n,e);default:return qe(52216,{left:n})}}function lc(n,e){return(n.values||[]).find((t=>Pi(t,e)))!==void 0}function El(n,e){if(n===e)return 0;const t=ps(n),a=ps(e);if(t!==a)return mt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return mt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=ln(l.integerValue||l.doubleValue),p=ln(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return X0(n.timestampValue,e.timestampValue);case 4:return X0(sc(n),sc(e));case 5:return Pg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=ms(l),p=ms(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=mt(d[g],p[g]);if(v!==0)return v}return mt(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=mt(ln(l.latitude),ln(c.latitude));return d!==0?d:mt(ln(l.longitude),ln(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return W0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,C,U,B;const d=l.fields||{},p=c.fields||{},g=(S=d[Hf])==null?void 0:S.arrayValue,v=(C=p[Hf])==null?void 0:C.arrayValue,E=mt(((U=g==null?void 0:g.values)==null?void 0:U.length)||0,((B=v==null?void 0:v.values)==null?void 0:B.length)||0);return E!==0?E:W0(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===of.mapValue&&c===of.mapValue)return 0;if(l===of.mapValue)return 1;if(c===of.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const S=Pg(p[E],v[E]);if(S!==0)return S;const C=El(d[p[E]],g[v[E]]);if(C!==0)return C}return mt(p.length,v.length)})(n.mapValue,e.mapValue);default:throw qe(23264,{he:t})}}function X0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return mt(n,e);const t=ds(n),a=ds(e),s=mt(t.seconds,a.seconds);return s!==0?s:mt(t.nanos,a.nanos)}function W0(n,e){const t=n.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=El(t[s],a[s]);if(l)return l}return mt(t.length,a.length)}function Tl(n){return Lg(n)}function Lg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const a=ds(t);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ms(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ke.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=Lg(l);return a+"]"})(n.arrayValue):"mapValue"in n?(function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of a)l?l=!1:s+=",",s+=`${c}:${Lg(t.fields[c])}`;return s+"}"})(n.mapValue):qe(61005,{value:n})}function vf(n){switch(ps(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ad(n);return e?16+vf(e):16;case 5:return 2*n.stringValue.length;case 6:return ms(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((s,l)=>s+vf(l)),0)})(n.arrayValue);case 10:case 11:return(function(a){let s=0;return _s(a.fields,((l,c)=>{s+=l.length+vf(c)})),s})(n.mapValue);default:throw qe(13486,{value:n})}}function J0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kg(n){return!!n&&"integerValue"in n}function Ry(n){return!!n&&"arrayValue"in n}function Z0(n){return!!n&&"nullValue"in n}function eb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _f(n){return!!n&&"mapValue"in n}function nO(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[UA])==null?void 0:a.stringValue)===jA}function $u(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return _s(n.mapValue.fields,((t,a)=>e.mapValue.fields[t]=$u(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$u(n.arrayValue.values[t]);return e}return{...n}}function rO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.value=e}static empty(){return new cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!_f(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$u(t)}setAll(e){let t=Pn.emptyPath(),a={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,a,s),a={},s=[],t=d.popLast()}c?a[d.lastSegment()]=$u(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());_f(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];_f(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){_s(t,((s,l)=>e[s]=l));for(const s of a)delete e[s]}clone(){return new cr($u(this.value))}}function zA(n){const e=[];return _s(n.fields,((t,a)=>{const s=new Pn([t]);if(_f(a)){const l=zA(a.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new wr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t,a,s,l,c,d){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new qn(e,0,Xe.min(),Xe.min(),Xe.min(),cr.empty(),0)}static newFoundDocument(e,t,a,s){return new qn(e,1,t,Xe.min(),a,s,0)}static newNoDocument(e,t){return new qn(e,2,t,Xe.min(),Xe.min(),cr.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,Xe.min(),Xe.min(),cr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t){this.position=e,this.inclusive=t}}function tb(n,e,t){let a=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?a=ke.comparator(ke.fromName(c.referenceValue),t.key):a=El(c,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function nb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t="asc"){this.field=e,this.dir=t}}function iO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{}class gn extends BA{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new sO(e,t,a):t==="array-contains"?new uO(e,a):t==="in"?new cO(e,a):t==="not-in"?new hO(e,a):t==="array-contains-any"?new fO(e,a):new gn(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new oO(e,a):new lO(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(El(t,this.value)):t!==null&&ps(this.value)===ps(t)&&this.matchesComparison(El(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends BA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ui(e,t)}matches(e){return FA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function FA(n){return n.op==="and"}function HA(n){return aO(n)&&FA(n)}function aO(n){for(const e of n.filters)if(e instanceof ui)return!1;return!0}function Ug(n){if(n instanceof gn)return n.field.canonicalString()+n.op.toString()+Tl(n.value);if(HA(n))return n.filters.map((e=>Ug(e))).join(",");{const e=n.filters.map((t=>Ug(t))).join(",");return`${n.op}(${e})`}}function qA(n,e){return n instanceof gn?(function(a,s){return s instanceof gn&&a.op===s.op&&a.field.isEqual(s.field)&&Pi(a.value,s.value)})(n,e):n instanceof ui?(function(a,s){return s instanceof ui&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce(((l,c,d)=>l&&qA(c,s.filters[d])),!0):!1})(n,e):void qe(19439)}function GA(n){return n instanceof gn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Tl(t.value)}`})(n):n instanceof ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(GA).join(" ,")+"}"})(n):"Filter"}class sO extends gn{constructor(e,t,a){super(e,t,a),this.key=ke.fromName(a.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class oO extends gn{constructor(e,t){super(e,"in",t),this.keys=$A("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lO extends gn{constructor(e,t){super(e,"not-in",t),this.keys=$A("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function $A(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>ke.fromName(a.referenceValue)))}class uO extends gn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ry(t)&&lc(t.arrayValue,this.value)}}class cO extends gn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&lc(this.value.arrayValue,t)}}class hO extends gn{constructor(e,t){super(e,"not-in",t)}matches(e){if(lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!lc(this.value.arrayValue,t)}}class fO extends gn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ry(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>lc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,t=null,a=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function rb(n,e=null,t=[],a=[],s=null,l=null,c=null){return new dO(n,e,t,a,s,l,c)}function Cy(n){const e=Je(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>Ug(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),Sd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>Tl(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>Tl(a))).join(",")),e.Te=t}return e.Te}function Iy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!qA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nb(n.startAt,e.startAt)&&nb(n.endAt,e.endAt)}function jg(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t=null,a=[],s=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function mO(n,e,t,a,s,l,c,d){return new bc(n,e,t,a,s,l,c,d)}function wd(n){return new bc(n)}function ib(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pO(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function KA(n){return n.collectionGroup!==null}function Ku(n){const e=Je(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Tn(Pn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Gf(l,a))})),t.has(Pn.keyField().canonicalString())||e.Ie.push(new Gf(Pn.keyField(),a))}return e.Ie}function Ni(n){const e=Je(n);return e.Ee||(e.Ee=gO(e,Ku(n))),e.Ee}function gO(n,e){if(n.limitType==="F")return rb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new Gf(s.field,l)}));const t=n.endAt?new qf(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new qf(n.startAt.position,n.startAt.inclusive):null;return rb(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function zg(n,e){const t=n.filters.concat([e]);return new bc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Bg(n,e,t){return new bc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rd(n,e){return Iy(Ni(n),Ni(e))&&n.limitType===e.limitType}function YA(n){return`${Cy(Ni(n))}|lt:${n.limitType}`}function il(n){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((s=>GA(s))).join(", ")}]`),Sd(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>Tl(s))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>Tl(s))).join(",")),`Target(${a})`})(Ni(n))}; limitType=${n.limitType})`}function Cd(n,e){return e.isFoundDocument()&&(function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):ke.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(n,e)&&(function(a,s){for(const l of Ku(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(a,s){return!(a.startAt&&!(function(c,d,p){const g=tb(c,d,p);return c.inclusive?g<=0:g<0})(a.startAt,Ku(a),s)||a.endAt&&!(function(c,d,p){const g=tb(c,d,p);return c.inclusive?g>=0:g>0})(a.endAt,Ku(a),s))})(n,e)}function yO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QA(n){return(e,t)=>{let a=!1;for(const s of Ku(n)){const l=vO(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function vO(n,e,t){const a=n.field.isKeyField()?ke.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?El(p,g):qe(42886)})(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return qe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,((t,a)=>{for(const[s,l]of a)e(s,l)}))}isEmpty(){return OA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=new Zt(ke.comparator);function da(){return _O}const XA=new Zt(ke.comparator);function ju(...n){let e=XA;for(const t of n)e=e.insert(t.key,t);return e}function WA(n){let e=XA;return n.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function Xs(){return Yu()}function JA(){return Yu()}function Yu(){return new co((n=>n.toString()),((n,e)=>n.isEqual(e)))}const EO=new Zt(ke.comparator),TO=new Tn(ke.comparator);function pt(...n){let e=TO;for(const t of n)e=e.add(t);return e}const bO=new Tn(mt);function SO(){return bO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bf(e)?"-0":e}}function ZA(n){return{integerValue:""+n}}function AO(n,e){return Q2(e)?ZA(e):Dy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(){this._=void 0}}function wO(n,e,t){return n instanceof $f?(function(s,l){const c={fields:{[PA]:{stringValue:VA},[kA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&wy(l)&&(l=Ad(l)),l&&(c.fields[LA]=l),{mapValue:c}})(t,e):n instanceof uc?tw(n,e):n instanceof cc?nw(n,e):(function(s,l){const c=ew(s,l),d=ab(c)+ab(s.Ae);return kg(c)&&kg(s.Ae)?ZA(d):Dy(s.serializer,d)})(n,e)}function RO(n,e,t){return n instanceof uc?tw(n,e):n instanceof cc?nw(n,e):t}function ew(n,e){return n instanceof Kf?(function(a){return kg(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class $f extends Id{}class uc extends Id{constructor(e){super(),this.elements=e}}function tw(n,e){const t=rw(e);for(const a of n.elements)t.some((s=>Pi(s,a)))||t.push(a);return{arrayValue:{values:t}}}class cc extends Id{constructor(e){super(),this.elements=e}}function nw(n,e){let t=rw(e);for(const a of n.elements)t=t.filter((s=>!Pi(s,a)));return{arrayValue:{values:t}}}class Kf extends Id{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ab(n){return ln(n.integerValue||n.doubleValue)}function rw(n){return Ry(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function CO(n,e){return n.field.isEqual(e.field)&&(function(a,s){return a instanceof uc&&s instanceof uc||a instanceof cc&&s instanceof cc?_l(a.elements,s.elements,Pi):a instanceof Kf&&s instanceof Kf?Pi(a.Ae,s.Ae):a instanceof $f&&s instanceof $f})(n.transform,e.transform)}class IO{constructor(e,t){this.version=e,this.transformResults=t}}class Ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ef(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Dd{}function iw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ny(n.key,Ir.none()):new Sc(n.key,n.data,Ir.none());{const t=n.data,a=cr.empty();let s=new Tn(Pn.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?a.delete(l):a.set(l,c),s=s.add(l)}return new Es(n.key,a,new wr(s.toArray()),Ir.none())}}function DO(n,e,t){n instanceof Sc?(function(s,l,c){const d=s.value.clone(),p=ob(s.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Es?(function(s,l,c){if(!Ef(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=ob(s.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(aw(s)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Qu(n,e,t,a){return n instanceof Sc?(function(l,c,d,p){if(!Ef(l.precondition,c))return d;const g=l.value.clone(),v=lb(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,a):n instanceof Es?(function(l,c,d,p){if(!Ef(l.precondition,c))return d;const g=lb(l.fieldTransforms,p,c),v=c.data;return v.setAll(aw(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,a):(function(l,c,d){return Ef(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function NO(n,e){let t=null;for(const a of n.fieldTransforms){const s=e.data.field(a.field),l=ew(a.transform,s||null);l!=null&&(t===null&&(t=cr.empty()),t.set(a.field,l))}return t||null}function sb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&_l(a,s,((l,c)=>CO(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Sc extends Dd{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Es extends Dd{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function aw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}})),e}function ob(n,e,t){const a=new Map;wt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,d=e.data.field(l.field);a.set(l.field,RO(c,d,t[s]))}return a}function lb(n,e,t){const a=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);a.set(s.field,wO(l,c,e))}return a}class Ny extends Dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xO extends Dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&DO(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Qu(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Qu(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=JA();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const p=iw(c,d);p!==null&&a.set(s.key,p),c.isValidDocument()||c.convertToNoDocument(Xe.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pt())}isEqual(e){return this.batchId===e.batchId&&_l(this.mutations,e.mutations,((t,a)=>sb(t,a)))&&_l(this.baseMutations,e.baseMutations,((t,a)=>sb(t,a)))}}class xy{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){wt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let s=(function(){return EO})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,a[c].version);return new xy(e,t,a,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn,vt;function PO(n){switch(n){case ue.OK:return qe(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return qe(15467,{code:n})}}function sw(n){if(n===void 0)return fa("GRPC error has no .code"),ue.UNKNOWN;switch(n){case pn.OK:return ue.OK;case pn.CANCELLED:return ue.CANCELLED;case pn.UNKNOWN:return ue.UNKNOWN;case pn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case pn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case pn.INTERNAL:return ue.INTERNAL;case pn.UNAVAILABLE:return ue.UNAVAILABLE;case pn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case pn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case pn.NOT_FOUND:return ue.NOT_FOUND;case pn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case pn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case pn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case pn.ABORTED:return ue.ABORTED;case pn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case pn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case pn.DATA_LOSS:return ue.DATA_LOSS;default:return qe(39323,{code:n})}}(vt=pn||(pn={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=new us([4294967295,4294967295],0);function ub(n){const e=LO().encode(n),t=new TA;return t.update(e),new Uint8Array(t.digest())}function cb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new us([t,a],0),new us([s,l],0)]}class Oy{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new zu(`Invalid padding: ${t}`);if(a<0)throw new zu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new zu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new zu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=us.fromNumber(this.ge)}ye(e,t,a){let s=e.add(t.multiply(us.fromNumber(a)));return s.compare(kO)===1&&(s=new us([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ub(e),[a,s]=cb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);if(!this.we(c))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Oy(l,s,t);return a.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=ub(e),[a,s]=cb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class zu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Nd(Xe.min(),s,new Zt(mt),da(),pt())}}class Ac{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Ac(a,t,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,a,s){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=s}}class ow{constructor(e,t){this.targetId=e,this.Ce=t}}class lw{constructor(e,t,a=Ln.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class hb{constructor(){this.ve=0,this.Fe=fb(),this.Me=Ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),t=pt(),a=pt();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:qe(38017,{changeType:l})}})),new Ac(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=fb()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class UO{constructor(e){this.Ge=e,this.ze=new Map,this.je=da(),this.He=lf(),this.Je=lf(),this.Ze=new Zt(mt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:qe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,a=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(jg(l))if(a===0){const c=new ke(l.path);this.et(t,c,qn.newNoDocument(c,Xe.min()))}else wt(a===1,20013,{expectedCount:a});else{const c=this._t(t);if(c!==a){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=ms(a).toUint8Array()}catch(p){if(p instanceof MA)return vl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Oy(c,s,l)}catch(p){return vl(p instanceof zu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let s=0;return a.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&jg(d.target)){const p=new ke(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,qn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let a=pt();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(a=a.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new Nd(e,t,this.Ze,this.je,a);return this.je=da(),this.He=lf(),this.Je=lf(),this.Ze=new Zt(mt),s}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new hb,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Tn(mt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Tn(mt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function lf(){return new Zt(ke.comparator)}function fb(){return new Zt(ke.comparator)}const jO={asc:"ASCENDING",desc:"DESCENDING"},zO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BO={and:"AND",or:"OR"};class FO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fg(n,e){return n.useProto3Json||Sd(e)?e:{value:e}}function Yf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function HO(n,e){return Yf(n,e.toTimestamp())}function xi(n){return wt(!!n,49232),Xe.fromTimestamp((function(t){const a=ds(t);return new Gt(a.seconds,a.nanos)})(n))}function My(n,e){return Hg(n,e).canonicalString()}function Hg(n,e){const t=(function(s){return new Bt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function cw(n){const e=Bt.fromString(n);return wt(pw(e),10190,{key:e.toString()}),e}function qg(n,e){return My(n.databaseId,e.path)}function fg(n,e){const t=cw(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(fw(t))}function hw(n,e){return My(n.databaseId,e)}function qO(n){const e=cw(n);return e.length===4?Bt.emptyPath():fw(e)}function Gg(n){return new Bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fw(n){return wt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function db(n,e,t){return{name:qg(n,e),fields:t.value.mapValue.fields}}function GO(n,e){let t;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:qe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(wt(v===void 0||typeof v=="string",58123),Ln.fromBase64String(v||"")):(wt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Ln.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?ue.UNKNOWN:sw(g.code);return new Se(v,g.message||"")})(c);t=new lw(a,s,l,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=fg(n,a.document.name),l=xi(a.document.updateTime),c=a.document.createTime?xi(a.document.createTime):Xe.min(),d=new cr({mapValue:{fields:a.document.fields}}),p=qn.newFoundDocument(s,l,c,d),g=a.targetIds||[],v=a.removedTargetIds||[];t=new Tf(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=fg(n,a.document),l=a.readTime?xi(a.readTime):Xe.min(),c=qn.newNoDocument(s,l),d=a.removedTargetIds||[];t=new Tf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=fg(n,a.document),l=a.removedTargetIds||[];t=new Tf([],l,s,null)}else{if(!("filter"in e))return qe(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,c=new VO(s,l),d=a.targetId;t=new ow(d,c)}}return t}function $O(n,e){let t;if(e instanceof Sc)t={update:db(n,e.key,e.value)};else if(e instanceof Ny)t={delete:qg(n,e.key)};else if(e instanceof Es)t={update:db(n,e.key,e.data),updateMask:tM(e.fieldMask)};else{if(!(e instanceof xO))return qe(16599,{dt:e.type});t={verify:qg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,c){const d=c.transform;if(d instanceof $f)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof uc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof cc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Kf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw qe(20930,{transform:c.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:HO(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:qe(27497)})(n,e.precondition)),t}function KO(n,e){return n&&n.length>0?(wt(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?xi(s.updateTime):xi(l);return c.isEqual(Xe.min())&&(c=xi(l)),new IO(c,s.transformResults||[])})(t,e)))):[]}function YO(n,e){return{documents:[hw(n,e.path)]}}function QO(n,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=hw(n,s);const l=(function(g){if(g.length!==0)return mw(ui.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(S){return{field:al(S.field),direction:JO(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Fg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:s}}function XO(n){let e=qO(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){wt(a===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=dw(E);return S instanceof ui&&HA(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(U){return new Gf(sl(U.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,Sd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,C=E.values||[];return new qf(C,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,C=E.values||[];return new qf(C,S)})(t.endAt)),mO(e,s,c,l,d,"F",p,g)}function WO(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=sl(t.unaryFilter.field);return gn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=sl(t.unaryFilter.field);return gn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=sl(t.unaryFilter.field);return gn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=sl(t.unaryFilter.field);return gn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qe(61313);default:return qe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return gn.create(sl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qe(58110);default:return qe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ui.create(t.compositeFilter.filters.map((a=>dw(a))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return qe(1026)}})(t.compositeFilter.op))})(n):qe(30097,{filter:n})}function JO(n){return jO[n]}function ZO(n){return zO[n]}function eM(n){return BO[n]}function al(n){return{fieldPath:n.canonicalString()}}function sl(n){return Pn.fromServerFormat(n.fieldPath)}function mw(n){return n instanceof gn?(function(t){if(t.op==="=="){if(eb(t.value))return{unaryFilter:{field:al(t.field),op:"IS_NAN"}};if(Z0(t.value))return{unaryFilter:{field:al(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eb(t.value))return{unaryFilter:{field:al(t.field),op:"IS_NOT_NAN"}};if(Z0(t.value))return{unaryFilter:{field:al(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:al(t.field),op:ZO(t.op),value:t.value}}})(n):n instanceof ui?(function(t){const a=t.getFilters().map((s=>mw(s)));return a.length===1?a[0]:{compositeFilter:{op:eM(t.op),filters:a}}})(n):qe(54877,{filter:n})}function tM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function pw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function gw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,a,s,l=Xe.min(),c=Xe.min(),d=Ln.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e){this.yt=e}}function rM(n){const e=XO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(){this.Sn=new aM}addToCollectionParentIndex(e,t){return this.Sn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(fs.min())}updateCollectionGroup(e,t,a){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class aM{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new Tn(Bt.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new Tn(Bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yw=41943040;class ur{static withCacheSize(e){return new ur(e,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(yw,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new bl(0)}static ar(){return new bl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="LruGarbageCollector",sM=1048576;function gb([n,e],[t,a]){const s=mt(n,t);return s===0?mt(e,a):s}class oM{constructor(e){this.Pr=e,this.buffer=new Tn(gb),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();gb(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lM{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Re(pb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vl(t)?Re(pb,"Ignoring IndexedDB error during garbage collection: ",t):await Ml(t)}await this.Ar(3e5)}))}}class uM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(bd.ce);const a=new oM(t);return this.Vr.forEachTarget(e,(s=>a.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>a.Er(s))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(mb)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mb):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,s,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(a=E,d=Date.now(),this.removeTargets(e,a,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(g=Date.now(),rl()<=dt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function cM(n,e){return new uM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.changes=new co((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?fe.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(a=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(a!==null&&Qu(a.mutation,s,wr.empty(),Gt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,pt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=pt()){const s=Xs();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,a).next((l=>{let c=ju();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const a=Xs();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,pt())))}populateOverlays(e,t,a){const s=[];return a.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,a,s){let l=da();const c=Yu(),d=(function(){return Yu()})();return t.forEach(((p,g)=>{const v=a.get(g.key);s.has(g.key)&&(v===void 0||v.mutation instanceof Es)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Qu(v.mutation,g,v.mutation.getFieldMask(),Gt.now())):c.set(g.key,wr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new fM(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const a=Yu();let s=new Zt(((c,d)=>c-d)),l=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=a.get(p)||wr.empty();v=d.applyToLocalView(g,v),a.set(p,v);const E=(s.get(d.batchId)||pt()).add(p);s=s.insert(d.batchId,E)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,E=JA();v.forEach((S=>{if(!l.has(S)){const C=iw(t.get(S),a.get(S));C!==null&&E.set(S,C),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return fe.waitFor(c)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,s){return pO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):KA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):fe.resolve(Xs());let d=ac,p=l;return c.next((g=>fe.forEach(g,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?fe.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,pt()))).next((v=>({batchId:d,changes:WA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((a=>{let s=ju();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let c=ju();return this.indexManager.getCollectionParents(e,l).next((d=>fe.forEach(d,(p=>{const g=(function(E,S){return new bc(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,a,s).next((v=>{v.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,qn.newInvalidDocument(v)))}));let d=ju();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Qu(v.mutation,g,wr.empty(),Gt.now()),Cd(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return fe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:xi(s.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:rM(s.bundledQuery),readTime:xi(s.readTime)}})(t)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(){this.overlays=new Zt(ke.comparator),this.Lr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Xs();return fe.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((s,l)=>{this.bt(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.Lr.get(a);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),fe.resolve()}getOverlaysForCollection(e,t,a){const s=Xs(),l=t.length+1,c=new ke(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>a&&s.set(p.getKey(),p)}return fe.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new Zt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let v=l.get(g.largestBatchId);v===null&&(v=Xs(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Xs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=s)););return fe.resolve(d)}bt(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(a.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(a.key,new MO(t,a));let l=this.Lr.get(t);l===void 0&&(l=pt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.kr=new Tn(Cn.Kr),this.qr=new Tn(Cn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new Cn(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new Cn(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new ke(new Bt([])),a=new Cn(t,e),s=new Cn(t,e+1),l=[];return this.qr.forEachInRange([a,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ke(new Bt([])),a=new Cn(t,e),s=new Cn(t,e+1);let l=pt();return this.qr.forEachInRange([a,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Cn(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Cn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ke.comparator(e.key,t.key)||mt(e.Hr,t.Hr)}static Ur(e,t){return mt(e.Hr,t.Hr)||ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Tn(Cn.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new OO(l,t,a,s);this.mutationQueue.push(c);for(const d of s)this.Jr=this.Jr.add(new Cn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.Xr(a),l=s<0?0:s;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Ay:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Cn(t,0),s=new Cn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,s],(c=>{const d=this.Zr(c.Hr);l.push(d)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Tn(mt);return t.forEach((s=>{const l=new Cn(s,0),c=new Cn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{a=a.add(d.Hr)}))})),fe.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;ke.isDocumentKey(l)||(l=l.child(""));const c=new Cn(new ke(l),0);let d=new Tn(mt);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!a.isPrefixOf(g)&&(g.length===s&&(d=d.add(p.Hr)),!0)}),c),fe.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((a=>{const s=this.Zr(a);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){wt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return fe.forEach(t.mutations,(s=>{const l=new Cn(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new Cn(t,0),s=this.Jr.firstAfterOrEqual(a);return fe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.ti=e,this.docs=(function(){return new Zt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return fe.resolve(a?a.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let a=da();return t.forEach((s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():qn.newInvalidDocument(s))})),fe.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=da();const c=t.path,d=new ke(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||G2(q2(v),a)<=0||(s.has(v.key)||Cd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,a,s){qe(9500)}ni(e,t){return fe.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new _M(this)}getSize(e){return fe.resolve(this.size)}}class _M extends hM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(a)})),fe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.persistence=e,this.ri=new co((t=>Cy(t)),Iy),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ii=0,this.si=new Vy,this.targetCount=0,this.oi=bl._r()}forEachTarget(e,t){return this.ri.forEach(((a,s)=>t(s))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),fe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new bl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.lr(t),fe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&a.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),fe.waitFor(l).next((()=>s))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return fe.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),fe.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return fe.resolve(a)}containsKey(e,t){return fe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,t){this._i={},this.overlays={},this.ai=new bd(0),this.ui=!1,this.ui=!0,this.ci=new gM,this.referenceDelegate=e(this),this.li=new EM(this),this.indexManager=new iM,this.remoteDocumentCache=(function(s){return new vM(s)})((a=>this.referenceDelegate.hi(a))),this.serializer=new nM(t),this.Pi=new mM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new yM(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){Re("MemoryPersistence","Starting transaction:",e);const s=new TM(this.ai.next());return this.referenceDelegate.Ti(),a(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return fe.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class TM extends K2{constructor(e){super(),this.currentSequenceNumber=e}}class Py{constructor(e){this.persistence=e,this.Ri=new Vy,this.Ai=null}static Vi(e){return new Py(e)}get di(){if(this.Ai)return this.Ai;throw qe(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),fe.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(a=>{const s=ke.fromPath(a);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Qf{constructor(e,t){this.persistence=e,this.fi=new co((a=>X2(a.path)),((a,s)=>a.isEqual(s))),this.garbageCollector=cM(this,t)}static Vi(e,t){return new Qf(e,t)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return fe.forEach(this.fi,((a,s)=>this.wr(e,a,s).next((l=>l?fe.resolve():t(s)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(a++,l.removeEntry(c,Xe.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vf(e.data.value)),t}wr(e,t,a){return fe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return fe.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=s}static Es(e,t){let a=pt(),s=pt();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Ly(e,t.fromCache,a,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return dx()?8:Y2(Gn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,a).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new bM;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,a,s){return a.documentReadCount<this.Vs?(rl()<=dt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",il(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(rl()<=dt.DEBUG&&Re("QueryEngine","Query:",il(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.ds*s?(rl()<=dt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",il(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):fe.resolve())}gs(e,t){if(ib(t))return fe.resolve(null);let a=Ni(t);return this.indexManager.getIndexType(e,a).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Bg(t,null,"F"),a=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const c=pt(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,a).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,Bg(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,a,s){return ib(t)||s.isEqual(Xe.min())?fe.resolve(null):this.fs.getDocuments(e,a).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,a,s)?fe.resolve(null):(rl()<=dt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),il(t)),this.Ds(e,c,t,H2(s,ac)).next((d=>d)))}))}bs(e,t){let a=new Tn(QA(e));return t.forEach(((s,l)=>{Cd(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,a){return rl()<=dt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",il(t)),this.fs.getDocumentsMatchingQuery(e,t,fs.min(),a)}Ds(e,t,a,s){return this.fs.getDocumentsMatchingQuery(e,a,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="LocalStore",AM=3e8;class wM{constructor(e,t,a,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new Zt(mt),this.Fs=new co((l=>Cy(l)),Iy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function RM(n,e,t,a){return new wM(n,e,t,a)}async function _w(n,e){const t=Je(n);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const c=[],d=[];let p=pt();for(const g of s){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(a,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function CM(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const E=g.batch,S=E.keys();let C=fe.resolve();return S.forEach((U=>{C=C.next((()=>v.getEntry(p,U))).next((B=>{const V=g.docVersions.get(U);wt(V!==null,48541),B.version.compareTo(V)<0&&(E.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),v.addEntry(B)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(d){let p=pt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(a,s)))}))}function Ew(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function IM(n,e){const t=Je(n),a=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const S=s.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,E))));let C=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(Ln.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,a)),s=s.insert(E,C),(function(B,V,H){return B.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=AM?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(S,C,v)&&d.push(t.li.updateTargetData(l,C))}));let p=da(),g=pt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(DM(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!a.isEqual(Xe.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));d.push(v)}return fe.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=s,l)))}function DM(n,e,t){let a=pt(),s=pt();return t.forEach((l=>a=a.add(l))),e.getEntries(n,a).next((l=>{let c=da();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),p.isNoDocument()&&p.version.isEqual(Xe.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Re(ky,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:s}}))}function NM(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Ay),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function xM(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let s;return t.li.getTargetData(a,e).next((l=>l?(s=l,fe.resolve(s)):t.li.allocateTargetId(a).next((c=>(s=new is(e,c,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,s).next((()=>s)))))))})).then((a=>{const s=t.vs.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function $g(n,e,t){const a=Je(n),s=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(c=>a.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Vl(c))throw c;Re(ky,`Failed to update sequence numbers for target ${e}: ${c}`)}a.vs=a.vs.remove(e),a.Fs.delete(s.target)}function yb(n,e,t){const a=Je(n);let s=Xe.min(),l=pt();return a.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const E=Je(p),S=E.Fs.get(v);return S!==void 0?fe.resolve(E.vs.get(S)):E.li.getTargetData(g,v)})(a,c,Ni(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>a.Cs.getDocumentsMatchingQuery(c,e,t?s:Xe.min(),t?l:pt()))).next((d=>(OM(a,yO(e),d),{documents:d,ks:l})))))}function OM(n,e,t){let a=n.Ms.get(e)||Xe.min();t.forEach(((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),n.Ms.set(e,a)}class vb{constructor(){this.activeTargetIds=SO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MM{constructor(){this.vo=new vb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new vb,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="ConnectivityMonitor";class Eb{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Re(_b,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Re(_b,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf=null;function Kg(){return uf===null?uf=(function(){return 268435456+Math.round(2147483648*Math.random())})():uf++,"0x"+uf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="RestConnection",PM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class LM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${s}`,this.$o=this.databaseId.database===Ff?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Wo(e,t,a,s,l){const c=Kg(),d=this.Qo(e,t.toUriEncodedString());Re(dg,`Sending RPC '${e}' ${c}:`,d,a);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,s,l);const{host:g}=new URL(d),v=Nl(g);return this.zo(e,d,p,a,v).then((E=>(Re(dg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw vl(dg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",a),E}))}jo(e,t,a,s,l,c){return this.Wo(e,t,a,s,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),a&&a.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const a=PM[e];let s=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection",Pu=(n,e,t)=>{n.listen(e,(a=>{try{t(a)}catch(s){setTimeout((()=>{throw s}),0)}}))};class hl extends LM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!hl.c_){const e=wA();Pu(e,AA.STAT_EVENT,(t=>{t.stat===Vg.PROXY?Re(Bn,"STAT_EVENT: detected buffering proxy"):t.stat===Vg.NOPROXY&&Re(Bn,"STAT_EVENT: detected no buffering proxy")})),hl.c_=!0}}zo(e,t,a,s,l){const c=Kg();return new Promise(((d,p)=>{const g=new bA;g.setWithCredentials(!0),g.listenOnce(SA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case yf.NO_ERROR:const E=g.getResponseJson();Re(Bn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case yf.TIMEOUT:Re(Bn,`RPC '${e}' ${c} timed out`),p(new Se(ue.DEADLINE_EXCEEDED,"Request time out"));break;case yf.HTTP_ERROR:const S=g.getStatus();if(Re(Bn,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const U=C==null?void 0:C.error;if(U&&U.status&&U.message){const B=(function(H){const q=H.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(q)>=0?q:ue.UNKNOWN})(U.status);p(new Se(B,U.message))}else p(new Se(ue.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Se(ue.UNAVAILABLE,"Connection failed."));break;default:qe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Re(Bn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(s);Re(Bn,`RPC '${e}' ${c} sending request:`,s),g.send(t,"POST",v,a,15)}))}T_(e,t,a){const s=Kg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,a),d.encodeInitMessageHeaders=!0;const g=l.join("");Re(Bn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let E=!1,S=!1;const C=new kM({Ho:U=>{S?Re(Bn,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(E||(Re(Bn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),Re(Bn,`RPC '${e}' stream ${s} sending:`,U),v.send(U))},Jo:()=>v.close()});return Pu(v,Uu.EventType.OPEN,(()=>{S||(Re(Bn,`RPC '${e}' stream ${s} transport opened.`),C.i_())})),Pu(v,Uu.EventType.CLOSE,(()=>{S||(S=!0,Re(Bn,`RPC '${e}' stream ${s} transport closed`),C.o_(),this.E_(v))})),Pu(v,Uu.EventType.ERROR,(U=>{S||(S=!0,vl(Bn,`RPC '${e}' stream ${s} transport errored. Name:`,U.name,"Message:",U.message),C.o_(new Se(ue.UNAVAILABLE,"The operation could not be completed")))})),Pu(v,Uu.EventType.MESSAGE,(U=>{var B;if(!S){const V=U.data[0];wt(!!V,16349);const H=V,q=(H==null?void 0:H.error)||((B=H[0])==null?void 0:B.error);if(q){Re(Bn,`RPC '${e}' stream ${s} received error:`,q);const F=q.status;let Q=(function(b){const A=pn[b];if(A!==void 0)return sw(A)})(F),re=q.message;Q===void 0&&(Q=ue.INTERNAL,re="Unknown error status: "+F+" with message "+q.message),S=!0,C.o_(new Se(Q,re)),v.close()}else Re(Bn,`RPC '${e}' stream ${s} received:`,V),C.__(V)}})),hl.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return RA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(n){return new hl(n)}function mg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(n){return new FO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hl.c_=!1;class Tw{constructor(e,t,a=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-a);s>0&&Re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="PersistentStream";class bw{constructor(e,t,a,s,l,c,d,p){this.Ci=e,this.b_=a,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Tw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(fa(t.toString()),fa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,s])=>{this.D_===t&&this.G_(a,s)}),(a=>{e((()=>{const s=new Se(ue.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(s)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{a((()=>this.z_(s)))})),this.stream.onMessage((s=>{a((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(Tb,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Re(Tb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jM extends bw{constructor(e,t,a,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=GO(this.serializer,e),a=(function(l){if(!("targetChange"in l))return Xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Xe.min():c.readTime?xi(c.readTime):Xe.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=Gg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=jg(p)?{documents:YO(l,p)}:{query:QO(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=uw(l,c.resumeToken);const g=Fg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Xe.min())>0){d.readTime=Yf(l,c.snapshotVersion.toTimestamp());const g=Fg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const a=WO(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=Gg(this.serializer),t.removeTarget=e,this.K_(t)}}class zM extends bw{constructor(e,t,a,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=KO(e.writeResults,e.commitTime),a=xi(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=Gg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>$O(this.serializer,a)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{}class FM extends BM{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Se(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Hg(t,a),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Se(ue.UNKNOWN,l.toString())}))}jo(e,t,a,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,Hg(t,a),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(ue.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function HM(n,e,t,a){return new FM(n,e,t,a)}class qM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fa(t),this.aa=!1):Re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="RemoteStore";class GM{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{a.enqueueAndForget((async()=>{ho(this)&&(Re(ao,"Restarting streams for network reachability change."),await(async function(p){const g=Je(p);g.Ea.add(4),await wc(g),g.Va.set("Unknown"),g.Ea.delete(4),await Od(g)})(this))}))})),this.Va=new qM(a,s)}}async function Od(n){if(ho(n))for(const e of n.Ra)await e(!0)}async function wc(n){for(const e of n.Ra)await e(!1)}function Sw(n,e){const t=Je(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),By(t)?zy(t):Pl(t).O_()&&jy(t,e))}function Uy(n,e){const t=Je(n),a=Pl(t);t.Ia.delete(e),a.O_()&&Aw(t,e),t.Ia.size===0&&(a.O_()?a.L_():ho(t)&&t.Va.set("Unknown"))}function jy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pl(n).Z_(e)}function Aw(n,e){n.da.$e(e),Pl(n).X_(e)}function zy(n){n.da=new UO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Pl(n).start(),n.Va.ua()}function By(n){return ho(n)&&!Pl(n).x_()&&n.Ia.size>0}function ho(n){return Je(n).Ea.size===0}function ww(n){n.da=void 0}async function $M(n){n.Va.set("Online")}async function KM(n){n.Ia.forEach(((e,t)=>{jy(n,e)}))}async function YM(n,e){ww(n),By(n)?(n.Va.ha(e),zy(n)):n.Va.set("Unknown")}async function QM(n,e,t){if(n.Va.set("Online"),e instanceof lw&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(a){Re(ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Xf(n,a)}else if(e instanceof Tf?n.da.Xe(e):e instanceof ow?n.da.st(e):n.da.tt(e),!t.isEqual(Xe.min()))try{const a=await Ew(n.localStore);t.compareTo(a)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Ln.EMPTY_BYTE_STRING,v.snapshotVersion)),Aw(l,p);const E=new is(v.target,p,g,v.sequenceNumber);jy(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(a){Re(ao,"Failed to raise snapshot:",a),await Xf(n,a)}}async function Xf(n,e,t){if(!Vl(e))throw e;n.Ea.add(1),await wc(n),n.Va.set("Offline"),t||(t=()=>Ew(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Re(ao,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Od(n)}))}function Rw(n,e){return e().catch((t=>Xf(n,t,e)))}async function Md(n){const e=Je(n),t=gs(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ay;for(;XM(e);)try{const s=await NM(e.localStore,a);if(s===null){e.Ta.length===0&&t.L_();break}a=s.batchId,WM(e,s)}catch(s){await Xf(e,s)}Cw(e)&&Iw(e)}function XM(n){return ho(n)&&n.Ta.length<10}function WM(n,e){n.Ta.push(e);const t=gs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Cw(n){return ho(n)&&!gs(n).x_()&&n.Ta.length>0}function Iw(n){gs(n).start()}async function JM(n){gs(n).ra()}async function ZM(n){const e=gs(n);for(const t of n.Ta)e.ea(t.mutations)}async function eV(n,e,t){const a=n.Ta.shift(),s=xy.from(a,e,t);await Rw(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Md(n)}async function tV(n,e){e&&gs(n).Y_&&await(async function(a,s){if((function(c){return PO(c)&&c!==ue.ABORTED})(s.code)){const l=a.Ta.shift();gs(a).B_(),await Rw(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Md(a)}})(n,e),Cw(n)&&Iw(n)}async function bb(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Re(ao,"RemoteStore received new credentials");const a=ho(t);t.Ea.add(3),await wc(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Od(t)}async function nV(n,e){const t=Je(n);e?(t.Ea.delete(2),await Od(t)):e||(t.Ea.add(2),await wc(t),t.Va.set("Unknown"))}function Pl(n){return n.ma||(n.ma=(function(t,a,s){const l=Je(t);return l.sa(),new jM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:$M.bind(null,n),Yo:KM.bind(null,n),t_:YM.bind(null,n),J_:QM.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),By(n)?zy(n):n.Va.set("Unknown")):(await n.ma.stop(),ww(n))}))),n.ma}function gs(n){return n.fa||(n.fa=(function(t,a,s){const l=Je(t);return l.sa(),new zM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:JM.bind(null,n),t_:tV.bind(null,n),ta:ZM.bind(null,n),na:eV.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Md(n)):(await n.fa.stop(),n.Ta.length>0&&(Re(ao,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new ua,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const c=Date.now()+a,d=new Fy(e,t,c,s,l);return d.start(a),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hy(n,e){if(fa("AsyncQueue",`${e}: ${n}`),Vl(n))return new Se(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{static emptySet(e){return new fl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||ke.comparator(t.key,a.key):(t,a)=>ke.comparator(t.key,a.key),this.keyedMap=ju(),this.sortedSet=new Zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new fl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.ga=new Zt(ke.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):qe(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Sl{constructor(e,t,a,s,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Sl(e,t,fl.emptySet(t),c,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class iV{constructor(){this.queries=Ab(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const s=Je(t),l=s.queries;s.queries=Ab(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(a)}))})(this,new Se(ue.ABORTED,"Firestore shutting down"))}}function Ab(){return new co((n=>YA(n)),Rd)}async function qy(n,e){const t=Je(n);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(a=2):(l=new rV,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=Hy(c,`Initialization of query '${il(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&$y(t)}async function Gy(n,e){const t=Je(n),a=e.query;let s=3;const l=t.queries.get(a);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function aV(n,e){const t=Je(n);let a=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(s)&&(a=!0);c.wa=s}}a&&$y(t)}function sV(n,e,t){const a=Je(n),s=a.queries.get(e);if(s)for(const l of s.ba)l.onError(t);a.queries.delete(e)}function $y(n){n.Ca.forEach((e=>{e.next()}))}var Yg,wb;(wb=Yg||(Yg={})).Ma="default",wb.Cache="cache";class Ky{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new Sl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this.key=e}}class Nw{constructor(e){this.key=e}}class oV{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.eu=QA(e),this.tu=new fl(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new Sb,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,E)=>{const S=s.get(v),C=Cd(this.query,E)?E:null,U=!!S&&this.mutatedKeys.has(S.key),B=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let V=!1;S&&C?S.data.isEqual(C.data)?U!==B&&(a.track({type:3,doc:C}),V=!0):this.su(S,C)||(a.track({type:2,doc:C}),V=!0,(p&&this.eu(C,p)>0||g&&this.eu(C,g)<0)&&(d=!0)):!S&&C?(a.track({type:0,doc:C}),V=!0):S&&!C&&(a.track({type:1,doc:S}),V=!0,(p||g)&&(d=!0)),V&&(C?(c=c.add(C),l=B?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),a.track({type:1,doc:v})}return{tu:c,iu:a,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(C,U){const B=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe(20277,{Vt:V})}};return B(C)-B(U)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(a),s=s??!1;const d=t&&!s?this._u():[],p=this.Ya.size===0&&this.current&&!s?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new Sl(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Sb,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=pt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new Nw(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new Dw(a))})),t}cu(e){this.Za=e.ks,this.Ya=pt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Yy="SyncEngine";class lV{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class uV{constructor(e){this.key=e,this.hu=!1}}class cV{constructor(e,t,a,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new co((d=>YA(d)),Rd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Zt(ke.comparator),this.Au=new Map,this.Vu=new Vy,this.du={},this.mu=new Map,this.fu=bl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hV(n,e,t=!0){const a=Lw(n);let s;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await xw(a,e,t,!0),s}async function fV(n,e){const t=Lw(n);await xw(t,e,!0,!1)}async function xw(n,e,t,a){const s=await xM(n.localStore,Ni(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return a&&(d=await dV(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&Sw(n.remoteStore,s),d}async function dV(n,e,t,a,s){n.pu=(E,S,C)=>(async function(B,V,H,q){let F=V.view.ru(H);F.Ss&&(F=await yb(B.localStore,V.query,!1).then((({documents:b})=>V.view.ru(b,F))));const Q=q&&q.targetChanges.get(V.targetId),re=q&&q.targetMismatches.get(V.targetId)!=null,Y=V.view.applyChanges(F,B.isPrimaryClient,Q,re);return Cb(B,V.targetId,Y.au),Y.snapshot})(n,E,S,C);const l=await yb(n.localStore,e,!0),c=new oV(e,l.ks),d=c.ru(l.documents),p=Ac.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",s),g=c.applyChanges(d,n.isPrimaryClient,p);Cb(n,t,g.au);const v=new lV(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function mV(n,e,t){const a=Je(n),s=a.Tu.get(e),l=a.Iu.get(s.targetId);if(l.length>1)return a.Iu.set(s.targetId,l.filter((c=>!Rd(c,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await $g(a.localStore,s.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(s.targetId),t&&Uy(a.remoteStore,s.targetId),Qg(a,s.targetId)})).catch(Ml)):(Qg(a,s.targetId),await $g(a.localStore,s.targetId,!0))}async function pV(n,e){const t=Je(n),a=t.Tu.get(e),s=t.Iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),Uy(t.remoteStore,a.targetId))}async function gV(n,e,t){const a=SV(n);try{const s=await(function(c,d){const p=Je(c),g=Gt.now(),v=d.reduce(((C,U)=>C.add(U.key)),pt());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let U=da(),B=pt();return p.xs.getEntries(C,v).next((V=>{U=V,U.forEach(((H,q)=>{q.isValidDocument()||(B=B.add(H))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,U))).next((V=>{E=V;const H=[];for(const q of d){const F=NO(q,E.get(q.key).overlayedDocument);F!=null&&H.push(new Es(q.key,F,zA(F.value.mapValue),Ir.exists(!0)))}return p.mutationQueue.addMutationBatch(C,g,H,d)})).next((V=>{S=V;const H=V.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(C,V.batchId,H)}))})).then((()=>({batchId:S.batchId,changes:WA(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new Zt(mt)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(a,s.batchId,t),await Rc(a,s.changes),await Md(a.remoteStore)}catch(s){const l=Hy(s,"Failed to persist write");t.reject(l)}}async function Ow(n,e){const t=Je(n);try{const a=await IM(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?wt(c.hu,14607):s.removedDocuments.size>0&&(wt(c.hu,42227),c.hu=!1))})),await Rc(t,a,e)}catch(a){await Ml(a)}}function Rb(n,e,t){const a=Je(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const p=Je(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,E)=>{for(const S of E.ba)S.va(d)&&(g=!0)})),g&&$y(p)})(a.eventManager,e),s.length&&a.Pu.J_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function yV(n,e,t){const a=Je(n);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a.Au.get(e),l=s&&s.key;if(l){let c=new Zt(ke.comparator);c=c.insert(l,qn.newNoDocument(l,Xe.min()));const d=pt().add(l),p=new Nd(Xe.min(),new Map,new Zt(mt),c,d);await Ow(a,p),a.Ru=a.Ru.remove(l),a.Au.delete(e),Qy(a)}else await $g(a.localStore,e,!1).then((()=>Qg(a,e,t))).catch(Ml)}async function vV(n,e){const t=Je(n),a=e.batch.batchId;try{const s=await CM(t.localStore,e);Vw(t,a,null),Mw(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Rc(t,s)}catch(s){await Ml(s)}}async function _V(n,e,t){const a=Je(n);try{const s=await(function(c,d){const p=Je(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(wt(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(a.localStore,e);Vw(a,e,t),Mw(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Rc(a,s)}catch(s){await Ml(s)}}function Mw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Vw(n,e,t){const a=Je(n);let s=a.du[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.du[a.currentUser.toKey()]=s}}function Qg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),t&&n.Pu.yu(a,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||Pw(n,a)}))}function Pw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Uy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Qy(n))}function Cb(n,e,t){for(const a of t)a instanceof Dw?(n.Vu.addReference(a.key,e),EV(n,a)):a instanceof Nw?(Re(Yy,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||Pw(n,a.key)):qe(19791,{wu:a})}function EV(n,e){const t=e.key,a=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(a)||(Re(Yy,"New document in limbo: "+t),n.Eu.add(a),Qy(n))}function Qy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ke(Bt.fromString(e)),a=n.fu.next();n.Au.set(a,new uV(t)),n.Ru=n.Ru.insert(t,a),Sw(n.remoteStore,new is(Ni(wd(t.path)),a,"TargetPurposeLimboResolution",bd.ce))}}async function Rc(n,e,t){const a=Je(n),s=[],l=[],c=[];a.Tu.isEmpty()||(a.Tu.forEach(((d,p)=>{c.push(a.pu(p,e,t).then((g=>{var v;if((g||t)&&a.isPrimaryClient){const E=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;a.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){s.push(g);const E=Ly.Es(p.targetId,g);l.push(E)}})))})),await Promise.all(c),a.Pu.J_(s),await(async function(p,g){const v=Je(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>fe.forEach(g,(S=>fe.forEach(S.Ts,(C=>v.persistence.referenceDelegate.addReference(E,S.targetId,C))).next((()=>fe.forEach(S.Is,(C=>v.persistence.referenceDelegate.removeReference(E,S.targetId,C)))))))))}catch(E){if(!Vl(E))throw E;Re(ky,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const C=v.vs.get(S),U=C.snapshotVersion,B=C.withLastLimboFreeSnapshotVersion(U);v.vs=v.vs.insert(S,B)}}})(a.localStore,l))}async function TV(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Re(Yy,"User change. New user:",e.toKey());const a=await _w(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new Se(ue.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Rc(t,a.Ns)}}function bV(n,e){const t=Je(n),a=t.Au.get(e);if(a&&a.hu)return pt().add(a.key);{let s=pt();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function Lw(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ow.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yV.bind(null,e),e.Pu.J_=aV.bind(null,e.eventManager),e.Pu.yu=sV.bind(null,e.eventManager),e}function SV(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_V.bind(null,e),e}class Wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return RM(this.persistence,new SM,e.initialUser,this.serializer)}Cu(e){return new vw(Py.Vi,this.serializer)}Du(e){return new MM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wf.provider={build:()=>new Wf};class AV extends Wf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){wt(this.persistence.referenceDelegate instanceof Qf,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new lM(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new vw((a=>Qf.Vi(a,t)),this.serializer)}}class Xg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Rb(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=TV.bind(null,this.syncEngine),await nV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iV})()}createDatastore(e){const t=xd(e.databaseInfo.databaseId),a=UM(e.databaseInfo);return HM(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,s,l,c,d){return new GM(a,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Rb(this.syncEngine,t,0)),(function(){return Eb.v()?new Eb:new VM})())}createSyncEngine(e,t){return(function(s,l,c,d,p,g,v){const E=new cV(s,l,c,d,p,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Je(s);Re(ao,"RemoteStore shutting down."),l.Ea.add(5),await wc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Xg.provider={build:()=>new Xg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class wV{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=s,this.user=Hn.UNAUTHENTICATED,this.clientId=Sy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async c=>{Re(ys,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(a,(c=>(Re(ys,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ua;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Hy(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function pg(n,e){n.asyncQueue.verifyOperationInProgress(),Re(ys,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener((async s=>{a.isEqual(s)||(await _w(e.localStore,s),a=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Ib(n,e){n.asyncQueue.verifyOperationInProgress();const t=await RV(n);Re(ys,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((a=>bb(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,s)=>bb(e.remoteStore,s))),n._onlineComponents=e}async function RV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(ys,"Using user provided OfflineComponentProvider");try{await pg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;vl("Error using user provided cache. Falling back to memory cache: "+t),await pg(n,new Wf)}}else Re(ys,"Using default OfflineComponentProvider"),await pg(n,new AV(void 0));return n._offlineComponents}async function kw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(ys,"Using user provided OnlineComponentProvider"),await Ib(n,n._uninitializedComponentsProvider._online)):(Re(ys,"Using default OnlineComponentProvider"),await Ib(n,new Xg))),n._onlineComponents}function CV(n){return kw(n).then((e=>e.syncEngine))}async function Jf(n){const e=await kw(n),t=e.eventManager;return t.onListen=hV.bind(null,e.syncEngine),t.onUnlisten=mV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pV.bind(null,e.syncEngine),t}function IV(n,e,t,a){const s=new Xy(a),l=new Ky(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>qy(await Jf(n),l))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>Gy(await Jf(n),l)))}}function DV(n,e,t={}){const a=new ua;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new Xy({next:S=>{v.Nu(),c.enqueueAndForget((()=>Gy(l,E)));const C=S.docs.has(d);!C&&S.fromCache?g.reject(new Se(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&S.fromCache&&p&&p.source==="server"?g.reject(new Se(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new Ky(wd(d.path),v,{includeMetadataChanges:!0,Ka:!0});return qy(l,E)})(await Jf(n),n.asyncQueue,e,t,a))),a.promise}function NV(n,e,t={}){const a=new ua;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new Xy({next:S=>{v.Nu(),c.enqueueAndForget((()=>Gy(l,E))),S.fromCache&&p.source==="server"?g.reject(new Se(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new Ky(d,v,{includeMetadataChanges:!0,Ka:!0});return qy(l,E)})(await Jf(n),n.asyncQueue,e,t,a))),a.promise}function xV(n,e){const t=new ua;return n.asyncQueue.enqueueAndForget((async()=>gV(await CV(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV="ComponentProvider",Db=new Map;function MV(n,e,t,a,s){return new Z2(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,Uw(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="firestore.googleapis.com",Nb=!0;class xb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jw,this.ssl=Nb}else this.host=e.host,this.ssl=e.ssl??Nb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sM)throw new Se(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Uw(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Se(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Se(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Se(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vd{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new O2;switch(a.type){case"firstParty":return new L2(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Se(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=Db.get(t);a&&(Re(OV,"Removing Datastore"),Db.delete(t),a.terminate())})(this),Promise.resolve()}}function VV(n,e,t,a={}){var g;n=Cr(n,Vd);const s=Nl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(dA(`https://${d}`),mA("Firestore",!0)),l.host!==jw&&l.host!==d&&vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:s,emulatorOptions:a};if(!no(p,c)&&(n._setSettings(p),a.mockUserToken)){let v,E;if(typeof a.mockUserToken=="string")v=a.mockUserToken,E=Hn.MOCK_USER;else{v=ix(a.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const S=a.mockUserToken.sub||a.mockUserToken.user_id;if(!S)throw new Se(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Hn(S)}n._authCredentials=new M2(new IA(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new fo(this.firestore,e,this._query)}}class nn{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Tc(t,nn._jsonSchema))return new nn(e,a||null,new ke(Bt.fromString(t.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:yn("string",nn._jsonSchemaVersion),referencePath:yn("string")};class cs extends fo{constructor(e,t,a){super(e,t,wd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new ke(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function Cc(n,e,...t){if(n=bn(n),DA("collection","path",e),n instanceof Vd){const a=Bt.fromString(e,...t);return q0(a),new cs(n,null,a)}{if(!(n instanceof nn||n instanceof cs))throw new Se(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Bt.fromString(e,...t));return q0(a),new cs(n.firestore,null,a)}}function Kr(n,e,...t){if(n=bn(n),arguments.length===1&&(e=Sy.newId()),DA("doc","path",e),n instanceof Vd){const a=Bt.fromString(e,...t);return H0(a),new nn(n,null,new ke(a))}{if(!(n instanceof nn||n instanceof cs))throw new Se(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Bt.fromString(e,...t));return H0(a),new nn(n.firestore,n instanceof cs?n.converter:null,new ke(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="AsyncQueue";class Mb{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tw(this,"async_queue_retry"),this._c=()=>{const a=mg();a&&Re(Ob,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=mg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=mg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ua;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Vl(e))throw e;Re(Ob,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,fa("INTERNAL UNHANDLED ERROR: ",Vb(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Fy.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&qe(47125,{Pc:Vb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Vb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class vs extends Vd{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new Mb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mb(e),this._firestoreClient=void 0,await e}}}function PV(n,e){const t=typeof n=="object"?n:vA(),a=typeof n=="string"?n:Ff,s=Ty(t,"firestore").getImmediate({identifier:a});if(!s._initialized){const l=nx("firestore");l&&VV(s,...l)}return s}function Ic(n){if(n._terminated)throw new Se(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||LV(n),n._firestoreClient}function LV(n){var a,s,l,c;const e=n._freezeSettings(),t=MV(n._databaseId,((a=n._app)==null?void 0:a.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new wV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gr(Ln.fromBase64String(e))}catch(t){throw new Se(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gr(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tc(e,Gr._jsonSchema))return Gr.fromBase64String(e.bytes)}}Gr._jsonSchemaVersion="firestore/bytes/1.0",Gr._jsonSchema={type:yn("string",Gr._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(e){if(Tc(e,Oi._jsonSchema))return new Oi(e.latitude,e.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:yn("string",Oi._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:oi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tc(e,oi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new oi(e.vectorValues);throw new Se(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}oi._jsonSchemaVersion="firestore/vectorValue/1.0",oi._jsonSchema={type:yn("string",oi._jsonSchemaVersion),vectorValues:yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=/^__.*__$/;class UV{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Es(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sc(e,this.data,t,this.fieldTransforms)}}class zw{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Es(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Bw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe(40011,{dataSource:n})}}class Jy{constructor(e,t,a,s,l,c){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Jy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Zf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Bw(this.dataSource)&&kV.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class jV{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||xd(e)}createContext(e,t,a,s=!1){return new Jy({dataSource:e,methodName:t,targetDoc:a,path:Pn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ld(n){const e=n._freezeSettings(),t=xd(n._databaseId);return new jV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Fw(n,e,t,a,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);Zy("Data must be an object, but it was:",c,a);const d=Gw(a,c);let p,g;if(l.merge)p=new wr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=Al(e,E,t);if(!c.contains(S))throw new Se(ue.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Yw(v,S)||v.push(S)}p=new wr(v),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new UV(new cr(d),p,g)}class kd extends Wy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kd}}function Hw(n,e,t,a){const s=n.createContext(1,e,t);Zy("Data must be an object, but it was:",s,a);const l=[],c=cr.empty();_s(a,((p,g)=>{const v=Kw(e,p,t);g=bn(g);const E=s.childContextForFieldPath(v);if(g instanceof kd)l.push(v);else{const S=Dc(g,E);S!=null&&(l.push(v),c.set(v,S))}}));const d=new wr(l);return new zw(c,d,s.fieldTransforms)}function qw(n,e,t,a,s,l){const c=n.createContext(1,e,t),d=[Al(e,a,t)],p=[s];if(l.length%2!=0)throw new Se(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Al(e,l[S])),p.push(l[S+1]);const g=[],v=cr.empty();for(let S=d.length-1;S>=0;--S)if(!Yw(g,d[S])){const C=d[S];let U=p[S];U=bn(U);const B=c.childContextForFieldPath(C);if(U instanceof kd)g.push(C);else{const V=Dc(U,B);V!=null&&(g.push(C),v.set(C,V))}}const E=new wr(g);return new zw(v,E,c.fieldTransforms)}function zV(n,e,t,a=!1){return Dc(t,n.createContext(a?4:3,e))}function Dc(n,e){if($w(n=bn(n)))return Zy("Unsupported field value:",e,n),Gw(n,e);if(n instanceof Wy)return(function(a,s){if(!Bw(s.dataSource))throw s.createError(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,s){const l=[];let c=0;for(const d of a){let p=Dc(d,s.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(a,s){if((a=bn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return AO(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Gt.fromDate(a);return{timestampValue:Yf(s.serializer,l)}}if(a instanceof Gt){const l=new Gt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Yf(s.serializer,l)}}if(a instanceof Oi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Gr)return{bytesValue:uw(s.serializer,a._byteString)};if(a instanceof nn){const l=s.databaseId,c=a.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:My(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof oi)return(function(c,d){const p=c instanceof oi?c.toArray():c;return{mapValue:{fields:{[UA]:{stringValue:jA},[Hf]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return Dy(d.serializer,v)}))}}}}}})(a,s);if(gw(a))return a._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Td(a)}`)})(n,e)}function Gw(n,e){const t={};return OA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(n,((a,s)=>{const l=Dc(s,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function $w(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Gt||n instanceof Oi||n instanceof Gr||n instanceof nn||n instanceof Wy||n instanceof oi||gw(n))}function Zy(n,e,t){if(!$w(t)||!NA(t)){const a=Td(t);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function Al(n,e,t){if((e=bn(e))instanceof Pd)return e._internalPath;if(typeof e=="string")return Kw(n,e);throw Zf("Field path arguments must be of type string or ",n,!1,void 0,t)}const BV=new RegExp("[~\\*/\\[\\]]");function Kw(n,e,t){if(e.search(BV)>=0)throw Zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pd(...e.split("."))._internalPath}catch{throw Zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zf(n,e,t,a,s){const l=a&&!a.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${a}`),c&&(p+=` in document ${s}`),p+=")"),new Se(ue.INVALID_ARGUMENT,d+n+p)}function Yw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{convertValue(e,t="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return _s(e,((s,l)=>{a[s]=this.convertValue(l,t)})),a}convertVectorValue(e){var a,s,l;const t=(l=(s=(a=e.fields)==null?void 0:a[Hf].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>ln(c.doubleValue)));return new oi(t)}convertGeoPoint(e){return new Oi(ln(e.latitude),ln(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Ad(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){const t=ds(e);return new Gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Bt.fromString(e);wt(pw(a),9688,{name:e});const s=new oc(a.get(1),a.get(3)),l=new ke(a.popFirst(5));return s.isEqual(t)||fa(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev extends FV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}const Pb="@firebase/firestore",Lb="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(n){return(function(t,a){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of a)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Al("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HV extends Qw{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Se(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tv{}class qV extends tv{}function Nc(n,e,...t){let a=[];e instanceof tv&&a.push(e),a=a.concat(t),(function(l){const c=l.filter((p=>p instanceof rv)).length,d=l.filter((p=>p instanceof Ud)).length;if(c>1||c>0&&d>0)throw new Se(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const s of a)n=s._apply(n);return n}class Ud extends qV{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Ud(e,t,a)}_apply(e){const t=this._parse(e);return Ww(e._query,t),new fo(e.firestore,e.converter,zg(e._query,t))}_parse(e){const t=Ld(e.firestore);return(function(l,c,d,p,g,v,E){let S;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Se(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){jb(E,v);const U=[];for(const B of E)U.push(Ub(p,l,B));S={arrayValue:{values:U}}}else S=Ub(p,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||jb(E,v),S=zV(d,c,E,v==="in"||v==="not-in");return gn.create(g,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function nv(n,e,t){const a=e,s=Al("where",n);return Ud._create(s,a,t)}class rv extends tv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rv(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:ui.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const p of d)Ww(c,p),c=zg(c,p)})(e._query,t),new fo(e.firestore,e.converter,zg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ub(n,e,t){if(typeof(t=bn(t))=="string"){if(t==="")throw new Se(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KA(e)&&t.indexOf("/")!==-1)throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Bt.fromString(t));if(!ke.isDocumentKey(a))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return J0(n,new ke(a))}if(t instanceof nn)return J0(n,t._key);throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Td(t)}.`)}function jb(n,e){if(!Array.isArray(n)||n.length===0)throw new Se(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ww(n,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Se(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Jw(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}class Bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Js extends Qw{constructor(e,t,a,s,l,c){super(e,t,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Al("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Js._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Js._jsonSchemaVersion="firestore/documentSnapshot/1.0",Js._jsonSchema={type:yn("string",Js._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class bf extends Js{data(e={}){return super.data(e)}}class Zs{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Bu(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new bf(this._firestore,this._userDataWriter,a.key,a,new Bu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const p=new bf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Bu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new bf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Bu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:GV(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs._jsonSchemaVersion="firestore/querySnapshot/1.0",Zs._jsonSchema={type:yn("string",Zs._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ld(e)}set(e,t,a){this._verifyNotCommitted();const s=gg(e,this._firestore),l=Jw(s.converter,t,a),c=Fw(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,a);return this._mutations.push(c.toMutation(s._key,Ir.none())),this}update(e,t,a,...s){this._verifyNotCommitted();const l=gg(e,this._firestore);let c;return c=typeof(t=bn(t))=="string"||t instanceof Pd?qw(this._dataReader,"WriteBatch.update",l._key,t,a,s):Hw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gg(e,this._firestore);return this._mutations=this._mutations.concat(new Ny(t._key,Ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gg(n,e){if((n=bn(n)).firestore!==e)throw new Se(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n){n=Cr(n,nn);const e=Cr(n.firestore,vs),t=Ic(e);return DV(t,n._key).then((a=>Zw(e,n,a)))}function Oc(n){n=Cr(n,fo);const e=Cr(n.firestore,vs),t=Ic(e),a=new ev(e);return Xw(n._query),NV(t,n._query).then((s=>new Zs(e,a,n,s)))}function KV(n,e,t){n=Cr(n,nn);const a=Cr(n.firestore,vs),s=Jw(n.converter,e,t),l=Ld(a);return iv(a,[Fw(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Ir.none())])}function jd(n,e,t,...a){n=Cr(n,nn);const s=Cr(n.firestore,vs),l=Ld(s);let c;return c=typeof(e=bn(e))=="string"||e instanceof Pd?qw(l,"updateDoc",n._key,e,t,a):Hw(l,"updateDoc",n._key,e),iv(s,[c.toMutation(n._key,Ir.exists(!0))])}function YV(n,...e){var g,v,E;n=bn(n);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||kb(e[a])||(t=e[a++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(kb(e[a])){const S=e[a];e[a]=(g=S.next)==null?void 0:g.bind(S),e[a+1]=(v=S.error)==null?void 0:v.bind(S),e[a+2]=(E=S.complete)==null?void 0:E.bind(S)}let l,c,d;if(n instanceof nn)c=Cr(n.firestore,vs),d=wd(n._key.path),l={next:S=>{e[a]&&e[a](Zw(c,n,S))},error:e[a+1],complete:e[a+2]};else{const S=Cr(n,fo);c=Cr(S.firestore,vs),d=S._query;const C=new ev(c);l={next:U=>{e[a]&&e[a](new Zs(c,C,S,U))},error:e[a+1],complete:e[a+2]},Xw(n._query)}const p=Ic(c);return IV(p,d,s,l)}function iv(n,e){const t=Ic(n);return xV(t,e)}function Zw(n,e,t){const a=t.docs.get(e._key),s=new ev(n);return new Js(n,s,e._key,a,new Bu(t.hasPendingWrites,t.fromCache),e.converter)}function eR(n){return n=Cr(n,vs),Ic(n),new $V(n,(e=>iv(n,e)))}(function(e,t=!0){x2(xl),yl(new ro("firestore",((a,{instanceIdentifier:s,options:l})=>{const c=a.getProvider("app").getImmediate(),d=new vs(new V2(a.getProvider("auth-internal")),new k2(c,a.getProvider("app-check-internal")),eO(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ls(Pb,Lb,e),ls(Pb,Lb,"esm2020")})();var QV="firebase",XV="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls(QV,XV,"app");function tR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WV=tR,nR=new _c("auth","Firebase",tR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=new _y("@firebase/auth");function JV(n,...e){ed.logLevel<=dt.WARN&&ed.warn(`Auth (${xl}): ${n}`,...e)}function Sf(n,...e){ed.logLevel<=dt.ERROR&&ed.error(`Auth (${xl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(n,...e){throw sv(n,...e)}function li(n,...e){return sv(n,...e)}function av(n,e,t){const a={...WV(),[e]:t};return new _c("auth","Firebase",a).create(e,{appName:n.name})}function eo(n){return av(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZV(n,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Li(n,"argument-error"),av(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sv(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return nR.create(n,...e)}function $e(n,e,...t){if(!n)throw sv(e,...t)}function oa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Sf(e),new Error(e)}function ma(n,e){n||oa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function eP(){return zb()==="http:"||zb()==="https:"}function zb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eP()||cx()||"connection"in navigator)?navigator.onLine:!0}function nP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ma(t>e,"Short delay should be less than long delay!"),this.isMobile=ox()||hx()}get(){return tP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(n,e){ma(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aP=new Mc(3e4,6e4);function lv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ll(n,e,t,a,s={}){return iR(n,s,async()=>{let l={},c={};a&&(e==="GET"?c=a:l={body:JSON.stringify(a)});const d=Ec({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return ux()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Nl(n.emulatorConfig.host)&&(g.credentials="include"),rR.fetch()(await aR(n,n.config.apiHost,t,d),g)})}async function iR(n,e,t){n._canInitEmulator=!1;const a={...rP,...e};try{const s=new oP(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw cf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw cf(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw cf(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw cf(n,"user-disabled",c);const v=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw av(n,v,g);Li(n,v)}}catch(s){if(s instanceof ya)throw s;Li(n,"network-request-failed",{message:String(s)})}}async function sP(n,e,t,a,s={}){const l=await Ll(n,e,t,a,s);return"mfaPendingCredential"in l&&Li(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function aR(n,e,t,a){const s=`${e}${t}?${a}`,l=n,c=l.config.emulator?ov(n.config,s):`${n.config.apiScheme}://${s}`;return iP.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class oP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(li(this.auth,"network-request-failed")),aP.get())})}}function cf(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=li(n,e,a);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(n,e){return Ll(n,"POST","/v1/accounts:delete",e)}async function td(n,e){return Ll(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uP(n,e=!1){const t=bn(n),a=await t.getIdToken(e),s=uv(a);$e(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:a,authTime:Xu(yg(s.auth_time)),issuedAtTime:Xu(yg(s.iat)),expirationTime:Xu(yg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function yg(n){return Number(n)*1e3}function uv(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return Sf("JWT malformed, contained fewer than 3 sections"),null;try{const s=uA(t);return s?JSON.parse(s):(Sf("Failed to decode base64 JWT payload"),null)}catch(s){return Sf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bb(n){const e=uv(n);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof ya&&cP(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function cP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nd(n){var E;const e=n.auth,t=await n.getIdToken(),a=await hc(n,td(e,{idToken:t}));$e(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?sR(s.providerUserInfo):[],c=dP(n.providerData,l),d=n.isAnonymous,p=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Jg(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function fP(n){const e=bn(n);await nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dP(n,e){return[...n.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function sR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(n,e){const t=await iR(n,{},async()=>{const a=Ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await aR(n,s,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:a};return n.emulatorConfig&&Nl(n.emulatorConfig.host)&&(p.credentials="include"),rR.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pP(n,e){return Ll(n,"POST","/v2/accounts:revokeToken",lv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=Bb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await mP(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,c=new dl;return a&&($e(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&($e(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&($e(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dl,this.toJSON())}_performRefresh(){return oa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(n,e){$e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class si{constructor({uid:e,auth:t,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new hP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await hc(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uP(this,e)}reload(){return fP(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await nd(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(eo(this.auth));const e=await this.getIdToken();return await hc(this,lP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:C,providerData:U,stsTokenManager:B}=t;$e(E&&B,e,"internal-error");const V=dl.fromJSON(this.name,B);$e(typeof E=="string",e,"internal-error"),Wa(a,e.name),Wa(s,e.name),$e(typeof S=="boolean",e,"internal-error"),$e(typeof C=="boolean",e,"internal-error"),Wa(l,e.name),Wa(c,e.name),Wa(d,e.name),Wa(p,e.name),Wa(g,e.name),Wa(v,e.name);const H=new si({uid:E,auth:e,email:s,emailVerified:S,displayName:a,isAnonymous:C,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:V,createdAt:g,lastLoginAt:v});return U&&Array.isArray(U)&&(H.providerData=U.map(q=>({...q}))),p&&(H._redirectEventId=p),H}static async _fromIdTokenResponse(e,t,a=!1){const s=new dl;s.updateFromServerResponse(t);const l=new si({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await nd(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];$e(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?sR(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),d=new dl;d.updateFromIdToken(a);const p=new si({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Jg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=new Map;function la(n){ma(n instanceof Function,"Expected a class definition");let e=Fb.get(n);return e?(ma(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Fb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}oR.type="NONE";const Hb=oR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(n,e,t){return`firebase:${n}:${e}:${t}`}class ml{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=Af(this.userKey,s.apiKey,l),this.fullPersistenceKey=Af("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await td(this.auth,{idToken:e}).catch(()=>{});return t?si._fromGetAccountInfoResponse(this.auth,t,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new ml(la(Hb),e,a);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||la(Hb);const c=Af(a,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const S=await td(e,{idToken:v}).catch(()=>{});if(!S)break;E=await si._fromGetAccountInfoResponse(e,S,v)}else E=si._fromJSON(e,v);g!==l&&(d=E),l=g;break}}catch{}const p=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ml(l,e,a):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new ml(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dR(e))return"Blackberry";if(mR(e))return"Webos";if(uR(e))return"Safari";if((e.includes("chrome/")||cR(e))&&!e.includes("edge/"))return"Chrome";if(fR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function lR(n=Gn()){return/firefox\//i.test(n)}function uR(n=Gn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cR(n=Gn()){return/crios\//i.test(n)}function hR(n=Gn()){return/iemobile/i.test(n)}function fR(n=Gn()){return/android/i.test(n)}function dR(n=Gn()){return/blackberry/i.test(n)}function mR(n=Gn()){return/webos/i.test(n)}function cv(n=Gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function gP(n=Gn()){var e;return cv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function yP(){return fx()&&document.documentMode===10}function pR(n=Gn()){return cv(n)||fR(n)||mR(n)||dR(n)||/windows phone/i.test(n)||hR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(n,e=[]){let t;switch(n){case"Browser":t=qb(Gn());break;case"Worker":t=`${qb(Gn())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(n,e={}){return Ll(n,"GET","/v2/passwordPolicy",lv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=6;class TP{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??EP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gb(this),this.idTokenSubscription=new Gb(this),this.beforeStateQueue=new vP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=la(t)),this._initializationPromise=this.queue(async()=>{var a,s,l;if(!this._deleted&&(this.persistenceManager=await ml.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await td(this,{idToken:e}),a=await si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ii(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(a=p.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(eo(this));const t=e?bn(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(la(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _P(this),t=new TP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _c("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await pP(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&la(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await ml.create(this,[la(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,s);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&JV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function zd(n){return bn(n)}class Gb{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ex(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SP(n){hv=n}function AP(n){return hv.loadJS(n)}function wP(){return hv.gapiScript}function RP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n,e){const t=Ty(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(no(l,e??{}))return s;Li(s,"already-initialized")}return t.initialize({options:e})}function IP(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(la);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function DP(n,e,t){const a=zd(n);$e(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=yR(e),{host:c,port:d}=NP(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){$e(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),$e(no(g,a.config.emulator)&&no(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,Nl(c)?(dA(`${l}//${c}${p}`),mA("Auth",!0)):xP()}function yR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NP(n){const e=yR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:$b(a.substr(l.length+1))}}else{const[l,c]=a.split(":");return{host:l,port:$b(c)}}}function $b(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function xP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oa("not implemented")}_getIdTokenResponse(e){return oa("not implemented")}_linkToIdToken(e,t){return oa("not implemented")}_getReauthenticationResolver(e){return oa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(n,e){return sP(n,"POST","/v1/accounts:signInWithIdp",lv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="http://localhost";class so extends vR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Li("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...l}=t;if(!a||!s)return null;const c=new so(a,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return pl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,pl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pl(e,t)}buildRequest(){const e={requestUri:OP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ec(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends fv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Vc{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.FACEBOOK_SIGN_IN_METHOD="facebook.com";es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return so._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return sa.credential(t,a)}catch{return null}}}sa.GOOGLE_SIGN_IN_METHOD="google.com";sa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Vc{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Vc{constructor(){super("twitter.com")}static credential(e,t){return so._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ns.credential(t,a)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await si._fromIdTokenResponse(e,a,s),c=Kb(a);return new wl({user:l,providerId:c,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=Kb(a);return new wl({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function Kb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd extends ya{constructor(e,t,a,s){super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,rd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new rd(e,t,a,s)}}function _R(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?rd._fromErrorAndOperation(n,l,e,a):l})}async function MP(n,e,t=!1){const a=await hc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return wl._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VP(n,e,t=!1){const{auth:a}=n;if(ii(a.app))return Promise.reject(eo(a));const s="reauthenticate";try{const l=await hc(n,_R(a,s,e,n),t);$e(l.idToken,a,"internal-error");const c=uv(l.idToken);$e(c,a,"internal-error");const{sub:d}=c;return $e(n.uid===d,a,"user-mismatch"),wl._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Li(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(n,e,t=!1){if(ii(n.app))return Promise.reject(eo(n));const a="signIn",s=await _R(n,a,e),l=await wl._fromIdTokenResponse(n,a,s);return t||await n._updateCurrentUser(l.user),l}function LP(n,e,t,a){return bn(n).onIdTokenChanged(e,t,a)}function kP(n,e,t){return bn(n).beforeAuthStateChanged(e,t)}function UP(n,e,t,a){return bn(n).onAuthStateChanged(e,t,a)}const id="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(id,"1"),this.storage.removeItem(id),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=1e3,zP=10;class TR extends ER{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!t&&this.localCache[a]===c||this.notifyListeners(a,c)},l=this.storage.getItem(a);yP()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,zP):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},jP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}TR.type="LOCAL";const BP=TR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR extends ER{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bR.type="SESSION";const SR=bR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new Bd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await FP(d);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=dv("",20);s.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return window}function qP(n){Mi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function GP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $P(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function KP(){return AR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="firebaseLocalStorageDb",YP=1,ad="firebaseLocalStorage",RR="fbase_key";class Pc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fd(n,e){return n.transaction([ad],e?"readwrite":"readonly").objectStore(ad)}function QP(){const n=indexedDB.deleteDatabase(wR);return new Pc(n).toPromise()}function Zg(){const n=indexedDB.open(wR,YP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(ad,{keyPath:RR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(ad)?e(a):(a.close(),await QP(),e(await Zg()))})})}async function Yb(n,e,t){const a=Fd(n,!0).put({[RR]:e,value:t});return new Pc(a).toPromise()}async function XP(n,e){const t=Fd(n,!1).get(e),a=await new Pc(t).toPromise();return a===void 0?null:a.value}function Qb(n,e){const t=Fd(n,!0).delete(e);return new Pc(t).toPromise()}const WP=800,JP=3;class CR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>JP)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bd._getInstance(KP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await GP(),!this.activeServiceWorker)return;this.sender=new HP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$P()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zg();return await Yb(e,id,"1"),await Qb(e,id),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>Yb(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>XP(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Qb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Fd(s,!1).getAll();return new Pc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CR.type="LOCAL";const ZP=CR;new Mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(n,e){return e?la(e):($e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends vR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function e4(n){return PP(n.auth,new mv(n),n.bypassAuthState)}function t4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),VP(t,new mv(n),n.bypassAuthState)}async function n4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),MP(t,new mv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e4;case"linkViaPopup":case"linkViaRedirect":return n4;case"reauthViaPopup":case"reauthViaRedirect":return t4;default:Li(this.auth,"internal-error")}}resolve(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new Mc(2e3,1e4);async function i4(n,e,t){if(ii(n.app))return Promise.reject(li(n,"operation-not-supported-in-this-environment"));const a=zd(n);ZV(n,e,fv);const s=IR(a,t);return new Ws(a,"signInViaPopup",e,s).executeNotNull()}class Ws extends DR{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){ma(this.filter.length===1,"Popup operations only handle one event");const e=dv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,r4.get())};e()}}Ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="pendingRedirect",wf=new Map;class s4 extends DR{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=wf.get(this.auth._key());if(!e){try{const a=await o4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}wf.set(this.auth._key(),e)}return this.bypassAuthState||wf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o4(n,e){const t=c4(e),a=u4(n);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}function l4(n,e){wf.set(n._key(),e)}function u4(n){return la(n._redirectPersistence)}function c4(n){return Af(a4,n.config.apiKey,n.name)}async function h4(n,e,t=!1){if(ii(n.app))return Promise.reject(eo(n));const a=zd(n),s=IR(a,e),c=await new s4(a,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=600*1e3;class d4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!m4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!NR(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(li(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=f4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xb(e))}saveEventToCache(e){this.cachedEventUids.add(Xb(e)),this.lastProcessedEventTime=Date.now()}}function Xb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function NR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function m4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p4(n,e={}){return Ll(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,y4=/^https?/;async function v4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await p4(n);for(const t of e)try{if(_4(t))return}catch{}Li(n,"unauthorized-domain")}function _4(n){const e=Wg(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===a}if(!y4.test(t))return!1;if(g4.test(n))return a===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=new Mc(3e4,6e4);function Wb(){const n=Mi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function T4(n){return new Promise((e,t)=>{var s,l,c;function a(){Wb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wb(),t(li(n,"network-request-failed"))},timeout:E4.get()})}if((l=(s=Mi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Mi().gapi)!=null&&c.load)a();else{const d=RP("iframefcb");return Mi()[d]=()=>{gapi.load?a():t(li(n,"network-request-failed"))},AP(`${wP()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Rf=null,e})}let Rf=null;function b4(n){return Rf=Rf||T4(n),Rf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=new Mc(5e3,15e3),A4="__/auth/iframe",w4="emulator/auth/iframe",R4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I4(n){const e=n.config;$e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ov(e,w4):`https://${n.config.authDomain}/${A4}`,a={apiKey:e.apiKey,appName:n.name,v:xl},s=C4.get(n.config.apiHost);s&&(a.eid=s);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${Ec(a).slice(1)}`}async function D4(n){const e=await b4(n),t=Mi().gapi;return $e(t,n,"internal-error"),e.open({where:document.body,url:I4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R4,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const c=li(n,"network-request-failed"),d=Mi().setTimeout(()=>{l(c)},S4.get());function p(){Mi().clearTimeout(d),s(a)}a.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},x4=500,O4=600,M4="_blank",V4="http://localhost";class Jb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P4(n,e,t,a=x4,s=O4){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const p={...N4,width:a.toString(),height:s.toString(),top:l,left:c},g=Gn().toLowerCase();t&&(d=cR(g)?M4:t),lR(g)&&(e=e||V4,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[C,U])=>`${S}${C}=${U},`,"");if(gP(g)&&d!=="_self")return L4(e||"",d),new Jb(null);const E=window.open(e||"",d,v);$e(E,n,"popup-blocked");try{E.focus()}catch{}return new Jb(E)}function L4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4="__/auth/handler",U4="emulator/auth/handler",j4=encodeURIComponent("fac");async function Zb(n,e,t,a,s,l){$e(n.config.authDomain,n,"auth-domain-config-required"),$e(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:xl,eventId:s};if(e instanceof fv){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",_x(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Vc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),g=p?`#${j4}=${encodeURIComponent(p)}`:"";return`${z4(n)}?${Ec(d).slice(1)}${g}`}function z4({config:n}){return n.emulator?ov(n,U4):`https://${n.authDomain}/${k4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="webStorageSupport";class B4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SR,this._completeRedirectFn=h4,this._overrideRedirectResult=l4}async _openPopup(e,t,a,s){var c;ma((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await Zb(e,t,a,Wg(),s);return P4(e,l,dv())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await Zb(e,t,a,Wg(),s);return qP(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(ma(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await D4(e),a=new d4(e);return t.register("authEvent",s=>($e(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vg,{type:vg},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[vg];l!==void 0&&t(!!l),Li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=v4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pR()||uR()||cv()}}const F4=B4;var eS="@firebase/auth",tS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function G4(n){yl(new ro("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=a.options;$e(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gR(n)},g=new bP(a,s,l,p);return IP(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),yl(new ro("auth-internal",e=>{const t=zd(e.getProvider("auth").getImmediate());return(a=>new H4(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ls(eS,tS,q4(n)),ls(eS,tS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=300,K4=fA("authIdTokenMaxAge")||$4;let nS=null;const Y4=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>K4)return;const s=t==null?void 0:t.token;nS!==s&&(nS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Q4(n=vA()){const e=Ty(n,"auth");if(e.isInitialized())return e.getImmediate();const t=CP(n,{popupRedirectResolver:F4,persistence:[ZP,BP,SR]}),a=fA("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const c=Y4(l.toString());kP(t,c,()=>c(t.currentUser)),LP(t,d=>c(d))}}const s=cA("auth");return s&&DP(t,`http://${s}`),t}function X4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}SP({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=s=>{const l=li("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",X4().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});G4("Browser");const W4={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function tl(n){const e=W4[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const J4={apiKey:tl("VITE_FIREBASE_API_KEY"),authDomain:tl("VITE_FIREBASE_AUTH_DOMAIN"),projectId:tl("VITE_FIREBASE_PROJECT_ID"),storageBucket:tl("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:tl("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:tl("VITE_FIREBASE_APP_ID")},xR=yA(J4),Rl=Q4(xR),Z4=new sa,Sn=PV(xR),OR=M.createContext(void 0),eL=({children:n})=>{const[e,t]=M.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),a=M.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);M.useEffect(()=>{a(e)},[e,a]);const s=M.useCallback(c=>{t(c),a(c);const d=Rl.currentUser;if(d){const p=Kr(Sn,"users",d.uid);jd(p,{preferredTheme:c}).catch(g=>console.error("Error updating preferred theme in Firebase:",g))}},[a]),l=M.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return M.useEffect(()=>Rl.onAuthStateChanged(async d=>{if(d){const p=Kr(Sn,"users",d.uid),g=await xc(p);if(g.exists()&&g.data().preferredTheme){const v=g.data().preferredTheme;t(v),a(v)}}}),[a]),w.jsx(OR.Provider,{value:{theme:e,toggleTheme:l,setTheme:s},children:n})},kl=({container:n=!0})=>{const e=w.jsx("div",{className:"spinner"});return n?w.jsx("div",{className:"spinner-container",children:e}):e},Cl=()=>w.jsx("div",{className:"loading-container",children:w.jsx(kl,{container:!1})}),tL=()=>{const n=yt(a=>a.auth.firebaseUser),e=yt(a=>a.auth.userData);return yt(a=>a.auth.loading)?w.jsx(Cl,{}):n?e?e.isApproved?w.jsx(as,{to:"/app/dashboard",replace:!0}):w.jsx(as,{to:"/guest",replace:!0}):w.jsx(Cl,{}):w.jsx(as,{to:"/login",replace:!0})};function Mn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var nL=typeof Symbol=="function"&&Symbol.observable||"@@observable",rS=nL,_g=()=>Math.random().toString(36).substring(7).split("").join("."),rL={INIT:`@@redux/INIT${_g()}`,REPLACE:`@@redux/REPLACE${_g()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${_g()}`},sd=rL;function pv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function MR(n,e,t){if(typeof n!="function")throw new Error(Mn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Mn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Mn(1));return t(MR)(n,e)}let a=n,s=e,l=new Map,c=l,d=0,p=!1;function g(){c===l&&(c=new Map,l.forEach((V,H)=>{c.set(H,V)}))}function v(){if(p)throw new Error(Mn(3));return s}function E(V){if(typeof V!="function")throw new Error(Mn(4));if(p)throw new Error(Mn(5));let H=!0;g();const q=d++;return c.set(q,V),function(){if(H){if(p)throw new Error(Mn(6));H=!1,g(),c.delete(q),l=null}}}function S(V){if(!pv(V))throw new Error(Mn(7));if(typeof V.type>"u")throw new Error(Mn(8));if(typeof V.type!="string")throw new Error(Mn(17));if(p)throw new Error(Mn(9));try{p=!0,s=a(s,V)}finally{p=!1}return(l=c).forEach(q=>{q()}),V}function C(V){if(typeof V!="function")throw new Error(Mn(10));a=V,S({type:sd.REPLACE})}function U(){const V=E;return{subscribe(H){if(typeof H!="object"||H===null)throw new Error(Mn(11));function q(){const Q=H;Q.next&&Q.next(v())}return q(),{unsubscribe:V(q)}},[rS](){return this}}}return S({type:sd.INIT}),{dispatch:S,subscribe:E,getState:v,replaceReducer:C,[rS]:U}}function iL(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:sd.INIT})>"u")throw new Error(Mn(12));if(typeof t(void 0,{type:sd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mn(13))})}function aL(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const a=Object.keys(t);let s;try{iL(t)}catch(l){s=l}return function(c={},d){if(s)throw s;let p=!1;const g={};for(let v=0;v<a.length;v++){const E=a[v],S=t[E],C=c[E],U=S(C,d);if(typeof U>"u")throw d&&d.type,new Error(Mn(14));g[E]=U,p=p||U!==C}return p=p||a.length!==Object.keys(c).length,p?g:c}}function od(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...a)=>e(t(...a)))}function sL(...n){return e=>(t,a)=>{const s=e(t,a);let l=()=>{throw new Error(Mn(15))};const c={getState:s.getState,dispatch:(p,...g)=>l(p,...g)},d=n.map(p=>p(c));return l=od(...d)(s.dispatch),{...s,dispatch:l}}}function oL(n){return pv(n)&&"type"in n&&typeof n.type=="string"}var VR=Symbol.for("immer-nothing"),iS=Symbol.for("immer-draftable"),Jn=Symbol.for("immer-state");function ai(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Rr=Object,Il=Rr.getPrototypeOf,ld="constructor",Hd="prototype",ey="configurable",ud="enumerable",Cf="writable",fc="value",pa=n=>!!n&&!!n[Jn];function ci(n){var e;return n?PR(n)||Gd(n)||!!n[iS]||!!((e=n[ld])!=null&&e[iS])||$d(n)||Kd(n):!1}var lL=Rr[Hd][ld].toString(),aS=new WeakMap;function PR(n){if(!n||!gv(n))return!1;const e=Il(n);if(e===null||e===Rr[Hd])return!0;const t=Rr.hasOwnProperty.call(e,ld)&&e[ld];if(t===Object)return!0;if(!ol(t))return!1;let a=aS.get(t);return a===void 0&&(a=Function.toString.call(t),aS.set(t,a)),a===lL}function qd(n,e,t=!0){Lc(n)===0?(t?Reflect.ownKeys(n):Rr.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((a,s)=>e(s,a,n))}function Lc(n){const e=n[Jn];return e?e.type_:Gd(n)?1:$d(n)?2:Kd(n)?3:0}var sS=(n,e,t=Lc(n))=>t===2?n.has(e):Rr[Hd].hasOwnProperty.call(n,e),ty=(n,e,t=Lc(n))=>t===2?n.get(e):n[e],cd=(n,e,t,a=Lc(n))=>{a===2?n.set(e,t):a===3?n.add(t):n[e]=t};function uL(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var Gd=Array.isArray,$d=n=>n instanceof Map,Kd=n=>n instanceof Set,gv=n=>typeof n=="object",ol=n=>typeof n=="function",Eg=n=>typeof n=="boolean";function cL(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var aa=n=>n.copy_||n.base_,yv=n=>n.modified_?n.copy_:n.base_;function ny(n,e){if($d(n))return new Map(n);if(Kd(n))return new Set(n);if(Gd(n))return Array[Hd].slice.call(n);const t=PR(n);if(e===!0||e==="class_only"&&!t){const a=Rr.getOwnPropertyDescriptors(n);delete a[Jn];let s=Reflect.ownKeys(a);for(let l=0;l<s.length;l++){const c=s[l],d=a[c];d[Cf]===!1&&(d[Cf]=!0,d[ey]=!0),(d.get||d.set)&&(a[c]={[ey]:!0,[Cf]:!0,[ud]:d[ud],[fc]:n[c]})}return Rr.create(Il(n),a)}else{const a=Il(n);if(a!==null&&t)return{...n};const s=Rr.create(a);return Rr.assign(s,n)}}function vv(n,e=!1){return Yd(n)||pa(n)||!ci(n)||(Lc(n)>1&&Rr.defineProperties(n,{set:hf,add:hf,clear:hf,delete:hf}),Rr.freeze(n),e&&qd(n,(t,a)=>{vv(a,!0)},!1)),n}function hL(){ai(2)}var hf={[fc]:hL};function Yd(n){return n===null||!gv(n)?!0:Rr.isFrozen(n)}var hd="MapSet",ry="Patches",oS="ArrayMethods",LR={};function oo(n){const e=LR[n];return e||ai(0,n),e}var lS=n=>!!LR[n],dc,kR=()=>dc,fL=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:lS(hd)?oo(hd):void 0,arrayMethodsPlugin_:lS(oS)?oo(oS):void 0});function uS(n,e){e&&(n.patchPlugin_=oo(ry),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function iy(n){ay(n),n.drafts_.forEach(dL),n.drafts_=null}function ay(n){n===dc&&(dc=n.parent_)}var cS=n=>dc=fL(dc,n);function dL(n){const e=n[Jn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function hS(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[Jn].modified_&&(iy(e),ai(4)),ci(n)&&(n=fS(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[Jn].base_,n,e)}else n=fS(e,t);return mL(e,n,!0),iy(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==VR?n:void 0}function fS(n,e){if(Yd(e))return e;const t=e[Jn];if(!t)return fd(e,n.handledSet_,n);if(!Qd(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:a}=t;if(a)for(;a.length>0;)a.pop()(n);zR(t,n)}return t.copy_}function mL(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&vv(e,t)}function UR(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var Qd=(n,e)=>n.scope_===e,pL=[];function jR(n,e,t,a){const s=aa(n),l=n.type_;if(a!==void 0&&ty(s,a,l)===e){cd(s,a,t,l);return}if(!n.draftLocations_){const d=n.draftLocations_=new Map;qd(s,(p,g)=>{if(pa(g)){const v=d.get(g)||[];v.push(p),d.set(g,v)}})}const c=n.draftLocations_.get(e)??pL;for(const d of c)cd(s,d,t,l)}function gL(n,e,t){n.callbacks_.push(function(s){var d;const l=e;if(!l||!Qd(l,s))return;(d=s.mapSetPlugin_)==null||d.fixSetContents(l);const c=yv(l);jR(n,l.draft_??l,c,t),zR(l,s)})}function zR(n,e){var a;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((a=n.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const l=s.getPath(n);l&&s.generatePatches_(n,l,e)}UR(n)}}function yL(n,e,t){const{scope_:a}=n;if(pa(t)){const s=t[Jn];Qd(s,a)&&s.callbacks_.push(function(){If(n);const c=yv(s);jR(n,t,c,e)})}else ci(t)&&n.callbacks_.push(function(){const l=aa(n);n.type_===3?l.has(t)&&fd(t,a.handledSet_,a):ty(l,e,n.type_)===t&&a.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&fd(ty(n.copy_,e,n.type_),a.handledSet_,a)})}function fd(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||pa(n)||e.has(n)||!ci(n)||Yd(n)||(e.add(n),qd(n,(a,s)=>{if(pa(s)){const l=s[Jn];if(Qd(l,t)){const c=yv(l);cd(n,a,c,n.type_),UR(l)}}else ci(s)&&fd(s,e,t)})),n}function vL(n,e){const t=Gd(n),a={type_:t?1:0,scope_:e?e.scope_:kR(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,l=dd;t&&(s=[a],l=mc);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return a.draft_=d,a.revoke_=c,[d,a]}var dd={get(n,e){if(e===Jn)return n;let t=n.scope_.arrayMethodsPlugin_;const a=n.type_===1&&typeof e=="string";if(a&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=aa(n);if(!sS(s,e,n.type_))return _L(n,s,e);const l=s[e];if(n.finalized_||!ci(l)||a&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&cL(e))return l;if(l===Tg(n.base_,e)){If(n);const c=n.type_===1?+e:e,d=oy(n.scope_,l,n,c);return n.copy_[c]=d}return l},has(n,e){return e in aa(n)},ownKeys(n){return Reflect.ownKeys(aa(n))},set(n,e,t){const a=BR(aa(n),e);if(a!=null&&a.set)return a.set.call(n.draft_,t),!0;if(!n.modified_){const s=Tg(aa(n),e),l=s==null?void 0:s[Jn];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(uL(t,s)&&(t!==void 0||sS(n.base_,e,n.type_)))return!0;If(n),sy(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),yL(n,e,t)),!0},deleteProperty(n,e){return If(n),Tg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),sy(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=aa(n),a=Reflect.getOwnPropertyDescriptor(t,e);return a&&{[Cf]:!0,[ey]:n.type_!==1||e!=="length",[ud]:a[ud],[fc]:t[e]}},defineProperty(){ai(11)},getPrototypeOf(n){return Il(n.base_)},setPrototypeOf(){ai(12)}},mc={};for(let n in dd){let e=dd[n];mc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}mc.deleteProperty=function(n,e){return mc.set.call(this,n,e,void 0)};mc.set=function(n,e,t){return dd.set.call(this,n[0],e,t,n[0])};function Tg(n,e){const t=n[Jn];return(t?aa(t):n)[e]}function _L(n,e,t){var s;const a=BR(e,t);return a?fc in a?a[fc]:(s=a.get)==null?void 0:s.call(n.draft_):void 0}function BR(n,e){if(!(e in n))return;let t=Il(n);for(;t;){const a=Object.getOwnPropertyDescriptor(t,e);if(a)return a;t=Il(t)}}function sy(n){n.modified_||(n.modified_=!0,n.parent_&&sy(n.parent_))}function If(n){n.copy_||(n.assigned_=new Map,n.copy_=ny(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var EL=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{if(ol(e)&&!ol(t)){const l=t;t=e;const c=this;return function(p=l,...g){return c.produce(p,v=>t.call(this,v,...g))}}ol(t)||ai(6),a!==void 0&&!ol(a)&&ai(7);let s;if(ci(e)){const l=cS(this),c=oy(l,e,void 0);let d=!0;try{s=t(c),d=!1}finally{d?iy(l):ay(l)}return uS(l,a),hS(s,l)}else if(!e||!gv(e)){if(s=t(e),s===void 0&&(s=e),s===VR&&(s=void 0),this.autoFreeze_&&vv(s,!0),a){const l=[],c=[];oo(ry).generateReplacementPatches_(e,s,{patches_:l,inversePatches_:c}),a(l,c)}return s}else ai(1,e)},this.produceWithPatches=(e,t)=>{if(ol(e))return(c,...d)=>this.produceWithPatches(c,p=>e(p,...d));let a,s;return[this.produce(e,t,(c,d)=>{a=c,s=d}),a,s]},Eg(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),Eg(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),Eg(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){ci(n)||ai(8),pa(n)&&(n=TL(n));const e=cS(this),t=oy(e,n,void 0);return t[Jn].isManual_=!0,ay(e),t}finishDraft(n,e){const t=n&&n[Jn];(!t||!t.isManual_)&&ai(9);const{scope_:a}=t;return uS(a,e),hS(void 0,a)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const a=oo(ry).applyPatches_;return pa(n)?a(n,e):this.produce(n,s=>a(s,e))}};function oy(n,e,t,a){const[s,l]=$d(e)?oo(hd).proxyMap_(e,t):Kd(e)?oo(hd).proxySet_(e,t):vL(e,t);return((t==null?void 0:t.scope_)??kR()).drafts_.push(s),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=a,t&&a!==void 0?gL(t,l,a):l.callbacks_.push(function(p){var v;(v=p.mapSetPlugin_)==null||v.fixSetContents(l);const{patchPlugin_:g}=p;l.modified_&&g&&g.generatePatches_(l,[],p)}),s}function TL(n){return pa(n)||ai(10,n),FR(n)}function FR(n){if(!ci(n)||Yd(n))return n;const e=n[Jn];let t,a=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=ny(n,e.scope_.immer_.useStrictShallowCopy_),a=e.scope_.immer_.shouldUseStrictIteration()}else t=ny(n,!0);return qd(t,(s,l)=>{cd(t,s,FR(l))},a),e&&(e.finalized_=!1),t}var bL=new EL,HR=bL.produce;function qR(n){return({dispatch:t,getState:a})=>s=>l=>typeof l=="function"?l(t,a,n):s(l)}var SL=qR(),AL=qR,wL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?od:od.apply(null,arguments)},RL=n=>n&&typeof n.match=="function";function Wu(n,e){function t(...a){if(e){let s=e(...a);if(!s)throw new Error(ca(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:a[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=a=>oL(a)&&a.type===n,t}var GR=class Fu extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Fu.prototype)}static get[Symbol.species](){return Fu}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Fu(...e[0].concat(this)):new Fu(...e.concat(this))}};function dS(n){return ci(n)?HR(n,()=>{}):n}function ff(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function CL(n){return typeof n=="boolean"}var IL=()=>function(e){const{thunk:t=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=e??{};let c=new GR;return t&&(CL(t)?c.push(SL):c.push(AL(t.extraArgument))),c},DL="RTK_autoBatch",mS=n=>e=>{setTimeout(e,n)},NL=(n={type:"raf"})=>e=>(...t)=>{const a=e(...t);let s=!0,l=!1,c=!1;const d=new Set,p=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mS(10):n.type==="callback"?n.queueNotification:mS(n.timeout),g=()=>{c=!1,l&&(l=!1,d.forEach(v=>v()))};return Object.assign({},a,{subscribe(v){const E=()=>s&&v(),S=a.subscribe(E);return d.add(v),()=>{S(),d.delete(v)}},dispatch(v){var E;try{return s=!((E=v==null?void 0:v.meta)!=null&&E[DL]),l=!s,l&&(c||(c=!0,p(g))),a.dispatch(v)}finally{s=!0}}})},xL=n=>function(t){const{autoBatch:a=!0}=t??{};let s=new GR(n);return a&&s.push(NL(typeof a=="object"?a:void 0)),s};function OL(n){const e=IL(),{reducer:t=void 0,middleware:a,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(pv(t))d=aL(t);else throw new Error(ca(1));let p;typeof a=="function"?p=a(e):p=e();let g=od;s&&(g=wL({trace:!1,...typeof s=="object"&&s}));const v=sL(...p),E=xL(v);let S=typeof c=="function"?c(E):E();const C=g(...S);return MR(d,l,C)}function $R(n){const e={},t=[];let a;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(ca(28));if(d in e)throw new Error(ca(29));return e[d]=c,s},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return t.push({matcher:l,reducer:c}),s},addDefaultCase(l){return a=l,s}};return n(s),[e,t,a]}function ML(n){return typeof n=="function"}function VL(n,e){let[t,a,s]=$R(e),l;if(ML(n))l=()=>dS(n());else{const d=dS(n);l=()=>d}function c(d=l(),p){let g=[t[p.type],...a.filter(({matcher:v})=>v(p)).map(({reducer:v})=>v)];return g.filter(v=>!!v).length===0&&(g=[s]),g.reduce((v,E)=>{if(E)if(pa(v)){const C=E(v,p);return C===void 0?v:C}else{if(ci(v))return HR(v,S=>E(S,p));{const S=E(v,p);if(S===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return v},d)}return c.getInitialState=l,c}var PL=(n,e)=>RL(n)?n.match(e):n(e);function LL(...n){return e=>n.some(t=>PL(t,e))}var kL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",UL=(n=21)=>{let e="",t=n;for(;t--;)e+=kL[Math.random()*64|0];return e},jL=["name","message","stack","code"],bg=class{constructor(n,e){Hp(this,"_type");this.payload=n,this.meta=e}},pS=class{constructor(n,e){Hp(this,"_type");this.payload=n,this.meta=e}},zL=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of jL)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},gS="External signal was aborted",Nr=(()=>{function n(e,t,a){const s=Wu(e+"/fulfilled",(p,g,v,E)=>({payload:p,meta:{...E||{},arg:v,requestId:g,requestStatus:"fulfilled"}})),l=Wu(e+"/pending",(p,g,v)=>({payload:void 0,meta:{...v||{},arg:g,requestId:p,requestStatus:"pending"}})),c=Wu(e+"/rejected",(p,g,v,E,S)=>({payload:E,error:(a&&a.serializeError||zL)(p||"Rejected"),meta:{...S||{},arg:v,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function d(p,{signal:g}={}){return(v,E,S)=>{const C=a!=null&&a.idGenerator?a.idGenerator(p):UL(),U=new AbortController;let B,V;function H(F){V=F,U.abort()}g&&(g.aborted?H(gS):g.addEventListener("abort",()=>H(gS),{once:!0}));const q=(async function(){var re,Y;let F;try{let b=(re=a==null?void 0:a.condition)==null?void 0:re.call(a,p,{getState:E,extra:S});if(FL(b)&&(b=await b),b===!1||U.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const A=new Promise((I,N)=>{B=()=>{N({name:"AbortError",message:V||"Aborted"})},U.signal.addEventListener("abort",B,{once:!0})});v(l(C,p,(Y=a==null?void 0:a.getPendingMeta)==null?void 0:Y.call(a,{requestId:C,arg:p},{getState:E,extra:S}))),F=await Promise.race([A,Promise.resolve(t(p,{dispatch:v,getState:E,extra:S,requestId:C,signal:U.signal,abort:H,rejectWithValue:(I,N)=>new bg(I,N),fulfillWithValue:(I,N)=>new pS(I,N)})).then(I=>{if(I instanceof bg)throw I;return I instanceof pS?s(I.payload,C,p,I.meta):s(I,C,p)})])}catch(b){F=b instanceof bg?c(null,C,p,b.payload,b.meta):c(b,C,p)}finally{B&&U.signal.removeEventListener("abort",B)}return a&&!a.dispatchConditionRejection&&c.match(F)&&F.meta.condition||v(F),F})();return Object.assign(q,{abort:H,requestId:C,arg:p,unwrap(){return q.then(BL)}})}}return Object.assign(d,{pending:l,rejected:c,fulfilled:s,settled:LL(c,s),typePrefix:e})}return n.withTypes=()=>n,n})();function BL(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function FL(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var HL=Symbol.for("rtk-slice-createasyncthunk");function qL(n,e){return`${n}/${e}`}function GL({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[HL];return function(s){const{name:l,reducerPath:c=l}=s;if(!l)throw new Error(ca(11));const d=(typeof s.reducers=="function"?s.reducers(KL()):s.reducers)||{},p=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(Q,re){const Y=typeof Q=="string"?Q:Q.type;if(!Y)throw new Error(ca(12));if(Y in g.sliceCaseReducersByType)throw new Error(ca(13));return g.sliceCaseReducersByType[Y]=re,v},addMatcher(Q,re){return g.sliceMatchers.push({matcher:Q,reducer:re}),v},exposeAction(Q,re){return g.actionCreators[Q]=re,v},exposeCaseReducer(Q,re){return g.sliceCaseReducersByName[Q]=re,v}};p.forEach(Q=>{const re=d[Q],Y={reducerName:Q,type:qL(l,Q),createNotation:typeof s.reducers=="function"};QL(re)?WL(Y,re,v,e):YL(Y,re,v)});function E(){const[Q={},re=[],Y=void 0]=typeof s.extraReducers=="function"?$R(s.extraReducers):[s.extraReducers],b={...Q,...g.sliceCaseReducersByType};return VL(s.initialState,A=>{for(let I in b)A.addCase(I,b[I]);for(let I of g.sliceMatchers)A.addMatcher(I.matcher,I.reducer);for(let I of re)A.addMatcher(I.matcher,I.reducer);Y&&A.addDefaultCase(Y)})}const S=Q=>Q,C=new Map,U=new WeakMap;let B;function V(Q,re){return B||(B=E()),B(Q,re)}function H(){return B||(B=E()),B.getInitialState()}function q(Q,re=!1){function Y(A){let I=A[Q];return typeof I>"u"&&re&&(I=ff(U,Y,H)),I}function b(A=S){const I=ff(C,re,()=>new WeakMap);return ff(I,A,()=>{const N={};for(const[x,P]of Object.entries(s.selectors??{}))N[x]=$L(P,A,()=>ff(U,A,H),re);return N})}return{reducerPath:Q,getSelectors:b,get selectors(){return b(Y)},selectSlice:Y}}const F={name:l,reducer:V,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:H,...q(c),injectInto(Q,{reducerPath:re,...Y}={}){const b=re??c;return Q.inject({reducerPath:b,reducer:V},Y),{...F,...q(b,!0)}}};return F}}function $L(n,e,t,a){function s(l,...c){let d=e(l);return typeof d>"u"&&a&&(d=t()),n(d,...c)}return s.unwrapped=n,s}var mo=GL();function KL(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function YL({type:n,reducerName:e,createNotation:t},a,s){let l,c;if("reducer"in a){if(t&&!XL(a))throw new Error(ca(17));l=a.reducer,c=a.prepare}else l=a;s.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?Wu(n,c):Wu(n))}function QL(n){return n._reducerDefinitionType==="asyncThunk"}function XL(n){return n._reducerDefinitionType==="reducerWithPrepare"}function WL({type:n,reducerName:e},t,a,s){if(!s)throw new Error(ca(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:p,settled:g,options:v}=t,E=s(n,l,v);a.exposeAction(e,E),c&&a.addCase(E.fulfilled,c),d&&a.addCase(E.pending,d),p&&a.addCase(E.rejected,p),g&&a.addMatcher(E.settled,g),a.exposeCaseReducer(e,{fulfilled:c||df,pending:d||df,rejected:p||df,settled:g||df})}function df(){}function ca(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const JL={positions:[],loading:!1,error:null,fetched:!1},to=Nr("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=Kr(Sn,"metadata","positions"),a=await xc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),KR=Nr("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=Kr(Sn,"metadata","positions");return await jd(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),ZL=mo({name:"positions",initialState:JL,reducers:{},extraReducers:n=>{n.addCase(to.pending,e=>{e.loading=!0,e.error=null}).addCase(to.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(to.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(KR.fulfilled,(e,t)=>{e.positions=t.payload})}}),ek=ZL.reducer,tk={teams:[],loading:!1,error:null,fetched:!1},gl=Nr("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=Kr(Sn,"metadata","teams"),a=await xc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),Df=Nr("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=Kr(Sn,"metadata","teams");return await jd(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),YR=mo({name:"teams",initialState:tk,reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(gl.pending,e=>{e.loading=!0,e.error=null}).addCase(gl.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(gl.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Df.pending,e=>{e.error=null}).addCase(Df.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(Df.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:yU}=YR.actions,nk=YR.reducer,rk=()=>{const n=hi(),{firebaseUser:e,userData:t,loading:a}=yt(p=>p.auth),{fetched:s,loading:l}=yt(p=>p.teams),{fetched:c,loading:d}=yt(p=>p.positions);return M.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!s&&!l&&n(gl()),!c&&!d&&n(to()))},[n,e,t,s,l,c,d]),a||t!=null&&t.isApproved&&(!s||!c)?w.jsx(Cl,{}):e?t?t.isApproved?w.jsx(tA,{}):w.jsx(as,{to:"/guest",replace:!0}):w.jsx(Cl,{}):w.jsx(as,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=(...n)=>n.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=n=>{const e=ak(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=M.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},p)=>M.createElement("svg",{ref:p,...sk,width:e,height:e,stroke:n,strokeWidth:a?Number(t)*24/Number(e):t,className:QR("lucide",s),...!l&&!ok(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,v])=>M.createElement(g,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=(n,e)=>{const t=M.forwardRef(({className:a,...s},l)=>M.createElement(lk,{ref:l,iconNode:e,className:QR(`lucide-${ik(yS(n))}`,`lucide-${n}`,a),...s}));return t.displayName=yS(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],XR=po("chevron-up",uk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],hk=po("copy",ck);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],WR=po("corner-down-right",fk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],mk=po("moon",dk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],gk=po("panel-left-close",pk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],vk=po("panel-left-open",yk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ek=po("sun",_k),Tk=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},bk={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:Tk(),lastVisitedPaths:{}},JR=mo({name:"ui",initialState:bk,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:a}=e.payload;n.lastVisitedPaths[t]=a},toggleTeamExpansion:(n,e)=>{const t=e.payload,a=n.expandedTeams.indexOf(t);a>=0?n.expandedTeams.splice(a,1):n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:a,userEmail:s}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][a]||(n.hiddenUsers[t][a]=[]);const l=n.hiddenUsers[t][a],c=l.indexOf(s);c>=0?l.splice(c,1):l.push(s),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))}}}),{setMobileSidebarOpen:Hu,setDesktopSidebarExpanded:Sk,setLastVisitedPath:Ak,toggleTeamExpansion:wk,toggleUserVisibility:Rk}=JR.actions,Ck=JR.reducer,Ik=()=>{const n=M.useContext(OR);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},_v=({showText:n})=>{const{theme:e,toggleTheme:t}=Ik();return w.jsxs("button",{className:"theme-toggle-button",onClick:t,"aria-label":"Toggle theme",children:[e==="dark"?w.jsx(Ek,{size:20}):w.jsx(mk,{size:20}),n&&w.jsx("span",{children:"Toggle theme"})]})},Dk=({title:n,hasSideNav:e=!0})=>{const t=hi(),{isMobileSidebarOpen:a}=yt(l=>l.ui),s=()=>{e&&t(Hu(!a))};return w.jsxs("header",{className:"mobile-header",children:[w.jsxs("div",{className:`mobile-header-pill ${a?"mobile-header-pill-active":""} ${e?"":"mobile-header-pill-disabled"}`,onClick:s,children:[w.jsx("span",{className:"mobile-header-text",children:n}),e&&w.jsx(XR,{className:`mobile-header-chevron ${a?"rotate":""}`})]}),w.jsx(_v,{})]})};var Wt=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(Wt||{}),ul=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(ul||{});const Ev=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],vS=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],Nk=()=>{const n=uo(),e=Qr(),{lastVisitedPaths:t}=yt(l=>l.ui),a=e.pathname.includes("/settings")?Wt.SETTINGS:e.pathname.includes("/dashboard")?Wt.DASHBOARD:Wt.ROSTER,s=l=>{if(a===l){l===Wt.DASHBOARD&&n("/app/dashboard");return}const c=t[l];n(c||`/app/${l}`)};return w.jsx("nav",{className:"bottom-nav-container",children:w.jsx("div",{className:"bottom-nav",children:Ev.map(l=>w.jsxs("button",{className:`bottom-nav-btn ${a===l.id?"bottom-nav-btn-active":""}`,onClick:()=>s(l.id),children:[w.jsx("span",{children:l.icon}),w.jsx("span",{children:l.label})]},l.id))})})},xk=()=>{var F;const n=uo(),e=Qr(),t=vd(),a=hi(),{userData:s}=yt(Q=>Q.auth),{isDesktopSidebarExpanded:l,expandedTeams:c}=yt(Q=>Q.ui),{teams:d,fetched:p,loading:g}=yt(Q=>Q.teams),{fetched:v}=yt(Q=>Q.positions),E=e.pathname.includes("/settings")?Wt.SETTINGS:e.pathname.includes("/dashboard")?Wt.DASHBOARD:Wt.ROSTER,{teamName:S,positionName:C,section:U}=t,B=C||U;M.useEffect(()=>{p||a(gl()),v||a(to())},[a,p,v]);const V=M.useCallback(Q=>{n(Q)},[n]),H=Q=>{a(wk(Q))},q=()=>{const Q=Ev.find(Y=>Y.id===E),re=Q?Q.label:"GIG ROSTER";return S&&B?`${S}  ${B}`:S||(B?`${re}  ${B}`:re)};return w.jsxs("aside",{className:"side-nav",children:[w.jsxs("div",{className:"sidebar-content",children:[w.jsxs("div",{className:"tablet-sidebar-header",children:[l&&w.jsx("h3",{children:q()}),w.jsx("button",{className:"sidebar-toggle-button",onClick:()=>a(Sk(!l)),"aria-label":l?"Collapse sidebar":"Expand sidebar",children:l?w.jsx(gk,{size:20}):w.jsx(vk,{size:20})})]}),w.jsxs("nav",{className:"side-menu-list",children:[E===Wt.ROSTER&&g&&w.jsx("div",{className:"side-nav-item loading",children:"Loading teams..."}),E===Wt.ROSTER?(F=s==null?void 0:s.teams)==null?void 0:F.map(Q=>{var A,I;const re=d.find(N=>N.name===Q);if(!re)return null;const Y=s.teams.length===1,b=Y||c.includes(re.name);return w.jsxs("div",{children:[!Y&&w.jsxs("div",{className:"sidenav-menu-subheading sidenav-menu-subheading-clickable",style:{cursor:"pointer"},onClick:()=>H(re.name),children:[w.jsxs("div",{children:[re.emoji," ",l&&re.name]}),w.jsx("span",{className:"expand-icon",children:b?"":""})]}),b&&w.jsxs("div",{className:"side-nav-sub-items",children:[(I=(A=re.positions)==null?void 0:A.filter(N=>!N.parentId))==null?void 0:I.map(N=>{const x=B===N.name&&S===re.name;return w.jsxs("button",{className:`side-nav-item side-nav-item-sub ${x?"side-nav-item-active":""}`,onClick:()=>{V(`/app/roster/${re.name}/${N.name}`),a(Hu(!1))},style:{borderLeft:x?`4px solid ${N.colour}`:"4px solid transparent",backgroundColor:x?`${N.colour}15`:"transparent",color:x?N.colour:""},children:[w.jsx("span",{className:"side-emoji",children:N.emoji})," ",l&&N.name]},N.name)}),w.jsxs("button",{className:`side-nav-item side-nav-item-sub ${B==="Absence"&&S===re.name?"side-nav-item-active":""}`,onClick:()=>{V(`/app/roster/${re.name}/Absence`),a(Hu(!1))},style:{borderLeft:B==="Absence"&&S===re.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:B==="Absence"&&S===re.name?"var(--background-toggle-off-transparent)":"transparent"},children:[w.jsx("span",{className:"side-emoji",children:""})," ",l&&"Absence"]})]})]},re.name)}):vS.filter(Q=>!Q.adminOnly).map(Q=>w.jsxs("button",{className:`side-nav-item ${B===Q.id?"side-nav-item-active":""}`,onClick:()=>{V(`/app/settings/${Q.id}`),a(Hu(!1))},children:[w.jsx("span",{className:"side-emoji",children:Q.icon})," ",l&&Q.label]},Q.id))]})]}),(s==null?void 0:s.isAdmin)&&E===Wt.SETTINGS&&w.jsxs("div",{className:"admin-only-section-wrapper",children:[w.jsx("div",{className:"sidenav-menu-subheading",children:l&&w.jsx("h4",{children:"Admin Only"})}),vS.filter(Q=>Q.adminOnly).map(Q=>w.jsxs("button",{className:`side-nav-item ${B===Q.id?"side-nav-item-active":""}`,onClick:()=>{V(`/app/settings/${Q.id}`),a(Hu(!1))},children:[w.jsx("span",{className:"side-emoji",children:Q.icon})," ",l&&Q.label]},Q.id))]}),w.jsx("div",{className:"sidebar-footer",children:w.jsx(_v,{showText:l})})]})},Ok=()=>{const n=hi(),e=uo(),t=Qr(),a=vd(),{userData:s}=yt(H=>H.auth),{teams:l}=yt(H=>H.teams),{isMobileSidebarOpen:c,isDesktopSidebarExpanded:d,lastVisitedPaths:p}=yt(H=>H.ui),g=t.pathname.includes("/settings")?Wt.SETTINGS:t.pathname.includes("/dashboard")?Wt.DASHBOARD:Wt.ROSTER,{teamName:v,positionName:E,section:S}=a,C=E||S||null,U=g!==Wt.DASHBOARD;M.useEffect(()=>{const H=g===Wt.ROSTER&&!v,q=g===Wt.SETTINGS&&!C;if(t.pathname.startsWith("/app/")&&!H&&!q&&g!==Wt.DASHBOARD){const F=t.pathname+t.search;n(Ak({tabId:g,path:F}))}},[t.pathname,t.search,g,v,C,n]),M.useEffect(()=>{var Q,re;const H=t.pathname==="/app"||t.pathname==="/app/",q=g===Wt.ROSTER&&!v,F=g===Wt.SETTINGS&&!C;if(H)e(p[Wt.DASHBOARD]||"/app/dashboard",{replace:!0});else if(q){const Y=p[Wt.ROSTER];if(Y)e(Y,{replace:!0});else if((Q=s==null?void 0:s.teams)!=null&&Q[0]&&l.length>0){const b=l.find(A=>A.name===s.teams[0]);(re=b==null?void 0:b.positions)!=null&&re[0]&&e(`/app/roster/${b.name}/${b.positions[0].name}`,{replace:!0})}}else if(F){const Y=p[Wt.SETTINGS];e(Y||`/app/settings/${ul.PROFILE}`,{replace:!0})}},[g,v,C,s,l,e,t.pathname,t.search,p]);const B=()=>{const H=Ev.find(F=>F.id===g),q=H?H.label:"GIG ROSTER";return v&&C?`${v}  ${C}`:v||(C?`${q}  ${C}`:q)},V=["app-shell",c?"menu-open":"",d?"sidebar-expanded":"sidebar-collapsed",U?"":"no-sidebar"].filter(Boolean).join(" ");return w.jsxs(w.Fragment,{children:[w.jsx(Dk,{title:B(),hasSideNav:U}),w.jsxs("div",{className:V,children:[U&&w.jsx(xk,{}),w.jsx("main",{className:"main-content",children:w.jsx("div",{className:"content-container",children:w.jsx(tA,{})})}),w.jsx(Nk,{})]})]})},ZR=n=>{const e=[];return Object.entries(n).forEach(([t,a])=>{a.forEach(s=>{e.push(`${t}|${s}`)})}),e},e1=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${a}`},Ju=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),Mk={entries:{},dirtyEntries:{},loading:!1,saving:!1,error:null},Zu=Nr("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Nc(Cc(Sn,"roster")),a=await Oc(t),s={};return a.docs.forEach(l=>{const c=l.data(),d=c.updatedAt,p={...c,updatedAt:d&&typeof d=="object"&&"toMillis"in d?d.toMillis():d};s[l.id]={...p,id:l.id}}),s}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),ec=Nr("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=eR(Sn),a=Date.now(),s={};return Object.values(n).forEach(l=>{const c=Kr(Sn,"roster",l.id),d={...l,updatedAt:a};t.set(c,d),s[l.id]=d}),await t.commit(),s}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),t1=mo({name:"roster",initialState:Mk,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:a,userIdentifier:s,positionGroupNames:l,maxConflict:c}=e.payload,d=n.dirtyEntries[t]||n.entries[t];let p;d?p=JSON.parse(JSON.stringify(d)):p={id:t,date:t,teams:{},absence:{}},p.teams[a]||(p.teams[a]={});const g=p.teams[a][s]||[],v=l.findIndex(U=>g.includes(U)),E=v>=0?l[v]:null;let S=null;E===null?S=l[0]:v<l.length-1?S=l[v+1]:S=null;const C=g.filter(U=>!l.includes(U));if(S)if(C.length<c)C.push(S);else{n.error=`User already has ${c} assignment(s) in this team.`;return}C.length===0?delete p.teams[a][s]:p.teams[a][s]=C,n.dirtyEntries[t]=p},updateLocalEventName(n,e){const{date:t,eventName:a}=e.payload,s=n.dirtyEntries[t]||n.entries[t];let l;s?l=JSON.parse(JSON.stringify(s)):l={id:t,date:t,teams:{},absence:{}},l.eventName=a,n.dirtyEntries[t]=l},resetRosterEdits(n){n.dirtyEntries={},n.error=null},updateLocalAbsence(n,e){var p;const{date:t,userIdentifier:a,reason:s,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let d;c?d=JSON.parse(JSON.stringify(c)):d={id:t,date:t,teams:{},absence:{}},l?d.absence[a]={reason:s??((p=d.absence[a])==null?void 0:p.reason)??""}:delete d.absence[a],n.dirtyEntries[t]=d}},extraReducers:n=>{n.addCase(Zu.pending,e=>{e.loading=!0,e.error=null}).addCase(Zu.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(Zu.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(ec.pending,e=>{e.saving=!0,e.error=null}).addCase(ec.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(ec.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:vU,updateLocalAssignment:Vk,updateLocalEventName:Pk,resetRosterEdits:n1,updateLocalAbsence:_S}=t1.actions,Lk=t1.reducer,Nf=(n,e,t)=>{const a=[],s=new Date;s.setHours(0,0,0,0);const l=s.getFullYear(),c=e||l,d=t||l,p={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g=n.map(C=>p[C]);let v;c===l?v=new Date(s):v=new Date(c,0,1),v.setHours(0,0,0,0);const E=new Date(d,11,31);E.setHours(23,59,59,999);const S=new Date(v);for(;S.getTime()<=E.getTime();)g.includes(S.getDay())&&a.push(new Date(S)),S.setDate(S.getDate()+1);return a.sort((C,U)=>C.getTime()-U.getTime()),a.map(C=>e1(C))},kk=(n,e,t=5)=>{const a=[],s=new Date(e);s.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(p=>l[p]),d=new Date(s);for(;a.length<t;){d.setDate(d.getDate()-1),c.includes(d.getDay())&&a.push(new Date(d));const p=new Date(s);if(p.setFullYear(p.getFullYear()-1),d<p)break}return a.map(p=>e1(p)).sort()},Uk={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},xf=Nr("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=Cc(Sn,"users"),a=Nc(t,nv("teams","array-contains",n)),s=await Oc(a),l=[];return s.forEach(c=>{l.push(c.data())}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),Of=Nr("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:a})=>{if(!n||!e)return[];try{const c=a().positions.positions.filter(C=>C.parentId===e),p=[e,...c.map(C=>C.name)].map(C=>`${n}|${C}`),g=Cc(Sn,"users"),v=Nc(g,nv("indexedAssignments","array-contains-any",p)),E=await Oc(v),S=[];return E.forEach(C=>{S.push(C.data())}),S.sort((C,U)=>(C.name||"").localeCompare(U.name||""))}catch(s){return console.error("Error fetching users:",s),t("Failed to load users.")}}),Mf=Nr("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=Kr(Sn,"metadata","teams"),a=await xc(t);if(a.exists()){const s=a.data();return(Array.isArray(s.list)?s.list.map(d=>({...d,preferredDays:d.preferredDays||[],positions:d.positions||[]})):[]).find(d=>d.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),r1=mo({name:"rosterView",initialState:Uk,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=kk(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=Nf(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,a=Nf(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...a]}}},extraReducers:n=>{n.addCase(Of.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(Of.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(Of.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(xf.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(xf.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(xf.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(Mf.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(Mf.fulfilled,(e,t)=>{var a;e.currentTeamData=t.payload,(a=t.payload)!=null&&a.preferredDays&&(e.rosterDates=Nf(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(Mf.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:jk,resetToUpcomingDates:zk,loadNextYearDates:Bk}=r1.actions,Fk=r1.reducer,Hk=()=>{const n=hi(),[e,t]=UN(),a=e.get("date"),{userData:s}=yt(K=>K.auth),{teams:l}=yt(K=>K.teams),{entries:c,dirtyEntries:d,loading:p,saving:g}=yt(K=>K.roster),{positions:v}=yt(K=>K.positions),[E,S]=M.useState([]),[C,U]=M.useState(!1),[B,V]=M.useState(0),[H,q]=M.useState(0),[F,Q]=M.useState(!1),re=M.useRef(null),Y=M.useRef(!1),b=Object.keys(d).length>0;M.useEffect(()=>{n(Zu())},[n]),M.useEffect(()=>{const K=re.current;if(!K)return;const oe=new ResizeObserver(ce=>{for(const pe of ce){const Ee=pe.contentRect.width;Ee>0&&q(Ee)}});return oe.observe(K),()=>oe.disconnect()},[p,C]);const A=M.useMemo(()=>{const K=Ju();if(!(s!=null&&s.teams)||l.length===0)return[];const oe=l.filter(Ee=>s.teams.includes(Ee.name)),ce=new Set;oe.forEach(Ee=>{Nf(Ee.preferredDays).forEach(Ke=>ce.add(Ke))});const pe=Array.from(ce).sort();return a&&a<K?[a]:pe.filter(Ee=>{const Pe=Ee;if(a===Pe)return!0;const Ke=c[Pe]||d[Pe];return Ke?oe.some(lt=>{var kn;const vn=((kn=Ke.teams)==null?void 0:kn[lt.name])||{};return Object.values(vn).some(_t=>_t.length>0)}):!1})},[s,l,c,d,a]);M.useEffect(()=>{if(A.length===0||!re.current||p||H===0)return;const K=re.current,oe=(ce,pe)=>{const Ee=K.offsetWidth||H;Ee!==0&&(K.style.scrollSnapType="none",K.scrollTo({left:Ee*ce,behavior:pe?"smooth":"auto"}),setTimeout(()=>{K&&(K.style.scrollSnapType="x mandatory"),Q(!0)},50),V(ce),Y.current=!0)};if(a){const ce=A.findIndex(pe=>pe===a);if(ce>=0){const pe=Math.round(K.scrollLeft/(K.offsetWidth||H||1));!Y.current||pe!==ce?requestAnimationFrame(()=>{oe(ce,Y.current)}):Q(!0)}else Q(!0)}else K.scrollLeft!==0?oe(0,!0):Q(!0),Y.current=!0},[a,A,p,H]);const I=()=>{t({},{replace:!0})};M.useEffect(()=>{(async()=>{if(!(!(s!=null&&s.teams)||s.teams.length===0)){U(!0);try{const oe=Cc(Sn,"users"),ce=Nc(oe,nv("teams","array-contains-any",s.teams)),pe=await Oc(ce),Ee=[];pe.forEach(Pe=>Ee.push(Pe.data())),S(Ee)}catch(oe){console.error("Error fetching users for dashboard:",oe)}finally{U(!1)}}})()},[s==null?void 0:s.teams]);const N=M.useCallback(K=>{if(!K||!(s!=null&&s.teams)||l.length===0)return null;const oe=K,ce=d[oe]||c[oe],Pe=l.filter(Ke=>s.teams.includes(Ke.name)).map(Ke=>{var ae;const lt=((ae=ce==null?void 0:ce.teams)==null?void 0:ae[Ke.name])||{},vn=[],kn=Ke.positions.map(_e=>_e.name);let _t=0;return kn.forEach(_e=>{const Oe=v.find(Fe=>Fe.name===_e),Ae=[];Object.entries(lt).forEach(([Fe,Qe])=>{if(Qe.includes(_e)){const Ge=E.find(Ve=>Ve.email===Fe);Ge?Ae.push(Ge):Ae.push({email:Fe,name:Fe}),_t++}});const ze=[...Ae].sort((Fe,Qe)=>Oe!=null&&Oe.sortByGender&&Fe.gender!==Qe.gender?Fe.gender==="Male"?-1:Qe.gender==="Male"?1:(Fe.gender||"").localeCompare(Qe.gender||""):(Fe.name||"").localeCompare(Qe.name||""));vn.push({posName:_e,emoji:(Oe==null?void 0:Oe.emoji)||"",names:ze.map(Fe=>Fe.name||Fe.email||"Unknown")})}),{teamName:Ke.name,teamEmoji:Ke.emoji,positions:vn,hasAssignments:_t>0}}).filter(Ke=>Ke.hasAssignments);return Pe.length>0?Pe:null},[c,d,s,l,v,E]),x=(K,oe,ce,pe)=>{let Ke=`${new Date(K).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"})} - ${ce} ${oe}
`;pe.forEach(lt=>{const vn=lt.names.length>0?lt.names.join(", "):"-";Ke+=`${lt.emoji}: ${vn}
`}),navigator.clipboard.writeText(Ke).then(()=>{})},P=()=>{if(!re.current)return;const K=re.current,oe=K.offsetWidth,ce=Math.round(K.scrollLeft/oe);if(ce!==B&&A[ce]){V(ce);const pe=A[ce];if(a!==pe){const Ee=Ju();ce===0&&Ee===pe?t({},{replace:!0}):t({date:pe},{replace:!0})}}},O=(K,oe)=>{n(Pk({date:K,eventName:oe}))},Ue=()=>{n(ec(d))},Ze=()=>{n(n1())};if(p||C)return w.jsx(kl,{});if(A.length===0)return w.jsxs("div",{className:"dashboard-empty",children:[w.jsx("h2",{children:"No upcoming events found"}),w.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const W=A[B],me=Ju(),ge=W&&W<me,je=ge?"Previous Event":"Upcoming Events",Me=K=>new Date(K).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),j=(K,oe=!1)=>{const ce=N(K);return ce?w.jsx("div",{className:"team-cards-container",children:ce.map(pe=>w.jsxs("div",{className:"team-event-card",children:[w.jsxs("div",{className:"team-event-header",children:[w.jsxs("h3",{children:[w.jsx("span",{className:"team-card-emoji",children:pe.teamEmoji}),w.jsx("span",{className:"team-card-name",children:pe.teamName})]}),!oe&&w.jsxs("button",{className:"copy-roster-btn",onClick:()=>x(K,pe.teamName,pe.teamEmoji,pe.positions),title:"Copy to clipboard",children:[w.jsx(hk,{size:16})," Copy"]})]}),w.jsx("div",{className:"team-event-details",children:pe.positions.map(Ee=>w.jsxs("div",{className:"pos-assignment-row",children:[w.jsx("span",{className:"pos-emoji-label",title:Ee.posName,children:Ee.emoji}),w.jsx("span",{className:`assigned-names ${Ee.names.length===0?"unassigned":""}`,children:Ee.names.length>0?Ee.names.join(", "):"Unassigned"})]},Ee.posName))})]},pe.teamName))}):null};return w.jsxs("div",{className:"dashboard-container",children:[w.jsxs("div",{className:"dashboard-header",children:[w.jsx("h1",{children:je}),w.jsx("div",{className:"dashboard-header-actions",children:ge&&w.jsx("button",{className:"clear-past-btn",onClick:I,children:"Reset to upcoming"})})]}),w.jsx("div",{className:"carousel-outer-wrapper",style:{opacity:F?1:0,transition:"opacity 0.3s ease-in-out"},children:w.jsx("div",{className:"events-carousel-track",ref:re,onScroll:P,children:A.map((K,oe)=>{const ce=K,pe=d[ce]||c[ce],Ee=(pe==null?void 0:pe.eventName)||"";return w.jsxs("div",{className:`event-card-wrapper ${oe===B?"active":"peek"}`,children:[w.jsx("div",{className:"event-name-container",children:w.jsx("input",{type:"text",className:"dashboard-event-name-input",placeholder:"Event name (e.g. Easter Sunday)",value:Ee,onChange:Pe=>O(K,Pe.target.value),disabled:oe!==B})}),w.jsx("div",{className:"event-card-date",children:Me(K)}),j(K,oe!==B)]},K)})})}),w.jsxs("div",{className:"carousel-pagination",children:[B+1," / ",A.length]}),b&&w.jsx("div",{className:"roster-save-footer",children:w.jsxs("div",{className:"save-footer-content",children:[w.jsx("span",{className:"changes-label",children:"Unsaved event labels"}),w.jsxs("div",{className:"save-footer-actions",children:[w.jsx("button",{className:"cancel-btn",onClick:Ze,disabled:g,children:"Discard"}),w.jsx("button",{className:"save-btn",onClick:Ue,disabled:g,children:g?"Saving...":"Save Changes"})]})]})})]})},Ii=({children:n,nowrap:e})=>w.jsx("div",{className:`pill-group ${e?"pill-group-nowrap":""}`,children:n}),Wn=({colour:n,isDropdown:e,isActive:t,isDisabled:a,minWidth:s,onClick:l,children:c})=>{const[d,p]=M.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),w.jsxs("div",{className:`pill pill--text ${t?"pill-active":""} ${a?"pill-disabled":""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:s?`${s}px`:"fit-content"},onClick:g=>{a||(p(v=>!v),l&&l(g))},children:[c,e&&w.jsx(XR,{style:{rotate:d?"90deg":"0"}})]})},qk={firebaseUser:null,userData:null,loading:!0,error:null},Vf=Nr("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=Kr(Sn,"users",n),a=await xc(t);if(!a.exists()){const s="chris.sm.kang542@gmail.com",l=Rl.currentUser,c=(l==null?void 0:l.email)===s,d={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await KV(t,d),d}return a.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),Pf=Nr("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const a=Kr(Sn,"users",n),s={...e};return s.teamPositions&&(s.indexedAssignments=ZR(s.teamPositions)),await jd(a,s),s}catch(a){return t(a instanceof Error?a.message:"Failed to update profile")}}),i1=mo({name:"auth",initialState:qk,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(Vf.pending,e=>{e.loading=!0,e.error=null}).addCase(Vf.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(Vf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Pf.pending,e=>{e.error=null}).addCase(Pf.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(Pf.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:Gk,setUserData:$k,setLoading:_U,logout:Kk}=i1.actions,Yk=i1.reducer,a1=()=>{const n=hi(),{userData:e,firebaseUser:t}=yt(F=>F.auth),a=yt(F=>F.teams.teams),[s,l]=M.useState((e==null?void 0:e.name)||""),[c,d]=M.useState((e==null?void 0:e.gender)||""),[p,g]=M.useState((e==null?void 0:e.isActive)??!0),[v,E]=M.useState((e==null?void 0:e.teams)||[]),[S,C]=M.useState((e==null?void 0:e.teamPositions)||{}),[U,B]=M.useState("idle"),V=async()=>{if(t){B("saving");try{const F={name:s,gender:c,isActive:p,teams:v,teamPositions:S};await n(Pf({uid:t.uid,data:F})).unwrap(),B("success"),setTimeout(()=>B("idle"),2e3)}catch(F){console.error(F),B("idle")}}},H=F=>{E(Q=>{const re=Q.includes(F),Y=re?Q.filter(b=>b!==F):[...Q,F];return C(b=>{const A={...b};return re?delete A[F]:A[F]||(A[F]=[]),A}),Y})},q=(F,Q)=>{C(re=>{const Y=re[F]||[],b=Y.includes(Q)?Y.filter(A=>A!==Q):[...Y,Q];return{...re,[F]:b}})};return e?w.jsxs("section",{className:"profile-card",children:[w.jsx("div",{className:"profile-readonly",children:w.jsxs("p",{children:[w.jsx("strong",{children:"Email:"})," ",e.email]})}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Name"}),w.jsx(Ii,{children:w.jsx("input",{type:"text",value:s,onChange:F=>l(F.target.value),className:"form-input form-input-width-auto"})})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Gender"}),w.jsx(Ii,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(F=>w.jsx(Wn,{colour:F.colour,onClick:()=>d(F.value),isActive:c===F.value,children:F.value},F.value))})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"My Teams"}),w.jsx(Ii,{children:a.map(F=>{const Q=v.includes(F.name);return w.jsxs(Wn,{onClick:()=>H(F.name),isActive:Q,children:[w.jsx("span",{children:F.emoji})," ",F.name]},F.name)})})]}),v.length>0&&w.jsxs("div",{className:"team-positions-section",children:[w.jsx("label",{className:"section-label",children:"Positions per Team"}),v.map(F=>{var re,Y;const Q=a.find(b=>b.name===F);return Q?w.jsxs("div",{className:"team-position-group",children:[w.jsxs("div",{className:"team-position-header",children:[Q.emoji," ",Q.name]}),w.jsx(Ii,{children:(Y=(re=Q.positions)==null?void 0:re.filter(b=>!b.parentId))==null?void 0:Y.map(b=>{var I;const A=(I=S[F])==null?void 0:I.includes(b.name);return w.jsxs(Wn,{onClick:()=>q(F,b.name),isActive:A,colour:b.colour,children:[w.jsx("span",{children:b.emoji})," ",b.name]},b.name)})})]},F):null})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Availability Status"}),w.jsx(Wn,{colour:p?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>g(!p),isActive:!0,children:p?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),w.jsx("p",{className:"form-field-hint",children:"Turn off if you want to be hidden from the roster."})]}),w.jsxs("div",{className:"action-container",children:[w.jsx("button",{onClick:V,disabled:U!=="idle",className:`save-button ${U}`,children:U==="saving"?"Saving...":U==="success"?"Done ":"Update Profile"}),w.jsx("button",{onClick:()=>Rl.signOut(),className:"logout-btn",children:"Logout"})]})]}):w.jsx("div",{children:"Loading profile..."})},Qk=()=>{const{userData:n,firebaseUser:e,loading:t}=yt(a=>a.auth);return t?w.jsx(Cl,{}):e?n?n.isApproved?w.jsx(as,{to:"/app",replace:!0}):w.jsxs("div",{className:"guest-container",children:[w.jsxs("header",{className:"guest-header",children:[w.jsx("h2",{className:"brand-title",children:"God is Good"}),w.jsx("p",{className:"pending-label",children:"PENDING ADMIN APPROVAL"}),w.jsx("div",{className:"guest-theme-toggle-container",children:w.jsx(_v,{})})]}),w.jsx(a1,{})]}):w.jsx(Cl,{}):w.jsx(as,{to:"/login",replace:!0})},Xk=()=>{const{firebaseUser:n,loading:e}=yt(a=>a.auth),t=()=>i4(Rl,Z4);return e?null:n?w.jsx(as,{to:"/",replace:!0}):w.jsxs("div",{className:"login-container",children:[w.jsxs("header",{className:"login-header",children:[w.jsx("h1",{className:"brand-title",children:"God is Good"}),w.jsx("p",{className:"brand-subtitle",children:"Worship Team Roster"})]}),w.jsx("div",{className:"login-button-container",children:w.jsxs("button",{onClick:t,className:"login-button google",children:[w.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},Wk=()=>{const n=hi(),e=uo(),{teamName:t,positionName:a}=vd(),{users:s,allTeamUsers:l,rosterDates:c,currentTeamData:d,loadingUsers:p,loadingTeam:g,loadingAllTeamUsers:v,error:E}=yt(ae=>ae.rosterView),{entries:S,dirtyEntries:C,saving:U,error:B}=yt(ae=>ae.roster),{teams:V}=yt(ae=>ae.teams),{positions:H}=yt(ae=>ae.positions),{hiddenUsers:q}=yt(ae=>ae.ui),[F,Q]=M.useState(null),[re,Y]=M.useState(null),b=Object.keys(C).length>0,A=M.useMemo(()=>H.find(ae=>ae.name===a),[H,a]),I=M.useMemo(()=>d?d.positions.filter(ae=>ae.name!==a):[],[d,a]),N=M.useMemo(()=>{var ae;return!t||!a?[]:((ae=q[t])==null?void 0:ae[a])||[]},[q,t,a]),x=M.useMemo(()=>{const ae=s.filter(_e=>_e.email&&!N.includes(_e.email));return A!=null&&A.sortByGender?ae.sort((_e,Oe)=>_e.gender===Oe.gender?(_e.name||"").localeCompare(Oe.name||""):_e.gender==="Male"?-1:Oe.gender==="Male"?1:(_e.gender||"").localeCompare(Oe.gender||"")):ae},[s,A,N]),P=M.useMemo(()=>{if(!(A!=null&&A.sortByGender)||x.length===0)return-1;const ae=x.findIndex(_e=>_e.gender==="Female");return ae>0&&ae<x.length?ae:-1},[A,x]),O=ae=>{!t||!a||n(Rk({teamName:t,positionName:a,userEmail:ae}))},Ue=()=>{n(jk())},Ze=()=>{n(zk())},W=()=>{n(Bk())},me=ae=>{ge(ae)&&e(`/app/dashboard?date=${ae}`)},ge=M.useCallback(ae=>{const _e=ae.split("T")[0],Oe=C[_e]||S[_e];return Oe?Object.values(Oe.teams).some(Ae=>Object.values(Ae).some(ze=>ze.length>0)):!1},[S,C]),je=M.useCallback(ae=>{if(!re||!t)return[];const _e=ae.split("T")[0],Oe=C[_e]||S[_e];return!Oe||!Oe.teams[t]?[]:Object.entries(Oe.teams[t]).filter(([,Ae])=>Ae.includes(re)).map(([Ae])=>{const ze=l.find(Fe=>Fe.email===Ae);return(ze==null?void 0:ze.name)||Ae})},[re,t,C,S,l]);M.useEffect(()=>{n(Zu())},[n]),M.useEffect(()=>{a&&t&&a!=="Absence"&&n(Of({teamName:t,positionName:a}))},[a,t,n]),M.useEffect(()=>{t&&(n(Mf(t)),n(xf(t)))},[t,n]);const Me=M.useCallback((ae,_e)=>{const Oe=ae,Ae=C[Oe]||S[Oe];return!!(Ae&&Ae.absence&&Ae.absence[_e])},[C,S]),j=M.useCallback((ae,_e)=>{var ze,Fe;const Oe=ae,Ae=C[Oe]||S[Oe];return((Fe=(ze=Ae==null?void 0:Ae.absence)==null?void 0:ze[_e])==null?void 0:Fe.reason)||""},[C,S]),K=M.useCallback((ae,_e)=>{if(!t||!a||a==="Absence")return!1;if(Me(ae,_e))return!0;const Oe=ae,Ae=C[Oe]||S[Oe],ze=V.find(rn=>rn.name===t),Fe=(ze==null?void 0:ze.maxConflict)||1;if(!Ae||!Ae.teams[t]||!Ae.teams[t][_e])return!1;const Qe=Ae.teams[t][_e],Ge=H.filter(rn=>rn.parentId===a),Ve=[a,...Ge.map(rn=>rn.name)];return Qe.some(rn=>Ve.includes(rn))?!1:Qe.length>=Fe},[t,a,Me,C,S,V,H]),oe=M.useCallback((ae,_e,Oe,Ae)=>{if(!t||!a||a==="Absence"||K(ae,_e)){Q({row:Oe,col:Ae,table:"roster"});return}Q({row:Oe,col:Ae,table:"roster"});const ze=V.find(Ve=>Ve.name===t),Fe=(ze==null?void 0:ze.maxConflict)||1,Qe=H.filter(Ve=>Ve.parentId===a),Ge=[a,...Qe.map(Ve=>Ve.name)];n(Vk({date:ae,teamName:t,userIdentifier:_e,positionGroupNames:Ge,maxConflict:Fe}))},[n,t,a,K,V,H]),ce=M.useCallback((ae,_e,Oe,Ae)=>{Q({row:Oe,col:Ae,table:"absence"});const ze=Me(ae,_e);n(_S({date:ae,userIdentifier:_e,isAbsent:!ze}))},[n,Me]),pe=M.useCallback((ae,_e,Oe)=>{n(_S({date:ae,userIdentifier:_e,reason:Oe,isAbsent:!0}))},[n]),Ee=M.useCallback(()=>{n(ec(C))},[n,C]),Pe=M.useCallback(()=>{n(n1()),Q(null)},[n]),Ke=(ae,_e)=>{var Qe;const Oe=ae,Ae=C[Oe]||S[Oe];if(!Ae||!t)return"-";const ze=((Qe=Ae.teams[t])==null?void 0:Qe[_e])||[],Fe=[];return Object.entries(Ae.teams).forEach(([Ge,Ve])=>{Ge!==t&&Ve[_e]&&Fe.push({team:Ge,positions:Ve[_e]})}),ze.length===0&&Fe.length===0?"-":w.jsxs("div",{className:"assigned-positions",children:[ze.map(Ge=>{const Ve=H.find(Dt=>Dt.name===Ge);return w.jsx("span",{title:`${t}: ${Ge}`,className:"pos-emoji",children:(Ve==null?void 0:Ve.emoji)||""},Ge)}),Fe.map(Ge=>Ge.positions.map(Ve=>{const Dt=H.find(rn=>rn.name===Ve);return w.jsx("span",{title:`${Ge.team}: ${Ve}`,className:"pos-emoji other-team-emoji",children:(Dt==null?void 0:Dt.emoji)||""},`${Ge.team}-${Ve}`)}))]})};M.useEffect(()=>{const ae=_e=>{const Oe=_e.target;if(Oe.tagName==="INPUT"||Oe.tagName==="TEXTAREA"||!F)return;const{row:Ae,col:ze,table:Fe}=F,Qe=c,Ge=Fe==="roster"?x:l;switch(_e.key){case"ArrowUp":_e.preventDefault(),Ae>0&&Q({row:Ae-1,col:ze,table:Fe});break;case"ArrowDown":_e.preventDefault(),Ae<Qe.length-1&&Q({row:Ae+1,col:ze,table:Fe});break;case"ArrowLeft":_e.preventDefault(),ze>0&&Q({row:Ae,col:ze-1,table:Fe});break;case"ArrowRight":_e.preventDefault(),ze<Ge.length-1&&Q({row:Ae,col:ze+1,table:Fe});break;case"Tab":_e.preventDefault(),_e.shiftKey?Ae>0&&Q({row:Ae-1,col:ze,table:Fe}):Ae<Qe.length-1&&Q({row:Ae+1,col:ze,table:Fe});break;case" ":{_e.preventDefault();const Ve=c[Ae],Dt=Ge[ze];Dt!=null&&Dt.email&&(Fe==="roster"?oe(Ve,Dt.email,Ae,ze):ce(Ve,Dt.email,Ae,ze));break}case"Enter":b&&(_e.preventDefault(),Ee());break;case"Escape":b&&(_e.preventDefault(),Pe());break}};return window.addEventListener("keydown",ae),()=>window.removeEventListener("keydown",ae)},[F,c,x,l,b,oe,ce,Ee,Pe]);const lt=M.useMemo(()=>{const ae=Ju();return c.length===0?!1:c[0]<ae},[c]),vn=M.useCallback(ae=>{const _e=Ju(),Oe=ae.split("T")[0];return Oe<_e?"past-date":Oe===_e?"today-date":"future-date"},[]);if(p||g||v)return w.jsx(kl,{});const kn=E||B;if(kn)return w.jsxs("div",{className:"roster-table-error",children:["Error: ",kn]});const _t=a==="Absence";return!_t&&x.length===0?w.jsx("div",{className:"roster-table-loading",children:"No users found for this position."}):w.jsxs("div",{className:"roster-table-wrapper",children:[!_t&&N.length>0&&w.jsxs("div",{className:"hidden-members-bar",children:[w.jsx("span",{className:"hidden-members-label",children:"Hidden Members:"}),w.jsx("div",{className:"hidden-members-list",children:N.map(ae=>{const _e=s.find(Oe=>Oe.email===ae);return w.jsxs("button",{className:"unhide-pill",onClick:()=>O(ae),title:"Click to unhide",children:[(_e==null?void 0:_e.name)||ae," ",w.jsx("span",{children:"+"})]},ae)})})]}),_t?w.jsxs("div",{className:"roster-section absence-section",children:[w.jsx("div",{className:"roster-table-container",children:w.jsxs("table",{className:"roster-table absence-table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{className:"roster-table-header-cell sticky-col sticky-header",children:w.jsxs("div",{className:"date-header-content",children:["Date",w.jsxs("div",{className:"date-header-actions",children:[w.jsx("button",{className:"load-prev-btn",onClick:Ue,title:"Load 5 previous dates",children:""}),lt&&w.jsx("button",{className:"load-prev-btn reset-dates-btn",onClick:Ze,title:"Hide previous dates",children:""})]})]})}),l.map(ae=>w.jsx("th",{className:"roster-table-header-cell sticky-header",children:ae.name},ae.email)),w.jsx("th",{className:"gender-divider-cell sticky-header"}),w.jsx("th",{className:"roster-table-header-cell sticky-header sticky-right peek-header",children:w.jsxs("select",{className:"peek-selector",value:re||"",onChange:ae=>Y(ae.target.value||null),children:[w.jsx("option",{value:"",children:"Peek Position..."}),I.map(ae=>w.jsxs("option",{value:ae.name,children:[ae.emoji," ",ae.name]},ae.name))]})})]})}),w.jsx("tbody",{children:c.map((ae,_e)=>{const Oe=ae.split("T")[0],Ae=C[Oe]||S[Oe],ze=Ae==null?void 0:Ae.eventName,Fe=vn(ae),Qe=Fe==="today-date",Ge=ge(ae);return w.jsxs("tr",{className:`${Fe} ${Ge?"":"no-data"} ${ze?"special-event-row":""}`,children:[w.jsx("td",{className:`date-cell sticky-col ${Ge?"clickable":""}`,onClick:()=>me(ae),title:ze,children:w.jsxs("div",{className:"date-cell-content",children:[new Date(ae.replace(/-/g,"/")).toLocaleDateString(),Qe&&w.jsx("span",{className:"today-badge",children:"TODAY"}),ze&&w.jsx("span",{className:"special-event-dot"})]})}),l.map((Ve,Dt)=>{const rn=(F==null?void 0:F.row)===_e&&(F==null?void 0:F.col)===Dt&&(F==null?void 0:F.table)==="absence",Rt=Ve.email?Me(ae,Ve.email):!1,_n=Ve.email?j(ae,Ve.email):"";return w.jsx("td",{className:`roster-cell clickable absence-roster-cell ${rn?"focused":""} ${Rt?"absent-cell":""}`,onClick:()=>{Ve.email&&ce(ae,Ve.email,_e,Dt)},tabIndex:0,onFocus:()=>Q({row:_e,col:Dt,table:"absence"}),title:_n,children:Rt?w.jsxs("div",{className:"absence-input-container",children:[w.jsx("input",{type:"text",className:"absence-reason-input",value:_n,placeholder:"Reason...",maxLength:20,autoFocus:rn,onClick:Zn=>Zn.stopPropagation(),onChange:Zn=>{Ve.email&&pe(ae,Ve.email,Zn.target.value)}}),w.jsx("button",{className:"remove-absence-btn",onClick:Zn=>{Zn.stopPropagation(),Ve.email&&ce(ae,Ve.email,_e,Dt)},title:"Mark as present",children:""})]}):"-"},Ve.email)}),w.jsx("td",{className:"gender-divider-cell"}),w.jsx("td",{className:"roster-cell peek-cell sticky-right",children:je(ae).join(", ")||"-"})]},ae)})})]})}),w.jsx("div",{className:"load-more-footer",children:w.jsx("button",{className:"load-next-year-btn",onClick:W,children:"Load Next Year "})})]}):w.jsxs("div",{className:"roster-section",children:[w.jsx("div",{className:"roster-table-container",children:w.jsxs("table",{className:"roster-table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{className:"roster-table-header-cell sticky-col sticky-header",children:w.jsxs("div",{className:"date-header-content",children:["Date",w.jsxs("div",{className:"date-header-actions",children:[w.jsx("button",{className:"load-prev-btn",onClick:Ue,title:"Load 5 previous dates",children:""}),lt&&w.jsx("button",{className:"load-prev-btn reset-dates-btn",onClick:Ze,title:"Hide previous dates",children:""})]})]})}),x.map((ae,_e)=>w.jsxs(M.Fragment,{children:[P===_e&&w.jsx("th",{className:"gender-divider-cell sticky-header"}),w.jsxs("th",{className:"roster-table-header-cell sticky-header clickable-header",onClick:()=>ae.email&&O(ae.email),title:"Click to hide member",children:[ae.name,(A==null?void 0:A.sortByGender)&&w.jsxs("span",{className:"gender-label",children:["(",ae.gender==="Male"?"M":ae.gender==="Female"?"F":"?",")"]})]})]},ae.email)),w.jsx("th",{className:"gender-divider-cell sticky-header"}),w.jsx("th",{className:"roster-table-header-cell sticky-header sticky-right peek-header",children:w.jsxs("select",{className:"peek-selector",value:re||"",onChange:ae=>Y(ae.target.value||null),children:[w.jsx("option",{value:"",children:"Peek Position..."}),I.map(ae=>w.jsxs("option",{value:ae.name,children:[ae.emoji," ",ae.name]},ae.name))]})})]})}),w.jsx("tbody",{children:c.map((ae,_e)=>{const Oe=ae.split("T")[0],Ae=C[Oe]||S[Oe],ze=Ae==null?void 0:Ae.eventName,Fe=vn(ae),Qe=Fe==="today-date",Ge=ge(ae);return w.jsxs("tr",{className:`${Fe} ${Ge?"":"no-data"} ${ze?"special-event-row":""}`,children:[w.jsx("td",{className:`date-cell sticky-col ${Ge?"clickable":""}`,onClick:()=>me(ae),title:ze,children:w.jsxs("div",{className:"date-cell-content",children:[new Date(ae.replace(/-/g,"/")).toLocaleDateString(),Qe&&w.jsx("span",{className:"today-badge",children:"TODAY"}),ze&&w.jsx("span",{className:"special-event-dot"})]})}),x.map((Ve,Dt)=>{const rn=(F==null?void 0:F.row)===_e&&(F==null?void 0:F.col)===Dt&&(F==null?void 0:F.table)==="roster",Rt=Ve.email?K(ae,Ve.email):!1,_n=Ve.email?Me(ae,Ve.email):!1;return w.jsxs(M.Fragment,{children:[P===Dt&&w.jsx("td",{className:"gender-divider-cell"}),w.jsx("td",{className:`roster-cell ${Rt?"disabled":"clickable"} ${rn?"focused":""} ${_n?"absent-strike":""}`,onClick:()=>{Ve.email&&!Rt&&oe(ae,Ve.email,_e,Dt)},tabIndex:0,onFocus:()=>Q({row:_e,col:Dt,table:"roster"}),children:Ve.email&&(_n?w.jsx("span",{title:j(ae,Ve.email),children:""}):Ke(ae,Ve.email))})]},Ve.email)}),w.jsx("td",{className:"gender-divider-cell"}),w.jsx("td",{className:"roster-cell peek-cell sticky-right",children:je(ae).join(", ")||"-"})]},ae)})})]})}),w.jsx("div",{className:"load-more-footer",children:w.jsx("button",{className:"load-next-year-btn",onClick:W,children:"Load Next Year "})})]}),b&&w.jsx("div",{className:"roster-save-footer",children:w.jsxs("div",{className:"save-footer-content",children:[w.jsx("span",{className:"changes-label",children:"You have unsaved changes"}),w.jsxs("div",{className:"save-footer-actions",children:[w.jsx("button",{className:"cancel-btn",onClick:Pe,disabled:U,children:"Discard"}),w.jsx("button",{className:"save-btn",onClick:Ee,disabled:U,children:U?"Saving...":"Save Roster"})]})]})})]})},Jk=()=>w.jsx("div",{className:"roster-page",style:{height:"100%"},children:w.jsx(Wk,{})}),Zk=({text:n,textAlign:e="left",width:t,minWidth:a,isSticky:s=!1})=>w.jsx("th",{className:s?"sticky-col":void 0,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:a?`${a}px`:"auto"},children:n}),un=({isSticky:n=!1,textAlign:e="left",className:t,children:a})=>w.jsx("td",{style:{textAlign:e},className:`${t||""} ${n?"sticky-col":""}
`,children:a}),qr=({name:n,value:e,placeholder:t,type:a="text",isSticky:s,isReadOnly:l=!1,isChild:c=!1,onChange:d})=>w.jsxs(un,{isSticky:s,children:[c&&w.jsx(WR,{}),w.jsx("input",{name:n,className:"form-input",type:a,placeholder:t,value:e,onChange:d,readOnly:l})]}),ES=({name:n,value:e,placeholder:t,onChange:a})=>w.jsxs(un,{className:"color-picker-group",children:[w.jsx("input",{name:n,type:"color",value:e||"#FFFFFF",onChange:a}),w.jsx("input",{name:n,className:"form-input",value:e,placeholder:t,onChange:a})]}),Tv=({headers:n,children:e})=>w.jsx("div",{className:"app-table-container",children:w.jsxs("table",{className:"app-table",children:[w.jsx("thead",{children:w.jsx("tr",{children:n.map((t,a)=>w.jsx(Zk,{...t},a))})}),w.jsx("tbody",{children:e})]})}),Sg={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},eU=()=>{const n=hi(),{positions:e,fetched:t,loading:a}=yt(V=>V.positions),[s,l]=M.useState(e),[c,d]=M.useState(Sg),[p,g]=M.useState("idle");M.useEffect(()=>{t||n(to())},[n,t]),M.useEffect(()=>{l(e)},[e]);const v=(V,H,q)=>{const F=[...s];F[V]={...F[V],[H]:q},l(F)},E=(V,H)=>{const q=[...s],F=q[V],Q=F.parentId,re=Y=>{const b=q[Y];if(!b)return{block:[],startIndex:-1,endIndex:-1};const A=[],I=[b],N=new Set;let x=Y,P=Y,O=0;for(;O<I.length;){const Ze=I[O++];N.has(Ze.name)||(N.add(Ze.name),A.push(Ze),q.forEach((W,me)=>{W.parentId===Ze.name&&!N.has(W.name)&&(I.push(W),x=Math.min(x,me),P=Math.max(P,me))}))}return{block:A,startIndex:x,endIndex:P}};if(Q){const Y=q.filter(O=>O.parentId===Q),A=Y.findIndex(O=>O.name===F.name)+(H==="up"?-1:1);if(A<0||A>=Y.length)return;const I=Y[A],N=q.indexOf(F),x=q.indexOf(I);if(N===-1||x===-1)return;const P=[...q];P[N]=I,P[x]=F,l(P)}else{const Y=re(V),{block:b,startIndex:A,endIndex:I}=Y;if(!b||b.length===0)return;if(H==="up"){if(A===0)return;let N=A-1;for(;N>=0&&q[N].parentId;)N--;if(N<0)return;const x=re(N),{block:P,startIndex:O}=x;if(!P||P.length===0)return;const Ue=[...q.slice(0,O),...b,...P,...q.slice(I+1)].filter(Boolean);l(Ue)}else{if(I===q.length-1)return;let N=I+1;for(;N<q.length&&q[N].parentId;)N++;if(N>=q.length)return;const x=re(N),{block:P,startIndex:O}=x;if(!P||P.length===0)return;const Ue=[...q.slice(0,A),...P,...b,...q.slice(O+P.length)].filter(Boolean);l(Ue)}}},S=()=>{if(!c.name.trim()||!c.emoji.trim())return alert("Please provide both an emoji and a name.");l([...s,c]),d(Sg)},C=V=>{if(window.confirm("Delete this position? This will remove it from the global list, and any associated child positions.")){const H=s[V];let q=s.filter((F,Q)=>Q!==V);H.parentId||(q=q.filter(F=>F.parentId!==H.name)),l(q)}},U=async()=>{g("saving");try{const V=s.map(H=>({...H,parentId:H.parentId===void 0?void 0:H.parentId}));await n(KR(V)).unwrap(),g("success"),setTimeout(()=>g("idle"),2e3)}catch(V){console.error("Save Error:",V),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),g("idle")}},B=V=>{l(H=>{const q={...Sg,parentId:V},F=H.findIndex(Y=>Y.name===V);if(F===-1)return[...H,q];let Q=F;for(;Q+1<H.length&&H[Q+1].parentId===V;)Q++;return[...H.slice(0,Q+1),q,...H.slice(Q+1)]})};return a?w.jsx(kl,{}):w.jsxs(w.Fragment,{children:[w.jsxs(Tv,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:80},{text:"Colour",minWidth:100},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[s.map((V,H)=>w.jsxs("tr",{children:[w.jsx(un,{textAlign:"center",children:V.parentId?w.jsx(WR,{}):w.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[w.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>E(H,"up"),disabled:H===0,children:""}),w.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>E(H,"down"),disabled:H===s.length-1,children:""})]})}),w.jsx(qr,{name:`emoji-${H}`,value:V.emoji,onChange:q=>v(H,"emoji",q.target.value)}),w.jsx(qr,{name:`name-${H}`,value:V.name,onChange:q=>v(H,"name",q.target.value)}),w.jsx(ES,{name:`colour-${H}`,value:V.colour,onChange:q=>v(H,"colour",q.target.value)}),w.jsx(un,{textAlign:"center",children:w.jsx(Wn,{colour:V.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:V.sortByGender,onClick:()=>v(H,"sortByGender",!V.sortByGender),children:V.sortByGender?"YES":"NO"})}),w.jsx(un,{textAlign:"center",children:!V.parentId&&w.jsx("button",{className:"icon-button icon-button--add-child",onClick:()=>B(V.name),title:"Add Child Position",children:"+"})}),w.jsx(un,{textAlign:"center",children:w.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>C(H),children:""})})]},`${V.emoji}-${H}`)),w.jsxs("tr",{className:"pos-row-new",children:[w.jsx("td",{className:"",children:""}),w.jsx(qr,{name:"new-emoji",value:c.emoji,placeholder:"",onChange:V=>d({...c,emoji:V.target.value})}),w.jsx(qr,{name:"new-name",value:c.name,placeholder:"Position Name",onChange:V=>d({...c,name:V.target.value})}),w.jsx(ES,{name:"new-colour",value:c.colour,placeholder:"#FFFFFF",onChange:V=>d({...c,colour:V.target.value})}),w.jsx(un,{textAlign:"center",children:w.jsx(Wn,{colour:c.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.sortByGender,onClick:()=>d({...c,sortByGender:!c.sortByGender}),children:c.sortByGender?"YES":"NO"})}),w.jsx(un,{textAlign:"center",children:w.jsx("button",{onClick:S,className:"icon-button icon-button--add",disabled:!c.name.trim()||!c.emoji.trim(),children:"Add"})})]})]}),w.jsx("div",{className:"settings-footer",children:w.jsx("button",{className:`save-button ${p}`,onClick:U,disabled:p!=="idle",children:p==="saving"?"Saving...":p==="success"?"Done ":"Save"})})]})},TS={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1},bS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],tU=()=>{var Q,re;const n=hi(),{teams:e,fetched:t,loading:a}=yt(Y=>Y.teams),{positions:s,fetched:l,loading:c}=yt(Y=>Y.positions),[d,p]=M.useState(e),[g,v]=M.useState(TS),[E,S]=M.useState("idle");M.useEffect(()=>{t||n(gl()),l||n(to())},[n,t,l]),M.useEffect(()=>{p(e)},[e]);const C=(Y,b,A)=>{const I=[...d];I[Y]={...I[Y],[b]:A},p(I)},U=(Y,b)=>{const A=[...d],I=b==="up"?Y-1:Y+1;if(I<0||I>=A.length)return;const N=A[Y];A[Y]=A[I],A[I]=N,p(A)},B=(Y,b)=>{const A=d.map((I,N)=>{if(N!==Y)return I;const x=I.positions||[],P=x.find(O=>O.name===b.name)?x.filter(O=>O.name!==b.name):[...x,b];return{...I,positions:P}});p(A)},V=(Y,b)=>{const A=d.map((I,N)=>{if(N!==Y)return I;const x=I.preferredDays||[],P=x.includes(b)?x.filter(O=>O!==b):[...x,b];return{...I,preferredDays:P}});p(A)},H=()=>{if(!g.name.trim()||!g.emoji.trim())return alert("Please provide both an emoji and a name for the team.");p([...d,g]),v(TS)},q=Y=>{window.confirm("Are you sure you want to delete this team?")&&p(d.filter((b,A)=>A!==Y))},F=async()=>{S("saving");try{await n(Df(d)).unwrap(),S("success"),setTimeout(()=>S("idle"),2e3)}catch(Y){console.error("Save Error:",Y),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),S("idle")}};return a||c?w.jsx(kl,{}):w.jsxs(w.Fragment,{children:[w.jsxs(Tv,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:100},{text:"Conflicts",width:60,textAlign:"center"},{text:"Allowed Positions",minWidth:200},{text:"Preferred Days",minWidth:250},{text:"",width:50}],children:[d.map((Y,b)=>{var A,I;return w.jsxs("tr",{children:[w.jsxs(un,{children:[" ",w.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[w.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>U(b,"up"),disabled:b===0,children:""}),w.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>U(b,"down"),disabled:b===d.length-1,children:""})]})]}),w.jsx(qr,{name:`team-emoji-${b}`,value:Y.emoji,onChange:N=>C(b,"emoji",N.target.value)}),w.jsx(qr,{name:`team-name-${b}`,value:Y.name,onChange:N=>C(b,"name",N.target.value)}),w.jsx(qr,{name:`team-maxConflict-${b}`,value:((A=Y.maxConflict)==null?void 0:A.toString())||"1",type:"number",onChange:N=>C(b,"maxConflict",parseInt(N.target.value)||1)}),w.jsx(un,{children:w.jsx(Ii,{nowrap:!0,children:(I=s==null?void 0:s.filter(N=>!N.parentId))==null?void 0:I.map(N=>{var P;const x=(P=Y.positions)==null?void 0:P.some(O=>O.name===N.name);return w.jsx(Wn,{colour:N.colour,isActive:x,onClick:()=>B(b,N),children:N.emoji},N.name)})})}),w.jsx(un,{children:w.jsx(Ii,{nowrap:!0,children:bS.map(N=>{var P;const x=(P=Y.preferredDays)==null?void 0:P.includes(N);return w.jsx(Wn,{isActive:x,onClick:()=>V(b,N),children:N.substring(0,3)},N)})})}),w.jsx(un,{children:w.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>q(b),children:""})})]},`${Y.emoji}-${b}`)}),w.jsxs("tr",{className:"team-row-new",children:[w.jsx("td",{className:"",children:""}),w.jsx(qr,{name:"new-team-emoji",value:g.emoji,placeholder:"",onChange:Y=>v({...g,emoji:Y.target.value})}),w.jsx(qr,{name:"new-team-name",value:g.name,placeholder:"Team Name",onChange:Y=>v({...g,name:Y.target.value})}),w.jsx(qr,{name:"new-team-maxConflict",value:((Q=g.maxConflict)==null?void 0:Q.toString())||"1",type:"number",onChange:Y=>v({...g,maxConflict:parseInt(Y.target.value)||1})}),w.jsx(un,{children:w.jsx(Ii,{nowrap:!0,children:(re=s==null?void 0:s.filter(Y=>!Y.parentId))==null?void 0:re.map(Y=>{var A;const b=(A=g.positions)==null?void 0:A.some(I=>I.name===Y.name);return w.jsx(Wn,{colour:Y.colour,isActive:b,onClick:()=>v(I=>{const N=I.positions||[],x=N.some(P=>P.name===Y.name)?N.filter(P=>P.name!==Y.name):[...N,Y];return{...I,positions:x}}),children:Y.emoji},`new-${Y.name}`)})})}),w.jsx(un,{children:w.jsx(Ii,{nowrap:!0,children:bS.map(Y=>{var A;const b=(A=g.preferredDays)==null?void 0:A.includes(Y);return w.jsx(Wn,{isActive:b,onClick:()=>v(I=>{const N=I.preferredDays||[],x=N.includes(Y)?N.filter(P=>P!==Y):[...N,Y];return{...I,preferredDays:x}}),children:Y.substring(0,3)},`new-team-${Y}`)})})}),w.jsx(un,{children:w.jsx("button",{onClick:H,className:"icon-button icon-button--add",disabled:!g.name.trim()||!g.emoji.trim(),children:"+"})})]})]}),w.jsx("div",{className:"settings-footer",children:w.jsx("button",{className:`save-button ${E}`,onClick:F,disabled:E!=="idle",children:E==="saving"?"Saving...":E==="success"?"Done ":"Save All Team Changes"})})]})},nU={allUsers:[],loading:!1,saving:!1,error:null},Lf=Nr("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=Cc(Sn,"users"),a=Nc(t),s=await Oc(a),l=[];return s.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),kf=Nr("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=eR(Sn);n.forEach(a=>{const{id:s,...l}=a;l.teamPositions&&(l.indexedAssignments=ZR(l.teamPositions)),t.update(Kr(Sn,"users",s),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),s1=mo({name:"userManagement",initialState:nU,reducers:{updateUserField(n,e){const{id:t,field:a,value:s}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[a]=s)},toggleUserTeam(n,e){const{userId:t,teamName:a}=e.payload,s=n.allUsers.find(l=>l.id===t);if(s){const l=s.teams||[],c=l.includes(a)?l.filter(d=>d!==a):[...l,a];s.teams=c,s.teamPositions||(s.teamPositions={}),c.includes(a)?s.teamPositions[a]||(s.teamPositions[a]=[]):delete s.teamPositions[a]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:a,posName:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[a]||(l.teamPositions[a]=[]);const c=l.teamPositions[a],d=c.includes(s)?c.filter(p=>p!==s):[...c,s];l.teamPositions[a]=d}}},extraReducers:n=>{n.addCase(Lf.pending,e=>{e.loading=!0,e.error=null}).addCase(Lf.fulfilled,(e,t)=>{e.allUsers=t.payload,e.loading=!1}).addCase(Lf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(kf.pending,e=>{e.saving=!0,e.error=null}).addCase(kf.fulfilled,e=>{e.saving=!1}).addCase(kf.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:rU,toggleUserTeam:iU,toggleUserTeamPosition:aU}=s1.actions,sU=s1.reducer,oU=({user:n,availableTeams:e,adminEmail:t})=>{var d;const a=hi(),s=(p,g)=>{a(rU({id:n.id,field:p,value:g}))},l=p=>{a(iU({userId:n.id,teamName:p}))},c=(p,g)=>{a(aU({userId:n.id,teamName:p,posName:g}))};return w.jsxs("tr",{children:[w.jsx(qr,{name:`name-${n.id}`,value:n.name||"",onChange:p=>s("name",p.target.value),isSticky:!0}),w.jsx(qr,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),w.jsx(un,{children:w.jsxs("select",{name:`gender-${n.id}`,className:"form-select",value:n.gender,onChange:p=>s("gender",p.target.value),children:[w.jsx("option",{value:"",children:"-"}),w.jsx("option",{value:"Male",children:"Male"}),w.jsx("option",{value:"Female",children:"Female"})]})}),w.jsx(un,{children:w.jsx(Ii,{children:e.map(p=>{var v;const g=(v=n.teams)==null?void 0:v.includes(p.name);return w.jsxs(Wn,{onClick:()=>l(p.name),isActive:g,children:[w.jsx("span",{children:p.emoji})," ",p.name]},p.name)})})}),w.jsx(un,{children:(d=n.teams)==null?void 0:d.map(p=>{var v,E;const g=e.find(S=>S.name===p);return g?w.jsxs("div",{style:{marginBottom:"12px"},children:[w.jsxs("div",{style:{fontSize:"0.65rem",fontWeight:"bold",marginBottom:"4px",color:"var(--color-text-dim)",textTransform:"uppercase"},children:[g.emoji," ",g.name]}),w.jsx(Ii,{children:(E=(v=g.positions)==null?void 0:v.filter(S=>!S.parentId))==null?void 0:E.map(S=>{var U,B;const C=(B=(U=n.teamPositions)==null?void 0:U[p])==null?void 0:B.includes(S.name);return w.jsx(Wn,{colour:S.colour,isActive:C,onClick:()=>c(p,S.name),children:S.emoji},S.name)})})]},p):null})}),w.jsx(un,{children:w.jsx(Wn,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),w.jsx(un,{children:w.jsx(Wn,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),w.jsx(un,{children:w.jsx(Wn,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id)},lU=()=>{const n=hi(),{allUsers:e,loading:t,saving:a,error:s}=yt(d=>d.userManagement),l=yt(d=>d.teams.teams);M.useEffect(()=>{n(Lf())},[n]);const c=()=>{n(kf(e))};return t?w.jsx(kl,{}):s?w.jsxs("div",{children:["Error: ",s]}):w.jsxs(w.Fragment,{children:[w.jsx(Tv,{headers:[{text:"Name",minWidth:70,isSticky:!0},{text:"Email",minWidth:170},{text:"Gender",minWidth:90},{text:"Teams",minWidth:200},{text:"Positions",minWidth:200},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(d=>w.jsx(oU,{user:d,availableTeams:l,adminEmail:"chris.sm.kang542@gmail.com"},d.id))}),w.jsx("div",{className:"settings-footer",children:w.jsx("button",{className:`save-button ${a?"saving":""}`,onClick:c,disabled:a,children:a?"Saving Changes...":"Save All User Changes"})})]})},uU=()=>{const{userData:n}=yt(t=>t.auth),{section:e}=vd();return n?w.jsxs("div",{className:"settings-container",children:[e===ul.PROFILE&&w.jsx(a1,{}),e===ul.USER_MANAGEMENT&&(n.isAdmin?w.jsx(lU,{}):w.jsx("p",{children:"Access Denied"})),e===ul.TEAMS&&(n.isAdmin?w.jsx(tU,{}):w.jsx("p",{children:"Access Denied"})),e===ul.POSITIONS&&(n.isAdmin?w.jsx(eU,{}):w.jsx("p",{children:"Access Denied"}))]}):null},cU=[{path:"/",element:w.jsx(tL,{})},{path:"/login",element:w.jsx(Xk,{})},{path:"/guest",element:w.jsx(Qk,{})},{path:"/app",element:w.jsx(rk,{}),children:[{path:"",element:w.jsx(Ok,{}),children:[{path:"dashboard",element:w.jsx(Hk,{})},{path:"roster/:teamName?/:positionName?",element:w.jsx(Jk,{})},{path:"settings/:section?",element:w.jsx(uU,{})}]}]}];let SS=!1;const hU=n=>{if(!SS){SS=!0;let e;UP(Rl,t=>{if(t){n.dispatch(Gk(t)),n.dispatch(Vf(t.uid));const a=Kr(Sn,"users",t.uid);e=YV(a,s=>{if(s.exists()){const l=s.data();n.dispatch($k(l))}})}else n.dispatch(Kk()),e&&e()})}return e=>t=>e(t)},fU=OL({reducer:{auth:Yk,positions:ek,roster:Lk,rosterView:Fk,teams:nk,ui:Ck,userManagement:sU},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(hU)}),dU=xN(cU);XC.createRoot(document.getElementById("root")).render(w.jsx(wS.StrictMode,{children:w.jsx(hI,{store:fU,children:w.jsx(KN,{children:w.jsx(eL,{children:w.jsx(GN,{router:dU})})})})}));
