var WC=Object.defineProperty;var JC=(n,e,t)=>e in n?WC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var rg=(n,e,t)=>JC(n,typeof e!="symbol"?e+"":e,t);function ZC(n,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function US(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ig={exports:{}},Bu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb;function eI(){if(tb)return Bu;tb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:a,key:c,ref:s!==void 0?s:null,props:l}}return Bu.Fragment=e,Bu.jsx=t,Bu.jsxs=t,Bu}var nb;function tI(){return nb||(nb=1,ig.exports=eI()),ig.exports}var w=tI(),ag={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function nI(){if(rb)return We;rb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function R(U){return U===null||typeof U!="object"?null:(U=b&&U[b]||U["@@iterator"],typeof U=="function"?U:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,j={};function K(U,q,oe){this.props=U,this.context=q,this.refs=j,this.updater=oe||L}K.prototype.isReactComponent={},K.prototype.setState=function(U,q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,q,"setState")},K.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function B(){}B.prototype=K.prototype;function $(U,q,oe){this.props=U,this.context=q,this.refs=j,this.updater=oe||L}var te=$.prototype=new B;te.constructor=$,F(te,K.prototype),te.isPureReactComponent=!0;var ae=Array.isArray;function ee(){}var A={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(U,q,oe){var ce=oe.ref;return{$$typeof:n,type:U,key:q,ref:ce!==void 0?ce:null,props:oe}}function M(U,q){return C(U.type,q,U.props)}function N(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function O(U){var q={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(oe){return q[oe]})}var x=/\/+/g;function Ee(U,q){return typeof U=="object"&&U!==null&&U.key!=null?O(""+U.key):q.toString(36)}function ke(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(ee,ee):(U.status="pending",U.then(function(q){U.status==="pending"&&(U.status="fulfilled",U.value=q)},function(q){U.status==="pending"&&(U.status="rejected",U.reason=q)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function Y(U,q,oe,ce,pe){var Te=typeof U;(Te==="undefined"||Te==="boolean")&&(U=null);var Ue=!1;if(U===null)Ue=!0;else switch(Te){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(U.$$typeof){case n:case e:Ue=!0;break;case _:return Ue=U._init,Y(Ue(U._payload),q,oe,ce,pe)}}if(Ue)return pe=pe(U),Ue=ce===""?"."+Ee(U,0):ce,ae(pe)?(oe="",Ue!=null&&(oe=Ue.replace(x,"$&/")+"/"),Y(pe,q,oe,"",function(Yt){return Yt})):pe!=null&&(N(pe)&&(pe=M(pe,oe+(pe.key==null||U&&U.key===pe.key?"":(""+pe.key).replace(x,"$&/")+"/")+Ue)),q.push(pe)),1;Ue=0;var Ke=ce===""?".":ce+":";if(ae(U))for(var ot=0;ot<U.length;ot++)ce=U[ot],Te=Ke+Ee(ce,ot),Ue+=Y(ce,q,oe,Te,pe);else if(ot=R(U),typeof ot=="function")for(U=ot.call(U),ot=0;!(ce=U.next()).done;)ce=ce.value,Te=Ke+Ee(ce,ot++),Ue+=Y(ce,q,oe,Te,pe);else if(Te==="object"){if(typeof U.then=="function")return Y(ke(U),q,oe,ce,pe);throw q=String(U),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function de(U,q,oe){if(U==null)return U;var ce=[],pe=0;return Y(U,ce,"","",function(Te){return q.call(oe,Te,pe++)}),ce}function ye(U){if(U._status===-1){var q=U._result;q=q(),q.then(function(oe){(U._status===0||U._status===-1)&&(U._status=1,U._result=oe)},function(oe){(U._status===0||U._status===-1)&&(U._status=2,U._result=oe)}),U._status===-1&&(U._status=0,U._result=q)}if(U._status===1)return U._result.default;throw U._result}var Le=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Pe={map:de,forEach:function(U,q,oe){de(U,function(){q.apply(this,arguments)},oe)},count:function(U){var q=0;return de(U,function(){q++}),q},toArray:function(U){return de(U,function(q){return q})||[]},only:function(U){if(!N(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return We.Activity=E,We.Children=Pe,We.Component=K,We.Fragment=t,We.Profiler=s,We.PureComponent=$,We.StrictMode=a,We.Suspense=p,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,We.__COMPILER_RUNTIME={__proto__:null,c:function(U){return A.H.useMemoCache(U)}},We.cache=function(U){return function(){return U.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(U,q,oe){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ce=F({},U.props),pe=U.key;if(q!=null)for(Te in q.key!==void 0&&(pe=""+q.key),q)!S.call(q,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&q.ref===void 0||(ce[Te]=q[Te]);var Te=arguments.length-2;if(Te===1)ce.children=oe;else if(1<Te){for(var Ue=Array(Te),Ke=0;Ke<Te;Ke++)Ue[Ke]=arguments[Ke+2];ce.children=Ue}return C(U.type,pe,ce)},We.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},We.createElement=function(U,q,oe){var ce,pe={},Te=null;if(q!=null)for(ce in q.key!==void 0&&(Te=""+q.key),q)S.call(q,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(pe[ce]=q[ce]);var Ue=arguments.length-2;if(Ue===1)pe.children=oe;else if(1<Ue){for(var Ke=Array(Ue),ot=0;ot<Ue;ot++)Ke[ot]=arguments[ot+2];pe.children=Ke}if(U&&U.defaultProps)for(ce in Ue=U.defaultProps,Ue)pe[ce]===void 0&&(pe[ce]=Ue[ce]);return C(U,Te,pe)},We.createRef=function(){return{current:null}},We.forwardRef=function(U){return{$$typeof:d,render:U}},We.isValidElement=N,We.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:ye}},We.memo=function(U,q){return{$$typeof:g,type:U,compare:q===void 0?null:q}},We.startTransition=function(U){var q=A.T,oe={};A.T=oe;try{var ce=U(),pe=A.S;pe!==null&&pe(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ee,Le)}catch(Te){Le(Te)}finally{q!==null&&oe.types!==null&&(q.types=oe.types),A.T=q}},We.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},We.use=function(U){return A.H.use(U)},We.useActionState=function(U,q,oe){return A.H.useActionState(U,q,oe)},We.useCallback=function(U,q){return A.H.useCallback(U,q)},We.useContext=function(U){return A.H.useContext(U)},We.useDebugValue=function(){},We.useDeferredValue=function(U,q){return A.H.useDeferredValue(U,q)},We.useEffect=function(U,q){return A.H.useEffect(U,q)},We.useEffectEvent=function(U){return A.H.useEffectEvent(U)},We.useId=function(){return A.H.useId()},We.useImperativeHandle=function(U,q,oe){return A.H.useImperativeHandle(U,q,oe)},We.useInsertionEffect=function(U,q){return A.H.useInsertionEffect(U,q)},We.useLayoutEffect=function(U,q){return A.H.useLayoutEffect(U,q)},We.useMemo=function(U,q){return A.H.useMemo(U,q)},We.useOptimistic=function(U,q){return A.H.useOptimistic(U,q)},We.useReducer=function(U,q,oe){return A.H.useReducer(U,q,oe)},We.useRef=function(U){return A.H.useRef(U)},We.useState=function(U){return A.H.useState(U)},We.useSyncExternalStore=function(U,q,oe){return A.H.useSyncExternalStore(U,q,oe)},We.useTransition=function(){return A.H.useTransition()},We.version="19.2.4",We}var ib;function Rd(){return ib||(ib=1,ag.exports=nI()),ag.exports}var P=Rd();const jS=US(P),rI=ZC({__proto__:null,default:jS},[P]);var sg={exports:{}},Fu={},og={exports:{}},lg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab;function iI(){return ab||(ab=1,(function(n){function e(Y,de){var ye=Y.length;Y.push(de);e:for(;0<ye;){var Le=ye-1>>>1,Pe=Y[Le];if(0<s(Pe,de))Y[Le]=de,Y[ye]=Pe,ye=Le;else break e}}function t(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var de=Y[0],ye=Y.pop();if(ye!==de){Y[0]=ye;e:for(var Le=0,Pe=Y.length,U=Pe>>>1;Le<U;){var q=2*(Le+1)-1,oe=Y[q],ce=q+1,pe=Y[ce];if(0>s(oe,ye))ce<Pe&&0>s(pe,oe)?(Y[Le]=pe,Y[ce]=ye,Le=ce):(Y[Le]=oe,Y[q]=ye,Le=q);else if(ce<Pe&&0>s(pe,ye))Y[Le]=pe,Y[ce]=ye,Le=ce;else break e}}return de}function s(Y,de){var ye=Y.sortIndex-de.sortIndex;return ye!==0?ye:Y.id-de.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],_=1,E=null,b=3,R=!1,L=!1,F=!1,j=!1,K=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function te(Y){for(var de=t(g);de!==null;){if(de.callback===null)a(g);else if(de.startTime<=Y)a(g),de.sortIndex=de.expirationTime,e(p,de);else break;de=t(g)}}function ae(Y){if(F=!1,te(Y),!L)if(t(p)!==null)L=!0,ee||(ee=!0,O());else{var de=t(g);de!==null&&ke(ae,de.startTime-Y)}}var ee=!1,A=-1,S=5,C=-1;function M(){return j?!0:!(n.unstable_now()-C<S)}function N(){if(j=!1,ee){var Y=n.unstable_now();C=Y;var de=!0;try{e:{L=!1,F&&(F=!1,B(A),A=-1),R=!0;var ye=b;try{t:{for(te(Y),E=t(p);E!==null&&!(E.expirationTime>Y&&M());){var Le=E.callback;if(typeof Le=="function"){E.callback=null,b=E.priorityLevel;var Pe=Le(E.expirationTime<=Y);if(Y=n.unstable_now(),typeof Pe=="function"){E.callback=Pe,te(Y),de=!0;break t}E===t(p)&&a(p),te(Y)}else a(p);E=t(p)}if(E!==null)de=!0;else{var U=t(g);U!==null&&ke(ae,U.startTime-Y),de=!1}}break e}finally{E=null,b=ye,R=!1}de=void 0}}finally{de?O():ee=!1}}}var O;if(typeof $=="function")O=function(){$(N)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Ee=x.port2;x.port1.onmessage=N,O=function(){Ee.postMessage(null)}}else O=function(){K(N,0)};function ke(Y,de){A=K(function(){Y(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(Y){switch(b){case 1:case 2:case 3:var de=3;break;default:de=b}var ye=b;b=de;try{return Y()}finally{b=ye}},n.unstable_requestPaint=function(){j=!0},n.unstable_runWithPriority=function(Y,de){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ye=b;b=Y;try{return de()}finally{b=ye}},n.unstable_scheduleCallback=function(Y,de,ye){var Le=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Le+ye:Le):ye=Le,Y){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ye+Pe,Y={id:_++,callback:de,priorityLevel:Y,startTime:ye,expirationTime:Pe,sortIndex:-1},ye>Le?(Y.sortIndex=ye,e(g,Y),t(p)===null&&Y===t(g)&&(F?(B(A),A=-1):F=!0,ke(ae,ye-Le))):(Y.sortIndex=Pe,e(p,Y),L||R||(L=!0,ee||(ee=!0,O()))),Y},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(Y){var de=b;return function(){var ye=b;b=de;try{return Y.apply(this,arguments)}finally{b=ye}}}})(lg)),lg}var sb;function aI(){return sb||(sb=1,og.exports=iI()),og.exports}var ug={exports:{}},Hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob;function sI(){if(ob)return Hn;ob=1;var n=Rd();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:p,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Hn.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,_)},Hn.flushSync=function(p){var g=c.T,_=a.p;try{if(c.T=null,a.p=2,p)return p()}finally{c.T=g,a.p=_,a.d.f()}},Hn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},Hn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},Hn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:R}):_==="script"&&a.d.X(p,{crossOrigin:E,integrity:b,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Hn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},Hn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin);a.d.L(p,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Hn.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},Hn.requestFormReset=function(p){a.d.r(p)},Hn.unstable_batchedUpdates=function(p,g){return p(g)},Hn.useFormState=function(p,g,_){return c.H.useFormState(p,g,_)},Hn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Hn.version="19.2.4",Hn}var lb;function zS(){if(lb)return ug.exports;lb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ug.exports=sI(),ug.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub;function oI(){if(ub)return Fu;ub=1;var n=aI(),e=Rd(),t=zS();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(a(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,u=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),r;if(m===u)return p(f),i;m=m.sibling}throw Error(a(188))}if(o.return!==u.return)o=f,u=m;else{for(var v=!1,I=f.child;I;){if(I===o){v=!0,o=f,u=m;break}if(I===u){v=!0,u=f,o=m;break}I=I.sibling}if(!v){for(I=m.child;I;){if(I===o){v=!0,o=m,u=f;break}if(I===u){v=!0,u=m,o=f;break}I=I.sibling}if(!v)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function _(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=_(r),i!==null)return i;r=r.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),$=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function O(r){return r===null||typeof r!="object"?null:(r=N&&r[N]||r["@@iterator"],typeof r=="function"?r:null)}var x=Symbol.for("react.client.reference");function Ee(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===x?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case F:return"Fragment";case K:return"Profiler";case j:return"StrictMode";case ae:return"Suspense";case ee:return"SuspenseList";case C:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case L:return"Portal";case $:return r.displayName||"Context";case B:return(r._context.displayName||"Context")+".Consumer";case te:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case A:return i=r.displayName||null,i!==null?i:Ee(r.type)||"Memo";case S:i=r._payload,r=r._init;try{return Ee(r(i))}catch{}}return null}var ke=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Le=[],Pe=-1;function U(r){return{current:r}}function q(r){0>Pe||(r.current=Le[Pe],Le[Pe]=null,Pe--)}function oe(r,i){Pe++,Le[Pe]=r.current,r.current=i}var ce=U(null),pe=U(null),Te=U(null),Ue=U(null);function Ke(r,i){switch(oe(Te,i),oe(pe,r),oe(ce,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?AT(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=AT(i),r=wT(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}q(ce),oe(ce,r)}function ot(){q(ce),q(pe),q(Te)}function Yt(r){r.memoizedState!==null&&oe(Ue,r);var i=ce.current,o=wT(i,r.type);i!==o&&(oe(pe,r),oe(ce,o))}function In(r){pe.current===r&&(q(ce),q(pe)),Ue.current===r&&(q(Ue),Lu._currentValue=ye)}var Et,bn;function Qt(r){if(Et===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Et=i&&i[1]||"",bn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Et+r+bn}var ne=!1;function ge(r,i){if(!r||ne)return"";ne=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ie){var Z=ie}Reflect.construct(r,[],he)}else{try{he.call()}catch(ie){Z=ie}r.call(he.prototype)}}else{try{throw Error()}catch(ie){Z=ie}(he=r())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ie){if(ie&&Z&&typeof ie.stack=="string")return[ie.stack,Z.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],I=m[1];if(v&&I){var k=v.split(`
`),W=I.split(`
`);for(f=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;f<W.length&&!W[f].includes("DetermineComponentFrameRoot");)f++;if(u===k.length||f===W.length)for(u=k.length-1,f=W.length-1;1<=u&&0<=f&&k[u]!==W[f];)f--;for(;1<=u&&0<=f;u--,f--)if(k[u]!==W[f]){if(u!==1||f!==1)do if(u--,f--,0>f||k[u]!==W[f]){var se=`
`+k[u].replace(" at new "," at ");return r.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",r.displayName)),se}while(1<=u&&0<=f);break}}}finally{ne=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Qt(o):""}function Ve(r,i){switch(r.tag){case 26:case 27:case 5:return Qt(r.type);case 16:return Qt("Lazy");case 13:return r.child!==i&&i!==null?Qt("Suspense Fallback"):Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return ge(r.type,!1);case 11:return ge(r.type.render,!1);case 1:return ge(r.type,!0);case 31:return Qt("Activity");default:return""}}function we(r){try{var i="",o=null;do i+=Ve(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ae=Object.prototype.hasOwnProperty,Fe=n.unstable_scheduleCallback,Lt=n.unstable_cancelCallback,Rt=n.unstable_shouldYield,je=n.unstable_requestPaint,Ye=n.unstable_now,Dt=n.unstable_getCurrentPriorityLevel,rr=n.unstable_ImmediatePriority,Qn=n.unstable_UserBlockingPriority,an=n.unstable_NormalPriority,Sn=n.unstable_LowPriority,Rs=n.unstable_IdlePriority,So=n.log,Ea=n.unstable_setDisableYieldValue,pr=null,Ut=null;function Xn(r){if(typeof So=="function"&&Ea(r),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(pr,r)}catch{}}var Xt=Math.clz32?Math.clz32:Is,Cs=Math.log,Ta=Math.LN2;function Is(r){return r>>>=0,r===0?32:31-(Cs(r)/Ta|0)|0}var Wn=256,pi=262144,Wt=4194304;function Pr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function gr(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,v=r.pingedLanes;r=r.warmLanes;var I=u&134217727;return I!==0?(u=I&~m,u!==0?f=Pr(u):(v&=I,v!==0?f=Pr(v):o||(o=I&~r,o!==0&&(f=Pr(o))))):(I=u&~m,I!==0?f=Pr(I):v!==0?f=Pr(v):o||(o=u&~r,o!==0&&(f=Pr(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function yr(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Ao(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zi(){var r=Wt;return Wt<<=1,(Wt&62914560)===0&&(Wt=4194304),r}function Jn(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function gi(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ql(r,i,o,u,f,m){var v=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var I=r.entanglements,k=r.expirationTimes,W=r.hiddenUpdates;for(o=v&~o;0<o;){var se=31-Xt(o),he=1<<se;I[se]=0,k[se]=-1;var Z=W[se];if(Z!==null)for(W[se]=null,se=0;se<Z.length;se++){var ie=Z[se];ie!==null&&(ie.lane&=-536870913)}o&=~he}u!==0&&Bi(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(v&~i))}function Bi(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Xt(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function V(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Xt(o),f=1<<u;f&i|r[u]&i&&(r[u]|=i),o&=~f}}function H(r,i){var o=i&-i;return o=(o&42)!==0?1:J(o),(o&(r.suspendedLanes|i))!==0?0:o}function J(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function me(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function _e(){var r=de.p;return r!==0?r:(r=window.event,r===void 0?32:YT(r.type))}function Ce(r,i){var o=de.p;try{return de.p=r,i()}finally{de.p=o}}var Ne=Math.random().toString(36).slice(2),ve="__reactFiber$"+Ne,Se="__reactProps$"+Ne,De="__reactContainer$"+Ne,qe="__reactEvents$"+Ne,Me="__reactListeners$"+Ne,Qe="__reactHandles$"+Ne,it="__reactResources$"+Ne,Nt="__reactMarker$"+Ne;function qt(r){delete r[ve],delete r[Se],delete r[qe],delete r[Me],delete r[Qe]}function zt(r){var i=r[ve];if(i)return i;for(var o=r.parentNode;o;){if(i=o[De]||o[ve]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=OT(r);r!==null;){if(o=r[ve])return o;r=OT(r)}return i}r=o,o=r.parentNode}return null}function tt(r){if(r=r[ve]||r[De]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function Bt(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function Dn(r){var i=r[it];return i||(i=r[it]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ft(r){r[Nt]=!0}var ir=new Set,Bn={};function ar(r,i){Fn(r,i),Fn(r+"Capture",i)}function Fn(r,i){for(Bn[r]=i,r=0;r<i.length;r++)ir.add(i[r])}var _r=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yi={},_i={};function st(r){return Ae.call(_i,r)?!0:Ae.call(yi,r)?!1:_r.test(r)?_i[r]=!0:(yi[r]=!0,!1)}function en(r,i,o){if(st(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function mn(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function xt(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function nt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function vr(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ba(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,m.call(this,v)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Tt(r){if(!r._valueTracker){var i=vr(r)?"checked":"value";r._valueTracker=ba(r,i,""+r[i])}}function Ds(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=vr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function vi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ns=/[\n"\\]/g;function sr(r){return r.replace(Ns,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function wo(r,i,o,u,f,m,v,I){r.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?r.type=v:r.removeAttribute("type"),i!=null?v==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+nt(i)):r.value!==""+nt(i)&&(r.value=""+nt(i)):v!=="submit"&&v!=="reset"||r.removeAttribute("value"),i!=null?Xl(r,v,nt(i)):o!=null?Xl(r,v,nt(o)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+nt(I):r.removeAttribute("name")}function Yc(r,i,o,u,f,m,v,I){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Tt(r);return}o=o!=null?""+nt(o):"",i=i!=null?""+nt(i):o,I||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=I?r.checked:!!u,r.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.name=v),Tt(r)}function Xl(r,i,o){i==="number"&&vi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Sa(r,i,o,u){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+nt(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function Qc(r,i,o){if(i!=null&&(i=""+nt(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+nt(o):""}function Aa(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(ke(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=nt(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),Tt(r)}function or(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var Xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wl(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||Xc.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function Jl(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&Wl(r,f,u)}else for(var m in i)i.hasOwnProperty(m)&&Wl(r,m,i[m])}function Ro(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Co(r){return wa.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Zr(){}var Zl=null;function Vr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ra=null,Ei=null;function xs(r){var i=tt(r);if(i&&(r=i.stateNode)){var o=r[Se]||null;e:switch(r=i.stateNode,i.type){case"input":if(wo(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+sr(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var f=u[Se]||null;if(!f)throw Error(a(90));wo(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&Ds(u)}break e;case"textarea":Qc(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Sa(r,!!o.multiple,i,!1)}}}var Io=!1;function Ca(r,i,o){if(Io)return r(i,o);Io=!0;try{var u=r(i);return u}finally{if(Io=!1,(Ra!==null||Ei!==null)&&(qh(),Ra&&(i=Ra,r=Ei,Ei=Ra=null,xs(i),r)))for(i=0;i<r.length;i++)xs(r[i])}}function ei(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Se]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Os=!1;if(kr)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Os=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch{Os=!1}var Ti=null,eu=null,Ms=null;function tu(){if(Ms)return Ms;var r,i=eu,o=i.length,u,f="value"in Ti?Ti.value:Ti.textContent,m=f.length;for(r=0;r<o&&i[r]===f[r];r++);var v=o-r;for(u=1;u<=v&&i[o-u]===f[m-u];u++);return Ms=f.slice(r,1<u?1-u:void 0)}function Ps(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Fi(){return!0}function ti(){return!1}function On(r){function i(o,u,f,m,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(o=r[I],this[I]=o?o(m):m[I]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Fi:ti,this.isPropagationStopped=ti,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),i}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=On(Hi),Ia=E({},Hi,{view:0,detail:0}),nu=On(Ia),Da,Do,Si,No=E({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Si&&(Si&&r.type==="mousemove"?(Da=r.screenX-Si.screenX,Do=r.screenY-Si.screenY):Do=Da=0,Si=r),Da)},movementY:function(r){return"movementY"in r?r.movementY:Do}}),ru=On(No),Vs=E({},No,{dataTransfer:0}),Jc=On(Vs),Zc=E({},Ia,{relatedTarget:0}),ks=On(Zc),iu=E({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),eh=On(iu),xo=E({},Hi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),th=On(xo),nh=E({},Hi,{data:0}),Ai=On(nh),rh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ih={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sh(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=ah[r])?!!i[r]:!1}function Na(){return sh}var Zn=E({},Ia,{key:function(r){if(r.key){var i=rh[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ps(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ih[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(r){return r.type==="keypress"?Ps(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ps(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),oh=On(Zn),lh=E({},No,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qi=On(lh),h=E({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na}),y=On(h),T=E({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=On(T),Q=E({},No,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),re=On(Q),be=E({},Hi,{newState:0,oldState:0}),Ze=On(be),un=[9,13,27,32],bt=kr&&"CompositionEvent"in window,Jt=null;kr&&"documentMode"in document&&(Jt=document.documentMode);var Lr=kr&&"TextEvent"in window&&!Jt,wi=kr&&(!bt||Jt&&8<Jt&&11>=Jt),ni=" ",ri=!1;function Ls(r,i){switch(r){case"keyup":return un.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Mo=!1;function TR(r,i){switch(r){case"compositionend":return Oo(i);case"keypress":return i.which!==32?null:(ri=!0,ni);case"textInput":return r=i.data,r===ni&&ri?null:r;default:return null}}function bR(r,i){if(Mo)return r==="compositionend"||!bt&&Ls(r,i)?(r=tu(),Ms=eu=Ti=null,Mo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return wi&&i.locale!=="ko"?null:i.data;default:return null}}var SR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V_(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!SR[r.type]:i==="textarea"}function k_(r,i,o,u){Ra?Ei?Ei.push(u):Ei=[u]:Ra=u,i=Wh(i,"onChange"),0<i.length&&(o=new bi("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var au=null,su=null;function AR(r){_T(r,0)}function uh(r){var i=Bt(r);if(Ds(i))return r}function L_(r,i){if(r==="change")return i}var U_=!1;if(kr){var cm;if(kr){var hm="oninput"in document;if(!hm){var j_=document.createElement("div");j_.setAttribute("oninput","return;"),hm=typeof j_.oninput=="function"}cm=hm}else cm=!1;U_=cm&&(!document.documentMode||9<document.documentMode)}function z_(){au&&(au.detachEvent("onpropertychange",B_),su=au=null)}function B_(r){if(r.propertyName==="value"&&uh(su)){var i=[];k_(i,su,r,Vr(r)),Ca(AR,i)}}function wR(r,i,o){r==="focusin"?(z_(),au=i,su=o,au.attachEvent("onpropertychange",B_)):r==="focusout"&&z_()}function RR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return uh(su)}function CR(r,i){if(r==="click")return uh(i)}function IR(r,i){if(r==="input"||r==="change")return uh(i)}function DR(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Er=typeof Object.is=="function"?Object.is:DR;function ou(r,i){if(Er(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Ae.call(i,f)||!Er(r[f],i[f]))return!1}return!0}function F_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function H_(r,i){var o=F_(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=F_(o)}}function q_(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?q_(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function G_(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=vi(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=vi(r.document)}return i}function fm(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var NR=kr&&"documentMode"in document&&11>=document.documentMode,Po=null,dm=null,lu=null,mm=!1;function $_(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;mm||Po==null||Po!==vi(u)||(u=Po,"selectionStart"in u&&fm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),lu&&ou(lu,u)||(lu=u,u=Wh(dm,"onSelect"),0<u.length&&(i=new bi("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Po)))}function Us(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Vo={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},pm={},K_={};kr&&(K_=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function js(r){if(pm[r])return pm[r];if(!Vo[r])return r;var i=Vo[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in K_)return pm[r]=i[o];return r}var Y_=js("animationend"),Q_=js("animationiteration"),X_=js("animationstart"),xR=js("transitionrun"),OR=js("transitionstart"),MR=js("transitioncancel"),W_=js("transitionend"),J_=new Map,gm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gm.push("scrollEnd");function ii(r,i){J_.set(r,i),ar(i,[r])}var ch=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Ur=[],ko=0,ym=0;function hh(){for(var r=ko,i=ym=ko=0;i<r;){var o=Ur[i];Ur[i++]=null;var u=Ur[i];Ur[i++]=null;var f=Ur[i];Ur[i++]=null;var m=Ur[i];if(Ur[i++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}m!==0&&Z_(o,f,m)}}function fh(r,i,o,u){Ur[ko++]=r,Ur[ko++]=i,Ur[ko++]=o,Ur[ko++]=u,ym|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function _m(r,i,o,u){return fh(r,i,o,u),dh(r)}function zs(r,i){return fh(r,null,null,i),dh(r)}function Z_(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&i!==null&&(f=31-Xt(o),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=o|536870912),m):null}function dh(r){if(50<Nu)throw Nu=0,Cp=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Lo={};function PR(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(r,i,o,u){return new PR(r,i,o,u)}function vm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Gi(r,i){var o=r.alternate;return o===null?(o=Tr(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function ev(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function mh(r,i,o,u,f,m){var v=0;if(u=r,typeof r=="function")vm(r)&&(v=1);else if(typeof r=="string")v=jC(r,o,ce.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case C:return r=Tr(31,o,i,f),r.elementType=C,r.lanes=m,r;case F:return Bs(o.children,f,m,i);case j:v=8,f|=24;break;case K:return r=Tr(12,o,i,f|2),r.elementType=K,r.lanes=m,r;case ae:return r=Tr(13,o,i,f),r.elementType=ae,r.lanes=m,r;case ee:return r=Tr(19,o,i,f),r.elementType=ee,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case $:v=10;break e;case B:v=9;break e;case te:v=11;break e;case A:v=14;break e;case S:v=16,u=null;break e}v=29,o=Error(a(130,r===null?"null":typeof r,"")),u=null}return i=Tr(v,o,i,f),i.elementType=r,i.type=u,i.lanes=m,i}function Bs(r,i,o,u){return r=Tr(7,r,u,i),r.lanes=o,r}function Em(r,i,o){return r=Tr(6,r,null,i),r.lanes=o,r}function tv(r){var i=Tr(18,null,null,0);return i.stateNode=r,i}function Tm(r,i,o){return i=Tr(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var nv=new WeakMap;function jr(r,i){if(typeof r=="object"&&r!==null){var o=nv.get(r);return o!==void 0?o:(i={value:r,source:i,stack:we(i)},nv.set(r,i),i)}return{value:r,source:i,stack:we(i)}}var Uo=[],jo=0,ph=null,uu=0,zr=[],Br=0,xa=null,Ri=1,Ci="";function $i(r,i){Uo[jo++]=uu,Uo[jo++]=ph,ph=r,uu=i}function rv(r,i,o){zr[Br++]=Ri,zr[Br++]=Ci,zr[Br++]=xa,xa=r;var u=Ri;r=Ci;var f=32-Xt(u)-1;u&=~(1<<f),o+=1;var m=32-Xt(i)+f;if(30<m){var v=f-f%5;m=(u&(1<<v)-1).toString(32),u>>=v,f-=v,Ri=1<<32-Xt(i)+f|o<<f|u,Ci=m+r}else Ri=1<<m|o<<f|u,Ci=r}function bm(r){r.return!==null&&($i(r,1),rv(r,1,0))}function Sm(r){for(;r===ph;)ph=Uo[--jo],Uo[jo]=null,uu=Uo[--jo],Uo[jo]=null;for(;r===xa;)xa=zr[--Br],zr[Br]=null,Ci=zr[--Br],zr[Br]=null,Ri=zr[--Br],zr[Br]=null}function iv(r,i){zr[Br++]=Ri,zr[Br++]=Ci,zr[Br++]=xa,Ri=i.id,Ci=i.overflow,xa=r}var Mn=null,Gt=null,gt=!1,Oa=null,Fr=!1,Am=Error(a(519));function Ma(r){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cu(jr(i,r)),Am}function av(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[ve]=r,i[Se]=u,o){case"dialog":ut("cancel",i),ut("close",i);break;case"iframe":case"object":case"embed":ut("load",i);break;case"video":case"audio":for(o=0;o<Ou.length;o++)ut(Ou[o],i);break;case"source":ut("error",i);break;case"img":case"image":case"link":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"input":ut("invalid",i),Yc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ut("invalid",i);break;case"textarea":ut("invalid",i),Aa(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||bT(i.textContent,o)?(u.popover!=null&&(ut("beforetoggle",i),ut("toggle",i)),u.onScroll!=null&&ut("scroll",i),u.onScrollEnd!=null&&ut("scrollend",i),u.onClick!=null&&(i.onclick=Zr),i=!0):i=!1,i||Ma(r,!0)}function sv(r){for(Mn=r.return;Mn;)switch(Mn.tag){case 5:case 31:case 13:Fr=!1;return;case 27:case 3:Fr=!0;return;default:Mn=Mn.return}}function zo(r){if(r!==Mn)return!1;if(!gt)return sv(r),gt=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Fp(r.type,r.memoizedProps)),o=!o),o&&Gt&&Ma(r),sv(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Gt=xT(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Gt=xT(r)}else i===27?(i=Gt,Ka(r.type)?(r=Kp,Kp=null,Gt=r):Gt=i):Gt=Mn?qr(r.stateNode.nextSibling):null;return!0}function Fs(){Gt=Mn=null,gt=!1}function wm(){var r=Oa;return r!==null&&(hr===null?hr=r:hr.push.apply(hr,r),Oa=null),r}function cu(r){Oa===null?Oa=[r]:Oa.push(r)}var Rm=U(null),Hs=null,Ki=null;function Pa(r,i,o){oe(Rm,i._currentValue),i._currentValue=o}function Yi(r){r._currentValue=Rm.current,q(Rm)}function Cm(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function Im(r,i,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var I=m;m=f;for(var k=0;k<i.length;k++)if(I.context===i[k]){m.lanes|=o,I=m.alternate,I!==null&&(I.lanes|=o),Cm(m.return,o,r),u||(v=null);break e}m=I.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(a(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),Cm(v,o,r),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===r){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Bo(r,i,o,u){r=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var I=f.type;Er(f.pendingProps.value,v.value)||(r!==null?r.push(I):r=[I])}}else if(f===Ue.current){if(v=f.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Lu):r=[Lu])}f=f.return}r!==null&&Im(i,r,o,u),i.flags|=262144}function gh(r){for(r=r.firstContext;r!==null;){if(!Er(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function qs(r){Hs=r,Ki=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Pn(r){return ov(Hs,r)}function yh(r,i){return Hs===null&&qs(r),ov(r,i)}function ov(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Ki===null){if(r===null)throw Error(a(308));Ki=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Ki=Ki.next=i;return o}var VR=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},kR=n.unstable_scheduleCallback,LR=n.unstable_NormalPriority,pn={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dm(){return{controller:new VR,data:new Map,refCount:0}}function hu(r){r.refCount--,r.refCount===0&&kR(LR,function(){r.controller.abort()})}var fu=null,Nm=0,Fo=0,Ho=null;function UR(r,i){if(fu===null){var o=fu=[];Nm=0,Fo=Mp(),Ho={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Nm++,i.then(lv,lv),i}function lv(){if(--Nm===0&&fu!==null){Ho!==null&&(Ho.status="fulfilled");var r=fu;fu=null,Fo=0,Ho=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function jR(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var uv=Y.S;Y.S=function(r,i){$E=Ye(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&UR(r,i),uv!==null&&uv(r,i)};var Gs=U(null);function xm(){var r=Gs.current;return r!==null?r:jt.pooledCache}function _h(r,i){i===null?oe(Gs,Gs.current):oe(Gs,i.pool)}function cv(){var r=xm();return r===null?null:{parent:pn._currentValue,pool:r}}var qo=Error(a(460)),Om=Error(a(474)),vh=Error(a(542)),Eh={then:function(){}};function hv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function fv(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(Zr,Zr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,mv(r),r;default:if(typeof i.status=="string")i.then(Zr,Zr);else{if(r=jt,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,mv(r),r}throw Ks=i,qo}}function $s(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ks=o,qo):o}}var Ks=null;function dv(){if(Ks===null)throw Error(a(459));var r=Ks;return Ks=null,r}function mv(r){if(r===qo||r===vh)throw Error(a(483))}var Go=null,du=0;function Th(r){var i=du;return du+=1,Go===null&&(Go=[]),fv(Go,r,i)}function mu(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function bh(r,i){throw i.$$typeof===b?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function pv(r){function i(G,z){if(r){var X=G.deletions;X===null?(G.deletions=[z],G.flags|=16):X.push(z)}}function o(G,z){if(!r)return null;for(;z!==null;)i(G,z),z=z.sibling;return null}function u(G){for(var z=new Map;G!==null;)G.key!==null?z.set(G.key,G):z.set(G.index,G),G=G.sibling;return z}function f(G,z){return G=Gi(G,z),G.index=0,G.sibling=null,G}function m(G,z,X){return G.index=X,r?(X=G.alternate,X!==null?(X=X.index,X<z?(G.flags|=67108866,z):X):(G.flags|=67108866,z)):(G.flags|=1048576,z)}function v(G){return r&&G.alternate===null&&(G.flags|=67108866),G}function I(G,z,X,le){return z===null||z.tag!==6?(z=Em(X,G.mode,le),z.return=G,z):(z=f(z,X),z.return=G,z)}function k(G,z,X,le){var ze=X.type;return ze===F?se(G,z,X.props.children,le,X.key):z!==null&&(z.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===S&&$s(ze)===z.type)?(z=f(z,X.props),mu(z,X),z.return=G,z):(z=mh(X.type,X.key,X.props,null,G.mode,le),mu(z,X),z.return=G,z)}function W(G,z,X,le){return z===null||z.tag!==4||z.stateNode.containerInfo!==X.containerInfo||z.stateNode.implementation!==X.implementation?(z=Tm(X,G.mode,le),z.return=G,z):(z=f(z,X.children||[]),z.return=G,z)}function se(G,z,X,le,ze){return z===null||z.tag!==7?(z=Bs(X,G.mode,le,ze),z.return=G,z):(z=f(z,X),z.return=G,z)}function he(G,z,X){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Em(""+z,G.mode,X),z.return=G,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case R:return X=mh(z.type,z.key,z.props,null,G.mode,X),mu(X,z),X.return=G,X;case L:return z=Tm(z,G.mode,X),z.return=G,z;case S:return z=$s(z),he(G,z,X)}if(ke(z)||O(z))return z=Bs(z,G.mode,X,null),z.return=G,z;if(typeof z.then=="function")return he(G,Th(z),X);if(z.$$typeof===$)return he(G,yh(G,z),X);bh(G,z)}return null}function Z(G,z,X,le){var ze=z!==null?z.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return ze!==null?null:I(G,z,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case R:return X.key===ze?k(G,z,X,le):null;case L:return X.key===ze?W(G,z,X,le):null;case S:return X=$s(X),Z(G,z,X,le)}if(ke(X)||O(X))return ze!==null?null:se(G,z,X,le,null);if(typeof X.then=="function")return Z(G,z,Th(X),le);if(X.$$typeof===$)return Z(G,z,yh(G,X),le);bh(G,X)}return null}function ie(G,z,X,le,ze){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return G=G.get(X)||null,I(z,G,""+le,ze);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case R:return G=G.get(le.key===null?X:le.key)||null,k(z,G,le,ze);case L:return G=G.get(le.key===null?X:le.key)||null,W(z,G,le,ze);case S:return le=$s(le),ie(G,z,X,le,ze)}if(ke(le)||O(le))return G=G.get(X)||null,se(z,G,le,ze,null);if(typeof le.then=="function")return ie(G,z,X,Th(le),ze);if(le.$$typeof===$)return ie(G,z,X,yh(z,le),ze);bh(z,le)}return null}function xe(G,z,X,le){for(var ze=null,_t=null,Oe=z,rt=z=0,ft=null;Oe!==null&&rt<X.length;rt++){Oe.index>rt?(ft=Oe,Oe=null):ft=Oe.sibling;var vt=Z(G,Oe,X[rt],le);if(vt===null){Oe===null&&(Oe=ft);break}r&&Oe&&vt.alternate===null&&i(G,Oe),z=m(vt,z,rt),_t===null?ze=vt:_t.sibling=vt,_t=vt,Oe=ft}if(rt===X.length)return o(G,Oe),gt&&$i(G,rt),ze;if(Oe===null){for(;rt<X.length;rt++)Oe=he(G,X[rt],le),Oe!==null&&(z=m(Oe,z,rt),_t===null?ze=Oe:_t.sibling=Oe,_t=Oe);return gt&&$i(G,rt),ze}for(Oe=u(Oe);rt<X.length;rt++)ft=ie(Oe,G,rt,X[rt],le),ft!==null&&(r&&ft.alternate!==null&&Oe.delete(ft.key===null?rt:ft.key),z=m(ft,z,rt),_t===null?ze=ft:_t.sibling=ft,_t=ft);return r&&Oe.forEach(function(Ja){return i(G,Ja)}),gt&&$i(G,rt),ze}function He(G,z,X,le){if(X==null)throw Error(a(151));for(var ze=null,_t=null,Oe=z,rt=z=0,ft=null,vt=X.next();Oe!==null&&!vt.done;rt++,vt=X.next()){Oe.index>rt?(ft=Oe,Oe=null):ft=Oe.sibling;var Ja=Z(G,Oe,vt.value,le);if(Ja===null){Oe===null&&(Oe=ft);break}r&&Oe&&Ja.alternate===null&&i(G,Oe),z=m(Ja,z,rt),_t===null?ze=Ja:_t.sibling=Ja,_t=Ja,Oe=ft}if(vt.done)return o(G,Oe),gt&&$i(G,rt),ze;if(Oe===null){for(;!vt.done;rt++,vt=X.next())vt=he(G,vt.value,le),vt!==null&&(z=m(vt,z,rt),_t===null?ze=vt:_t.sibling=vt,_t=vt);return gt&&$i(G,rt),ze}for(Oe=u(Oe);!vt.done;rt++,vt=X.next())vt=ie(Oe,G,rt,vt.value,le),vt!==null&&(r&&vt.alternate!==null&&Oe.delete(vt.key===null?rt:vt.key),z=m(vt,z,rt),_t===null?ze=vt:_t.sibling=vt,_t=vt);return r&&Oe.forEach(function(XC){return i(G,XC)}),gt&&$i(G,rt),ze}function Vt(G,z,X,le){if(typeof X=="object"&&X!==null&&X.type===F&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case R:e:{for(var ze=X.key;z!==null;){if(z.key===ze){if(ze=X.type,ze===F){if(z.tag===7){o(G,z.sibling),le=f(z,X.props.children),le.return=G,G=le;break e}}else if(z.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===S&&$s(ze)===z.type){o(G,z.sibling),le=f(z,X.props),mu(le,X),le.return=G,G=le;break e}o(G,z);break}else i(G,z);z=z.sibling}X.type===F?(le=Bs(X.props.children,G.mode,le,X.key),le.return=G,G=le):(le=mh(X.type,X.key,X.props,null,G.mode,le),mu(le,X),le.return=G,G=le)}return v(G);case L:e:{for(ze=X.key;z!==null;){if(z.key===ze)if(z.tag===4&&z.stateNode.containerInfo===X.containerInfo&&z.stateNode.implementation===X.implementation){o(G,z.sibling),le=f(z,X.children||[]),le.return=G,G=le;break e}else{o(G,z);break}else i(G,z);z=z.sibling}le=Tm(X,G.mode,le),le.return=G,G=le}return v(G);case S:return X=$s(X),Vt(G,z,X,le)}if(ke(X))return xe(G,z,X,le);if(O(X)){if(ze=O(X),typeof ze!="function")throw Error(a(150));return X=ze.call(X),He(G,z,X,le)}if(typeof X.then=="function")return Vt(G,z,Th(X),le);if(X.$$typeof===$)return Vt(G,z,yh(G,X),le);bh(G,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,z!==null&&z.tag===6?(o(G,z.sibling),le=f(z,X),le.return=G,G=le):(o(G,z),le=Em(X,G.mode,le),le.return=G,G=le),v(G)):o(G,z)}return function(G,z,X,le){try{du=0;var ze=Vt(G,z,X,le);return Go=null,ze}catch(Oe){if(Oe===qo||Oe===vh)throw Oe;var _t=Tr(29,Oe,null,G.mode);return _t.lanes=le,_t.return=G,_t}finally{}}}var Ys=pv(!0),gv=pv(!1),Va=!1;function Mm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ka(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function La(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(St&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=dh(r),Z_(r,null,o),i}return fh(r,u,i,o),dh(r)}function pu(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,V(r,o)}}function Vm(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var km=!1;function gu(){if(km){var r=Ho;if(r!==null)throw r}}function yu(r,i,o,u){km=!1;var f=r.updateQueue;Va=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,I=f.shared.pending;if(I!==null){f.shared.pending=null;var k=I,W=k.next;k.next=null,v===null?m=W:v.next=W,v=k;var se=r.alternate;se!==null&&(se=se.updateQueue,I=se.lastBaseUpdate,I!==v&&(I===null?se.firstBaseUpdate=W:I.next=W,se.lastBaseUpdate=k))}if(m!==null){var he=f.baseState;v=0,se=W=k=null,I=m;do{var Z=I.lane&-536870913,ie=Z!==I.lane;if(ie?(ht&Z)===Z:(u&Z)===Z){Z!==0&&Z===Fo&&(km=!0),se!==null&&(se=se.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var xe=r,He=I;Z=i;var Vt=o;switch(He.tag){case 1:if(xe=He.payload,typeof xe=="function"){he=xe.call(Vt,he,Z);break e}he=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=He.payload,Z=typeof xe=="function"?xe.call(Vt,he,Z):xe,Z==null)break e;he=E({},he,Z);break e;case 2:Va=!0}}Z=I.callback,Z!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[Z]:ie.push(Z))}else ie={lane:Z,tag:I.tag,payload:I.payload,callback:I.callback,next:null},se===null?(W=se=ie,k=he):se=se.next=ie,v|=Z;if(I=I.next,I===null){if(I=f.shared.pending,I===null)break;ie=I,I=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);se===null&&(k=he),f.baseState=k,f.firstBaseUpdate=W,f.lastBaseUpdate=se,m===null&&(f.shared.lanes=0),Fa|=v,r.lanes=v,r.memoizedState=he}}function yv(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function _v(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)yv(o[r],i)}var $o=U(null),Sh=U(0);function vv(r,i){r=ra,oe(Sh,r),oe($o,i),ra=r|i.baseLanes}function Lm(){oe(Sh,ra),oe($o,$o.current)}function Um(){ra=Sh.current,q($o),q(Sh)}var br=U(null),Hr=null;function Ua(r){var i=r.alternate;oe(cn,cn.current&1),oe(br,r),Hr===null&&(i===null||$o.current!==null||i.memoizedState!==null)&&(Hr=r)}function jm(r){oe(cn,cn.current),oe(br,r),Hr===null&&(Hr=r)}function Ev(r){r.tag===22?(oe(cn,cn.current),oe(br,r),Hr===null&&(Hr=r)):ja()}function ja(){oe(cn,cn.current),oe(br,br.current)}function Sr(r){q(br),Hr===r&&(Hr=null),q(cn)}var cn=U(0);function Ah(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Gp(o)||$p(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Qi=0,et=null,Mt=null,gn=null,wh=!1,Ko=!1,Qs=!1,Rh=0,_u=0,Yo=null,zR=0;function sn(){throw Error(a(321))}function zm(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!Er(r[o],i[o]))return!1;return!0}function Bm(r,i,o,u,f,m){return Qi=m,et=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=r===null||r.memoizedState===null?rE:np,Qs=!1,m=o(u,f),Qs=!1,Ko&&(m=bv(i,o,u,f)),Tv(r),m}function Tv(r){Y.H=Tu;var i=Mt!==null&&Mt.next!==null;if(Qi=0,gn=Mt=et=null,wh=!1,_u=0,Yo=null,i)throw Error(a(300));r===null||yn||(r=r.dependencies,r!==null&&gh(r)&&(yn=!0))}function bv(r,i,o,u){et=r;var f=0;do{if(Ko&&(Yo=null),_u=0,Ko=!1,25<=f)throw Error(a(301));if(f+=1,gn=Mt=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=iE,m=i(o,u)}while(Ko);return m}function BR(){var r=Y.H,i=r.useState()[0];return i=typeof i.then=="function"?vu(i):i,r=r.useState()[0],(Mt!==null?Mt.memoizedState:null)!==r&&(et.flags|=1024),i}function Fm(){var r=Rh!==0;return Rh=0,r}function Hm(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function qm(r){if(wh){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wh=!1}Qi=0,gn=Mt=et=null,Ko=!1,_u=Rh=0,Yo=null}function er(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?et.memoizedState=gn=r:gn=gn.next=r,gn}function hn(){if(Mt===null){var r=et.alternate;r=r!==null?r.memoizedState:null}else r=Mt.next;var i=gn===null?et.memoizedState:gn.next;if(i!==null)gn=i,Mt=r;else{if(r===null)throw et.alternate===null?Error(a(467)):Error(a(310));Mt=r,r={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},gn===null?et.memoizedState=gn=r:gn=gn.next=r}return gn}function Ch(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vu(r){var i=_u;return _u+=1,Yo===null&&(Yo=[]),r=fv(Yo,r,i),i=et,(gn===null?i.memoizedState:gn.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?rE:np),r}function Ih(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return vu(r);if(r.$$typeof===$)return Pn(r)}throw Error(a(438,String(r)))}function Gm(r){var i=null,o=et.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=et.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Ch(),et.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=M;return i.index++,o}function Xi(r,i){return typeof i=="function"?i(r):i}function Dh(r){var i=hn();return $m(i,Mt,r)}function $m(r,i,o){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}i.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{i=f.next;var I=v=null,k=null,W=i,se=!1;do{var he=W.lane&-536870913;if(he!==W.lane?(ht&he)===he:(Qi&he)===he){var Z=W.revertLane;if(Z===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),he===Fo&&(se=!0);else if((Qi&Z)===Z){W=W.next,Z===Fo&&(se=!0);continue}else he={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},k===null?(I=k=he,v=m):k=k.next=he,et.lanes|=Z,Fa|=Z;he=W.action,Qs&&o(m,he),m=W.hasEagerState?W.eagerState:o(m,he)}else Z={lane:he,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},k===null?(I=k=Z,v=m):k=k.next=Z,et.lanes|=he,Fa|=he;W=W.next}while(W!==null&&W!==i);if(k===null?v=m:k.next=I,!Er(m,r.memoizedState)&&(yn=!0,se&&(o=Ho,o!==null)))throw o;r.memoizedState=m,r.baseState=v,r.baseQueue=k,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Km(r){var i=hn(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do m=r(m,v.action),v=v.next;while(v!==f);Er(m,i.memoizedState)||(yn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function Sv(r,i,o){var u=et,f=hn(),m=gt;if(m){if(o===void 0)throw Error(a(407));o=o()}else o=i();var v=!Er((Mt||f).memoizedState,o);if(v&&(f.memoizedState=o,yn=!0),f=f.queue,Xm(Rv.bind(null,u,f,r),[r]),f.getSnapshot!==i||v||gn!==null&&gn.memoizedState.tag&1){if(u.flags|=2048,Qo(9,{destroy:void 0},wv.bind(null,u,f,o,i),null),jt===null)throw Error(a(349));m||(Qi&127)!==0||Av(u,i,o)}return o}function Av(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=et.updateQueue,i===null?(i=Ch(),et.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function wv(r,i,o,u){i.value=o,i.getSnapshot=u,Cv(i)&&Iv(r)}function Rv(r,i,o){return o(function(){Cv(i)&&Iv(r)})}function Cv(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!Er(r,o)}catch{return!0}}function Iv(r){var i=zs(r,2);i!==null&&fr(i,r,2)}function Ym(r){var i=er();if(typeof r=="function"){var o=r;if(r=o(),Qs){Xn(!0);try{o()}finally{Xn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:r},i}function Dv(r,i,o,u){return r.baseState=o,$m(r,Mt,typeof u=="function"?u:Xi)}function FR(r,i,o,u,f){if(Oh(r))throw Error(a(485));if(r=i.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};Y.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,Nv(i,m)):(m.next=o.next,i.pending=o.next=m)}}function Nv(r,i){var o=i.action,u=i.payload,f=r.state;if(i.isTransition){var m=Y.T,v={};Y.T=v;try{var I=o(f,u),k=Y.S;k!==null&&k(v,I),xv(r,i,I)}catch(W){Qm(r,i,W)}finally{m!==null&&v.types!==null&&(m.types=v.types),Y.T=m}}else try{m=o(f,u),xv(r,i,m)}catch(W){Qm(r,i,W)}}function xv(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Ov(r,i,u)},function(u){return Qm(r,i,u)}):Ov(r,i,o)}function Ov(r,i,o){i.status="fulfilled",i.value=o,Mv(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,Nv(r,o)))}function Qm(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Mv(i),i=i.next;while(i!==u)}r.action=null}function Mv(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function Pv(r,i){return i}function Vv(r,i){if(gt){var o=jt.formState;if(o!==null){e:{var u=et;if(gt){if(Gt){t:{for(var f=Gt,m=Fr;f.nodeType!==8;){if(!m){f=null;break t}if(f=qr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Gt=qr(f.nextSibling),u=f.data==="F!";break e}}Ma(u)}u=!1}u&&(i=o[0])}}return o=er(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pv,lastRenderedState:i},o.queue=u,o=eE.bind(null,et,u),u.dispatch=o,u=Ym(!1),m=tp.bind(null,et,!1,u.queue),u=er(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,o=FR.bind(null,et,f,m,o),f.dispatch=o,u.memoizedState=r,[i,o,!1]}function kv(r){var i=hn();return Lv(i,Mt,r)}function Lv(r,i,o){if(i=$m(r,i,Pv)[0],r=Dh(Xi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=vu(i)}catch(v){throw v===qo?vh:v}else u=i;i=hn();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(et.flags|=2048,Qo(9,{destroy:void 0},HR.bind(null,f,o),null)),[u,m,r]}function HR(r,i){r.action=i}function Uv(r){var i=hn(),o=Mt;if(o!==null)return Lv(i,o,r);hn(),i=i.memoizedState,o=hn();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function Qo(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=et.updateQueue,i===null&&(i=Ch(),et.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function jv(){return hn().memoizedState}function Nh(r,i,o,u){var f=er();et.flags|=r,f.memoizedState=Qo(1|i,{destroy:void 0},o,u===void 0?null:u)}function xh(r,i,o,u){var f=hn();u=u===void 0?null:u;var m=f.memoizedState.inst;Mt!==null&&u!==null&&zm(u,Mt.memoizedState.deps)?f.memoizedState=Qo(i,m,o,u):(et.flags|=r,f.memoizedState=Qo(1|i,m,o,u))}function zv(r,i){Nh(8390656,8,r,i)}function Xm(r,i){xh(2048,8,r,i)}function qR(r){et.flags|=4;var i=et.updateQueue;if(i===null)i=Ch(),et.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function Bv(r){var i=hn().memoizedState;return qR({ref:i,nextImpl:r}),function(){if((St&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Fv(r,i){return xh(4,2,r,i)}function Hv(r,i){return xh(4,4,r,i)}function qv(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Gv(r,i,o){o=o!=null?o.concat([r]):null,xh(4,4,qv.bind(null,i,r),o)}function Wm(){}function $v(r,i){var o=hn();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&zm(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function Kv(r,i){var o=hn();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&zm(i,u[1]))return u[0];if(u=r(),Qs){Xn(!0);try{r()}finally{Xn(!1)}}return o.memoizedState=[u,i],u}function Jm(r,i,o){return o===void 0||(Qi&1073741824)!==0&&(ht&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=YE(),et.lanes|=r,Fa|=r,o)}function Yv(r,i,o,u){return Er(o,i)?o:$o.current!==null?(r=Jm(r,o,u),Er(r,i)||(yn=!0),r):(Qi&42)===0||(Qi&1073741824)!==0&&(ht&261930)===0?(yn=!0,r.memoizedState=o):(r=YE(),et.lanes|=r,Fa|=r,i)}function Qv(r,i,o,u,f){var m=de.p;de.p=m!==0&&8>m?m:8;var v=Y.T,I={};Y.T=I,tp(r,!1,i,o);try{var k=f(),W=Y.S;if(W!==null&&W(I,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var se=jR(k,u);Eu(r,i,se,Rr(r))}else Eu(r,i,u,Rr(r))}catch(he){Eu(r,i,{then:function(){},status:"rejected",reason:he},Rr())}finally{de.p=m,v!==null&&I.types!==null&&(v.types=I.types),Y.T=v}}function GR(){}function Zm(r,i,o,u){if(r.tag!==5)throw Error(a(476));var f=Xv(r).queue;Qv(r,f,i,ye,o===null?GR:function(){return Wv(r),o(u)})}function Xv(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:ye},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Wv(r){var i=Xv(r);i.next===null&&(i=r.alternate.memoizedState),Eu(r,i.next.queue,{},Rr())}function ep(){return Pn(Lu)}function Jv(){return hn().memoizedState}function Zv(){return hn().memoizedState}function $R(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Rr();r=ka(o);var u=La(i,r,o);u!==null&&(fr(u,i,o),pu(u,i,o)),i={cache:Dm()},r.payload=i;return}i=i.return}}function KR(r,i,o){var u=Rr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Oh(r)?tE(i,o):(o=_m(r,i,o,u),o!==null&&(fr(o,r,u),nE(o,i,u)))}function eE(r,i,o){var u=Rr();Eu(r,i,o,u)}function Eu(r,i,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Oh(r))tE(i,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,I=m(v,o);if(f.hasEagerState=!0,f.eagerState=I,Er(I,v))return fh(r,i,f,0),jt===null&&hh(),!1}catch{}finally{}if(o=_m(r,i,f,u),o!==null)return fr(o,r,u),nE(o,i,u),!0}return!1}function tp(r,i,o,u){if(u={lane:2,revertLane:Mp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Oh(r)){if(i)throw Error(a(479))}else i=_m(r,o,u,2),i!==null&&fr(i,r,2)}function Oh(r){var i=r.alternate;return r===et||i!==null&&i===et}function tE(r,i){Ko=wh=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function nE(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,V(r,o)}}var Tu={readContext:Pn,use:Ih,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};Tu.useEffectEvent=sn;var rE={readContext:Pn,use:Ih,useCallback:function(r,i){return er().memoizedState=[r,i===void 0?null:i],r},useContext:Pn,useEffect:zv,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Nh(4194308,4,qv.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Nh(4194308,4,r,i)},useInsertionEffect:function(r,i){Nh(4,2,r,i)},useMemo:function(r,i){var o=er();i=i===void 0?null:i;var u=r();if(Qs){Xn(!0);try{r()}finally{Xn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=er();if(o!==void 0){var f=o(i);if(Qs){Xn(!0);try{o(i)}finally{Xn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=KR.bind(null,et,r),[u.memoizedState,r]},useRef:function(r){var i=er();return r={current:r},i.memoizedState=r},useState:function(r){r=Ym(r);var i=r.queue,o=eE.bind(null,et,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Wm,useDeferredValue:function(r,i){var o=er();return Jm(o,r,i)},useTransition:function(){var r=Ym(!1);return r=Qv.bind(null,et,r.queue,!0,!1),er().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=et,f=er();if(gt){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),jt===null)throw Error(a(349));(ht&127)!==0||Av(u,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,zv(Rv.bind(null,u,m,r),[r]),u.flags|=2048,Qo(9,{destroy:void 0},wv.bind(null,u,m,o,i),null),o},useId:function(){var r=er(),i=jt.identifierPrefix;if(gt){var o=Ci,u=Ri;o=(u&~(1<<32-Xt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Rh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=zR++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:ep,useFormState:Vv,useActionState:Vv,useOptimistic:function(r){var i=er();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=tp.bind(null,et,!0,o),o.dispatch=i,[r,i]},useMemoCache:Gm,useCacheRefresh:function(){return er().memoizedState=$R.bind(null,et)},useEffectEvent:function(r){var i=er(),o={impl:r};return i.memoizedState=o,function(){if((St&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},np={readContext:Pn,use:Ih,useCallback:$v,useContext:Pn,useEffect:Xm,useImperativeHandle:Gv,useInsertionEffect:Fv,useLayoutEffect:Hv,useMemo:Kv,useReducer:Dh,useRef:jv,useState:function(){return Dh(Xi)},useDebugValue:Wm,useDeferredValue:function(r,i){var o=hn();return Yv(o,Mt.memoizedState,r,i)},useTransition:function(){var r=Dh(Xi)[0],i=hn().memoizedState;return[typeof r=="boolean"?r:vu(r),i]},useSyncExternalStore:Sv,useId:Jv,useHostTransitionStatus:ep,useFormState:kv,useActionState:kv,useOptimistic:function(r,i){var o=hn();return Dv(o,Mt,r,i)},useMemoCache:Gm,useCacheRefresh:Zv};np.useEffectEvent=Bv;var iE={readContext:Pn,use:Ih,useCallback:$v,useContext:Pn,useEffect:Xm,useImperativeHandle:Gv,useInsertionEffect:Fv,useLayoutEffect:Hv,useMemo:Kv,useReducer:Km,useRef:jv,useState:function(){return Km(Xi)},useDebugValue:Wm,useDeferredValue:function(r,i){var o=hn();return Mt===null?Jm(o,r,i):Yv(o,Mt.memoizedState,r,i)},useTransition:function(){var r=Km(Xi)[0],i=hn().memoizedState;return[typeof r=="boolean"?r:vu(r),i]},useSyncExternalStore:Sv,useId:Jv,useHostTransitionStatus:ep,useFormState:Uv,useActionState:Uv,useOptimistic:function(r,i){var o=hn();return Mt!==null?Dv(o,Mt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Gm,useCacheRefresh:Zv};iE.useEffectEvent=Bv;function rp(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var ip={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Rr(),f=ka(u);f.payload=i,o!=null&&(f.callback=o),i=La(r,f,u),i!==null&&(fr(i,r,u),pu(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Rr(),f=ka(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=La(r,f,u),i!==null&&(fr(i,r,u),pu(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Rr(),u=ka(o);u.tag=2,i!=null&&(u.callback=i),i=La(r,u,o),i!==null&&(fr(i,r,o),pu(i,r,o))}};function aE(r,i,o,u,f,m,v){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,v):i.prototype&&i.prototype.isPureReactComponent?!ou(o,u)||!ou(f,m):!0}function sE(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&ip.enqueueReplaceState(i,i.state,null)}function Xs(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=E({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}function oE(r){ch(r)}function lE(r){console.error(r)}function uE(r){ch(r)}function Mh(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function cE(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ap(r,i,o){return o=ka(o),o.tag=3,o.payload={element:null},o.callback=function(){Mh(r,i)},o}function hE(r){return r=ka(r),r.tag=3,r}function fE(r,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){cE(i,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(r.callback=function(){cE(i,o,u),typeof f!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function YR(r,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Bo(i,o,f,!0),o=br.current,o!==null){switch(o.tag){case 31:case 13:return Hr===null?Gh():o.alternate===null&&on===0&&(on=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Eh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Np(r,u,f)),!1;case 22:return o.flags|=65536,u===Eh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Np(r,u,f)),!1}throw Error(a(435,o.tag))}return Np(r,u,f),Gh(),!1}if(gt)return i=br.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Am&&(r=Error(a(422),{cause:u}),cu(jr(r,o)))):(u!==Am&&(i=Error(a(423),{cause:u}),cu(jr(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=jr(u,o),f=ap(r.stateNode,u,f),Vm(r,f),on!==4&&(on=2)),!1;var m=Error(a(520),{cause:u});if(m=jr(m,o),Du===null?Du=[m]:Du.push(m),on!==4&&(on=2),i===null)return!0;u=jr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=ap(o.stateNode,u,r),Vm(o,r),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ha===null||!Ha.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=hE(f),fE(f,r,o,u),Vm(o,f),!1}o=o.return}while(o!==null);return!1}var sp=Error(a(461)),yn=!1;function Vn(r,i,o,u){i.child=r===null?gv(i,null,o,u):Ys(i,r.child,o,u)}function dE(r,i,o,u,f){o=o.render;var m=i.ref;if("ref"in u){var v={};for(var I in u)I!=="ref"&&(v[I]=u[I])}else v=u;return qs(i),u=Bm(r,i,o,v,m,f),I=Fm(),r!==null&&!yn?(Hm(r,i,f),Wi(r,i,f)):(gt&&I&&bm(i),i.flags|=1,Vn(r,i,u,f),i.child)}function mE(r,i,o,u,f){if(r===null){var m=o.type;return typeof m=="function"&&!vm(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,pE(r,i,m,u,f)):(r=mh(o.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!mp(r,f)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:ou,o(v,u)&&r.ref===i.ref)return Wi(r,i,f)}return i.flags|=1,r=Gi(m,u),r.ref=i.ref,r.return=i,i.child=r}function pE(r,i,o,u,f){if(r!==null){var m=r.memoizedProps;if(ou(m,u)&&r.ref===i.ref)if(yn=!1,i.pendingProps=u=m,mp(r,f))(r.flags&131072)!==0&&(yn=!0);else return i.lanes=r.lanes,Wi(r,i,f)}return op(r,i,o,u,f)}function gE(r,i,o,u){var f=u.children,m=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,r!==null){for(u=i.child=r.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,i.child=null;return yE(r,i,m,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&_h(i,m!==null?m.cachePool:null),m!==null?vv(i,m):Lm(),Ev(i);else return u=i.lanes=536870912,yE(r,i,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(_h(i,m.cachePool),vv(i,m),ja(),i.memoizedState=null):(r!==null&&_h(i,null),Lm(),ja());return Vn(r,i,f,o),i.child}function bu(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function yE(r,i,o,u,f){var m=xm();return m=m===null?null:{parent:pn._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},r!==null&&_h(i,null),Lm(),Ev(i),r!==null&&Bo(r,i,u,!0),i.childLanes=f,null}function Ph(r,i){return i=kh({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function _E(r,i,o){return Ys(i,r.child,null,o),r=Ph(i,i.pendingProps),r.flags|=2,Sr(i),i.memoizedState=null,r}function QR(r,i,o){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(gt){if(u.mode==="hidden")return r=Ph(i,u),i.lanes=536870912,bu(null,r);if(jm(i),(r=Gt)?(r=NT(r,Fr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:xa!==null?{id:Ri,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},o=tv(r),o.return=i,i.child=o,Mn=i,Gt=null)):r=null,r===null)throw Ma(i);return i.lanes=536870912,null}return Ph(i,u)}var m=r.memoizedState;if(m!==null){var v=m.dehydrated;if(jm(i),f)if(i.flags&256)i.flags&=-257,i=_E(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(a(558));else if(yn||Bo(r,i,o,!1),f=(o&r.childLanes)!==0,yn||f){if(u=jt,u!==null&&(v=H(u,o),v!==0&&v!==m.retryLane))throw m.retryLane=v,zs(r,v),fr(u,r,v),sp;Gh(),i=_E(r,i,o)}else r=m.treeContext,Gt=qr(v.nextSibling),Mn=i,gt=!0,Oa=null,Fr=!1,r!==null&&iv(i,r),i=Ph(i,u),i.flags|=4096;return i}return r=Gi(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Vh(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function op(r,i,o,u,f){return qs(i),o=Bm(r,i,o,u,void 0,f),u=Fm(),r!==null&&!yn?(Hm(r,i,f),Wi(r,i,f)):(gt&&u&&bm(i),i.flags|=1,Vn(r,i,o,f),i.child)}function vE(r,i,o,u,f,m){return qs(i),i.updateQueue=null,o=bv(i,u,o,f),Tv(r),u=Fm(),r!==null&&!yn?(Hm(r,i,m),Wi(r,i,m)):(gt&&u&&bm(i),i.flags|=1,Vn(r,i,o,m),i.child)}function EE(r,i,o,u,f){if(qs(i),i.stateNode===null){var m=Lo,v=o.contextType;typeof v=="object"&&v!==null&&(m=Pn(v)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ip,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},Mm(i),v=o.contextType,m.context=typeof v=="object"&&v!==null?Pn(v):Lo,m.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(rp(i,o,v,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&ip.enqueueReplaceState(m,m.state,null),yu(i,u,m,f),gu(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var I=i.memoizedProps,k=Xs(o,I);m.props=k;var W=m.context,se=o.contextType;v=Lo,typeof se=="object"&&se!==null&&(v=Pn(se));var he=o.getDerivedStateFromProps;se=typeof he=="function"||typeof m.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(I||W!==v)&&sE(i,m,u,v),Va=!1;var Z=i.memoizedState;m.state=Z,yu(i,u,m,f),gu(),W=i.memoizedState,I||Z!==W||Va?(typeof he=="function"&&(rp(i,o,he,u),W=i.memoizedState),(k=Va||aE(i,o,k,u,Z,W,v))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=W),m.props=u,m.state=W,m.context=v,u=k):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,Pm(r,i),v=i.memoizedProps,se=Xs(o,v),m.props=se,he=i.pendingProps,Z=m.context,W=o.contextType,k=Lo,typeof W=="object"&&W!==null&&(k=Pn(W)),I=o.getDerivedStateFromProps,(W=typeof I=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==he||Z!==k)&&sE(i,m,u,k),Va=!1,Z=i.memoizedState,m.state=Z,yu(i,u,m,f),gu();var ie=i.memoizedState;v!==he||Z!==ie||Va||r!==null&&r.dependencies!==null&&gh(r.dependencies)?(typeof I=="function"&&(rp(i,o,I,u),ie=i.memoizedState),(se=Va||aE(i,o,se,u,Z,ie,k)||r!==null&&r.dependencies!==null&&gh(r.dependencies))?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ie,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ie,k)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===r.memoizedProps&&Z===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&Z===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ie),m.props=u,m.state=ie,m.context=k,u=se):(typeof m.componentDidUpdate!="function"||v===r.memoizedProps&&Z===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&Z===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,Vh(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=Ys(i,r.child,null,f),i.child=Ys(i,null,o,f)):Vn(r,i,o,f),i.memoizedState=m.state,r=i.child):r=Wi(r,i,f),r}function TE(r,i,o,u){return Fs(),i.flags|=256,Vn(r,i,o,u),i.child}var lp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function up(r){return{baseLanes:r,cachePool:cv()}}function cp(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=wr),r}function bE(r,i,o){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=r!==null&&r.memoizedState===null?!1:(cn.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,r===null){if(gt){if(f?Ua(i):ja(),(r=Gt)?(r=NT(r,Fr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:xa!==null?{id:Ri,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},o=tv(r),o.return=i,i.child=o,Mn=i,Gt=null)):r=null,r===null)throw Ma(i);return $p(r)?i.lanes=32:i.lanes=536870912,null}var I=u.children;return u=u.fallback,f?(ja(),f=i.mode,I=kh({mode:"hidden",children:I},f),u=Bs(u,f,o,null),I.return=i,u.return=i,I.sibling=u,i.child=I,u=i.child,u.memoizedState=up(o),u.childLanes=cp(r,v,o),i.memoizedState=lp,bu(null,u)):(Ua(i),hp(i,I))}var k=r.memoizedState;if(k!==null&&(I=k.dehydrated,I!==null)){if(m)i.flags&256?(Ua(i),i.flags&=-257,i=fp(r,i,o)):i.memoizedState!==null?(ja(),i.child=r.child,i.flags|=128,i=null):(ja(),I=u.fallback,f=i.mode,u=kh({mode:"visible",children:u.children},f),I=Bs(I,f,o,null),I.flags|=2,u.return=i,I.return=i,u.sibling=I,i.child=u,Ys(i,r.child,null,o),u=i.child,u.memoizedState=up(o),u.childLanes=cp(r,v,o),i.memoizedState=lp,i=bu(null,u));else if(Ua(i),$p(I)){if(v=I.nextSibling&&I.nextSibling.dataset,v)var W=v.dgst;v=W,u=Error(a(419)),u.stack="",u.digest=v,cu({value:u,source:null,stack:null}),i=fp(r,i,o)}else if(yn||Bo(r,i,o,!1),v=(o&r.childLanes)!==0,yn||v){if(v=jt,v!==null&&(u=H(v,o),u!==0&&u!==k.retryLane))throw k.retryLane=u,zs(r,u),fr(v,r,u),sp;Gp(I)||Gh(),i=fp(r,i,o)}else Gp(I)?(i.flags|=192,i.child=r.child,i=null):(r=k.treeContext,Gt=qr(I.nextSibling),Mn=i,gt=!0,Oa=null,Fr=!1,r!==null&&iv(i,r),i=hp(i,u.children),i.flags|=4096);return i}return f?(ja(),I=u.fallback,f=i.mode,k=r.child,W=k.sibling,u=Gi(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,W!==null?I=Gi(W,I):(I=Bs(I,f,o,null),I.flags|=2),I.return=i,u.return=i,u.sibling=I,i.child=u,bu(null,u),u=i.child,I=r.child.memoizedState,I===null?I=up(o):(f=I.cachePool,f!==null?(k=pn._currentValue,f=f.parent!==k?{parent:k,pool:k}:f):f=cv(),I={baseLanes:I.baseLanes|o,cachePool:f}),u.memoizedState=I,u.childLanes=cp(r,v,o),i.memoizedState=lp,bu(r.child,u)):(Ua(i),o=r.child,r=o.sibling,o=Gi(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(v=i.deletions,v===null?(i.deletions=[r],i.flags|=16):v.push(r)),i.child=o,i.memoizedState=null,o)}function hp(r,i){return i=kh({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function kh(r,i){return r=Tr(22,r,null,i),r.lanes=0,r}function fp(r,i,o){return Ys(i,r.child,null,o),r=hp(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function SE(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),Cm(r.return,i,o)}function dp(r,i,o,u,f,m){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f,v.treeForkCount=m)}function AE(r,i,o){var u=i.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var v=cn.current,I=(v&2)!==0;if(I?(v=v&1|2,i.flags|=128):v&=1,oe(cn,v),Vn(r,i,u,o),u=gt?uu:0,!I&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&SE(r,o,i);else if(r.tag===19)SE(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&Ah(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),dp(i,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&Ah(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}dp(i,!0,o,null,m,u);break;case"together":dp(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Wi(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Fa|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Bo(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=Gi(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Gi(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function mp(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&gh(r)))}function XR(r,i,o){switch(i.tag){case 3:Ke(i,i.stateNode.containerInfo),Pa(i,pn,r.memoizedState.cache),Fs();break;case 27:case 5:Yt(i);break;case 4:Ke(i,i.stateNode.containerInfo);break;case 10:Pa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,jm(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ua(i),i.flags|=128,null):(o&i.child.childLanes)!==0?bE(r,i,o):(Ua(i),r=Wi(r,i,o),r!==null?r.sibling:null);Ua(i);break;case 19:var f=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Bo(r,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return AE(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(cn,cn.current),u)break;return null;case 22:return i.lanes=0,gE(r,i,o,i.pendingProps);case 24:Pa(i,pn,r.memoizedState.cache)}return Wi(r,i,o)}function wE(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)yn=!0;else{if(!mp(r,o)&&(i.flags&128)===0)return yn=!1,XR(r,i,o);yn=(r.flags&131072)!==0}else yn=!1,gt&&(i.flags&1048576)!==0&&rv(i,uu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=$s(i.elementType),i.type=r,typeof r=="function")vm(r)?(u=Xs(r,u),i.tag=1,i=EE(null,i,r,u,o)):(i.tag=0,i=op(null,i,r,u,o));else{if(r!=null){var f=r.$$typeof;if(f===te){i.tag=11,i=dE(null,i,r,u,o);break e}else if(f===A){i.tag=14,i=mE(null,i,r,u,o);break e}}throw i=Ee(r)||r,Error(a(306,i,""))}}return i;case 0:return op(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=Xs(u,i.pendingProps),EE(r,i,u,f,o);case 3:e:{if(Ke(i,i.stateNode.containerInfo),r===null)throw Error(a(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,Pm(r,i),yu(i,u,null,o);var v=i.memoizedState;if(u=v.cache,Pa(i,pn,u),u!==m.cache&&Im(i,[pn],o,!0),gu(),u=v.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=TE(r,i,u,o);break e}else if(u!==f){f=jr(Error(a(424)),i),cu(f),i=TE(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Gt=qr(r.firstChild),Mn=i,gt=!0,Oa=null,Fr=!0,o=gv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Fs(),u===f){i=Wi(r,i,o);break e}Vn(r,i,u,o)}i=i.child}return i;case 26:return Vh(r,i),r===null?(o=kT(i.type,null,i.pendingProps,null))?i.memoizedState=o:gt||(o=i.type,r=i.pendingProps,u=Jh(Te.current).createElement(o),u[ve]=i,u[Se]=r,kn(u,o,r),Ft(u),i.stateNode=u):i.memoizedState=kT(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Yt(i),r===null&&gt&&(u=i.stateNode=MT(i.type,i.pendingProps,Te.current),Mn=i,Fr=!0,f=Gt,Ka(i.type)?(Kp=f,Gt=qr(u.firstChild)):Gt=f),Vn(r,i,i.pendingProps.children,o),Vh(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&gt&&((f=u=Gt)&&(u=RC(u,i.type,i.pendingProps,Fr),u!==null?(i.stateNode=u,Mn=i,Gt=qr(u.firstChild),Fr=!1,f=!0):f=!1),f||Ma(i)),Yt(i),f=i.type,m=i.pendingProps,v=r!==null?r.memoizedProps:null,u=m.children,Fp(f,m)?u=null:v!==null&&Fp(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Bm(r,i,BR,null,null,o),Lu._currentValue=f),Vh(r,i),Vn(r,i,u,o),i.child;case 6:return r===null&&gt&&((r=o=Gt)&&(o=CC(o,i.pendingProps,Fr),o!==null?(i.stateNode=o,Mn=i,Gt=null,r=!0):r=!1),r||Ma(i)),null;case 13:return bE(r,i,o);case 4:return Ke(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Ys(i,null,u,o):Vn(r,i,u,o),i.child;case 11:return dE(r,i,i.type,i.pendingProps,o);case 7:return Vn(r,i,i.pendingProps,o),i.child;case 8:return Vn(r,i,i.pendingProps.children,o),i.child;case 12:return Vn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Pa(i,i.type,u.value),Vn(r,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,qs(i),f=Pn(f),u=u(f),i.flags|=1,Vn(r,i,u,o),i.child;case 14:return mE(r,i,i.type,i.pendingProps,o);case 15:return pE(r,i,i.type,i.pendingProps,o);case 19:return AE(r,i,o);case 31:return QR(r,i,o);case 22:return gE(r,i,o,i.pendingProps);case 24:return qs(i),u=Pn(pn),r===null?(f=xm(),f===null&&(f=jt,m=Dm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:u,cache:f},Mm(i),Pa(i,pn,f)):((r.lanes&o)!==0&&(Pm(r,i),yu(i,null,null,o),gu()),f=r.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Pa(i,pn,u)):(u=m.cache,Pa(i,pn,u),u!==f.cache&&Im(i,[pn],o,!0))),Vn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Ji(r){r.flags|=4}function pp(r,i,o,u,f){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(f&335544128)===f)if(r.stateNode.complete)r.flags|=8192;else if(JE())r.flags|=8192;else throw Ks=Eh,Om}else r.flags&=-16777217}function RE(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!BT(i))if(JE())r.flags|=8192;else throw Ks=Eh,Om}function Lh(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?zi():536870912,r.lanes|=i,Zo|=i)}function Su(r,i){if(!gt)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function $t(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function WR(r,i,o){var u=i.pendingProps;switch(Sm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(i),null;case 1:return $t(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Yi(pn),ot(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(zo(i)?Ji(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,wm())),$t(i),null;case 26:var f=i.type,m=i.memoizedState;return r===null?(Ji(i),m!==null?($t(i),RE(i,m)):($t(i),pp(i,f,null,u,o))):m?m!==r.memoizedState?(Ji(i),$t(i),RE(i,m)):($t(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&Ji(i),$t(i),pp(i,f,r,u,o)),null;case 27:if(In(i),o=Te.current,f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Ji(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return $t(i),null}r=ce.current,zo(i)?av(i):(r=MT(f,u,o),i.stateNode=r,Ji(i))}return $t(i),null;case 5:if(In(i),f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Ji(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return $t(i),null}if(m=ce.current,zo(i))av(i);else{var v=Jh(Te.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}m[ve]=i,m[Se]=u;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=m;e:switch(kn(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ji(i)}}return $t(i),pp(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Ji(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(r=Te.current,zo(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,f=Mn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[ve]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||bT(r.nodeValue,o)),r||Ma(i,!0)}else r=Jh(r).createTextNode(u),r[ve]=i,i.stateNode=r}return $t(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=zo(i),o!==null){if(r===null){if(!u)throw Error(a(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(557));r[ve]=i}else Fs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),r=!1}else o=wm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(Sr(i),i):(Sr(i),null);if((i.flags&128)!==0)throw Error(a(558))}return $t(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=zo(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[ve]=i}else Fs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$t(i),f=!1}else f=wm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Sr(i),i):(Sr(i),null)}return Sr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),Lh(i,i.updateQueue),$t(i),null);case 4:return ot(),r===null&&Lp(i.stateNode.containerInfo),$t(i),null;case 10:return Yi(i.type),$t(i),null;case 19:if(q(cn),u=i.memoizedState,u===null)return $t(i),null;if(f=(i.flags&128)!==0,m=u.rendering,m===null)if(f)Su(u,!1);else{if(on!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=Ah(r),m!==null){for(i.flags|=128,Su(u,!1),r=m.updateQueue,i.updateQueue=r,Lh(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)ev(o,r),o=o.sibling;return oe(cn,cn.current&1|2),gt&&$i(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&Ye()>Fh&&(i.flags|=128,f=!0,Su(u,!1),i.lanes=4194304)}else{if(!f)if(r=Ah(m),r!==null){if(i.flags|=128,f=!0,r=r.updateQueue,i.updateQueue=r,Lh(i,r),Su(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!gt)return $t(i),null}else 2*Ye()-u.renderingStartTime>Fh&&o!==536870912&&(i.flags|=128,f=!0,Su(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(r=u.last,r!==null?r.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Ye(),r.sibling=null,o=cn.current,oe(cn,f?o&1|2:o&1),gt&&$i(i,u.treeForkCount),r):($t(i),null);case 22:case 23:return Sr(i),Um(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&($t(i),i.subtreeFlags&6&&(i.flags|=8192)):$t(i),o=i.updateQueue,o!==null&&Lh(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&q(Gs),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Yi(pn),$t(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function JR(r,i){switch(Sm(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Yi(pn),ot(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return In(i),null;case 31:if(i.memoizedState!==null){if(Sr(i),i.alternate===null)throw Error(a(340));Fs()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(Sr(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Fs()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return q(cn),null;case 4:return ot(),null;case 10:return Yi(i.type),null;case 22:case 23:return Sr(i),Um(),r!==null&&q(Gs),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Yi(pn),null;case 25:return null;default:return null}}function CE(r,i){switch(Sm(i),i.tag){case 3:Yi(pn),ot();break;case 26:case 27:case 5:In(i);break;case 4:ot();break;case 31:i.memoizedState!==null&&Sr(i);break;case 13:Sr(i);break;case 19:q(cn);break;case 10:Yi(i.type);break;case 22:case 23:Sr(i),Um(),r!==null&&q(Gs);break;case 24:Yi(pn)}}function Au(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var m=o.create,v=o.inst;u=m(),v.destroy=u}o=o.next}while(o!==f)}}catch(I){It(i,i.return,I)}}function za(r,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var v=u.inst,I=v.destroy;if(I!==void 0){v.destroy=void 0,f=i;var k=o,W=I;try{W()}catch(se){It(f,k,se)}}}u=u.next}while(u!==m)}}catch(se){It(i,i.return,se)}}function IE(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{_v(i,o)}catch(u){It(r,r.return,u)}}}function DE(r,i,o){o.props=Xs(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){It(r,i,u)}}function wu(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){It(r,i,f)}}function Ii(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){It(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){It(r,i,f)}else o.current=null}function NE(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){It(r,r.return,f)}}function gp(r,i,o){try{var u=r.stateNode;EC(u,r.type,o,i),u[Se]=i}catch(f){It(r,r.return,f)}}function xE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ka(r.type)||r.tag===4}function yp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||xE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ka(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function _p(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Zr));else if(u!==4&&(u===27&&Ka(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(_p(r,i,o),r=r.sibling;r!==null;)_p(r,i,o),r=r.sibling}function Uh(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&Ka(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Uh(r,i,o),r=r.sibling;r!==null;)Uh(r,i,o),r=r.sibling}function OE(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);kn(i,u,o),i[ve]=r,i[Se]=o}catch(m){It(r,r.return,m)}}var Zi=!1,_n=!1,vp=!1,ME=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function ZR(r,i){if(r=r.containerInfo,zp=sf,r=G_(r),fm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,I=-1,k=-1,W=0,se=0,he=r,Z=null;t:for(;;){for(var ie;he!==o||f!==0&&he.nodeType!==3||(I=v+f),he!==m||u!==0&&he.nodeType!==3||(k=v+u),he.nodeType===3&&(v+=he.nodeValue.length),(ie=he.firstChild)!==null;)Z=he,he=ie;for(;;){if(he===r)break t;if(Z===o&&++W===f&&(I=v),Z===m&&++se===u&&(k=v),(ie=he.nextSibling)!==null)break;he=Z,Z=he.parentNode}he=ie}o=I===-1||k===-1?null:{start:I,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Bp={focusedElem:r,selectionRange:o},sf=!1,Nn=i;Nn!==null;)if(i=Nn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Nn=r;else for(;Nn!==null;){switch(i=Nn,m=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)f=r[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var xe=Xs(o.type,f);r=u.getSnapshotBeforeUpdate(xe,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(He){It(o,o.return,He)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)qp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":qp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,Nn=r;break}Nn=i.return}}function PE(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ta(r,o),u&4&&Au(5,o);break;case 1:if(ta(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(v){It(o,o.return,v)}else{var f=Xs(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(v){It(o,o.return,v)}}u&64&&IE(o),u&512&&wu(o,o.return);break;case 3:if(ta(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{_v(r,i)}catch(v){It(o,o.return,v)}}break;case 27:i===null&&u&4&&OE(o);case 26:case 5:ta(r,o),i===null&&u&4&&NE(o),u&512&&wu(o,o.return);break;case 12:ta(r,o);break;case 31:ta(r,o),u&4&&LE(r,o);break;case 13:ta(r,o),u&4&&UE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=lC.bind(null,o),IC(r,o))));break;case 22:if(u=o.memoizedState!==null||Zi,!u){i=i!==null&&i.memoizedState!==null||_n,f=Zi;var m=_n;Zi=u,(_n=i)&&!m?na(r,o,(o.subtreeFlags&8772)!==0):ta(r,o),Zi=f,_n=m}break;case 30:break;default:ta(r,o)}}function VE(r){var i=r.alternate;i!==null&&(r.alternate=null,VE(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&qt(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Zt=null,lr=!1;function ea(r,i,o){for(o=o.child;o!==null;)kE(r,i,o),o=o.sibling}function kE(r,i,o){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(pr,o)}catch{}switch(o.tag){case 26:_n||Ii(o,i),ea(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:_n||Ii(o,i);var u=Zt,f=lr;Ka(o.type)&&(Zt=o.stateNode,lr=!1),ea(r,i,o),Pu(o.stateNode),Zt=u,lr=f;break;case 5:_n||Ii(o,i);case 6:if(u=Zt,f=lr,Zt=null,ea(r,i,o),Zt=u,lr=f,Zt!==null)if(lr)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(o.stateNode)}catch(m){It(o,i,m)}else try{Zt.removeChild(o.stateNode)}catch(m){It(o,i,m)}break;case 18:Zt!==null&&(lr?(r=Zt,IT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),ol(r)):IT(Zt,o.stateNode));break;case 4:u=Zt,f=lr,Zt=o.stateNode.containerInfo,lr=!0,ea(r,i,o),Zt=u,lr=f;break;case 0:case 11:case 14:case 15:za(2,o,i),_n||za(4,o,i),ea(r,i,o);break;case 1:_n||(Ii(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&DE(o,i,u)),ea(r,i,o);break;case 21:ea(r,i,o);break;case 22:_n=(u=_n)||o.memoizedState!==null,ea(r,i,o),_n=u;break;default:ea(r,i,o)}}function LE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ol(r)}catch(o){It(i,i.return,o)}}}function UE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ol(r)}catch(o){It(i,i.return,o)}}function eC(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new ME),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new ME),i;default:throw Error(a(435,r.tag))}}function jh(r,i){var o=eC(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var f=uC.bind(null,r,u);u.then(f,f)}})}function ur(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=r,v=i,I=v;e:for(;I!==null;){switch(I.tag){case 27:if(Ka(I.type)){Zt=I.stateNode,lr=!1;break e}break;case 5:Zt=I.stateNode,lr=!1;break e;case 3:case 4:Zt=I.stateNode.containerInfo,lr=!0;break e}I=I.return}if(Zt===null)throw Error(a(160));kE(m,v,f),Zt=null,lr=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)jE(i,r),i=i.sibling}var ai=null;function jE(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:ur(i,r),cr(r),u&4&&(za(3,r,r.return),Au(3,r),za(5,r,r.return));break;case 1:ur(i,r),cr(r),u&512&&(_n||o===null||Ii(o,o.return)),u&64&&Zi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ai;if(ur(i,r),cr(r),u&512&&(_n||o===null||Ii(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Nt]||m[ve]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),kn(m,u,o),m[ve]=r,Ft(m),u=m;break e;case"link":var v=jT("link","href",f).get(u+(o.href||""));if(v){for(var I=0;I<v.length;I++)if(m=v[I],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(I,1);break t}}m=f.createElement(u),kn(m,u,o),f.head.appendChild(m);break;case"meta":if(v=jT("meta","content",f).get(u+(o.content||""))){for(I=0;I<v.length;I++)if(m=v[I],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(I,1);break t}}m=f.createElement(u),kn(m,u,o),f.head.appendChild(m);break;default:throw Error(a(468,u))}m[ve]=r,Ft(m),u=m}r.stateNode=u}else zT(f,r.type,r.stateNode);else r.stateNode=UT(f,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?zT(f,r.type,r.stateNode):UT(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&gp(r,r.memoizedProps,o.memoizedProps)}break;case 27:ur(i,r),cr(r),u&512&&(_n||o===null||Ii(o,o.return)),o!==null&&u&4&&gp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(ur(i,r),cr(r),u&512&&(_n||o===null||Ii(o,o.return)),r.flags&32){f=r.stateNode;try{or(f,"")}catch(xe){It(r,r.return,xe)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,gp(r,f,o!==null?o.memoizedProps:f)),u&1024&&(vp=!0);break;case 6:if(ur(i,r),cr(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(xe){It(r,r.return,xe)}}break;case 3:if(tf=null,f=ai,ai=Zh(i.containerInfo),ur(i,r),ai=f,cr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ol(i.containerInfo)}catch(xe){It(r,r.return,xe)}vp&&(vp=!1,zE(r));break;case 4:u=ai,ai=Zh(r.stateNode.containerInfo),ur(i,r),cr(r),ai=u;break;case 12:ur(i,r),cr(r);break;case 31:ur(i,r),cr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,jh(r,u)));break;case 13:ur(i,r),cr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Bh=Ye()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,jh(r,u)));break;case 22:f=r.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,W=Zi,se=_n;if(Zi=W||f,_n=se||k,ur(i,r),_n=se,Zi=W,cr(r),u&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||k||Zi||_n||Ws(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){k=o=i;try{if(m=k.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{I=k.stateNode;var he=k.memoizedProps.style,Z=he!=null&&he.hasOwnProperty("display")?he.display:null;I.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(xe){It(k,k.return,xe)}}}else if(i.tag===6){if(o===null){k=i;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch(xe){It(k,k.return,xe)}}}else if(i.tag===18){if(o===null){k=i;try{var ie=k.stateNode;f?DT(ie,!0):DT(k.stateNode,!1)}catch(xe){It(k,k.return,xe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,jh(r,o))));break;case 19:ur(i,r),cr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,jh(r,u)));break;case 30:break;case 21:break;default:ur(i,r),cr(r)}}function cr(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(xE(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,m=yp(r);Uh(r,m,f);break;case 5:var v=o.stateNode;o.flags&32&&(or(v,""),o.flags&=-33);var I=yp(r);Uh(r,I,v);break;case 3:case 4:var k=o.stateNode.containerInfo,W=yp(r);_p(r,W,k);break;default:throw Error(a(161))}}catch(se){It(r,r.return,se)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function zE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;zE(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function ta(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)PE(r,i.alternate,i),i=i.sibling}function Ws(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:za(4,i,i.return),Ws(i);break;case 1:Ii(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&DE(i,i.return,o),Ws(i);break;case 27:Pu(i.stateNode);case 26:case 5:Ii(i,i.return),Ws(i);break;case 22:i.memoizedState===null&&Ws(i);break;case 30:Ws(i);break;default:Ws(i)}r=r.sibling}}function na(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:na(f,m,o),Au(4,m);break;case 1:if(na(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(W){It(u,u.return,W)}if(u=m,f=u.updateQueue,f!==null){var I=u.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)yv(k[f],I)}catch(W){It(u,u.return,W)}}o&&v&64&&IE(m),wu(m,m.return);break;case 27:OE(m);case 26:case 5:na(f,m,o),o&&u===null&&v&4&&NE(m),wu(m,m.return);break;case 12:na(f,m,o);break;case 31:na(f,m,o),o&&v&4&&LE(f,m);break;case 13:na(f,m,o),o&&v&4&&UE(f,m);break;case 22:m.memoizedState===null&&na(f,m,o),wu(m,m.return);break;case 30:break;default:na(f,m,o)}i=i.sibling}}function Ep(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&hu(o))}function Tp(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&hu(r))}function si(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)BE(r,i,o,u),i=i.sibling}function BE(r,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:si(r,i,o,u),f&2048&&Au(9,i);break;case 1:si(r,i,o,u);break;case 3:si(r,i,o,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&hu(r)));break;case 12:if(f&2048){si(r,i,o,u),r=i.stateNode;try{var m=i.memoizedProps,v=m.id,I=m.onPostCommit;typeof I=="function"&&I(v,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(k){It(i,i.return,k)}}else si(r,i,o,u);break;case 31:si(r,i,o,u);break;case 13:si(r,i,o,u);break;case 23:break;case 22:m=i.stateNode,v=i.alternate,i.memoizedState!==null?m._visibility&2?si(r,i,o,u):Ru(r,i):m._visibility&2?si(r,i,o,u):(m._visibility|=2,Xo(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Ep(v,i);break;case 24:si(r,i,o,u),f&2048&&Tp(i.alternate,i);break;default:si(r,i,o,u)}}function Xo(r,i,o,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=r,v=i,I=o,k=u,W=v.flags;switch(v.tag){case 0:case 11:case 15:Xo(m,v,I,k,f),Au(8,v);break;case 23:break;case 22:var se=v.stateNode;v.memoizedState!==null?se._visibility&2?Xo(m,v,I,k,f):Ru(m,v):(se._visibility|=2,Xo(m,v,I,k,f)),f&&W&2048&&Ep(v.alternate,v);break;case 24:Xo(m,v,I,k,f),f&&W&2048&&Tp(v.alternate,v);break;default:Xo(m,v,I,k,f)}i=i.sibling}}function Ru(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,f=u.flags;switch(u.tag){case 22:Ru(o,u),f&2048&&Ep(u.alternate,u);break;case 24:Ru(o,u),f&2048&&Tp(u.alternate,u);break;default:Ru(o,u)}i=i.sibling}}var Cu=8192;function Wo(r,i,o){if(r.subtreeFlags&Cu)for(r=r.child;r!==null;)FE(r,i,o),r=r.sibling}function FE(r,i,o){switch(r.tag){case 26:Wo(r,i,o),r.flags&Cu&&r.memoizedState!==null&&zC(o,ai,r.memoizedState,r.memoizedProps);break;case 5:Wo(r,i,o);break;case 3:case 4:var u=ai;ai=Zh(r.stateNode.containerInfo),Wo(r,i,o),ai=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Cu,Cu=16777216,Wo(r,i,o),Cu=u):Wo(r,i,o));break;default:Wo(r,i,o)}}function HE(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Iu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Nn=u,GE(u,r)}HE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qE(r),r=r.sibling}function qE(r){switch(r.tag){case 0:case 11:case 15:Iu(r),r.flags&2048&&za(9,r,r.return);break;case 3:Iu(r);break;case 12:Iu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,zh(r)):Iu(r);break;default:Iu(r)}}function zh(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Nn=u,GE(u,r)}HE(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:za(8,i,i.return),zh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,zh(i));break;default:zh(i)}r=r.sibling}}function GE(r,i){for(;Nn!==null;){var o=Nn;switch(o.tag){case 0:case 11:case 15:za(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:hu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Nn=u;else e:for(o=r;Nn!==null;){u=Nn;var f=u.sibling,m=u.return;if(VE(u),u===o){Nn=null;break e}if(f!==null){f.return=m,Nn=f;break e}Nn=m}}}var tC={getCacheForType:function(r){var i=Pn(pn),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return Pn(pn).controller.signal}},nC=typeof WeakMap=="function"?WeakMap:Map,St=0,jt=null,lt=null,ht=0,Ct=0,Ar=null,Ba=!1,Jo=!1,bp=!1,ra=0,on=0,Fa=0,Js=0,Sp=0,wr=0,Zo=0,Du=null,hr=null,Ap=!1,Bh=0,$E=0,Fh=1/0,Hh=null,Ha=null,An=0,qa=null,el=null,ia=0,wp=0,Rp=null,KE=null,Nu=0,Cp=null;function Rr(){return(St&2)!==0&&ht!==0?ht&-ht:Y.T!==null?Mp():_e()}function YE(){if(wr===0)if((ht&536870912)===0||gt){var r=pi;pi<<=1,(pi&3932160)===0&&(pi=262144),wr=r}else wr=536870912;return r=br.current,r!==null&&(r.flags|=32),wr}function fr(r,i,o){(r===jt&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)&&(tl(r,0),Ga(r,ht,wr,!1)),gi(r,o),((St&2)===0||r!==jt)&&(r===jt&&((St&2)===0&&(Js|=o),on===4&&Ga(r,ht,wr,!1)),Di(r))}function QE(r,i,o){if((St&6)!==0)throw Error(a(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||yr(r,i),f=u?aC(r,i):Dp(r,i,!0),m=u;do{if(f===0){Jo&&!u&&Ga(r,i,0,!1);break}else{if(o=r.current.alternate,m&&!rC(o)){f=Dp(r,i,!1),m=!1;continue}if(f===2){if(m=i,r.errorRecoveryDisabledLanes&m)var v=0;else v=r.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var I=r;f=Du;var k=I.current.memoizedState.isDehydrated;if(k&&(tl(I,v).flags|=256),v=Dp(I,v,!1),v!==2){if(bp&&!k){I.errorRecoveryDisabledLanes|=m,Js|=m,f=4;break e}m=hr,hr=f,m!==null&&(hr===null?hr=m:hr.push.apply(hr,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){tl(r,0),Ga(r,i,0,!0);break}e:{switch(u=r,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ga(u,i,wr,!Ba);break e;case 2:hr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Bh+300-Ye(),10<f)){if(Ga(u,i,wr,!Ba),gr(u,0,!0)!==0)break e;ia=i,u.timeoutHandle=RT(XE.bind(null,u,o,hr,Hh,Ap,i,wr,Js,Zo,Ba,m,"Throttled",-0,0),f);break e}XE(u,o,hr,Hh,Ap,i,wr,Js,Zo,Ba,m,null,-0,0)}}break}while(!0);Di(r)}function XE(r,i,o,u,f,m,v,I,k,W,se,he,Z,ie){if(r.timeoutHandle=-1,he=i.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zr},FE(i,m,he);var xe=(m&62914560)===m?Bh-Ye():(m&4194048)===m?$E-Ye():0;if(xe=BC(he,xe),xe!==null){ia=m,r.cancelPendingCommit=xe(iT.bind(null,r,i,m,o,u,f,v,I,k,se,he,null,Z,ie)),Ga(r,m,v,!W);return}}iT(r,i,m,o,u,f,v,I,k)}function rC(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!Er(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ga(r,i,o,u){i&=~Sp,i&=~Js,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var m=31-Xt(f),v=1<<m;u[m]=-1,f&=~v}o!==0&&Bi(r,o,i)}function qh(){return(St&6)===0?(xu(0),!1):!0}function Ip(){if(lt!==null){if(Ct===0)var r=lt.return;else r=lt,Ki=Hs=null,qm(r),Go=null,du=0,r=lt;for(;r!==null;)CE(r.alternate,r),r=r.return;lt=null}}function tl(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,SC(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),ia=0,Ip(),jt=r,lt=o=Gi(r.current,null),ht=i,Ct=0,Ar=null,Ba=!1,Jo=yr(r,i),bp=!1,Zo=wr=Sp=Js=Fa=on=0,hr=Du=null,Ap=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-Xt(u),m=1<<f;i|=r[f],u&=~m}return ra=i,hh(),o}function WE(r,i){et=null,Y.H=Tu,i===qo||i===vh?(i=dv(),Ct=3):i===Om?(i=dv(),Ct=4):Ct=i===sp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ar=i,lt===null&&(on=1,Mh(r,jr(i,r.current)))}function JE(){var r=br.current;return r===null?!0:(ht&4194048)===ht?Hr===null:(ht&62914560)===ht||(ht&536870912)!==0?r===Hr:!1}function ZE(){var r=Y.H;return Y.H=Tu,r===null?Tu:r}function eT(){var r=Y.A;return Y.A=tC,r}function Gh(){on=4,Ba||(ht&4194048)!==ht&&br.current!==null||(Jo=!0),(Fa&134217727)===0&&(Js&134217727)===0||jt===null||Ga(jt,ht,wr,!1)}function Dp(r,i,o){var u=St;St|=2;var f=ZE(),m=eT();(jt!==r||ht!==i)&&(Hh=null,tl(r,i)),i=!1;var v=on;e:do try{if(Ct!==0&&lt!==null){var I=lt,k=Ar;switch(Ct){case 8:Ip(),v=6;break e;case 3:case 2:case 9:case 6:br.current===null&&(i=!0);var W=Ct;if(Ct=0,Ar=null,nl(r,I,k,W),o&&Jo){v=0;break e}break;default:W=Ct,Ct=0,Ar=null,nl(r,I,k,W)}}iC(),v=on;break}catch(se){WE(r,se)}while(!0);return i&&r.shellSuspendCounter++,Ki=Hs=null,St=u,Y.H=f,Y.A=m,lt===null&&(jt=null,ht=0,hh()),v}function iC(){for(;lt!==null;)tT(lt)}function aC(r,i){var o=St;St|=2;var u=ZE(),f=eT();jt!==r||ht!==i?(Hh=null,Fh=Ye()+500,tl(r,i)):Jo=yr(r,i);e:do try{if(Ct!==0&&lt!==null){i=lt;var m=Ar;t:switch(Ct){case 1:Ct=0,Ar=null,nl(r,i,m,1);break;case 2:case 9:if(hv(m)){Ct=0,Ar=null,nT(i);break}i=function(){Ct!==2&&Ct!==9||jt!==r||(Ct=7),Di(r)},m.then(i,i);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:hv(m)?(Ct=0,Ar=null,nT(i)):(Ct=0,Ar=null,nl(r,i,m,7));break;case 5:var v=null;switch(lt.tag){case 26:v=lt.memoizedState;case 5:case 27:var I=lt;if(v?BT(v):I.stateNode.complete){Ct=0,Ar=null;var k=I.sibling;if(k!==null)lt=k;else{var W=I.return;W!==null?(lt=W,$h(W)):lt=null}break t}}Ct=0,Ar=null,nl(r,i,m,5);break;case 6:Ct=0,Ar=null,nl(r,i,m,6);break;case 8:Ip(),on=6;break e;default:throw Error(a(462))}}sC();break}catch(se){WE(r,se)}while(!0);return Ki=Hs=null,Y.H=u,Y.A=f,St=o,lt!==null?0:(jt=null,ht=0,hh(),on)}function sC(){for(;lt!==null&&!Rt();)tT(lt)}function tT(r){var i=wE(r.alternate,r,ra);r.memoizedProps=r.pendingProps,i===null?$h(r):lt=i}function nT(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=vE(o,i,i.pendingProps,i.type,void 0,ht);break;case 11:i=vE(o,i,i.pendingProps,i.type.render,i.ref,ht);break;case 5:qm(i);default:CE(o,i),i=lt=ev(i,ra),i=wE(o,i,ra)}r.memoizedProps=r.pendingProps,i===null?$h(r):lt=i}function nl(r,i,o,u){Ki=Hs=null,qm(i),Go=null,du=0;var f=i.return;try{if(YR(r,f,i,o,ht)){on=1,Mh(r,jr(o,r.current)),lt=null;return}}catch(m){if(f!==null)throw lt=f,m;on=1,Mh(r,jr(o,r.current)),lt=null;return}i.flags&32768?(gt||u===1?r=!0:Jo||(ht&536870912)!==0?r=!1:(Ba=r=!0,(u===2||u===9||u===3||u===6)&&(u=br.current,u!==null&&u.tag===13&&(u.flags|=16384))),rT(i,r)):$h(i)}function $h(r){var i=r;do{if((i.flags&32768)!==0){rT(i,Ba);return}r=i.return;var o=WR(i.alternate,i,ra);if(o!==null){lt=o;return}if(i=i.sibling,i!==null){lt=i;return}lt=i=r}while(i!==null);on===0&&(on=5)}function rT(r,i){do{var o=JR(r.alternate,r);if(o!==null){o.flags&=32767,lt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){lt=r;return}lt=r=o}while(r!==null);on=6,lt=null}function iT(r,i,o,u,f,m,v,I,k){r.cancelPendingCommit=null;do Kh();while(An!==0);if((St&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=ym,Ql(r,o,m,v,I,k),r===jt&&(lt=jt=null,ht=0),el=i,qa=r,ia=o,wp=m,Rp=f,KE=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,cC(an,function(){return uT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,f=de.p,de.p=2,v=St,St|=4;try{ZR(r,i,o)}finally{St=v,de.p=f,Y.T=u}}An=1,aT(),sT(),oT()}}function aT(){if(An===1){An=0;var r=qa,i=el,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var u=de.p;de.p=2;var f=St;St|=4;try{jE(i,r);var m=Bp,v=G_(r.containerInfo),I=m.focusedElem,k=m.selectionRange;if(v!==I&&I&&I.ownerDocument&&q_(I.ownerDocument.documentElement,I)){if(k!==null&&fm(I)){var W=k.start,se=k.end;if(se===void 0&&(se=W),"selectionStart"in I)I.selectionStart=W,I.selectionEnd=Math.min(se,I.value.length);else{var he=I.ownerDocument||document,Z=he&&he.defaultView||window;if(Z.getSelection){var ie=Z.getSelection(),xe=I.textContent.length,He=Math.min(k.start,xe),Vt=k.end===void 0?He:Math.min(k.end,xe);!ie.extend&&He>Vt&&(v=Vt,Vt=He,He=v);var G=H_(I,He),z=H_(I,Vt);if(G&&z&&(ie.rangeCount!==1||ie.anchorNode!==G.node||ie.anchorOffset!==G.offset||ie.focusNode!==z.node||ie.focusOffset!==z.offset)){var X=he.createRange();X.setStart(G.node,G.offset),ie.removeAllRanges(),He>Vt?(ie.addRange(X),ie.extend(z.node,z.offset)):(X.setEnd(z.node,z.offset),ie.addRange(X))}}}}for(he=[],ie=I;ie=ie.parentNode;)ie.nodeType===1&&he.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<he.length;I++){var le=he[I];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}sf=!!zp,Bp=zp=null}finally{St=f,de.p=u,Y.T=o}}r.current=i,An=2}}function sT(){if(An===2){An=0;var r=qa,i=el,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var u=de.p;de.p=2;var f=St;St|=4;try{PE(r,i.alternate,i)}finally{St=f,de.p=u,Y.T=o}}An=3}}function oT(){if(An===4||An===3){An=0,je();var r=qa,i=el,o=ia,u=KE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?An=5:(An=0,el=qa=null,lT(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Ha=null),me(o),i=i.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(pr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=Y.T,f=de.p,de.p=2,Y.T=null;try{for(var m=r.onRecoverableError,v=0;v<u.length;v++){var I=u[v];m(I.value,{componentStack:I.stack})}}finally{Y.T=i,de.p=f}}(ia&3)!==0&&Kh(),Di(r),f=r.pendingLanes,(o&261930)!==0&&(f&42)!==0?r===Cp?Nu++:(Nu=0,Cp=r):Nu=0,xu(0)}}function lT(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,hu(i)))}function Kh(){return aT(),sT(),oT(),uT()}function uT(){if(An!==5)return!1;var r=qa,i=wp;wp=0;var o=me(ia),u=Y.T,f=de.p;try{de.p=32>o?32:o,Y.T=null,o=Rp,Rp=null;var m=qa,v=ia;if(An=0,el=qa=null,ia=0,(St&6)!==0)throw Error(a(331));var I=St;if(St|=4,qE(m.current),BE(m,m.current,v,o),St=I,xu(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(pr,m)}catch{}return!0}finally{de.p=f,Y.T=u,lT(r,i)}}function cT(r,i,o){i=jr(o,i),i=ap(r.stateNode,i,2),r=La(r,i,2),r!==null&&(gi(r,2),Di(r))}function It(r,i,o){if(r.tag===3)cT(r,r,o);else for(;i!==null;){if(i.tag===3){cT(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ha===null||!Ha.has(u))){r=jr(o,r),o=hE(2),u=La(i,o,2),u!==null&&(fE(o,u,i,r),gi(u,2),Di(u));break}}i=i.return}}function Np(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new nC;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(bp=!0,f.add(o),r=oC.bind(null,r,i,o),i.then(r,r))}function oC(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,jt===r&&(ht&o)===o&&(on===4||on===3&&(ht&62914560)===ht&&300>Ye()-Bh?(St&2)===0&&tl(r,0):Sp|=o,Zo===ht&&(Zo=0)),Di(r)}function hT(r,i){i===0&&(i=zi()),r=zs(r,i),r!==null&&(gi(r,i),Di(r))}function lC(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),hT(r,o)}function uC(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),hT(r,o)}function cC(r,i){return Fe(r,i)}var Yh=null,rl=null,xp=!1,Qh=!1,Op=!1,$a=0;function Di(r){r!==rl&&r.next===null&&(rl===null?Yh=rl=r:rl=rl.next=r),Qh=!0,xp||(xp=!0,fC())}function xu(r,i){if(!Op&&Qh){Op=!0;do for(var o=!1,u=Yh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var v=u.suspendedLanes,I=u.pingedLanes;m=(1<<31-Xt(42|r)+1)-1,m&=f&~(v&~I),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,pT(u,m))}else m=ht,m=gr(u,u===jt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||yr(u,m)||(o=!0,pT(u,m));u=u.next}while(o);Op=!1}}function hC(){fT()}function fT(){Qh=xp=!1;var r=0;$a!==0&&bC()&&(r=$a);for(var i=Ye(),o=null,u=Yh;u!==null;){var f=u.next,m=dT(u,i);m===0?(u.next=null,o===null?Yh=f:o.next=f,f===null&&(rl=o)):(o=u,(r!==0||(m&3)!==0)&&(Qh=!0)),u=f}An!==0&&An!==5||xu(r),$a!==0&&($a=0)}function dT(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var v=31-Xt(m),I=1<<v,k=f[v];k===-1?((I&o)===0||(I&u)!==0)&&(f[v]=Ao(I,i)):k<=i&&(r.expiredLanes|=I),m&=~I}if(i=jt,o=ht,o=gr(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Lt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||yr(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&Lt(u),me(o)){case 2:case 8:o=Qn;break;case 32:o=an;break;case 268435456:o=Rs;break;default:o=an}return u=mT.bind(null,r),o=Fe(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&Lt(u),r.callbackPriority=2,r.callbackNode=null,2}function mT(r,i){if(An!==0&&An!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Kh()&&r.callbackNode!==o)return null;var u=ht;return u=gr(r,r===jt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(QE(r,u,i),dT(r,Ye()),r.callbackNode!=null&&r.callbackNode===o?mT.bind(null,r):null)}function pT(r,i){if(Kh())return null;QE(r,i,!0)}function fC(){AC(function(){(St&6)!==0?Fe(rr,hC):fT()})}function Mp(){if($a===0){var r=Fo;r===0&&(r=Wn,Wn<<=1,(Wn&261888)===0&&(Wn=256)),$a=r}return $a}function gT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Co(""+r)}function yT(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function dC(r,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var m=gT((f[Se]||null).action),v=u.submitter;v&&(i=(i=v[Se]||null)?gT(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var I=new bi("action","action",null,u,f);r.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($a!==0){var k=v?yT(f,v):new FormData(f);Zm(o,{pending:!0,data:k,method:f.method,action:m},null,k)}}else typeof m=="function"&&(I.preventDefault(),k=v?yT(f,v):new FormData(f),Zm(o,{pending:!0,data:k,method:f.method,action:m},m,k))},currentTarget:f}]})}}for(var Pp=0;Pp<gm.length;Pp++){var Vp=gm[Pp],mC=Vp.toLowerCase(),pC=Vp[0].toUpperCase()+Vp.slice(1);ii(mC,"on"+pC)}ii(Y_,"onAnimationEnd"),ii(Q_,"onAnimationIteration"),ii(X_,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(xR,"onTransitionRun"),ii(OR,"onTransitionStart"),ii(MR,"onTransitionCancel"),ii(W_,"onTransitionEnd"),Fn("onMouseEnter",["mouseout","mouseover"]),Fn("onMouseLeave",["mouseout","mouseover"]),Fn("onPointerEnter",["pointerout","pointerover"]),Fn("onPointerLeave",["pointerout","pointerover"]),ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function _T(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var v=u.length-1;0<=v;v--){var I=u[v],k=I.instance,W=I.currentTarget;if(I=I.listener,k!==m&&f.isPropagationStopped())break e;m=I,f.currentTarget=W;try{m(f)}catch(se){ch(se)}f.currentTarget=null,m=k}else for(v=0;v<u.length;v++){if(I=u[v],k=I.instance,W=I.currentTarget,I=I.listener,k!==m&&f.isPropagationStopped())break e;m=I,f.currentTarget=W;try{m(f)}catch(se){ch(se)}f.currentTarget=null,m=k}}}}function ut(r,i){var o=i[qe];o===void 0&&(o=i[qe]=new Set);var u=r+"__bubble";o.has(u)||(vT(i,r,2,!1),o.add(u))}function kp(r,i,o){var u=0;i&&(u|=4),vT(o,r,u,i)}var Xh="_reactListening"+Math.random().toString(36).slice(2);function Lp(r){if(!r[Xh]){r[Xh]=!0,ir.forEach(function(o){o!=="selectionchange"&&(gC.has(o)||kp(o,!1,r),kp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Xh]||(i[Xh]=!0,kp("selectionchange",!1,i))}}function vT(r,i,o,u){switch(YT(i)){case 2:var f=qC;break;case 8:f=GC;break;default:f=Jp}o=f.bind(null,i,o,r),f=void 0,!Os||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function Up(r,i,o,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var I=u.stateNode.containerInfo;if(I===f)break;if(v===4)for(v=u.return;v!==null;){var k=v.tag;if((k===3||k===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;I!==null;){if(v=zt(I),v===null)return;if(k=v.tag,k===5||k===6||k===26||k===27){u=m=v;continue e}I=I.parentNode}}u=u.return}Ca(function(){var W=m,se=Vr(o),he=[];e:{var Z=J_.get(r);if(Z!==void 0){var ie=bi,xe=r;switch(r){case"keypress":if(Ps(o)===0)break e;case"keydown":case"keyup":ie=oh;break;case"focusin":xe="focus",ie=ks;break;case"focusout":xe="blur",ie=ks;break;case"beforeblur":case"afterblur":ie=ks;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Jc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=y;break;case Y_:case Q_:case X_:ie=eh;break;case W_:ie=D;break;case"scroll":case"scrollend":ie=nu;break;case"wheel":ie=re;break;case"copy":case"cut":case"paste":ie=th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=qi;break;case"toggle":case"beforetoggle":ie=Ze}var He=(i&4)!==0,Vt=!He&&(r==="scroll"||r==="scrollend"),G=He?Z!==null?Z+"Capture":null:Z;He=[];for(var z=W,X;z!==null;){var le=z;if(X=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||X===null||G===null||(le=ei(z,G),le!=null&&He.push(Mu(z,le,X))),Vt)break;z=z.return}0<He.length&&(Z=new ie(Z,xe,null,o,se),he.push({event:Z,listeners:He}))}}if((i&7)===0){e:{if(Z=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",Z&&o!==Zl&&(xe=o.relatedTarget||o.fromElement)&&(zt(xe)||xe[De]))break e;if((ie||Z)&&(Z=se.window===se?se:(Z=se.ownerDocument)?Z.defaultView||Z.parentWindow:window,ie?(xe=o.relatedTarget||o.toElement,ie=W,xe=xe?zt(xe):null,xe!==null&&(Vt=l(xe),He=xe.tag,xe!==Vt||He!==5&&He!==27&&He!==6)&&(xe=null)):(ie=null,xe=W),ie!==xe)){if(He=ru,le="onMouseLeave",G="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(He=qi,le="onPointerLeave",G="onPointerEnter",z="pointer"),Vt=ie==null?Z:Bt(ie),X=xe==null?Z:Bt(xe),Z=new He(le,z+"leave",ie,o,se),Z.target=Vt,Z.relatedTarget=X,le=null,zt(se)===W&&(He=new He(G,z+"enter",xe,o,se),He.target=X,He.relatedTarget=Vt,le=He),Vt=le,ie&&xe)t:{for(He=yC,G=ie,z=xe,X=0,le=G;le;le=He(le))X++;le=0;for(var ze=z;ze;ze=He(ze))le++;for(;0<X-le;)G=He(G),X--;for(;0<le-X;)z=He(z),le--;for(;X--;){if(G===z||z!==null&&G===z.alternate){He=G;break t}G=He(G),z=He(z)}He=null}else He=null;ie!==null&&ET(he,Z,ie,He,!1),xe!==null&&Vt!==null&&ET(he,Vt,xe,He,!0)}}e:{if(Z=W?Bt(W):window,ie=Z.nodeName&&Z.nodeName.toLowerCase(),ie==="select"||ie==="input"&&Z.type==="file")var _t=L_;else if(V_(Z))if(U_)_t=IR;else{_t=RR;var Oe=wR}else ie=Z.nodeName,!ie||ie.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?W&&Ro(W.elementType)&&(_t=L_):_t=CR;if(_t&&(_t=_t(r,W))){k_(he,_t,o,se);break e}Oe&&Oe(r,Z,W),r==="focusout"&&W&&Z.type==="number"&&W.memoizedProps.value!=null&&Xl(Z,"number",Z.value)}switch(Oe=W?Bt(W):window,r){case"focusin":(V_(Oe)||Oe.contentEditable==="true")&&(Po=Oe,dm=W,lu=null);break;case"focusout":lu=dm=Po=null;break;case"mousedown":mm=!0;break;case"contextmenu":case"mouseup":case"dragend":mm=!1,$_(he,o,se);break;case"selectionchange":if(NR)break;case"keydown":case"keyup":$_(he,o,se)}var rt;if(bt)e:{switch(r){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Mo?Ls(r,o)&&(ft="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ft="onCompositionStart");ft&&(wi&&o.locale!=="ko"&&(Mo||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Mo&&(rt=tu()):(Ti=se,eu="value"in Ti?Ti.value:Ti.textContent,Mo=!0)),Oe=Wh(W,ft),0<Oe.length&&(ft=new Ai(ft,r,null,o,se),he.push({event:ft,listeners:Oe}),rt?ft.data=rt:(rt=Oo(o),rt!==null&&(ft.data=rt)))),(rt=Lr?TR(r,o):bR(r,o))&&(ft=Wh(W,"onBeforeInput"),0<ft.length&&(Oe=new Ai("onBeforeInput","beforeinput",null,o,se),he.push({event:Oe,listeners:ft}),Oe.data=rt)),dC(he,r,W,o,se)}_T(he,i)})}function Mu(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Wh(r,i){for(var o=i+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ei(r,o),f!=null&&u.unshift(Mu(r,f,m)),f=ei(r,i),f!=null&&u.push(Mu(r,f,m))),r.tag===3)return u;r=r.return}return[]}function yC(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function ET(r,i,o,u,f){for(var m=i._reactName,v=[];o!==null&&o!==u;){var I=o,k=I.alternate,W=I.stateNode;if(I=I.tag,k!==null&&k===u)break;I!==5&&I!==26&&I!==27||W===null||(k=W,f?(W=ei(o,m),W!=null&&v.unshift(Mu(o,W,k))):f||(W=ei(o,m),W!=null&&v.push(Mu(o,W,k)))),o=o.return}v.length!==0&&r.push({event:i,listeners:v})}var _C=/\r\n?/g,vC=/\u0000|\uFFFD/g;function TT(r){return(typeof r=="string"?r:""+r).replace(_C,`
`).replace(vC,"")}function bT(r,i){return i=TT(i),TT(r)===i}function Pt(r,i,o,u,f,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||or(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&or(r,""+u);break;case"className":mn(r,"class",u);break;case"tabIndex":mn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":mn(r,o,u);break;case"style":Jl(r,u,m);break;case"data":if(i!=="object"){mn(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Co(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&Pt(r,i,"name",f.name,f,null),Pt(r,i,"formEncType",f.formEncType,f,null),Pt(r,i,"formMethod",f.formMethod,f,null),Pt(r,i,"formTarget",f.formTarget,f,null)):(Pt(r,i,"encType",f.encType,f,null),Pt(r,i,"method",f.method,f,null),Pt(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Co(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Zr);break;case"onScroll":u!=null&&ut("scroll",r);break;case"onScrollEnd":u!=null&&ut("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Co(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":ut("beforetoggle",r),ut("toggle",r),en(r,"popover",u);break;case"xlinkActuate":xt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":en(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Wc.get(o)||o,en(r,o,u))}}function jp(r,i,o,u,f,m){switch(o){case"style":Jl(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof u=="string"?or(r,u):(typeof u=="number"||typeof u=="bigint")&&or(r,""+u);break;case"onScroll":u!=null&&ut("scroll",r);break;case"onScrollEnd":u!=null&&ut("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Zr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=r[Se]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):en(r,o,u)}}}function kn(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",r),ut("load",r);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Pt(r,i,m,v,o,null)}}f&&Pt(r,i,"srcSet",o.srcSet,o,null),u&&Pt(r,i,"src",o.src,o,null);return;case"input":ut("invalid",r);var I=m=v=f=null,k=null,W=null;for(u in o)if(o.hasOwnProperty(u)){var se=o[u];if(se!=null)switch(u){case"name":f=se;break;case"type":v=se;break;case"checked":k=se;break;case"defaultChecked":W=se;break;case"value":m=se;break;case"defaultValue":I=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,i));break;default:Pt(r,i,u,se,o,null)}}Yc(r,m,I,k,W,v,f,!1);return;case"select":ut("invalid",r),u=v=m=null;for(f in o)if(o.hasOwnProperty(f)&&(I=o[f],I!=null))switch(f){case"value":m=I;break;case"defaultValue":v=I;break;case"multiple":u=I;default:Pt(r,i,f,I,o,null)}i=m,o=v,r.multiple=!!u,i!=null?Sa(r,!!u,i,!1):o!=null&&Sa(r,!!u,o,!0);return;case"textarea":ut("invalid",r),m=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(I=o[v],I!=null))switch(v){case"value":u=I;break;case"defaultValue":f=I;break;case"children":m=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(a(91));break;default:Pt(r,i,v,I,o,null)}Aa(r,u,f,m);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(u=o[k],u!=null))switch(k){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Pt(r,i,k,u,o,null)}return;case"dialog":ut("beforetoggle",r),ut("toggle",r),ut("cancel",r),ut("close",r);break;case"iframe":case"object":ut("load",r);break;case"video":case"audio":for(u=0;u<Ou.length;u++)ut(Ou[u],r);break;case"image":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"embed":case"source":case"link":ut("error",r),ut("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(u=o[W],u!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Pt(r,i,W,u,o,null)}return;default:if(Ro(i)){for(se in o)o.hasOwnProperty(se)&&(u=o[se],u!==void 0&&jp(r,i,se,u,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(u=o[I],u!=null&&Pt(r,i,I,u,o,null))}function EC(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,I=null,k=null,W=null,se=null;for(ie in o){var he=o[ie];if(o.hasOwnProperty(ie)&&he!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":k=he;default:u.hasOwnProperty(ie)||Pt(r,i,ie,null,u,he)}}for(var Z in u){var ie=u[Z];if(he=o[Z],u.hasOwnProperty(Z)&&(ie!=null||he!=null))switch(Z){case"type":m=ie;break;case"name":f=ie;break;case"checked":W=ie;break;case"defaultChecked":se=ie;break;case"value":v=ie;break;case"defaultValue":I=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,i));break;default:ie!==he&&Pt(r,i,Z,ie,u,he)}}wo(r,v,I,k,W,se,m,f);return;case"select":ie=v=I=Z=null;for(m in o)if(k=o[m],o.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":ie=k;default:u.hasOwnProperty(m)||Pt(r,i,m,null,u,k)}for(f in u)if(m=u[f],k=o[f],u.hasOwnProperty(f)&&(m!=null||k!=null))switch(f){case"value":Z=m;break;case"defaultValue":I=m;break;case"multiple":v=m;default:m!==k&&Pt(r,i,f,m,u,k)}i=I,o=v,u=ie,Z!=null?Sa(r,!!o,Z,!1):!!u!=!!o&&(i!=null?Sa(r,!!o,i,!0):Sa(r,!!o,o?[]:"",!1));return;case"textarea":ie=Z=null;for(I in o)if(f=o[I],o.hasOwnProperty(I)&&f!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Pt(r,i,I,null,u,f)}for(v in u)if(f=u[v],m=o[v],u.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":Z=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&Pt(r,i,v,f,u,m)}Qc(r,Z,ie);return;case"option":for(var xe in o)if(Z=o[xe],o.hasOwnProperty(xe)&&Z!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":r.selected=!1;break;default:Pt(r,i,xe,null,u,Z)}for(k in u)if(Z=u[k],ie=o[k],u.hasOwnProperty(k)&&Z!==ie&&(Z!=null||ie!=null))switch(k){case"selected":r.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Pt(r,i,k,Z,u,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in o)Z=o[He],o.hasOwnProperty(He)&&Z!=null&&!u.hasOwnProperty(He)&&Pt(r,i,He,null,u,Z);for(W in u)if(Z=u[W],ie=o[W],u.hasOwnProperty(W)&&Z!==ie&&(Z!=null||ie!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,i));break;default:Pt(r,i,W,Z,u,ie)}return;default:if(Ro(i)){for(var Vt in o)Z=o[Vt],o.hasOwnProperty(Vt)&&Z!==void 0&&!u.hasOwnProperty(Vt)&&jp(r,i,Vt,void 0,u,Z);for(se in u)Z=u[se],ie=o[se],!u.hasOwnProperty(se)||Z===ie||Z===void 0&&ie===void 0||jp(r,i,se,Z,u,ie);return}}for(var G in o)Z=o[G],o.hasOwnProperty(G)&&Z!=null&&!u.hasOwnProperty(G)&&Pt(r,i,G,null,u,Z);for(he in u)Z=u[he],ie=o[he],!u.hasOwnProperty(he)||Z===ie||Z==null&&ie==null||Pt(r,i,he,Z,u,ie)}function ST(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function TC(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,v=f.initiatorType,I=f.duration;if(m&&I&&ST(v)){for(v=0,I=f.responseEnd,u+=1;u<o.length;u++){var k=o[u],W=k.startTime;if(W>I)break;var se=k.transferSize,he=k.initiatorType;se&&ST(he)&&(k=k.responseEnd,v+=se*(k<I?1:(I-W)/(k-W)))}if(--u,i+=8*(m+v)/(f.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var zp=null,Bp=null;function Jh(r){return r.nodeType===9?r:r.ownerDocument}function AT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wT(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Fp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hp=null;function bC(){var r=window.event;return r&&r.type==="popstate"?r===Hp?!1:(Hp=r,!0):(Hp=null,!1)}var RT=typeof setTimeout=="function"?setTimeout:void 0,SC=typeof clearTimeout=="function"?clearTimeout:void 0,CT=typeof Promise=="function"?Promise:void 0,AC=typeof queueMicrotask=="function"?queueMicrotask:typeof CT<"u"?function(r){return CT.resolve(null).then(r).catch(wC)}:RT;function wC(r){setTimeout(function(){throw r})}function Ka(r){return r==="head"}function IT(r,i){var o=i,u=0;do{var f=o.nextSibling;if(r.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(f),ol(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Pu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Pu(o);for(var m=o.firstChild;m;){var v=m.nextSibling,I=m.nodeName;m[Nt]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=v}}else o==="body"&&Pu(r.ownerDocument.body);o=f}while(o);ol(i)}function DT(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function qp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":qp(o),qt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function RC(r,i,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Nt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=qr(r.nextSibling),r===null)break}return null}function CC(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=qr(r.nextSibling),r===null))return null;return r}function NT(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=qr(r.nextSibling),r===null))return null;return r}function Gp(r){return r.data==="$?"||r.data==="$~"}function $p(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function IC(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function qr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Kp=null;function xT(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return qr(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function OT(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function MT(r,i,o){switch(i=Jh(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function Pu(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);qt(r)}var Gr=new Map,PT=new Set;function Zh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var aa=de.d;de.d={f:DC,r:NC,D:xC,C:OC,L:MC,m:PC,X:kC,S:VC,M:LC};function DC(){var r=aa.f(),i=qh();return r||i}function NC(r){var i=tt(r);i!==null&&i.tag===5&&i.type==="form"?Wv(i):aa.r(r)}var il=typeof document>"u"?null:document;function VT(r,i,o){var u=il;if(u&&typeof i=="string"&&i){var f=sr(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),PT.has(f)||(PT.add(f),r={rel:r,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),kn(i,"link",r),Ft(i),u.head.appendChild(i)))}}function xC(r){aa.D(r),VT("dns-prefetch",r,null)}function OC(r,i){aa.C(r,i),VT("preconnect",r,i)}function MC(r,i,o){aa.L(r,i,o);var u=il;if(u&&r&&i){var f='link[rel="preload"][as="'+sr(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+sr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+sr(o.imageSizes)+'"]')):f+='[href="'+sr(r)+'"]';var m=f;switch(i){case"style":m=al(r);break;case"script":m=sl(r)}Gr.has(m)||(r=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Gr.set(m,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(Vu(m))||i==="script"&&u.querySelector(ku(m))||(i=u.createElement("link"),kn(i,"link",r),Ft(i),u.head.appendChild(i)))}}function PC(r,i){aa.m(r,i);var o=il;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+sr(u)+'"][href="'+sr(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=sl(r)}if(!Gr.has(m)&&(r=E({rel:"modulepreload",href:r},i),Gr.set(m,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ku(m)))return}u=o.createElement("link"),kn(u,"link",r),Ft(u),o.head.appendChild(u)}}}function VC(r,i,o){aa.S(r,i,o);var u=il;if(u&&r){var f=Dn(u).hoistableStyles,m=al(r);i=i||"default";var v=f.get(m);if(!v){var I={loading:0,preload:null};if(v=u.querySelector(Vu(m)))I.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Gr.get(m))&&Yp(r,o);var k=v=u.createElement("link");Ft(k),kn(k,"link",r),k._p=new Promise(function(W,se){k.onload=W,k.onerror=se}),k.addEventListener("load",function(){I.loading|=1}),k.addEventListener("error",function(){I.loading|=2}),I.loading|=4,ef(v,i,u)}v={type:"stylesheet",instance:v,count:1,state:I},f.set(m,v)}}}function kC(r,i){aa.X(r,i);var o=il;if(o&&r){var u=Dn(o).hoistableScripts,f=sl(r),m=u.get(f);m||(m=o.querySelector(ku(f)),m||(r=E({src:r,async:!0},i),(i=Gr.get(f))&&Qp(r,i),m=o.createElement("script"),Ft(m),kn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function LC(r,i){aa.M(r,i);var o=il;if(o&&r){var u=Dn(o).hoistableScripts,f=sl(r),m=u.get(f);m||(m=o.querySelector(ku(f)),m||(r=E({src:r,async:!0,type:"module"},i),(i=Gr.get(f))&&Qp(r,i),m=o.createElement("script"),Ft(m),kn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function kT(r,i,o,u){var f=(f=Te.current)?Zh(f):null;if(!f)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=al(o.href),o=Dn(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=al(o.href);var m=Dn(f).hoistableStyles,v=m.get(r);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,v),(m=f.querySelector(Vu(r)))&&!m._p&&(v.instance=m,v.state.loading=5),Gr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Gr.set(r,o),m||UC(f,r,o,v.state))),i&&u===null)throw Error(a(528,""));return v}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=sl(o),o=Dn(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function al(r){return'href="'+sr(r)+'"'}function Vu(r){return'link[rel="stylesheet"]['+r+"]"}function LT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function UC(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),kn(i,"link",o),Ft(i),r.head.appendChild(i))}function sl(r){return'[src="'+sr(r)+'"]'}function ku(r){return"script[async]"+r}function UT(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+sr(o.href)+'"]');if(u)return i.instance=u,Ft(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Ft(u),kn(u,"style",f),ef(u,o.precedence,r),i.instance=u;case"stylesheet":f=al(o.href);var m=r.querySelector(Vu(f));if(m)return i.state.loading|=4,i.instance=m,Ft(m),m;u=LT(o),(f=Gr.get(f))&&Yp(u,f),m=(r.ownerDocument||r).createElement("link"),Ft(m);var v=m;return v._p=new Promise(function(I,k){v.onload=I,v.onerror=k}),kn(m,"link",u),i.state.loading|=4,ef(m,o.precedence,r),i.instance=m;case"script":return m=sl(o.src),(f=r.querySelector(ku(m)))?(i.instance=f,Ft(f),f):(u=o,(f=Gr.get(m))&&(u=E({},o),Qp(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),Ft(f),kn(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,ef(u,o.precedence,r));return i.instance}function ef(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,v=0;v<u.length;v++){var I=u[v];if(I.dataset.precedence===i)m=I;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Yp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Qp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var tf=null;function jT(r,i,o){if(tf===null){var u=new Map,f=tf=new Map;f.set(o,u)}else f=tf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[Nt]||m[ve]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=r+v;var I=u.get(v);I?I.push(m):u.set(v,[m])}}return u}function zT(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function jC(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function BT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function zC(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=al(u.href),m=i.querySelector(Vu(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=nf.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=m,Ft(m);return}m=i.ownerDocument||i,u=LT(u),(f=Gr.get(f))&&Yp(u,f),m=m.createElement("link"),Ft(m);var v=m;v._p=new Promise(function(I,k){v.onload=I,v.onerror=k}),kn(m,"link",u),o.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=nf.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var Xp=0;function BC(r,i){return r.stylesheets&&r.count===0&&af(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&af(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4+i);0<r.imgBytes&&Xp===0&&(Xp=62500*TC());var f=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&af(r,r.stylesheets),r.unsuspend)){var m=r.unsuspend;r.unsuspend=null,m()}},(r.imgBytes>Xp?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function nf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)af(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var rf=null;function af(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,rf=new Map,i.forEach(FC,r),rf=null,nf.call(r))}function FC(r,i){if(!(i.state.loading&4)){var o=rf.get(r);if(o)var u=o.get(null);else{o=new Map,rf.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=i.instance,v=f.getAttribute("data-precedence"),m=o.get(v)||u,m===u&&o.set(null,f),o.set(v,f),this.count++,u=nf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var Lu={$$typeof:$,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function HC(r,i,o,u,f,m,v,I,k){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jn(0),this.hiddenUpdates=Jn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function FT(r,i,o,u,f,m,v,I,k,W,se,he){return r=new HC(r,i,o,v,k,W,se,he,I),i=1,m===!0&&(i|=24),m=Tr(3,null,null,i),r.current=m,m.stateNode=r,i=Dm(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},Mm(m),r}function HT(r){return r?(r=Lo,r):Lo}function qT(r,i,o,u,f,m){f=HT(f),u.context===null?u.context=f:u.pendingContext=f,u=ka(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=La(r,u,i),o!==null&&(fr(o,r,i),pu(o,r,i))}function GT(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Wp(r,i){GT(r,i),(r=r.alternate)&&GT(r,i)}function $T(r){if(r.tag===13||r.tag===31){var i=zs(r,67108864);i!==null&&fr(i,r,67108864),Wp(r,67108864)}}function KT(r){if(r.tag===13||r.tag===31){var i=Rr();i=J(i);var o=zs(r,i);o!==null&&fr(o,r,i),Wp(r,i)}}var sf=!0;function qC(r,i,o,u){var f=Y.T;Y.T=null;var m=de.p;try{de.p=2,Jp(r,i,o,u)}finally{de.p=m,Y.T=f}}function GC(r,i,o,u){var f=Y.T;Y.T=null;var m=de.p;try{de.p=8,Jp(r,i,o,u)}finally{de.p=m,Y.T=f}}function Jp(r,i,o,u){if(sf){var f=Zp(u);if(f===null)Up(r,i,u,of,o),QT(r,u);else if(KC(f,r,i,o,u))u.stopPropagation();else if(QT(r,u),i&4&&-1<$C.indexOf(r)){for(;f!==null;){var m=tt(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Pr(m.pendingLanes);if(v!==0){var I=m;for(I.pendingLanes|=2,I.entangledLanes|=2;v;){var k=1<<31-Xt(v);I.entanglements[1]|=k,v&=~k}Di(m),(St&6)===0&&(Fh=Ye()+500,xu(0))}}break;case 31:case 13:I=zs(m,2),I!==null&&fr(I,m,2),qh(),Wp(m,2)}if(m=Zp(u),m===null&&Up(r,i,u,of,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Up(r,i,u,null,o)}}function Zp(r){return r=Vr(r),eg(r)}var of=null;function eg(r){if(of=null,r=zt(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return of=r,null}function YT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dt()){case rr:return 2;case Qn:return 8;case an:case Sn:return 32;case Rs:return 268435456;default:return 32}default:return 32}}var tg=!1,Ya=null,Qa=null,Xa=null,Uu=new Map,ju=new Map,Wa=[],$C="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QT(r,i){switch(r){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":Uu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(i.pointerId)}}function zu(r,i,o,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=tt(i),i!==null&&$T(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function KC(r,i,o,u,f){switch(i){case"focusin":return Ya=zu(Ya,r,i,o,u,f),!0;case"dragenter":return Qa=zu(Qa,r,i,o,u,f),!0;case"mouseover":return Xa=zu(Xa,r,i,o,u,f),!0;case"pointerover":var m=f.pointerId;return Uu.set(m,zu(Uu.get(m)||null,r,i,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,ju.set(m,zu(ju.get(m)||null,r,i,o,u,f)),!0}return!1}function XT(r){var i=zt(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,Ce(r.priority,function(){KT(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,Ce(r.priority,function(){KT(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function lf(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Zp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Zl=u,o.target.dispatchEvent(u),Zl=null}else return i=tt(o),i!==null&&$T(i),r.blockedOn=o,!1;i.shift()}return!0}function WT(r,i,o){lf(r)&&o.delete(i)}function YC(){tg=!1,Ya!==null&&lf(Ya)&&(Ya=null),Qa!==null&&lf(Qa)&&(Qa=null),Xa!==null&&lf(Xa)&&(Xa=null),Uu.forEach(WT),ju.forEach(WT)}function uf(r,i){r.blockedOn===i&&(r.blockedOn=null,tg||(tg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,YC)))}var cf=null;function JT(r){cf!==r&&(cf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){cf===r&&(cf=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(eg(u||o)===null)continue;break}var m=tt(o);m!==null&&(r.splice(i,3),i-=3,Zm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function ol(r){function i(k){return uf(k,r)}Ya!==null&&uf(Ya,r),Qa!==null&&uf(Qa,r),Xa!==null&&uf(Xa,r),Uu.forEach(i),ju.forEach(i);for(var o=0;o<Wa.length;o++){var u=Wa[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Wa.length&&(o=Wa[0],o.blockedOn===null);)XT(o),o.blockedOn===null&&Wa.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],v=f[Se]||null;if(typeof m=="function")v||JT(o);else if(v){var I=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Se]||null)I=v.formAction;else if(eg(f)!==null)continue}else I=v.action;typeof I=="function"?o[u+1]=I:(o.splice(u,3),u-=3),JT(o)}}}function ZT(){function r(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function ng(r){this._internalRoot=r}hf.prototype.render=ng.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=Rr();qT(o,u,r,i,null,null)},hf.prototype.unmount=ng.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;qT(r.current,2,null,r,null,null),qh(),i[De]=null}};function hf(r){this._internalRoot=r}hf.prototype.unstable_scheduleHydration=function(r){if(r){var i=_e();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Wa.length&&i!==0&&i<Wa[o].priority;o++);Wa.splice(o,0,r),o===0&&XT(r)}};var eb=e.version;if(eb!=="19.2.4")throw Error(a(527,eb,"19.2.4"));de.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=g(i),r=r!==null?_(r):null,r=r===null?null:r.stateNode,r};var QC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{pr=ff.inject(QC),Ut=ff}catch{}}return Fu.createRoot=function(r,i){if(!s(r))throw Error(a(299));var o=!1,u="",f=oE,m=lE,v=uE;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=FT(r,1,!1,null,null,o,u,null,f,m,v,ZT),r[De]=i.current,Lp(r),new ng(i)},Fu.hydrateRoot=function(r,i,o){if(!s(r))throw Error(a(299));var u=!1,f="",m=oE,v=lE,I=uE,k=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),i=FT(r,1,!0,i,o??null,u,f,k,m,v,I,ZT),i.context=HT(null),o=i.current,u=Rr(),u=J(u),f=ka(u),f.callback=null,La(o,f,u),o=u,i.current.lanes=o,gi(i,o),Di(i),r[De]=i.current,Lp(r),new hf(i)},Fu.version="19.2.4",Fu}var cb;function lI(){if(cb)return sg.exports;cb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sg.exports=oI(),sg.exports}var uI=lI();const cI=US(uI);var cg={exports:{}},hg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb;function hI(){if(hb)return hg;hb=1;var n=Rd();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,a=n.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return hg.useSyncExternalStoreWithSelector=function(p,g,_,E,b){var R=s(null);if(R.current===null){var L={hasValue:!1,value:null};R.current=L}else L=R.current;R=c(function(){function j(ae){if(!K){if(K=!0,B=ae,ae=E(ae),b!==void 0&&L.hasValue){var ee=L.value;if(b(ee,ae))return $=ee}return $=ae}if(ee=$,t(B,ae))return ee;var A=E(ae);return b!==void 0&&b(ee,A)?(B=ae,ee):(B=ae,$=A)}var K=!1,B,$,te=_===void 0?null:_;return[function(){return j(g())},te===null?void 0:function(){return j(te())}]},[g,_,E,b]);var F=a(p,R[0],R[1]);return l(function(){L.hasValue=!0,L.value=F},[F]),d(F),F},hg}var fb;function fI(){return fb||(fb=1,cg.exports=hI()),cg.exports}var dI=fI();function mI(n){n()}function pI(){let n=null,e=null;return{clear(){n=null,e=null},notify(){mI(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let a=n;for(;a;)t.push(a),a=a.next;return t},subscribe(t){let a=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!a||n===null||(a=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var db={notify(){},get:()=>[]};function gI(n,e){let t,a=db,s=0,l=!1;function c(F){_();const j=a.subscribe(F);let K=!1;return()=>{K||(K=!0,j(),E())}}function d(){a.notify()}function p(){L.onStateChange&&L.onStateChange()}function g(){return l}function _(){s++,t||(t=n.subscribe(p),a=pI())}function E(){s--,t&&s===0&&(t(),t=void 0,a.clear(),a=db)}function b(){l||(l=!0,_())}function R(){l&&(l=!1,E())}const L={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:p,isSubscribed:g,trySubscribe:b,tryUnsubscribe:R,getListeners:()=>a};return L}var yI=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_I=yI(),vI=()=>typeof navigator<"u"&&navigator.product==="ReactNative",EI=vI(),TI=()=>_I||EI?P.useLayoutEffect:P.useEffect,bI=TI(),fg=Symbol.for("react-redux-context"),dg=typeof globalThis<"u"?globalThis:{};function SI(){if(!P.createContext)return{};const n=dg[fg]??(dg[fg]=new Map);let e=n.get(P.createContext);return e||(e=P.createContext(null),n.set(P.createContext,e)),e}var gs=SI();function AI(n){const{children:e,context:t,serverState:a,store:s}=n,l=P.useMemo(()=>{const p=gI(s);return{store:s,subscription:p,getServerState:a?()=>a:void 0}},[s,a]),c=P.useMemo(()=>s.getState(),[s]);bI(()=>{const{subscription:p}=l;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==s.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[l,c]);const d=t||gs;return P.createElement(d.Provider,{value:l},e)}var wI=AI;function by(n=gs){return function(){return P.useContext(n)}}var BS=by();function FS(n=gs){const e=n===gs?BS:by(n),t=()=>{const{store:a}=e();return a};return Object.assign(t,{withTypes:()=>t}),t}var RI=FS();function CI(n=gs){const e=n===gs?RI:FS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var II=CI(),DI=(n,e)=>n===e;function NI(n=gs){const e=n===gs?BS:by(n),t=(a,s={})=>{const{equalityFn:l=DI}=typeof s=="function"?{equalityFn:s}:s,c=e(),{store:d,subscription:p,getServerState:g}=c;P.useRef(!0);const _=P.useCallback({[a.name](b){return a(b)}}[a.name],[a]),E=dI.useSyncExternalStoreWithSelector(p.addNestedSub,d.getState,g||d.getState,_,l);return P.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var xI=NI();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var HS=n=>{throw TypeError(n)},OI=(n,e,t)=>e.has(n)||HS("Cannot "+t),mg=(n,e,t)=>(OI(n,e,"read from private field"),t?t.call(n):e.get(n)),MI=(n,e,t)=>e.has(n)?HS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),mb="popstate";function PI(n={}){function e(s,l){let{pathname:c="/",search:d="",hash:p=""}=_a(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),hc("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=s.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof l=="string"?l:Li(l))}function a(s,l){nn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return kI(e,t,a,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function nn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VI(){return Math.random().toString(36).substring(2,10)}function pb(n,e){return{usr:n.state,key:n.key,idx:e}}function hc(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?_a(e):e,state:t,key:e&&e.key||a||VI()}}function Li({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function _a(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function kI(n,e,t,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,d="POP",p=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function E(){d="POP";let j=_(),K=j==null?null:j-g;g=j,p&&p({action:d,location:F.location,delta:K})}function b(j,K){d="PUSH";let B=hc(F.location,j,K);t&&t(B,j),g=_()+1;let $=pb(B,g),te=F.createHref(B);try{c.pushState($,"",te)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;s.location.assign(te)}l&&p&&p({action:d,location:F.location,delta:1})}function R(j,K){d="REPLACE";let B=hc(F.location,j,K);t&&t(B,j),g=_();let $=pb(B,g),te=F.createHref(B);c.replaceState($,"",te),l&&p&&p({action:d,location:F.location,delta:0})}function L(j){return qS(j)}let F={get action(){return d},get location(){return n(s,c)},listen(j){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(mb,E),p=j,()=>{s.removeEventListener(mb,E),p=null}},createHref(j){return e(s,j)},createURL:L,encodeLocation(j){let K=L(j);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:b,replace:R,go(j){return c.go(j)}};return F}function qS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),at(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:Li(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}var Ku,gb=class{constructor(n){if(MI(this,Ku,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(mg(this,Ku).has(n))return mg(this,Ku).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){mg(this,Ku).set(n,e)}};Ku=new WeakMap;var LI=new Set(["lazy","caseSensitive","path","id","index","children"]);function UI(n){return LI.has(n)}var jI=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function zI(n){return jI.has(n)}function BI(n){return n.index===!0}function fc(n,e,t=[],a={},s=!1){return n.map((l,c)=>{let d=[...t,String(c)],p=typeof l.id=="string"?l.id:d.join("-");if(at(l.index!==!0||!l.children,"Cannot specify children on an index route"),at(s||!a[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),BI(l)){let g={...l,id:p};return a[p]=yb(g,e(g)),g}else{let g={...l,id:p,children:void 0};return a[p]=yb(g,e(g)),l.children&&(g.children=fc(l.children,e,d,a,s)),g}})}function yb(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function ns(n,e,t="/"){return Yu(n,e,t,!1)}function Yu(n,e,t,a){let s=typeof e=="string"?_a(e):e,l=Qr(s.pathname||"/",t);if(l==null)return null;let c=GS(n);HI(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=eD(l);d=JI(c[p],g,a)}return d}function FI(n,e){let{route:t,pathname:a,params:s}=n;return{id:t.id,pathname:a,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function GS(n,e=[],t=[],a="",s=!1){let l=(c,d,p=s,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(a)&&p)return;at(_.relativePath.startsWith(a),`Absolute route path "${_.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(a.length)}let E=Oi([a,_.relativePath]),b=t.concat(_);c.children&&c.children.length>0&&(at(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),GS(c.children,e,b,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:XI(E,c.index),routesMeta:b})};return n.forEach((c,d)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,d);else for(let g of $S(c.path))l(c,d,!0,g)}),e}function $S(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=$S(a.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),s&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function HI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:WI(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var qI=/^:[\w-]+$/,GI=3,$I=2,KI=1,YI=10,QI=-2,_b=n=>n==="*";function XI(n,e){let t=n.split("/"),a=t.length;return t.some(_b)&&(a+=QI),e&&(a+=$I),t.filter(s=>!_b(s)).reduce((s,l)=>s+(qI.test(l)?GI:l===""?KI:YI),a)}function WI(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function JI(n,e,t=!1){let{routesMeta:a}=n,s={},l="/",c=[];for(let d=0;d<a.length;++d){let p=a[d],g=d===a.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=Xf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),b=p.route;if(!E&&g&&t&&!a[a.length-1].route.index&&(E=Xf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:Oi([l,E.pathname]),pathnameBase:rD(Oi([l,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(l=Oi([l,E.pathnameBase]))}return c}function Xf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=ZI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((g,{paramName:_,isOptional:E},b)=>{if(_==="*"){let L=d[b]||"";c=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const R=d[b];return E&&!R?g[_]=void 0:g[_]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function ZI(n,e=!1,t=!0){nn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(a.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function eD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Qr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function tD({basename:n,pathname:e}){return e==="/"?n:Oi([n,e])}var KS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sy=n=>KS.test(n);function nD(n,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof n=="string"?_a(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=vb(t.substring(1),"/"):l=vb(t,e)):l=e,{pathname:l,search:iD(a),hash:aD(s)}}function vb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function pg(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Cd(n){let e=YS(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function Id(n,e,t,a=!1){let s;typeof n=="string"?s=_a(n):(s={...n},at(!s.pathname||!s.pathname.includes("?"),pg("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),pg("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),pg("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!a&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),E-=1;s.pathname=b.join("/")}d=E>=0?e[E]:"/"}let p=nD(s,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var Oi=n=>n.join("/").replace(/\/\/+/g,"/"),rD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),iD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,aD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Rc=class{constructor(n,e,t,a=!1){this.status=n,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function dc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Cc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var QS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function XS(n,e){let t=n;if(typeof t!="string"||!KS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,s=!1;if(QS)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=Qr(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:s=!0}catch{nn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:t}}var os=Symbol("Uninstrumented");function sD(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let d of c)l[d]&&t[d].push(l[d])}}));let a={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=yl(t.lazy,e.lazy,()=>{});s&&(a.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],d=t[`lazy.${l}`];if(typeof c=="function"&&d.length>0){let p=yl(d,c,()=>{});p&&(a.lazy=Object.assign(a.lazy||{},{[l]:p}))}})}return["loader","action"].forEach(s=>{let l=e[s];if(typeof l=="function"&&t[s].length>0){let c=l[os]??l,d=yl(t[s],c,(...p)=>Eb(p[0]));d&&(s==="loader"&&c.hydrate===!0&&(d.hydrate=!0),d[os]=c,a[s]=d)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(a.middleware=e.middleware.map(s=>{let l=s[os]??s,c=yl(t.middleware,l,(...d)=>Eb(d[0]));return c?(c[os]=l,c):s})),a}function oD(n,e){let t={navigate:[],fetch:[]};if(e.forEach(a=>a({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&t[c].push(s[c])}})),t.navigate.length>0){let a=n.navigate[os]??n.navigate,s=yl(t.navigate,a,(...l)=>{let[c,d]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?Li(c):".",...Tb(n,d??{})}});s&&(s[os]=a,n.navigate=s)}if(t.fetch.length>0){let a=n.fetch[os]??n.fetch,s=yl(t.fetch,a,(...l)=>{let[c,,d,p]=l;return{href:d??".",fetcherKey:c,...Tb(n,p??{})}});s&&(s[os]=a,n.fetch=s)}return n}function yl(n,e,t){return n.length===0?null:async(...a)=>{let s=await WS(n,t(...a),()=>e(...a),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function WS(n,e,t,a){let s=n[a],l;if(s){let c,d=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=WS(n,e,t,a-1),l=await c,at(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(d,e)}catch(p){console.error("An instrumentation function threw an error:",p)}c||await d(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Eb(n){let{request:e,context:t,params:a,unstable_pattern:s}=n;return{request:lD(e),params:{...a},unstable_pattern:s,context:uD(t)}}function Tb(n,e){return{currentUrl:Li(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function lD(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function uD(n){if(hD(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var cD=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hD(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===cD}var JS=["POST","PUT","PATCH","DELETE"],fD=new Set(JS),dD=["GET",...JS],mD=new Set(dD),ZS=new Set([301,302,303,307,308]),pD=new Set([307,308]),gg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Hu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},yD=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),eA="remix-router-transitions",tA=Symbol("ResetLoaderData");function _D(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";at(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=n.hydrationRouteProperties||[],s=n.mapRouteProperties||yD,l=s;if(n.unstable_instrumentations){let V=n.unstable_instrumentations;l=H=>({...s(H),...sD(V.map(J=>J.route).filter(Boolean),H)})}let c={},d=fc(n.routes,l,void 0,c),p,g=n.basename||"/";g.startsWith("/")||(g=`/${g}`);let _=n.dataStrategy||SD,E={...n.future},b=null,R=new Set,L=null,F=null,j=null,K=n.hydrationData!=null,B=ns(d,n.history.location,g),$=!1,te=null,ae;if(B==null&&!n.patchRoutesOnNavigation){let V=$r(404,{pathname:n.history.location.pathname}),{matches:H,route:J}=df(d);ae=!0,B=H,te={[J.id]:V}}else if(B&&!n.hydrationData&&zi(B,d,n.history.location.pathname).active&&(B=null),B)if(B.some(V=>V.route.lazy))ae=!1;else if(!B.some(V=>Ay(V.route)))ae=!0;else{let V=n.hydrationData?n.hydrationData.loaderData:null,H=n.hydrationData?n.hydrationData.errors:null;if(H){let J=B.findIndex(me=>H[me.route.id]!==void 0);ae=B.slice(0,J+1).every(me=>!jg(me.route,V,H))}else ae=B.every(J=>!jg(J.route,V,H))}else{ae=!1,B=[];let V=zi(null,d,n.history.location.pathname);V.active&&V.matches&&($=!0,B=V.matches)}let ee,A={historyAction:n.history.action,location:n.history.location,matches:B,initialized:ae,navigation:gg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||te,fetchers:new Map,blockers:new Map},S="POP",C=null,M=!1,N,O=!1,x=new Map,Ee=null,ke=!1,Y=!1,de=new Set,ye=new Map,Le=0,Pe=-1,U=new Map,q=new Set,oe=new Map,ce=new Map,pe=new Set,Te=new Map,Ue,Ke=null;function ot(){if(b=n.history.listen(({action:V,location:H,delta:J})=>{if(Ue){Ue(),Ue=void 0;return}nn(Te.size===0||J!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let me=pi({currentLocation:A.location,nextLocation:H,historyAction:V});if(me&&J!=null){let _e=new Promise(Ce=>{Ue=Ce});n.history.go(J*-1),Wn(me,{state:"blocked",location:H,proceed(){Wn(me,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),_e.then(()=>n.history.go(J))},reset(){let Ce=new Map(A.blockers);Ce.set(me,Hu),Et({blockers:Ce})}}),C==null||C.resolve(),C=null;return}return ge(V,H)}),t){BD(e,x);let V=()=>FD(e,x);e.addEventListener("pagehide",V),Ee=()=>e.removeEventListener("pagehide",V)}return A.initialized||ge("POP",A.location,{initialHydration:!0}),ee}function Yt(){b&&b(),Ee&&Ee(),R.clear(),N&&N.abort(),A.fetchers.forEach((V,H)=>Ea(H)),A.blockers.forEach((V,H)=>Is(H))}function In(V){return R.add(V),()=>R.delete(V)}function Et(V,H={}){V.matches&&(V.matches=V.matches.map(_e=>{let Ce=c[_e.route.id],Ne=_e.route;return Ne.element!==Ce.element||Ne.errorElement!==Ce.errorElement||Ne.hydrateFallbackElement!==Ce.hydrateFallbackElement?{..._e,route:Ce}:_e})),A={...A,...V};let J=[],me=[];A.fetchers.forEach((_e,Ce)=>{_e.state==="idle"&&(pe.has(Ce)?J.push(Ce):me.push(Ce))}),pe.forEach(_e=>{!A.fetchers.has(_e)&&!ye.has(_e)&&J.push(_e)}),[...R].forEach(_e=>_e(A,{deletedFetchers:J,newErrors:V.errors??null,viewTransitionOpts:H.viewTransitionOpts,flushSync:H.flushSync===!0})),J.forEach(_e=>Ea(_e)),me.forEach(_e=>A.fetchers.delete(_e))}function bn(V,H,{flushSync:J}={}){var qe,Me;let me=A.actionData!=null&&A.navigation.formMethod!=null&&Gn(A.navigation.formMethod)&&A.navigation.state==="loading"&&((qe=V.state)==null?void 0:qe._isRedirect)!==!0,_e;H.actionData?Object.keys(H.actionData).length>0?_e=H.actionData:_e=null:me?_e=A.actionData:_e=null;let Ce=H.loaderData?xb(A.loaderData,H.loaderData,H.matches||[],H.errors):A.loaderData,Ne=A.blockers;Ne.size>0&&(Ne=new Map(Ne),Ne.forEach((Qe,it)=>Ne.set(it,Hu)));let ve=ke?!1:Ao(V,H.matches||A.matches),Se=M===!0||A.navigation.formMethod!=null&&Gn(A.navigation.formMethod)&&((Me=V.state)==null?void 0:Me._isRedirect)!==!0;p&&(d=p,p=void 0),ke||S==="POP"||(S==="PUSH"?n.history.push(V,V.state):S==="REPLACE"&&n.history.replace(V,V.state));let De;if(S==="POP"){let Qe=x.get(A.location.pathname);Qe&&Qe.has(V.pathname)?De={currentLocation:A.location,nextLocation:V}:x.has(V.pathname)&&(De={currentLocation:V,nextLocation:A.location})}else if(O){let Qe=x.get(A.location.pathname);Qe?Qe.add(V.pathname):(Qe=new Set([V.pathname]),x.set(A.location.pathname,Qe)),De={currentLocation:A.location,nextLocation:V}}Et({...H,actionData:_e,loaderData:Ce,historyAction:S,location:V,initialized:!0,navigation:gg,revalidation:"idle",restoreScrollPosition:ve,preventScrollReset:Se,blockers:Ne},{viewTransitionOpts:De,flushSync:J===!0}),S="POP",M=!1,O=!1,ke=!1,Y=!1,C==null||C.resolve(),C=null,Ke==null||Ke.resolve(),Ke=null}async function Qt(V,H){if(C==null||C.resolve(),C=null,typeof V=="number"){C||(C=Vb());let it=C.promise;return n.history.go(V),it}let J=Ug(A.location,A.matches,g,V,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:me,submission:_e,error:Ce}=bb(!1,J,H),Ne=A.location,ve=hc(A.location,me,H&&H.state);ve={...ve,...n.history.encodeLocation(ve)};let Se=H&&H.replace!=null?H.replace:void 0,De="PUSH";Se===!0?De="REPLACE":Se===!1||_e!=null&&Gn(_e.formMethod)&&_e.formAction===A.location.pathname+A.location.search&&(De="REPLACE");let qe=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,Me=(H&&H.flushSync)===!0,Qe=pi({currentLocation:Ne,nextLocation:ve,historyAction:De});if(Qe){Wn(Qe,{state:"blocked",location:ve,proceed(){Wn(Qe,{state:"proceeding",proceed:void 0,reset:void 0,location:ve}),Qt(V,H)},reset(){let it=new Map(A.blockers);it.set(Qe,Hu),Et({blockers:it})}});return}await ge(De,ve,{submission:_e,pendingError:Ce,preventScrollReset:qe,replace:H&&H.replace,enableViewTransition:H&&H.viewTransition,flushSync:Me,callSiteDefaultShouldRevalidate:H&&H.unstable_defaultShouldRevalidate})}function ne(){Ke||(Ke=Vb()),Qn(),Et({revalidation:"loading"});let V=Ke.promise;return A.navigation.state==="submitting"?V:A.navigation.state==="idle"?(ge(A.historyAction,A.location,{startUninterruptedRevalidation:!0}),V):(ge(S||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:O===!0}),V)}async function ge(V,H,J){N&&N.abort(),N=null,S=V,ke=(J&&J.startUninterruptedRevalidation)===!0,yr(A.location,A.matches),M=(J&&J.preventScrollReset)===!0,O=(J&&J.enableViewTransition)===!0;let me=p||d,_e=J&&J.overrideNavigation,Ce=J!=null&&J.initialHydration&&A.matches&&A.matches.length>0&&!$?A.matches:ns(me,H,g),Ne=(J&&J.flushSync)===!0;if(Ce&&A.initialized&&!Y&&xD(A.location,H)&&!(J&&J.submission&&Gn(J.submission.formMethod))){bn(H,{matches:Ce},{flushSync:Ne});return}let ve=zi(Ce,me,H.pathname);if(ve.active&&ve.matches&&(Ce=ve.matches),!Ce){let{error:qt,notFoundMatches:zt,route:tt}=Wt(H.pathname);bn(H,{matches:zt,loaderData:{},errors:{[tt.id]:qt}},{flushSync:Ne});return}N=new AbortController;let Se=hl(n.history,H,N.signal,J&&J.submission),De=n.getContext?await n.getContext():new gb,qe;if(J&&J.pendingError)qe=[rs(Ce).route.id,{type:"error",error:J.pendingError}];else if(J&&J.submission&&Gn(J.submission.formMethod)){let qt=await Ve(Se,H,J.submission,Ce,De,ve.active,J&&J.initialHydration===!0,{replace:J.replace,flushSync:Ne});if(qt.shortCircuited)return;if(qt.pendingActionResult){let[zt,tt]=qt.pendingActionResult;if(Cr(tt)&&dc(tt.error)&&tt.error.status===404){N=null,bn(H,{matches:qt.matches,loaderData:{},errors:{[zt]:tt.error}});return}}Ce=qt.matches||Ce,qe=qt.pendingActionResult,_e=yg(H,J.submission),Ne=!1,ve.active=!1,Se=hl(n.history,Se.url,Se.signal)}let{shortCircuited:Me,matches:Qe,loaderData:it,errors:Nt}=await we(Se,H,Ce,De,ve.active,_e,J&&J.submission,J&&J.fetcherSubmission,J&&J.replace,J&&J.initialHydration===!0,Ne,qe,J&&J.callSiteDefaultShouldRevalidate);Me||(N=null,bn(H,{matches:Qe||Ce,...Ob(qe),loaderData:it,errors:Nt}))}async function Ve(V,H,J,me,_e,Ce,Ne,ve={}){Qn();let Se=jD(H,J);if(Et({navigation:Se},{flushSync:ve.flushSync===!0}),Ce){let Me=await Jn(me,H.pathname,V.signal);if(Me.type==="aborted")return{shortCircuited:!0};if(Me.type==="error"){if(Me.partialMatches.length===0){let{matches:it,route:Nt}=df(d);return{matches:it,pendingActionResult:[Nt.id,{type:"error",error:Me.error}]}}let Qe=rs(Me.partialMatches).route.id;return{matches:Me.partialMatches,pendingActionResult:[Qe,{type:"error",error:Me.error}]}}else if(Me.matches)me=Me.matches;else{let{notFoundMatches:Qe,error:it,route:Nt}=Wt(H.pathname);return{matches:Qe,pendingActionResult:[Nt.id,{type:"error",error:it}]}}}let De,qe=Rf(me,H);if(!qe.route.action&&!qe.route.lazy)De={type:"error",error:$r(405,{method:V.method,pathname:H.pathname,routeId:qe.route.id})};else{let Me=El(l,c,V,me,qe,Ne?[]:a,_e),Qe=await Dt(V,Me,_e,null);if(De=Qe[qe.route.id],!De){for(let it of me)if(Qe[it.route.id]){De=Qe[it.route.id];break}}if(V.signal.aborted)return{shortCircuited:!0}}if(no(De)){let Me;return ve&&ve.replace!=null?Me=ve.replace:Me=Ib(De.response.headers.get("Location"),new URL(V.url),g,n.history)===A.location.pathname+A.location.search,await Ye(V,De,!0,{submission:J,replace:Me}),{shortCircuited:!0}}if(Cr(De)){let Me=rs(me,qe.route.id);return(ve&&ve.replace)!==!0&&(S="PUSH"),{matches:me,pendingActionResult:[Me.route.id,De,qe.route.id]}}return{matches:me,pendingActionResult:[qe.route.id,De]}}async function we(V,H,J,me,_e,Ce,Ne,ve,Se,De,qe,Me,Qe){let it=Ce||yg(H,Ne),Nt=Ne||ve||Pb(it),qt=!ke&&!De;if(_e){if(qt){let en=Ae(Me);Et({navigation:it,...en!==void 0?{actionData:en}:{}},{flushSync:qe})}let st=await Jn(J,H.pathname,V.signal);if(st.type==="aborted")return{shortCircuited:!0};if(st.type==="error"){if(st.partialMatches.length===0){let{matches:mn,route:xt}=df(d);return{matches:mn,loaderData:{},errors:{[xt.id]:st.error}}}let en=rs(st.partialMatches).route.id;return{matches:st.partialMatches,loaderData:{},errors:{[en]:st.error}}}else if(st.matches)J=st.matches;else{let{error:en,notFoundMatches:mn,route:xt}=Wt(H.pathname);return{matches:mn,loaderData:{},errors:{[xt.id]:en}}}}let zt=p||d,{dsMatches:tt,revalidatingFetchers:Bt}=Sb(V,me,l,c,n.history,A,J,Nt,H,De?[]:a,De===!0,Y,de,pe,oe,q,zt,g,n.patchRoutesOnNavigation!=null,Me,Qe);if(Pe=++Le,!n.dataStrategy&&!tt.some(st=>st.shouldLoad)&&!tt.some(st=>st.route.middleware&&st.route.middleware.length>0)&&Bt.length===0){let st=Xt();return bn(H,{matches:J,loaderData:{},errors:Me&&Cr(Me[1])?{[Me[0]]:Me[1].error}:null,...Ob(Me),...st?{fetchers:new Map(A.fetchers)}:{}},{flushSync:qe}),{shortCircuited:!0}}if(qt){let st={};if(!_e){st.navigation=it;let en=Ae(Me);en!==void 0&&(st.actionData=en)}Bt.length>0&&(st.fetchers=Fe(Bt)),Et(st,{flushSync:qe})}Bt.forEach(st=>{Ut(st.key),st.controller&&ye.set(st.key,st.controller)});let Dn=()=>Bt.forEach(st=>Ut(st.key));N&&N.signal.addEventListener("abort",Dn);let{loaderResults:Ft,fetcherResults:ir}=await rr(tt,Bt,V,me);if(V.signal.aborted)return{shortCircuited:!0};N&&N.signal.removeEventListener("abort",Dn),Bt.forEach(st=>ye.delete(st.key));let Bn=mf(Ft);if(Bn)return await Ye(V,Bn.result,!0,{replace:Se}),{shortCircuited:!0};if(Bn=mf(ir),Bn)return q.add(Bn.key),await Ye(V,Bn.result,!0,{replace:Se}),{shortCircuited:!0};let{loaderData:ar,errors:Fn}=Nb(A,J,Ft,Me,Bt,ir);De&&A.errors&&(Fn={...A.errors,...Fn});let _r=Xt(),yi=Cs(Pe),_i=_r||yi||Bt.length>0;return{matches:J,loaderData:ar,errors:Fn,..._i?{fetchers:new Map(A.fetchers)}:{}}}function Ae(V){if(V&&!Cr(V[1]))return{[V[0]]:V[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function Fe(V){return V.forEach(H=>{let J=A.fetchers.get(H.key),me=qu(void 0,J?J.data:void 0);A.fetchers.set(H.key,me)}),new Map(A.fetchers)}async function Lt(V,H,J,me){Ut(V);let _e=(me&&me.flushSync)===!0,Ce=p||d,Ne=Ug(A.location,A.matches,g,J,H,me==null?void 0:me.relative),ve=ns(Ce,Ne,g),Se=zi(ve,Ce,Ne);if(Se.active&&Se.matches&&(ve=Se.matches),!ve){Sn(V,H,$r(404,{pathname:Ne}),{flushSync:_e});return}let{path:De,submission:qe,error:Me}=bb(!0,Ne,me);if(Me){Sn(V,H,Me,{flushSync:_e});return}let Qe=n.getContext?await n.getContext():new gb,it=(me&&me.preventScrollReset)===!0;if(qe&&Gn(qe.formMethod)){await Rt(V,H,De,ve,Qe,Se.active,_e,it,qe,me&&me.unstable_defaultShouldRevalidate);return}oe.set(V,{routeId:H,path:De}),await je(V,H,De,ve,Qe,Se.active,_e,it,qe)}async function Rt(V,H,J,me,_e,Ce,Ne,ve,Se,De){Qn(),oe.delete(V);let qe=A.fetchers.get(V);an(V,zD(Se,qe),{flushSync:Ne});let Me=new AbortController,Qe=hl(n.history,J,Me.signal,Se);if(Ce){let nt=await Jn(me,new URL(Qe.url).pathname,Qe.signal,V);if(nt.type==="aborted")return;if(nt.type==="error"){Sn(V,H,nt.error,{flushSync:Ne});return}else if(nt.matches)me=nt.matches;else{Sn(V,H,$r(404,{pathname:J}),{flushSync:Ne});return}}let it=Rf(me,J);if(!it.route.action&&!it.route.lazy){let nt=$r(405,{method:Se.formMethod,pathname:J,routeId:H});Sn(V,H,nt,{flushSync:Ne});return}ye.set(V,Me);let Nt=Le,qt=El(l,c,Qe,me,it,a,_e),zt=await Dt(Qe,qt,_e,V),tt=zt[it.route.id];if(!tt){for(let nt of qt)if(zt[nt.route.id]){tt=zt[nt.route.id];break}}if(Qe.signal.aborted){ye.get(V)===Me&&ye.delete(V);return}if(pe.has(V)){if(no(tt)||Cr(tt)){an(V,sa(void 0));return}}else{if(no(tt))if(ye.delete(V),Pe>Nt){an(V,sa(void 0));return}else return q.add(V),an(V,qu(Se)),Ye(Qe,tt,!1,{fetcherSubmission:Se,preventScrollReset:ve});if(Cr(tt)){Sn(V,H,tt.error);return}}let Bt=A.navigation.location||A.location,Dn=hl(n.history,Bt,Me.signal),Ft=p||d,ir=A.navigation.state!=="idle"?ns(Ft,A.navigation.location,g):A.matches;at(ir,"Didn't find any matches after fetcher action");let Bn=++Le;U.set(V,Bn);let ar=qu(Se,tt.data);A.fetchers.set(V,ar);let{dsMatches:Fn,revalidatingFetchers:_r}=Sb(Dn,_e,l,c,n.history,A,ir,Se,Bt,a,!1,Y,de,pe,oe,q,Ft,g,n.patchRoutesOnNavigation!=null,[it.route.id,tt],De);_r.filter(nt=>nt.key!==V).forEach(nt=>{let vr=nt.key,ba=A.fetchers.get(vr),Tt=qu(void 0,ba?ba.data:void 0);A.fetchers.set(vr,Tt),Ut(vr),nt.controller&&ye.set(vr,nt.controller)}),Et({fetchers:new Map(A.fetchers)});let yi=()=>_r.forEach(nt=>Ut(nt.key));Me.signal.addEventListener("abort",yi);let{loaderResults:_i,fetcherResults:st}=await rr(Fn,_r,Dn,_e);if(Me.signal.aborted)return;if(Me.signal.removeEventListener("abort",yi),U.delete(V),ye.delete(V),_r.forEach(nt=>ye.delete(nt.key)),A.fetchers.has(V)){let nt=sa(tt.data);A.fetchers.set(V,nt)}let en=mf(_i);if(en)return Ye(Dn,en.result,!1,{preventScrollReset:ve});if(en=mf(st),en)return q.add(en.key),Ye(Dn,en.result,!1,{preventScrollReset:ve});let{loaderData:mn,errors:xt}=Nb(A,ir,_i,void 0,_r,st);Cs(Bn),A.navigation.state==="loading"&&Bn>Pe?(at(S,"Expected pending action"),N&&N.abort(),bn(A.navigation.location,{matches:ir,loaderData:mn,errors:xt,fetchers:new Map(A.fetchers)})):(Et({errors:xt,loaderData:xb(A.loaderData,mn,ir,xt),fetchers:new Map(A.fetchers)}),Y=!1)}async function je(V,H,J,me,_e,Ce,Ne,ve,Se){let De=A.fetchers.get(V);an(V,qu(Se,De?De.data:void 0),{flushSync:Ne});let qe=new AbortController,Me=hl(n.history,J,qe.signal);if(Ce){let tt=await Jn(me,new URL(Me.url).pathname,Me.signal,V);if(tt.type==="aborted")return;if(tt.type==="error"){Sn(V,H,tt.error,{flushSync:Ne});return}else if(tt.matches)me=tt.matches;else{Sn(V,H,$r(404,{pathname:J}),{flushSync:Ne});return}}let Qe=Rf(me,J);ye.set(V,qe);let it=Le,Nt=El(l,c,Me,me,Qe,a,_e),zt=(await Dt(Me,Nt,_e,V))[Qe.route.id];if(ye.get(V)===qe&&ye.delete(V),!Me.signal.aborted){if(pe.has(V)){an(V,sa(void 0));return}if(no(zt))if(Pe>it){an(V,sa(void 0));return}else{q.add(V),await Ye(Me,zt,!1,{preventScrollReset:ve});return}if(Cr(zt)){Sn(V,H,zt.error);return}an(V,sa(zt.data))}}async function Ye(V,H,J,{submission:me,fetcherSubmission:_e,preventScrollReset:Ce,replace:Ne}={}){J||(C==null||C.resolve(),C=null),H.response.headers.has("X-Remix-Revalidate")&&(Y=!0);let ve=H.response.headers.get("Location");at(ve,"Expected a Location header on the redirect Response"),ve=Ib(ve,new URL(V.url),g,n.history);let Se=hc(A.location,ve,{_isRedirect:!0});if(t){let Nt=!1;if(H.response.headers.has("X-Remix-Reload-Document"))Nt=!0;else if(Sy(ve)){const qt=qS(ve,!0);Nt=qt.origin!==e.location.origin||Qr(qt.pathname,g)==null}if(Nt){Ne?e.location.replace(ve):e.location.assign(ve);return}}N=null;let De=Ne===!0||H.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:qe,formAction:Me,formEncType:Qe}=A.navigation;!me&&!_e&&qe&&Me&&Qe&&(me=Pb(A.navigation));let it=me||_e;if(pD.has(H.response.status)&&it&&Gn(it.formMethod))await ge(De,Se,{submission:{...it,formAction:ve},preventScrollReset:Ce||M,enableViewTransition:J?O:void 0});else{let Nt=yg(Se,me);await ge(De,Se,{overrideNavigation:Nt,fetcherSubmission:_e,preventScrollReset:Ce||M,enableViewTransition:J?O:void 0})}}async function Dt(V,H,J,me){var Ne;let _e,Ce={};try{_e=await wD(_,V,H,me,J,!1)}catch(ve){return H.filter(Se=>Se.shouldLoad).forEach(Se=>{Ce[Se.route.id]={type:"error",error:ve}}),Ce}if(V.signal.aborted)return Ce;if(!Gn(V.method))for(let ve of H){if(((Ne=_e[ve.route.id])==null?void 0:Ne.type)==="error")break;!_e.hasOwnProperty(ve.route.id)&&!A.loaderData.hasOwnProperty(ve.route.id)&&(!A.errors||!A.errors.hasOwnProperty(ve.route.id))&&ve.shouldCallHandler()&&(_e[ve.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${ve.route.id}`)})}for(let[ve,Se]of Object.entries(_e))if(VD(Se)){let De=Se.result;Ce[ve]={type:"redirect",response:DD(De,V,ve,H,g)}}else Ce[ve]=await ID(Se);return Ce}async function rr(V,H,J,me){let _e=Dt(J,V,me,null),Ce=Promise.all(H.map(async Se=>{if(Se.matches&&Se.match&&Se.request&&Se.controller){let qe=(await Dt(Se.request,Se.matches,me,Se.key))[Se.match.route.id];return{[Se.key]:qe}}else return Promise.resolve({[Se.key]:{type:"error",error:$r(404,{pathname:Se.path})}})})),Ne=await _e,ve=(await Ce).reduce((Se,De)=>Object.assign(Se,De),{});return{loaderResults:Ne,fetcherResults:ve}}function Qn(){Y=!0,oe.forEach((V,H)=>{ye.has(H)&&de.add(H),Ut(H)})}function an(V,H,J={}){A.fetchers.set(V,H),Et({fetchers:new Map(A.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function Sn(V,H,J,me={}){let _e=rs(A.matches,H);Ea(V),Et({errors:{[_e.route.id]:J},fetchers:new Map(A.fetchers)},{flushSync:(me&&me.flushSync)===!0})}function Rs(V){return ce.set(V,(ce.get(V)||0)+1),pe.has(V)&&pe.delete(V),A.fetchers.get(V)||gD}function So(V,H){Ut(V,H==null?void 0:H.reason),an(V,sa(null))}function Ea(V){let H=A.fetchers.get(V);ye.has(V)&&!(H&&H.state==="loading"&&U.has(V))&&Ut(V),oe.delete(V),U.delete(V),q.delete(V),pe.delete(V),de.delete(V),A.fetchers.delete(V)}function pr(V){let H=(ce.get(V)||0)-1;H<=0?(ce.delete(V),pe.add(V)):ce.set(V,H),Et({fetchers:new Map(A.fetchers)})}function Ut(V,H){let J=ye.get(V);J&&(J.abort(H),ye.delete(V))}function Xn(V){for(let H of V){let J=Rs(H),me=sa(J.data);A.fetchers.set(H,me)}}function Xt(){let V=[],H=!1;for(let J of q){let me=A.fetchers.get(J);at(me,`Expected fetcher: ${J}`),me.state==="loading"&&(q.delete(J),V.push(J),H=!0)}return Xn(V),H}function Cs(V){let H=[];for(let[J,me]of U)if(me<V){let _e=A.fetchers.get(J);at(_e,`Expected fetcher: ${J}`),_e.state==="loading"&&(Ut(J),U.delete(J),H.push(J))}return Xn(H),H.length>0}function Ta(V,H){let J=A.blockers.get(V)||Hu;return Te.get(V)!==H&&Te.set(V,H),J}function Is(V){A.blockers.delete(V),Te.delete(V)}function Wn(V,H){let J=A.blockers.get(V)||Hu;at(J.state==="unblocked"&&H.state==="blocked"||J.state==="blocked"&&H.state==="blocked"||J.state==="blocked"&&H.state==="proceeding"||J.state==="blocked"&&H.state==="unblocked"||J.state==="proceeding"&&H.state==="unblocked",`Invalid blocker state transition: ${J.state} -> ${H.state}`);let me=new Map(A.blockers);me.set(V,H),Et({blockers:me})}function pi({currentLocation:V,nextLocation:H,historyAction:J}){if(Te.size===0)return;Te.size>1&&nn(!1,"A router only supports one blocker at a time");let me=Array.from(Te.entries()),[_e,Ce]=me[me.length-1],Ne=A.blockers.get(_e);if(!(Ne&&Ne.state==="proceeding")&&Ce({currentLocation:V,nextLocation:H,historyAction:J}))return _e}function Wt(V){let H=$r(404,{pathname:V}),J=p||d,{matches:me,route:_e}=df(J);return{notFoundMatches:me,route:_e,error:H}}function Pr(V,H,J){if(L=V,j=H,F=J||null,!K&&A.navigation===gg){K=!0;let me=Ao(A.location,A.matches);me!=null&&Et({restoreScrollPosition:me})}return()=>{L=null,j=null,F=null}}function gr(V,H){return F&&F(V,H.map(me=>FI(me,A.loaderData)))||V.key}function yr(V,H){if(L&&j){let J=gr(V,H);L[J]=j()}}function Ao(V,H){if(L){let J=gr(V,H),me=L[J];if(typeof me=="number")return me}return null}function zi(V,H,J){if(n.patchRoutesOnNavigation)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:Yu(H,J,g,!0)}}else return{active:!0,matches:Yu(H,J,g,!0)||[]};return{active:!1,matches:null}}async function Jn(V,H,J,me){if(!n.patchRoutesOnNavigation)return{type:"success",matches:V};let _e=V;for(;;){let Ce=p==null,Ne=p||d,ve=c;try{await n.patchRoutesOnNavigation({signal:J,path:H,matches:_e,fetcherKey:me,patch:(qe,Me)=>{J.aborted||Ab(qe,Me,Ne,ve,l,!1)}})}catch(qe){return{type:"error",error:qe,partialMatches:_e}}finally{Ce&&!J.aborted&&(d=[...d])}if(J.aborted)return{type:"aborted"};let Se=ns(Ne,H,g),De=null;if(Se){if(Object.keys(Se[0].params).length===0)return{type:"success",matches:Se};if(De=Yu(Ne,H,g,!0),!(De&&_e.length<De.length&&gi(_e,De.slice(0,_e.length))))return{type:"success",matches:Se}}if(De||(De=Yu(Ne,H,g,!0)),!De||gi(_e,De))return{type:"success",matches:null};_e=De}}function gi(V,H){return V.length===H.length&&V.every((J,me)=>J.route.id===H[me].route.id)}function Ql(V){c={},p=fc(V,l,void 0,c)}function Bi(V,H,J=!1){let me=p==null;Ab(V,H,p||d,c,l,J),me&&(d=[...d],Et({}))}return ee={get basename(){return g},get future(){return E},get state(){return A},get routes(){return d},get window(){return e},initialize:ot,subscribe:In,enableScrollRestoration:Pr,navigate:Qt,fetch:Lt,revalidate:ne,createHref:V=>n.history.createHref(V),encodeLocation:V=>n.history.encodeLocation(V),getFetcher:Rs,resetFetcher:So,deleteFetcher:pr,dispose:Yt,getBlocker:Ta,deleteBlocker:Is,patchRoutes:Bi,_internalFetchControllers:ye,_internalSetRoutes:Ql,_internalSetStateDoNotUseOrYouWillBreakYourApp(V){Et(V)}},n.unstable_instrumentations&&(ee=oD(ee,n.unstable_instrumentations.map(V=>V.router).filter(Boolean))),ee}function vD(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Ug(n,e,t,a,s,l){let c,d;if(s){c=[];for(let g of e)if(c.push(g),g.route.id===s){d=g;break}}else c=e,d=e[e.length-1];let p=Id(a||".",Cd(c),Qr(n.pathname,t)||n.pathname,l==="path");if(a==null&&(p.search=n.search,p.hash=n.hash),(a==null||a===""||a===".")&&d){let g=Ry(p.search);if(d.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let _=new URLSearchParams(p.search),E=_.getAll("index");_.delete("index"),E.filter(R=>R).forEach(R=>_.append("index",R));let b=_.toString();p.search=b?`?${b}`:""}}return t!=="/"&&(p.pathname=tD({basename:t,pathname:p.pathname})),Li(p)}function bb(n,e,t){if(!t||!vD(t))return{path:e};if(t.formMethod&&!UD(t.formMethod))return{path:e,error:$r(405,{method:t.formMethod})};let a=()=>({path:e,error:$r(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=oA(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Gn(l))return a();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((b,[R,L])=>`${b}${R}=${L}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!Gn(l))return a();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return a()}}}at(typeof FormData=="function","FormData is not available in this environment");let d,p;if(t.formData)d=Bg(t.formData),p=t.formData;else if(t.body instanceof FormData)d=Bg(t.body),p=t.body;else if(t.body instanceof URLSearchParams)d=t.body,p=Db(d);else if(t.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(t.body),p=Db(d)}catch{return a()}let g={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Gn(g.formMethod))return{path:e,submission:g};let _=_a(e);return n&&_.search&&Ry(_.search)&&d.append("index",""),_.search=`?${d}`,{path:Li(_),submission:g}}function Sb(n,e,t,a,s,l,c,d,p,g,_,E,b,R,L,F,j,K,B,$,te){var ke;let ae=$?Cr($[1])?$[1].error:$[1].data:void 0,ee=s.createURL(l.location),A=s.createURL(p),S;if(_&&l.errors){let Y=Object.keys(l.errors)[0];S=c.findIndex(de=>de.route.id===Y)}else if($&&Cr($[1])){let Y=$[0];S=c.findIndex(de=>de.route.id===Y)-1}let C=$?$[1].statusCode:void 0,M=C&&C>=400,N={currentUrl:ee,currentParams:((ke=l.matches[0])==null?void 0:ke.params)||{},nextUrl:A,nextParams:c[0].params,...d,actionResult:ae,actionStatus:C},O=Cc(c),x=c.map((Y,de)=>{let{route:ye}=Y,Le=null;if(S!=null&&de>S?Le=!1:ye.lazy?Le=!0:Ay(ye)?_?Le=jg(ye,l.loaderData,l.errors):ED(l.loaderData,l.matches[de],Y)&&(Le=!0):Le=!1,Le!==null)return zg(t,a,n,O,Y,g,e,Le);let Pe=!1;typeof te=="boolean"?Pe=te:M?Pe=!1:(E||ee.pathname+ee.search===A.pathname+A.search||ee.search!==A.search||TD(l.matches[de],Y))&&(Pe=!0);let U={...N,defaultShouldRevalidate:Pe},q=tc(Y,U);return zg(t,a,n,O,Y,g,e,q,U,te)}),Ee=[];return L.forEach((Y,de)=>{if(_||!c.some(pe=>pe.route.id===Y.routeId)||R.has(de))return;let ye=l.fetchers.get(de),Le=ye&&ye.state!=="idle"&&ye.data===void 0,Pe=ns(j,Y.path,K);if(!Pe){if(B&&Le)return;Ee.push({key:de,routeId:Y.routeId,path:Y.path,matches:null,match:null,request:null,controller:null});return}if(F.has(de))return;let U=Rf(Pe,Y.path),q=new AbortController,oe=hl(s,Y.path,q.signal),ce=null;if(b.has(de))b.delete(de),ce=El(t,a,oe,Pe,U,g,e);else if(Le)E&&(ce=El(t,a,oe,Pe,U,g,e));else{let pe;typeof te=="boolean"?pe=te:M?pe=!1:pe=E;let Te={...N,defaultShouldRevalidate:pe};tc(U,Te)&&(ce=El(t,a,oe,Pe,U,g,e,Te))}ce&&Ee.push({key:de,routeId:Y.routeId,path:Y.path,matches:ce,match:U,request:oe,controller:q})}),{dsMatches:x,revalidatingFetchers:Ee}}function Ay(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function jg(n,e,t){if(n.lazy)return!0;if(!Ay(n))return!1;let a=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!a&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!a&&!s}function ED(n,e,t){let a=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return a||s}function TD(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function tc(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Ab(n,e,t,a,s,l){let c;if(n){let g=a[n];at(g,`No route found to patch children into: routeId = ${n}`),g.children||(g.children=[]),c=g.children}else c=t;let d=[],p=[];if(e.forEach(g=>{let _=c.find(E=>nA(g,E));_?p.push({existingRoute:_,newRoute:g}):d.push(g)}),d.length>0){let g=fc(d,s,[n||"_","patch",String((c==null?void 0:c.length)||"0")],a);c.push(...g)}if(l&&p.length>0)for(let g=0;g<p.length;g++){let{existingRoute:_,newRoute:E}=p[g],b=_,[R]=fc([E],s,[],{},!0);Object.assign(b,{element:R.element?R.element:b.element,errorElement:R.errorElement?R.errorElement:b.errorElement,hydrateFallbackElement:R.hydrateFallbackElement?R.hydrateFallbackElement:b.hydrateFallbackElement})}}function nA(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,a)=>{var s;return(s=e.children)==null?void 0:s.some(l=>nA(t,l))}):!1}var wb=new WeakMap,rA=({key:n,route:e,manifest:t,mapRouteProperties:a})=>{let s=t[e.id];if(at(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=wb.get(s);c||(c={},wb.set(s,c));let d=c[n];if(d)return d;let p=(async()=>{let g=UI(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(g)nn(!g,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(E)nn(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let b=await l();b!=null&&(Object.assign(s,{[n]:b}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(b=>b===void 0)&&(s.lazy=void 0))})();return c[n]=p,p},Rb=new WeakMap;function bD(n,e,t,a,s){let l=t[n.id];if(at(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let _=Rb.get(l);if(_)return{lazyRoutePromise:_,lazyHandlerPromise:_};let E=(async()=>{at(typeof n.lazy=="function","No lazy route function found");let b=await n.lazy(),R={};for(let L in b){let F=b[L];if(F===void 0)continue;let j=zI(L),B=l[L]!==void 0&&L!=="hasErrorBoundary";j?nn(!j,"Route property "+L+" is not a supported property to be returned from a lazy route function. This property will be ignored."):B?nn(!B,`Route "${l.id}" has a static property "${L}" defined but its lazy function is also returning a value for this property. The lazy route property "${L}" will be ignored.`):R[L]=F}Object.assign(l,R),Object.assign(l,{...a(l),lazy:void 0})})();return Rb.set(l,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(n.lazy),d=[],p;for(let _ of c){if(s&&s.includes(_))continue;let E=rA({key:_,route:n,manifest:t,mapRouteProperties:a});E&&(d.push(E),_===e&&(p=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),p==null||p.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:p}}async function Cb(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function SD(n){return n.matches.some(e=>e.route.middleware)?iA(n,()=>Cb(n)):Cb(n)}function iA(n,e){return AD(n,e,a=>{if(LD(a))throw a;return a},MD,t);function t(a,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:a}}));{let{matches:c}=n,d=Math.min(Math.max(c.findIndex(g=>g.route.id===s),0),Math.max(c.findIndex(g=>g.shouldCallHandler()),0)),p=rs(c,c[d].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:a}})}}}async function AD(n,e,t,a,s){let{matches:l,request:c,params:d,context:p,unstable_pattern:g}=n,_=l.flatMap(b=>b.route.middleware?b.route.middleware.map(R=>[b.route.id,R]):[]);return await aA({request:c,params:d,context:p,unstable_pattern:g},_,e,t,a,s)}async function aA(n,e,t,a,s,l,c=0){let{request:d}=n;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let p=e[c];if(!p)return await t();let[g,_]=p,E,b=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await aA(n,e,t,a,s,l,c+1)},E.value}catch(R){return E={value:await l(R,g,E)},E.value}};try{let R=await _(n,b),L=R!=null?a(R):void 0;return s(L)?L:E?L??E.value:(E={value:await b()},E.value)}catch(R){return await l(R,g,E)}}function sA(n,e,t,a,s){let l=rA({key:"middleware",route:a.route,manifest:e,mapRouteProperties:n}),c=bD(a.route,Gn(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function zg(n,e,t,a,s,l,c,d,p=null,g){let _=!1,E=sA(n,e,t,s,l);return{...s,_lazyPromises:E,shouldLoad:d,shouldRevalidateArgs:p,shouldCallHandler(b){return _=!0,p?typeof g=="boolean"?tc(s,{...p,defaultShouldRevalidate:g}):typeof b=="boolean"?tc(s,{...p,defaultShouldRevalidate:b}):tc(s,p):d},resolve(b){let{lazy:R,loader:L,middleware:F}=s.route,j=_||d||b&&!Gn(t.method)&&(R||L),K=F&&F.length>0&&!L&&!R;return j&&(Gn(t.method)||!K)?RD({request:t,unstable_pattern:a,match:s,lazyHandlerPromise:E==null?void 0:E.handler,lazyRoutePromise:E==null?void 0:E.route,handlerOverride:b,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function El(n,e,t,a,s,l,c,d=null){return a.map(p=>p.route.id!==s.route.id?{...p,shouldLoad:!1,shouldRevalidateArgs:d,shouldCallHandler:()=>!1,_lazyPromises:sA(n,e,t,p,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:zg(n,e,t,Cc(a),p,l,c,!0,d))}async function wD(n,e,t,a,s,l){t.some(g=>{var _;return(_=g._lazyPromises)==null?void 0:_.middleware})&&await Promise.all(t.map(g=>{var _;return(_=g._lazyPromises)==null?void 0:_.middleware}));let c={request:e,unstable_pattern:Cc(t),params:t[0].params,context:s,matches:t},p=await n({...c,fetcherKey:a,runClientMiddleware:g=>{let _=c;return iA(_,()=>g({..._,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(g=>{var _,E;return[(_=g._lazyPromises)==null?void 0:_.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return p}async function RD({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let d,p,g=Gn(n.method),_=g?"action":"loader",E=b=>{let R,L=new Promise((K,B)=>R=B);p=()=>R(),n.signal.addEventListener("abort",p);let F=K=>typeof b!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${_}" [routeId: ${t.route.id}]`)):b({request:n,unstable_pattern:e,params:t.params,context:c},...K!==void 0?[K]:[]),j=(async()=>{try{return{type:"data",result:await(l?l(B=>F(B)):F())}}catch(K){return{type:"error",result:K}}})();return Promise.race([j,L])};try{let b=g?t.route.action:t.route.loader;if(a||s)if(b){let R,[L]=await Promise.all([E(b).catch(F=>{R=F}),a,s]);if(R!==void 0)throw R;d=L}else{await a;let R=g?t.route.action:t.route.loader;if(R)[d]=await Promise.all([E(R),s]);else if(_==="action"){let L=new URL(n.url),F=L.pathname+L.search;throw $r(405,{method:n.method,pathname:F,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(b)d=await E(b);else{let R=new URL(n.url),L=R.pathname+R.search;throw $r(404,{pathname:L})}}catch(b){return{type:"error",result:b}}finally{p&&n.signal.removeEventListener("abort",p)}return d}async function CD(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function ID(n){var a,s,l,c,d;let{result:e,type:t}=n;if(wy(e)){let p;try{p=await CD(e)}catch(g){return{type:"error",error:g}}return t==="error"?{type:"error",error:new Rc(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?Mb(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:OD(e),statusCode:dc(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:dc(e)?e.status:void 0}:Mb(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function DD(n,e,t,a,s){let l=n.headers.get("Location");if(at(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!Sy(l)){let c=a.slice(0,a.findIndex(d=>d.route.id===t)+1);l=Ug(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function Ib(n,e,t,a){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(Sy(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let d=Qr(c.pathname,t)!=null;if(c.origin===e.origin&&d)return c.pathname+c.search+c.hash}try{let l=a.createURL(n);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function hl(n,e,t,a){let s=n.createURL(oA(e)).toString(),l={signal:t};if(a&&Gn(a.formMethod)){let{formMethod:c,formEncType:d}=a;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(a.json)):d==="text/plain"?l.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?l.body=Bg(a.formData):l.body=a.formData}return new Request(s,l)}function Bg(n){let e=new URLSearchParams;for(let[t,a]of n.entries())e.append(t,typeof a=="string"?a:a.name);return e}function Db(n){let e=new FormData;for(let[t,a]of n.entries())e.append(t,a);return e}function ND(n,e,t,a=!1,s=!1){let l={},c=null,d,p=!1,g={},_=t&&Cr(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let b=E.route.id,R=e[b];if(at(!no(R),"Cannot handle redirect results in processLoaderData"),Cr(R)){let L=R.error;if(_!==void 0&&(L=_,_=void 0),c=c||{},s)c[b]=L;else{let F=rs(n,b);c[F.route.id]==null&&(c[F.route.id]=L)}a||(l[b]=tA),p||(p=!0,d=dc(R.error)?R.error.status:500),R.headers&&(g[b]=R.headers)}else l[b]=R.data,R.statusCode&&R.statusCode!==200&&!p&&(d=R.statusCode),R.headers&&(g[b]=R.headers)}),_!==void 0&&t&&(c={[t[0]]:_},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:g}}function Nb(n,e,t,a,s,l){let{loaderData:c,errors:d}=ND(e,t,a);return s.filter(p=>!p.matches||p.matches.some(g=>g.shouldLoad)).forEach(p=>{let{key:g,match:_,controller:E}=p;if(E&&E.signal.aborted)return;let b=l[g];if(at(b,"Did not find corresponding fetcher result"),Cr(b)){let R=rs(n.matches,_==null?void 0:_.route.id);d&&d[R.route.id]||(d={...d,[R.route.id]:b.error}),n.fetchers.delete(g)}else if(no(b))at(!1,"Unhandled fetcher revalidation redirect");else{let R=sa(b.data);n.fetchers.set(g,R)}}),{loaderData:c,errors:d}}function xb(n,e,t,a){let s=Object.entries(e).filter(([,l])=>l!==tA).reduce((l,[c,d])=>(l[c]=d,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),a&&a.hasOwnProperty(c))break}return s}function Ob(n){return n?Cr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function rs(n,e){return(e?n.slice(0,n.findIndex(a=>a.route.id===e)+1):[...n]).reverse().find(a=>a.route.hasErrorBoundary===!0)||n[0]}function df(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function $r(n,{pathname:e,routeId:t,method:a,type:s,message:l}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(c="Bad Request",a&&e&&t?d=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(c="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",d=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",a&&e&&t?d=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new Rc(n||500,c,new Error(d),!0)}function mf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[a,s]=e[t];if(no(s))return{key:a,result:s}}}function oA(n){let e=typeof n=="string"?_a(n):n;return Li({...e,hash:""})}function xD(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function OD(n){var e,t;return new Rc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function MD(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&PD(t))}function PD(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function VD(n){return wy(n.result)&&ZS.has(n.result.status)}function Cr(n){return n.type==="error"}function no(n){return(n&&n.type)==="redirect"}function Mb(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function wy(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function kD(n){return ZS.has(n)}function LD(n){return wy(n)&&kD(n.status)&&n.headers.has("Location")}function UD(n){return mD.has(n.toUpperCase())}function Gn(n){return fD.has(n.toUpperCase())}function Ry(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Rf(n,e){let t=typeof e=="string"?_a(e).search:e.search;if(n[n.length-1].route.index&&Ry(t||""))return n[n.length-1];let a=YS(n);return a[a.length-1]}function Pb(n){let{formMethod:e,formAction:t,formEncType:a,text:s,formData:l,json:c}=n;if(!(!e||!t||!a)){if(s!=null)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:a,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:c,text:void 0}}}function yg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function jD(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function qu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function zD(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function sa(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function BD(n,e){try{let t=n.sessionStorage.getItem(eA);if(t){let a=JSON.parse(t);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function FD(n,e){if(e.size>0){let t={};for(let[a,s]of e)t[a]=[...s];try{n.sessionStorage.setItem(eA,JSON.stringify(t))}catch(a){nn(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function Vb(){let n,e,t=new Promise((a,s)=>{n=async l=>{a(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var go=P.createContext(null);go.displayName="DataRouter";var Ic=P.createContext(null);Ic.displayName="DataRouterState";var lA=P.createContext(!1);function HD(){return P.useContext(lA)}var Cy=P.createContext({isTransitioning:!1});Cy.displayName="ViewTransition";var uA=P.createContext(new Map);uA.displayName="Fetchers";var qD=P.createContext(null);qD.displayName="Await";var Or=P.createContext(null);Or.displayName="Navigation";var Dd=P.createContext(null);Dd.displayName="Location";var Wr=P.createContext({outlet:null,matches:[],isDataRoute:!1});Wr.displayName="Route";var Iy=P.createContext(null);Iy.displayName="RouteError";var cA="REACT_ROUTER_ERROR",GD="REDIRECT",$D="ROUTE_ERROR_RESPONSE";function KD(n){if(n.startsWith(`${cA}:${GD}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function YD(n){if(n.startsWith(`${cA}:${$D}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Rc(e.status,e.statusText,e.data)}catch{}}function QD(n,{relative:e}={}){at(jl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=P.useContext(Or),{hash:s,pathname:l,search:c}=Dc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Oi([t,l])),a.createHref({pathname:d,search:c,hash:s})}function jl(){return P.useContext(Dd)!=null}function Jr(){return at(jl(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Dd).location}var hA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fA(n){P.useContext(Or).static||P.useLayoutEffect(n)}function yo(){let{isDataRoute:n}=P.useContext(Wr);return n?cN():XD()}function XD(){at(jl(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(go),{basename:e,navigator:t}=P.useContext(Or),{matches:a}=P.useContext(Wr),{pathname:s}=Jr(),l=JSON.stringify(Cd(a)),c=P.useRef(!1);return fA(()=>{c.current=!0}),P.useCallback((p,g={})=>{if(nn(c.current,hA),!c.current)return;if(typeof p=="number"){t.go(p);return}let _=Id(p,JSON.parse(l),s,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Oi([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,s,n])}var WD=P.createContext(null);function JD(n){let e=P.useContext(Wr).outlet;return P.useMemo(()=>e&&P.createElement(WD.Provider,{value:n},e),[e,n])}function Nd(){let{matches:n}=P.useContext(Wr),e=n[n.length-1];return e?e.params:{}}function Dc(n,{relative:e}={}){let{matches:t}=P.useContext(Wr),{pathname:a}=Jr(),s=JSON.stringify(Cd(t));return P.useMemo(()=>Id(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function ZD(n,e,t,a,s){at(jl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=P.useContext(Or),{matches:c}=P.useContext(Wr),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",E=d&&d.route;{let B=E&&E.path||"";mA(g,!E||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let b=Jr(),R;R=b;let L=R.pathname||"/",F=L;if(_!=="/"){let B=_.replace(/^\//,"").split("/");F="/"+L.replace(/^\//,"").split("/").slice(B.length).join("/")}let j=ns(n,{pathname:F});return nn(E||j!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),nn(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),iN(j&&j.map(B=>Object.assign({},B,{params:Object.assign({},p,B.params),pathname:Oi([_,l.encodeLocation?l.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?_:Oi([_,l.encodeLocation?l.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),c,t,a,s)}function eN(){let n=uN(),e=dc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,c)}var tN=P.createElement(eN,null),dA=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=YD(n.digest);t&&(n=t)}let e=n!==void 0?P.createElement(Wr.Provider,{value:this.props.routeContext},P.createElement(Iy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?P.createElement(nN,{error:n},e):e}};dA.contextType=lA;var _g=new WeakMap;function nN({children:n,error:e}){let{basename:t}=P.useContext(Or);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=KD(e.digest);if(a){let s=_g.get(e);if(s)throw s;let l=XS(a.location,t);if(QS&&!_g.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw _g.set(e,c),c}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function rN({routeContext:n,match:e,children:t}){let a=P.useContext(go);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Wr.Provider,{value:n},t)}function iN(n,e=[],t=null,a=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let _=l.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);at(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,p=-1;if(t)for(let _=0;_<l.length;_++){let E=l[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=_),E.route.id){let{loaderData:b,errors:R}=t,L=E.route.loader&&!b.hasOwnProperty(E.route.id)&&(!R||R[E.route.id]===void 0);if(E.route.lazy||L){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&a?(_,E)=>{var b,R;a(_,{location:t.location,params:((R=(b=t.matches)==null?void 0:b[0])==null?void 0:R.params)??{},unstable_pattern:Cc(t.matches),errorInfo:E})}:void 0;return l.reduceRight((_,E,b)=>{let R,L=!1,F=null,j=null;t&&(R=c&&E.route.id?c[E.route.id]:void 0,F=E.route.errorElement||tN,d&&(p<0&&b===0?(mA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,j=null):p===b&&(L=!0,j=E.route.hydrateFallbackElement||null)));let K=e.concat(l.slice(0,b+1)),B=()=>{let $;return R?$=F:L?$=j:E.route.Component?$=P.createElement(E.route.Component,null):E.route.element?$=E.route.element:$=_,P.createElement(rN,{match:E,routeContext:{outlet:_,matches:K,isDataRoute:t!=null},children:$})};return t&&(E.route.ErrorBoundary||E.route.errorElement||b===0)?P.createElement(dA,{location:t.location,revalidation:t.revalidation,component:F,error:R,children:B(),routeContext:{outlet:null,matches:K,isDataRoute:!0},onError:g}):B()},null)}function Dy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aN(n){let e=P.useContext(go);return at(e,Dy(n)),e}function sN(n){let e=P.useContext(Ic);return at(e,Dy(n)),e}function oN(n){let e=P.useContext(Wr);return at(e,Dy(n)),e}function Ny(n){let e=oN(n),t=e.matches[e.matches.length-1];return at(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function lN(){return Ny("useRouteId")}function uN(){var a;let n=P.useContext(Iy),e=sN("useRouteError"),t=Ny("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function cN(){let{router:n}=aN("useNavigate"),e=Ny("useNavigate"),t=P.useRef(!1);return fA(()=>{t.current=!0}),P.useCallback(async(s,l={})=>{nn(t.current,hA),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var kb={};function mA(n,e,t){!e&&!kb[n]&&(kb[n]=!0,nn(!1,t))}var Lb={};function Ub(n,e){!n&&!Lb[e]&&(Lb[e]=!0,console.warn(e))}var hN="useOptimistic",jb=rI[hN],fN=()=>{};function dN(n){return jb?jb(n):[n,fN]}function mN(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&nn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:P.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&nn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:P.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&nn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:P.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var pN=["HydrateFallback","hydrateFallbackElement"],gN=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}};function yN({router:n,flushSync:e,onError:t,unstable_useTransitions:a}){a=HD()||a;let[l,c]=P.useState(n.state),[d,p]=dN(l),[g,_]=P.useState(),[E,b]=P.useState({isTransitioning:!1}),[R,L]=P.useState(),[F,j]=P.useState(),[K,B]=P.useState(),$=P.useRef(new Map),te=P.useCallback((S,{deletedFetchers:C,newErrors:M,flushSync:N,viewTransitionOpts:O})=>{M&&t&&Object.values(M).forEach(Ee=>{var ke;return t(Ee,{location:S.location,params:((ke=S.matches[0])==null?void 0:ke.params)??{},unstable_pattern:Cc(S.matches)})}),S.fetchers.forEach((Ee,ke)=>{Ee.data!==void 0&&$.current.set(ke,Ee.data)}),C.forEach(Ee=>$.current.delete(Ee)),Ub(N===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let x=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(Ub(O==null||x,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!O||!x){e&&N?e(()=>c(S)):a===!1?c(S):P.startTransition(()=>{a===!0&&p(Ee=>zb(Ee,S)),c(S)});return}if(e&&N){e(()=>{F&&(R==null||R.resolve(),F.skipTransition()),b({isTransitioning:!0,flushSync:!0,currentLocation:O.currentLocation,nextLocation:O.nextLocation})});let Ee=n.window.document.startViewTransition(()=>{e(()=>c(S))});Ee.finished.finally(()=>{e(()=>{L(void 0),j(void 0),_(void 0),b({isTransitioning:!1})})}),e(()=>j(Ee));return}F?(R==null||R.resolve(),F.skipTransition(),B({state:S,currentLocation:O.currentLocation,nextLocation:O.nextLocation})):(_(S),b({isTransitioning:!0,flushSync:!1,currentLocation:O.currentLocation,nextLocation:O.nextLocation}))},[n.window,e,F,R,a,p,t]);P.useLayoutEffect(()=>n.subscribe(te),[n,te]),P.useEffect(()=>{E.isTransitioning&&!E.flushSync&&L(new gN)},[E]),P.useEffect(()=>{if(R&&g&&n.window){let S=g,C=R.promise,M=n.window.document.startViewTransition(async()=>{a===!1?c(S):P.startTransition(()=>{a===!0&&p(N=>zb(N,S)),c(S)}),await C});M.finished.finally(()=>{L(void 0),j(void 0),_(void 0),b({isTransitioning:!1})}),j(M)}},[g,R,n.window,a,p]),P.useEffect(()=>{R&&g&&d.location.key===g.location.key&&R.resolve()},[R,F,d.location,g]),P.useEffect(()=>{!E.isTransitioning&&K&&(_(K.state),b({isTransitioning:!0,flushSync:!1,currentLocation:K.currentLocation,nextLocation:K.nextLocation}),B(void 0))},[E.isTransitioning,K]);let ae=P.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:S=>n.navigate(S),push:(S,C,M)=>n.navigate(S,{state:C,preventScrollReset:M==null?void 0:M.preventScrollReset}),replace:(S,C,M)=>n.navigate(S,{replace:!0,state:C,preventScrollReset:M==null?void 0:M.preventScrollReset})}),[n]),ee=n.basename||"/",A=P.useMemo(()=>({router:n,navigator:ae,static:!1,basename:ee,onError:t}),[n,ae,ee,t]);return P.createElement(P.Fragment,null,P.createElement(go.Provider,{value:A},P.createElement(Ic.Provider,{value:d},P.createElement(uA.Provider,{value:$.current},P.createElement(Cy.Provider,{value:E},P.createElement(EN,{basename:ee,location:d.location,navigationType:d.historyAction,navigator:ae,unstable_useTransitions:a},P.createElement(_N,{routes:n.routes,future:n.future,state:d,onError:t})))))),null)}function zb(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var _N=P.memo(vN);function vN({routes:n,future:e,state:t,onError:a}){return ZD(n,void 0,t,a,e)}function us({to:n,replace:e,state:t,relative:a}){at(jl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(Or);nn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=P.useContext(Wr),{pathname:c}=Jr(),d=yo(),p=Id(n,Cd(l),c,a==="path"),g=JSON.stringify(p);return P.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:a})},[d,g,a,e,t]),null}function pA(n){return JD(n.context)}function EN({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){at(!jl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=P.useMemo(()=>({basename:d,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[d,s,l,c]);typeof t=="string"&&(t=_a(t));let{pathname:g="/",search:_="",hash:E="",state:b=null,key:R="default"}=t,L=P.useMemo(()=>{let F=Qr(g,d);return F==null?null:{location:{pathname:F,search:_,hash:E,state:b,key:R},navigationType:a}},[d,g,_,E,b,R,a]);return nn(L!=null,`<Router basename="${d}"> is not able to match the URL "${g}${_}${E}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:P.createElement(Or.Provider,{value:p},P.createElement(Dd.Provider,{children:e,value:L}))}var Cf="get",If="application/x-www-form-urlencoded";function xd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function TN(n){return xd(n)&&n.tagName.toLowerCase()==="button"}function bN(n){return xd(n)&&n.tagName.toLowerCase()==="form"}function SN(n){return xd(n)&&n.tagName.toLowerCase()==="input"}function AN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function wN(n,e){return n.button===0&&(!e||e==="_self")&&!AN(n)}function Fg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let a=n[t];return e.concat(Array.isArray(a)?a.map(s=>[t,s]):[[t,a]])},[]))}function RN(n,e){let t=Fg(n);return e&&e.forEach((a,s)=>{t.has(s)||e.getAll(s).forEach(l=>{t.append(s,l)})}),t}var pf=null;function CN(){if(pf===null)try{new FormData(document.createElement("form"),0),pf=!1}catch{pf=!0}return pf}var IN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vg(n){return n!=null&&!IN.has(n)?(nn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${If}"`),null):n}function DN(n,e){let t,a,s,l,c;if(bN(n)){let d=n.getAttribute("action");a=d?Qr(d,e):null,t=n.getAttribute("method")||Cf,s=vg(n.getAttribute("enctype"))||If,l=new FormData(n)}else if(TN(n)||SN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(a=p?Qr(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Cf,s=vg(n.getAttribute("formenctype"))||vg(d.getAttribute("enctype"))||If,l=new FormData(d,n),!CN()){let{name:g,type:_,value:E}=n;if(_==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,E)}}else{if(xd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Cf,a=null,s=If,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function NN(n,e,t,a){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:e&&Qr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function xN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ON(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function MN(n,e,t){let a=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await xN(l,t);return c.links?c.links():[]}return[]}));return LN(a.flat(1).filter(ON).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Bb(n,e,t,a,s,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var _;return t[g].pathname!==p.pathname||((_=t[g].route.path)==null?void 0:_.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{var E;let _=a.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function PN(n,e,{includeHydrateFallback:t}={}){return VN(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function VN(n){return[...new Set(n)]}function kN(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function LN(n,e){let t=new Set;return new Set(e),n.reduce((a,s)=>{let l=JSON.stringify(kN(s));return t.has(l)||(t.add(l),a.push({key:l,link:s})),a},[])}function gA(){let n=P.useContext(go);return xy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function UN(){let n=P.useContext(Ic);return xy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Oy=P.createContext(void 0);Oy.displayName="FrameworkContext";function yA(){let n=P.useContext(Oy);return xy(n,"You must render this element inside a <HydratedRouter> element"),n}function jN(n,e){let t=P.useContext(Oy),[a,s]=P.useState(!1),[l,c]=P.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:E}=e,b=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let F=K=>{K.forEach(B=>{c(B.isIntersecting)})},j=new IntersectionObserver(F,{threshold:.5});return b.current&&j.observe(b.current),()=>{j.disconnect()}}},[n]),P.useEffect(()=>{if(a){let F=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(F)}}},[a]);let R=()=>{s(!0)},L=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:Gu(d,R),onBlur:Gu(p,L),onMouseEnter:Gu(g,R),onMouseLeave:Gu(_,L),onTouchStart:Gu(E,R)}]:[!1,b,{}]}function Gu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function zN({page:n,...e}){let{router:t}=gA(),a=P.useMemo(()=>ns(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?P.createElement(FN,{page:n,matches:a,...e}):null}function BN(n){let{manifest:e,routeModules:t}=yA(),[a,s]=P.useState([]);return P.useEffect(()=>{let l=!1;return MN(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),a}function FN({page:n,matches:e,...t}){let a=Jr(),{future:s,manifest:l,routeModules:c}=yA(),{basename:d}=gA(),{loaderData:p,matches:g}=UN(),_=P.useMemo(()=>Bb(n,e,g,l,a,"data"),[n,e,g,l,a]),E=P.useMemo(()=>Bb(n,e,g,l,a,"assets"),[n,e,g,l,a]),b=P.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let F=new Set,j=!1;if(e.forEach(B=>{var te;let $=l.routes[B.route.id];!$||!$.hasLoader||(!_.some(ae=>ae.route.id===B.route.id)&&B.route.id in p&&((te=c[B.route.id])!=null&&te.shouldRevalidate)||$.hasClientLoader?j=!0:F.add(B.route.id))}),F.size===0)return[];let K=NN(n,d,s.unstable_trailingSlashAwareDataRequests,"data");return j&&F.size>0&&K.searchParams.set("_routes",e.filter(B=>F.has(B.route.id)).map(B=>B.route.id).join(",")),[K.pathname+K.search]},[d,s.unstable_trailingSlashAwareDataRequests,p,a,l,_,e,n,c]),R=P.useMemo(()=>PN(E,l),[E,l]),L=BN(E);return P.createElement(P.Fragment,null,b.map(F=>P.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...t})),R.map(F=>P.createElement("link",{key:F,rel:"modulepreload",href:F,...t})),L.map(({key:F,link:j})=>P.createElement("link",{key:F,nonce:t.nonce,...j,crossOrigin:j.crossOrigin??t.crossOrigin})))}function HN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var qN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qN&&(window.__reactRouterVersion="7.13.0")}catch{}function GN(n,e){return _D({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:PI({window:e==null?void 0:e.window}),hydrationData:$N(),routes:n,mapRouteProperties:mN,hydrationRouteProperties:pN,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function $N(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:KN(n.errors)}),n}function KN(n){if(!n)return null;let e=Object.entries(n),t={};for(let[a,s]of e)if(s&&s.__type==="RouteErrorResponse")t[a]=new Rc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[a]=c}catch{}}if(t[a]==null){let l=new Error(s.message);l.stack="",t[a]=l}}else t[a]=s;return t}var _A=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vA=P.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:b,...R},L){let{basename:F,unstable_useTransitions:j}=P.useContext(Or),K=typeof g=="string"&&_A.test(g),B=XS(g,F);g=B.to;let $=QD(g,{relative:s}),[te,ae,ee]=jN(a,R),A=WN(g,{replace:c,state:d,target:p,preventScrollReset:_,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:b,unstable_useTransitions:j});function S(M){e&&e(M),M.defaultPrevented||A(M)}let C=P.createElement("a",{...R,...ee,href:B.absoluteURL||$,onClick:B.isExternal||l?e:S,ref:HN(L,ae),target:p,"data-discover":!K&&t==="render"?"true":void 0});return te&&!K?P.createElement(P.Fragment,null,C,P.createElement(zN,{page:$})):C});vA.displayName="Link";var YN=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:p,...g},_){let E=Dc(c,{relative:g.relative}),b=Jr(),R=P.useContext(Ic),{navigator:L,basename:F}=P.useContext(Or),j=R!=null&&rx(E)&&d===!0,K=L.encodeLocation?L.encodeLocation(E).pathname:E.pathname,B=b.pathname,$=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(B=B.toLowerCase(),$=$?$.toLowerCase():null,K=K.toLowerCase()),$&&F&&($=Qr($,F)||$);const te=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let ae=B===K||!s&&B.startsWith(K)&&B.charAt(te)==="/",ee=$!=null&&($===K||!s&&$.startsWith(K)&&$.charAt(K.length)==="/"),A={isActive:ae,isPending:ee,isTransitioning:j},S=ae?e:void 0,C;typeof a=="function"?C=a(A):C=[a,ae?"active":null,ee?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(A):l;return P.createElement(vA,{...g,"aria-current":S,className:C,ref:_,style:M,to:c,viewTransition:d},typeof p=="function"?p(A):p)});YN.displayName="NavLink";var QN=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:l,method:c=Cf,action:d,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:b,...R},L)=>{let{unstable_useTransitions:F}=P.useContext(Or),j=tx(),K=nx(d,{relative:g}),B=c.toLowerCase()==="get"?"get":"post",$=typeof d=="string"&&_A.test(d),te=ae=>{if(p&&p(ae),ae.defaultPrevented)return;ae.preventDefault();let ee=ae.nativeEvent.submitter,A=(ee==null?void 0:ee.getAttribute("formmethod"))||c,S=()=>j(ee||ae.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:l,relative:g,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:b});F&&t!==!1?P.startTransition(()=>S()):S()};return P.createElement("form",{ref:L,method:B,action:K,onSubmit:a?p:te,...R,"data-discover":!$&&n==="render"?"true":void 0})});QN.displayName="Form";function XN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function EA(n){let e=P.useContext(go);return at(e,XN(n)),e}function WN(n,{target:e,replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=yo(),_=Jr(),E=Dc(n,{relative:l});return P.useCallback(b=>{if(wN(b,e)){b.preventDefault();let R=t!==void 0?t:Li(_)===Li(E),L=()=>g(n,{replace:R,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?P.startTransition(()=>L()):L()}},[_,g,E,t,a,e,n,s,l,c,d,p])}function JN(n){nn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(Fg(n)),t=P.useRef(!1),a=Jr(),s=P.useMemo(()=>RN(a.search,t.current?null:e.current),[a.search]),l=yo(),c=P.useCallback((d,p)=>{const g=Fg(typeof d=="function"?d(new URLSearchParams(s)):d);t.current=!0,l("?"+g,p)},[l,s]);return[s,c]}var ZN=0,ex=()=>`__${String(++ZN)}__`;function tx(){let{router:n}=EA("useSubmit"),{basename:e}=P.useContext(Or),t=lN(),a=n.fetch,s=n.navigate;return P.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:_,body:E}=DN(l,e);if(c.navigate===!1){let b=c.fetcherKey||ex();await a(b,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:E,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:E,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,s,e,t])}function nx(n,{relative:e}={}){let{basename:t}=P.useContext(Or),a=P.useContext(Wr);at(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...Dc(n||".",{relative:e})},c=Jr();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Oi([t,l.pathname])),Li(l)}function rx(n,{relative:e}={}){let t=P.useContext(Cy);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=EA("useViewTransitionState"),s=Dc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Qr(t.currentLocation.pathname,a)||t.currentLocation.pathname,c=Qr(t.nextLocation.pathname,a)||t.nextLocation.pathname;return Xf(s.pathname,c)!=null||Xf(s.pathname,l)!=null}var ix=zS();function ax(n){return P.createElement(yN,{flushSync:ix.flushSync,...n})}const sx=P.createContext(void 0),mi=()=>II(),ct=xI.withTypes(),ox=({children:n})=>{const e=ct(t=>t.auth.loading);return w.jsx(sx.Provider,{value:{isLoading:e},children:n})},lx=()=>{};var Fb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let s=n.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},ux=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const s=n[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],d=n[t++],p=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},bA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,d=c?n[s+1]:0,p=s+2<n.length,g=p?n[s+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,R=g&63;p||(R=64,c||(b=64)),a.push(t[_],t[E],t[b],t[R])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(TA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ux(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new cx;const b=l<<2|d>>4;if(a.push(b),g!==64){const R=d<<4&240|g>>2;if(a.push(R),E!==64){const L=g<<6&192|E;a.push(L)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class cx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hx=function(n){const e=TA(n);return bA.encodeByteArray(e,!0)},Wf=function(n){return hx(n).replace(/\./g,"")},SA=function(n){try{return bA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=()=>fx().__FIREBASE_DEFAULTS__,mx=()=>{if(typeof process>"u"||typeof Fb>"u")return;const n=Fb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},px=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&SA(n[1]);return e&&JSON.parse(e)},Od=()=>{try{return lx()||dx()||mx()||px()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},AA=n=>{var e,t;return(t=(e=Od())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},gx=n=>{const e=AA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},wA=()=>{var n;return(n=Od())==null?void 0:n.config},RA=n=>{var e;return(e=Od())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Wf(JSON.stringify(t)),Wf(JSON.stringify(c)),""].join(".")}const nc={};function vx(){const n={prod:[],emulator:[]};for(const e of Object.keys(nc))nc[e]?n.emulator.push(e):n.prod.push(e);return n}function Ex(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Hb=!1;function IA(n,e){if(typeof window>"u"||typeof document>"u"||!zl(window.location.host)||nc[n]===e||nc[n]||Hb)return;nc[n]=e;function t(b){return`__firebase__banner__${b}`}const a="__firebase__banner",l=vx().prod.length>0;function c(){const b=document.getElementById(a);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,R){b.setAttribute("width","24"),b.setAttribute("id",R),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Hb=!0,c()},b}function _(b,R){b.setAttribute("id",R),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=Ex(a),R=t("text"),L=document.getElementById(R)||document.createElement("span"),F=t("learnmore"),j=document.getElementById(F)||document.createElement("a"),K=t("preprendIcon"),B=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const $=b.element;d($),_(j,F);const te=g();p(B,K),$.append(B,L,j,te),document.body.appendChild($)}l?(L.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yn())}function bx(){var e;const n=(e=Od())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Sx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ax(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function wx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rx(){const n=Yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Cx(){return!bx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ix(){try{return typeof indexedDB=="object"}catch{return!1}}function Dx(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="FirebaseError";class va extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=Nx,Object.setPrototypeOf(this,va.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nc.prototype.create)}}class Nc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?xx(l,a):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new va(s,d,a)}}function xx(n,e){return n.replace(Ox,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const Ox=/\{\$([^}]+)}/g;function Mx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function uo(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=n[s],c=e[s];if(qb(l)&&qb(c)){if(!uo(l,c))return!1}else if(l!==c)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function qb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Px(n,e){const t=new Vx(n,e);return t.subscribe.bind(t)}class Vx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");kx(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=Eg),s.error===void 0&&(s.error=Eg),s.complete===void 0&&(s.complete=Eg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kx(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Eg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(n){return n&&n._delegate?n._delegate:n}class co{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new yx;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jx(e))try{this.getOrInitializeService({instanceIdentifier:to})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=to){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=to){return this.instances.has(e)}getOptions(e=to){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&c.resolve(s)}return s}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const l=this.instances.get(a);return l&&e(l,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Ux(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=to){return this.component?this.component.multipleInstances?e:to:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ux(n){return n===to?void 0:n}function jx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Lx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(dt||(dt={}));const Bx={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},Fx=dt.INFO,Hx={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},qx=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),s=Hx[e];if(s)console[s](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class My{constructor(e){this.name=e,this._logLevel=Fx,this._logHandler=qx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Bx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const Gx=(n,e)=>e.some(t=>n instanceof t);let Gb,$b;function $x(){return Gb||(Gb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kx(){return $b||($b=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DA=new WeakMap,Hg=new WeakMap,NA=new WeakMap,Tg=new WeakMap,Py=new WeakMap;function Yx(n){const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(cs(n.result)),s()},c=()=>{a(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&DA.set(t,n)}).catch(()=>{}),Py.set(e,n),e}function Qx(n){if(Hg.has(n))return;const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{a(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Hg.set(n,e)}let qg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Hg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||NA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Xx(n){qg=n(qg)}function Wx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(bg(this),e,...t);return NA.set(a,e.sort?e.sort():[e]),cs(a)}:Kx().includes(n)?function(...e){return n.apply(bg(this),e),cs(DA.get(this))}:function(...e){return cs(n.apply(bg(this),e))}}function Jx(n){return typeof n=="function"?Wx(n):(n instanceof IDBTransaction&&Qx(n),Gx(n,$x())?new Proxy(n,qg):n)}function cs(n){if(n instanceof IDBRequest)return Yx(n);if(Tg.has(n))return Tg.get(n);const e=Jx(n);return e!==n&&(Tg.set(n,e),Py.set(e,n)),e}const bg=n=>Py.get(n);function Zx(n,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),d=cs(c);return a&&c.addEventListener("upgradeneeded",p=>{a(cs(c.result),p.oldVersion,p.newVersion,cs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const e2=["get","getKey","getAll","getAllKeys","count"],t2=["put","add","delete","clear"],Sg=new Map;function Kb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Sg.get(e))return Sg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=t2.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||e2.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,s?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&p.done]))[0]};return Sg.set(e,l),l}Xx(n=>({...n,get:(e,t,a)=>Kb(e,t)||n.get(e,t,a),has:(e,t)=>!!Kb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(r2(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function r2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gg="@firebase/app",Yb="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new My("@firebase/app"),i2="@firebase/app-compat",a2="@firebase/analytics-compat",s2="@firebase/analytics",o2="@firebase/app-check-compat",l2="@firebase/app-check",u2="@firebase/auth",c2="@firebase/auth-compat",h2="@firebase/database",f2="@firebase/data-connect",d2="@firebase/database-compat",m2="@firebase/functions",p2="@firebase/functions-compat",g2="@firebase/installations",y2="@firebase/installations-compat",_2="@firebase/messaging",v2="@firebase/messaging-compat",E2="@firebase/performance",T2="@firebase/performance-compat",b2="@firebase/remote-config",S2="@firebase/remote-config-compat",A2="@firebase/storage",w2="@firebase/storage-compat",R2="@firebase/firestore",C2="@firebase/ai",I2="@firebase/firestore-compat",D2="firebase",N2="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="[DEFAULT]",x2={[Gg]:"fire-core",[i2]:"fire-core-compat",[s2]:"fire-analytics",[a2]:"fire-analytics-compat",[l2]:"fire-app-check",[o2]:"fire-app-check-compat",[u2]:"fire-auth",[c2]:"fire-auth-compat",[h2]:"fire-rtdb",[f2]:"fire-data-connect",[d2]:"fire-rtdb-compat",[m2]:"fire-fn",[p2]:"fire-fn-compat",[g2]:"fire-iid",[y2]:"fire-iid-compat",[_2]:"fire-fcm",[v2]:"fire-fcm-compat",[E2]:"fire-perf",[T2]:"fire-perf-compat",[b2]:"fire-rc",[S2]:"fire-rc-compat",[A2]:"fire-gcs",[w2]:"fire-gcs-compat",[R2]:"fire-fst",[I2]:"fire-fst-compat",[C2]:"fire-vertex","fire-js":"fire-js",[D2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=new Map,O2=new Map,Kg=new Map;function Qb(n,e){try{n.container.addComponent(e)}catch(t){da.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Cl(n){const e=n.name;if(Kg.has(e))return da.debug(`There were multiple attempts to register component ${e}.`),!1;Kg.set(e,n);for(const t of Jf.values())Qb(t,n);for(const t of O2.values())Qb(t,n);return!0}function Vy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function oi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hs=new Nc("app","Firebase",M2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=N2;function xA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a={name:$g,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw hs.create("bad-app-name",{appName:String(s)});if(t||(t=wA()),!t)throw hs.create("no-options");const l=Jf.get(s);if(l){if(uo(t,l.options)&&uo(a,l.config))return l;throw hs.create("duplicate-app",{appName:s})}const c=new zx(s);for(const p of Kg.values())c.addComponent(p);const d=new P2(t,a,c);return Jf.set(s,d),d}function OA(n=$g){const e=Jf.get(n);if(!e&&n===$g&&wA())return xA();if(!e)throw hs.create("no-app",{appName:n});return e}function fs(n,e,t){let a=x2[n]??n;t&&(a+=`-${t}`);const s=a.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),da.warn(c.join(" "));return}Cl(new co(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="firebase-heartbeat-database",k2=1,mc="firebase-heartbeat-store";let Ag=null;function MA(){return Ag||(Ag=Zx(V2,k2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(mc)}catch(t){console.warn(t)}}}}).catch(n=>{throw hs.create("idb-open",{originalErrorMessage:n.message})})),Ag}async function L2(n){try{const t=(await MA()).transaction(mc),a=await t.objectStore(mc).get(PA(n));return await t.done,a}catch(e){if(e instanceof va)da.warn(e.message);else{const t=hs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});da.warn(t.message)}}}async function Xb(n,e){try{const a=(await MA()).transaction(mc,"readwrite");await a.objectStore(mc).put(e,PA(n)),await a.done}catch(t){if(t instanceof va)da.warn(t.message);else{const a=hs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});da.warn(a.message)}}}function PA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=1024,j2=30;class z2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new F2(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Wb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>j2){const c=H2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){da.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Wb(),{heartbeatsToSend:a,unsentEntries:s}=B2(this._heartbeatsCache.heartbeats),l=Wf(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return da.warn(t),""}}}function Wb(){return new Date().toISOString().substring(0,10)}function B2(n,e=U2){const t=[];let a=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),Jb(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Jb(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class F2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ix()?Dx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await L2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Jb(n){return Wf(JSON.stringify({version:2,heartbeats:n})).length}function H2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(n){Cl(new co("platform-logger",e=>new n2(e),"PRIVATE")),Cl(new co("heartbeat",e=>new z2(e),"PRIVATE")),fs(Gg,Yb,n),fs(Gg,Yb,"esm2020"),fs("fire-js","")}q2("");var Zb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,VA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,S){function C(){}C.prototype=S.prototype,A.F=S.prototype,A.prototype=new C,A.prototype.constructor=A,A.D=function(M,N,O){for(var x=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)x[Ee-2]=arguments[Ee];return S.prototype[N].apply(M,x)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,S,C){C||(C=0);const M=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)M[N]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(N=0;N<16;++N)M[N]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=A.g[0],C=A.g[1],N=A.g[2];let O=A.g[3],x;x=S+(O^C&(N^O))+M[0]+3614090360&4294967295,S=C+(x<<7&4294967295|x>>>25),x=O+(N^S&(C^N))+M[1]+3905402710&4294967295,O=S+(x<<12&4294967295|x>>>20),x=N+(C^O&(S^C))+M[2]+606105819&4294967295,N=O+(x<<17&4294967295|x>>>15),x=C+(S^N&(O^S))+M[3]+3250441966&4294967295,C=N+(x<<22&4294967295|x>>>10),x=S+(O^C&(N^O))+M[4]+4118548399&4294967295,S=C+(x<<7&4294967295|x>>>25),x=O+(N^S&(C^N))+M[5]+1200080426&4294967295,O=S+(x<<12&4294967295|x>>>20),x=N+(C^O&(S^C))+M[6]+2821735955&4294967295,N=O+(x<<17&4294967295|x>>>15),x=C+(S^N&(O^S))+M[7]+4249261313&4294967295,C=N+(x<<22&4294967295|x>>>10),x=S+(O^C&(N^O))+M[8]+1770035416&4294967295,S=C+(x<<7&4294967295|x>>>25),x=O+(N^S&(C^N))+M[9]+2336552879&4294967295,O=S+(x<<12&4294967295|x>>>20),x=N+(C^O&(S^C))+M[10]+4294925233&4294967295,N=O+(x<<17&4294967295|x>>>15),x=C+(S^N&(O^S))+M[11]+2304563134&4294967295,C=N+(x<<22&4294967295|x>>>10),x=S+(O^C&(N^O))+M[12]+1804603682&4294967295,S=C+(x<<7&4294967295|x>>>25),x=O+(N^S&(C^N))+M[13]+4254626195&4294967295,O=S+(x<<12&4294967295|x>>>20),x=N+(C^O&(S^C))+M[14]+2792965006&4294967295,N=O+(x<<17&4294967295|x>>>15),x=C+(S^N&(O^S))+M[15]+1236535329&4294967295,C=N+(x<<22&4294967295|x>>>10),x=S+(N^O&(C^N))+M[1]+4129170786&4294967295,S=C+(x<<5&4294967295|x>>>27),x=O+(C^N&(S^C))+M[6]+3225465664&4294967295,O=S+(x<<9&4294967295|x>>>23),x=N+(S^C&(O^S))+M[11]+643717713&4294967295,N=O+(x<<14&4294967295|x>>>18),x=C+(O^S&(N^O))+M[0]+3921069994&4294967295,C=N+(x<<20&4294967295|x>>>12),x=S+(N^O&(C^N))+M[5]+3593408605&4294967295,S=C+(x<<5&4294967295|x>>>27),x=O+(C^N&(S^C))+M[10]+38016083&4294967295,O=S+(x<<9&4294967295|x>>>23),x=N+(S^C&(O^S))+M[15]+3634488961&4294967295,N=O+(x<<14&4294967295|x>>>18),x=C+(O^S&(N^O))+M[4]+3889429448&4294967295,C=N+(x<<20&4294967295|x>>>12),x=S+(N^O&(C^N))+M[9]+568446438&4294967295,S=C+(x<<5&4294967295|x>>>27),x=O+(C^N&(S^C))+M[14]+3275163606&4294967295,O=S+(x<<9&4294967295|x>>>23),x=N+(S^C&(O^S))+M[3]+4107603335&4294967295,N=O+(x<<14&4294967295|x>>>18),x=C+(O^S&(N^O))+M[8]+1163531501&4294967295,C=N+(x<<20&4294967295|x>>>12),x=S+(N^O&(C^N))+M[13]+2850285829&4294967295,S=C+(x<<5&4294967295|x>>>27),x=O+(C^N&(S^C))+M[2]+4243563512&4294967295,O=S+(x<<9&4294967295|x>>>23),x=N+(S^C&(O^S))+M[7]+1735328473&4294967295,N=O+(x<<14&4294967295|x>>>18),x=C+(O^S&(N^O))+M[12]+2368359562&4294967295,C=N+(x<<20&4294967295|x>>>12),x=S+(C^N^O)+M[5]+4294588738&4294967295,S=C+(x<<4&4294967295|x>>>28),x=O+(S^C^N)+M[8]+2272392833&4294967295,O=S+(x<<11&4294967295|x>>>21),x=N+(O^S^C)+M[11]+1839030562&4294967295,N=O+(x<<16&4294967295|x>>>16),x=C+(N^O^S)+M[14]+4259657740&4294967295,C=N+(x<<23&4294967295|x>>>9),x=S+(C^N^O)+M[1]+2763975236&4294967295,S=C+(x<<4&4294967295|x>>>28),x=O+(S^C^N)+M[4]+1272893353&4294967295,O=S+(x<<11&4294967295|x>>>21),x=N+(O^S^C)+M[7]+4139469664&4294967295,N=O+(x<<16&4294967295|x>>>16),x=C+(N^O^S)+M[10]+3200236656&4294967295,C=N+(x<<23&4294967295|x>>>9),x=S+(C^N^O)+M[13]+681279174&4294967295,S=C+(x<<4&4294967295|x>>>28),x=O+(S^C^N)+M[0]+3936430074&4294967295,O=S+(x<<11&4294967295|x>>>21),x=N+(O^S^C)+M[3]+3572445317&4294967295,N=O+(x<<16&4294967295|x>>>16),x=C+(N^O^S)+M[6]+76029189&4294967295,C=N+(x<<23&4294967295|x>>>9),x=S+(C^N^O)+M[9]+3654602809&4294967295,S=C+(x<<4&4294967295|x>>>28),x=O+(S^C^N)+M[12]+3873151461&4294967295,O=S+(x<<11&4294967295|x>>>21),x=N+(O^S^C)+M[15]+530742520&4294967295,N=O+(x<<16&4294967295|x>>>16),x=C+(N^O^S)+M[2]+3299628645&4294967295,C=N+(x<<23&4294967295|x>>>9),x=S+(N^(C|~O))+M[0]+4096336452&4294967295,S=C+(x<<6&4294967295|x>>>26),x=O+(C^(S|~N))+M[7]+1126891415&4294967295,O=S+(x<<10&4294967295|x>>>22),x=N+(S^(O|~C))+M[14]+2878612391&4294967295,N=O+(x<<15&4294967295|x>>>17),x=C+(O^(N|~S))+M[5]+4237533241&4294967295,C=N+(x<<21&4294967295|x>>>11),x=S+(N^(C|~O))+M[12]+1700485571&4294967295,S=C+(x<<6&4294967295|x>>>26),x=O+(C^(S|~N))+M[3]+2399980690&4294967295,O=S+(x<<10&4294967295|x>>>22),x=N+(S^(O|~C))+M[10]+4293915773&4294967295,N=O+(x<<15&4294967295|x>>>17),x=C+(O^(N|~S))+M[1]+2240044497&4294967295,C=N+(x<<21&4294967295|x>>>11),x=S+(N^(C|~O))+M[8]+1873313359&4294967295,S=C+(x<<6&4294967295|x>>>26),x=O+(C^(S|~N))+M[15]+4264355552&4294967295,O=S+(x<<10&4294967295|x>>>22),x=N+(S^(O|~C))+M[6]+2734768916&4294967295,N=O+(x<<15&4294967295|x>>>17),x=C+(O^(N|~S))+M[13]+1309151649&4294967295,C=N+(x<<21&4294967295|x>>>11),x=S+(N^(C|~O))+M[4]+4149444226&4294967295,S=C+(x<<6&4294967295|x>>>26),x=O+(C^(S|~N))+M[11]+3174756917&4294967295,O=S+(x<<10&4294967295|x>>>22),x=N+(S^(O|~C))+M[2]+718787259&4294967295,N=O+(x<<15&4294967295|x>>>17),x=C+(O^(N|~S))+M[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(N+(x<<21&4294967295|x>>>11))&4294967295,A.g[2]=A.g[2]+N&4294967295,A.g[3]=A.g[3]+O&4294967295}a.prototype.v=function(A,S){S===void 0&&(S=A.length);const C=S-this.blockSize,M=this.C;let N=this.h,O=0;for(;O<S;){if(N==0)for(;O<=C;)s(this,A,O),O+=this.blockSize;if(typeof A=="string"){for(;O<S;)if(M[N++]=A.charCodeAt(O++),N==this.blockSize){s(this,M),N=0;break}}else for(;O<S;)if(M[N++]=A[O++],N==this.blockSize){s(this,M),N=0;break}}this.h=N,this.o+=S},a.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;S=this.o*8;for(var C=A.length-8;C<A.length;++C)A[C]=S&255,S/=256;for(this.v(A),A=Array(16),S=0,C=0;C<4;++C)for(let M=0;M<32;M+=8)A[S++]=this.g[C]>>>M&255;return A};function l(A,S){var C=d;return Object.prototype.hasOwnProperty.call(C,A)?C[A]:C[A]=S(A)}function c(A,S){this.h=S;const C=[];let M=!0;for(let N=A.length-1;N>=0;N--){const O=A[N]|0;M&&O==S||(C[N]=O,M=!1)}this.g=C}var d={};function p(A){return-128<=A&&A<128?l(A,function(S){return new c([S|0],S<0?-1:0)}):new c([A|0],A<0?-1:0)}function g(A){if(isNaN(A)||!isFinite(A))return E;if(A<0)return j(g(-A));const S=[];let C=1;for(let M=0;A>=C;M++)S[M]=A/C|0,C*=4294967296;return new c(S,0)}function _(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return j(_(A.substring(1),S));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(S,8));let M=E;for(let O=0;O<A.length;O+=8){var N=Math.min(8,A.length-O);const x=parseInt(A.substring(O,O+N),S);N<8?(N=g(Math.pow(S,N)),M=M.j(N).add(g(x))):(M=M.j(C),M=M.add(g(x)))}return M}var E=p(0),b=p(1),R=p(16777216);n=c.prototype,n.m=function(){if(F(this))return-j(this).m();let A=0,S=1;for(let C=0;C<this.g.length;C++){const M=this.i(C);A+=(M>=0?M:4294967296+M)*S,S*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(L(this))return"0";if(F(this))return"-"+j(this).toString(A);const S=g(Math.pow(A,6));var C=this;let M="";for(;;){const N=te(C,S).g;C=K(C,N.j(S));let O=((C.g.length>0?C.g[0]:C.h)>>>0).toString(A);if(C=N,L(C))return O+M;for(;O.length<6;)O="0"+O;M=O+M}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function L(A){if(A.h!=0)return!1;for(let S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function F(A){return A.h==-1}n.l=function(A){return A=K(this,A),F(A)?-1:L(A)?0:1};function j(A){const S=A.g.length,C=[];for(let M=0;M<S;M++)C[M]=~A.g[M];return new c(C,~A.h).add(b)}n.abs=function(){return F(this)?j(this):this},n.add=function(A){const S=Math.max(this.g.length,A.g.length),C=[];let M=0;for(let N=0;N<=S;N++){let O=M+(this.i(N)&65535)+(A.i(N)&65535),x=(O>>>16)+(this.i(N)>>>16)+(A.i(N)>>>16);M=x>>>16,O&=65535,x&=65535,C[N]=x<<16|O}return new c(C,C[C.length-1]&-2147483648?-1:0)};function K(A,S){return A.add(j(S))}n.j=function(A){if(L(this)||L(A))return E;if(F(this))return F(A)?j(this).j(j(A)):j(j(this).j(A));if(F(A))return j(this.j(j(A)));if(this.l(R)<0&&A.l(R)<0)return g(this.m()*A.m());const S=this.g.length+A.g.length,C=[];for(var M=0;M<2*S;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(let N=0;N<A.g.length;N++){const O=this.i(M)>>>16,x=this.i(M)&65535,Ee=A.i(N)>>>16,ke=A.i(N)&65535;C[2*M+2*N]+=x*ke,B(C,2*M+2*N),C[2*M+2*N+1]+=O*ke,B(C,2*M+2*N+1),C[2*M+2*N+1]+=x*Ee,B(C,2*M+2*N+1),C[2*M+2*N+2]+=O*Ee,B(C,2*M+2*N+2)}for(A=0;A<S;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=S;A<2*S;A++)C[A]=0;return new c(C,0)};function B(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function $(A,S){this.g=A,this.h=S}function te(A,S){if(L(S))throw Error("division by zero");if(L(A))return new $(E,E);if(F(A))return S=te(j(A),S),new $(j(S.g),j(S.h));if(F(S))return S=te(A,j(S)),new $(j(S.g),S.h);if(A.g.length>30){if(F(A)||F(S))throw Error("slowDivide_ only works with positive integers.");for(var C=b,M=S;M.l(A)<=0;)C=ae(C),M=ae(M);var N=ee(C,1),O=ee(M,1);for(M=ee(M,2),C=ee(C,2);!L(M);){var x=O.add(M);x.l(A)<=0&&(N=N.add(C),O=x),M=ee(M,1),C=ee(C,1)}return S=K(A,N.j(S)),new $(N,S)}for(N=E;A.l(S)>=0;){for(C=Math.max(1,Math.floor(A.m()/S.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),O=g(C),x=O.j(S);F(x)||x.l(A)>0;)C-=M,O=g(C),x=O.j(S);L(O)&&(O=b),N=N.add(O),A=K(A,x)}return new $(N,A)}n.B=function(A){return te(this,A).h},n.and=function(A){const S=Math.max(this.g.length,A.g.length),C=[];for(let M=0;M<S;M++)C[M]=this.i(M)&A.i(M);return new c(C,this.h&A.h)},n.or=function(A){const S=Math.max(this.g.length,A.g.length),C=[];for(let M=0;M<S;M++)C[M]=this.i(M)|A.i(M);return new c(C,this.h|A.h)},n.xor=function(A){const S=Math.max(this.g.length,A.g.length),C=[];for(let M=0;M<S;M++)C[M]=this.i(M)^A.i(M);return new c(C,this.h^A.h)};function ae(A){const S=A.g.length+1,C=[];for(let M=0;M<S;M++)C[M]=A.i(M)<<1|A.i(M-1)>>>31;return new c(C,A.h)}function ee(A,S){const C=S>>5;S%=32;const M=A.g.length-C,N=[];for(let O=0;O<M;O++)N[O]=S>0?A.i(O+C)>>>S|A.i(O+C+1)<<32-S:A.i(O+C);return new c(N,A.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,VA=a,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,ds=c}).apply(typeof Zb<"u"?Zb:typeof self<"u"?self:typeof window<"u"?window:{});var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kA,Qu,LA,Df,Yg,UA,jA,zA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof gf=="object"&&gf];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=t(this);function s(h,y){if(y)e:{var T=a;h=h.split(".");for(var D=0;D<h.length-1;D++){var Q=h[D];if(!(Q in T))break e;T=T[Q]}h=h[h.length-1],D=T[h],y=y(D),y!=D&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(y){var T=[],D;for(D in y)Object.prototype.hasOwnProperty.call(y,D)&&T.push([D,y[D]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,T){return h.call.apply(h.bind,arguments)}function g(h,y,T){return g=p,g.apply(null,arguments)}function _(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function E(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(D,Q,re){for(var be=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)be[Ze-2]=arguments[Ze];return y.prototype[Q].apply(D,be)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const T=Array(y);for(let D=0;D<y;D++)T[D]=h[D];return T}return[]}function L(h,y){for(let D=1;D<arguments.length;D++){const Q=arguments[D];var T=typeof Q;if(T=T!="object"?T:Q?Array.isArray(Q)?"array":T:"null",T=="array"||T=="object"&&typeof Q.length=="number"){T=h.length||0;const re=Q.length||0;h.length=T+re;for(let be=0;be<re;be++)h[T+be]=Q[be]}else h.push(Q)}}class F{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function j(h){c.setTimeout(()=>{throw h},0)}function K(){var h=A;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class B{constructor(){this.h=this.g=null}add(y,T){const D=$.get();D.set(y,T),this.h?this.h.next=D:this.g=D,this.h=D}}var $=new F(()=>new te,h=>h.reset());class te{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ee=!1,A=new B,S=()=>{const h=Promise.resolve(void 0);ae=()=>{h.then(C)}};function C(){for(var h;h=K();){try{h.h.call(h.g)}catch(T){j(T)}var y=$;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ee=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function Ee(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Ee,N),Ee.prototype.init=function(h,y){const T=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),Y=0;function de(h,y,T,D,Q){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!D,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function ye(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Le(h,y,T){for(const D in h)y.call(T,h[D],D,h)}function Pe(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function U(h){const y={};for(const T in h)y[T]=h[T];return y}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,y){let T,D;for(let Q=1;Q<arguments.length;Q++){D=arguments[Q];for(T in D)h[T]=D[T];for(let re=0;re<q.length;re++)T=q[re],Object.prototype.hasOwnProperty.call(D,T)&&(h[T]=D[T])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,T,D,Q){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const be=Te(h,y,D,Q);return be>-1?(y=h[be],T||(y.fa=!1)):(y=new de(y,this.src,re,!!D,Q),y.fa=T,h.push(y)),y};function pe(h,y){const T=y.type;if(T in h.g){var D=h.g[T],Q=Array.prototype.indexOf.call(D,y,void 0),re;(re=Q>=0)&&Array.prototype.splice.call(D,Q,1),re&&(ye(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Te(h,y,T,D){for(let Q=0;Q<h.length;++Q){const re=h[Q];if(!re.da&&re.listener==y&&re.capture==!!T&&re.ha==D)return Q}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Ke={};function ot(h,y,T,D,Q){if(Array.isArray(y)){for(let re=0;re<y.length;re++)ot(h,y[re],T,D,Q);return null}return T=we(T),h&&h[ke]?h.J(y,T,d(D)?!!D.capture:!1,Q):Yt(h,y,T,!1,D,Q)}function Yt(h,y,T,D,Q,re){if(!y)throw Error("Invalid event type");const be=d(Q)?!!Q.capture:!!Q;let Ze=ge(h);if(Ze||(h[Ue]=Ze=new ce(h)),T=Ze.add(y,T,D,be,re),T.proxy)return T;if(D=In(),T.proxy=D,D.src=h,D.listener=T,h.addEventListener)O||(Q=be),Q===void 0&&(Q=!1),h.addEventListener(y.toString(),D,Q);else if(h.attachEvent)h.attachEvent(Qt(y.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function In(){function h(T){return y.call(h.src,h.listener,T)}const y=ne;return h}function Et(h,y,T,D,Q){if(Array.isArray(y))for(var re=0;re<y.length;re++)Et(h,y[re],T,D,Q);else D=d(D)?!!D.capture:!!D,T=we(T),h&&h[ke]?(h=h.i,re=String(y).toString(),re in h.g&&(y=h.g[re],T=Te(y,T,D,Q),T>-1&&(ye(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[re],h.h--)))):h&&(h=ge(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Te(y,T,D,Q)),(T=h>-1?y[h]:null)&&bn(T))}function bn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ke])pe(y.i,h);else{var T=h.type,D=h.proxy;y.removeEventListener?y.removeEventListener(T,D,h.capture):y.detachEvent?y.detachEvent(Qt(T),D):y.addListener&&y.removeListener&&y.removeListener(D),(T=ge(y))?(pe(T,h),T.h==0&&(T.src=null,y[Ue]=null)):ye(h)}}}function Qt(h){return h in Ke?Ke[h]:Ke[h]="on"+h}function ne(h,y){if(h.da)h=!0;else{y=new Ee(y,this);const T=h.listener,D=h.ha||h.src;h.fa&&bn(h),h=T.call(D,y)}return h}function ge(h){return h=h[Ue],h instanceof ce?h:null}var Ve="__closure_events_fn_"+(Math.random()*1e9>>>0);function we(h){return typeof h=="function"?h:(h[Ve]||(h[Ve]=function(y){return h.handleEvent(y)}),h[Ve])}function Ae(){M.call(this),this.i=new ce(this),this.M=this,this.G=null}E(Ae,M),Ae.prototype[ke]=!0,Ae.prototype.removeEventListener=function(h,y,T,D){Et(this,h,y,T,D)};function Fe(h,y){var T,D=h.G;if(D)for(T=[];D;D=D.G)T.push(D);if(h=h.M,D=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var Q=y;y=new N(D,h),oe(y,Q)}Q=!0;let re,be;if(T)for(be=T.length-1;be>=0;be--)re=y.g=T[be],Q=Lt(re,D,!0,y)&&Q;if(re=y.g=h,Q=Lt(re,D,!0,y)&&Q,Q=Lt(re,D,!1,y)&&Q,T)for(be=0;be<T.length;be++)re=y.g=T[be],Q=Lt(re,D,!1,y)&&Q}Ae.prototype.N=function(){if(Ae.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let D=0;D<T.length;D++)ye(T[D]);delete h.g[y],h.h--}}this.G=null},Ae.prototype.J=function(h,y,T,D){return this.i.add(String(h),y,!1,T,D)},Ae.prototype.K=function(h,y,T,D){return this.i.add(String(h),y,!0,T,D)};function Lt(h,y,T,D){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let Q=!0;for(let re=0;re<y.length;++re){const be=y[re];if(be&&!be.da&&be.capture==T){const Ze=be.listener,un=be.ha||be.src;be.fa&&pe(h.i,be),Q=Ze.call(un,D)!==!1&&Q}}return Q&&!D.defaultPrevented}function Rt(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function je(h){h.g=Rt(()=>{h.g=null,h.i&&(h.i=!1,je(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Ye extends M{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:je(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(h){M.call(this),this.h=h,this.g={}}E(Dt,M);var rr=[];function Qn(h){Le(h.g,function(y,T){this.g.hasOwnProperty(T)&&bn(y)},h),h.g={}}Dt.prototype.N=function(){Dt.Z.N.call(this),Qn(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=c.JSON.stringify,Sn=c.JSON.parse,Rs=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function So(){}function Ea(){}var pr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ut(){N.call(this,"d")}E(Ut,N);function Xn(){N.call(this,"c")}E(Xn,N);var Xt={},Cs=null;function Ta(){return Cs=Cs||new Ae}Xt.Ia="serverreachability";function Is(h){N.call(this,Xt.Ia,h)}E(Is,N);function Wn(h){const y=Ta();Fe(y,new Is(y))}Xt.STAT_EVENT="statevent";function pi(h,y){N.call(this,Xt.STAT_EVENT,h),this.stat=y}E(pi,N);function Wt(h){const y=Ta();Fe(y,new pi(y,h))}Xt.Ja="timingevent";function Pr(h,y){N.call(this,Xt.Ja,h),this.size=y}E(Pr,N);function gr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function yr(){this.g=!0}yr.prototype.ua=function(){this.g=!1};function Ao(h,y,T,D,Q,re){h.info(function(){if(h.g)if(re){var be="",Ze=re.split("&");for(let bt=0;bt<Ze.length;bt++){var un=Ze[bt].split("=");if(un.length>1){const Jt=un[0];un=un[1];const Lr=Jt.split("_");be=Lr.length>=2&&Lr[1]=="type"?be+(Jt+"="+un+"&"):be+(Jt+"=redacted&")}}}else be=null;else be=re;return"XMLHTTP REQ ("+D+") [attempt "+Q+"]: "+y+`
`+T+`
`+be})}function zi(h,y,T,D,Q,re,be){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Q+"]: "+y+`
`+T+`
`+re+" "+be})}function Jn(h,y,T,D){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ql(h,T)+(D?" "+D:"")})}function gi(h,y){h.info(function(){return"TIMEOUT: "+y})}yr.prototype.info=function(){};function Ql(h,y){if(!h.g)return y;if(!y)return null;try{const re=JSON.parse(y);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var T=re[h];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var Q=D[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let be=1;be<D.length;be++)D[be]=""}}}}return an(re)}catch{return y}}var Bi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},V={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},H;function J(){}E(J,So),J.prototype.g=function(){return new XMLHttpRequest},H=new J;function me(h){return encodeURIComponent(String(h))}function _e(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Ce(h,y,T,D){this.j=h,this.i=y,this.l=T,this.S=D||1,this.V=new Dt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ne}function Ne(){this.i=null,this.g="",this.h=!1}var ve={},Se={};function De(h,y,T){h.M=1,h.A=Ds(xt(y)),h.u=T,h.R=!0,qe(h,null)}function qe(h,y){h.F=Date.now(),Nt(h),h.B=xt(h.A);var T=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),Ro(T.i,"t",D),h.C=0,T=h.j.L,h.h=new Ne,h.g=ah(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Ye(g(h.Y,h,h.g),h.P)),y=h.V,T=h.g,D=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(rr[0]=Q.toString()),Q=rr);for(let re=0;re<Q.length;re++){const be=ot(T,Q[re],D||y.handleEvent,!1,y.h||y);if(!be)break;y.g[be.key]=be}y=h.J?U(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Wn(),Ao(h.i,h.v,h.B,h.l,h.S,h.u)}Ce.prototype.ba=function(h){h=h.target;const y=this.O;y&&ti(h)==3?y.j():this.Y(h)},Ce.prototype.Y=function(h){try{if(h==this.g)e:{const Ze=ti(this.g),un=this.g.ya(),bt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||On(this.g)))){this.K||Ze!=4||un==7||(un==8||bt<=0?Wn(3):Wn(2)),zt(this);var y=this.g.ca();this.X=y;var T=Me(this);if(this.o=y==200,zi(this.i,this.v,this.B,this.l,this.S,Ze,y),this.o){if(this.U&&!this.L){t:{if(this.g){var D,Q=this.g;if((D=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(D)){var re=D;break t}}re=null}if(h=re)Jn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Dn(this,h);else{this.o=!1,this.m=3,Wt(12),Bt(this),tt(this);break e}}if(this.R){h=!0;let Jt;for(;!this.K&&this.C<T.length;)if(Jt=it(this,T),Jt==Se){Ze==4&&(this.m=4,Wt(14),h=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==ve){this.m=4,Wt(15),Jn(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Jn(this.i,this.l,Jt,null),Dn(this,Jt);if(Qe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||T.length!=0||this.h.h||(this.m=1,Wt(16),h=!1),this.o=this.o&&h,!h)Jn(this.i,this.l,T,"[Invalid Chunked Response]"),Bt(this),tt(this);else if(T.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),iu(be),be.P=!0,Wt(11))}}else Jn(this.i,this.l,T,null),Dn(this,T);Ze==4&&Bt(this),this.o&&!this.K&&(Ze==4?th(this.j,this):(this.o=!1,Nt(this)))}else Hi(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Wt(12)):(this.m=0,Wt(13)),Bt(this),tt(this)}}}catch{}finally{}};function Me(h){if(!Qe(h))return h.g.la();const y=On(h.g);if(y==="")return"";let T="";const D=y.length,Q=ti(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Bt(h),tt(h),"";h.h.i=new c.TextDecoder}for(let re=0;re<D;re++)h.h.h=!0,T+=h.h.i.decode(y[re],{stream:!(Q&&re==D-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function Qe(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function it(h,y){var T=h.C,D=y.indexOf(`
`,T);return D==-1?Se:(T=Number(y.substring(T,D)),isNaN(T)?ve:(D+=1,D+T>y.length?Se:(y=y.slice(D,D+T),h.C=D+T,y)))}Ce.prototype.cancel=function(){this.K=!0,Bt(this)};function Nt(h){h.T=Date.now()+h.H,qt(h,h.H)}function qt(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=gr(g(h.aa,h),y)}function zt(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Ce.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(gi(this.i,this.B),this.M!=2&&(Wn(),Wt(17)),Bt(this),this.m=2,tt(this)):qt(this,this.T-h)};function tt(h){h.j.I==0||h.K||th(h.j,h)}function Bt(h){zt(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Qn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Dn(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||Fn(T.h,h))){if(!h.L&&Fn(T.h,h)&&T.I==3){try{var D=T.Ba.g.parse(y)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Q=D;if(Q[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)xo(T),Da(T);else break e;ks(T),Wt(18)}}else T.xa=Q[1],0<T.xa-T.K&&Q[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=gr(g(T.Va,T),6e3));ar(T.h)<=1&&T.ta&&(T.ta=void 0)}else Ai(T,11)}else if((h.L||T.g==h)&&xo(T),!x(y))for(Q=T.Ba.g.parse(y),y=0;y<Q.length;y++){let bt=Q[y];const Jt=bt[0];if(!(Jt<=T.K))if(T.K=Jt,bt=bt[1],T.I==2)if(bt[0]=="c"){T.M=bt[1],T.ba=bt[2];const Lr=bt[3];Lr!=null&&(T.ka=Lr,T.j.info("VER="+T.ka));const wi=bt[4];wi!=null&&(T.za=wi,T.j.info("SVER="+T.za));const ni=bt[5];ni!=null&&typeof ni=="number"&&ni>0&&(D=1.5*ni,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const ri=h.g;if(ri){const Ls=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ls){var re=D.h;re.g||Ls.indexOf("spdy")==-1&&Ls.indexOf("quic")==-1&&Ls.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(_r(re,re.h),re.h=null))}if(D.G){const Oo=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;Oo&&(D.wa=Oo,Tt(D.J,D.G,Oo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var be=h;if(D.na=ih(D,D.L?D.ba:null,D.W),be.L){yi(D.h,be);var Ze=be,un=D.O;un&&(Ze.H=un),Ze.D&&(zt(Ze),Nt(Ze)),D.g=be}else Zc(D);T.i.length>0&&Si(T)}else bt[0]!="stop"&&bt[0]!="close"||Ai(T,7);else T.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?Ai(T,7):nu(T):bt[0]!="noop"&&T.l&&T.l.qa(bt),T.A=0)}}Wn(4)}catch{}}var Ft=class{constructor(h,y){this.g=h,this.map=y}};function ir(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ar(h){return h.h?1:h.g?h.g.size:0}function Fn(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function _r(h,y){h.g?h.g.add(y):h.h=y}function yi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ir.prototype.cancel=function(){if(this.i=_i(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function _i(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return R(h.i)}var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function en(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const D=h[T].indexOf("=");let Q,re=null;D>=0?(Q=h[T].substring(0,D),re=h[T].substring(D+1)):Q=h[T],y(Q,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function mn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof mn?(this.l=h.l,nt(this,h.j),this.o=h.o,this.g=h.g,vr(this,h.u),this.h=h.h,ba(this,Wc(h.i)),this.m=h.m):h&&(y=String(h).match(st))?(this.l=!1,nt(this,y[1]||"",!0),this.o=vi(y[2]||""),this.g=vi(y[3]||"",!0),vr(this,y[4]),this.h=vi(y[5]||"",!0),ba(this,y[6]||"",!0),this.m=vi(y[7]||"")):(this.l=!1,this.i=new Aa(null,this.l))}mn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ns(y,wo,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ns(y,wo,!0),"@"),h.push(me(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Ns(T,T.charAt(0)=="/"?Xl:Yc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Ns(T,Qc)),h.join("")},mn.prototype.resolve=function(h){const y=xt(this);let T=!!h.j;T?nt(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var D=h.h;if(T)vr(y,h.u);else if(T=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var Q=y.h.lastIndexOf("/");Q!=-1&&(D=y.h.slice(0,Q+1)+D)}if(Q=D,Q==".."||Q==".")D="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){D=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const re=[];for(let be=0;be<Q.length;){const Ze=Q[be++];Ze=="."?D&&be==Q.length&&re.push(""):Ze==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),D&&be==Q.length&&re.push("")):(re.push(Ze),D=!0)}D=re.join("/")}else D=Q}return T?y.h=D:T=h.i.toString()!=="",T?ba(y,Wc(h.i)):T=!!h.m,T&&(y.m=h.m),y};function xt(h){return new mn(h)}function nt(h,y,T){h.j=T?vi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function vr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function ba(h,y,T){y instanceof Aa?(h.i=y,Co(h.i,h.l)):(T||(y=Ns(y,Sa)),h.i=new Aa(y,h.l))}function Tt(h,y,T){h.i.set(y,T)}function Ds(h){return Tt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function vi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ns(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,sr),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function sr(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var wo=/[#\/\?@]/g,Yc=/[#\?:]/g,Xl=/[#\?]/g,Sa=/[#\?@]/g,Qc=/#/g;function Aa(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function or(h){h.g||(h.g=new Map,h.h=0,h.i&&en(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=Aa.prototype,n.add=function(h,y){or(this),this.i=null,h=wa(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function Xc(h,y){or(h),y=wa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Wl(h,y){return or(h),y=wa(h,y),h.g.has(y)}n.forEach=function(h,y){or(this),this.g.forEach(function(T,D){T.forEach(function(Q){h.call(y,Q,D,this)},this)},this)};function Jl(h,y){or(h);let T=[];if(typeof y=="string")Wl(h,y)&&(T=T.concat(h.g.get(wa(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}n.set=function(h,y){return or(this),this.i=null,h=wa(this,h),Wl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=Jl(this,h),h.length>0?String(h[0]):y):y};function Ro(h,y,T){Xc(h,y),T.length>0&&(h.i=null,h.g.set(wa(h,y),R(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let D=0;D<y.length;D++){var T=y[D];const Q=me(T);T=Jl(this,T);for(let re=0;re<T.length;re++){let be=Q;T[re]!==""&&(be+="="+me(T[re])),h.push(be)}}return this.i=h.join("&")};function Wc(h){const y=new Aa;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function wa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Co(h,y){y&&!h.j&&(or(h),h.i=null,h.g.forEach(function(T,D){const Q=D.toLowerCase();D!=Q&&(Xc(this,D),Ro(this,Q,T))},h)),h.j=y}function Zr(h,y){const T=new yr;if(c.Image){const D=new Image;D.onload=_(Vr,T,"TestLoadImage: loaded",!0,y,D),D.onerror=_(Vr,T,"TestLoadImage: error",!1,y,D),D.onabort=_(Vr,T,"TestLoadImage: abort",!1,y,D),D.ontimeout=_(Vr,T,"TestLoadImage: timeout",!1,y,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else y(!1)}function Zl(h,y){const T=new yr,D=new AbortController,Q=setTimeout(()=>{D.abort(),Vr(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:D.signal}).then(re=>{clearTimeout(Q),re.ok?Vr(T,"TestPingServer: ok",!0,y):Vr(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Q),Vr(T,"TestPingServer: error",!1,y)})}function Vr(h,y,T,D,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),D(T)}catch{}}function Ra(){this.g=new Rs}function Ei(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ei,So),Ei.prototype.g=function(){return new xs(this.i,this.h)};function xs(h,y){Ae.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(xs,Ae),n=xs.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ei(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ca(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Io(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Io(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ca(this):ei(this),this.readyState==3&&Io(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Ca(this))},n.Na=function(h){this.g&&(this.response=h,Ca(this))},n.ga=function(){this.g&&Ca(this)};function Ca(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ei(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function ei(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function kr(h){let y="";return Le(h,function(T,D){y+=D,y+=":",y+=T,y+=`\r
`}),y}function Os(h,y,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=kr(T),typeof h=="string"?T!=null&&me(T):Tt(h,y,T))}function Ot(h){Ae.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Ot,Ae);var Ti=/^https?$/i,eu=["POST","PUT"];n=Ot.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():H.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(re){Ms(this,re);return}if(h=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Q in D)T.set(Q,D[Q]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const re of D.keys())T.set(re,D.get(re));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),Q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(eu,y,void 0)>=0)||D||Q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,be]of T)this.g.setRequestHeader(re,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Ms(this,re)}};function Ms(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,tu(h),Fi(h)}function tu(h){h.A||(h.A=!0,Fe(h,"complete"),Fe(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Fe(this,"complete"),Fe(this,"abort"),Fi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fi(this,!0)),Ot.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ps(this):this.Xa())},n.Xa=function(){Ps(this)};function Ps(h){if(h.h&&typeof l<"u"){if(h.v&&ti(h)==4)setTimeout(h.Ca.bind(h),0);else if(Fe(h,"readystatechange"),ti(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var D;if(D=re===0){let be=String(h.D).match(st)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),D=!Ti.test(be?be.toLowerCase():"")}T=D}if(T)Fe(h,"complete"),Fe(h,"success");else{h.o=6;try{var Q=ti(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",tu(h)}}finally{Fi(h)}}}}function Fi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||Fe(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ti(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ti(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Sn(y)}};function On(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Hi(h){const y={};h=(h.g&&ti(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(x(h[D]))continue;var T=_e(h[D]);const Q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=y[Q]||[];y[Q]=re,re.push(T)}Pe(y,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Ia(h){this.za=0,this.i=[],this.j=new yr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bi("baseRetryDelayMs",5e3,h),this.Za=bi("retryDelaySeedMs",1e4,h),this.Ta=bi("forwardChannelMaxRetries",2,h),this.va=bi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ir(h&&h.concurrentRequestLimit),this.Ba=new Ra,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ia.prototype,n.ka=8,n.I=1,n.connect=function(h,y,T,D){Wt(0),this.W=h,this.H=y||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=ih(this,null,this.W),Si(this)};function nu(h){if(Do(h),h.I==3){var y=h.V++,T=xt(h.J);if(Tt(T,"SID",h.M),Tt(T,"RID",y),Tt(T,"TYPE","terminate"),Vs(h,T),y=new Ce(h,h.j,y),y.M=2,y.A=Ds(xt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=ah(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Nt(y)}rh(h)}function Da(h){h.g&&(iu(h),h.g.cancel(),h.g=null)}function Do(h){Da(h),h.v&&(c.clearTimeout(h.v),h.v=null),xo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Si(h){if(!Bn(h.h)&&!h.m){h.m=!0;var y=h.Ea;ae||S(),ee||(ae(),ee=!0),A.add(y,h),h.D=0}}function No(h,y){return ar(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=gr(g(h.Ea,h,y),nh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new Ce(this,this.j,h);let re=this.o;if(this.U&&(re?(re=U(re),oe(re,this.U)):re=this.U),this.u!==null||this.R||(Q.J=re,re=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(y+=D,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=Jc(this,Q,y),T=xt(this.J),Tt(T,"RID",h),Tt(T,"CVER",22),this.G&&Tt(T,"X-HTTP-Session-Id",this.G),Vs(this,T),re&&(this.R?y="headers="+me(kr(re))+"&"+y:this.u&&Os(T,this.u,re)),_r(this.h,Q),this.Ra&&Tt(T,"TYPE","init"),this.S?(Tt(T,"$req",y),Tt(T,"SID","null"),Q.U=!0,De(Q,T,null)):De(Q,T,y),this.I=2}}else this.I==3&&(h?ru(this,h):this.i.length==0||Bn(this.h)||ru(this))};function ru(h,y){var T;y?T=y.l:T=h.V++;const D=xt(h.J);Tt(D,"SID",h.M),Tt(D,"RID",T),Tt(D,"AID",h.K),Vs(h,D),h.u&&h.o&&Os(D,h.u,h.o),T=new Ce(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Jc(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),_r(h.h,T),De(T,D,y)}function Vs(h,y){h.H&&Le(h.H,function(T,D){Tt(y,D,T)}),h.l&&Le({},function(T,D){Tt(y,D,T)})}function Jc(h,y,T){T=Math.min(h.i.length,T);const D=h.l?g(h.l.Ka,h.l,h):null;e:{var Q=h.i;let Ze=-1;for(;;){const un=["count="+T];Ze==-1?T>0?(Ze=Q[0].g,un.push("ofs="+Ze)):Ze=0:un.push("ofs="+Ze);let bt=!0;for(let Jt=0;Jt<T;Jt++){var re=Q[Jt].g;const Lr=Q[Jt].map;if(re-=Ze,re<0)Ze=Math.max(0,Q[Jt].g-100),bt=!1;else try{re="req"+re+"_"||"";try{var be=Lr instanceof Map?Lr:Object.entries(Lr);for(const[wi,ni]of be){let ri=ni;d(ni)&&(ri=an(ni)),un.push(re+wi+"="+encodeURIComponent(ri))}}catch(wi){throw un.push(re+"type="+encodeURIComponent("_badmap")),wi}}catch{D&&D(Lr)}}if(bt){be=un.join("&");break e}}be=void 0}return h=h.i.splice(0,T),y.G=h,be}function Zc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ae||S(),ee||(ae(),ee=!0),A.add(y,h),h.A=0}}function ks(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=gr(g(h.Da,h),nh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,eh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=gr(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Wt(10),Da(this),eh(this))};function iu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function eh(h){h.g=new Ce(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=xt(h.na);Tt(y,"RID","rpc"),Tt(y,"SID",h.M),Tt(y,"AID",h.K),Tt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Tt(y,"TO",h.ia),Tt(y,"TYPE","xmlhttp"),Vs(h,y),h.u&&h.o&&Os(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=Ds(xt(y)),T.u=null,T.R=!0,qe(T,h)}n.Va=function(){this.C!=null&&(this.C=null,Da(this),ks(this),Wt(19))};function xo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function th(h,y){var T=null;if(h.g==y){xo(h),iu(h),h.g=null;var D=2}else if(Fn(h.h,y))T=y.G,yi(h.h,y),D=1;else return;if(h.I!=0){if(y.o)if(D==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var Q=h.D;D=Ta(),Fe(D,new Pr(D,T)),Si(h)}else Zc(h);else if(Q=y.m,Q==3||Q==0&&y.X>0||!(D==1&&No(h,y)||D==2&&ks(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),Q){case 1:Ai(h,5);break;case 4:Ai(h,10);break;case 3:Ai(h,6);break;default:Ai(h,2)}}}function nh(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function Ai(h,y){if(h.j.info("Error code "+y),y==2){var T=g(h.bb,h),D=h.Ua;const Q=!D;D=new mn(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||nt(D,"https"),Ds(D),Q?Zr(D.toString(),T):Zl(D.toString(),T)}else Wt(2);h.I=0,h.l&&h.l.pa(y),rh(h),Do(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function rh(h){if(h.I=0,h.ja=[],h.l){const y=_i(h.h);(y.length!=0||h.i.length!=0)&&(L(h.ja,y),L(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function ih(h,y,T){var D=T instanceof mn?xt(T):new mn(T);if(D.g!="")y&&(D.g=y+"."+D.g),vr(D,D.u);else{var Q=c.location;D=Q.protocol,y=y?y+"."+Q.hostname:Q.hostname,Q=+Q.port;const re=new mn(null);D&&nt(re,D),y&&(re.g=y),Q&&vr(re,Q),T&&(re.h=T),D=re}return T=h.G,y=h.wa,T&&y&&Tt(D,T,y),Tt(D,"VER",h.ka),Vs(h,D),D}function ah(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Ot(new Ei({ab:T})):new Ot(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function sh(){}n=sh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Na(){}Na.prototype.g=function(h,y){return new Zn(h,y)};function Zn(h,y){Ae.call(this),this.g=new Ia(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!x(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new qi(this)}E(Zn,Ae),Zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){nu(this.g)},Zn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=an(h),h=T);y.i.push(new Ft(y.Ya++,h)),y.I==3&&Si(y)},Zn.prototype.N=function(){this.g.l=null,delete this.j,nu(this.g),delete this.g,Zn.Z.N.call(this)};function oh(h){Ut.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(oh,Ut);function lh(){Xn.call(this),this.status=1}E(lh,Xn);function qi(h){this.g=h}E(qi,sh),qi.prototype.ra=function(){Fe(this.g,"a")},qi.prototype.qa=function(h){Fe(this.g,new oh(h))},qi.prototype.pa=function(h){Fe(this.g,new lh)},qi.prototype.oa=function(){Fe(this.g,"b")},Na.prototype.createWebChannel=Na.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,zA=function(){return new Na},jA=function(){return Ta()},UA=Xt,Yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bi.NO_ERROR=0,Bi.TIMEOUT=8,Bi.HTTP_ERROR=6,Df=Bi,V.COMPLETE="complete",LA=V,Ea.EventType=pr,pr.OPEN="a",pr.CLOSE="b",pr.ERROR="c",pr.MESSAGE="d",Ae.prototype.listen=Ae.prototype.J,Qu=Ea,Ot.prototype.listenOnce=Ot.prototype.K,Ot.prototype.getLastError=Ot.prototype.Ha,Ot.prototype.getLastErrorCode=Ot.prototype.ya,Ot.prototype.getStatus=Ot.prototype.ca,Ot.prototype.getResponseJson=Ot.prototype.La,Ot.prototype.getResponseText=Ot.prototype.la,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Fa,kA=Ot}).apply(typeof gf<"u"?gf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$n.UNAUTHENTICATED=new $n(null),$n.GOOGLE_CREDENTIALS=new $n("google-credentials-uid"),$n.FIRST_PARTY=new $n("first-party-uid"),$n.MOCK_USER=new $n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl="12.8.0";function G2(n){Fl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new My("@firebase/firestore");function fl(){return ho.logLevel}function Ie(n,...e){if(ho.logLevel<=dt.DEBUG){const t=e.map(ky);ho.debug(`Firestore (${Fl}): ${n}`,...t)}}function ma(n,...e){if(ho.logLevel<=dt.ERROR){const t=e.map(ky);ho.error(`Firestore (${Fl}): ${n}`,...t)}}function Il(n,...e){if(ho.logLevel<=dt.WARN){const t=e.map(ky);ho.warn(`Firestore (${Fl}): ${n}`,...t)}}function ky(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,BA(n,a,t)}function BA(n,e,t){let a=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw ma(a),new Error(a)}function wt(n,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,n||BA(e,s,a)}function Je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends va{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($n.UNAUTHENTICATED)))}shutdown(){}}class K2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Y2{constructor(e){this.t=e,this.currentUser=$n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(this.o===void 0,42304);let a=this.i;const s=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let l=new ha;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ha,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await s(this.currentUser)}))},d=p=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ha)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(wt(typeof a.accessToken=="string",31837,{l:a}),new FA(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new $n(e)}}class Q2{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=$n.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class X2{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new Q2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class e0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){wt(this.o===void 0,3512);const a=l=>{l.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ie("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const s=l=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new e0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(wt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new e0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=J2(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function mt(n,e){return n<e?-1:n>e?1:0}function Qg(n,e){const t=Math.min(n.length,e.length);for(let a=0;a<t;a++){const s=n.charAt(a),l=e.charAt(a);if(s!==l)return wg(s)===wg(l)?mt(s,l):wg(s)?1:-1}return mt(n.length,e.length)}const Z2=55296,eO=57343;function wg(n){const e=n.charCodeAt(0);return e>=Z2&&e<=eO}function Dl(n,e,t){return n.length===e.length&&n.every(((a,s)=>t(a,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="__name__";class Ni{constructor(e,t,a){t===void 0?t=0:t>e.length&&Ge(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Ge(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=Ni.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return mt(e.length,t.length)}static compareSegments(e,t){const a=Ni.isNumericId(e),s=Ni.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?Ni.extractNumericId(e).compare(Ni.extractNumericId(t)):Qg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class Ht extends Ni{construct(e,t,a){return new Ht(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((s=>s.length>0)))}return new Ht(t)}static emptyPath(){return new Ht([])}}const tO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends Ni{construct(e,t,a){return new jn(e,t,a)}static isValidIdentifier(e){return tO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t0}static keyField(){return new jn([t0])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new Re(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Re(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Re(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(a+=d,s++):(l(),s++)}if(l(),c)throw new Re(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(t)}static emptyPath(){return new jn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Ht.fromString(e))}static fromName(e){return new Be(Ht.fromString(e).popFirst(5))}static empty(){return new Be(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(n,e,t){if(!t)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nO(n,e,t,a){if(e===!0&&a===!0)throw new Re(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function n0(n){if(!Be.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function r0(n){if(Be.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Md(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ge(12329,{type:typeof n})}function Nr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Md(n);throw new Re(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Oc(n,e){if(!qA(n))throw new Re(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const s=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){t=`JSON missing required field: '${a}'`;break}const c=n[a];if(s&&typeof c!==s){t=`JSON field '${a}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new Re(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=-62135596800,a0=1e6;class Kt{static now(){return Kt.fromMillis(Date.now())}static fromDate(e){return Kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*a0);return new Kt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<i0)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a0}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oc(e,Kt._jsonSchema))return new Kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-i0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Kt._jsonSchemaVersion="firestore/timestamp/1.0",Kt._jsonSchema={type:Tn("string",Kt._jsonSchemaVersion),seconds:Tn("number"),nanoseconds:Tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Kt(0,0))}static max(){return new Xe(new Kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=-1;function rO(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,s=Xe.fromTimestamp(a===1e9?new Kt(t+1,0):new Kt(t,a));return new ys(s,Be.empty(),e)}function iO(n){return new ys(n.readTime,n.key,pc)}class ys{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new ys(Xe.min(),Be.empty(),pc)}static max(){return new ys(Xe.max(),Be.empty(),pc)}}function aO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(n.documentKey,e.documentKey),t!==0?t:mt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==sO)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,a)=>{t(e)}))}static reject(e){return new fe(((t,a)=>{a(e)}))}static waitFor(e){return new fe(((t,a)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(p=>a(p)))})),c=!0,l===s&&t()}))}static or(e){let t=fe.resolve(!1);for(const a of e)t=t.next((s=>s?fe.resolve(s):a()));return t}static forEach(e,t){const a=[];return e.forEach(((s,l)=>{a.push(t.call(this,s,l))})),this.waitFor(a)}static mapArray(e,t){return new fe(((a,s)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((_=>{c[g]=_,++d,d===l&&a(c)}),(_=>s(_)))}}))}static doWhile(e,t){return new fe(((a,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):a()};l()}))}}function lO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ql(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=-1;function Vd(n){return n==null}function Zf(n){return n===0&&1/n==-1/0}function uO(n){return typeof n=="number"&&Number.isInteger(n)&&!Zf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="";function cO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=s0(e)),e=hO(n.get(t),e);return s0(e)}function hO(n,e){let t=e;const a=n.length;for(let s=0;s<a;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case GA:t+="";break;default:t+=l}}return t}function s0(n){return n+GA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function As(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $A(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t){this.comparator=e,this.root=t||Un.EMPTY}insert(e,t){return new rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yf(this.root,e,this.comparator,!1)}getReverseIterator(){return new yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yf(this.root,e,this.comparator,!0)}}class yf{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Un{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??Un.RED,this.left=s??Un.EMPTY,this.right=l??Un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new Un(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Un.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new Un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new l0(this.data.getIterator())}getIteratorFrom(e){return new l0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class l0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new Ir([])}unionWith(e){let t=new wn(jn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Ir(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Dl(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new KA("Invalid base64 string: "+l):l}})(e);return new zn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new zn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zn.EMPTY_BYTE_STRING=new zn("");const fO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(n){if(wt(!!n,39018),typeof n=="string"){let e=0;const t=fO.exec(n);if(wt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:fn(n.seconds),nanos:fn(n.nanos)}}function fn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vs(n){return typeof n=="string"?zn.fromBase64String(n):zn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="server_timestamp",QA="__type__",XA="__previous_value__",WA="__local_write_time__";function jy(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[QA])==null?void 0:a.stringValue)===YA}function kd(n){const e=n.mapValue.fields[XA];return jy(e)?kd(e):e}function gc(n){const e=_s(n.mapValue.fields[WA].timestampValue);return new Kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,t,a,s,l,c,d,p,g,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_,this.apiKey=E}}const ed="(default)";class yc{constructor(e,t){this.projectId=e,this.database=t||ed}static empty(){return new yc("","")}get isDefaultDatabase(){return this.database===ed}isEqual(e){return e instanceof yc&&e.projectId===this.projectId&&e.database===this.database}}function mO(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Re(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="__type__",pO="__max__",_f={mapValue:{}},ZA="__vector__",td="value";function Es(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jy(n)?4:yO(n)?9007199254740991:gO(n)?10:11:Ge(28295,{value:n})}function Ui(n,e){if(n===e)return!0;const t=Es(n);if(t!==Es(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gc(n).isEqual(gc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=_s(s.timestampValue),d=_s(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return vs(s.bytesValue).isEqual(vs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return fn(s.geoPointValue.latitude)===fn(l.geoPointValue.latitude)&&fn(s.geoPointValue.longitude)===fn(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return fn(s.integerValue)===fn(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=fn(s.doubleValue),d=fn(l.doubleValue);return c===d?Zf(c)===Zf(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Dl(n.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if(o0(c)!==o0(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ui(c[p],d[p])))return!1;return!0})(n,e);default:return Ge(52216,{left:n})}}function _c(n,e){return(n.values||[]).find((t=>Ui(t,e)))!==void 0}function Nl(n,e){if(n===e)return 0;const t=Es(n),a=Es(e);if(t!==a)return mt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return mt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=fn(l.integerValue||l.doubleValue),p=fn(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return u0(n.timestampValue,e.timestampValue);case 4:return u0(gc(n),gc(e));case 5:return Qg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=vs(l),p=vs(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=mt(d[g],p[g]);if(_!==0)return _}return mt(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=mt(fn(l.latitude),fn(c.latitude));return d!==0?d:mt(fn(l.longitude),fn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return c0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var b,R,L,F;const d=l.fields||{},p=c.fields||{},g=(b=d[td])==null?void 0:b.arrayValue,_=(R=p[td])==null?void 0:R.arrayValue,E=mt(((L=g==null?void 0:g.values)==null?void 0:L.length)||0,((F=_==null?void 0:_.values)==null?void 0:F.length)||0);return E!==0?E:c0(g,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===_f.mapValue&&c===_f.mapValue)return 0;if(l===_f.mapValue)return 1;if(c===_f.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const b=Qg(p[E],_[E]);if(b!==0)return b;const R=Nl(d[p[E]],g[_[E]]);if(R!==0)return R}return mt(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Ge(23264,{he:t})}}function u0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return mt(n,e);const t=_s(n),a=_s(e),s=mt(t.seconds,a.seconds);return s!==0?s:mt(t.nanos,a.nanos)}function c0(n,e){const t=n.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=Nl(t[s],a[s]);if(l)return l}return mt(t.length,a.length)}function xl(n){return Xg(n)}function Xg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const a=_s(t);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return vs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=Xg(l);return a+"]"})(n.arrayValue):"mapValue"in n?(function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of a)l?l=!1:s+=",",s+=`${c}:${Xg(t.fields[c])}`;return s+"}"})(n.mapValue):Ge(61005,{value:n})}function Nf(n){switch(Es(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kd(n);return e?16+Nf(e):16;case 5:return 2*n.stringValue.length;case 6:return vs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((s,l)=>s+Nf(l)),0)})(n.arrayValue);case 10:case 11:return(function(a){let s=0;return As(a.fields,((l,c)=>{s+=l.length+Nf(c)})),s})(n.mapValue);default:throw Ge(13486,{value:n})}}function h0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wg(n){return!!n&&"integerValue"in n}function zy(n){return!!n&&"arrayValue"in n}function f0(n){return!!n&&"nullValue"in n}function d0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xf(n){return!!n&&"mapValue"in n}function gO(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[JA])==null?void 0:a.stringValue)===ZA}function rc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return As(n.mapValue.fields,((t,a)=>e.mapValue.fields[t]=rc(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rc(n.arrayValue.values[t]);return e}return{...n}}function yO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===pO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.value=e}static empty(){return new mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!xf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rc(t)}setAll(e){let t=jn.emptyPath(),a={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,a,s),a={},s=[],t=d.popLast()}c?a[d.lastSegment()]=rc(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());xf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];xf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){As(t,((s,l)=>e[s]=l));for(const s of a)delete e[s]}clone(){return new mr(rc(this.value))}}function ew(n){const e=[];return As(n.fields,((t,a)=>{const s=new jn([t]);if(xf(a)){const l=ew(a.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new Ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t,a,s,l,c,d){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Kn(e,0,Xe.min(),Xe.min(),Xe.min(),mr.empty(),0)}static newFoundDocument(e,t,a,s){return new Kn(e,1,t,Xe.min(),a,s,0)}static newNoDocument(e,t){return new Kn(e,2,t,Xe.min(),Xe.min(),mr.empty(),0)}static newUnknownDocument(e,t){return new Kn(e,3,t,Xe.min(),Xe.min(),mr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t){this.position=e,this.inclusive=t}}function m0(n,e,t){let a=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?a=Be.comparator(Be.fromName(c.referenceValue),t.key):a=Nl(c,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function p0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ui(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t="asc"){this.field=e,this.dir=t}}function _O(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{}class En extends tw{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new EO(e,t,a):t==="array-contains"?new SO(e,a):t==="in"?new AO(e,a):t==="not-in"?new wO(e,a):t==="array-contains-any"?new RO(e,a):new En(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new TO(e,a):new bO(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Nl(t,this.value)):t!==null&&Es(this.value)===Es(t)&&this.matchesComparison(Nl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fi extends tw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fi(e,t)}matches(e){return nw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nw(n){return n.op==="and"}function rw(n){return vO(n)&&nw(n)}function vO(n){for(const e of n.filters)if(e instanceof fi)return!1;return!0}function Jg(n){if(n instanceof En)return n.field.canonicalString()+n.op.toString()+xl(n.value);if(rw(n))return n.filters.map((e=>Jg(e))).join(",");{const e=n.filters.map((t=>Jg(t))).join(",");return`${n.op}(${e})`}}function iw(n,e){return n instanceof En?(function(a,s){return s instanceof En&&a.op===s.op&&a.field.isEqual(s.field)&&Ui(a.value,s.value)})(n,e):n instanceof fi?(function(a,s){return s instanceof fi&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce(((l,c,d)=>l&&iw(c,s.filters[d])),!0):!1})(n,e):void Ge(19439)}function aw(n){return n instanceof En?(function(t){return`${t.field.canonicalString()} ${t.op} ${xl(t.value)}`})(n):n instanceof fi?(function(t){return t.op.toString()+" {"+t.getFilters().map(aw).join(" ,")+"}"})(n):"Filter"}class EO extends En{constructor(e,t,a){super(e,t,a),this.key=Be.fromName(a.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class TO extends En{constructor(e,t){super(e,"in",t),this.keys=sw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class bO extends En{constructor(e,t){super(e,"not-in",t),this.keys=sw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function sw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>Be.fromName(a.referenceValue)))}class SO extends En{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zy(t)&&_c(t.arrayValue,this.value)}}class AO extends En{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_c(this.value.arrayValue,t)}}class wO extends En{constructor(e,t){super(e,"not-in",t)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_c(this.value.arrayValue,t)}}class RO extends En{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>_c(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,t=null,a=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function g0(n,e=null,t=[],a=[],s=null,l=null,c=null){return new CO(n,e,t,a,s,l,c)}function By(n){const e=Je(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>Jg(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),Vd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>xl(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>xl(a))).join(",")),e.Te=t}return e.Te}function Fy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_O(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!p0(n.startAt,e.startAt)&&p0(n.endAt,e.endAt)}function Zg(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t=null,a=[],s=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function IO(n,e,t,a,s,l,c,d){return new Mc(n,e,t,a,s,l,c,d)}function Ld(n){return new Mc(n)}function y0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DO(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ow(n){return n.collectionGroup!==null}function ic(n){const e=Je(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new wn(jn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new rd(l,a))})),t.has(jn.keyField().canonicalString())||e.Ie.push(new rd(jn.keyField(),a))}return e.Ie}function Mi(n){const e=Je(n);return e.Ee||(e.Ee=NO(e,ic(n))),e.Ee}function NO(n,e){if(n.limitType==="F")return g0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new rd(s.field,l)}));const t=n.endAt?new nd(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new nd(n.startAt.position,n.startAt.inclusive):null;return g0(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function ey(n,e){const t=n.filters.concat([e]);return new Mc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ty(n,e,t){return new Mc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ud(n,e){return Fy(Mi(n),Mi(e))&&n.limitType===e.limitType}function lw(n){return`${By(Mi(n))}|lt:${n.limitType}`}function dl(n){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((s=>aw(s))).join(", ")}]`),Vd(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>xl(s))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>xl(s))).join(",")),`Target(${a})`})(Mi(n))}; limitType=${n.limitType})`}function jd(n,e){return e.isFoundDocument()&&(function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):Be.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(n,e)&&(function(a,s){for(const l of ic(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(a,s){return!(a.startAt&&!(function(c,d,p){const g=m0(c,d,p);return c.inclusive?g<=0:g<0})(a.startAt,ic(a),s)||a.endAt&&!(function(c,d,p){const g=m0(c,d,p);return c.inclusive?g>=0:g>0})(a.endAt,ic(a),s))})(n,e)}function xO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uw(n){return(e,t)=>{let a=!1;for(const s of ic(n)){const l=OO(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function OO(n,e,t){const a=n.field.isKeyField()?Be.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Nl(p,g):Ge(42886)})(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return Ge(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,((t,a)=>{for(const[s,l]of a)e(s,l)}))}isEmpty(){return $A(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=new rn(Be.comparator);function pa(){return MO}const cw=new rn(Be.comparator);function Xu(...n){let e=cw;for(const t of n)e=e.insert(t.key,t);return e}function hw(n){let e=cw;return n.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function ro(){return ac()}function fw(){return ac()}function ac(){return new _o((n=>n.toString()),((n,e)=>n.isEqual(e)))}const PO=new rn(Be.comparator),VO=new wn(Be.comparator);function pt(...n){let e=VO;for(const t of n)e=e.add(t);return e}const kO=new wn(mt);function LO(){return kO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zf(e)?"-0":e}}function dw(n){return{integerValue:""+n}}function UO(n,e){return uO(e)?dw(e):Hy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(){this._=void 0}}function jO(n,e,t){return n instanceof id?(function(s,l){const c={fields:{[QA]:{stringValue:YA},[WA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&jy(l)&&(l=kd(l)),l&&(c.fields[XA]=l),{mapValue:c}})(t,e):n instanceof vc?pw(n,e):n instanceof Ec?gw(n,e):(function(s,l){const c=mw(s,l),d=_0(c)+_0(s.Ae);return Wg(c)&&Wg(s.Ae)?dw(d):Hy(s.serializer,d)})(n,e)}function zO(n,e,t){return n instanceof vc?pw(n,e):n instanceof Ec?gw(n,e):t}function mw(n,e){return n instanceof ad?(function(a){return Wg(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class id extends zd{}class vc extends zd{constructor(e){super(),this.elements=e}}function pw(n,e){const t=yw(e);for(const a of n.elements)t.some((s=>Ui(s,a)))||t.push(a);return{arrayValue:{values:t}}}class Ec extends zd{constructor(e){super(),this.elements=e}}function gw(n,e){let t=yw(e);for(const a of n.elements)t=t.filter((s=>!Ui(s,a)));return{arrayValue:{values:t}}}class ad extends zd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function _0(n){return fn(n.integerValue||n.doubleValue)}function yw(n){return zy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function BO(n,e){return n.field.isEqual(e.field)&&(function(a,s){return a instanceof vc&&s instanceof vc||a instanceof Ec&&s instanceof Ec?Dl(a.elements,s.elements,Ui):a instanceof ad&&s instanceof ad?Ui(a.Ae,s.Ae):a instanceof id&&s instanceof id})(n.transform,e.transform)}class FO{constructor(e,t){this.version=e,this.transformResults=t}}class xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Of(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Bd{}function _w(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new qy(n.key,xr.none()):new Pc(n.key,n.data,xr.none());{const t=n.data,a=mr.empty();let s=new wn(jn.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?a.delete(l):a.set(l,c),s=s.add(l)}return new ws(n.key,a,new Ir(s.toArray()),xr.none())}}function HO(n,e,t){n instanceof Pc?(function(s,l,c){const d=s.value.clone(),p=E0(s.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof ws?(function(s,l,c){if(!Of(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=E0(s.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(vw(s)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function sc(n,e,t,a){return n instanceof Pc?(function(l,c,d,p){if(!Of(l.precondition,c))return d;const g=l.value.clone(),_=T0(l.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,a):n instanceof ws?(function(l,c,d,p){if(!Of(l.precondition,c))return d;const g=T0(l.fieldTransforms,p,c),_=c.data;return _.setAll(vw(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,a):(function(l,c,d){return Of(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function qO(n,e){let t=null;for(const a of n.fieldTransforms){const s=e.data.field(a.field),l=mw(a.transform,s||null);l!=null&&(t===null&&(t=mr.empty()),t.set(a.field,l))}return t||null}function v0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&Dl(a,s,((l,c)=>BO(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pc extends Bd{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ws extends Bd{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function vw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}})),e}function E0(n,e,t){const a=new Map;wt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,d=e.data.field(l.field);a.set(l.field,zO(c,d,t[s]))}return a}function T0(n,e,t){const a=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);a.set(s.field,jO(l,c,e))}return a}class qy extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GO extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&HO(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=sc(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=sc(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=fw();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const p=_w(c,d);p!==null&&a.set(s.key,p),c.isValidDocument()||c.convertToNoDocument(Xe.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pt())}isEqual(e){return this.batchId===e.batchId&&Dl(this.mutations,e.mutations,((t,a)=>v0(t,a)))&&Dl(this.baseMutations,e.baseMutations,((t,a)=>v0(t,a)))}}class Gy{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){wt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let s=(function(){return PO})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,a[c].version);return new Gy(e,t,a,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn,yt;function QO(n){switch(n){case ue.OK:return Ge(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ge(15467,{code:n})}}function Ew(n){if(n===void 0)return ma("GRPC error has no .code"),ue.UNKNOWN;switch(n){case vn.OK:return ue.OK;case vn.CANCELLED:return ue.CANCELLED;case vn.UNKNOWN:return ue.UNKNOWN;case vn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case vn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case vn.INTERNAL:return ue.INTERNAL;case vn.UNAVAILABLE:return ue.UNAVAILABLE;case vn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case vn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case vn.NOT_FOUND:return ue.NOT_FOUND;case vn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case vn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case vn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case vn.ABORTED:return ue.ABORTED;case vn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case vn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case vn.DATA_LOSS:return ue.DATA_LOSS;default:return Ge(39323,{code:n})}}(yt=vn||(vn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new ds([4294967295,4294967295],0);function b0(n){const e=XO().encode(n),t=new VA;return t.update(e),new Uint8Array(t.digest())}function S0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ds([t,a],0),new ds([s,l],0)]}class $y{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new Wu(`Invalid padding: ${t}`);if(a<0)throw new Wu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Wu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new Wu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ds.fromNumber(this.ge)}ye(e,t,a){let s=e.add(t.multiply(ds.fromNumber(a)));return s.compare(WO)===1&&(s=new ds([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=b0(e),[a,s]=S0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);if(!this.we(c))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new $y(l,s,t);return a.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=b0(e),[a,s]=S0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class Wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,Vc.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Fd(Xe.min(),s,new rn(mt),pa(),pt())}}class Vc{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Vc(a,t,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,a,s){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=s}}class Tw{constructor(e,t){this.targetId=e,this.Ce=t}}class bw{constructor(e,t,a=zn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class A0{constructor(){this.ve=0,this.Fe=w0(),this.Me=zn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),t=pt(),a=pt();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:Ge(38017,{changeType:l})}})),new Vc(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=w0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class JO{constructor(e){this.Ge=e,this.ze=new Map,this.je=pa(),this.He=vf(),this.Je=vf(),this.Ze=new rn(mt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,a=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(Zg(l))if(a===0){const c=new Be(l.path);this.et(t,c,Kn.newNoDocument(c,Xe.min()))}else wt(a===1,20013,{expectedCount:a});else{const c=this._t(t);if(c!==a){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=vs(a).toUint8Array()}catch(p){if(p instanceof KA)return Il("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new $y(c,s,l)}catch(p){return Il(p instanceof Wu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let s=0;return a.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Zg(d.target)){const p=new Be(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Kn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let a=pt();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(a=a.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new Fd(e,t,this.Ze,this.je,a);return this.je=pa(),this.He=vf(),this.Je=vf(),this.Ze=new rn(mt),s}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new A0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new wn(mt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new wn(mt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new A0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function vf(){return new rn(Be.comparator)}function w0(){return new rn(Be.comparator)}const ZO={asc:"ASCENDING",desc:"DESCENDING"},eM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tM={and:"AND",or:"OR"};class nM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ny(n,e){return n.useProto3Json||Vd(e)?e:{value:e}}function sd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rM(n,e){return sd(n,e.toTimestamp())}function Pi(n){return wt(!!n,49232),Xe.fromTimestamp((function(t){const a=_s(t);return new Kt(a.seconds,a.nanos)})(n))}function Ky(n,e){return ry(n,e).canonicalString()}function ry(n,e){const t=(function(s){return new Ht(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Aw(n){const e=Ht.fromString(n);return wt(Dw(e),10190,{key:e.toString()}),e}function iy(n,e){return Ky(n.databaseId,e.path)}function Rg(n,e){const t=Aw(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(Rw(t))}function ww(n,e){return Ky(n.databaseId,e)}function iM(n){const e=Aw(n);return e.length===4?Ht.emptyPath():Rw(e)}function ay(n){return new Ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Rw(n){return wt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function R0(n,e,t){return{name:iy(n,e),fields:t.value.mapValue.fields}}function aM(n,e){let t;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ge(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(wt(_===void 0||typeof _=="string",58123),zn.fromBase64String(_||"")):(wt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),zn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?ue.UNKNOWN:Ew(g.code);return new Re(_,g.message||"")})(c);t=new bw(a,s,l,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=Rg(n,a.document.name),l=Pi(a.document.updateTime),c=a.document.createTime?Pi(a.document.createTime):Xe.min(),d=new mr({mapValue:{fields:a.document.fields}}),p=Kn.newFoundDocument(s,l,c,d),g=a.targetIds||[],_=a.removedTargetIds||[];t=new Mf(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=Rg(n,a.document),l=a.readTime?Pi(a.readTime):Xe.min(),c=Kn.newNoDocument(s,l),d=a.removedTargetIds||[];t=new Mf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=Rg(n,a.document),l=a.removedTargetIds||[];t=new Mf([],l,s,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,c=new YO(s,l),d=a.targetId;t=new Tw(d,c)}}return t}function sM(n,e){let t;if(e instanceof Pc)t={update:R0(n,e.key,e.value)};else if(e instanceof qy)t={delete:iy(n,e.key)};else if(e instanceof ws)t={update:R0(n,e.key,e.data),updateMask:pM(e.fieldMask)};else{if(!(e instanceof GO))return Ge(16599,{dt:e.type});t={verify:iy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,c){const d=c.transform;if(d instanceof id)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof vc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ec)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ad)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ge(20930,{transform:c.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:rM(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ge(27497)})(n,e.precondition)),t}function oM(n,e){return n&&n.length>0?(wt(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?Pi(s.updateTime):Pi(l);return c.isEqual(Xe.min())&&(c=Pi(l)),new FO(c,s.transformResults||[])})(t,e)))):[]}function lM(n,e){return{documents:[ww(n,e.path)]}}function uM(n,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=ww(n,s);const l=(function(g){if(g.length!==0)return Iw(fi.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:ml(b.field),direction:fM(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=ny(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:s}}function cM(n){let e=iM(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){wt(a===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const b=Cw(E);return b instanceof fi&&rw(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((b=>(function(L){return new rd(pl(L.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let b;return b=typeof E=="object"?E.value:E,Vd(b)?null:b})(t.limit));let p=null;t.startAt&&(p=(function(E){const b=!!E.before,R=E.values||[];return new nd(R,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,R=E.values||[];return new nd(R,b)})(t.endAt)),IO(e,s,c,l,d,"F",p,g)}function hM(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Cw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=pl(t.unaryFilter.field);return En.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=pl(t.unaryFilter.field);return En.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=pl(t.unaryFilter.field);return En.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=pl(t.unaryFilter.field);return En.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(n):n.fieldFilter!==void 0?(function(t){return En.create(pl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return fi.create(t.compositeFilter.filters.map((a=>Cw(a))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(t.compositeFilter.op))})(n):Ge(30097,{filter:n})}function fM(n){return ZO[n]}function dM(n){return eM[n]}function mM(n){return tM[n]}function ml(n){return{fieldPath:n.canonicalString()}}function pl(n){return jn.fromServerFormat(n.fieldPath)}function Iw(n){return n instanceof En?(function(t){if(t.op==="=="){if(d0(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NAN"}};if(f0(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(d0(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NOT_NAN"}};if(f0(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ml(t.field),op:dM(t.op),value:t.value}}})(n):n instanceof fi?(function(t){const a=t.getFilters().map((s=>Iw(s)));return a.length===1?a[0]:{compositeFilter:{op:mM(t.op),filters:a}}})(n):Ge(54877,{filter:n})}function pM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Dw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Nw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,t,a,s,l=Xe.min(),c=Xe.min(),d=zn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.yt=e}}function yM(n){const e=cM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ty(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this.Sn=new vM}addToCollectionParentIndex(e,t){return this.Sn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(ys.min())}updateCollectionGroup(e,t,a){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class vM{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new wn(Ht.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new wn(Ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xw=41943040;class dr{static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(xw,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ol(0)}static ar(){return new Ol(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="LruGarbageCollector",EM=1048576;function D0([n,e],[t,a]){const s=mt(n,t);return s===0?mt(e,a):s}class TM{constructor(e){this.Pr=e,this.buffer=new wn(D0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();D0(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bM{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ie(I0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ql(t)?Ie(I0,"Ignoring IndexedDB error during garbage collection: ",t):await Hl(t)}await this.Ar(3e5)}))}}class SM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(Pd.ce);const a=new TM(t);return this.Vr.forEachTarget(e,(s=>a.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>a.Er(s))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(C0)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,s,l,c,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(a=E,d=Date.now(),this.removeTargets(e,a,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(g=Date.now(),fl()<=dt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function AM(n,e){return new SM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this.changes=new _o((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?fe.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(a=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(a!==null&&sc(a.mutation,s,Ir.empty(),Kt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,pt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=pt()){const s=ro();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,a).next((l=>{let c=Xu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const a=ro();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,pt())))}populateOverlays(e,t,a){const s=[];return a.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,a,s){let l=pa();const c=ac(),d=(function(){return ac()})();return t.forEach(((p,g)=>{const _=a.get(g.key);s.has(g.key)&&(_===void 0||_.mutation instanceof ws)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),sc(_.mutation,g,_.mutation.getFieldMask(),Kt.now())):c.set(g.key,Ir.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new RM(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const a=ac();let s=new rn(((c,d)=>c-d)),l=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let _=a.get(p)||Ir.empty();_=d.applyToLocalView(g,_),a.set(p,_);const E=(s.get(d.batchId)||pt()).add(p);s=s.insert(d.batchId,E)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,E=fw();_.forEach((b=>{if(!l.has(b)){const R=_w(t.get(b),a.get(b));R!==null&&E.set(b,R),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return fe.waitFor(c)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,s){return DO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ow(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):fe.resolve(ro());let d=pc,p=l;return c.next((g=>fe.forEach(g,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?fe.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{p=p.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,pt()))).next((_=>({batchId:d,changes:hw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next((a=>{let s=Xu();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let c=Xu();return this.indexManager.getCollectionParents(e,l).next((d=>fe.forEach(d,(p=>{const g=(function(E,b){return new Mc(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,a,s).next((_=>{_.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s)))).next((c=>{l.forEach(((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Kn.newInvalidDocument(_)))}));let d=Xu();return c.forEach(((p,g)=>{const _=l.get(p);_!==void 0&&sc(_.mutation,g,Ir.empty(),Kt.now()),jd(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return fe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Pi(s.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:yM(s.bundledQuery),readTime:Pi(s.readTime)}})(t)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(){this.overlays=new rn(Be.comparator),this.Lr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const a=ro();return fe.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((s,l)=>{this.bt(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.Lr.get(a);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),fe.resolve()}getOverlaysForCollection(e,t,a){const s=ro(),l=t.length+1,c=new Be(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>a&&s.set(p.getKey(),p)}return fe.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new rn(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let _=l.get(g.largestBatchId);_===null&&(_=ro(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=ro(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=s)););return fe.resolve(d)}bt(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(a.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(a.key,new KO(t,a));let l=this.Lr.get(t);l===void 0&&(l=pt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.sessionToken=zn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(){this.kr=new wn(xn.Kr),this.qr=new wn(xn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new xn(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new xn(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new Be(new Ht([])),a=new xn(t,e),s=new xn(t,e+1),l=[];return this.qr.forEachInRange([a,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Be(new Ht([])),a=new xn(t,e),s=new xn(t,e+1);let l=pt();return this.qr.forEachInRange([a,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new xn(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class xn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Be.comparator(e.key,t.key)||mt(e.Hr,t.Hr)}static Ur(e,t){return mt(e.Hr,t.Hr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new wn(xn.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new $O(l,t,a,s);this.mutationQueue.push(c);for(const d of s)this.Jr=this.Jr.add(new xn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.Xr(a),l=s<0?0:s;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Uy:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new xn(t,0),s=new xn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,s],(c=>{const d=this.Zr(c.Hr);l.push(d)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new wn(mt);return t.forEach((s=>{const l=new xn(s,0),c=new xn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{a=a.add(d.Hr)}))})),fe.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;Be.isDocumentKey(l)||(l=l.child(""));const c=new xn(new Be(l),0);let d=new wn(mt);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!a.isPrefixOf(g)&&(g.length===s&&(d=d.add(p.Hr)),!0)}),c),fe.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((a=>{const s=this.Zr(a);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){wt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return fe.forEach(t.mutations,(s=>{const l=new xn(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new xn(t,0),s=this.Jr.firstAfterOrEqual(a);return fe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.ti=e,this.docs=(function(){return new rn(Be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return fe.resolve(a?a.document.mutableCopy():Kn.newInvalidDocument(t))}getEntries(e,t){let a=pa();return t.forEach((s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():Kn.newInvalidDocument(s))})),fe.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=pa();const c=t.path,d=new Be(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||aO(iO(_),a)<=0||(s.has(_.key)||jd(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,a,s){Ge(9500)}ni(e,t){return fe.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new MM(this)}getSize(e){return fe.resolve(this.size)}}class MM extends wM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(a)})),fe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.persistence=e,this.ri=new _o((t=>By(t)),Fy),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ii=0,this.si=new Yy,this.targetCount=0,this.oi=Ol._r()}forEachTarget(e,t){return this.ri.forEach(((a,s)=>t(s))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),fe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Ol(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.lr(t),fe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&a.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),fe.waitFor(l).next((()=>s))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return fe.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),fe.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return fe.resolve(a)}containsKey(e,t){return fe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t){this._i={},this.overlays={},this.ai=new Pd(0),this.ui=!1,this.ui=!0,this.ci=new NM,this.referenceDelegate=e(this),this.li=new PM(this),this.indexManager=new _M,this.remoteDocumentCache=(function(s){return new OM(s)})((a=>this.referenceDelegate.hi(a))),this.serializer=new gM(t),this.Pi=new IM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new xM(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){Ie("MemoryPersistence","Starting transaction:",e);const s=new VM(this.ai.next());return this.referenceDelegate.Ti(),a(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return fe.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class VM extends oO{constructor(e){super(),this.currentSequenceNumber=e}}class Qy{constructor(e){this.persistence=e,this.Ri=new Yy,this.Ai=null}static Vi(e){return new Qy(e)}get di(){if(this.Ai)return this.Ai;throw Ge(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),fe.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(a=>{const s=Be.fromPath(a);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class od{constructor(e,t){this.persistence=e,this.fi=new _o((a=>cO(a.path)),((a,s)=>a.isEqual(s))),this.garbageCollector=AM(this,t)}static Vi(e,t){return new od(e,t)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return fe.forEach(this.fi,((a,s)=>this.wr(e,a,s).next((l=>l?fe.resolve():t(s)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(a++,l.removeEntry(c,Xe.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}wr(e,t,a){return fe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return fe.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=s}static Es(e,t){let a=pt(),s=pt();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Xy(e,t.fromCache,a,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Cx()?8:lO(Yn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,a).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new kM;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,a,s){return a.documentReadCount<this.Vs?(fl()<=dt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",dl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(fl()<=dt.DEBUG&&Ie("QueryEngine","Query:",dl(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.ds*s?(fl()<=dt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",dl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):fe.resolve())}gs(e,t){if(y0(t))return fe.resolve(null);let a=Mi(t);return this.indexManager.getIndexType(e,a).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=ty(t,null,"F"),a=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const c=pt(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,a).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,ty(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,a,s){return y0(t)||s.isEqual(Xe.min())?fe.resolve(null):this.fs.getDocuments(e,a).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,a,s)?fe.resolve(null):(fl()<=dt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),dl(t)),this.Ds(e,c,t,rO(s,pc)).next((d=>d)))}))}bs(e,t){let a=new wn(uw(e));return t.forEach(((s,l)=>{jd(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,a){return fl()<=dt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",dl(t)),this.fs.getDocumentsMatchingQuery(e,t,ys.min(),a)}Ds(e,t,a,s){return this.fs.getDocumentsMatchingQuery(e,a,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="LocalStore",UM=3e8;class jM{constructor(e,t,a,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new rn(mt),this.Fs=new _o((l=>By(l)),Fy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function zM(n,e,t,a){return new jM(n,e,t,a)}async function Mw(n,e){const t=Je(n);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const c=[],d=[];let p=pt();for(const g of s){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(a,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function BM(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,_){const E=g.batch,b=E.keys();let R=fe.resolve();return b.forEach((L=>{R=R.next((()=>_.getEntry(p,L))).next((F=>{const j=g.docVersions.get(L);wt(j!==null,48541),F.version.compareTo(j)<0&&(E.applyToRemoteDocument(F,g),F.isValidDocument()&&(F.setReadTime(g.commitVersion),_.addEntry(F)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(d){let p=pt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(a,s)))}))}function Pw(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function FM(n,e){const t=Je(n),a=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((_,E)=>{const b=s.get(E);if(!b)return;d.push(t.li.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,E))));let R=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(zn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,a)),s=s.insert(E,R),(function(F,j,K){return F.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=UM?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(b,R,_)&&d.push(t.li.updateTargetData(l,R))}));let p=pa(),g=pt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(HM(l,c,e.documentUpdates).next((_=>{p=_.Bs,g=_.Ls}))),!a.isEqual(Xe.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));d.push(_)}return fe.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=s,l)))}function HM(n,e,t){let a=pt(),s=pt();return t.forEach((l=>a=a.add(l))),e.getEntries(n,a).next((l=>{let c=pa();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),p.isNoDocument()&&p.version.isEqual(Xe.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Ie(Wy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:s}}))}function qM(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Uy),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function GM(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let s;return t.li.getTargetData(a,e).next((l=>l?(s=l,fe.resolve(s)):t.li.allocateTargetId(a).next((c=>(s=new ls(e,c,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,s).next((()=>s)))))))})).then((a=>{const s=t.vs.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function sy(n,e,t){const a=Je(n),s=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(c=>a.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!ql(c))throw c;Ie(Wy,`Failed to update sequence numbers for target ${e}: ${c}`)}a.vs=a.vs.remove(e),a.Fs.delete(s.target)}function N0(n,e,t){const a=Je(n);let s=Xe.min(),l=pt();return a.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,_){const E=Je(p),b=E.Fs.get(_);return b!==void 0?fe.resolve(E.vs.get(b)):E.li.getTargetData(g,_)})(a,c,Mi(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>a.Cs.getDocumentsMatchingQuery(c,e,t?s:Xe.min(),t?l:pt()))).next((d=>($M(a,xO(e),d),{documents:d,ks:l})))))}function $M(n,e,t){let a=n.Ms.get(e)||Xe.min();t.forEach(((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),n.Ms.set(e,a)}class x0{constructor(){this.activeTargetIds=LO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KM{constructor(){this.vo=new x0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new x0,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="ConnectivityMonitor";class M0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ie(O0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ie(O0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef=null;function oy(){return Ef===null?Ef=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ef++,"0x"+Ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="RestConnection",QM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class XM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${s}`,this.$o=this.databaseId.database===ed?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Wo(e,t,a,s,l){const c=oy(),d=this.Qo(e,t.toUriEncodedString());Ie(Cg,`Sending RPC '${e}' ${c}:`,d,a);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,s,l);const{host:g}=new URL(d),_=zl(g);return this.zo(e,d,p,a,_).then((E=>(Ie(Cg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Il(Cg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",a),E}))}jo(e,t,a,s,l,c){return this.Wo(e,t,a,s,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),a&&a.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const a=QM[e];let s=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="WebChannelConnection",$u=(n,e,t)=>{n.listen(e,(a=>{try{t(a)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Tl extends XM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Tl.c_){const e=jA();$u(e,UA.STAT_EVENT,(t=>{t.stat===Yg.PROXY?Ie(qn,"STAT_EVENT: detected buffering proxy"):t.stat===Yg.NOPROXY&&Ie(qn,"STAT_EVENT: detected no buffering proxy")})),Tl.c_=!0}}zo(e,t,a,s,l){const c=oy();return new Promise(((d,p)=>{const g=new kA;g.setWithCredentials(!0),g.listenOnce(LA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Df.NO_ERROR:const E=g.getResponseJson();Ie(qn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case Df.TIMEOUT:Ie(qn,`RPC '${e}' ${c} timed out`),p(new Re(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Df.HTTP_ERROR:const b=g.getStatus();if(Ie(qn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=R==null?void 0:R.error;if(L&&L.status&&L.message){const F=(function(K){const B=K.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(B)>=0?B:ue.UNKNOWN})(L.status);p(new Re(F,L.message))}else p(new Re(ue.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Re(ue.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Ie(qn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(s);Ie(qn,`RPC '${e}' ${c} sending request:`,s),g.send(t,"POST",_,a,15)}))}T_(e,t,a){const s=oy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,a),d.encodeInitMessageHeaders=!0;const g=l.join("");Ie(qn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const _=c.createWebChannel(g,d);this.I_(_);let E=!1,b=!1;const R=new WM({Ho:L=>{b?Ie(qn,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(E||(Ie(qn,`Opening RPC '${e}' stream ${s} transport.`),_.open(),E=!0),Ie(qn,`RPC '${e}' stream ${s} sending:`,L),_.send(L))},Jo:()=>_.close()});return $u(_,Qu.EventType.OPEN,(()=>{b||(Ie(qn,`RPC '${e}' stream ${s} transport opened.`),R.i_())})),$u(_,Qu.EventType.CLOSE,(()=>{b||(b=!0,Ie(qn,`RPC '${e}' stream ${s} transport closed`),R.o_(),this.E_(_))})),$u(_,Qu.EventType.ERROR,(L=>{b||(b=!0,Il(qn,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),R.o_(new Re(ue.UNAVAILABLE,"The operation could not be completed")))})),$u(_,Qu.EventType.MESSAGE,(L=>{var F;if(!b){const j=L.data[0];wt(!!j,16349);const K=j,B=(K==null?void 0:K.error)||((F=K[0])==null?void 0:F.error);if(B){Ie(qn,`RPC '${e}' stream ${s} received error:`,B);const $=B.status;let te=(function(A){const S=vn[A];if(S!==void 0)return Ew(S)})($),ae=B.message;te===void 0&&(te=ue.INTERNAL,ae="Unknown error status: "+$+" with message "+B.message),b=!0,R.o_(new Re(te,ae)),_.close()}else Ie(qn,`RPC '${e}' stream ${s} received:`,j),R.__(j)}})),Tl.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return zA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(n){return new Tl(n)}function Ig(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(n){return new nM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tl.c_=!1;class Vw{constructor(e,t,a=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-a);s>0&&Ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="PersistentStream";class kw{constructor(e,t,a,s,l,c,d,p){this.Ci=e,this.b_=a,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Vw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(ma(t.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,s])=>{this.D_===t&&this.G_(a,s)}),(a=>{e((()=>{const s=new Re(ue.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(s)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{a((()=>this.z_(s)))})),this.stream.onMessage((s=>{a((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(P0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ie(P0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZM extends kw{constructor(e,t,a,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=aM(this.serializer,e),a=(function(l){if(!("targetChange"in l))return Xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Xe.min():c.readTime?Pi(c.readTime):Xe.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=ay(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Zg(p)?{documents:lM(l,p)}:{query:uM(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Sw(l,c.resumeToken);const g=ny(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Xe.min())>0){d.readTime=sd(l,c.snapshotVersion.toTimestamp());const g=ny(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const a=hM(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=ay(this.serializer),t.removeTarget=e,this.K_(t)}}class eP extends kw{constructor(e,t,a,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=oM(e.writeResults,e.commitTime),a=Pi(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=ay(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>sM(this.serializer,a)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{}class nP extends tP{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,ry(t,a),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Re(ue.UNKNOWN,l.toString())}))}jo(e,t,a,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,ry(t,a),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Re(ue.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function rP(n,e,t,a){return new nP(n,e,t,a)}class iP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ma(t),this.aa=!1):Ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="RemoteStore";class aP{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{a.enqueueAndForget((async()=>{vo(this)&&(Ie(fo,"Restarting streams for network reachability change."),await(async function(p){const g=Je(p);g.Ea.add(4),await kc(g),g.Va.set("Unknown"),g.Ea.delete(4),await qd(g)})(this))}))})),this.Va=new iP(a,s)}}async function qd(n){if(vo(n))for(const e of n.Ra)await e(!0)}async function kc(n){for(const e of n.Ra)await e(!1)}function Lw(n,e){const t=Je(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),t_(t)?e_(t):Gl(t).O_()&&Zy(t,e))}function Jy(n,e){const t=Je(n),a=Gl(t);t.Ia.delete(e),a.O_()&&Uw(t,e),t.Ia.size===0&&(a.O_()?a.L_():vo(t)&&t.Va.set("Unknown"))}function Zy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gl(n).Z_(e)}function Uw(n,e){n.da.$e(e),Gl(n).X_(e)}function e_(n){n.da=new JO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Gl(n).start(),n.Va.ua()}function t_(n){return vo(n)&&!Gl(n).x_()&&n.Ia.size>0}function vo(n){return Je(n).Ea.size===0}function jw(n){n.da=void 0}async function sP(n){n.Va.set("Online")}async function oP(n){n.Ia.forEach(((e,t)=>{Zy(n,e)}))}async function lP(n,e){jw(n),t_(n)?(n.Va.ha(e),e_(n)):n.Va.set("Unknown")}async function uP(n,e,t){if(n.Va.set("Online"),e instanceof bw&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(a){Ie(fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await ld(n,a)}else if(e instanceof Mf?n.da.Xe(e):e instanceof Tw?n.da.st(e):n.da.tt(e),!t.isEqual(Xe.min()))try{const a=await Pw(n.localStore);t.compareTo(a)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(zn.EMPTY_BYTE_STRING,_.snapshotVersion)),Uw(l,p);const E=new ls(_.target,p,g,_.sequenceNumber);Zy(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(a){Ie(fo,"Failed to raise snapshot:",a),await ld(n,a)}}async function ld(n,e,t){if(!ql(e))throw e;n.Ea.add(1),await kc(n),n.Va.set("Offline"),t||(t=()=>Pw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ie(fo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await qd(n)}))}function zw(n,e){return e().catch((t=>ld(n,t,e)))}async function Gd(n){const e=Je(n),t=Ts(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Uy;for(;cP(e);)try{const s=await qM(e.localStore,a);if(s===null){e.Ta.length===0&&t.L_();break}a=s.batchId,hP(e,s)}catch(s){await ld(e,s)}Bw(e)&&Fw(e)}function cP(n){return vo(n)&&n.Ta.length<10}function hP(n,e){n.Ta.push(e);const t=Ts(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Bw(n){return vo(n)&&!Ts(n).x_()&&n.Ta.length>0}function Fw(n){Ts(n).start()}async function fP(n){Ts(n).ra()}async function dP(n){const e=Ts(n);for(const t of n.Ta)e.ea(t.mutations)}async function mP(n,e,t){const a=n.Ta.shift(),s=Gy.from(a,e,t);await zw(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Gd(n)}async function pP(n,e){e&&Ts(n).Y_&&await(async function(a,s){if((function(c){return QO(c)&&c!==ue.ABORTED})(s.code)){const l=a.Ta.shift();Ts(a).B_(),await zw(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Gd(a)}})(n,e),Bw(n)&&Fw(n)}async function V0(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Ie(fo,"RemoteStore received new credentials");const a=vo(t);t.Ea.add(3),await kc(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qd(t)}async function gP(n,e){const t=Je(n);e?(t.Ea.delete(2),await qd(t)):e||(t.Ea.add(2),await kc(t),t.Va.set("Unknown"))}function Gl(n){return n.ma||(n.ma=(function(t,a,s){const l=Je(t);return l.sa(),new ZM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:sP.bind(null,n),Yo:oP.bind(null,n),t_:lP.bind(null,n),J_:uP.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),t_(n)?e_(n):n.Va.set("Unknown")):(await n.ma.stop(),jw(n))}))),n.ma}function Ts(n){return n.fa||(n.fa=(function(t,a,s){const l=Je(t);return l.sa(),new eP(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:fP.bind(null,n),t_:pP.bind(null,n),ta:dP.bind(null,n),na:mP.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Gd(n)):(await n.fa.stop(),n.Ta.length>0&&(Ie(fo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new ha,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const c=Date.now()+a,d=new n_(e,t,c,s,l);return d.start(a),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function r_(n,e){if(ma("AsyncQueue",`${e}: ${n}`),ql(n))return new Re(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{static emptySet(e){return new bl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Be.comparator(t.key,a.key):(t,a)=>Be.comparator(t.key,a.key),this.keyedMap=Xu(),this.sortedSet=new rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new bl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this.ga=new rn(Be.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ge(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Ml{constructor(e,t,a,s,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ml(e,t,bl.emptySet(t),c,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class _P{constructor(){this.queries=L0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const s=Je(t),l=s.queries;s.queries=L0(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(a)}))})(this,new Re(ue.ABORTED,"Firestore shutting down"))}}function L0(){return new _o((n=>lw(n)),Ud)}async function i_(n,e){const t=Je(n);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(a=2):(l=new yP,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=r_(c,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&s_(t)}async function a_(n,e){const t=Je(n),a=e.query;let s=3;const l=t.queries.get(a);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function vP(n,e){const t=Je(n);let a=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(s)&&(a=!0);c.wa=s}}a&&s_(t)}function EP(n,e,t){const a=Je(n),s=a.queries.get(e);if(s)for(const l of s.ba)l.onError(t);a.queries.delete(e)}function s_(n){n.Ca.forEach((e=>{e.next()}))}var ly,U0;(U0=ly||(ly={})).Ma="default",U0.Cache="cache";class o_{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new Ml(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ly.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){this.key=e}}class qw{constructor(e){this.key=e}}class TP{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.eu=uw(e),this.tu=new bl(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new k0,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const b=s.get(_),R=jd(this.query,E)?E:null,L=!!b&&this.mutatedKeys.has(b.key),F=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let j=!1;b&&R?b.data.isEqual(R.data)?L!==F&&(a.track({type:3,doc:R}),j=!0):this.su(b,R)||(a.track({type:2,doc:R}),j=!0,(p&&this.eu(R,p)>0||g&&this.eu(R,g)<0)&&(d=!0)):!b&&R?(a.track({type:0,doc:R}),j=!0):b&&!R&&(a.track({type:1,doc:b}),j=!0,(p||g)&&(d=!0)),j&&(R?(c=c.add(R),l=F?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),a.track({type:1,doc:_})}return{tu:c,iu:a,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(R,L){const F=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:j})}};return F(R)-F(L)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(a),s=s??!1;const d=t&&!s?this._u():[],p=this.Ya.size===0&&this.current&&!s?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new Ml(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new k0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=pt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new qw(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new Hw(a))})),t}cu(e){this.Za=e.ks,this.Ya=pt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const l_="SyncEngine";class bP{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class SP{constructor(e){this.key=e,this.hu=!1}}class AP{constructor(e,t,a,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new _o((d=>lw(d)),Ud),this.Iu=new Map,this.Eu=new Set,this.Ru=new rn(Be.comparator),this.Au=new Map,this.Vu=new Yy,this.du={},this.mu=new Map,this.fu=Ol.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wP(n,e,t=!0){const a=Xw(n);let s;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await Gw(a,e,t,!0),s}async function RP(n,e){const t=Xw(n);await Gw(t,e,!0,!1)}async function Gw(n,e,t,a){const s=await GM(n.localStore,Mi(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return a&&(d=await CP(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&Lw(n.remoteStore,s),d}async function CP(n,e,t,a,s){n.pu=(E,b,R)=>(async function(F,j,K,B){let $=j.view.ru(K);$.Ss&&($=await N0(F.localStore,j.query,!1).then((({documents:A})=>j.view.ru(A,$))));const te=B&&B.targetChanges.get(j.targetId),ae=B&&B.targetMismatches.get(j.targetId)!=null,ee=j.view.applyChanges($,F.isPrimaryClient,te,ae);return z0(F,j.targetId,ee.au),ee.snapshot})(n,E,b,R);const l=await N0(n.localStore,e,!0),c=new TP(e,l.ks),d=c.ru(l.documents),p=Vc.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",s),g=c.applyChanges(d,n.isPrimaryClient,p);z0(n,t,g.au);const _=new bP(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function IP(n,e,t){const a=Je(n),s=a.Tu.get(e),l=a.Iu.get(s.targetId);if(l.length>1)return a.Iu.set(s.targetId,l.filter((c=>!Ud(c,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await sy(a.localStore,s.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(s.targetId),t&&Jy(a.remoteStore,s.targetId),uy(a,s.targetId)})).catch(Hl)):(uy(a,s.targetId),await sy(a.localStore,s.targetId,!0))}async function DP(n,e){const t=Je(n),a=t.Tu.get(e),s=t.Iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),Jy(t.remoteStore,a.targetId))}async function NP(n,e,t){const a=LP(n);try{const s=await(function(c,d){const p=Je(c),g=Kt.now(),_=d.reduce(((R,L)=>R.add(L.key)),pt());let E,b;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let L=pa(),F=pt();return p.xs.getEntries(R,_).next((j=>{L=j,L.forEach(((K,B)=>{B.isValidDocument()||(F=F.add(K))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,L))).next((j=>{E=j;const K=[];for(const B of d){const $=qO(B,E.get(B.key).overlayedDocument);$!=null&&K.push(new ws(B.key,$,ew($.value.mapValue),xr.exists(!0)))}return p.mutationQueue.addMutationBatch(R,g,K,d)})).next((j=>{b=j;const K=j.applyToLocalDocumentSet(E,F);return p.documentOverlayCache.saveOverlays(R,j.batchId,K)}))})).then((()=>({batchId:b.batchId,changes:hw(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new rn(mt)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(a,s.batchId,t),await Lc(a,s.changes),await Gd(a.remoteStore)}catch(s){const l=r_(s,"Failed to persist write");t.reject(l)}}async function $w(n,e){const t=Je(n);try{const a=await FM(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?wt(c.hu,14607):s.removedDocuments.size>0&&(wt(c.hu,42227),c.hu=!1))})),await Lc(t,a,e)}catch(a){await Hl(a)}}function j0(n,e,t){const a=Je(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const p=Je(c);p.onlineState=d;let g=!1;p.queries.forEach(((_,E)=>{for(const b of E.ba)b.va(d)&&(g=!0)})),g&&s_(p)})(a.eventManager,e),s.length&&a.Pu.J_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function xP(n,e,t){const a=Je(n);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a.Au.get(e),l=s&&s.key;if(l){let c=new rn(Be.comparator);c=c.insert(l,Kn.newNoDocument(l,Xe.min()));const d=pt().add(l),p=new Fd(Xe.min(),new Map,new rn(mt),c,d);await $w(a,p),a.Ru=a.Ru.remove(l),a.Au.delete(e),u_(a)}else await sy(a.localStore,e,!1).then((()=>uy(a,e,t))).catch(Hl)}async function OP(n,e){const t=Je(n),a=e.batch.batchId;try{const s=await BM(t.localStore,e);Yw(t,a,null),Kw(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Lc(t,s)}catch(s){await Hl(s)}}async function MP(n,e,t){const a=Je(n);try{const s=await(function(c,d){const p=Je(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(wt(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>p.localDocuments.getDocuments(g,_)))}))})(a.localStore,e);Yw(a,e,t),Kw(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Lc(a,s)}catch(s){await Hl(s)}}function Kw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Yw(n,e,t){const a=Je(n);let s=a.du[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.du[a.currentUser.toKey()]=s}}function uy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),t&&n.Pu.yu(a,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||Qw(n,a)}))}function Qw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Jy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),u_(n))}function z0(n,e,t){for(const a of t)a instanceof Hw?(n.Vu.addReference(a.key,e),PP(n,a)):a instanceof qw?(Ie(l_,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||Qw(n,a.key)):Ge(19791,{wu:a})}function PP(n,e){const t=e.key,a=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(a)||(Ie(l_,"New document in limbo: "+t),n.Eu.add(a),u_(n))}function u_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Be(Ht.fromString(e)),a=n.fu.next();n.Au.set(a,new SP(t)),n.Ru=n.Ru.insert(t,a),Lw(n.remoteStore,new ls(Mi(Ld(t.path)),a,"TargetPurposeLimboResolution",Pd.ce))}}async function Lc(n,e,t){const a=Je(n),s=[],l=[],c=[];a.Tu.isEmpty()||(a.Tu.forEach(((d,p)=>{c.push(a.pu(p,e,t).then((g=>{var _;if((g||t)&&a.isPrimaryClient){const E=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;a.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){s.push(g);const E=Xy.Es(p.targetId,g);l.push(E)}})))})),await Promise.all(c),a.Pu.J_(s),await(async function(p,g){const _=Je(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>fe.forEach(g,(b=>fe.forEach(b.Ts,(R=>_.persistence.referenceDelegate.addReference(E,b.targetId,R))).next((()=>fe.forEach(b.Is,(R=>_.persistence.referenceDelegate.removeReference(E,b.targetId,R)))))))))}catch(E){if(!ql(E))throw E;Ie(Wy,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const R=_.vs.get(b),L=R.snapshotVersion,F=R.withLastLimboFreeSnapshotVersion(L);_.vs=_.vs.insert(b,F)}}})(a.localStore,l))}async function VP(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Ie(l_,"User change. New user:",e.toKey());const a=await Mw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new Re(ue.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Lc(t,a.Ns)}}function kP(n,e){const t=Je(n),a=t.Au.get(e);if(a&&a.hu)return pt().add(a.key);{let s=pt();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function Xw(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$w.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xP.bind(null,e),e.Pu.J_=vP.bind(null,e.eventManager),e.Pu.yu=EP.bind(null,e.eventManager),e}function LP(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MP.bind(null,e),e}class ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return zM(this.persistence,new LM,e.initialUser,this.serializer)}Cu(e){return new Ow(Qy.Vi,this.serializer)}Du(e){return new KM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ud.provider={build:()=>new ud};class UP extends ud{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){wt(this.persistence.referenceDelegate instanceof od,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new bM(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new Ow((a=>od.Vi(a,t)),this.serializer)}}class cy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>j0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=VP.bind(null,this.syncEngine),await gP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _P})()}createDatastore(e){const t=Hd(e.databaseInfo.databaseId),a=JM(e.databaseInfo);return rP(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,s,l,c,d){return new aP(a,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>j0(this.syncEngine,t,0)),(function(){return M0.v()?new M0:new YM})())}createSyncEngine(e,t){return(function(s,l,c,d,p,g,_){const E=new AP(s,l,c,d,p,g);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Je(s);Ie(fo,"RemoteStore shutting down."),l.Ea.add(5),await kc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}cy.provider={build:()=>new cy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class jP{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=s,this.user=$n.UNAUTHENTICATED,this.clientId=Ly.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async c=>{Ie(bs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(a,(c=>(Ie(bs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ha;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=r_(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Dg(n,e){n.asyncQueue.verifyOperationInProgress(),Ie(bs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener((async s=>{a.isEqual(s)||(await Mw(e.localStore,s),a=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function B0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zP(n);Ie(bs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((a=>V0(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,s)=>V0(e.remoteStore,s))),n._onlineComponents=e}async function zP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie(bs,"Using user provided OfflineComponentProvider");try{await Dg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Il("Error using user provided cache. Falling back to memory cache: "+t),await Dg(n,new ud)}}else Ie(bs,"Using default OfflineComponentProvider"),await Dg(n,new UP(void 0));return n._offlineComponents}async function Ww(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie(bs,"Using user provided OnlineComponentProvider"),await B0(n,n._uninitializedComponentsProvider._online)):(Ie(bs,"Using default OnlineComponentProvider"),await B0(n,new cy))),n._onlineComponents}function BP(n){return Ww(n).then((e=>e.syncEngine))}async function cd(n){const e=await Ww(n),t=e.eventManager;return t.onListen=wP.bind(null,e.syncEngine),t.onUnlisten=IP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DP.bind(null,e.syncEngine),t}function FP(n,e,t,a){const s=new c_(a),l=new o_(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>i_(await cd(n),l))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>a_(await cd(n),l)))}}function HP(n,e,t={}){const a=new ha;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new c_({next:b=>{_.Nu(),c.enqueueAndForget((()=>a_(l,E)));const R=b.docs.has(d);!R&&b.fromCache?g.reject(new Re(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&b.fromCache&&p&&p.source==="server"?g.reject(new Re(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new o_(Ld(d.path),_,{includeMetadataChanges:!0,Ka:!0});return i_(l,E)})(await cd(n),n.asyncQueue,e,t,a))),a.promise}function qP(n,e,t={}){const a=new ha;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new c_({next:b=>{_.Nu(),c.enqueueAndForget((()=>a_(l,E))),b.fromCache&&p.source==="server"?g.reject(new Re(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new o_(d,_,{includeMetadataChanges:!0,Ka:!0});return i_(l,E)})(await cd(n),n.asyncQueue,e,t,a))),a.promise}function GP(n,e){const t=new ha;return n.asyncQueue.enqueueAndForget((async()=>NP(await BP(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="ComponentProvider",F0=new Map;function KP(n,e,t,a,s){return new dO(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,Jw(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="firestore.googleapis.com",H0=!0;class q0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Zw,this.ssl=H0}else this.host=e.host,this.ssl=e.ssl??H0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EM)throw new Re(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jw(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Re(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Re(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Re(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $d{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new $2;switch(a.type){case"firstParty":return new X2(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Re(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=F0.get(t);a&&(Ie($P,"Removing Datastore"),F0.delete(t),a.terminate())})(this),Promise.resolve()}}function YP(n,e,t,a={}){var g;n=Nr(n,$d);const s=zl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(CA(`https://${d}`),IA("Firestore",!0)),l.host!==Zw&&l.host!==d&&Il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:s,emulatorOptions:a};if(!uo(p,c)&&(n._setSettings(p),a.mockUserToken)){let _,E;if(typeof a.mockUserToken=="string")_=a.mockUserToken,E=$n.MOCK_USER;else{_=_x(a.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const b=a.mockUserToken.sub||a.mockUserToken.user_id;if(!b)throw new Re(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new $n(b)}n._authCredentials=new K2(new FA(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Eo(this.firestore,e,this._query)}}class ln{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Oc(t,ln._jsonSchema))return new ln(e,a||null,new Be(Ht.fromString(t.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:Tn("string",ln._jsonSchemaVersion),referencePath:Tn("string")};class ms extends Eo{constructor(e,t,a){super(e,t,Ld(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Be(e))}withConverter(e){return new ms(this.firestore,e,this._path)}}function Uc(n,e,...t){if(n=Rn(n),HA("collection","path",e),n instanceof $d){const a=Ht.fromString(e,...t);return r0(a),new ms(n,null,a)}{if(!(n instanceof ln||n instanceof ms))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Ht.fromString(e,...t));return r0(a),new ms(n.firestore,null,a)}}function Xr(n,e,...t){if(n=Rn(n),arguments.length===1&&(e=Ly.newId()),HA("doc","path",e),n instanceof $d){const a=Ht.fromString(e,...t);return n0(a),new ln(n,null,new Be(a))}{if(!(n instanceof ln||n instanceof ms))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Ht.fromString(e,...t));return n0(a),new ln(n.firestore,n instanceof ms?n.converter:null,new Be(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="AsyncQueue";class $0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Vw(this,"async_queue_retry"),this._c=()=>{const a=Ig();a&&Ie(G0,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=Ig();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ig();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ha;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ql(e))throw e;Ie(G0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,ma("INTERNAL UNHANDLED ERROR: ",K0(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=n_.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ge(47125,{Pc:K0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function K0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ss extends $d{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new $0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $0(e),this._firestoreClient=void 0,await e}}}function QP(n,e){const t=typeof n=="object"?n:OA(),a=typeof n=="string"?n:ed,s=Vy(t,"firestore").getImmediate({identifier:a});if(!s._initialized){const l=gx("firestore");l&&YP(s,...l)}return s}function jc(n){if(n._terminated)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||XP(n),n._firestoreClient}function XP(n){var a,s,l,c;const e=n._freezeSettings(),t=KP(n._databaseId,((a=n._app)==null?void 0:a.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new jP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yr(zn.fromBase64String(e))}catch(t){throw new Re(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yr(zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oc(e,Yr._jsonSchema))return Yr.fromBase64String(e.bytes)}}Yr._jsonSchemaVersion="firestore/bytes/1.0",Yr._jsonSchema={type:Tn("string",Yr._jsonSchemaVersion),bytes:Tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Re(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(Oc(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:Tn("string",Vi._jsonSchemaVersion),latitude:Tn("number"),longitude:Tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oc(e,ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ci(e.vectorValues);throw new Re(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ci._jsonSchemaVersion="firestore/vectorValue/1.0",ci._jsonSchema={type:Tn("string",ci._jsonSchemaVersion),vectorValues:Tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=/^__.*__$/;class JP{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new ws(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pc(e,this.data,t,this.fieldTransforms)}}class e1{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new ws(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function t1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{dataSource:n})}}class f_{constructor(e,t,a,s,l,c){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new f_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return hd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(t1(this.dataSource)&&WP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class ZP{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Hd(e)}createContext(e,t,a,s=!1){return new f_({dataSource:e,methodName:t,targetDoc:a,path:jn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yd(n){const e=n._freezeSettings(),t=Hd(n._databaseId);return new ZP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function n1(n,e,t,a,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);d_("Data must be an object, but it was:",c,a);const d=a1(a,c);let p,g;if(l.merge)p=new Ir(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const b=Pl(e,E,t);if(!c.contains(b))throw new Re(ue.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);l1(_,b)||_.push(b)}p=new Ir(_),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new JP(new mr(d),p,g)}class Qd extends h_{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qd}}function r1(n,e,t,a){const s=n.createContext(1,e,t);d_("Data must be an object, but it was:",s,a);const l=[],c=mr.empty();As(a,((p,g)=>{const _=o1(e,p,t);g=Rn(g);const E=s.childContextForFieldPath(_);if(g instanceof Qd)l.push(_);else{const b=zc(g,E);b!=null&&(l.push(_),c.set(_,b))}}));const d=new Ir(l);return new e1(c,d,s.fieldTransforms)}function i1(n,e,t,a,s,l){const c=n.createContext(1,e,t),d=[Pl(e,a,t)],p=[s];if(l.length%2!=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(Pl(e,l[b])),p.push(l[b+1]);const g=[],_=mr.empty();for(let b=d.length-1;b>=0;--b)if(!l1(g,d[b])){const R=d[b];let L=p[b];L=Rn(L);const F=c.childContextForFieldPath(R);if(L instanceof Qd)g.push(R);else{const j=zc(L,F);j!=null&&(g.push(R),_.set(R,j))}}const E=new Ir(g);return new e1(_,E,c.fieldTransforms)}function eV(n,e,t,a=!1){return zc(t,n.createContext(a?4:3,e))}function zc(n,e){if(s1(n=Rn(n)))return d_("Unsupported field value:",e,n),a1(n,e);if(n instanceof h_)return(function(a,s){if(!t1(s.dataSource))throw s.createError(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,s){const l=[];let c=0;for(const d of a){let p=zc(d,s.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(a,s){if((a=Rn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return UO(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Kt.fromDate(a);return{timestampValue:sd(s.serializer,l)}}if(a instanceof Kt){const l=new Kt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:sd(s.serializer,l)}}if(a instanceof Vi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Yr)return{bytesValue:Sw(s.serializer,a._byteString)};if(a instanceof ln){const l=s.databaseId,c=a.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ky(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof ci)return(function(c,d){const p=c instanceof ci?c.toArray():c;return{mapValue:{fields:{[JA]:{stringValue:ZA},[td]:{arrayValue:{values:p.map((_=>{if(typeof _!="number")throw d.createError("VectorValues must only contain numeric values.");return Hy(d.serializer,_)}))}}}}}})(a,s);if(Nw(a))return a._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Md(a)}`)})(n,e)}function a1(n,e){const t={};return $A(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(n,((a,s)=>{const l=zc(s,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function s1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Kt||n instanceof Vi||n instanceof Yr||n instanceof ln||n instanceof h_||n instanceof ci||Nw(n))}function d_(n,e,t){if(!s1(t)||!qA(t)){const a=Md(t);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function Pl(n,e,t){if((e=Rn(e))instanceof Kd)return e._internalPath;if(typeof e=="string")return o1(n,e);throw hd("Field path arguments must be of type string or ",n,!1,void 0,t)}const tV=new RegExp("[~\\*/\\[\\]]");function o1(n,e,t){if(e.search(tV)>=0)throw hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kd(...e.split("."))._internalPath}catch{throw hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hd(n,e,t,a,s){const l=a&&!a.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${a}`),c&&(p+=` in document ${s}`),p+=")"),new Re(ue.INVALID_ARGUMENT,d+n+p)}function l1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{convertValue(e,t="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return As(e,((s,l)=>{a[s]=this.convertValue(l,t)})),a}convertVectorValue(e){var a,s,l;const t=(l=(s=(a=e.fields)==null?void 0:a[td].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>fn(c.doubleValue)));return new ci(t)}convertGeoPoint(e){return new Vi(fn(e.latitude),fn(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=kd(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(gc(e));default:return null}}convertTimestamp(e){const t=_s(e);return new Kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Ht.fromString(e);wt(Dw(a),9688,{name:e});const s=new yc(a.get(1),a.get(3)),l=new Be(a.popFirst(5));return s.isEqual(t)||ma(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_ extends nV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}const Y0="@firebase/firestore",Q0="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(n){return(function(t,a){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of a)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Pl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rV extends u1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Re(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class p_{}class iV extends p_{}function Bc(n,e,...t){let a=[];e instanceof p_&&a.push(e),a=a.concat(t),(function(l){const c=l.filter((p=>p instanceof y_)).length,d=l.filter((p=>p instanceof Xd)).length;if(c>1||c>0&&d>0)throw new Re(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const s of a)n=s._apply(n);return n}class Xd extends iV{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Xd(e,t,a)}_apply(e){const t=this._parse(e);return h1(e._query,t),new Eo(e.firestore,e.converter,ey(e._query,t))}_parse(e){const t=Yd(e.firestore);return(function(l,c,d,p,g,_,E){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){J0(E,_);const L=[];for(const F of E)L.push(W0(p,l,F));b={arrayValue:{values:L}}}else b=W0(p,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||J0(E,_),b=eV(d,c,E,_==="in"||_==="not-in");return En.create(g,_,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function g_(n,e,t){const a=e,s=Pl("where",n);return Xd._create(s,a,t)}class y_ extends p_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new y_(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:fi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const p of d)h1(c,p),c=ey(c,p)})(e._query,t),new Eo(e.firestore,e.converter,ey(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function W0(n,e,t){if(typeof(t=Rn(t))=="string"){if(t==="")throw new Re(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ow(e)&&t.indexOf("/")!==-1)throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Ht.fromString(t));if(!Be.isDocumentKey(a))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return h0(n,new Be(a))}if(t instanceof ln)return h0(n,t._key);throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Md(t)}.`)}function J0(n,e){if(!Array.isArray(n)||n.length===0)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h1(n,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Re(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function f1(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}class Ju{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ao extends u1{constructor(e,t,a,s,l,c){super(e,t,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Pl("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ao._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",ao._jsonSchema={type:Tn("string",ao._jsonSchemaVersion),bundleSource:Tn("string","DocumentSnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class Pf extends ao{data(e={}){return super.data(e)}}class so{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ju(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Pf(this._firestore,this._userDataWriter,a.key,a,new Ju(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const p=new Pf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Ju(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Pf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Ju(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:aV(d.type),doc:p,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=so._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ly.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */so._jsonSchemaVersion="firestore/querySnapshot/1.0",so._jsonSchema={type:Tn("string",so._jsonSchemaVersion),bundleSource:Tn("string","QuerySnapshot"),bundleName:Tn("string"),bundle:Tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yd(e)}set(e,t,a){this._verifyNotCommitted();const s=Ng(e,this._firestore),l=f1(s.converter,t,a),c=n1(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,a);return this._mutations.push(c.toMutation(s._key,xr.none())),this}update(e,t,a,...s){this._verifyNotCommitted();const l=Ng(e,this._firestore);let c;return c=typeof(t=Rn(t))=="string"||t instanceof Kd?i1(this._dataReader,"WriteBatch.update",l._key,t,a,s):r1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ng(e,this._firestore);return this._mutations=this._mutations.concat(new qy(t._key,xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ng(n,e){if((n=Rn(n)).firestore!==e)throw new Re(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(n){n=Nr(n,ln);const e=Nr(n.firestore,Ss),t=jc(e);return HP(t,n._key).then((a=>d1(e,n,a)))}function Hc(n){n=Nr(n,Eo);const e=Nr(n.firestore,Ss),t=jc(e),a=new m_(e);return c1(n._query),qP(t,n._query).then((s=>new so(e,a,n,s)))}function oV(n,e,t){n=Nr(n,ln);const a=Nr(n.firestore,Ss),s=f1(n.converter,e,t),l=Yd(a);return __(a,[n1(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,xr.none())])}function Wd(n,e,t,...a){n=Nr(n,ln);const s=Nr(n.firestore,Ss),l=Yd(s);let c;return c=typeof(e=Rn(e))=="string"||e instanceof Kd?i1(l,"updateDoc",n._key,e,t,a):r1(l,"updateDoc",n._key,e),__(s,[c.toMutation(n._key,xr.exists(!0))])}function lV(n,...e){var g,_,E;n=Rn(n);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||X0(e[a])||(t=e[a++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(X0(e[a])){const b=e[a];e[a]=(g=b.next)==null?void 0:g.bind(b),e[a+1]=(_=b.error)==null?void 0:_.bind(b),e[a+2]=(E=b.complete)==null?void 0:E.bind(b)}let l,c,d;if(n instanceof ln)c=Nr(n.firestore,Ss),d=Ld(n._key.path),l={next:b=>{e[a]&&e[a](d1(c,n,b))},error:e[a+1],complete:e[a+2]};else{const b=Nr(n,Eo);c=Nr(b.firestore,Ss),d=b._query;const R=new m_(c);l={next:L=>{e[a]&&e[a](new so(c,R,b,L))},error:e[a+1],complete:e[a+2]},c1(n._query)}const p=jc(c);return FP(p,d,s,l)}function __(n,e){const t=jc(n);return GP(t,e)}function d1(n,e,t){const a=t.docs.get(e._key),s=new m_(n);return new ao(n,s,e._key,a,new Ju(t.hasPendingWrites,t.fromCache),e.converter)}function m1(n){return n=Nr(n,Ss),jc(n),new sV(n,(e=>__(n,e)))}(function(e,t=!0){G2(Bl),Cl(new co("firestore",((a,{instanceIdentifier:s,options:l})=>{const c=a.getProvider("app").getImmediate(),d=new Ss(new Y2(a.getProvider("auth-internal")),new W2(c,a.getProvider("app-check-internal")),mO(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),fs(Y0,Q0,e),fs(Y0,Q0,"esm2020")})();var uV="firebase",cV="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs(uV,cV,"app");function p1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hV=p1,g1=new Nc("auth","Firebase",p1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new My("@firebase/auth");function fV(n,...e){fd.logLevel<=dt.WARN&&fd.warn(`Auth (${Bl}): ${n}`,...e)}function Vf(n,...e){fd.logLevel<=dt.ERROR&&fd.error(`Auth (${Bl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(n,...e){throw E_(n,...e)}function hi(n,...e){return E_(n,...e)}function v_(n,e,t){const a={...hV(),[e]:t};return new Nc("auth","Firebase",a).create(e,{appName:n.name})}function oo(n){return v_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dV(n,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&ji(n,"argument-error"),v_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function E_(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return g1.create(n,...e)}function $e(n,e,...t){if(!n)throw E_(e,...t)}function ua(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Vf(e),new Error(e)}function ga(n,e){n||ua(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function mV(){return Z0()==="http:"||Z0()==="https:"}function Z0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mV()||Ax()||"connection"in navigator)?navigator.onLine:!0}function gV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ga(t>e,"Short delay should be less than long delay!"),this.isMobile=Tx()||wx()}get(){return pV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(n,e){ga(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ua("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ua("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ua("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vV=new qc(3e4,6e4);function b_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function $l(n,e,t,a,s={}){return _1(n,s,async()=>{let l={},c={};a&&(e==="GET"?c=a:l={body:JSON.stringify(a)});const d=xc({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return Sx()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&zl(n.emulatorConfig.host)&&(g.credentials="include"),y1.fetch()(await v1(n,n.config.apiHost,t,d),g)})}async function _1(n,e,t){n._canInitEmulator=!1;const a={...yV,...e};try{const s=new TV(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Tf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tf(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Tf(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Tf(n,"user-disabled",c);const _=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw v_(n,_,g);ji(n,_)}}catch(s){if(s instanceof va)throw s;ji(n,"network-request-failed",{message:String(s)})}}async function EV(n,e,t,a,s={}){const l=await $l(n,e,t,a,s);return"mfaPendingCredential"in l&&ji(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function v1(n,e,t,a){const s=`${e}${t}?${a}`,l=n,c=l.config.emulator?T_(n.config,s):`${n.config.apiScheme}://${s}`;return _V.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class TV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(hi(this.auth,"network-request-failed")),vV.get())})}}function Tf(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=hi(n,e,a);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bV(n,e){return $l(n,"POST","/v1/accounts:delete",e)}async function dd(n,e){return $l(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SV(n,e=!1){const t=Rn(n),a=await t.getIdToken(e),s=S_(a);$e(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:a,authTime:oc(xg(s.auth_time)),issuedAtTime:oc(xg(s.iat)),expirationTime:oc(xg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function xg(n){return Number(n)*1e3}function S_(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return Vf("JWT malformed, contained fewer than 3 sections"),null;try{const s=SA(t);return s?JSON.parse(s):(Vf("Failed to decode base64 JWT payload"),null)}catch(s){return Vf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function eS(n){const e=S_(n);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tc(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof va&&AV(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function AV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function md(n){var E;const e=n.auth,t=await n.getIdToken(),a=await Tc(n,dd(e,{idToken:t}));$e(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?E1(s.providerUserInfo):[],c=CV(n.providerData,l),d=n.isAnonymous,p=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new fy(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function RV(n){const e=Rn(n);await md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CV(n,e){return[...n.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function E1(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV(n,e){const t=await _1(n,{},async()=>{const a=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await v1(n,s,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:a};return n.emulatorConfig&&zl(n.emulatorConfig.host)&&(p.credentials="include"),y1.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DV(n,e){return $l(n,"POST","/v2/accounts:revokeToken",b_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=eS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await IV(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,c=new Sl;return a&&($e(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&($e(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&($e(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return ua("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(n,e){$e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ui{constructor({uid:e,auth:t,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new wV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Tc(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SV(this,e)}reload(){return RV(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ui({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await md(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oi(this.auth.app))return Promise.reject(oo(this.auth));const e=await this.getIdToken();return await Tc(this,bV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:R,providerData:L,stsTokenManager:F}=t;$e(E&&F,e,"internal-error");const j=Sl.fromJSON(this.name,F);$e(typeof E=="string",e,"internal-error"),Za(a,e.name),Za(s,e.name),$e(typeof b=="boolean",e,"internal-error"),$e(typeof R=="boolean",e,"internal-error"),Za(l,e.name),Za(c,e.name),Za(d,e.name),Za(p,e.name),Za(g,e.name),Za(_,e.name);const K=new ui({uid:E,auth:e,email:s,emailVerified:b,displayName:a,isAnonymous:R,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:j,createdAt:g,lastLoginAt:_});return L&&Array.isArray(L)&&(K.providerData=L.map(B=>({...B}))),p&&(K._redirectEventId=p),K}static async _fromIdTokenResponse(e,t,a=!1){const s=new Sl;s.updateFromServerResponse(t);const l=new ui({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await md(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];$e(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?E1(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),d=new Sl;d.updateFromIdToken(a);const p=new ui({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new fy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=new Map;function ca(n){ga(n instanceof Function,"Expected a class definition");let e=tS.get(n);return e?(ga(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}T1.type="NONE";const nS=T1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(n,e,t){return`firebase:${n}:${e}:${t}`}class Al{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=kf(this.userKey,s.apiKey,l),this.fullPersistenceKey=kf("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await dd(this.auth,{idToken:e}).catch(()=>{});return t?ui._fromGetAccountInfoResponse(this.auth,t,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Al(ca(nS),e,a);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||ca(nS);const c=kf(a,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let E;if(typeof _=="string"){const b=await dd(e,{idToken:_}).catch(()=>{});if(!b)break;E=await ui._fromGetAccountInfoResponse(e,b,_)}else E=ui._fromJSON(e,_);g!==l&&(d=E),l=g;break}}catch{}const p=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Al(l,e,a):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Al(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(w1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C1(e))return"Blackberry";if(I1(e))return"Webos";if(S1(e))return"Safari";if((e.includes("chrome/")||A1(e))&&!e.includes("edge/"))return"Chrome";if(R1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function b1(n=Yn()){return/firefox\//i.test(n)}function S1(n=Yn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A1(n=Yn()){return/crios\//i.test(n)}function w1(n=Yn()){return/iemobile/i.test(n)}function R1(n=Yn()){return/android/i.test(n)}function C1(n=Yn()){return/blackberry/i.test(n)}function I1(n=Yn()){return/webos/i.test(n)}function A_(n=Yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function NV(n=Yn()){var e;return A_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function xV(){return Rx()&&document.documentMode===10}function D1(n=Yn()){return A_(n)||R1(n)||I1(n)||C1(n)||/windows phone/i.test(n)||w1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(n,e=[]){let t;switch(n){case"Browser":t=rS(Yn());break;case"Worker":t=`${rS(Yn())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(n,e={}){return $l(n,"GET","/v2/passwordPolicy",b_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=6;class VV{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??PV,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iS(this),this.idTokenSubscription=new iS(this),this.beforeStateQueue=new OV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ca(t)),this._initializationPromise=this.queue(async()=>{var a,s,l;if(!this._deleted&&(this.persistenceManager=await Al.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await dd(this,{idToken:e}),a=await ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(oi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(a=p.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await md(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oi(this.app))return Promise.reject(oo(this));const t=e?Rn(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oi(this.app)?Promise.reject(oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oi(this.app)?Promise.reject(oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ca(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MV(this),t=new VV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await DV(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ca(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await Al.create(this,[ca(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,s);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(oi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&fV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Jd(n){return Rn(n)}class iS{constructor(e){this.auth=e,this.observer=null,this.addObserver=Px(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LV(n){w_=n}function UV(n){return w_.loadJS(n)}function jV(){return w_.gapiScript}function zV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(n,e){const t=Vy(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(uo(l,e??{}))return s;ji(s,"already-initialized")}return t.initialize({options:e})}function FV(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(ca);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function HV(n,e,t){const a=Jd(n);$e(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=x1(e),{host:c,port:d}=qV(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){$e(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),$e(uo(g,a.config.emulator)&&uo(_,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=_,a.settings.appVerificationDisabledForTesting=!0,zl(c)?(CA(`${l}//${c}${p}`),IA("Auth",!0)):GV()}function x1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function qV(n){const e=x1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:aS(a.substr(l.length+1))}}else{const[l,c]=a.split(":");return{host:l,port:aS(c)}}}function aS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function GV(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ua("not implemented")}_getIdTokenResponse(e){return ua("not implemented")}_linkToIdToken(e,t){return ua("not implemented")}_getReauthenticationResolver(e){return ua("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(n,e){return EV(n,"POST","/v1/accounts:signInWithIdp",b_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V="http://localhost";class mo extends O1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ji("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...l}=t;if(!a||!s)return null;const c=new mo(a,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return wl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,wl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wl(e,t)}buildRequest(){const e={requestUri:$V,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends R_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Gc{constructor(){super("facebook.com")}static credential(e){return mo._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends Gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mo._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return la.credential(t,a)}catch{return null}}}la.GOOGLE_SIGN_IN_METHOD="google.com";la.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Gc{constructor(){super("github.com")}static credential(e){return mo._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Gc{constructor(){super("twitter.com")}static credential(e,t){return mo._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ss.credential(t,a)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await ui._fromIdTokenResponse(e,a,s),c=sS(a);return new Vl({user:l,providerId:c,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=sS(a);return new Vl({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function sS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd extends va{constructor(e,t,a,s){super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,pd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new pd(e,t,a,s)}}function M1(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?pd._fromErrorAndOperation(n,l,e,a):l})}async function KV(n,e,t=!1){const a=await Tc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Vl._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YV(n,e,t=!1){const{auth:a}=n;if(oi(a.app))return Promise.reject(oo(a));const s="reauthenticate";try{const l=await Tc(n,M1(a,s,e,n),t);$e(l.idToken,a,"internal-error");const c=S_(l.idToken);$e(c,a,"internal-error");const{sub:d}=c;return $e(n.uid===d,a,"user-mismatch"),Vl._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ji(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QV(n,e,t=!1){if(oi(n.app))return Promise.reject(oo(n));const a="signIn",s=await M1(n,a,e),l=await Vl._fromIdTokenResponse(n,a,s);return t||await n._updateCurrentUser(l.user),l}function XV(n,e,t,a){return Rn(n).onIdTokenChanged(e,t,a)}function WV(n,e,t){return Rn(n).beforeAuthStateChanged(e,t)}function JV(n,e,t,a){return Rn(n).onAuthStateChanged(e,t,a)}const gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gd,"1"),this.storage.removeItem(gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=1e3,e4=10;class V1 extends P1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=D1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!t&&this.localCache[a]===c||this.notifyListeners(a,c)},l=this.storage.getItem(a);xV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,e4):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},ZV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}V1.type="LOCAL";const t4=V1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1 extends P1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}k1.type="SESSION";const L1=k1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new Zd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await n4(d);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=C_("",20);s.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function i4(n){ki().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function a4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function s4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function o4(){return U1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="firebaseLocalStorageDb",l4=1,yd="firebaseLocalStorage",z1="fbase_key";class $c{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function em(n,e){return n.transaction([yd],e?"readwrite":"readonly").objectStore(yd)}function u4(){const n=indexedDB.deleteDatabase(j1);return new $c(n).toPromise()}function dy(){const n=indexedDB.open(j1,l4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(yd,{keyPath:z1})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(yd)?e(a):(a.close(),await u4(),e(await dy()))})})}async function oS(n,e,t){const a=em(n,!0).put({[z1]:e,value:t});return new $c(a).toPromise()}async function c4(n,e){const t=em(n,!1).get(e),a=await new $c(t).toPromise();return a===void 0?null:a.value}function lS(n,e){const t=em(n,!0).delete(e);return new $c(t).toPromise()}const h4=800,f4=3;class B1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>f4)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return U1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zd._getInstance(o4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await a4(),!this.activeServiceWorker)return;this.sender=new r4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||s4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dy();return await oS(e,gd,"1"),await lS(e,gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>oS(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>c4(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=em(s,!1).getAll();return new $c(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}B1.type="LOCAL";const d4=B1;new qc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(n,e){return e?ca(e):($e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_ extends O1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function m4(n){return QV(n.auth,new I_(n),n.bypassAuthState)}function p4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),YV(t,new I_(n),n.bypassAuthState)}async function g4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),KV(t,new I_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m4;case"linkViaPopup":case"linkViaRedirect":return g4;case"reauthViaPopup":case"reauthViaRedirect":return p4;default:ji(this.auth,"internal-error")}}resolve(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=new qc(2e3,1e4);async function _4(n,e,t){if(oi(n.app))return Promise.reject(hi(n,"operation-not-supported-in-this-environment"));const a=Jd(n);dV(n,e,R_);const s=F1(a,t);return new io(a,"signInViaPopup",e,s).executeNotNull()}class io extends H1{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){ga(this.filter.length===1,"Popup operations only handle one event");const e=C_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y4.get())};e()}}io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="pendingRedirect",Lf=new Map;class E4 extends H1{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Lf.get(this.auth._key());if(!e){try{const a=await T4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Lf.set(this.auth._key(),e)}return this.bypassAuthState||Lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T4(n,e){const t=A4(e),a=S4(n);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}function b4(n,e){Lf.set(n._key(),e)}function S4(n){return ca(n._redirectPersistence)}function A4(n){return kf(v4,n.config.apiKey,n.name)}async function w4(n,e,t=!1){if(oi(n.app))return Promise.reject(oo(n));const a=Jd(n),s=F1(a,e),c=await new E4(a,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=600*1e3;class C4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!I4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!q1(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(hi(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=R4&&this.cachedEventUids.clear(),this.cachedEventUids.has(uS(e))}saveEventToCache(e){this.cachedEventUids.add(uS(e)),this.lastProcessedEventTime=Date.now()}}function uS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function q1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function I4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return q1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(n,e={}){return $l(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,x4=/^https?/;async function O4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await D4(n);for(const t of e)try{if(M4(t))return}catch{}ji(n,"unauthorized-domain")}function M4(n){const e=hy(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===a}if(!x4.test(t))return!1;if(N4.test(n))return a===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=new qc(3e4,6e4);function cS(){const n=ki().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function V4(n){return new Promise((e,t)=>{var s,l,c;function a(){cS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cS(),t(hi(n,"network-request-failed"))},timeout:P4.get()})}if((l=(s=ki().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=ki().gapi)!=null&&c.load)a();else{const d=zV("iframefcb");return ki()[d]=()=>{gapi.load?a():t(hi(n,"network-request-failed"))},UV(`${jV()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Uf=null,e})}let Uf=null;function k4(n){return Uf=Uf||V4(n),Uf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=new qc(5e3,15e3),U4="__/auth/iframe",j4="emulator/auth/iframe",z4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F4(n){const e=n.config;$e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?T_(e,j4):`https://${n.config.authDomain}/${U4}`,a={apiKey:e.apiKey,appName:n.name,v:Bl},s=B4.get(n.config.apiHost);s&&(a.eid=s);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${xc(a).slice(1)}`}async function H4(n){const e=await k4(n),t=ki().gapi;return $e(t,n,"internal-error"),e.open({where:document.body,url:F4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z4,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const c=hi(n,"network-request-failed"),d=ki().setTimeout(()=>{l(c)},L4.get());function p(){ki().clearTimeout(d),s(a)}a.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G4=500,$4=600,K4="_blank",Y4="http://localhost";class hS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Q4(n,e,t,a=G4,s=$4){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const p={...q4,width:a.toString(),height:s.toString(),top:l,left:c},g=Yn().toLowerCase();t&&(d=A1(g)?K4:t),b1(g)&&(e=e||Y4,p.scrollbars="yes");const _=Object.entries(p).reduce((b,[R,L])=>`${b}${R}=${L},`,"");if(NV(g)&&d!=="_self")return X4(e||"",d),new hS(null);const E=window.open(e||"",d,_);$e(E,n,"popup-blocked");try{E.focus()}catch{}return new hS(E)}function X4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="__/auth/handler",J4="emulator/auth/handler",Z4=encodeURIComponent("fac");async function fS(n,e,t,a,s,l){$e(n.config.authDomain,n,"auth-domain-config-required"),$e(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:Bl,eventId:s};if(e instanceof R_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Mx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Gc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),g=p?`#${Z4}=${encodeURIComponent(p)}`:"";return`${ek(n)}?${xc(d).slice(1)}${g}`}function ek({config:n}){return n.emulator?T_(n,J4):`https://${n.authDomain}/${W4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="webStorageSupport";class tk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L1,this._completeRedirectFn=w4,this._overrideRedirectResult=b4}async _openPopup(e,t,a,s){var c;ga((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await fS(e,t,a,hy(),s);return Q4(e,l,C_())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await fS(e,t,a,hy(),s);return i4(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(ga(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await H4(e),a=new C4(e);return t.register("authEvent",s=>($e(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Og,{type:Og},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[Og];l!==void 0&&t(!!l),ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=O4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return D1()||S1()||A_()}}const nk=tk;var dS="@firebase/auth",mS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ak(n){Cl(new co("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=a.options;$e(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N1(n)},g=new kV(a,s,l,p);return FV(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),Cl(new co("auth-internal",e=>{const t=Jd(e.getProvider("auth").getImmediate());return(a=>new rk(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fs(dS,mS,ik(n)),fs(dS,mS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=300,ok=RA("authIdTokenMaxAge")||sk;let pS=null;const lk=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>ok)return;const s=t==null?void 0:t.token;pS!==s&&(pS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function uk(n=OA()){const e=Vy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=BV(n,{popupRedirectResolver:nk,persistence:[d4,t4,L1]}),a=RA("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const c=lk(l.toString());WV(t,c,()=>c(t.currentUser)),XV(t,d=>c(d))}}const s=AA("auth");return s&&HV(t,`http://${s}`),t}function ck(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}LV({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=s=>{const l=hi("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",ck().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ak("Browser");const hk={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function ll(n){const e=hk[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const fk={apiKey:ll("VITE_FIREBASE_API_KEY"),authDomain:ll("VITE_FIREBASE_AUTH_DOMAIN"),projectId:ll("VITE_FIREBASE_PROJECT_ID"),storageBucket:ll("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:ll("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:ll("VITE_FIREBASE_APP_ID")},G1=xA(fk),kl=uk(G1),dk=new la,Cn=QP(G1),$1=P.createContext(void 0),mk=({children:n})=>{const[e,t]=P.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),a=P.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);P.useEffect(()=>{a(e)},[e,a]);const s=P.useCallback(c=>{t(c),a(c);const d=kl.currentUser;if(d){const p=Xr(Cn,"users",d.uid);Wd(p,{preferredTheme:c}).catch(g=>console.error("Error updating preferred theme in Firebase:",g))}},[a]),l=P.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return P.useEffect(()=>kl.onAuthStateChanged(async d=>{if(d){const p=Xr(Cn,"users",d.uid),g=await Fc(p);if(g.exists()&&g.data().preferredTheme){const _=g.data().preferredTheme;t(_),a(_)}}}),[a]),w.jsx($1.Provider,{value:{theme:e,toggleTheme:l,setTheme:s},children:n})},pk="_spinner_5jyct_1",gk="_spinnerContainer_5jyct_19",gS={spinner:pk,spinnerContainer:gk},Kl=({container:n=!0})=>{const e=w.jsx("div",{className:gS.spinner});return n?w.jsx("div",{className:gS.spinnerContainer,children:e}):e},yk="_loadingContainer_1n1m5_1",_k={loadingContainer:yk},Ll=()=>w.jsx("div",{className:_k.loadingContainer,children:w.jsx(Kl,{container:!1})}),vk=()=>{const n=ct(a=>a.auth.firebaseUser),e=ct(a=>a.auth.userData);return ct(a=>a.auth.loading)?w.jsx(Ll,{}):n?e?e.isApproved?w.jsx(us,{to:"/app/dashboard",replace:!0}):w.jsx(us,{to:"/guest",replace:!0}):w.jsx(Ll,{}):w.jsx(us,{to:"/login",replace:!0})};function Ln(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Ek=typeof Symbol=="function"&&Symbol.observable||"@@observable",yS=Ek,Mg=()=>Math.random().toString(36).substring(7).split("").join("."),Tk={INIT:`@@redux/INIT${Mg()}`,REPLACE:`@@redux/REPLACE${Mg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Mg()}`},_d=Tk;function D_(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function K1(n,e,t){if(typeof n!="function")throw new Error(Ln(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Ln(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Ln(1));return t(K1)(n,e)}let a=n,s=e,l=new Map,c=l,d=0,p=!1;function g(){c===l&&(c=new Map,l.forEach((j,K)=>{c.set(K,j)}))}function _(){if(p)throw new Error(Ln(3));return s}function E(j){if(typeof j!="function")throw new Error(Ln(4));if(p)throw new Error(Ln(5));let K=!0;g();const B=d++;return c.set(B,j),function(){if(K){if(p)throw new Error(Ln(6));K=!1,g(),c.delete(B),l=null}}}function b(j){if(!D_(j))throw new Error(Ln(7));if(typeof j.type>"u")throw new Error(Ln(8));if(typeof j.type!="string")throw new Error(Ln(17));if(p)throw new Error(Ln(9));try{p=!0,s=a(s,j)}finally{p=!1}return(l=c).forEach(B=>{B()}),j}function R(j){if(typeof j!="function")throw new Error(Ln(10));a=j,b({type:_d.REPLACE})}function L(){const j=E;return{subscribe(K){if(typeof K!="object"||K===null)throw new Error(Ln(11));function B(){const te=K;te.next&&te.next(_())}return B(),{unsubscribe:j(B)}},[yS](){return this}}}return b({type:_d.INIT}),{dispatch:b,subscribe:E,getState:_,replaceReducer:R,[yS]:L}}function bk(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:_d.INIT})>"u")throw new Error(Ln(12));if(typeof t(void 0,{type:_d.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ln(13))})}function Sk(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const a=Object.keys(t);let s;try{bk(t)}catch(l){s=l}return function(c={},d){if(s)throw s;let p=!1;const g={};for(let _=0;_<a.length;_++){const E=a[_],b=t[E],R=c[E],L=b(R,d);if(typeof L>"u")throw d&&d.type,new Error(Ln(14));g[E]=L,p=p||L!==R}return p=p||a.length!==Object.keys(c).length,p?g:c}}function vd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...a)=>e(t(...a)))}function Ak(...n){return e=>(t,a)=>{const s=e(t,a);let l=()=>{throw new Error(Ln(15))};const c={getState:s.getState,dispatch:(p,...g)=>l(p,...g)},d=n.map(p=>p(c));return l=vd(...d)(s.dispatch),{...s,dispatch:l}}}function wk(n){return D_(n)&&"type"in n&&typeof n.type=="string"}var Y1=Symbol.for("immer-nothing"),_S=Symbol.for("immer-draftable"),nr=Symbol.for("immer-state");function li(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Dr=Object,Ul=Dr.getPrototypeOf,Ed="constructor",tm="prototype",my="configurable",Td="enumerable",jf="writable",bc="value",ya=n=>!!n&&!!n[nr];function di(n){var e;return n?Q1(n)||rm(n)||!!n[_S]||!!((e=n[Ed])!=null&&e[_S])||im(n)||am(n):!1}var Rk=Dr[tm][Ed].toString(),vS=new WeakMap;function Q1(n){if(!n||!N_(n))return!1;const e=Ul(n);if(e===null||e===Dr[tm])return!0;const t=Dr.hasOwnProperty.call(e,Ed)&&e[Ed];if(t===Object)return!0;if(!gl(t))return!1;let a=vS.get(t);return a===void 0&&(a=Function.toString.call(t),vS.set(t,a)),a===Rk}function nm(n,e,t=!0){Kc(n)===0?(t?Reflect.ownKeys(n):Dr.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((a,s)=>e(s,a,n))}function Kc(n){const e=n[nr];return e?e.type_:rm(n)?1:im(n)?2:am(n)?3:0}var ES=(n,e,t=Kc(n))=>t===2?n.has(e):Dr[tm].hasOwnProperty.call(n,e),py=(n,e,t=Kc(n))=>t===2?n.get(e):n[e],bd=(n,e,t,a=Kc(n))=>{a===2?n.set(e,t):a===3?n.add(t):n[e]=t};function Ck(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var rm=Array.isArray,im=n=>n instanceof Map,am=n=>n instanceof Set,N_=n=>typeof n=="object",gl=n=>typeof n=="function",Pg=n=>typeof n=="boolean";function Ik(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var oa=n=>n.copy_||n.base_,x_=n=>n.modified_?n.copy_:n.base_;function gy(n,e){if(im(n))return new Map(n);if(am(n))return new Set(n);if(rm(n))return Array[tm].slice.call(n);const t=Q1(n);if(e===!0||e==="class_only"&&!t){const a=Dr.getOwnPropertyDescriptors(n);delete a[nr];let s=Reflect.ownKeys(a);for(let l=0;l<s.length;l++){const c=s[l],d=a[c];d[jf]===!1&&(d[jf]=!0,d[my]=!0),(d.get||d.set)&&(a[c]={[my]:!0,[jf]:!0,[Td]:d[Td],[bc]:n[c]})}return Dr.create(Ul(n),a)}else{const a=Ul(n);if(a!==null&&t)return{...n};const s=Dr.create(a);return Dr.assign(s,n)}}function O_(n,e=!1){return sm(n)||ya(n)||!di(n)||(Kc(n)>1&&Dr.defineProperties(n,{set:bf,add:bf,clear:bf,delete:bf}),Dr.freeze(n),e&&nm(n,(t,a)=>{O_(a,!0)},!1)),n}function Dk(){li(2)}var bf={[bc]:Dk};function sm(n){return n===null||!N_(n)?!0:Dr.isFrozen(n)}var Sd="MapSet",yy="Patches",TS="ArrayMethods",X1={};function po(n){const e=X1[n];return e||li(0,n),e}var bS=n=>!!X1[n],Sc,W1=()=>Sc,Nk=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:bS(Sd)?po(Sd):void 0,arrayMethodsPlugin_:bS(TS)?po(TS):void 0});function SS(n,e){e&&(n.patchPlugin_=po(yy),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function _y(n){vy(n),n.drafts_.forEach(xk),n.drafts_=null}function vy(n){n===Sc&&(Sc=n.parent_)}var AS=n=>Sc=Nk(Sc,n);function xk(n){const e=n[nr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function wS(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[nr].modified_&&(_y(e),li(4)),di(n)&&(n=RS(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[nr].base_,n,e)}else n=RS(e,t);return Ok(e,n,!0),_y(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==Y1?n:void 0}function RS(n,e){if(sm(e))return e;const t=e[nr];if(!t)return Ad(e,n.handledSet_,n);if(!om(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:a}=t;if(a)for(;a.length>0;)a.pop()(n);eR(t,n)}return t.copy_}function Ok(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&O_(e,t)}function J1(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var om=(n,e)=>n.scope_===e,Mk=[];function Z1(n,e,t,a){const s=oa(n),l=n.type_;if(a!==void 0&&py(s,a,l)===e){bd(s,a,t,l);return}if(!n.draftLocations_){const d=n.draftLocations_=new Map;nm(s,(p,g)=>{if(ya(g)){const _=d.get(g)||[];_.push(p),d.set(g,_)}})}const c=n.draftLocations_.get(e)??Mk;for(const d of c)bd(s,d,t,l)}function Pk(n,e,t){n.callbacks_.push(function(s){var d;const l=e;if(!l||!om(l,s))return;(d=s.mapSetPlugin_)==null||d.fixSetContents(l);const c=x_(l);Z1(n,l.draft_??l,c,t),eR(l,s)})}function eR(n,e){var a;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((a=n.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const l=s.getPath(n);l&&s.generatePatches_(n,l,e)}J1(n)}}function Vk(n,e,t){const{scope_:a}=n;if(ya(t)){const s=t[nr];om(s,a)&&s.callbacks_.push(function(){zf(n);const c=x_(s);Z1(n,t,c,e)})}else di(t)&&n.callbacks_.push(function(){const l=oa(n);n.type_===3?l.has(t)&&Ad(t,a.handledSet_,a):py(l,e,n.type_)===t&&a.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&Ad(py(n.copy_,e,n.type_),a.handledSet_,a)})}function Ad(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||ya(n)||e.has(n)||!di(n)||sm(n)||(e.add(n),nm(n,(a,s)=>{if(ya(s)){const l=s[nr];if(om(l,t)){const c=x_(l);bd(n,a,c,n.type_),J1(l)}}else di(s)&&Ad(s,e,t)})),n}function kk(n,e){const t=rm(n),a={type_:t?1:0,scope_:e?e.scope_:W1(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,l=wd;t&&(s=[a],l=Ac);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return a.draft_=d,a.revoke_=c,[d,a]}var wd={get(n,e){if(e===nr)return n;let t=n.scope_.arrayMethodsPlugin_;const a=n.type_===1&&typeof e=="string";if(a&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=oa(n);if(!ES(s,e,n.type_))return Lk(n,s,e);const l=s[e];if(n.finalized_||!di(l)||a&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&Ik(e))return l;if(l===Vg(n.base_,e)){zf(n);const c=n.type_===1?+e:e,d=Ty(n.scope_,l,n,c);return n.copy_[c]=d}return l},has(n,e){return e in oa(n)},ownKeys(n){return Reflect.ownKeys(oa(n))},set(n,e,t){const a=tR(oa(n),e);if(a!=null&&a.set)return a.set.call(n.draft_,t),!0;if(!n.modified_){const s=Vg(oa(n),e),l=s==null?void 0:s[nr];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(Ck(t,s)&&(t!==void 0||ES(n.base_,e,n.type_)))return!0;zf(n),Ey(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),Vk(n,e,t)),!0},deleteProperty(n,e){return zf(n),Vg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),Ey(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=oa(n),a=Reflect.getOwnPropertyDescriptor(t,e);return a&&{[jf]:!0,[my]:n.type_!==1||e!=="length",[Td]:a[Td],[bc]:t[e]}},defineProperty(){li(11)},getPrototypeOf(n){return Ul(n.base_)},setPrototypeOf(){li(12)}},Ac={};for(let n in wd){let e=wd[n];Ac[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}Ac.deleteProperty=function(n,e){return Ac.set.call(this,n,e,void 0)};Ac.set=function(n,e,t){return wd.set.call(this,n[0],e,t,n[0])};function Vg(n,e){const t=n[nr];return(t?oa(t):n)[e]}function Lk(n,e,t){var s;const a=tR(e,t);return a?bc in a?a[bc]:(s=a.get)==null?void 0:s.call(n.draft_):void 0}function tR(n,e){if(!(e in n))return;let t=Ul(n);for(;t;){const a=Object.getOwnPropertyDescriptor(t,e);if(a)return a;t=Ul(t)}}function Ey(n){n.modified_||(n.modified_=!0,n.parent_&&Ey(n.parent_))}function zf(n){n.copy_||(n.assigned_=new Map,n.copy_=gy(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var Uk=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{if(gl(e)&&!gl(t)){const l=t;t=e;const c=this;return function(p=l,...g){return c.produce(p,_=>t.call(this,_,...g))}}gl(t)||li(6),a!==void 0&&!gl(a)&&li(7);let s;if(di(e)){const l=AS(this),c=Ty(l,e,void 0);let d=!0;try{s=t(c),d=!1}finally{d?_y(l):vy(l)}return SS(l,a),wS(s,l)}else if(!e||!N_(e)){if(s=t(e),s===void 0&&(s=e),s===Y1&&(s=void 0),this.autoFreeze_&&O_(s,!0),a){const l=[],c=[];po(yy).generateReplacementPatches_(e,s,{patches_:l,inversePatches_:c}),a(l,c)}return s}else li(1,e)},this.produceWithPatches=(e,t)=>{if(gl(e))return(c,...d)=>this.produceWithPatches(c,p=>e(p,...d));let a,s;return[this.produce(e,t,(c,d)=>{a=c,s=d}),a,s]},Pg(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),Pg(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),Pg(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){di(n)||li(8),ya(n)&&(n=jk(n));const e=AS(this),t=Ty(e,n,void 0);return t[nr].isManual_=!0,vy(e),t}finishDraft(n,e){const t=n&&n[nr];(!t||!t.isManual_)&&li(9);const{scope_:a}=t;return SS(a,e),wS(void 0,a)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const a=po(yy).applyPatches_;return ya(n)?a(n,e):this.produce(n,s=>a(s,e))}};function Ty(n,e,t,a){const[s,l]=im(e)?po(Sd).proxyMap_(e,t):am(e)?po(Sd).proxySet_(e,t):kk(e,t);return((t==null?void 0:t.scope_)??W1()).drafts_.push(s),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=a,t&&a!==void 0?Pk(t,l,a):l.callbacks_.push(function(p){var _;(_=p.mapSetPlugin_)==null||_.fixSetContents(l);const{patchPlugin_:g}=p;l.modified_&&g&&g.generatePatches_(l,[],p)}),s}function jk(n){return ya(n)||li(10,n),nR(n)}function nR(n){if(!di(n)||sm(n))return n;const e=n[nr];let t,a=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=gy(n,e.scope_.immer_.useStrictShallowCopy_),a=e.scope_.immer_.shouldUseStrictIteration()}else t=gy(n,!0);return nm(t,(s,l)=>{bd(t,s,nR(l))},a),e&&(e.finalized_=!1),t}var zk=new Uk,rR=zk.produce;function iR(n){return({dispatch:t,getState:a})=>s=>l=>typeof l=="function"?l(t,a,n):s(l)}var Bk=iR(),Fk=iR,Hk=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vd:vd.apply(null,arguments)},qk=n=>n&&typeof n.match=="function";function lc(n,e){function t(...a){if(e){let s=e(...a);if(!s)throw new Error(fa(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:a[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=a=>wk(a)&&a.type===n,t}var aR=class Zu extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Zu.prototype)}static get[Symbol.species](){return Zu}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Zu(...e[0].concat(this)):new Zu(...e.concat(this))}};function CS(n){return di(n)?rR(n,()=>{}):n}function Sf(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function Gk(n){return typeof n=="boolean"}var $k=()=>function(e){const{thunk:t=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=e??{};let c=new aR;return t&&(Gk(t)?c.push(Bk):c.push(Fk(t.extraArgument))),c},Kk="RTK_autoBatch",IS=n=>e=>{setTimeout(e,n)},Yk=(n={type:"raf"})=>e=>(...t)=>{const a=e(...t);let s=!0,l=!1,c=!1;const d=new Set,p=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:IS(10):n.type==="callback"?n.queueNotification:IS(n.timeout),g=()=>{c=!1,l&&(l=!1,d.forEach(_=>_()))};return Object.assign({},a,{subscribe(_){const E=()=>s&&_(),b=a.subscribe(E);return d.add(_),()=>{b(),d.delete(_)}},dispatch(_){var E;try{return s=!((E=_==null?void 0:_.meta)!=null&&E[Kk]),l=!s,l&&(c||(c=!0,p(g))),a.dispatch(_)}finally{s=!0}}})},Qk=n=>function(t){const{autoBatch:a=!0}=t??{};let s=new aR(n);return a&&s.push(Yk(typeof a=="object"?a:void 0)),s};function Xk(n){const e=$k(),{reducer:t=void 0,middleware:a,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(D_(t))d=Sk(t);else throw new Error(fa(1));let p;typeof a=="function"?p=a(e):p=e();let g=vd;s&&(g=Hk({trace:!1,...typeof s=="object"&&s}));const _=Ak(...p),E=Qk(_);let b=typeof c=="function"?c(E):E();const R=g(...b);return K1(d,l,R)}function sR(n){const e={},t=[];let a;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(fa(28));if(d in e)throw new Error(fa(29));return e[d]=c,s},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return t.push({matcher:l,reducer:c}),s},addDefaultCase(l){return a=l,s}};return n(s),[e,t,a]}function Wk(n){return typeof n=="function"}function Jk(n,e){let[t,a,s]=sR(e),l;if(Wk(n))l=()=>CS(n());else{const d=CS(n);l=()=>d}function c(d=l(),p){let g=[t[p.type],...a.filter(({matcher:_})=>_(p)).map(({reducer:_})=>_)];return g.filter(_=>!!_).length===0&&(g=[s]),g.reduce((_,E)=>{if(E)if(ya(_)){const R=E(_,p);return R===void 0?_:R}else{if(di(_))return rR(_,b=>E(b,p));{const b=E(_,p);if(b===void 0){if(_===null)return _;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return _},d)}return c.getInitialState=l,c}var Zk=(n,e)=>qk(n)?n.match(e):n(e);function eL(...n){return e=>n.some(t=>Zk(t,e))}var tL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nL=(n=21)=>{let e="",t=n;for(;t--;)e+=tL[Math.random()*64|0];return e},rL=["name","message","stack","code"],kg=class{constructor(n,e){rg(this,"_type");this.payload=n,this.meta=e}},DS=class{constructor(n,e){rg(this,"_type");this.payload=n,this.meta=e}},iL=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of rL)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},NS="External signal was aborted",Mr=(()=>{function n(e,t,a){const s=lc(e+"/fulfilled",(p,g,_,E)=>({payload:p,meta:{...E||{},arg:_,requestId:g,requestStatus:"fulfilled"}})),l=lc(e+"/pending",(p,g,_)=>({payload:void 0,meta:{..._||{},arg:g,requestId:p,requestStatus:"pending"}})),c=lc(e+"/rejected",(p,g,_,E,b)=>({payload:E,error:(a&&a.serializeError||iL)(p||"Rejected"),meta:{...b||{},arg:_,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function d(p,{signal:g}={}){return(_,E,b)=>{const R=a!=null&&a.idGenerator?a.idGenerator(p):nL(),L=new AbortController;let F,j;function K($){j=$,L.abort()}g&&(g.aborted?K(NS):g.addEventListener("abort",()=>K(NS),{once:!0}));const B=(async function(){var ae,ee;let $;try{let A=(ae=a==null?void 0:a.condition)==null?void 0:ae.call(a,p,{getState:E,extra:b});if(sL(A)&&(A=await A),A===!1||L.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const S=new Promise((C,M)=>{F=()=>{M({name:"AbortError",message:j||"Aborted"})},L.signal.addEventListener("abort",F,{once:!0})});_(l(R,p,(ee=a==null?void 0:a.getPendingMeta)==null?void 0:ee.call(a,{requestId:R,arg:p},{getState:E,extra:b}))),$=await Promise.race([S,Promise.resolve(t(p,{dispatch:_,getState:E,extra:b,requestId:R,signal:L.signal,abort:K,rejectWithValue:(C,M)=>new kg(C,M),fulfillWithValue:(C,M)=>new DS(C,M)})).then(C=>{if(C instanceof kg)throw C;return C instanceof DS?s(C.payload,R,p,C.meta):s(C,R,p)})])}catch(A){$=A instanceof kg?c(null,R,p,A.payload,A.meta):c(A,R,p)}finally{F&&L.signal.removeEventListener("abort",F)}return a&&!a.dispatchConditionRejection&&c.match($)&&$.meta.condition||_($),$})();return Object.assign(B,{abort:K,requestId:R,arg:p,unwrap(){return B.then(aL)}})}}return Object.assign(d,{pending:l,rejected:c,fulfilled:s,settled:eL(c,s),typePrefix:e})}return n.withTypes=()=>n,n})();function aL(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function sL(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var oL=Symbol.for("rtk-slice-createasyncthunk");function lL(n,e){return`${n}/${e}`}function uL({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[oL];return function(s){const{name:l,reducerPath:c=l}=s;if(!l)throw new Error(fa(11));const d=(typeof s.reducers=="function"?s.reducers(hL()):s.reducers)||{},p=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},_={addCase(te,ae){const ee=typeof te=="string"?te:te.type;if(!ee)throw new Error(fa(12));if(ee in g.sliceCaseReducersByType)throw new Error(fa(13));return g.sliceCaseReducersByType[ee]=ae,_},addMatcher(te,ae){return g.sliceMatchers.push({matcher:te,reducer:ae}),_},exposeAction(te,ae){return g.actionCreators[te]=ae,_},exposeCaseReducer(te,ae){return g.sliceCaseReducersByName[te]=ae,_}};p.forEach(te=>{const ae=d[te],ee={reducerName:te,type:lL(l,te),createNotation:typeof s.reducers=="function"};dL(ae)?pL(ee,ae,_,e):fL(ee,ae,_)});function E(){const[te={},ae=[],ee=void 0]=typeof s.extraReducers=="function"?sR(s.extraReducers):[s.extraReducers],A={...te,...g.sliceCaseReducersByType};return Jk(s.initialState,S=>{for(let C in A)S.addCase(C,A[C]);for(let C of g.sliceMatchers)S.addMatcher(C.matcher,C.reducer);for(let C of ae)S.addMatcher(C.matcher,C.reducer);ee&&S.addDefaultCase(ee)})}const b=te=>te,R=new Map,L=new WeakMap;let F;function j(te,ae){return F||(F=E()),F(te,ae)}function K(){return F||(F=E()),F.getInitialState()}function B(te,ae=!1){function ee(S){let C=S[te];return typeof C>"u"&&ae&&(C=Sf(L,ee,K)),C}function A(S=b){const C=Sf(R,ae,()=>new WeakMap);return Sf(C,S,()=>{const M={};for(const[N,O]of Object.entries(s.selectors??{}))M[N]=cL(O,S,()=>Sf(L,S,K),ae);return M})}return{reducerPath:te,getSelectors:A,get selectors(){return A(ee)},selectSlice:ee}}const $={name:l,reducer:j,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:K,...B(c),injectInto(te,{reducerPath:ae,...ee}={}){const A=ae??c;return te.inject({reducerPath:A,reducer:j},ee),{...$,...B(A,!0)}}};return $}}function cL(n,e,t,a){function s(l,...c){let d=e(l);return typeof d>"u"&&a&&(d=t()),n(d,...c)}return s.unwrapped=n,s}var To=uL();function hL(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function fL({type:n,reducerName:e,createNotation:t},a,s){let l,c;if("reducer"in a){if(t&&!mL(a))throw new Error(fa(17));l=a.reducer,c=a.prepare}else l=a;s.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?lc(n,c):lc(n))}function dL(n){return n._reducerDefinitionType==="asyncThunk"}function mL(n){return n._reducerDefinitionType==="reducerWithPrepare"}function pL({type:n,reducerName:e},t,a,s){if(!s)throw new Error(fa(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:p,settled:g,options:_}=t,E=s(n,l,_);a.exposeAction(e,E),c&&a.addCase(E.fulfilled,c),d&&a.addCase(E.pending,d),p&&a.addCase(E.rejected,p),g&&a.addMatcher(E.settled,g),a.exposeCaseReducer(e,{fulfilled:c||Af,pending:d||Af,rejected:p||Af,settled:g||Af})}function Af(){}function fa(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const gL={positions:[],loading:!1,error:null,fetched:!1},ps=Mr("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=Xr(Cn,"metadata","positions"),a=await Fc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),oR=Mr("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=Xr(Cn,"metadata","positions");return await Wd(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),yL=To({name:"positions",initialState:gL,reducers:{},extraReducers:n=>{n.addCase(ps.pending,e=>{e.loading=!0,e.error=null}).addCase(ps.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(ps.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(oR.fulfilled,(e,t)=>{e.positions=t.payload})}}),_L=yL.reducer,vL={teams:[],loading:!1,error:null,fetched:!1},lo=Mr("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=Xr(Cn,"metadata","teams"),a=await Fc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),Bf=Mr("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=Xr(Cn,"metadata","teams");return await Wd(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),lR=To({name:"teams",initialState:vL,reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(lo.pending,e=>{e.loading=!0,e.error=null}).addCase(lo.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(lo.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Bf.pending,e=>{e.error=null}).addCase(Bf.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(Bf.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:Dj}=lR.actions,EL=lR.reducer,TL=()=>{const n=mi(),{firebaseUser:e,userData:t,loading:a}=ct(p=>p.auth),{fetched:s,loading:l}=ct(p=>p.teams),{fetched:c,loading:d}=ct(p=>p.positions);return P.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!s&&!l&&n(lo()),!c&&!d&&n(ps()))},[n,e,t,s,l,c,d]),a||t!=null&&t.isApproved&&(!s||!c)?w.jsx(Ll,{}):e?t?t.isApproved?w.jsx(pA,{}):w.jsx(us,{to:"/guest",replace:!0}):w.jsx(Ll,{}):w.jsx(us,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=(...n)=>n.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=n=>{const e=SL(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},p)=>P.createElement("svg",{ref:p,...AL,width:e,height:e,stroke:n,strokeWidth:a?Number(t)*24/Number(e):t,className:uR("lucide",s),...!l&&!wL(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,_])=>P.createElement(g,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=(n,e)=>{const t=P.forwardRef(({className:a,...s},l)=>P.createElement(RL,{ref:l,iconNode:e,className:uR(`lucide-${bL(xS(n))}`,`lucide-${n}`,a),...s}));return t.displayName=xS(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],cR=bo("chevron-up",CL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],DL=bo("copy",IL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],hR=bo("corner-down-right",NL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],OL=bo("moon",xL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],PL=bo("panel-left-close",ML);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],kL=bo("panel-left-open",VL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],UL=bo("sun",LL),jL=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},zL={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:jL(),lastVisitedPaths:{}},fR=To({name:"ui",initialState:zL,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:a}=e.payload;n.lastVisitedPaths[t]=a},toggleTeamExpansion:(n,e)=>{const t=e.payload,a=n.expandedTeams.indexOf(t);a>=0?n.expandedTeams.splice(a,1):n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:a,userEmail:s}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][a]||(n.hiddenUsers[t][a]=[]);const l=n.hiddenUsers[t][a],c=l.indexOf(s);c>=0?l.splice(c,1):l.push(s),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))}}}),{setMobileSidebarOpen:ec,setDesktopSidebarExpanded:BL,setLastVisitedPath:FL,toggleTeamExpansion:HL,toggleUserVisibility:qL}=fR.actions,GL=fR.reducer,$L=()=>{const n=P.useContext($1);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},KL="_themeToggleButton_yikav_1",YL={themeToggleButton:KL},lm=({showText:n,className:e})=>{const{theme:t,toggleTheme:a}=$L();return w.jsxs("button",{className:`${YL.themeToggleButton} ${e||""}`,onClick:a,"aria-label":"Toggle theme",children:[t==="dark"?w.jsx(UL,{size:20}):w.jsx(OL,{size:20}),n&&w.jsx("span",{children:"Toggle theme"})]})},QL="_mobileHeader_rrb9m_1",XL="_mobileHeaderPill_rrb9m_16",WL="_mobileHeaderPillDisabled_rrb9m_28",JL="_mobileHeaderPillActive_rrb9m_32",ZL="_mobileHeaderText_rrb9m_43",eU="_mobileHeaderChevron_rrb9m_51",tU="_rotate_rrb9m_56",Zs={mobileHeader:QL,mobileHeaderPill:XL,mobileHeaderPillDisabled:WL,mobileHeaderPillActive:JL,mobileHeaderText:ZL,mobileHeaderChevron:eU,rotate:tU},nU=({title:n,hasSideNav:e=!0})=>{const t=mi(),{isMobileSidebarOpen:a}=ct(l=>l.ui),s=()=>{e&&t(ec(!a))};return w.jsxs("header",{className:Zs.mobileHeader,children:[w.jsxs("div",{className:`${Zs.mobileHeaderPill} ${a?Zs.mobileHeaderPillActive:""} ${e?"":Zs.mobileHeaderPillDisabled}`,onClick:s,children:[w.jsx("span",{className:Zs.mobileHeaderText,children:n}),e&&w.jsx(cR,{className:`${Zs.mobileHeaderChevron} ${a?Zs.rotate:""}`})]}),w.jsx(lm,{})]})};var tn=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(tn||{}),_l=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(_l||{});const M_=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],OS=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],rU="_bottomNavContainer_1czvo_1",iU="_bottomNav_1czvo_1",aU="_bottomNavBtn_1czvo_19",sU="_bottomNavBtnActive_1czvo_41",wf={bottomNavContainer:rU,bottomNav:iU,bottomNavBtn:aU,bottomNavBtnActive:sU},oU=()=>{const n=yo(),e=Jr(),{lastVisitedPaths:t}=ct(l=>l.ui),a=e.pathname.includes("/settings")?tn.SETTINGS:e.pathname.includes("/dashboard")?tn.DASHBOARD:tn.ROSTER,s=l=>{if(a===l){l===tn.DASHBOARD&&n("/app/dashboard");return}const c=t[l];n(c||`/app/${l}`)};return w.jsx("nav",{className:wf.bottomNavContainer,children:w.jsx("div",{className:wf.bottomNav,children:M_.map(l=>w.jsxs("button",{className:`${wf.bottomNavBtn} ${a===l.id?wf.bottomNavBtnActive:""}`,onClick:()=>s(l.id),children:[w.jsx("span",{children:l.icon}),w.jsx("span",{children:l.label})]},l.id))})})},lU="_sideNav_1550v_1",uU="_menuOpen_1550v_21",cU="_sidebarContent_1550v_27",hU="_tabletSidebarHeader_1550v_34",fU="_sideMenuList_1550v_38",dU="_sidenavMenuSubheading_1550v_43",mU="_sideNavItem_1550v_67",pU="_sideNavItemActive_1550v_94",gU="_sideEmoji_1550v_101",yU="_loading_1550v_108",_U="_sidebarToggleButton_1550v_115",vU="_sidebarFooter_1550v_116",EU="_sidebarCollapsed_1550v_172",TU="_adminOnlySectionWrapper_1550v_193",At={sideNav:lU,menuOpen:uU,sidebarContent:cU,tabletSidebarHeader:hU,sideMenuList:fU,sidenavMenuSubheading:dU,sideNavItem:mU,sideNavItemActive:pU,sideEmoji:gU,loading:yU,sidebarToggleButton:_U,sidebarFooter:vU,sidebarCollapsed:EU,adminOnlySectionWrapper:TU},bU=()=>{var ae;const n=yo(),e=Jr(),t=Nd(),a=mi(),{userData:s}=ct(ee=>ee.auth),{isDesktopSidebarExpanded:l,isMobileSidebarOpen:c,expandedTeams:d}=ct(ee=>ee.ui),{teams:p,fetched:g,loading:_}=ct(ee=>ee.teams),{fetched:E}=ct(ee=>ee.positions),b=e.pathname.includes("/settings")?tn.SETTINGS:e.pathname.includes("/dashboard")?tn.DASHBOARD:tn.ROSTER,{teamName:R,positionName:L,section:F}=t,j=L||F;P.useEffect(()=>{g||a(lo()),E||a(ps())},[a,g,E]);const K=P.useCallback(ee=>{n(ee)},[n]),B=ee=>{a(HL(ee))},$=()=>{const ee=M_.find(S=>S.id===b),A=ee?ee.label:"GIG ROSTER";return R&&j?`${R}  ${j}`:R||(j?`${A}  ${j}`:A)},te=[At.sideNav,c?At.menuOpen:"",l?"":At.sidebarCollapsed].filter(Boolean).join(" ");return w.jsxs("aside",{className:te,children:[w.jsxs("div",{className:At.sidebarContent,children:[w.jsxs("div",{className:At.tabletSidebarHeader,children:[l&&w.jsx("h3",{children:$()}),w.jsx("button",{className:At.sidebarToggleButton,onClick:()=>a(BL(!l)),"aria-label":l?"Collapse sidebar":"Expand sidebar",children:l?w.jsx(PL,{size:20}):w.jsx(kL,{size:20})})]}),w.jsxs("nav",{className:At.sideMenuList,children:[b===tn.ROSTER&&_&&w.jsx("div",{className:`${At.sideNavItem} ${At.loading}`,children:"Loading teams..."}),b===tn.ROSTER?(ae=s==null?void 0:s.teams)==null?void 0:ae.map(ee=>{var M,N;const A=p.find(O=>O.name===ee);if(!A)return null;const S=s.teams.length===1,C=S||d.includes(A.name);return w.jsxs("div",{children:[!S&&w.jsxs("div",{className:`${At.sidenavMenuSubheading} ${At.sidenavMenuSubheadingClickable}`,style:{cursor:"pointer"},onClick:()=>B(A.name),children:[w.jsxs("div",{children:[A.emoji," ",l&&A.name]}),w.jsx("span",{className:At.expandIcon,children:C?"":""})]}),C&&w.jsxs("div",{className:At.sideNavSubItems,children:[(N=(M=A.positions)==null?void 0:M.filter(O=>!O.parentId))==null?void 0:N.map(O=>{const x=j===O.name&&R===A.name;return w.jsxs("button",{className:`${At.sideNavItem} ${At.sideNavItemSub} ${x?At.sideNavItemActive:""}`,onClick:()=>{K(`/app/roster/${A.name}/${O.name}`),a(ec(!1))},style:{borderLeft:x?`4px solid ${O.colour}`:"4px solid transparent",backgroundColor:x?`${O.colour}15`:"transparent",color:x?O.colour:""},children:[w.jsx("span",{className:At.sideEmoji,children:O.emoji})," ",l&&O.name]},O.name)}),w.jsxs("button",{className:`${At.sideNavItem} ${At.sideNavItemSub} ${j==="Absence"&&R===A.name?At.sideNavItemActive:""}`,onClick:()=>{K(`/app/roster/${A.name}/Absence`),a(ec(!1))},style:{borderLeft:j==="Absence"&&R===A.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:j==="Absence"&&R===A.name?"var(--background-toggle-off-transparent)":"transparent"},children:[w.jsx("span",{className:At.sideEmoji,children:""})," ",l&&"Absence"]})]})]},A.name)}):OS.filter(ee=>!ee.adminOnly).map(ee=>w.jsxs("button",{className:`${At.sideNavItem} ${j===ee.id?At.sideNavItemActive:""}`,onClick:()=>{K(`/app/settings/${ee.id}`),a(ec(!1))},children:[w.jsx("span",{className:At.sideEmoji,children:ee.icon})," ",l&&ee.label]},ee.id))]})]}),(s==null?void 0:s.isAdmin)&&b===tn.SETTINGS&&w.jsxs("div",{className:At.adminOnlySectionWrapper,children:[w.jsx("div",{className:At.sidenavMenuSubheading,children:l&&w.jsx("h4",{children:"Admin Only"})}),OS.filter(ee=>ee.adminOnly).map(ee=>w.jsxs("button",{className:`${At.sideNavItem} ${j===ee.id?At.sideNavItemActive:""}`,onClick:()=>{K(`/app/settings/${ee.id}`),a(ec(!1))},children:[w.jsx("span",{className:At.sideEmoji,children:ee.icon})," ",l&&ee.label]},ee.id))]}),w.jsx("div",{className:At.sidebarFooter,children:w.jsx(lm,{showText:l})})]})},SU="_layoutWrapper_1iqp0_1",AU="_innerWrapper_1iqp0_13",wU="_mainContent_1iqp0_21",ul={layoutWrapper:SU,innerWrapper:AU,mainContent:wU},RU=()=>{const n=mi(),e=yo(),t=Jr(),a=Nd(),{userData:s}=ct(j=>j.auth),{teams:l}=ct(j=>j.teams),{isMobileSidebarOpen:c,isDesktopSidebarExpanded:d,lastVisitedPaths:p}=ct(j=>j.ui),g=t.pathname.includes("/settings")?tn.SETTINGS:t.pathname.includes("/dashboard")?tn.DASHBOARD:tn.ROSTER,{teamName:_,positionName:E,section:b}=a,R=E||b||null,L=g!==tn.DASHBOARD;P.useEffect(()=>{const j=g===tn.ROSTER&&!_,K=g===tn.SETTINGS&&!R;if(t.pathname.startsWith("/app/")&&!j&&!K&&g!==tn.DASHBOARD){const B=t.pathname+t.search;n(FL({tabId:g,path:B}))}},[t.pathname,t.search,g,_,R,n]),P.useEffect(()=>{var $,te;const j=t.pathname==="/app"||t.pathname==="/app/",K=g===tn.ROSTER&&!_,B=g===tn.SETTINGS&&!R;if(j)e(p[tn.DASHBOARD]||"/app/dashboard",{replace:!0});else if(K){const ae=p[tn.ROSTER];if(ae)e(ae,{replace:!0});else if(($=s==null?void 0:s.teams)!=null&&$[0]&&l.length>0){const ee=l.find(A=>A.name===s.teams[0]);(te=ee==null?void 0:ee.positions)!=null&&te[0]&&e(`/app/roster/${ee.name}/${ee.positions[0].name}`,{replace:!0})}}else if(B){const ae=p[tn.SETTINGS];e(ae||`/app/settings/${_l.PROFILE}`,{replace:!0})}},[g,_,R,s,l,e,t.pathname,t.search,p]);const F=()=>{const j=M_.find(B=>B.id===g),K=j?j.label:"GIG ROSTER";return _&&R?`${_}  ${R}`:_||(R?`${K}  ${R}`:K)};return w.jsxs("div",{className:`${ul.layoutWrapper} ${c?ul.menuOpen:""} ${d?ul.sidebarExpanded:ul.sidebarCollapsed}`,children:[L&&w.jsx(bU,{}),w.jsxs("div",{className:ul.innerWrapper,children:[w.jsx(nU,{title:F(),hasSideNav:L}),w.jsx("main",{className:ul.mainContent,children:w.jsx(pA,{})}),w.jsx(oU,{})]})]})},CU="_rosterSaveFooter_xkueo_1",IU="_saveFooterContent_xkueo_23",DU="_changesLabel_xkueo_32",NU="_saveFooterActions_xkueo_37",xU="_saveBtn_xkueo_42",OU="_cancelBtn_xkueo_57",MU="_sidebarCollapsed_xkueo_77",PU="_noSidebar_xkueo_81",es={rosterSaveFooter:CU,saveFooterContent:IU,changesLabel:DU,saveFooterActions:NU,saveBtn:xU,cancelBtn:OU,sidebarCollapsed:MU,noSidebar:PU},Yl=({label:n="You have unsaved changes",onSave:e,onCancel:t,isSaving:a,saveText:s="Save",discardText:l="Discard",hasSideNav:c=!0})=>{const{isDesktopSidebarExpanded:d}=ct(g=>g.ui),p=[es.rosterSaveFooter,c?"":es.noSidebar,!d&&c?es.sidebarCollapsed:""].filter(Boolean).join(" ");return w.jsx("div",{className:p,children:w.jsxs("div",{className:es.saveFooterContent,children:[w.jsx("span",{className:es.changesLabel,children:n}),w.jsxs("div",{className:es.saveFooterActions,children:[w.jsx("button",{className:es.cancelBtn,onClick:t,disabled:a,children:l}),w.jsx("button",{className:es.saveBtn,onClick:e,disabled:a,children:a?"Saving...":s})]})]})})},dR=n=>{const e=[];return Object.entries(n).forEach(([t,a])=>{a.forEach(s=>{e.push(`${t}|${s}`)})}),e},mR=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${a}`},Rl=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),VU={entries:{},dirtyEntries:{},loading:!1,saving:!1,error:null},uc=Mr("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Bc(Uc(Cn,"roster")),a=await Hc(t),s={};return a.docs.forEach(l=>{const c=l.data(),d=c.updatedAt,p={...c,updatedAt:d&&typeof d=="object"&&"toMillis"in d?d.toMillis():d};s[l.id]={...p,id:l.id}}),s}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),cc=Mr("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=m1(Cn),a=Date.now(),s={};return Object.values(n).forEach(l=>{const c=Xr(Cn,"roster",l.id),d={...l,updatedAt:a};t.set(c,d),s[l.id]=d}),await t.commit(),s}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),pR=To({name:"roster",initialState:VU,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:a,userIdentifier:s,positionGroupNames:l,maxConflict:c}=e.payload,d=n.dirtyEntries[t]||n.entries[t];let p;d?p=JSON.parse(JSON.stringify(d)):p={id:t,date:t,teams:{},absence:{}},p.teams[a]||(p.teams[a]={});const g=p.teams[a][s]||[],_=l.findIndex(L=>g.includes(L)),E=_>=0?l[_]:null;let b=null;E===null?b=l[0]:_<l.length-1?b=l[_+1]:b=null;const R=g.filter(L=>!l.includes(L));if(b)if(R.length<c)R.push(b);else{n.error=`User already has ${c} assignment(s) in this team.`;return}R.length===0?delete p.teams[a][s]:p.teams[a][s]=R,n.dirtyEntries[t]=p},updateLocalEventName(n,e){const{date:t,eventName:a}=e.payload,s=n.dirtyEntries[t]||n.entries[t];let l;s?l=JSON.parse(JSON.stringify(s)):l={id:t,date:t,teams:{},absence:{}},l.eventName=a,n.dirtyEntries[t]=l},resetRosterEdits(n){n.dirtyEntries={},n.error=null},updateLocalAbsence(n,e){var p;const{date:t,userIdentifier:a,reason:s,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let d;c?d=JSON.parse(JSON.stringify(c)):d={id:t,date:t,teams:{},absence:{}},l?d.absence[a]={reason:s??((p=d.absence[a])==null?void 0:p.reason)??""}:delete d.absence[a],n.dirtyEntries[t]=d}},extraReducers:n=>{n.addCase(uc.pending,e=>{e.loading=!0,e.error=null}).addCase(uc.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(uc.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(cc.pending,e=>{e.saving=!0,e.error=null}).addCase(cc.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(cc.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:Nj,updateLocalAssignment:kU,updateLocalEventName:LU,resetRosterEdits:gR,updateLocalAbsence:MS}=pR.actions,UU=pR.reducer,Ff=(n,e,t)=>{const a=[],s=new Date;s.setHours(0,0,0,0);const l=s.getFullYear(),c=e||l,d=t||l,p={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g=n.map(R=>p[R]);let _;c===l?_=new Date(s):_=new Date(c,0,1),_.setHours(0,0,0,0);const E=new Date(d,11,31);E.setHours(23,59,59,999);const b=new Date(_);for(;b.getTime()<=E.getTime();)g.includes(b.getDay())&&a.push(new Date(b)),b.setDate(b.getDate()+1);return a.sort((R,L)=>R.getTime()-L.getTime()),a.map(R=>mR(R))},jU=(n,e,t=5)=>{const a=[],s=new Date(e);s.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(p=>l[p]),d=new Date(s);for(;a.length<t;){d.setDate(d.getDate()-1),c.includes(d.getDay())&&a.push(new Date(d));const p=new Date(s);if(p.setFullYear(p.getFullYear()-1),d<p)break}return a.map(p=>mR(p)).sort()},zU={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},Hf=Mr("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=Uc(Cn,"users"),a=Bc(t,g_("teams","array-contains",n)),s=await Hc(a),l=[];return s.forEach(c=>{l.push(c.data())}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),qf=Mr("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:a})=>{if(!n||!e)return[];try{const c=a().positions.positions.filter(R=>R.parentId===e),p=[e,...c.map(R=>R.name)].map(R=>`${n}|${R}`),g=Uc(Cn,"users"),_=Bc(g,g_("indexedAssignments","array-contains-any",p)),E=await Hc(_),b=[];return E.forEach(R=>{b.push(R.data())}),b.sort((R,L)=>(R.name||"").localeCompare(L.name||""))}catch(s){return console.error("Error fetching users:",s),t("Failed to load users.")}}),Gf=Mr("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=Xr(Cn,"metadata","teams"),a=await Fc(t);if(a.exists()){const s=a.data();return(Array.isArray(s.list)?s.list.map(d=>({...d,preferredDays:d.preferredDays||[],positions:d.positions||[]})):[]).find(d=>d.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),yR=To({name:"rosterView",initialState:zU,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=jU(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=Ff(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,a=Ff(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...a]}}},extraReducers:n=>{n.addCase(qf.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(qf.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(qf.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(Hf.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(Hf.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(Hf.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(Gf.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(Gf.fulfilled,(e,t)=>{var a;e.currentTeamData=t.payload,(a=t.payload)!=null&&a.preferredDays&&(e.rosterDates=Ff(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(Gf.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:BU,resetToUpcomingDates:FU,loadNextYearDates:HU}=yR.actions,qU=yR.reducer,GU="_dashboardContainer_otgys_1",$U="_dashboardHeader_otgys_10",KU="_dashboardHeaderActions_otgys_24",YU="_clearPastBtn_otgys_32",QU="_eventNameContainer_otgys_48",XU="_dashboardEventNameInput_otgys_55",WU="_dashboardEventNameInputHasEvent_otgys_79",JU="_carouselOuterWrapper_otgys_90",ZU="_eventsCarouselTrack_otgys_98",e3="_eventCardWrapper_otgys_112",t3="_peek_otgys_123",n3="_active_otgys_129",r3="_eventCardDate_otgys_135",i3="_dashboardTodayBadge_otgys_147",a3="_teamCardsContainer_otgys_158",s3="_teamEventCard_otgys_166",o3="_dashboardThemeToggle_otgys_174",l3="_teamEventHeader_otgys_178",u3="_teamCardEmoji_otgys_197",c3="_teamCardName_otgys_201",h3="_copyRosterBtn_otgys_205",f3="_teamEventDetails_otgys_226",d3="_posAssignmentRow_otgys_232",m3="_posEmojiLabel_otgys_238",p3="_assignedNames_otgys_244",g3="_unassigned_otgys_250",y3="_carouselPagination_otgys_258",_3="_dashboardEmpty_otgys_267",kt={dashboardContainer:GU,dashboardHeader:$U,dashboardHeaderActions:KU,clearPastBtn:YU,eventNameContainer:QU,dashboardEventNameInput:XU,dashboardEventNameInputHasEvent:WU,carouselOuterWrapper:JU,eventsCarouselTrack:ZU,eventCardWrapper:e3,peek:t3,active:n3,eventCardDate:r3,dashboardTodayBadge:i3,teamCardsContainer:a3,teamEventCard:s3,dashboardThemeToggle:o3,teamEventHeader:l3,teamCardEmoji:u3,teamCardName:c3,copyRosterBtn:h3,teamEventDetails:f3,posAssignmentRow:d3,posEmojiLabel:m3,assignedNames:p3,unassigned:g3,carouselPagination:y3,dashboardEmpty:_3},v3=()=>{const n=mi(),[e,t]=JN(),a=e.get("date"),{userData:s}=ct(q=>q.auth),{teams:l}=ct(q=>q.teams),{entries:c,dirtyEntries:d,loading:p,saving:g}=ct(q=>q.roster),{positions:_}=ct(q=>q.positions),[E,b]=P.useState([]),[R,L]=P.useState(!1),[F,j]=P.useState(0),[K,B]=P.useState(0),[$,te]=P.useState(!1),ae=P.useRef(null),ee=P.useRef(!1),A=Object.keys(d).length>0;P.useEffect(()=>{n(uc())},[n]),P.useEffect(()=>{const q=ae.current;if(!q)return;const oe=new ResizeObserver(ce=>{for(const pe of ce){const Te=pe.contentRect.width;Te>0&&B(Te)}});return oe.observe(q),()=>oe.disconnect()},[p,R]);const S=P.useMemo(()=>{const q=Rl();if(!(s!=null&&s.teams)||l.length===0)return[];const oe=l.filter(Te=>s.teams.includes(Te.name)),ce=new Set;oe.forEach(Te=>{Ff(Te.preferredDays).forEach(Ke=>ce.add(Ke))});const pe=Array.from(ce).sort();return a&&a<q?[a]:pe.filter(Te=>{const Ue=Te;if(a===Ue)return!0;const Ke=c[Ue]||d[Ue];return Ke?oe.some(ot=>{var In;const Yt=((In=Ke.teams)==null?void 0:In[ot.name])||{};return Object.values(Yt).some(Et=>Et.length>0)}):!1})},[s,l,c,d,a]);P.useEffect(()=>{if(S.length===0||!ae.current||p||K===0)return;const q=ae.current,oe=(ce,pe)=>{const Te=q.offsetWidth||K;Te!==0&&(q.style.scrollSnapType="none",q.scrollTo({left:Te*ce,behavior:pe?"smooth":"auto"}),setTimeout(()=>{q&&(q.style.scrollSnapType="x mandatory"),te(!0)},50),j(ce),ee.current=!0)};if(a){const ce=S.findIndex(pe=>pe===a);if(ce>=0){const pe=Math.round(q.scrollLeft/(q.offsetWidth||K||1));!ee.current||pe!==ce?requestAnimationFrame(()=>{oe(ce,ee.current)}):te(!0)}else te(!0)}else q.scrollLeft!==0?oe(0,!0):te(!0),ee.current=!0},[a,S,p,K]);const C=()=>{t({},{replace:!0})};P.useEffect(()=>{(async()=>{if(!(!(s!=null&&s.teams)||s.teams.length===0)){L(!0);try{const oe=Uc(Cn,"users"),ce=Bc(oe,g_("teams","array-contains-any",s.teams)),pe=await Hc(ce),Te=[];pe.forEach(Ue=>Te.push(Ue.data())),b(Te)}catch(oe){console.error("Error fetching users for dashboard:",oe)}finally{L(!1)}}})()},[s==null?void 0:s.teams]);const M=P.useCallback(q=>{if(!q||!(s!=null&&s.teams)||l.length===0)return null;const oe=q,ce=d[oe]||c[oe],Ue=l.filter(Ke=>s.teams.includes(Ke.name)).map(Ke=>{var bn;const ot=((bn=ce==null?void 0:ce.teams)==null?void 0:bn[Ke.name])||{},Yt=[],In=Ke.positions.map(Qt=>Qt.name);let Et=0;return In.forEach(Qt=>{const ne=_.find(we=>we.name===Qt),ge=[];Object.entries(ot).forEach(([we,Ae])=>{if(Ae.includes(Qt)){const Fe=E.find(Lt=>Lt.email===we);Fe?ge.push(Fe):ge.push({email:we,name:we}),Et++}});const Ve=[...ge].sort((we,Ae)=>ne!=null&&ne.sortByGender&&we.gender!==Ae.gender?we.gender==="Male"?-1:Ae.gender==="Male"?1:(we.gender||"").localeCompare(Ae.gender||""):(we.name||"").localeCompare(Ae.name||""));Yt.push({posName:Qt,emoji:(ne==null?void 0:ne.emoji)||"",names:Ve.map(we=>we.name||we.email||"Unknown")})}),{teamName:Ke.name,teamEmoji:Ke.emoji,positions:Yt,hasAssignments:Et>0}}).filter(Ke=>Ke.hasAssignments);return Ue.length>0?Ue:null},[c,d,s,l,_,E]),N=(q,oe,ce,pe)=>{let Ke=`${new Date(q).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"})} - ${ce} ${oe}
`;pe.forEach(ot=>{const Yt=ot.names.length>0?ot.names.join(", "):"-";Ke+=`${ot.emoji}: ${Yt}
`}),navigator.clipboard.writeText(Ke).then(()=>{})},O=()=>{if(!ae.current)return;const q=ae.current,oe=q.offsetWidth,ce=Math.round(q.scrollLeft/oe);if(ce!==F&&S[ce]){j(ce);const pe=S[ce];if(a!==pe){const Te=Rl();ce===0&&Te===pe?t({},{replace:!0}):t({date:pe},{replace:!0})}}},x=(q,oe)=>{n(LU({date:q,eventName:oe}))},Ee=()=>{n(cc(d))},ke=()=>{n(gR())};if(p||R)return w.jsx(Kl,{});if(S.length===0)return w.jsxs("div",{className:kt.dashboardEmpty,children:[w.jsx("h2",{children:"No upcoming events found"}),w.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const Y=S[F],de=Rl(),ye=Y&&Y<de,Le=ye?"Previous Event":"Upcoming Events",Pe=q=>new Date(q).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),U=(q,oe=!1)=>{const ce=M(q);return ce?w.jsx("div",{className:kt.teamCardsContainer,children:ce.map(pe=>w.jsxs("div",{className:kt.teamEventCard,children:[w.jsxs("div",{className:kt.teamEventHeader,children:[w.jsxs("h3",{children:[w.jsx("span",{className:kt.teamCardEmoji,children:pe.teamEmoji}),w.jsx("span",{className:kt.teamCardName,children:pe.teamName})]}),!oe&&w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx(lm,{className:kt.dashboardThemeToggle}),w.jsxs("button",{className:kt.copyRosterBtn,onClick:()=>N(q,pe.teamName,pe.teamEmoji,pe.positions),title:"Copy to clipboard",children:[w.jsx(DL,{size:16})," Copy"]})]})]}),w.jsx("div",{className:kt.teamEventDetails,children:pe.positions.map(Te=>w.jsxs("div",{className:kt.posAssignmentRow,children:[w.jsx("span",{className:kt.posEmojiLabel,title:Te.posName,children:Te.emoji}),w.jsx("span",{className:`${kt.assignedNames} ${Te.names.length===0?kt.unassigned:""}`,children:Te.names.length>0?Te.names.join(", "):"Unassigned"})]},Te.posName))})]},pe.teamName))}):null};return w.jsxs("div",{className:kt.dashboardContainer,children:[w.jsxs("div",{className:kt.dashboardHeader,children:[w.jsx("h1",{children:Le}),w.jsx("div",{className:kt.dashboardHeaderActions,children:ye&&w.jsx("button",{className:kt.clearPastBtn,onClick:C,children:"Reset to upcoming"})})]}),w.jsx("div",{className:kt.carouselOuterWrapper,style:{opacity:$?1:0,transition:"opacity 0.3s ease-in-out"},children:w.jsx("div",{className:kt.eventsCarouselTrack,ref:ae,onScroll:O,children:S.map((q,oe)=>{const ce=q,pe=d[ce]||c[ce],Te=(pe==null?void 0:pe.eventName)||"";return w.jsxs("div",{className:`${kt.eventCardWrapper} ${oe===F?kt.active:kt.peek}`,children:[w.jsx("div",{className:kt.eventNameContainer,children:w.jsx("input",{type:"text",className:`${kt.dashboardEventNameInput} ${Te?kt.dashboardEventNameInputHasEvent:""}`,placeholder:"Event name (e.g. Easter Sunday)",value:Te,onChange:Ue=>x(q,Ue.target.value),disabled:oe!==F})}),w.jsxs("div",{className:kt.eventCardDate,children:[Pe(q),q===de&&w.jsx("span",{className:kt.dashboardTodayBadge,children:"TODAY"})]}),U(q,oe!==F)]},q)})})}),w.jsxs("div",{className:kt.carouselPagination,children:[F+1," / ",S.length]}),A&&w.jsx(Yl,{label:"Unsaved event labels",saveText:"Save Changes",onSave:Ee,onCancel:ke,isSaving:g,hasSideNav:!1})]})},E3="_pillGroup_xxef2_1",T3="_pillGroupNowrap_xxef2_9",b3="_pill_xxef2_1",S3="_pillActive_xxef2_32",A3="_pillDisabled_xxef2_37",w3="_pillText_xxef2_58",vl={pillGroup:E3,pillGroupNowrap:T3,pill:b3,pillActive:S3,pillDisabled:A3,pillText:w3},xi=({children:n,nowrap:e})=>w.jsx("div",{className:`${vl.pillGroup} ${e?vl.pillGroupNowrap:""}`,children:n}),tr=({colour:n,isDropdown:e,isActive:t,isDisabled:a,minWidth:s,onClick:l,children:c})=>{const[d,p]=P.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),w.jsxs("div",{className:`${vl.pill} ${vl.pillText} ${t?vl.pillActive:""} ${a?vl.pillDisabled:""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:s?`${s}px`:"fit-content"},onClick:g=>{a||(p(_=>!_),l&&l(g))},children:[c,e&&w.jsx(cR,{style:{rotate:d?"90deg":"0"}})]})},R3={firebaseUser:null,userData:null,loading:!0,error:null},$f=Mr("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=Xr(Cn,"users",n),a=await Fc(t);if(!a.exists()){const s="chris.sm.kang542@gmail.com",l=kl.currentUser,c=(l==null?void 0:l.email)===s,d={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await oV(t,d),d}return a.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),Kf=Mr("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const a=Xr(Cn,"users",n),s={...e};return s.teamPositions&&(s.indexedAssignments=dR(s.teamPositions)),await Wd(a,s),s}catch(a){return t(a instanceof Error?a.message:"Failed to update profile")}}),_R=To({name:"auth",initialState:R3,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase($f.pending,e=>{e.loading=!0,e.error=null}).addCase($f.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase($f.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Kf.pending,e=>{e.error=null}).addCase(Kf.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(Kf.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:C3,setUserData:I3,setLoading:xj,logout:D3}=_R.actions,N3=_R.reducer,x3="_profileCard_1fd1k_1",O3="_profileReadonly_1fd1k_19",M3="_teamPositionsSection_1fd1k_37",P3="_sectionLabel_1fd1k_43",V3="_teamPositionGroup_1fd1k_53",k3="_teamPositionHeader_1fd1k_57",L3="_actionContainer_1fd1k_67",U3="_logoutBtn_1fd1k_74",ts={profileCard:x3,profileReadonly:O3,teamPositionsSection:M3,sectionLabel:P3,teamPositionGroup:V3,teamPositionHeader:k3,actionContainer:L3,logoutBtn:U3},vR=({className:n})=>{const e=mi(),{userData:t,firebaseUser:a}=ct(S=>S.auth),{teams:s,fetched:l}=ct(S=>S.teams),{fetched:c}=ct(S=>S.positions),[d,p]=P.useState((t==null?void 0:t.name)||""),[g,_]=P.useState((t==null?void 0:t.gender)||""),[E,b]=P.useState((t==null?void 0:t.isActive)??!0),[R,L]=P.useState((t==null?void 0:t.teams)||[]),[F,j]=P.useState((t==null?void 0:t.teamPositions)||{}),[K,B]=P.useState("idle");P.useEffect(()=>{l||e(lo()),c||e(ps())},[e,l,c]);const $=P.useMemo(()=>{if(!t)return!1;const S={name:d,gender:g,isActive:E,teams:R,teamPositions:F},C={name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}};return JSON.stringify(S)!==JSON.stringify(C)},[d,g,E,R,F,t]),te=async()=>{if(a){B("saving");try{const S={name:d,gender:g,isActive:E,teams:R,teamPositions:F};await e(Kf({uid:a.uid,data:S})).unwrap(),B("success"),setTimeout(()=>B("idle"),2e3)}catch(S){console.error(S),B("idle")}}},ae=()=>{t&&(p(t.name||""),_(t.gender||""),b(t.isActive??!0),L(t.teams||[]),j(t.teamPositions||{}))},ee=S=>{L(C=>{const M=C.includes(S),N=M?C.filter(O=>O!==S):[...C,S];return j(O=>{const x={...O};return M?delete x[S]:x[S]||(x[S]=[]),x}),N})},A=(S,C)=>{j(M=>{const N=M[S]||[],O=N.includes(C)?N.filter(x=>x!==C):[...N,C];return{...M,[S]:O}})};return t?w.jsxs("section",{className:`${ts.profileCard} ${n||""}`,children:[w.jsx("div",{className:ts.profileReadonly,children:w.jsxs("p",{children:[w.jsx("strong",{children:"Email:"})," ",t.email]})}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Name"}),w.jsx(xi,{children:w.jsx("input",{type:"text",value:d,onChange:S=>p(S.target.value),className:"form-input form-input-width-auto"})})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Gender"}),w.jsx(xi,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(S=>w.jsx(tr,{colour:S.colour,onClick:()=>_(S.value),isActive:g===S.value,children:S.value},S.value))})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"My Teams"}),w.jsx(xi,{children:s.map(S=>{const C=R.includes(S.name);return w.jsxs(tr,{onClick:()=>ee(S.name),isActive:C,children:[w.jsx("span",{children:S.emoji})," ",S.name]},S.name)})})]}),R.length>0&&w.jsxs("div",{className:ts.teamPositionsSection,children:[w.jsx("label",{className:ts.sectionLabel,children:"Positions per Team"}),R.map(S=>{var M,N;const C=s.find(O=>O.name===S);return C?w.jsxs("div",{className:ts.teamPositionGroup,children:[w.jsxs("div",{className:ts.teamPositionHeader,children:[C.emoji," ",C.name]}),w.jsx(xi,{children:(N=(M=C.positions)==null?void 0:M.filter(O=>!O.parentId))==null?void 0:N.map(O=>{var Ee;const x=(Ee=F[S])==null?void 0:Ee.includes(O.name);return w.jsxs(tr,{onClick:()=>A(S,O.name),isActive:x,colour:O.colour,children:[w.jsx("span",{children:O.emoji})," ",O.name]},O.name)})})]},S):null})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Availability Status"}),w.jsx(tr,{colour:E?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>b(!E),isActive:!0,children:E?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),w.jsx("p",{className:"form-field-hint",children:"Turn off if you want to be hidden from the roster."})]}),w.jsx("div",{className:ts.actionContainer,children:w.jsx("button",{onClick:()=>kl.signOut(),className:ts.logoutBtn,children:"Logout"})}),$&&w.jsx(Yl,{label:"Unsaved profile changes",saveText:"Update Profile",onSave:te,onCancel:ae,isSaving:K==="saving"})]}):w.jsx("div",{children:"Loading profile..."})},j3="_guestContainer_1m4dd_1",z3="_profileCardOverride_1m4dd_14",B3="_guestHeader_1m4dd_21",F3="_brandTitle_1m4dd_28",H3="_guestThemeToggleContainer_1m4dd_32",q3="_pendingLabel_1m4dd_38",cl={guestContainer:j3,profileCardOverride:z3,guestHeader:B3,brandTitle:F3,guestThemeToggleContainer:H3,pendingLabel:q3},G3=()=>{const{userData:n,firebaseUser:e,loading:t}=ct(a=>a.auth);return t?w.jsx(Ll,{}):e?n?n.isApproved?w.jsx(us,{to:"/app",replace:!0}):w.jsxs("div",{className:cl.guestContainer,children:[w.jsxs("header",{className:cl.guestHeader,children:[w.jsx("h2",{className:cl.brandTitle,children:"God is Good"}),w.jsx("p",{className:cl.pendingLabel,children:"PENDING ADMIN APPROVAL"}),w.jsx("div",{className:cl.guestThemeToggleContainer,children:w.jsx(lm,{})})]}),w.jsx(vR,{className:cl.profileCardOverride})]}):w.jsx(Ll,{}):w.jsx(us,{to:"/login",replace:!0})},$3="_loginContainer_12x6v_1",K3="_loginHeader_12x6v_12",Y3="_brandTitle_12x6v_16",Q3="_brandSubtitle_12x6v_24",X3="_loginButtonContainer_12x6v_33",W3="_loginButton_12x6v_33",J3="_google_12x6v_57",eo={loginContainer:$3,loginHeader:K3,brandTitle:Y3,brandSubtitle:Q3,loginButtonContainer:X3,loginButton:W3,google:J3},Z3=()=>{const{firebaseUser:n,loading:e}=ct(a=>a.auth),t=()=>_4(kl,dk);return e?null:n?w.jsx(us,{to:"/",replace:!0}):w.jsxs("div",{className:eo.loginContainer,children:[w.jsxs("header",{className:eo.loginHeader,children:[w.jsx("h1",{className:eo.brandTitle,children:"God is Good"}),w.jsx("p",{className:eo.brandSubtitle,children:"Worship Team Roster"})]}),w.jsx("div",{className:eo.loginButtonContainer,children:w.jsxs("button",{onClick:t,className:`${eo.loginButton} ${eo.google}`,children:[w.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},ej=()=>{const n=mi(),e=yo(),{teamName:t,positionName:a}=Nd(),{users:s,allTeamUsers:l,rosterDates:c,currentTeamData:d,loadingUsers:p,loadingTeam:g,loadingAllTeamUsers:_,error:E}=ct(ne=>ne.rosterView),{entries:b,dirtyEntries:R,saving:L,error:F}=ct(ne=>ne.roster),{teams:j}=ct(ne=>ne.teams),{positions:K}=ct(ne=>ne.positions),{hiddenUsers:B}=ct(ne=>ne.ui),[$,te]=P.useState(null),[ae,ee]=P.useState(null),A=Object.keys(R).length>0,S=P.useMemo(()=>K.find(ne=>ne.name===a),[K,a]),C=P.useMemo(()=>d?d.positions.filter(ne=>ne.name!==a):[],[d,a]),M=P.useMemo(()=>{var ne;return!t||!a?[]:((ne=B[t])==null?void 0:ne[a])||[]},[B,t,a]),N=P.useMemo(()=>{const ne=s.filter(ge=>ge.email&&!M.includes(ge.email)&&ge.isActive);return S!=null&&S.sortByGender?ne.sort((ge,Ve)=>ge.gender===Ve.gender?(ge.name||"").localeCompare(Ve.name||""):ge.gender==="Male"?-1:Ve.gender==="Male"?1:(ge.gender||"").localeCompare(Ve.gender||"")):ne},[s,S,M]),O=P.useMemo(()=>{if(!(S!=null&&S.sortByGender)||N.length===0)return-1;const ne=N.findIndex(ge=>ge.gender==="Female");return ne>0&&ne<N.length?ne:-1},[S,N]),x=ne=>{!t||!a||n(qL({teamName:t,positionName:a,userEmail:ne}))},Ee=()=>{n(BU())},ke=()=>{n(FU())},Y=()=>{n(HU())},de=ne=>{ye(ne)&&e(`/app/dashboard?date=${ne}`)},ye=P.useCallback(ne=>{const ge=ne.split("T")[0],Ve=R[ge]||b[ge];return Ve?Object.values(Ve.teams).some(we=>Object.values(we).some(Ae=>Ae.length>0)):!1},[b,R]),Le=P.useCallback(ne=>{if(!ae||!t)return[];const ge=ne.split("T")[0],Ve=R[ge]||b[ge];return!Ve||!Ve.teams[t]?[]:Object.entries(Ve.teams[t]).filter(([,we])=>we.includes(ae)).map(([we])=>{const Ae=l.find(Fe=>Fe.email===we);return(Ae==null?void 0:Ae.name)||we})},[ae,t,R,b,l]);P.useEffect(()=>{n(uc())},[n]),P.useEffect(()=>{a&&t&&a!=="Absence"&&n(qf({teamName:t,positionName:a}))},[a,t,n]),P.useEffect(()=>{t&&(n(Gf(t)),n(Hf(t)))},[t,n]);const Pe=P.useCallback((ne,ge)=>{const Ve=ne,we=R[Ve]||b[Ve];return!!(we&&we.absence&&we.absence[ge])},[R,b]),U=P.useCallback((ne,ge)=>{var Ae,Fe;const Ve=ne,we=R[Ve]||b[Ve];return((Fe=(Ae=we==null?void 0:we.absence)==null?void 0:Ae[ge])==null?void 0:Fe.reason)||""},[R,b]),q=P.useCallback((ne,ge)=>{if(!t||!a||a==="Absence")return!1;if(Pe(ne,ge))return!0;const Ve=ne,we=R[Ve]||b[Ve],Ae=j.find(Dt=>Dt.name===t),Fe=(Ae==null?void 0:Ae.maxConflict)||1;if(!we||!we.teams[t]||!we.teams[t][ge])return!1;const Lt=we.teams[t][ge],Rt=K.filter(Dt=>Dt.parentId===a),je=[a,...Rt.map(Dt=>Dt.name)];return Lt.some(Dt=>je.includes(Dt))?!1:Lt.length>=Fe},[t,a,Pe,R,b,j,K]),oe=P.useCallback((ne,ge,Ve,we)=>{if(!t||!a||a==="Absence"||q(ne,ge)){te({row:Ve,col:we,table:"roster"});return}te({row:Ve,col:we,table:"roster"});const Ae=j.find(je=>je.name===t),Fe=(Ae==null?void 0:Ae.maxConflict)||1,Lt=K.filter(je=>je.parentId===a),Rt=[a,...Lt.map(je=>je.name)];n(kU({date:ne,teamName:t,userIdentifier:ge,positionGroupNames:Rt,maxConflict:Fe}))},[n,t,a,q,j,K]),ce=P.useCallback((ne,ge,Ve,we)=>{te({row:Ve,col:we,table:"absence"});const Ae=Pe(ne,ge);n(MS({date:ne,userIdentifier:ge,isAbsent:!Ae}))},[n,Pe]),pe=P.useCallback((ne,ge,Ve)=>{n(MS({date:ne,userIdentifier:ge,reason:Ve,isAbsent:!0}))},[n]),Te=P.useCallback(()=>{n(cc(R))},[n,R]),Ue=P.useCallback(()=>{n(gR()),te(null)},[n]),Ke=(ne,ge)=>{var Lt;const Ve=ne,we=R[Ve]||b[Ve];if(!we||!t)return"";const Ae=((Lt=we.teams[t])==null?void 0:Lt[ge])||[],Fe=[];return Object.entries(we.teams).forEach(([Rt,je])=>{Rt!==t&&je[ge]&&Fe.push({team:Rt,positions:je[ge]})}),Ae.length===0&&Fe.length===0?"":w.jsxs("div",{className:"assigned-positions",children:[Ae.map(Rt=>{const je=K.find(Ye=>Ye.name===Rt);return w.jsx("span",{title:`${t}: ${Rt}`,className:"pos-emoji",children:(je==null?void 0:je.emoji)||""},Rt)}),Fe.map(Rt=>Rt.positions.map(je=>{const Ye=K.find(Dt=>Dt.name===je);return w.jsx("span",{title:`${Rt.team}: ${je}`,className:"pos-emoji other-team-emoji",children:(Ye==null?void 0:Ye.emoji)||""},`${Rt.team}-${je}`)}))]})};P.useEffect(()=>{const ne=ge=>{const Ve=ge.target;if(Ve.tagName==="INPUT"||Ve.tagName==="TEXTAREA"||!$)return;const{row:we,col:Ae,table:Fe}=$,Lt=c,Rt=Fe==="roster"?N:l;switch(ge.key){case"ArrowUp":ge.preventDefault(),we>0&&te({row:we-1,col:Ae,table:Fe});break;case"ArrowDown":ge.preventDefault(),we<Lt.length-1&&te({row:we+1,col:Ae,table:Fe});break;case"ArrowLeft":ge.preventDefault(),Ae>0&&te({row:we,col:Ae-1,table:Fe});break;case"ArrowRight":ge.preventDefault(),Ae<Rt.length-1&&te({row:we,col:Ae+1,table:Fe});break;case"Tab":ge.preventDefault(),ge.shiftKey?we>0&&te({row:we-1,col:Ae,table:Fe}):we<Lt.length-1&&te({row:we+1,col:Ae,table:Fe});break;case" ":{ge.preventDefault();const je=c[we],Ye=Rt[Ae];Ye!=null&&Ye.email&&(Fe==="roster"?oe(je,Ye.email,we,Ae):ce(je,Ye.email,we,Ae));break}case"Enter":A&&(ge.preventDefault(),Te());break;case"Escape":A&&(ge.preventDefault(),Ue());break}};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[$,c,N,l,A,oe,ce,Te,Ue]);const ot=P.useMemo(()=>{const ne=Rl();return c.length===0?!1:c[0]<ne},[c]),Yt=P.useMemo(()=>{const ne=Rl();return c.find(ge=>ge.split("T")[0]>=ne)},[c]),In=P.useMemo(()=>{if(!Yt||!t||!a)return[];const ne=Yt.split("T")[0],ge=R[ne]||b[ne];if(!ge||!ge.teams[t])return[];const Ve=K.filter(Ae=>Ae.parentId===a),we=[a,...Ve.map(Ae=>Ae.name)];return Object.entries(ge.teams[t]).filter(([,Ae])=>Ae.some(Fe=>we.includes(Fe))).map(([Ae])=>Ae)},[Yt,t,a,R,b,K]),Et=P.useCallback(ne=>{const ge=Rl(),Ve=ne.split("T")[0];return Ve<ge?"past-date":Ve===ge?"today-date":"future-date"},[]);if(p||g||_)return w.jsx(Kl,{});const bn=E||F;if(bn)return w.jsxs("div",{className:"roster-table-error",children:["Error: ",bn]});const Qt=a==="Absence";return!Qt&&N.length===0?w.jsxs("div",{className:"roster-table-loading",children:[!Qt&&M.length>0&&w.jsxs("div",{className:"hidden-members-bar",children:[w.jsx("span",{className:"hidden-members-label",children:"Hidden Members:"}),w.jsx("div",{className:"hidden-members-list",children:M.map(ne=>{const ge=s.find(Ve=>Ve.email===ne);return w.jsxs("button",{className:"unhide-pill",onClick:()=>x(ne),title:"Click to unhide",children:[(ge==null?void 0:ge.name)||ne," ",w.jsx("span",{children:"+"})]},ne)})})]}),"No users found for this position."]}):w.jsxs("div",{className:"roster-table-wrapper",children:[!Qt&&M.length>0&&w.jsxs("div",{className:"hidden-members-bar",children:[w.jsx("span",{className:"hidden-members-label",children:"Hidden Members:"}),w.jsx("div",{className:"hidden-members-list",children:M.map(ne=>{const ge=s.find(Ve=>Ve.email===ne);return w.jsxs("button",{className:"unhide-pill",onClick:()=>x(ne),title:"Click to unhide",children:[(ge==null?void 0:ge.name)||ne," ",w.jsx("span",{children:"+"})]},ne)})})]}),Qt?w.jsxs("div",{className:"roster-section absence-section",children:[w.jsx("div",{className:"roster-table-container",children:w.jsxs("table",{className:"roster-table absence-table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{className:"roster-table-header-cell sticky-col sticky-header",children:w.jsxs("div",{className:"date-header-content",children:["Date",w.jsxs("div",{className:"date-header-actions",children:[w.jsx("button",{className:"load-prev-btn",onClick:Ee,title:"Load 5 previous dates",children:""}),ot&&w.jsx("button",{className:"load-prev-btn reset-dates-btn",onClick:ke,title:"Hide previous dates",children:""})]})]})}),l.map(ne=>w.jsx("th",{className:`roster-table-header-cell sticky-header ${ne.email&&In.includes(ne.email)?"highlighted-header":""}`,children:ne.name},ne.email)),w.jsx("th",{className:"gender-divider-cell sticky-header"}),w.jsx("th",{className:"roster-table-header-cell sticky-header sticky-right peek-header",children:w.jsxs("select",{className:"peek-selector",value:ae||"",onChange:ne=>ee(ne.target.value||null),children:[w.jsx("option",{value:"",children:"Peek Position..."}),C.map(ne=>w.jsxs("option",{value:ne.name,children:[ne.emoji," ",ne.name]},ne.name))]})})]})}),w.jsx("tbody",{children:c.map((ne,ge)=>{const Ve=ne.split("T")[0],we=R[Ve]||b[Ve],Ae=we==null?void 0:we.eventName,Fe=Et(ne),Lt=Fe==="today-date",Rt=ye(ne);return w.jsxs("tr",{className:`${Fe} ${Rt?"":"no-data"} ${Ae?"special-event-row":""} ${ne===Yt?"closest-next-date-row":""}`,children:[w.jsx("td",{className:`date-cell sticky-col ${Rt?"clickable":""}`,onClick:()=>de(ne),title:Ae,children:w.jsxs("div",{className:"date-cell-content",children:[Ae&&w.jsx("span",{className:"special-event-dot"}),new Date(ne.replace(/-/g,"/")).toLocaleDateString(),Lt&&w.jsx("span",{className:"roster-today-dot",title:"Today"})]})}),l.map((je,Ye)=>{const Dt=($==null?void 0:$.row)===ge&&($==null?void 0:$.col)===Ye&&($==null?void 0:$.table)==="absence",rr=je.email?Pe(ne,je.email):!1,Qn=je.email?U(ne,je.email):"",an=ne===Yt&&je.email&&In.includes(je.email);return w.jsx("td",{className:`roster-cell clickable absence-roster-cell ${Dt?"focused":""} ${rr?"absent-cell":""} ${an?"highlighted-cell":""}`,onClick:()=>{je.email&&ce(ne,je.email,ge,Ye)},tabIndex:0,onFocus:()=>te({row:ge,col:Ye,table:"absence"}),title:Qn,children:rr?w.jsxs("div",{className:"absence-input-container",children:[w.jsx("input",{type:"text",className:"absence-reason-input",value:Qn,placeholder:"Reason...",maxLength:20,autoFocus:Dt,onClick:Sn=>Sn.stopPropagation(),onChange:Sn=>{je.email&&pe(ne,je.email,Sn.target.value)}}),w.jsx("button",{className:"remove-absence-btn",onClick:Sn=>{Sn.stopPropagation(),je.email&&ce(ne,je.email,ge,Ye)},title:"Mark as present",children:""})]}):""},je.email)}),w.jsx("td",{className:"gender-divider-cell"}),w.jsx("td",{className:"roster-cell peek-cell sticky-right",children:Le(ne).join(", ")||""})]},ne)})})]})}),w.jsx("div",{className:"load-more-footer",children:w.jsx("button",{className:"load-next-year-btn",onClick:Y,children:"Load Next Year "})})]}):w.jsxs("div",{className:"roster-section",children:[w.jsx("div",{className:"roster-table-container",children:w.jsxs("table",{className:"roster-table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{className:"roster-table-header-cell sticky-col sticky-header",children:w.jsxs("div",{className:"date-header-content",children:["Date",w.jsxs("div",{className:"date-header-actions",children:[w.jsx("button",{className:"load-prev-btn",onClick:Ee,title:"Load 5 previous dates",children:""}),ot&&w.jsx("button",{className:"load-prev-btn reset-dates-btn",onClick:ke,title:"Hide previous dates",children:""})]})]})}),N.map((ne,ge)=>w.jsxs(P.Fragment,{children:[O===ge&&w.jsx("th",{className:"gender-divider-cell sticky-header"}),w.jsxs("th",{className:`roster-table-header-cell sticky-header clickable-header ${ne.email&&In.includes(ne.email)?"highlighted-header":""}`,onClick:()=>ne.email&&x(ne.email),title:"Click to hide member",children:[ne.name,(S==null?void 0:S.sortByGender)&&w.jsxs("span",{className:"gender-label",children:["(",ne.gender==="Male"?"M":ne.gender==="Female"?"F":"?",")"]})]})]},ne.email)),w.jsx("th",{className:"gender-divider-cell sticky-header"}),w.jsx("th",{className:"roster-table-header-cell sticky-header sticky-right peek-header",children:w.jsxs("select",{className:"peek-selector",value:ae||"",onChange:ne=>ee(ne.target.value||null),children:[w.jsx("option",{value:"",children:"Peek Position..."}),C.map(ne=>w.jsxs("option",{value:ne.name,children:[ne.emoji," ",ne.name]},ne.name))]})})]})}),w.jsx("tbody",{children:c.map((ne,ge)=>{const Ve=ne.split("T")[0],we=R[Ve]||b[Ve],Ae=we==null?void 0:we.eventName,Fe=Et(ne),Lt=Fe==="today-date",Rt=ye(ne);return w.jsxs("tr",{className:`${Fe} ${Rt?"":"no-data"} ${Ae?"special-event-row":""} ${ne===Yt?"closest-next-date-row":""}`,children:[w.jsx("td",{className:`date-cell sticky-col ${Rt?"clickable":""}`,onClick:()=>de(ne),title:Ae,children:w.jsxs("div",{className:"date-cell-content",children:[Ae&&w.jsx("span",{className:"special-event-dot"}),Lt&&w.jsx("span",{className:"roster-today-dot",title:"Today"}),new Date(ne.replace(/-/g,"/")).toLocaleDateString()]})}),N.map((je,Ye)=>{const Dt=($==null?void 0:$.row)===ge&&($==null?void 0:$.col)===Ye&&($==null?void 0:$.table)==="roster",rr=je.email?q(ne,je.email):!1,Qn=je.email?Pe(ne,je.email):!1,an=ne===Yt&&je.email&&In.includes(je.email);return w.jsxs(P.Fragment,{children:[O===Ye&&w.jsx("td",{className:"gender-divider-cell"}),w.jsx("td",{className:`roster-cell ${rr?"disabled":"clickable"} ${Dt?"focused":""} ${Qn?"absent-strike":""} ${an?"highlighted-cell":""}`,onClick:()=>{je.email&&!rr&&oe(ne,je.email,ge,Ye)},tabIndex:0,onFocus:()=>te({row:ge,col:Ye,table:"roster"}),children:je.email&&(Qn?w.jsx("span",{title:U(ne,je.email),children:""}):Ke(ne,je.email))})]},je.email)}),w.jsx("td",{className:"gender-divider-cell"}),w.jsx("td",{className:"roster-cell peek-cell sticky-right",children:Le(ne).join(", ")||""})]},ne)})})]})}),w.jsx("div",{className:"load-more-footer",children:w.jsx("button",{className:"load-next-year-btn",onClick:Y,children:"Load Next Year "})})]}),A&&w.jsx(Yl,{onSave:Te,onCancel:Ue,isSaving:L,saveText:"Save Roster"})]})},tj="_rosterPage_z6eme_1",nj={rosterPage:tj},rj=()=>w.jsx("div",{className:nj.rosterPage,children:w.jsx(ej,{})}),ij="_appTableContainer_1bvz5_1",aj="_appTable_1bvz5_1",sj="_colorPickerGroup_1bvz5_44",oj="_stickyCol_1bvz5_54",wc={appTableContainer:ij,appTable:aj,colorPickerGroup:sj,stickyCol:oj},lj=({text:n,textAlign:e="left",width:t,minWidth:a,isSticky:s=!1})=>w.jsx("th",{className:s?wc.stickyCol:void 0,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:a?`${a}px`:"auto"},children:n}),dn=({isSticky:n=!1,textAlign:e="left",className:t,children:a})=>w.jsx("td",{style:{textAlign:e},className:`${t||""} ${n?wc.stickyCol:""}
`,children:a}),Kr=({name:n,value:e,placeholder:t,type:a="text",isSticky:s,isReadOnly:l=!1,isChild:c=!1,onChange:d})=>w.jsxs(dn,{isSticky:s,children:[c&&w.jsx(hR,{}),w.jsx("input",{name:n,className:"form-input",type:a,placeholder:t,value:e,onChange:d,readOnly:l})]}),PS=({name:n,value:e,placeholder:t,onChange:a})=>w.jsxs(dn,{className:wc.colorPickerGroup,children:[w.jsx("input",{name:n,type:"color",value:e||"#FFFFFF",onChange:a}),w.jsx("input",{name:n,className:"form-input",value:e,placeholder:t,onChange:a})]}),P_=({headers:n,children:e})=>w.jsx("div",{className:wc.appTableContainer,children:w.jsxs("table",{className:wc.appTable,children:[w.jsx("thead",{children:w.jsx("tr",{children:n.map((t,a)=>w.jsx(lj,{...t},a))})}),w.jsx("tbody",{children:e})]})}),uj="_settingsContainer_1c9s2_1",cj="_managementWrapper_1c9s2_13",um={settingsContainer:uj,managementWrapper:cj},Lg={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},hj=()=>{const n=mi(),{positions:e,fetched:t,loading:a}=ct(B=>B.positions),[s,l]=P.useState(e),[c,d]=P.useState(Lg),[p,g]=P.useState("idle"),_=P.useMemo(()=>JSON.stringify(s)!==JSON.stringify(e),[s,e]);P.useEffect(()=>{t||n(ps())},[n,t]),P.useEffect(()=>{l(e)},[e]);const E=(B,$,te)=>{const ae=[...s];ae[B]={...ae[B],[$]:te},l(ae)},b=(B,$)=>{const te=[...s],ae=te[B],ee=ae.parentId,A=S=>{const C=te[S];if(!C)return{block:[],startIndex:-1,endIndex:-1};const M=[],N=[C],O=new Set;let x=S,Ee=S,ke=0;for(;ke<N.length;){const de=N[ke++];O.has(de.name)||(O.add(de.name),M.push(de),te.forEach((ye,Le)=>{ye.parentId===de.name&&!O.has(ye.name)&&(N.push(ye),x=Math.min(x,Le),Ee=Math.max(Ee,Le))}))}return{block:M,startIndex:x,endIndex:Ee}};if(ee){const S=te.filter(ke=>ke.parentId===ee),M=S.findIndex(ke=>ke.name===ae.name)+($==="up"?-1:1);if(M<0||M>=S.length)return;const N=S[M],O=te.indexOf(ae),x=te.indexOf(N);if(O===-1||x===-1)return;const Ee=[...te];Ee[O]=N,Ee[x]=ae,l(Ee)}else{const S=A(B),{block:C,startIndex:M,endIndex:N}=S;if(!C||C.length===0)return;if($==="up"){if(M===0)return;let O=M-1;for(;O>=0&&te[O].parentId;)O--;if(O<0)return;const x=A(O),{block:Ee,startIndex:ke}=x;if(!Ee||Ee.length===0)return;const Y=[...te.slice(0,ke),...C,...Ee,...te.slice(N+1)].filter(Boolean);l(Y)}else{if(N===te.length-1)return;let O=N+1;for(;O<te.length&&te[O].parentId;)O++;if(O>=te.length)return;const x=A(O),{block:Ee,startIndex:ke}=x;if(!Ee||Ee.length===0)return;const Y=[...te.slice(0,M),...Ee,...C,...te.slice(ke+Ee.length)].filter(Boolean);l(Y)}}},R=()=>{if(!c.name.trim()||!c.emoji.trim())return alert("Please provide both an emoji and a name.");l([...s,c]),d(Lg)},L=B=>{if(window.confirm("Delete this position? This will remove it from the global list, and any associated child positions.")){const $=s[B];let te=s.filter((ae,ee)=>ee!==B);$.parentId||(te=te.filter(ae=>ae.parentId!==$.name)),l(te)}},F=async()=>{g("saving");try{const B=s.map($=>({...$,parentId:$.parentId===void 0?void 0:$.parentId}));await n(oR(B)).unwrap(),g("success"),setTimeout(()=>g("idle"),2e3)}catch(B){console.error("Save Error:",B),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),g("idle")}},j=B=>{l($=>{const te={...Lg,parentId:B},ae=$.findIndex(S=>S.name===B);if(ae===-1)return[...$,te];let ee=ae;for(;ee+1<$.length&&$[ee+1].parentId===B;)ee++;return[...$.slice(0,ee+1),te,...$.slice(ee+1)]})},K=()=>{l(e)};return a?w.jsx(Kl,{}):w.jsxs("div",{className:um.managementWrapper,children:[w.jsxs(P_,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:80},{text:"Colour",minWidth:100},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[s.map((B,$)=>w.jsxs("tr",{children:[w.jsx(dn,{textAlign:"center",children:B.parentId?w.jsx(hR,{}):w.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[w.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>b($,"up"),disabled:$===0,children:""}),w.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>b($,"down"),disabled:$===s.length-1,children:""})]})}),w.jsx(Kr,{name:`emoji-${$}`,value:B.emoji,onChange:te=>E($,"emoji",te.target.value)}),w.jsx(Kr,{name:`name-${$}`,value:B.name,onChange:te=>E($,"name",te.target.value)}),w.jsx(PS,{name:`colour-${$}`,value:B.colour,onChange:te=>E($,"colour",te.target.value)}),w.jsx(dn,{textAlign:"center",children:w.jsx(tr,{colour:B.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:B.sortByGender,onClick:()=>E($,"sortByGender",!B.sortByGender),children:B.sortByGender?"YES":"NO"})}),w.jsx(dn,{textAlign:"center",children:!B.parentId&&w.jsx("button",{className:"icon-button icon-button--add-child",onClick:()=>j(B.name),title:"Add Child Position",children:"+"})}),w.jsx(dn,{textAlign:"center",children:w.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>L($),children:""})})]},`${B.emoji}-${$}`)),w.jsxs("tr",{className:"pos-row-new",children:[w.jsx("td",{className:"",children:""}),w.jsx(Kr,{name:"new-emoji",value:c.emoji,placeholder:"",onChange:B=>d({...c,emoji:B.target.value})}),w.jsx(Kr,{name:"new-name",value:c.name,placeholder:"Position Name",onChange:B=>d({...c,name:B.target.value})}),w.jsx(PS,{name:"new-colour",value:c.colour,placeholder:"#FFFFFF",onChange:B=>d({...c,colour:B.target.value})}),w.jsx(dn,{textAlign:"center",children:w.jsx(tr,{colour:c.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.sortByGender,onClick:()=>d({...c,sortByGender:!c.sortByGender}),children:c.sortByGender?"YES":"NO"})}),w.jsx(dn,{textAlign:"center",children:w.jsx("button",{onClick:R,className:"icon-button icon-button--add",disabled:!c.name.trim()||!c.emoji.trim(),children:"Add"})})]})]}),_&&w.jsx(Yl,{label:"Unsaved position changes",saveText:"Save Positions",onSave:F,onCancel:K,isSaving:p==="saving"})]})},VS={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1},kS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],fj=()=>{var ee,A;const n=mi(),{teams:e,fetched:t,loading:a}=ct(S=>S.teams),{positions:s,fetched:l,loading:c}=ct(S=>S.positions),[d,p]=P.useState(e),[g,_]=P.useState(VS),[E,b]=P.useState("idle"),R=P.useMemo(()=>JSON.stringify(d)!==JSON.stringify(e),[d,e]);P.useEffect(()=>{t||n(lo()),l||n(ps())},[n,t,l]),P.useEffect(()=>{p(e)},[e]);const L=(S,C,M)=>{const N=[...d];N[S]={...N[S],[C]:M},p(N)},F=(S,C)=>{const M=[...d],N=C==="up"?S-1:S+1;if(N<0||N>=M.length)return;const O=M[S];M[S]=M[N],M[N]=O,p(M)},j=(S,C)=>{const M=d.map((N,O)=>{if(O!==S)return N;const x=N.positions||[],Ee=x.find(ke=>ke.name===C.name)?x.filter(ke=>ke.name!==C.name):[...x,C];return{...N,positions:Ee}});p(M)},K=(S,C)=>{const M=d.map((N,O)=>{if(O!==S)return N;const x=N.preferredDays||[],Ee=x.includes(C)?x.filter(ke=>ke!==C):[...x,C];return{...N,preferredDays:Ee}});p(M)},B=()=>{if(!g.name.trim()||!g.emoji.trim())return alert("Please provide both an emoji and a name for the team.");p([...d,g]),_(VS)},$=S=>{window.confirm("Are you sure you want to delete this team?")&&p(d.filter((C,M)=>M!==S))},te=async()=>{b("saving");try{await n(Bf(d)).unwrap(),b("success"),setTimeout(()=>b("idle"),2e3)}catch(S){console.error("Save Error:",S),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),b("idle")}},ae=()=>{p(e)};return a||c?w.jsx(Kl,{}):w.jsxs("div",{className:um.managementWrapper,children:[w.jsxs(P_,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:100},{text:"Conflicts",width:60,textAlign:"center"},{text:"Allowed Positions",minWidth:200},{text:"Preferred Days",minWidth:250},{text:"",width:50}],children:[d.map((S,C)=>{var M,N;return w.jsxs("tr",{children:[w.jsxs(dn,{children:[" ",w.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[w.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>F(C,"up"),disabled:C===0,children:""}),w.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>F(C,"down"),disabled:C===d.length-1,children:""})]})]}),w.jsx(Kr,{name:`team-emoji-${C}`,value:S.emoji,onChange:O=>L(C,"emoji",O.target.value)}),w.jsx(Kr,{name:`team-name-${C}`,value:S.name,onChange:O=>L(C,"name",O.target.value)}),w.jsx(Kr,{name:`team-maxConflict-${C}`,value:((M=S.maxConflict)==null?void 0:M.toString())||"1",type:"number",onChange:O=>L(C,"maxConflict",parseInt(O.target.value)||1)}),w.jsx(dn,{children:w.jsx(xi,{nowrap:!0,children:(N=s==null?void 0:s.filter(O=>!O.parentId))==null?void 0:N.map(O=>{var Ee;const x=(Ee=S.positions)==null?void 0:Ee.some(ke=>ke.name===O.name);return w.jsx(tr,{colour:O.colour,isActive:x,onClick:()=>j(C,O),children:O.emoji},O.name)})})}),w.jsx(dn,{children:w.jsx(xi,{nowrap:!0,children:kS.map(O=>{var Ee;const x=(Ee=S.preferredDays)==null?void 0:Ee.includes(O);return w.jsx(tr,{isActive:x,onClick:()=>K(C,O),children:O.substring(0,3)},O)})})}),w.jsx(dn,{children:w.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>$(C),children:""})})]},`${S.emoji}-${C}`)}),w.jsxs("tr",{className:"team-row-new",children:[w.jsx("td",{className:"",children:""}),w.jsx(Kr,{name:"new-team-emoji",value:g.emoji,placeholder:"",onChange:S=>_({...g,emoji:S.target.value})}),w.jsx(Kr,{name:"new-team-name",value:g.name,placeholder:"Team Name",onChange:S=>_({...g,name:S.target.value})}),w.jsx(Kr,{name:"new-team-maxConflict",value:((ee=g.maxConflict)==null?void 0:ee.toString())||"1",type:"number",onChange:S=>_({...g,maxConflict:parseInt(S.target.value)||1})}),w.jsx(dn,{children:w.jsx(xi,{nowrap:!0,children:(A=s==null?void 0:s.filter(S=>!S.parentId))==null?void 0:A.map(S=>{var M;const C=(M=g.positions)==null?void 0:M.some(N=>N.name===S.name);return w.jsx(tr,{colour:S.colour,isActive:C,onClick:()=>_(N=>{const O=N.positions||[],x=O.some(Ee=>Ee.name===S.name)?O.filter(Ee=>Ee.name!==S.name):[...O,S];return{...N,positions:x}}),children:S.emoji},`new-${S.name}`)})})}),w.jsx(dn,{children:w.jsx(xi,{nowrap:!0,children:kS.map(S=>{var M;const C=(M=g.preferredDays)==null?void 0:M.includes(S);return w.jsx(tr,{isActive:C,onClick:()=>_(N=>{const O=N.preferredDays||[],x=O.includes(S)?O.filter(Ee=>Ee!==S):[...O,S];return{...N,preferredDays:x}}),children:S.substring(0,3)},`new-team-${S}`)})})}),w.jsx(dn,{children:w.jsx("button",{onClick:B,className:"icon-button icon-button--add",disabled:!g.name.trim()||!g.emoji.trim(),children:"+"})})]})]}),R&&w.jsx(Yl,{label:"Unsaved team changes",saveText:"Save All Team Changes",onSave:te,onCancel:ae,isSaving:E==="saving"})]})},dj={allUsers:[],originalUsers:[],loading:!1,saving:!1,error:null},Yf=Mr("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=Uc(Cn,"users"),a=Bc(t),s=await Hc(a),l=[];return s.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),Qf=Mr("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=m1(Cn);n.forEach(a=>{const{id:s,...l}=a;l.teamPositions&&(l.indexedAssignments=dR(l.teamPositions)),t.update(Xr(Cn,"users",s),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),ER=To({name:"userManagement",initialState:dj,reducers:{updateUserField(n,e){const{id:t,field:a,value:s}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[a]=s)},toggleUserTeam(n,e){const{userId:t,teamName:a}=e.payload,s=n.allUsers.find(l=>l.id===t);if(s){const l=s.teams||[],c=l.includes(a)?l.filter(d=>d!==a):[...l,a];s.teams=c,s.teamPositions||(s.teamPositions={}),c.includes(a)?s.teamPositions[a]||(s.teamPositions[a]=[]):delete s.teamPositions[a]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:a,posName:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[a]||(l.teamPositions[a]=[]);const c=l.teamPositions[a],d=c.includes(s)?c.filter(p=>p!==s):[...c,s];l.teamPositions[a]=d}},resetUserChanges(n){n.allUsers=JSON.parse(JSON.stringify(n.originalUsers))}},extraReducers:n=>{n.addCase(Yf.pending,e=>{e.loading=!0,e.error=null}).addCase(Yf.fulfilled,(e,t)=>{e.allUsers=t.payload,e.originalUsers=JSON.parse(JSON.stringify(t.payload)),e.loading=!1}).addCase(Yf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Qf.pending,e=>{e.saving=!0,e.error=null}).addCase(Qf.fulfilled,e=>{e.saving=!1,e.originalUsers=JSON.parse(JSON.stringify(e.allUsers))}).addCase(Qf.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:mj,toggleUserTeam:pj,toggleUserTeamPosition:gj,resetUserChanges:yj}=ER.actions,_j=ER.reducer,vj=({user:n,availableTeams:e,adminEmail:t})=>{var d;const a=mi(),s=(p,g)=>{a(mj({id:n.id,field:p,value:g}))},l=p=>{a(pj({userId:n.id,teamName:p}))},c=(p,g)=>{a(gj({userId:n.id,teamName:p,posName:g}))};return w.jsxs("tr",{children:[w.jsx(Kr,{name:`name-${n.id}`,value:n.name||"",onChange:p=>s("name",p.target.value),isSticky:!0}),w.jsx(Kr,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),w.jsx(dn,{children:w.jsxs("select",{name:`gender-${n.id}`,className:"form-select",value:n.gender,onChange:p=>s("gender",p.target.value),children:[w.jsx("option",{value:"",children:"-"}),w.jsx("option",{value:"Male",children:"Male"}),w.jsx("option",{value:"Female",children:"Female"})]})}),w.jsx(dn,{children:w.jsx(xi,{children:e.map(p=>{var _;const g=(_=n.teams)==null?void 0:_.includes(p.name);return w.jsxs(tr,{onClick:()=>l(p.name),isActive:g,children:[w.jsx("span",{children:p.emoji})," ",p.name]},p.name)})})}),w.jsx(dn,{children:(d=n.teams)==null?void 0:d.map(p=>{var _,E;const g=e.find(b=>b.name===p);return g?w.jsxs("div",{style:{marginBottom:"12px"},children:[w.jsxs("div",{style:{fontSize:"0.65rem",fontWeight:"bold",marginBottom:"4px",color:"var(--color-text-dim)",textTransform:"uppercase"},children:[g.emoji," ",g.name]}),w.jsx(xi,{children:(E=(_=g.positions)==null?void 0:_.filter(b=>!b.parentId))==null?void 0:E.map(b=>{var L,F;const R=(F=(L=n.teamPositions)==null?void 0:L[p])==null?void 0:F.includes(b.name);return w.jsx(tr,{colour:b.colour,isActive:R,onClick:()=>c(p,b.name),children:b.emoji},b.name)})})]},p):null})}),w.jsx(dn,{children:w.jsx(tr,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),w.jsx(dn,{children:w.jsx(tr,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),w.jsx(dn,{children:w.jsx(tr,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id)},Ej=()=>{const n=mi(),{allUsers:e,originalUsers:t,loading:a,saving:s,error:l}=ct(_=>_.userManagement),c=ct(_=>_.teams.teams),d=P.useMemo(()=>JSON.stringify(e)!==JSON.stringify(t),[e,t]);P.useEffect(()=>{n(Yf())},[n]);const p=()=>{n(Qf(e))},g=()=>{n(yj())};return a?w.jsx(Kl,{}):l?w.jsxs("div",{children:["Error: ",l]}):w.jsxs("div",{className:um.managementWrapper,children:[w.jsx(P_,{headers:[{text:"Name",minWidth:70,isSticky:!0},{text:"Email",minWidth:170},{text:"Gender",minWidth:90},{text:"Teams",minWidth:200},{text:"Positions",minWidth:200},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(_=>w.jsx(vj,{user:_,availableTeams:c,adminEmail:"chris.sm.kang542@gmail.com"},_.id))}),d&&w.jsx(Yl,{label:"Unsaved user changes",saveText:"Save All User Changes",onSave:p,onCancel:g,isSaving:s})]})},Tj=()=>{const{userData:n}=ct(t=>t.auth),{section:e}=Nd();return n?w.jsxs("div",{className:um.settingsContainer,children:[e===_l.PROFILE&&w.jsx(vR,{}),e===_l.USER_MANAGEMENT&&(n.isAdmin?w.jsx(Ej,{}):w.jsx("p",{children:"Access Denied"})),e===_l.TEAMS&&(n.isAdmin?w.jsx(fj,{}):w.jsx("p",{children:"Access Denied"})),e===_l.POSITIONS&&(n.isAdmin?w.jsx(hj,{}):w.jsx("p",{children:"Access Denied"}))]}):null},bj=[{path:"/",element:w.jsx(vk,{})},{path:"/login",element:w.jsx(Z3,{})},{path:"/guest",element:w.jsx(G3,{})},{path:"/app",element:w.jsx(TL,{}),children:[{path:"",element:w.jsx(RU,{}),children:[{path:"dashboard",element:w.jsx(v3,{})},{path:"roster/:teamName?/:positionName?",element:w.jsx(rj,{})},{path:"settings/:section?",element:w.jsx(Tj,{})}]}]}];let LS=!1;const Sj=n=>{if(!LS){LS=!0;let e;JV(kl,t=>{if(t){n.dispatch(C3(t)),n.dispatch($f(t.uid));const a=Xr(Cn,"users",t.uid);e=lV(a,s=>{if(s.exists()){const l=s.data();n.dispatch(I3(l))}})}else n.dispatch(D3()),e&&e()})}return e=>t=>e(t)},Aj=Xk({reducer:{auth:N3,positions:_L,roster:UU,rosterView:qU,teams:EL,ui:GL,userManagement:_j},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(Sj)}),wj=GN(bj);cI.createRoot(document.getElementById("root")).render(w.jsx(jS.StrictMode,{children:w.jsx(wI,{store:Aj,children:w.jsx(ox,{children:w.jsx(mk,{children:w.jsx(ax,{router:wj})})})})}));
