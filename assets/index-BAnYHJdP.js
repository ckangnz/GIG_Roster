var CI=Object.defineProperty;var RI=(n,e,t)=>e in n?CI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Eg=(n,e,t)=>RI(n,typeof e!="symbol"?e+"":e,t);function II(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(i,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function iA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Tg={exports:{}},ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bb;function xI(){if(bb)return ec;bb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:l}}return ec.Fragment=e,ec.jsx=t,ec.jsxs=t,ec}var Sb;function NI(){return Sb||(Sb=1,Tg.exports=xI()),Tg.exports}var T=NI(),bg={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function DI(){if(Ab)return Je;Ab=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),S=Symbol.iterator;function w(L){return L===null||typeof L!="object"?null:(L=S&&L[S]||L["@@iterator"],typeof L=="function"?L:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,j={};function G(L,re,ve){this.props=L,this.context=re,this.refs=j,this.updater=ve||O}G.prototype.isReactComponent={},G.prototype.setState=function(L,re){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,re,"setState")},G.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function H(){}H.prototype=G.prototype;function K(L,re,ve){this.props=L,this.context=re,this.refs=j,this.updater=ve||O}var te=K.prototype=new H;te.constructor=K,z(te,G.prototype),te.isPureReactComponent=!0;var se=Array.isArray;function ee(){}var A={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function R(L,re,ve){var ae=ve.ref;return{$$typeof:n,type:L,key:re,ref:ae!==void 0?ae:null,props:ve}}function N(L,re){return R(L.type,re,L.props)}function M(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function V(L){var re={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ve){return re[ve]})}var D=/\/+/g;function ye(L,re){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):re.toString(36)}function me(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(ee,ee):(L.status="pending",L.then(function(re){L.status==="pending"&&(L.status="fulfilled",L.value=re)},function(re){L.status==="pending"&&(L.status="rejected",L.reason=re)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function B(L,re,ve,ae,_e){var Te=typeof L;(Te==="undefined"||Te==="boolean")&&(L=null);var Ne=!1;if(L===null)Ne=!0;else switch(Te){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(L.$$typeof){case n:case e:Ne=!0;break;case y:return Ne=L._init,B(Ne(L._payload),re,ve,ae,_e)}}if(Ne)return _e=_e(L),Ne=ae===""?"."+ye(L,0):ae,se(_e)?(ve="",Ne!=null&&(ve=Ne.replace(D,"$&/")+"/"),B(_e,re,ve,"",function(Et){return Et})):_e!=null&&(M(_e)&&(_e=N(_e,ve+(_e.key==null||L&&L.key===_e.key?"":(""+_e.key).replace(D,"$&/")+"/")+Ne)),re.push(_e)),1;Ne=0;var je=ae===""?".":ae+":";if(se(L))for(var Fe=0;Fe<L.length;Fe++)ae=L[Fe],Te=je+ye(ae,Fe),Ne+=B(ae,re,ve,Te,_e);else if(Fe=w(L),typeof Fe=="function")for(L=Fe.call(L),Fe=0;!(ae=L.next()).done;)ae=ae.value,Te=je+ye(ae,Fe++),Ne+=B(ae,re,ve,Te,_e);else if(Te==="object"){if(typeof L.then=="function")return B(me(L),re,ve,ae,_e);throw re=String(L),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function J(L,re,ve){if(L==null)return L;var ae=[],_e=0;return B(L,ae,"","",function(Te){return re.call(ve,Te,_e++)}),ae}function ue(L){if(L._status===-1){var re=L._result;re=re(),re.then(function(ve){(L._status===0||L._status===-1)&&(L._status=1,L._result=ve)},function(ve){(L._status===0||L._status===-1)&&(L._status=2,L._result=ve)}),L._status===-1&&(L._status=0,L._result=re)}if(L._status===1)return L._result.default;throw L._result}var ce=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},be={map:J,forEach:function(L,re,ve){J(L,function(){re.apply(this,arguments)},ve)},count:function(L){var re=0;return J(L,function(){re++}),re},toArray:function(L){return J(L,function(re){return re})||[]},only:function(L){if(!M(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Je.Activity=v,Je.Children=be,Je.Component=G,Je.Fragment=t,Je.Profiler=s,Je.PureComponent=K,Je.StrictMode=i,Je.Suspense=m,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Je.__COMPILER_RUNTIME={__proto__:null,c:function(L){return A.H.useMemoCache(L)}},Je.cache=function(L){return function(){return L.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(L,re,ve){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ae=z({},L.props),_e=L.key;if(re!=null)for(Te in re.key!==void 0&&(_e=""+re.key),re)!I.call(re,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&re.ref===void 0||(ae[Te]=re[Te]);var Te=arguments.length-2;if(Te===1)ae.children=ve;else if(1<Te){for(var Ne=Array(Te),je=0;je<Te;je++)Ne[je]=arguments[je+2];ae.children=Ne}return R(L.type,_e,ae)},Je.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},Je.createElement=function(L,re,ve){var ae,_e={},Te=null;if(re!=null)for(ae in re.key!==void 0&&(Te=""+re.key),re)I.call(re,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(_e[ae]=re[ae]);var Ne=arguments.length-2;if(Ne===1)_e.children=ve;else if(1<Ne){for(var je=Array(Ne),Fe=0;Fe<Ne;Fe++)je[Fe]=arguments[Fe+2];_e.children=je}if(L&&L.defaultProps)for(ae in Ne=L.defaultProps,Ne)_e[ae]===void 0&&(_e[ae]=Ne[ae]);return R(L,Te,_e)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(L){return{$$typeof:d,render:L}},Je.isValidElement=M,Je.lazy=function(L){return{$$typeof:y,_payload:{_status:-1,_result:L},_init:ue}},Je.memo=function(L,re){return{$$typeof:p,type:L,compare:re===void 0?null:re}},Je.startTransition=function(L){var re=A.T,ve={};A.T=ve;try{var ae=L(),_e=A.S;_e!==null&&_e(ve,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(ee,ce)}catch(Te){ce(Te)}finally{re!==null&&ve.types!==null&&(re.types=ve.types),A.T=re}},Je.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Je.use=function(L){return A.H.use(L)},Je.useActionState=function(L,re,ve){return A.H.useActionState(L,re,ve)},Je.useCallback=function(L,re){return A.H.useCallback(L,re)},Je.useContext=function(L){return A.H.useContext(L)},Je.useDebugValue=function(){},Je.useDeferredValue=function(L,re){return A.H.useDeferredValue(L,re)},Je.useEffect=function(L,re){return A.H.useEffect(L,re)},Je.useEffectEvent=function(L){return A.H.useEffectEvent(L)},Je.useId=function(){return A.H.useId()},Je.useImperativeHandle=function(L,re,ve){return A.H.useImperativeHandle(L,re,ve)},Je.useInsertionEffect=function(L,re){return A.H.useInsertionEffect(L,re)},Je.useLayoutEffect=function(L,re){return A.H.useLayoutEffect(L,re)},Je.useMemo=function(L,re){return A.H.useMemo(L,re)},Je.useOptimistic=function(L,re){return A.H.useOptimistic(L,re)},Je.useReducer=function(L,re,ve){return A.H.useReducer(L,re,ve)},Je.useRef=function(L){return A.H.useRef(L)},Je.useState=function(L){return A.H.useState(L)},Je.useSyncExternalStore=function(L,re,ve){return A.H.useSyncExternalStore(L,re,ve)},Je.useTransition=function(){return A.H.useTransition()},Je.version="19.2.4",Je}var wb;function Bd(){return wb||(wb=1,bg.exports=DI()),bg.exports}var P=Bd();const aA=iA(P),OI=II({__proto__:null,default:aA},[P]);var Sg={exports:{}},tc={},Ag={exports:{}},wg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb;function MI(){return Cb||(Cb=1,(function(n){function e(B,J){var ue=B.length;B.push(J);e:for(;0<ue;){var ce=ue-1>>>1,be=B[ce];if(0<s(be,J))B[ce]=J,B[ue]=be,ue=ce;else break e}}function t(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var J=B[0],ue=B.pop();if(ue!==J){B[0]=ue;e:for(var ce=0,be=B.length,L=be>>>1;ce<L;){var re=2*(ce+1)-1,ve=B[re],ae=re+1,_e=B[ae];if(0>s(ve,ue))ae<be&&0>s(_e,ve)?(B[ce]=_e,B[ae]=ue,ce=ae):(B[ce]=ve,B[re]=ue,ce=re);else if(ae<be&&0>s(_e,ue))B[ce]=_e,B[ae]=ue,ce=ae;else break e}}return J}function s(B,J){var ue=B.sortIndex-J.sortIndex;return ue!==0?ue:B.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],p=[],y=1,v=null,S=3,w=!1,O=!1,z=!1,j=!1,G=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function te(B){for(var J=t(p);J!==null;){if(J.callback===null)i(p);else if(J.startTime<=B)i(p),J.sortIndex=J.expirationTime,e(m,J);else break;J=t(p)}}function se(B){if(z=!1,te(B),!O)if(t(m)!==null)O=!0,ee||(ee=!0,V());else{var J=t(p);J!==null&&me(se,J.startTime-B)}}var ee=!1,A=-1,I=5,R=-1;function N(){return j?!0:!(n.unstable_now()-R<I)}function M(){if(j=!1,ee){var B=n.unstable_now();R=B;var J=!0;try{e:{O=!1,z&&(z=!1,H(A),A=-1),w=!0;var ue=S;try{t:{for(te(B),v=t(m);v!==null&&!(v.expirationTime>B&&N());){var ce=v.callback;if(typeof ce=="function"){v.callback=null,S=v.priorityLevel;var be=ce(v.expirationTime<=B);if(B=n.unstable_now(),typeof be=="function"){v.callback=be,te(B),J=!0;break t}v===t(m)&&i(m),te(B)}else i(m);v=t(m)}if(v!==null)J=!0;else{var L=t(p);L!==null&&me(se,L.startTime-B),J=!1}}break e}finally{v=null,S=ue,w=!1}J=void 0}}finally{J?V():ee=!1}}}var V;if(typeof K=="function")V=function(){K(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ye=D.port2;D.port1.onmessage=M,V=function(){ye.postMessage(null)}}else V=function(){G(M,0)};function me(B,J){A=G(function(){B(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(B){switch(S){case 1:case 2:case 3:var J=3;break;default:J=S}var ue=S;S=J;try{return B()}finally{S=ue}},n.unstable_requestPaint=function(){j=!0},n.unstable_runWithPriority=function(B,J){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ue=S;S=B;try{return J()}finally{S=ue}},n.unstable_scheduleCallback=function(B,J,ue){var ce=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ce+ue:ce):ue=ce,B){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ue+be,B={id:y++,callback:J,priorityLevel:B,startTime:ue,expirationTime:be,sortIndex:-1},ue>ce?(B.sortIndex=ue,e(p,B),t(m)===null&&B===t(p)&&(z?(H(A),A=-1):z=!0,me(se,ue-ce))):(B.sortIndex=be,e(m,B),O||w||(O=!0,ee||(ee=!0,V()))),B},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(B){var J=S;return function(){var ue=S;S=J;try{return B.apply(this,arguments)}finally{S=ue}}}})(wg)),wg}var Rb;function PI(){return Rb||(Rb=1,Ag.exports=MI()),Ag.exports}var Cg={exports:{}},Zn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function VI(){if(Ib)return Zn;Ib=1;var n=Bd();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(m,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:m,containerInfo:p,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Zn.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},Zn.flushSync=function(m){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=y,i.d.f()}},Zn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},Zn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Zn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:w}):y==="script"&&i.d.X(m,{crossOrigin:v,integrity:S,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Zn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},Zn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Zn.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},Zn.requestFormReset=function(m){i.d.r(m)},Zn.unstable_batchedUpdates=function(m,p){return m(p)},Zn.useFormState=function(m,p,y){return c.H.useFormState(m,p,y)},Zn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zn.version="19.2.4",Zn}var xb;function sA(){if(xb)return Cg.exports;xb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cg.exports=VI(),Cg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb;function kI(){if(Nb)return tc;Nb=1;var n=PI(),e=Bd(),t=sA();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var a=r,o=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(o=a.return),r=a.return;while(r)}return a.tag===3?o:null}function c(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(i(188))}function p(r){var a=r.alternate;if(!a){if(a=l(r),a===null)throw Error(i(188));return a!==r?null:r}for(var o=r,u=a;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return m(f),r;if(g===u)return m(f),a;g=g.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=g;else{for(var E=!1,C=f.child;C;){if(C===o){E=!0,o=f,u=g;break}if(C===u){E=!0,u=f,o=g;break}C=C.sibling}if(!E){for(C=g.child;C;){if(C===o){E=!0,o=g,u=f;break}if(C===u){E=!0,u=g,o=f;break}C=C.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:a}function y(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=y(r),a!==null)return a;r=r.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),K=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function V(r){return r===null||typeof r!="object"?null:(r=M&&r[M]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function ye(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case z:return"Fragment";case G:return"Profiler";case j:return"StrictMode";case se:return"Suspense";case ee:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case O:return"Portal";case K:return r.displayName||"Context";case H:return(r._context.displayName||"Context")+".Consumer";case te:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case A:return a=r.displayName||null,a!==null?a:ye(r.type)||"Memo";case I:a=r._payload,r=r._init;try{return ye(r(a))}catch{}}return null}var me=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},ce=[],be=-1;function L(r){return{current:r}}function re(r){0>be||(r.current=ce[be],ce[be]=null,be--)}function ve(r,a){be++,ce[be]=r.current,r.current=a}var ae=L(null),_e=L(null),Te=L(null),Ne=L(null);function je(r,a){switch(ve(Te,a),ve(_e,r),ve(ae,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?GT(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=GT(a),r=$T(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}re(ae),ve(ae,r)}function Fe(){re(ae),re(_e),re(Te)}function Et(r){r.memoizedState!==null&&ve(Ne,r);var a=ae.current,o=$T(a,r.type);a!==o&&(ve(_e,r),ve(ae,o))}function wt(r){_e.current===r&&(re(ae),re(_e)),Ne.current===r&&(re(Ne),Xu._currentValue=ue)}var We,Ht;function Zt(r){if(We===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);We=a&&a[1]||"",Ht=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+We+r+Ht}var Kr=!1;function an(r,a){if(!r||Kr)return"";Kr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ie){var Z=ie}Reflect.construct(r,[],de)}else{try{de.call()}catch(ie){Z=ie}r.call(de.prototype)}}else{try{throw Error()}catch(ie){Z=ie}(de=r())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ie){if(ie&&Z&&typeof ie.stack=="string")return[ie.stack,Z.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],C=g[1];if(E&&C){var U=E.split(`
`),X=C.split(`
`);for(f=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;f<X.length&&!X[f].includes("DetermineComponentFrameRoot");)f++;if(u===U.length||f===X.length)for(u=U.length-1,f=X.length-1;1<=u&&0<=f&&U[u]!==X[f];)f--;for(;1<=u&&0<=f;u--,f--)if(U[u]!==X[f]){if(u!==1||f!==1)do if(u--,f--,0>f||U[u]!==X[f]){var oe=`
`+U[u].replace(" at new "," at ");return r.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",r.displayName)),oe}while(1<=u&&0<=f);break}}}finally{Kr=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Zt(o):""}function Qn(r,a){switch(r.tag){case 26:case 27:case 5:return Zt(r.type);case 16:return Zt("Lazy");case 13:return r.child!==a&&a!==null?Zt("Suspense Fallback"):Zt("Suspense");case 19:return Zt("SuspenseList");case 0:case 15:return an(r.type,!1);case 11:return an(r.type.render,!1);case 1:return an(r.type,!0);case 31:return Zt("Activity");default:return""}}function Ir(r){try{var a="",o=null;do a+=Qn(r,o),o=r,r=r.return;while(r);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Mt=Object.prototype.hasOwnProperty,st=n.unstable_scheduleCallback,Dn=n.unstable_cancelCallback,Ri=n.unstable_shouldYield,Ii=n.unstable_requestPaint,Ft=n.unstable_now,En=n.unstable_getCurrentPriorityLevel,ar=n.unstable_ImmediatePriority,Xn=n.unstable_UserBlockingPriority,pn=n.unstable_NormalPriority,le=n.unstable_LowPriority,Se=n.unstable_IdlePriority,Ie=n.log,Ee=n.unstable_setDisableYieldValue,De=null,Pe=null;function Ct(r){if(typeof Ie=="function"&&Ee(r),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(De,r)}catch{}}var Ge=Math.clz32?Math.clz32:On,bt=Math.log,sn=Math.LN2;function On(r){return r>>>=0,r===0?32:31-(bt(r)/sn|0)|0}var sr=256,xi=262144,en=4194304;function Yr(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function xr(r,a,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,g=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~g,u!==0?f=Yr(u):(E&=C,E!==0?f=Yr(E):o||(o=C&~r,o!==0&&(f=Yr(o))))):(C=u&~g,C!==0?f=Yr(C):E!==0?f=Yr(E):o||(o=u&~r,o!==0&&(f=Yr(o)))),f===0?0:a!==0&&a!==f&&(a&g)===0&&(g=f&-f,o=a&-a,g>=o||g===32&&(o&4194048)!==0)?a:f}function Nr(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Mo(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zi(){var r=en;return en<<=1,(en&62914560)===0&&(en=4194304),r}function or(r){for(var a=[],o=0;31>o;o++)a.push(r);return a}function Ni(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function lu(r,a,o,u,f,g){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var C=r.entanglements,U=r.expirationTimes,X=r.hiddenUpdates;for(o=E&~o;0<o;){var oe=31-Ge(o),de=1<<oe;C[oe]=0,U[oe]=-1;var Z=X[oe];if(Z!==null)for(X[oe]=null,oe=0;oe<Z.length;oe++){var ie=Z[oe];ie!==null&&(ie.lane&=-536870913)}o&=~de}u!==0&&ea(r,u,0),g!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=g&~(E&~a))}function ea(r,a,o){r.pendingLanes|=a,r.suspendedLanes&=~a;var u=31-Ge(a);r.entangledLanes|=a,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function k(r,a){var o=r.entangledLanes|=a;for(r=r.entanglements;o;){var u=31-Ge(o),f=1<<u;f&a|r[u]&a&&(r[u]|=a),o&=~f}}function q(r,a){var o=a&-a;return o=(o&42)!==0?1:W(o),(o&(r.suspendedLanes|a))!==0?0:o}function W(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ge(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ae(){var r=J.p;return r!==0?r:(r=window.event,r===void 0?32:pb(r.type))}function Oe(r,a){var o=J.p;try{return J.p=r,a()}finally{J.p=o}}var ke=Math.random().toString(36).slice(2),we="__reactFiber$"+ke,Re="__reactProps$"+ke,Ve="__reactContainer$"+ke,$e="__reactEvents$"+ke,ze="__reactListeners$"+ke,Qe="__reactHandles$"+ke,ot="__reactResources$"+ke,kt="__reactMarker$"+ke;function Qt(r){delete r[we],delete r[Re],delete r[$e],delete r[ze],delete r[Qe]}function Gt(r){var a=r[we];if(a)return a;for(var o=r.parentNode;o;){if(a=o[Ve]||o[we]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(r=ZT(r);r!==null;){if(o=r[we])return o;r=ZT(r)}return a}r=o,o=r.parentNode}return null}function nt(r){if(r=r[we]||r[Ve]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function $t(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function kn(r){var a=r[ot];return a||(a=r[ot]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Kt(r){r[kt]=!0}var mr=new Set,Wn={};function pr(r,a){Jn(r,a),Jn(r+"Capture",a)}function Jn(r,a){for(Wn[r]=a,r=0;r<a.length;r++)mr.add(a[r])}var Dr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Di={},Oi={};function ut(r){return Mt.call(Oi,r)?!0:Mt.call(Di,r)?!1:Dr.test(r)?Oi[r]=!0:(Di[r]=!0,!1)}function on(r,a,o){if(ut(a))if(o===null)r.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+o)}}function Tn(r,a,o){if(o===null)r.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+o)}}function Lt(r,a,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(a,o,""+u)}}function rt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Or(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ja(r,a,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,g=u.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return f.call(this)},set:function(E){o=""+E,g.call(this,E)}}),Object.defineProperty(r,a,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(E){o=""+E},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Rt(r){if(!r._valueTracker){var a=Or(r)?"checked":"value";r._valueTracker=ja(r,a,""+r[a])}}function Us(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return r&&(u=Or(r)?r.checked?"true":"false":r.value),r=u,r!==o?(a.setValue(r),!0):!1}function Mi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var zs=/[\n"\\]/g;function gr(r){return r.replace(zs,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Po(r,a,o,u,f,g,E,C){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),a!=null?E==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+rt(a)):r.value!==""+rt(a)&&(r.value=""+rt(a)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),a!=null?uu(r,E,rt(a)):o!=null?uu(r,E,rt(o)):u!=null&&r.removeAttribute("value"),f==null&&g!=null&&(r.defaultChecked=!!g),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+rt(C):r.removeAttribute("name")}function lh(r,a,o,u,f,g,E,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),a!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||a!=null)){Rt(r);return}o=o!=null?""+rt(o):"",a=a!=null?""+rt(a):o,C||a===r.value||(r.value=a),r.defaultValue=a}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E),Rt(r)}function uu(r,a,o){a==="number"&&Mi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ua(r,a,o,u){if(r=r.options,a){a={};for(var f=0;f<o.length;f++)a["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=a.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+rt(o),a=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}a!==null||r[f].disabled||(a=r[f])}a!==null&&(a.selected=!0)}}function uh(r,a,o){if(a!=null&&(a=""+rt(a),a!==r.value&&(r.value=a),o==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=o!=null?""+rt(o):""}function za(r,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(i(92));if(me(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=rt(a),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),Rt(r)}function yr(r,a){if(a){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=a;return}}r.textContent=a}var ch=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cu(r,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":u?r.setProperty(a,o):typeof o!="number"||o===0||ch.has(a)?a==="float"?r.cssFloat=o:r[a]=(""+o).trim():r[a]=o+"px"}function hu(r,a,o){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in a)u=a[f],a.hasOwnProperty(f)&&o[f]!==u&&cu(r,f,u)}else for(var g in a)a.hasOwnProperty(g)&&cu(r,g,a[g])}function Vo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ba=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ko(r){return Ba.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function fi(){}var fu=null;function Qr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ha=null,Pi=null;function Bs(r){var a=nt(r);if(a&&(r=a.stateNode)){var o=r[Re]||null;e:switch(r=a.stateNode,a.type){case"input":if(Po(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+gr(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==r&&u.form===r.form){var f=u[Re]||null;if(!f)throw Error(i(90));Po(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===r.form&&Us(u)}break e;case"textarea":uh(r,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&Ua(r,!!o.multiple,a,!1)}}}var Lo=!1;function Fa(r,a,o){if(Lo)return r(a,o);Lo=!0;try{var u=r(a);return u}finally{if(Lo=!1,(Ha!==null||Pi!==null)&&(af(),Ha&&(a=Ha,r=Pi,Pi=Ha=null,Bs(a),r)))for(a=0;a<r.length;a++)Bs(r[a])}}function di(r,a){var o=r.stateNode;if(o===null)return null;var u=o[Re]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,a,typeof o));return o}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hs=!1;if(Xr)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){Hs=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch{Hs=!1}var Vi=null,du=null,Fs=null;function mu(){if(Fs)return Fs;var r,a=du,o=a.length,u,f="value"in Vi?Vi.value:Vi.textContent,g=f.length;for(r=0;r<o&&a[r]===f[r];r++);var E=o-r;for(u=1;u<=E&&a[o-u]===f[g-u];u++);return Fs=f.slice(r,1<u?1-u:void 0)}function qs(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function ta(){return!0}function mi(){return!1}function Un(r){function a(o,u,f,g,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(o=r[C],this[C]=o?o(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ta:mi,this.isPropagationStopped=mi,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),a}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=Un(na),qa=v({},na,{view:0,detail:0}),pu=Un(qa),Ga,jo,Li,Uo=v({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Li&&(Li&&r.type==="mousemove"?(Ga=r.screenX-Li.screenX,jo=r.screenY-Li.screenY):jo=Ga=0,Li=r),Ga)},movementY:function(r){return"movementY"in r?r.movementY:jo}}),gu=Un(Uo),Gs=v({},Uo,{dataTransfer:0}),fh=Un(Gs),dh=v({},qa,{relatedTarget:0}),$s=Un(dh),yu=v({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),mh=Un(yu),zo=v({},na,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ph=Un(zo),gh=v({},na,{data:0}),ji=Un(gh),yh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_h={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eh(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=vh[r])?!!a[r]:!1}function $a(){return Eh}var lr=v({},qa,{key:function(r){if(r.key){var a=yh[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=qs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?_h[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(r){return r.type==="keypress"?qs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?qs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Th=Un(lr),bh=v({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ra=Un(bh),h=v({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),_=Un(h),b=v({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=Un(b),Y=v({},Uo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=Un(Y),Ce=v({},na,{newState:0,oldState:0}),et=Un(Ce),gn=[9,13,27,32],It=Xr&&"CompositionEvent"in window,tn=null;Xr&&"documentMode"in document&&(tn=document.documentMode);var Wr=Xr&&"TextEvent"in window&&!tn,Ui=Xr&&(!It||tn&&8<tn&&11>=tn),pi=" ",gi=!1;function Ks(r,a){switch(r){case"keyup":return gn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ho=!1;function XC(r,a){switch(r){case"compositionend":return Bo(a);case"keypress":return a.which!==32?null:(gi=!0,pi);case"textInput":return r=a.data,r===pi&&gi?null:r;default:return null}}function WC(r,a){if(Ho)return r==="compositionend"||!It&&Ks(r,a)?(r=mu(),Fs=du=Vi=null,Ho=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ui&&a.locale!=="ko"?null:a.data;default:return null}}var JC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nv(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!JC[r.type]:a==="textarea"}function rv(r,a,o,u){Ha?Pi?Pi.push(u):Pi=[u]:Ha=u,a=ff(a,"onChange"),0<a.length&&(o=new ki("onChange","change",null,o,u),r.push({event:o,listeners:a}))}var _u=null,vu=null;function ZC(r){UT(r,0)}function Sh(r){var a=$t(r);if(Us(a))return r}function iv(r,a){if(r==="change")return a}var av=!1;if(Xr){var Rm;if(Xr){var Im="oninput"in document;if(!Im){var sv=document.createElement("div");sv.setAttribute("oninput","return;"),Im=typeof sv.oninput=="function"}Rm=Im}else Rm=!1;av=Rm&&(!document.documentMode||9<document.documentMode)}function ov(){_u&&(_u.detachEvent("onpropertychange",lv),vu=_u=null)}function lv(r){if(r.propertyName==="value"&&Sh(vu)){var a=[];rv(a,vu,r,Qr(r)),Fa(ZC,a)}}function eR(r,a,o){r==="focusin"?(ov(),_u=a,vu=o,_u.attachEvent("onpropertychange",lv)):r==="focusout"&&ov()}function tR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Sh(vu)}function nR(r,a){if(r==="click")return Sh(a)}function rR(r,a){if(r==="input"||r==="change")return Sh(a)}function iR(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Mr=typeof Object.is=="function"?Object.is:iR;function Eu(r,a){if(Mr(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var o=Object.keys(r),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Mt.call(a,f)||!Mr(r[f],a[f]))return!1}return!0}function uv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function cv(r,a){var o=uv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=a&&u>=a)return{node:o,offset:a-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=uv(o)}}function hv(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?hv(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function fv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Mi(r.document);a instanceof r.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)r=a.contentWindow;else break;a=Mi(r.document)}return a}function xm(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var aR=Xr&&"documentMode"in document&&11>=document.documentMode,Fo=null,Nm=null,Tu=null,Dm=!1;function dv(r,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Dm||Fo==null||Fo!==Mi(u)||(u=Fo,"selectionStart"in u&&xm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Tu&&Eu(Tu,u)||(Tu=u,u=ff(Nm,"onSelect"),0<u.length&&(a=new ki("onSelect","select",null,a,o),r.push({event:a,listeners:u}),a.target=Fo)))}function Ys(r,a){var o={};return o[r.toLowerCase()]=a.toLowerCase(),o["Webkit"+r]="webkit"+a,o["Moz"+r]="moz"+a,o}var qo={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},Om={},mv={};Xr&&(mv=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Qs(r){if(Om[r])return Om[r];if(!qo[r])return r;var a=qo[r],o;for(o in a)if(a.hasOwnProperty(o)&&o in mv)return Om[r]=a[o];return r}var pv=Qs("animationend"),gv=Qs("animationiteration"),yv=Qs("animationstart"),sR=Qs("transitionrun"),oR=Qs("transitionstart"),lR=Qs("transitioncancel"),_v=Qs("transitionend"),vv=new Map,Mm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mm.push("scrollEnd");function yi(r,a){vv.set(r,a),pr(a,[r])}var Ah=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Jr=[],Go=0,Pm=0;function wh(){for(var r=Go,a=Pm=Go=0;a<r;){var o=Jr[a];Jr[a++]=null;var u=Jr[a];Jr[a++]=null;var f=Jr[a];Jr[a++]=null;var g=Jr[a];if(Jr[a++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}g!==0&&Ev(o,f,g)}}function Ch(r,a,o,u){Jr[Go++]=r,Jr[Go++]=a,Jr[Go++]=o,Jr[Go++]=u,Pm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Vm(r,a,o,u){return Ch(r,a,o,u),Rh(r)}function Xs(r,a){return Ch(r,null,null,a),Rh(r)}function Ev(r,a,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=r.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(f=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,f&&a!==null&&(f=31-Ge(o),r=g.hiddenUpdates,u=r[f],u===null?r[f]=[a]:u.push(a),a.lane=o|536870912),g):null}function Rh(r){if(50<Fu)throw Fu=0,qp=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var $o={};function uR(r,a,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(r,a,o,u){return new uR(r,a,o,u)}function km(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ia(r,a){var o=r.alternate;return o===null?(o=Pr(r.tag,a,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=a,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,a=r.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Tv(r,a){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,a=o.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Ih(r,a,o,u,f,g){var E=0;if(u=r,typeof r=="function")km(r)&&(E=1);else if(typeof r=="string")E=mI(r,o,ae.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=Pr(31,o,a,f),r.elementType=R,r.lanes=g,r;case z:return Ws(o.children,f,g,a);case j:E=8,f|=24;break;case G:return r=Pr(12,o,a,f|2),r.elementType=G,r.lanes=g,r;case se:return r=Pr(13,o,a,f),r.elementType=se,r.lanes=g,r;case ee:return r=Pr(19,o,a,f),r.elementType=ee,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case K:E=10;break e;case H:E=9;break e;case te:E=11;break e;case A:E=14;break e;case I:E=16,u=null;break e}E=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return a=Pr(E,o,a,f),a.elementType=r,a.type=u,a.lanes=g,a}function Ws(r,a,o,u){return r=Pr(7,r,u,a),r.lanes=o,r}function Lm(r,a,o){return r=Pr(6,r,null,a),r.lanes=o,r}function bv(r){var a=Pr(18,null,null,0);return a.stateNode=r,a}function jm(r,a,o){return a=Pr(4,r.children!==null?r.children:[],r.key,a),a.lanes=o,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Sv=new WeakMap;function Zr(r,a){if(typeof r=="object"&&r!==null){var o=Sv.get(r);return o!==void 0?o:(a={value:r,source:a,stack:Ir(a)},Sv.set(r,a),a)}return{value:r,source:a,stack:Ir(a)}}var Ko=[],Yo=0,xh=null,bu=0,ei=[],ti=0,Ka=null,zi=1,Bi="";function aa(r,a){Ko[Yo++]=bu,Ko[Yo++]=xh,xh=r,bu=a}function Av(r,a,o){ei[ti++]=zi,ei[ti++]=Bi,ei[ti++]=Ka,Ka=r;var u=zi;r=Bi;var f=32-Ge(u)-1;u&=~(1<<f),o+=1;var g=32-Ge(a)+f;if(30<g){var E=f-f%5;g=(u&(1<<E)-1).toString(32),u>>=E,f-=E,zi=1<<32-Ge(a)+f|o<<f|u,Bi=g+r}else zi=1<<g|o<<f|u,Bi=r}function Um(r){r.return!==null&&(aa(r,1),Av(r,1,0))}function zm(r){for(;r===xh;)xh=Ko[--Yo],Ko[Yo]=null,bu=Ko[--Yo],Ko[Yo]=null;for(;r===Ka;)Ka=ei[--ti],ei[ti]=null,Bi=ei[--ti],ei[ti]=null,zi=ei[--ti],ei[ti]=null}function wv(r,a){ei[ti++]=zi,ei[ti++]=Bi,ei[ti++]=Ka,zi=a.id,Bi=a.overflow,Ka=r}var zn=null,Xt=null,vt=!1,Ya=null,ni=!1,Bm=Error(i(519));function Qa(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Su(Zr(a,r)),Bm}function Cv(r){var a=r.stateNode,o=r.type,u=r.memoizedProps;switch(a[we]=r,a[Re]=u,o){case"dialog":ht("cancel",a),ht("close",a);break;case"iframe":case"object":case"embed":ht("load",a);break;case"video":case"audio":for(o=0;o<Gu.length;o++)ht(Gu[o],a);break;case"source":ht("error",a);break;case"img":case"image":case"link":ht("error",a),ht("load",a);break;case"details":ht("toggle",a);break;case"input":ht("invalid",a),lh(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ht("invalid",a);break;case"textarea":ht("invalid",a),za(a,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||FT(a.textContent,o)?(u.popover!=null&&(ht("beforetoggle",a),ht("toggle",a)),u.onScroll!=null&&ht("scroll",a),u.onScrollEnd!=null&&ht("scrollend",a),u.onClick!=null&&(a.onclick=fi),a=!0):a=!1,a||Qa(r,!0)}function Rv(r){for(zn=r.return;zn;)switch(zn.tag){case 5:case 31:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:zn=zn.return}}function Qo(r){if(r!==zn)return!1;if(!vt)return Rv(r),vt=!0,!1;var a=r.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||ag(r.type,r.memoizedProps)),o=!o),o&&Xt&&Qa(r),Rv(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Xt=JT(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Xt=JT(r)}else a===27?(a=Xt,us(r.type)?(r=cg,cg=null,Xt=r):Xt=a):Xt=zn?ii(r.stateNode.nextSibling):null;return!0}function Js(){Xt=zn=null,vt=!1}function Hm(){var r=Ya;return r!==null&&(Tr===null?Tr=r:Tr.push.apply(Tr,r),Ya=null),r}function Su(r){Ya===null?Ya=[r]:Ya.push(r)}var Fm=L(null),Zs=null,sa=null;function Xa(r,a,o){ve(Fm,a._currentValue),a._currentValue=o}function oa(r){r._currentValue=Fm.current,re(Fm)}function qm(r,a,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),r===o)break;r=r.return}}function Gm(r,a,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=f;for(var U=0;U<a.length;U++)if(C.context===a[U]){g.lanes|=o,C=g.alternate,C!==null&&(C.lanes|=o),qm(g.return,o,r),u||(E=null);break e}g=C.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),qm(E,o,r),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===r){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Xo(r,a,o,u){r=null;for(var f=a,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var C=f.type;Mr(f.pendingProps.value,E.value)||(r!==null?r.push(C):r=[C])}}else if(f===Ne.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Xu):r=[Xu])}f=f.return}r!==null&&Gm(a,r,o,u),a.flags|=262144}function Nh(r){for(r=r.firstContext;r!==null;){if(!Mr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function eo(r){Zs=r,sa=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Bn(r){return Iv(Zs,r)}function Dh(r,a){return Zs===null&&eo(r),Iv(r,a)}function Iv(r,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},sa===null){if(r===null)throw Error(i(308));sa=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else sa=sa.next=a;return o}var cR=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){a.aborted=!0,r.forEach(function(o){return o()})}},hR=n.unstable_scheduleCallback,fR=n.unstable_NormalPriority,bn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $m(){return{controller:new cR,data:new Map,refCount:0}}function Au(r){r.refCount--,r.refCount===0&&hR(fR,function(){r.controller.abort()})}var wu=null,Km=0,Wo=0,Jo=null;function dR(r,a){if(wu===null){var o=wu=[];Km=0,Wo=Xp(),Jo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Km++,a.then(xv,xv),a}function xv(){if(--Km===0&&wu!==null){Jo!==null&&(Jo.status="fulfilled");var r=wu;wu=null,Wo=0,Jo=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function mR(r,a){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=a;for(var f=0;f<o.length;f++)(0,o[f])(a)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Nv=B.S;B.S=function(r,a){dT=Ft(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&dR(r,a),Nv!==null&&Nv(r,a)};var to=L(null);function Ym(){var r=to.current;return r!==null?r:qt.pooledCache}function Oh(r,a){a===null?ve(to,to.current):ve(to,a.pool)}function Dv(){var r=Ym();return r===null?null:{parent:bn._currentValue,pool:r}}var Zo=Error(i(460)),Qm=Error(i(474)),Mh=Error(i(542)),Ph={then:function(){}};function Ov(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Mv(r,a,o){switch(o=r[o],o===void 0?r.push(a):o!==a&&(a.then(fi,fi),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Vv(r),r;default:if(typeof a.status=="string")a.then(fi,fi);else{if(r=qt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(u){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=u}},function(u){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Vv(r),r}throw ro=a,Zo}}function no(r){try{var a=r._init;return a(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ro=o,Zo):o}}var ro=null;function Pv(){if(ro===null)throw Error(i(459));var r=ro;return ro=null,r}function Vv(r){if(r===Zo||r===Mh)throw Error(i(483))}var el=null,Cu=0;function Vh(r){var a=Cu;return Cu+=1,el===null&&(el=[]),Mv(el,r,a)}function Ru(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function kh(r,a){throw a.$$typeof===S?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function kv(r){function a($,F){if(r){var Q=$.deletions;Q===null?($.deletions=[F],$.flags|=16):Q.push(F)}}function o($,F){if(!r)return null;for(;F!==null;)a($,F),F=F.sibling;return null}function u($){for(var F=new Map;$!==null;)$.key!==null?F.set($.key,$):F.set($.index,$),$=$.sibling;return F}function f($,F){return $=ia($,F),$.index=0,$.sibling=null,$}function g($,F,Q){return $.index=Q,r?(Q=$.alternate,Q!==null?(Q=Q.index,Q<F?($.flags|=67108866,F):Q):($.flags|=67108866,F)):($.flags|=1048576,F)}function E($){return r&&$.alternate===null&&($.flags|=67108866),$}function C($,F,Q,he){return F===null||F.tag!==6?(F=Lm(Q,$.mode,he),F.return=$,F):(F=f(F,Q),F.return=$,F)}function U($,F,Q,he){var Be=Q.type;return Be===z?oe($,F,Q.props.children,he,Q.key):F!==null&&(F.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===I&&no(Be)===F.type)?(F=f(F,Q.props),Ru(F,Q),F.return=$,F):(F=Ih(Q.type,Q.key,Q.props,null,$.mode,he),Ru(F,Q),F.return=$,F)}function X($,F,Q,he){return F===null||F.tag!==4||F.stateNode.containerInfo!==Q.containerInfo||F.stateNode.implementation!==Q.implementation?(F=jm(Q,$.mode,he),F.return=$,F):(F=f(F,Q.children||[]),F.return=$,F)}function oe($,F,Q,he,Be){return F===null||F.tag!==7?(F=Ws(Q,$.mode,he,Be),F.return=$,F):(F=f(F,Q),F.return=$,F)}function de($,F,Q){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Lm(""+F,$.mode,Q),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return Q=Ih(F.type,F.key,F.props,null,$.mode,Q),Ru(Q,F),Q.return=$,Q;case O:return F=jm(F,$.mode,Q),F.return=$,F;case I:return F=no(F),de($,F,Q)}if(me(F)||V(F))return F=Ws(F,$.mode,Q,null),F.return=$,F;if(typeof F.then=="function")return de($,Vh(F),Q);if(F.$$typeof===K)return de($,Dh($,F),Q);kh($,F)}return null}function Z($,F,Q,he){var Be=F!==null?F.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Be!==null?null:C($,F,""+Q,he);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:return Q.key===Be?U($,F,Q,he):null;case O:return Q.key===Be?X($,F,Q,he):null;case I:return Q=no(Q),Z($,F,Q,he)}if(me(Q)||V(Q))return Be!==null?null:oe($,F,Q,he,null);if(typeof Q.then=="function")return Z($,F,Vh(Q),he);if(Q.$$typeof===K)return Z($,F,Dh($,Q),he);kh($,Q)}return null}function ie($,F,Q,he,Be){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return $=$.get(Q)||null,C(F,$,""+he,Be);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case w:return $=$.get(he.key===null?Q:he.key)||null,U(F,$,he,Be);case O:return $=$.get(he.key===null?Q:he.key)||null,X(F,$,he,Be);case I:return he=no(he),ie($,F,Q,he,Be)}if(me(he)||V(he))return $=$.get(Q)||null,oe(F,$,he,Be,null);if(typeof he.then=="function")return ie($,F,Q,Vh(he),Be);if(he.$$typeof===K)return ie($,F,Q,Dh(F,he),Be);kh(F,he)}return null}function Le($,F,Q,he){for(var Be=null,St=null,Ue=F,it=F=0,mt=null;Ue!==null&&it<Q.length;it++){Ue.index>it?(mt=Ue,Ue=null):mt=Ue.sibling;var At=Z($,Ue,Q[it],he);if(At===null){Ue===null&&(Ue=mt);break}r&&Ue&&At.alternate===null&&a($,Ue),F=g(At,F,it),St===null?Be=At:St.sibling=At,St=At,Ue=mt}if(it===Q.length)return o($,Ue),vt&&aa($,it),Be;if(Ue===null){for(;it<Q.length;it++)Ue=de($,Q[it],he),Ue!==null&&(F=g(Ue,F,it),St===null?Be=Ue:St.sibling=Ue,St=Ue);return vt&&aa($,it),Be}for(Ue=u(Ue);it<Q.length;it++)mt=ie(Ue,$,it,Q[it],he),mt!==null&&(r&&mt.alternate!==null&&Ue.delete(mt.key===null?it:mt.key),F=g(mt,F,it),St===null?Be=mt:St.sibling=mt,St=mt);return r&&Ue.forEach(function(ms){return a($,ms)}),vt&&aa($,it),Be}function qe($,F,Q,he){if(Q==null)throw Error(i(151));for(var Be=null,St=null,Ue=F,it=F=0,mt=null,At=Q.next();Ue!==null&&!At.done;it++,At=Q.next()){Ue.index>it?(mt=Ue,Ue=null):mt=Ue.sibling;var ms=Z($,Ue,At.value,he);if(ms===null){Ue===null&&(Ue=mt);break}r&&Ue&&ms.alternate===null&&a($,Ue),F=g(ms,F,it),St===null?Be=ms:St.sibling=ms,St=ms,Ue=mt}if(At.done)return o($,Ue),vt&&aa($,it),Be;if(Ue===null){for(;!At.done;it++,At=Q.next())At=de($,At.value,he),At!==null&&(F=g(At,F,it),St===null?Be=At:St.sibling=At,St=At);return vt&&aa($,it),Be}for(Ue=u(Ue);!At.done;it++,At=Q.next())At=ie(Ue,$,it,At.value,he),At!==null&&(r&&At.alternate!==null&&Ue.delete(At.key===null?it:At.key),F=g(At,F,it),St===null?Be=At:St.sibling=At,St=At);return r&&Ue.forEach(function(wI){return a($,wI)}),vt&&aa($,it),Be}function Bt($,F,Q,he){if(typeof Q=="object"&&Q!==null&&Q.type===z&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:e:{for(var Be=Q.key;F!==null;){if(F.key===Be){if(Be=Q.type,Be===z){if(F.tag===7){o($,F.sibling),he=f(F,Q.props.children),he.return=$,$=he;break e}}else if(F.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===I&&no(Be)===F.type){o($,F.sibling),he=f(F,Q.props),Ru(he,Q),he.return=$,$=he;break e}o($,F);break}else a($,F);F=F.sibling}Q.type===z?(he=Ws(Q.props.children,$.mode,he,Q.key),he.return=$,$=he):(he=Ih(Q.type,Q.key,Q.props,null,$.mode,he),Ru(he,Q),he.return=$,$=he)}return E($);case O:e:{for(Be=Q.key;F!==null;){if(F.key===Be)if(F.tag===4&&F.stateNode.containerInfo===Q.containerInfo&&F.stateNode.implementation===Q.implementation){o($,F.sibling),he=f(F,Q.children||[]),he.return=$,$=he;break e}else{o($,F);break}else a($,F);F=F.sibling}he=jm(Q,$.mode,he),he.return=$,$=he}return E($);case I:return Q=no(Q),Bt($,F,Q,he)}if(me(Q))return Le($,F,Q,he);if(V(Q)){if(Be=V(Q),typeof Be!="function")throw Error(i(150));return Q=Be.call(Q),qe($,F,Q,he)}if(typeof Q.then=="function")return Bt($,F,Vh(Q),he);if(Q.$$typeof===K)return Bt($,F,Dh($,Q),he);kh($,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,F!==null&&F.tag===6?(o($,F.sibling),he=f(F,Q),he.return=$,$=he):(o($,F),he=Lm(Q,$.mode,he),he.return=$,$=he),E($)):o($,F)}return function($,F,Q,he){try{Cu=0;var Be=Bt($,F,Q,he);return el=null,Be}catch(Ue){if(Ue===Zo||Ue===Mh)throw Ue;var St=Pr(29,Ue,null,$.mode);return St.lanes=he,St.return=$,St}finally{}}}var io=kv(!0),Lv=kv(!1),Wa=!1;function Xm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wm(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ja(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Za(r,a,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(xt&2)!==0){var f=u.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),u.pending=a,a=Rh(r),Ev(r,null,o),a}return Ch(r,u,a,o),Rh(r)}function Iu(r,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=r.pendingLanes,o|=u,a.lanes=o,k(r,o)}}function Jm(r,a){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=a:g=g.next=a}else f=g=a;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=a:r.next=a,o.lastBaseUpdate=a}var Zm=!1;function xu(){if(Zm){var r=Jo;if(r!==null)throw r}}function Nu(r,a,o,u){Zm=!1;var f=r.updateQueue;Wa=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var U=C,X=U.next;U.next=null,E===null?g=X:E.next=X,E=U;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,C=oe.lastBaseUpdate,C!==E&&(C===null?oe.firstBaseUpdate=X:C.next=X,oe.lastBaseUpdate=U))}if(g!==null){var de=f.baseState;E=0,oe=X=U=null,C=g;do{var Z=C.lane&-536870913,ie=Z!==C.lane;if(ie?(dt&Z)===Z:(u&Z)===Z){Z!==0&&Z===Wo&&(Zm=!0),oe!==null&&(oe=oe.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Le=r,qe=C;Z=a;var Bt=o;switch(qe.tag){case 1:if(Le=qe.payload,typeof Le=="function"){de=Le.call(Bt,de,Z);break e}de=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=qe.payload,Z=typeof Le=="function"?Le.call(Bt,de,Z):Le,Z==null)break e;de=v({},de,Z);break e;case 2:Wa=!0}}Z=C.callback,Z!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[Z]:ie.push(Z))}else ie={lane:Z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},oe===null?(X=oe=ie,U=de):oe=oe.next=ie,E|=Z;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;ie=C,C=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);oe===null&&(U=de),f.baseState=U,f.firstBaseUpdate=X,f.lastBaseUpdate=oe,g===null&&(f.shared.lanes=0),is|=E,r.lanes=E,r.memoizedState=de}}function jv(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function Uv(r,a){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)jv(o[r],a)}var tl=L(null),Lh=L(0);function zv(r,a){r=ga,ve(Lh,r),ve(tl,a),ga=r|a.baseLanes}function ep(){ve(Lh,ga),ve(tl,tl.current)}function tp(){ga=Lh.current,re(tl),re(Lh)}var Vr=L(null),ri=null;function es(r){var a=r.alternate;ve(yn,yn.current&1),ve(Vr,r),ri===null&&(a===null||tl.current!==null||a.memoizedState!==null)&&(ri=r)}function np(r){ve(yn,yn.current),ve(Vr,r),ri===null&&(ri=r)}function Bv(r){r.tag===22?(ve(yn,yn.current),ve(Vr,r),ri===null&&(ri=r)):ts()}function ts(){ve(yn,yn.current),ve(Vr,Vr.current)}function kr(r){re(Vr),ri===r&&(ri=null),re(yn)}var yn=L(0);function jh(r){for(var a=r;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||lg(o)||ug(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var la=0,tt=null,Ut=null,Sn=null,Uh=!1,nl=!1,ao=!1,zh=0,Du=0,rl=null,pR=0;function hn(){throw Error(i(321))}function rp(r,a){if(a===null)return!1;for(var o=0;o<a.length&&o<r.length;o++)if(!Mr(r[o],a[o]))return!1;return!0}function ip(r,a,o,u,f,g){return la=g,tt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,B.H=r===null||r.memoizedState===null?AE:vp,ao=!1,g=o(u,f),ao=!1,nl&&(g=Fv(a,o,u,f)),Hv(r),g}function Hv(r){B.H=Pu;var a=Ut!==null&&Ut.next!==null;if(la=0,Sn=Ut=tt=null,Uh=!1,Du=0,rl=null,a)throw Error(i(300));r===null||An||(r=r.dependencies,r!==null&&Nh(r)&&(An=!0))}function Fv(r,a,o,u){tt=r;var f=0;do{if(nl&&(rl=null),Du=0,nl=!1,25<=f)throw Error(i(301));if(f+=1,Sn=Ut=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}B.H=wE,g=a(o,u)}while(nl);return g}function gR(){var r=B.H,a=r.useState()[0];return a=typeof a.then=="function"?Ou(a):a,r=r.useState()[0],(Ut!==null?Ut.memoizedState:null)!==r&&(tt.flags|=1024),a}function ap(){var r=zh!==0;return zh=0,r}function sp(r,a,o){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~o}function op(r){if(Uh){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Uh=!1}la=0,Sn=Ut=tt=null,nl=!1,Du=zh=0,rl=null}function ur(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?tt.memoizedState=Sn=r:Sn=Sn.next=r,Sn}function _n(){if(Ut===null){var r=tt.alternate;r=r!==null?r.memoizedState:null}else r=Ut.next;var a=Sn===null?tt.memoizedState:Sn.next;if(a!==null)Sn=a,Ut=r;else{if(r===null)throw tt.alternate===null?Error(i(467)):Error(i(310));Ut=r,r={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Sn===null?tt.memoizedState=Sn=r:Sn=Sn.next=r}return Sn}function Bh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ou(r){var a=Du;return Du+=1,rl===null&&(rl=[]),r=Mv(rl,r,a),a=tt,(Sn===null?a.memoizedState:Sn.next)===null&&(a=a.alternate,B.H=a===null||a.memoizedState===null?AE:vp),r}function Hh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ou(r);if(r.$$typeof===K)return Bn(r)}throw Error(i(438,String(r)))}function lp(r){var a=null,o=tt.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=tt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=Bh(),tt.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(r),u=0;u<r;u++)o[u]=N;return a.index++,o}function ua(r,a){return typeof a=="function"?a(r):a}function Fh(r){var a=_n();return up(a,Ut,r)}function up(r,a,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=r.baseQueue,g=u.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}a.baseQueue=f=g,u.pending=null}if(g=r.baseState,f===null)r.memoizedState=g;else{a=f.next;var C=E=null,U=null,X=a,oe=!1;do{var de=X.lane&-536870913;if(de!==X.lane?(dt&de)===de:(la&de)===de){var Z=X.revertLane;if(Z===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),de===Wo&&(oe=!0);else if((la&Z)===Z){X=X.next,Z===Wo&&(oe=!0);continue}else de={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(C=U=de,E=g):U=U.next=de,tt.lanes|=Z,is|=Z;de=X.action,ao&&o(g,de),g=X.hasEagerState?X.eagerState:o(g,de)}else Z={lane:de,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(C=U=Z,E=g):U=U.next=Z,tt.lanes|=de,is|=de;X=X.next}while(X!==null&&X!==a);if(U===null?E=g:U.next=C,!Mr(g,r.memoizedState)&&(An=!0,oe&&(o=Jo,o!==null)))throw o;r.memoizedState=g,r.baseState=E,r.baseQueue=U,u.lastRenderedState=g}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function cp(r){var a=_n(),o=a.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,g=a.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=r(g,E.action),E=E.next;while(E!==f);Mr(g,a.memoizedState)||(An=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),o.lastRenderedState=g}return[g,u]}function qv(r,a,o){var u=tt,f=_n(),g=vt;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=a();var E=!Mr((Ut||f).memoizedState,o);if(E&&(f.memoizedState=o,An=!0),f=f.queue,dp(Kv.bind(null,u,f,r),[r]),f.getSnapshot!==a||E||Sn!==null&&Sn.memoizedState.tag&1){if(u.flags|=2048,il(9,{destroy:void 0},$v.bind(null,u,f,o,a),null),qt===null)throw Error(i(349));g||(la&127)!==0||Gv(u,a,o)}return o}function Gv(r,a,o){r.flags|=16384,r={getSnapshot:a,value:o},a=tt.updateQueue,a===null?(a=Bh(),tt.updateQueue=a,a.stores=[r]):(o=a.stores,o===null?a.stores=[r]:o.push(r))}function $v(r,a,o,u){a.value=o,a.getSnapshot=u,Yv(a)&&Qv(r)}function Kv(r,a,o){return o(function(){Yv(a)&&Qv(r)})}function Yv(r){var a=r.getSnapshot;r=r.value;try{var o=a();return!Mr(r,o)}catch{return!0}}function Qv(r){var a=Xs(r,2);a!==null&&br(a,r,2)}function hp(r){var a=ur();if(typeof r=="function"){var o=r;if(r=o(),ao){Ct(!0);try{o()}finally{Ct(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:r},a}function Xv(r,a,o,u){return r.baseState=o,up(r,Ut,typeof u=="function"?u:ua)}function yR(r,a,o,u,f){if($h(r))throw Error(i(485));if(r=a.action,r!==null){var g={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};B.T!==null?o(!0):g.isTransition=!1,u(g),o=a.pending,o===null?(g.next=a.pending=g,Wv(a,g)):(g.next=o.next,a.pending=o.next=g)}}function Wv(r,a){var o=a.action,u=a.payload,f=r.state;if(a.isTransition){var g=B.T,E={};B.T=E;try{var C=o(f,u),U=B.S;U!==null&&U(E,C),Jv(r,a,C)}catch(X){fp(r,a,X)}finally{g!==null&&E.types!==null&&(g.types=E.types),B.T=g}}else try{g=o(f,u),Jv(r,a,g)}catch(X){fp(r,a,X)}}function Jv(r,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Zv(r,a,u)},function(u){return fp(r,a,u)}):Zv(r,a,o)}function Zv(r,a,o){a.status="fulfilled",a.value=o,eE(a),r.state=o,a=r.pending,a!==null&&(o=a.next,o===a?r.pending=null:(o=o.next,a.next=o,Wv(r,o)))}function fp(r,a,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,eE(a),a=a.next;while(a!==u)}r.action=null}function eE(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function tE(r,a){return a}function nE(r,a){if(vt){var o=qt.formState;if(o!==null){e:{var u=tt;if(vt){if(Xt){t:{for(var f=Xt,g=ni;f.nodeType!==8;){if(!g){f=null;break t}if(f=ii(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){Xt=ii(f.nextSibling),u=f.data==="F!";break e}}Qa(u)}u=!1}u&&(a=o[0])}}return o=ur(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tE,lastRenderedState:a},o.queue=u,o=TE.bind(null,tt,u),u.dispatch=o,u=hp(!1),g=_p.bind(null,tt,!1,u.queue),u=ur(),f={state:a,dispatch:null,action:r,pending:null},u.queue=f,o=yR.bind(null,tt,f,g,o),f.dispatch=o,u.memoizedState=r,[a,o,!1]}function rE(r){var a=_n();return iE(a,Ut,r)}function iE(r,a,o){if(a=up(r,a,tE)[0],r=Fh(ua)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Ou(a)}catch(E){throw E===Zo?Mh:E}else u=a;a=_n();var f=a.queue,g=f.dispatch;return o!==a.memoizedState&&(tt.flags|=2048,il(9,{destroy:void 0},_R.bind(null,f,o),null)),[u,g,r]}function _R(r,a){r.action=a}function aE(r){var a=_n(),o=Ut;if(o!==null)return iE(a,o,r);_n(),a=a.memoizedState,o=_n();var u=o.queue.dispatch;return o.memoizedState=r,[a,u,!1]}function il(r,a,o,u){return r={tag:r,create:o,deps:u,inst:a,next:null},a=tt.updateQueue,a===null&&(a=Bh(),tt.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,a.lastEffect=r),r}function sE(){return _n().memoizedState}function qh(r,a,o,u){var f=ur();tt.flags|=r,f.memoizedState=il(1|a,{destroy:void 0},o,u===void 0?null:u)}function Gh(r,a,o,u){var f=_n();u=u===void 0?null:u;var g=f.memoizedState.inst;Ut!==null&&u!==null&&rp(u,Ut.memoizedState.deps)?f.memoizedState=il(a,g,o,u):(tt.flags|=r,f.memoizedState=il(1|a,g,o,u))}function oE(r,a){qh(8390656,8,r,a)}function dp(r,a){Gh(2048,8,r,a)}function vR(r){tt.flags|=4;var a=tt.updateQueue;if(a===null)a=Bh(),tt.updateQueue=a,a.events=[r];else{var o=a.events;o===null?a.events=[r]:o.push(r)}}function lE(r){var a=_n().memoizedState;return vR({ref:a,nextImpl:r}),function(){if((xt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function uE(r,a){return Gh(4,2,r,a)}function cE(r,a){return Gh(4,4,r,a)}function hE(r,a){if(typeof a=="function"){r=r();var o=a(r);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function fE(r,a,o){o=o!=null?o.concat([r]):null,Gh(4,4,hE.bind(null,a,r),o)}function mp(){}function dE(r,a){var o=_n();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&rp(a,u[1])?u[0]:(o.memoizedState=[r,a],r)}function mE(r,a){var o=_n();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&rp(a,u[1]))return u[0];if(u=r(),ao){Ct(!0);try{r()}finally{Ct(!1)}}return o.memoizedState=[u,a],u}function pp(r,a,o){return o===void 0||(la&1073741824)!==0&&(dt&261930)===0?r.memoizedState=a:(r.memoizedState=o,r=pT(),tt.lanes|=r,is|=r,o)}function pE(r,a,o,u){return Mr(o,a)?o:tl.current!==null?(r=pp(r,o,u),Mr(r,a)||(An=!0),r):(la&42)===0||(la&1073741824)!==0&&(dt&261930)===0?(An=!0,r.memoizedState=o):(r=pT(),tt.lanes|=r,is|=r,a)}function gE(r,a,o,u,f){var g=J.p;J.p=g!==0&&8>g?g:8;var E=B.T,C={};B.T=C,_p(r,!1,a,o);try{var U=f(),X=B.S;if(X!==null&&X(C,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var oe=mR(U,u);Mu(r,a,oe,Ur(r))}else Mu(r,a,u,Ur(r))}catch(de){Mu(r,a,{then:function(){},status:"rejected",reason:de},Ur())}finally{J.p=g,E!==null&&C.types!==null&&(E.types=C.types),B.T=E}}function ER(){}function gp(r,a,o,u){if(r.tag!==5)throw Error(i(476));var f=yE(r).queue;gE(r,f,a,ue,o===null?ER:function(){return _E(r),o(u)})}function yE(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:ue},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:o},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function _E(r){var a=yE(r);a.next===null&&(a=r.alternate.memoizedState),Mu(r,a.next.queue,{},Ur())}function yp(){return Bn(Xu)}function vE(){return _n().memoizedState}function EE(){return _n().memoizedState}function TR(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var o=Ur();r=Ja(o);var u=Za(a,r,o);u!==null&&(br(u,a,o),Iu(u,a,o)),a={cache:$m()},r.payload=a;return}a=a.return}}function bR(r,a,o){var u=Ur();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},$h(r)?bE(a,o):(o=Vm(r,a,o,u),o!==null&&(br(o,r,u),SE(o,a,u)))}function TE(r,a,o){var u=Ur();Mu(r,a,o,u)}function Mu(r,a,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if($h(r))bE(a,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var E=a.lastRenderedState,C=g(E,o);if(f.hasEagerState=!0,f.eagerState=C,Mr(C,E))return Ch(r,a,f,0),qt===null&&wh(),!1}catch{}finally{}if(o=Vm(r,a,f,u),o!==null)return br(o,r,u),SE(o,a,u),!0}return!1}function _p(r,a,o,u){if(u={lane:2,revertLane:Xp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},$h(r)){if(a)throw Error(i(479))}else a=Vm(r,o,u,2),a!==null&&br(a,r,2)}function $h(r){var a=r.alternate;return r===tt||a!==null&&a===tt}function bE(r,a){nl=Uh=!0;var o=r.pending;o===null?a.next=a:(a.next=o.next,o.next=a),r.pending=a}function SE(r,a,o){if((o&4194048)!==0){var u=a.lanes;u&=r.pendingLanes,o|=u,a.lanes=o,k(r,o)}}var Pu={readContext:Bn,use:Hh,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn};Pu.useEffectEvent=hn;var AE={readContext:Bn,use:Hh,useCallback:function(r,a){return ur().memoizedState=[r,a===void 0?null:a],r},useContext:Bn,useEffect:oE,useImperativeHandle:function(r,a,o){o=o!=null?o.concat([r]):null,qh(4194308,4,hE.bind(null,a,r),o)},useLayoutEffect:function(r,a){return qh(4194308,4,r,a)},useInsertionEffect:function(r,a){qh(4,2,r,a)},useMemo:function(r,a){var o=ur();a=a===void 0?null:a;var u=r();if(ao){Ct(!0);try{r()}finally{Ct(!1)}}return o.memoizedState=[u,a],u},useReducer:function(r,a,o){var u=ur();if(o!==void 0){var f=o(a);if(ao){Ct(!0);try{o(a)}finally{Ct(!1)}}}else f=a;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=bR.bind(null,tt,r),[u.memoizedState,r]},useRef:function(r){var a=ur();return r={current:r},a.memoizedState=r},useState:function(r){r=hp(r);var a=r.queue,o=TE.bind(null,tt,a);return a.dispatch=o,[r.memoizedState,o]},useDebugValue:mp,useDeferredValue:function(r,a){var o=ur();return pp(o,r,a)},useTransition:function(){var r=hp(!1);return r=gE.bind(null,tt,r.queue,!0,!1),ur().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,o){var u=tt,f=ur();if(vt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=a(),qt===null)throw Error(i(349));(dt&127)!==0||Gv(u,a,o)}f.memoizedState=o;var g={value:o,getSnapshot:a};return f.queue=g,oE(Kv.bind(null,u,g,r),[r]),u.flags|=2048,il(9,{destroy:void 0},$v.bind(null,u,g,o,a),null),o},useId:function(){var r=ur(),a=qt.identifierPrefix;if(vt){var o=Bi,u=zi;o=(u&~(1<<32-Ge(u)-1)).toString(32)+o,a="_"+a+"R_"+o,o=zh++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=pR++,a="_"+a+"r_"+o.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:yp,useFormState:nE,useActionState:nE,useOptimistic:function(r){var a=ur();a.memoizedState=a.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=_p.bind(null,tt,!0,o),o.dispatch=a,[r,a]},useMemoCache:lp,useCacheRefresh:function(){return ur().memoizedState=TR.bind(null,tt)},useEffectEvent:function(r){var a=ur(),o={impl:r};return a.memoizedState=o,function(){if((xt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},vp={readContext:Bn,use:Hh,useCallback:dE,useContext:Bn,useEffect:dp,useImperativeHandle:fE,useInsertionEffect:uE,useLayoutEffect:cE,useMemo:mE,useReducer:Fh,useRef:sE,useState:function(){return Fh(ua)},useDebugValue:mp,useDeferredValue:function(r,a){var o=_n();return pE(o,Ut.memoizedState,r,a)},useTransition:function(){var r=Fh(ua)[0],a=_n().memoizedState;return[typeof r=="boolean"?r:Ou(r),a]},useSyncExternalStore:qv,useId:vE,useHostTransitionStatus:yp,useFormState:rE,useActionState:rE,useOptimistic:function(r,a){var o=_n();return Xv(o,Ut,r,a)},useMemoCache:lp,useCacheRefresh:EE};vp.useEffectEvent=lE;var wE={readContext:Bn,use:Hh,useCallback:dE,useContext:Bn,useEffect:dp,useImperativeHandle:fE,useInsertionEffect:uE,useLayoutEffect:cE,useMemo:mE,useReducer:cp,useRef:sE,useState:function(){return cp(ua)},useDebugValue:mp,useDeferredValue:function(r,a){var o=_n();return Ut===null?pp(o,r,a):pE(o,Ut.memoizedState,r,a)},useTransition:function(){var r=cp(ua)[0],a=_n().memoizedState;return[typeof r=="boolean"?r:Ou(r),a]},useSyncExternalStore:qv,useId:vE,useHostTransitionStatus:yp,useFormState:aE,useActionState:aE,useOptimistic:function(r,a){var o=_n();return Ut!==null?Xv(o,Ut,r,a):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:lp,useCacheRefresh:EE};wE.useEffectEvent=lE;function Ep(r,a,o,u){a=r.memoizedState,o=o(u,a),o=o==null?a:v({},a,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Tp={enqueueSetState:function(r,a,o){r=r._reactInternals;var u=Ur(),f=Ja(u);f.payload=a,o!=null&&(f.callback=o),a=Za(r,f,u),a!==null&&(br(a,r,u),Iu(a,r,u))},enqueueReplaceState:function(r,a,o){r=r._reactInternals;var u=Ur(),f=Ja(u);f.tag=1,f.payload=a,o!=null&&(f.callback=o),a=Za(r,f,u),a!==null&&(br(a,r,u),Iu(a,r,u))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var o=Ur(),u=Ja(o);u.tag=2,a!=null&&(u.callback=a),a=Za(r,u,o),a!==null&&(br(a,r,o),Iu(a,r,o))}};function CE(r,a,o,u,f,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,E):a.prototype&&a.prototype.isPureReactComponent?!Eu(o,u)||!Eu(f,g):!0}function RE(r,a,o,u){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==r&&Tp.enqueueReplaceState(a,a.state,null)}function so(r,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(r=r.defaultProps){o===a&&(o=v({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}function IE(r){Ah(r)}function xE(r){console.error(r)}function NE(r){Ah(r)}function Kh(r,a){try{var o=r.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function DE(r,a,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function bp(r,a,o){return o=Ja(o),o.tag=3,o.payload={element:null},o.callback=function(){Kh(r,a)},o}function OE(r){return r=Ja(r),r.tag=3,r}function ME(r,a,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;r.payload=function(){return f(g)},r.callback=function(){DE(a,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){DE(a,o,u),typeof f!="function"&&(as===null?as=new Set([this]):as.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function SR(r,a,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&Xo(a,o,f,!0),o=Vr.current,o!==null){switch(o.tag){case 31:case 13:return ri===null?sf():o.alternate===null&&fn===0&&(fn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Ph?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),Kp(r,u,f)),!1;case 22:return o.flags|=65536,u===Ph?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),Kp(r,u,f)),!1}throw Error(i(435,o.tag))}return Kp(r,u,f),sf(),!1}if(vt)return a=Vr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,u!==Bm&&(r=Error(i(422),{cause:u}),Su(Zr(r,o)))):(u!==Bm&&(a=Error(i(423),{cause:u}),Su(Zr(a,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Zr(u,o),f=bp(r.stateNode,u,f),Jm(r,f),fn!==4&&(fn=2)),!1;var g=Error(i(520),{cause:u});if(g=Zr(g,o),Hu===null?Hu=[g]:Hu.push(g),fn!==4&&(fn=2),a===null)return!0;u=Zr(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=bp(o.stateNode,u,r),Jm(o,r),!1;case 1:if(a=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(as===null||!as.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=OE(f),ME(f,r,o,u),Jm(o,f),!1}o=o.return}while(o!==null);return!1}var Sp=Error(i(461)),An=!1;function Hn(r,a,o,u){a.child=r===null?Lv(a,null,o,u):io(a,r.child,o,u)}function PE(r,a,o,u,f){o=o.render;var g=a.ref;if("ref"in u){var E={};for(var C in u)C!=="ref"&&(E[C]=u[C])}else E=u;return eo(a),u=ip(r,a,o,E,g,f),C=ap(),r!==null&&!An?(sp(r,a,f),ca(r,a,f)):(vt&&C&&Um(a),a.flags|=1,Hn(r,a,u,f),a.child)}function VE(r,a,o,u,f){if(r===null){var g=o.type;return typeof g=="function"&&!km(g)&&g.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=g,kE(r,a,g,u,f)):(r=Ih(o.type,null,u,a,a.mode,f),r.ref=a.ref,r.return=a,a.child=r)}if(g=r.child,!Dp(r,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:Eu,o(E,u)&&r.ref===a.ref)return ca(r,a,f)}return a.flags|=1,r=ia(g,u),r.ref=a.ref,r.return=a,a.child=r}function kE(r,a,o,u,f){if(r!==null){var g=r.memoizedProps;if(Eu(g,u)&&r.ref===a.ref)if(An=!1,a.pendingProps=u=g,Dp(r,f))(r.flags&131072)!==0&&(An=!0);else return a.lanes=r.lanes,ca(r,a,f)}return Ap(r,a,o,u,f)}function LE(r,a,o,u){var f=u.children,g=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,r!==null){for(u=a.child=r.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~g}else u=0,a.child=null;return jE(r,a,g,o,u)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Oh(a,g!==null?g.cachePool:null),g!==null?zv(a,g):ep(),Bv(a);else return u=a.lanes=536870912,jE(r,a,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(Oh(a,g.cachePool),zv(a,g),ts(),a.memoizedState=null):(r!==null&&Oh(a,null),ep(),ts());return Hn(r,a,f,o),a.child}function Vu(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function jE(r,a,o,u,f){var g=Ym();return g=g===null?null:{parent:bn._currentValue,pool:g},a.memoizedState={baseLanes:o,cachePool:g},r!==null&&Oh(a,null),ep(),Bv(a),r!==null&&Xo(r,a,u,!0),a.childLanes=f,null}function Yh(r,a){return a=Xh({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function UE(r,a,o){return io(a,r.child,null,o),r=Yh(a,a.pendingProps),r.flags|=2,kr(a),a.memoizedState=null,r}function AR(r,a,o){var u=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(vt){if(u.mode==="hidden")return r=Yh(a,u),a.lanes=536870912,Vu(null,r);if(np(a),(r=Xt)?(r=WT(r,ni),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Ka!==null?{id:zi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},o=bv(r),o.return=a,a.child=o,zn=a,Xt=null)):r=null,r===null)throw Qa(a);return a.lanes=536870912,null}return Yh(a,u)}var g=r.memoizedState;if(g!==null){var E=g.dehydrated;if(np(a),f)if(a.flags&256)a.flags&=-257,a=UE(r,a,o);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(An||Xo(r,a,o,!1),f=(o&r.childLanes)!==0,An||f){if(u=qt,u!==null&&(E=q(u,o),E!==0&&E!==g.retryLane))throw g.retryLane=E,Xs(r,E),br(u,r,E),Sp;sf(),a=UE(r,a,o)}else r=g.treeContext,Xt=ii(E.nextSibling),zn=a,vt=!0,Ya=null,ni=!1,r!==null&&wv(a,r),a=Yh(a,u),a.flags|=4096;return a}return r=ia(r.child,{mode:u.mode,children:u.children}),r.ref=a.ref,a.child=r,r.return=a,r}function Qh(r,a){var o=a.ref;if(o===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(a.flags|=4194816)}}function Ap(r,a,o,u,f){return eo(a),o=ip(r,a,o,u,void 0,f),u=ap(),r!==null&&!An?(sp(r,a,f),ca(r,a,f)):(vt&&u&&Um(a),a.flags|=1,Hn(r,a,o,f),a.child)}function zE(r,a,o,u,f,g){return eo(a),a.updateQueue=null,o=Fv(a,u,o,f),Hv(r),u=ap(),r!==null&&!An?(sp(r,a,g),ca(r,a,g)):(vt&&u&&Um(a),a.flags|=1,Hn(r,a,o,g),a.child)}function BE(r,a,o,u,f){if(eo(a),a.stateNode===null){var g=$o,E=o.contextType;typeof E=="object"&&E!==null&&(g=Bn(E)),g=new o(u,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Tp,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=u,g.state=a.memoizedState,g.refs={},Xm(a),E=o.contextType,g.context=typeof E=="object"&&E!==null?Bn(E):$o,g.state=a.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Ep(a,o,E,u),g.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&Tp.enqueueReplaceState(g,g.state,null),Nu(a,u,g,f),xu(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(r===null){g=a.stateNode;var C=a.memoizedProps,U=so(o,C);g.props=U;var X=g.context,oe=o.contextType;E=$o,typeof oe=="object"&&oe!==null&&(E=Bn(oe));var de=o.getDerivedStateFromProps;oe=typeof de=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,oe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||X!==E)&&RE(a,g,u,E),Wa=!1;var Z=a.memoizedState;g.state=Z,Nu(a,u,g,f),xu(),X=a.memoizedState,C||Z!==X||Wa?(typeof de=="function"&&(Ep(a,o,de,u),X=a.memoizedState),(U=Wa||CE(a,o,U,u,Z,X,E))?(oe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=X),g.props=u,g.state=X,g.context=E,u=U):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{g=a.stateNode,Wm(r,a),E=a.memoizedProps,oe=so(o,E),g.props=oe,de=a.pendingProps,Z=g.context,X=o.contextType,U=$o,typeof X=="object"&&X!==null&&(U=Bn(X)),C=o.getDerivedStateFromProps,(X=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==de||Z!==U)&&RE(a,g,u,U),Wa=!1,Z=a.memoizedState,g.state=Z,Nu(a,u,g,f),xu();var ie=a.memoizedState;E!==de||Z!==ie||Wa||r!==null&&r.dependencies!==null&&Nh(r.dependencies)?(typeof C=="function"&&(Ep(a,o,C,u),ie=a.memoizedState),(oe=Wa||CE(a,o,oe,u,Z,ie,U)||r!==null&&r.dependencies!==null&&Nh(r.dependencies))?(X||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,ie,U),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,ie,U)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&Z===r.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&Z===r.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ie),g.props=u,g.state=ie,g.context=U,u=oe):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&Z===r.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&Z===r.memoizedState||(a.flags|=1024),u=!1)}return g=u,Qh(r,a),u=(a.flags&128)!==0,g||u?(g=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,r!==null&&u?(a.child=io(a,r.child,null,f),a.child=io(a,null,o,f)):Hn(r,a,o,f),a.memoizedState=g.state,r=a.child):r=ca(r,a,f),r}function HE(r,a,o,u){return Js(),a.flags|=256,Hn(r,a,o,u),a.child}var wp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cp(r){return{baseLanes:r,cachePool:Dv()}}function Rp(r,a,o){return r=r!==null?r.childLanes&~o:0,a&&(r|=jr),r}function FE(r,a,o){var u=a.pendingProps,f=!1,g=(a.flags&128)!==0,E;if((E=g)||(E=r!==null&&r.memoizedState===null?!1:(yn.current&2)!==0),E&&(f=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,r===null){if(vt){if(f?es(a):ts(),(r=Xt)?(r=WT(r,ni),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Ka!==null?{id:zi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},o=bv(r),o.return=a,a.child=o,zn=a,Xt=null)):r=null,r===null)throw Qa(a);return ug(r)?a.lanes=32:a.lanes=536870912,null}var C=u.children;return u=u.fallback,f?(ts(),f=a.mode,C=Xh({mode:"hidden",children:C},f),u=Ws(u,f,o,null),C.return=a,u.return=a,C.sibling=u,a.child=C,u=a.child,u.memoizedState=Cp(o),u.childLanes=Rp(r,E,o),a.memoizedState=wp,Vu(null,u)):(es(a),Ip(a,C))}var U=r.memoizedState;if(U!==null&&(C=U.dehydrated,C!==null)){if(g)a.flags&256?(es(a),a.flags&=-257,a=xp(r,a,o)):a.memoizedState!==null?(ts(),a.child=r.child,a.flags|=128,a=null):(ts(),C=u.fallback,f=a.mode,u=Xh({mode:"visible",children:u.children},f),C=Ws(C,f,o,null),C.flags|=2,u.return=a,C.return=a,u.sibling=C,a.child=u,io(a,r.child,null,o),u=a.child,u.memoizedState=Cp(o),u.childLanes=Rp(r,E,o),a.memoizedState=wp,a=Vu(null,u));else if(es(a),ug(C)){if(E=C.nextSibling&&C.nextSibling.dataset,E)var X=E.dgst;E=X,u=Error(i(419)),u.stack="",u.digest=E,Su({value:u,source:null,stack:null}),a=xp(r,a,o)}else if(An||Xo(r,a,o,!1),E=(o&r.childLanes)!==0,An||E){if(E=qt,E!==null&&(u=q(E,o),u!==0&&u!==U.retryLane))throw U.retryLane=u,Xs(r,u),br(E,r,u),Sp;lg(C)||sf(),a=xp(r,a,o)}else lg(C)?(a.flags|=192,a.child=r.child,a=null):(r=U.treeContext,Xt=ii(C.nextSibling),zn=a,vt=!0,Ya=null,ni=!1,r!==null&&wv(a,r),a=Ip(a,u.children),a.flags|=4096);return a}return f?(ts(),C=u.fallback,f=a.mode,U=r.child,X=U.sibling,u=ia(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,X!==null?C=ia(X,C):(C=Ws(C,f,o,null),C.flags|=2),C.return=a,u.return=a,u.sibling=C,a.child=u,Vu(null,u),u=a.child,C=r.child.memoizedState,C===null?C=Cp(o):(f=C.cachePool,f!==null?(U=bn._currentValue,f=f.parent!==U?{parent:U,pool:U}:f):f=Dv(),C={baseLanes:C.baseLanes|o,cachePool:f}),u.memoizedState=C,u.childLanes=Rp(r,E,o),a.memoizedState=wp,Vu(r.child,u)):(es(a),o=r.child,r=o.sibling,o=ia(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,r!==null&&(E=a.deletions,E===null?(a.deletions=[r],a.flags|=16):E.push(r)),a.child=o,a.memoizedState=null,o)}function Ip(r,a){return a=Xh({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Xh(r,a){return r=Pr(22,r,null,a),r.lanes=0,r}function xp(r,a,o){return io(a,r.child,null,o),r=Ip(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function qE(r,a,o){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a),qm(r.return,a,o)}function Np(r,a,o,u,f,g){var E=r.memoizedState;E===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:g}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=u,E.tail=o,E.tailMode=f,E.treeForkCount=g)}function GE(r,a,o){var u=a.pendingProps,f=u.revealOrder,g=u.tail;u=u.children;var E=yn.current,C=(E&2)!==0;if(C?(E=E&1|2,a.flags|=128):E&=1,ve(yn,E),Hn(r,a,u,o),u=vt?bu:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&qE(r,o,a);else if(r.tag===19)qE(r,o,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(f){case"forwards":for(o=a.child,f=null;o!==null;)r=o.alternate,r!==null&&jh(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=a.child,a.child=null):(f=o.sibling,o.sibling=null),Np(a,!1,f,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=a.child,a.child=null;f!==null;){if(r=f.alternate,r!==null&&jh(r)===null){a.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}Np(a,!0,o,null,g,u);break;case"together":Np(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function ca(r,a,o){if(r!==null&&(a.dependencies=r.dependencies),is|=a.lanes,(o&a.childLanes)===0)if(r!==null){if(Xo(r,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,o=ia(r,r.pendingProps),a.child=o,o.return=a;r.sibling!==null;)r=r.sibling,o=o.sibling=ia(r,r.pendingProps),o.return=a;o.sibling=null}return a.child}function Dp(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Nh(r)))}function wR(r,a,o){switch(a.tag){case 3:je(a,a.stateNode.containerInfo),Xa(a,bn,r.memoizedState.cache),Js();break;case 27:case 5:Et(a);break;case 4:je(a,a.stateNode.containerInfo);break;case 10:Xa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,np(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(es(a),a.flags|=128,null):(o&a.child.childLanes)!==0?FE(r,a,o):(es(a),r=ca(r,a,o),r!==null?r.sibling:null);es(a);break;case 19:var f=(r.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(Xo(r,a,o,!1),u=(o&a.childLanes)!==0),f){if(u)return GE(r,a,o);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ve(yn,yn.current),u)break;return null;case 22:return a.lanes=0,LE(r,a,o,a.pendingProps);case 24:Xa(a,bn,r.memoizedState.cache)}return ca(r,a,o)}function $E(r,a,o){if(r!==null)if(r.memoizedProps!==a.pendingProps)An=!0;else{if(!Dp(r,o)&&(a.flags&128)===0)return An=!1,wR(r,a,o);An=(r.flags&131072)!==0}else An=!1,vt&&(a.flags&1048576)!==0&&Av(a,bu,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(r=no(a.elementType),a.type=r,typeof r=="function")km(r)?(u=so(r,u),a.tag=1,a=BE(null,a,r,u,o)):(a.tag=0,a=Ap(null,a,r,u,o));else{if(r!=null){var f=r.$$typeof;if(f===te){a.tag=11,a=PE(null,a,r,u,o);break e}else if(f===A){a.tag=14,a=VE(null,a,r,u,o);break e}}throw a=ye(r)||r,Error(i(306,a,""))}}return a;case 0:return Ap(r,a,a.type,a.pendingProps,o);case 1:return u=a.type,f=so(u,a.pendingProps),BE(r,a,u,f,o);case 3:e:{if(je(a,a.stateNode.containerInfo),r===null)throw Error(i(387));u=a.pendingProps;var g=a.memoizedState;f=g.element,Wm(r,a),Nu(a,u,null,o);var E=a.memoizedState;if(u=E.cache,Xa(a,bn,u),u!==g.cache&&Gm(a,[bn],o,!0),xu(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=HE(r,a,u,o);break e}else if(u!==f){f=Zr(Error(i(424)),a),Su(f),a=HE(r,a,u,o);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Xt=ii(r.firstChild),zn=a,vt=!0,Ya=null,ni=!0,o=Lv(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Js(),u===f){a=ca(r,a,o);break e}Hn(r,a,u,o)}a=a.child}return a;case 26:return Qh(r,a),r===null?(o=rb(a.type,null,a.pendingProps,null))?a.memoizedState=o:vt||(o=a.type,r=a.pendingProps,u=df(Te.current).createElement(o),u[we]=a,u[Re]=r,Fn(u,o,r),Kt(u),a.stateNode=u):a.memoizedState=rb(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Et(a),r===null&&vt&&(u=a.stateNode=eb(a.type,a.pendingProps,Te.current),zn=a,ni=!0,f=Xt,us(a.type)?(cg=f,Xt=ii(u.firstChild)):Xt=f),Hn(r,a,a.pendingProps.children,o),Qh(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&vt&&((f=u=Xt)&&(u=tI(u,a.type,a.pendingProps,ni),u!==null?(a.stateNode=u,zn=a,Xt=ii(u.firstChild),ni=!1,f=!0):f=!1),f||Qa(a)),Et(a),f=a.type,g=a.pendingProps,E=r!==null?r.memoizedProps:null,u=g.children,ag(f,g)?u=null:E!==null&&ag(f,E)&&(a.flags|=32),a.memoizedState!==null&&(f=ip(r,a,gR,null,null,o),Xu._currentValue=f),Qh(r,a),Hn(r,a,u,o),a.child;case 6:return r===null&&vt&&((r=o=Xt)&&(o=nI(o,a.pendingProps,ni),o!==null?(a.stateNode=o,zn=a,Xt=null,r=!0):r=!1),r||Qa(a)),null;case 13:return FE(r,a,o);case 4:return je(a,a.stateNode.containerInfo),u=a.pendingProps,r===null?a.child=io(a,null,u,o):Hn(r,a,u,o),a.child;case 11:return PE(r,a,a.type,a.pendingProps,o);case 7:return Hn(r,a,a.pendingProps,o),a.child;case 8:return Hn(r,a,a.pendingProps.children,o),a.child;case 12:return Hn(r,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,Xa(a,a.type,u.value),Hn(r,a,u.children,o),a.child;case 9:return f=a.type._context,u=a.pendingProps.children,eo(a),f=Bn(f),u=u(f),a.flags|=1,Hn(r,a,u,o),a.child;case 14:return VE(r,a,a.type,a.pendingProps,o);case 15:return kE(r,a,a.type,a.pendingProps,o);case 19:return GE(r,a,o);case 31:return AR(r,a,o);case 22:return LE(r,a,o,a.pendingProps);case 24:return eo(a),u=Bn(bn),r===null?(f=Ym(),f===null&&(f=qt,g=$m(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),a.memoizedState={parent:u,cache:f},Xm(a),Xa(a,bn,f)):((r.lanes&o)!==0&&(Wm(r,a),Nu(a,null,null,o),xu()),f=r.memoizedState,g=a.memoizedState,f.parent!==u?(f={parent:u,cache:u},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),Xa(a,bn,u)):(u=g.cache,Xa(a,bn,u),u!==f.cache&&Gm(a,[bn],o,!0))),Hn(r,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function ha(r){r.flags|=4}function Op(r,a,o,u,f){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(f&335544128)===f)if(r.stateNode.complete)r.flags|=8192;else if(vT())r.flags|=8192;else throw ro=Ph,Qm}else r.flags&=-16777217}function KE(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!lb(a))if(vT())r.flags|=8192;else throw ro=Ph,Qm}function Wh(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Zi():536870912,r.lanes|=a,ll|=a)}function ku(r,a){if(!vt)switch(r.tailMode){case"hidden":a=r.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Wt(r){var a=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(a)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,a}function CR(r,a,o){var u=a.pendingProps;switch(zm(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(a),null;case 1:return Wt(a),null;case 3:return o=a.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),oa(bn),Fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Qo(a)?ha(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Hm())),Wt(a),null;case 26:var f=a.type,g=a.memoizedState;return r===null?(ha(a),g!==null?(Wt(a),KE(a,g)):(Wt(a),Op(a,f,null,u,o))):g?g!==r.memoizedState?(ha(a),Wt(a),KE(a,g)):(Wt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==u&&ha(a),Wt(a),Op(a,f,r,u,o)),null;case 27:if(wt(a),o=Te.current,f=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&ha(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return Wt(a),null}r=ae.current,Qo(a)?Cv(a):(r=eb(f,u,o),a.stateNode=r,ha(a))}return Wt(a),null;case 5:if(wt(a),f=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&ha(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return Wt(a),null}if(g=ae.current,Qo(a))Cv(a);else{var E=df(Te.current);switch(g){case 1:g=E.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=E.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=E.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?E.createElement(f,{is:u.is}):E.createElement(f)}}g[we]=a,g[Re]=u;e:for(E=a.child;E!==null;){if(E.tag===5||E.tag===6)g.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===a)break e;for(;E.sibling===null;){if(E.return===null||E.return===a)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}a.stateNode=g;e:switch(Fn(g,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ha(a)}}return Wt(a),Op(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,o),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==u&&ha(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(r=Te.current,Qo(a)){if(r=a.stateNode,o=a.memoizedProps,u=null,f=zn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[we]=a,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||FT(r.nodeValue,o)),r||Qa(a,!0)}else r=df(r).createTextNode(u),r[we]=a,a.stateNode=r}return Wt(a),null;case 31:if(o=a.memoizedState,r===null||r.memoizedState!==null){if(u=Qo(a),o!==null){if(r===null){if(!u)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[we]=a}else Js(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Wt(a),r=!1}else o=Hm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return a.flags&256?(kr(a),a):(kr(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Wt(a),null;case 13:if(u=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Qo(a),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[we]=a}else Js(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Wt(a),f=!1}else f=Hm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(kr(a),a):(kr(a),null)}return kr(a),(a.flags&128)!==0?(a.lanes=o,a):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=a.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)),o!==r&&o&&(a.child.flags|=8192),Wh(a,a.updateQueue),Wt(a),null);case 4:return Fe(),r===null&&eg(a.stateNode.containerInfo),Wt(a),null;case 10:return oa(a.type),Wt(a),null;case 19:if(re(yn),u=a.memoizedState,u===null)return Wt(a),null;if(f=(a.flags&128)!==0,g=u.rendering,g===null)if(f)ku(u,!1);else{if(fn!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(g=jh(r),g!==null){for(a.flags|=128,ku(u,!1),r=g.updateQueue,a.updateQueue=r,Wh(a,r),a.subtreeFlags=0,r=o,o=a.child;o!==null;)Tv(o,r),o=o.sibling;return ve(yn,yn.current&1|2),vt&&aa(a,u.treeForkCount),a.child}r=r.sibling}u.tail!==null&&Ft()>nf&&(a.flags|=128,f=!0,ku(u,!1),a.lanes=4194304)}else{if(!f)if(r=jh(g),r!==null){if(a.flags|=128,f=!0,r=r.updateQueue,a.updateQueue=r,Wh(a,r),ku(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!vt)return Wt(a),null}else 2*Ft()-u.renderingStartTime>nf&&o!==536870912&&(a.flags|=128,f=!0,ku(u,!1),a.lanes=4194304);u.isBackwards?(g.sibling=a.child,a.child=g):(r=u.last,r!==null?r.sibling=g:a.child=g,u.last=g)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Ft(),r.sibling=null,o=yn.current,ve(yn,f?o&1|2:o&1),vt&&aa(a,u.treeForkCount),r):(Wt(a),null);case 22:case 23:return kr(a),tp(),u=a.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(Wt(a),a.subtreeFlags&6&&(a.flags|=8192)):Wt(a),o=a.updateQueue,o!==null&&Wh(a,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),r!==null&&re(to),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),oa(bn),Wt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function RR(r,a){switch(zm(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return oa(bn),Fe(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return wt(a),null;case 31:if(a.memoizedState!==null){if(kr(a),a.alternate===null)throw Error(i(340));Js()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(kr(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Js()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return re(yn),null;case 4:return Fe(),null;case 10:return oa(a.type),null;case 22:case 23:return kr(a),tp(),r!==null&&re(to),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return oa(bn),null;case 25:return null;default:return null}}function YE(r,a){switch(zm(a),a.tag){case 3:oa(bn),Fe();break;case 26:case 27:case 5:wt(a);break;case 4:Fe();break;case 31:a.memoizedState!==null&&kr(a);break;case 13:kr(a);break;case 19:re(yn);break;case 10:oa(a.type);break;case 22:case 23:kr(a),tp(),r!==null&&re(to);break;case 24:oa(bn)}}function Lu(r,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==f)}}catch(C){Vt(a,a.return,C)}}function ns(r,a,o){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&r)===r){var E=u.inst,C=E.destroy;if(C!==void 0){E.destroy=void 0,f=a;var U=o,X=C;try{X()}catch(oe){Vt(f,U,oe)}}}u=u.next}while(u!==g)}}catch(oe){Vt(a,a.return,oe)}}function QE(r){var a=r.updateQueue;if(a!==null){var o=r.stateNode;try{Uv(a,o)}catch(u){Vt(r,r.return,u)}}}function XE(r,a,o){o.props=so(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){Vt(r,a,u)}}function ju(r,a){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){Vt(r,a,f)}}function Hi(r,a){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){Vt(r,a,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Vt(r,a,f)}else o.current=null}function WE(r){var a=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){Vt(r,r.return,f)}}function Mp(r,a,o){try{var u=r.stateNode;QR(u,r.type,o,a),u[Re]=a}catch(f){Vt(r,r.return,f)}}function JE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&us(r.type)||r.tag===4}function Pp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||JE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&us(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Vp(r,a,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(r),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=fi));else if(u!==4&&(u===27&&us(r.type)&&(o=r.stateNode,a=null),r=r.child,r!==null))for(Vp(r,a,o),r=r.sibling;r!==null;)Vp(r,a,o),r=r.sibling}function Jh(r,a,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?o.insertBefore(r,a):o.appendChild(r);else if(u!==4&&(u===27&&us(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Jh(r,a,o),r=r.sibling;r!==null;)Jh(r,a,o),r=r.sibling}function ZE(r){var a=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);Fn(a,u,o),a[we]=r,a[Re]=o}catch(g){Vt(r,r.return,g)}}var fa=!1,wn=!1,kp=!1,eT=typeof WeakSet=="function"?WeakSet:Set,Ln=null;function IR(r,a){if(r=r.containerInfo,rg=Ef,r=fv(r),xm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,C=-1,U=-1,X=0,oe=0,de=r,Z=null;t:for(;;){for(var ie;de!==o||f!==0&&de.nodeType!==3||(C=E+f),de!==g||u!==0&&de.nodeType!==3||(U=E+u),de.nodeType===3&&(E+=de.nodeValue.length),(ie=de.firstChild)!==null;)Z=de,de=ie;for(;;){if(de===r)break t;if(Z===o&&++X===f&&(C=E),Z===g&&++oe===u&&(U=E),(ie=de.nextSibling)!==null)break;de=Z,Z=de.parentNode}de=ie}o=C===-1||U===-1?null:{start:C,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(ig={focusedElem:r,selectionRange:o},Ef=!1,Ln=a;Ln!==null;)if(a=Ln,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Ln=r;else for(;Ln!==null;){switch(a=Ln,g=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)f=r[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=a,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var Le=so(o.type,f);r=u.getSnapshotBeforeUpdate(Le,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(qe){Vt(o,o.return,qe)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,o=r.nodeType,o===9)og(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":og(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,Ln=r;break}Ln=a.return}}function tT(r,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ma(r,o),u&4&&Lu(5,o);break;case 1:if(ma(r,o),u&4)if(r=o.stateNode,a===null)try{r.componentDidMount()}catch(E){Vt(o,o.return,E)}else{var f=so(o.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(f,a,r.__reactInternalSnapshotBeforeUpdate)}catch(E){Vt(o,o.return,E)}}u&64&&QE(o),u&512&&ju(o,o.return);break;case 3:if(ma(r,o),u&64&&(r=o.updateQueue,r!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{Uv(r,a)}catch(E){Vt(o,o.return,E)}}break;case 27:a===null&&u&4&&ZE(o);case 26:case 5:ma(r,o),a===null&&u&4&&WE(o),u&512&&ju(o,o.return);break;case 12:ma(r,o);break;case 31:ma(r,o),u&4&&iT(r,o);break;case 13:ma(r,o),u&4&&aT(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=LR.bind(null,o),rI(r,o))));break;case 22:if(u=o.memoizedState!==null||fa,!u){a=a!==null&&a.memoizedState!==null||wn,f=fa;var g=wn;fa=u,(wn=a)&&!g?pa(r,o,(o.subtreeFlags&8772)!==0):ma(r,o),fa=f,wn=g}break;case 30:break;default:ma(r,o)}}function nT(r){var a=r.alternate;a!==null&&(r.alternate=null,nT(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Qt(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var nn=null,_r=!1;function da(r,a,o){for(o=o.child;o!==null;)rT(r,a,o),o=o.sibling}function rT(r,a,o){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(De,o)}catch{}switch(o.tag){case 26:wn||Hi(o,a),da(r,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:wn||Hi(o,a);var u=nn,f=_r;us(o.type)&&(nn=o.stateNode,_r=!1),da(r,a,o),Ku(o.stateNode),nn=u,_r=f;break;case 5:wn||Hi(o,a);case 6:if(u=nn,f=_r,nn=null,da(r,a,o),nn=u,_r=f,nn!==null)if(_r)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(o.stateNode)}catch(g){Vt(o,a,g)}else try{nn.removeChild(o.stateNode)}catch(g){Vt(o,a,g)}break;case 18:nn!==null&&(_r?(r=nn,QT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),gl(r)):QT(nn,o.stateNode));break;case 4:u=nn,f=_r,nn=o.stateNode.containerInfo,_r=!0,da(r,a,o),nn=u,_r=f;break;case 0:case 11:case 14:case 15:ns(2,o,a),wn||ns(4,o,a),da(r,a,o);break;case 1:wn||(Hi(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&XE(o,a,u)),da(r,a,o);break;case 21:da(r,a,o);break;case 22:wn=(u=wn)||o.memoizedState!==null,da(r,a,o),wn=u;break;default:da(r,a,o)}}function iT(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{gl(r)}catch(o){Vt(a,a.return,o)}}}function aT(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{gl(r)}catch(o){Vt(a,a.return,o)}}function xR(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new eT),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new eT),a;default:throw Error(i(435,r.tag))}}function Zh(r,a){var o=xR(r);a.forEach(function(u){if(!o.has(u)){o.add(u);var f=jR.bind(null,r,u);u.then(f,f)}})}function vr(r,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=r,E=a,C=E;e:for(;C!==null;){switch(C.tag){case 27:if(us(C.type)){nn=C.stateNode,_r=!1;break e}break;case 5:nn=C.stateNode,_r=!1;break e;case 3:case 4:nn=C.stateNode.containerInfo,_r=!0;break e}C=C.return}if(nn===null)throw Error(i(160));rT(g,E,f),nn=null,_r=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)sT(a,r),a=a.sibling}var _i=null;function sT(r,a){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:vr(a,r),Er(r),u&4&&(ns(3,r,r.return),Lu(3,r),ns(5,r,r.return));break;case 1:vr(a,r),Er(r),u&512&&(wn||o===null||Hi(o,o.return)),u&64&&fa&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=_i;if(vr(a,r),Er(r),u&512&&(wn||o===null||Hi(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[kt]||g[we]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),Fn(g,u,o),g[we]=r,Kt(g),u=g;break e;case"link":var E=sb("link","href",f).get(u+(o.href||""));if(E){for(var C=0;C<E.length;C++)if(g=E[C],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(C,1);break t}}g=f.createElement(u),Fn(g,u,o),f.head.appendChild(g);break;case"meta":if(E=sb("meta","content",f).get(u+(o.content||""))){for(C=0;C<E.length;C++)if(g=E[C],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(C,1);break t}}g=f.createElement(u),Fn(g,u,o),f.head.appendChild(g);break;default:throw Error(i(468,u))}g[we]=r,Kt(g),u=g}r.stateNode=u}else ob(f,r.type,r.stateNode);else r.stateNode=ab(f,u,r.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?ob(f,r.type,r.stateNode):ab(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Mp(r,r.memoizedProps,o.memoizedProps)}break;case 27:vr(a,r),Er(r),u&512&&(wn||o===null||Hi(o,o.return)),o!==null&&u&4&&Mp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(vr(a,r),Er(r),u&512&&(wn||o===null||Hi(o,o.return)),r.flags&32){f=r.stateNode;try{yr(f,"")}catch(Le){Vt(r,r.return,Le)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,Mp(r,f,o!==null?o.memoizedProps:f)),u&1024&&(kp=!0);break;case 6:if(vr(a,r),Er(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Le){Vt(r,r.return,Le)}}break;case 3:if(gf=null,f=_i,_i=mf(a.containerInfo),vr(a,r),_i=f,Er(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{gl(a.containerInfo)}catch(Le){Vt(r,r.return,Le)}kp&&(kp=!1,oT(r));break;case 4:u=_i,_i=mf(r.stateNode.containerInfo),vr(a,r),Er(r),_i=u;break;case 12:vr(a,r),Er(r);break;case 31:vr(a,r),Er(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Zh(r,u)));break;case 13:vr(a,r),Er(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(tf=Ft()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Zh(r,u)));break;case 22:f=r.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,X=fa,oe=wn;if(fa=X||f,wn=oe||U,vr(a,r),wn=oe,fa=X,Er(r),u&8192)e:for(a=r.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(o===null||U||fa||wn||oo(r)),o=null,a=r;;){if(a.tag===5||a.tag===26){if(o===null){U=o=a;try{if(g=U.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{C=U.stateNode;var de=U.memoizedProps.style,Z=de!=null&&de.hasOwnProperty("display")?de.display:null;C.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Le){Vt(U,U.return,Le)}}}else if(a.tag===6){if(o===null){U=a;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(Le){Vt(U,U.return,Le)}}}else if(a.tag===18){if(o===null){U=a;try{var ie=U.stateNode;f?XT(ie,!0):XT(U.stateNode,!1)}catch(Le){Vt(U,U.return,Le)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Zh(r,o))));break;case 19:vr(a,r),Er(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Zh(r,u)));break;case 30:break;case 21:break;default:vr(a,r),Er(r)}}function Er(r){var a=r.flags;if(a&2){try{for(var o,u=r.return;u!==null;){if(JE(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,g=Pp(r);Jh(r,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(yr(E,""),o.flags&=-33);var C=Pp(r);Jh(r,C,E);break;case 3:case 4:var U=o.stateNode.containerInfo,X=Pp(r);Vp(r,X,U);break;default:throw Error(i(161))}}catch(oe){Vt(r,r.return,oe)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function oT(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;oT(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function ma(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)tT(r,a.alternate,a),a=a.sibling}function oo(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:ns(4,a,a.return),oo(a);break;case 1:Hi(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&XE(a,a.return,o),oo(a);break;case 27:Ku(a.stateNode);case 26:case 5:Hi(a,a.return),oo(a);break;case 22:a.memoizedState===null&&oo(a);break;case 30:oo(a);break;default:oo(a)}r=r.sibling}}function pa(r,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,f=r,g=a,E=g.flags;switch(g.tag){case 0:case 11:case 15:pa(f,g,o),Lu(4,g);break;case 1:if(pa(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(X){Vt(u,u.return,X)}if(u=g,f=u.updateQueue,f!==null){var C=u.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)jv(U[f],C)}catch(X){Vt(u,u.return,X)}}o&&E&64&&QE(g),ju(g,g.return);break;case 27:ZE(g);case 26:case 5:pa(f,g,o),o&&u===null&&E&4&&WE(g),ju(g,g.return);break;case 12:pa(f,g,o);break;case 31:pa(f,g,o),o&&E&4&&iT(f,g);break;case 13:pa(f,g,o),o&&E&4&&aT(f,g);break;case 22:g.memoizedState===null&&pa(f,g,o),ju(g,g.return);break;case 30:break;default:pa(f,g,o)}a=a.sibling}}function Lp(r,a){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Au(o))}function jp(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Au(r))}function vi(r,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)lT(r,a,o,u),a=a.sibling}function lT(r,a,o,u){var f=a.flags;switch(a.tag){case 0:case 11:case 15:vi(r,a,o,u),f&2048&&Lu(9,a);break;case 1:vi(r,a,o,u);break;case 3:vi(r,a,o,u),f&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Au(r)));break;case 12:if(f&2048){vi(r,a,o,u),r=a.stateNode;try{var g=a.memoizedProps,E=g.id,C=g.onPostCommit;typeof C=="function"&&C(E,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(U){Vt(a,a.return,U)}}else vi(r,a,o,u);break;case 31:vi(r,a,o,u);break;case 13:vi(r,a,o,u);break;case 23:break;case 22:g=a.stateNode,E=a.alternate,a.memoizedState!==null?g._visibility&2?vi(r,a,o,u):Uu(r,a):g._visibility&2?vi(r,a,o,u):(g._visibility|=2,al(r,a,o,u,(a.subtreeFlags&10256)!==0||!1)),f&2048&&Lp(E,a);break;case 24:vi(r,a,o,u),f&2048&&jp(a.alternate,a);break;default:vi(r,a,o,u)}}function al(r,a,o,u,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var g=r,E=a,C=o,U=u,X=E.flags;switch(E.tag){case 0:case 11:case 15:al(g,E,C,U,f),Lu(8,E);break;case 23:break;case 22:var oe=E.stateNode;E.memoizedState!==null?oe._visibility&2?al(g,E,C,U,f):Uu(g,E):(oe._visibility|=2,al(g,E,C,U,f)),f&&X&2048&&Lp(E.alternate,E);break;case 24:al(g,E,C,U,f),f&&X&2048&&jp(E.alternate,E);break;default:al(g,E,C,U,f)}a=a.sibling}}function Uu(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=r,u=a,f=u.flags;switch(u.tag){case 22:Uu(o,u),f&2048&&Lp(u.alternate,u);break;case 24:Uu(o,u),f&2048&&jp(u.alternate,u);break;default:Uu(o,u)}a=a.sibling}}var zu=8192;function sl(r,a,o){if(r.subtreeFlags&zu)for(r=r.child;r!==null;)uT(r,a,o),r=r.sibling}function uT(r,a,o){switch(r.tag){case 26:sl(r,a,o),r.flags&zu&&r.memoizedState!==null&&pI(o,_i,r.memoizedState,r.memoizedProps);break;case 5:sl(r,a,o);break;case 3:case 4:var u=_i;_i=mf(r.stateNode.containerInfo),sl(r,a,o),_i=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=zu,zu=16777216,sl(r,a,o),zu=u):sl(r,a,o));break;default:sl(r,a,o)}}function cT(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Bu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Ln=u,fT(u,r)}cT(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)hT(r),r=r.sibling}function hT(r){switch(r.tag){case 0:case 11:case 15:Bu(r),r.flags&2048&&ns(9,r,r.return);break;case 3:Bu(r);break;case 12:Bu(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,ef(r)):Bu(r);break;default:Bu(r)}}function ef(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];Ln=u,fT(u,r)}cT(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:ns(8,a,a.return),ef(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,ef(a));break;default:ef(a)}r=r.sibling}}function fT(r,a){for(;Ln!==null;){var o=Ln;switch(o.tag){case 0:case 11:case 15:ns(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Au(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ln=u;else e:for(o=r;Ln!==null;){u=Ln;var f=u.sibling,g=u.return;if(nT(u),u===o){Ln=null;break e}if(f!==null){f.return=g,Ln=f;break e}Ln=g}}}var NR={getCacheForType:function(r){var a=Bn(bn),o=a.data.get(r);return o===void 0&&(o=r(),a.data.set(r,o)),o},cacheSignal:function(){return Bn(bn).controller.signal}},DR=typeof WeakMap=="function"?WeakMap:Map,xt=0,qt=null,ct=null,dt=0,Pt=0,Lr=null,rs=!1,ol=!1,Up=!1,ga=0,fn=0,is=0,lo=0,zp=0,jr=0,ll=0,Hu=null,Tr=null,Bp=!1,tf=0,dT=0,nf=1/0,rf=null,as=null,Mn=0,ss=null,ul=null,ya=0,Hp=0,Fp=null,mT=null,Fu=0,qp=null;function Ur(){return(xt&2)!==0&&dt!==0?dt&-dt:B.T!==null?Xp():Ae()}function pT(){if(jr===0)if((dt&536870912)===0||vt){var r=xi;xi<<=1,(xi&3932160)===0&&(xi=262144),jr=r}else jr=536870912;return r=Vr.current,r!==null&&(r.flags|=32),jr}function br(r,a,o){(r===qt&&(Pt===2||Pt===9)||r.cancelPendingCommit!==null)&&(cl(r,0),os(r,dt,jr,!1)),Ni(r,o),((xt&2)===0||r!==qt)&&(r===qt&&((xt&2)===0&&(lo|=o),fn===4&&os(r,dt,jr,!1)),Fi(r))}function gT(r,a,o){if((xt&6)!==0)throw Error(i(327));var u=!o&&(a&127)===0&&(a&r.expiredLanes)===0||Nr(r,a),f=u?PR(r,a):$p(r,a,!0),g=u;do{if(f===0){ol&&!u&&os(r,a,0,!1);break}else{if(o=r.current.alternate,g&&!OR(o)){f=$p(r,a,!1),g=!1;continue}if(f===2){if(g=a,r.errorRecoveryDisabledLanes&g)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var C=r;f=Hu;var U=C.current.memoizedState.isDehydrated;if(U&&(cl(C,E).flags|=256),E=$p(C,E,!1),E!==2){if(Up&&!U){C.errorRecoveryDisabledLanes|=g,lo|=g,f=4;break e}g=Tr,Tr=f,g!==null&&(Tr===null?Tr=g:Tr.push.apply(Tr,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){cl(r,0),os(r,a,0,!0);break}e:{switch(u=r,g=f,g){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:os(u,a,jr,!rs);break e;case 2:Tr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(f=tf+300-Ft(),10<f)){if(os(u,a,jr,!rs),xr(u,0,!0)!==0)break e;ya=a,u.timeoutHandle=KT(yT.bind(null,u,o,Tr,rf,Bp,a,jr,lo,ll,rs,g,"Throttled",-0,0),f);break e}yT(u,o,Tr,rf,Bp,a,jr,lo,ll,rs,g,null,-0,0)}}break}while(!0);Fi(r)}function yT(r,a,o,u,f,g,E,C,U,X,oe,de,Z,ie){if(r.timeoutHandle=-1,de=a.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fi},uT(a,g,de);var Le=(g&62914560)===g?tf-Ft():(g&4194048)===g?dT-Ft():0;if(Le=gI(de,Le),Le!==null){ya=g,r.cancelPendingCommit=Le(wT.bind(null,r,a,g,o,u,f,E,C,U,oe,de,null,Z,ie)),os(r,g,E,!X);return}}wT(r,a,g,o,u,f,E,C,U)}function OR(r){for(var a=r;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!Mr(g(),f))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function os(r,a,o,u){a&=~zp,a&=~lo,r.suspendedLanes|=a,r.pingedLanes&=~a,u&&(r.warmLanes|=a),u=r.expirationTimes;for(var f=a;0<f;){var g=31-Ge(f),E=1<<g;u[g]=-1,f&=~E}o!==0&&ea(r,o,a)}function af(){return(xt&6)===0?(qu(0),!1):!0}function Gp(){if(ct!==null){if(Pt===0)var r=ct.return;else r=ct,sa=Zs=null,op(r),el=null,Cu=0,r=ct;for(;r!==null;)YE(r.alternate,r),r=r.return;ct=null}}function cl(r,a){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,JR(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),ya=0,Gp(),qt=r,ct=o=ia(r.current,null),dt=a,Pt=0,Lr=null,rs=!1,ol=Nr(r,a),Up=!1,ll=jr=zp=lo=is=fn=0,Tr=Hu=null,Bp=!1,(a&8)!==0&&(a|=a&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=a;0<u;){var f=31-Ge(u),g=1<<f;a|=r[f],u&=~g}return ga=a,wh(),o}function _T(r,a){tt=null,B.H=Pu,a===Zo||a===Mh?(a=Pv(),Pt=3):a===Qm?(a=Pv(),Pt=4):Pt=a===Sp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Lr=a,ct===null&&(fn=1,Kh(r,Zr(a,r.current)))}function vT(){var r=Vr.current;return r===null?!0:(dt&4194048)===dt?ri===null:(dt&62914560)===dt||(dt&536870912)!==0?r===ri:!1}function ET(){var r=B.H;return B.H=Pu,r===null?Pu:r}function TT(){var r=B.A;return B.A=NR,r}function sf(){fn=4,rs||(dt&4194048)!==dt&&Vr.current!==null||(ol=!0),(is&134217727)===0&&(lo&134217727)===0||qt===null||os(qt,dt,jr,!1)}function $p(r,a,o){var u=xt;xt|=2;var f=ET(),g=TT();(qt!==r||dt!==a)&&(rf=null,cl(r,a)),a=!1;var E=fn;e:do try{if(Pt!==0&&ct!==null){var C=ct,U=Lr;switch(Pt){case 8:Gp(),E=6;break e;case 3:case 2:case 9:case 6:Vr.current===null&&(a=!0);var X=Pt;if(Pt=0,Lr=null,hl(r,C,U,X),o&&ol){E=0;break e}break;default:X=Pt,Pt=0,Lr=null,hl(r,C,U,X)}}MR(),E=fn;break}catch(oe){_T(r,oe)}while(!0);return a&&r.shellSuspendCounter++,sa=Zs=null,xt=u,B.H=f,B.A=g,ct===null&&(qt=null,dt=0,wh()),E}function MR(){for(;ct!==null;)bT(ct)}function PR(r,a){var o=xt;xt|=2;var u=ET(),f=TT();qt!==r||dt!==a?(rf=null,nf=Ft()+500,cl(r,a)):ol=Nr(r,a);e:do try{if(Pt!==0&&ct!==null){a=ct;var g=Lr;t:switch(Pt){case 1:Pt=0,Lr=null,hl(r,a,g,1);break;case 2:case 9:if(Ov(g)){Pt=0,Lr=null,ST(a);break}a=function(){Pt!==2&&Pt!==9||qt!==r||(Pt=7),Fi(r)},g.then(a,a);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:Ov(g)?(Pt=0,Lr=null,ST(a)):(Pt=0,Lr=null,hl(r,a,g,7));break;case 5:var E=null;switch(ct.tag){case 26:E=ct.memoizedState;case 5:case 27:var C=ct;if(E?lb(E):C.stateNode.complete){Pt=0,Lr=null;var U=C.sibling;if(U!==null)ct=U;else{var X=C.return;X!==null?(ct=X,of(X)):ct=null}break t}}Pt=0,Lr=null,hl(r,a,g,5);break;case 6:Pt=0,Lr=null,hl(r,a,g,6);break;case 8:Gp(),fn=6;break e;default:throw Error(i(462))}}VR();break}catch(oe){_T(r,oe)}while(!0);return sa=Zs=null,B.H=u,B.A=f,xt=o,ct!==null?0:(qt=null,dt=0,wh(),fn)}function VR(){for(;ct!==null&&!Ri();)bT(ct)}function bT(r){var a=$E(r.alternate,r,ga);r.memoizedProps=r.pendingProps,a===null?of(r):ct=a}function ST(r){var a=r,o=a.alternate;switch(a.tag){case 15:case 0:a=zE(o,a,a.pendingProps,a.type,void 0,dt);break;case 11:a=zE(o,a,a.pendingProps,a.type.render,a.ref,dt);break;case 5:op(a);default:YE(o,a),a=ct=Tv(a,ga),a=$E(o,a,ga)}r.memoizedProps=r.pendingProps,a===null?of(r):ct=a}function hl(r,a,o,u){sa=Zs=null,op(a),el=null,Cu=0;var f=a.return;try{if(SR(r,f,a,o,dt)){fn=1,Kh(r,Zr(o,r.current)),ct=null;return}}catch(g){if(f!==null)throw ct=f,g;fn=1,Kh(r,Zr(o,r.current)),ct=null;return}a.flags&32768?(vt||u===1?r=!0:ol||(dt&536870912)!==0?r=!1:(rs=r=!0,(u===2||u===9||u===3||u===6)&&(u=Vr.current,u!==null&&u.tag===13&&(u.flags|=16384))),AT(a,r)):of(a)}function of(r){var a=r;do{if((a.flags&32768)!==0){AT(a,rs);return}r=a.return;var o=CR(a.alternate,a,ga);if(o!==null){ct=o;return}if(a=a.sibling,a!==null){ct=a;return}ct=a=r}while(a!==null);fn===0&&(fn=5)}function AT(r,a){do{var o=RR(r.alternate,r);if(o!==null){o.flags&=32767,ct=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(r=r.sibling,r!==null)){ct=r;return}ct=r=o}while(r!==null);fn=6,ct=null}function wT(r,a,o,u,f,g,E,C,U){r.cancelPendingCommit=null;do lf();while(Mn!==0);if((xt&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(g=a.lanes|a.childLanes,g|=Pm,lu(r,o,g,E,C,U),r===qt&&(ct=qt=null,dt=0),ul=a,ss=r,ya=o,Hp=g,Fp=f,mT=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,UR(pn,function(){return NT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=B.T,B.T=null,f=J.p,J.p=2,E=xt,xt|=4;try{IR(r,a,o)}finally{xt=E,J.p=f,B.T=u}}Mn=1,CT(),RT(),IT()}}function CT(){if(Mn===1){Mn=0;var r=ss,a=ul,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=B.T,B.T=null;var u=J.p;J.p=2;var f=xt;xt|=4;try{sT(a,r);var g=ig,E=fv(r.containerInfo),C=g.focusedElem,U=g.selectionRange;if(E!==C&&C&&C.ownerDocument&&hv(C.ownerDocument.documentElement,C)){if(U!==null&&xm(C)){var X=U.start,oe=U.end;if(oe===void 0&&(oe=X),"selectionStart"in C)C.selectionStart=X,C.selectionEnd=Math.min(oe,C.value.length);else{var de=C.ownerDocument||document,Z=de&&de.defaultView||window;if(Z.getSelection){var ie=Z.getSelection(),Le=C.textContent.length,qe=Math.min(U.start,Le),Bt=U.end===void 0?qe:Math.min(U.end,Le);!ie.extend&&qe>Bt&&(E=Bt,Bt=qe,qe=E);var $=cv(C,qe),F=cv(C,Bt);if($&&F&&(ie.rangeCount!==1||ie.anchorNode!==$.node||ie.anchorOffset!==$.offset||ie.focusNode!==F.node||ie.focusOffset!==F.offset)){var Q=de.createRange();Q.setStart($.node,$.offset),ie.removeAllRanges(),qe>Bt?(ie.addRange(Q),ie.extend(F.node,F.offset)):(Q.setEnd(F.node,F.offset),ie.addRange(Q))}}}}for(de=[],ie=C;ie=ie.parentNode;)ie.nodeType===1&&de.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<de.length;C++){var he=de[C];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Ef=!!rg,ig=rg=null}finally{xt=f,J.p=u,B.T=o}}r.current=a,Mn=2}}function RT(){if(Mn===2){Mn=0;var r=ss,a=ul,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=B.T,B.T=null;var u=J.p;J.p=2;var f=xt;xt|=4;try{tT(r,a.alternate,a)}finally{xt=f,J.p=u,B.T=o}}Mn=3}}function IT(){if(Mn===4||Mn===3){Mn=0,Ii();var r=ss,a=ul,o=ya,u=mT;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Mn=5:(Mn=0,ul=ss=null,xT(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(as=null),ge(o),a=a.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(De,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=B.T,f=J.p,J.p=2,B.T=null;try{for(var g=r.onRecoverableError,E=0;E<u.length;E++){var C=u[E];g(C.value,{componentStack:C.stack})}}finally{B.T=a,J.p=f}}(ya&3)!==0&&lf(),Fi(r),f=r.pendingLanes,(o&261930)!==0&&(f&42)!==0?r===qp?Fu++:(Fu=0,qp=r):Fu=0,qu(0)}}function xT(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Au(a)))}function lf(){return CT(),RT(),IT(),NT()}function NT(){if(Mn!==5)return!1;var r=ss,a=Hp;Hp=0;var o=ge(ya),u=B.T,f=J.p;try{J.p=32>o?32:o,B.T=null,o=Fp,Fp=null;var g=ss,E=ya;if(Mn=0,ul=ss=null,ya=0,(xt&6)!==0)throw Error(i(331));var C=xt;if(xt|=4,hT(g.current),lT(g,g.current,E,o),xt=C,qu(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(De,g)}catch{}return!0}finally{J.p=f,B.T=u,xT(r,a)}}function DT(r,a,o){a=Zr(o,a),a=bp(r.stateNode,a,2),r=Za(r,a,2),r!==null&&(Ni(r,2),Fi(r))}function Vt(r,a,o){if(r.tag===3)DT(r,r,o);else for(;a!==null;){if(a.tag===3){DT(a,r,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(as===null||!as.has(u))){r=Zr(o,r),o=OE(2),u=Za(a,o,2),u!==null&&(ME(o,u,a,r),Ni(u,2),Fi(u));break}}a=a.return}}function Kp(r,a,o){var u=r.pingCache;if(u===null){u=r.pingCache=new DR;var f=new Set;u.set(a,f)}else f=u.get(a),f===void 0&&(f=new Set,u.set(a,f));f.has(o)||(Up=!0,f.add(o),r=kR.bind(null,r,a,o),a.then(r,r))}function kR(r,a,o){var u=r.pingCache;u!==null&&u.delete(a),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,qt===r&&(dt&o)===o&&(fn===4||fn===3&&(dt&62914560)===dt&&300>Ft()-tf?(xt&2)===0&&cl(r,0):zp|=o,ll===dt&&(ll=0)),Fi(r)}function OT(r,a){a===0&&(a=Zi()),r=Xs(r,a),r!==null&&(Ni(r,a),Fi(r))}function LR(r){var a=r.memoizedState,o=0;a!==null&&(o=a.retryLane),OT(r,o)}function jR(r,a){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),OT(r,o)}function UR(r,a){return st(r,a)}var uf=null,fl=null,Yp=!1,cf=!1,Qp=!1,ls=0;function Fi(r){r!==fl&&r.next===null&&(fl===null?uf=fl=r:fl=fl.next=r),cf=!0,Yp||(Yp=!0,BR())}function qu(r,a){if(!Qp&&cf){Qp=!0;do for(var o=!1,u=uf;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var E=u.suspendedLanes,C=u.pingedLanes;g=(1<<31-Ge(42|r)+1)-1,g&=f&~(E&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,kT(u,g))}else g=dt,g=xr(u,u===qt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Nr(u,g)||(o=!0,kT(u,g));u=u.next}while(o);Qp=!1}}function zR(){MT()}function MT(){cf=Yp=!1;var r=0;ls!==0&&WR()&&(r=ls);for(var a=Ft(),o=null,u=uf;u!==null;){var f=u.next,g=PT(u,a);g===0?(u.next=null,o===null?uf=f:o.next=f,f===null&&(fl=o)):(o=u,(r!==0||(g&3)!==0)&&(cf=!0)),u=f}Mn!==0&&Mn!==5||qu(r),ls!==0&&(ls=0)}function PT(r,a){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var E=31-Ge(g),C=1<<E,U=f[E];U===-1?((C&o)===0||(C&u)!==0)&&(f[E]=Mo(C,a)):U<=a&&(r.expiredLanes|=C),g&=~C}if(a=qt,o=dt,o=xr(r,r===a?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===a&&(Pt===2||Pt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Dn(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Nr(r,o)){if(a=o&-o,a===r.callbackPriority)return a;switch(u!==null&&Dn(u),ge(o)){case 2:case 8:o=Xn;break;case 32:o=pn;break;case 268435456:o=Se;break;default:o=pn}return u=VT.bind(null,r),o=st(o,u),r.callbackPriority=a,r.callbackNode=o,a}return u!==null&&u!==null&&Dn(u),r.callbackPriority=2,r.callbackNode=null,2}function VT(r,a){if(Mn!==0&&Mn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(lf()&&r.callbackNode!==o)return null;var u=dt;return u=xr(r,r===qt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(gT(r,u,a),PT(r,Ft()),r.callbackNode!=null&&r.callbackNode===o?VT.bind(null,r):null)}function kT(r,a){if(lf())return null;gT(r,a,!0)}function BR(){ZR(function(){(xt&6)!==0?st(ar,zR):MT()})}function Xp(){if(ls===0){var r=Wo;r===0&&(r=sr,sr<<=1,(sr&261888)===0&&(sr=256)),ls=r}return ls}function LT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ko(""+r)}function jT(r,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,r.id&&o.setAttribute("form",r.id),a.parentNode.insertBefore(o,a),r=new FormData(r),o.parentNode.removeChild(o),r}function HR(r,a,o,u,f){if(a==="submit"&&o&&o.stateNode===f){var g=LT((f[Re]||null).action),E=u.submitter;E&&(a=(a=E[Re]||null)?LT(a.formAction):E.getAttribute("formAction"),a!==null&&(g=a,E=null));var C=new ki("action","action",null,u,f);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ls!==0){var U=E?jT(f,E):new FormData(f);gp(o,{pending:!0,data:U,method:f.method,action:g},null,U)}}else typeof g=="function"&&(C.preventDefault(),U=E?jT(f,E):new FormData(f),gp(o,{pending:!0,data:U,method:f.method,action:g},g,U))},currentTarget:f}]})}}for(var Wp=0;Wp<Mm.length;Wp++){var Jp=Mm[Wp],FR=Jp.toLowerCase(),qR=Jp[0].toUpperCase()+Jp.slice(1);yi(FR,"on"+qR)}yi(pv,"onAnimationEnd"),yi(gv,"onAnimationIteration"),yi(yv,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(sR,"onTransitionRun"),yi(oR,"onTransitionStart"),yi(lR,"onTransitionCancel"),yi(_v,"onTransitionEnd"),Jn("onMouseEnter",["mouseout","mouseover"]),Jn("onMouseLeave",["mouseout","mouseover"]),Jn("onPointerEnter",["pointerout","pointerover"]),Jn("onPointerLeave",["pointerout","pointerover"]),pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gu));function UT(r,a){a=(a&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var g=void 0;if(a)for(var E=u.length-1;0<=E;E--){var C=u[E],U=C.instance,X=C.currentTarget;if(C=C.listener,U!==g&&f.isPropagationStopped())break e;g=C,f.currentTarget=X;try{g(f)}catch(oe){Ah(oe)}f.currentTarget=null,g=U}else for(E=0;E<u.length;E++){if(C=u[E],U=C.instance,X=C.currentTarget,C=C.listener,U!==g&&f.isPropagationStopped())break e;g=C,f.currentTarget=X;try{g(f)}catch(oe){Ah(oe)}f.currentTarget=null,g=U}}}}function ht(r,a){var o=a[$e];o===void 0&&(o=a[$e]=new Set);var u=r+"__bubble";o.has(u)||(zT(a,r,2,!1),o.add(u))}function Zp(r,a,o){var u=0;a&&(u|=4),zT(o,r,u,a)}var hf="_reactListening"+Math.random().toString(36).slice(2);function eg(r){if(!r[hf]){r[hf]=!0,mr.forEach(function(o){o!=="selectionchange"&&(GR.has(o)||Zp(o,!1,r),Zp(o,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[hf]||(a[hf]=!0,Zp("selectionchange",!1,a))}}function zT(r,a,o,u){switch(pb(a)){case 2:var f=vI;break;case 8:f=EI;break;default:f=pg}o=f.bind(null,a,o,r),f=void 0,!Hs||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(a,o,{capture:!0,passive:f}):r.addEventListener(a,o,!0):f!==void 0?r.addEventListener(a,o,{passive:f}):r.addEventListener(a,o,!1)}function tg(r,a,o,u,f){var g=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var C=u.stateNode.containerInfo;if(C===f)break;if(E===4)for(E=u.return;E!==null;){var U=E.tag;if((U===3||U===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;C!==null;){if(E=Gt(C),E===null)return;if(U=E.tag,U===5||U===6||U===26||U===27){u=g=E;continue e}C=C.parentNode}}u=u.return}Fa(function(){var X=g,oe=Qr(o),de=[];e:{var Z=vv.get(r);if(Z!==void 0){var ie=ki,Le=r;switch(r){case"keypress":if(qs(o)===0)break e;case"keydown":case"keyup":ie=Th;break;case"focusin":Le="focus",ie=$s;break;case"focusout":Le="blur",ie=$s;break;case"beforeblur":case"afterblur":ie=$s;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=_;break;case pv:case gv:case yv:ie=mh;break;case _v:ie=x;break;case"scroll":case"scrollend":ie=pu;break;case"wheel":ie=ne;break;case"copy":case"cut":case"paste":ie=ph;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=ra;break;case"toggle":case"beforetoggle":ie=et}var qe=(a&4)!==0,Bt=!qe&&(r==="scroll"||r==="scrollend"),$=qe?Z!==null?Z+"Capture":null:Z;qe=[];for(var F=X,Q;F!==null;){var he=F;if(Q=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||Q===null||$===null||(he=di(F,$),he!=null&&qe.push($u(F,he,Q))),Bt)break;F=F.return}0<qe.length&&(Z=new ie(Z,Le,null,o,oe),de.push({event:Z,listeners:qe}))}}if((a&7)===0){e:{if(Z=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",Z&&o!==fu&&(Le=o.relatedTarget||o.fromElement)&&(Gt(Le)||Le[Ve]))break e;if((ie||Z)&&(Z=oe.window===oe?oe:(Z=oe.ownerDocument)?Z.defaultView||Z.parentWindow:window,ie?(Le=o.relatedTarget||o.toElement,ie=X,Le=Le?Gt(Le):null,Le!==null&&(Bt=l(Le),qe=Le.tag,Le!==Bt||qe!==5&&qe!==27&&qe!==6)&&(Le=null)):(ie=null,Le=X),ie!==Le)){if(qe=gu,he="onMouseLeave",$="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(qe=ra,he="onPointerLeave",$="onPointerEnter",F="pointer"),Bt=ie==null?Z:$t(ie),Q=Le==null?Z:$t(Le),Z=new qe(he,F+"leave",ie,o,oe),Z.target=Bt,Z.relatedTarget=Q,he=null,Gt(oe)===X&&(qe=new qe($,F+"enter",Le,o,oe),qe.target=Q,qe.relatedTarget=Bt,he=qe),Bt=he,ie&&Le)t:{for(qe=$R,$=ie,F=Le,Q=0,he=$;he;he=qe(he))Q++;he=0;for(var Be=F;Be;Be=qe(Be))he++;for(;0<Q-he;)$=qe($),Q--;for(;0<he-Q;)F=qe(F),he--;for(;Q--;){if($===F||F!==null&&$===F.alternate){qe=$;break t}$=qe($),F=qe(F)}qe=null}else qe=null;ie!==null&&BT(de,Z,ie,qe,!1),Le!==null&&Bt!==null&&BT(de,Bt,Le,qe,!0)}}e:{if(Z=X?$t(X):window,ie=Z.nodeName&&Z.nodeName.toLowerCase(),ie==="select"||ie==="input"&&Z.type==="file")var St=iv;else if(nv(Z))if(av)St=rR;else{St=tR;var Ue=eR}else ie=Z.nodeName,!ie||ie.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&Vo(X.elementType)&&(St=iv):St=nR;if(St&&(St=St(r,X))){rv(de,St,o,oe);break e}Ue&&Ue(r,Z,X),r==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&uu(Z,"number",Z.value)}switch(Ue=X?$t(X):window,r){case"focusin":(nv(Ue)||Ue.contentEditable==="true")&&(Fo=Ue,Nm=X,Tu=null);break;case"focusout":Tu=Nm=Fo=null;break;case"mousedown":Dm=!0;break;case"contextmenu":case"mouseup":case"dragend":Dm=!1,dv(de,o,oe);break;case"selectionchange":if(aR)break;case"keydown":case"keyup":dv(de,o,oe)}var it;if(It)e:{switch(r){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else Ho?Ks(r,o)&&(mt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(mt="onCompositionStart");mt&&(Ui&&o.locale!=="ko"&&(Ho||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Ho&&(it=mu()):(Vi=oe,du="value"in Vi?Vi.value:Vi.textContent,Ho=!0)),Ue=ff(X,mt),0<Ue.length&&(mt=new ji(mt,r,null,o,oe),de.push({event:mt,listeners:Ue}),it?mt.data=it:(it=Bo(o),it!==null&&(mt.data=it)))),(it=Wr?XC(r,o):WC(r,o))&&(mt=ff(X,"onBeforeInput"),0<mt.length&&(Ue=new ji("onBeforeInput","beforeinput",null,o,oe),de.push({event:Ue,listeners:mt}),Ue.data=it)),HR(de,r,X,o,oe)}UT(de,a)})}function $u(r,a,o){return{instance:r,listener:a,currentTarget:o}}function ff(r,a){for(var o=a+"Capture",u=[];r!==null;){var f=r,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=di(r,o),f!=null&&u.unshift($u(r,f,g)),f=di(r,a),f!=null&&u.push($u(r,f,g))),r.tag===3)return u;r=r.return}return[]}function $R(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function BT(r,a,o,u,f){for(var g=a._reactName,E=[];o!==null&&o!==u;){var C=o,U=C.alternate,X=C.stateNode;if(C=C.tag,U!==null&&U===u)break;C!==5&&C!==26&&C!==27||X===null||(U=X,f?(X=di(o,g),X!=null&&E.unshift($u(o,X,U))):f||(X=di(o,g),X!=null&&E.push($u(o,X,U)))),o=o.return}E.length!==0&&r.push({event:a,listeners:E})}var KR=/\r\n?/g,YR=/\u0000|\uFFFD/g;function HT(r){return(typeof r=="string"?r:""+r).replace(KR,`
`).replace(YR,"")}function FT(r,a){return a=HT(a),HT(r)===a}function zt(r,a,o,u,f,g){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||yr(r,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&yr(r,""+u);break;case"className":Tn(r,"class",u);break;case"tabIndex":Tn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(r,o,u);break;case"style":hu(r,u,g);break;case"data":if(a!=="object"){Tn(r,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=ko(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(a!=="input"&&zt(r,a,"name",f.name,f,null),zt(r,a,"formEncType",f.formEncType,f,null),zt(r,a,"formMethod",f.formMethod,f,null),zt(r,a,"formTarget",f.formTarget,f,null)):(zt(r,a,"encType",f.encType,f,null),zt(r,a,"method",f.method,f,null),zt(r,a,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=ko(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=fi);break;case"onScroll":u!=null&&ht("scroll",r);break;case"onScrollEnd":u!=null&&ht("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=ko(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":ht("beforetoggle",r),ht("toggle",r),on(r,"popover",u);break;case"xlinkActuate":Lt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Lt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Lt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Lt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Lt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Lt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Lt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Lt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Lt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":on(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=hh.get(o)||o,on(r,o,u))}}function ng(r,a,o,u,f,g){switch(o){case"style":hu(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?yr(r,u):(typeof u=="number"||typeof u=="bigint")&&yr(r,""+u);break;case"onScroll":u!=null&&ht("scroll",r);break;case"onScrollEnd":u!=null&&ht("scrollend",r);break;case"onClick":u!=null&&(r.onclick=fi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),a=o.slice(2,f?o.length-7:void 0),g=r[Re]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(a,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(a,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):on(r,o,u)}}}function Fn(r,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",r),ht("load",r);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:zt(r,a,g,E,o,null)}}f&&zt(r,a,"srcSet",o.srcSet,o,null),u&&zt(r,a,"src",o.src,o,null);return;case"input":ht("invalid",r);var C=g=E=f=null,U=null,X=null;for(u in o)if(o.hasOwnProperty(u)){var oe=o[u];if(oe!=null)switch(u){case"name":f=oe;break;case"type":E=oe;break;case"checked":U=oe;break;case"defaultChecked":X=oe;break;case"value":g=oe;break;case"defaultValue":C=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,a));break;default:zt(r,a,u,oe,o,null)}}lh(r,g,C,U,X,E,f,!1);return;case"select":ht("invalid",r),u=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(C=o[f],C!=null))switch(f){case"value":g=C;break;case"defaultValue":E=C;break;case"multiple":u=C;default:zt(r,a,f,C,o,null)}a=g,o=E,r.multiple=!!u,a!=null?Ua(r,!!u,a,!1):o!=null&&Ua(r,!!u,o,!0);return;case"textarea":ht("invalid",r),g=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(C=o[E],C!=null))switch(E){case"value":u=C;break;case"defaultValue":f=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:zt(r,a,E,C,o,null)}za(r,u,f,g);return;case"option":for(U in o)if(o.hasOwnProperty(U)&&(u=o[U],u!=null))switch(U){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:zt(r,a,U,u,o,null)}return;case"dialog":ht("beforetoggle",r),ht("toggle",r),ht("cancel",r),ht("close",r);break;case"iframe":case"object":ht("load",r);break;case"video":case"audio":for(u=0;u<Gu.length;u++)ht(Gu[u],r);break;case"image":ht("error",r),ht("load",r);break;case"details":ht("toggle",r);break;case"embed":case"source":case"link":ht("error",r),ht("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(u=o[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:zt(r,a,X,u,o,null)}return;default:if(Vo(a)){for(oe in o)o.hasOwnProperty(oe)&&(u=o[oe],u!==void 0&&ng(r,a,oe,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&zt(r,a,C,u,o,null))}function QR(r,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,C=null,U=null,X=null,oe=null;for(ie in o){var de=o[ie];if(o.hasOwnProperty(ie)&&de!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":U=de;default:u.hasOwnProperty(ie)||zt(r,a,ie,null,u,de)}}for(var Z in u){var ie=u[Z];if(de=o[Z],u.hasOwnProperty(Z)&&(ie!=null||de!=null))switch(Z){case"type":g=ie;break;case"name":f=ie;break;case"checked":X=ie;break;case"defaultChecked":oe=ie;break;case"value":E=ie;break;case"defaultValue":C=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ie!==de&&zt(r,a,Z,ie,u,de)}}Po(r,E,C,U,X,oe,g,f);return;case"select":ie=E=C=Z=null;for(g in o)if(U=o[g],o.hasOwnProperty(g)&&U!=null)switch(g){case"value":break;case"multiple":ie=U;default:u.hasOwnProperty(g)||zt(r,a,g,null,u,U)}for(f in u)if(g=u[f],U=o[f],u.hasOwnProperty(f)&&(g!=null||U!=null))switch(f){case"value":Z=g;break;case"defaultValue":C=g;break;case"multiple":E=g;default:g!==U&&zt(r,a,f,g,u,U)}a=C,o=E,u=ie,Z!=null?Ua(r,!!o,Z,!1):!!u!=!!o&&(a!=null?Ua(r,!!o,a,!0):Ua(r,!!o,o?[]:"",!1));return;case"textarea":ie=Z=null;for(C in o)if(f=o[C],o.hasOwnProperty(C)&&f!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:zt(r,a,C,null,u,f)}for(E in u)if(f=u[E],g=o[E],u.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":Z=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&zt(r,a,E,f,u,g)}uh(r,Z,ie);return;case"option":for(var Le in o)if(Z=o[Le],o.hasOwnProperty(Le)&&Z!=null&&!u.hasOwnProperty(Le))switch(Le){case"selected":r.selected=!1;break;default:zt(r,a,Le,null,u,Z)}for(U in u)if(Z=u[U],ie=o[U],u.hasOwnProperty(U)&&Z!==ie&&(Z!=null||ie!=null))switch(U){case"selected":r.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:zt(r,a,U,Z,u,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in o)Z=o[qe],o.hasOwnProperty(qe)&&Z!=null&&!u.hasOwnProperty(qe)&&zt(r,a,qe,null,u,Z);for(X in u)if(Z=u[X],ie=o[X],u.hasOwnProperty(X)&&Z!==ie&&(Z!=null||ie!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,a));break;default:zt(r,a,X,Z,u,ie)}return;default:if(Vo(a)){for(var Bt in o)Z=o[Bt],o.hasOwnProperty(Bt)&&Z!==void 0&&!u.hasOwnProperty(Bt)&&ng(r,a,Bt,void 0,u,Z);for(oe in u)Z=u[oe],ie=o[oe],!u.hasOwnProperty(oe)||Z===ie||Z===void 0&&ie===void 0||ng(r,a,oe,Z,u,ie);return}}for(var $ in o)Z=o[$],o.hasOwnProperty($)&&Z!=null&&!u.hasOwnProperty($)&&zt(r,a,$,null,u,Z);for(de in u)Z=u[de],ie=o[de],!u.hasOwnProperty(de)||Z===ie||Z==null&&ie==null||zt(r,a,de,Z,u,ie)}function qT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XR(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],g=f.transferSize,E=f.initiatorType,C=f.duration;if(g&&C&&qT(E)){for(E=0,C=f.responseEnd,u+=1;u<o.length;u++){var U=o[u],X=U.startTime;if(X>C)break;var oe=U.transferSize,de=U.initiatorType;oe&&qT(de)&&(U=U.responseEnd,E+=oe*(U<C?1:(C-X)/(U-X)))}if(--u,a+=8*(g+E)/(f.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var rg=null,ig=null;function df(r){return r.nodeType===9?r:r.ownerDocument}function GT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $T(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function ag(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var sg=null;function WR(){var r=window.event;return r&&r.type==="popstate"?r===sg?!1:(sg=r,!0):(sg=null,!1)}var KT=typeof setTimeout=="function"?setTimeout:void 0,JR=typeof clearTimeout=="function"?clearTimeout:void 0,YT=typeof Promise=="function"?Promise:void 0,ZR=typeof queueMicrotask=="function"?queueMicrotask:typeof YT<"u"?function(r){return YT.resolve(null).then(r).catch(eI)}:KT;function eI(r){setTimeout(function(){throw r})}function us(r){return r==="head"}function QT(r,a){var o=a,u=0;do{var f=o.nextSibling;if(r.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(f),gl(a);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Ku(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Ku(o);for(var g=o.firstChild;g;){var E=g.nextSibling,C=g.nodeName;g[kt]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=E}}else o==="body"&&Ku(r.ownerDocument.body);o=f}while(o);gl(a)}function XT(r,a){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function og(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":og(o),Qt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function tI(r,a,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[kt])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=ii(r.nextSibling),r===null)break}return null}function nI(r,a,o){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=ii(r.nextSibling),r===null))return null;return r}function WT(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=ii(r.nextSibling),r===null))return null;return r}function lg(r){return r.data==="$?"||r.data==="$~"}function ug(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function rI(r,a){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||o.readyState!=="loading")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function ii(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var cg=null;function JT(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(a===0)return ii(r.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}r=r.nextSibling}return null}function ZT(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return r;a--}else o!=="/$"&&o!=="/&"||a++}r=r.previousSibling}return null}function eb(r,a,o){switch(a=df(o),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ku(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Qt(r)}var ai=new Map,tb=new Set;function mf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var _a=J.d;J.d={f:iI,r:aI,D:sI,C:oI,L:lI,m:uI,X:hI,S:cI,M:fI};function iI(){var r=_a.f(),a=af();return r||a}function aI(r){var a=nt(r);a!==null&&a.tag===5&&a.type==="form"?_E(a):_a.r(r)}var dl=typeof document>"u"?null:document;function nb(r,a,o){var u=dl;if(u&&typeof a=="string"&&a){var f=gr(a);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),tb.has(f)||(tb.add(f),r={rel:r,crossOrigin:o,href:a},u.querySelector(f)===null&&(a=u.createElement("link"),Fn(a,"link",r),Kt(a),u.head.appendChild(a)))}}function sI(r){_a.D(r),nb("dns-prefetch",r,null)}function oI(r,a){_a.C(r,a),nb("preconnect",r,a)}function lI(r,a,o){_a.L(r,a,o);var u=dl;if(u&&r&&a){var f='link[rel="preload"][as="'+gr(a)+'"]';a==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+gr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+gr(o.imageSizes)+'"]')):f+='[href="'+gr(r)+'"]';var g=f;switch(a){case"style":g=ml(r);break;case"script":g=pl(r)}ai.has(g)||(r=v({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:r,as:a},o),ai.set(g,r),u.querySelector(f)!==null||a==="style"&&u.querySelector(Yu(g))||a==="script"&&u.querySelector(Qu(g))||(a=u.createElement("link"),Fn(a,"link",r),Kt(a),u.head.appendChild(a)))}}function uI(r,a){_a.m(r,a);var o=dl;if(o&&r){var u=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+gr(u)+'"][href="'+gr(r)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=pl(r)}if(!ai.has(g)&&(r=v({rel:"modulepreload",href:r},a),ai.set(g,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Qu(g)))return}u=o.createElement("link"),Fn(u,"link",r),Kt(u),o.head.appendChild(u)}}}function cI(r,a,o){_a.S(r,a,o);var u=dl;if(u&&r){var f=kn(u).hoistableStyles,g=ml(r);a=a||"default";var E=f.get(g);if(!E){var C={loading:0,preload:null};if(E=u.querySelector(Yu(g)))C.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":a},o),(o=ai.get(g))&&hg(r,o);var U=E=u.createElement("link");Kt(U),Fn(U,"link",r),U._p=new Promise(function(X,oe){U.onload=X,U.onerror=oe}),U.addEventListener("load",function(){C.loading|=1}),U.addEventListener("error",function(){C.loading|=2}),C.loading|=4,pf(E,a,u)}E={type:"stylesheet",instance:E,count:1,state:C},f.set(g,E)}}}function hI(r,a){_a.X(r,a);var o=dl;if(o&&r){var u=kn(o).hoistableScripts,f=pl(r),g=u.get(f);g||(g=o.querySelector(Qu(f)),g||(r=v({src:r,async:!0},a),(a=ai.get(f))&&fg(r,a),g=o.createElement("script"),Kt(g),Fn(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function fI(r,a){_a.M(r,a);var o=dl;if(o&&r){var u=kn(o).hoistableScripts,f=pl(r),g=u.get(f);g||(g=o.querySelector(Qu(f)),g||(r=v({src:r,async:!0,type:"module"},a),(a=ai.get(f))&&fg(r,a),g=o.createElement("script"),Kt(g),Fn(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function rb(r,a,o,u){var f=(f=Te.current)?mf(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=ml(o.href),o=kn(f).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=ml(o.href);var g=kn(f).hoistableStyles,E=g.get(r);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,E),(g=f.querySelector(Yu(r)))&&!g._p&&(E.instance=g,E.state.loading=5),ai.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ai.set(r,o),g||dI(f,r,o,E.state))),a&&u===null)throw Error(i(528,""));return E}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=pl(o),o=kn(f).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ml(r){return'href="'+gr(r)+'"'}function Yu(r){return'link[rel="stylesheet"]['+r+"]"}function ib(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function dI(r,a,o,u){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=r.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Fn(a,"link",o),Kt(a),r.head.appendChild(a))}function pl(r){return'[src="'+gr(r)+'"]'}function Qu(r){return"script[async]"+r}function ab(r,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=r.querySelector('style[data-href~="'+gr(o.href)+'"]');if(u)return a.instance=u,Kt(u),u;var f=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Kt(u),Fn(u,"style",f),pf(u,o.precedence,r),a.instance=u;case"stylesheet":f=ml(o.href);var g=r.querySelector(Yu(f));if(g)return a.state.loading|=4,a.instance=g,Kt(g),g;u=ib(o),(f=ai.get(f))&&hg(u,f),g=(r.ownerDocument||r).createElement("link"),Kt(g);var E=g;return E._p=new Promise(function(C,U){E.onload=C,E.onerror=U}),Fn(g,"link",u),a.state.loading|=4,pf(g,o.precedence,r),a.instance=g;case"script":return g=pl(o.src),(f=r.querySelector(Qu(g)))?(a.instance=f,Kt(f),f):(u=o,(f=ai.get(g))&&(u=v({},o),fg(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),Kt(f),Fn(f,"link",u),r.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,pf(u,o.precedence,r));return a.instance}function pf(r,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,E=0;E<u.length;E++){var C=u[E];if(C.dataset.precedence===a)g=C;else if(g!==f)break}g?g.parentNode.insertBefore(r,g.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(r,a.firstChild))}function hg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function fg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var gf=null;function sb(r,a,o){if(gf===null){var u=new Map,f=gf=new Map;f.set(o,u)}else f=gf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var g=o[f];if(!(g[kt]||g[we]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(a)||"";E=r+E;var C=u.get(E);C?C.push(g):u.set(E,[g])}}return u}function ob(r,a,o){r=r.ownerDocument||r,r.head.insertBefore(o,a==="title"?r.querySelector("head > title"):null)}function mI(r,a,o){if(o===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function lb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function pI(r,a,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=ml(u.href),g=a.querySelector(Yu(f));if(g){a=g._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=yf.bind(r),a.then(r,r)),o.state.loading|=4,o.instance=g,Kt(g);return}g=a.ownerDocument||a,u=ib(u),(f=ai.get(f))&&hg(u,f),g=g.createElement("link"),Kt(g);var E=g;E._p=new Promise(function(C,U){E.onload=C,E.onerror=U}),Fn(g,"link",u),o.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=yf.bind(r),a.addEventListener("load",o),a.addEventListener("error",o))}}var dg=0;function gI(r,a){return r.stylesheets&&r.count===0&&vf(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&vf(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+a);0<r.imgBytes&&dg===0&&(dg=62500*XR());var f=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&vf(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>dg?50:800)+a);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function yf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var _f=null;function vf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,_f=new Map,a.forEach(yI,r),_f=null,yf.call(r))}function yI(r,a){if(!(a.state.loading&4)){var o=_f.get(r);if(o)var u=o.get(null);else{o=new Map,_f.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=a.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,f),o.set(E,f),this.count++,u=yf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),a.state.loading|=4}}var Xu={$$typeof:K,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function _I(r,a,o,u,f,g,E,C,U){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=or(0),this.hiddenUpdates=or(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function ub(r,a,o,u,f,g,E,C,U,X,oe,de){return r=new _I(r,a,o,E,U,X,oe,de,C),a=1,g===!0&&(a|=24),g=Pr(3,null,null,a),r.current=g,g.stateNode=r,a=$m(),a.refCount++,r.pooledCache=a,a.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:a},Xm(g),r}function cb(r){return r?(r=$o,r):$o}function hb(r,a,o,u,f,g){f=cb(f),u.context===null?u.context=f:u.pendingContext=f,u=Ja(a),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Za(r,u,a),o!==null&&(br(o,r,a),Iu(o,r,a))}function fb(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<a?o:a}}function mg(r,a){fb(r,a),(r=r.alternate)&&fb(r,a)}function db(r){if(r.tag===13||r.tag===31){var a=Xs(r,67108864);a!==null&&br(a,r,67108864),mg(r,67108864)}}function mb(r){if(r.tag===13||r.tag===31){var a=Ur();a=W(a);var o=Xs(r,a);o!==null&&br(o,r,a),mg(r,a)}}var Ef=!0;function vI(r,a,o,u){var f=B.T;B.T=null;var g=J.p;try{J.p=2,pg(r,a,o,u)}finally{J.p=g,B.T=f}}function EI(r,a,o,u){var f=B.T;B.T=null;var g=J.p;try{J.p=8,pg(r,a,o,u)}finally{J.p=g,B.T=f}}function pg(r,a,o,u){if(Ef){var f=gg(u);if(f===null)tg(r,a,u,Tf,o),gb(r,u);else if(bI(f,r,a,o,u))u.stopPropagation();else if(gb(r,u),a&4&&-1<TI.indexOf(r)){for(;f!==null;){var g=nt(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=Yr(g.pendingLanes);if(E!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;E;){var U=1<<31-Ge(E);C.entanglements[1]|=U,E&=~U}Fi(g),(xt&6)===0&&(nf=Ft()+500,qu(0))}}break;case 31:case 13:C=Xs(g,2),C!==null&&br(C,g,2),af(),mg(g,2)}if(g=gg(u),g===null&&tg(r,a,u,Tf,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else tg(r,a,u,null,o)}}function gg(r){return r=Qr(r),yg(r)}var Tf=null;function yg(r){if(Tf=null,r=Gt(r),r!==null){var a=l(r);if(a===null)r=null;else{var o=a.tag;if(o===13){if(r=c(a),r!==null)return r;r=null}else if(o===31){if(r=d(a),r!==null)return r;r=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Tf=r,null}function pb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(En()){case ar:return 2;case Xn:return 8;case pn:case le:return 32;case Se:return 268435456;default:return 32}default:return 32}}var _g=!1,cs=null,hs=null,fs=null,Wu=new Map,Ju=new Map,ds=[],TI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gb(r,a){switch(r){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":Wu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ju.delete(a.pointerId)}}function Zu(r,a,o,u,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},a!==null&&(a=nt(a),a!==null&&db(a)),r):(r.eventSystemFlags|=u,a=r.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),r)}function bI(r,a,o,u,f){switch(a){case"focusin":return cs=Zu(cs,r,a,o,u,f),!0;case"dragenter":return hs=Zu(hs,r,a,o,u,f),!0;case"mouseover":return fs=Zu(fs,r,a,o,u,f),!0;case"pointerover":var g=f.pointerId;return Wu.set(g,Zu(Wu.get(g)||null,r,a,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,Ju.set(g,Zu(Ju.get(g)||null,r,a,o,u,f)),!0}return!1}function yb(r){var a=Gt(r.target);if(a!==null){var o=l(a);if(o!==null){if(a=o.tag,a===13){if(a=c(o),a!==null){r.blockedOn=a,Oe(r.priority,function(){mb(o)});return}}else if(a===31){if(a=d(o),a!==null){r.blockedOn=a,Oe(r.priority,function(){mb(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function bf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var o=gg(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);fu=u,o.target.dispatchEvent(u),fu=null}else return a=nt(o),a!==null&&db(a),r.blockedOn=o,!1;a.shift()}return!0}function _b(r,a,o){bf(r)&&o.delete(a)}function SI(){_g=!1,cs!==null&&bf(cs)&&(cs=null),hs!==null&&bf(hs)&&(hs=null),fs!==null&&bf(fs)&&(fs=null),Wu.forEach(_b),Ju.forEach(_b)}function Sf(r,a){r.blockedOn===a&&(r.blockedOn=null,_g||(_g=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,SI)))}var Af=null;function vb(r){Af!==r&&(Af=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Af===r&&(Af=null);for(var a=0;a<r.length;a+=3){var o=r[a],u=r[a+1],f=r[a+2];if(typeof u!="function"){if(yg(u||o)===null)continue;break}var g=nt(o);g!==null&&(r.splice(a,3),a-=3,gp(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function gl(r){function a(U){return Sf(U,r)}cs!==null&&Sf(cs,r),hs!==null&&Sf(hs,r),fs!==null&&Sf(fs,r),Wu.forEach(a),Ju.forEach(a);for(var o=0;o<ds.length;o++){var u=ds[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ds.length&&(o=ds[0],o.blockedOn===null);)yb(o),o.blockedOn===null&&ds.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],E=f[Re]||null;if(typeof g=="function")E||vb(o);else if(E){var C=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[Re]||null)C=E.formAction;else if(yg(f)!==null)continue}else C=E.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),vb(o)}}}function Eb(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(E){return f=E})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function vg(r){this._internalRoot=r}wf.prototype.render=vg.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var o=a.current,u=Ur();hb(o,u,r,a,null,null)},wf.prototype.unmount=vg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;hb(r.current,2,null,r,null,null),af(),a[Ve]=null}};function wf(r){this._internalRoot=r}wf.prototype.unstable_scheduleHydration=function(r){if(r){var a=Ae();r={blockedOn:null,target:r,priority:a};for(var o=0;o<ds.length&&a!==0&&a<ds[o].priority;o++);ds.splice(o,0,r),o===0&&yb(r)}};var Tb=e.version;if(Tb!=="19.2.4")throw Error(i(527,Tb,"19.2.4"));J.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(a),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var AI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cf.isDisabled&&Cf.supportsFiber)try{De=Cf.inject(AI),Pe=Cf}catch{}}return tc.createRoot=function(r,a){if(!s(r))throw Error(i(299));var o=!1,u="",f=IE,g=xE,E=NE;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),a=ub(r,1,!1,null,null,o,u,null,f,g,E,Eb),r[Ve]=a.current,eg(r),new vg(a)},tc.hydrateRoot=function(r,a,o){if(!s(r))throw Error(i(299));var u=!1,f="",g=IE,E=xE,C=NE,U=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.formState!==void 0&&(U=o.formState)),a=ub(r,1,!0,a,o??null,u,f,U,g,E,C,Eb),a.context=cb(null),o=a.current,u=Ur(),u=W(u),f=Ja(u),f.callback=null,Za(o,f,u),o=u,a.current.lanes=o,Ni(a,o),Fi(a),r[Ve]=a.current,eg(r),new wf(a)},tc.version="19.2.4",tc}var Db;function LI(){if(Db)return Sg.exports;Db=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sg.exports=kI(),Sg.exports}var jI=LI();const UI=iA(jI);var Rg={exports:{}},Ig={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob;function zI(){if(Ob)return Ig;Ob=1;var n=Bd();function e(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return Ig.useSyncExternalStoreWithSelector=function(m,p,y,v,S){var w=s(null);if(w.current===null){var O={hasValue:!1,value:null};w.current=O}else O=w.current;w=c(function(){function j(se){if(!G){if(G=!0,H=se,se=v(se),S!==void 0&&O.hasValue){var ee=O.value;if(S(ee,se))return K=ee}return K=se}if(ee=K,t(H,se))return ee;var A=v(se);return S!==void 0&&S(ee,A)?(H=se,ee):(H=se,K=A)}var G=!1,H,K,te=y===void 0?null:y;return[function(){return j(p())},te===null?void 0:function(){return j(te())}]},[p,y,v,S]);var z=i(m,w[0],w[1]);return l(function(){O.hasValue=!0,O.value=z},[z]),d(z),z},Ig}var Mb;function BI(){return Mb||(Mb=1,Rg.exports=zI()),Rg.exports}var HI=BI();function FI(n){n()}function qI(){let n=null,e=null;return{clear(){n=null,e=null},notify(){FI(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!i||n===null||(i=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var Pb={notify(){},get:()=>[]};function GI(n,e){let t,i=Pb,s=0,l=!1;function c(z){y();const j=i.subscribe(z);let G=!1;return()=>{G||(G=!0,j(),v())}}function d(){i.notify()}function m(){O.onStateChange&&O.onStateChange()}function p(){return l}function y(){s++,t||(t=n.subscribe(m),i=qI())}function v(){s--,t&&s===0&&(t(),t=void 0,i.clear(),i=Pb)}function S(){l||(l=!0,y())}function w(){l&&(l=!1,v())}const O={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:m,isSubscribed:p,trySubscribe:S,tryUnsubscribe:w,getListeners:()=>i};return O}var $I=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KI=$I(),YI=()=>typeof navigator<"u"&&navigator.product==="ReactNative",QI=YI(),XI=()=>KI||QI?P.useLayoutEffect:P.useEffect,WI=XI(),xg=Symbol.for("react-redux-context"),Ng=typeof globalThis<"u"?globalThis:{};function JI(){if(!P.createContext)return{};const n=Ng[xg]??(Ng[xg]=new Map);let e=n.get(P.createContext);return e||(e=P.createContext(null),n.set(P.createContext,e)),e}var Ns=JI();function ZI(n){const{children:e,context:t,serverState:i,store:s}=n,l=P.useMemo(()=>{const m=GI(s);return{store:s,subscription:m,getServerState:i?()=>i:void 0}},[s,i]),c=P.useMemo(()=>s.getState(),[s]);WI(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==s.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,c]);const d=t||Ns;return P.createElement(d.Provider,{value:l},e)}var ex=ZI;function Fy(n=Ns){return function(){return P.useContext(n)}}var oA=Fy();function lA(n=Ns){const e=n===Ns?oA:Fy(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var tx=lA();function nx(n=Ns){const e=n===Ns?tx:lA(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var rx=nx(),ix=(n,e)=>n===e;function ax(n=Ns){const e=n===Ns?oA:Fy(n),t=(i,s={})=>{const{equalityFn:l=ix}=typeof s=="function"?{equalityFn:s}:s,c=e(),{store:d,subscription:m,getServerState:p}=c;P.useRef(!0);const y=P.useCallback({[i.name](S){return i(S)}}[i.name],[i]),v=HI.useSyncExternalStoreWithSelector(m.addNestedSub,d.getState,p||d.getState,y,l);return P.useDebugValue(v),v};return Object.assign(t,{withTypes:()=>t}),t}var sx=ax();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var uA=n=>{throw TypeError(n)},ox=(n,e,t)=>e.has(n)||uA("Cannot "+t),Dg=(n,e,t)=>(ox(n,e,"read from private field"),t?t.call(n):e.get(n)),lx=(n,e,t)=>e.has(n)?uA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Vb="popstate";function ux(n={}){function e(s,l){let{pathname:c="/",search:d="",hash:m=""}=ka(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Ac("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=s.location.href,p=m.indexOf("#");d=p===-1?m:m.slice(0,p)}return d+"#"+(typeof l=="string"?l:Xi(l))}function i(s,l){un(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return hx(e,t,i,n)}function lt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function un(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cx(){return Math.random().toString(36).substring(2,10)}function kb(n,e){return{usr:n.state,key:n.key,idx:e}}function Ac(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ka(e):e,state:t,key:e&&e.key||i||cx()}}function Xi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ka(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function hx(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:l=!1}=i,c=s.history,d="POP",m=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function v(){d="POP";let j=y(),G=j==null?null:j-p;p=j,m&&m({action:d,location:z.location,delta:G})}function S(j,G){d="PUSH";let H=Ac(z.location,j,G);t&&t(H,j),p=y()+1;let K=kb(H,p),te=z.createHref(H);try{c.pushState(K,"",te)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;s.location.assign(te)}l&&m&&m({action:d,location:z.location,delta:1})}function w(j,G){d="REPLACE";let H=Ac(z.location,j,G);t&&t(H,j),p=y();let K=kb(H,p),te=z.createHref(H);c.replaceState(K,"",te),l&&m&&m({action:d,location:z.location,delta:0})}function O(j){return cA(j)}let z={get action(){return d},get location(){return n(s,c)},listen(j){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(Vb,v),m=j,()=>{s.removeEventListener(Vb,v),m=null}},createHref(j){return e(s,j)},createURL:O,encodeLocation(j){let G=O(j);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:S,replace:w,go(j){return c.go(j)}};return z}function cA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),lt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Xi(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}var oc,Lb=class{constructor(n){if(lx(this,oc,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Dg(this,oc).has(n))return Dg(this,oc).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Dg(this,oc).set(n,e)}};oc=new WeakMap;var fx=new Set(["lazy","caseSensitive","path","id","index","children"]);function dx(n){return fx.has(n)}var mx=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function px(n){return mx.has(n)}function gx(n){return n.index===!0}function wc(n,e,t=[],i={},s=!1){return n.map((l,c)=>{let d=[...t,String(c)],m=typeof l.id=="string"?l.id:d.join("-");if(lt(l.index!==!0||!l.children,"Cannot specify children on an index route"),lt(s||!i[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),gx(l)){let p={...l,id:m};return i[m]=jb(p,e(p)),p}else{let p={...l,id:m,children:void 0};return i[m]=jb(p,e(p)),l.children&&(p.children=wc(l.children,e,d,i,s)),p}})}function jb(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function ys(n,e,t="/"){return lc(n,e,t,!1)}function lc(n,e,t,i){let s=typeof e=="string"?ka(e):e,l=ui(s.pathname||"/",t);if(l==null)return null;let c=hA(n);_x(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=xx(l);d=Rx(c[m],p,i)}return d}function yx(n,e){let{route:t,pathname:i,params:s}=n;return{id:t.id,pathname:i,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function hA(n,e=[],t=[],i="",s=!1){let l=(c,d,m=s,p)=>{let y={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&m)return;lt(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let v=Gi([i,y.relativePath]),S=t.concat(y);c.children&&c.children.length>0&&(lt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),hA(c.children,e,S,v,m)),!(c.path==null&&!c.index)&&e.push({path:v,score:wx(v,c.index),routesMeta:S})};return n.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))l(c,d);else for(let p of fA(c.path))l(c,d,!0,p)}),e}function fA(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return s?[l,""]:[l];let c=fA(i.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),s&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function _x(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Cx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var vx=/^:[\w-]+$/,Ex=3,Tx=2,bx=1,Sx=10,Ax=-2,Ub=n=>n==="*";function wx(n,e){let t=n.split("/"),i=t.length;return t.some(Ub)&&(i+=Ax),e&&(i+=Tx),t.filter(s=>!Ub(s)).reduce((s,l)=>s+(vx.test(l)?Ex:l===""?bx:Sx),i)}function Cx(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function Rx(n,e,t=!1){let{routesMeta:i}=n,s={},l="/",c=[];for(let d=0;d<i.length;++d){let m=i[d],p=d===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=fd({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),S=m.route;if(!v&&p&&t&&!i[i.length-1].route.index&&(v=fd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:Gi([l,v.pathname]),pathnameBase:Ox(Gi([l,v.pathnameBase])),route:S}),v.pathnameBase!=="/"&&(l=Gi([l,v.pathnameBase]))}return c}function fd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Ix(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:v},S)=>{if(y==="*"){let O=d[S]||"";c=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const w=d[S];return v&&!w?p[y]=void 0:p[y]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function Ix(n,e=!1,t=!0){un(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function xx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return un(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ui(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Nx({basename:n,pathname:e}){return e==="/"?n:Gi([n,e])}var dA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qy=n=>dA.test(n);function Dx(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?ka(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=zb(t.substring(1),"/"):l=zb(t,e)):l=e,{pathname:l,search:Mx(i),hash:Px(s)}}function zb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Og(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Hd(n){let e=mA(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Fd(n,e,t,i=!1){let s;typeof n=="string"?s=ka(n):(s={...n},lt(!s.pathname||!s.pathname.includes("?"),Og("?","pathname","search",s)),lt(!s.pathname||!s.pathname.includes("#"),Og("#","pathname","hash",s)),lt(!s.search||!s.search.includes("#"),Og("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=t;else{let v=e.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),v-=1;s.pathname=S.join("/")}d=v>=0?e[v]:"/"}let m=Dx(s,d),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var Gi=n=>n.join("/").replace(/\/\/+/g,"/"),Ox=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Mx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Px=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,zc=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Cc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Bc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var pA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gA(n,e){let t=n;if(typeof t!="string"||!dA.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,s=!1;if(pA)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=ui(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:s=!0}catch{un(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:s,to:t}}var bs=Symbol("Uninstrumented");function Vx(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let d of c)l[d]&&t[d].push(l[d])}}));let i={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=Il(t.lazy,e.lazy,()=>{});s&&(i.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],d=t[`lazy.${l}`];if(typeof c=="function"&&d.length>0){let m=Il(d,c,()=>{});m&&(i.lazy=Object.assign(i.lazy||{},{[l]:m}))}})}return["loader","action"].forEach(s=>{let l=e[s];if(typeof l=="function"&&t[s].length>0){let c=l[bs]??l,d=Il(t[s],c,(...m)=>Bb(m[0]));d&&(s==="loader"&&c.hydrate===!0&&(d.hydrate=!0),d[bs]=c,i[s]=d)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(i.middleware=e.middleware.map(s=>{let l=s[bs]??s,c=Il(t.middleware,l,(...d)=>Bb(d[0]));return c?(c[bs]=l,c):s})),i}function kx(n,e){let t={navigate:[],fetch:[]};if(e.forEach(i=>i({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&t[c].push(s[c])}})),t.navigate.length>0){let i=n.navigate[bs]??n.navigate,s=Il(t.navigate,i,(...l)=>{let[c,d]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?Xi(c):".",...Hb(n,d??{})}});s&&(s[bs]=i,n.navigate=s)}if(t.fetch.length>0){let i=n.fetch[bs]??n.fetch,s=Il(t.fetch,i,(...l)=>{let[c,,d,m]=l;return{href:d??".",fetcherKey:c,...Hb(n,m??{})}});s&&(s[bs]=i,n.fetch=s)}return n}function Il(n,e,t){return n.length===0?null:async(...i)=>{let s=await yA(n,t(...i),()=>e(...i),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function yA(n,e,t,i){let s=n[i],l;if(s){let c,d=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=yA(n,e,t,i-1),l=await c,lt(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(d,e)}catch(m){console.error("An instrumentation function threw an error:",m)}c||await d(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Bb(n){let{request:e,context:t,params:i,unstable_pattern:s}=n;return{request:Lx(e),params:{...i},unstable_pattern:s,context:jx(t)}}function Hb(n,e){return{currentUrl:Xi(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function Lx(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function jx(n){if(zx(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var Ux=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zx(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===Ux}var _A=["POST","PUT","PATCH","DELETE"],Bx=new Set(_A),Hx=["GET",..._A],Fx=new Set(Hx),vA=new Set([301,302,303,307,308]),qx=new Set([307,308]),Mg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Gx={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},nc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},$x=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),EA="remix-router-transitions",TA=Symbol("ResetLoaderData");function Kx(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";lt(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=n.hydrationRouteProperties||[],s=n.mapRouteProperties||$x,l=s;if(n.unstable_instrumentations){let k=n.unstable_instrumentations;l=q=>({...s(q),...Vx(k.map(W=>W.route).filter(Boolean),q)})}let c={},d=wc(n.routes,l,void 0,c),m,p=n.basename||"/";p.startsWith("/")||(p=`/${p}`);let y=n.dataStrategy||Jx,v={...n.future},S=null,w=new Set,O=null,z=null,j=null,G=n.hydrationData!=null,H=ys(d,n.history.location,p),K=!1,te=null,se;if(H==null&&!n.patchRoutesOnNavigation){let k=si(404,{pathname:n.history.location.pathname}),{matches:q,route:W}=Rf(d);se=!0,H=q,te={[W.id]:k}}else if(H&&!n.hydrationData&&Zi(H,d,n.history.location.pathname).active&&(H=null),H)if(H.some(k=>k.route.lazy))se=!1;else if(!H.some(k=>Gy(k.route)))se=!0;else{let k=n.hydrationData?n.hydrationData.loaderData:null,q=n.hydrationData?n.hydrationData.errors:null;if(q){let W=H.findIndex(ge=>q[ge.route.id]!==void 0);se=H.slice(0,W+1).every(ge=>!sy(ge.route,k,q))}else se=H.every(W=>!sy(W.route,k,q))}else{se=!1,H=[];let k=Zi(null,d,n.history.location.pathname);k.active&&k.matches&&(K=!0,H=k.matches)}let ee,A={historyAction:n.history.action,location:n.history.location,matches:H,initialized:se,navigation:Mg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||te,fetchers:new Map,blockers:new Map},I="POP",R=null,N=!1,M,V=!1,D=new Map,ye=null,me=!1,B=!1,J=new Set,ue=new Map,ce=0,be=-1,L=new Map,re=new Set,ve=new Map,ae=new Map,_e=new Set,Te=new Map,Ne,je=null;function Fe(){if(S=n.history.listen(({action:k,location:q,delta:W})=>{if(Ne){Ne(),Ne=void 0;return}un(Te.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ge=xi({currentLocation:A.location,nextLocation:q,historyAction:k});if(ge&&W!=null){let Ae=new Promise(Oe=>{Ne=Oe});n.history.go(W*-1),sr(ge,{state:"blocked",location:q,proceed(){sr(ge,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),Ae.then(()=>n.history.go(W))},reset(){let Oe=new Map(A.blockers);Oe.set(ge,nc),We({blockers:Oe})}}),R==null||R.resolve(),R=null;return}return an(k,q)}),t){gN(e,D);let k=()=>yN(e,D);e.addEventListener("pagehide",k),ye=()=>e.removeEventListener("pagehide",k)}return A.initialized||an("POP",A.location,{initialHydration:!0}),ee}function Et(){S&&S(),ye&&ye(),w.clear(),M&&M.abort(),A.fetchers.forEach((k,q)=>Ee(q)),A.blockers.forEach((k,q)=>On(q))}function wt(k){return w.add(k),()=>w.delete(k)}function We(k,q={}){k.matches&&(k.matches=k.matches.map(Ae=>{let Oe=c[Ae.route.id],ke=Ae.route;return ke.element!==Oe.element||ke.errorElement!==Oe.errorElement||ke.hydrateFallbackElement!==Oe.hydrateFallbackElement?{...Ae,route:Oe}:Ae})),A={...A,...k};let W=[],ge=[];A.fetchers.forEach((Ae,Oe)=>{Ae.state==="idle"&&(_e.has(Oe)?W.push(Oe):ge.push(Oe))}),_e.forEach(Ae=>{!A.fetchers.has(Ae)&&!ue.has(Ae)&&W.push(Ae)}),[...w].forEach(Ae=>Ae(A,{deletedFetchers:W,newErrors:k.errors??null,viewTransitionOpts:q.viewTransitionOpts,flushSync:q.flushSync===!0})),W.forEach(Ae=>Ee(Ae)),ge.forEach(Ae=>A.fetchers.delete(Ae))}function Ht(k,q,{flushSync:W}={}){var $e,ze;let ge=A.actionData!=null&&A.navigation.formMethod!=null&&tr(A.navigation.formMethod)&&A.navigation.state==="loading"&&(($e=k.state)==null?void 0:$e._isRedirect)!==!0,Ae;q.actionData?Object.keys(q.actionData).length>0?Ae=q.actionData:Ae=null:ge?Ae=A.actionData:Ae=null;let Oe=q.loaderData?Jb(A.loaderData,q.loaderData,q.matches||[],q.errors):A.loaderData,ke=A.blockers;ke.size>0&&(ke=new Map(ke),ke.forEach((Qe,ot)=>ke.set(ot,nc)));let we=me?!1:Mo(k,q.matches||A.matches),Re=N===!0||A.navigation.formMethod!=null&&tr(A.navigation.formMethod)&&((ze=k.state)==null?void 0:ze._isRedirect)!==!0;m&&(d=m,m=void 0),me||I==="POP"||(I==="PUSH"?n.history.push(k,k.state):I==="REPLACE"&&n.history.replace(k,k.state));let Ve;if(I==="POP"){let Qe=D.get(A.location.pathname);Qe&&Qe.has(k.pathname)?Ve={currentLocation:A.location,nextLocation:k}:D.has(k.pathname)&&(Ve={currentLocation:k,nextLocation:A.location})}else if(V){let Qe=D.get(A.location.pathname);Qe?Qe.add(k.pathname):(Qe=new Set([k.pathname]),D.set(A.location.pathname,Qe)),Ve={currentLocation:A.location,nextLocation:k}}We({...q,actionData:Ae,loaderData:Oe,historyAction:I,location:k,initialized:!0,navigation:Mg,revalidation:"idle",restoreScrollPosition:we,preventScrollReset:Re,blockers:ke},{viewTransitionOpts:Ve,flushSync:W===!0}),I="POP",N=!1,V=!1,me=!1,B=!1,R==null||R.resolve(),R=null,je==null||je.resolve(),je=null}async function Zt(k,q){if(R==null||R.resolve(),R=null,typeof k=="number"){R||(R=n0());let ot=R.promise;return n.history.go(k),ot}let W=ay(A.location,A.matches,p,k,q==null?void 0:q.fromRouteId,q==null?void 0:q.relative),{path:ge,submission:Ae,error:Oe}=Fb(!1,W,q),ke=A.location,we=Ac(A.location,ge,q&&q.state);we={...we,...n.history.encodeLocation(we)};let Re=q&&q.replace!=null?q.replace:void 0,Ve="PUSH";Re===!0?Ve="REPLACE":Re===!1||Ae!=null&&tr(Ae.formMethod)&&Ae.formAction===A.location.pathname+A.location.search&&(Ve="REPLACE");let $e=q&&"preventScrollReset"in q?q.preventScrollReset===!0:void 0,ze=(q&&q.flushSync)===!0,Qe=xi({currentLocation:ke,nextLocation:we,historyAction:Ve});if(Qe){sr(Qe,{state:"blocked",location:we,proceed(){sr(Qe,{state:"proceeding",proceed:void 0,reset:void 0,location:we}),Zt(k,q)},reset(){let ot=new Map(A.blockers);ot.set(Qe,nc),We({blockers:ot})}});return}await an(Ve,we,{submission:Ae,pendingError:Oe,preventScrollReset:$e,replace:q&&q.replace,enableViewTransition:q&&q.viewTransition,flushSync:ze,callSiteDefaultShouldRevalidate:q&&q.unstable_defaultShouldRevalidate})}function Kr(){je||(je=n0()),Xn(),We({revalidation:"loading"});let k=je.promise;return A.navigation.state==="submitting"?k:A.navigation.state==="idle"?(an(A.historyAction,A.location,{startUninterruptedRevalidation:!0}),k):(an(I||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:V===!0}),k)}async function an(k,q,W){M&&M.abort(),M=null,I=k,me=(W&&W.startUninterruptedRevalidation)===!0,Nr(A.location,A.matches),N=(W&&W.preventScrollReset)===!0,V=(W&&W.enableViewTransition)===!0;let ge=m||d,Ae=W&&W.overrideNavigation,Oe=W!=null&&W.initialHydration&&A.matches&&A.matches.length>0&&!K?A.matches:ys(ge,q,p),ke=(W&&W.flushSync)===!0;if(Oe&&A.initialized&&!B&&sN(A.location,q)&&!(W&&W.submission&&tr(W.submission.formMethod))){Ht(q,{matches:Oe},{flushSync:ke});return}let we=Zi(Oe,ge,q.pathname);if(we.active&&we.matches&&(Oe=we.matches),!Oe){let{error:Qt,notFoundMatches:Gt,route:nt}=en(q.pathname);Ht(q,{matches:Gt,loaderData:{},errors:{[nt.id]:Qt}},{flushSync:ke});return}M=new AbortController;let Re=Tl(n.history,q,M.signal,W&&W.submission),Ve=n.getContext?await n.getContext():new Lb,$e;if(W&&W.pendingError)$e=[_s(Oe).route.id,{type:"error",error:W.pendingError}];else if(W&&W.submission&&tr(W.submission.formMethod)){let Qt=await Qn(Re,q,W.submission,Oe,Ve,we.active,W&&W.initialHydration===!0,{replace:W.replace,flushSync:ke});if(Qt.shortCircuited)return;if(Qt.pendingActionResult){let[Gt,nt]=Qt.pendingActionResult;if(zr(nt)&&Cc(nt.error)&&nt.error.status===404){M=null,Ht(q,{matches:Qt.matches,loaderData:{},errors:{[Gt]:nt.error}});return}}Oe=Qt.matches||Oe,$e=Qt.pendingActionResult,Ae=Pg(q,W.submission),ke=!1,we.active=!1,Re=Tl(n.history,Re.url,Re.signal)}let{shortCircuited:ze,matches:Qe,loaderData:ot,errors:kt}=await Ir(Re,q,Oe,Ve,we.active,Ae,W&&W.submission,W&&W.fetcherSubmission,W&&W.replace,W&&W.initialHydration===!0,ke,$e,W&&W.callSiteDefaultShouldRevalidate);ze||(M=null,Ht(q,{matches:Qe||Oe,...Zb($e),loaderData:ot,errors:kt}))}async function Qn(k,q,W,ge,Ae,Oe,ke,we={}){Xn();let Re=mN(q,W);if(We({navigation:Re},{flushSync:we.flushSync===!0}),Oe){let ze=await or(ge,q.pathname,k.signal);if(ze.type==="aborted")return{shortCircuited:!0};if(ze.type==="error"){if(ze.partialMatches.length===0){let{matches:ot,route:kt}=Rf(d);return{matches:ot,pendingActionResult:[kt.id,{type:"error",error:ze.error}]}}let Qe=_s(ze.partialMatches).route.id;return{matches:ze.partialMatches,pendingActionResult:[Qe,{type:"error",error:ze.error}]}}else if(ze.matches)ge=ze.matches;else{let{notFoundMatches:Qe,error:ot,route:kt}=en(q.pathname);return{matches:Qe,pendingActionResult:[kt.id,{type:"error",error:ot}]}}}let Ve,$e=Hf(ge,q);if(!$e.route.action&&!$e.route.lazy)Ve={type:"error",error:si(405,{method:k.method,pathname:q.pathname,routeId:$e.route.id})};else{let ze=Dl(l,c,k,ge,$e,ke?[]:i,Ae),Qe=await En(k,ze,Ae,null);if(Ve=Qe[$e.route.id],!Ve){for(let ot of ge)if(Qe[ot.route.id]){Ve=Qe[ot.route.id];break}}if(k.signal.aborted)return{shortCircuited:!0}}if(ho(Ve)){let ze;return we&&we.replace!=null?ze=we.replace:ze=Qb(Ve.response.headers.get("Location"),new URL(k.url),p,n.history)===A.location.pathname+A.location.search,await Ft(k,Ve,!0,{submission:W,replace:ze}),{shortCircuited:!0}}if(zr(Ve)){let ze=_s(ge,$e.route.id);return(we&&we.replace)!==!0&&(I="PUSH"),{matches:ge,pendingActionResult:[ze.route.id,Ve,$e.route.id]}}return{matches:ge,pendingActionResult:[$e.route.id,Ve]}}async function Ir(k,q,W,ge,Ae,Oe,ke,we,Re,Ve,$e,ze,Qe){let ot=Oe||Pg(q,ke),kt=ke||we||t0(ot),Qt=!me&&!Ve;if(Ae){if(Qt){let on=Mt(ze);We({navigation:ot,...on!==void 0?{actionData:on}:{}},{flushSync:$e})}let ut=await or(W,q.pathname,k.signal);if(ut.type==="aborted")return{shortCircuited:!0};if(ut.type==="error"){if(ut.partialMatches.length===0){let{matches:Tn,route:Lt}=Rf(d);return{matches:Tn,loaderData:{},errors:{[Lt.id]:ut.error}}}let on=_s(ut.partialMatches).route.id;return{matches:ut.partialMatches,loaderData:{},errors:{[on]:ut.error}}}else if(ut.matches)W=ut.matches;else{let{error:on,notFoundMatches:Tn,route:Lt}=en(q.pathname);return{matches:Tn,loaderData:{},errors:{[Lt.id]:on}}}}let Gt=m||d,{dsMatches:nt,revalidatingFetchers:$t}=qb(k,ge,l,c,n.history,A,W,kt,q,Ve?[]:i,Ve===!0,B,J,_e,ve,re,Gt,p,n.patchRoutesOnNavigation!=null,ze,Qe);if(be=++ce,!n.dataStrategy&&!nt.some(ut=>ut.shouldLoad)&&!nt.some(ut=>ut.route.middleware&&ut.route.middleware.length>0)&&$t.length===0){let ut=Ge();return Ht(q,{matches:W,loaderData:{},errors:ze&&zr(ze[1])?{[ze[0]]:ze[1].error}:null,...Zb(ze),...ut?{fetchers:new Map(A.fetchers)}:{}},{flushSync:$e}),{shortCircuited:!0}}if(Qt){let ut={};if(!Ae){ut.navigation=ot;let on=Mt(ze);on!==void 0&&(ut.actionData=on)}$t.length>0&&(ut.fetchers=st($t)),We(ut,{flushSync:$e})}$t.forEach(ut=>{Pe(ut.key),ut.controller&&ue.set(ut.key,ut.controller)});let kn=()=>$t.forEach(ut=>Pe(ut.key));M&&M.signal.addEventListener("abort",kn);let{loaderResults:Kt,fetcherResults:mr}=await ar(nt,$t,k,ge);if(k.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",kn),$t.forEach(ut=>ue.delete(ut.key));let Wn=If(Kt);if(Wn)return await Ft(k,Wn.result,!0,{replace:Re}),{shortCircuited:!0};if(Wn=If(mr),Wn)return re.add(Wn.key),await Ft(k,Wn.result,!0,{replace:Re}),{shortCircuited:!0};let{loaderData:pr,errors:Jn}=Wb(A,W,Kt,ze,$t,mr);Ve&&A.errors&&(Jn={...A.errors,...Jn});let Dr=Ge(),Di=bt(be),Oi=Dr||Di||$t.length>0;return{matches:W,loaderData:pr,errors:Jn,...Oi?{fetchers:new Map(A.fetchers)}:{}}}function Mt(k){if(k&&!zr(k[1]))return{[k[0]]:k[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function st(k){return k.forEach(q=>{let W=A.fetchers.get(q.key),ge=rc(void 0,W?W.data:void 0);A.fetchers.set(q.key,ge)}),new Map(A.fetchers)}async function Dn(k,q,W,ge){Pe(k);let Ae=(ge&&ge.flushSync)===!0,Oe=m||d,ke=ay(A.location,A.matches,p,W,q,ge==null?void 0:ge.relative),we=ys(Oe,ke,p),Re=Zi(we,Oe,ke);if(Re.active&&Re.matches&&(we=Re.matches),!we){le(k,q,si(404,{pathname:ke}),{flushSync:Ae});return}let{path:Ve,submission:$e,error:ze}=Fb(!0,ke,ge);if(ze){le(k,q,ze,{flushSync:Ae});return}let Qe=n.getContext?await n.getContext():new Lb,ot=(ge&&ge.preventScrollReset)===!0;if($e&&tr($e.formMethod)){await Ri(k,q,Ve,we,Qe,Re.active,Ae,ot,$e,ge&&ge.unstable_defaultShouldRevalidate);return}ve.set(k,{routeId:q,path:Ve}),await Ii(k,q,Ve,we,Qe,Re.active,Ae,ot,$e)}async function Ri(k,q,W,ge,Ae,Oe,ke,we,Re,Ve){Xn(),ve.delete(k);let $e=A.fetchers.get(k);pn(k,pN(Re,$e),{flushSync:ke});let ze=new AbortController,Qe=Tl(n.history,W,ze.signal,Re);if(Oe){let rt=await or(ge,new URL(Qe.url).pathname,Qe.signal,k);if(rt.type==="aborted")return;if(rt.type==="error"){le(k,q,rt.error,{flushSync:ke});return}else if(rt.matches)ge=rt.matches;else{le(k,q,si(404,{pathname:W}),{flushSync:ke});return}}let ot=Hf(ge,W);if(!ot.route.action&&!ot.route.lazy){let rt=si(405,{method:Re.formMethod,pathname:W,routeId:q});le(k,q,rt,{flushSync:ke});return}ue.set(k,ze);let kt=ce,Qt=Dl(l,c,Qe,ge,ot,i,Ae),Gt=await En(Qe,Qt,Ae,k),nt=Gt[ot.route.id];if(!nt){for(let rt of Qt)if(Gt[rt.route.id]){nt=Gt[rt.route.id];break}}if(Qe.signal.aborted){ue.get(k)===ze&&ue.delete(k);return}if(_e.has(k)){if(ho(nt)||zr(nt)){pn(k,Ta(void 0));return}}else{if(ho(nt))if(ue.delete(k),be>kt){pn(k,Ta(void 0));return}else return re.add(k),pn(k,rc(Re)),Ft(Qe,nt,!1,{fetcherSubmission:Re,preventScrollReset:we});if(zr(nt)){le(k,q,nt.error);return}}let $t=A.navigation.location||A.location,kn=Tl(n.history,$t,ze.signal),Kt=m||d,mr=A.navigation.state!=="idle"?ys(Kt,A.navigation.location,p):A.matches;lt(mr,"Didn't find any matches after fetcher action");let Wn=++ce;L.set(k,Wn);let pr=rc(Re,nt.data);A.fetchers.set(k,pr);let{dsMatches:Jn,revalidatingFetchers:Dr}=qb(kn,Ae,l,c,n.history,A,mr,Re,$t,i,!1,B,J,_e,ve,re,Kt,p,n.patchRoutesOnNavigation!=null,[ot.route.id,nt],Ve);Dr.filter(rt=>rt.key!==k).forEach(rt=>{let Or=rt.key,ja=A.fetchers.get(Or),Rt=rc(void 0,ja?ja.data:void 0);A.fetchers.set(Or,Rt),Pe(Or),rt.controller&&ue.set(Or,rt.controller)}),We({fetchers:new Map(A.fetchers)});let Di=()=>Dr.forEach(rt=>Pe(rt.key));ze.signal.addEventListener("abort",Di);let{loaderResults:Oi,fetcherResults:ut}=await ar(Jn,Dr,kn,Ae);if(ze.signal.aborted)return;if(ze.signal.removeEventListener("abort",Di),L.delete(k),ue.delete(k),Dr.forEach(rt=>ue.delete(rt.key)),A.fetchers.has(k)){let rt=Ta(nt.data);A.fetchers.set(k,rt)}let on=If(Oi);if(on)return Ft(kn,on.result,!1,{preventScrollReset:we});if(on=If(ut),on)return re.add(on.key),Ft(kn,on.result,!1,{preventScrollReset:we});let{loaderData:Tn,errors:Lt}=Wb(A,mr,Oi,void 0,Dr,ut);bt(Wn),A.navigation.state==="loading"&&Wn>be?(lt(I,"Expected pending action"),M&&M.abort(),Ht(A.navigation.location,{matches:mr,loaderData:Tn,errors:Lt,fetchers:new Map(A.fetchers)})):(We({errors:Lt,loaderData:Jb(A.loaderData,Tn,mr,Lt),fetchers:new Map(A.fetchers)}),B=!1)}async function Ii(k,q,W,ge,Ae,Oe,ke,we,Re){let Ve=A.fetchers.get(k);pn(k,rc(Re,Ve?Ve.data:void 0),{flushSync:ke});let $e=new AbortController,ze=Tl(n.history,W,$e.signal);if(Oe){let nt=await or(ge,new URL(ze.url).pathname,ze.signal,k);if(nt.type==="aborted")return;if(nt.type==="error"){le(k,q,nt.error,{flushSync:ke});return}else if(nt.matches)ge=nt.matches;else{le(k,q,si(404,{pathname:W}),{flushSync:ke});return}}let Qe=Hf(ge,W);ue.set(k,$e);let ot=ce,kt=Dl(l,c,ze,ge,Qe,i,Ae),Gt=(await En(ze,kt,Ae,k))[Qe.route.id];if(ue.get(k)===$e&&ue.delete(k),!ze.signal.aborted){if(_e.has(k)){pn(k,Ta(void 0));return}if(ho(Gt))if(be>ot){pn(k,Ta(void 0));return}else{re.add(k),await Ft(ze,Gt,!1,{preventScrollReset:we});return}if(zr(Gt)){le(k,q,Gt.error);return}pn(k,Ta(Gt.data))}}async function Ft(k,q,W,{submission:ge,fetcherSubmission:Ae,preventScrollReset:Oe,replace:ke}={}){W||(R==null||R.resolve(),R=null),q.response.headers.has("X-Remix-Revalidate")&&(B=!0);let we=q.response.headers.get("Location");lt(we,"Expected a Location header on the redirect Response"),we=Qb(we,new URL(k.url),p,n.history);let Re=Ac(A.location,we,{_isRedirect:!0});if(t){let kt=!1;if(q.response.headers.has("X-Remix-Reload-Document"))kt=!0;else if(qy(we)){const Qt=cA(we,!0);kt=Qt.origin!==e.location.origin||ui(Qt.pathname,p)==null}if(kt){ke?e.location.replace(we):e.location.assign(we);return}}M=null;let Ve=ke===!0||q.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:$e,formAction:ze,formEncType:Qe}=A.navigation;!ge&&!Ae&&$e&&ze&&Qe&&(ge=t0(A.navigation));let ot=ge||Ae;if(qx.has(q.response.status)&&ot&&tr(ot.formMethod))await an(Ve,Re,{submission:{...ot,formAction:we},preventScrollReset:Oe||N,enableViewTransition:W?V:void 0});else{let kt=Pg(Re,ge);await an(Ve,Re,{overrideNavigation:kt,fetcherSubmission:Ae,preventScrollReset:Oe||N,enableViewTransition:W?V:void 0})}}async function En(k,q,W,ge){var ke;let Ae,Oe={};try{Ae=await eN(y,k,q,ge,W,!1)}catch(we){return q.filter(Re=>Re.shouldLoad).forEach(Re=>{Oe[Re.route.id]={type:"error",error:we}}),Oe}if(k.signal.aborted)return Oe;if(!tr(k.method))for(let we of q){if(((ke=Ae[we.route.id])==null?void 0:ke.type)==="error")break;!Ae.hasOwnProperty(we.route.id)&&!A.loaderData.hasOwnProperty(we.route.id)&&(!A.errors||!A.errors.hasOwnProperty(we.route.id))&&we.shouldCallHandler()&&(Ae[we.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${we.route.id}`)})}for(let[we,Re]of Object.entries(Ae))if(cN(Re)){let Ve=Re.result;Oe[we]={type:"redirect",response:iN(Ve,k,we,q,p)}}else Oe[we]=await rN(Re);return Oe}async function ar(k,q,W,ge){let Ae=En(W,k,ge,null),Oe=Promise.all(q.map(async Re=>{if(Re.matches&&Re.match&&Re.request&&Re.controller){let $e=(await En(Re.request,Re.matches,ge,Re.key))[Re.match.route.id];return{[Re.key]:$e}}else return Promise.resolve({[Re.key]:{type:"error",error:si(404,{pathname:Re.path})}})})),ke=await Ae,we=(await Oe).reduce((Re,Ve)=>Object.assign(Re,Ve),{});return{loaderResults:ke,fetcherResults:we}}function Xn(){B=!0,ve.forEach((k,q)=>{ue.has(q)&&J.add(q),Pe(q)})}function pn(k,q,W={}){A.fetchers.set(k,q),We({fetchers:new Map(A.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function le(k,q,W,ge={}){let Ae=_s(A.matches,q);Ee(k),We({errors:{[Ae.route.id]:W},fetchers:new Map(A.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function Se(k){return ae.set(k,(ae.get(k)||0)+1),_e.has(k)&&_e.delete(k),A.fetchers.get(k)||Gx}function Ie(k,q){Pe(k,q==null?void 0:q.reason),pn(k,Ta(null))}function Ee(k){let q=A.fetchers.get(k);ue.has(k)&&!(q&&q.state==="loading"&&L.has(k))&&Pe(k),ve.delete(k),L.delete(k),re.delete(k),_e.delete(k),J.delete(k),A.fetchers.delete(k)}function De(k){let q=(ae.get(k)||0)-1;q<=0?(ae.delete(k),_e.add(k)):ae.set(k,q),We({fetchers:new Map(A.fetchers)})}function Pe(k,q){let W=ue.get(k);W&&(W.abort(q),ue.delete(k))}function Ct(k){for(let q of k){let W=Se(q),ge=Ta(W.data);A.fetchers.set(q,ge)}}function Ge(){let k=[],q=!1;for(let W of re){let ge=A.fetchers.get(W);lt(ge,`Expected fetcher: ${W}`),ge.state==="loading"&&(re.delete(W),k.push(W),q=!0)}return Ct(k),q}function bt(k){let q=[];for(let[W,ge]of L)if(ge<k){let Ae=A.fetchers.get(W);lt(Ae,`Expected fetcher: ${W}`),Ae.state==="loading"&&(Pe(W),L.delete(W),q.push(W))}return Ct(q),q.length>0}function sn(k,q){let W=A.blockers.get(k)||nc;return Te.get(k)!==q&&Te.set(k,q),W}function On(k){A.blockers.delete(k),Te.delete(k)}function sr(k,q){let W=A.blockers.get(k)||nc;lt(W.state==="unblocked"&&q.state==="blocked"||W.state==="blocked"&&q.state==="blocked"||W.state==="blocked"&&q.state==="proceeding"||W.state==="blocked"&&q.state==="unblocked"||W.state==="proceeding"&&q.state==="unblocked",`Invalid blocker state transition: ${W.state} -> ${q.state}`);let ge=new Map(A.blockers);ge.set(k,q),We({blockers:ge})}function xi({currentLocation:k,nextLocation:q,historyAction:W}){if(Te.size===0)return;Te.size>1&&un(!1,"A router only supports one blocker at a time");let ge=Array.from(Te.entries()),[Ae,Oe]=ge[ge.length-1],ke=A.blockers.get(Ae);if(!(ke&&ke.state==="proceeding")&&Oe({currentLocation:k,nextLocation:q,historyAction:W}))return Ae}function en(k){let q=si(404,{pathname:k}),W=m||d,{matches:ge,route:Ae}=Rf(W);return{notFoundMatches:ge,route:Ae,error:q}}function Yr(k,q,W){if(O=k,j=q,z=W||null,!G&&A.navigation===Mg){G=!0;let ge=Mo(A.location,A.matches);ge!=null&&We({restoreScrollPosition:ge})}return()=>{O=null,j=null,z=null}}function xr(k,q){return z&&z(k,q.map(ge=>yx(ge,A.loaderData)))||k.key}function Nr(k,q){if(O&&j){let W=xr(k,q);O[W]=j()}}function Mo(k,q){if(O){let W=xr(k,q),ge=O[W];if(typeof ge=="number")return ge}return null}function Zi(k,q,W){if(n.patchRoutesOnNavigation)if(k){if(Object.keys(k[0].params).length>0)return{active:!0,matches:lc(q,W,p,!0)}}else return{active:!0,matches:lc(q,W,p,!0)||[]};return{active:!1,matches:null}}async function or(k,q,W,ge){if(!n.patchRoutesOnNavigation)return{type:"success",matches:k};let Ae=k;for(;;){let Oe=m==null,ke=m||d,we=c;try{await n.patchRoutesOnNavigation({signal:W,path:q,matches:Ae,fetcherKey:ge,patch:($e,ze)=>{W.aborted||Gb($e,ze,ke,we,l,!1)}})}catch($e){return{type:"error",error:$e,partialMatches:Ae}}finally{Oe&&!W.aborted&&(d=[...d])}if(W.aborted)return{type:"aborted"};let Re=ys(ke,q,p),Ve=null;if(Re){if(Object.keys(Re[0].params).length===0)return{type:"success",matches:Re};if(Ve=lc(ke,q,p,!0),!(Ve&&Ae.length<Ve.length&&Ni(Ae,Ve.slice(0,Ae.length))))return{type:"success",matches:Re}}if(Ve||(Ve=lc(ke,q,p,!0)),!Ve||Ni(Ae,Ve))return{type:"success",matches:null};Ae=Ve}}function Ni(k,q){return k.length===q.length&&k.every((W,ge)=>W.route.id===q[ge].route.id)}function lu(k){c={},m=wc(k,l,void 0,c)}function ea(k,q,W=!1){let ge=m==null;Gb(k,q,m||d,c,l,W),ge&&(d=[...d],We({}))}return ee={get basename(){return p},get future(){return v},get state(){return A},get routes(){return d},get window(){return e},initialize:Fe,subscribe:wt,enableScrollRestoration:Yr,navigate:Zt,fetch:Dn,revalidate:Kr,createHref:k=>n.history.createHref(k),encodeLocation:k=>n.history.encodeLocation(k),getFetcher:Se,resetFetcher:Ie,deleteFetcher:De,dispose:Et,getBlocker:sn,deleteBlocker:On,patchRoutes:ea,_internalFetchControllers:ue,_internalSetRoutes:lu,_internalSetStateDoNotUseOrYouWillBreakYourApp(k){We(k)}},n.unstable_instrumentations&&(ee=kx(ee,n.unstable_instrumentations.map(k=>k.router).filter(Boolean))),ee}function Yx(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function ay(n,e,t,i,s,l){let c,d;if(s){c=[];for(let p of e)if(c.push(p),p.route.id===s){d=p;break}}else c=e,d=e[e.length-1];let m=Fd(i||".",Hd(c),ui(n.pathname,t)||n.pathname,l==="path");if(i==null&&(m.search=n.search,m.hash=n.hash),(i==null||i===""||i===".")&&d){let p=Ky(m.search);if(d.route.index&&!p)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&p){let y=new URLSearchParams(m.search),v=y.getAll("index");y.delete("index"),v.filter(w=>w).forEach(w=>y.append("index",w));let S=y.toString();m.search=S?`?${S}`:""}}return t!=="/"&&(m.pathname=Nx({basename:t,pathname:m.pathname})),Xi(m)}function Fb(n,e,t){if(!t||!Yx(t))return{path:e};if(t.formMethod&&!dN(t.formMethod))return{path:e,error:si(405,{method:t.formMethod})};let i=()=>({path:e,error:si(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=RA(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!tr(l))return i();let v=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((S,[w,O])=>`${S}${w}=${O}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:v}}}else if(t.formEncType==="application/json"){if(!tr(l))return i();try{let v=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:v,text:void 0}}}catch{return i()}}}lt(typeof FormData=="function","FormData is not available in this environment");let d,m;if(t.formData)d=ly(t.formData),m=t.formData;else if(t.body instanceof FormData)d=ly(t.body),m=t.body;else if(t.body instanceof URLSearchParams)d=t.body,m=Xb(d);else if(t.body==null)d=new URLSearchParams,m=new FormData;else try{d=new URLSearchParams(t.body),m=Xb(d)}catch{return i()}let p={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(tr(p.formMethod))return{path:e,submission:p};let y=ka(e);return n&&y.search&&Ky(y.search)&&d.append("index",""),y.search=`?${d}`,{path:Xi(y),submission:p}}function qb(n,e,t,i,s,l,c,d,m,p,y,v,S,w,O,z,j,G,H,K,te){var me;let se=K?zr(K[1])?K[1].error:K[1].data:void 0,ee=s.createURL(l.location),A=s.createURL(m),I;if(y&&l.errors){let B=Object.keys(l.errors)[0];I=c.findIndex(J=>J.route.id===B)}else if(K&&zr(K[1])){let B=K[0];I=c.findIndex(J=>J.route.id===B)-1}let R=K?K[1].statusCode:void 0,N=R&&R>=400,M={currentUrl:ee,currentParams:((me=l.matches[0])==null?void 0:me.params)||{},nextUrl:A,nextParams:c[0].params,...d,actionResult:se,actionStatus:R},V=Bc(c),D=c.map((B,J)=>{let{route:ue}=B,ce=null;if(I!=null&&J>I?ce=!1:ue.lazy?ce=!0:Gy(ue)?y?ce=sy(ue,l.loaderData,l.errors):Qx(l.loaderData,l.matches[J],B)&&(ce=!0):ce=!1,ce!==null)return oy(t,i,n,V,B,p,e,ce);let be=!1;typeof te=="boolean"?be=te:N?be=!1:(v||ee.pathname+ee.search===A.pathname+A.search||ee.search!==A.search||Xx(l.matches[J],B))&&(be=!0);let L={...M,defaultShouldRevalidate:be},re=mc(B,L);return oy(t,i,n,V,B,p,e,re,L,te)}),ye=[];return O.forEach((B,J)=>{if(y||!c.some(_e=>_e.route.id===B.routeId)||w.has(J))return;let ue=l.fetchers.get(J),ce=ue&&ue.state!=="idle"&&ue.data===void 0,be=ys(j,B.path,G);if(!be){if(H&&ce)return;ye.push({key:J,routeId:B.routeId,path:B.path,matches:null,match:null,request:null,controller:null});return}if(z.has(J))return;let L=Hf(be,B.path),re=new AbortController,ve=Tl(s,B.path,re.signal),ae=null;if(S.has(J))S.delete(J),ae=Dl(t,i,ve,be,L,p,e);else if(ce)v&&(ae=Dl(t,i,ve,be,L,p,e));else{let _e;typeof te=="boolean"?_e=te:N?_e=!1:_e=v;let Te={...M,defaultShouldRevalidate:_e};mc(L,Te)&&(ae=Dl(t,i,ve,be,L,p,e,Te))}ae&&ye.push({key:J,routeId:B.routeId,path:B.path,matches:ae,match:L,request:ve,controller:re})}),{dsMatches:D,revalidatingFetchers:ye}}function Gy(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function sy(n,e,t){if(n.lazy)return!0;if(!Gy(n))return!1;let i=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!i&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!s}function Qx(n,e,t){let i=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return i||s}function Xx(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function mc(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Gb(n,e,t,i,s,l){let c;if(n){let p=i[n];lt(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),c=p.children}else c=t;let d=[],m=[];if(e.forEach(p=>{let y=c.find(v=>bA(p,v));y?m.push({existingRoute:y,newRoute:p}):d.push(p)}),d.length>0){let p=wc(d,s,[n||"_","patch",String((c==null?void 0:c.length)||"0")],i);c.push(...p)}if(l&&m.length>0)for(let p=0;p<m.length;p++){let{existingRoute:y,newRoute:v}=m[p],S=y,[w]=wc([v],s,[],{},!0);Object.assign(S,{element:w.element?w.element:S.element,errorElement:w.errorElement?w.errorElement:S.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:S.hydrateFallbackElement})}}function bA(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var s;return(s=e.children)==null?void 0:s.some(l=>bA(t,l))}):!1}var $b=new WeakMap,SA=({key:n,route:e,manifest:t,mapRouteProperties:i})=>{let s=t[e.id];if(lt(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=$b.get(s);c||(c={},$b.set(s,c));let d=c[n];if(d)return d;let m=(async()=>{let p=dx(n),v=s[n]!==void 0&&n!=="hasErrorBoundary";if(p)un(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(v)un(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let S=await l();S!=null&&(Object.assign(s,{[n]:S}),Object.assign(s,i(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(S=>S===void 0)&&(s.lazy=void 0))})();return c[n]=m,m},Kb=new WeakMap;function Wx(n,e,t,i,s){let l=t[n.id];if(lt(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let y=Kb.get(l);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let v=(async()=>{lt(typeof n.lazy=="function","No lazy route function found");let S=await n.lazy(),w={};for(let O in S){let z=S[O];if(z===void 0)continue;let j=px(O),H=l[O]!==void 0&&O!=="hasErrorBoundary";j?un(!j,"Route property "+O+" is not a supported property to be returned from a lazy route function. This property will be ignored."):H?un(!H,`Route "${l.id}" has a static property "${O}" defined but its lazy function is also returning a value for this property. The lazy route property "${O}" will be ignored.`):w[O]=z}Object.assign(l,w),Object.assign(l,{...i(l),lazy:void 0})})();return Kb.set(l,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let c=Object.keys(n.lazy),d=[],m;for(let y of c){if(s&&s.includes(y))continue;let v=SA({key:y,route:n,manifest:t,mapRouteProperties:i});v&&(d.push(v),y===e&&(m=v))}let p=d.length>0?Promise.all(d).then(()=>{}):void 0;return p==null||p.catch(()=>{}),m==null||m.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:m}}async function Yb(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function Jx(n){return n.matches.some(e=>e.route.middleware)?AA(n,()=>Yb(n)):Yb(n)}function AA(n,e){return Zx(n,e,i=>{if(fN(i))throw i;return i},lN,t);function t(i,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:i}}));{let{matches:c}=n,d=Math.min(Math.max(c.findIndex(p=>p.route.id===s),0),Math.max(c.findIndex(p=>p.shouldCallHandler()),0)),m=_s(c,c[d].route.id).route.id;return Promise.resolve({[m]:{type:"error",result:i}})}}}async function Zx(n,e,t,i,s){let{matches:l,request:c,params:d,context:m,unstable_pattern:p}=n,y=l.flatMap(S=>S.route.middleware?S.route.middleware.map(w=>[S.route.id,w]):[]);return await wA({request:c,params:d,context:m,unstable_pattern:p},y,e,t,i,s)}async function wA(n,e,t,i,s,l,c=0){let{request:d}=n;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let m=e[c];if(!m)return await t();let[p,y]=m,v,S=async()=>{if(v)throw new Error("You may only call `next()` once per middleware");try{return v={value:await wA(n,e,t,i,s,l,c+1)},v.value}catch(w){return v={value:await l(w,p,v)},v.value}};try{let w=await y(n,S),O=w!=null?i(w):void 0;return s(O)?O:v?O??v.value:(v={value:await S()},v.value)}catch(w){return await l(w,p,v)}}function CA(n,e,t,i,s){let l=SA({key:"middleware",route:i.route,manifest:e,mapRouteProperties:n}),c=Wx(i.route,tr(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function oy(n,e,t,i,s,l,c,d,m=null,p){let y=!1,v=CA(n,e,t,s,l);return{...s,_lazyPromises:v,shouldLoad:d,shouldRevalidateArgs:m,shouldCallHandler(S){return y=!0,m?typeof p=="boolean"?mc(s,{...m,defaultShouldRevalidate:p}):typeof S=="boolean"?mc(s,{...m,defaultShouldRevalidate:S}):mc(s,m):d},resolve(S){let{lazy:w,loader:O,middleware:z}=s.route,j=y||d||S&&!tr(t.method)&&(w||O),G=z&&z.length>0&&!O&&!w;return j&&(tr(t.method)||!G)?tN({request:t,unstable_pattern:i,match:s,lazyHandlerPromise:v==null?void 0:v.handler,lazyRoutePromise:v==null?void 0:v.route,handlerOverride:S,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Dl(n,e,t,i,s,l,c,d=null){return i.map(m=>m.route.id!==s.route.id?{...m,shouldLoad:!1,shouldRevalidateArgs:d,shouldCallHandler:()=>!1,_lazyPromises:CA(n,e,t,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:oy(n,e,t,Bc(i),m,l,c,!0,d))}async function eN(n,e,t,i,s,l){t.some(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware})&&await Promise.all(t.map(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware}));let c={request:e,unstable_pattern:Bc(t),params:t[0].params,context:s,matches:t},m=await n({...c,fetcherKey:i,runClientMiddleware:p=>{let y=c;return AA(y,()=>p({...y,fetcherKey:i,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(p=>{var y,v;return[(y=p._lazyPromises)==null?void 0:y.handler,(v=p._lazyPromises)==null?void 0:v.route]}))}catch{}return m}async function tN({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:i,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let d,m,p=tr(n.method),y=p?"action":"loader",v=S=>{let w,O=new Promise((G,H)=>w=H);m=()=>w(),n.signal.addEventListener("abort",m);let z=G=>typeof S!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${y}" [routeId: ${t.route.id}]`)):S({request:n,unstable_pattern:e,params:t.params,context:c},...G!==void 0?[G]:[]),j=(async()=>{try{return{type:"data",result:await(l?l(H=>z(H)):z())}}catch(G){return{type:"error",result:G}}})();return Promise.race([j,O])};try{let S=p?t.route.action:t.route.loader;if(i||s)if(S){let w,[O]=await Promise.all([v(S).catch(z=>{w=z}),i,s]);if(w!==void 0)throw w;d=O}else{await i;let w=p?t.route.action:t.route.loader;if(w)[d]=await Promise.all([v(w),s]);else if(y==="action"){let O=new URL(n.url),z=O.pathname+O.search;throw si(405,{method:n.method,pathname:z,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(S)d=await v(S);else{let w=new URL(n.url),O=w.pathname+w.search;throw si(404,{pathname:O})}}catch(S){return{type:"error",result:S}}finally{m&&n.signal.removeEventListener("abort",m)}return d}async function nN(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function rN(n){var i,s,l,c,d;let{result:e,type:t}=n;if($y(e)){let m;try{m=await nN(e)}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new zc(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:"data",data:m,statusCode:e.status,headers:e.headers}}return t==="error"?e0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:oN(e),statusCode:Cc(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Cc(e)?e.status:void 0}:e0(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function iN(n,e,t,i,s){let l=n.headers.get("Location");if(lt(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!qy(l)){let c=i.slice(0,i.findIndex(d=>d.route.id===t)+1);l=ay(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function Qb(n,e,t,i){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(qy(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let d=ui(c.pathname,t)!=null;if(c.origin===e.origin&&d)return c.pathname+c.search+c.hash}try{let l=i.createURL(n);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function Tl(n,e,t,i){let s=n.createURL(RA(e)).toString(),l={signal:t};if(i&&tr(i.formMethod)){let{formMethod:c,formEncType:d}=i;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(i.json)):d==="text/plain"?l.body=i.text:d==="application/x-www-form-urlencoded"&&i.formData?l.body=ly(i.formData):l.body=i.formData}return new Request(s,l)}function ly(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function Xb(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function aN(n,e,t,i=!1,s=!1){let l={},c=null,d,m=!1,p={},y=t&&zr(t[1])?t[1].error:void 0;return n.forEach(v=>{if(!(v.route.id in e))return;let S=v.route.id,w=e[S];if(lt(!ho(w),"Cannot handle redirect results in processLoaderData"),zr(w)){let O=w.error;if(y!==void 0&&(O=y,y=void 0),c=c||{},s)c[S]=O;else{let z=_s(n,S);c[z.route.id]==null&&(c[z.route.id]=O)}i||(l[S]=TA),m||(m=!0,d=Cc(w.error)?w.error.status:500),w.headers&&(p[S]=w.headers)}else l[S]=w.data,w.statusCode&&w.statusCode!==200&&!m&&(d=w.statusCode),w.headers&&(p[S]=w.headers)}),y!==void 0&&t&&(c={[t[0]]:y},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:p}}function Wb(n,e,t,i,s,l){let{loaderData:c,errors:d}=aN(e,t,i);return s.filter(m=>!m.matches||m.matches.some(p=>p.shouldLoad)).forEach(m=>{let{key:p,match:y,controller:v}=m;if(v&&v.signal.aborted)return;let S=l[p];if(lt(S,"Did not find corresponding fetcher result"),zr(S)){let w=_s(n.matches,y==null?void 0:y.route.id);d&&d[w.route.id]||(d={...d,[w.route.id]:S.error}),n.fetchers.delete(p)}else if(ho(S))lt(!1,"Unhandled fetcher revalidation redirect");else{let w=Ta(S.data);n.fetchers.set(p,w)}}),{loaderData:c,errors:d}}function Jb(n,e,t,i){let s=Object.entries(e).filter(([,l])=>l!==TA).reduce((l,[c,d])=>(l[c]=d,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),i&&i.hasOwnProperty(c))break}return s}function Zb(n){return n?zr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function _s(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function Rf(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function si(n,{pathname:e,routeId:t,method:i,type:s,message:l}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(c="Bad Request",i&&e&&t?d=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(c="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",d=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",i&&e&&t?d=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:i&&(d=`Invalid request method "${i.toUpperCase()}"`)),new zc(n||500,c,new Error(d),!0)}function If(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,s]=e[t];if(ho(s))return{key:i,result:s}}}function RA(n){let e=typeof n=="string"?ka(n):n;return Xi({...e,hash:""})}function sN(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function oN(n){var e,t;return new zc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function lN(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&uN(t))}function uN(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function cN(n){return $y(n.result)&&vA.has(n.result.status)}function zr(n){return n.type==="error"}function ho(n){return(n&&n.type)==="redirect"}function e0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function $y(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function hN(n){return vA.has(n)}function fN(n){return $y(n)&&hN(n.status)&&n.headers.has("Location")}function dN(n){return Fx.has(n.toUpperCase())}function tr(n){return Bx.has(n.toUpperCase())}function Ky(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Hf(n,e){let t=typeof e=="string"?ka(e).search:e.search;if(n[n.length-1].route.index&&Ky(t||""))return n[n.length-1];let i=mA(n);return i[i.length-1]}function t0(n){let{formMethod:e,formAction:t,formEncType:i,text:s,formData:l,json:c}=n;if(!(!e||!t||!i)){if(s!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function Pg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function mN(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function rc(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function pN(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Ta(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function gN(n,e){try{let t=n.sessionStorage.getItem(EA);if(t){let i=JSON.parse(t);for(let[s,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function yN(n,e){if(e.size>0){let t={};for(let[i,s]of e)t[i]=[...s];try{n.sessionStorage.setItem(EA,JSON.stringify(t))}catch(i){un(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function n0(){let n,e,t=new Promise((i,s)=>{n=async l=>{i(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Ro=P.createContext(null);Ro.displayName="DataRouter";var Hc=P.createContext(null);Hc.displayName="DataRouterState";var IA=P.createContext(!1);function _N(){return P.useContext(IA)}var Yy=P.createContext({isTransitioning:!1});Yy.displayName="ViewTransition";var xA=P.createContext(new Map);xA.displayName="Fetchers";var vN=P.createContext(null);vN.displayName="Await";var qr=P.createContext(null);qr.displayName="Navigation";var qd=P.createContext(null);qd.displayName="Location";var ci=P.createContext({outlet:null,matches:[],isDataRoute:!1});ci.displayName="Route";var Qy=P.createContext(null);Qy.displayName="RouteError";var NA="REACT_ROUTER_ERROR",EN="REDIRECT",TN="ROUTE_ERROR_RESPONSE";function bN(n){if(n.startsWith(`${NA}:${EN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function SN(n){if(n.startsWith(`${NA}:${TN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new zc(e.status,e.statusText,e.data)}catch{}}function AN(n,{relative:e}={}){lt(Jl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=P.useContext(qr),{hash:s,pathname:l,search:c}=qc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Gi([t,l])),i.createHref({pathname:d,search:c,hash:s})}function Jl(){return P.useContext(qd)!=null}function hi(){return lt(Jl(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(qd).location}var DA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function OA(n){P.useContext(qr).static||P.useLayoutEffect(n)}function Io(){let{isDataRoute:n}=P.useContext(ci);return n?UN():wN()}function wN(){lt(Jl(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Ro),{basename:e,navigator:t}=P.useContext(qr),{matches:i}=P.useContext(ci),{pathname:s}=hi(),l=JSON.stringify(Hd(i)),c=P.useRef(!1);return OA(()=>{c.current=!0}),P.useCallback((m,p={})=>{if(un(c.current,DA),!c.current)return;if(typeof m=="number"){t.go(m);return}let y=Fd(m,JSON.parse(l),s,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Gi([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,l,s,n])}var CN=P.createContext(null);function RN(n){let e=P.useContext(ci).outlet;return P.useMemo(()=>e&&P.createElement(CN.Provider,{value:n},e),[e,n])}function Fc(){let{matches:n}=P.useContext(ci),e=n[n.length-1];return e?e.params:{}}function qc(n,{relative:e}={}){let{matches:t}=P.useContext(ci),{pathname:i}=hi(),s=JSON.stringify(Hd(t));return P.useMemo(()=>Fd(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function IN(n,e,t,i,s){lt(Jl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=P.useContext(qr),{matches:c}=P.useContext(ci),d=c[c.length-1],m=d?d.params:{},p=d?d.pathname:"/",y=d?d.pathnameBase:"/",v=d&&d.route;{let H=v&&v.path||"";PA(p,!v||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let S=hi(),w;w=S;let O=w.pathname||"/",z=O;if(y!=="/"){let H=y.replace(/^\//,"").split("/");z="/"+O.replace(/^\//,"").split("/").slice(H.length).join("/")}let j=ys(n,{pathname:z});return un(v||j!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),un(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),MN(j&&j.map(H=>Object.assign({},H,{params:Object.assign({},m,H.params),pathname:Gi([y,l.encodeLocation?l.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?y:Gi([y,l.encodeLocation?l.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),c,t,i,s)}function xN(){let n=jN(),e=Cc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,c)}var NN=P.createElement(xN,null),MA=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=SN(n.digest);t&&(n=t)}let e=n!==void 0?P.createElement(ci.Provider,{value:this.props.routeContext},P.createElement(Qy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?P.createElement(DN,{error:n},e):e}};MA.contextType=IA;var Vg=new WeakMap;function DN({children:n,error:e}){let{basename:t}=P.useContext(qr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=bN(e.digest);if(i){let s=Vg.get(e);if(s)throw s;let l=gA(i.location,t);if(pA&&!Vg.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Vg.set(e,c),c}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function ON({routeContext:n,match:e,children:t}){let i=P.useContext(Ro);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(ci.Provider,{value:n},t)}function MN(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let y=l.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);lt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,m=-1;if(t)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=y),v.route.id){let{loaderData:S,errors:w}=t,O=v.route.loader&&!S.hasOwnProperty(v.route.id)&&(!w||w[v.route.id]===void 0);if(v.route.lazy||O){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let p=t&&i?(y,v)=>{var S,w;i(y,{location:t.location,params:((w=(S=t.matches)==null?void 0:S[0])==null?void 0:w.params)??{},unstable_pattern:Bc(t.matches),errorInfo:v})}:void 0;return l.reduceRight((y,v,S)=>{let w,O=!1,z=null,j=null;t&&(w=c&&v.route.id?c[v.route.id]:void 0,z=v.route.errorElement||NN,d&&(m<0&&S===0?(PA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,j=null):m===S&&(O=!0,j=v.route.hydrateFallbackElement||null)));let G=e.concat(l.slice(0,S+1)),H=()=>{let K;return w?K=z:O?K=j:v.route.Component?K=P.createElement(v.route.Component,null):v.route.element?K=v.route.element:K=y,P.createElement(ON,{match:v,routeContext:{outlet:y,matches:G,isDataRoute:t!=null},children:K})};return t&&(v.route.ErrorBoundary||v.route.errorElement||S===0)?P.createElement(MA,{location:t.location,revalidation:t.revalidation,component:z,error:w,children:H(),routeContext:{outlet:null,matches:G,isDataRoute:!0},onError:p}):H()},null)}function Xy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PN(n){let e=P.useContext(Ro);return lt(e,Xy(n)),e}function VN(n){let e=P.useContext(Hc);return lt(e,Xy(n)),e}function kN(n){let e=P.useContext(ci);return lt(e,Xy(n)),e}function Wy(n){let e=kN(n),t=e.matches[e.matches.length-1];return lt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function LN(){return Wy("useRouteId")}function jN(){var i;let n=P.useContext(Qy),e=VN("useRouteError"),t=Wy("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function UN(){let{router:n}=PN("useNavigate"),e=Wy("useNavigate"),t=P.useRef(!1);return OA(()=>{t.current=!0}),P.useCallback(async(s,l={})=>{un(t.current,DA),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var r0={};function PA(n,e,t){!e&&!r0[n]&&(r0[n]=!0,un(!1,t))}var i0={};function a0(n,e){!n&&!i0[e]&&(i0[e]=!0,console.warn(e))}var zN="useOptimistic",s0=OI[zN],BN=()=>{};function HN(n){return s0?s0(n):[n,BN]}function FN(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&un(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:P.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&un(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:P.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&un(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:P.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var qN=["HydrateFallback","hydrateFallbackElement"],GN=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function $N({router:n,flushSync:e,onError:t,unstable_useTransitions:i}){i=_N()||i;let[l,c]=P.useState(n.state),[d,m]=HN(l),[p,y]=P.useState(),[v,S]=P.useState({isTransitioning:!1}),[w,O]=P.useState(),[z,j]=P.useState(),[G,H]=P.useState(),K=P.useRef(new Map),te=P.useCallback((I,{deletedFetchers:R,newErrors:N,flushSync:M,viewTransitionOpts:V})=>{N&&t&&Object.values(N).forEach(ye=>{var me;return t(ye,{location:I.location,params:((me=I.matches[0])==null?void 0:me.params)??{},unstable_pattern:Bc(I.matches)})}),I.fetchers.forEach((ye,me)=>{ye.data!==void 0&&K.current.set(me,ye.data)}),R.forEach(ye=>K.current.delete(ye)),a0(M===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let D=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(a0(V==null||D,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!V||!D){e&&M?e(()=>c(I)):i===!1?c(I):P.startTransition(()=>{i===!0&&m(ye=>o0(ye,I)),c(I)});return}if(e&&M){e(()=>{z&&(w==null||w.resolve(),z.skipTransition()),S({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let ye=n.window.document.startViewTransition(()=>{e(()=>c(I))});ye.finished.finally(()=>{e(()=>{O(void 0),j(void 0),y(void 0),S({isTransitioning:!1})})}),e(()=>j(ye));return}z?(w==null||w.resolve(),z.skipTransition(),H({state:I,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(y(I),S({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[n.window,e,z,w,i,m,t]);P.useLayoutEffect(()=>n.subscribe(te),[n,te]),P.useEffect(()=>{v.isTransitioning&&!v.flushSync&&O(new GN)},[v]),P.useEffect(()=>{if(w&&p&&n.window){let I=p,R=w.promise,N=n.window.document.startViewTransition(async()=>{i===!1?c(I):P.startTransition(()=>{i===!0&&m(M=>o0(M,I)),c(I)}),await R});N.finished.finally(()=>{O(void 0),j(void 0),y(void 0),S({isTransitioning:!1})}),j(N)}},[p,w,n.window,i,m]),P.useEffect(()=>{w&&p&&d.location.key===p.location.key&&w.resolve()},[w,z,d.location,p]),P.useEffect(()=>{!v.isTransitioning&&G&&(y(G.state),S({isTransitioning:!0,flushSync:!1,currentLocation:G.currentLocation,nextLocation:G.nextLocation}),H(void 0))},[v.isTransitioning,G]);let se=P.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:I=>n.navigate(I),push:(I,R,N)=>n.navigate(I,{state:R,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(I,R,N)=>n.navigate(I,{replace:!0,state:R,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[n]),ee=n.basename||"/",A=P.useMemo(()=>({router:n,navigator:se,static:!1,basename:ee,onError:t}),[n,se,ee,t]);return P.createElement(P.Fragment,null,P.createElement(Ro.Provider,{value:A},P.createElement(Hc.Provider,{value:d},P.createElement(xA.Provider,{value:K.current},P.createElement(Yy.Provider,{value:v},P.createElement(QN,{basename:ee,location:d.location,navigationType:d.historyAction,navigator:se,unstable_useTransitions:i},P.createElement(KN,{routes:n.routes,future:n.future,state:d,onError:t})))))),null)}function o0(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var KN=P.memo(YN);function YN({routes:n,future:e,state:t,onError:i}){return IN(n,void 0,t,i,e)}function As({to:n,replace:e,state:t,relative:i}){lt(Jl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(qr);un(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=P.useContext(ci),{pathname:c}=hi(),d=Io(),m=Fd(n,Hd(l),c,i==="path"),p=JSON.stringify(m);return P.useEffect(()=>{d(JSON.parse(p),{replace:e,state:t,relative:i})},[d,p,i,e,t]),null}function VA(n){return RN(n.context)}function QN({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){lt(!Jl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:d,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[d,s,l,c]);typeof t=="string"&&(t=ka(t));let{pathname:p="/",search:y="",hash:v="",state:S=null,key:w="default"}=t,O=P.useMemo(()=>{let z=ui(p,d);return z==null?null:{location:{pathname:z,search:y,hash:v,state:S,key:w},navigationType:i}},[d,p,y,v,S,w,i]);return un(O!=null,`<Router basename="${d}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:P.createElement(qr.Provider,{value:m},P.createElement(qd.Provider,{children:e,value:O}))}var Ff="get",qf="application/x-www-form-urlencoded";function Gd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function XN(n){return Gd(n)&&n.tagName.toLowerCase()==="button"}function WN(n){return Gd(n)&&n.tagName.toLowerCase()==="form"}function JN(n){return Gd(n)&&n.tagName.toLowerCase()==="input"}function ZN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function eD(n,e){return n.button===0&&(!e||e==="_self")&&!ZN(n)}function uy(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let i=n[t];return e.concat(Array.isArray(i)?i.map(s=>[t,s]):[[t,i]])},[]))}function tD(n,e){let t=uy(n);return e&&e.forEach((i,s)=>{t.has(s)||e.getAll(s).forEach(l=>{t.append(s,l)})}),t}var xf=null;function nD(){if(xf===null)try{new FormData(document.createElement("form"),0),xf=!1}catch{xf=!0}return xf}var rD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kg(n){return n!=null&&!rD.has(n)?(un(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qf}"`),null):n}function iD(n,e){let t,i,s,l,c;if(WN(n)){let d=n.getAttribute("action");i=d?ui(d,e):null,t=n.getAttribute("method")||Ff,s=kg(n.getAttribute("enctype"))||qf,l=new FormData(n)}else if(XN(n)||JN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(i=m?ui(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Ff,s=kg(n.getAttribute("formenctype"))||kg(d.getAttribute("enctype"))||qf,l=new FormData(d,n),!nD()){let{name:p,type:y,value:v}=n;if(y==="image"){let S=p?`${p}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else p&&l.append(p,v)}}else{if(Gd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ff,i=null,s=qf,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function aD(n,e,t,i){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${i}`:s.pathname=`${s.pathname}.${i}`:s.pathname==="/"?s.pathname=`_root.${i}`:e&&ui(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function sD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function lD(n,e,t){let i=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await sD(l,t);return c.links?c.links():[]}return[]}));return fD(i.flat(1).filter(oD).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function l0(n,e,t,i,s,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>{var y;return t[p].pathname!==m.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>c(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{var v;let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function uD(n,e,{includeHydrateFallback:t}={}){return cD(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function cD(n){return[...new Set(n)]}function hD(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function fD(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let l=JSON.stringify(hD(s));return t.has(l)||(t.add(l),i.push({key:l,link:s})),i},[])}function kA(){let n=P.useContext(Ro);return Jy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function dD(){let n=P.useContext(Hc);return Jy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Zy=P.createContext(void 0);Zy.displayName="FrameworkContext";function LA(){let n=P.useContext(Zy);return Jy(n,"You must render this element inside a <HydratedRouter> element"),n}function mD(n,e){let t=P.useContext(Zy),[i,s]=P.useState(!1),[l,c]=P.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,S=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let z=G=>{G.forEach(H=>{c(H.isIntersecting)})},j=new IntersectionObserver(z,{threshold:.5});return S.current&&j.observe(S.current),()=>{j.disconnect()}}},[n]),P.useEffect(()=>{if(i){let z=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(z)}}},[i]);let w=()=>{s(!0)},O=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:ic(d,w),onBlur:ic(m,O),onMouseEnter:ic(p,w),onMouseLeave:ic(y,O),onTouchStart:ic(v,w)}]:[!1,S,{}]}function ic(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function pD({page:n,...e}){let{router:t}=kA(),i=P.useMemo(()=>ys(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?P.createElement(yD,{page:n,matches:i,...e}):null}function gD(n){let{manifest:e,routeModules:t}=LA(),[i,s]=P.useState([]);return P.useEffect(()=>{let l=!1;return lD(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),i}function yD({page:n,matches:e,...t}){let i=hi(),{future:s,manifest:l,routeModules:c}=LA(),{basename:d}=kA(),{loaderData:m,matches:p}=dD(),y=P.useMemo(()=>l0(n,e,p,l,i,"data"),[n,e,p,l,i]),v=P.useMemo(()=>l0(n,e,p,l,i,"assets"),[n,e,p,l,i]),S=P.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let z=new Set,j=!1;if(e.forEach(H=>{var te;let K=l.routes[H.route.id];!K||!K.hasLoader||(!y.some(se=>se.route.id===H.route.id)&&H.route.id in m&&((te=c[H.route.id])!=null&&te.shouldRevalidate)||K.hasClientLoader?j=!0:z.add(H.route.id))}),z.size===0)return[];let G=aD(n,d,s.unstable_trailingSlashAwareDataRequests,"data");return j&&z.size>0&&G.searchParams.set("_routes",e.filter(H=>z.has(H.route.id)).map(H=>H.route.id).join(",")),[G.pathname+G.search]},[d,s.unstable_trailingSlashAwareDataRequests,m,i,l,y,e,n,c]),w=P.useMemo(()=>uD(v,l),[v,l]),O=gD(v);return P.createElement(P.Fragment,null,S.map(z=>P.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),w.map(z=>P.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),O.map(({key:z,link:j})=>P.createElement("link",{key:z,nonce:t.nonce,...j,crossOrigin:j.crossOrigin??t.crossOrigin})))}function _D(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var vD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vD&&(window.__reactRouterVersion="7.13.0")}catch{}function ED(n,e){return Kx({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:ux({window:e==null?void 0:e.window}),hydrationData:TD(),routes:n,mapRouteProperties:FN,hydrationRouteProperties:qN,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function TD(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:bD(n.errors)}),n}function bD(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,s]of e)if(s&&s.__type==="RouteErrorResponse")t[i]=new zc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let l=new Error(s.message);l.stack="",t[i]=l}}else t[i]=s;return t}var jA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UA=P.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:l,replace:c,state:d,target:m,to:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:S,...w},O){let{basename:z,unstable_useTransitions:j}=P.useContext(qr),G=typeof p=="string"&&jA.test(p),H=gA(p,z);p=H.to;let K=AN(p,{relative:s}),[te,se,ee]=mD(i,w),A=CD(p,{replace:c,state:d,target:m,preventScrollReset:y,relative:s,viewTransition:v,unstable_defaultShouldRevalidate:S,unstable_useTransitions:j});function I(N){e&&e(N),N.defaultPrevented||A(N)}let R=P.createElement("a",{...w,...ee,href:H.absoluteURL||K,onClick:H.isExternal||l?e:I,ref:_D(O,se),target:m,"data-discover":!G&&t==="render"?"true":void 0});return te&&!G?P.createElement(P.Fragment,null,R,P.createElement(pD,{page:K})):R});UA.displayName="Link";var SD=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:l,to:c,viewTransition:d,children:m,...p},y){let v=qc(c,{relative:p.relative}),S=hi(),w=P.useContext(Hc),{navigator:O,basename:z}=P.useContext(qr),j=w!=null&&OD(v)&&d===!0,G=O.encodeLocation?O.encodeLocation(v).pathname:v.pathname,H=S.pathname,K=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(H=H.toLowerCase(),K=K?K.toLowerCase():null,G=G.toLowerCase()),K&&z&&(K=ui(K,z)||K);const te=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let se=H===G||!s&&H.startsWith(G)&&H.charAt(te)==="/",ee=K!=null&&(K===G||!s&&K.startsWith(G)&&K.charAt(G.length)==="/"),A={isActive:se,isPending:ee,isTransitioning:j},I=se?e:void 0,R;typeof i=="function"?R=i(A):R=[i,se?"active":null,ee?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(A):l;return P.createElement(UA,{...p,"aria-current":I,className:R,ref:y,style:N,to:c,viewTransition:d},typeof m=="function"?m(A):m)});SD.displayName="NavLink";var AD=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:l,method:c=Ff,action:d,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:S,...w},O)=>{let{unstable_useTransitions:z}=P.useContext(qr),j=ND(),G=DD(d,{relative:p}),H=c.toLowerCase()==="get"?"get":"post",K=typeof d=="string"&&jA.test(d),te=se=>{if(m&&m(se),se.defaultPrevented)return;se.preventDefault();let ee=se.nativeEvent.submitter,A=(ee==null?void 0:ee.getAttribute("formmethod"))||c,I=()=>j(ee||se.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:l,relative:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:S});z&&t!==!1?P.startTransition(()=>I()):I()};return P.createElement("form",{ref:O,method:H,action:G,onSubmit:i?m:te,...w,"data-discover":!K&&n==="render"?"true":void 0})});AD.displayName="Form";function wD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zA(n){let e=P.useContext(Ro);return lt(e,wD(n)),e}function CD(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:m}={}){let p=Io(),y=hi(),v=qc(n,{relative:l});return P.useCallback(S=>{if(eD(S,e)){S.preventDefault();let w=t!==void 0?t:Xi(y)===Xi(v),O=()=>p(n,{replace:w,state:i,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});m?P.startTransition(()=>O()):O()}},[y,p,v,t,i,e,n,s,l,c,d,m])}function RD(n){un(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(uy(n)),t=P.useRef(!1),i=hi(),s=P.useMemo(()=>tD(i.search,t.current?null:e.current),[i.search]),l=Io(),c=P.useCallback((d,m)=>{const p=uy(typeof d=="function"?d(new URLSearchParams(s)):d);t.current=!0,l("?"+p,m)},[l,s]);return[s,c]}var ID=0,xD=()=>`__${String(++ID)}__`;function ND(){let{router:n}=zA("useSubmit"),{basename:e}=P.useContext(qr),t=LN(),i=n.fetch,s=n.navigate;return P.useCallback(async(l,c={})=>{let{action:d,method:m,encType:p,formData:y,body:v}=iD(l,e);if(c.navigate===!1){let S=c.fetcherKey||xD();await i(S,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:v,formMethod:c.method||m,formEncType:c.encType||p,flushSync:c.flushSync})}else await s(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:v,formMethod:c.method||m,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,s,e,t])}function DD(n,{relative:e}={}){let{basename:t}=P.useContext(qr),i=P.useContext(ci);lt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),l={...qc(n||".",{relative:e})},c=hi();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(y=>y==="")){d.delete("index"),m.filter(v=>v).forEach(v=>d.append("index",v));let y=d.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Gi([t,l.pathname])),Xi(l)}function OD(n,{relative:e}={}){let t=P.useContext(Yy);lt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=zA("useViewTransitionState"),s=qc(n,{relative:e});if(!t.isTransitioning)return!1;let l=ui(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=ui(t.nextLocation.pathname,i)||t.nextLocation.pathname;return fd(s.pathname,c)!=null||fd(s.pathname,l)!=null}var BA=sA();function MD(n){return P.createElement($N,{flushSync:BA.flushSync,...n})}const PD=P.createContext(void 0),Gr=()=>rx(),at=sx.withTypes(),VD=({children:n})=>{const e=at(t=>t.auth.loading);return T.jsx(PD.Provider,{value:{isLoading:e},children:n})},kD=()=>{};var u0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},LD=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[i++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],d=n[t++],m=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},FA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,d=c?n[s+1]:0,m=s+2<n.length,p=m?n[s+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let S=(d&15)<<2|p>>6,w=p&63;m||(w=64,c||(S=64)),i.push(t[y],t[v],t[S],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(HA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):LD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||p==null||v==null)throw new jD;const S=l<<2|d>>4;if(i.push(S),p!==64){const w=d<<4&240|p>>2;if(i.push(w),v!==64){const O=p<<6&192|v;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class jD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UD=function(n){const e=HA(n);return FA.encodeByteArray(e,!0)},dd=function(n){return UD(n).replace(/\./g,"")},qA=function(n){try{return FA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=()=>zD().__FIREBASE_DEFAULTS__,HD=()=>{if(typeof process>"u"||typeof u0>"u")return;const n=u0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qA(n[1]);return e&&JSON.parse(e)},$d=()=>{try{return kD()||BD()||HD()||FD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},GA=n=>{var e,t;return(t=(e=$d())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},qD=n=>{const e=GA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},$A=()=>{var n;return(n=$d())==null?void 0:n.config},KA=n=>{var e;return(e=$d())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function YA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[dd(JSON.stringify(t)),dd(JSON.stringify(c)),""].join(".")}const pc={};function KD(){const n={prod:[],emulator:[]};for(const e of Object.keys(pc))pc[e]?n.emulator.push(e):n.prod.push(e);return n}function YD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let c0=!1;function QA(n,e){if(typeof window>"u"||typeof document>"u"||!Zl(window.location.host)||pc[n]===e||pc[n]||c0)return;pc[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=KD().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{c0=!0,c()},S}function y(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function v(){const S=YD(i),w=t("text"),O=document.getElementById(w)||document.createElement("span"),z=t("learnmore"),j=document.getElementById(z)||document.createElement("a"),G=t("preprendIcon"),H=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const K=S.element;d(K),y(j,z);const te=p();m(H,G),K.append(H,O,j,te),document.body.appendChild(K)}l?(O.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ir())}function XD(){var e;const n=(e=$d())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ZD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function e2(){const n=ir();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function t2(){return!XD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function n2(){try{return typeof indexedDB=="object"}catch{return!1}}function r2(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="FirebaseError";class La extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=i2,Object.setPrototypeOf(this,La.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gc.prototype.create)}}class Gc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?a2(l,i):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new La(s,d,i)}}function a2(n,e){return n.replace(s2,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const s2=/\{\$([^}]+)}/g;function o2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function vo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const l=n[s],c=e[s];if(h0(l)&&h0(c)){if(!vo(l,c))return!1}else if(l!==c)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function h0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function l2(n,e){const t=new u2(n,e);return t.subscribe.bind(t)}class u2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");c2(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Lg),s.error===void 0&&(s.error=Lg),s.complete===void 0&&(s.complete=Lg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function c2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Lg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(n){return n&&n._delegate?n._delegate:n}class Eo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new GD;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d2(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});i.resolve(l)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const l=this.instances.get(i);return l&&e(l,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:f2(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function f2(n){return n===co?void 0:n}function d2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new h2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(gt||(gt={}));const p2={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},g2=gt.INFO,y2={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},_2=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=y2[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e_{constructor(e){this.name=e,this._logLevel=g2,this._logHandler=_2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const v2=(n,e)=>e.some(t=>n instanceof t);let f0,d0;function E2(){return f0||(f0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T2(){return d0||(d0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XA=new WeakMap,cy=new WeakMap,WA=new WeakMap,jg=new WeakMap,t_=new WeakMap;function b2(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ws(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&XA.set(t,n)}).catch(()=>{}),t_.set(e,n),e}function S2(n){if(cy.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});cy.set(n,e)}let hy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function A2(n){hy=n(hy)}function w2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Ug(this),e,...t);return WA.set(i,e.sort?e.sort():[e]),ws(i)}:T2().includes(n)?function(...e){return n.apply(Ug(this),e),ws(XA.get(this))}:function(...e){return ws(n.apply(Ug(this),e))}}function C2(n){return typeof n=="function"?w2(n):(n instanceof IDBTransaction&&S2(n),v2(n,E2())?new Proxy(n,hy):n)}function ws(n){if(n instanceof IDBRequest)return b2(n);if(jg.has(n))return jg.get(n);const e=C2(n);return e!==n&&(jg.set(n,e),t_.set(e,n)),e}const Ug=n=>t_.get(n);function R2(n,e,{blocked:t,upgrade:i,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),d=ws(c);return i&&c.addEventListener("upgradeneeded",m=>{i(ws(c.result),m.oldVersion,m.newVersion,ws(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),s&&m.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const I2=["get","getKey","getAll","getAllKeys","count"],x2=["put","add","delete","clear"],zg=new Map;function m0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zg.get(e))return zg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=x2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||I2.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,s?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),s&&m.done]))[0]};return zg.set(e,l),l}A2(n=>({...n,get:(e,t,i)=>m0(e,t)||n.get(e,t,i),has:(e,t)=>!!m0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(D2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function D2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fy="@firebase/app",p0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new e_("@firebase/app"),O2="@firebase/app-compat",M2="@firebase/analytics-compat",P2="@firebase/analytics",V2="@firebase/app-check-compat",k2="@firebase/app-check",L2="@firebase/auth",j2="@firebase/auth-compat",U2="@firebase/database",z2="@firebase/data-connect",B2="@firebase/database-compat",H2="@firebase/functions",F2="@firebase/functions-compat",q2="@firebase/installations",G2="@firebase/installations-compat",$2="@firebase/messaging",K2="@firebase/messaging-compat",Y2="@firebase/performance",Q2="@firebase/performance-compat",X2="@firebase/remote-config",W2="@firebase/remote-config-compat",J2="@firebase/storage",Z2="@firebase/storage-compat",eO="@firebase/firestore",tO="@firebase/ai",nO="@firebase/firestore-compat",rO="firebase",iO="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="[DEFAULT]",aO={[fy]:"fire-core",[O2]:"fire-core-compat",[P2]:"fire-analytics",[M2]:"fire-analytics-compat",[k2]:"fire-app-check",[V2]:"fire-app-check-compat",[L2]:"fire-auth",[j2]:"fire-auth-compat",[U2]:"fire-rtdb",[z2]:"fire-data-connect",[B2]:"fire-rtdb-compat",[H2]:"fire-fn",[F2]:"fire-fn-compat",[q2]:"fire-iid",[G2]:"fire-iid-compat",[$2]:"fire-fcm",[K2]:"fire-fcm-compat",[Y2]:"fire-perf",[Q2]:"fire-perf-compat",[X2]:"fire-rc",[W2]:"fire-rc-compat",[J2]:"fire-gcs",[Z2]:"fire-gcs-compat",[eO]:"fire-fst",[nO]:"fire-fst-compat",[tO]:"fire-vertex","fire-js":"fire-js",[rO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Map,sO=new Map,my=new Map;function g0(n,e){try{n.container.addComponent(e)}catch(t){Na.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zl(n){const e=n.name;if(my.has(e))return Na.debug(`There were multiple attempts to register component ${e}.`),!1;my.set(e,n);for(const t of md.values())g0(t,n);for(const t of sO.values())g0(t,n);return!0}function n_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ei(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cs=new Gc("app","Firebase",oO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=iO;function JA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:dy,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Cs.create("bad-app-name",{appName:String(s)});if(t||(t=$A()),!t)throw Cs.create("no-options");const l=md.get(s);if(l){if(vo(t,l.options)&&vo(i,l.config))return l;throw Cs.create("duplicate-app",{appName:s})}const c=new m2(s);for(const m of my.values())c.addComponent(m);const d=new lO(t,i,c);return md.set(s,d),d}function ZA(n=dy){const e=md.get(n);if(!e&&n===dy&&$A())return JA();if(!e)throw Cs.create("no-app",{appName:n});return e}function Rs(n,e,t){let i=aO[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Na.warn(c.join(" "));return}zl(new Eo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="firebase-heartbeat-database",cO=1,Rc="firebase-heartbeat-store";let Bg=null;function ew(){return Bg||(Bg=R2(uO,cO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Cs.create("idb-open",{originalErrorMessage:n.message})})),Bg}async function hO(n){try{const t=(await ew()).transaction(Rc),i=await t.objectStore(Rc).get(tw(n));return await t.done,i}catch(e){if(e instanceof La)Na.warn(e.message);else{const t=Cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Na.warn(t.message)}}}async function y0(n,e){try{const i=(await ew()).transaction(Rc,"readwrite");await i.objectStore(Rc).put(e,tw(n)),await i.done}catch(t){if(t instanceof La)Na.warn(t.message);else{const i=Cs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Na.warn(i.message)}}}function tw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=1024,dO=30;class mO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=_0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>dO){const c=yO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Na.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=_0(),{heartbeatsToSend:i,unsentEntries:s}=pO(this._heartbeatsCache.heartbeats),l=dd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Na.warn(t),""}}}function _0(){return new Date().toISOString().substring(0,10)}function pO(n,e=fO){const t=[];let i=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),v0(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),v0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class gO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return n2()?r2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return y0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return y0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function v0(n){return dd(JSON.stringify({version:2,heartbeats:n})).length}function yO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(n){zl(new Eo("platform-logger",e=>new N2(e),"PRIVATE")),zl(new Eo("heartbeat",e=>new mO(e),"PRIVATE")),Rs(fy,p0,n),Rs(fy,p0,"esm2020"),Rs("fire-js","")}_O("");var E0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Is,nw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,I){function R(){}R.prototype=I.prototype,A.F=I.prototype,A.prototype=new R,A.prototype.constructor=A,A.D=function(N,M,V){for(var D=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)D[ye-2]=arguments[ye];return I.prototype[M].apply(N,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,I,R){R||(R=0);const N=Array(16);if(typeof I=="string")for(var M=0;M<16;++M)N[M]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(M=0;M<16;++M)N[M]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=A.g[0],R=A.g[1],M=A.g[2];let V=A.g[3],D;D=I+(V^R&(M^V))+N[0]+3614090360&4294967295,I=R+(D<<7&4294967295|D>>>25),D=V+(M^I&(R^M))+N[1]+3905402710&4294967295,V=I+(D<<12&4294967295|D>>>20),D=M+(R^V&(I^R))+N[2]+606105819&4294967295,M=V+(D<<17&4294967295|D>>>15),D=R+(I^M&(V^I))+N[3]+3250441966&4294967295,R=M+(D<<22&4294967295|D>>>10),D=I+(V^R&(M^V))+N[4]+4118548399&4294967295,I=R+(D<<7&4294967295|D>>>25),D=V+(M^I&(R^M))+N[5]+1200080426&4294967295,V=I+(D<<12&4294967295|D>>>20),D=M+(R^V&(I^R))+N[6]+2821735955&4294967295,M=V+(D<<17&4294967295|D>>>15),D=R+(I^M&(V^I))+N[7]+4249261313&4294967295,R=M+(D<<22&4294967295|D>>>10),D=I+(V^R&(M^V))+N[8]+1770035416&4294967295,I=R+(D<<7&4294967295|D>>>25),D=V+(M^I&(R^M))+N[9]+2336552879&4294967295,V=I+(D<<12&4294967295|D>>>20),D=M+(R^V&(I^R))+N[10]+4294925233&4294967295,M=V+(D<<17&4294967295|D>>>15),D=R+(I^M&(V^I))+N[11]+2304563134&4294967295,R=M+(D<<22&4294967295|D>>>10),D=I+(V^R&(M^V))+N[12]+1804603682&4294967295,I=R+(D<<7&4294967295|D>>>25),D=V+(M^I&(R^M))+N[13]+4254626195&4294967295,V=I+(D<<12&4294967295|D>>>20),D=M+(R^V&(I^R))+N[14]+2792965006&4294967295,M=V+(D<<17&4294967295|D>>>15),D=R+(I^M&(V^I))+N[15]+1236535329&4294967295,R=M+(D<<22&4294967295|D>>>10),D=I+(M^V&(R^M))+N[1]+4129170786&4294967295,I=R+(D<<5&4294967295|D>>>27),D=V+(R^M&(I^R))+N[6]+3225465664&4294967295,V=I+(D<<9&4294967295|D>>>23),D=M+(I^R&(V^I))+N[11]+643717713&4294967295,M=V+(D<<14&4294967295|D>>>18),D=R+(V^I&(M^V))+N[0]+3921069994&4294967295,R=M+(D<<20&4294967295|D>>>12),D=I+(M^V&(R^M))+N[5]+3593408605&4294967295,I=R+(D<<5&4294967295|D>>>27),D=V+(R^M&(I^R))+N[10]+38016083&4294967295,V=I+(D<<9&4294967295|D>>>23),D=M+(I^R&(V^I))+N[15]+3634488961&4294967295,M=V+(D<<14&4294967295|D>>>18),D=R+(V^I&(M^V))+N[4]+3889429448&4294967295,R=M+(D<<20&4294967295|D>>>12),D=I+(M^V&(R^M))+N[9]+568446438&4294967295,I=R+(D<<5&4294967295|D>>>27),D=V+(R^M&(I^R))+N[14]+3275163606&4294967295,V=I+(D<<9&4294967295|D>>>23),D=M+(I^R&(V^I))+N[3]+4107603335&4294967295,M=V+(D<<14&4294967295|D>>>18),D=R+(V^I&(M^V))+N[8]+1163531501&4294967295,R=M+(D<<20&4294967295|D>>>12),D=I+(M^V&(R^M))+N[13]+2850285829&4294967295,I=R+(D<<5&4294967295|D>>>27),D=V+(R^M&(I^R))+N[2]+4243563512&4294967295,V=I+(D<<9&4294967295|D>>>23),D=M+(I^R&(V^I))+N[7]+1735328473&4294967295,M=V+(D<<14&4294967295|D>>>18),D=R+(V^I&(M^V))+N[12]+2368359562&4294967295,R=M+(D<<20&4294967295|D>>>12),D=I+(R^M^V)+N[5]+4294588738&4294967295,I=R+(D<<4&4294967295|D>>>28),D=V+(I^R^M)+N[8]+2272392833&4294967295,V=I+(D<<11&4294967295|D>>>21),D=M+(V^I^R)+N[11]+1839030562&4294967295,M=V+(D<<16&4294967295|D>>>16),D=R+(M^V^I)+N[14]+4259657740&4294967295,R=M+(D<<23&4294967295|D>>>9),D=I+(R^M^V)+N[1]+2763975236&4294967295,I=R+(D<<4&4294967295|D>>>28),D=V+(I^R^M)+N[4]+1272893353&4294967295,V=I+(D<<11&4294967295|D>>>21),D=M+(V^I^R)+N[7]+4139469664&4294967295,M=V+(D<<16&4294967295|D>>>16),D=R+(M^V^I)+N[10]+3200236656&4294967295,R=M+(D<<23&4294967295|D>>>9),D=I+(R^M^V)+N[13]+681279174&4294967295,I=R+(D<<4&4294967295|D>>>28),D=V+(I^R^M)+N[0]+3936430074&4294967295,V=I+(D<<11&4294967295|D>>>21),D=M+(V^I^R)+N[3]+3572445317&4294967295,M=V+(D<<16&4294967295|D>>>16),D=R+(M^V^I)+N[6]+76029189&4294967295,R=M+(D<<23&4294967295|D>>>9),D=I+(R^M^V)+N[9]+3654602809&4294967295,I=R+(D<<4&4294967295|D>>>28),D=V+(I^R^M)+N[12]+3873151461&4294967295,V=I+(D<<11&4294967295|D>>>21),D=M+(V^I^R)+N[15]+530742520&4294967295,M=V+(D<<16&4294967295|D>>>16),D=R+(M^V^I)+N[2]+3299628645&4294967295,R=M+(D<<23&4294967295|D>>>9),D=I+(M^(R|~V))+N[0]+4096336452&4294967295,I=R+(D<<6&4294967295|D>>>26),D=V+(R^(I|~M))+N[7]+1126891415&4294967295,V=I+(D<<10&4294967295|D>>>22),D=M+(I^(V|~R))+N[14]+2878612391&4294967295,M=V+(D<<15&4294967295|D>>>17),D=R+(V^(M|~I))+N[5]+4237533241&4294967295,R=M+(D<<21&4294967295|D>>>11),D=I+(M^(R|~V))+N[12]+1700485571&4294967295,I=R+(D<<6&4294967295|D>>>26),D=V+(R^(I|~M))+N[3]+2399980690&4294967295,V=I+(D<<10&4294967295|D>>>22),D=M+(I^(V|~R))+N[10]+4293915773&4294967295,M=V+(D<<15&4294967295|D>>>17),D=R+(V^(M|~I))+N[1]+2240044497&4294967295,R=M+(D<<21&4294967295|D>>>11),D=I+(M^(R|~V))+N[8]+1873313359&4294967295,I=R+(D<<6&4294967295|D>>>26),D=V+(R^(I|~M))+N[15]+4264355552&4294967295,V=I+(D<<10&4294967295|D>>>22),D=M+(I^(V|~R))+N[6]+2734768916&4294967295,M=V+(D<<15&4294967295|D>>>17),D=R+(V^(M|~I))+N[13]+1309151649&4294967295,R=M+(D<<21&4294967295|D>>>11),D=I+(M^(R|~V))+N[4]+4149444226&4294967295,I=R+(D<<6&4294967295|D>>>26),D=V+(R^(I|~M))+N[11]+3174756917&4294967295,V=I+(D<<10&4294967295|D>>>22),D=M+(I^(V|~R))+N[2]+718787259&4294967295,M=V+(D<<15&4294967295|D>>>17),D=R+(V^(M|~I))+N[9]+3951481745&4294967295,A.g[0]=A.g[0]+I&4294967295,A.g[1]=A.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+V&4294967295}i.prototype.v=function(A,I){I===void 0&&(I=A.length);const R=I-this.blockSize,N=this.C;let M=this.h,V=0;for(;V<I;){if(M==0)for(;V<=R;)s(this,A,V),V+=this.blockSize;if(typeof A=="string"){for(;V<I;)if(N[M++]=A.charCodeAt(V++),M==this.blockSize){s(this,N),M=0;break}}else for(;V<I;)if(N[M++]=A[V++],M==this.blockSize){s(this,N),M=0;break}}this.h=M,this.o+=I},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var I=1;I<A.length-8;++I)A[I]=0;I=this.o*8;for(var R=A.length-8;R<A.length;++R)A[R]=I&255,I/=256;for(this.v(A),A=Array(16),I=0,R=0;R<4;++R)for(let N=0;N<32;N+=8)A[I++]=this.g[R]>>>N&255;return A};function l(A,I){var R=d;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=I(A)}function c(A,I){this.h=I;const R=[];let N=!0;for(let M=A.length-1;M>=0;M--){const V=A[M]|0;N&&V==I||(R[M]=V,N=!1)}this.g=R}var d={};function m(A){return-128<=A&&A<128?l(A,function(I){return new c([I|0],I<0?-1:0)}):new c([A|0],A<0?-1:0)}function p(A){if(isNaN(A)||!isFinite(A))return v;if(A<0)return j(p(-A));const I=[];let R=1;for(let N=0;A>=R;N++)I[N]=A/R|0,R*=4294967296;return new c(I,0)}function y(A,I){if(A.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(A.charAt(0)=="-")return j(y(A.substring(1),I));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(I,8));let N=v;for(let V=0;V<A.length;V+=8){var M=Math.min(8,A.length-V);const D=parseInt(A.substring(V,V+M),I);M<8?(M=p(Math.pow(I,M)),N=N.j(M).add(p(D))):(N=N.j(R),N=N.add(p(D)))}return N}var v=m(0),S=m(1),w=m(16777216);n=c.prototype,n.m=function(){if(z(this))return-j(this).m();let A=0,I=1;for(let R=0;R<this.g.length;R++){const N=this.i(R);A+=(N>=0?N:4294967296+N)*I,I*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(O(this))return"0";if(z(this))return"-"+j(this).toString(A);const I=p(Math.pow(A,6));var R=this;let N="";for(;;){const M=te(R,I).g;R=G(R,M.j(I));let V=((R.g.length>0?R.g[0]:R.h)>>>0).toString(A);if(R=M,O(R))return V+N;for(;V.length<6;)V="0"+V;N=V+N}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function O(A){if(A.h!=0)return!1;for(let I=0;I<A.g.length;I++)if(A.g[I]!=0)return!1;return!0}function z(A){return A.h==-1}n.l=function(A){return A=G(this,A),z(A)?-1:O(A)?0:1};function j(A){const I=A.g.length,R=[];for(let N=0;N<I;N++)R[N]=~A.g[N];return new c(R,~A.h).add(S)}n.abs=function(){return z(this)?j(this):this},n.add=function(A){const I=Math.max(this.g.length,A.g.length),R=[];let N=0;for(let M=0;M<=I;M++){let V=N+(this.i(M)&65535)+(A.i(M)&65535),D=(V>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);N=D>>>16,V&=65535,D&=65535,R[M]=D<<16|V}return new c(R,R[R.length-1]&-2147483648?-1:0)};function G(A,I){return A.add(j(I))}n.j=function(A){if(O(this)||O(A))return v;if(z(this))return z(A)?j(this).j(j(A)):j(j(this).j(A));if(z(A))return j(this.j(j(A)));if(this.l(w)<0&&A.l(w)<0)return p(this.m()*A.m());const I=this.g.length+A.g.length,R=[];for(var N=0;N<2*I;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(let M=0;M<A.g.length;M++){const V=this.i(N)>>>16,D=this.i(N)&65535,ye=A.i(M)>>>16,me=A.i(M)&65535;R[2*N+2*M]+=D*me,H(R,2*N+2*M),R[2*N+2*M+1]+=V*me,H(R,2*N+2*M+1),R[2*N+2*M+1]+=D*ye,H(R,2*N+2*M+1),R[2*N+2*M+2]+=V*ye,H(R,2*N+2*M+2)}for(A=0;A<I;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=I;A<2*I;A++)R[A]=0;return new c(R,0)};function H(A,I){for(;(A[I]&65535)!=A[I];)A[I+1]+=A[I]>>>16,A[I]&=65535,I++}function K(A,I){this.g=A,this.h=I}function te(A,I){if(O(I))throw Error("division by zero");if(O(A))return new K(v,v);if(z(A))return I=te(j(A),I),new K(j(I.g),j(I.h));if(z(I))return I=te(A,j(I)),new K(j(I.g),I.h);if(A.g.length>30){if(z(A)||z(I))throw Error("slowDivide_ only works with positive integers.");for(var R=S,N=I;N.l(A)<=0;)R=se(R),N=se(N);var M=ee(R,1),V=ee(N,1);for(N=ee(N,2),R=ee(R,2);!O(N);){var D=V.add(N);D.l(A)<=0&&(M=M.add(R),V=D),N=ee(N,1),R=ee(R,1)}return I=G(A,M.j(I)),new K(M,I)}for(M=v;A.l(I)>=0;){for(R=Math.max(1,Math.floor(A.m()/I.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),V=p(R),D=V.j(I);z(D)||D.l(A)>0;)R-=N,V=p(R),D=V.j(I);O(V)&&(V=S),M=M.add(V),A=G(A,D)}return new K(M,A)}n.B=function(A){return te(this,A).h},n.and=function(A){const I=Math.max(this.g.length,A.g.length),R=[];for(let N=0;N<I;N++)R[N]=this.i(N)&A.i(N);return new c(R,this.h&A.h)},n.or=function(A){const I=Math.max(this.g.length,A.g.length),R=[];for(let N=0;N<I;N++)R[N]=this.i(N)|A.i(N);return new c(R,this.h|A.h)},n.xor=function(A){const I=Math.max(this.g.length,A.g.length),R=[];for(let N=0;N<I;N++)R[N]=this.i(N)^A.i(N);return new c(R,this.h^A.h)};function se(A){const I=A.g.length+1,R=[];for(let N=0;N<I;N++)R[N]=A.i(N)<<1|A.i(N-1)>>>31;return new c(R,A.h)}function ee(A,I){const R=I>>5;I%=32;const N=A.g.length-R,M=[];for(let V=0;V<N;V++)M[V]=I>0?A.i(V+R)>>>I|A.i(V+R+1)<<32-I:A.i(V+R);return new c(M,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,nw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Is=c}).apply(typeof E0<"u"?E0:typeof self<"u"?self:typeof window<"u"?window:{});var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rw,uc,iw,Gf,py,aw,sw,ow;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nf=="object"&&Nf];for(var _=0;_<h.length;++_){var b=h[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function s(h,_){if(_)e:{var b=i;h=h.split(".");for(var x=0;x<h.length-1;x++){var Y=h[x];if(!(Y in b))break e;b=b[Y]}h=h[h.length-1],x=b[h],_=_(x),_!=x&&_!=null&&e(b,h,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(_){var b=[],x;for(x in _)Object.prototype.hasOwnProperty.call(_,x)&&b.push([x,_[x]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,b){return h.call.apply(h.bind,arguments)}function p(h,_,b){return p=m,p.apply(null,arguments)}function y(h,_){var b=Array.prototype.slice.call(arguments,1);return function(){var x=b.slice();return x.push.apply(x,arguments),h.apply(this,x)}}function v(h,_){function b(){}b.prototype=_.prototype,h.Z=_.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(x,Y,ne){for(var Ce=Array(arguments.length-2),et=2;et<arguments.length;et++)Ce[et-2]=arguments[et];return _.prototype[Y].apply(x,Ce)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const _=h.length;if(_>0){const b=Array(_);for(let x=0;x<_;x++)b[x]=h[x];return b}return[]}function O(h,_){for(let x=1;x<arguments.length;x++){const Y=arguments[x];var b=typeof Y;if(b=b!="object"?b:Y?Array.isArray(Y)?"array":b:"null",b=="array"||b=="object"&&typeof Y.length=="number"){b=h.length||0;const ne=Y.length||0;h.length=b+ne;for(let Ce=0;Ce<ne;Ce++)h[b+Ce]=Y[Ce]}else h.push(Y)}}class z{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function j(h){c.setTimeout(()=>{throw h},0)}function G(){var h=A;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class H{constructor(){this.h=this.g=null}add(_,b){const x=K.get();x.set(_,b),this.h?this.h.next=x:this.g=x,this.h=x}}var K=new z(()=>new te,h=>h.reset());class te{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let se,ee=!1,A=new H,I=()=>{const h=Promise.resolve(void 0);se=()=>{h.then(R)}};function R(){for(var h;h=G();){try{h.h.call(h.g)}catch(b){j(b)}var _=K;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}ee=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};c.addEventListener("test",b,_),c.removeEventListener("test",b,_)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function ye(h,_){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}v(ye,M),ye.prototype.init=function(h,_){const b=this.type=h.type,x=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(b=="mouseover"?_=h.fromElement:b=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),B=0;function J(h,_,b,x,Y){this.listener=h,this.proxy=null,this.src=_,this.type=b,this.capture=!!x,this.ha=Y,this.key=++B,this.da=this.fa=!1}function ue(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ce(h,_,b){for(const x in h)_.call(b,h[x],x,h)}function be(h,_){for(const b in h)_.call(void 0,h[b],b,h)}function L(h){const _={};for(const b in h)_[b]=h[b];return _}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ve(h,_){let b,x;for(let Y=1;Y<arguments.length;Y++){x=arguments[Y];for(b in x)h[b]=x[b];for(let ne=0;ne<re.length;ne++)b=re[ne],Object.prototype.hasOwnProperty.call(x,b)&&(h[b]=x[b])}}function ae(h){this.src=h,this.g={},this.h=0}ae.prototype.add=function(h,_,b,x,Y){const ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);const Ce=Te(h,_,x,Y);return Ce>-1?(_=h[Ce],b||(_.fa=!1)):(_=new J(_,this.src,ne,!!x,Y),_.fa=b,h.push(_)),_};function _e(h,_){const b=_.type;if(b in h.g){var x=h.g[b],Y=Array.prototype.indexOf.call(x,_,void 0),ne;(ne=Y>=0)&&Array.prototype.splice.call(x,Y,1),ne&&(ue(_),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Te(h,_,b,x){for(let Y=0;Y<h.length;++Y){const ne=h[Y];if(!ne.da&&ne.listener==_&&ne.capture==!!b&&ne.ha==x)return Y}return-1}var Ne="closure_lm_"+(Math.random()*1e6|0),je={};function Fe(h,_,b,x,Y){if(Array.isArray(_)){for(let ne=0;ne<_.length;ne++)Fe(h,_[ne],b,x,Y);return null}return b=Ir(b),h&&h[me]?h.J(_,b,d(x)?!!x.capture:!1,Y):Et(h,_,b,!1,x,Y)}function Et(h,_,b,x,Y,ne){if(!_)throw Error("Invalid event type");const Ce=d(Y)?!!Y.capture:!!Y;let et=an(h);if(et||(h[Ne]=et=new ae(h)),b=et.add(_,b,x,Ce,ne),b.proxy)return b;if(x=wt(),b.proxy=x,x.src=h,x.listener=b,h.addEventListener)V||(Y=Ce),Y===void 0&&(Y=!1),h.addEventListener(_.toString(),x,Y);else if(h.attachEvent)h.attachEvent(Zt(_.toString()),x);else if(h.addListener&&h.removeListener)h.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return b}function wt(){function h(b){return _.call(h.src,h.listener,b)}const _=Kr;return h}function We(h,_,b,x,Y){if(Array.isArray(_))for(var ne=0;ne<_.length;ne++)We(h,_[ne],b,x,Y);else x=d(x)?!!x.capture:!!x,b=Ir(b),h&&h[me]?(h=h.i,ne=String(_).toString(),ne in h.g&&(_=h.g[ne],b=Te(_,b,x,Y),b>-1&&(ue(_[b]),Array.prototype.splice.call(_,b,1),_.length==0&&(delete h.g[ne],h.h--)))):h&&(h=an(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Te(_,b,x,Y)),(b=h>-1?_[h]:null)&&Ht(b))}function Ht(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[me])_e(_.i,h);else{var b=h.type,x=h.proxy;_.removeEventListener?_.removeEventListener(b,x,h.capture):_.detachEvent?_.detachEvent(Zt(b),x):_.addListener&&_.removeListener&&_.removeListener(x),(b=an(_))?(_e(b,h),b.h==0&&(b.src=null,_[Ne]=null)):ue(h)}}}function Zt(h){return h in je?je[h]:je[h]="on"+h}function Kr(h,_){if(h.da)h=!0;else{_=new ye(_,this);const b=h.listener,x=h.ha||h.src;h.fa&&Ht(h),h=b.call(x,_)}return h}function an(h){return h=h[Ne],h instanceof ae?h:null}var Qn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ir(h){return typeof h=="function"?h:(h[Qn]||(h[Qn]=function(_){return h.handleEvent(_)}),h[Qn])}function Mt(){N.call(this),this.i=new ae(this),this.M=this,this.G=null}v(Mt,N),Mt.prototype[me]=!0,Mt.prototype.removeEventListener=function(h,_,b,x){We(this,h,_,b,x)};function st(h,_){var b,x=h.G;if(x)for(b=[];x;x=x.G)b.push(x);if(h=h.M,x=_.type||_,typeof _=="string")_=new M(_,h);else if(_ instanceof M)_.target=_.target||h;else{var Y=_;_=new M(x,h),ve(_,Y)}Y=!0;let ne,Ce;if(b)for(Ce=b.length-1;Ce>=0;Ce--)ne=_.g=b[Ce],Y=Dn(ne,x,!0,_)&&Y;if(ne=_.g=h,Y=Dn(ne,x,!0,_)&&Y,Y=Dn(ne,x,!1,_)&&Y,b)for(Ce=0;Ce<b.length;Ce++)ne=_.g=b[Ce],Y=Dn(ne,x,!1,_)&&Y}Mt.prototype.N=function(){if(Mt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const b=h.g[_];for(let x=0;x<b.length;x++)ue(b[x]);delete h.g[_],h.h--}}this.G=null},Mt.prototype.J=function(h,_,b,x){return this.i.add(String(h),_,!1,b,x)},Mt.prototype.K=function(h,_,b,x){return this.i.add(String(h),_,!0,b,x)};function Dn(h,_,b,x){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let Y=!0;for(let ne=0;ne<_.length;++ne){const Ce=_[ne];if(Ce&&!Ce.da&&Ce.capture==b){const et=Ce.listener,gn=Ce.ha||Ce.src;Ce.fa&&_e(h.i,Ce),Y=et.call(gn,x)!==!1&&Y}}return Y&&!x.defaultPrevented}function Ri(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function Ii(h){h.g=Ri(()=>{h.g=null,h.i&&(h.i=!1,Ii(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Ft extends N{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ii(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function En(h){N.call(this),this.h=h,this.g={}}v(En,N);var ar=[];function Xn(h){ce(h.g,function(_,b){this.g.hasOwnProperty(b)&&Ht(_)},h),h.g={}}En.prototype.N=function(){En.Z.N.call(this),Xn(this)},En.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pn=c.JSON.stringify,le=c.JSON.parse,Se=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Ie(){}function Ee(){}var De={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pe(){M.call(this,"d")}v(Pe,M);function Ct(){M.call(this,"c")}v(Ct,M);var Ge={},bt=null;function sn(){return bt=bt||new Mt}Ge.Ia="serverreachability";function On(h){M.call(this,Ge.Ia,h)}v(On,M);function sr(h){const _=sn();st(_,new On(_))}Ge.STAT_EVENT="statevent";function xi(h,_){M.call(this,Ge.STAT_EVENT,h),this.stat=_}v(xi,M);function en(h){const _=sn();st(_,new xi(_,h))}Ge.Ja="timingevent";function Yr(h,_){M.call(this,Ge.Ja,h),this.size=_}v(Yr,M);function xr(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function Nr(){this.g=!0}Nr.prototype.ua=function(){this.g=!1};function Mo(h,_,b,x,Y,ne){h.info(function(){if(h.g)if(ne){var Ce="",et=ne.split("&");for(let It=0;It<et.length;It++){var gn=et[It].split("=");if(gn.length>1){const tn=gn[0];gn=gn[1];const Wr=tn.split("_");Ce=Wr.length>=2&&Wr[1]=="type"?Ce+(tn+"="+gn+"&"):Ce+(tn+"=redacted&")}}}else Ce=null;else Ce=ne;return"XMLHTTP REQ ("+x+") [attempt "+Y+"]: "+_+`
`+b+`
`+Ce})}function Zi(h,_,b,x,Y,ne,Ce){h.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+Y+"]: "+_+`
`+b+`
`+ne+" "+Ce})}function or(h,_,b,x){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+lu(h,b)+(x?" "+x:"")})}function Ni(h,_){h.info(function(){return"TIMEOUT: "+_})}Nr.prototype.info=function(){};function lu(h,_){if(!h.g)return _;if(!_)return null;try{const ne=JSON.parse(_);if(ne){for(h=0;h<ne.length;h++)if(Array.isArray(ne[h])){var b=ne[h];if(!(b.length<2)){var x=b[1];if(Array.isArray(x)&&!(x.length<1)){var Y=x[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let Ce=1;Ce<x.length;Ce++)x[Ce]=""}}}}return pn(ne)}catch{return _}}var ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},k={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},q;function W(){}v(W,Ie),W.prototype.g=function(){return new XMLHttpRequest},q=new W;function ge(h){return encodeURIComponent(String(h))}function Ae(h){var _=1;h=h.split(":");const b=[];for(;_>0&&h.length;)b.push(h.shift()),_--;return h.length&&b.push(h.join(":")),b}function Oe(h,_,b,x){this.j=h,this.i=_,this.l=b,this.S=x||1,this.V=new En(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ke}function ke(){this.i=null,this.g="",this.h=!1}var we={},Re={};function Ve(h,_,b){h.M=1,h.A=Us(Lt(_)),h.u=b,h.R=!0,$e(h,null)}function $e(h,_){h.F=Date.now(),kt(h),h.B=Lt(h.A);var b=h.B,x=h.S;Array.isArray(x)||(x=[String(x)]),Vo(b.i,"t",x),h.C=0,b=h.j.L,h.h=new ke,h.g=vh(h.j,b?_:null,!h.u),h.P>0&&(h.O=new Ft(p(h.Y,h,h.g),h.P)),_=h.V,b=h.g,x=h.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(ar[0]=Y.toString()),Y=ar);for(let ne=0;ne<Y.length;ne++){const Ce=Fe(b,Y[ne],x||_.handleEvent,!1,_.h||_);if(!Ce)break;_.g[Ce.key]=Ce}_=h.J?L(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),sr(),Mo(h.i,h.v,h.B,h.l,h.S,h.u)}Oe.prototype.ba=function(h){h=h.target;const _=this.O;_&&mi(h)==3?_.j():this.Y(h)},Oe.prototype.Y=function(h){try{if(h==this.g)e:{const et=mi(this.g),gn=this.g.ya(),It=this.g.ca();if(!(et<3)&&(et!=3||this.g&&(this.h.h||this.g.la()||Un(this.g)))){this.K||et!=4||gn==7||(gn==8||It<=0?sr(3):sr(2)),Gt(this);var _=this.g.ca();this.X=_;var b=ze(this);if(this.o=_==200,Zi(this.i,this.v,this.B,this.l,this.S,et,_),this.o){if(this.U&&!this.L){t:{if(this.g){var x,Y=this.g;if((x=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(x)){var ne=x;break t}}ne=null}if(h=ne)or(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,kn(this,h);else{this.o=!1,this.m=3,en(12),$t(this),nt(this);break e}}if(this.R){h=!0;let tn;for(;!this.K&&this.C<b.length;)if(tn=ot(this,b),tn==Re){et==4&&(this.m=4,en(14),h=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==we){this.m=4,en(15),or(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else or(this.i,this.l,tn,null),kn(this,tn);if(Qe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||b.length!=0||this.h.h||(this.m=1,en(16),h=!1),this.o=this.o&&h,!h)or(this.i,this.l,b,"[Invalid Chunked Response]"),$t(this),nt(this);else if(b.length>0&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.aa&&!Ce.P&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),yu(Ce),Ce.P=!0,en(11))}}else or(this.i,this.l,b,null),kn(this,b);et==4&&$t(this),this.o&&!this.K&&(et==4?ph(this.j,this):(this.o=!1,kt(this)))}else na(this.g),_==400&&b.indexOf("Unknown SID")>0?(this.m=3,en(12)):(this.m=0,en(13)),$t(this),nt(this)}}}catch{}finally{}};function ze(h){if(!Qe(h))return h.g.la();const _=Un(h.g);if(_==="")return"";let b="";const x=_.length,Y=mi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return $t(h),nt(h),"";h.h.i=new c.TextDecoder}for(let ne=0;ne<x;ne++)h.h.h=!0,b+=h.h.i.decode(_[ne],{stream:!(Y&&ne==x-1)});return _.length=0,h.h.g+=b,h.C=0,h.h.g}function Qe(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ot(h,_){var b=h.C,x=_.indexOf(`
`,b);return x==-1?Re:(b=Number(_.substring(b,x)),isNaN(b)?we:(x+=1,x+b>_.length?Re:(_=_.slice(x,x+b),h.C=x+b,_)))}Oe.prototype.cancel=function(){this.K=!0,$t(this)};function kt(h){h.T=Date.now()+h.H,Qt(h,h.H)}function Qt(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=xr(p(h.aa,h),_)}function Gt(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Oe.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ni(this.i,this.B),this.M!=2&&(sr(),en(17)),$t(this),this.m=2,nt(this)):Qt(this,this.T-h)};function nt(h){h.j.I==0||h.K||ph(h.j,h)}function $t(h){Gt(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Xn(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function kn(h,_){try{var b=h.j;if(b.I!=0&&(b.g==h||Jn(b.h,h))){if(!h.L&&Jn(b.h,h)&&b.I==3){try{var x=b.Ba.g.parse(_)}catch{x=null}if(Array.isArray(x)&&x.length==3){var Y=x;if(Y[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)zo(b),Ga(b);else break e;$s(b),en(18)}}else b.xa=Y[1],0<b.xa-b.K&&Y[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=xr(p(b.Va,b),6e3));pr(b.h)<=1&&b.ta&&(b.ta=void 0)}else ji(b,11)}else if((h.L||b.g==h)&&zo(b),!D(_))for(Y=b.Ba.g.parse(_),_=0;_<Y.length;_++){let It=Y[_];const tn=It[0];if(!(tn<=b.K))if(b.K=tn,It=It[1],b.I==2)if(It[0]=="c"){b.M=It[1],b.ba=It[2];const Wr=It[3];Wr!=null&&(b.ka=Wr,b.j.info("VER="+b.ka));const Ui=It[4];Ui!=null&&(b.za=Ui,b.j.info("SVER="+b.za));const pi=It[5];pi!=null&&typeof pi=="number"&&pi>0&&(x=1.5*pi,b.O=x,b.j.info("backChannelRequestTimeoutMs_="+x)),x=b;const gi=h.g;if(gi){const Ks=gi.g?gi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var ne=x.h;ne.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Dr(ne,ne.h),ne.h=null))}if(x.G){const Bo=gi.g?gi.g.getResponseHeader("X-HTTP-Session-Id"):null;Bo&&(x.wa=Bo,Rt(x.J,x.G,Bo))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),x=b;var Ce=h;if(x.na=_h(x,x.L?x.ba:null,x.W),Ce.L){Di(x.h,Ce);var et=Ce,gn=x.O;gn&&(et.H=gn),et.D&&(Gt(et),kt(et)),x.g=Ce}else dh(x);b.i.length>0&&Li(b)}else It[0]!="stop"&&It[0]!="close"||ji(b,7);else b.I==3&&(It[0]=="stop"||It[0]=="close"?It[0]=="stop"?ji(b,7):pu(b):It[0]!="noop"&&b.l&&b.l.qa(It),b.A=0)}}sr(4)}catch{}}var Kt=class{constructor(h,_){this.g=h,this.map=_}};function mr(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function pr(h){return h.h?1:h.g?h.g.size:0}function Jn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Dr(h,_){h.g?h.g.add(_):h.h=_}function Di(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}mr.prototype.cancel=function(){if(this.i=Oi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Oi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const b of h.g.values())_=_.concat(b.G);return _}return w(h.i)}var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function on(h,_){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const x=h[b].indexOf("=");let Y,ne=null;x>=0?(Y=h[b].substring(0,x),ne=h[b].substring(x+1)):Y=h[b],_(Y,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Tn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof Tn?(this.l=h.l,rt(this,h.j),this.o=h.o,this.g=h.g,Or(this,h.u),this.h=h.h,ja(this,hh(h.i)),this.m=h.m):h&&(_=String(h).match(ut))?(this.l=!1,rt(this,_[1]||"",!0),this.o=Mi(_[2]||""),this.g=Mi(_[3]||"",!0),Or(this,_[4]),this.h=Mi(_[5]||"",!0),ja(this,_[6]||"",!0),this.m=Mi(_[7]||"")):(this.l=!1,this.i=new za(null,this.l))}Tn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(zs(_,Po,!0),":");var b=this.g;return(b||_=="file")&&(h.push("//"),(_=this.o)&&h.push(zs(_,Po,!0),"@"),h.push(ge(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(zs(b,b.charAt(0)=="/"?uu:lh,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",zs(b,uh)),h.join("")},Tn.prototype.resolve=function(h){const _=Lt(this);let b=!!h.j;b?rt(_,h.j):b=!!h.o,b?_.o=h.o:b=!!h.g,b?_.g=h.g:b=h.u!=null;var x=h.h;if(b)Or(_,h.u);else if(b=!!h.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var Y=_.h.lastIndexOf("/");Y!=-1&&(x=_.h.slice(0,Y+1)+x)}if(Y=x,Y==".."||Y==".")x="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){x=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const ne=[];for(let Ce=0;Ce<Y.length;){const et=Y[Ce++];et=="."?x&&Ce==Y.length&&ne.push(""):et==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),x&&Ce==Y.length&&ne.push("")):(ne.push(et),x=!0)}x=ne.join("/")}else x=Y}return b?_.h=x:b=h.i.toString()!=="",b?ja(_,hh(h.i)):b=!!h.m,b&&(_.m=h.m),_};function Lt(h){return new Tn(h)}function rt(h,_,b){h.j=b?Mi(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Or(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function ja(h,_,b){_ instanceof za?(h.i=_,ko(h.i,h.l)):(b||(_=zs(_,Ua)),h.i=new za(_,h.l))}function Rt(h,_,b){h.i.set(_,b)}function Us(h){return Rt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Mi(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function zs(h,_,b){return typeof h=="string"?(h=encodeURI(h).replace(_,gr),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function gr(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Po=/[#\/\?@]/g,lh=/[#\?:]/g,uu=/[#\?]/g,Ua=/[#\?@]/g,uh=/#/g;function za(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function yr(h){h.g||(h.g=new Map,h.h=0,h.i&&on(h.i,function(_,b){h.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=za.prototype,n.add=function(h,_){yr(this),this.i=null,h=Ba(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(_),this.h+=1,this};function ch(h,_){yr(h),_=Ba(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function cu(h,_){return yr(h),_=Ba(h,_),h.g.has(_)}n.forEach=function(h,_){yr(this),this.g.forEach(function(b,x){b.forEach(function(Y){h.call(_,Y,x,this)},this)},this)};function hu(h,_){yr(h);let b=[];if(typeof _=="string")cu(h,_)&&(b=b.concat(h.g.get(Ba(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)b=b.concat(h[_]);return b}n.set=function(h,_){return yr(this),this.i=null,h=Ba(this,h),cu(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=hu(this,h),h.length>0?String(h[0]):_):_};function Vo(h,_,b){ch(h,_),b.length>0&&(h.i=null,h.g.set(Ba(h,_),w(b)),h.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let x=0;x<_.length;x++){var b=_[x];const Y=ge(b);b=hu(this,b);for(let ne=0;ne<b.length;ne++){let Ce=Y;b[ne]!==""&&(Ce+="="+ge(b[ne])),h.push(Ce)}}return this.i=h.join("&")};function hh(h){const _=new za;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Ba(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function ko(h,_){_&&!h.j&&(yr(h),h.i=null,h.g.forEach(function(b,x){const Y=x.toLowerCase();x!=Y&&(ch(this,x),Vo(this,Y,b))},h)),h.j=_}function fi(h,_){const b=new Nr;if(c.Image){const x=new Image;x.onload=y(Qr,b,"TestLoadImage: loaded",!0,_,x),x.onerror=y(Qr,b,"TestLoadImage: error",!1,_,x),x.onabort=y(Qr,b,"TestLoadImage: abort",!1,_,x),x.ontimeout=y(Qr,b,"TestLoadImage: timeout",!1,_,x),c.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=h}else _(!1)}function fu(h,_){const b=new Nr,x=new AbortController,Y=setTimeout(()=>{x.abort(),Qr(b,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:x.signal}).then(ne=>{clearTimeout(Y),ne.ok?Qr(b,"TestPingServer: ok",!0,_):Qr(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Y),Qr(b,"TestPingServer: error",!1,_)})}function Qr(h,_,b,x,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),x(b)}catch{}}function Ha(){this.g=new Se}function Pi(h){this.i=h.Sb||null,this.h=h.ab||!1}v(Pi,Ie),Pi.prototype.g=function(){return new Bs(this.i,this.h)};function Bs(h,_){Mt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Bs,Mt),n=Bs.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,di(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fa(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Lo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Lo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Fa(this):di(this),this.readyState==3&&Lo(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Fa(this))},n.Na=function(h){this.g&&(this.response=h,Fa(this))},n.ga=function(){this.g&&Fa(this)};function Fa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,di(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=_.next();return h.join(`\r
`)};function di(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Xr(h){let _="";return ce(h,function(b,x){_+=x,_+=":",_+=b,_+=`\r
`}),_}function Hs(h,_,b){e:{for(x in b){var x=!1;break e}x=!0}x||(b=Xr(b),typeof h=="string"?b!=null&&ge(b):Rt(h,_,b))}function jt(h){Mt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(jt,Mt);var Vi=/^https?$/i,du=["POST","PUT"];n=jt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,b,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():q.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ne){Fs(this,ne);return}if(h=b||"",b=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var Y in x)b.set(Y,x[Y]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const ne of x.keys())b.set(ne,x.get(ne));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(b.keys()).find(ne=>ne.toLowerCase()=="content-type"),Y=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(du,_,void 0)>=0)||x||Y||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Ce]of b)this.g.setRequestHeader(ne,Ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ne){Fs(this,ne)}};function Fs(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,mu(h),ta(h)}function mu(h){h.A||(h.A=!0,st(h,"complete"),st(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,st(this,"complete"),st(this,"abort"),ta(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ta(this,!0)),jt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?qs(this):this.Xa())},n.Xa=function(){qs(this)};function qs(h){if(h.h&&typeof l<"u"){if(h.v&&mi(h)==4)setTimeout(h.Ca.bind(h),0);else if(st(h,"readystatechange"),mi(h)==4){h.h=!1;try{const ne=h.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var x;if(x=ne===0){let Ce=String(h.D).match(ut)[1]||null;!Ce&&c.self&&c.self.location&&(Ce=c.self.location.protocol.slice(0,-1)),x=!Vi.test(Ce?Ce.toLowerCase():"")}b=x}if(b)st(h,"complete"),st(h,"success");else{h.o=6;try{var Y=mi(h)>2?h.g.statusText:""}catch{Y=""}h.l=Y+" ["+h.ca()+"]",mu(h)}}finally{ta(h)}}}}function ta(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,_||st(h,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function mi(h){return h.g?h.g.readyState:0}n.ca=function(){try{return mi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),le(_)}};function Un(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function na(h){const _={};h=(h.g&&mi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<h.length;x++){if(D(h[x]))continue;var b=Ae(h[x]);const Y=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const ne=_[Y]||[];_[Y]=ne,ne.push(b)}be(_,function(x){return x.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(h,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||_}function qa(h){this.za=0,this.i=[],this.j=new Nr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,h),this.Za=ki("retryDelaySeedMs",1e4,h),this.Ta=ki("forwardChannelMaxRetries",2,h),this.va=ki("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new mr(h&&h.concurrentRequestLimit),this.Ba=new Ha,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=qa.prototype,n.ka=8,n.I=1,n.connect=function(h,_,b,x){en(0),this.W=h,this.H=_||{},b&&x!==void 0&&(this.H.OSID=b,this.H.OAID=x),this.F=this.X,this.J=_h(this,null,this.W),Li(this)};function pu(h){if(jo(h),h.I==3){var _=h.V++,b=Lt(h.J);if(Rt(b,"SID",h.M),Rt(b,"RID",_),Rt(b,"TYPE","terminate"),Gs(h,b),_=new Oe(h,h.j,_),_.M=2,_.A=Us(Lt(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!b&&c.Image&&(new Image().src=_.A,b=!0),b||(_.g=vh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),kt(_)}yh(h)}function Ga(h){h.g&&(yu(h),h.g.cancel(),h.g=null)}function jo(h){Ga(h),h.v&&(c.clearTimeout(h.v),h.v=null),zo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Li(h){if(!Wn(h.h)&&!h.m){h.m=!0;var _=h.Ea;se||I(),ee||(se(),ee=!0),A.add(_,h),h.D=0}}function Uo(h,_){return pr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=xr(p(h.Ea,h,_),gh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Y=new Oe(this,this.j,h);let ne=this.o;if(this.U&&(ne?(ne=L(ne),ve(ne,this.U)):ne=this.U),this.u!==null||this.R||(Y.J=ne,ne=null),this.S)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var x=this.i[b];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(_+=x,_>4096){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=fh(this,Y,_),b=Lt(this.J),Rt(b,"RID",h),Rt(b,"CVER",22),this.G&&Rt(b,"X-HTTP-Session-Id",this.G),Gs(this,b),ne&&(this.R?_="headers="+ge(Xr(ne))+"&"+_:this.u&&Hs(b,this.u,ne)),Dr(this.h,Y),this.Ra&&Rt(b,"TYPE","init"),this.S?(Rt(b,"$req",_),Rt(b,"SID","null"),Y.U=!0,Ve(Y,b,null)):Ve(Y,b,_),this.I=2}}else this.I==3&&(h?gu(this,h):this.i.length==0||Wn(this.h)||gu(this))};function gu(h,_){var b;_?b=_.l:b=h.V++;const x=Lt(h.J);Rt(x,"SID",h.M),Rt(x,"RID",b),Rt(x,"AID",h.K),Gs(h,x),h.u&&h.o&&Hs(x,h.u,h.o),b=new Oe(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),_&&(h.i=_.G.concat(h.i)),_=fh(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Dr(h.h,b),Ve(b,x,_)}function Gs(h,_){h.H&&ce(h.H,function(b,x){Rt(_,x,b)}),h.l&&ce({},function(b,x){Rt(_,x,b)})}function fh(h,_,b){b=Math.min(h.i.length,b);const x=h.l?p(h.l.Ka,h.l,h):null;e:{var Y=h.i;let et=-1;for(;;){const gn=["count="+b];et==-1?b>0?(et=Y[0].g,gn.push("ofs="+et)):et=0:gn.push("ofs="+et);let It=!0;for(let tn=0;tn<b;tn++){var ne=Y[tn].g;const Wr=Y[tn].map;if(ne-=et,ne<0)et=Math.max(0,Y[tn].g-100),It=!1;else try{ne="req"+ne+"_"||"";try{var Ce=Wr instanceof Map?Wr:Object.entries(Wr);for(const[Ui,pi]of Ce){let gi=pi;d(pi)&&(gi=pn(pi)),gn.push(ne+Ui+"="+encodeURIComponent(gi))}}catch(Ui){throw gn.push(ne+"type="+encodeURIComponent("_badmap")),Ui}}catch{x&&x(Wr)}}if(It){Ce=gn.join("&");break e}}Ce=void 0}return h=h.i.splice(0,b),_.G=h,Ce}function dh(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;se||I(),ee||(se(),ee=!0),A.add(_,h),h.A=0}}function $s(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=xr(p(h.Da,h),gh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,mh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=xr(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,en(10),Ga(this),mh(this))};function yu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function mh(h){h.g=new Oe(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Lt(h.na);Rt(_,"RID","rpc"),Rt(_,"SID",h.M),Rt(_,"AID",h.K),Rt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&Rt(_,"TO",h.ia),Rt(_,"TYPE","xmlhttp"),Gs(h,_),h.u&&h.o&&Hs(_,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Us(Lt(_)),b.u=null,b.R=!0,$e(b,h)}n.Va=function(){this.C!=null&&(this.C=null,Ga(this),$s(this),en(19))};function zo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function ph(h,_){var b=null;if(h.g==_){zo(h),yu(h),h.g=null;var x=2}else if(Jn(h.h,_))b=_.G,Di(h.h,_),x=1;else return;if(h.I!=0){if(_.o)if(x==1){b=_.u?_.u.length:0,_=Date.now()-_.F;var Y=h.D;x=sn(),st(x,new Yr(x,b)),Li(h)}else dh(h);else if(Y=_.m,Y==3||Y==0&&_.X>0||!(x==1&&Uo(h,_)||x==2&&$s(h)))switch(b&&b.length>0&&(_=h.h,_.i=_.i.concat(b)),Y){case 1:ji(h,5);break;case 4:ji(h,10);break;case 3:ji(h,6);break;default:ji(h,2)}}}function gh(h,_){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*_}function ji(h,_){if(h.j.info("Error code "+_),_==2){var b=p(h.bb,h),x=h.Ua;const Y=!x;x=new Tn(x||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||rt(x,"https"),Us(x),Y?fi(x.toString(),b):fu(x.toString(),b)}else en(2);h.I=0,h.l&&h.l.pa(_),yh(h),jo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function yh(h){if(h.I=0,h.ja=[],h.l){const _=Oi(h.h);(_.length!=0||h.i.length!=0)&&(O(h.ja,_),O(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function _h(h,_,b){var x=b instanceof Tn?Lt(b):new Tn(b);if(x.g!="")_&&(x.g=_+"."+x.g),Or(x,x.u);else{var Y=c.location;x=Y.protocol,_=_?_+"."+Y.hostname:Y.hostname,Y=+Y.port;const ne=new Tn(null);x&&rt(ne,x),_&&(ne.g=_),Y&&Or(ne,Y),b&&(ne.h=b),x=ne}return b=h.G,_=h.wa,b&&_&&Rt(x,b,_),Rt(x,"VER",h.ka),Gs(h,x),x}function vh(h,_,b){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new jt(new Pi({ab:b})):new jt(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eh(){}n=Eh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function $a(){}$a.prototype.g=function(h,_){return new lr(h,_)};function lr(h,_){Mt.call(this),this.g=new qa(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!D(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!D(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new ra(this)}v(lr,Mt),lr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},lr.prototype.close=function(){pu(this.g)},lr.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=pn(h),h=b);_.i.push(new Kt(_.Ya++,h)),_.I==3&&Li(_)},lr.prototype.N=function(){this.g.l=null,delete this.j,pu(this.g),delete this.g,lr.Z.N.call(this)};function Th(h){Pe.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const b in _){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}v(Th,Pe);function bh(){Ct.call(this),this.status=1}v(bh,Ct);function ra(h){this.g=h}v(ra,Eh),ra.prototype.ra=function(){st(this.g,"a")},ra.prototype.qa=function(h){st(this.g,new Th(h))},ra.prototype.pa=function(h){st(this.g,new bh)},ra.prototype.oa=function(){st(this.g,"b")},$a.prototype.createWebChannel=$a.prototype.g,lr.prototype.send=lr.prototype.o,lr.prototype.open=lr.prototype.m,lr.prototype.close=lr.prototype.close,ow=function(){return new $a},sw=function(){return sn()},aw=Ge,py={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ea.NO_ERROR=0,ea.TIMEOUT=8,ea.HTTP_ERROR=6,Gf=ea,k.COMPLETE="complete",iw=k,Ee.EventType=De,De.OPEN="a",De.CLOSE="b",De.ERROR="c",De.MESSAGE="d",Mt.prototype.listen=Mt.prototype.J,uc=Ee,jt.prototype.listenOnce=jt.prototype.K,jt.prototype.getLastError=jt.prototype.Ha,jt.prototype.getLastErrorCode=jt.prototype.ya,jt.prototype.getStatus=jt.prototype.ca,jt.prototype.getResponseJson=jt.prototype.La,jt.prototype.getResponseText=jt.prototype.la,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Fa,rw=jt}).apply(typeof Nf<"u"?Nf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nr.UNAUTHENTICATED=new nr(null),nr.GOOGLE_CREDENTIALS=new nr("google-credentials-uid"),nr.FIRST_PARTY=new nr("first-party-uid"),nr.MOCK_USER=new nr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu="12.8.0";function vO(n){tu=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new e_("@firebase/firestore");function bl(){return To.logLevel}function Me(n,...e){if(To.logLevel<=gt.DEBUG){const t=e.map(r_);To.debug(`Firestore (${tu}): ${n}`,...t)}}function Da(n,...e){if(To.logLevel<=gt.ERROR){const t=e.map(r_);To.error(`Firestore (${tu}): ${n}`,...t)}}function Bl(n,...e){if(To.logLevel<=gt.WARN){const t=e.map(r_);To.warn(`Firestore (${tu}): ${n}`,...t)}}function r_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,lw(n,i,t)}function lw(n,e,t){let i=`FIRESTORE (${tu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Da(i),new Error(i)}function Ot(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||lw(e,s,i)}function Ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends La{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nr.UNAUTHENTICATED)))}shutdown(){}}class TO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class bO{constructor(e){this.t=e,this.currentUser=nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ot(this.o===void 0,42304);let i=this.i;const s=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Ra;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ra,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},d=m=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ra)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ot(typeof i.accessToken=="string",31837,{l:i}),new uw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ot(e===null||typeof e=="string",2055,{h:e}),new nr(e)}}class SO{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=nr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class AO{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new SO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class T0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ot(this.o===void 0,3512);const i=l=>{l.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Me("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const s=l=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new T0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new T0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=CO(40);for(let l=0;l<s.length;++l)i.length<20&&s[l]<t&&(i+=e.charAt(s[l]%62))}return i}}function yt(n,e){return n<e?-1:n>e?1:0}function gy(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),l=e.charAt(i);if(s!==l)return Hg(s)===Hg(l)?yt(s,l):Hg(s)?1:-1}return yt(n.length,e.length)}const RO=55296,IO=57343;function Hg(n){const e=n.charCodeAt(0);return e>=RO&&e<=IO}function Hl(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="__name__";class qi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ke(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ke(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return qi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const l=qi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return yt(e.length,t.length)}static compareSegments(e,t){const i=qi.isNumericId(e),s=qi.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?qi.extractNumericId(e).compare(qi.extractNumericId(t)):gy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}}class Yt extends qi{construct(e,t,i){return new Yt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new Yt(t)}static emptyPath(){return new Yt([])}}const xO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends qi{construct(e,t,i){return new Kn(e,t,i)}static isValidIdentifier(e){return xO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===b0}static keyField(){return new Kn([b0])}static fromServerFormat(e){const t=[];let i="",s=0;const l=()=>{if(i.length===0)throw new xe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new xe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new xe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(i+=d,s++):(l(),s++)}if(l(),c)throw new xe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(t)}static emptyPath(){return new Kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.path=e}static fromPath(e){return new He(Yt.fromString(e))}static fromName(e){return new He(Yt.fromString(e).popFirst(5))}static empty(){return new He(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(n,e,t){if(!t)throw new xe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function NO(n,e,t,i){if(e===!0&&i===!0)throw new xe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function S0(n){if(!He.isDocumentKey(n))throw new xe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function A0(n){if(He.isDocumentKey(n))throw new xe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Kd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ke(12329,{type:typeof n})}function wr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kd(n);throw new xe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Kc(n,e){if(!hw(n))throw new xe(fe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(s&&typeof c!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new xe(fe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=-62135596800,C0=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*C0);return new Jt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<w0)throw new xe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/C0}_compareTo(e){return this.seconds===e.seconds?yt(this.nanoseconds,e.nanoseconds):yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kc(e,Jt._jsonSchema))return new Jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-w0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Nn("string",Jt._jsonSchemaVersion),seconds:Nn("number"),nanoseconds:Nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Jt(0,0))}static max(){return new Xe(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=-1;function DO(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Xe.fromTimestamp(i===1e9?new Jt(t+1,0):new Jt(t,i));return new Ds(s,He.empty(),e)}function OO(n){return new Ds(n.readTime,n.key,Ic)}class Ds{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ds(Xe.min(),He.empty(),Ic)}static max(){return new Ds(Xe.max(),He.empty(),Ic)}}function MO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=He.comparator(n.documentKey,e.documentKey),t!==0?t:yt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==PO)throw n;Me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe(((i,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.reject(t)}static resolve(e){return new pe(((t,i)=>{t(e)}))}static reject(e){return new pe(((t,i)=>{i(e)}))}static waitFor(e){return new pe(((t,i)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(m=>i(m)))})),c=!0,l===s&&t()}))}static or(e){let t=pe.resolve(!1);for(const i of e)t=t.next((s=>s?pe.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,l)=>{i.push(t.call(this,s,l))})),this.waitFor(i)}static mapArray(e,t){return new pe(((i,s)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((y=>{c[p]=y,++d,d===l&&i(c)}),(y=>s(y)))}}))}static doWhile(e,t){return new pe(((i,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):i()};l()}))}}function kO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ru(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=-1;function Qd(n){return n==null}function pd(n){return n===0&&1/n==-1/0}function LO(n){return typeof n=="number"&&Number.isInteger(n)&&!pd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="";function jO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=R0(e)),e=UO(n.get(t),e);return R0(e)}function UO(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case fw:t+="";break;default:t+=l}}return t}function R0(n){return n+fw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ls(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t){this.comparator=e,this.root=t||$n.EMPTY}insert(e,t){return new cn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,t,i,s,l){this.key=e,this.value=t,this.color=i??$n.RED,this.left=s??$n.EMPTY,this.right=l??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,l){return new $n(e??this.key,t??this.value,i??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const l=i(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,i),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return $n.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ke(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke(57766)}get value(){throw Ke(16141)}get color(){throw Ke(16727)}get left(){throw Ke(29726)}get right(){throw Ke(36894)}copy(e,t,i,s,l){return this}insert(e,t,i){return new $n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new x0(this.data.getIterator())}getIteratorFrom(e){return new x0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=i.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class x0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new Br([])}unionWith(e){let t=new Pn(Kn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Br(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new mw("Invalid base64 string: "+l):l}})(e);return new Yn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new Yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const zO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(n){if(Ot(!!n,39018),typeof n=="string"){let e=0;const t=zO.exec(n);if(Ot(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vn(n.seconds),nanos:vn(n.nanos)}}function vn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ms(n){return typeof n=="string"?Yn.fromBase64String(n):Yn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="server_timestamp",gw="__type__",yw="__previous_value__",_w="__local_write_time__";function s_(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[gw])==null?void 0:i.stringValue)===pw}function Xd(n){const e=n.mapValue.fields[yw];return s_(e)?Xd(e):e}function xc(n){const e=Os(n.mapValue.fields[_w].timestampValue);return new Jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,t,i,s,l,c,d,m,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y,this.apiKey=v}}const gd="(default)";class Nc{constructor(e,t){this.projectId=e,this.database=t||gd}static empty(){return new Nc("","")}get isDefaultDatabase(){return this.database===gd}isEqual(e){return e instanceof Nc&&e.projectId===this.projectId&&e.database===this.database}}function HO(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new xe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="__type__",FO="__max__",Of={mapValue:{}},Ew="__vector__",yd="value";function Ps(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?s_(n)?4:GO(n)?9007199254740991:qO(n)?10:11:Ke(28295,{value:n})}function Wi(n,e){if(n===e)return!0;const t=Ps(n);if(t!==Ps(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xc(n).isEqual(xc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=Os(s.timestampValue),d=Os(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return Ms(s.bytesValue).isEqual(Ms(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return vn(s.geoPointValue.latitude)===vn(l.geoPointValue.latitude)&&vn(s.geoPointValue.longitude)===vn(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return vn(s.integerValue)===vn(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=vn(s.doubleValue),d=vn(l.doubleValue);return c===d?pd(c)===pd(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Hl(n.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if(I0(c)!==I0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Wi(c[m],d[m])))return!1;return!0})(n,e);default:return Ke(52216,{left:n})}}function Dc(n,e){return(n.values||[]).find((t=>Wi(t,e)))!==void 0}function Fl(n,e){if(n===e)return 0;const t=Ps(n),i=Ps(e);if(t!==i)return yt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return yt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=vn(l.integerValue||l.doubleValue),m=vn(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return N0(n.timestampValue,e.timestampValue);case 4:return N0(xc(n),xc(e));case 5:return gy(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=Ms(l),m=Ms(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const y=yt(d[p],m[p]);if(y!==0)return y}return yt(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=yt(vn(l.latitude),vn(c.latitude));return d!==0?d:yt(vn(l.longitude),vn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return D0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,w,O,z;const d=l.fields||{},m=c.fields||{},p=(S=d[yd])==null?void 0:S.arrayValue,y=(w=m[yd])==null?void 0:w.arrayValue,v=yt(((O=p==null?void 0:p.values)==null?void 0:O.length)||0,((z=y==null?void 0:y.values)==null?void 0:z.length)||0);return v!==0?v:D0(p,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Of.mapValue&&c===Of.mapValue)return 0;if(l===Of.mapValue)return 1;if(c===Of.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const S=gy(m[v],y[v]);if(S!==0)return S;const w=Fl(d[m[v]],p[y[v]]);if(w!==0)return w}return yt(m.length,y.length)})(n.mapValue,e.mapValue);default:throw Ke(23264,{he:t})}}function N0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return yt(n,e);const t=Os(n),i=Os(e),s=yt(t.seconds,i.seconds);return s!==0?s:yt(t.nanos,i.nanos)}function D0(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const l=Fl(t[s],i[s]);if(l)return l}return yt(t.length,i.length)}function ql(n){return yy(n)}function yy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Os(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ms(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return He.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const l of t.values||[])s?s=!1:i+=",",i+=yy(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of i)l?l=!1:s+=",",s+=`${c}:${yy(t.fields[c])}`;return s+"}"})(n.mapValue):Ke(61005,{value:n})}function $f(n){switch(Ps(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xd(n);return e?16+$f(e):16;case 5:return 2*n.stringValue.length;case 6:return Ms(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,l)=>s+$f(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Ls(i.fields,((l,c)=>{s+=l.length+$f(c)})),s})(n.mapValue);default:throw Ke(13486,{value:n})}}function O0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _y(n){return!!n&&"integerValue"in n}function o_(n){return!!n&&"arrayValue"in n}function M0(n){return!!n&&"nullValue"in n}function P0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kf(n){return!!n&&"mapValue"in n}function qO(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[vw])==null?void 0:i.stringValue)===Ew}function gc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ls(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=gc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gc(n.arrayValue.values[t]);return e}return{...n}}function GO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===FO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.value=e}static empty(){return new Ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Kf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(t)}setAll(e){let t=Kn.emptyPath(),i={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,s),i={},s=[],t=d.popLast()}c?i[d.lastSegment()]=gc(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,s)}delete(e){const t=this.field(e.popLast());Kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Kf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Ls(t,((s,l)=>e[s]=l));for(const s of i)delete e[s]}clone(){return new Ar(gc(this.value))}}function Tw(n){const e=[];return Ls(n.fields,((t,i)=>{const s=new Kn([t]);if(Kf(i)){const l=Tw(i.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new Br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t,i,s,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new rr(e,0,Xe.min(),Xe.min(),Xe.min(),Ar.empty(),0)}static newFoundDocument(e,t,i,s){return new rr(e,1,t,Xe.min(),i,s,0)}static newNoDocument(e,t){return new rr(e,2,t,Xe.min(),Xe.min(),Ar.empty(),0)}static newUnknownDocument(e,t){return new rr(e,3,t,Xe.min(),Xe.min(),Ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t){this.position=e,this.inclusive=t}}function V0(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?i=He.comparator(He.fromName(c.referenceValue),t.key):i=Fl(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function k0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t="asc"){this.field=e,this.dir=t}}function $O(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{}class xn extends bw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new YO(e,t,i):t==="array-contains"?new WO(e,i):t==="in"?new JO(e,i):t==="not-in"?new ZO(e,i):t==="array-contains-any"?new eM(e,i):new xn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new QO(e,i):new XO(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fl(t,this.value)):t!==null&&Ps(this.value)===Ps(t)&&this.matchesComparison(Fl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wi extends bw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wi(e,t)}matches(e){return Sw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Sw(n){return n.op==="and"}function Aw(n){return KO(n)&&Sw(n)}function KO(n){for(const e of n.filters)if(e instanceof wi)return!1;return!0}function vy(n){if(n instanceof xn)return n.field.canonicalString()+n.op.toString()+ql(n.value);if(Aw(n))return n.filters.map((e=>vy(e))).join(",");{const e=n.filters.map((t=>vy(t))).join(",");return`${n.op}(${e})`}}function ww(n,e){return n instanceof xn?(function(i,s){return s instanceof xn&&i.op===s.op&&i.field.isEqual(s.field)&&Wi(i.value,s.value)})(n,e):n instanceof wi?(function(i,s){return s instanceof wi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((l,c,d)=>l&&ww(c,s.filters[d])),!0):!1})(n,e):void Ke(19439)}function Cw(n){return n instanceof xn?(function(t){return`${t.field.canonicalString()} ${t.op} ${ql(t.value)}`})(n):n instanceof wi?(function(t){return t.op.toString()+" {"+t.getFilters().map(Cw).join(" ,")+"}"})(n):"Filter"}class YO extends xn{constructor(e,t,i){super(e,t,i),this.key=He.fromName(i.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.matchesComparison(t)}}class QO extends xn{constructor(e,t){super(e,"in",t),this.keys=Rw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class XO extends xn{constructor(e,t){super(e,"not-in",t),this.keys=Rw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Rw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>He.fromName(i.referenceValue)))}class WO extends xn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return o_(t)&&Dc(t.arrayValue,this.value)}}class JO extends xn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Dc(this.value.arrayValue,t)}}class ZO extends xn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Dc(this.value.arrayValue,t)}}class eM extends xn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!o_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Dc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,t=null,i=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function L0(n,e=null,t=[],i=[],s=null,l=null,c=null){return new tM(n,e,t,i,s,l,c)}function l_(n){const e=Ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>vy(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Qd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>ql(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>ql(i))).join(",")),e.Te=t}return e.Te}function u_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$O(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ww(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!k0(n.startAt,e.startAt)&&k0(n.endAt,e.endAt)}function Ey(n){return He.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t=null,i=[],s=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function nM(n,e,t,i,s,l,c,d){return new Yc(n,e,t,i,s,l,c,d)}function Wd(n){return new Yc(n)}function j0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function rM(n){return He.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Iw(n){return n.collectionGroup!==null}function yc(n){const e=Ze(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Pn(Kn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new vd(l,i))})),t.has(Kn.keyField().canonicalString())||e.Ie.push(new vd(Kn.keyField(),i))}return e.Ie}function $i(n){const e=Ze(n);return e.Ee||(e.Ee=iM(e,yc(n))),e.Ee}function iM(n,e){if(n.limitType==="F")return L0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new vd(s.field,l)}));const t=n.endAt?new _d(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new _d(n.startAt.position,n.startAt.inclusive):null;return L0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Ty(n,e){const t=n.filters.concat([e]);return new Yc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function by(n,e,t){return new Yc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jd(n,e){return u_($i(n),$i(e))&&n.limitType===e.limitType}function xw(n){return`${l_($i(n))}|lt:${n.limitType}`}function Sl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>Cw(s))).join(", ")}]`),Qd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>ql(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>ql(s))).join(",")),`Target(${i})`})($i(n))}; limitType=${n.limitType})`}function Zd(n,e){return e.isFoundDocument()&&(function(i,s){const l=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):He.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,s){for(const l of yc(i))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const l of i.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(c,d,m){const p=V0(c,d,m);return c.inclusive?p<=0:p<0})(i.startAt,yc(i),s)||i.endAt&&!(function(c,d,m){const p=V0(c,d,m);return c.inclusive?p>=0:p>0})(i.endAt,yc(i),s))})(n,e)}function aM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Nw(n){return(e,t)=>{let i=!1;for(const s of yc(n)){const l=sM(s,e,t);if(l!==0)return l;i=i||s.field.isKeyField()}return 0}}function sM(n,e,t){const i=n.field.isKeyField()?He.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?Fl(m,p):Ke(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ke(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,l]of i)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,((t,i)=>{for(const[s,l]of i)e(s,l)}))}isEmpty(){return dw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=new cn(He.comparator);function Oa(){return oM}const Dw=new cn(He.comparator);function cc(...n){let e=Dw;for(const t of n)e=e.insert(t.key,t);return e}function Ow(n){let e=Dw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function fo(){return _c()}function Mw(){return _c()}function _c(){return new xo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const lM=new cn(He.comparator),uM=new Pn(He.comparator);function _t(...n){let e=uM;for(const t of n)e=e.add(t);return e}const cM=new Pn(yt);function hM(){return cM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pd(e)?"-0":e}}function Pw(n){return{integerValue:""+n}}function fM(n,e){return LO(e)?Pw(e):c_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this._=void 0}}function dM(n,e,t){return n instanceof Oc?(function(s,l){const c={fields:{[gw]:{stringValue:pw},[_w]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&s_(l)&&(l=Xd(l)),l&&(c.fields[yw]=l),{mapValue:c}})(t,e):n instanceof Mc?kw(n,e):n instanceof Pc?Lw(n,e):(function(s,l){const c=Vw(s,l),d=U0(c)+U0(s.Ae);return _y(c)&&_y(s.Ae)?Pw(d):c_(s.serializer,d)})(n,e)}function mM(n,e,t){return n instanceof Mc?kw(n,e):n instanceof Pc?Lw(n,e):t}function Vw(n,e){return n instanceof Ed?(function(i){return _y(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Oc extends em{}class Mc extends em{constructor(e){super(),this.elements=e}}function kw(n,e){const t=jw(e);for(const i of n.elements)t.some((s=>Wi(s,i)))||t.push(i);return{arrayValue:{values:t}}}class Pc extends em{constructor(e){super(),this.elements=e}}function Lw(n,e){let t=jw(e);for(const i of n.elements)t=t.filter((s=>!Wi(s,i)));return{arrayValue:{values:t}}}class Ed extends em{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function U0(n){return vn(n.integerValue||n.doubleValue)}function jw(n){return o_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t){this.field=e,this.transform=t}}function gM(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof Mc&&s instanceof Mc||i instanceof Pc&&s instanceof Pc?Hl(i.elements,s.elements,Wi):i instanceof Ed&&s instanceof Ed?Wi(i.Ae,s.Ae):i instanceof Oc&&s instanceof Oc})(n.transform,e.transform)}class yM{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class tm{}function Uw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nm(n.key,Cr.none()):new Qc(n.key,n.data,Cr.none());{const t=n.data,i=Ar.empty();let s=new Pn(Kn.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),s=s.add(l)}return new js(n.key,i,new Br(s.toArray()),Cr.none())}}function _M(n,e,t){n instanceof Qc?(function(s,l,c){const d=s.value.clone(),m=B0(s.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof js?(function(s,l,c){if(!Yf(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=B0(s.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(zw(s)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function vc(n,e,t,i){return n instanceof Qc?(function(l,c,d,m){if(!Yf(l.precondition,c))return d;const p=l.value.clone(),y=H0(l.fieldTransforms,m,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof js?(function(l,c,d,m){if(!Yf(l.precondition,c))return d;const p=H0(l.fieldTransforms,m,c),y=c.data;return y.setAll(zw(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(l,c,d){return Yf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function vM(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),l=Vw(i.transform,s||null);l!=null&&(t===null&&(t=Ar.empty()),t.set(i.field,l))}return t||null}function z0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Hl(i,s,((l,c)=>gM(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Qc extends tm{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class js extends tm{constructor(e,t,i,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function zw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function B0(n,e,t){const i=new Map;Ot(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,d=e.data.field(l.field);i.set(l.field,mM(c,d,t[s]))}return i}function H0(n,e,t){const i=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);i.set(s.field,dM(l,c,e))}return i}class nm extends tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EM extends tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&_M(l,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=vc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=vc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Mw();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const m=Uw(c,d);m!==null&&i.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(Xe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),_t())}isEqual(e){return this.batchId===e.batchId&&Hl(this.mutations,e.mutations,((t,i)=>z0(t,i)))&&Hl(this.baseMutations,e.baseMutations,((t,i)=>z0(t,i)))}}class h_{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Ot(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return lM})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,i[c].version);return new h_(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn,Tt;function AM(n){switch(n){case fe.OK:return Ke(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Ke(15467,{code:n})}}function Bw(n){if(n===void 0)return Da("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Rn.OK:return fe.OK;case Rn.CANCELLED:return fe.CANCELLED;case Rn.UNKNOWN:return fe.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return fe.INTERNAL;case Rn.UNAVAILABLE:return fe.UNAVAILABLE;case Rn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Rn.NOT_FOUND:return fe.NOT_FOUND;case Rn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Rn.ABORTED:return fe.ABORTED;case Rn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Rn.DATA_LOSS:return fe.DATA_LOSS;default:return Ke(39323,{code:n})}}(Tt=Rn||(Rn={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=new Is([4294967295,4294967295],0);function F0(n){const e=wM().encode(n),t=new nw;return t.update(e),new Uint8Array(t.digest())}function q0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Is([t,i],0),new Is([s,l],0)]}class f_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new hc(`Invalid padding: ${t}`);if(i<0)throw new hc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new hc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new hc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Is.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(Is.fromNumber(i)));return s.compare(CM)===1&&(s=new Is([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=F0(e),[i,s]=q0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,s,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new f_(l,s,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=F0(e),[i,s]=q0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,t,i,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Xc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new rm(Xe.min(),s,new cn(yt),Oa(),_t())}}class Xc{constructor(e,t,i,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Xc(i,t,_t(),_t(),_t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t,i,s){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=s}}class Hw{constructor(e,t){this.targetId=e,this.Ce=t}}class Fw{constructor(e,t,i=Yn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class G0{constructor(){this.ve=0,this.Fe=$0(),this.Me=Yn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_t(),t=_t(),i=_t();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Ke(38017,{changeType:l})}})),new Xc(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=$0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ot(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class RM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Oa(),this.He=Mf(),this.Je=Mf(),this.Ze=new cn(yt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(Ey(l))if(i===0){const c=new He(l.path);this.et(t,c,rr.newNoDocument(c,Xe.min()))}else Ot(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=Ms(i).toUint8Array()}catch(m){if(m instanceof mw)return Bl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new f_(c,s,l)}catch(m){return Bl(m instanceof hc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Ey(d.target)){const m=new He(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,rr.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let i=_t();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new rm(e,t,this.Ze,this.je,i);return this.je=Oa(),this.He=Mf(),this.Je=Mf(),this.Ze=new cn(yt),s}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new G0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Pn(yt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Pn(yt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new G0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Mf(){return new cn(He.comparator)}function $0(){return new cn(He.comparator)}const IM={asc:"ASCENDING",desc:"DESCENDING"},xM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NM={and:"AND",or:"OR"};class DM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sy(n,e){return n.useProto3Json||Qd(e)?e:{value:e}}function Td(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function OM(n,e){return Td(n,e.toTimestamp())}function Ki(n){return Ot(!!n,49232),Xe.fromTimestamp((function(t){const i=Os(t);return new Jt(i.seconds,i.nanos)})(n))}function d_(n,e){return Ay(n,e).canonicalString()}function Ay(n,e){const t=(function(s){return new Yt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Gw(n){const e=Yt.fromString(n);return Ot(Xw(e),10190,{key:e.toString()}),e}function wy(n,e){return d_(n.databaseId,e.path)}function Fg(n,e){const t=Gw(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(Kw(t))}function $w(n,e){return d_(n.databaseId,e)}function MM(n){const e=Gw(n);return e.length===4?Yt.emptyPath():Kw(e)}function Cy(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kw(n){return Ot(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function K0(n,e,t){return{name:wy(n,e),fields:t.value.mapValue.fields}}function PM(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ke(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(Ot(y===void 0||typeof y=="string",58123),Yn.fromBase64String(y||"")):(Ot(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Yn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(p){const y=p.code===void 0?fe.UNKNOWN:Bw(p.code);return new xe(y,p.message||"")})(c);t=new Fw(i,s,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Fg(n,i.document.name),l=Ki(i.document.updateTime),c=i.document.createTime?Ki(i.document.createTime):Xe.min(),d=new Ar({mapValue:{fields:i.document.fields}}),m=rr.newFoundDocument(s,l,c,d),p=i.targetIds||[],y=i.removedTargetIds||[];t=new Qf(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Fg(n,i.document),l=i.readTime?Ki(i.readTime):Xe.min(),c=rr.newNoDocument(s,l),d=i.removedTargetIds||[];t=new Qf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Fg(n,i.document),l=i.removedTargetIds||[];t=new Qf([],l,s,null)}else{if(!("filter"in e))return Ke(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:l}=i,c=new SM(s,l),d=i.targetId;t=new Hw(d,c)}}return t}function VM(n,e){let t;if(e instanceof Qc)t={update:K0(n,e.key,e.value)};else if(e instanceof nm)t={delete:wy(n,e.key)};else if(e instanceof js)t={update:K0(n,e.key,e.data),updateMask:qM(e.fieldMask)};else{if(!(e instanceof EM))return Ke(16599,{dt:e.type});t={verify:wy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof Oc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Mc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Pc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ed)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ke(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:OM(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ke(27497)})(n,e.precondition)),t}function kM(n,e){return n&&n.length>0?(Ot(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?Ki(s.updateTime):Ki(l);return c.isEqual(Xe.min())&&(c=Ki(l)),new yM(c,s.transformResults||[])})(t,e)))):[]}function LM(n,e){return{documents:[$w(n,e.path)]}}function jM(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=$w(n,s);const l=(function(p){if(p.length!==0)return Qw(wi.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((y=>(function(S){return{field:Al(S.field),direction:BM(S.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Sy(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function UM(n){let e=MM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Ot(i===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(v){const S=Yw(v);return S instanceof wi&&Aw(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((S=>(function(O){return new vd(wl(O.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(v){let S;return S=typeof v=="object"?v.value:v,Qd(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(v){const S=!!v.before,w=v.values||[];return new _d(w,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const S=!v.before,w=v.values||[];return new _d(w,S)})(t.endAt)),nM(e,s,c,l,d,"F",m,p)}function zM(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Yw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=wl(t.unaryFilter.field);return xn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=wl(t.unaryFilter.field);return xn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wl(t.unaryFilter.field);return xn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=wl(t.unaryFilter.field);return xn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ke(61313);default:return Ke(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xn.create(wl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ke(58110);default:return Ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return wi.create(t.compositeFilter.filters.map((i=>Yw(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ke(1026)}})(t.compositeFilter.op))})(n):Ke(30097,{filter:n})}function BM(n){return IM[n]}function HM(n){return xM[n]}function FM(n){return NM[n]}function Al(n){return{fieldPath:n.canonicalString()}}function wl(n){return Kn.fromServerFormat(n.fieldPath)}function Qw(n){return n instanceof xn?(function(t){if(t.op==="=="){if(P0(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NAN"}};if(M0(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(P0(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NOT_NAN"}};if(M0(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Al(t.field),op:HM(t.op),value:t.value}}})(n):n instanceof wi?(function(t){const i=t.getFilters().map((s=>Qw(s)));return i.length===1?i[0]:{compositeFilter:{op:FM(t.op),filters:i}}})(n):Ke(54877,{filter:n})}function qM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Xw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Ww(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t,i,s,l=Xe.min(),c=Xe.min(),d=Yn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.yt=e}}function $M(n){const e=UM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?by(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.Sn=new YM}addToCollectionParentIndex(e,t){return this.Sn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(Ds.min())}updateCollectionGroup(e,t,i){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class YM{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Pn(Yt.comparator),l=!s.has(i);return this.index[t]=s.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Pn(Yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jw=41943040;class Sr{static withCacheSize(e){return new Sr(e,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr.DEFAULT_COLLECTION_PERCENTILE=10,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sr.DEFAULT=new Sr(Jw,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sr.DISABLED=new Sr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Gl(0)}static ar(){return new Gl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="LruGarbageCollector",QM=1048576;function X0([n,e],[t,i]){const s=yt(n,t);return s===0?yt(e,i):s}class XM{constructor(e){this.Pr=e,this.buffer=new Pn(X0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();X0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Me(Q0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ru(t)?Me(Q0,"Ignoring IndexedDB error during garbage collection: ",t):await nu(t)}await this.Ar(3e5)}))}}class JM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return pe.resolve(Yd.ce);const i=new XM(t);return this.Vr.forEachTarget(e,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Y0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,s,l,c,d,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(i=v,d=Date.now(),this.removeTargets(e,i,t)))).next((v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(p=Date.now(),bl()<=gt.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${v} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:v}))))}}function ZM(n,e){return new JM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.changes=new xo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?pe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&vc(i.mutation,s,Br.empty(),Jt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,_t()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=_t()){const s=fo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((l=>{let c=cc();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=fo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,_t())))}populateOverlays(e,t,i){const s=[];return i.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,s){let l=Oa();const c=_c(),d=(function(){return _c()})();return t.forEach(((m,p)=>{const y=i.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof js)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),vc(y.mutation,p,y.mutation.getFieldMask(),Jt.now())):c.set(p.key,Br.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,y)=>c.set(p,y))),t.forEach(((p,y)=>d.set(p,new tP(y,c.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=_c();let s=new cn(((c,d)=>c-d)),l=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let y=i.get(m)||Br.empty();y=d.applyToLocalView(p,y),i.set(m,y);const v=(s.get(d.batchId)||_t()).add(m);s=s.insert(d.batchId,v)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,y=m.value,v=Mw();y.forEach((S=>{if(!l.has(S)){const w=Uw(t.get(S),i.get(S));w!==null&&v.set(S,w),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return pe.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return rM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Iw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-l.size):pe.resolve(fo());let d=Ic,m=l;return c.next((p=>pe.forEach(p,((y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?pe.resolve():this.remoteDocumentCache.getEntry(e,y).next((S=>{m=m.insert(y,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,_t()))).next((y=>({batchId:d,changes:Ow(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next((i=>{let s=cc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const l=t.collectionGroup;let c=cc();return this.indexManager.getCollectionParents(e,l).next((d=>pe.forEach(d,(m=>{const p=(function(v,S){return new Yc(S,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next((y=>{y.forEach(((v,S)=>{c=c.insert(v,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,s)))).next((c=>{l.forEach(((m,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,rr.newInvalidDocument(y)))}));let d=cc();return c.forEach(((m,p)=>{const y=l.get(m);y!==void 0&&vc(y.mutation,p,Br.empty(),Jt.now()),Zd(t,p)&&(d=d.insert(m,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return pe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ki(s.createTime)}})(t)),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:$M(s.bundledQuery),readTime:Ki(s.readTime)}})(t)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.overlays=new cn(He.comparator),this.Lr=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=fo();return pe.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&i.set(s,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,l)=>{this.bt(e,t,l)})),pe.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),pe.resolve()}getOverlaysForCollection(e,t,i){const s=fo(),l=t.length+1,c=new He(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&s.set(m.getKey(),m)}return pe.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let l=new cn(((p,y)=>p-y));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=fo(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=fo(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,y)=>d.set(p,y))),!(d.size()>=s)););return pe.resolve(d)}bt(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new bM(t,i));let l=this.Lr.get(t);l===void 0&&(l=_t(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.sessionToken=Yn.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.kr=new Pn(jn.Kr),this.qr=new Pn(jn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new jn(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new jn(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new He(new Yt([])),i=new jn(t,e),s=new jn(t,e+1),l=[];return this.qr.forEachInRange([i,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new He(new Yt([])),i=new jn(t,e),s=new jn(t,e+1);let l=_t();return this.qr.forEachInRange([i,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new jn(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class jn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return He.comparator(e.key,t.key)||yt(e.Hr,t.Hr)}static Ur(e,t){return yt(e.Hr,t.Hr)||He.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Pn(jn.Kr)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new TM(l,t,i,s);this.mutationQueue.push(c);for(const d of s)this.Jr=this.Jr.add(new jn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,t){return pe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.Xr(i),l=s<0?0:s;return pe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?a_:this.Yn-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new jn(t,0),s=new jn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,s],(c=>{const d=this.Zr(c.Hr);l.push(d)})),pe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Pn(yt);return t.forEach((s=>{const l=new jn(s,0),c=new jn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{i=i.add(d.Hr)}))})),pe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let l=i;He.isDocumentKey(l)||(l=l.child(""));const c=new jn(new He(l),0);let d=new Pn(yt);return this.Jr.forEachWhile((m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(d=d.add(m.Hr)),!0)}),c),pe.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const s=this.Zr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ot(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return pe.forEach(t.mutations,(s=>{const l=new jn(s.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new jn(t,0),s=this.Jr.firstAfterOrEqual(i);return pe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.ti=e,this.docs=(function(){return new cn(He.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return pe.resolve(i?i.document.mutableCopy():rr.newInvalidDocument(t))}getEntries(e,t){let i=Oa();return t.forEach((s=>{const l=this.docs.get(s);i=i.insert(s,l?l.document.mutableCopy():rr.newInvalidDocument(s))})),pe.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let l=Oa();const c=t.path,d=new He(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||MO(OO(y),i)<=0||(s.has(y.key)||Zd(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return pe.resolve(l)}getAllFromCollectionGroup(e,t,i,s){Ke(9500)}ni(e,t){return pe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new lP(this)}getSize(e){return pe.resolve(this.size)}}class lP extends eP{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(i)})),pe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.persistence=e,this.ri=new xo((t=>l_(t)),u_),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ii=0,this.si=new m_,this.targetCount=0,this.oi=Gl._r()}forEachTarget(e,t){return this.ri.forEach(((i,s)=>t(s))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),pe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Gl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.lr(t),pe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,i){let s=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),pe.waitFor(l).next((()=>s))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return pe.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),pe.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),pe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return pe.resolve(i)}containsKey(e,t){return pe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t){this._i={},this.overlays={},this.ai=new Yd(0),this.ui=!1,this.ui=!0,this.ci=new aP,this.referenceDelegate=e(this),this.li=new uP(this),this.indexManager=new KM,this.remoteDocumentCache=(function(s){return new oP(s)})((i=>this.referenceDelegate.hi(i))),this.serializer=new GM(t),this.Pi=new rP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new sP(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Me("MemoryPersistence","Starting transaction:",e);const s=new cP(this.ai.next());return this.referenceDelegate.Ti(),i(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return pe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class cP extends VO{constructor(e){super(),this.currentSequenceNumber=e}}class p_{constructor(e){this.persistence=e,this.Ri=new m_,this.Ai=null}static Vi(e){return new p_(e)}get di(){if(this.Ai)return this.Ai;throw Ke(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),pe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.di,(i=>{const s=He.fromPath(i);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return pe.or([()=>pe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class bd{constructor(e,t){this.persistence=e,this.fi=new xo((i=>jO(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=ZM(this,t)}static Vi(e,t){return new bd(e,t)}Ti(){}Ii(e){return pe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return pe.forEach(this.fi,((i,s)=>this.wr(e,i,s).next((l=>l?pe.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(i++,l.removeEntry(c,Xe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),pe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),pe.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),pe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$f(e.data.value)),t}wr(e,t,i){return pe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return pe.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=s}static Es(e,t){let i=_t(),s=_t();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new g_(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return t2()?8:kO(ir())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new hP;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,i,s){return i.documentReadCount<this.Vs?(bl()<=gt.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",Sl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),pe.resolve()):(bl()<=gt.DEBUG&&Me("QueryEngine","Query:",Sl(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(bl()<=gt.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",Sl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$i(t))):pe.resolve())}gs(e,t){if(j0(t))return pe.resolve(null);let i=$i(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=by(t,null,"F"),i=$i(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=_t(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((m=>{const p=this.bs(t,d);return this.Ss(t,p,c,m.readTime)?this.gs(e,by(t,null,"F")):this.Ds(e,p,t,m)}))))})))))}ps(e,t,i,s){return j0(t)||s.isEqual(Xe.min())?pe.resolve(null):this.fs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,i,s)?pe.resolve(null):(bl()<=gt.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Sl(t)),this.Ds(e,c,t,DO(s,Ic)).next((d=>d)))}))}bs(e,t){let i=new Pn(Nw(e));return t.forEach(((s,l)=>{Zd(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,i){return bl()<=gt.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Sl(t)),this.fs.getDocumentsMatchingQuery(e,t,Ds.min(),i)}Ds(e,t,i,s){return this.fs.getDocumentsMatchingQuery(e,i,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="LocalStore",dP=3e8;class mP{constructor(e,t,i,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new cn(yt),this.Fs=new xo((l=>l_(l)),u_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function pP(n,e,t,i){return new mP(n,e,t,i)}async function e1(n,e){const t=Ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let m=_t();for(const p of s){c.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){d.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next((p=>({Ns:p,removedBatchIds:c,addedBatchIds:d})))}))}))}function gP(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,m,p,y){const v=p.batch,S=v.keys();let w=pe.resolve();return S.forEach((O=>{w=w.next((()=>y.getEntry(m,O))).next((z=>{const j=p.docVersions.get(O);Ot(j!==null,48541),z.version.compareTo(j)<0&&(v.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),y.addEntry(z)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(m,v)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=_t();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function t1(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function yP(n,e){const t=Ze(n),i=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((y,v)=>{const S=s.get(v);if(!S)return;d.push(t.li.removeMatchingKeys(l,y.removedDocuments,v).next((()=>t.li.addMatchingKeys(l,y.addedDocuments,v))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?w=w.withResumeToken(Yn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,i)),s=s.insert(v,w),(function(z,j,G){return z.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=dP?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(S,w,y)&&d.push(t.li.updateTargetData(l,w))}));let m=Oa(),p=_t();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(_P(l,c,e.documentUpdates).next((y=>{m=y.Bs,p=y.Ls}))),!i.isEqual(Xe.min())){const y=t.li.getLastRemoteSnapshotVersion(l).next((v=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(y)}return pe.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.vs=s,l)))}function _P(n,e,t){let i=_t(),s=_t();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=Oa();return t.forEach(((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(d)),m.isNoDocument()&&m.version.isEqual(Xe.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):Me(y_,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)})),{Bs:c,Ls:s}}))}function vP(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=a_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function EP(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.li.getTargetData(i,e).next((l=>l?(s=l,pe.resolve(s)):t.li.allocateTargetId(i).next((c=>(s=new Ss(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Ry(n,e,t){const i=Ze(n),s=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!ru(c))throw c;Me(y_,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(s.target)}function W0(n,e,t){const i=Ze(n);let s=Xe.min(),l=_t();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,p,y){const v=Ze(m),S=v.Fs.get(y);return S!==void 0?pe.resolve(v.vs.get(S)):v.li.getTargetData(p,y)})(i,c,$i(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?s:Xe.min(),t?l:_t()))).next((d=>(TP(i,aM(e),d),{documents:d,ks:l})))))}function TP(n,e,t){let i=n.Ms.get(e)||Xe.min();t.forEach(((s,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Ms.set(e,i)}class J0{constructor(){this.activeTargetIds=hM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bP{constructor(){this.vo=new J0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new J0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="ConnectivityMonitor";class eS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Me(Z0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Me(Z0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pf=null;function Iy(){return Pf===null?Pf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pf++,"0x"+Pf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="RestConnection",AP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class wP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===gd?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,t,i,s,l){const c=Iy(),d=this.Qo(e,t.toUriEncodedString());Me(qg,`Sending RPC '${e}' ${c}:`,d,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,s,l);const{host:p}=new URL(d),y=Zl(p);return this.zo(e,d,m,i,y).then((v=>(Me(qg,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw Bl(qg,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",i),v}))}jo(e,t,i,s,l,c){return this.Wo(e,t,i,s,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),i&&i.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const i=AP[e];let s=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="WebChannelConnection",ac=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Ol extends wP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ol.c_){const e=sw();ac(e,aw.STAT_EVENT,(t=>{t.stat===py.PROXY?Me(er,"STAT_EVENT: detected buffering proxy"):t.stat===py.NOPROXY&&Me(er,"STAT_EVENT: detected no buffering proxy")})),Ol.c_=!0}}zo(e,t,i,s,l){const c=Iy();return new Promise(((d,m)=>{const p=new rw;p.setWithCredentials(!0),p.listenOnce(iw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Gf.NO_ERROR:const v=p.getResponseJson();Me(er,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case Gf.TIMEOUT:Me(er,`RPC '${e}' ${c} timed out`),m(new xe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Gf.HTTP_ERROR:const S=p.getStatus();if(Me(er,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const O=w==null?void 0:w.error;if(O&&O.status&&O.message){const z=(function(G){const H=G.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(H)>=0?H:fe.UNKNOWN})(O.status);m(new xe(z,O.message))}else m(new xe(fe.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new xe(fe.UNAVAILABLE,"Connection failed."));break;default:Ke(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Me(er,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(s);Me(er,`RPC '${e}' ${c} sending request:`,s),p.send(t,"POST",y,i,15)}))}T_(e,t,i){const s=Iy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const p=l.join("");Me(er,`Creating RPC '${e}' stream ${s}: ${p}`,d);const y=c.createWebChannel(p,d);this.I_(y);let v=!1,S=!1;const w=new CP({Ho:O=>{S?Me(er,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(v||(Me(er,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),Me(er,`RPC '${e}' stream ${s} sending:`,O),y.send(O))},Jo:()=>y.close()});return ac(y,uc.EventType.OPEN,(()=>{S||(Me(er,`RPC '${e}' stream ${s} transport opened.`),w.i_())})),ac(y,uc.EventType.CLOSE,(()=>{S||(S=!0,Me(er,`RPC '${e}' stream ${s} transport closed`),w.o_(),this.E_(y))})),ac(y,uc.EventType.ERROR,(O=>{S||(S=!0,Bl(er,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),w.o_(new xe(fe.UNAVAILABLE,"The operation could not be completed")))})),ac(y,uc.EventType.MESSAGE,(O=>{var z;if(!S){const j=O.data[0];Ot(!!j,16349);const G=j,H=(G==null?void 0:G.error)||((z=G[0])==null?void 0:z.error);if(H){Me(er,`RPC '${e}' stream ${s} received error:`,H);const K=H.status;let te=(function(A){const I=Rn[A];if(I!==void 0)return Bw(I)})(K),se=H.message;te===void 0&&(te=fe.INTERNAL,se="Unknown error status: "+K+" with message "+H.message),S=!0,w.o_(new xe(te,se)),y.close()}else Me(er,`RPC '${e}' stream ${s} received:`,j),w.__(j)}})),Ol.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return ow()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(n){return new Ol(n)}function Gg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(n){return new DM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ol.c_=!1;class n1{constructor(e,t,i=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&Me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="PersistentStream";class r1{constructor(e,t,i,s,l,c,d,m){this.Ci=e,this.b_=i,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new n1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Da(t.toString()),Da("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new xe(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Me(tS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Me(tS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class IP extends r1{constructor(e,t,i,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=PM(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Xe.min():c.readTime?Ki(c.readTime):Xe.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Cy(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Ey(m)?{documents:LM(l,m)}:{query:jM(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=qw(l,c.resumeToken);const p=Sy(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Xe.min())>0){d.readTime=Td(l,c.snapshotVersion.toTimestamp());const p=Sy(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const i=zM(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Cy(this.serializer),t.removeTarget=e,this.K_(t)}}class xP extends r1{constructor(e,t,i,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=kM(e.writeResults,e.commitTime),i=Ki(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Cy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>VM(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{}class DP extends NP{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new xe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Ay(t,i),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(fe.UNKNOWN,l.toString())}))}jo(e,t,i,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,Ay(t,i),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(fe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function OP(n,e,t,i){return new DP(n,e,t,i)}class MP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Da(t),this.aa=!1):Me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="RemoteStore";class PP{constructor(e,t,i,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{No(this)&&(Me(bo,"Restarting streams for network reachability change."),await(async function(m){const p=Ze(m);p.Ea.add(4),await Wc(p),p.Va.set("Unknown"),p.Ea.delete(4),await am(p)})(this))}))})),this.Va=new MP(i,s)}}async function am(n){if(No(n))for(const e of n.Ra)await e(!0)}async function Wc(n){for(const e of n.Ra)await e(!1)}function i1(n,e){const t=Ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),T_(t)?E_(t):iu(t).O_()&&v_(t,e))}function __(n,e){const t=Ze(n),i=iu(t);t.Ia.delete(e),i.O_()&&a1(t,e),t.Ia.size===0&&(i.O_()?i.L_():No(t)&&t.Va.set("Unknown"))}function v_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}iu(n).Z_(e)}function a1(n,e){n.da.$e(e),iu(n).X_(e)}function E_(n){n.da=new RM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),iu(n).start(),n.Va.ua()}function T_(n){return No(n)&&!iu(n).x_()&&n.Ia.size>0}function No(n){return Ze(n).Ea.size===0}function s1(n){n.da=void 0}async function VP(n){n.Va.set("Online")}async function kP(n){n.Ia.forEach(((e,t)=>{v_(n,e)}))}async function LP(n,e){s1(n),T_(n)?(n.Va.ha(e),E_(n)):n.Va.set("Unknown")}async function jP(n,e,t){if(n.Va.set("Online"),e instanceof Fw&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(i){Me(bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Sd(n,i)}else if(e instanceof Qf?n.da.Xe(e):e instanceof Hw?n.da.st(e):n.da.tt(e),!t.isEqual(Xe.min()))try{const i=await t1(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(p);y&&l.Ia.set(p,y.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,p)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(Yn.EMPTY_BYTE_STRING,y.snapshotVersion)),a1(l,m);const v=new Ss(y.target,m,p,y.sequenceNumber);v_(l,v)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){Me(bo,"Failed to raise snapshot:",i),await Sd(n,i)}}async function Sd(n,e,t){if(!ru(e))throw e;n.Ea.add(1),await Wc(n),n.Va.set("Offline"),t||(t=()=>t1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Me(bo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await am(n)}))}function o1(n,e){return e().catch((t=>Sd(n,t,e)))}async function sm(n){const e=Ze(n),t=Vs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:a_;for(;UP(e);)try{const s=await vP(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,zP(e,s)}catch(s){await Sd(e,s)}l1(e)&&u1(e)}function UP(n){return No(n)&&n.Ta.length<10}function zP(n,e){n.Ta.push(e);const t=Vs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function l1(n){return No(n)&&!Vs(n).x_()&&n.Ta.length>0}function u1(n){Vs(n).start()}async function BP(n){Vs(n).ra()}async function HP(n){const e=Vs(n);for(const t of n.Ta)e.ea(t.mutations)}async function FP(n,e,t){const i=n.Ta.shift(),s=h_.from(i,e,t);await o1(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await sm(n)}async function qP(n,e){e&&Vs(n).Y_&&await(async function(i,s){if((function(c){return AM(c)&&c!==fe.ABORTED})(s.code)){const l=i.Ta.shift();Vs(i).B_(),await o1(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,s))),await sm(i)}})(n,e),l1(n)&&u1(n)}async function nS(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Me(bo,"RemoteStore received new credentials");const i=No(t);t.Ea.add(3),await Wc(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await am(t)}async function GP(n,e){const t=Ze(n);e?(t.Ea.delete(2),await am(t)):e||(t.Ea.add(2),await Wc(t),t.Va.set("Unknown"))}function iu(n){return n.ma||(n.ma=(function(t,i,s){const l=Ze(t);return l.sa(),new IP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:VP.bind(null,n),Yo:kP.bind(null,n),t_:LP.bind(null,n),J_:jP.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),T_(n)?E_(n):n.Va.set("Unknown")):(await n.ma.stop(),s1(n))}))),n.ma}function Vs(n){return n.fa||(n.fa=(function(t,i,s){const l=Ze(t);return l.sa(),new xP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:BP.bind(null,n),t_:qP.bind(null,n),ta:HP.bind(null,n),na:FP.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await sm(n)):(await n.fa.stop(),n.Ta.length>0&&(Me(bo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t,i,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=l,this.deferred=new Ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,l){const c=Date.now()+i,d=new b_(e,t,c,s,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S_(n,e){if(Da("AsyncQueue",`${e}: ${n}`),ru(n))return new xe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{static emptySet(e){return new Ml(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||He.comparator(t.key,i.key):(t,i)=>He.comparator(t.key,i.key),this.keyedMap=cc(),this.sortedSet=new cn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=i.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ml;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.ga=new cn(He.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ke(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class $l{constructor(e,t,i,s,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new $l(e,t,Ml.emptySet(t),c,i,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class KP{constructor(){this.queries=iS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=Ze(t),l=s.queries;s.queries=iS(),l.forEach(((c,d)=>{for(const m of d.ba)m.onError(i)}))})(this,new xe(fe.ABORTED,"Firestore shutting down"))}}function iS(){return new xo((n=>xw(n)),Jd)}async function A_(n,e){const t=Ze(n);let i=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(i=2):(l=new $P,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=S_(c,`Initialization of query '${Sl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&C_(t)}async function w_(n,e){const t=Ze(n),i=e.query;let s=3;const l=t.queries.get(i);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function YP(n,e){const t=Ze(n);let i=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(s)&&(i=!0);c.wa=s}}i&&C_(t)}function QP(n,e,t){const i=Ze(n),s=i.queries.get(e);if(s)for(const l of s.ba)l.onError(t);i.queries.delete(e)}function C_(n){n.Ca.forEach((e=>{e.next()}))}var xy,aS;(aS=xy||(xy={})).Ma="default",aS.Cache="cache";class R_{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new $l(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=$l.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.key=e}}class h1{constructor(e){this.key=e}}class XP{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=_t(),this.mutatedKeys=_t(),this.eu=Nw(e),this.tu=new Ml(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new rS,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,v)=>{const S=s.get(y),w=Zd(this.query,v)?v:null,O=!!S&&this.mutatedKeys.has(S.key),z=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let j=!1;S&&w?S.data.isEqual(w.data)?O!==z&&(i.track({type:3,doc:w}),j=!0):this.su(S,w)||(i.track({type:2,doc:w}),j=!0,(m&&this.eu(w,m)>0||p&&this.eu(w,p)<0)&&(d=!0)):!S&&w?(i.track({type:0,doc:w}),j=!0):S&&!w&&(i.track({type:1,doc:S}),j=!0,(m||p)&&(d=!0)),j&&(w?(c=c.add(w),l=z?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{tu:c,iu:i,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,v)=>(function(w,O){const z=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke(20277,{Vt:j})}};return z(w)-z(O)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(i),s=s??!1;const d=t&&!s?this._u():[],m=this.Ya.size===0&&this.current&&!s?1:0,p=m!==this.Xa;return this.Xa=m,c.length!==0||p?{snapshot:new $l(this.query,e.tu,l,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=_t(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new h1(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new c1(i))})),t}cu(e){this.Za=e.ks,this.Ya=_t();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return $l.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const I_="SyncEngine";class WP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class JP{constructor(e){this.key=e,this.hu=!1}}class ZP{constructor(e,t,i,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new xo((d=>xw(d)),Jd),this.Iu=new Map,this.Eu=new Set,this.Ru=new cn(He.comparator),this.Au=new Map,this.Vu=new m_,this.du={},this.mu=new Map,this.fu=Gl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function e4(n,e,t=!0){const i=y1(n);let s;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await f1(i,e,t,!0),s}async function t4(n,e){const t=y1(n);await f1(t,e,!0,!1)}async function f1(n,e,t,i){const s=await EP(n.localStore,$i(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await n4(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&i1(n.remoteStore,s),d}async function n4(n,e,t,i,s){n.pu=(v,S,w)=>(async function(z,j,G,H){let K=j.view.ru(G);K.Ss&&(K=await W0(z.localStore,j.query,!1).then((({documents:A})=>j.view.ru(A,K))));const te=H&&H.targetChanges.get(j.targetId),se=H&&H.targetMismatches.get(j.targetId)!=null,ee=j.view.applyChanges(K,z.isPrimaryClient,te,se);return oS(z,j.targetId,ee.au),ee.snapshot})(n,v,S,w);const l=await W0(n.localStore,e,!0),c=new XP(e,l.ks),d=c.ru(l.documents),m=Xc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),p=c.applyChanges(d,n.isPrimaryClient,m);oS(n,t,p.au);const y=new WP(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function r4(n,e,t){const i=Ze(n),s=i.Tu.get(e),l=i.Iu.get(s.targetId);if(l.length>1)return i.Iu.set(s.targetId,l.filter((c=>!Jd(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Ry(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&__(i.remoteStore,s.targetId),Ny(i,s.targetId)})).catch(nu)):(Ny(i,s.targetId),await Ry(i.localStore,s.targetId,!0))}async function i4(n,e){const t=Ze(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),__(t.remoteStore,i.targetId))}async function a4(n,e,t){const i=f4(n);try{const s=await(function(c,d){const m=Ze(c),p=Jt.now(),y=d.reduce(((w,O)=>w.add(O.key)),_t());let v,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let O=Oa(),z=_t();return m.xs.getEntries(w,y).next((j=>{O=j,O.forEach(((G,H)=>{H.isValidDocument()||(z=z.add(G))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,O))).next((j=>{v=j;const G=[];for(const H of d){const K=vM(H,v.get(H.key).overlayedDocument);K!=null&&G.push(new js(H.key,K,Tw(K.value.mapValue),Cr.exists(!0)))}return m.mutationQueue.addMutationBatch(w,p,G,d)})).next((j=>{S=j;const G=j.applyToLocalDocumentSet(v,z);return m.documentOverlayCache.saveOverlays(w,j.batchId,G)}))})).then((()=>({batchId:S.batchId,changes:Ow(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(c,d,m){let p=c.du[c.currentUser.toKey()];p||(p=new cn(yt)),p=p.insert(d,m),c.du[c.currentUser.toKey()]=p})(i,s.batchId,t),await Jc(i,s.changes),await sm(i.remoteStore)}catch(s){const l=S_(s,"Failed to persist write");t.reject(l)}}async function d1(n,e){const t=Ze(n);try{const i=await yP(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(Ot(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Ot(c.hu,14607):s.removedDocuments.size>0&&(Ot(c.hu,42227),c.hu=!1))})),await Jc(t,i,e)}catch(i){await nu(i)}}function sS(n,e,t){const i=Ze(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const m=Ze(c);m.onlineState=d;let p=!1;m.queries.forEach(((y,v)=>{for(const S of v.ba)S.va(d)&&(p=!0)})),p&&C_(m)})(i.eventManager,e),s.length&&i.Pu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function s4(n,e,t){const i=Ze(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),l=s&&s.key;if(l){let c=new cn(He.comparator);c=c.insert(l,rr.newNoDocument(l,Xe.min()));const d=_t().add(l),m=new rm(Xe.min(),new Map,new cn(yt),c,d);await d1(i,m),i.Ru=i.Ru.remove(l),i.Au.delete(e),x_(i)}else await Ry(i.localStore,e,!1).then((()=>Ny(i,e,t))).catch(nu)}async function o4(n,e){const t=Ze(n),i=e.batch.batchId;try{const s=await gP(t.localStore,e);p1(t,i,null),m1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Jc(t,s)}catch(s){await nu(s)}}async function l4(n,e,t){const i=Ze(n);try{const s=await(function(c,d){const m=Ze(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return m.mutationQueue.lookupMutationBatch(p,d).next((v=>(Ot(v!==null,37113),y=v.keys(),m.mutationQueue.removeMutationBatch(p,v)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>m.localDocuments.getDocuments(p,y)))}))})(i.localStore,e);p1(i,e,t),m1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Jc(i,s)}catch(s){await nu(s)}}function m1(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function p1(n,e,t){const i=Ze(n);let s=i.du[i.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),i.du[i.currentUser.toKey()]=s}}function Ny(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||g1(n,i)}))}function g1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(__(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),x_(n))}function oS(n,e,t){for(const i of t)i instanceof c1?(n.Vu.addReference(i.key,e),u4(n,i)):i instanceof h1?(Me(I_,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||g1(n,i.key)):Ke(19791,{wu:i})}function u4(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(Me(I_,"New document in limbo: "+t),n.Eu.add(i),x_(n))}function x_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new He(Yt.fromString(e)),i=n.fu.next();n.Au.set(i,new JP(t)),n.Ru=n.Ru.insert(t,i),i1(n.remoteStore,new Ss($i(Wd(t.path)),i,"TargetPurposeLimboResolution",Yd.ce))}}async function Jc(n,e,t){const i=Ze(n),s=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,m)=>{c.push(i.pu(m,e,t).then((p=>{var y;if((p||t)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){s.push(p);const v=g_.Es(m.targetId,p);l.push(v)}})))})),await Promise.all(c),i.Pu.J_(s),await(async function(m,p){const y=Ze(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>pe.forEach(p,(S=>pe.forEach(S.Ts,(w=>y.persistence.referenceDelegate.addReference(v,S.targetId,w))).next((()=>pe.forEach(S.Is,(w=>y.persistence.referenceDelegate.removeReference(v,S.targetId,w)))))))))}catch(v){if(!ru(v))throw v;Me(y_,"Failed to update sequence numbers: "+v)}for(const v of p){const S=v.targetId;if(!v.fromCache){const w=y.vs.get(S),O=w.snapshotVersion,z=w.withLastLimboFreeSnapshotVersion(O);y.vs=y.vs.insert(S,z)}}})(i.localStore,l))}async function c4(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Me(I_,"User change. New user:",e.toKey());const i=await e1(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new xe(fe.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Jc(t,i.Ns)}}function h4(n,e){const t=Ze(n),i=t.Au.get(e);if(i&&i.hu)return _t().add(i.key);{let s=_t();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function y1(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=d1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=s4.bind(null,e),e.Pu.J_=YP.bind(null,e.eventManager),e.Pu.yu=QP.bind(null,e.eventManager),e}function f4(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l4.bind(null,e),e}class Ad{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=im(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return pP(this.persistence,new fP,e.initialUser,this.serializer)}Cu(e){return new Zw(p_.Vi,this.serializer)}Du(e){return new bP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ad.provider={build:()=>new Ad};class d4 extends Ad{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ot(this.persistence.referenceDelegate instanceof bd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new WM(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new Zw((i=>bd.Vi(i,t)),this.serializer)}}class Dy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=c4.bind(null,this.syncEngine),await GP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KP})()}createDatastore(e){const t=im(e.databaseInfo.databaseId),i=RP(e.databaseInfo);return OP(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,l,c,d){return new PP(i,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>sS(this.syncEngine,t,0)),(function(){return eS.v()?new eS:new SP})())}createSyncEngine(e,t){return(function(s,l,c,d,m,p,y){const v=new ZP(s,l,c,d,m,p);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Ze(s);Me(bo,"RemoteStore shutting down."),l.Ea.add(5),await Wc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Dy.provider={build:()=>new Dy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Da("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="FirestoreClient";class m4{constructor(e,t,i,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=s,this.user=nr.UNAUTHENTICATED,this.clientId=i_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Me(ks,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Me(ks,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=S_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function $g(n,e){n.asyncQueue.verifyOperationInProgress(),Me(ks,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await e1(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function lS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await p4(n);Me(ks,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>nS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>nS(e.remoteStore,s))),n._onlineComponents=e}async function p4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Me(ks,"Using user provided OfflineComponentProvider");try{await $g(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Bl("Error using user provided cache. Falling back to memory cache: "+t),await $g(n,new Ad)}}else Me(ks,"Using default OfflineComponentProvider"),await $g(n,new d4(void 0));return n._offlineComponents}async function _1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Me(ks,"Using user provided OnlineComponentProvider"),await lS(n,n._uninitializedComponentsProvider._online)):(Me(ks,"Using default OnlineComponentProvider"),await lS(n,new Dy))),n._onlineComponents}function g4(n){return _1(n).then((e=>e.syncEngine))}async function wd(n){const e=await _1(n),t=e.eventManager;return t.onListen=e4.bind(null,e.syncEngine),t.onUnlisten=r4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=t4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=i4.bind(null,e.syncEngine),t}function y4(n,e,t,i){const s=new N_(i),l=new R_(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>A_(await wd(n),l))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>w_(await wd(n),l)))}}function _4(n,e,t={}){const i=new Ra;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,p){const y=new N_({next:S=>{y.Nu(),c.enqueueAndForget((()=>w_(l,v)));const w=S.docs.has(d);!w&&S.fromCache?p.reject(new xe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&m&&m.source==="server"?p.reject(new xe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),v=new R_(Wd(d.path),y,{includeMetadataChanges:!0,Ka:!0});return A_(l,v)})(await wd(n),n.asyncQueue,e,t,i))),i.promise}function v4(n,e,t={}){const i=new Ra;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,p){const y=new N_({next:S=>{y.Nu(),c.enqueueAndForget((()=>w_(l,v))),S.fromCache&&m.source==="server"?p.reject(new xe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),v=new R_(d,y,{includeMetadataChanges:!0,Ka:!0});return A_(l,v)})(await wd(n),n.asyncQueue,e,t,i))),i.promise}function E4(n,e){const t=new Ra;return n.asyncQueue.enqueueAndForget((async()=>a4(await g4(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4="ComponentProvider",uS=new Map;function b4(n,e,t,i,s){return new BO(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,v1(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="firestore.googleapis.com",cS=!0;class hS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E1,this.ssl=cS}else this.host=e.host,this.ssl=e.ssl??cS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Jw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QM)throw new xe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new xe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new xe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new xe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class om{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new EO;switch(i.type){case"firstParty":return new AO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=uS.get(t);i&&(Me(T4,"Removing Datastore"),uS.delete(t),i.terminate())})(this),Promise.resolve()}}function S4(n,e,t,i={}){var p;n=wr(n,om);const s=Zl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(YA(`https://${d}`),QA("Firestore",!0)),l.host!==E1&&l.host!==d&&Bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:s,emulatorOptions:i};if(!vo(m,c)&&(n._setSettings(m),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=nr.MOCK_USER;else{y=$D(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new xe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new nr(S)}n._authCredentials=new TO(new uw(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Do(this.firestore,e,this._query)}}class dn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}toJSON(){return{type:dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Kc(t,dn._jsonSchema))return new dn(e,i||null,new He(Yt.fromString(t.referencePath)))}}dn._jsonSchemaVersion="firestore/documentReference/1.0",dn._jsonSchema={type:Nn("string",dn._jsonSchemaVersion),referencePath:Nn("string")};class xs extends Do{constructor(e,t,i){super(e,t,Wd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new He(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function So(n,e,...t){if(n=Vn(n),cw("collection","path",e),n instanceof om){const i=Yt.fromString(e,...t);return A0(i),new xs(n,null,i)}{if(!(n instanceof dn||n instanceof xs))throw new xe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Yt.fromString(e,...t));return A0(i),new xs(n.firestore,null,i)}}function Fr(n,e,...t){if(n=Vn(n),arguments.length===1&&(e=i_.newId()),cw("doc","path",e),n instanceof om){const i=Yt.fromString(e,...t);return S0(i),new dn(n,null,new He(i))}{if(!(n instanceof dn||n instanceof xs))throw new xe(fe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Yt.fromString(e,...t));return S0(i),new dn(n.firestore,n instanceof xs?n.converter:null,new He(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="AsyncQueue";class dS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new n1(this,"async_queue_retry"),this._c=()=>{const i=Gg();i&&Me(fS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Gg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Gg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ra;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ru(e))throw e;Me(fS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Da("INTERNAL UNHANDLED ERROR: ",mS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=b_.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ke(47125,{Pc:mS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function mS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ma extends om{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new dS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dS(e),this._firestoreClient=void 0,await e}}}function A4(n,e){const t=typeof n=="object"?n:ZA(),i=typeof n=="string"?n:gd,s=n_(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const l=qD("firestore");l&&S4(s,...l)}return s}function Zc(n){if(n._terminated)throw new xe(fe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||w4(n),n._firestoreClient}function w4(n){var i,s,l,c;const e=n._freezeSettings(),t=b4(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new m4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oi(Yn.fromBase64String(e))}catch(t){throw new xe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oi(Yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:oi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kc(e,oi._jsonSchema))return oi.fromBase64String(e.bytes)}}oi._jsonSchemaVersion="firestore/bytes/1.0",oi._jsonSchema={type:Nn("string",oi._jsonSchemaVersion),bytes:Nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return yt(this._lat,e._lat)||yt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yi._jsonSchemaVersion}}static fromJSON(e){if(Kc(e,Yi._jsonSchema))return new Yi(e.latitude,e.longitude)}}Yi._jsonSchemaVersion="firestore/geoPoint/1.0",Yi._jsonSchema={type:Nn("string",Yi._jsonSchemaVersion),latitude:Nn("number"),longitude:Nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kc(e,Si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Si(e.vectorValues);throw new xe(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Si._jsonSchemaVersion="firestore/vectorValue/1.0",Si._jsonSchema={type:Nn("string",Si._jsonSchemaVersion),vectorValues:Nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=/^__.*__$/;class R4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new js(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qc(e,this.data,t,this.fieldTransforms)}}class T1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new js(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function b1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke(40011,{dataSource:n})}}class D_{constructor(e,t,i,s,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new D_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Cd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(b1(this.dataSource)&&C4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class I4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||im(e)}createContext(e,t,i,s=!1){return new D_({dataSource:e,methodName:t,targetDoc:i,path:Kn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cm(n){const e=n._freezeSettings(),t=im(n._databaseId);return new I4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function S1(n,e,t,i,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);M_("Data must be an object, but it was:",c,i);const d=C1(i,c);let m,p;if(l.merge)m=new Br(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const S=Kl(e,v,t);if(!c.contains(S))throw new xe(fe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);x1(y,S)||y.push(S)}m=new Br(y),p=c.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,p=c.fieldTransforms;return new R4(new Ar(d),m,p)}class hm extends um{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hm}}class O_ extends um{_toFieldTransform(e){return new pM(e.path,new Oc)}isEqual(e){return e instanceof O_}}function A1(n,e,t,i){const s=n.createContext(1,e,t);M_("Data must be an object, but it was:",s,i);const l=[],c=Ar.empty();Ls(i,((m,p)=>{const y=I1(e,m,t);p=Vn(p);const v=s.childContextForFieldPath(y);if(p instanceof hm)l.push(y);else{const S=eh(p,v);S!=null&&(l.push(y),c.set(y,S))}}));const d=new Br(l);return new T1(c,d,s.fieldTransforms)}function w1(n,e,t,i,s,l){const c=n.createContext(1,e,t),d=[Kl(e,i,t)],m=[s];if(l.length%2!=0)throw new xe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Kl(e,l[S])),m.push(l[S+1]);const p=[],y=Ar.empty();for(let S=d.length-1;S>=0;--S)if(!x1(p,d[S])){const w=d[S];let O=m[S];O=Vn(O);const z=c.childContextForFieldPath(w);if(O instanceof hm)p.push(w);else{const j=eh(O,z);j!=null&&(p.push(w),y.set(w,j))}}const v=new Br(p);return new T1(y,v,c.fieldTransforms)}function x4(n,e,t,i=!1){return eh(t,n.createContext(i?4:3,e))}function eh(n,e){if(R1(n=Vn(n)))return M_("Unsupported field value:",e,n),C1(n,e);if(n instanceof um)return(function(i,s){if(!b1(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,s){const l=[];let c=0;for(const d of i){let m=eh(d,s.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,s){if((i=Vn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return fM(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Jt.fromDate(i);return{timestampValue:Td(s.serializer,l)}}if(i instanceof Jt){const l=new Jt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Td(s.serializer,l)}}if(i instanceof Yi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof oi)return{bytesValue:qw(s.serializer,i._byteString)};if(i instanceof dn){const l=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:d_(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Si)return(function(c,d){const m=c instanceof Si?c.toArray():c;return{mapValue:{fields:{[vw]:{stringValue:Ew},[yd]:{arrayValue:{values:m.map((y=>{if(typeof y!="number")throw d.createError("VectorValues must only contain numeric values.");return c_(d.serializer,y)}))}}}}}})(i,s);if(Ww(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Kd(i)}`)})(n,e)}function C1(n,e){const t={};return dw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(n,((i,s)=>{const l=eh(s,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function R1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Jt||n instanceof Yi||n instanceof oi||n instanceof dn||n instanceof um||n instanceof Si||Ww(n))}function M_(n,e,t){if(!R1(t)||!hw(t)){const i=Kd(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Kl(n,e,t){if((e=Vn(e))instanceof lm)return e._internalPath;if(typeof e=="string")return I1(n,e);throw Cd("Field path arguments must be of type string or ",n,!1,void 0,t)}const N4=new RegExp("[~\\*/\\[\\]]");function I1(n,e,t){if(e.search(N4)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new lm(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cd(n,e,t,i,s){const l=i&&!i.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${s}`),m+=")"),new xe(fe.INVALID_ARGUMENT,d+n+m)}function x1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{convertValue(e,t="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ls(e,((s,l)=>{i[s]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,s,l;const t=(l=(s=(i=e.fields)==null?void 0:i[yd].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>vn(c.doubleValue)));return new Si(t)}convertGeoPoint(e){return new Yi(vn(e.latitude),vn(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Xd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){const t=Os(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Yt.fromString(e);Ot(Xw(i),9688,{name:e});const s=new Nc(i.get(1),i.get(3)),l=new He(i.popFirst(5));return s.isEqual(t)||Da(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends D4{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,t)}}function O4(){return new O_("serverTimestamp")}const pS="@firebase/firestore",gS="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of i)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,t,i,s,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new M4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Kl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class M4 extends N1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new xe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V_{}class P4 extends V_{}function Ao(n,e,...t){let i=[];e instanceof V_&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((m=>m instanceof k_)).length,d=l.filter((m=>m instanceof fm)).length;if(c>1||c>0&&d>0)throw new xe(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class fm extends P4{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new fm(e,t,i)}_apply(e){const t=this._parse(e);return O1(e._query,t),new Do(e.firestore,e.converter,Ty(e._query,t))}_parse(e){const t=cm(e.firestore);return(function(l,c,d,m,p,y,v){let S;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new xe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){vS(v,y);const O=[];for(const z of v)O.push(_S(m,l,z));S={arrayValue:{values:O}}}else S=_S(m,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||vS(v,y),S=x4(d,c,v,y==="in"||y==="not-in");return xn.create(p,y,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function dm(n,e,t){const i=e,s=Kl("where",n);return fm._create(s,i,t)}class k_ extends V_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new k_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:wi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const m of d)O1(c,m),c=Ty(c,m)})(e._query,t),new Do(e.firestore,e.converter,Ty(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function _S(n,e,t){if(typeof(t=Vn(t))=="string"){if(t==="")throw new xe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iw(e)&&t.indexOf("/")!==-1)throw new xe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Yt.fromString(t));if(!He.isDocumentKey(i))throw new xe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return O0(n,new He(i))}if(t instanceof dn)return O0(n,t._key);throw new xe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kd(t)}.`)}function vS(n,e){if(!Array.isArray(n)||n.length===0)throw new xe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O1(n,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new xe(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function M1(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class fc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class po extends N1{constructor(e,t,i,s,l,c){super(e,t,i,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Kl("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=po._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}po._jsonSchemaVersion="firestore/documentSnapshot/1.0",po._jsonSchema={type:Nn("string",po._jsonSchemaVersion),bundleSource:Nn("string","DocumentSnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class Xf extends po{data(e={}){return super.data(e)}}class go{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new fc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Xf(this._firestore,this._userDataWriter,i.key,i,new fc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const m=new Xf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new fc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Xf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new fc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:V4(d.type),doc:m,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=i_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function V4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */go._jsonSchemaVersion="firestore/querySnapshot/1.0",go._jsonSchema={type:Nn("string",go._jsonSchemaVersion),bundleSource:Nn("string","QuerySnapshot"),bundleName:Nn("string"),bundle:Nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cm(e)}set(e,t,i){this._verifyNotCommitted();const s=Kg(e,this._firestore),l=M1(s.converter,t,i),c=S1(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,i);return this._mutations.push(c.toMutation(s._key,Cr.none())),this}update(e,t,i,...s){this._verifyNotCommitted();const l=Kg(e,this._firestore);let c;return c=typeof(t=Vn(t))=="string"||t instanceof lm?w1(this._dataReader,"WriteBatch.update",l._key,t,i,s):A1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Kg(e,this._firestore);return this._mutations=this._mutations.concat(new nm(t._key,Cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kg(n,e){if((n=Vn(n)).firestore!==e)throw new xe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(n){n=wr(n,dn);const e=wr(n.firestore,Ma),t=Zc(e);return _4(t,n._key).then((i=>k1(e,n,i)))}function nh(n){n=wr(n,Do);const e=wr(n.firestore,Ma),t=Zc(e),i=new P_(e);return D1(n._query),v4(t,n._query).then((s=>new go(e,i,n,s)))}function mm(n,e,t){n=wr(n,dn);const i=wr(n.firestore,Ma),s=M1(n.converter,e,t),l=cm(i);return pm(i,[S1(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Cr.none())])}function P1(n,e,t,...i){n=wr(n,dn);const s=wr(n.firestore,Ma),l=cm(s);let c;return c=typeof(e=Vn(e))=="string"||e instanceof lm?w1(l,"updateDoc",n._key,e,t,i):A1(l,"updateDoc",n._key,e),pm(s,[c.toMutation(n._key,Cr.exists(!0))])}function L4(n){return pm(wr(n.firestore,Ma),[new nm(n._key,Cr.none())])}function V1(n,...e){var p,y,v;n=Vn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||yS(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(yS(e[i])){const S=e[i];e[i]=(p=S.next)==null?void 0:p.bind(S),e[i+1]=(y=S.error)==null?void 0:y.bind(S),e[i+2]=(v=S.complete)==null?void 0:v.bind(S)}let l,c,d;if(n instanceof dn)c=wr(n.firestore,Ma),d=Wd(n._key.path),l={next:S=>{e[i]&&e[i](k1(c,n,S))},error:e[i+1],complete:e[i+2]};else{const S=wr(n,Do);c=wr(S.firestore,Ma),d=S._query;const w=new P_(c);l={next:O=>{e[i]&&e[i](new go(c,w,S,O))},error:e[i+1],complete:e[i+2]},D1(n._query)}const m=Zc(c);return y4(m,d,s,l)}function pm(n,e){const t=Zc(n);return E4(t,e)}function k1(n,e,t){const i=t.docs.get(e._key),s=new P_(n);return new po(n,s,e._key,i,new fc(t.hasPendingWrites,t.fromCache),e.converter)}function L1(n){return n=wr(n,Ma),Zc(n),new k4(n,(e=>pm(n,e)))}(function(e,t=!0){vO(eu),zl(new Eo("firestore",((i,{instanceIdentifier:s,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Ma(new bO(i.getProvider("auth-internal")),new wO(c,i.getProvider("app-check-internal")),HO(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Rs(pS,gS,e),Rs(pS,gS,"esm2020")})();var j4="firebase",U4="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rs(j4,U4,"app");function j1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const z4=j1,U1=new Gc("auth","Firebase",j1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new e_("@firebase/auth");function B4(n,...e){Rd.logLevel<=gt.WARN&&Rd.warn(`Auth (${eu}): ${n}`,...e)}function Wf(n,...e){Rd.logLevel<=gt.ERROR&&Rd.error(`Auth (${eu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(n,...e){throw j_(n,...e)}function Ai(n,...e){return j_(n,...e)}function L_(n,e,t){const i={...z4(),[e]:t};return new Gc("auth","Firebase",i).create(e,{appName:n.name})}function yo(n){return L_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H4(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ji(n,"argument-error"),L_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function j_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return U1.create(n,...e)}function Ye(n,e,...t){if(!n)throw j_(e,...t)}function wa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Wf(e),new Error(e)}function Pa(n,e){n||wa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function F4(){return ES()==="http:"||ES()==="https:"}function ES(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(F4()||JD()||"connection"in navigator)?navigator.onLine:!0}function G4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pa(t>e,"Short delay should be less than long delay!"),this.isMobile=QD()||ZD()}get(){return q4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(n,e){Pa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Y4=new rh(3e4,6e4);function z_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function au(n,e,t,i,s={}){return B1(n,s,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=$c({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...l};return WD()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Zl(n.emulatorConfig.host)&&(p.credentials="include"),z1.fetch()(await H1(n,n.config.apiHost,t,d),p)})}async function B1(n,e,t){n._canInitEmulator=!1;const i={...$4,...e};try{const s=new X4(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Vf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vf(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Vf(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Vf(n,"user-disabled",c);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw L_(n,y,p);Ji(n,y)}}catch(s){if(s instanceof La)throw s;Ji(n,"network-request-failed",{message:String(s)})}}async function Q4(n,e,t,i,s={}){const l=await au(n,e,t,i,s);return"mfaPendingCredential"in l&&Ji(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function H1(n,e,t,i){const s=`${e}${t}?${i}`,l=n,c=l.config.emulator?U_(n.config,s):`${n.config.apiScheme}://${s}`;return K4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class X4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ai(this.auth,"network-request-failed")),Y4.get())})}}function Vf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Ai(n,e,i);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(n,e){return au(n,"POST","/v1/accounts:delete",e)}async function Id(n,e){return au(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function J4(n,e=!1){const t=Vn(n),i=await t.getIdToken(e),s=B_(i);Ye(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:i,authTime:Ec(Yg(s.auth_time)),issuedAtTime:Ec(Yg(s.iat)),expirationTime:Ec(Yg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Yg(n){return Number(n)*1e3}function B_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Wf("JWT malformed, contained fewer than 3 sections"),null;try{const s=qA(t);return s?JSON.parse(s):(Wf("Failed to decode base64 JWT payload"),null)}catch(s){return Wf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function TS(n){const e=B_(n);return Ye(e,"internal-error"),Ye(typeof e.exp<"u","internal-error"),Ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof La&&Z4(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Z4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(n){var v;const e=n.auth,t=await n.getIdToken(),i=await Vc(n,Id(e,{idToken:t}));Ye(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const l=(v=s.providerUserInfo)!=null&&v.length?F1(s.providerUserInfo):[],c=nV(n.providerData,l),d=n.isAnonymous,m=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),p=d?m:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new My(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function tV(n){const e=Vn(n);await xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nV(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function F1(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rV(n,e){const t=await B1(n,{},async()=>{const i=$c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await H1(n,s,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&Zl(n.emulatorConfig.host)&&(m.credentials="include"),z1.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function iV(n,e){return au(n,"POST","/v2/accounts:revokeToken",z_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ye(e.idToken,"internal-error"),Ye(typeof e.idToken<"u","internal-error"),Ye(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ye(e.length!==0,"internal-error");const t=TS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:l}=await rV(e,t);this.updateTokensAndExpiration(i,s,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:l}=t,c=new Pl;return i&&(Ye(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),s&&(Ye(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Ye(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pl,this.toJSON())}_performRefresh(){return wa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(n,e){Ye(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class bi{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new eV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new My(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Vc(this,this.stsTokenManager.getToken(this.auth,e));return Ye(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return J4(this,e)}reload(){return tV(this)}_assign(e){this!==e&&(Ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await xd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(yo(this.auth));const e=await this.getIdToken();return await Vc(this,W4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:S,isAnonymous:w,providerData:O,stsTokenManager:z}=t;Ye(v&&z,e,"internal-error");const j=Pl.fromJSON(this.name,z);Ye(typeof v=="string",e,"internal-error"),ps(i,e.name),ps(s,e.name),Ye(typeof S=="boolean",e,"internal-error"),Ye(typeof w=="boolean",e,"internal-error"),ps(l,e.name),ps(c,e.name),ps(d,e.name),ps(m,e.name),ps(p,e.name),ps(y,e.name);const G=new bi({uid:v,auth:e,email:s,emailVerified:S,displayName:i,isAnonymous:w,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:j,createdAt:p,lastLoginAt:y});return O&&Array.isArray(O)&&(G.providerData=O.map(H=>({...H}))),m&&(G._redirectEventId=m),G}static async _fromIdTokenResponse(e,t,i=!1){const s=new Pl;s.updateFromServerResponse(t);const l=new bi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await xd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Ye(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?F1(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),d=new Pl;d.updateFromIdToken(i);const m=new bi({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new My(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=new Map;function Ca(n){Pa(n instanceof Function,"Expected a class definition");let e=bS.get(n);return e?(Pa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,bS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}q1.type="NONE";const SS=q1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(n,e,t){return`firebase:${n}:${e}:${t}`}class Vl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:l}=this.auth;this.fullUserKey=Jf(this.userKey,s.apiKey,l),this.fullPersistenceKey=Jf("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Id(this.auth,{idToken:e}).catch(()=>{});return t?bi._fromGetAccountInfoResponse(this.auth,t,e):null}return bi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Vl(Ca(SS),e,i);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=s[0]||Ca(SS);const c=Jf(i,e.config.apiKey,e.name);let d=null;for(const p of t)try{const y=await p._get(c);if(y){let v;if(typeof y=="string"){const S=await Id(e,{idToken:y}).catch(()=>{});if(!S)break;v=await bi._fromGetAccountInfoResponse(e,S,y)}else v=bi._fromJSON(e,y);p!==l&&(d=v),l=p;break}}catch{}const m=s.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Vl(l,e,i):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Vl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(X1(e))return"Blackberry";if(W1(e))return"Webos";if($1(e))return"Safari";if((e.includes("chrome/")||K1(e))&&!e.includes("edge/"))return"Chrome";if(Q1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function G1(n=ir()){return/firefox\//i.test(n)}function $1(n=ir()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K1(n=ir()){return/crios\//i.test(n)}function Y1(n=ir()){return/iemobile/i.test(n)}function Q1(n=ir()){return/android/i.test(n)}function X1(n=ir()){return/blackberry/i.test(n)}function W1(n=ir()){return/webos/i.test(n)}function H_(n=ir()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function aV(n=ir()){var e;return H_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function sV(){return e2()&&document.documentMode===10}function J1(n=ir()){return H_(n)||Q1(n)||W1(n)||X1(n)||/windows phone/i.test(n)||Y1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(n,e=[]){let t;switch(n){case"Browser":t=AS(ir());break;case"Worker":t=`${AS(ir())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${eu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lV(n,e={}){return au(n,"GET","/v2/passwordPolicy",z_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV=6;class cV{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??uV,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wS(this),this.idTokenSubscription=new wS(this),this.beforeStateQueue=new oV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ca(t)),this._initializationPromise=this.queue(async()=>{var i,s,l;if(!this._deleted&&(this.persistenceManager=await Vl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Id(this,{idToken:e}),i=await bi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Ei(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(i=m.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=G4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ei(this.app))return Promise.reject(yo(this));const t=e?Vn(e):null;return t&&Ye(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(yo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ei(this.app)?Promise.reject(yo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ca(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lV(this),t=new cV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await iV(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ca(e)||this._popupRedirectResolver;Ye(t,this,"argument-error"),this.redirectPersistenceManager=await Vl.create(this,[Ca(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ye(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,s);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Z1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&B4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function gm(n){return Vn(n)}class wS{constructor(e){this.auth=e,this.observer=null,this.addObserver=l2(t=>this.observer=t)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fV(n){F_=n}function dV(n){return F_.loadJS(n)}function mV(){return F_.gapiScript}function pV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(n,e){const t=n_(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(vo(l,e??{}))return s;Ji(s,"already-initialized")}return t.initialize({options:e})}function yV(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ca);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function _V(n,e,t){const i=gm(n);Ye(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,l=eC(e),{host:c,port:d}=vV(e),m=d===null?"":`:${d}`,p={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ye(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ye(vo(p,i.config.emulator)&&vo(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Zl(c)?(YA(`${l}//${c}${m}`),QA("Auth",!0)):EV()}function eC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function vV(n){const e=eC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const l=s[1];return{host:l,port:CS(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:CS(c)}}}function CS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function EV(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wa("not implemented")}_getIdTokenResponse(e){return wa("not implemented")}_linkToIdToken(e,t){return wa("not implemented")}_getReauthenticationResolver(e){return wa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(n,e){return Q4(n,"POST","/v1/accounts:signInWithIdp",z_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="http://localhost";class wo extends tC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ji("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...l}=t;if(!i||!s)return null;const c=new wo(i,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return kl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,kl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,kl(e,t)}buildRequest(){const e={requestUri:TV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$c(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends q_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends ih{constructor(){super("facebook.com")}static credential(e){return wo._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends ih{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wo._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Sa.credential(t,i)}catch{return null}}}Sa.GOOGLE_SIGN_IN_METHOD="google.com";Sa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends ih{constructor(){super("github.com")}static credential(e){return wo._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.GITHUB_SIGN_IN_METHOD="github.com";Es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends ih{constructor(){super("twitter.com")}static credential(e,t){return wo._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ts.credential(t,i)}catch{return null}}}Ts.TWITTER_SIGN_IN_METHOD="twitter.com";Ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const l=await bi._fromIdTokenResponse(e,i,s),c=RS(i);return new Yl({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=RS(i);return new Yl({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function RS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends La{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Nd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Nd(e,t,i,s)}}function nC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nd._fromErrorAndOperation(n,l,e,i):l})}async function bV(n,e,t=!1){const i=await Vc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Yl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SV(n,e,t=!1){const{auth:i}=n;if(Ei(i.app))return Promise.reject(yo(i));const s="reauthenticate";try{const l=await Vc(n,nC(i,s,e,n),t);Ye(l.idToken,i,"internal-error");const c=B_(l.idToken);Ye(c,i,"internal-error");const{sub:d}=c;return Ye(n.uid===d,i,"user-mismatch"),Yl._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ji(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AV(n,e,t=!1){if(Ei(n.app))return Promise.reject(yo(n));const i="signIn",s=await nC(n,i,e),l=await Yl._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(l.user),l}function wV(n,e,t,i){return Vn(n).onIdTokenChanged(e,t,i)}function CV(n,e,t){return Vn(n).beforeAuthStateChanged(e,t)}function RV(n,e,t,i){return Vn(n).onAuthStateChanged(e,t,i)}const Dd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dd,"1"),this.storage.removeItem(Dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=1e3,xV=10;class iC extends rC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);sV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,xV):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},IV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iC.type="LOCAL";const NV=iC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC extends rC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}aC.type="SESSION";const sC=aC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new ym(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const d=Array.from(c).map(async p=>p(t.origin,l)),m=await DV(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ym.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const p=G_("",20);s.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(v){const S=v;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(){return window}function MV(n){Qi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function PV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function kV(){return oC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="firebaseLocalStorageDb",LV=1,Od="firebaseLocalStorage",uC="fbase_key";class ah{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function _m(n,e){return n.transaction([Od],e?"readwrite":"readonly").objectStore(Od)}function jV(){const n=indexedDB.deleteDatabase(lC);return new ah(n).toPromise()}function Py(){const n=indexedDB.open(lC,LV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Od,{keyPath:uC})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Od)?e(i):(i.close(),await jV(),e(await Py()))})})}async function IS(n,e,t){const i=_m(n,!0).put({[uC]:e,value:t});return new ah(i).toPromise()}async function UV(n,e){const t=_m(n,!1).get(e),i=await new ah(t).toPromise();return i===void 0?null:i.value}function xS(n,e){const t=_m(n,!0).delete(e);return new ah(t).toPromise()}const zV=800,BV=3;class cC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Py(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>BV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ym._getInstance(kV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await PV(),!this.activeServiceWorker)return;this.sender=new OV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Py();return await IS(e,Dd,"1"),await xS(e,Dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>IS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>UV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=_m(s,!1).getAll();return new ah(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cC.type="LOCAL";const HV=cC;new rh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(n,e){return e?Ca(e):(Ye(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_ extends tC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return kl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return kl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function FV(n){return AV(n.auth,new $_(n),n.bypassAuthState)}function qV(n){const{auth:e,user:t}=n;return Ye(t,e,"internal-error"),SV(t,new $_(n),n.bypassAuthState)}async function GV(n){const{auth:e,user:t}=n;return Ye(t,e,"internal-error"),bV(t,new $_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t,i,s,l=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FV;case"linkViaPopup":case"linkViaRedirect":return GV;case"reauthViaPopup":case"reauthViaRedirect":return qV;default:Ji(this.auth,"internal-error")}}resolve(e){Pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=new rh(2e3,1e4);async function KV(n,e,t){if(Ei(n.app))return Promise.reject(Ai(n,"operation-not-supported-in-this-environment"));const i=gm(n);H4(n,e,q_);const s=hC(i,t);return new mo(i,"signInViaPopup",e,s).executeNotNull()}class mo extends fC{constructor(e,t,i,s,l){super(e,t,s,l),this.provider=i,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ye(e,this.auth,"internal-error"),e}async onExecution(){Pa(this.filter.length===1,"Popup operations only handle one event");const e=G_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$V.get())};e()}}mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV="pendingRedirect",Zf=new Map;class QV extends fC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Zf.get(this.auth._key());if(!e){try{const i=await XV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Zf.set(this.auth._key(),e)}return this.bypassAuthState||Zf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XV(n,e){const t=ZV(e),i=JV(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function WV(n,e){Zf.set(n._key(),e)}function JV(n){return Ca(n._redirectPersistence)}function ZV(n){return Jf(YV,n.config.apiKey,n.name)}async function ek(n,e,t=!1){if(Ei(n.app))return Promise.reject(yo(n));const i=gm(n),s=hC(i,e),c=await new QV(i,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=600*1e3;class nk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!dC(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ai(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tk&&this.cachedEventUids.clear(),this.cachedEventUids.has(NS(e))}saveEventToCache(e){this.cachedEventUids.add(NS(e)),this.lastProcessedEventTime=Date.now()}}function NS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(n,e={}){return au(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sk=/^https?/;async function ok(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ik(n);for(const t of e)try{if(lk(t))return}catch{}Ji(n,"unauthorized-domain")}function lk(n){const e=Oy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!sk.test(t))return!1;if(ak.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new rh(3e4,6e4);function DS(){const n=Qi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ck(n){return new Promise((e,t)=>{var s,l,c;function i(){DS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DS(),t(Ai(n,"network-request-failed"))},timeout:uk.get()})}if((l=(s=Qi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Qi().gapi)!=null&&c.load)i();else{const d=pV("iframefcb");return Qi()[d]=()=>{gapi.load?i():t(Ai(n,"network-request-failed"))},dV(`${mV()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw ed=null,e})}let ed=null;function hk(n){return ed=ed||ck(n),ed}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new rh(5e3,15e3),dk="__/auth/iframe",mk="emulator/auth/iframe",pk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yk(n){const e=n.config;Ye(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?U_(e,mk):`https://${n.config.authDomain}/${dk}`,i={apiKey:e.apiKey,appName:n.name,v:eu},s=gk.get(n.config.apiHost);s&&(i.eid=s);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${$c(i).slice(1)}`}async function _k(n){const e=await hk(n),t=Qi().gapi;return Ye(t,n,"internal-error"),e.open({where:document.body,url:yk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pk,dontclear:!0},i=>new Promise(async(s,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ai(n,"network-request-failed"),d=Qi().setTimeout(()=>{l(c)},fk.get());function m(){Qi().clearTimeout(d),s(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ek=500,Tk=600,bk="_blank",Sk="http://localhost";class OS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ak(n,e,t,i=Ek,s=Tk){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m={...vk,width:i.toString(),height:s.toString(),top:l,left:c},p=ir().toLowerCase();t&&(d=K1(p)?bk:t),G1(p)&&(e=e||Sk,m.scrollbars="yes");const y=Object.entries(m).reduce((S,[w,O])=>`${S}${w}=${O},`,"");if(aV(p)&&d!=="_self")return wk(e||"",d),new OS(null);const v=window.open(e||"",d,y);Ye(v,n,"popup-blocked");try{v.focus()}catch{}return new OS(v)}function wk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="__/auth/handler",Rk="emulator/auth/handler",Ik=encodeURIComponent("fac");async function MS(n,e,t,i,s,l){Ye(n.config.authDomain,n,"auth-domain-config-required"),Ye(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:eu,eventId:s};if(e instanceof q_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",o2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(e instanceof ih){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const m=await n._getAppCheckToken(),p=m?`#${Ik}=${encodeURIComponent(m)}`:"";return`${xk(n)}?${$c(d).slice(1)}${p}`}function xk({config:n}){return n.emulator?U_(n,Rk):`https://${n.authDomain}/${Ck}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="webStorageSupport";class Nk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sC,this._completeRedirectFn=ek,this._overrideRedirectResult=WV}async _openPopup(e,t,i,s){var c;Pa((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await MS(e,t,i,Oy(),s);return Ak(e,l,G_())}async _openRedirect(e,t,i,s){await this._originValidation(e);const l=await MS(e,t,i,Oy(),s);return MV(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(Pa(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await _k(e),i=new nk(e);return t.register("authEvent",s=>(Ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qg,{type:Qg},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[Qg];l!==void 0&&t(!!l),Ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ok(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return J1()||$1()||H_()}}const Dk=Nk;var PS="@firebase/auth",VS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Pk(n){zl(new Eo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ye(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Z1(n)},p=new hV(i,s,l,m);return yV(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),zl(new Eo("auth-internal",e=>{const t=gm(e.getProvider("auth").getImmediate());return(i=>new Ok(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rs(PS,VS,Mk(n)),Rs(PS,VS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=300,kk=KA("authIdTokenMaxAge")||Vk;let kS=null;const Lk=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>kk)return;const s=t==null?void 0:t.token;kS!==s&&(kS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function jk(n=ZA()){const e=n_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=gV(n,{popupRedirectResolver:Dk,persistence:[HV,NV,sC]}),i=KA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=Lk(l.toString());CV(t,c,()=>c(t.currentUser)),wV(t,d=>c(d))}}const s=GA("auth");return s&&_V(t,`http://${s}`),t}function Uk(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}fV({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const l=Ai("internal-error");l.customData=s,t(l)},i.type="text/javascript",i.charset="UTF-8",Uk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Pk("Browser");const zk={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function yl(n){const e=zk[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const Bk={apiKey:yl("VITE_FIREBASE_API_KEY"),authDomain:yl("VITE_FIREBASE_AUTH_DOMAIN"),projectId:yl("VITE_FIREBASE_PROJECT_ID"),storageBucket:yl("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:yl("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:yl("VITE_FIREBASE_APP_ID")},mC=JA(Bk),Ql=jk(mC),Hk=new Sa,mn=A4(mC),pC=P.createContext(void 0),Fk=({children:n})=>{const[e,t]=P.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),i=P.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);P.useEffect(()=>{i(e)},[e,i]);const s=P.useCallback(c=>{t(c),i(c);const d=Ql.currentUser;if(d){const m=Fr(mn,"users",d.uid);P1(m,{preferredTheme:c}).catch(p=>console.error("Error updating preferred theme in Firebase:",p))}},[i]),l=P.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return P.useEffect(()=>Ql.onAuthStateChanged(async d=>{if(d){const m=Fr(mn,"users",d.uid),p=await th(m);if(p.exists()&&p.data().preferredTheme){const y=p.data().preferredTheme;t(y),i(y)}}}),[i]),T.jsx(pC.Provider,{value:{theme:e,toggleTheme:l,setTheme:s},children:n})},qk="_spinner_5jyct_1",Gk="_spinnerContainer_5jyct_19",LS={spinner:qk,spinnerContainer:Gk},su=({container:n=!0})=>{const e=T.jsx("div",{className:LS.spinner});return n?T.jsx("div",{className:LS.spinnerContainer,children:e}):e},$k="_loadingContainer_1n1m5_1",Kk={loadingContainer:$k},Xl=()=>T.jsx("div",{className:Kk.loadingContainer,children:T.jsx(su,{container:!1})}),Yk=()=>{const n=at(i=>i.auth.firebaseUser),e=at(i=>i.auth.userData);return at(i=>i.auth.loading)?T.jsx(Xl,{}):n?e?e.isApproved?T.jsx(As,{to:"/app/dashboard",replace:!0}):T.jsx(As,{to:"/guest",replace:!0}):T.jsx(Xl,{}):T.jsx(As,{to:"/login",replace:!0})};function Gn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Qk=typeof Symbol=="function"&&Symbol.observable||"@@observable",jS=Qk,Xg=()=>Math.random().toString(36).substring(7).split("").join("."),Xk={INIT:`@@redux/INIT${Xg()}`,REPLACE:`@@redux/REPLACE${Xg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Xg()}`},Md=Xk;function K_(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function gC(n,e,t){if(typeof n!="function")throw new Error(Gn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Gn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Gn(1));return t(gC)(n,e)}let i=n,s=e,l=new Map,c=l,d=0,m=!1;function p(){c===l&&(c=new Map,l.forEach((j,G)=>{c.set(G,j)}))}function y(){if(m)throw new Error(Gn(3));return s}function v(j){if(typeof j!="function")throw new Error(Gn(4));if(m)throw new Error(Gn(5));let G=!0;p();const H=d++;return c.set(H,j),function(){if(G){if(m)throw new Error(Gn(6));G=!1,p(),c.delete(H),l=null}}}function S(j){if(!K_(j))throw new Error(Gn(7));if(typeof j.type>"u")throw new Error(Gn(8));if(typeof j.type!="string")throw new Error(Gn(17));if(m)throw new Error(Gn(9));try{m=!0,s=i(s,j)}finally{m=!1}return(l=c).forEach(H=>{H()}),j}function w(j){if(typeof j!="function")throw new Error(Gn(10));i=j,S({type:Md.REPLACE})}function O(){const j=v;return{subscribe(G){if(typeof G!="object"||G===null)throw new Error(Gn(11));function H(){const te=G;te.next&&te.next(y())}return H(),{unsubscribe:j(H)}},[jS](){return this}}}return S({type:Md.INIT}),{dispatch:S,subscribe:v,getState:y,replaceReducer:w,[jS]:O}}function Wk(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Md.INIT})>"u")throw new Error(Gn(12));if(typeof t(void 0,{type:Md.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Gn(13))})}function Jk(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const i=Object.keys(t);let s;try{Wk(t)}catch(l){s=l}return function(c={},d){if(s)throw s;let m=!1;const p={};for(let y=0;y<i.length;y++){const v=i[y],S=t[v],w=c[v],O=S(w,d);if(typeof O>"u")throw d&&d.type,new Error(Gn(14));p[v]=O,m=m||O!==w}return m=m||i.length!==Object.keys(c).length,m?p:c}}function Pd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function Zk(...n){return e=>(t,i)=>{const s=e(t,i);let l=()=>{throw new Error(Gn(15))};const c={getState:s.getState,dispatch:(m,...p)=>l(m,...p)},d=n.map(m=>m(c));return l=Pd(...d)(s.dispatch),{...s,dispatch:l}}}function eL(n){return K_(n)&&"type"in n&&typeof n.type=="string"}var yC=Symbol.for("immer-nothing"),US=Symbol.for("immer-draftable"),fr=Symbol.for("immer-state");function Ti(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Hr=Object,Wl=Hr.getPrototypeOf,Vd="constructor",vm="prototype",Vy="configurable",kd="enumerable",td="writable",kc="value",Va=n=>!!n&&!!n[fr];function Ci(n){var e;return n?_C(n)||Tm(n)||!!n[US]||!!((e=n[Vd])!=null&&e[US])||bm(n)||Sm(n):!1}var tL=Hr[vm][Vd].toString(),zS=new WeakMap;function _C(n){if(!n||!Y_(n))return!1;const e=Wl(n);if(e===null||e===Hr[vm])return!0;const t=Hr.hasOwnProperty.call(e,Vd)&&e[Vd];if(t===Object)return!0;if(!Cl(t))return!1;let i=zS.get(t);return i===void 0&&(i=Function.toString.call(t),zS.set(t,i)),i===tL}function Em(n,e,t=!0){sh(n)===0?(t?Reflect.ownKeys(n):Hr.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((i,s)=>e(s,i,n))}function sh(n){const e=n[fr];return e?e.type_:Tm(n)?1:bm(n)?2:Sm(n)?3:0}var BS=(n,e,t=sh(n))=>t===2?n.has(e):Hr[vm].hasOwnProperty.call(n,e),ky=(n,e,t=sh(n))=>t===2?n.get(e):n[e],Ld=(n,e,t,i=sh(n))=>{i===2?n.set(e,t):i===3?n.add(t):n[e]=t};function nL(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var Tm=Array.isArray,bm=n=>n instanceof Map,Sm=n=>n instanceof Set,Y_=n=>typeof n=="object",Cl=n=>typeof n=="function",Wg=n=>typeof n=="boolean";function rL(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var ba=n=>n.copy_||n.base_,Q_=n=>n.modified_?n.copy_:n.base_;function Ly(n,e){if(bm(n))return new Map(n);if(Sm(n))return new Set(n);if(Tm(n))return Array[vm].slice.call(n);const t=_C(n);if(e===!0||e==="class_only"&&!t){const i=Hr.getOwnPropertyDescriptors(n);delete i[fr];let s=Reflect.ownKeys(i);for(let l=0;l<s.length;l++){const c=s[l],d=i[c];d[td]===!1&&(d[td]=!0,d[Vy]=!0),(d.get||d.set)&&(i[c]={[Vy]:!0,[td]:!0,[kd]:d[kd],[kc]:n[c]})}return Hr.create(Wl(n),i)}else{const i=Wl(n);if(i!==null&&t)return{...n};const s=Hr.create(i);return Hr.assign(s,n)}}function X_(n,e=!1){return Am(n)||Va(n)||!Ci(n)||(sh(n)>1&&Hr.defineProperties(n,{set:kf,add:kf,clear:kf,delete:kf}),Hr.freeze(n),e&&Em(n,(t,i)=>{X_(i,!0)},!1)),n}function iL(){Ti(2)}var kf={[kc]:iL};function Am(n){return n===null||!Y_(n)?!0:Hr.isFrozen(n)}var jd="MapSet",jy="Patches",HS="ArrayMethods",vC={};function Co(n){const e=vC[n];return e||Ti(0,n),e}var FS=n=>!!vC[n],Lc,EC=()=>Lc,aL=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:FS(jd)?Co(jd):void 0,arrayMethodsPlugin_:FS(HS)?Co(HS):void 0});function qS(n,e){e&&(n.patchPlugin_=Co(jy),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function Uy(n){zy(n),n.drafts_.forEach(sL),n.drafts_=null}function zy(n){n===Lc&&(Lc=n.parent_)}var GS=n=>Lc=aL(Lc,n);function sL(n){const e=n[fr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function $S(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[fr].modified_&&(Uy(e),Ti(4)),Ci(n)&&(n=KS(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[fr].base_,n,e)}else n=KS(e,t);return oL(e,n,!0),Uy(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==yC?n:void 0}function KS(n,e){if(Am(e))return e;const t=e[fr];if(!t)return Ud(e,n.handledSet_,n);if(!wm(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:i}=t;if(i)for(;i.length>0;)i.pop()(n);SC(t,n)}return t.copy_}function oL(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&X_(e,t)}function TC(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var wm=(n,e)=>n.scope_===e,lL=[];function bC(n,e,t,i){const s=ba(n),l=n.type_;if(i!==void 0&&ky(s,i,l)===e){Ld(s,i,t,l);return}if(!n.draftLocations_){const d=n.draftLocations_=new Map;Em(s,(m,p)=>{if(Va(p)){const y=d.get(p)||[];y.push(m),d.set(p,y)}})}const c=n.draftLocations_.get(e)??lL;for(const d of c)Ld(s,d,t,l)}function uL(n,e,t){n.callbacks_.push(function(s){var d;const l=e;if(!l||!wm(l,s))return;(d=s.mapSetPlugin_)==null||d.fixSetContents(l);const c=Q_(l);bC(n,l.draft_??l,c,t),SC(l,s)})}function SC(n,e){var i;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((i=n.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const l=s.getPath(n);l&&s.generatePatches_(n,l,e)}TC(n)}}function cL(n,e,t){const{scope_:i}=n;if(Va(t)){const s=t[fr];wm(s,i)&&s.callbacks_.push(function(){nd(n);const c=Q_(s);bC(n,t,c,e)})}else Ci(t)&&n.callbacks_.push(function(){const l=ba(n);n.type_===3?l.has(t)&&Ud(t,i.handledSet_,i):ky(l,e,n.type_)===t&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&Ud(ky(n.copy_,e,n.type_),i.handledSet_,i)})}function Ud(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Va(n)||e.has(n)||!Ci(n)||Am(n)||(e.add(n),Em(n,(i,s)=>{if(Va(s)){const l=s[fr];if(wm(l,t)){const c=Q_(l);Ld(n,i,c,n.type_),TC(l)}}else Ci(s)&&Ud(s,e,t)})),n}function hL(n,e){const t=Tm(n),i={type_:t?1:0,scope_:e?e.scope_:EC(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=i,l=zd;t&&(s=[i],l=jc);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return i.draft_=d,i.revoke_=c,[d,i]}var zd={get(n,e){if(e===fr)return n;let t=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=ba(n);if(!BS(s,e,n.type_))return fL(n,s,e);const l=s[e];if(n.finalized_||!Ci(l)||i&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&rL(e))return l;if(l===Jg(n.base_,e)){nd(n);const c=n.type_===1?+e:e,d=Hy(n.scope_,l,n,c);return n.copy_[c]=d}return l},has(n,e){return e in ba(n)},ownKeys(n){return Reflect.ownKeys(ba(n))},set(n,e,t){const i=AC(ba(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const s=Jg(ba(n),e),l=s==null?void 0:s[fr];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(nL(t,s)&&(t!==void 0||BS(n.base_,e,n.type_)))return!0;nd(n),By(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),cL(n,e,t)),!0},deleteProperty(n,e){return nd(n),Jg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),By(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=ba(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{[td]:!0,[Vy]:n.type_!==1||e!=="length",[kd]:i[kd],[kc]:t[e]}},defineProperty(){Ti(11)},getPrototypeOf(n){return Wl(n.base_)},setPrototypeOf(){Ti(12)}},jc={};for(let n in zd){let e=zd[n];jc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}jc.deleteProperty=function(n,e){return jc.set.call(this,n,e,void 0)};jc.set=function(n,e,t){return zd.set.call(this,n[0],e,t,n[0])};function Jg(n,e){const t=n[fr];return(t?ba(t):n)[e]}function fL(n,e,t){var s;const i=AC(e,t);return i?kc in i?i[kc]:(s=i.get)==null?void 0:s.call(n.draft_):void 0}function AC(n,e){if(!(e in n))return;let t=Wl(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Wl(t)}}function By(n){n.modified_||(n.modified_=!0,n.parent_&&By(n.parent_))}function nd(n){n.copy_||(n.assigned_=new Map,n.copy_=Ly(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var dL=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,i)=>{if(Cl(e)&&!Cl(t)){const l=t;t=e;const c=this;return function(m=l,...p){return c.produce(m,y=>t.call(this,y,...p))}}Cl(t)||Ti(6),i!==void 0&&!Cl(i)&&Ti(7);let s;if(Ci(e)){const l=GS(this),c=Hy(l,e,void 0);let d=!0;try{s=t(c),d=!1}finally{d?Uy(l):zy(l)}return qS(l,i),$S(s,l)}else if(!e||!Y_(e)){if(s=t(e),s===void 0&&(s=e),s===yC&&(s=void 0),this.autoFreeze_&&X_(s,!0),i){const l=[],c=[];Co(jy).generateReplacementPatches_(e,s,{patches_:l,inversePatches_:c}),i(l,c)}return s}else Ti(1,e)},this.produceWithPatches=(e,t)=>{if(Cl(e))return(c,...d)=>this.produceWithPatches(c,m=>e(m,...d));let i,s;return[this.produce(e,t,(c,d)=>{i=c,s=d}),i,s]},Wg(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),Wg(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),Wg(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Ci(n)||Ti(8),Va(n)&&(n=mL(n));const e=GS(this),t=Hy(e,n,void 0);return t[fr].isManual_=!0,zy(e),t}finishDraft(n,e){const t=n&&n[fr];(!t||!t.isManual_)&&Ti(9);const{scope_:i}=t;return qS(i,e),$S(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const i=Co(jy).applyPatches_;return Va(n)?i(n,e):this.produce(n,s=>i(s,e))}};function Hy(n,e,t,i){const[s,l]=bm(e)?Co(jd).proxyMap_(e,t):Sm(e)?Co(jd).proxySet_(e,t):hL(e,t);return((t==null?void 0:t.scope_)??EC()).drafts_.push(s),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=i,t&&i!==void 0?uL(t,l,i):l.callbacks_.push(function(m){var y;(y=m.mapSetPlugin_)==null||y.fixSetContents(l);const{patchPlugin_:p}=m;l.modified_&&p&&p.generatePatches_(l,[],m)}),s}function mL(n){return Va(n)||Ti(10,n),wC(n)}function wC(n){if(!Ci(n)||Am(n))return n;const e=n[fr];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Ly(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=Ly(n,!0);return Em(t,(s,l)=>{Ld(t,s,wC(l))},i),e&&(e.finalized_=!1),t}var pL=new dL,CC=pL.produce;function RC(n){return({dispatch:t,getState:i})=>s=>l=>typeof l=="function"?l(t,i,n):s(l)}var gL=RC(),yL=RC,_L=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Pd:Pd.apply(null,arguments)},vL=n=>n&&typeof n.match=="function";function Tc(n,e){function t(...i){if(e){let s=e(...i);if(!s)throw new Error(Ia(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>eL(i)&&i.type===n,t}var IC=class dc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,dc.prototype)}static get[Symbol.species](){return dc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new dc(...e[0].concat(this)):new dc(...e.concat(this))}};function YS(n){return Ci(n)?CC(n,()=>{}):n}function Lf(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function EL(n){return typeof n=="boolean"}var TL=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=e??{};let c=new IC;return t&&(EL(t)?c.push(gL):c.push(yL(t.extraArgument))),c},bL="RTK_autoBatch",QS=n=>e=>{setTimeout(e,n)},SL=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let s=!0,l=!1,c=!1;const d=new Set,m=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:QS(10):n.type==="callback"?n.queueNotification:QS(n.timeout),p=()=>{c=!1,l&&(l=!1,d.forEach(y=>y()))};return Object.assign({},i,{subscribe(y){const v=()=>s&&y(),S=i.subscribe(v);return d.add(y),()=>{S(),d.delete(y)}},dispatch(y){var v;try{return s=!((v=y==null?void 0:y.meta)!=null&&v[bL]),l=!s,l&&(c||(c=!0,m(p))),i.dispatch(y)}finally{s=!0}}})},AL=n=>function(t){const{autoBatch:i=!0}=t??{};let s=new IC(n);return i&&s.push(SL(typeof i=="object"?i:void 0)),s};function wL(n){const e=TL(),{reducer:t=void 0,middleware:i,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(K_(t))d=Jk(t);else throw new Error(Ia(1));let m;typeof i=="function"?m=i(e):m=e();let p=Pd;s&&(p=_L({trace:!1,...typeof s=="object"&&s}));const y=Zk(...m),v=AL(y);let S=typeof c=="function"?c(v):v();const w=p(...S);return gC(d,l,w)}function xC(n){const e={},t=[];let i;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(Ia(28));if(d in e)throw new Error(Ia(29));return e[d]=c,s},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return t.push({matcher:l,reducer:c}),s},addDefaultCase(l){return i=l,s}};return n(s),[e,t,i]}function CL(n){return typeof n=="function"}function RL(n,e){let[t,i,s]=xC(e),l;if(CL(n))l=()=>YS(n());else{const d=YS(n);l=()=>d}function c(d=l(),m){let p=[t[m.type],...i.filter(({matcher:y})=>y(m)).map(({reducer:y})=>y)];return p.filter(y=>!!y).length===0&&(p=[s]),p.reduce((y,v)=>{if(v)if(Va(y)){const w=v(y,m);return w===void 0?y:w}else{if(Ci(y))return CC(y,S=>v(S,m));{const S=v(y,m);if(S===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return y},d)}return c.getInitialState=l,c}var IL=(n,e)=>vL(n)?n.match(e):n(e);function xL(...n){return e=>n.some(t=>IL(t,e))}var NL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",DL=(n=21)=>{let e="",t=n;for(;t--;)e+=NL[Math.random()*64|0];return e},OL=["name","message","stack","code"],Zg=class{constructor(n,e){Eg(this,"_type");this.payload=n,this.meta=e}},XS=class{constructor(n,e){Eg(this,"_type");this.payload=n,this.meta=e}},ML=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of OL)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},WS="External signal was aborted",$r=(()=>{function n(e,t,i){const s=Tc(e+"/fulfilled",(m,p,y,v)=>({payload:m,meta:{...v||{},arg:y,requestId:p,requestStatus:"fulfilled"}})),l=Tc(e+"/pending",(m,p,y)=>({payload:void 0,meta:{...y||{},arg:p,requestId:m,requestStatus:"pending"}})),c=Tc(e+"/rejected",(m,p,y,v,S)=>({payload:v,error:(i&&i.serializeError||ML)(m||"Rejected"),meta:{...S||{},arg:y,requestId:p,rejectedWithValue:!!v,requestStatus:"rejected",aborted:(m==null?void 0:m.name)==="AbortError",condition:(m==null?void 0:m.name)==="ConditionError"}}));function d(m,{signal:p}={}){return(y,v,S)=>{const w=i!=null&&i.idGenerator?i.idGenerator(m):DL(),O=new AbortController;let z,j;function G(K){j=K,O.abort()}p&&(p.aborted?G(WS):p.addEventListener("abort",()=>G(WS),{once:!0}));const H=(async function(){var se,ee;let K;try{let A=(se=i==null?void 0:i.condition)==null?void 0:se.call(i,m,{getState:v,extra:S});if(VL(A)&&(A=await A),A===!1||O.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const I=new Promise((R,N)=>{z=()=>{N({name:"AbortError",message:j||"Aborted"})},O.signal.addEventListener("abort",z,{once:!0})});y(l(w,m,(ee=i==null?void 0:i.getPendingMeta)==null?void 0:ee.call(i,{requestId:w,arg:m},{getState:v,extra:S}))),K=await Promise.race([I,Promise.resolve(t(m,{dispatch:y,getState:v,extra:S,requestId:w,signal:O.signal,abort:G,rejectWithValue:(R,N)=>new Zg(R,N),fulfillWithValue:(R,N)=>new XS(R,N)})).then(R=>{if(R instanceof Zg)throw R;return R instanceof XS?s(R.payload,w,m,R.meta):s(R,w,m)})])}catch(A){K=A instanceof Zg?c(null,w,m,A.payload,A.meta):c(A,w,m)}finally{z&&O.signal.removeEventListener("abort",z)}return i&&!i.dispatchConditionRejection&&c.match(K)&&K.meta.condition||y(K),K})();return Object.assign(H,{abort:G,requestId:w,arg:m,unwrap(){return H.then(PL)}})}}return Object.assign(d,{pending:l,rejected:c,fulfilled:s,settled:xL(c,s),typePrefix:e})}return n.withTypes=()=>n,n})();function PL(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function VL(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var kL=Symbol.for("rtk-slice-createasyncthunk");function LL(n,e){return`${n}/${e}`}function jL({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[kL];return function(s){const{name:l,reducerPath:c=l}=s;if(!l)throw new Error(Ia(11));const d=(typeof s.reducers=="function"?s.reducers(zL()):s.reducers)||{},m=Object.keys(d),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(te,se){const ee=typeof te=="string"?te:te.type;if(!ee)throw new Error(Ia(12));if(ee in p.sliceCaseReducersByType)throw new Error(Ia(13));return p.sliceCaseReducersByType[ee]=se,y},addMatcher(te,se){return p.sliceMatchers.push({matcher:te,reducer:se}),y},exposeAction(te,se){return p.actionCreators[te]=se,y},exposeCaseReducer(te,se){return p.sliceCaseReducersByName[te]=se,y}};m.forEach(te=>{const se=d[te],ee={reducerName:te,type:LL(l,te),createNotation:typeof s.reducers=="function"};HL(se)?qL(ee,se,y,e):BL(ee,se,y)});function v(){const[te={},se=[],ee=void 0]=typeof s.extraReducers=="function"?xC(s.extraReducers):[s.extraReducers],A={...te,...p.sliceCaseReducersByType};return RL(s.initialState,I=>{for(let R in A)I.addCase(R,A[R]);for(let R of p.sliceMatchers)I.addMatcher(R.matcher,R.reducer);for(let R of se)I.addMatcher(R.matcher,R.reducer);ee&&I.addDefaultCase(ee)})}const S=te=>te,w=new Map,O=new WeakMap;let z;function j(te,se){return z||(z=v()),z(te,se)}function G(){return z||(z=v()),z.getInitialState()}function H(te,se=!1){function ee(I){let R=I[te];return typeof R>"u"&&se&&(R=Lf(O,ee,G)),R}function A(I=S){const R=Lf(w,se,()=>new WeakMap);return Lf(R,I,()=>{const N={};for(const[M,V]of Object.entries(s.selectors??{}))N[M]=UL(V,I,()=>Lf(O,I,G),se);return N})}return{reducerPath:te,getSelectors:A,get selectors(){return A(ee)},selectSlice:ee}}const K={name:l,reducer:j,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:G,...H(c),injectInto(te,{reducerPath:se,...ee}={}){const A=se??c;return te.inject({reducerPath:A,reducer:j},ee),{...K,...H(A,!0)}}};return K}}function UL(n,e,t,i){function s(l,...c){let d=e(l);return typeof d>"u"&&i&&(d=t()),n(d,...c)}return s.unwrapped=n,s}var Oo=jL();function zL(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function BL({type:n,reducerName:e,createNotation:t},i,s){let l,c;if("reducer"in i){if(t&&!FL(i))throw new Error(Ia(17));l=i.reducer,c=i.prepare}else l=i;s.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?Tc(n,c):Tc(n))}function HL(n){return n._reducerDefinitionType==="asyncThunk"}function FL(n){return n._reducerDefinitionType==="reducerWithPrepare"}function qL({type:n,reducerName:e},t,i,s){if(!s)throw new Error(Ia(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:m,settled:p,options:y}=t,v=s(n,l,y);i.exposeAction(e,v),c&&i.addCase(v.fulfilled,c),d&&i.addCase(v.pending,d),m&&i.addCase(v.rejected,m),p&&i.addMatcher(v.settled,p),i.exposeCaseReducer(e,{fulfilled:c||jf,pending:d||jf,rejected:m||jf,settled:p||jf})}function jf(){}function Ia(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const GL={positions:[],loading:!1,error:null,fetched:!1,isDirty:!1},xa=$r("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=Fr(mn,"metadata","positions"),i=await th(t);if(i.exists()){const s=i.data();return Array.isArray(s.list)?s.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),W_=$r("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=Fr(mn,"metadata","positions");return await mm(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),NC=Oo({name:"positions",initialState:GL,reducers:{updatePositionCustomLabels:(n,e)=>{const{positionName:t,labels:i}=e.payload,s=n.positions.find(l=>l.name===t);s&&(s.customLabels=i,n.isDirty=!0)},resetPositionsDirty:n=>{n.isDirty=!1}},extraReducers:n=>{n.addCase(xa.pending,e=>{e.loading=!0,e.error=null}).addCase(xa.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(xa.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(W_.fulfilled,(e,t)=>{e.positions=t.payload,e.isDirty=!1})}}),{updatePositionCustomLabels:Uf,resetPositionsDirty:$L}=NC.actions,KL=NC.reducer,YL={teams:[],loading:!1,error:null,fetched:!1},_o=$r("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=Fr(mn,"metadata","teams"),i=await th(t);if(i.exists()){const s=i.data();return Array.isArray(s.list)?s.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),rd=$r("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=Fr(mn,"metadata","teams");return await mm(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),DC=Oo({name:"teams",initialState:YL,reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(_o.pending,e=>{e.loading=!0,e.error=null}).addCase(_o.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(_o.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(rd.pending,e=>{e.error=null}).addCase(rd.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(rd.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:A5}=DC.actions,QL=DC.reducer,XL=()=>{const n=Gr(),{firebaseUser:e,userData:t,loading:i}=at(m=>m.auth),{fetched:s,loading:l}=at(m=>m.teams),{fetched:c,loading:d}=at(m=>m.positions);return P.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!s&&!l&&n(_o()),!c&&!d&&n(xa()))},[n,e,t,s,l,c,d]),i||t!=null&&t.isApproved&&(!s||!c)?T.jsx(Xl,{}):e?t?t.isApproved?T.jsx(VA,{}):T.jsx(As,{to:"/guest",replace:!0}):T.jsx(Xl,{}):T.jsx(As,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=n=>{const e=JL(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:l,iconNode:c,...d},m)=>P.createElement("svg",{ref:m,...ZL,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:OC("lucide",s),...!l&&!ej(d)&&{"aria-hidden":"true"},...d},[...c.map(([p,y])=>P.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=(n,e)=>{const t=P.forwardRef(({className:i,...s},l)=>P.createElement(tj,{ref:l,iconNode:e,className:OC(`lucide-${WL(JS(n))}`,`lucide-${n}`,i),...s}));return t.displayName=JS(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rj=dr("arrow-left",nj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],aj=dr("arrow-right",ij);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],MC=dr("chevron-up",sj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],lj=dr("circle-check",oj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],cj=dr("copy",uj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],PC=dr("corner-down-right",hj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],dj=dr("layout-grid",fj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],pj=dr("moon",mj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],yj=dr("panel-left-close",gj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],vj=dr("panel-left-open",_j);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oh=dr("plus",Ej);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],bj=dr("sun",Tj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],VC=dr("trash-2",Sj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],wj=dr("users",Aj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],J_=dr("x",Cj),Rj=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},Ij={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:Rj(),lastVisitedPaths:{},rosterAllViewMode:"user"},kC=Oo({name:"ui",initialState:Ij,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setRosterAllViewMode:(n,e)=>{n.rosterAllViewMode=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:i}=e.payload;n.lastVisitedPaths[t]=i},toggleTeamExpansion:(n,e)=>{const t=e.payload,i=n.expandedTeams.indexOf(t);i>=0?n.expandedTeams.splice(i,1):n.expandedTeams.push(t)},expandTeam:(n,e)=>{const t=e.payload;n.expandedTeams.includes(t)||n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:i,userEmail:s}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][i]||(n.hiddenUsers[t][i]=[]);const l=n.hiddenUsers[t][i],c=l.indexOf(s);c>=0?l.splice(c,1):l.push(s),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))}}}),{setMobileSidebarOpen:Rl,setDesktopSidebarExpanded:xj,setRosterAllViewMode:ZS,setLastVisitedPath:Nj,toggleTeamExpansion:Dj,expandTeam:Oj,toggleUserVisibility:Mj}=kC.actions,Pj=kC.reducer,Vj=()=>{const n=P.useContext(pC);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},kj="_themeToggleButton_15jyj_1",Lj={themeToggleButton:kj},Cm=({showText:n,className:e,iconClassName:t})=>{const{theme:i,toggleTheme:s}=Vj();return T.jsxs("button",{className:`${Lj.themeToggleButton} ${e||""}`,onClick:s,"aria-label":"Toggle theme",children:[T.jsx("span",{className:t||"",children:i==="dark"?T.jsx(bj,{size:20}):T.jsx(pj,{size:20})}),n&&T.jsx("span",{children:"Toggle theme"})]})},jj=n=>{P.useEffect(()=>{if(!n||!n.email)return;const e=Fr(mn,"presence",n.email),t=async()=>{await mm(e,{uid:n.email,name:n.name||"Anonymous",email:n.email,teams:n.teams||[],lastSeen:O4()})};t();const i=setInterval(()=>{t()},3e4);return()=>{clearInterval(i),L4(e)}},[n])},Uj=(n,e)=>{const[t,i]=P.useState([]);return P.useEffect(()=>{const l=Date.now()-12e4,c=n?Ao(So(mn,"presence"),dm("teams","array-contains",n)):Ao(So(mn,"presence")),d=V1(c,m=>{const p=[];m.forEach(y=>{const v=y.data();let S;v.lastSeen?S=v.lastSeen.toDate():S=new Date,S.getTime()>l&&p.push({uid:v.uid,name:v.name,email:v.email,lastSeen:v.lastSeen})}),i(p.sort((y,v)=>y.email===e?-1:v.email===e?1:y.name.localeCompare(v.name)))});return()=>d()},[n,e]),t},zj="_onlineUsersContainer_et0ww_1",Bj="_sidebarVariant_et0ww_16",Hj="_sidebarExpanded_et0ww_21",Fj="_onlineLabel_et0ww_25",qj="_avatarStack_et0ww_37",Gj="_avatarCircle_et0ww_43",$j="_moreCircle_et0ww_65",Kj="_userDropdown_et0ww_71",Yj="_dropdownDown_et0ww_82",Qj="_dropdownUp_et0ww_87",Xj="_dropdownTitle_et0ww_92",Wj="_userListScroll_et0ww_102",Jj="_userItem_et0ww_107",Zj="_userNameText_et0ww_121",e3="_userAvatarSmall_et0ww_128",t3="_pulse_et0ww_141",qn={onlineUsersContainer:zj,sidebarVariant:Bj,sidebarExpanded:Hj,onlineLabel:Fj,avatarStack:qj,avatarCircle:Gj,moreCircle:$j,userDropdown:Kj,dropdownDown:Yj,dropdownUp:Qj,dropdownTitle:Xj,userListScroll:Wj,userItem:Jj,userNameText:Zj,userAvatarSmall:e3,pulse:t3},LC=({teamName:n,currentUser:e,variant:t="top-bar",showText:i=!1})=>{const s=Uj(n,e==null?void 0:e.email),[l,c]=P.useState(!1),d=P.useRef(null);if(P.useEffect(()=>{const w=O=>{d.current&&!d.current.contains(O.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),s.length===0)return null;const m=s.slice(0,3),p=s.length-3,y=w=>w.split(" ").map(O=>O[0]).join("").substring(0,2),v=[qn.onlineUsersContainer,t==="sidebar"?qn.sidebarVariant:"",i?qn.sidebarExpanded:""].filter(Boolean).join(" "),S=[qn.userDropdown,t==="sidebar"?qn.dropdownUp:qn.dropdownDown].filter(Boolean).join(" ");return T.jsxs("div",{className:v,ref:d,onClick:()=>c(!l),children:[i&&T.jsx("span",{className:qn.onlineLabel,children:"Online"}),T.jsxs("div",{className:qn.avatarStack,children:[p>0&&T.jsxs("div",{className:`${qn.avatarCircle} ${qn.moreCircle}`,children:["+",p]}),[...m].reverse().map(w=>T.jsx("div",{className:qn.avatarCircle,title:w.name,children:y(w.name)},w.uid))]}),l&&T.jsxs("div",{className:S,children:[T.jsxs("div",{className:qn.dropdownTitle,children:["Online Now (",s.length,")"]}),T.jsx("div",{className:qn.userListScroll,children:s.map(w=>T.jsxs("div",{className:qn.userItem,children:[T.jsx("div",{className:qn.userAvatarSmall,children:y(w.name)}),T.jsxs("span",{className:qn.userNameText,children:[w.name," ",w.email===(e==null?void 0:e.email)&&"(You)"]}),T.jsx("div",{className:qn.pulse})]},w.uid))})]})]})},n3="_mobileHeader_lcvro_1",r3="_mobileHeaderPill_lcvro_18",i3="_mobileHeaderPillDisabled_lcvro_30",a3="_mobileHeaderPillActive_lcvro_34",s3="_mobileHeaderText_lcvro_45",o3="_mobileHeaderChevron_lcvro_53",l3="_rotate_lcvro_58",u3="_mobileHeaderActions_lcvro_62",c3="_mobileThemeToggle_lcvro_68",va={mobileHeader:n3,mobileHeaderPill:r3,mobileHeaderPillDisabled:i3,mobileHeaderPillActive:a3,mobileHeaderText:s3,mobileHeaderChevron:o3,rotate:l3,mobileHeaderActions:u3,mobileThemeToggle:c3},h3=({title:n,hasSideNav:e=!0})=>{const t=Gr(),{teamName:i}=Fc(),{isMobileSidebarOpen:s}=at(d=>d.ui),{userData:l}=at(d=>d.auth),c=()=>{e&&t(Rl(!s))};return T.jsxs("header",{className:va.mobileHeader,children:[T.jsxs("div",{className:`${va.mobileHeaderPill} ${s?va.mobileHeaderPillActive:""} ${e?"":va.mobileHeaderPillDisabled}`,onClick:c,children:[T.jsx("span",{className:va.mobileHeaderText,children:n}),e&&T.jsx(MC,{className:`${va.mobileHeaderChevron} ${s?va.rotate:""}`})]}),T.jsxs("div",{className:va.mobileHeaderActions,children:[T.jsx(Cm,{className:va.mobileThemeToggle}),T.jsx(LC,{teamName:i,currentUser:l})]})]})};var rn=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(rn||{}),xl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(xl||{});const Z_=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],eA=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],f3="_bottomNavContainer_1c0tq_1",d3="_bottomNav_1c0tq_1",m3="_bottomNavBtn_1c0tq_18",p3="_bottomNavBtnActive_1c0tq_42",zf={bottomNavContainer:f3,bottomNav:d3,bottomNavBtn:m3,bottomNavBtnActive:p3},g3=()=>{const n=Io(),e=hi(),{lastVisitedPaths:t}=at(l=>l.ui),i=e.pathname.includes("/settings")?rn.SETTINGS:e.pathname.includes("/dashboard")?rn.DASHBOARD:rn.ROSTER,s=l=>{if(i===l){l===rn.DASHBOARD&&n("/app/dashboard");return}const c=t[l];n(c||`/app/${l}`)};return T.jsx("nav",{className:zf.bottomNavContainer,children:T.jsx("div",{className:zf.bottomNav,children:Z_.map(l=>T.jsxs("button",{className:`${zf.bottomNavBtn} ${i===l.id?zf.bottomNavBtnActive:""}`,onClick:()=>s(l.id),children:[T.jsx("span",{children:l.icon}),T.jsx("span",{children:l.label})]},l.id))})})},y3="_sideNav_1youa_1",_3="_menuOpen_1youa_20",v3="_sidebarContent_1youa_26",E3="_tabletSidebarHeader_1youa_34",T3="_sideMenuList_1youa_38",b3="_sidenavMenuSubheading_1youa_43",S3="_sideNavItem_1youa_67",A3="_sideNavItemActive_1youa_95",w3="_sideEmoji_1youa_102",C3="_loading_1youa_109",R3="_sidebarToggleButton_1youa_116",I3="_sidebarFooter_1youa_117",x3="_sidebarCollapsed_1youa_173",N3="_adminOnlySectionWrapper_1youa_209",D3="_sidebarThemeToggle_1youa_239",O3="_sidebarThemeIcon_1youa_248",pt={sideNav:y3,menuOpen:_3,sidebarContent:v3,tabletSidebarHeader:E3,sideMenuList:T3,sidenavMenuSubheading:b3,sideNavItem:S3,sideNavItemActive:A3,sideEmoji:w3,loading:C3,sidebarToggleButton:R3,sidebarFooter:I3,sidebarCollapsed:x3,adminOnlySectionWrapper:N3,sidebarThemeToggle:D3,sidebarThemeIcon:O3},M3=()=>{var se;const n=Io(),e=hi(),{teamName:t,positionName:i,section:s}=Fc(),l=Gr(),{userData:c}=at(ee=>ee.auth),{isDesktopSidebarExpanded:d,isMobileSidebarOpen:m,expandedTeams:p}=at(ee=>ee.ui),{teams:y,fetched:v,loading:S}=at(ee=>ee.teams),{fetched:w}=at(ee=>ee.positions),O=e.pathname.includes("/settings")?rn.SETTINGS:e.pathname.includes("/dashboard")?rn.DASHBOARD:rn.ROSTER,z=i||s,j=P.useRef(void 0);P.useEffect(()=>{t&&O===rn.ROSTER&&t!==j.current&&l(Oj(t)),j.current=t},[t,O,l]),P.useEffect(()=>{v||l(_o()),w||l(xa())},[l,v,w]);const G=P.useCallback(ee=>{n(ee)},[n]),H=ee=>{l(Dj(ee))},K=()=>{const ee=Z_.find(I=>I.id===O),A=ee?ee.label:"GIG ROSTER";return t&&z?`${t}  ${z}`:t||(z?`${A}  ${z}`:A)},te=[pt.sideNav,m?pt.menuOpen:"",d?"":pt.sidebarCollapsed].filter(Boolean).join(" ");return T.jsxs("aside",{className:te,children:[T.jsxs("div",{className:pt.sidebarContent,children:[T.jsxs("div",{className:pt.tabletSidebarHeader,children:[d&&T.jsx("h3",{children:K()}),T.jsx("button",{className:pt.sidebarToggleButton,onClick:()=>l(xj(!d)),"aria-label":d?"Collapse sidebar":"Expand sidebar",children:d?T.jsx(yj,{size:20}):T.jsx(vj,{size:20})})]}),T.jsxs("nav",{className:pt.sideMenuList,children:[O===rn.ROSTER&&S&&T.jsx("div",{className:`${pt.sideNavItem} ${pt.loading}`,children:"Loading teams..."}),O===rn.ROSTER?(se=c==null?void 0:c.teams)==null?void 0:se.map(ee=>{var N,M;const A=y.find(V=>V.name===ee);if(!A)return null;const I=c.teams.length===1,R=I||p.includes(A.name);return T.jsxs("div",{children:[!I&&T.jsxs("div",{className:`${pt.sidenavMenuSubheading} ${pt.sidenavMenuSubheadingClickable}`,style:{cursor:"pointer"},onClick:()=>{H(A.name),G(`/app/roster/${A.name}/All`)},children:[T.jsxs("div",{children:[A.emoji," ",d&&A.name]}),T.jsx("span",{className:pt.expandIcon,children:R?"":""})]}),R&&T.jsxs("div",{className:pt.sideNavSubItems,children:[T.jsxs("button",{className:`${pt.sideNavItem} ${pt.sideNavItemSub} ${z==="All"&&t===A.name?pt.sideNavItemActive:""}`,onClick:()=>{G(`/app/roster/${A.name}/All`),l(Rl(!1))},style:{borderLeft:z==="All"&&t===A.name?"4px solid var(--color-primary)":"4px solid transparent",backgroundColor:z==="All"&&t===A.name?"var(--background-toggle-on-transparent)":"transparent",color:z==="All"&&t===A.name?"var(--color-primary)":""},children:[T.jsx("span",{className:pt.sideEmoji,children:""})," ",d&&"All"]}),(M=(N=A.positions)==null?void 0:N.filter(V=>!V.parentId))==null?void 0:M.map(V=>{const D=z===V.name&&t===A.name;return T.jsxs("button",{className:`${pt.sideNavItem} ${pt.sideNavItemSub} ${D?pt.sideNavItemActive:""}`,onClick:()=>{G(`/app/roster/${A.name}/${V.name}`),l(Rl(!1))},style:{borderLeft:D?`4px solid ${V.colour}`:"4px solid transparent",backgroundColor:D?`${V.colour}15`:"transparent",color:D?V.colour:""},children:[T.jsx("span",{className:pt.sideEmoji,children:V.emoji})," ",d&&V.name]},V.name)}),A.allowAbsence!==!1&&T.jsxs("button",{className:`${pt.sideNavItem} ${pt.sideNavItemSub} ${z==="Absence"&&t===A.name?pt.sideNavItemActive:""}`,onClick:()=>{G(`/app/roster/${A.name}/Absence`),l(Rl(!1))},style:{borderLeft:z==="Absence"&&t===A.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:z==="Absence"&&t===A.name?"var(--background-toggle-off-transparent)":"transparent"},children:[T.jsx("span",{className:pt.sideEmoji,children:""})," ",d&&"Absence"]})]})]},A.name)}):eA.filter(ee=>!ee.adminOnly).map(ee=>T.jsxs("button",{className:`${pt.sideNavItem} ${z===ee.id?pt.sideNavItemActive:""}`,onClick:()=>{G(`/app/settings/${ee.id}`),l(Rl(!1))},children:[T.jsx("span",{className:pt.sideEmoji,children:ee.icon})," ",d&&ee.label]},ee.id))]})]}),(c==null?void 0:c.isAdmin)&&O===rn.SETTINGS&&T.jsxs("div",{className:pt.adminOnlySectionWrapper,children:[T.jsx("div",{className:pt.sidenavMenuSubheading,children:d&&T.jsx("h4",{children:"Admin Only"})}),eA.filter(ee=>ee.adminOnly).map(ee=>T.jsxs("button",{className:`${pt.sideNavItem} ${z===ee.id?pt.sideNavItemActive:""}`,onClick:()=>{G(`/app/settings/${ee.id}`),l(Rl(!1))},children:[T.jsx("span",{className:pt.sideEmoji,children:ee.icon})," ",d&&ee.label]},ee.id))]}),T.jsxs("div",{className:pt.sidebarFooter,children:[T.jsx(Cm,{className:pt.sidebarThemeToggle,iconClassName:pt.sidebarThemeIcon}),T.jsx(LC,{teamName:t,currentUser:c,variant:"sidebar",showText:d})]})]})},P3="_layoutWrapper_ysxiy_1",V3="_innerWrapper_ysxiy_13",k3="_mainContent_ysxiy_21",_l={layoutWrapper:P3,innerWrapper:V3,mainContent:k3},L3=()=>{const n=Gr(),e=Io(),t=hi(),i=Fc(),{userData:s}=at(j=>j.auth);jj(s);const{teams:l}=at(j=>j.teams),{isMobileSidebarOpen:c,isDesktopSidebarExpanded:d,lastVisitedPaths:m}=at(j=>j.ui),p=t.pathname.includes("/settings")?rn.SETTINGS:t.pathname.includes("/dashboard")?rn.DASHBOARD:rn.ROSTER,{teamName:y,positionName:v,section:S}=i,w=v||S||null,O=p!==rn.DASHBOARD;P.useEffect(()=>{const j=p===rn.ROSTER&&!y,G=p===rn.SETTINGS&&!w;if(t.pathname.startsWith("/app/")&&!j&&!G&&p!==rn.DASHBOARD){const H=t.pathname+t.search;n(Nj({tabId:p,path:H}))}},[t.pathname,t.search,p,y,w,n]),P.useEffect(()=>{var K;const j=t.pathname==="/app"||t.pathname==="/app/",G=p===rn.ROSTER&&!y,H=p===rn.SETTINGS&&!w;if(j)e(m[rn.DASHBOARD]||"/app/dashboard",{replace:!0});else if(G){const te=m[rn.ROSTER];if(te)e(te,{replace:!0});else if((K=s==null?void 0:s.teams)!=null&&K[0]&&l.length>0){const se=l.find(ee=>ee.name===s.teams[0]);se&&e(`/app/roster/${se.name}/All`,{replace:!0})}}else if(H){const te=m[rn.SETTINGS];e(te||`/app/settings/${xl.PROFILE}`,{replace:!0})}},[p,y,w,s,l,e,t.pathname,t.search,m]);const z=()=>{const j=Z_.find(H=>H.id===p),G=j?j.label:"GIG ROSTER";return y&&w?`${y}  ${w}`:y||(w?`${G}  ${w}`:G)};return T.jsxs("div",{className:`${_l.layoutWrapper} ${c?_l.menuOpen:""} ${d?_l.sidebarExpanded:_l.sidebarCollapsed}`,children:[O&&T.jsx(M3,{}),T.jsxs("div",{className:_l.innerWrapper,children:[T.jsx(h3,{title:z(),hasSideNav:O}),T.jsx("main",{className:_l.mainContent,children:T.jsx(VA,{})}),T.jsx(g3,{})]})]})},j3="_rosterSaveFooter_1ce1v_1",U3="_saveFooterContent_1ce1v_23",z3="_changesLabel_1ce1v_32",B3="_saveFooterActions_1ce1v_37",H3="_saveBtn_1ce1v_42",F3="_cancelBtn_1ce1v_57",q3="_sidebarCollapsed_1ce1v_77",G3="_noSidebar_1ce1v_81",gs={rosterSaveFooter:j3,saveFooterContent:U3,changesLabel:z3,saveFooterActions:B3,saveBtn:H3,cancelBtn:F3,sidebarCollapsed:q3,noSidebar:G3},ou=({label:n="You have unsaved changes",onSave:e,onCancel:t,isSaving:i,saveText:s="Save",discardText:l="Discard",hasSideNav:c=!0})=>{const{isDesktopSidebarExpanded:d}=at(p=>p.ui),m=[gs.rosterSaveFooter,c?"":gs.noSidebar,!d&&c?gs.sidebarCollapsed:""].filter(Boolean).join(" ");return T.jsx("div",{className:m,children:T.jsxs("div",{className:gs.saveFooterContent,children:[T.jsx("span",{className:gs.changesLabel,children:n}),T.jsxs("div",{className:gs.saveFooterActions,children:[T.jsx("button",{className:gs.cancelBtn,onClick:t,disabled:i,children:l}),T.jsx("button",{className:gs.saveBtn,onClick:e,disabled:i,children:i?"Saving...":s})]})]})})},jC=n=>{const e=[];return Object.entries(n).forEach(([t,i])=>{i.forEach(s=>{e.push(`${t}|${s}`)})}),e},UC=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`},Ll=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),$3={entries:{},dirtyEntries:{},loading:!1,saving:!1,error:null},bc=$r("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Ao(So(mn,"roster")),i=await nh(t),s={};return i.docs.forEach(l=>{const c=l.data(),d=c.updatedAt,m={...c,updatedAt:d&&typeof d=="object"&&"toMillis"in d?d.toMillis():d};s[l.id]={...m,id:l.id}}),s}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),Sc=$r("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=L1(mn),i=Date.now(),s={};return Object.values(n).forEach(l=>{const c=Fr(mn,"roster",l.id),d={...l,updatedAt:i};t.set(c,d),s[l.id]=d}),await t.commit(),s}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),zC=Oo({name:"roster",initialState:$3,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:i,userIdentifier:s,positionGroupNames:l,maxConflict:c}=e.payload,d=n.dirtyEntries[t]||n.entries[t];let m;d?m=JSON.parse(JSON.stringify(d)):m={id:t,date:t,teams:{},absence:{}},m.teams[i]||(m.teams[i]={});const p=m.teams[i][s]||[],y=l.findIndex(O=>p.includes(O)),v=y>=0?l[y]:null;let S=null;v===null?S=l[0]:y<l.length-1?S=l[y+1]:S=null;const w=p.filter(O=>!l.includes(O));if(S)if(w.length<c)w.push(S);else{n.error=`User already has ${c} assignment(s) in this team.`;return}w.length===0?delete m.teams[i][s]:m.teams[i][s]=w,n.dirtyEntries[t]=m},updateLocalEventName(n,e){const{date:t,eventName:i}=e.payload,s=n.dirtyEntries[t]||n.entries[t];let l;s?l=JSON.parse(JSON.stringify(s)):l={id:t,date:t,teams:{},absence:{}},l.eventName=i,n.dirtyEntries[t]=l},resetRosterEdits(n){n.dirtyEntries={},n.error=null},updateLocalAbsence(n,e){var m;const{date:t,userIdentifier:i,reason:s,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let d;c?d=JSON.parse(JSON.stringify(c)):d={id:t,date:t,teams:{},absence:{}},l?d.absence[i]={reason:s??((m=d.absence[i])==null?void 0:m.reason)??""}:delete d.absence[i],n.dirtyEntries[t]=d}},extraReducers:n=>{n.addCase(bc.pending,e=>{e.loading=!0,e.error=null}).addCase(bc.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(bc.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Sc.pending,e=>{e.saving=!0,e.error=null}).addCase(Sc.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(Sc.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:w5,updateLocalAssignment:K3,updateLocalEventName:Y3,resetRosterEdits:BC,updateLocalAbsence:tA}=zC.actions,Q3=zC.reducer,id=(n,e,t)=>{const i=[],s=new Date;s.setHours(0,0,0,0);const l=s.getFullYear(),c=e||l,d=t||l,m={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},p=n.map(w=>m[w]);let y;c===l?y=new Date(s):y=new Date(c,0,1),y.setHours(0,0,0,0);const v=new Date(d,11,31);v.setHours(23,59,59,999);const S=new Date(y);for(;S.getTime()<=v.getTime();)p.includes(S.getDay())&&i.push(new Date(S)),S.setDate(S.getDate()+1);return i.sort((w,O)=>w.getTime()-O.getTime()),i.map(w=>UC(w))},X3=(n,e,t=5)=>{const i=[],s=new Date(e);s.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(m=>l[m]),d=new Date(s);for(;i.length<t;){d.setDate(d.getDate()-1),c.includes(d.getDay())&&i.push(new Date(d));const m=new Date(s);if(m.setFullYear(m.getFullYear()-1),d<m)break}return i.map(m=>UC(m)).sort()},W3={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},ad=$r("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=So(mn,"users"),i=Ao(t,dm("teams","array-contains",n)),s=await nh(i),l=[];return s.forEach(c=>{l.push(c.data())}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),sd=$r("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:i})=>{if(!n||!e)return[];try{const c=i().positions.positions.filter(w=>w.parentId===e),m=[e,...c.map(w=>w.name)].map(w=>`${n}|${w}`),p=So(mn,"users"),y=Ao(p,dm("indexedAssignments","array-contains-any",m)),v=await nh(y),S=[];return v.forEach(w=>{S.push(w.data())}),S.sort((w,O)=>(w.name||"").localeCompare(O.name||""))}catch(s){return console.error("Error fetching users:",s),t("Failed to load users.")}}),od=$r("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=Fr(mn,"metadata","teams"),i=await th(t);if(i.exists()){const s=i.data();return(Array.isArray(s.list)?s.list.map(d=>({...d,preferredDays:d.preferredDays||[],positions:d.positions||[]})):[]).find(d=>d.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),HC=Oo({name:"rosterView",initialState:W3,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=X3(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=id(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,i=id(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...i]}}},extraReducers:n=>{n.addCase(sd.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(sd.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(sd.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(ad.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(ad.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(ad.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(od.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(od.fulfilled,(e,t)=>{var i;e.currentTeamData=t.payload,(i=t.payload)!=null&&i.preferredDays&&(e.rosterDates=id(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(od.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:J3,resetToUpcomingDates:Z3,loadNextYearDates:eU}=HC.actions,tU=HC.reducer,nU="_dashboardContainer_y5fm3_1",rU="_dashboardHeader_y5fm3_10",iU="_dashboardHeaderActions_y5fm3_24",aU="_clearPastBtn_y5fm3_32",sU="_eventNameContainer_y5fm3_48",oU="_dashboardEventNameInput_y5fm3_55",lU="_dashboardEventNameInputHasEvent_y5fm3_79",uU="_carouselOuterWrapper_y5fm3_90",cU="_eventsCarouselTrack_y5fm3_98",hU="_eventCardWrapper_y5fm3_112",fU="_peek_y5fm3_123",dU="_active_y5fm3_129",mU="_eventCardDate_y5fm3_135",pU="_dashboardTodayBadge_y5fm3_147",gU="_teamCardsContainer_y5fm3_158",yU="_teamEventCard_y5fm3_166",_U="_dashboardThemeToggle_y5fm3_174",vU="_teamEventHeader_y5fm3_178",EU="_teamCardEmoji_y5fm3_197",TU="_teamCardName_y5fm3_201",bU="_copyRosterBtn_y5fm3_205",SU="_copyRosterBtnSuccess_y5fm3_226",AU="_teamEventDetails_y5fm3_232",wU="_posAssignmentRow_y5fm3_238",CU="_posEmojiLabel_y5fm3_244",RU="_assignedNames_y5fm3_250",IU="_unassigned_y5fm3_256",xU="_meTag_y5fm3_264",NU="_carouselPagination_y5fm3_286",DU="_dashboardEmpty_y5fm3_295",Dt={dashboardContainer:nU,dashboardHeader:rU,dashboardHeaderActions:iU,clearPastBtn:aU,eventNameContainer:sU,dashboardEventNameInput:oU,dashboardEventNameInputHasEvent:lU,carouselOuterWrapper:uU,eventsCarouselTrack:cU,eventCardWrapper:hU,peek:fU,active:dU,eventCardDate:mU,dashboardTodayBadge:pU,teamCardsContainer:gU,teamEventCard:yU,dashboardThemeToggle:_U,teamEventHeader:vU,teamCardEmoji:EU,teamCardName:TU,copyRosterBtn:bU,copyRosterBtnSuccess:SU,teamEventDetails:AU,posAssignmentRow:wU,posEmojiLabel:CU,assignedNames:RU,unassigned:IU,meTag:xU,carouselPagination:NU,dashboardEmpty:DU},OU=()=>{const n=Gr(),[e,t]=RD(),i=e.get("date"),{userData:s}=at(ae=>ae.auth),{teams:l}=at(ae=>ae.teams),{entries:c,dirtyEntries:d,loading:m,saving:p}=at(ae=>ae.roster),{positions:y}=at(ae=>ae.positions),[v,S]=P.useState([]),[w,O]=P.useState(!1),[z,j]=P.useState(null),[G,H]=P.useState(0),[K,te]=P.useState(0),[se,ee]=P.useState(!1),A=P.useRef(null),I=P.useRef(!1),R=Object.keys(d).length>0;P.useEffect(()=>{n(bc())},[n]),P.useEffect(()=>{const ae=A.current;if(!ae)return;const _e=new ResizeObserver(Te=>{for(const Ne of Te){const je=Ne.contentRect.width;je>0&&te(je)}});return _e.observe(ae),()=>_e.disconnect()},[m,w]);const N=P.useMemo(()=>{const ae=Ll();if(!(s!=null&&s.teams)||l.length===0)return[];const _e=l.filter(je=>s.teams.includes(je.name)),Te=new Set;_e.forEach(je=>{id(je.preferredDays).forEach(Et=>Te.add(Et))});const Ne=Array.from(Te).sort();return i&&i<ae?[i]:Ne.filter(je=>{const Fe=je;if(i===Fe)return!0;const Et=c[Fe]||d[Fe];return Et?_e.some(wt=>{var Ht;const We=((Ht=Et.teams)==null?void 0:Ht[wt.name])||{};return Object.values(We).some(Zt=>Zt.length>0)}):!1})},[s,l,c,d,i]);P.useEffect(()=>{if(N.length===0||!A.current||m||K===0)return;const ae=A.current,_e=(Te,Ne)=>{const je=ae.offsetWidth||K;je!==0&&(ae.style.scrollSnapType="none",ae.scrollTo({left:je*Te,behavior:Ne?"smooth":"auto"}),setTimeout(()=>{ae&&(ae.style.scrollSnapType="x mandatory"),ee(!0)},50),H(Te),I.current=!0)};if(i){const Te=N.findIndex(Ne=>Ne===i);if(Te>=0){const Ne=Math.round(ae.scrollLeft/(ae.offsetWidth||K||1));!I.current||Ne!==Te?requestAnimationFrame(()=>{_e(Te,I.current)}):ee(!0)}else ee(!0)}else ae.scrollLeft!==0?_e(0,!0):ee(!0),I.current=!0},[i,N,m,K]);const M=()=>{t({},{replace:!0})};P.useEffect(()=>{(async()=>{if(!(!(s!=null&&s.teams)||s.teams.length===0)){O(!0);try{const _e=So(mn,"users"),Te=Ao(_e,dm("teams","array-contains-any",s.teams)),Ne=await nh(Te),je=[];Ne.forEach(Fe=>je.push(Fe.data())),S(je)}catch(_e){console.error("Error fetching users for dashboard:",_e)}finally{O(!1)}}})()},[s==null?void 0:s.teams]);const V=P.useCallback(ae=>{if(!ae||!(s!=null&&s.teams)||l.length===0)return null;const _e=ae,Te=d[_e]||c[_e],Fe=l.filter(Et=>s.teams.includes(Et.name)).sort((Et,wt)=>{const We=s.teams.indexOf(Et.name),Ht=s.teams.indexOf(wt.name);return We-Ht}).map(Et=>{var Kr;const wt=((Kr=Te==null?void 0:Te.teams)==null?void 0:Kr[Et.name])||{},We=[],Ht=Et.positions.map(an=>an.name);let Zt=0;return Ht.forEach(an=>{const Qn=y.find(st=>st.name===an),Ir=[];Object.entries(wt).forEach(([st,Dn])=>{if(Dn.includes(an)){const Ri=v.find(Ii=>Ii.email===st);Ri?Ir.push(Ri):Ir.push({email:st,name:st}),Zt++}});const Mt=[...Ir].sort((st,Dn)=>Qn!=null&&Qn.sortByGender&&st.gender!==Dn.gender?st.gender==="Male"?-1:Dn.gender==="Male"?1:(st.gender||"").localeCompare(Dn.gender||""):(st.name||"").localeCompare(Dn.name||""));We.push({posName:an,emoji:(Qn==null?void 0:Qn.emoji)||"",assignedUsers:Mt.map(st=>({name:st.name||st.email||"Unknown",isMe:st.email===s.email}))})}),{teamName:Et.name,teamEmoji:Et.emoji,positions:We,hasAssignments:Zt>0}}).filter(Et=>Et.hasAssignments);return Fe.length>0?Fe:null},[c,d,s,l,y,v]),D=(ae,_e,Te,Ne,je)=>{const Et=new Date(ae).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"});let wt="";je&&(wt+=` ${je} 
`),wt+=`${Te} ${_e}  ${Et}
`,Ne.forEach(We=>{const Ht=We.assignedUsers.length>0?We.assignedUsers.map(Zt=>Zt.name).join(", "):"-";wt+=`${We.emoji}: ${Ht}
`}),navigator.clipboard.writeText(wt).then(()=>{const We=`${ae}-${_e}`;j(We),setTimeout(()=>j(null),2e3)})},ye=()=>{if(!A.current)return;const ae=A.current,_e=ae.offsetWidth,Te=Math.round(ae.scrollLeft/_e);if(Te!==G&&N[Te]){H(Te);const Ne=N[Te];if(i!==Ne){const je=Ll();Te===0&&je===Ne?t({},{replace:!0}):t({date:Ne},{replace:!0})}}},me=(ae,_e)=>{n(Y3({date:ae,eventName:_e}))},B=()=>{n(Sc(d))},J=()=>{n(BC())};if(m||w)return T.jsx(su,{});if(N.length===0)return T.jsxs("div",{className:Dt.dashboardEmpty,children:[T.jsx("h2",{children:"No upcoming events found"}),T.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const ue=N[G],ce=Ll(),be=ue&&ue<ce,L=be?"Previous Event":"Upcoming Events",re=ae=>new Date(ae).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),ve=(ae,_e=!1)=>{const Te=V(ae);if(!Te)return null;const Ne=d[ae]||c[ae],je=Ne==null?void 0:Ne.eventName;return T.jsx("div",{className:Dt.teamCardsContainer,children:Te.map(Fe=>{const Et=z===`${ae}-${Fe.teamName}`;return T.jsxs("div",{className:Dt.teamEventCard,children:[T.jsxs("div",{className:Dt.teamEventHeader,children:[T.jsxs("h3",{children:[T.jsx("span",{className:Dt.teamCardEmoji,children:Fe.teamEmoji}),T.jsx("span",{className:Dt.teamCardName,children:Fe.teamName})]}),!_e&&T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(Cm,{className:Dt.dashboardThemeToggle}),T.jsx("button",{className:`${Dt.copyRosterBtn} ${Et?Dt.copyRosterBtnSuccess:""}`,onClick:()=>D(ae,Fe.teamName,Fe.teamEmoji,Fe.positions,je),title:"Copy to clipboard",children:Et?T.jsxs(T.Fragment,{children:[T.jsx(lj,{size:16})," Copied"]}):T.jsxs(T.Fragment,{children:[T.jsx(cj,{size:16})," Copy"]})})]})]}),T.jsx("div",{className:Dt.teamEventDetails,children:Fe.positions.map(wt=>T.jsxs("div",{className:Dt.posAssignmentRow,children:[T.jsx("span",{className:Dt.posEmojiLabel,title:wt.posName,children:wt.emoji}),T.jsx("span",{className:`${Dt.assignedNames} ${wt.assignedUsers.length===0?Dt.unassigned:""}`,children:wt.assignedUsers.length>0?wt.assignedUsers.map((We,Ht)=>T.jsxs(P.Fragment,{children:[We.name,We.isMe&&T.jsx("span",{className:Dt.meTag,children:"Me"}),Ht<wt.assignedUsers.length-1?", ":""]},`${We.name}-${Ht}`)):"Unassigned"})]},wt.posName))})]},Fe.teamName)})})};return T.jsxs("div",{className:Dt.dashboardContainer,children:[T.jsxs("div",{className:Dt.dashboardHeader,children:[T.jsx("h1",{children:L}),T.jsx("div",{className:Dt.dashboardHeaderActions,children:be&&T.jsx("button",{className:Dt.clearPastBtn,onClick:M,children:"Reset to upcoming"})})]}),T.jsx("div",{className:Dt.carouselOuterWrapper,style:{opacity:se?1:0,transition:"opacity 0.3s ease-in-out"},children:T.jsx("div",{className:Dt.eventsCarouselTrack,ref:A,onScroll:ye,children:N.map((ae,_e)=>{const Te=ae,Ne=d[Te]||c[Te],je=(Ne==null?void 0:Ne.eventName)||"";return T.jsxs("div",{className:`${Dt.eventCardWrapper} ${_e===G?Dt.active:Dt.peek}`,children:[T.jsx("div",{className:Dt.eventNameContainer,children:T.jsx("input",{type:"text",className:`${Dt.dashboardEventNameInput} ${je?Dt.dashboardEventNameInputHasEvent:""}`,placeholder:"Event name (e.g. Easter Sunday)",value:je,onChange:Fe=>me(ae,Fe.target.value),disabled:_e!==G})}),T.jsxs("div",{className:Dt.eventCardDate,children:[re(ae),ae===ce&&T.jsx("span",{className:Dt.dashboardTodayBadge,children:"TODAY"})]}),ve(ae,_e!==G)]},ae)})})}),T.jsxs("div",{className:Dt.carouselPagination,children:[G+1," / ",N.length]}),R&&T.jsx(ou,{label:"Unsaved event labels",saveText:"Save Changes",onSave:B,onCancel:J,isSaving:p,hasSideNav:!1})]})},MU="_button_4hh4s_1",PU="_primary_4hh4s_26",VU="_secondary_4hh4s_31",kU="_icon_4hh4s_42",LU="_small_4hh4s_48",Bf={button:MU,primary:PU,secondary:VU,delete:"_delete_4hh4s_36",icon:kU,small:LU},hr=({variant:n="primary",size:e="medium",isIcon:t=!1,className:i="",children:s,...l})=>{const c=[Bf.button,Bf[n],e==="small"?Bf.small:"",t?Bf.icon:"",i].filter(Boolean).join(" ");return T.jsx("button",{className:c,...l,children:s})},jU="_pillGroup_ti99d_1",UU="_pillGroupNowrap_ti99d_9",zU="_pill_ti99d_1",BU="_pillActive_ti99d_35",HU="_pillDisabled_ti99d_40",FU="_pillText_ti99d_61",Nl={pillGroup:jU,pillGroupNowrap:UU,pill:zU,pillActive:BU,pillDisabled:HU,pillText:FU},jl=({children:n,nowrap:e})=>T.jsx("div",{className:`${Nl.pillGroup} ${e?Nl.pillGroupNowrap:""}`,children:n}),Rr=({colour:n,isDropdown:e,isActive:t,isDisabled:i,minWidth:s,onClick:l,children:c})=>{const[d,m]=P.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),T.jsxs("div",{className:`${Nl.pill} ${Nl.pillText} ${t?Nl.pillActive:""} ${i?Nl.pillDisabled:""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:s?`${s}px`:"fit-content"},onClick:p=>{i||(m(y=>!y),l&&l(p))},children:[c,e&&T.jsx(MC,{style:{rotate:d?"90deg":"0"}})]})},qU="_settingsSection_5m9oe_1",GU="_sectionLabel_5m9oe_7",$U="_subSectionGroup_5m9oe_17",KU="_subSectionHeader_5m9oe_21",YU="_formGroup_5m9oe_31",QU="_summaryButton_5m9oe_35",XU="_summaryPrimary_5m9oe_57",WU="_summarySeparator_5m9oe_66",JU="_summarySecondary_5m9oe_73",ZU="_summaryEmoji_5m9oe_78",e6="_remainingCount_5m9oe_82",In={settingsSection:qU,sectionLabel:GU,subSectionGroup:$U,subSectionHeader:KU,formGroup:YU,summaryButton:QU,summaryPrimary:XU,summarySeparator:WU,summarySecondary:JU,summaryEmoji:ZU,remainingCount:e6},FC=({selectedTeams:n,teamPositions:e,onToggleTeam:t,onTogglePosition:i,onMoveTeam:s,availableTeams:l,globalPositions:c})=>T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:In.formGroup,children:[T.jsx("label",{className:In.sectionLabel,children:"Teams"}),T.jsx(jl,{children:l.map(d=>{const m=n.includes(d.name);return T.jsxs(Rr,{onClick:()=>t(d.name),isActive:m,children:[T.jsx("span",{children:d.emoji})," ",d.name]},d.name)})})]}),n.length>0&&T.jsxs("div",{className:In.settingsSection,children:[T.jsx("label",{className:In.sectionLabel,children:"Positions per Team"}),n.map((d,m)=>{var v;const p=l.find(S=>S.name===d);if(!p)return null;const y=((v=p.positions)==null?void 0:v.filter(S=>!S.parentId))||[];return T.jsxs("div",{className:In.subSectionGroup,children:[T.jsxs("div",{className:In.subSectionHeader,style:{justifyContent:"space-between"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.emoji," ",p.name]}),s&&T.jsxs("div",{style:{display:"flex",gap:"4px"},children:[T.jsx(hr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(d,"up"),disabled:m===0,children:""}),T.jsx(hr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(d,"down"),disabled:m===n.length-1,children:""})]})]}),y.length>0?T.jsx(jl,{children:y.map(S=>{var j;const w=c.find(G=>G.name===S.name),O=!!(w!=null&&w.isCustom),z=(j=e[d])==null?void 0:j.includes(S.name);return T.jsxs(Rr,{onClick:()=>i(d,S.name),isActive:z,isDisabled:O,colour:S.colour,children:[T.jsx("span",{children:S.emoji})," ",S.name]},S.name)})}):T.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-dim)",margin:"8px 0"},children:"No assignable positions for this team."})]},d)})]})]}),t6={firebaseUser:null,userData:null,loading:!0,error:null},ld=$r("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=Fr(mn,"users",n),i=await th(t);if(!i.exists()){const s="chris.sm.kang542@gmail.com",l=Ql.currentUser,c=(l==null?void 0:l.email)===s,d={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await mm(t,d),d}return i.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),ud=$r("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const i=Fr(mn,"users",n),s={...e};return s.teamPositions&&(s.indexedAssignments=jC(s.teamPositions)),await P1(i,s),s}catch(i){return t(i instanceof Error?i.message:"Failed to update profile")}}),qC=Oo({name:"auth",initialState:t6,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(ld.pending,e=>{e.loading=!0,e.error=null}).addCase(ld.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(ld.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(ud.pending,e=>{e.error=null}).addCase(ud.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(ud.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:n6,setUserData:r6,setLoading:C5,logout:i6}=qC.actions,a6=qC.reducer,s6="_formGroup_163vy_1",o6="_formInput_163vy_16",l6="_formSelect_163vy_52",u6="_colorInput_163vy_86",c6="_fieldHint_163vy_104",Aa={formGroup:s6,formInput:o6,formSelect:l6,colorInput:u6,fieldHint:c6},h6="_profileCard_1qei9_1",f6="_profileReadonly_1qei9_11",d6="_actionContainer_1qei9_59",ey={profileCard:h6,profileReadonly:f6,actionContainer:d6},GC=({className:n})=>{const e=Gr(),{userData:t,firebaseUser:i}=at(N=>N.auth),{teams:s,fetched:l}=at(N=>N.teams),{positions:c,fetched:d}=at(N=>N.positions),[m,p]=P.useState((t==null?void 0:t.name)||""),[y,v]=P.useState((t==null?void 0:t.gender)||""),[S,w]=P.useState((t==null?void 0:t.isActive)??!0),[O,z]=P.useState((t==null?void 0:t.teams)||[]),[j,G]=P.useState((t==null?void 0:t.teamPositions)||{}),[H,K]=P.useState("idle");P.useEffect(()=>{l||e(_o()),d||e(xa())},[e,l,d]);const te=P.useMemo(()=>{if(!t)return!1;const N={name:m,gender:y,isActive:S,teams:O,teamPositions:j},M={name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}};return JSON.stringify(N)!==JSON.stringify(M)},[m,y,S,O,j,t]),se=async()=>{if(i){K("saving");try{const N={name:m,gender:y,isActive:S,teams:O,teamPositions:j};await e(ud({uid:i.uid,data:N})).unwrap(),K("success"),setTimeout(()=>K("idle"),2e3)}catch(N){console.error(N),K("idle")}}},ee=()=>{t&&(p(t.name||""),v(t.gender||""),w(t.isActive??!0),z(t.teams||[]),G(t.teamPositions||{}))},A=N=>{z(M=>{const V=M.includes(N),D=V?M.filter(ye=>ye!==N):[...M,N];return G(ye=>{const me={...ye};return V?delete me[N]:me[N]||(me[N]=[]),me}),D})},I=(N,M)=>{G(V=>{const D=V[N]||[],ye=D.includes(M)?D.filter(me=>me!==M):[...D,M];return{...V,[N]:ye}})},R=(N,M)=>{const V=O.indexOf(N);if(V===-1)return;const D=M==="up"?V-1:V+1;if(D<0||D>=O.length)return;const ye=[...O];[ye[V],ye[D]]=[ye[D],ye[V]],z(ye)};return t?T.jsxs("section",{className:`${ey.profileCard} ${n||""}`,children:[T.jsx("div",{className:ey.profileReadonly,children:T.jsxs("p",{children:[T.jsx("strong",{children:"Email:"})," ",t.email]})}),T.jsxs("div",{className:Aa.formGroup,children:[T.jsx("label",{children:"Name"}),T.jsx("input",{type:"text",value:m,onChange:N=>p(N.target.value),className:Aa.formInput})]}),T.jsxs("div",{className:Aa.formGroup,children:[T.jsx("label",{children:"Gender"}),T.jsx(jl,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(N=>T.jsx(Rr,{colour:N.colour,onClick:()=>v(N.value),isActive:y===N.value,children:N.value},N.value))})]}),T.jsx(FC,{selectedTeams:O,teamPositions:j,onToggleTeam:A,onTogglePosition:I,onMoveTeam:R,availableTeams:s,globalPositions:c}),T.jsxs("div",{className:Aa.formGroup,children:[T.jsx("label",{children:"Availability Status"}),T.jsx(Rr,{colour:S?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>w(!S),isActive:!0,children:S?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),T.jsx("p",{className:Aa.fieldHint,children:"Turn off if you want to be hidden from the roster."})]}),T.jsx("div",{className:ey.actionContainer,children:T.jsx(hr,{variant:"delete",onClick:()=>Ql.signOut(),children:"Logout"})}),te&&T.jsx(ou,{label:"Unsaved profile changes",saveText:"Update Profile",onSave:se,onCancel:ee,isSaving:H==="saving"})]}):T.jsx("div",{children:"Loading profile..."})},m6="_guestContainer_1m4dd_1",p6="_profileCardOverride_1m4dd_14",g6="_guestHeader_1m4dd_21",y6="_brandTitle_1m4dd_28",_6="_guestThemeToggleContainer_1m4dd_32",v6="_pendingLabel_1m4dd_38",vl={guestContainer:m6,profileCardOverride:p6,guestHeader:g6,brandTitle:y6,guestThemeToggleContainer:_6,pendingLabel:v6},E6=()=>{const{userData:n,firebaseUser:e,loading:t}=at(i=>i.auth);return t?T.jsx(Xl,{}):e?n?n.isApproved?T.jsx(As,{to:"/app",replace:!0}):T.jsxs("div",{className:vl.guestContainer,children:[T.jsxs("header",{className:vl.guestHeader,children:[T.jsx("h2",{className:vl.brandTitle,children:"God is Good"}),T.jsx("p",{className:vl.pendingLabel,children:"PENDING ADMIN APPROVAL"}),T.jsx("div",{className:vl.guestThemeToggleContainer,children:T.jsx(Cm,{})})]}),T.jsx(GC,{className:vl.profileCardOverride})]}):T.jsx(Xl,{}):T.jsx(As,{to:"/login",replace:!0})},T6="_loginContainer_12x6v_1",b6="_loginHeader_12x6v_12",S6="_brandTitle_12x6v_16",A6="_brandSubtitle_12x6v_24",w6="_loginButtonContainer_12x6v_33",C6="_loginButton_12x6v_33",R6="_google_12x6v_57",uo={loginContainer:T6,loginHeader:b6,brandTitle:S6,brandSubtitle:A6,loginButtonContainer:w6,loginButton:C6,google:R6},I6=()=>{const{firebaseUser:n,loading:e}=at(i=>i.auth),t=()=>KV(Ql,Hk);return e?null:n?T.jsx(As,{to:"/",replace:!0}):T.jsxs("div",{className:uo.loginContainer,children:[T.jsxs("header",{className:uo.loginHeader,children:[T.jsx("h1",{className:uo.brandTitle,children:"God is Good"}),T.jsx("p",{className:uo.brandSubtitle,children:"Worship Team Roster"})]}),T.jsx("div",{className:uo.loginButtonContainer,children:T.jsxs("button",{onClick:t,className:`${uo.loginButton} ${uo.google}`,children:[T.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},x6="_rosterTableHeaderCell_1o9p9_1",N6="_stickyCol_1o9p9_6",D6="_dateHeaderContent_1o9p9_20",O6="_dateHeaderActions_1o9p9_27",M6="_loadPrevBtn_1o9p9_32",P6="_resetDatesBtn_1o9p9_54",V6="_peekHeader_1o9p9_64",k6="_peekSelector_1o9p9_69",L6="_stickyRight_1o9p9_86",j6="_clickableHeader_1o9p9_97",U6="_allViewPositionHeader_1o9p9_107",z6="_allViewPositionName_1o9p9_114",B6="_headerActions_1o9p9_120",H6="_headerActionBtn_1o9p9_127",F6="_removeHeaderBtn_1o9p9_151",q6="_meTag_1o9p9_156",G6="_isMe_1o9p9_178",$6="_headerInput_1o9p9_187",K6="_addColumnBtn_1o9p9_213",Y6="_highlightedHeader_1o9p9_234",Q6="_genderDividerCell_1o9p9_239",X6="_genderLabel_1o9p9_253",ft={rosterTableHeaderCell:x6,stickyCol:N6,dateHeaderContent:D6,dateHeaderActions:O6,loadPrevBtn:M6,resetDatesBtn:P6,peekHeader:V6,peekSelector:k6,stickyRight:L6,clickableHeader:j6,allViewPositionHeader:U6,allViewPositionName:z6,headerActions:B6,headerActionBtn:H6,removeHeaderBtn:F6,meTag:q6,isMe:G6,headerInput:$6,addColumnBtn:K6,highlightedHeader:Y6,genderDividerCell:Q6,genderLabel:X6},ty=({viewType:n,rosterAllViewMode:e,allViewColumns:t,userData:i,assignedOnClosestDate:s,currentTeamData:l,teamName:c,navigate:d,hasPastDates:m,onLoadPrevious:p,onResetDates:y,currentPosition:v,handleUpdateCustomLabel:S,handleMoveCustomLabel:w,handleRemoveCustomLabel:O,handleAddCustomLabel:z,sortedUsers:j,genderDividerIndex:G,onToggleVisibility:H,peekPositionName:K,setPeekPositionName:te,peekOptions:se,allTeamUsers:ee})=>{const A=()=>T.jsx("th",{className:`${ft.rosterTableHeaderCell} ${ft.stickyCol} sticky-header`,children:T.jsxs("div",{className:ft.dateHeaderContent,children:["Date",T.jsxs("div",{className:ft.dateHeaderActions,children:[T.jsx("button",{className:ft.loadPrevBtn,onClick:p,title:"Load 5 previous dates",children:""}),m&&T.jsx("button",{className:`${ft.loadPrevBtn} ${ft.resetDatesBtn}`,onClick:y,title:"Hide previous dates",children:""})]})]})}),I=()=>T.jsx("th",{className:`${ft.rosterTableHeaderCell} sticky-header ${ft.stickyRight} ${ft.peekHeader}`,children:T.jsxs("select",{className:ft.peekSelector,value:K||"",onChange:R=>te(R.target.value||null),children:[T.jsx("option",{value:"",children:"Peek Position..."}),se.map(R=>T.jsxs("option",{value:R.name,children:[R.emoji," ",R.name]},R.name))]})});return n==="all"?T.jsx("thead",{children:T.jsxs("tr",{children:[A(),e==="user"?t.map(R=>{const N=R.id===(i==null?void 0:i.email);return T.jsxs("th",{className:`${ft.rosterTableHeaderCell} sticky-header ${R.id&&s.includes(R.id)?ft.highlightedHeader:""} ${N?ft.isMe:""}`,children:[R.name,N&&T.jsx("span",{className:ft.meTag,children:"Me"})]},R.id)}):((l==null?void 0:l.positions)||[]).map(R=>T.jsx("th",{className:`${ft.rosterTableHeaderCell} ${ft.clickableHeader} sticky-header`,onClick:()=>d(`/app/roster/${c}/${R.name}`),children:T.jsxs("div",{className:ft.allViewPositionHeader,children:[T.jsx("span",{children:R.emoji}),T.jsx("span",{className:ft.allViewPositionName,children:R.name})]})},R.name))]})}):n==="absence"?T.jsx("thead",{children:T.jsxs("tr",{children:[A(),ee.map(R=>T.jsx("th",{className:`${ft.rosterTableHeaderCell} sticky-header ${R.email&&s.includes(R.email)?ft.highlightedHeader:""}`,children:R.name},R.email)),T.jsx("th",{className:`${ft.genderDividerCell} sticky-header`}),I()]})}):T.jsx("thead",{children:T.jsxs("tr",{children:[A(),v!=null&&v.isCustom?(v.customLabels||[]).map((R,N)=>{var M;return T.jsxs("th",{className:`${ft.rosterTableHeaderCell} sticky-header`,children:[T.jsx("input",{type:"text",className:ft.headerInput,value:R,placeholder:"New Heading...",readOnly:!(i!=null&&i.isAdmin),onChange:V=>S(N,V.target.value)}),(i==null?void 0:i.isAdmin)&&T.jsxs("div",{className:ft.headerActions,children:[T.jsx("button",{className:ft.headerActionBtn,onClick:()=>w(N,"left"),disabled:N===0,title:"Move Left",children:T.jsx(rj,{size:12})}),T.jsx("button",{className:`${ft.headerActionBtn} ${ft.removeHeaderBtn}`,onClick:()=>O(N),title:"Remove Column",children:T.jsx(J_,{size:12})}),T.jsx("button",{className:ft.headerActionBtn,onClick:()=>w(N,"right"),disabled:N===(((M=v.customLabels)==null?void 0:M.length)||0)-1,title:"Move Right",children:T.jsx(aj,{size:12})})]})]},`custom-${N}`)}):j.map((R,N)=>T.jsxs(P.Fragment,{children:[G===N&&T.jsx("th",{className:`${ft.genderDividerCell} sticky-header`}),T.jsxs("th",{className:`${ft.rosterTableHeaderCell} sticky-header ${ft.clickableHeader} ${R.email&&s.includes(R.email)?ft.highlightedHeader:""}`,onClick:()=>R.email&&H(R.email),title:"Click to hide member",children:[R.name,(v==null?void 0:v.sortByGender)&&T.jsxs("span",{className:ft.genderLabel,children:["(",R.gender==="Male"?"M":R.gender==="Female"?"F":"?",")"]})]})]},R.email)),(v==null?void 0:v.isCustom)&&(i==null?void 0:i.isAdmin)&&T.jsx("th",{className:`${ft.rosterTableHeaderCell} sticky-header`,children:T.jsx("button",{className:ft.addColumnBtn,onClick:z,title:"Add Column",children:T.jsx(oh,{size:16})})}),T.jsx("th",{className:`${ft.genderDividerCell} sticky-header`}),I()]})})},W6="_rosterCell_wdymz_1",J6="_clickable_wdymz_6",Z6="_disabled_wdymz_15",e9="_focused_wdymz_21",t9="_highlightedCell_wdymz_27",n9="_absentStrike_wdymz_31",r9="_absentCell_wdymz_36",i9="_absenceInputContainer_wdymz_40",a9="_absenceReasonInput_wdymz_59",s9="_removeAbsenceBtn_wdymz_71",o9="_absenceRosterCell_wdymz_92",cr={rosterCell:W6,clickable:J6,disabled:Z6,focused:e9,highlightedCell:t9,absentStrike:n9,absentCell:r9,absenceInputContainer:i9,absenceReasonInput:a9,removeAbsenceBtn:s9,absenceRosterCell:o9},sc=({type:n,isFocused:e,onFocus:t,absent:i,absenceReason:s,isAssignedOnClosestDate:l,content:c,onClick:d,handleAbsenceReasonChange:m,disabled:p})=>{const y=[cr.rosterCell,e?cr.focused:"",l?cr.highlightedCell:""];return n==="all-user"?T.jsx("td",{className:[...y,cr.clickable,i?cr.absentStrike:""].filter(Boolean).join(" "),tabIndex:0,onClick:d,onFocus:t,children:i?T.jsx("span",{title:s,children:""}):c}):n==="all-position"?T.jsx("td",{className:y.filter(Boolean).join(" "),tabIndex:0,onFocus:t,children:c}):n==="roster-custom"?T.jsx("td",{className:[...y,cr.clickable].filter(Boolean).join(" "),onClick:d,tabIndex:0,onFocus:t,children:c}):n==="roster-user"?T.jsx("td",{className:[...y,p?cr.disabled:cr.clickable,i?cr.absentStrike:""].filter(Boolean).join(" "),onClick:d,tabIndex:0,onFocus:t,children:i?T.jsx("span",{title:s,children:""}):c}):n==="absence"?T.jsx("td",{className:[...y,cr.clickable,cr.absenceRosterCell,i?cr.absentCell:""].filter(Boolean).join(" "),onClick:d,tabIndex:0,onFocus:t,title:s,children:i?T.jsxs("div",{className:cr.absenceInputContainer,children:[T.jsx("input",{type:"text",className:cr.absenceReasonInput,value:s,placeholder:"Reason...",maxLength:20,autoFocus:e,onClick:v=>v.stopPropagation(),onChange:v=>m==null?void 0:m(v.target.value)}),T.jsx("button",{className:cr.removeAbsenceBtn,onClick:v=>{v.stopPropagation(),d==null||d()},title:"Mark as present",children:T.jsx(J_,{size:14})})]}):""}):null},l9="_stickyCol_1bfri_1",u9="_dateCell_1bfri_10",c9="_clickable_1bfri_18",h9="_dateCellContent_1bfri_30",f9="_specialEventDot_1bfri_38",d9="_rosterTodayDot_1bfri_49",m9="_pastDate_1bfri_60",p9="_noData_1bfri_64",g9="_closestNextDateRow_1bfri_76",y9="_todayDate_1bfri_77",_9="_peekCell_1bfri_88",v9="_genderDividerCell_1bfri_101",E9="_rosterCell_1bfri_110",T9="_stickyRight_1bfri_125",Cn={stickyCol:l9,dateCell:u9,clickable:c9,dateCellContent:h9,specialEventDot:f9,rosterTodayDot:d9,pastDate:m9,noData:p9,closestNextDateRow:g9,todayDate:y9,peekCell:_9,genderDividerCell:v9,rosterCell:E9,stickyRight:T9},ny=({viewType:n,dateString:e,rowIndex:t,rowClass:i,isToday:s,hasData:l,eventName:c,closestNextDate:d,onDateClick:m,focusedCell:p,setFocusedCell:y,rosterAllViewMode:v,allViewColumns:S,assignedOnClosestDate:w,currentTeamData:O,getAllViewUserCellContent:z,getAllViewPositionCellContent:j,getAssignmentsForIdentifier:G,navigate:H,teamName:K,currentPosition:te,handleCellClick:se,getCellContent:ee,sortedUsers:A,genderDividerIndex:I,isCellDisabled:R,isUserAbsent:N,getAbsenceReason:M,getPeekAssignedUsers:V,allTeamUsers:D,handleAbsenceClick:ye,handleAbsenceReasonChange:me})=>{const B=[i==="past-date"?Cn.pastDate:"",i==="today-date"?Cn.todayDate:"",i==="future-date"?Cn.futureDate:"",l?"":Cn.noData,c?Cn.specialEventRow:"",e===d?Cn.closestNextDateRow:""].filter(Boolean).join(" "),J=()=>T.jsx("td",{className:`${Cn.dateCell} ${Cn.stickyCol} ${l?Cn.clickable:""}`,onClick:()=>m(e),title:c,children:T.jsxs("div",{className:Cn.dateCellContent,children:[c&&T.jsx("span",{className:Cn.specialEventDot}),s&&T.jsx("span",{className:Cn.rosterTodayDot,title:"Today"}),new Date(e.replace(/-/g,"/")).toLocaleDateString()]})}),ue=()=>T.jsx("td",{className:`${Cn.rosterCell} ${Cn.peekCell} ${Cn.stickyRight}`,children:V(e).join(", ")||""});return n==="all"?T.jsxs("tr",{className:B,children:[J(),v==="user"?S.map((ce,be)=>T.jsx(sc,{type:"all-user",dateString:e,rowIndex:t,colIndex:be,isFocused:(p==null?void 0:p.row)===t&&(p==null?void 0:p.col)===be&&(p==null?void 0:p.table)==="all",onFocus:()=>y({row:t,col:be,table:"all"}),absent:ce.id?N(e,ce.id):!1,absenceReason:ce.id?M(e,ce.id):"",isAssignedOnClosestDate:e===d&&ce.id!==void 0&&w.includes(ce.id),content:ce.id?z(e,ce.id):null,onClick:()=>{const L=G(e,ce.id);L.length>0&&H(`/app/roster/${K}/${L[0]}`)}},ce.id)):((O==null?void 0:O.positions)||[]).map((ce,be)=>T.jsx(sc,{type:"all-position",dateString:e,rowIndex:t,colIndex:be,isFocused:(p==null?void 0:p.row)===t&&(p==null?void 0:p.col)===be&&(p==null?void 0:p.table)==="all",onFocus:()=>y({row:t,col:be,table:"all"}),content:j(e,ce.name)},ce.name))]}):n==="absence"?T.jsxs("tr",{className:B,children:[J(),D.map((ce,be)=>T.jsx(sc,{type:"absence",dateString:e,rowIndex:t,colIndex:be,isFocused:(p==null?void 0:p.row)===t&&(p==null?void 0:p.col)===be&&(p==null?void 0:p.table)==="absence",onFocus:()=>y({row:t,col:be,table:"absence"}),absent:ce.email?N(e,ce.email):!1,absenceReason:ce.email?M(e,ce.email):"",isAssignedOnClosestDate:!!(e===d&&ce.email&&w.includes(ce.email)),onClick:()=>{ce.email&&ye(e,ce.email,t,be)},handleAbsenceReasonChange:L=>{ce.email&&me(e,ce.email,L)}},ce.email)),T.jsx("td",{className:Cn.genderDividerCell}),ue()]}):T.jsxs("tr",{className:B,children:[J(),te!=null&&te.isCustom?(te.customLabels||[]).map((ce,be)=>T.jsx(sc,{type:"roster-custom",dateString:e,rowIndex:t,colIndex:be,isFocused:(p==null?void 0:p.row)===t&&(p==null?void 0:p.col)===be&&(p==null?void 0:p.table)==="roster",onFocus:()=>y({row:t,col:be,table:"roster"}),content:ce&&ee(e,ce),onClick:()=>{ce&&se(e,ce,t,be)}},`custom-cell-${be}`)):A.map((ce,be)=>T.jsxs(P.Fragment,{children:[I===be&&T.jsx("td",{className:Cn.genderDividerCell}),T.jsx(sc,{type:"roster-user",dateString:e,rowIndex:t,colIndex:be,isFocused:(p==null?void 0:p.row)===t&&(p==null?void 0:p.col)===be&&(p==null?void 0:p.table)==="roster",onFocus:()=>y({row:t,col:be,table:"roster"}),disabled:ce.email?R(e,ce.email):!1,absent:ce.email?N(e,ce.email):!1,absenceReason:ce.email?M(e,ce.email):"",isAssignedOnClosestDate:!!(e===d&&ce.email&&w.includes(ce.email)),content:ce.email?ee(e,ce.email):null,onClick:()=>{ce.email&&!R(e,ce.email)&&se(e,ce.email,t,be)}})]},ce.email)),(te==null?void 0:te.isCustom)&&T.jsx("td",{className:`${Cn.rosterCell} ${Cn.disabled}`}),T.jsx("td",{className:Cn.genderDividerCell}),ue()]})},b9="_topControls_edhcc_1",S9="_topControlsLeft_edhcc_14",A9="_viewToggleBar_edhcc_27",w9="_hiddenMembersBar_edhcc_38",C9="_hiddenMembersLabel_edhcc_50",R9="_hiddenMembersList_edhcc_58",I9="_toggleButtonGap_edhcc_64",x9="_unhideButton_edhcc_68",Ea={topControls:b9,topControlsLeft:S9,viewToggleBar:A9,hiddenMembersBar:w9,hiddenMembersLabel:C9,hiddenMembersList:R9,toggleButtonGap:I9,unhideButton:x9},ry=({isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,allUsers:s,onToggleVisibility:l})=>{const c=Gr(),d=!e&&i.length>0;return!d&&!n?null:T.jsx("div",{className:Ea.topControls,children:T.jsxs("div",{className:Ea.topControlsLeft,children:[n&&T.jsxs("div",{className:Ea.viewToggleBar,children:[T.jsxs(hr,{variant:t==="user"?"primary":"secondary",size:"small",onClick:()=>c(ZS("user")),className:Ea.toggleButtonGap,children:[T.jsx(wj,{size:18})," ",T.jsx("span",{children:"User View"})]}),T.jsxs(hr,{variant:t==="position"?"primary":"secondary",size:"small",onClick:()=>c(ZS("position")),className:Ea.toggleButtonGap,children:[T.jsx(dj,{size:18})," ",T.jsx("span",{children:"Position View"})]})]}),d&&T.jsxs("div",{className:Ea.hiddenMembersBar,children:[T.jsx("span",{className:Ea.hiddenMembersLabel,children:"Hidden Members:"}),T.jsx("div",{className:Ea.hiddenMembersList,children:i.map(m=>{const p=s.find(y=>y.email===m);return T.jsxs(hr,{variant:"secondary",size:"small",onClick:()=>l(m),className:Ea.unhideButton,children:[(p==null?void 0:p.name)||m," ",T.jsx(oh,{size:14})]},m)})})]})]})})},N9="_rosterTableContainer_38ugx_1",D9="_rosterTable_38ugx_1",O9="_rosterTableLoading_38ugx_44",M9="_rosterTableError_38ugx_45",P9="_rosterTableWrapper_38ugx_52",V9="_loadMoreFooter_38ugx_59",k9="_loadNextYearBtn_38ugx_65",L9="_assignedPositions_38ugx_83",Nt={rosterTableContainer:N9,rosterTable:D9,rosterTableLoading:O9,rosterTableError:M9,rosterTableWrapper:P9,loadMoreFooter:V9,loadNextYearBtn:k9,assignedPositions:L9},j9=()=>{const n=Gr(),e=Io(),{teamName:t,positionName:i}=Fc(),{userData:s}=at(le=>le.auth),{users:l,allTeamUsers:c,rosterDates:d,currentTeamData:m,loadingUsers:p,loadingTeam:y,loadingAllTeamUsers:v,error:S}=at(le=>le.rosterView),{entries:w,dirtyEntries:O,saving:z,error:j}=at(le=>le.roster),{positions:G,isDirty:H}=at(le=>le.positions),{teams:K}=at(le=>le.teams),{hiddenUsers:te,rosterAllViewMode:se}=at(le=>le.ui),[ee,A]=P.useState(null),[I,R]=P.useState(null),N=Object.keys(O).length>0,M=N||H,V=i==="Absence",D=i==="All",ye=P.useMemo(()=>G.find(le=>le.name===i),[G,i]),me=P.useMemo(()=>m?m.positions.filter(le=>le.name!==i):[],[m,i]),B=P.useMemo(()=>{var le;return!t||!i?[]:((le=te[t])==null?void 0:le[i])||[]},[te,t,i]),J=P.useMemo(()=>c.filter(le=>{var Ie;return!le.isActive||!t?!1:(((Ie=le.teamPositions)==null?void 0:Ie[t])||[]).length>0}),[c,t]),ue=P.useMemo(()=>{const le=J.map(Ee=>({id:Ee.email||"",name:Ee.name||"",isUser:!0,gender:Ee.gender}));if(!m)return le;const Se=m.positions.map(Ee=>Ee.name),Ie=Array.from(new Set(G.filter(Ee=>Se.includes(Ee.name)&&Ee.isCustom).flatMap(Ee=>Ee.customLabels||[]).map(Ee=>Ee.trim()).filter(Ee=>Ee!==""))).map(Ee=>({id:Ee,name:Ee,isUser:!1}));return[...le,...Ie]},[J,m,G]),ce=P.useMemo(()=>{const le=l.filter(Se=>Se.email&&!B.includes(Se.email)&&Se.isActive);return ye!=null&&ye.sortByGender?le.sort((Se,Ie)=>Se.gender===Ie.gender?(Se.name||"").localeCompare(Ie.name||""):Se.gender==="Male"?-1:Ie.gender==="Male"?1:(Se.gender||"").localeCompare(Ie.gender||"")):le},[l,ye,B]),be=P.useMemo(()=>{if(!(ye!=null&&ye.sortByGender)||ce.length===0)return-1;const le=ce.findIndex(Se=>Se.gender==="Female");return le>0&&le<ce.length?le:-1},[ye,ce]),L=le=>{!t||!i||n(Mj({teamName:t,positionName:i,userEmail:le}))},re=()=>{n(J3())},ve=()=>{n(Z3())},ae=()=>{n(eU())},_e=le=>{Te(le)&&e(`/app/dashboard?date=${le}`)},Te=P.useCallback(le=>{const Se=le.split("T")[0],Ie=O[Se]||w[Se];return Ie?Object.values(Ie.teams).some(Ee=>Object.values(Ee).some(De=>De.length>0)):!1},[w,O]),Ne=P.useCallback(le=>{if(!I||!t)return[];const Se=le.split("T")[0],Ie=O[Se]||w[Se];return!Ie||!Ie.teams[t]?[]:Object.entries(Ie.teams[t]).filter(([,Ee])=>Ee.includes(I)).map(([Ee])=>{const De=c.find(Pe=>Pe.email===Ee);return(De==null?void 0:De.name)||Ee})},[I,t,O,w,c]);P.useEffect(()=>{n(bc())},[n]),P.useEffect(()=>{i&&t&&!["Absence","All"].includes(i)&&n(sd({teamName:t,positionName:i}))},[i,t,n]),P.useEffect(()=>{t&&(n(od(t)),n(ad(t)))},[t,n]);const je=P.useCallback((le,Se)=>{const Ie=le,Ee=O[Ie]||w[Ie];return!!(Ee&&Ee.absence&&Ee.absence[Se])},[O,w]),Fe=P.useCallback((le,Se)=>{var De,Pe;const Ie=le,Ee=O[Ie]||w[Ie];return((Pe=(De=Ee==null?void 0:Ee.absence)==null?void 0:De[Se])==null?void 0:Pe.reason)||""},[O,w]),Et=P.useCallback((le,Se)=>{if(!t||!i||i==="Absence")return!1;if(je(le,Se))return!0;const Ie=le,Ee=O[Ie]||w[Ie],De=K.find(On=>On.name===t),Pe=(De==null?void 0:De.maxConflict)||1;if(!Ee||!Ee.teams[t]||!Ee.teams[t][Se])return!1;const Ct=Ee.teams[t][Se],Ge=G.filter(On=>On.parentId===i),bt=[i,...Ge.map(On=>On.name)];return Ct.some(On=>bt.includes(On))?!1:Ct.length>=Pe},[t,i,je,O,w,K,G]),wt=P.useCallback((le,Se,Ie,Ee)=>{if(!t||!i||i==="Absence"||Et(le,Se)){A({row:Ie,col:Ee,table:"roster"});return}A({row:Ie,col:Ee,table:"roster"});const De=K.find(bt=>bt.name===t),Pe=(De==null?void 0:De.maxConflict)||1,Ct=G.filter(bt=>bt.parentId===i),Ge=[i,...Ct.map(bt=>bt.name)];n(K3({date:le,teamName:t,userIdentifier:Se,positionGroupNames:Ge,maxConflict:Pe}))},[n,t,i,Et,K,G]),We=P.useCallback((le,Se,Ie,Ee)=>{A({row:Ie,col:Ee,table:"absence"});const De=je(le,Se);n(tA({date:le,userIdentifier:Se,isAbsent:!De}))},[n,je]),Ht=P.useCallback((le,Se,Ie)=>{n(tA({date:le,userIdentifier:Se,reason:Ie,isAbsent:!0}))},[n]),Zt=P.useCallback(()=>{N&&n(Sc(O)),H&&n(W_(G))},[n,O,G,N,H]),Kr=()=>{if(!ye||!i)return;const le=ye.customLabels||[];n(Uf({positionName:i,labels:[...le,""]}))},an=(le,Se)=>{if(!ye||!i)return;const Ie=[...ye.customLabels||[]];Ie[le]=Se,n(Uf({positionName:i,labels:Ie}))},Qn=(le,Se)=>{if(!ye||!i)return;const Ie=[...ye.customLabels||[]],Ee=Se==="left"?le-1:le+1;if(Ee<0||Ee>=Ie.length)return;const De=Ie[le];Ie[le]=Ie[Ee],Ie[Ee]=De,n(Uf({positionName:i,labels:Ie}))},Ir=le=>{if(!ye||!i||!window.confirm("Remove this column?"))return;const Se=[...ye.customLabels||[]];Se.splice(le,1),n(Uf({positionName:i,labels:Se}))},Mt=P.useCallback(()=>{N&&n(BC()),H&&(n($L()),n(xa())),A(null)},[n,N,H]),st=(le,Se)=>{const Ie=le.split("T")[0],Ee=O[Ie]||w[Ie];if(!Ee||!t||!Ee.teams[t])return[];let De=Ee.teams[t][Se]||[];if(De.length===0){const Pe=Se.trim(),Ct=Object.keys(Ee.teams[t]).find(Ge=>Ge.trim()===Pe);Ct&&(De=Ee.teams[t][Ct])}return De},Dn=(le,Se)=>{const Ie=st(le,Se);return Ie.length===0?"":T.jsx("div",{className:Nt.assignedPositions,children:Ie.map(Ee=>{const De=G.find(Pe=>Pe.name===Ee);return T.jsx("span",{className:Nt.posEmoji,onClick:Pe=>{Pe.stopPropagation(),e(`/app/roster/${t}/${Ee}`)},title:Ee,style:{cursor:"pointer"},children:(De==null?void 0:De.emoji)||""},Ee)})})},Ri=(le,Se)=>{const Ie=le.split("T")[0],Ee=O[Ie]||w[Ie];if(!Ee||!t)return"";const De=Object.entries(Ee.teams[t]||{}).filter(([,Pe])=>Pe.includes(Se));return T.jsx("div",{className:Nt.assignedUsersText,children:De.map(([Pe],Ct)=>{const Ge=J.find(On=>On.email===Pe),bt=Pe===(s==null?void 0:s.email),sn=Ge?Ge.name:Pe;return T.jsxs(P.Fragment,{children:[T.jsx("span",{className:bt?Nt.isMe:"",children:sn}),bt&&T.jsx("span",{className:Nt.meTag,children:"Me"}),Ct<De.length-1?", ":""]},Pe)})})},Ii=(le,Se)=>{var Ct;const Ie=le,Ee=O[Ie]||w[Ie];if(!Ee||!t)return"";const De=((Ct=Ee.teams[t])==null?void 0:Ct[Se])||[],Pe=[];return Object.entries(Ee.teams).forEach(([Ge,bt])=>{Ge!==t&&bt[Se]&&Pe.push({team:Ge,positions:bt[Se]})}),De.length===0&&Pe.length===0?"":T.jsxs("div",{className:Nt.assignedPositions,children:[De.map(Ge=>{const bt=G.find(sn=>sn.name===Ge);return T.jsx("span",{title:`${t}: ${Ge}`,className:Nt.posEmoji,children:(bt==null?void 0:bt.emoji)||""},Ge)}),Pe.map(Ge=>Ge.positions.map(bt=>{const sn=G.find(On=>On.name===bt);return T.jsx("span",{title:`${Ge.team}: ${bt}`,className:`${Nt.posEmoji} ${Nt.otherTeamEmoji}`,children:(sn==null?void 0:sn.emoji)||""},`${Ge.team}-${bt}`)}))]})};P.useEffect(()=>{const le=Se=>{const Ie=Se.target;if(Ie.tagName==="INPUT"||Ie.tagName==="TEXTAREA"||!ee)return;const{row:Ee,col:De,table:Pe}=ee,Ct=d;let Ge=[];switch(Pe==="roster"?Ge=ce:Pe==="absence"?Ge=c:Pe==="all"&&(Ge=se==="user"?ue:(m==null?void 0:m.positions)||[]),Se.key){case"ArrowUp":Se.preventDefault(),Ee>0&&A({row:Ee-1,col:De,table:Pe});break;case"ArrowDown":Se.preventDefault(),Ee<Ct.length-1&&A({row:Ee+1,col:De,table:Pe});break;case"ArrowLeft":Se.preventDefault(),De>0&&A({row:Ee,col:De-1,table:Pe});break;case"ArrowRight":Se.preventDefault(),De<Ge.length-1&&A({row:Ee,col:De+1,table:Pe});break;case"Tab":Se.preventDefault(),Se.shiftKey?Ee>0&&A({row:Ee-1,col:De,table:Pe}):Ee<Ct.length-1&&A({row:Ee+1,col:De,table:Pe});break;case" ":{if(Se.preventDefault(),Pe==="all")break;const bt=d[Ee],sn=Ge[De];sn!=null&&sn.email&&(Pe==="roster"?wt(bt,sn.email,Ee,De):We(bt,sn.email,Ee,De));break}case"Enter":M&&(Se.preventDefault(),Zt());break;case"Escape":M&&(Se.preventDefault(),Mt());break}};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[ee,d,ce,c,M,wt,We,Zt,Mt,se,ue,m==null?void 0:m.positions]);const Ft=P.useMemo(()=>{const le=Ll();return d.length===0?!1:d[0]<le},[d]),En=P.useMemo(()=>{const le=Ll();return d.find(Se=>Se.split("T")[0]>=le)},[d]),ar=P.useMemo(()=>{if(!En||!t||!i)return[];const le=En.split("T")[0],Se=O[le]||w[le];if(!Se||!Se.teams[t])return[];const Ie=G.filter(De=>De.parentId===i),Ee=[i,...Ie.map(De=>De.name)];return Object.entries(Se.teams[t]).filter(([,De])=>De.some(Pe=>Ee.includes(Pe))).map(([De])=>De)},[En,t,i,O,w,G]),Xn=P.useCallback(le=>{const Se=Ll(),Ie=le.split("T")[0];return Ie<Se?"past-date":Ie===Se?"today-date":"future-date"},[]);if(p||y||v)return T.jsx(su,{});const pn=S||j;return pn?T.jsxs("div",{className:Nt.rosterTableError,children:["Error: ",pn]}):D?T.jsxs("div",{className:Nt.rosterTableWrapper,children:[T.jsx(ry,{isAllView:D,isAbsenceView:V,rosterAllViewMode:se,hiddenUserList:B,allUsers:l,onToggleVisibility:L}),T.jsxs("div",{className:Nt.rosterSection,children:[T.jsx("div",{className:Nt.rosterTableContainer,children:T.jsxs("table",{className:Nt.rosterTable,children:[T.jsx(ty,{viewType:"all",rosterAllViewMode:se,allViewColumns:ue,userData:s,assignedOnClosestDate:ar,currentTeamData:m,teamName:t,navigate:e,hasPastDates:Ft,onLoadPrevious:re,onResetDates:ve,peekPositionName:I,setPeekPositionName:R,peekOptions:me,sortedUsers:[],genderDividerIndex:-1,onToggleVisibility:()=>{},handleUpdateCustomLabel:()=>{},handleMoveCustomLabel:()=>{},handleRemoveCustomLabel:()=>{},handleAddCustomLabel:()=>{},allTeamUsers:[]}),T.jsx("tbody",{children:d.map((le,Se)=>{var Ie;return T.jsx(ny,{viewType:"all",dateString:le,rowIndex:Se,rowClass:Xn(le),isToday:Xn(le)==="today-date",hasData:Te(le),eventName:(Ie=O[le.split("T")[0]]||w[le.split("T")[0]])==null?void 0:Ie.eventName,closestNextDate:En,onDateClick:_e,focusedCell:ee,setFocusedCell:A,rosterAllViewMode:se,allViewColumns:ue,assignedOnClosestDate:ar,currentTeamData:m,getAllViewUserCellContent:Dn,getAllViewPositionCellContent:Ri,getAssignmentsForIdentifier:st,navigate:e,teamName:t,sortedUsers:[],genderDividerIndex:-1,isCellDisabled:()=>!1,isUserAbsent:je,getAbsenceReason:Fe,getPeekAssignedUsers:()=>[],handleCellClick:()=>{},getCellContent:()=>null,allTeamUsers:[],handleAbsenceClick:()=>{},handleAbsenceReasonChange:()=>{}},le)})})]})}),T.jsx("div",{className:Nt.loadMoreFooter,children:T.jsx("button",{className:Nt.loadNextYearBtn,onClick:ae,children:"Load Next Year "})})]})]}):!V&&!(ye!=null&&ye.isCustom)&&ce.length===0?T.jsxs("div",{className:Nt.rosterTableWrapper,children:[T.jsx(ry,{isAllView:D,isAbsenceView:V,rosterAllViewMode:se,hiddenUserList:B,allUsers:l,onToggleVisibility:L}),T.jsx("div",{className:Nt.rosterTableLoading,children:"No users found for this position."})]}):T.jsxs("div",{className:Nt.rosterTableWrapper,children:[T.jsx(ry,{isAllView:D,isAbsenceView:V,rosterAllViewMode:se,hiddenUserList:B,allUsers:l,onToggleVisibility:L}),V?T.jsxs("div",{className:`${Nt.rosterSection} ${Nt.absenceSection}`,children:[T.jsx("div",{className:Nt.rosterTableContainer,children:T.jsxs("table",{className:`${Nt.rosterTable} ${Nt.absenceTable}`,children:[T.jsx(ty,{viewType:"absence",allTeamUsers:c,userData:s,assignedOnClosestDate:ar,currentTeamData:m,teamName:t,navigate:e,hasPastDates:Ft,onLoadPrevious:re,onResetDates:ve,peekPositionName:I,setPeekPositionName:R,peekOptions:me,allViewColumns:[],sortedUsers:[],genderDividerIndex:-1,onToggleVisibility:()=>{},handleUpdateCustomLabel:()=>{},handleMoveCustomLabel:()=>{},handleRemoveCustomLabel:()=>{},handleAddCustomLabel:()=>{}}),T.jsx("tbody",{children:d.map((le,Se)=>{var Ie;return T.jsx(ny,{viewType:"absence",dateString:le,rowIndex:Se,rowClass:Xn(le),isToday:Xn(le)==="today-date",hasData:Te(le),eventName:(Ie=O[le.split("T")[0]]||w[le.split("T")[0]])==null?void 0:Ie.eventName,closestNextDate:En,onDateClick:_e,focusedCell:ee,setFocusedCell:A,allTeamUsers:c,handleAbsenceClick:We,handleAbsenceReasonChange:Ht,isUserAbsent:je,getAbsenceReason:Fe,getPeekAssignedUsers:Ne,allViewColumns:[],assignedOnClosestDate:ar,currentTeamData:m,getAllViewUserCellContent:()=>null,getAllViewPositionCellContent:()=>null,getAssignmentsForIdentifier:()=>[],navigate:e,teamName:t,sortedUsers:[],genderDividerIndex:-1,handleCellClick:()=>{},getCellContent:()=>null,isCellDisabled:()=>!1},le)})})]})}),T.jsx("div",{className:Nt.loadMoreFooter,children:T.jsx("button",{className:Nt.loadNextYearBtn,onClick:ae,children:"Load Next Year "})})]}):T.jsxs("div",{className:Nt.rosterSection,children:[T.jsx("div",{className:Nt.rosterTableContainer,children:T.jsxs("table",{className:Nt.rosterTable,children:[T.jsx(ty,{viewType:"roster",userData:s,assignedOnClosestDate:ar,currentTeamData:m,teamName:t,navigate:e,hasPastDates:Ft,onLoadPrevious:re,onResetDates:ve,currentPosition:ye,handleUpdateCustomLabel:an,handleMoveCustomLabel:Qn,handleRemoveCustomLabel:Ir,handleAddCustomLabel:Kr,sortedUsers:ce,genderDividerIndex:be,onToggleVisibility:L,peekPositionName:I,setPeekPositionName:R,peekOptions:me,allViewColumns:[],allTeamUsers:[]}),T.jsx("tbody",{children:d.map((le,Se)=>{var Ie;return T.jsx(ny,{viewType:"roster",dateString:le,rowIndex:Se,rowClass:Xn(le),isToday:Xn(le)==="today-date",hasData:Te(le),eventName:(Ie=O[le.split("T")[0]]||w[le.split("T")[0]])==null?void 0:Ie.eventName,closestNextDate:En,onDateClick:_e,focusedCell:ee,setFocusedCell:A,currentPosition:ye,handleCellClick:wt,getCellContent:Ii,sortedUsers:ce,genderDividerIndex:be,isCellDisabled:Et,isUserAbsent:je,getAbsenceReason:Fe,getPeekAssignedUsers:Ne,allViewColumns:[],assignedOnClosestDate:ar,currentTeamData:m,getAllViewUserCellContent:()=>null,getAllViewPositionCellContent:()=>null,getAssignmentsForIdentifier:()=>[],navigate:e,teamName:t,allTeamUsers:[],handleAbsenceClick:()=>{},handleAbsenceReasonChange:()=>{}},le)})})]})}),T.jsx("div",{className:Nt.loadMoreFooter,children:T.jsx("button",{className:Nt.loadNextYearBtn,onClick:ae,children:"Load Next Year "})})]}),M&&T.jsx(ou,{onSave:Zt,onCancel:Mt,isSaving:z,saveText:"Save Roster"})]})},U9="_rosterPage_z6eme_1",z9={rosterPage:U9},B9=()=>T.jsx("div",{className:z9.rosterPage,children:T.jsx(j9,{})}),H9="_appTableContainer_1bvz5_1",F9="_appTable_1bvz5_1",q9="_colorPickerGroup_1bvz5_44",G9="_stickyCol_1bvz5_54",Uc={appTableContainer:H9,appTable:F9,colorPickerGroup:q9,stickyCol:G9},$9=({text:n,textAlign:e="left",width:t,minWidth:i,isSticky:s=!1})=>T.jsx("th",{className:s?Uc.stickyCol:void 0,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:i?`${i}px`:"auto"},children:n}),ln=({isSticky:n=!1,textAlign:e="left",className:t,children:i})=>T.jsx("td",{style:{textAlign:e,display:e==="center"?"table-cell":void 0},className:`${t||""} ${n?Uc.stickyCol:""}
`,children:T.jsx("div",{style:{display:"flex",justifyContent:e==="center"?"center":e==="right"?"flex-end":"flex-start",alignItems:"center",gap:"8px",height:"100%"},children:i})}),li=({name:n,value:e,placeholder:t,type:i="text",isSticky:s,isReadOnly:l=!1,isChild:c=!1,onChange:d})=>T.jsxs(ln,{isSticky:s,children:[c&&T.jsx(PC,{}),T.jsx("input",{name:n,className:Aa.formInput,type:i,placeholder:t,value:e,onChange:d,readOnly:l})]}),$C=({name:n,value:e,placeholder:t,onChange:i})=>T.jsxs(ln,{className:Uc.colorPickerGroup,children:[T.jsx("input",{name:n,type:"color",className:Aa.colorInput,value:e||"#FFFFFF",onChange:i}),T.jsx("input",{name:n,className:Aa.formInput,value:e,placeholder:t,onChange:i})]}),ev=({headers:n,children:e})=>T.jsx("div",{className:Uc.appTableContainer,children:T.jsxs("table",{className:Uc.appTable,children:[T.jsx("thead",{children:T.jsx("tr",{children:n.map((t,i)=>T.jsx($9,{...t},i))})}),T.jsx("tbody",{children:e})]})}),K9=({position:n,index:e,onUpdate:t,onMove:i,onDelete:s,onAddChild:l,isFirst:c,isLast:d})=>T.jsxs("tr",{children:[T.jsx(li,{name:`name-${e}`,value:n.name,onChange:m=>t(e,"name",m.target.value),isSticky:!0}),T.jsx(ln,{textAlign:"center",children:n.parentId?T.jsx(PC,{}):T.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[T.jsx(hr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>i(e,"up"),disabled:c,children:""}),T.jsx(hr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>i(e,"down"),disabled:d,children:""})]})}),T.jsx(li,{name:`emoji-${e}`,value:n.emoji,onChange:m=>t(e,"emoji",m.target.value)}),T.jsx($C,{name:`colour-${e}`,value:n.colour,onChange:m=>t(e,"colour",m.target.value)}),T.jsx(ln,{textAlign:"center",children:T.jsx(Rr,{colour:n.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.sortByGender,onClick:()=>t(e,"sortByGender",!n.sortByGender),isDisabled:n.isCustom,children:n.sortByGender?"YES":"NO"})}),T.jsx(ln,{textAlign:"center",children:T.jsx(Rr,{colour:n.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.isCustom,onClick:()=>t(e,"isCustom",!n.isCustom),children:n.isCustom?"YES":"NO"})}),T.jsx(ln,{textAlign:"center",children:!n.parentId&&T.jsxs(hr,{variant:"secondary",size:"small",onClick:()=>l(n.name),title:"Add Child Position",children:[T.jsx(oh,{size:14,style:{marginRight:"4px"}}),"Add"]})}),T.jsx(ln,{textAlign:"center",children:T.jsxs(hr,{variant:"delete",size:"small",onClick:()=>s(e),children:[T.jsx(VC,{size:14,style:{marginRight:"4px"}}),"Delete"]})})]}),Y9="_settingsContainer_gfw12_1",Q9="_managementWrapper_gfw12_13",Ul={settingsContainer:Y9,managementWrapper:Q9},iy={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},X9=()=>{const n=Gr(),{positions:e,fetched:t,loading:i}=at(H=>H.positions),[s,l]=P.useState(e),[c,d]=P.useState(iy),[m,p]=P.useState("idle"),y=P.useMemo(()=>{const H=K=>K.map(te=>({name:te.name||"",emoji:te.emoji||"",colour:te.colour||"",parentId:te.parentId||void 0,sortByGender:!!te.sortByGender,isCustom:!!te.isCustom}));return JSON.stringify(H(s))!==JSON.stringify(H(e))},[s,e]);P.useEffect(()=>{t||n(xa())},[n,t]),P.useEffect(()=>{l(e)},[e]);const v=(H,K,te)=>{const se=[...s];se[H]={...se[H],[K]:te},l(se)},S=(H,K)=>{const te=[...s],se=te[H],ee=se.parentId,A=I=>{const R=te[I];if(!R)return{block:[],startIndex:-1,endIndex:-1};const N=[],M=[R],V=new Set;let D=I,ye=I,me=0;for(;me<M.length;){const J=M[me++];V.has(J.name)||(V.add(J.name),N.push(J),te.forEach((ue,ce)=>{ue.parentId===J.name&&!V.has(ue.name)&&(M.push(ue),D=Math.min(D,ce),ye=Math.max(ye,ce))}))}return{block:N,startIndex:D,endIndex:ye}};if(ee){const I=te.filter(me=>me.parentId===ee),N=I.findIndex(me=>me.name===se.name)+(K==="up"?-1:1);if(N<0||N>=I.length)return;const M=I[N],V=te.indexOf(se),D=te.indexOf(M);if(V===-1||D===-1)return;const ye=[...te];ye[V]=M,ye[D]=se,l(ye)}else{const I=A(H),{block:R,startIndex:N,endIndex:M}=I;if(!R||R.length===0)return;if(K==="up"){if(N===0)return;let V=N-1;for(;V>=0&&te[V].parentId;)V--;if(V<0)return;const D=A(V),{block:ye,startIndex:me}=D;if(!ye||ye.length===0)return;const B=[...te.slice(0,me),...R,...ye,...te.slice(M+1)].filter(Boolean);l(B)}else{if(M===te.length-1)return;let V=M+1;for(;V<te.length&&te[V].parentId;)V++;if(V>=te.length)return;const D=A(V),{block:ye,startIndex:me}=D;if(!ye||ye.length===0)return;const B=[...te.slice(0,N),...ye,...R,...te.slice(me+ye.length)].filter(Boolean);l(B)}}},w=()=>{if(!c.name.trim()||!c.emoji.trim())return alert("Please provide both an emoji and a name.");l([...s,c]),d(iy)},O=H=>{if(window.confirm("Delete this position? This will remove it from the global list, and any associated child positions.")){const K=s[H];let te=s.filter((se,ee)=>ee!==H);K.parentId||(te=te.filter(se=>se.parentId!==K.name)),l(te)}},z=async()=>{p("saving");try{const H=s.map(K=>{const te={name:K.name||"",emoji:K.emoji||"",colour:K.colour||"",sortByGender:!!K.sortByGender,isCustom:!!K.isCustom,customLabels:K.customLabels||[]};return K.parentId&&(te.parentId=K.parentId),te});await n(W_(H)).unwrap(),p("success"),setTimeout(()=>p("idle"),2e3)}catch(H){console.error("Save Error:",H),alert("Error saving: "+(H instanceof Error?H.message:"Unknown error")),p("idle")}},j=H=>{l(K=>{const te={...iy,parentId:H},se=K.findIndex(I=>I.name===H);if(se===-1)return[...K,te];let ee=se;for(;ee+1<K.length&&K[ee+1].parentId===H;)ee++;return[...K.slice(0,ee+1),te,...K.slice(ee+1)]})},G=()=>{l(e)};return i?T.jsx(su,{}):T.jsxs("div",{className:Ul.managementWrapper,children:[T.jsxs(ev,{headers:[{text:"Name",minWidth:80,width:200,textAlign:"center",isSticky:!0},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Colour",minWidth:100,textAlign:"center"},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Custom Headings",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[s.map((H,K)=>T.jsx(K9,{position:H,index:K,onUpdate:v,onMove:S,onDelete:O,onAddChild:j,isFirst:K===0,isLast:K===s.length-1},`${H.emoji}-${K}`)),T.jsxs("tr",{className:"pos-row-new",children:[T.jsx(li,{name:"new-name",value:c.name,placeholder:"Position Name",onChange:H=>d({...c,name:H.target.value}),isSticky:!0}),T.jsx(ln,{textAlign:"center",children:""}),T.jsx(li,{name:"new-emoji",value:c.emoji,placeholder:"",onChange:H=>d({...c,emoji:H.target.value})}),T.jsx($C,{name:"new-colour",value:c.colour,placeholder:"#FFFFFF",onChange:H=>d({...c,colour:H.target.value})}),T.jsx(ln,{textAlign:"center",children:T.jsx(Rr,{colour:c.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.sortByGender,onClick:()=>d({...c,sortByGender:!c.sortByGender}),isDisabled:c.isCustom,children:c.sortByGender?"YES":"NO"})}),T.jsx(ln,{textAlign:"center",children:T.jsx(Rr,{colour:c.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.isCustom,onClick:()=>d({...c,isCustom:!c.isCustom}),children:c.isCustom?"YES":"NO"})}),T.jsx(ln,{textAlign:"center",children:T.jsxs(hr,{onClick:w,disabled:!c.name.trim()||!c.emoji.trim(),children:[T.jsx(oh,{size:16,style:{marginRight:"6px"}}),"Add"]})}),T.jsx(ln,{textAlign:"center",children:""})]})]}),y&&T.jsx(ou,{label:"Unsaved position changes",saveText:"Save Positions",onSave:z,onCancel:G,isSaving:m==="saving"})]})},W9="_modalOverlay_ah937_1",J9="_modalContent_ah937_16",Z9="_modalHeader_ah937_34",e5="_closeButton_ah937_48",t5="_modalBody_ah937_64",n5="_modalFooter_ah937_70",El={modalOverlay:W9,modalContent:J9,modalHeader:Z9,closeButton:e5,modalBody:t5,modalFooter:n5},KC=({isOpen:n,onClose:e,title:t,children:i,footer:s})=>{if(P.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),!n)return null;const l=T.jsx("div",{className:El.modalOverlay,onClick:e,children:T.jsxs("div",{className:El.modalContent,onClick:c=>c.stopPropagation(),children:[T.jsxs("div",{className:El.modalHeader,children:[T.jsx("h2",{children:t}),T.jsx("button",{className:El.closeButton,onClick:e,"aria-label":"Close",children:T.jsx(J_,{size:24})})]}),T.jsx("div",{className:El.modalBody,children:i}),s&&T.jsx("div",{className:El.modalFooter,children:s})]})});return BA.createPortal(l,document.body)},r5=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],YC=({isOpen:n,onClose:e,team:t,availablePositions:i,onTogglePosition:s,onToggleDay:l,onToggleAllowAbsence:c})=>{var d;return T.jsxs(KC,{isOpen:n,onClose:e,title:`Edit Team: ${t.name}`,children:[T.jsxs("div",{className:In.formGroup,children:[T.jsx("label",{className:In.sectionLabel,children:"Allowed Positions"}),T.jsx(jl,{children:(d=i==null?void 0:i.filter(m=>!m.parentId))==null?void 0:d.map(m=>{var y;const p=(y=t.positions)==null?void 0:y.some(v=>v.name===m.name);return T.jsxs(Rr,{colour:m.colour,isActive:p,onClick:()=>s(m),children:[m.emoji," ",m.name]},m.name)})})]}),T.jsxs("div",{className:In.formGroup,children:[T.jsx("label",{className:In.sectionLabel,children:"Preferred Days"}),T.jsx(jl,{children:r5.map(m=>{var y;const p=(y=t.preferredDays)==null?void 0:y.includes(m);return T.jsx(Rr,{isActive:p,onClick:()=>l(m),children:m},m)})})]}),T.jsxs("div",{className:In.formGroup,children:[T.jsx("label",{className:In.sectionLabel,children:"Feature Settings"}),T.jsx(jl,{children:T.jsxs(Rr,{isActive:t.allowAbsence!==!1,onClick:()=>c(t.allowAbsence===!1),colour:t.allowAbsence!==!1?"var(--color-success-dark)":"var(--color-text-dim)",children:["Allow Absence: ",t.allowAbsence!==!1?"YES":"NO"]})})]})]})},tv=({primaryText:n,secondaryText:e,onClick:t})=>T.jsxs("button",{className:In.summaryButton,onClick:t,type:"button",children:[T.jsx("span",{className:In.summaryPrimary,children:n}),e&&T.jsxs(T.Fragment,{children:[T.jsx("span",{className:In.summarySeparator,children:""}),T.jsx("span",{className:In.summarySecondary,children:e})]})]}),i5=({team:n,teamIndex:e,availablePositions:t,onUpdate:i,onMove:s,onDelete:l,onTogglePosition:c,onToggleDay:d,onToggleAllowAbsence:m,isFirst:p,isLast:y})=>{var z;const[v,S]=P.useState(!1),w=()=>{if(!n.positions||n.positions.length===0)return"No positions";const j=n.positions.slice(0,3).map(H=>T.jsx("span",{className:In.summaryEmoji,children:H.emoji},H.name)),G=n.positions.length-3;return T.jsxs(T.Fragment,{children:[j,G>0&&T.jsxs("span",{className:In.remainingCount,children:["+",G]})]})},O=()=>!n.preferredDays||n.preferredDays.length===0?"No days":n.preferredDays.map(j=>j.substring(0,3)).join(", ");return T.jsxs(T.Fragment,{children:[T.jsxs("tr",{children:[T.jsx(li,{name:`team-name-${e}`,value:n.name,onChange:j=>i(e,"name",j.target.value),isSticky:!0}),T.jsx(ln,{children:T.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[T.jsx(hr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(e,"up"),disabled:p,children:""}),T.jsx(hr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>s(e,"down"),disabled:y,children:""})]})}),T.jsx(li,{name:`team-emoji-${e}`,value:n.emoji,onChange:j=>i(e,"emoji",j.target.value)}),T.jsx(li,{name:`team-maxConflict-${e}`,value:((z=n.maxConflict)==null?void 0:z.toString())||"1",type:"number",onChange:j=>i(e,"maxConflict",parseInt(j.target.value)||1)}),T.jsx(ln,{children:T.jsx(tv,{primaryText:w(),secondaryText:O(),onClick:()=>S(!0)})}),T.jsx(ln,{children:T.jsxs(hr,{variant:"delete",size:"small",onClick:()=>l(e),children:[T.jsx(VC,{size:14,style:{marginRight:"6px"}}),"Delete"]})})]}),T.jsx(YC,{isOpen:v,onClose:()=>S(!1),team:n,availablePositions:t,onTogglePosition:j=>c(e,j),onToggleDay:j=>d(e,j),onToggleAllowAbsence:j=>m(e,j)})]})},nA={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1,allowAbsence:!0},a5=()=>{var ye;const n=Gr(),{teams:e,fetched:t,loading:i}=at(me=>me.teams),{positions:s,fetched:l,loading:c}=at(me=>me.positions),[d,m]=P.useState(e),[p,y]=P.useState(nA),[v,S]=P.useState("idle"),[w,O]=P.useState(!1),z=P.useMemo(()=>{const me=B=>B.map(J=>({name:J.name||"",emoji:J.emoji||"",positions:(J.positions||[]).map(ue=>ue.name).sort(),preferredDays:[...J.preferredDays||[]].sort(),maxConflict:J.maxConflict||1,allowAbsence:J.allowAbsence!==!1}));return JSON.stringify(me(d))!==JSON.stringify(me(e))},[d,e]);P.useEffect(()=>{t||n(_o()),l||n(xa())},[n,t,l]),P.useEffect(()=>{m(e)},[e]);const j=(me,B,J)=>{const ue=[...d];ue[me]={...ue[me],[B]:J},m(ue)},G=(me,B)=>{const J=[...d],ue=B==="up"?me-1:me+1;if(ue<0||ue>=J.length)return;const ce=J[me];J[me]=J[ue],J[ue]=ce,m(J)},H=(me,B)=>{const J=d.map((ue,ce)=>{if(ce!==me)return ue;const be=ue.positions||[],L=be.find(re=>re.name===B.name)?be.filter(re=>re.name!==B.name):[...be,B];return{...ue,positions:L}});m(J)},K=(me,B)=>{const J=d.map((ue,ce)=>{if(ce!==me)return ue;const be=ue.preferredDays||[],L=be.includes(B)?be.filter(re=>re!==B):[...be,B];return{...ue,preferredDays:L}});m(J)},te=(me,B)=>{const J=d.map((ue,ce)=>ce!==me?ue:{...ue,allowAbsence:B});m(J)},se=me=>{const B=p.positions||[],J=B.some(ue=>ue.name===me.name)?B.filter(ue=>ue.name!==me.name):[...B,me];y({...p,positions:J})},ee=me=>{const B=p.preferredDays||[],J=B.includes(me)?B.filter(ue=>ue!==me):[...B,me];y({...p,preferredDays:J})},A=me=>{y({...p,allowAbsence:me})},I=()=>{if(!p.name.trim()||!p.emoji.trim())return alert("Please provide both an emoji and a name for the team.");m([...d,p]),y(nA)},R=me=>{window.confirm("Are you sure you want to delete this team?")&&m(d.filter((B,J)=>J!==me))},N=async()=>{S("saving");try{const me=d.map(B=>({name:B.name||"",emoji:B.emoji||"",maxConflict:B.maxConflict||1,allowAbsence:B.allowAbsence!==!1,preferredDays:B.preferredDays||[],positions:(B.positions||[]).map(J=>({name:J.name||"",emoji:J.emoji||"",colour:J.colour||"",sortByGender:!!J.sortByGender,isCustom:!!J.isCustom,customLabels:J.customLabels||[],...J.parentId?{parentId:J.parentId}:{}}))}));await n(rd(me)).unwrap(),S("success"),setTimeout(()=>S("idle"),2e3)}catch(me){console.error("Save Error:",me),alert("Error saving: "+(me instanceof Error?me.message:"Unknown error")),S("idle")}},M=()=>{m(e)};if(i||c)return T.jsx(su,{});const V=()=>{if(!p.positions||p.positions.length===0)return"No positions";const me=p.positions.slice(0,3).map(J=>T.jsx("span",{className:Ul.summaryEmoji,children:J.emoji},J.name)),B=p.positions.length-3;return T.jsxs(T.Fragment,{children:[me,B>0&&T.jsxs("span",{className:Ul.remainingCount,children:["+",B]})]})},D=()=>!p.preferredDays||p.preferredDays.length===0?"No days":p.preferredDays.map(me=>me.substring(0,3)).join(", ");return T.jsxs("div",{className:Ul.managementWrapper,children:[T.jsxs(ev,{headers:[{text:"Name",minWidth:100,width:120,textAlign:"center",isSticky:!0},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Conflicts",width:60,textAlign:"center"},{text:"Config",minWidth:180,textAlign:"center"},{text:"",width:50}],children:[d.map((me,B)=>T.jsx(i5,{team:me,teamIndex:B,availablePositions:s,onUpdate:j,onMove:G,onDelete:R,onTogglePosition:H,onToggleDay:K,onToggleAllowAbsence:te,isFirst:B===0,isLast:B===d.length-1},`${me.emoji}-${B}`)),T.jsxs("tr",{className:"team-row-new",children:[T.jsx(li,{name:"new-team-name",value:p.name,placeholder:"Team Name",onChange:me=>y({...p,name:me.target.value}),isSticky:!0}),T.jsx(ln,{children:""}),T.jsx(li,{name:"new-team-emoji",value:p.emoji,placeholder:"",onChange:me=>y({...p,emoji:me.target.value})}),T.jsx(li,{name:"new-team-maxConflict",value:((ye=p.maxConflict)==null?void 0:ye.toString())||"1",type:"number",onChange:me=>y({...p,maxConflict:parseInt(me.target.value)||1})}),T.jsx(ln,{children:T.jsx(tv,{primaryText:V(),secondaryText:D(),onClick:()=>O(!0)})}),T.jsx(ln,{children:T.jsxs(hr,{onClick:I,disabled:!p.name.trim()||!p.emoji.trim(),children:[T.jsx(oh,{size:16,style:{marginRight:"6px"}}),"Add"]})})]})]}),T.jsx(YC,{isOpen:w,onClose:()=>O(!1),team:p,availablePositions:s,onTogglePosition:se,onToggleDay:ee,onToggleAllowAbsence:A}),z&&T.jsx(ou,{label:"Unsaved team changes",saveText:"Save All Team Changes",onSave:N,onCancel:M,isSaving:v==="saving"})]})},s5={allUsers:[],originalUsers:[],loading:!1,saving:!1,error:null},cd=$r("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=So(mn,"users"),i=Ao(t),s=await nh(i),l=[];return s.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),hd=$r("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=L1(mn);n.forEach(i=>{const{id:s,...l}=i;l.teamPositions&&(l.indexedAssignments=jC(l.teamPositions)),t.update(Fr(mn,"users",s),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),QC=Oo({name:"userManagement",initialState:s5,reducers:{updateUserField(n,e){const{id:t,field:i,value:s}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[i]=s)},toggleUserTeam(n,e){const{userId:t,teamName:i}=e.payload,s=n.allUsers.find(l=>l.id===t);if(s){const l=s.teams||[],c=l.includes(i)?l.filter(d=>d!==i):[...l,i];s.teams=c,s.teamPositions||(s.teamPositions={}),c.includes(i)?s.teamPositions[i]||(s.teamPositions[i]=[]):delete s.teamPositions[i]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:i,posName:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[i]||(l.teamPositions[i]=[]);const c=l.teamPositions[i],d=c.includes(s)?c.filter(m=>m!==s):[...c,s];l.teamPositions[i]=d}},moveUserTeam(n,e){const{userId:t,teamName:i,direction:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l&&l.teams){const c=l.teams.indexOf(i);if(c===-1)return;const d=s==="up"?c-1:c+1;if(d<0||d>=l.teams.length)return;const m=[...l.teams];[m[c],m[d]]=[m[d],m[c]],l.teams=m}},resetUserChanges(n){n.allUsers=JSON.parse(JSON.stringify(n.originalUsers))}},extraReducers:n=>{n.addCase(cd.pending,e=>{e.loading=!0,e.error=null}).addCase(cd.fulfilled,(e,t)=>{e.allUsers=t.payload,e.originalUsers=JSON.parse(JSON.stringify(t.payload)),e.loading=!1}).addCase(cd.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(hd.pending,e=>{e.saving=!0,e.error=null}).addCase(hd.fulfilled,e=>{e.saving=!1,e.originalUsers=JSON.parse(JSON.stringify(e.allUsers))}).addCase(hd.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:o5,toggleUserTeam:l5,toggleUserTeamPosition:u5,moveUserTeam:c5,resetUserChanges:h5}=QC.actions,f5=QC.reducer,d5=({isOpen:n,onClose:e,user:t,availableTeams:i})=>{const s=Gr(),{positions:l}=at(p=>p.positions),c=p=>{s(l5({userId:t.id,teamName:p}))},d=(p,y)=>{s(u5({userId:t.id,teamName:p,posName:y}))},m=(p,y)=>{s(c5({userId:t.id,teamName:p,direction:y}))};return T.jsx(KC,{isOpen:n,onClose:e,title:`Edit Assignments: ${t.name}`,children:T.jsx(FC,{selectedTeams:t.teams||[],teamPositions:t.teamPositions||{},onToggleTeam:c,onTogglePosition:d,onMoveTeam:m,availableTeams:i,globalPositions:l})})},m5=({user:n,availableTeams:e,adminEmail:t})=>{const i=Gr(),{positions:s}=at(y=>y.positions),[l,c]=P.useState(!1),d=(y,v)=>{i(o5({id:n.id,field:y,value:v}))},m=()=>{if(!n.teams||n.teams.length===0)return"No teams";const y=n.teams.map(w=>{const O=e.find(z=>z.name===w);return(O==null?void 0:O.emoji)||""}).filter(Boolean),v=y.slice(0,3).map((w,O)=>T.jsx("span",{className:In.summaryEmoji,children:w},O)),S=y.length-3;return T.jsxs(T.Fragment,{children:[v,S>0&&T.jsxs("span",{className:In.remainingCount,children:["+",S]})]})},p=()=>n.teamPositions?Object.entries(n.teamPositions).reduce((y,[,v])=>{const S=v.filter(w=>{const O=s.find(z=>z.name===w);return!(O!=null&&O.isCustom)});return y+S.length},0):0;return T.jsxs(T.Fragment,{children:[T.jsxs("tr",{children:[T.jsx(li,{name:`name-${n.id}`,value:n.name||"",onChange:y=>d("name",y.target.value),isSticky:!0}),T.jsx(li,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),T.jsx(ln,{children:T.jsxs("select",{name:`gender-${n.id}`,className:Aa.formSelect,value:n.gender,onChange:y=>d("gender",y.target.value),children:[T.jsx("option",{value:"",children:"-"}),T.jsx("option",{value:"Male",children:"Male"}),T.jsx("option",{value:"Female",children:"Female"})]})}),T.jsx(ln,{children:T.jsx(tv,{primaryText:m(),secondaryText:`(${p()} pos)`,onClick:()=>c(!0)})}),T.jsx(ln,{textAlign:"center",children:T.jsx(Rr,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>d("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),T.jsx(ln,{textAlign:"center",children:T.jsx(Rr,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>d("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),T.jsx(ln,{textAlign:"center",children:T.jsx(Rr,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>d("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id),T.jsx(d5,{isOpen:l,onClose:()=>c(!1),user:n,availableTeams:e})]})},p5=()=>{const n=Gr(),{allUsers:e,originalUsers:t,loading:i,saving:s,error:l}=at(y=>y.userManagement),c=at(y=>y.teams.teams),d=P.useMemo(()=>{const y=v=>v.map(S=>({name:S.name||"",gender:S.gender||"",teams:[...S.teams||[]].sort(),teamPositions:Object.keys(S.teamPositions||{}).sort().reduce((w,O)=>{var z;return w[O]=[...((z=S.teamPositions)==null?void 0:z[O])||[]].sort(),w},{}),isActive:!!S.isActive,isApproved:!!S.isApproved,isAdmin:!!S.isAdmin}));return JSON.stringify(y(e))!==JSON.stringify(y(t))},[e,t]);P.useEffect(()=>{n(cd())},[n]);const m=()=>{n(hd(e))},p=()=>{n(h5())};return i?T.jsx(su,{}):l?T.jsxs("div",{children:["Error: ",l]}):T.jsxs("div",{className:Ul.managementWrapper,children:[T.jsx(ev,{headers:[{text:"Name",minWidth:70,width:100,textAlign:"center",isSticky:!0},{text:"Email",minWidth:170,textAlign:"center"},{text:"Gender",minWidth:90,textAlign:"center"},{text:"Assignments",minWidth:150,textAlign:"center"},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(y=>T.jsx(m5,{user:y,availableTeams:c,adminEmail:"chris.sm.kang542@gmail.com"},y.id))}),d&&T.jsx(ou,{label:"Unsaved user changes",saveText:"Save All User Changes",onSave:m,onCancel:p,isSaving:s})]})},g5=()=>{const{userData:n}=at(t=>t.auth),{section:e}=Fc();return n?T.jsxs("div",{className:Ul.settingsContainer,children:[e===xl.PROFILE&&T.jsx(GC,{}),e===xl.USER_MANAGEMENT&&(n.isAdmin?T.jsx(p5,{}):T.jsx("p",{children:"Access Denied"})),e===xl.TEAMS&&(n.isAdmin?T.jsx(a5,{}):T.jsx("p",{children:"Access Denied"})),e===xl.POSITIONS&&(n.isAdmin?T.jsx(X9,{}):T.jsx("p",{children:"Access Denied"}))]}):null},y5=[{path:"/",element:T.jsx(Yk,{})},{path:"/login",element:T.jsx(I6,{})},{path:"/guest",element:T.jsx(E6,{})},{path:"/app",element:T.jsx(XL,{}),children:[{path:"",element:T.jsx(L3,{}),children:[{path:"dashboard",element:T.jsx(OU,{})},{path:"roster/:teamName?/:positionName?",element:T.jsx(B9,{})},{path:"settings/:section?",element:T.jsx(g5,{})}]}]}];let rA=!1;const _5=n=>{if(!rA){rA=!0;let e;RV(Ql,t=>{if(t){n.dispatch(n6(t)),n.dispatch(ld(t.uid));const i=Fr(mn,"users",t.uid);e=V1(i,s=>{if(s.exists()){const l=s.data();n.dispatch(r6(l))}})}else n.dispatch(i6()),e&&e()})}return e=>t=>e(t)},v5=wL({reducer:{auth:a6,positions:KL,roster:Q3,rosterView:tU,teams:QL,ui:Pj,userManagement:f5},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(_5)}),E5=ED(y5);UI.createRoot(document.getElementById("root")).render(T.jsx(aA.StrictMode,{children:T.jsx(ex,{store:v5,children:T.jsx(VD,{children:T.jsx(Fk,{children:T.jsx(MD,{router:E5})})})})}));
