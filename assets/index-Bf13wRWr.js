var GI=Object.defineProperty;var $I=(n,e,t)=>e in n?GI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var xg=(n,e,t)=>$I(n,typeof e!="symbol"?e+"":e,t);function KI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function vA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ng={exports:{}},sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function YI(){if(Mb)return sc;Mb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return sc.Fragment=e,sc.jsx=t,sc.jsxs=t,sc}var Pb;function QI(){return Pb||(Pb=1,Ng.exports=YI()),Ng.exports}var b=QI(),Dg={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb;function XI(){if(kb)return Ke;kb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),T=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=T&&H[T]||H["@@iterator"],typeof H=="function"?H:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,M={};function L(H,ie,ge){this.props=H,this.context=ie,this.refs=M,this.updater=ge||N}L.prototype.isReactComponent={},L.prototype.setState=function(H,ie){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ie,"setState")},L.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function U(){}U.prototype=L.prototype;function q(H,ie,ge){this.props=H,this.context=ie,this.refs=M,this.updater=ge||N}var te=q.prototype=new U;te.constructor=q,V(te,L.prototype),te.isPureReactComponent=!0;var ee=Array.isArray;function $(){}var S={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function R(H,ie,ge){var Ee=ge.ref;return{$$typeof:n,type:H,key:ie,ref:Ee!==void 0?Ee:null,props:ge}}function k(H,ie){return R(H.type,ie,H.props)}function P(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function j(H){var ie={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ge){return ie[ge]})}var x=/\/+/g;function le(H,ie){return typeof H=="object"&&H!==null&&H.key!=null?j(""+H.key):ie.toString(36)}function me(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then($,$):(H.status="pending",H.then(function(ie){H.status==="pending"&&(H.status="fulfilled",H.value=ie)},function(ie){H.status==="pending"&&(H.status="rejected",H.reason=ie)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function G(H,ie,ge,Ee,ue){var ve=typeof H;(ve==="undefined"||ve==="boolean")&&(H=null);var Ae=!1;if(H===null)Ae=!0;else switch(ve){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(H.$$typeof){case n:case e:Ae=!0;break;case y:return Ae=H._init,G(Ae(H._payload),ie,ge,Ee,ue)}}if(Ae)return ue=ue(H),Ae=Ee===""?"."+le(H,0):Ee,ee(ue)?(ge="",Ae!=null&&(ge=Ae.replace(x,"$&/")+"/"),G(ue,ie,ge,"",function(mt){return mt})):ue!=null&&(P(ue)&&(ue=k(ue,ge+(ue.key==null||H&&H.key===ue.key?"":(""+ue.key).replace(x,"$&/")+"/")+Ae)),ie.push(ue)),1;Ae=0;var ke=Ee===""?".":Ee+":";if(ee(H))for(var je=0;je<H.length;je++)Ee=H[je],ve=ke+le(Ee,je),Ae+=G(Ee,ie,ge,ve,ue);else if(je=w(H),typeof je=="function")for(H=je.call(H),je=0;!(Ee=H.next()).done;)Ee=Ee.value,ve=ke+le(Ee,je++),Ae+=G(Ee,ie,ge,ve,ue);else if(ve==="object"){if(typeof H.then=="function")return G(me(H),ie,ge,Ee,ue);throw ie=String(H),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function he(H,ie,ge){if(H==null)return H;var Ee=[],ue=0;return G(H,Ee,"","",function(ve){return ie.call(ge,ve,ue++)}),Ee}function pe(H){if(H._status===-1){var ie=H._result;ie=ie(),ie.then(function(ge){(H._status===0||H._status===-1)&&(H._status=1,H._result=ge)},function(ge){(H._status===0||H._status===-1)&&(H._status=2,H._result=ge)}),H._status===-1&&(H._status=0,H._result=ie)}if(H._status===1)return H._result.default;throw H._result}var Pe=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Oe={map:he,forEach:function(H,ie,ge){he(H,function(){ie.apply(this,arguments)},ge)},count:function(H){var ie=0;return he(H,function(){ie++}),ie},toArray:function(H){return he(H,function(ie){return ie})||[]},only:function(H){if(!P(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ke.Activity=v,Ke.Children=Oe,Ke.Component=L,Ke.Fragment=t,Ke.Profiler=a,Ke.PureComponent=q,Ke.StrictMode=i,Ke.Suspense=m,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(H){return S.H.useMemoCache(H)}},Ke.cache=function(H){return function(){return H.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(H,ie,ge){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Ee=V({},H.props),ue=H.key;if(ie!=null)for(ve in ie.key!==void 0&&(ue=""+ie.key),ie)!C.call(ie,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&ie.ref===void 0||(Ee[ve]=ie[ve]);var ve=arguments.length-2;if(ve===1)Ee.children=ge;else if(1<ve){for(var Ae=Array(ve),ke=0;ke<ve;ke++)Ae[ke]=arguments[ke+2];Ee.children=Ae}return R(H.type,ue,Ee)},Ke.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},Ke.createElement=function(H,ie,ge){var Ee,ue={},ve=null;if(ie!=null)for(Ee in ie.key!==void 0&&(ve=""+ie.key),ie)C.call(ie,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(ue[Ee]=ie[Ee]);var Ae=arguments.length-2;if(Ae===1)ue.children=ge;else if(1<Ae){for(var ke=Array(Ae),je=0;je<Ae;je++)ke[je]=arguments[je+2];ue.children=ke}if(H&&H.defaultProps)for(Ee in Ae=H.defaultProps,Ae)ue[Ee]===void 0&&(ue[Ee]=Ae[Ee]);return R(H,ve,ue)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(H){return{$$typeof:f,render:H}},Ke.isValidElement=P,Ke.lazy=function(H){return{$$typeof:y,_payload:{_status:-1,_result:H},_init:pe}},Ke.memo=function(H,ie){return{$$typeof:p,type:H,compare:ie===void 0?null:ie}},Ke.startTransition=function(H){var ie=S.T,ge={};S.T=ge;try{var Ee=H(),ue=S.S;ue!==null&&ue(ge,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then($,Pe)}catch(ve){Pe(ve)}finally{ie!==null&&ge.types!==null&&(ie.types=ge.types),S.T=ie}},Ke.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Ke.use=function(H){return S.H.use(H)},Ke.useActionState=function(H,ie,ge){return S.H.useActionState(H,ie,ge)},Ke.useCallback=function(H,ie){return S.H.useCallback(H,ie)},Ke.useContext=function(H){return S.H.useContext(H)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(H,ie){return S.H.useDeferredValue(H,ie)},Ke.useEffect=function(H,ie){return S.H.useEffect(H,ie)},Ke.useEffectEvent=function(H){return S.H.useEffectEvent(H)},Ke.useId=function(){return S.H.useId()},Ke.useImperativeHandle=function(H,ie,ge){return S.H.useImperativeHandle(H,ie,ge)},Ke.useInsertionEffect=function(H,ie){return S.H.useInsertionEffect(H,ie)},Ke.useLayoutEffect=function(H,ie){return S.H.useLayoutEffect(H,ie)},Ke.useMemo=function(H,ie){return S.H.useMemo(H,ie)},Ke.useOptimistic=function(H,ie){return S.H.useOptimistic(H,ie)},Ke.useReducer=function(H,ie,ge){return S.H.useReducer(H,ie,ge)},Ke.useRef=function(H){return S.H.useRef(H)},Ke.useState=function(H){return S.H.useState(H)},Ke.useSyncExternalStore=function(H,ie,ge){return S.H.useSyncExternalStore(H,ie,ge)},Ke.useTransition=function(){return S.H.useTransition()},Ke.version="19.2.4",Ke}var Vb;function Gd(){return Vb||(Vb=1,Dg.exports=XI()),Dg.exports}var O=Gd();const EA=vA(O),WI=KI({__proto__:null,default:EA},[O]);var Og={exports:{}},ac={},Mg={exports:{}},Pg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lb;function JI(){return Lb||(Lb=1,(function(n){function e(G,he){var pe=G.length;G.push(he);e:for(;0<pe;){var Pe=pe-1>>>1,Oe=G[Pe];if(0<a(Oe,he))G[Pe]=he,G[pe]=Oe,pe=Pe;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var he=G[0],pe=G.pop();if(pe!==he){G[0]=pe;e:for(var Pe=0,Oe=G.length,H=Oe>>>1;Pe<H;){var ie=2*(Pe+1)-1,ge=G[ie],Ee=ie+1,ue=G[Ee];if(0>a(ge,pe))Ee<Oe&&0>a(ue,ge)?(G[Pe]=ue,G[Ee]=pe,Pe=Ee):(G[Pe]=ge,G[ie]=pe,Pe=ie);else if(Ee<Oe&&0>a(ue,pe))G[Pe]=ue,G[Ee]=pe,Pe=Ee;else break e}}return he}function a(G,he){var pe=G.sortIndex-he.sortIndex;return pe!==0?pe:G.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],p=[],y=1,v=null,T=3,w=!1,N=!1,V=!1,M=!1,L=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function te(G){for(var he=t(p);he!==null;){if(he.callback===null)i(p);else if(he.startTime<=G)i(p),he.sortIndex=he.expirationTime,e(m,he);else break;he=t(p)}}function ee(G){if(V=!1,te(G),!N)if(t(m)!==null)N=!0,$||($=!0,j());else{var he=t(p);he!==null&&me(ee,he.startTime-G)}}var $=!1,S=-1,C=5,R=-1;function k(){return M?!0:!(n.unstable_now()-R<C)}function P(){if(M=!1,$){var G=n.unstable_now();R=G;var he=!0;try{e:{N=!1,V&&(V=!1,U(S),S=-1),w=!0;var pe=T;try{t:{for(te(G),v=t(m);v!==null&&!(v.expirationTime>G&&k());){var Pe=v.callback;if(typeof Pe=="function"){v.callback=null,T=v.priorityLevel;var Oe=Pe(v.expirationTime<=G);if(G=n.unstable_now(),typeof Oe=="function"){v.callback=Oe,te(G),he=!0;break t}v===t(m)&&i(m),te(G)}else i(m);v=t(m)}if(v!==null)he=!0;else{var H=t(p);H!==null&&me(ee,H.startTime-G),he=!1}}break e}finally{v=null,T=pe,w=!1}he=void 0}}finally{he?j():$=!1}}}var j;if(typeof q=="function")j=function(){q(P)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,le=x.port2;x.port1.onmessage=P,j=function(){le.postMessage(null)}}else j=function(){L(P,0)};function me(G,he){S=L(function(){G(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(G){switch(T){case 1:case 2:case 3:var he=3;break;default:he=T}var pe=T;T=he;try{return G()}finally{T=pe}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(G,he){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var pe=T;T=G;try{return he()}finally{T=pe}},n.unstable_scheduleCallback=function(G,he,pe){var Pe=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Pe+pe:Pe):pe=Pe,G){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=pe+Oe,G={id:y++,callback:he,priorityLevel:G,startTime:pe,expirationTime:Oe,sortIndex:-1},pe>Pe?(G.sortIndex=pe,e(p,G),t(m)===null&&G===t(p)&&(V?(U(S),S=-1):V=!0,me(ee,pe-Pe))):(G.sortIndex=Oe,e(m,G),N||w||(N=!0,$||($=!0,j()))),G},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(G){var he=T;return function(){var pe=T;T=he;try{return G.apply(this,arguments)}finally{T=pe}}}})(Pg)),Pg}var jb;function ZI(){return jb||(jb=1,Mg.exports=JI()),Mg.exports}var kg={exports:{}},Bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub;function ex(){if(Ub)return Bn;Ub=1;var n=Gd();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:p,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Bn.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},Bn.flushSync=function(m){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=y,i.d.f()}},Bn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},Bn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Bn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:w}):y==="script"&&i.d.X(m,{crossOrigin:v,integrity:T,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Bn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},Bn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Bn.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},Bn.requestFormReset=function(m){i.d.r(m)},Bn.unstable_batchedUpdates=function(m,p){return m(p)},Bn.useFormState=function(m,p,y){return c.H.useFormState(m,p,y)},Bn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Bn.version="19.2.4",Bn}var zb;function TA(){if(zb)return kg.exports;zb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kg.exports=ex(),kg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function tx(){if(Bb)return ac;Bb=1;var n=ZI(),e=Gd(),t=TA();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var d=o.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===o)return m(d),r;if(g===u)return m(d),s;g=g.sibling}throw Error(i(188))}if(o.return!==u.return)o=d,u=g;else{for(var E=!1,I=d.child;I;){if(I===o){E=!0,o=d,u=g;break}if(I===u){E=!0,u=d,o=g;break}I=I.sibling}if(!E){for(I=g.child;I;){if(I===o){E=!0,o=g,u=d;break}if(I===u){E=!0,u=g,o=d;break}I=I.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),q=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function j(r){return r===null||typeof r!="object"?null:(r=P&&r[P]||r["@@iterator"],typeof r=="function"?r:null)}var x=Symbol.for("react.client.reference");function le(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===x?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case V:return"Fragment";case L:return"Profiler";case M:return"StrictMode";case ee:return"Suspense";case $:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case q:return r.displayName||"Context";case U:return(r._context.displayName||"Context")+".Consumer";case te:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case S:return s=r.displayName||null,s!==null?s:le(r.type)||"Memo";case C:s=r._payload,r=r._init;try{return le(r(s))}catch{}}return null}var me=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Pe=[],Oe=-1;function H(r){return{current:r}}function ie(r){0>Oe||(r.current=Pe[Oe],Pe[Oe]=null,Oe--)}function ge(r,s){Oe++,Pe[Oe]=r.current,r.current=s}var Ee=H(null),ue=H(null),ve=H(null),Ae=H(null);function ke(r,s){switch(ge(ve,s),ge(ue,r),ge(Ee,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?nb(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=nb(s),r=rb(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ie(Ee),ge(Ee,r)}function je(){ie(Ee),ie(ue),ie(ve)}function mt(r){r.memoizedState!==null&&ge(Ae,r);var s=Ee.current,o=rb(s,r.type);s!==o&&(ge(ue,r),ge(Ee,o))}function Et(r){ue.current===r&&(ie(Ee),ie(ue)),Ae.current===r&&(ie(Ae),tc._currentValue=pe)}var be,Fe;function Qe(r){if(be===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);be=s&&s[1]||"",Fe=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+be+r+Fe}var $t=!1;function Dt(r,s){if(!r||$t)return"";$t=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(re){var Z=re}Reflect.construct(r,[],ce)}else{try{ce.call()}catch(re){Z=re}r.call(ce.prototype)}}else{try{throw Error()}catch(re){Z=re}(ce=r())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(re){if(re&&Z&&typeof re.stack=="string")return[re.stack,Z.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],I=g[1];if(E&&I){var B=E.split(`
`),W=I.split(`
`);for(d=u=0;u<B.length&&!B[u].includes("DetermineComponentFrameRoot");)u++;for(;d<W.length&&!W[d].includes("DetermineComponentFrameRoot");)d++;if(u===B.length||d===W.length)for(u=B.length-1,d=W.length-1;1<=u&&0<=d&&B[u]!==W[d];)d--;for(;1<=u&&0<=d;u--,d--)if(B[u]!==W[d]){if(u!==1||d!==1)do if(u--,d--,0>d||B[u]!==W[d]){var se=`
`+B[u].replace(" at new "," at ");return r.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",r.displayName)),se}while(1<=u&&0<=d);break}}}finally{$t=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Qe(o):""}function Qn(r,s){switch(r.tag){case 26:case 27:case 5:return Qe(r.type);case 16:return Qe("Lazy");case 13:return r.child!==s&&s!==null?Qe("Suspense Fallback"):Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return Dt(r.type,!1);case 11:return Dt(r.type.render,!1);case 1:return Dt(r.type,!0);case 31:return Qe("Activity");default:return""}}function ir(r){try{var s="",o=null;do s+=Qn(r,o),o=r,r=r.return;while(r);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ot=Object.prototype.hasOwnProperty,Jt=n.unstable_scheduleCallback,zt=n.unstable_cancelCallback,Ur=n.unstable_shouldYield,Fi=n.unstable_requestPaint,Bt=n.unstable_now,Er=n.unstable_getCurrentPriorityLevel,Ds=n.unstable_ImmediatePriority,qi=n.unstable_UserBlockingPriority,An=n.unstable_NormalPriority,Tr=n.unstable_LowPriority,ja=n.unstable_IdlePriority,Lo=n.log,Os=n.unstable_setDisableYieldValue,br=null,Mt=null;function Xn(r){if(typeof Lo=="function"&&Os(r),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(br,r)}catch{}}var Kt=Math.clz32?Math.clz32:za,Ua=Math.log,Ms=Math.LN2;function za(r){return r>>>=0,r===0?32:31-(Ua(r)/Ms|0)|0}var Wn=256,vi=262144,Yt=4194304;function zr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Sr(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var d=0,g=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var I=u&134217727;return I!==0?(u=I&~g,u!==0?d=zr(u):(E&=I,E!==0?d=zr(E):o||(o=I&~r,o!==0&&(d=zr(o))))):(I=u&~g,I!==0?d=zr(I):E!==0?d=zr(E):o||(o=u&~r,o!==0&&(d=zr(o)))),d===0?0:s!==0&&s!==d&&(s&g)===0&&(g=d&-d,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:d}function Ar(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function jo(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gi(){var r=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),r}function Jn(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Ei(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function du(r,s,o,u,d,g){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var I=r.entanglements,B=r.expirationTimes,W=r.hiddenUpdates;for(o=E&~o;0<o;){var se=31-Kt(o),ce=1<<se;I[se]=0,B[se]=-1;var Z=W[se];if(Z!==null)for(W[se]=null,se=0;se<Z.length;se++){var re=Z[se];re!==null&&(re.lane&=-536870913)}o&=~ce}u!==0&&$i(r,u,0),g!==0&&d===0&&r.tag!==0&&(r.suspendedLanes|=g&~(E&~s))}function $i(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Kt(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function z(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Kt(o),d=1<<u;d&s|r[u]&s&&(r[u]|=s),o&=~d}}function K(r,s){var o=s&-s;return o=(o&42)!==0?1:J(o),(o&(r.suspendedLanes|s))!==0?0:o}function J(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function de(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ye(){var r=he.p;return r!==0?r:(r=window.event,r===void 0?32:Cb(r.type))}function Ce(r,s){var o=he.p;try{return he.p=r,s()}finally{he.p=o}}var xe=Math.random().toString(36).slice(2),_e="__reactFiber$"+xe,Se="__reactProps$"+xe,Ie="__reactContainer$"+xe,Be="__reactEvents$"+xe,Me="__reactListeners$"+xe,Ge="__reactHandles$"+xe,tt="__reactResources$"+xe,wt="__reactMarker$"+xe;function Ht(r){delete r[_e],delete r[Se],delete r[Be],delete r[Me],delete r[Ge]}function Vt(r){var s=r[_e];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Ie]||o[_e]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=cb(r);r!==null;){if(o=r[_e])return o;r=cb(r)}return s}r=o,o=r.parentNode}return null}function Je(r){if(r=r[_e]||r[Ie]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function Lt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function wn(r){var s=r[tt];return s||(s=r[tt]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function jt(r){r[wt]=!0}var sr=new Set,Un={};function ar(r,s){zn(r,s),zn(r+"Capture",s)}function zn(r,s){for(Un[r]=s,r=0;r<s.length;r++)sr.add(s[r])}var wr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ti={},bi={};function rt(r){return Ot.call(bi,r)?!0:Ot.call(Ti,r)?!1:wr.test(r)?bi[r]=!0:(Ti[r]=!0,!1)}function Zt(r,s,o){if(rt(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function hn(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Ct(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}function Ze(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Cr(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ps(r,s,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,g=u.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){o=""+E,g.call(this,E)}}),Object.defineProperty(r,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(E){o=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function yt(r){if(!r._valueTracker){var s=Cr(r)?"checked":"value";r._valueTracker=Ps(r,s,""+r[s])}}function Ba(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=Cr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function Si(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ha=/[\n"\\]/g;function or(r){return r.replace(Ha,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Uo(r,s,o,u,d,g,E,I){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),s!=null?E==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Ze(s)):r.value!==""+Ze(s)&&(r.value=""+Ze(s)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),s!=null?mu(r,E,Ze(s)):o!=null?mu(r,E,Ze(o)):u!=null&&r.removeAttribute("value"),d==null&&g!=null&&(r.defaultChecked=!!g),d!=null&&(r.checked=d&&typeof d!="function"&&typeof d!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+Ze(I):r.removeAttribute("name")}function dh(r,s,o,u,d,g,E,I){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){yt(r);return}o=o!=null?""+Ze(o):"",s=s!=null?""+Ze(s):o,I||s===r.value||(r.value=s),r.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=I?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E),yt(r)}function mu(r,s,o){s==="number"&&Si(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function ks(r,s,o,u){if(r=r.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<r.length;o++)d=s.hasOwnProperty("$"+r[o].value),r[o].selected!==d&&(r[o].selected=d),d&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Ze(o),s=null,d=0;d<r.length;d++){if(r[d].value===o){r[d].selected=!0,u&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function mh(r,s,o){if(s!=null&&(s=""+Ze(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+Ze(o):""}function Vs(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(me(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Ze(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),yt(r)}function lr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var ph=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pu(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||ph.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function gu(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&pu(r,d,u)}else for(var g in s)s.hasOwnProperty(g)&&pu(r,g,s[g])}function zo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ls=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bo(r){return Ls.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ii(){}var yu=null;function Br(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var js=null,Ai=null;function Fa(r){var s=Je(r);if(s&&(r=s.stateNode)){var o=r[Se]||null;e:switch(r=s.stateNode,s.type){case"input":if(Uo(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+or(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var d=u[Se]||null;if(!d)throw Error(i(90));Uo(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Ba(u)}break e;case"textarea":mh(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&ks(r,!!o.multiple,s,!1)}}}var Ho=!1;function Us(r,s,o){if(Ho)return r(s,o);Ho=!0;try{var u=r(s);return u}finally{if(Ho=!1,(js!==null||Ai!==null)&&(cf(),js&&(s=js,r=Ai,Ai=js=null,Fa(s),r)))for(s=0;s<r.length;s++)Fa(r[s])}}function si(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Se]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qa=!1;if(Hr)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){qa=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{qa=!1}var wi=null,_u=null,Ga=null;function vu(){if(Ga)return Ga;var r,s=_u,o=s.length,u,d="value"in wi?wi.value:wi.textContent,g=d.length;for(r=0;r<o&&s[r]===d[r];r++);var E=o-r;for(u=1;u<=E&&s[o-u]===d[g-u];u++);return Ga=d.slice(r,1<u?1-u:void 0)}function $a(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Ki(){return!0}function ai(){return!1}function xn(r){function s(o,u,d,g,E){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(o=r[I],this[I]=o?o(g):g[I]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ki:ai,this.isPropagationStopped=ai,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),s}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ci=xn(Yi),zs=v({},Yi,{view:0,detail:0}),Eu=xn(zs),Bs,Fo,Ri,qo=v({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ri&&(Ri&&r.type==="mousemove"?(Bs=r.screenX-Ri.screenX,Fo=r.screenY-Ri.screenY):Fo=Bs=0,Ri=r),Bs)},movementY:function(r){return"movementY"in r?r.movementY:Fo}}),Tu=xn(qo),Ka=v({},qo,{dataTransfer:0}),yh=xn(Ka),_h=v({},zs,{relatedTarget:0}),Ya=xn(_h),bu=v({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),vh=xn(bu),Go=v({},Yi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Eh=xn(Go),Th=v({},Yi,{data:0}),Ii=xn(Th),bh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wh(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Ah[r])?!!s[r]:!1}function Hs(){return wh}var Zn=v({},zs,{key:function(r){if(r.key){var s=bh[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=$a(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Sh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hs,charCode:function(r){return r.type==="keypress"?$a(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?$a(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ch=xn(Zn),Rh=v({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qi=xn(Rh),h=v({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hs}),_=xn(h),A=v({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=xn(A),Q=v({},qo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=xn(Q),Te=v({},Yi,{newState:0,oldState:0}),Xe=xn(Te),on=[9,13,27,32],_t=Hr&&"CompositionEvent"in window,Qt=null;Hr&&"documentMode"in document&&(Qt=document.documentMode);var Fr=Hr&&"TextEvent"in window&&!Qt,xi=Hr&&(!_t||Qt&&8<Qt&&11>=Qt),oi=" ",li=!1;function Qa(r,s){switch(r){case"keyup":return on.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $o(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ko=!1;function pR(r,s){switch(r){case"compositionend":return $o(s);case"keypress":return s.which!==32?null:(li=!0,oi);case"textInput":return r=s.data,r===oi&&li?null:r;default:return null}}function gR(r,s){if(Ko)return r==="compositionend"||!_t&&Qa(r,s)?(r=vu(),Ga=_u=wi=null,Ko=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return xi&&s.locale!=="ko"?null:s.data;default:return null}}var yR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dv(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!yR[r.type]:s==="textarea"}function mv(r,s,o,u){js?Ai?Ai.push(u):Ai=[u]:js=u,s=yf(s,"onChange"),0<s.length&&(o=new Ci("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Su=null,Au=null;function _R(r){XT(r,0)}function Ih(r){var s=Lt(r);if(Ba(s))return r}function pv(r,s){if(r==="change")return s}var gv=!1;if(Hr){var Vm;if(Hr){var Lm="oninput"in document;if(!Lm){var yv=document.createElement("div");yv.setAttribute("oninput","return;"),Lm=typeof yv.oninput=="function"}Vm=Lm}else Vm=!1;gv=Vm&&(!document.documentMode||9<document.documentMode)}function _v(){Su&&(Su.detachEvent("onpropertychange",vv),Au=Su=null)}function vv(r){if(r.propertyName==="value"&&Ih(Au)){var s=[];mv(s,Au,r,Br(r)),Us(_R,s)}}function vR(r,s,o){r==="focusin"?(_v(),Su=s,Au=o,Su.attachEvent("onpropertychange",vv)):r==="focusout"&&_v()}function ER(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ih(Au)}function TR(r,s){if(r==="click")return Ih(s)}function bR(r,s){if(r==="input"||r==="change")return Ih(s)}function SR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Rr=typeof Object.is=="function"?Object.is:SR;function wu(r,s){if(Rr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!Ot.call(s,d)||!Rr(r[d],s[d]))return!1}return!0}function Ev(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Tv(r,s){var o=Ev(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ev(o)}}function bv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?bv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Sv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Si(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Si(r.document)}return s}function jm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var AR=Hr&&"documentMode"in document&&11>=document.documentMode,Yo=null,Um=null,Cu=null,zm=!1;function Av(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;zm||Yo==null||Yo!==Si(u)||(u=Yo,"selectionStart"in u&&jm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Cu&&wu(Cu,u)||(Cu=u,u=yf(Um,"onSelect"),0<u.length&&(s=new Ci("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=Yo)))}function Xa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Qo={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionrun:Xa("Transition","TransitionRun"),transitionstart:Xa("Transition","TransitionStart"),transitioncancel:Xa("Transition","TransitionCancel"),transitionend:Xa("Transition","TransitionEnd")},Bm={},wv={};Hr&&(wv=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function Wa(r){if(Bm[r])return Bm[r];if(!Qo[r])return r;var s=Qo[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in wv)return Bm[r]=s[o];return r}var Cv=Wa("animationend"),Rv=Wa("animationiteration"),Iv=Wa("animationstart"),wR=Wa("transitionrun"),CR=Wa("transitionstart"),RR=Wa("transitioncancel"),xv=Wa("transitionend"),Nv=new Map,Hm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hm.push("scrollEnd");function ui(r,s){Nv.set(r,s),ar(s,[r])}var xh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},qr=[],Xo=0,Fm=0;function Nh(){for(var r=Xo,s=Fm=Xo=0;s<r;){var o=qr[s];qr[s++]=null;var u=qr[s];qr[s++]=null;var d=qr[s];qr[s++]=null;var g=qr[s];if(qr[s++]=null,u!==null&&d!==null){var E=u.pending;E===null?d.next=d:(d.next=E.next,E.next=d),u.pending=d}g!==0&&Dv(o,d,g)}}function Dh(r,s,o,u){qr[Xo++]=r,qr[Xo++]=s,qr[Xo++]=o,qr[Xo++]=u,Fm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function qm(r,s,o,u){return Dh(r,s,o,u),Oh(r)}function Ja(r,s){return Dh(r,null,null,s),Oh(r)}function Dv(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var d=!1,g=r.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(d=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,d&&s!==null&&(d=31-Kt(o),r=g.hiddenUpdates,u=r[d],u===null?r[d]=[s]:u.push(s),s.lane=o|536870912),g):null}function Oh(r){if(50<Yu)throw Yu=0,Zp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Wo={};function IR(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(r,s,o,u){return new IR(r,s,o,u)}function Gm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Xi(r,s){var o=r.alternate;return o===null?(o=Ir(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Ov(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Mh(r,s,o,u,d,g){var E=0;if(u=r,typeof r=="function")Gm(r)&&(E=1);else if(typeof r=="string")E=MI(r,o,Ee.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=Ir(31,o,s,d),r.elementType=R,r.lanes=g,r;case V:return Za(o.children,d,g,s);case M:E=8,d|=24;break;case L:return r=Ir(12,o,s,d|2),r.elementType=L,r.lanes=g,r;case ee:return r=Ir(13,o,s,d),r.elementType=ee,r.lanes=g,r;case $:return r=Ir(19,o,s,d),r.elementType=$,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case q:E=10;break e;case U:E=9;break e;case te:E=11;break e;case S:E=14;break e;case C:E=16,u=null;break e}E=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Ir(E,o,s,d),s.elementType=r,s.type=u,s.lanes=g,s}function Za(r,s,o,u){return r=Ir(7,r,u,s),r.lanes=o,r}function $m(r,s,o){return r=Ir(6,r,null,s),r.lanes=o,r}function Mv(r){var s=Ir(18,null,null,0);return s.stateNode=r,s}function Km(r,s,o){return s=Ir(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Pv=new WeakMap;function Gr(r,s){if(typeof r=="object"&&r!==null){var o=Pv.get(r);return o!==void 0?o:(s={value:r,source:s,stack:ir(s)},Pv.set(r,s),s)}return{value:r,source:s,stack:ir(s)}}var Jo=[],Zo=0,Ph=null,Ru=0,$r=[],Kr=0,Fs=null,Ni=1,Di="";function Wi(r,s){Jo[Zo++]=Ru,Jo[Zo++]=Ph,Ph=r,Ru=s}function kv(r,s,o){$r[Kr++]=Ni,$r[Kr++]=Di,$r[Kr++]=Fs,Fs=r;var u=Ni;r=Di;var d=32-Kt(u)-1;u&=~(1<<d),o+=1;var g=32-Kt(s)+d;if(30<g){var E=d-d%5;g=(u&(1<<E)-1).toString(32),u>>=E,d-=E,Ni=1<<32-Kt(s)+d|o<<d|u,Di=g+r}else Ni=1<<g|o<<d|u,Di=r}function Ym(r){r.return!==null&&(Wi(r,1),kv(r,1,0))}function Qm(r){for(;r===Ph;)Ph=Jo[--Zo],Jo[Zo]=null,Ru=Jo[--Zo],Jo[Zo]=null;for(;r===Fs;)Fs=$r[--Kr],$r[Kr]=null,Di=$r[--Kr],$r[Kr]=null,Ni=$r[--Kr],$r[Kr]=null}function Vv(r,s){$r[Kr++]=Ni,$r[Kr++]=Di,$r[Kr++]=Fs,Ni=s.id,Di=s.overflow,Fs=r}var Nn=null,Ft=null,ft=!1,qs=null,Yr=!1,Xm=Error(i(519));function Gs(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Iu(Gr(s,r)),Xm}function Lv(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[_e]=r,s[Se]=u,o){case"dialog":st("cancel",s),st("close",s);break;case"iframe":case"object":case"embed":st("load",s);break;case"video":case"audio":for(o=0;o<Xu.length;o++)st(Xu[o],s);break;case"source":st("error",s);break;case"img":case"image":case"link":st("error",s),st("load",s);break;case"details":st("toggle",s);break;case"input":st("invalid",s),dh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":st("invalid",s);break;case"textarea":st("invalid",s),Vs(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||eb(s.textContent,o)?(u.popover!=null&&(st("beforetoggle",s),st("toggle",s)),u.onScroll!=null&&st("scroll",s),u.onScrollEnd!=null&&st("scrollend",s),u.onClick!=null&&(s.onclick=ii),s=!0):s=!1,s||Gs(r,!0)}function jv(r){for(Nn=r.return;Nn;)switch(Nn.tag){case 5:case 31:case 13:Yr=!1;return;case 27:case 3:Yr=!0;return;default:Nn=Nn.return}}function el(r){if(r!==Nn)return!1;if(!ft)return jv(r),ft=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||mg(r.type,r.memoizedProps)),o=!o),o&&Ft&&Gs(r),jv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ft=ub(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ft=ub(r)}else s===27?(s=Ft,sa(r.type)?(r=vg,vg=null,Ft=r):Ft=s):Ft=Nn?Xr(r.stateNode.nextSibling):null;return!0}function eo(){Ft=Nn=null,ft=!1}function Wm(){var r=qs;return r!==null&&(fr===null?fr=r:fr.push.apply(fr,r),qs=null),r}function Iu(r){qs===null?qs=[r]:qs.push(r)}var Jm=H(null),to=null,Ji=null;function $s(r,s,o){ge(Jm,s._currentValue),s._currentValue=o}function Zi(r){r._currentValue=Jm.current,ie(Jm)}function Zm(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function ep(r,s,o,u){var d=r.child;for(d!==null&&(d.return=r);d!==null;){var g=d.dependencies;if(g!==null){var E=d.child;g=g.firstContext;e:for(;g!==null;){var I=g;g=d;for(var B=0;B<s.length;B++)if(I.context===s[B]){g.lanes|=o,I=g.alternate,I!==null&&(I.lanes|=o),Zm(g.return,o,r),u||(E=null);break e}g=I.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(i(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),Zm(E,o,r),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===r){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function tl(r,s,o,u){r=null;for(var d=s,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var I=d.type;Rr(d.pendingProps.value,E.value)||(r!==null?r.push(I):r=[I])}}else if(d===Ae.current){if(E=d.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(r!==null?r.push(tc):r=[tc])}d=d.return}r!==null&&ep(s,r,o,u),s.flags|=262144}function kh(r){for(r=r.firstContext;r!==null;){if(!Rr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function no(r){to=r,Ji=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Dn(r){return Uv(to,r)}function Vh(r,s){return to===null&&no(r),Uv(r,s)}function Uv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Ji===null){if(r===null)throw Error(i(308));Ji=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Ji=Ji.next=s;return o}var xR=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},NR=n.unstable_scheduleCallback,DR=n.unstable_NormalPriority,fn={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tp(){return{controller:new xR,data:new Map,refCount:0}}function xu(r){r.refCount--,r.refCount===0&&NR(DR,function(){r.controller.abort()})}var Nu=null,np=0,nl=0,rl=null;function OR(r,s){if(Nu===null){var o=Nu=[];np=0,nl=sg(),rl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return np++,s.then(zv,zv),s}function zv(){if(--np===0&&Nu!==null){rl!==null&&(rl.status="fulfilled");var r=Nu;Nu=null,nl=0,rl=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function MR(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Bv=G.S;G.S=function(r,s){AT=Bt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&OR(r,s),Bv!==null&&Bv(r,s)};var ro=H(null);function rp(){var r=ro.current;return r!==null?r:Pt.pooledCache}function Lh(r,s){s===null?ge(ro,ro.current):ge(ro,s.pool)}function Hv(){var r=rp();return r===null?null:{parent:fn._currentValue,pool:r}}var il=Error(i(460)),ip=Error(i(474)),jh=Error(i(542)),Uh={then:function(){}};function Fv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function qv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(ii,ii),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,$v(r),r;default:if(typeof s.status=="string")s.then(ii,ii);else{if(r=Pt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,$v(r),r}throw so=s,il}}function io(r){try{var s=r._init;return s(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(so=o,il):o}}var so=null;function Gv(){if(so===null)throw Error(i(459));var r=so;return so=null,r}function $v(r){if(r===il||r===jh)throw Error(i(483))}var sl=null,Du=0;function zh(r){var s=Du;return Du+=1,sl===null&&(sl=[]),qv(sl,r,s)}function Ou(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Bh(r,s){throw s.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Kv(r){function s(Y,F){if(r){var X=Y.deletions;X===null?(Y.deletions=[F],Y.flags|=16):X.push(F)}}function o(Y,F){if(!r)return null;for(;F!==null;)s(Y,F),F=F.sibling;return null}function u(Y){for(var F=new Map;Y!==null;)Y.key!==null?F.set(Y.key,Y):F.set(Y.index,Y),Y=Y.sibling;return F}function d(Y,F){return Y=Xi(Y,F),Y.index=0,Y.sibling=null,Y}function g(Y,F,X){return Y.index=X,r?(X=Y.alternate,X!==null?(X=X.index,X<F?(Y.flags|=67108866,F):X):(Y.flags|=67108866,F)):(Y.flags|=1048576,F)}function E(Y){return r&&Y.alternate===null&&(Y.flags|=67108866),Y}function I(Y,F,X,ae){return F===null||F.tag!==6?(F=$m(X,Y.mode,ae),F.return=Y,F):(F=d(F,X),F.return=Y,F)}function B(Y,F,X,ae){var Ve=X.type;return Ve===V?se(Y,F,X.props.children,ae,X.key):F!==null&&(F.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===C&&io(Ve)===F.type)?(F=d(F,X.props),Ou(F,X),F.return=Y,F):(F=Mh(X.type,X.key,X.props,null,Y.mode,ae),Ou(F,X),F.return=Y,F)}function W(Y,F,X,ae){return F===null||F.tag!==4||F.stateNode.containerInfo!==X.containerInfo||F.stateNode.implementation!==X.implementation?(F=Km(X,Y.mode,ae),F.return=Y,F):(F=d(F,X.children||[]),F.return=Y,F)}function se(Y,F,X,ae,Ve){return F===null||F.tag!==7?(F=Za(X,Y.mode,ae,Ve),F.return=Y,F):(F=d(F,X),F.return=Y,F)}function ce(Y,F,X){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=$m(""+F,Y.mode,X),F.return=Y,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return X=Mh(F.type,F.key,F.props,null,Y.mode,X),Ou(X,F),X.return=Y,X;case N:return F=Km(F,Y.mode,X),F.return=Y,F;case C:return F=io(F),ce(Y,F,X)}if(me(F)||j(F))return F=Za(F,Y.mode,X,null),F.return=Y,F;if(typeof F.then=="function")return ce(Y,zh(F),X);if(F.$$typeof===q)return ce(Y,Vh(Y,F),X);Bh(Y,F)}return null}function Z(Y,F,X,ae){var Ve=F!==null?F.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Ve!==null?null:I(Y,F,""+X,ae);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return X.key===Ve?B(Y,F,X,ae):null;case N:return X.key===Ve?W(Y,F,X,ae):null;case C:return X=io(X),Z(Y,F,X,ae)}if(me(X)||j(X))return Ve!==null?null:se(Y,F,X,ae,null);if(typeof X.then=="function")return Z(Y,F,zh(X),ae);if(X.$$typeof===q)return Z(Y,F,Vh(Y,X),ae);Bh(Y,X)}return null}function re(Y,F,X,ae,Ve){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Y=Y.get(X)||null,I(F,Y,""+ae,Ve);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case w:return Y=Y.get(ae.key===null?X:ae.key)||null,B(F,Y,ae,Ve);case N:return Y=Y.get(ae.key===null?X:ae.key)||null,W(F,Y,ae,Ve);case C:return ae=io(ae),re(Y,F,X,ae,Ve)}if(me(ae)||j(ae))return Y=Y.get(X)||null,se(F,Y,ae,Ve,null);if(typeof ae.then=="function")return re(Y,F,X,zh(ae),Ve);if(ae.$$typeof===q)return re(Y,F,X,Vh(F,ae),Ve);Bh(F,ae)}return null}function Ne(Y,F,X,ae){for(var Ve=null,pt=null,De=F,et=F=0,ot=null;De!==null&&et<X.length;et++){De.index>et?(ot=De,De=null):ot=De.sibling;var gt=Z(Y,De,X[et],ae);if(gt===null){De===null&&(De=ot);break}r&&De&&gt.alternate===null&&s(Y,De),F=g(gt,F,et),pt===null?Ve=gt:pt.sibling=gt,pt=gt,De=ot}if(et===X.length)return o(Y,De),ft&&Wi(Y,et),Ve;if(De===null){for(;et<X.length;et++)De=ce(Y,X[et],ae),De!==null&&(F=g(De,F,et),pt===null?Ve=De:pt.sibling=De,pt=De);return ft&&Wi(Y,et),Ve}for(De=u(De);et<X.length;et++)ot=re(De,Y,et,X[et],ae),ot!==null&&(r&&ot.alternate!==null&&De.delete(ot.key===null?et:ot.key),F=g(ot,F,et),pt===null?Ve=ot:pt.sibling=ot,pt=ot);return r&&De.forEach(function(ca){return s(Y,ca)}),ft&&Wi(Y,et),Ve}function ze(Y,F,X,ae){if(X==null)throw Error(i(151));for(var Ve=null,pt=null,De=F,et=F=0,ot=null,gt=X.next();De!==null&&!gt.done;et++,gt=X.next()){De.index>et?(ot=De,De=null):ot=De.sibling;var ca=Z(Y,De,gt.value,ae);if(ca===null){De===null&&(De=ot);break}r&&De&&ca.alternate===null&&s(Y,De),F=g(ca,F,et),pt===null?Ve=ca:pt.sibling=ca,pt=ca,De=ot}if(gt.done)return o(Y,De),ft&&Wi(Y,et),Ve;if(De===null){for(;!gt.done;et++,gt=X.next())gt=ce(Y,gt.value,ae),gt!==null&&(F=g(gt,F,et),pt===null?Ve=gt:pt.sibling=gt,pt=gt);return ft&&Wi(Y,et),Ve}for(De=u(De);!gt.done;et++,gt=X.next())gt=re(De,Y,et,gt.value,ae),gt!==null&&(r&&gt.alternate!==null&&De.delete(gt.key===null?et:gt.key),F=g(gt,F,et),pt===null?Ve=gt:pt.sibling=gt,pt=gt);return r&&De.forEach(function(qI){return s(Y,qI)}),ft&&Wi(Y,et),Ve}function Nt(Y,F,X,ae){if(typeof X=="object"&&X!==null&&X.type===V&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case w:e:{for(var Ve=X.key;F!==null;){if(F.key===Ve){if(Ve=X.type,Ve===V){if(F.tag===7){o(Y,F.sibling),ae=d(F,X.props.children),ae.return=Y,Y=ae;break e}}else if(F.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===C&&io(Ve)===F.type){o(Y,F.sibling),ae=d(F,X.props),Ou(ae,X),ae.return=Y,Y=ae;break e}o(Y,F);break}else s(Y,F);F=F.sibling}X.type===V?(ae=Za(X.props.children,Y.mode,ae,X.key),ae.return=Y,Y=ae):(ae=Mh(X.type,X.key,X.props,null,Y.mode,ae),Ou(ae,X),ae.return=Y,Y=ae)}return E(Y);case N:e:{for(Ve=X.key;F!==null;){if(F.key===Ve)if(F.tag===4&&F.stateNode.containerInfo===X.containerInfo&&F.stateNode.implementation===X.implementation){o(Y,F.sibling),ae=d(F,X.children||[]),ae.return=Y,Y=ae;break e}else{o(Y,F);break}else s(Y,F);F=F.sibling}ae=Km(X,Y.mode,ae),ae.return=Y,Y=ae}return E(Y);case C:return X=io(X),Nt(Y,F,X,ae)}if(me(X))return Ne(Y,F,X,ae);if(j(X)){if(Ve=j(X),typeof Ve!="function")throw Error(i(150));return X=Ve.call(X),ze(Y,F,X,ae)}if(typeof X.then=="function")return Nt(Y,F,zh(X),ae);if(X.$$typeof===q)return Nt(Y,F,Vh(Y,X),ae);Bh(Y,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,F!==null&&F.tag===6?(o(Y,F.sibling),ae=d(F,X),ae.return=Y,Y=ae):(o(Y,F),ae=$m(X,Y.mode,ae),ae.return=Y,Y=ae),E(Y)):o(Y,F)}return function(Y,F,X,ae){try{Du=0;var Ve=Nt(Y,F,X,ae);return sl=null,Ve}catch(De){if(De===il||De===jh)throw De;var pt=Ir(29,De,null,Y.mode);return pt.lanes=ae,pt.return=Y,pt}finally{}}}var ao=Kv(!0),Yv=Kv(!1),Ks=!1;function sp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ap(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ys(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Qs(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(vt&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Oh(r),Dv(r,null,o),s}return Dh(r,u,s,o),Oh(r)}function Mu(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,z(r,o)}}function op(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?d=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?d=g=s:g=g.next=s}else d=g=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var lp=!1;function Pu(){if(lp){var r=rl;if(r!==null)throw r}}function ku(r,s,o,u){lp=!1;var d=r.updateQueue;Ks=!1;var g=d.firstBaseUpdate,E=d.lastBaseUpdate,I=d.shared.pending;if(I!==null){d.shared.pending=null;var B=I,W=B.next;B.next=null,E===null?g=W:E.next=W,E=B;var se=r.alternate;se!==null&&(se=se.updateQueue,I=se.lastBaseUpdate,I!==E&&(I===null?se.firstBaseUpdate=W:I.next=W,se.lastBaseUpdate=B))}if(g!==null){var ce=d.baseState;E=0,se=W=B=null,I=g;do{var Z=I.lane&-536870913,re=Z!==I.lane;if(re?(at&Z)===Z:(u&Z)===Z){Z!==0&&Z===nl&&(lp=!0),se!==null&&(se=se.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ne=r,ze=I;Z=s;var Nt=o;switch(ze.tag){case 1:if(Ne=ze.payload,typeof Ne=="function"){ce=Ne.call(Nt,ce,Z);break e}ce=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=ze.payload,Z=typeof Ne=="function"?Ne.call(Nt,ce,Z):Ne,Z==null)break e;ce=v({},ce,Z);break e;case 2:Ks=!0}}Z=I.callback,Z!==null&&(r.flags|=64,re&&(r.flags|=8192),re=d.callbacks,re===null?d.callbacks=[Z]:re.push(Z))}else re={lane:Z,tag:I.tag,payload:I.payload,callback:I.callback,next:null},se===null?(W=se=re,B=ce):se=se.next=re,E|=Z;if(I=I.next,I===null){if(I=d.shared.pending,I===null)break;re=I,I=re.next,re.next=null,d.lastBaseUpdate=re,d.shared.pending=null}}while(!0);se===null&&(B=ce),d.baseState=B,d.firstBaseUpdate=W,d.lastBaseUpdate=se,g===null&&(d.shared.lanes=0),ea|=E,r.lanes=E,r.memoizedState=ce}}function Qv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Xv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Qv(o[r],s)}var al=H(null),Hh=H(0);function Wv(r,s){r=ls,ge(Hh,r),ge(al,s),ls=r|s.baseLanes}function up(){ge(Hh,ls),ge(al,al.current)}function cp(){ls=Hh.current,ie(al),ie(Hh)}var xr=H(null),Qr=null;function Xs(r){var s=r.alternate;ge(ln,ln.current&1),ge(xr,r),Qr===null&&(s===null||al.current!==null||s.memoizedState!==null)&&(Qr=r)}function hp(r){ge(ln,ln.current),ge(xr,r),Qr===null&&(Qr=r)}function Jv(r){r.tag===22?(ge(ln,ln.current),ge(xr,r),Qr===null&&(Qr=r)):Ws()}function Ws(){ge(ln,ln.current),ge(xr,xr.current)}function Nr(r){ie(xr),Qr===r&&(Qr=null),ie(ln)}var ln=H(0);function Fh(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||yg(o)||_g(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var es=0,We=null,It=null,dn=null,qh=!1,ol=!1,oo=!1,Gh=0,Vu=0,ll=null,PR=0;function rn(){throw Error(i(321))}function fp(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Rr(r[o],s[o]))return!1;return!0}function dp(r,s,o,u,d,g){return es=g,We=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,G.H=r===null||r.memoizedState===null?kE:Ip,oo=!1,g=o(u,d),oo=!1,ol&&(g=eE(s,o,u,d)),Zv(r),g}function Zv(r){G.H=Uu;var s=It!==null&&It.next!==null;if(es=0,dn=It=We=null,qh=!1,Vu=0,ll=null,s)throw Error(i(300));r===null||mn||(r=r.dependencies,r!==null&&kh(r)&&(mn=!0))}function eE(r,s,o,u){We=r;var d=0;do{if(ol&&(ll=null),Vu=0,ol=!1,25<=d)throw Error(i(301));if(d+=1,dn=It=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}G.H=VE,g=s(o,u)}while(ol);return g}function kR(){var r=G.H,s=r.useState()[0];return s=typeof s.then=="function"?Lu(s):s,r=r.useState()[0],(It!==null?It.memoizedState:null)!==r&&(We.flags|=1024),s}function mp(){var r=Gh!==0;return Gh=0,r}function pp(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function gp(r){if(qh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qh=!1}es=0,dn=It=We=null,ol=!1,Vu=Gh=0,ll=null}function er(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?We.memoizedState=dn=r:dn=dn.next=r,dn}function un(){if(It===null){var r=We.alternate;r=r!==null?r.memoizedState:null}else r=It.next;var s=dn===null?We.memoizedState:dn.next;if(s!==null)dn=s,It=r;else{if(r===null)throw We.alternate===null?Error(i(467)):Error(i(310));It=r,r={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},dn===null?We.memoizedState=dn=r:dn=dn.next=r}return dn}function $h(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lu(r){var s=Vu;return Vu+=1,ll===null&&(ll=[]),r=qv(ll,r,s),s=We,(dn===null?s.memoizedState:dn.next)===null&&(s=s.alternate,G.H=s===null||s.memoizedState===null?kE:Ip),r}function Kh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Lu(r);if(r.$$typeof===q)return Dn(r)}throw Error(i(438,String(r)))}function yp(r){var s=null,o=We.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=We.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=$h(),We.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=k;return s.index++,o}function ts(r,s){return typeof s=="function"?s(r):s}function Yh(r){var s=un();return _p(s,It,r)}function _p(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var d=r.baseQueue,g=u.pending;if(g!==null){if(d!==null){var E=d.next;d.next=g.next,g.next=E}s.baseQueue=d=g,u.pending=null}if(g=r.baseState,d===null)r.memoizedState=g;else{s=d.next;var I=E=null,B=null,W=s,se=!1;do{var ce=W.lane&-536870913;if(ce!==W.lane?(at&ce)===ce:(es&ce)===ce){var Z=W.revertLane;if(Z===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ce===nl&&(se=!0);else if((es&Z)===Z){W=W.next,Z===nl&&(se=!0);continue}else ce={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},B===null?(I=B=ce,E=g):B=B.next=ce,We.lanes|=Z,ea|=Z;ce=W.action,oo&&o(g,ce),g=W.hasEagerState?W.eagerState:o(g,ce)}else Z={lane:ce,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},B===null?(I=B=Z,E=g):B=B.next=Z,We.lanes|=ce,ea|=ce;W=W.next}while(W!==null&&W!==s);if(B===null?E=g:B.next=I,!Rr(g,r.memoizedState)&&(mn=!0,se&&(o=rl,o!==null)))throw o;r.memoizedState=g,r.baseState=E,r.baseQueue=B,u.lastRenderedState=g}return d===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function vp(r){var s=un(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,d=o.pending,g=s.memoizedState;if(d!==null){o.pending=null;var E=d=d.next;do g=r(g,E.action),E=E.next;while(E!==d);Rr(g,s.memoizedState)||(mn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,u]}function tE(r,s,o){var u=We,d=un(),g=ft;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var E=!Rr((It||d).memoizedState,o);if(E&&(d.memoizedState=o,mn=!0),d=d.queue,bp(iE.bind(null,u,d,r),[r]),d.getSnapshot!==s||E||dn!==null&&dn.memoizedState.tag&1){if(u.flags|=2048,ul(9,{destroy:void 0},rE.bind(null,u,d,o,s),null),Pt===null)throw Error(i(349));g||(es&127)!==0||nE(u,s,o)}return o}function nE(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=We.updateQueue,s===null?(s=$h(),We.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function rE(r,s,o,u){s.value=o,s.getSnapshot=u,sE(s)&&aE(r)}function iE(r,s,o){return o(function(){sE(s)&&aE(r)})}function sE(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Rr(r,o)}catch{return!0}}function aE(r){var s=Ja(r,2);s!==null&&dr(s,r,2)}function Ep(r){var s=er();if(typeof r=="function"){var o=r;if(r=o(),oo){Xn(!0);try{o()}finally{Xn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:r},s}function oE(r,s,o,u){return r.baseState=o,_p(r,It,typeof u=="function"?u:ts)}function VR(r,s,o,u,d){if(Wh(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:d,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};G.T!==null?o(!0):g.isTransition=!1,u(g),o=s.pending,o===null?(g.next=s.pending=g,lE(s,g)):(g.next=o.next,s.pending=o.next=g)}}function lE(r,s){var o=s.action,u=s.payload,d=r.state;if(s.isTransition){var g=G.T,E={};G.T=E;try{var I=o(d,u),B=G.S;B!==null&&B(E,I),uE(r,s,I)}catch(W){Tp(r,s,W)}finally{g!==null&&E.types!==null&&(g.types=E.types),G.T=g}}else try{g=o(d,u),uE(r,s,g)}catch(W){Tp(r,s,W)}}function uE(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){cE(r,s,u)},function(u){return Tp(r,s,u)}):cE(r,s,o)}function cE(r,s,o){s.status="fulfilled",s.value=o,hE(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,lE(r,o)))}function Tp(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,hE(s),s=s.next;while(s!==u)}r.action=null}function hE(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function fE(r,s){return s}function dE(r,s){if(ft){var o=Pt.formState;if(o!==null){e:{var u=We;if(ft){if(Ft){t:{for(var d=Ft,g=Yr;d.nodeType!==8;){if(!g){d=null;break t}if(d=Xr(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Ft=Xr(d.nextSibling),u=d.data==="F!";break e}}Gs(u)}u=!1}u&&(s=o[0])}}return o=er(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fE,lastRenderedState:s},o.queue=u,o=OE.bind(null,We,u),u.dispatch=o,u=Ep(!1),g=Rp.bind(null,We,!1,u.queue),u=er(),d={state:s,dispatch:null,action:r,pending:null},u.queue=d,o=VR.bind(null,We,d,g,o),d.dispatch=o,u.memoizedState=r,[s,o,!1]}function mE(r){var s=un();return pE(s,It,r)}function pE(r,s,o){if(s=_p(r,s,fE)[0],r=Yh(ts)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Lu(s)}catch(E){throw E===il?jh:E}else u=s;s=un();var d=s.queue,g=d.dispatch;return o!==s.memoizedState&&(We.flags|=2048,ul(9,{destroy:void 0},LR.bind(null,d,o),null)),[u,g,r]}function LR(r,s){r.action=s}function gE(r){var s=un(),o=It;if(o!==null)return pE(s,o,r);un(),s=s.memoizedState,o=un();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function ul(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=We.updateQueue,s===null&&(s=$h(),We.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function yE(){return un().memoizedState}function Qh(r,s,o,u){var d=er();We.flags|=r,d.memoizedState=ul(1|s,{destroy:void 0},o,u===void 0?null:u)}function Xh(r,s,o,u){var d=un();u=u===void 0?null:u;var g=d.memoizedState.inst;It!==null&&u!==null&&fp(u,It.memoizedState.deps)?d.memoizedState=ul(s,g,o,u):(We.flags|=r,d.memoizedState=ul(1|s,g,o,u))}function _E(r,s){Qh(8390656,8,r,s)}function bp(r,s){Xh(2048,8,r,s)}function jR(r){We.flags|=4;var s=We.updateQueue;if(s===null)s=$h(),We.updateQueue=s,s.events=[r];else{var o=s.events;o===null?s.events=[r]:o.push(r)}}function vE(r){var s=un().memoizedState;return jR({ref:s,nextImpl:r}),function(){if((vt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function EE(r,s){return Xh(4,2,r,s)}function TE(r,s){return Xh(4,4,r,s)}function bE(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function SE(r,s,o){o=o!=null?o.concat([r]):null,Xh(4,4,bE.bind(null,s,r),o)}function Sp(){}function AE(r,s){var o=un();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&fp(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function wE(r,s){var o=un();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&fp(s,u[1]))return u[0];if(u=r(),oo){Xn(!0);try{r()}finally{Xn(!1)}}return o.memoizedState=[u,s],u}function Ap(r,s,o){return o===void 0||(es&1073741824)!==0&&(at&261930)===0?r.memoizedState=s:(r.memoizedState=o,r=CT(),We.lanes|=r,ea|=r,o)}function CE(r,s,o,u){return Rr(o,s)?o:al.current!==null?(r=Ap(r,o,u),Rr(r,s)||(mn=!0),r):(es&42)===0||(es&1073741824)!==0&&(at&261930)===0?(mn=!0,r.memoizedState=o):(r=CT(),We.lanes|=r,ea|=r,s)}function RE(r,s,o,u,d){var g=he.p;he.p=g!==0&&8>g?g:8;var E=G.T,I={};G.T=I,Rp(r,!1,s,o);try{var B=d(),W=G.S;if(W!==null&&W(I,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var se=MR(B,u);ju(r,s,se,Mr(r))}else ju(r,s,u,Mr(r))}catch(ce){ju(r,s,{then:function(){},status:"rejected",reason:ce},Mr())}finally{he.p=g,E!==null&&I.types!==null&&(E.types=I.types),G.T=E}}function UR(){}function wp(r,s,o,u){if(r.tag!==5)throw Error(i(476));var d=IE(r).queue;RE(r,d,s,pe,o===null?UR:function(){return xE(r),o(u)})}function IE(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:pe},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function xE(r){var s=IE(r);s.next===null&&(s=r.alternate.memoizedState),ju(r,s.next.queue,{},Mr())}function Cp(){return Dn(tc)}function NE(){return un().memoizedState}function DE(){return un().memoizedState}function zR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Mr();r=Ys(o);var u=Qs(s,r,o);u!==null&&(dr(u,s,o),Mu(u,s,o)),s={cache:tp()},r.payload=s;return}s=s.return}}function BR(r,s,o){var u=Mr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Wh(r)?ME(s,o):(o=qm(r,s,o,u),o!==null&&(dr(o,r,u),PE(o,s,u)))}function OE(r,s,o){var u=Mr();ju(r,s,o,u)}function ju(r,s,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Wh(r))ME(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,I=g(E,o);if(d.hasEagerState=!0,d.eagerState=I,Rr(I,E))return Dh(r,s,d,0),Pt===null&&Nh(),!1}catch{}finally{}if(o=qm(r,s,d,u),o!==null)return dr(o,r,u),PE(o,s,u),!0}return!1}function Rp(r,s,o,u){if(u={lane:2,revertLane:sg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Wh(r)){if(s)throw Error(i(479))}else s=qm(r,o,u,2),s!==null&&dr(s,r,2)}function Wh(r){var s=r.alternate;return r===We||s!==null&&s===We}function ME(r,s){ol=qh=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function PE(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,z(r,o)}}var Uu={readContext:Dn,use:Kh,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};Uu.useEffectEvent=rn;var kE={readContext:Dn,use:Kh,useCallback:function(r,s){return er().memoizedState=[r,s===void 0?null:s],r},useContext:Dn,useEffect:_E,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Qh(4194308,4,bE.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Qh(4194308,4,r,s)},useInsertionEffect:function(r,s){Qh(4,2,r,s)},useMemo:function(r,s){var o=er();s=s===void 0?null:s;var u=r();if(oo){Xn(!0);try{r()}finally{Xn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=er();if(o!==void 0){var d=o(s);if(oo){Xn(!0);try{o(s)}finally{Xn(!1)}}}else d=s;return u.memoizedState=u.baseState=d,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:d},u.queue=r,r=r.dispatch=BR.bind(null,We,r),[u.memoizedState,r]},useRef:function(r){var s=er();return r={current:r},s.memoizedState=r},useState:function(r){r=Ep(r);var s=r.queue,o=OE.bind(null,We,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Sp,useDeferredValue:function(r,s){var o=er();return Ap(o,r,s)},useTransition:function(){var r=Ep(!1);return r=RE.bind(null,We,r.queue,!0,!1),er().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=We,d=er();if(ft){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Pt===null)throw Error(i(349));(at&127)!==0||nE(u,s,o)}d.memoizedState=o;var g={value:o,getSnapshot:s};return d.queue=g,_E(iE.bind(null,u,g,r),[r]),u.flags|=2048,ul(9,{destroy:void 0},rE.bind(null,u,g,o,s),null),o},useId:function(){var r=er(),s=Pt.identifierPrefix;if(ft){var o=Di,u=Ni;o=(u&~(1<<32-Kt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Gh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=PR++,s="_"+s+"r_"+o.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Cp,useFormState:dE,useActionState:dE,useOptimistic:function(r){var s=er();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Rp.bind(null,We,!0,o),o.dispatch=s,[r,s]},useMemoCache:yp,useCacheRefresh:function(){return er().memoizedState=zR.bind(null,We)},useEffectEvent:function(r){var s=er(),o={impl:r};return s.memoizedState=o,function(){if((vt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Ip={readContext:Dn,use:Kh,useCallback:AE,useContext:Dn,useEffect:bp,useImperativeHandle:SE,useInsertionEffect:EE,useLayoutEffect:TE,useMemo:wE,useReducer:Yh,useRef:yE,useState:function(){return Yh(ts)},useDebugValue:Sp,useDeferredValue:function(r,s){var o=un();return CE(o,It.memoizedState,r,s)},useTransition:function(){var r=Yh(ts)[0],s=un().memoizedState;return[typeof r=="boolean"?r:Lu(r),s]},useSyncExternalStore:tE,useId:NE,useHostTransitionStatus:Cp,useFormState:mE,useActionState:mE,useOptimistic:function(r,s){var o=un();return oE(o,It,r,s)},useMemoCache:yp,useCacheRefresh:DE};Ip.useEffectEvent=vE;var VE={readContext:Dn,use:Kh,useCallback:AE,useContext:Dn,useEffect:bp,useImperativeHandle:SE,useInsertionEffect:EE,useLayoutEffect:TE,useMemo:wE,useReducer:vp,useRef:yE,useState:function(){return vp(ts)},useDebugValue:Sp,useDeferredValue:function(r,s){var o=un();return It===null?Ap(o,r,s):CE(o,It.memoizedState,r,s)},useTransition:function(){var r=vp(ts)[0],s=un().memoizedState;return[typeof r=="boolean"?r:Lu(r),s]},useSyncExternalStore:tE,useId:NE,useHostTransitionStatus:Cp,useFormState:gE,useActionState:gE,useOptimistic:function(r,s){var o=un();return It!==null?oE(o,It,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:yp,useCacheRefresh:DE};VE.useEffectEvent=vE;function xp(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:v({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Np={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Mr(),d=Ys(u);d.payload=s,o!=null&&(d.callback=o),s=Qs(r,d,u),s!==null&&(dr(s,r,u),Mu(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Mr(),d=Ys(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=Qs(r,d,u),s!==null&&(dr(s,r,u),Mu(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Mr(),u=Ys(o);u.tag=2,s!=null&&(u.callback=s),s=Qs(r,u,o),s!==null&&(dr(s,r,o),Mu(s,r,o))}};function LE(r,s,o,u,d,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,E):s.prototype&&s.prototype.isPureReactComponent?!wu(o,u)||!wu(d,g):!0}function jE(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&Np.enqueueReplaceState(s,s.state,null)}function lo(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=v({},o));for(var d in r)o[d]===void 0&&(o[d]=r[d])}return o}function UE(r){xh(r)}function zE(r){console.error(r)}function BE(r){xh(r)}function Jh(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function HE(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Dp(r,s,o){return o=Ys(o),o.tag=3,o.payload={element:null},o.callback=function(){Jh(r,s)},o}function FE(r){return r=Ys(r),r.tag=3,r}function qE(r,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var g=u.value;r.payload=function(){return d(g)},r.callback=function(){HE(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){HE(s,o,u),typeof d!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function HR(r,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&tl(s,o,d,!0),o=xr.current,o!==null){switch(o.tag){case 31:case 13:return Qr===null?hf():o.alternate===null&&sn===0&&(sn=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===Uh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),ng(r,u,d)),!1;case 22:return o.flags|=65536,u===Uh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),ng(r,u,d)),!1}throw Error(i(435,o.tag))}return ng(r,u,d),hf(),!1}if(ft)return s=xr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Xm&&(r=Error(i(422),{cause:u}),Iu(Gr(r,o)))):(u!==Xm&&(s=Error(i(423),{cause:u}),Iu(Gr(s,o))),r=r.current.alternate,r.flags|=65536,d&=-d,r.lanes|=d,u=Gr(u,o),d=Dp(r.stateNode,u,d),op(r,d),sn!==4&&(sn=2)),!1;var g=Error(i(520),{cause:u});if(g=Gr(g,o),Ku===null?Ku=[g]:Ku.push(g),sn!==4&&(sn=2),s===null)return!0;u=Gr(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=d&-d,o.lanes|=r,r=Dp(o.stateNode,u,r),op(o,r),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ta===null||!ta.has(g))))return o.flags|=65536,d&=-d,o.lanes|=d,d=FE(d),qE(d,r,o,u),op(o,d),!1}o=o.return}while(o!==null);return!1}var Op=Error(i(461)),mn=!1;function On(r,s,o,u){s.child=r===null?Yv(s,null,o,u):ao(s,r.child,o,u)}function GE(r,s,o,u,d){o=o.render;var g=s.ref;if("ref"in u){var E={};for(var I in u)I!=="ref"&&(E[I]=u[I])}else E=u;return no(s),u=dp(r,s,o,E,g,d),I=mp(),r!==null&&!mn?(pp(r,s,d),ns(r,s,d)):(ft&&I&&Ym(s),s.flags|=1,On(r,s,u,d),s.child)}function $E(r,s,o,u,d){if(r===null){var g=o.type;return typeof g=="function"&&!Gm(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,KE(r,s,g,u,d)):(r=Mh(o.type,null,u,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!zp(r,d)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:wu,o(E,u)&&r.ref===s.ref)return ns(r,s,d)}return s.flags|=1,r=Xi(g,u),r.ref=s.ref,r.return=s,s.child=r}function KE(r,s,o,u,d){if(r!==null){var g=r.memoizedProps;if(wu(g,u)&&r.ref===s.ref)if(mn=!1,s.pendingProps=u=g,zp(r,d))(r.flags&131072)!==0&&(mn=!0);else return s.lanes=r.lanes,ns(r,s,d)}return Mp(r,s,o,u,d)}function YE(r,s,o,u){var d=u.children,g=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,r!==null){for(u=s.child=r.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~g}else u=0,s.child=null;return QE(r,s,g,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Lh(s,g!==null?g.cachePool:null),g!==null?Wv(s,g):up(),Jv(s);else return u=s.lanes=536870912,QE(r,s,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(Lh(s,g.cachePool),Wv(s,g),Ws(),s.memoizedState=null):(r!==null&&Lh(s,null),up(),Ws());return On(r,s,d,o),s.child}function zu(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function QE(r,s,o,u,d){var g=rp();return g=g===null?null:{parent:fn._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},r!==null&&Lh(s,null),up(),Jv(s),r!==null&&tl(r,s,u,!0),s.childLanes=d,null}function Zh(r,s){return s=tf({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function XE(r,s,o){return ao(s,r.child,null,o),r=Zh(s,s.pendingProps),r.flags|=2,Nr(s),s.memoizedState=null,r}function FR(r,s,o){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(ft){if(u.mode==="hidden")return r=Zh(s,u),s.lanes=536870912,zu(null,r);if(hp(s),(r=Ft)?(r=lb(r,Yr),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Fs!==null?{id:Ni,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},o=Mv(r),o.return=s,s.child=o,Nn=s,Ft=null)):r=null,r===null)throw Gs(s);return s.lanes=536870912,null}return Zh(s,u)}var g=r.memoizedState;if(g!==null){var E=g.dehydrated;if(hp(s),d)if(s.flags&256)s.flags&=-257,s=XE(r,s,o);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(mn||tl(r,s,o,!1),d=(o&r.childLanes)!==0,mn||d){if(u=Pt,u!==null&&(E=K(u,o),E!==0&&E!==g.retryLane))throw g.retryLane=E,Ja(r,E),dr(u,r,E),Op;hf(),s=XE(r,s,o)}else r=g.treeContext,Ft=Xr(E.nextSibling),Nn=s,ft=!0,qs=null,Yr=!1,r!==null&&Vv(s,r),s=Zh(s,u),s.flags|=4096;return s}return r=Xi(r.child,{mode:u.mode,children:u.children}),r.ref=s.ref,s.child=r,r.return=s,r}function ef(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function Mp(r,s,o,u,d){return no(s),o=dp(r,s,o,u,void 0,d),u=mp(),r!==null&&!mn?(pp(r,s,d),ns(r,s,d)):(ft&&u&&Ym(s),s.flags|=1,On(r,s,o,d),s.child)}function WE(r,s,o,u,d,g){return no(s),s.updateQueue=null,o=eE(s,u,o,d),Zv(r),u=mp(),r!==null&&!mn?(pp(r,s,g),ns(r,s,g)):(ft&&u&&Ym(s),s.flags|=1,On(r,s,o,g),s.child)}function JE(r,s,o,u,d){if(no(s),s.stateNode===null){var g=Wo,E=o.contextType;typeof E=="object"&&E!==null&&(g=Dn(E)),g=new o(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Np,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},sp(s),E=o.contextType,g.context=typeof E=="object"&&E!==null?Dn(E):Wo,g.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(xp(s,o,E,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&Np.enqueueReplaceState(g,g.state,null),ku(s,u,g,d),Pu(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){g=s.stateNode;var I=s.memoizedProps,B=lo(o,I);g.props=B;var W=g.context,se=o.contextType;E=Wo,typeof se=="object"&&se!==null&&(E=Dn(se));var ce=o.getDerivedStateFromProps;se=typeof ce=="function"||typeof g.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,se||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(I||W!==E)&&jE(s,g,u,E),Ks=!1;var Z=s.memoizedState;g.state=Z,ku(s,u,g,d),Pu(),W=s.memoizedState,I||Z!==W||Ks?(typeof ce=="function"&&(xp(s,o,ce,u),W=s.memoizedState),(B=Ks||LE(s,o,B,u,Z,W,E))?(se||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=W),g.props=u,g.state=W,g.context=E,u=B):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,ap(r,s),E=s.memoizedProps,se=lo(o,E),g.props=se,ce=s.pendingProps,Z=g.context,W=o.contextType,B=Wo,typeof W=="object"&&W!==null&&(B=Dn(W)),I=o.getDerivedStateFromProps,(W=typeof I=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==ce||Z!==B)&&jE(s,g,u,B),Ks=!1,Z=s.memoizedState,g.state=Z,ku(s,u,g,d),Pu();var re=s.memoizedState;E!==ce||Z!==re||Ks||r!==null&&r.dependencies!==null&&kh(r.dependencies)?(typeof I=="function"&&(xp(s,o,I,u),re=s.memoizedState),(se=Ks||LE(s,o,se,u,Z,re,B)||r!==null&&r.dependencies!==null&&kh(r.dependencies))?(W||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,re,B),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,re,B)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&Z===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&Z===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=re),g.props=u,g.state=re,g.context=B,u=se):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&Z===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&Z===r.memoizedState||(s.flags|=1024),u=!1)}return g=u,ef(r,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&u?(s.child=ao(s,r.child,null,d),s.child=ao(s,null,o,d)):On(r,s,o,d),s.memoizedState=g.state,r=s.child):r=ns(r,s,d),r}function ZE(r,s,o,u){return eo(),s.flags|=256,On(r,s,o,u),s.child}var Pp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kp(r){return{baseLanes:r,cachePool:Hv()}}function Vp(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Or),r}function eT(r,s,o){var u=s.pendingProps,d=!1,g=(s.flags&128)!==0,E;if((E=g)||(E=r!==null&&r.memoizedState===null?!1:(ln.current&2)!==0),E&&(d=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,r===null){if(ft){if(d?Xs(s):Ws(),(r=Ft)?(r=lb(r,Yr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Fs!==null?{id:Ni,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},o=Mv(r),o.return=s,s.child=o,Nn=s,Ft=null)):r=null,r===null)throw Gs(s);return _g(r)?s.lanes=32:s.lanes=536870912,null}var I=u.children;return u=u.fallback,d?(Ws(),d=s.mode,I=tf({mode:"hidden",children:I},d),u=Za(u,d,o,null),I.return=s,u.return=s,I.sibling=u,s.child=I,u=s.child,u.memoizedState=kp(o),u.childLanes=Vp(r,E,o),s.memoizedState=Pp,zu(null,u)):(Xs(s),Lp(s,I))}var B=r.memoizedState;if(B!==null&&(I=B.dehydrated,I!==null)){if(g)s.flags&256?(Xs(s),s.flags&=-257,s=jp(r,s,o)):s.memoizedState!==null?(Ws(),s.child=r.child,s.flags|=128,s=null):(Ws(),I=u.fallback,d=s.mode,u=tf({mode:"visible",children:u.children},d),I=Za(I,d,o,null),I.flags|=2,u.return=s,I.return=s,u.sibling=I,s.child=u,ao(s,r.child,null,o),u=s.child,u.memoizedState=kp(o),u.childLanes=Vp(r,E,o),s.memoizedState=Pp,s=zu(null,u));else if(Xs(s),_g(I)){if(E=I.nextSibling&&I.nextSibling.dataset,E)var W=E.dgst;E=W,u=Error(i(419)),u.stack="",u.digest=E,Iu({value:u,source:null,stack:null}),s=jp(r,s,o)}else if(mn||tl(r,s,o,!1),E=(o&r.childLanes)!==0,mn||E){if(E=Pt,E!==null&&(u=K(E,o),u!==0&&u!==B.retryLane))throw B.retryLane=u,Ja(r,u),dr(E,r,u),Op;yg(I)||hf(),s=jp(r,s,o)}else yg(I)?(s.flags|=192,s.child=r.child,s=null):(r=B.treeContext,Ft=Xr(I.nextSibling),Nn=s,ft=!0,qs=null,Yr=!1,r!==null&&Vv(s,r),s=Lp(s,u.children),s.flags|=4096);return s}return d?(Ws(),I=u.fallback,d=s.mode,B=r.child,W=B.sibling,u=Xi(B,{mode:"hidden",children:u.children}),u.subtreeFlags=B.subtreeFlags&65011712,W!==null?I=Xi(W,I):(I=Za(I,d,o,null),I.flags|=2),I.return=s,u.return=s,u.sibling=I,s.child=u,zu(null,u),u=s.child,I=r.child.memoizedState,I===null?I=kp(o):(d=I.cachePool,d!==null?(B=fn._currentValue,d=d.parent!==B?{parent:B,pool:B}:d):d=Hv(),I={baseLanes:I.baseLanes|o,cachePool:d}),u.memoizedState=I,u.childLanes=Vp(r,E,o),s.memoizedState=Pp,zu(r.child,u)):(Xs(s),o=r.child,r=o.sibling,o=Xi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(E=s.deletions,E===null?(s.deletions=[r],s.flags|=16):E.push(r)),s.child=o,s.memoizedState=null,o)}function Lp(r,s){return s=tf({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function tf(r,s){return r=Ir(22,r,null,s),r.lanes=0,r}function jp(r,s,o){return ao(s,r.child,null,o),r=Lp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function tT(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Zm(r.return,s,o)}function Up(r,s,o,u,d,g){var E=r.memoizedState;E===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:g}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=u,E.tail=o,E.tailMode=d,E.treeForkCount=g)}function nT(r,s,o){var u=s.pendingProps,d=u.revealOrder,g=u.tail;u=u.children;var E=ln.current,I=(E&2)!==0;if(I?(E=E&1|2,s.flags|=128):E&=1,ge(ln,E),On(r,s,u,o),u=ft?Ru:0,!I&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&tT(r,o,s);else if(r.tag===19)tT(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)r=o.alternate,r!==null&&Fh(r)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),Up(s,!1,d,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&Fh(r)===null){s.child=d;break}r=d.sibling,d.sibling=o,o=d,d=r}Up(s,!0,o,null,g,u);break;case"together":Up(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ns(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),ea|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(tl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Xi(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Xi(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function zp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&kh(r)))}function qR(r,s,o){switch(s.tag){case 3:ke(s,s.stateNode.containerInfo),$s(s,fn,r.memoizedState.cache),eo();break;case 27:case 5:mt(s);break;case 4:ke(s,s.stateNode.containerInfo);break;case 10:$s(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,hp(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Xs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?eT(r,s,o):(Xs(s),r=ns(r,s,o),r!==null?r.sibling:null);Xs(s);break;case 19:var d=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(tl(r,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return nT(r,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ge(ln,ln.current),u)break;return null;case 22:return s.lanes=0,YE(r,s,o,s.pendingProps);case 24:$s(s,fn,r.memoizedState.cache)}return ns(r,s,o)}function rT(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)mn=!0;else{if(!zp(r,o)&&(s.flags&128)===0)return mn=!1,qR(r,s,o);mn=(r.flags&131072)!==0}else mn=!1,ft&&(s.flags&1048576)!==0&&kv(s,Ru,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(r=io(s.elementType),s.type=r,typeof r=="function")Gm(r)?(u=lo(r,u),s.tag=1,s=JE(null,s,r,u,o)):(s.tag=0,s=Mp(null,s,r,u,o));else{if(r!=null){var d=r.$$typeof;if(d===te){s.tag=11,s=GE(null,s,r,u,o);break e}else if(d===S){s.tag=14,s=$E(null,s,r,u,o);break e}}throw s=le(r)||r,Error(i(306,s,""))}}return s;case 0:return Mp(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=lo(u,s.pendingProps),JE(r,s,u,d,o);case 3:e:{if(ke(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var g=s.memoizedState;d=g.element,ap(r,s),ku(s,u,null,o);var E=s.memoizedState;if(u=E.cache,$s(s,fn,u),u!==g.cache&&ep(s,[fn],o,!0),Pu(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=ZE(r,s,u,o);break e}else if(u!==d){d=Gr(Error(i(424)),s),Iu(d),s=ZE(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ft=Xr(r.firstChild),Nn=s,ft=!0,qs=null,Yr=!0,o=Yv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(eo(),u===d){s=ns(r,s,o);break e}On(r,s,u,o)}s=s.child}return s;case 26:return ef(r,s),r===null?(o=mb(s.type,null,s.pendingProps,null))?s.memoizedState=o:ft||(o=s.type,r=s.pendingProps,u=_f(ve.current).createElement(o),u[_e]=s,u[Se]=r,Mn(u,o,r),jt(u),s.stateNode=u):s.memoizedState=mb(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return mt(s),r===null&&ft&&(u=s.stateNode=hb(s.type,s.pendingProps,ve.current),Nn=s,Yr=!0,d=Ft,sa(s.type)?(vg=d,Ft=Xr(u.firstChild)):Ft=d),On(r,s,s.pendingProps.children,o),ef(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&ft&&((d=u=Ft)&&(u=EI(u,s.type,s.pendingProps,Yr),u!==null?(s.stateNode=u,Nn=s,Ft=Xr(u.firstChild),Yr=!1,d=!0):d=!1),d||Gs(s)),mt(s),d=s.type,g=s.pendingProps,E=r!==null?r.memoizedProps:null,u=g.children,mg(d,g)?u=null:E!==null&&mg(d,E)&&(s.flags|=32),s.memoizedState!==null&&(d=dp(r,s,kR,null,null,o),tc._currentValue=d),ef(r,s),On(r,s,u,o),s.child;case 6:return r===null&&ft&&((r=o=Ft)&&(o=TI(o,s.pendingProps,Yr),o!==null?(s.stateNode=o,Nn=s,Ft=null,r=!0):r=!1),r||Gs(s)),null;case 13:return eT(r,s,o);case 4:return ke(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=ao(s,null,u,o):On(r,s,u,o),s.child;case 11:return GE(r,s,s.type,s.pendingProps,o);case 7:return On(r,s,s.pendingProps,o),s.child;case 8:return On(r,s,s.pendingProps.children,o),s.child;case 12:return On(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,$s(s,s.type,u.value),On(r,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,no(s),d=Dn(d),u=u(d),s.flags|=1,On(r,s,u,o),s.child;case 14:return $E(r,s,s.type,s.pendingProps,o);case 15:return KE(r,s,s.type,s.pendingProps,o);case 19:return nT(r,s,o);case 31:return FR(r,s,o);case 22:return YE(r,s,o,s.pendingProps);case 24:return no(s),u=Dn(fn),r===null?(d=rp(),d===null&&(d=Pt,g=tp(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=o),d=g),s.memoizedState={parent:u,cache:d},sp(s),$s(s,fn,d)):((r.lanes&o)!==0&&(ap(r,s),ku(s,null,null,o),Pu()),d=r.memoizedState,g=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),$s(s,fn,u)):(u=g.cache,$s(s,fn,u),u!==d.cache&&ep(s,[fn],o,!0))),On(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function rs(r){r.flags|=4}function Bp(r,s,o,u,d){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(d&335544128)===d)if(r.stateNode.complete)r.flags|=8192;else if(NT())r.flags|=8192;else throw so=Uh,ip}else r.flags&=-16777217}function iT(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!vb(s))if(NT())r.flags|=8192;else throw so=Uh,ip}function nf(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Gi():536870912,r.lanes|=s,dl|=s)}function Bu(r,s){if(!ft)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function qt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var d=r.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function GR(r,s,o){var u=s.pendingProps;switch(Qm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(s),null;case 1:return qt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Zi(fn),je(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(el(s)?rs(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Wm())),qt(s),null;case 26:var d=s.type,g=s.memoizedState;return r===null?(rs(s),g!==null?(qt(s),iT(s,g)):(qt(s),Bp(s,d,null,u,o))):g?g!==r.memoizedState?(rs(s),qt(s),iT(s,g)):(qt(s),s.flags&=-16777217):(r=r.memoizedProps,r!==u&&rs(s),qt(s),Bp(s,d,r,u,o)),null;case 27:if(Et(s),o=ve.current,d=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&rs(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return qt(s),null}r=Ee.current,el(s)?Lv(s):(r=hb(d,u,o),s.stateNode=r,rs(s))}return qt(s),null;case 5:if(Et(s),d=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&rs(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return qt(s),null}if(g=Ee.current,el(s))Lv(s);else{var E=_f(ve.current);switch(g){case 1:g=E.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:g=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":g=E.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":g=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":g=E.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?E.createElement(d,{is:u.is}):E.createElement(d)}}g[_e]=s,g[Se]=u;e:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)g.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break e;for(;E.sibling===null;){if(E.return===null||E.return===s)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=g;e:switch(Mn(g,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&rs(s)}}return qt(s),Bp(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,o),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&rs(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=ve.current,el(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,d=Nn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}r[_e]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||eb(r.nodeValue,o)),r||Gs(s,!0)}else r=_f(r).createTextNode(u),r[_e]=s,s.stateNode=r}return qt(s),null;case 31:if(o=s.memoizedState,r===null||r.memoizedState!==null){if(u=el(s),o!==null){if(r===null){if(!u)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[_e]=s}else eo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qt(s),r=!1}else o=Wm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return s.flags&256?(Nr(s),s):(Nr(s),null);if((s.flags&128)!==0)throw Error(i(558))}return qt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(d=el(s),u!==null&&u.dehydrated!==null){if(r===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[_e]=s}else eo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qt(s),d=!1}else d=Wm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Nr(s),s):(Nr(s),null)}return Nr(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==d&&(u.flags|=2048)),o!==r&&o&&(s.child.flags|=8192),nf(s,s.updateQueue),qt(s),null);case 4:return je(),r===null&&ug(s.stateNode.containerInfo),qt(s),null;case 10:return Zi(s.type),qt(s),null;case 19:if(ie(ln),u=s.memoizedState,u===null)return qt(s),null;if(d=(s.flags&128)!==0,g=u.rendering,g===null)if(d)Bu(u,!1);else{if(sn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=Fh(r),g!==null){for(s.flags|=128,Bu(u,!1),r=g.updateQueue,s.updateQueue=r,nf(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Ov(o,r),o=o.sibling;return ge(ln,ln.current&1|2),ft&&Wi(s,u.treeForkCount),s.child}r=r.sibling}u.tail!==null&&Bt()>lf&&(s.flags|=128,d=!0,Bu(u,!1),s.lanes=4194304)}else{if(!d)if(r=Fh(g),r!==null){if(s.flags|=128,d=!0,r=r.updateQueue,s.updateQueue=r,nf(s,r),Bu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!ft)return qt(s),null}else 2*Bt()-u.renderingStartTime>lf&&o!==536870912&&(s.flags|=128,d=!0,Bu(u,!1),s.lanes=4194304);u.isBackwards?(g.sibling=s.child,s.child=g):(r=u.last,r!==null?r.sibling=g:s.child=g,u.last=g)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Bt(),r.sibling=null,o=ln.current,ge(ln,d?o&1|2:o&1),ft&&Wi(s,u.treeForkCount),r):(qt(s),null);case 22:case 23:return Nr(s),cp(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(qt(s),s.subtreeFlags&6&&(s.flags|=8192)):qt(s),o=s.updateQueue,o!==null&&nf(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&ie(ro),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Zi(fn),qt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function $R(r,s){switch(Qm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Zi(fn),je(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Et(s),null;case 31:if(s.memoizedState!==null){if(Nr(s),s.alternate===null)throw Error(i(340));eo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Nr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));eo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ie(ln),null;case 4:return je(),null;case 10:return Zi(s.type),null;case 22:case 23:return Nr(s),cp(),r!==null&&ie(ro),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Zi(fn),null;case 25:return null;default:return null}}function sT(r,s){switch(Qm(s),s.tag){case 3:Zi(fn),je();break;case 26:case 27:case 5:Et(s);break;case 4:je();break;case 31:s.memoizedState!==null&&Nr(s);break;case 13:Nr(s);break;case 19:ie(ln);break;case 10:Zi(s.type);break;case 22:case 23:Nr(s),cp(),r!==null&&ie(ro);break;case 24:Zi(fn)}}function Hu(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&r)===r){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==d)}}catch(I){At(s,s.return,I)}}function Js(r,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var g=d.next;u=g;do{if((u.tag&r)===r){var E=u.inst,I=E.destroy;if(I!==void 0){E.destroy=void 0,d=s;var B=o,W=I;try{W()}catch(se){At(d,B,se)}}}u=u.next}while(u!==g)}}catch(se){At(s,s.return,se)}}function aT(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{Xv(s,o)}catch(u){At(r,r.return,u)}}}function oT(r,s,o){o.props=lo(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){At(r,s,u)}}function Fu(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(d){At(r,s,d)}}function Oi(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){At(r,s,d)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){At(r,s,d)}else o.current=null}function lT(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){At(r,r.return,d)}}function Hp(r,s,o){try{var u=r.stateNode;mI(u,r.type,o,s),u[Se]=s}catch(d){At(r,r.return,d)}}function uT(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&sa(r.type)||r.tag===4}function Fp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||uT(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&sa(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function qp(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=ii));else if(u!==4&&(u===27&&sa(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(qp(r,s,o),r=r.sibling;r!==null;)qp(r,s,o),r=r.sibling}function rf(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&sa(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(rf(r,s,o),r=r.sibling;r!==null;)rf(r,s,o),r=r.sibling}function cT(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Mn(s,u,o),s[_e]=r,s[Se]=o}catch(g){At(r,r.return,g)}}var is=!1,pn=!1,Gp=!1,hT=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function KR(r,s){if(r=r.containerInfo,fg=wf,r=Sv(r),jm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,I=-1,B=-1,W=0,se=0,ce=r,Z=null;t:for(;;){for(var re;ce!==o||d!==0&&ce.nodeType!==3||(I=E+d),ce!==g||u!==0&&ce.nodeType!==3||(B=E+u),ce.nodeType===3&&(E+=ce.nodeValue.length),(re=ce.firstChild)!==null;)Z=ce,ce=re;for(;;){if(ce===r)break t;if(Z===o&&++W===d&&(I=E),Z===g&&++se===u&&(B=E),(re=ce.nextSibling)!==null)break;ce=Z,Z=ce.parentNode}ce=re}o=I===-1||B===-1?null:{start:I,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(dg={focusedElem:r,selectionRange:o},wf=!1,Cn=s;Cn!==null;)if(s=Cn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Cn=r;else for(;Cn!==null;){switch(s=Cn,g=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)d=r[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=s,d=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var Ne=lo(o.type,d);r=u.getSnapshotBeforeUpdate(Ne,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(ze){At(o,o.return,ze)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)gg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":gg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Cn=r;break}Cn=s.return}}function fT(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:as(r,o),u&4&&Hu(5,o);break;case 1:if(as(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(E){At(o,o.return,E)}else{var d=lo(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(d,s,r.__reactInternalSnapshotBeforeUpdate)}catch(E){At(o,o.return,E)}}u&64&&aT(o),u&512&&Fu(o,o.return);break;case 3:if(as(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Xv(r,s)}catch(E){At(o,o.return,E)}}break;case 27:s===null&&u&4&&cT(o);case 26:case 5:as(r,o),s===null&&u&4&&lT(o),u&512&&Fu(o,o.return);break;case 12:as(r,o);break;case 31:as(r,o),u&4&&pT(r,o);break;case 13:as(r,o),u&4&&gT(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=nI.bind(null,o),bI(r,o))));break;case 22:if(u=o.memoizedState!==null||is,!u){s=s!==null&&s.memoizedState!==null||pn,d=is;var g=pn;is=u,(pn=s)&&!g?os(r,o,(o.subtreeFlags&8772)!==0):as(r,o),is=d,pn=g}break;case 30:break;default:as(r,o)}}function dT(r){var s=r.alternate;s!==null&&(r.alternate=null,dT(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ht(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Xt=null,ur=!1;function ss(r,s,o){for(o=o.child;o!==null;)mT(r,s,o),o=o.sibling}function mT(r,s,o){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(br,o)}catch{}switch(o.tag){case 26:pn||Oi(o,s),ss(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:pn||Oi(o,s);var u=Xt,d=ur;sa(o.type)&&(Xt=o.stateNode,ur=!1),ss(r,s,o),Ju(o.stateNode),Xt=u,ur=d;break;case 5:pn||Oi(o,s);case 6:if(u=Xt,d=ur,Xt=null,ss(r,s,o),Xt=u,ur=d,Xt!==null)if(ur)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(o.stateNode)}catch(g){At(o,s,g)}else try{Xt.removeChild(o.stateNode)}catch(g){At(o,s,g)}break;case 18:Xt!==null&&(ur?(r=Xt,ab(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Tl(r)):ab(Xt,o.stateNode));break;case 4:u=Xt,d=ur,Xt=o.stateNode.containerInfo,ur=!0,ss(r,s,o),Xt=u,ur=d;break;case 0:case 11:case 14:case 15:Js(2,o,s),pn||Js(4,o,s),ss(r,s,o);break;case 1:pn||(Oi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&oT(o,s,u)),ss(r,s,o);break;case 21:ss(r,s,o);break;case 22:pn=(u=pn)||o.memoizedState!==null,ss(r,s,o),pn=u;break;default:ss(r,s,o)}}function pT(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Tl(r)}catch(o){At(s,s.return,o)}}}function gT(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Tl(r)}catch(o){At(s,s.return,o)}}function YR(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new hT),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new hT),s;default:throw Error(i(435,r.tag))}}function sf(r,s){var o=YR(r);s.forEach(function(u){if(!o.has(u)){o.add(u);var d=rI.bind(null,r,u);u.then(d,d)}})}function cr(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],g=r,E=s,I=E;e:for(;I!==null;){switch(I.tag){case 27:if(sa(I.type)){Xt=I.stateNode,ur=!1;break e}break;case 5:Xt=I.stateNode,ur=!1;break e;case 3:case 4:Xt=I.stateNode.containerInfo,ur=!0;break e}I=I.return}if(Xt===null)throw Error(i(160));mT(g,E,d),Xt=null,ur=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)yT(s,r),s=s.sibling}var ci=null;function yT(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:cr(s,r),hr(r),u&4&&(Js(3,r,r.return),Hu(3,r),Js(5,r,r.return));break;case 1:cr(s,r),hr(r),u&512&&(pn||o===null||Oi(o,o.return)),u&64&&is&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=ci;if(cr(s,r),hr(r),u&512&&(pn||o===null||Oi(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":g=d.getElementsByTagName("title")[0],(!g||g[wt]||g[_e]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(u),d.head.insertBefore(g,d.querySelector("head > title"))),Mn(g,u,o),g[_e]=r,jt(g),u=g;break e;case"link":var E=yb("link","href",d).get(u+(o.href||""));if(E){for(var I=0;I<E.length;I++)if(g=E[I],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(I,1);break t}}g=d.createElement(u),Mn(g,u,o),d.head.appendChild(g);break;case"meta":if(E=yb("meta","content",d).get(u+(o.content||""))){for(I=0;I<E.length;I++)if(g=E[I],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(I,1);break t}}g=d.createElement(u),Mn(g,u,o),d.head.appendChild(g);break;default:throw Error(i(468,u))}g[_e]=r,jt(g),u=g}r.stateNode=u}else _b(d,r.type,r.stateNode);else r.stateNode=gb(d,u,r.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?_b(d,r.type,r.stateNode):gb(d,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Hp(r,r.memoizedProps,o.memoizedProps)}break;case 27:cr(s,r),hr(r),u&512&&(pn||o===null||Oi(o,o.return)),o!==null&&u&4&&Hp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(cr(s,r),hr(r),u&512&&(pn||o===null||Oi(o,o.return)),r.flags&32){d=r.stateNode;try{lr(d,"")}catch(Ne){At(r,r.return,Ne)}}u&4&&r.stateNode!=null&&(d=r.memoizedProps,Hp(r,d,o!==null?o.memoizedProps:d)),u&1024&&(Gp=!0);break;case 6:if(cr(s,r),hr(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Ne){At(r,r.return,Ne)}}break;case 3:if(Tf=null,d=ci,ci=vf(s.containerInfo),cr(s,r),ci=d,hr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Tl(s.containerInfo)}catch(Ne){At(r,r.return,Ne)}Gp&&(Gp=!1,_T(r));break;case 4:u=ci,ci=vf(r.stateNode.containerInfo),cr(s,r),hr(r),ci=u;break;case 12:cr(s,r),hr(r);break;case 31:cr(s,r),hr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,sf(r,u)));break;case 13:cr(s,r),hr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(of=Bt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,sf(r,u)));break;case 22:d=r.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,W=is,se=pn;if(is=W||d,pn=se||B,cr(s,r),pn=se,is=W,hr(r),u&8192)e:for(s=r.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||B||is||pn||uo(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){B=o=s;try{if(g=B.stateNode,d)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{I=B.stateNode;var ce=B.memoizedProps.style,Z=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;I.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ne){At(B,B.return,Ne)}}}else if(s.tag===6){if(o===null){B=s;try{B.stateNode.nodeValue=d?"":B.memoizedProps}catch(Ne){At(B,B.return,Ne)}}}else if(s.tag===18){if(o===null){B=s;try{var re=B.stateNode;d?ob(re,!0):ob(B.stateNode,!1)}catch(Ne){At(B,B.return,Ne)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,sf(r,o))));break;case 19:cr(s,r),hr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,sf(r,u)));break;case 30:break;case 21:break;default:cr(s,r),hr(r)}}function hr(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(uT(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,g=Fp(r);rf(r,g,d);break;case 5:var E=o.stateNode;o.flags&32&&(lr(E,""),o.flags&=-33);var I=Fp(r);rf(r,I,E);break;case 3:case 4:var B=o.stateNode.containerInfo,W=Fp(r);qp(r,W,B);break;default:throw Error(i(161))}}catch(se){At(r,r.return,se)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function _T(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;_T(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function as(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)fT(r,s.alternate,s),s=s.sibling}function uo(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Js(4,s,s.return),uo(s);break;case 1:Oi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&oT(s,s.return,o),uo(s);break;case 27:Ju(s.stateNode);case 26:case 5:Oi(s,s.return),uo(s);break;case 22:s.memoizedState===null&&uo(s);break;case 30:uo(s);break;default:uo(s)}r=r.sibling}}function os(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=r,g=s,E=g.flags;switch(g.tag){case 0:case 11:case 15:os(d,g,o),Hu(4,g);break;case 1:if(os(d,g,o),u=g,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(W){At(u,u.return,W)}if(u=g,d=u.updateQueue,d!==null){var I=u.stateNode;try{var B=d.shared.hiddenCallbacks;if(B!==null)for(d.shared.hiddenCallbacks=null,d=0;d<B.length;d++)Qv(B[d],I)}catch(W){At(u,u.return,W)}}o&&E&64&&aT(g),Fu(g,g.return);break;case 27:cT(g);case 26:case 5:os(d,g,o),o&&u===null&&E&4&&lT(g),Fu(g,g.return);break;case 12:os(d,g,o);break;case 31:os(d,g,o),o&&E&4&&pT(d,g);break;case 13:os(d,g,o),o&&E&4&&gT(d,g);break;case 22:g.memoizedState===null&&os(d,g,o),Fu(g,g.return);break;case 30:break;default:os(d,g,o)}s=s.sibling}}function $p(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&xu(o))}function Kp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&xu(r))}function hi(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)vT(r,s,o,u),s=s.sibling}function vT(r,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:hi(r,s,o,u),d&2048&&Hu(9,s);break;case 1:hi(r,s,o,u);break;case 3:hi(r,s,o,u),d&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&xu(r)));break;case 12:if(d&2048){hi(r,s,o,u),r=s.stateNode;try{var g=s.memoizedProps,E=g.id,I=g.onPostCommit;typeof I=="function"&&I(E,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){At(s,s.return,B)}}else hi(r,s,o,u);break;case 31:hi(r,s,o,u);break;case 13:hi(r,s,o,u);break;case 23:break;case 22:g=s.stateNode,E=s.alternate,s.memoizedState!==null?g._visibility&2?hi(r,s,o,u):qu(r,s):g._visibility&2?hi(r,s,o,u):(g._visibility|=2,cl(r,s,o,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&$p(E,s);break;case 24:hi(r,s,o,u),d&2048&&Kp(s.alternate,s);break;default:hi(r,s,o,u)}}function cl(r,s,o,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=r,E=s,I=o,B=u,W=E.flags;switch(E.tag){case 0:case 11:case 15:cl(g,E,I,B,d),Hu(8,E);break;case 23:break;case 22:var se=E.stateNode;E.memoizedState!==null?se._visibility&2?cl(g,E,I,B,d):qu(g,E):(se._visibility|=2,cl(g,E,I,B,d)),d&&W&2048&&$p(E.alternate,E);break;case 24:cl(g,E,I,B,d),d&&W&2048&&Kp(E.alternate,E);break;default:cl(g,E,I,B,d)}s=s.sibling}}function qu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,d=u.flags;switch(u.tag){case 22:qu(o,u),d&2048&&$p(u.alternate,u);break;case 24:qu(o,u),d&2048&&Kp(u.alternate,u);break;default:qu(o,u)}s=s.sibling}}var Gu=8192;function hl(r,s,o){if(r.subtreeFlags&Gu)for(r=r.child;r!==null;)ET(r,s,o),r=r.sibling}function ET(r,s,o){switch(r.tag){case 26:hl(r,s,o),r.flags&Gu&&r.memoizedState!==null&&PI(o,ci,r.memoizedState,r.memoizedProps);break;case 5:hl(r,s,o);break;case 3:case 4:var u=ci;ci=vf(r.stateNode.containerInfo),hl(r,s,o),ci=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Gu,Gu=16777216,hl(r,s,o),Gu=u):hl(r,s,o));break;default:hl(r,s,o)}}function TT(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function $u(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Cn=u,ST(u,r)}TT(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)bT(r),r=r.sibling}function bT(r){switch(r.tag){case 0:case 11:case 15:$u(r),r.flags&2048&&Js(9,r,r.return);break;case 3:$u(r);break;case 12:$u(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,af(r)):$u(r);break;default:$u(r)}}function af(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Cn=u,ST(u,r)}TT(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Js(8,s,s.return),af(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,af(s));break;default:af(s)}r=r.sibling}}function ST(r,s){for(;Cn!==null;){var o=Cn;switch(o.tag){case 0:case 11:case 15:Js(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:xu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Cn=u;else e:for(o=r;Cn!==null;){u=Cn;var d=u.sibling,g=u.return;if(dT(u),u===o){Cn=null;break e}if(d!==null){d.return=g,Cn=d;break e}Cn=g}}}var QR={getCacheForType:function(r){var s=Dn(fn),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o},cacheSignal:function(){return Dn(fn).controller.signal}},XR=typeof WeakMap=="function"?WeakMap:Map,vt=0,Pt=null,it=null,at=0,St=0,Dr=null,Zs=!1,fl=!1,Yp=!1,ls=0,sn=0,ea=0,co=0,Qp=0,Or=0,dl=0,Ku=null,fr=null,Xp=!1,of=0,AT=0,lf=1/0,uf=null,ta=null,En=0,na=null,ml=null,us=0,Wp=0,Jp=null,wT=null,Yu=0,Zp=null;function Mr(){return(vt&2)!==0&&at!==0?at&-at:G.T!==null?sg():ye()}function CT(){if(Or===0)if((at&536870912)===0||ft){var r=vi;vi<<=1,(vi&3932160)===0&&(vi=262144),Or=r}else Or=536870912;return r=xr.current,r!==null&&(r.flags|=32),Or}function dr(r,s,o){(r===Pt&&(St===2||St===9)||r.cancelPendingCommit!==null)&&(pl(r,0),ra(r,at,Or,!1)),Ei(r,o),((vt&2)===0||r!==Pt)&&(r===Pt&&((vt&2)===0&&(co|=o),sn===4&&ra(r,at,Or,!1)),Mi(r))}function RT(r,s,o){if((vt&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&r.expiredLanes)===0||Ar(r,s),d=u?ZR(r,s):tg(r,s,!0),g=u;do{if(d===0){fl&&!u&&ra(r,s,0,!1);break}else{if(o=r.current.alternate,g&&!WR(o)){d=tg(r,s,!1),g=!1;continue}if(d===2){if(g=s,r.errorRecoveryDisabledLanes&g)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var I=r;d=Ku;var B=I.current.memoizedState.isDehydrated;if(B&&(pl(I,E).flags|=256),E=tg(I,E,!1),E!==2){if(Yp&&!B){I.errorRecoveryDisabledLanes|=g,co|=g,d=4;break e}g=fr,fr=d,g!==null&&(fr===null?fr=g:fr.push.apply(fr,g))}d=E}if(g=!1,d!==2)continue}}if(d===1){pl(r,0),ra(r,s,0,!0);break}e:{switch(u=r,g=d,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ra(u,s,Or,!Zs);break e;case 2:fr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=of+300-Bt(),10<d)){if(ra(u,s,Or,!Zs),Sr(u,0,!0)!==0)break e;us=s,u.timeoutHandle=ib(IT.bind(null,u,o,fr,uf,Xp,s,Or,co,dl,Zs,g,"Throttled",-0,0),d);break e}IT(u,o,fr,uf,Xp,s,Or,co,dl,Zs,g,null,-0,0)}}break}while(!0);Mi(r)}function IT(r,s,o,u,d,g,E,I,B,W,se,ce,Z,re){if(r.timeoutHandle=-1,ce=s.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ii},ET(s,g,ce);var Ne=(g&62914560)===g?of-Bt():(g&4194048)===g?AT-Bt():0;if(Ne=kI(ce,Ne),Ne!==null){us=g,r.cancelPendingCommit=Ne(VT.bind(null,r,s,g,o,u,d,E,I,B,se,ce,null,Z,re)),ra(r,g,E,!W);return}}VT(r,s,g,o,u,d,E,I,B)}function WR(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],g=d.getSnapshot;d=d.value;try{if(!Rr(g(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ra(r,s,o,u){s&=~Qp,s&=~co,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var d=s;0<d;){var g=31-Kt(d),E=1<<g;u[g]=-1,d&=~E}o!==0&&$i(r,o,s)}function cf(){return(vt&6)===0?(Qu(0),!1):!0}function eg(){if(it!==null){if(St===0)var r=it.return;else r=it,Ji=to=null,gp(r),sl=null,Du=0,r=it;for(;r!==null;)sT(r.alternate,r),r=r.return;it=null}}function pl(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,yI(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),us=0,eg(),Pt=r,it=o=Xi(r.current,null),at=s,St=0,Dr=null,Zs=!1,fl=Ar(r,s),Yp=!1,dl=Or=Qp=co=ea=sn=0,fr=Ku=null,Xp=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var d=31-Kt(u),g=1<<d;s|=r[d],u&=~g}return ls=s,Nh(),o}function xT(r,s){We=null,G.H=Uu,s===il||s===jh?(s=Gv(),St=3):s===ip?(s=Gv(),St=4):St=s===Op?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Dr=s,it===null&&(sn=1,Jh(r,Gr(s,r.current)))}function NT(){var r=xr.current;return r===null?!0:(at&4194048)===at?Qr===null:(at&62914560)===at||(at&536870912)!==0?r===Qr:!1}function DT(){var r=G.H;return G.H=Uu,r===null?Uu:r}function OT(){var r=G.A;return G.A=QR,r}function hf(){sn=4,Zs||(at&4194048)!==at&&xr.current!==null||(fl=!0),(ea&134217727)===0&&(co&134217727)===0||Pt===null||ra(Pt,at,Or,!1)}function tg(r,s,o){var u=vt;vt|=2;var d=DT(),g=OT();(Pt!==r||at!==s)&&(uf=null,pl(r,s)),s=!1;var E=sn;e:do try{if(St!==0&&it!==null){var I=it,B=Dr;switch(St){case 8:eg(),E=6;break e;case 3:case 2:case 9:case 6:xr.current===null&&(s=!0);var W=St;if(St=0,Dr=null,gl(r,I,B,W),o&&fl){E=0;break e}break;default:W=St,St=0,Dr=null,gl(r,I,B,W)}}JR(),E=sn;break}catch(se){xT(r,se)}while(!0);return s&&r.shellSuspendCounter++,Ji=to=null,vt=u,G.H=d,G.A=g,it===null&&(Pt=null,at=0,Nh()),E}function JR(){for(;it!==null;)MT(it)}function ZR(r,s){var o=vt;vt|=2;var u=DT(),d=OT();Pt!==r||at!==s?(uf=null,lf=Bt()+500,pl(r,s)):fl=Ar(r,s);e:do try{if(St!==0&&it!==null){s=it;var g=Dr;t:switch(St){case 1:St=0,Dr=null,gl(r,s,g,1);break;case 2:case 9:if(Fv(g)){St=0,Dr=null,PT(s);break}s=function(){St!==2&&St!==9||Pt!==r||(St=7),Mi(r)},g.then(s,s);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:Fv(g)?(St=0,Dr=null,PT(s)):(St=0,Dr=null,gl(r,s,g,7));break;case 5:var E=null;switch(it.tag){case 26:E=it.memoizedState;case 5:case 27:var I=it;if(E?vb(E):I.stateNode.complete){St=0,Dr=null;var B=I.sibling;if(B!==null)it=B;else{var W=I.return;W!==null?(it=W,ff(W)):it=null}break t}}St=0,Dr=null,gl(r,s,g,5);break;case 6:St=0,Dr=null,gl(r,s,g,6);break;case 8:eg(),sn=6;break e;default:throw Error(i(462))}}eI();break}catch(se){xT(r,se)}while(!0);return Ji=to=null,G.H=u,G.A=d,vt=o,it!==null?0:(Pt=null,at=0,Nh(),sn)}function eI(){for(;it!==null&&!Ur();)MT(it)}function MT(r){var s=rT(r.alternate,r,ls);r.memoizedProps=r.pendingProps,s===null?ff(r):it=s}function PT(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=WE(o,s,s.pendingProps,s.type,void 0,at);break;case 11:s=WE(o,s,s.pendingProps,s.type.render,s.ref,at);break;case 5:gp(s);default:sT(o,s),s=it=Ov(s,ls),s=rT(o,s,ls)}r.memoizedProps=r.pendingProps,s===null?ff(r):it=s}function gl(r,s,o,u){Ji=to=null,gp(s),sl=null,Du=0;var d=s.return;try{if(HR(r,d,s,o,at)){sn=1,Jh(r,Gr(o,r.current)),it=null;return}}catch(g){if(d!==null)throw it=d,g;sn=1,Jh(r,Gr(o,r.current)),it=null;return}s.flags&32768?(ft||u===1?r=!0:fl||(at&536870912)!==0?r=!1:(Zs=r=!0,(u===2||u===9||u===3||u===6)&&(u=xr.current,u!==null&&u.tag===13&&(u.flags|=16384))),kT(s,r)):ff(s)}function ff(r){var s=r;do{if((s.flags&32768)!==0){kT(s,Zs);return}r=s.return;var o=GR(s.alternate,s,ls);if(o!==null){it=o;return}if(s=s.sibling,s!==null){it=s;return}it=s=r}while(s!==null);sn===0&&(sn=5)}function kT(r,s){do{var o=$R(r.alternate,r);if(o!==null){o.flags&=32767,it=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){it=r;return}it=r=o}while(r!==null);sn=6,it=null}function VT(r,s,o,u,d,g,E,I,B){r.cancelPendingCommit=null;do df();while(En!==0);if((vt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=Fm,du(r,o,g,E,I,B),r===Pt&&(it=Pt=null,at=0),ml=s,na=r,us=o,Wp=g,Jp=d,wT=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,iI(An,function(){return BT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,d=he.p,he.p=2,E=vt,vt|=4;try{KR(r,s,o)}finally{vt=E,he.p=d,G.T=u}}En=1,LT(),jT(),UT()}}function LT(){if(En===1){En=0;var r=na,s=ml,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=G.T,G.T=null;var u=he.p;he.p=2;var d=vt;vt|=4;try{yT(s,r);var g=dg,E=Sv(r.containerInfo),I=g.focusedElem,B=g.selectionRange;if(E!==I&&I&&I.ownerDocument&&bv(I.ownerDocument.documentElement,I)){if(B!==null&&jm(I)){var W=B.start,se=B.end;if(se===void 0&&(se=W),"selectionStart"in I)I.selectionStart=W,I.selectionEnd=Math.min(se,I.value.length);else{var ce=I.ownerDocument||document,Z=ce&&ce.defaultView||window;if(Z.getSelection){var re=Z.getSelection(),Ne=I.textContent.length,ze=Math.min(B.start,Ne),Nt=B.end===void 0?ze:Math.min(B.end,Ne);!re.extend&&ze>Nt&&(E=Nt,Nt=ze,ze=E);var Y=Tv(I,ze),F=Tv(I,Nt);if(Y&&F&&(re.rangeCount!==1||re.anchorNode!==Y.node||re.anchorOffset!==Y.offset||re.focusNode!==F.node||re.focusOffset!==F.offset)){var X=ce.createRange();X.setStart(Y.node,Y.offset),re.removeAllRanges(),ze>Nt?(re.addRange(X),re.extend(F.node,F.offset)):(X.setEnd(F.node,F.offset),re.addRange(X))}}}}for(ce=[],re=I;re=re.parentNode;)re.nodeType===1&&ce.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ce.length;I++){var ae=ce[I];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}wf=!!fg,dg=fg=null}finally{vt=d,he.p=u,G.T=o}}r.current=s,En=2}}function jT(){if(En===2){En=0;var r=na,s=ml,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=G.T,G.T=null;var u=he.p;he.p=2;var d=vt;vt|=4;try{fT(r,s.alternate,s)}finally{vt=d,he.p=u,G.T=o}}En=3}}function UT(){if(En===4||En===3){En=0,Fi();var r=na,s=ml,o=us,u=wT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?En=5:(En=0,ml=na=null,zT(r,r.pendingLanes));var d=r.pendingLanes;if(d===0&&(ta=null),de(o),s=s.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(br,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=G.T,d=he.p,he.p=2,G.T=null;try{for(var g=r.onRecoverableError,E=0;E<u.length;E++){var I=u[E];g(I.value,{componentStack:I.stack})}}finally{G.T=s,he.p=d}}(us&3)!==0&&df(),Mi(r),d=r.pendingLanes,(o&261930)!==0&&(d&42)!==0?r===Zp?Yu++:(Yu=0,Zp=r):Yu=0,Qu(0)}}function zT(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,xu(s)))}function df(){return LT(),jT(),UT(),BT()}function BT(){if(En!==5)return!1;var r=na,s=Wp;Wp=0;var o=de(us),u=G.T,d=he.p;try{he.p=32>o?32:o,G.T=null,o=Jp,Jp=null;var g=na,E=us;if(En=0,ml=na=null,us=0,(vt&6)!==0)throw Error(i(331));var I=vt;if(vt|=4,bT(g.current),vT(g,g.current,E,o),vt=I,Qu(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(br,g)}catch{}return!0}finally{he.p=d,G.T=u,zT(r,s)}}function HT(r,s,o){s=Gr(o,s),s=Dp(r.stateNode,s,2),r=Qs(r,s,2),r!==null&&(Ei(r,2),Mi(r))}function At(r,s,o){if(r.tag===3)HT(r,r,o);else for(;s!==null;){if(s.tag===3){HT(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ta===null||!ta.has(u))){r=Gr(o,r),o=FE(2),u=Qs(s,o,2),u!==null&&(qE(o,u,s,r),Ei(u,2),Mi(u));break}}s=s.return}}function ng(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new XR;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(Yp=!0,d.add(o),r=tI.bind(null,r,s,o),s.then(r,r))}function tI(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Pt===r&&(at&o)===o&&(sn===4||sn===3&&(at&62914560)===at&&300>Bt()-of?(vt&2)===0&&pl(r,0):Qp|=o,dl===at&&(dl=0)),Mi(r)}function FT(r,s){s===0&&(s=Gi()),r=Ja(r,s),r!==null&&(Ei(r,s),Mi(r))}function nI(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),FT(r,o)}function rI(r,s){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,d=r.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),FT(r,o)}function iI(r,s){return Jt(r,s)}var mf=null,yl=null,rg=!1,pf=!1,ig=!1,ia=0;function Mi(r){r!==yl&&r.next===null&&(yl===null?mf=yl=r:yl=yl.next=r),pf=!0,rg||(rg=!0,aI())}function Qu(r,s){if(!ig&&pf){ig=!0;do for(var o=!1,u=mf;u!==null;){if(r!==0){var d=u.pendingLanes;if(d===0)var g=0;else{var E=u.suspendedLanes,I=u.pingedLanes;g=(1<<31-Kt(42|r)+1)-1,g&=d&~(E&~I),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,KT(u,g))}else g=at,g=Sr(u,u===Pt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Ar(u,g)||(o=!0,KT(u,g));u=u.next}while(o);ig=!1}}function sI(){qT()}function qT(){pf=rg=!1;var r=0;ia!==0&&gI()&&(r=ia);for(var s=Bt(),o=null,u=mf;u!==null;){var d=u.next,g=GT(u,s);g===0?(u.next=null,o===null?mf=d:o.next=d,d===null&&(yl=o)):(o=u,(r!==0||(g&3)!==0)&&(pf=!0)),u=d}En!==0&&En!==5||Qu(r),ia!==0&&(ia=0)}function GT(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var E=31-Kt(g),I=1<<E,B=d[E];B===-1?((I&o)===0||(I&u)!==0)&&(d[E]=jo(I,s)):B<=s&&(r.expiredLanes|=I),g&=~I}if(s=Pt,o=at,o=Sr(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(St===2||St===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&zt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Ar(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&zt(u),de(o)){case 2:case 8:o=qi;break;case 32:o=An;break;case 268435456:o=ja;break;default:o=An}return u=$T.bind(null,r),o=Jt(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&zt(u),r.callbackPriority=2,r.callbackNode=null,2}function $T(r,s){if(En!==0&&En!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(df()&&r.callbackNode!==o)return null;var u=at;return u=Sr(r,r===Pt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(RT(r,u,s),GT(r,Bt()),r.callbackNode!=null&&r.callbackNode===o?$T.bind(null,r):null)}function KT(r,s){if(df())return null;RT(r,s,!0)}function aI(){_I(function(){(vt&6)!==0?Jt(Ds,sI):qT()})}function sg(){if(ia===0){var r=nl;r===0&&(r=Wn,Wn<<=1,(Wn&261888)===0&&(Wn=256)),ia=r}return ia}function YT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Bo(""+r)}function QT(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function oI(r,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var g=YT((d[Se]||null).action),E=u.submitter;E&&(s=(s=E[Se]||null)?YT(s.formAction):E.getAttribute("formAction"),s!==null&&(g=s,E=null));var I=new Ci("action","action",null,u,d);r.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ia!==0){var B=E?QT(d,E):new FormData(d);wp(o,{pending:!0,data:B,method:d.method,action:g},null,B)}}else typeof g=="function"&&(I.preventDefault(),B=E?QT(d,E):new FormData(d),wp(o,{pending:!0,data:B,method:d.method,action:g},g,B))},currentTarget:d}]})}}for(var ag=0;ag<Hm.length;ag++){var og=Hm[ag],lI=og.toLowerCase(),uI=og[0].toUpperCase()+og.slice(1);ui(lI,"on"+uI)}ui(Cv,"onAnimationEnd"),ui(Rv,"onAnimationIteration"),ui(Iv,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(wR,"onTransitionRun"),ui(CR,"onTransitionStart"),ui(RR,"onTransitionCancel"),ui(xv,"onTransitionEnd"),zn("onMouseEnter",["mouseout","mouseover"]),zn("onMouseLeave",["mouseout","mouseover"]),zn("onPointerEnter",["pointerout","pointerover"]),zn("onPointerLeave",["pointerout","pointerover"]),ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xu));function XT(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],d=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var E=u.length-1;0<=E;E--){var I=u[E],B=I.instance,W=I.currentTarget;if(I=I.listener,B!==g&&d.isPropagationStopped())break e;g=I,d.currentTarget=W;try{g(d)}catch(se){xh(se)}d.currentTarget=null,g=B}else for(E=0;E<u.length;E++){if(I=u[E],B=I.instance,W=I.currentTarget,I=I.listener,B!==g&&d.isPropagationStopped())break e;g=I,d.currentTarget=W;try{g(d)}catch(se){xh(se)}d.currentTarget=null,g=B}}}}function st(r,s){var o=s[Be];o===void 0&&(o=s[Be]=new Set);var u=r+"__bubble";o.has(u)||(WT(s,r,2,!1),o.add(u))}function lg(r,s,o){var u=0;s&&(u|=4),WT(o,r,u,s)}var gf="_reactListening"+Math.random().toString(36).slice(2);function ug(r){if(!r[gf]){r[gf]=!0,sr.forEach(function(o){o!=="selectionchange"&&(cI.has(o)||lg(o,!1,r),lg(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[gf]||(s[gf]=!0,lg("selectionchange",!1,s))}}function WT(r,s,o,u){switch(Cb(s)){case 2:var d=jI;break;case 8:d=UI;break;default:d=Ag}o=d.bind(null,s,o,r),d=void 0,!qa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?r.addEventListener(s,o,{capture:!0,passive:d}):r.addEventListener(s,o,!0):d!==void 0?r.addEventListener(s,o,{passive:d}):r.addEventListener(s,o,!1)}function cg(r,s,o,u,d){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var I=u.stateNode.containerInfo;if(I===d)break;if(E===4)for(E=u.return;E!==null;){var B=E.tag;if((B===3||B===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;I!==null;){if(E=Vt(I),E===null)return;if(B=E.tag,B===5||B===6||B===26||B===27){u=g=E;continue e}I=I.parentNode}}u=u.return}Us(function(){var W=g,se=Br(o),ce=[];e:{var Z=Nv.get(r);if(Z!==void 0){var re=Ci,Ne=r;switch(r){case"keypress":if($a(o)===0)break e;case"keydown":case"keyup":re=Ch;break;case"focusin":Ne="focus",re=Ya;break;case"focusout":Ne="blur",re=Ya;break;case"beforeblur":case"afterblur":re=Ya;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=_;break;case Cv:case Rv:case Iv:re=vh;break;case xv:re=D;break;case"scroll":case"scrollend":re=Eu;break;case"wheel":re=ne;break;case"copy":case"cut":case"paste":re=Eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Qi;break;case"toggle":case"beforetoggle":re=Xe}var ze=(s&4)!==0,Nt=!ze&&(r==="scroll"||r==="scrollend"),Y=ze?Z!==null?Z+"Capture":null:Z;ze=[];for(var F=W,X;F!==null;){var ae=F;if(X=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||X===null||Y===null||(ae=si(F,Y),ae!=null&&ze.push(Wu(F,ae,X))),Nt)break;F=F.return}0<ze.length&&(Z=new re(Z,Ne,null,o,se),ce.push({event:Z,listeners:ze}))}}if((s&7)===0){e:{if(Z=r==="mouseover"||r==="pointerover",re=r==="mouseout"||r==="pointerout",Z&&o!==yu&&(Ne=o.relatedTarget||o.fromElement)&&(Vt(Ne)||Ne[Ie]))break e;if((re||Z)&&(Z=se.window===se?se:(Z=se.ownerDocument)?Z.defaultView||Z.parentWindow:window,re?(Ne=o.relatedTarget||o.toElement,re=W,Ne=Ne?Vt(Ne):null,Ne!==null&&(Nt=l(Ne),ze=Ne.tag,Ne!==Nt||ze!==5&&ze!==27&&ze!==6)&&(Ne=null)):(re=null,Ne=W),re!==Ne)){if(ze=Tu,ae="onMouseLeave",Y="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(ze=Qi,ae="onPointerLeave",Y="onPointerEnter",F="pointer"),Nt=re==null?Z:Lt(re),X=Ne==null?Z:Lt(Ne),Z=new ze(ae,F+"leave",re,o,se),Z.target=Nt,Z.relatedTarget=X,ae=null,Vt(se)===W&&(ze=new ze(Y,F+"enter",Ne,o,se),ze.target=X,ze.relatedTarget=Nt,ae=ze),Nt=ae,re&&Ne)t:{for(ze=hI,Y=re,F=Ne,X=0,ae=Y;ae;ae=ze(ae))X++;ae=0;for(var Ve=F;Ve;Ve=ze(Ve))ae++;for(;0<X-ae;)Y=ze(Y),X--;for(;0<ae-X;)F=ze(F),ae--;for(;X--;){if(Y===F||F!==null&&Y===F.alternate){ze=Y;break t}Y=ze(Y),F=ze(F)}ze=null}else ze=null;re!==null&&JT(ce,Z,re,ze,!1),Ne!==null&&Nt!==null&&JT(ce,Nt,Ne,ze,!0)}}e:{if(Z=W?Lt(W):window,re=Z.nodeName&&Z.nodeName.toLowerCase(),re==="select"||re==="input"&&Z.type==="file")var pt=pv;else if(dv(Z))if(gv)pt=bR;else{pt=ER;var De=vR}else re=Z.nodeName,!re||re.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?W&&zo(W.elementType)&&(pt=pv):pt=TR;if(pt&&(pt=pt(r,W))){mv(ce,pt,o,se);break e}De&&De(r,Z,W),r==="focusout"&&W&&Z.type==="number"&&W.memoizedProps.value!=null&&mu(Z,"number",Z.value)}switch(De=W?Lt(W):window,r){case"focusin":(dv(De)||De.contentEditable==="true")&&(Yo=De,Um=W,Cu=null);break;case"focusout":Cu=Um=Yo=null;break;case"mousedown":zm=!0;break;case"contextmenu":case"mouseup":case"dragend":zm=!1,Av(ce,o,se);break;case"selectionchange":if(AR)break;case"keydown":case"keyup":Av(ce,o,se)}var et;if(_t)e:{switch(r){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Ko?Qa(r,o)&&(ot="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ot="onCompositionStart");ot&&(xi&&o.locale!=="ko"&&(Ko||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Ko&&(et=vu()):(wi=se,_u="value"in wi?wi.value:wi.textContent,Ko=!0)),De=yf(W,ot),0<De.length&&(ot=new Ii(ot,r,null,o,se),ce.push({event:ot,listeners:De}),et?ot.data=et:(et=$o(o),et!==null&&(ot.data=et)))),(et=Fr?pR(r,o):gR(r,o))&&(ot=yf(W,"onBeforeInput"),0<ot.length&&(De=new Ii("onBeforeInput","beforeinput",null,o,se),ce.push({event:De,listeners:ot}),De.data=et)),oI(ce,r,W,o,se)}XT(ce,s)})}function Wu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function yf(r,s){for(var o=s+"Capture",u=[];r!==null;){var d=r,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=si(r,o),d!=null&&u.unshift(Wu(r,d,g)),d=si(r,s),d!=null&&u.push(Wu(r,d,g))),r.tag===3)return u;r=r.return}return[]}function hI(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function JT(r,s,o,u,d){for(var g=s._reactName,E=[];o!==null&&o!==u;){var I=o,B=I.alternate,W=I.stateNode;if(I=I.tag,B!==null&&B===u)break;I!==5&&I!==26&&I!==27||W===null||(B=W,d?(W=si(o,g),W!=null&&E.unshift(Wu(o,W,B))):d||(W=si(o,g),W!=null&&E.push(Wu(o,W,B)))),o=o.return}E.length!==0&&r.push({event:s,listeners:E})}var fI=/\r\n?/g,dI=/\u0000|\uFFFD/g;function ZT(r){return(typeof r=="string"?r:""+r).replace(fI,`
`).replace(dI,"")}function eb(r,s){return s=ZT(s),ZT(r)===s}function xt(r,s,o,u,d,g){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||lr(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&lr(r,""+u);break;case"className":hn(r,"class",u);break;case"tabIndex":hn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":hn(r,o,u);break;case"style":gu(r,u,g);break;case"data":if(s!=="object"){hn(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Bo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&xt(r,s,"name",d.name,d,null),xt(r,s,"formEncType",d.formEncType,d,null),xt(r,s,"formMethod",d.formMethod,d,null),xt(r,s,"formTarget",d.formTarget,d,null)):(xt(r,s,"encType",d.encType,d,null),xt(r,s,"method",d.method,d,null),xt(r,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Bo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=ii);break;case"onScroll":u!=null&&st("scroll",r);break;case"onScrollEnd":u!=null&&st("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Bo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":st("beforetoggle",r),st("toggle",r),Zt(r,"popover",u);break;case"xlinkActuate":Ct(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ct(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ct(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ct(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ct(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ct(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ct(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ct(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ct(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Zt(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gh.get(o)||o,Zt(r,o,u))}}function hg(r,s,o,u,d,g){switch(o){case"style":gu(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?lr(r,u):(typeof u=="number"||typeof u=="bigint")&&lr(r,""+u);break;case"onScroll":u!=null&&st("scroll",r);break;case"onScrollEnd":u!=null&&st("scrollend",r);break;case"onClick":u!=null&&(r.onclick=ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Un.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),g=r[Se]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(s,g,d),typeof u=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,d);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Zt(r,o,u)}}}function Mn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",r),st("load",r);var u=!1,d=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:xt(r,s,g,E,o,null)}}d&&xt(r,s,"srcSet",o.srcSet,o,null),u&&xt(r,s,"src",o.src,o,null);return;case"input":st("invalid",r);var I=g=E=d=null,B=null,W=null;for(u in o)if(o.hasOwnProperty(u)){var se=o[u];if(se!=null)switch(u){case"name":d=se;break;case"type":E=se;break;case"checked":B=se;break;case"defaultChecked":W=se;break;case"value":g=se;break;case"defaultValue":I=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,s));break;default:xt(r,s,u,se,o,null)}}dh(r,g,I,B,W,E,d,!1);return;case"select":st("invalid",r),u=E=g=null;for(d in o)if(o.hasOwnProperty(d)&&(I=o[d],I!=null))switch(d){case"value":g=I;break;case"defaultValue":E=I;break;case"multiple":u=I;default:xt(r,s,d,I,o,null)}s=g,o=E,r.multiple=!!u,s!=null?ks(r,!!u,s,!1):o!=null&&ks(r,!!u,o,!0);return;case"textarea":st("invalid",r),g=d=u=null;for(E in o)if(o.hasOwnProperty(E)&&(I=o[E],I!=null))switch(E){case"value":u=I;break;case"defaultValue":d=I;break;case"children":g=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:xt(r,s,E,I,o,null)}Vs(r,u,d,g);return;case"option":for(B in o)if(o.hasOwnProperty(B)&&(u=o[B],u!=null))switch(B){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:xt(r,s,B,u,o,null)}return;case"dialog":st("beforetoggle",r),st("toggle",r),st("cancel",r),st("close",r);break;case"iframe":case"object":st("load",r);break;case"video":case"audio":for(u=0;u<Xu.length;u++)st(Xu[u],r);break;case"image":st("error",r),st("load",r);break;case"details":st("toggle",r);break;case"embed":case"source":case"link":st("error",r),st("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(u=o[W],u!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:xt(r,s,W,u,o,null)}return;default:if(zo(s)){for(se in o)o.hasOwnProperty(se)&&(u=o[se],u!==void 0&&hg(r,s,se,u,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(u=o[I],u!=null&&xt(r,s,I,u,o,null))}function mI(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,E=null,I=null,B=null,W=null,se=null;for(re in o){var ce=o[re];if(o.hasOwnProperty(re)&&ce!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":B=ce;default:u.hasOwnProperty(re)||xt(r,s,re,null,u,ce)}}for(var Z in u){var re=u[Z];if(ce=o[Z],u.hasOwnProperty(Z)&&(re!=null||ce!=null))switch(Z){case"type":g=re;break;case"name":d=re;break;case"checked":W=re;break;case"defaultChecked":se=re;break;case"value":E=re;break;case"defaultValue":I=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,s));break;default:re!==ce&&xt(r,s,Z,re,u,ce)}}Uo(r,E,I,B,W,se,g,d);return;case"select":re=E=I=Z=null;for(g in o)if(B=o[g],o.hasOwnProperty(g)&&B!=null)switch(g){case"value":break;case"multiple":re=B;default:u.hasOwnProperty(g)||xt(r,s,g,null,u,B)}for(d in u)if(g=u[d],B=o[d],u.hasOwnProperty(d)&&(g!=null||B!=null))switch(d){case"value":Z=g;break;case"defaultValue":I=g;break;case"multiple":E=g;default:g!==B&&xt(r,s,d,g,u,B)}s=I,o=E,u=re,Z!=null?ks(r,!!o,Z,!1):!!u!=!!o&&(s!=null?ks(r,!!o,s,!0):ks(r,!!o,o?[]:"",!1));return;case"textarea":re=Z=null;for(I in o)if(d=o[I],o.hasOwnProperty(I)&&d!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:xt(r,s,I,null,u,d)}for(E in u)if(d=u[E],g=o[E],u.hasOwnProperty(E)&&(d!=null||g!=null))switch(E){case"value":Z=d;break;case"defaultValue":re=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==g&&xt(r,s,E,d,u,g)}mh(r,Z,re);return;case"option":for(var Ne in o)if(Z=o[Ne],o.hasOwnProperty(Ne)&&Z!=null&&!u.hasOwnProperty(Ne))switch(Ne){case"selected":r.selected=!1;break;default:xt(r,s,Ne,null,u,Z)}for(B in u)if(Z=u[B],re=o[B],u.hasOwnProperty(B)&&Z!==re&&(Z!=null||re!=null))switch(B){case"selected":r.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:xt(r,s,B,Z,u,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in o)Z=o[ze],o.hasOwnProperty(ze)&&Z!=null&&!u.hasOwnProperty(ze)&&xt(r,s,ze,null,u,Z);for(W in u)if(Z=u[W],re=o[W],u.hasOwnProperty(W)&&Z!==re&&(Z!=null||re!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:xt(r,s,W,Z,u,re)}return;default:if(zo(s)){for(var Nt in o)Z=o[Nt],o.hasOwnProperty(Nt)&&Z!==void 0&&!u.hasOwnProperty(Nt)&&hg(r,s,Nt,void 0,u,Z);for(se in u)Z=u[se],re=o[se],!u.hasOwnProperty(se)||Z===re||Z===void 0&&re===void 0||hg(r,s,se,Z,u,re);return}}for(var Y in o)Z=o[Y],o.hasOwnProperty(Y)&&Z!=null&&!u.hasOwnProperty(Y)&&xt(r,s,Y,null,u,Z);for(ce in u)Z=u[ce],re=o[ce],!u.hasOwnProperty(ce)||Z===re||Z==null&&re==null||xt(r,s,ce,Z,u,re)}function tb(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pI(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],g=d.transferSize,E=d.initiatorType,I=d.duration;if(g&&I&&tb(E)){for(E=0,I=d.responseEnd,u+=1;u<o.length;u++){var B=o[u],W=B.startTime;if(W>I)break;var se=B.transferSize,ce=B.initiatorType;se&&tb(ce)&&(B=B.responseEnd,E+=se*(B<I?1:(I-W)/(B-W)))}if(--u,s+=8*(g+E)/(d.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var fg=null,dg=null;function _f(r){return r.nodeType===9?r:r.ownerDocument}function nb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rb(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function mg(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var pg=null;function gI(){var r=window.event;return r&&r.type==="popstate"?r===pg?!1:(pg=r,!0):(pg=null,!1)}var ib=typeof setTimeout=="function"?setTimeout:void 0,yI=typeof clearTimeout=="function"?clearTimeout:void 0,sb=typeof Promise=="function"?Promise:void 0,_I=typeof queueMicrotask=="function"?queueMicrotask:typeof sb<"u"?function(r){return sb.resolve(null).then(r).catch(vI)}:ib;function vI(r){setTimeout(function(){throw r})}function sa(r){return r==="head"}function ab(r,s){var o=s,u=0;do{var d=o.nextSibling;if(r.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(d),Tl(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Ju(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Ju(o);for(var g=o.firstChild;g;){var E=g.nextSibling,I=g.nodeName;g[wt]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=E}}else o==="body"&&Ju(r.ownerDocument.body);o=d}while(o);Tl(s)}function ob(r,s){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function gg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":gg(o),Ht(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function EI(r,s,o,u){for(;r.nodeType===1;){var d=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[wt])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==d.rel||r.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||r.getAttribute("title")!==(d.title==null?null:d.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(d.src==null?null:d.src)||r.getAttribute("type")!==(d.type==null?null:d.type)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=Xr(r.nextSibling),r===null)break}return null}function TI(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Xr(r.nextSibling),r===null))return null;return r}function lb(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Xr(r.nextSibling),r===null))return null;return r}function yg(r){return r.data==="$?"||r.data==="$~"}function _g(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function bI(r,s){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Xr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var vg=null;function ub(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(s===0)return Xr(r.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}r=r.nextSibling}return null}function cb(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return r;s--}else o!=="/$"&&o!=="/&"||s++}r=r.previousSibling}return null}function hb(r,s,o){switch(s=_f(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ju(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Ht(r)}var Wr=new Map,fb=new Set;function vf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var cs=he.d;he.d={f:SI,r:AI,D:wI,C:CI,L:RI,m:II,X:NI,S:xI,M:DI};function SI(){var r=cs.f(),s=cf();return r||s}function AI(r){var s=Je(r);s!==null&&s.tag===5&&s.type==="form"?xE(s):cs.r(r)}var _l=typeof document>"u"?null:document;function db(r,s,o){var u=_l;if(u&&typeof s=="string"&&s){var d=or(s);d='link[rel="'+r+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),fb.has(d)||(fb.add(d),r={rel:r,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),Mn(s,"link",r),jt(s),u.head.appendChild(s)))}}function wI(r){cs.D(r),db("dns-prefetch",r,null)}function CI(r,s){cs.C(r,s),db("preconnect",r,s)}function RI(r,s,o){cs.L(r,s,o);var u=_l;if(u&&r&&s){var d='link[rel="preload"][as="'+or(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+or(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+or(o.imageSizes)+'"]')):d+='[href="'+or(r)+'"]';var g=d;switch(s){case"style":g=vl(r);break;case"script":g=El(r)}Wr.has(g)||(r=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Wr.set(g,r),u.querySelector(d)!==null||s==="style"&&u.querySelector(Zu(g))||s==="script"&&u.querySelector(ec(g))||(s=u.createElement("link"),Mn(s,"link",r),jt(s),u.head.appendChild(s)))}}function II(r,s){cs.m(r,s);var o=_l;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+or(u)+'"][href="'+or(r)+'"]',g=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=El(r)}if(!Wr.has(g)&&(r=v({rel:"modulepreload",href:r},s),Wr.set(g,r),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ec(g)))return}u=o.createElement("link"),Mn(u,"link",r),jt(u),o.head.appendChild(u)}}}function xI(r,s,o){cs.S(r,s,o);var u=_l;if(u&&r){var d=wn(u).hoistableStyles,g=vl(r);s=s||"default";var E=d.get(g);if(!E){var I={loading:0,preload:null};if(E=u.querySelector(Zu(g)))I.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Wr.get(g))&&Eg(r,o);var B=E=u.createElement("link");jt(B),Mn(B,"link",r),B._p=new Promise(function(W,se){B.onload=W,B.onerror=se}),B.addEventListener("load",function(){I.loading|=1}),B.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Ef(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:I},d.set(g,E)}}}function NI(r,s){cs.X(r,s);var o=_l;if(o&&r){var u=wn(o).hoistableScripts,d=El(r),g=u.get(d);g||(g=o.querySelector(ec(d)),g||(r=v({src:r,async:!0},s),(s=Wr.get(d))&&Tg(r,s),g=o.createElement("script"),jt(g),Mn(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function DI(r,s){cs.M(r,s);var o=_l;if(o&&r){var u=wn(o).hoistableScripts,d=El(r),g=u.get(d);g||(g=o.querySelector(ec(d)),g||(r=v({src:r,async:!0,type:"module"},s),(s=Wr.get(d))&&Tg(r,s),g=o.createElement("script"),jt(g),Mn(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function mb(r,s,o,u){var d=(d=ve.current)?vf(d):null;if(!d)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=vl(o.href),o=wn(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=vl(o.href);var g=wn(d).hoistableStyles,E=g.get(r);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,E),(g=d.querySelector(Zu(r)))&&!g._p&&(E.instance=g,E.state.loading=5),Wr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Wr.set(r,o),g||OI(d,r,o,E.state))),s&&u===null)throw Error(i(528,""));return E}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=El(o),o=wn(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function vl(r){return'href="'+or(r)+'"'}function Zu(r){return'link[rel="stylesheet"]['+r+"]"}function pb(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function OI(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Mn(s,"link",o),jt(s),r.head.appendChild(s))}function El(r){return'[src="'+or(r)+'"]'}function ec(r){return"script[async]"+r}function gb(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+or(o.href)+'"]');if(u)return s.instance=u,jt(u),u;var d=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),jt(u),Mn(u,"style",d),Ef(u,o.precedence,r),s.instance=u;case"stylesheet":d=vl(o.href);var g=r.querySelector(Zu(d));if(g)return s.state.loading|=4,s.instance=g,jt(g),g;u=pb(o),(d=Wr.get(d))&&Eg(u,d),g=(r.ownerDocument||r).createElement("link"),jt(g);var E=g;return E._p=new Promise(function(I,B){E.onload=I,E.onerror=B}),Mn(g,"link",u),s.state.loading|=4,Ef(g,o.precedence,r),s.instance=g;case"script":return g=El(o.src),(d=r.querySelector(ec(g)))?(s.instance=d,jt(d),d):(u=o,(d=Wr.get(g))&&(u=v({},o),Tg(u,d)),r=r.ownerDocument||r,d=r.createElement("script"),jt(d),Mn(d,"link",u),r.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ef(u,o.precedence,r));return s.instance}function Ef(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,g=d,E=0;E<u.length;E++){var I=u[E];if(I.dataset.precedence===s)g=I;else if(g!==d)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Eg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Tg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Tf=null;function yb(r,s,o){if(Tf===null){var u=new Map,d=Tf=new Map;d.set(o,u)}else d=Tf,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),d=0;d<o.length;d++){var g=o[d];if(!(g[wt]||g[_e]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(s)||"";E=r+E;var I=u.get(E);I?I.push(g):u.set(E,[g])}}return u}function _b(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function MI(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function vb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function PI(r,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=vl(u.href),g=s.querySelector(Zu(d));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=bf.bind(r),s.then(r,r)),o.state.loading|=4,o.instance=g,jt(g);return}g=s.ownerDocument||s,u=pb(u),(d=Wr.get(d))&&Eg(u,d),g=g.createElement("link"),jt(g);var E=g;E._p=new Promise(function(I,B){E.onload=I,E.onerror=B}),Mn(g,"link",u),o.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=bf.bind(r),s.addEventListener("load",o),s.addEventListener("error",o))}}var bg=0;function kI(r,s){return r.stylesheets&&r.count===0&&Af(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Af(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+s);0<r.imgBytes&&bg===0&&(bg=62500*pI());var d=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Af(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>bg?50:800)+s);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function bf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Af(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Sf=null;function Af(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Sf=new Map,s.forEach(VI,r),Sf=null,bf.call(r))}function VI(r,s){if(!(s.state.loading&4)){var o=Sf.get(r);if(o)var u=o.get(null);else{o=new Map,Sf.set(r,o);for(var d=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var E=d[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}d=s.instance,E=d.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,d),o.set(E,d),this.count++,u=bf.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),g?g.parentNode.insertBefore(d,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(d,r.firstChild)),s.state.loading|=4}}var tc={$$typeof:q,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function LI(r,s,o,u,d,g,E,I,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jn(0),this.hiddenUpdates=Jn(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Eb(r,s,o,u,d,g,E,I,B,W,se,ce){return r=new LI(r,s,o,E,B,W,se,ce,I),s=1,g===!0&&(s|=24),g=Ir(3,null,null,s),r.current=g,g.stateNode=r,s=tp(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:s},sp(g),r}function Tb(r){return r?(r=Wo,r):Wo}function bb(r,s,o,u,d,g){d=Tb(d),u.context===null?u.context=d:u.pendingContext=d,u=Ys(s),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Qs(r,u,s),o!==null&&(dr(o,r,s),Mu(o,r,s))}function Sb(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Sg(r,s){Sb(r,s),(r=r.alternate)&&Sb(r,s)}function Ab(r){if(r.tag===13||r.tag===31){var s=Ja(r,67108864);s!==null&&dr(s,r,67108864),Sg(r,67108864)}}function wb(r){if(r.tag===13||r.tag===31){var s=Mr();s=J(s);var o=Ja(r,s);o!==null&&dr(o,r,s),Sg(r,s)}}var wf=!0;function jI(r,s,o,u){var d=G.T;G.T=null;var g=he.p;try{he.p=2,Ag(r,s,o,u)}finally{he.p=g,G.T=d}}function UI(r,s,o,u){var d=G.T;G.T=null;var g=he.p;try{he.p=8,Ag(r,s,o,u)}finally{he.p=g,G.T=d}}function Ag(r,s,o,u){if(wf){var d=wg(u);if(d===null)cg(r,s,u,Cf,o),Rb(r,u);else if(BI(d,r,s,o,u))u.stopPropagation();else if(Rb(r,u),s&4&&-1<zI.indexOf(r)){for(;d!==null;){var g=Je(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=zr(g.pendingLanes);if(E!==0){var I=g;for(I.pendingLanes|=2,I.entangledLanes|=2;E;){var B=1<<31-Kt(E);I.entanglements[1]|=B,E&=~B}Mi(g),(vt&6)===0&&(lf=Bt()+500,Qu(0))}}break;case 31:case 13:I=Ja(g,2),I!==null&&dr(I,g,2),cf(),Sg(g,2)}if(g=wg(u),g===null&&cg(r,s,u,Cf,o),g===d)break;d=g}d!==null&&u.stopPropagation()}else cg(r,s,u,null,o)}}function wg(r){return r=Br(r),Cg(r)}var Cf=null;function Cg(r){if(Cf=null,r=Vt(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===31){if(r=f(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Cf=r,null}function Cb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Er()){case Ds:return 2;case qi:return 8;case An:case Tr:return 32;case ja:return 268435456;default:return 32}default:return 32}}var Rg=!1,aa=null,oa=null,la=null,nc=new Map,rc=new Map,ua=[],zI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rb(r,s){switch(r){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":oa=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":nc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(s.pointerId)}}function ic(r,s,o,u,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[d]},s!==null&&(s=Je(s),s!==null&&Ab(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function BI(r,s,o,u,d){switch(s){case"focusin":return aa=ic(aa,r,s,o,u,d),!0;case"dragenter":return oa=ic(oa,r,s,o,u,d),!0;case"mouseover":return la=ic(la,r,s,o,u,d),!0;case"pointerover":var g=d.pointerId;return nc.set(g,ic(nc.get(g)||null,r,s,o,u,d)),!0;case"gotpointercapture":return g=d.pointerId,rc.set(g,ic(rc.get(g)||null,r,s,o,u,d)),!0}return!1}function Ib(r){var s=Vt(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,Ce(r.priority,function(){wb(o)});return}}else if(s===31){if(s=f(o),s!==null){r.blockedOn=s,Ce(r.priority,function(){wb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Rf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=wg(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);yu=u,o.target.dispatchEvent(u),yu=null}else return s=Je(o),s!==null&&Ab(s),r.blockedOn=o,!1;s.shift()}return!0}function xb(r,s,o){Rf(r)&&o.delete(s)}function HI(){Rg=!1,aa!==null&&Rf(aa)&&(aa=null),oa!==null&&Rf(oa)&&(oa=null),la!==null&&Rf(la)&&(la=null),nc.forEach(xb),rc.forEach(xb)}function If(r,s){r.blockedOn===s&&(r.blockedOn=null,Rg||(Rg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,HI)))}var xf=null;function Nb(r){xf!==r&&(xf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){xf===r&&(xf=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],d=r[s+2];if(typeof u!="function"){if(Cg(u||o)===null)continue;break}var g=Je(o);g!==null&&(r.splice(s,3),s-=3,wp(g,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function Tl(r){function s(B){return If(B,r)}aa!==null&&If(aa,r),oa!==null&&If(oa,r),la!==null&&If(la,r),nc.forEach(s),rc.forEach(s);for(var o=0;o<ua.length;o++){var u=ua[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ua.length&&(o=ua[0],o.blockedOn===null);)Ib(o),o.blockedOn===null&&ua.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],g=o[u+1],E=d[Se]||null;if(typeof g=="function")E||Nb(o);else if(E){var I=null;if(g&&g.hasAttribute("formAction")){if(d=g,E=g[Se]||null)I=E.formAction;else if(Cg(d)!==null)continue}else I=E.action;typeof I=="function"?o[u+1]=I:(o.splice(u,3),u-=3),Nb(o)}}}function Db(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(E){return d=E})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Ig(r){this._internalRoot=r}Nf.prototype.render=Ig.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Mr();bb(o,u,r,s,null,null)},Nf.prototype.unmount=Ig.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;bb(r.current,2,null,r,null,null),cf(),s[Ie]=null}};function Nf(r){this._internalRoot=r}Nf.prototype.unstable_scheduleHydration=function(r){if(r){var s=ye();r={blockedOn:null,target:r,priority:s};for(var o=0;o<ua.length&&s!==0&&s<ua[o].priority;o++);ua.splice(o,0,r),o===0&&Ib(r)}};var Ob=e.version;if(Ob!=="19.2.4")throw Error(i(527,Ob,"19.2.4"));he.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var FI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Df.isDisabled&&Df.supportsFiber)try{br=Df.inject(FI),Mt=Df}catch{}}return ac.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",d=UE,g=zE,E=BE;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),s=Eb(r,1,!1,null,null,o,u,null,d,g,E,Db),r[Ie]=s.current,ug(r),new Ig(s)},ac.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,d="",g=UE,E=zE,I=BE,B=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(B=o.formState)),s=Eb(r,1,!0,s,o??null,u,d,B,g,E,I,Db),s.context=Tb(null),o=s.current,u=Mr(),u=J(u),d=Ys(u),d.callback=null,Qs(o,d,u),o=u,s.current.lanes=o,Ei(s,o),Mi(s),r[Ie]=s.current,ug(r),new Nf(s)},ac.version="19.2.4",ac}var Hb;function nx(){if(Hb)return Og.exports;Hb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Og.exports=tx(),Og.exports}var rx=nx();const ix=vA(rx);var Vg={exports:{}},Lg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function sx(){if(Fb)return Lg;Fb=1;var n=Gd();function e(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,a=n.useRef,l=n.useEffect,c=n.useMemo,f=n.useDebugValue;return Lg.useSyncExternalStoreWithSelector=function(m,p,y,v,T){var w=a(null);if(w.current===null){var N={hasValue:!1,value:null};w.current=N}else N=w.current;w=c(function(){function M(ee){if(!L){if(L=!0,U=ee,ee=v(ee),T!==void 0&&N.hasValue){var $=N.value;if(T($,ee))return q=$}return q=ee}if($=q,t(U,ee))return $;var S=v(ee);return T!==void 0&&T($,S)?(U=ee,$):(U=ee,q=S)}var L=!1,U,q,te=y===void 0?null:y;return[function(){return M(p())},te===null?void 0:function(){return M(te())}]},[p,y,v,T]);var V=i(m,w[0],w[1]);return l(function(){N.hasValue=!0,N.value=V},[V]),f(V),V},Lg}var qb;function ax(){return qb||(qb=1,Vg.exports=sx()),Vg.exports}var ox=ax();function lx(n){n()}function ux(){let n=null,e=null;return{clear(){n=null,e=null},notify(){lx(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const a=e={callback:t,next:null,prev:e};return a.prev?a.prev.next=a:n=a,function(){!i||n===null||(i=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var Gb={notify(){},get:()=>[]};function cx(n,e){let t,i=Gb,a=0,l=!1;function c(V){y();const M=i.subscribe(V);let L=!1;return()=>{L||(L=!0,M(),v())}}function f(){i.notify()}function m(){N.onStateChange&&N.onStateChange()}function p(){return l}function y(){a++,t||(t=n.subscribe(m),i=ux())}function v(){a--,t&&a===0&&(t(),t=void 0,i.clear(),i=Gb)}function T(){l||(l=!0,y())}function w(){l&&(l=!1,v())}const N={addNestedSub:c,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:T,tryUnsubscribe:w,getListeners:()=>i};return N}var hx=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fx=hx(),dx=()=>typeof navigator<"u"&&navigator.product==="ReactNative",mx=dx(),px=()=>fx||mx?O.useLayoutEffect:O.useEffect,gx=px(),jg=Symbol.for("react-redux-context"),Ug=typeof globalThis<"u"?globalThis:{};function yx(){if(!O.createContext)return{};const n=Ug[jg]??(Ug[jg]=new Map);let e=n.get(O.createContext);return e||(e=O.createContext(null),n.set(O.createContext,e)),e}var Ra=yx();function _x(n){const{children:e,context:t,serverState:i,store:a}=n,l=O.useMemo(()=>{const m=cx(a);return{store:a,subscription:m,getServerState:i?()=>i:void 0}},[a,i]),c=O.useMemo(()=>a.getState(),[a]);gx(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==a.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,c]);const f=t||Ra;return O.createElement(f.Provider,{value:l},e)}var vx=_x;function Zy(n=Ra){return function(){return O.useContext(n)}}var bA=Zy();function SA(n=Ra){const e=n===Ra?bA:Zy(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var Ex=SA();function Tx(n=Ra){const e=n===Ra?Ex:SA(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var bx=Tx(),Sx=(n,e)=>n===e;function Ax(n=Ra){const e=n===Ra?bA:Zy(n),t=(i,a={})=>{const{equalityFn:l=Sx}=typeof a=="function"?{equalityFn:a}:a,c=e(),{store:f,subscription:m,getServerState:p}=c;O.useRef(!0);const y=O.useCallback({[i.name](T){return i(T)}}[i.name],[i]),v=ox.useSyncExternalStoreWithSelector(m.addNestedSub,f.getState,p||f.getState,y,l);return O.useDebugValue(v),v};return Object.assign(t,{withTypes:()=>t}),t}var wx=Ax();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var AA=n=>{throw TypeError(n)},Cx=(n,e,t)=>e.has(n)||AA("Cannot "+t),zg=(n,e,t)=>(Cx(n,e,"read from private field"),t?t.call(n):e.get(n)),Rx=(n,e,t)=>e.has(n)?AA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),$b="popstate";function Ix(n={}){function e(a,l){let{pathname:c="/",search:f="",hash:m=""}=xs(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Nc("",{pathname:c,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let m=a.location.href,p=m.indexOf("#");f=p===-1?m:m.slice(0,p)}return f+"#"+(typeof l=="string"?l:zi(l))}function i(a,l){tn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return Nx(e,t,i,n)}function nt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function tn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xx(){return Math.random().toString(36).substring(2,10)}function Kb(n,e){return{usr:n.state,key:n.key,idx:e}}function Nc(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?xs(e):e,state:t,key:e&&e.key||i||xx()}}function zi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function xs(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function Nx(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,f="POP",m=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function v(){f="POP";let M=y(),L=M==null?null:M-p;p=M,m&&m({action:f,location:V.location,delta:L})}function T(M,L){f="PUSH";let U=Nc(V.location,M,L);t&&t(U,M),p=y()+1;let q=Kb(U,p),te=V.createHref(U);try{c.pushState(q,"",te)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;a.location.assign(te)}l&&m&&m({action:f,location:V.location,delta:1})}function w(M,L){f="REPLACE";let U=Nc(V.location,M,L);t&&t(U,M),p=y();let q=Kb(U,p),te=V.createHref(U);c.replaceState(q,"",te),l&&m&&m({action:f,location:V.location,delta:0})}function N(M){return wA(M)}let V={get action(){return f},get location(){return n(a,c)},listen(M){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener($b,v),m=M,()=>{a.removeEventListener($b,v),m=null}},createHref(M){return e(a,M)},createURL:N,encodeLocation(M){let L=N(M);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:T,replace:w,go(M){return c.go(M)}};return V}function wA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),nt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:zi(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}var dc,Yb=class{constructor(n){if(Rx(this,dc,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(zg(this,dc).has(n))return zg(this,dc).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){zg(this,dc).set(n,e)}};dc=new WeakMap;var Dx=new Set(["lazy","caseSensitive","path","id","index","children"]);function Ox(n){return Dx.has(n)}var Mx=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function Px(n){return Mx.has(n)}function kx(n){return n.index===!0}function Dc(n,e,t=[],i={},a=!1){return n.map((l,c)=>{let f=[...t,String(c)],m=typeof l.id=="string"?l.id:f.join("-");if(nt(l.index!==!0||!l.children,"Cannot specify children on an index route"),nt(a||!i[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),kx(l)){let p={...l,id:m};return i[m]=Qb(p,e(p)),p}else{let p={...l,id:m,children:void 0};return i[m]=Qb(p,e(p)),l.children&&(p.children=Dc(l.children,e,f,i,a)),p}})}function Qb(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function ma(n,e,t="/"){return mc(n,e,t,!1)}function mc(n,e,t,i){let a=typeof e=="string"?xs(e):e,l=ti(a.pathname||"/",t);if(l==null)return null;let c=CA(n);Lx(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let p=Yx(l);f=$x(c[m],p,i)}return f}function Vx(n,e){let{route:t,pathname:i,params:a}=n;return{id:t.id,pathname:i,params:a,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function CA(n,e=[],t=[],i="",a=!1){let l=(c,f,m=a,p)=>{let y={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&m)return;nt(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let v=ki([i,y.relativePath]),T=t.concat(y);c.children&&c.children.length>0&&(nt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),CA(c.children,e,T,v,m)),!(c.path==null&&!c.index)&&e.push({path:v,score:qx(v,c.index),routesMeta:T})};return n.forEach((c,f)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))l(c,f);else for(let p of RA(c.path))l(c,f,!0,p)}),e}function RA(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=RA(i.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function Lx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Gx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var jx=/^:[\w-]+$/,Ux=3,zx=2,Bx=1,Hx=10,Fx=-2,Xb=n=>n==="*";function qx(n,e){let t=n.split("/"),i=t.length;return t.some(Xb)&&(i+=Fx),e&&(i+=zx),t.filter(a=>!Xb(a)).reduce((a,l)=>a+(jx.test(l)?Ux:l===""?Bx:Hx),i)}function Gx(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function $x(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let f=0;f<i.length;++f){let m=i[f],p=f===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=gd({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),T=m.route;if(!v&&p&&t&&!i[i.length-1].route.index&&(v=gd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),c.push({params:a,pathname:ki([l,v.pathname]),pathnameBase:Wx(ki([l,v.pathnameBase])),route:T}),v.pathnameBase!=="/"&&(l=ki([l,v.pathnameBase]))}return c}function gd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Kx(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:v},T)=>{if(y==="*"){let N=f[T]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const w=f[T];return v&&!w?p[y]=void 0:p[y]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function Kx(n,e=!1,t=!0){tn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function Yx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ti(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Qx({basename:n,pathname:e}){return e==="/"?n:ki([n,e])}var IA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e_=n=>IA.test(n);function Xx(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?xs(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=Wb(t.substring(1),"/"):l=Wb(t,e)):l=e,{pathname:l,search:Jx(i),hash:Zx(a)}}function Wb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Bg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $d(n){let e=xA(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Kd(n,e,t,i=!1){let a;typeof n=="string"?a=xs(n):(a={...n},nt(!a.pathname||!a.pathname.includes("?"),Bg("?","pathname","search",a)),nt(!a.pathname||!a.pathname.includes("#"),Bg("#","pathname","hash",a)),nt(!a.search||!a.search.includes("#"),Bg("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=t;else{let v=e.length-1;if(!i&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),v-=1;a.pathname=T.join("/")}f=v>=0?e[v]:"/"}let m=Xx(a,f),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var ki=n=>n.join("/").replace(/\/\/+/g,"/"),Wx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Jx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Zx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Kc=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Oc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Yc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var NA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function DA(n,e){let t=n;if(typeof t!="string"||!IA.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(NA)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=ti(c.pathname,e);c.origin===l.origin&&f!=null?t=f+c.search+c.hash:a=!0}catch{tn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}var va=Symbol("Uninstrumented");function eN(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(a=>a({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let f of c)l[f]&&t[f].push(l[f])}}));let i={};if(typeof e.lazy=="function"&&t.lazy.length>0){let a=Ml(t.lazy,e.lazy,()=>{});a&&(i.lazy=a)}if(typeof e.lazy=="object"){let a=e.lazy;["middleware","loader","action"].forEach(l=>{let c=a[l],f=t[`lazy.${l}`];if(typeof c=="function"&&f.length>0){let m=Ml(f,c,()=>{});m&&(i.lazy=Object.assign(i.lazy||{},{[l]:m}))}})}return["loader","action"].forEach(a=>{let l=e[a];if(typeof l=="function"&&t[a].length>0){let c=l[va]??l,f=Ml(t[a],c,(...m)=>Jb(m[0]));f&&(a==="loader"&&c.hydrate===!0&&(f.hydrate=!0),f[va]=c,i[a]=f)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(i.middleware=e.middleware.map(a=>{let l=a[va]??a,c=Ml(t.middleware,l,(...f)=>Jb(f[0]));return c?(c[va]=l,c):a})),i}function tN(n,e){let t={navigate:[],fetch:[]};if(e.forEach(i=>i({instrument(a){let l=Object.keys(a);for(let c of l)a[c]&&t[c].push(a[c])}})),t.navigate.length>0){let i=n.navigate[va]??n.navigate,a=Ml(t.navigate,i,(...l)=>{let[c,f]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?zi(c):".",...Zb(n,f??{})}});a&&(a[va]=i,n.navigate=a)}if(t.fetch.length>0){let i=n.fetch[va]??n.fetch,a=Ml(t.fetch,i,(...l)=>{let[c,,f,m]=l;return{href:f??".",fetcherKey:c,...Zb(n,m??{})}});a&&(a[va]=i,n.fetch=a)}return n}function Ml(n,e,t){return n.length===0?null:async(...i)=>{let a=await OA(n,t(...i),()=>e(...i),n.length-1);if(a.type==="error")throw a.value;return a.value}}async function OA(n,e,t,i){let a=n[i],l;if(a){let c,f=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=OA(n,e,t,i-1),l=await c,nt(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await a(f,e)}catch(m){console.error("An instrumentation function threw an error:",m)}c||await f(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Jb(n){let{request:e,context:t,params:i,unstable_pattern:a}=n;return{request:nN(e),params:{...i},unstable_pattern:a,context:rN(t)}}function Zb(n,e){return{currentUrl:zi(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function nN(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function rN(n){if(sN(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var iN=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function sN(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===iN}var MA=["POST","PUT","PATCH","DELETE"],aN=new Set(MA),oN=["GET",...MA],lN=new Set(oN),PA=new Set([301,302,303,307,308]),uN=new Set([307,308]),Hg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},cN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},oc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},hN=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),kA="remix-router-transitions",VA=Symbol("ResetLoaderData");function fN(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";nt(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=n.hydrationRouteProperties||[],a=n.mapRouteProperties||hN,l=a;if(n.unstable_instrumentations){let z=n.unstable_instrumentations;l=K=>({...a(K),...eN(z.map(J=>J.route).filter(Boolean),K)})}let c={},f=Dc(n.routes,l,void 0,c),m,p=n.basename||"/";p.startsWith("/")||(p=`/${p}`);let y=n.dataStrategy||yN,v={...n.future},T=null,w=new Set,N=null,V=null,M=null,L=n.hydrationData!=null,U=ma(f,n.history.location,p),q=!1,te=null,ee;if(U==null&&!n.patchRoutesOnNavigation){let z=Jr(404,{pathname:n.history.location.pathname}),{matches:K,route:J}=Of(f);ee=!0,U=K,te={[J.id]:z}}else if(U&&!n.hydrationData&&Gi(U,f,n.history.location.pathname).active&&(U=null),U)if(U.some(z=>z.route.lazy))ee=!1;else if(!U.some(z=>t_(z.route)))ee=!0;else{let z=n.hydrationData?n.hydrationData.loaderData:null,K=n.hydrationData?n.hydrationData.errors:null;if(K){let J=U.findIndex(de=>K[de.route.id]!==void 0);ee=U.slice(0,J+1).every(de=>!gy(de.route,z,K))}else ee=U.every(J=>!gy(J.route,z,K))}else{ee=!1,U=[];let z=Gi(null,f,n.history.location.pathname);z.active&&z.matches&&(q=!0,U=z.matches)}let $,S={historyAction:n.history.action,location:n.history.location,matches:U,initialized:ee,navigation:Hg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||te,fetchers:new Map,blockers:new Map},C="POP",R=null,k=!1,P,j=!1,x=new Map,le=null,me=!1,G=!1,he=new Set,pe=new Map,Pe=0,Oe=-1,H=new Map,ie=new Set,ge=new Map,Ee=new Map,ue=new Set,ve=new Map,Ae,ke=null;function je(){if(T=n.history.listen(({action:z,location:K,delta:J})=>{if(Ae){Ae(),Ae=void 0;return}tn(ve.size===0||J!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let de=vi({currentLocation:S.location,nextLocation:K,historyAction:z});if(de&&J!=null){let ye=new Promise(Ce=>{Ae=Ce});n.history.go(J*-1),Wn(de,{state:"blocked",location:K,proceed(){Wn(de,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),ye.then(()=>n.history.go(J))},reset(){let Ce=new Map(S.blockers);Ce.set(de,oc),be({blockers:Ce})}}),R==null||R.resolve(),R=null;return}return Dt(z,K)}),t){kN(e,x);let z=()=>VN(e,x);e.addEventListener("pagehide",z),le=()=>e.removeEventListener("pagehide",z)}return S.initialized||Dt("POP",S.location,{initialHydration:!0}),$}function mt(){T&&T(),le&&le(),w.clear(),P&&P.abort(),S.fetchers.forEach((z,K)=>Os(K)),S.blockers.forEach((z,K)=>za(K))}function Et(z){return w.add(z),()=>w.delete(z)}function be(z,K={}){z.matches&&(z.matches=z.matches.map(ye=>{let Ce=c[ye.route.id],xe=ye.route;return xe.element!==Ce.element||xe.errorElement!==Ce.errorElement||xe.hydrateFallbackElement!==Ce.hydrateFallbackElement?{...ye,route:Ce}:ye})),S={...S,...z};let J=[],de=[];S.fetchers.forEach((ye,Ce)=>{ye.state==="idle"&&(ue.has(Ce)?J.push(Ce):de.push(Ce))}),ue.forEach(ye=>{!S.fetchers.has(ye)&&!pe.has(ye)&&J.push(ye)}),[...w].forEach(ye=>ye(S,{deletedFetchers:J,newErrors:z.errors??null,viewTransitionOpts:K.viewTransitionOpts,flushSync:K.flushSync===!0})),J.forEach(ye=>Os(ye)),de.forEach(ye=>S.fetchers.delete(ye))}function Fe(z,K,{flushSync:J}={}){var Be,Me;let de=S.actionData!=null&&S.navigation.formMethod!=null&&qn(S.navigation.formMethod)&&S.navigation.state==="loading"&&((Be=z.state)==null?void 0:Be._isRedirect)!==!0,ye;K.actionData?Object.keys(K.actionData).length>0?ye=K.actionData:ye=null:de?ye=S.actionData:ye=null;let Ce=K.loaderData?u0(S.loaderData,K.loaderData,K.matches||[],K.errors):S.loaderData,xe=S.blockers;xe.size>0&&(xe=new Map(xe),xe.forEach((Ge,tt)=>xe.set(tt,oc)));let _e=me?!1:jo(z,K.matches||S.matches),Se=k===!0||S.navigation.formMethod!=null&&qn(S.navigation.formMethod)&&((Me=z.state)==null?void 0:Me._isRedirect)!==!0;m&&(f=m,m=void 0),me||C==="POP"||(C==="PUSH"?n.history.push(z,z.state):C==="REPLACE"&&n.history.replace(z,z.state));let Ie;if(C==="POP"){let Ge=x.get(S.location.pathname);Ge&&Ge.has(z.pathname)?Ie={currentLocation:S.location,nextLocation:z}:x.has(z.pathname)&&(Ie={currentLocation:z,nextLocation:S.location})}else if(j){let Ge=x.get(S.location.pathname);Ge?Ge.add(z.pathname):(Ge=new Set([z.pathname]),x.set(S.location.pathname,Ge)),Ie={currentLocation:S.location,nextLocation:z}}be({...K,actionData:ye,loaderData:Ce,historyAction:C,location:z,initialized:!0,navigation:Hg,revalidation:"idle",restoreScrollPosition:_e,preventScrollReset:Se,blockers:xe},{viewTransitionOpts:Ie,flushSync:J===!0}),C="POP",k=!1,j=!1,me=!1,G=!1,R==null||R.resolve(),R=null,ke==null||ke.resolve(),ke=null}async function Qe(z,K){if(R==null||R.resolve(),R=null,typeof z=="number"){R||(R=d0());let tt=R.promise;return n.history.go(z),tt}let J=py(S.location,S.matches,p,z,K==null?void 0:K.fromRouteId,K==null?void 0:K.relative),{path:de,submission:ye,error:Ce}=e0(!1,J,K),xe=S.location,_e=Nc(S.location,de,K&&K.state);_e={..._e,...n.history.encodeLocation(_e)};let Se=K&&K.replace!=null?K.replace:void 0,Ie="PUSH";Se===!0?Ie="REPLACE":Se===!1||ye!=null&&qn(ye.formMethod)&&ye.formAction===S.location.pathname+S.location.search&&(Ie="REPLACE");let Be=K&&"preventScrollReset"in K?K.preventScrollReset===!0:void 0,Me=(K&&K.flushSync)===!0,Ge=vi({currentLocation:xe,nextLocation:_e,historyAction:Ie});if(Ge){Wn(Ge,{state:"blocked",location:_e,proceed(){Wn(Ge,{state:"proceeding",proceed:void 0,reset:void 0,location:_e}),Qe(z,K)},reset(){let tt=new Map(S.blockers);tt.set(Ge,oc),be({blockers:tt})}});return}await Dt(Ie,_e,{submission:ye,pendingError:Ce,preventScrollReset:Be,replace:K&&K.replace,enableViewTransition:K&&K.viewTransition,flushSync:Me,callSiteDefaultShouldRevalidate:K&&K.unstable_defaultShouldRevalidate})}function $t(){ke||(ke=d0()),qi(),be({revalidation:"loading"});let z=ke.promise;return S.navigation.state==="submitting"?z:S.navigation.state==="idle"?(Dt(S.historyAction,S.location,{startUninterruptedRevalidation:!0}),z):(Dt(C||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:j===!0}),z)}async function Dt(z,K,J){P&&P.abort(),P=null,C=z,me=(J&&J.startUninterruptedRevalidation)===!0,Ar(S.location,S.matches),k=(J&&J.preventScrollReset)===!0,j=(J&&J.enableViewTransition)===!0;let de=m||f,ye=J&&J.overrideNavigation,Ce=J!=null&&J.initialHydration&&S.matches&&S.matches.length>0&&!q?S.matches:ma(de,K,p),xe=(J&&J.flushSync)===!0;if(Ce&&S.initialized&&!G&&wN(S.location,K)&&!(J&&J.submission&&qn(J.submission.formMethod))){Fe(K,{matches:Ce},{flushSync:xe});return}let _e=Gi(Ce,de,K.pathname);if(_e.active&&_e.matches&&(Ce=_e.matches),!Ce){let{error:Ht,notFoundMatches:Vt,route:Je}=Yt(K.pathname);Fe(K,{matches:Vt,loaderData:{},errors:{[Je.id]:Ht}},{flushSync:xe});return}P=new AbortController;let Se=Cl(n.history,K,P.signal,J&&J.submission),Ie=n.getContext?await n.getContext():new Yb,Be;if(J&&J.pendingError)Be=[pa(Ce).route.id,{type:"error",error:J.pendingError}];else if(J&&J.submission&&qn(J.submission.formMethod)){let Ht=await Qn(Se,K,J.submission,Ce,Ie,_e.active,J&&J.initialHydration===!0,{replace:J.replace,flushSync:xe});if(Ht.shortCircuited)return;if(Ht.pendingActionResult){let[Vt,Je]=Ht.pendingActionResult;if(Pr(Je)&&Oc(Je.error)&&Je.error.status===404){P=null,Fe(K,{matches:Ht.matches,loaderData:{},errors:{[Vt]:Je.error}});return}}Ce=Ht.matches||Ce,Be=Ht.pendingActionResult,ye=Fg(K,J.submission),xe=!1,_e.active=!1,Se=Cl(n.history,Se.url,Se.signal)}let{shortCircuited:Me,matches:Ge,loaderData:tt,errors:wt}=await ir(Se,K,Ce,Ie,_e.active,ye,J&&J.submission,J&&J.fetcherSubmission,J&&J.replace,J&&J.initialHydration===!0,xe,Be,J&&J.callSiteDefaultShouldRevalidate);Me||(P=null,Fe(K,{matches:Ge||Ce,...c0(Be),loaderData:tt,errors:wt}))}async function Qn(z,K,J,de,ye,Ce,xe,_e={}){qi();let Se=MN(K,J);if(be({navigation:Se},{flushSync:_e.flushSync===!0}),Ce){let Me=await Jn(de,K.pathname,z.signal);if(Me.type==="aborted")return{shortCircuited:!0};if(Me.type==="error"){if(Me.partialMatches.length===0){let{matches:tt,route:wt}=Of(f);return{matches:tt,pendingActionResult:[wt.id,{type:"error",error:Me.error}]}}let Ge=pa(Me.partialMatches).route.id;return{matches:Me.partialMatches,pendingActionResult:[Ge,{type:"error",error:Me.error}]}}else if(Me.matches)de=Me.matches;else{let{notFoundMatches:Ge,error:tt,route:wt}=Yt(K.pathname);return{matches:Ge,pendingActionResult:[wt.id,{type:"error",error:tt}]}}}let Ie,Be=Kf(de,K);if(!Be.route.action&&!Be.route.lazy)Ie={type:"error",error:Jr(405,{method:z.method,pathname:K.pathname,routeId:Be.route.id})};else{let Me=Vl(l,c,z,de,Be,xe?[]:i,ye),Ge=await Er(z,Me,ye,null);if(Ie=Ge[Be.route.id],!Ie){for(let tt of de)if(Ge[tt.route.id]){Ie=Ge[tt.route.id];break}}if(z.signal.aborted)return{shortCircuited:!0}}if(go(Ie)){let Me;return _e&&_e.replace!=null?Me=_e.replace:Me=a0(Ie.response.headers.get("Location"),new URL(z.url),p,n.history)===S.location.pathname+S.location.search,await Bt(z,Ie,!0,{submission:J,replace:Me}),{shortCircuited:!0}}if(Pr(Ie)){let Me=pa(de,Be.route.id);return(_e&&_e.replace)!==!0&&(C="PUSH"),{matches:de,pendingActionResult:[Me.route.id,Ie,Be.route.id]}}return{matches:de,pendingActionResult:[Be.route.id,Ie]}}async function ir(z,K,J,de,ye,Ce,xe,_e,Se,Ie,Be,Me,Ge){let tt=Ce||Fg(K,xe),wt=xe||_e||f0(tt),Ht=!me&&!Ie;if(ye){if(Ht){let Zt=Ot(Me);be({navigation:tt,...Zt!==void 0?{actionData:Zt}:{}},{flushSync:Be})}let rt=await Jn(J,K.pathname,z.signal);if(rt.type==="aborted")return{shortCircuited:!0};if(rt.type==="error"){if(rt.partialMatches.length===0){let{matches:hn,route:Ct}=Of(f);return{matches:hn,loaderData:{},errors:{[Ct.id]:rt.error}}}let Zt=pa(rt.partialMatches).route.id;return{matches:rt.partialMatches,loaderData:{},errors:{[Zt]:rt.error}}}else if(rt.matches)J=rt.matches;else{let{error:Zt,notFoundMatches:hn,route:Ct}=Yt(K.pathname);return{matches:hn,loaderData:{},errors:{[Ct.id]:Zt}}}}let Vt=m||f,{dsMatches:Je,revalidatingFetchers:Lt}=t0(z,de,l,c,n.history,S,J,wt,K,Ie?[]:i,Ie===!0,G,he,ue,ge,ie,Vt,p,n.patchRoutesOnNavigation!=null,Me,Ge);if(Oe=++Pe,!n.dataStrategy&&!Je.some(rt=>rt.shouldLoad)&&!Je.some(rt=>rt.route.middleware&&rt.route.middleware.length>0)&&Lt.length===0){let rt=Kt();return Fe(K,{matches:J,loaderData:{},errors:Me&&Pr(Me[1])?{[Me[0]]:Me[1].error}:null,...c0(Me),...rt?{fetchers:new Map(S.fetchers)}:{}},{flushSync:Be}),{shortCircuited:!0}}if(Ht){let rt={};if(!ye){rt.navigation=tt;let Zt=Ot(Me);Zt!==void 0&&(rt.actionData=Zt)}Lt.length>0&&(rt.fetchers=Jt(Lt)),be(rt,{flushSync:Be})}Lt.forEach(rt=>{Mt(rt.key),rt.controller&&pe.set(rt.key,rt.controller)});let wn=()=>Lt.forEach(rt=>Mt(rt.key));P&&P.signal.addEventListener("abort",wn);let{loaderResults:jt,fetcherResults:sr}=await Ds(Je,Lt,z,de);if(z.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",wn),Lt.forEach(rt=>pe.delete(rt.key));let Un=Mf(jt);if(Un)return await Bt(z,Un.result,!0,{replace:Se}),{shortCircuited:!0};if(Un=Mf(sr),Un)return ie.add(Un.key),await Bt(z,Un.result,!0,{replace:Se}),{shortCircuited:!0};let{loaderData:ar,errors:zn}=l0(S,J,jt,Me,Lt,sr);Ie&&S.errors&&(zn={...S.errors,...zn});let wr=Kt(),Ti=Ua(Oe),bi=wr||Ti||Lt.length>0;return{matches:J,loaderData:ar,errors:zn,...bi?{fetchers:new Map(S.fetchers)}:{}}}function Ot(z){if(z&&!Pr(z[1]))return{[z[0]]:z[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function Jt(z){return z.forEach(K=>{let J=S.fetchers.get(K.key),de=lc(void 0,J?J.data:void 0);S.fetchers.set(K.key,de)}),new Map(S.fetchers)}async function zt(z,K,J,de){Mt(z);let ye=(de&&de.flushSync)===!0,Ce=m||f,xe=py(S.location,S.matches,p,J,K,de==null?void 0:de.relative),_e=ma(Ce,xe,p),Se=Gi(_e,Ce,xe);if(Se.active&&Se.matches&&(_e=Se.matches),!_e){Tr(z,K,Jr(404,{pathname:xe}),{flushSync:ye});return}let{path:Ie,submission:Be,error:Me}=e0(!0,xe,de);if(Me){Tr(z,K,Me,{flushSync:ye});return}let Ge=n.getContext?await n.getContext():new Yb,tt=(de&&de.preventScrollReset)===!0;if(Be&&qn(Be.formMethod)){await Ur(z,K,Ie,_e,Ge,Se.active,ye,tt,Be,de&&de.unstable_defaultShouldRevalidate);return}ge.set(z,{routeId:K,path:Ie}),await Fi(z,K,Ie,_e,Ge,Se.active,ye,tt,Be)}async function Ur(z,K,J,de,ye,Ce,xe,_e,Se,Ie){qi(),ge.delete(z);let Be=S.fetchers.get(z);An(z,PN(Se,Be),{flushSync:xe});let Me=new AbortController,Ge=Cl(n.history,J,Me.signal,Se);if(Ce){let Ze=await Jn(de,new URL(Ge.url).pathname,Ge.signal,z);if(Ze.type==="aborted")return;if(Ze.type==="error"){Tr(z,K,Ze.error,{flushSync:xe});return}else if(Ze.matches)de=Ze.matches;else{Tr(z,K,Jr(404,{pathname:J}),{flushSync:xe});return}}let tt=Kf(de,J);if(!tt.route.action&&!tt.route.lazy){let Ze=Jr(405,{method:Se.formMethod,pathname:J,routeId:K});Tr(z,K,Ze,{flushSync:xe});return}pe.set(z,Me);let wt=Pe,Ht=Vl(l,c,Ge,de,tt,i,ye),Vt=await Er(Ge,Ht,ye,z),Je=Vt[tt.route.id];if(!Je){for(let Ze of Ht)if(Vt[Ze.route.id]){Je=Vt[Ze.route.id];break}}if(Ge.signal.aborted){pe.get(z)===Me&&pe.delete(z);return}if(ue.has(z)){if(go(Je)||Pr(Je)){An(z,ds(void 0));return}}else{if(go(Je))if(pe.delete(z),Oe>wt){An(z,ds(void 0));return}else return ie.add(z),An(z,lc(Se)),Bt(Ge,Je,!1,{fetcherSubmission:Se,preventScrollReset:_e});if(Pr(Je)){Tr(z,K,Je.error);return}}let Lt=S.navigation.location||S.location,wn=Cl(n.history,Lt,Me.signal),jt=m||f,sr=S.navigation.state!=="idle"?ma(jt,S.navigation.location,p):S.matches;nt(sr,"Didn't find any matches after fetcher action");let Un=++Pe;H.set(z,Un);let ar=lc(Se,Je.data);S.fetchers.set(z,ar);let{dsMatches:zn,revalidatingFetchers:wr}=t0(wn,ye,l,c,n.history,S,sr,Se,Lt,i,!1,G,he,ue,ge,ie,jt,p,n.patchRoutesOnNavigation!=null,[tt.route.id,Je],Ie);wr.filter(Ze=>Ze.key!==z).forEach(Ze=>{let Cr=Ze.key,Ps=S.fetchers.get(Cr),yt=lc(void 0,Ps?Ps.data:void 0);S.fetchers.set(Cr,yt),Mt(Cr),Ze.controller&&pe.set(Cr,Ze.controller)}),be({fetchers:new Map(S.fetchers)});let Ti=()=>wr.forEach(Ze=>Mt(Ze.key));Me.signal.addEventListener("abort",Ti);let{loaderResults:bi,fetcherResults:rt}=await Ds(zn,wr,wn,ye);if(Me.signal.aborted)return;if(Me.signal.removeEventListener("abort",Ti),H.delete(z),pe.delete(z),wr.forEach(Ze=>pe.delete(Ze.key)),S.fetchers.has(z)){let Ze=ds(Je.data);S.fetchers.set(z,Ze)}let Zt=Mf(bi);if(Zt)return Bt(wn,Zt.result,!1,{preventScrollReset:_e});if(Zt=Mf(rt),Zt)return ie.add(Zt.key),Bt(wn,Zt.result,!1,{preventScrollReset:_e});let{loaderData:hn,errors:Ct}=l0(S,sr,bi,void 0,wr,rt);Ua(Un),S.navigation.state==="loading"&&Un>Oe?(nt(C,"Expected pending action"),P&&P.abort(),Fe(S.navigation.location,{matches:sr,loaderData:hn,errors:Ct,fetchers:new Map(S.fetchers)})):(be({errors:Ct,loaderData:u0(S.loaderData,hn,sr,Ct),fetchers:new Map(S.fetchers)}),G=!1)}async function Fi(z,K,J,de,ye,Ce,xe,_e,Se){let Ie=S.fetchers.get(z);An(z,lc(Se,Ie?Ie.data:void 0),{flushSync:xe});let Be=new AbortController,Me=Cl(n.history,J,Be.signal);if(Ce){let Je=await Jn(de,new URL(Me.url).pathname,Me.signal,z);if(Je.type==="aborted")return;if(Je.type==="error"){Tr(z,K,Je.error,{flushSync:xe});return}else if(Je.matches)de=Je.matches;else{Tr(z,K,Jr(404,{pathname:J}),{flushSync:xe});return}}let Ge=Kf(de,J);pe.set(z,Be);let tt=Pe,wt=Vl(l,c,Me,de,Ge,i,ye),Vt=(await Er(Me,wt,ye,z))[Ge.route.id];if(pe.get(z)===Be&&pe.delete(z),!Me.signal.aborted){if(ue.has(z)){An(z,ds(void 0));return}if(go(Vt))if(Oe>tt){An(z,ds(void 0));return}else{ie.add(z),await Bt(Me,Vt,!1,{preventScrollReset:_e});return}if(Pr(Vt)){Tr(z,K,Vt.error);return}An(z,ds(Vt.data))}}async function Bt(z,K,J,{submission:de,fetcherSubmission:ye,preventScrollReset:Ce,replace:xe}={}){J||(R==null||R.resolve(),R=null),K.response.headers.has("X-Remix-Revalidate")&&(G=!0);let _e=K.response.headers.get("Location");nt(_e,"Expected a Location header on the redirect Response"),_e=a0(_e,new URL(z.url),p,n.history);let Se=Nc(S.location,_e,{_isRedirect:!0});if(t){let wt=!1;if(K.response.headers.has("X-Remix-Reload-Document"))wt=!0;else if(e_(_e)){const Ht=wA(_e,!0);wt=Ht.origin!==e.location.origin||ti(Ht.pathname,p)==null}if(wt){xe?e.location.replace(_e):e.location.assign(_e);return}}P=null;let Ie=xe===!0||K.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Be,formAction:Me,formEncType:Ge}=S.navigation;!de&&!ye&&Be&&Me&&Ge&&(de=f0(S.navigation));let tt=de||ye;if(uN.has(K.response.status)&&tt&&qn(tt.formMethod))await Dt(Ie,Se,{submission:{...tt,formAction:_e},preventScrollReset:Ce||k,enableViewTransition:J?j:void 0});else{let wt=Fg(Se,de);await Dt(Ie,Se,{overrideNavigation:wt,fetcherSubmission:ye,preventScrollReset:Ce||k,enableViewTransition:J?j:void 0})}}async function Er(z,K,J,de){var xe;let ye,Ce={};try{ye=await vN(y,z,K,de,J,!1)}catch(_e){return K.filter(Se=>Se.shouldLoad).forEach(Se=>{Ce[Se.route.id]={type:"error",error:_e}}),Ce}if(z.signal.aborted)return Ce;if(!qn(z.method))for(let _e of K){if(((xe=ye[_e.route.id])==null?void 0:xe.type)==="error")break;!ye.hasOwnProperty(_e.route.id)&&!S.loaderData.hasOwnProperty(_e.route.id)&&(!S.errors||!S.errors.hasOwnProperty(_e.route.id))&&_e.shouldCallHandler()&&(ye[_e.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${_e.route.id}`)})}for(let[_e,Se]of Object.entries(ye))if(xN(Se)){let Ie=Se.result;Ce[_e]={type:"redirect",response:SN(Ie,z,_e,K,p)}}else Ce[_e]=await bN(Se);return Ce}async function Ds(z,K,J,de){let ye=Er(J,z,de,null),Ce=Promise.all(K.map(async Se=>{if(Se.matches&&Se.match&&Se.request&&Se.controller){let Be=(await Er(Se.request,Se.matches,de,Se.key))[Se.match.route.id];return{[Se.key]:Be}}else return Promise.resolve({[Se.key]:{type:"error",error:Jr(404,{pathname:Se.path})}})})),xe=await ye,_e=(await Ce).reduce((Se,Ie)=>Object.assign(Se,Ie),{});return{loaderResults:xe,fetcherResults:_e}}function qi(){G=!0,ge.forEach((z,K)=>{pe.has(K)&&he.add(K),Mt(K)})}function An(z,K,J={}){S.fetchers.set(z,K),be({fetchers:new Map(S.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function Tr(z,K,J,de={}){let ye=pa(S.matches,K);Os(z),be({errors:{[ye.route.id]:J},fetchers:new Map(S.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function ja(z){return Ee.set(z,(Ee.get(z)||0)+1),ue.has(z)&&ue.delete(z),S.fetchers.get(z)||cN}function Lo(z,K){Mt(z,K==null?void 0:K.reason),An(z,ds(null))}function Os(z){let K=S.fetchers.get(z);pe.has(z)&&!(K&&K.state==="loading"&&H.has(z))&&Mt(z),ge.delete(z),H.delete(z),ie.delete(z),ue.delete(z),he.delete(z),S.fetchers.delete(z)}function br(z){let K=(Ee.get(z)||0)-1;K<=0?(Ee.delete(z),ue.add(z)):Ee.set(z,K),be({fetchers:new Map(S.fetchers)})}function Mt(z,K){let J=pe.get(z);J&&(J.abort(K),pe.delete(z))}function Xn(z){for(let K of z){let J=ja(K),de=ds(J.data);S.fetchers.set(K,de)}}function Kt(){let z=[],K=!1;for(let J of ie){let de=S.fetchers.get(J);nt(de,`Expected fetcher: ${J}`),de.state==="loading"&&(ie.delete(J),z.push(J),K=!0)}return Xn(z),K}function Ua(z){let K=[];for(let[J,de]of H)if(de<z){let ye=S.fetchers.get(J);nt(ye,`Expected fetcher: ${J}`),ye.state==="loading"&&(Mt(J),H.delete(J),K.push(J))}return Xn(K),K.length>0}function Ms(z,K){let J=S.blockers.get(z)||oc;return ve.get(z)!==K&&ve.set(z,K),J}function za(z){S.blockers.delete(z),ve.delete(z)}function Wn(z,K){let J=S.blockers.get(z)||oc;nt(J.state==="unblocked"&&K.state==="blocked"||J.state==="blocked"&&K.state==="blocked"||J.state==="blocked"&&K.state==="proceeding"||J.state==="blocked"&&K.state==="unblocked"||J.state==="proceeding"&&K.state==="unblocked",`Invalid blocker state transition: ${J.state} -> ${K.state}`);let de=new Map(S.blockers);de.set(z,K),be({blockers:de})}function vi({currentLocation:z,nextLocation:K,historyAction:J}){if(ve.size===0)return;ve.size>1&&tn(!1,"A router only supports one blocker at a time");let de=Array.from(ve.entries()),[ye,Ce]=de[de.length-1],xe=S.blockers.get(ye);if(!(xe&&xe.state==="proceeding")&&Ce({currentLocation:z,nextLocation:K,historyAction:J}))return ye}function Yt(z){let K=Jr(404,{pathname:z}),J=m||f,{matches:de,route:ye}=Of(J);return{notFoundMatches:de,route:ye,error:K}}function zr(z,K,J){if(N=z,M=K,V=J||null,!L&&S.navigation===Hg){L=!0;let de=jo(S.location,S.matches);de!=null&&be({restoreScrollPosition:de})}return()=>{N=null,M=null,V=null}}function Sr(z,K){return V&&V(z,K.map(de=>Vx(de,S.loaderData)))||z.key}function Ar(z,K){if(N&&M){let J=Sr(z,K);N[J]=M()}}function jo(z,K){if(N){let J=Sr(z,K),de=N[J];if(typeof de=="number")return de}return null}function Gi(z,K,J){if(n.patchRoutesOnNavigation)if(z){if(Object.keys(z[0].params).length>0)return{active:!0,matches:mc(K,J,p,!0)}}else return{active:!0,matches:mc(K,J,p,!0)||[]};return{active:!1,matches:null}}async function Jn(z,K,J,de){if(!n.patchRoutesOnNavigation)return{type:"success",matches:z};let ye=z;for(;;){let Ce=m==null,xe=m||f,_e=c;try{await n.patchRoutesOnNavigation({signal:J,path:K,matches:ye,fetcherKey:de,patch:(Be,Me)=>{J.aborted||n0(Be,Me,xe,_e,l,!1)}})}catch(Be){return{type:"error",error:Be,partialMatches:ye}}finally{Ce&&!J.aborted&&(f=[...f])}if(J.aborted)return{type:"aborted"};let Se=ma(xe,K,p),Ie=null;if(Se){if(Object.keys(Se[0].params).length===0)return{type:"success",matches:Se};if(Ie=mc(xe,K,p,!0),!(Ie&&ye.length<Ie.length&&Ei(ye,Ie.slice(0,ye.length))))return{type:"success",matches:Se}}if(Ie||(Ie=mc(xe,K,p,!0)),!Ie||Ei(ye,Ie))return{type:"success",matches:null};ye=Ie}}function Ei(z,K){return z.length===K.length&&z.every((J,de)=>J.route.id===K[de].route.id)}function du(z){c={},m=Dc(z,l,void 0,c)}function $i(z,K,J=!1){let de=m==null;n0(z,K,m||f,c,l,J),de&&(f=[...f],be({}))}return $={get basename(){return p},get future(){return v},get state(){return S},get routes(){return f},get window(){return e},initialize:je,subscribe:Et,enableScrollRestoration:zr,navigate:Qe,fetch:zt,revalidate:$t,createHref:z=>n.history.createHref(z),encodeLocation:z=>n.history.encodeLocation(z),getFetcher:ja,resetFetcher:Lo,deleteFetcher:br,dispose:mt,getBlocker:Ms,deleteBlocker:za,patchRoutes:$i,_internalFetchControllers:pe,_internalSetRoutes:du,_internalSetStateDoNotUseOrYouWillBreakYourApp(z){be(z)}},n.unstable_instrumentations&&($=tN($,n.unstable_instrumentations.map(z=>z.router).filter(Boolean))),$}function dN(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function py(n,e,t,i,a,l){let c,f;if(a){c=[];for(let p of e)if(c.push(p),p.route.id===a){f=p;break}}else c=e,f=e[e.length-1];let m=Kd(i||".",$d(c),ti(n.pathname,t)||n.pathname,l==="path");if(i==null&&(m.search=n.search,m.hash=n.hash),(i==null||i===""||i===".")&&f){let p=r_(m.search);if(f.route.index&&!p)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&p){let y=new URLSearchParams(m.search),v=y.getAll("index");y.delete("index"),v.filter(w=>w).forEach(w=>y.append("index",w));let T=y.toString();m.search=T?`?${T}`:""}}return t!=="/"&&(m.pathname=Qx({basename:t,pathname:m.pathname})),zi(m)}function e0(n,e,t){if(!t||!dN(t))return{path:e};if(t.formMethod&&!ON(t.formMethod))return{path:e,error:Jr(405,{method:t.formMethod})};let i=()=>({path:e,error:Jr(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=HA(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!qn(l))return i();let v=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((T,[w,N])=>`${T}${w}=${N}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:v}}}else if(t.formEncType==="application/json"){if(!qn(l))return i();try{let v=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:v,text:void 0}}}catch{return i()}}}nt(typeof FormData=="function","FormData is not available in this environment");let f,m;if(t.formData)f=_y(t.formData),m=t.formData;else if(t.body instanceof FormData)f=_y(t.body),m=t.body;else if(t.body instanceof URLSearchParams)f=t.body,m=o0(f);else if(t.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(t.body),m=o0(f)}catch{return i()}let p={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(qn(p.formMethod))return{path:e,submission:p};let y=xs(e);return n&&y.search&&r_(y.search)&&f.append("index",""),y.search=`?${f}`,{path:zi(y),submission:p}}function t0(n,e,t,i,a,l,c,f,m,p,y,v,T,w,N,V,M,L,U,q,te){var me;let ee=q?Pr(q[1])?q[1].error:q[1].data:void 0,$=a.createURL(l.location),S=a.createURL(m),C;if(y&&l.errors){let G=Object.keys(l.errors)[0];C=c.findIndex(he=>he.route.id===G)}else if(q&&Pr(q[1])){let G=q[0];C=c.findIndex(he=>he.route.id===G)-1}let R=q?q[1].statusCode:void 0,k=R&&R>=400,P={currentUrl:$,currentParams:((me=l.matches[0])==null?void 0:me.params)||{},nextUrl:S,nextParams:c[0].params,...f,actionResult:ee,actionStatus:R},j=Yc(c),x=c.map((G,he)=>{let{route:pe}=G,Pe=null;if(C!=null&&he>C?Pe=!1:pe.lazy?Pe=!0:t_(pe)?y?Pe=gy(pe,l.loaderData,l.errors):mN(l.loaderData,l.matches[he],G)&&(Pe=!0):Pe=!1,Pe!==null)return yy(t,i,n,j,G,p,e,Pe);let Oe=!1;typeof te=="boolean"?Oe=te:k?Oe=!1:(v||$.pathname+$.search===S.pathname+S.search||$.search!==S.search||pN(l.matches[he],G))&&(Oe=!0);let H={...P,defaultShouldRevalidate:Oe},ie=Ec(G,H);return yy(t,i,n,j,G,p,e,ie,H,te)}),le=[];return N.forEach((G,he)=>{if(y||!c.some(ue=>ue.route.id===G.routeId)||w.has(he))return;let pe=l.fetchers.get(he),Pe=pe&&pe.state!=="idle"&&pe.data===void 0,Oe=ma(M,G.path,L);if(!Oe){if(U&&Pe)return;le.push({key:he,routeId:G.routeId,path:G.path,matches:null,match:null,request:null,controller:null});return}if(V.has(he))return;let H=Kf(Oe,G.path),ie=new AbortController,ge=Cl(a,G.path,ie.signal),Ee=null;if(T.has(he))T.delete(he),Ee=Vl(t,i,ge,Oe,H,p,e);else if(Pe)v&&(Ee=Vl(t,i,ge,Oe,H,p,e));else{let ue;typeof te=="boolean"?ue=te:k?ue=!1:ue=v;let ve={...P,defaultShouldRevalidate:ue};Ec(H,ve)&&(Ee=Vl(t,i,ge,Oe,H,p,e,ve))}Ee&&le.push({key:he,routeId:G.routeId,path:G.path,matches:Ee,match:H,request:ge,controller:ie})}),{dsMatches:x,revalidatingFetchers:le}}function t_(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function gy(n,e,t){if(n.lazy)return!0;if(!t_(n))return!1;let i=e!=null&&n.id in e,a=t!=null&&t[n.id]!==void 0;return!i&&a?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!a}function mN(n,e,t){let i=!e||t.route.id!==e.route.id,a=!n.hasOwnProperty(t.route.id);return i||a}function pN(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Ec(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function n0(n,e,t,i,a,l){let c;if(n){let p=i[n];nt(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),c=p.children}else c=t;let f=[],m=[];if(e.forEach(p=>{let y=c.find(v=>LA(p,v));y?m.push({existingRoute:y,newRoute:p}):f.push(p)}),f.length>0){let p=Dc(f,a,[n||"_","patch",String((c==null?void 0:c.length)||"0")],i);c.push(...p)}if(l&&m.length>0)for(let p=0;p<m.length;p++){let{existingRoute:y,newRoute:v}=m[p],T=y,[w]=Dc([v],a,[],{},!0);Object.assign(T,{element:w.element?w.element:T.element,errorElement:w.errorElement?w.errorElement:T.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:T.hydrateFallbackElement})}}function LA(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var a;return(a=e.children)==null?void 0:a.some(l=>LA(t,l))}):!1}var r0=new WeakMap,jA=({key:n,route:e,manifest:t,mapRouteProperties:i})=>{let a=t[e.id];if(nt(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let l=a.lazy[n];if(!l)return;let c=r0.get(a);c||(c={},r0.set(a,c));let f=c[n];if(f)return f;let m=(async()=>{let p=Ox(n),v=a[n]!==void 0&&n!=="hasErrorBoundary";if(p)tn(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(v)tn(!1,`Route "${a.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let T=await l();T!=null&&(Object.assign(a,{[n]:T}),Object.assign(a,i(a)))}typeof a.lazy=="object"&&(a.lazy[n]=void 0,Object.values(a.lazy).every(T=>T===void 0)&&(a.lazy=void 0))})();return c[n]=m,m},i0=new WeakMap;function gN(n,e,t,i,a){let l=t[n.id];if(nt(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let y=i0.get(l);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let v=(async()=>{nt(typeof n.lazy=="function","No lazy route function found");let T=await n.lazy(),w={};for(let N in T){let V=T[N];if(V===void 0)continue;let M=Px(N),U=l[N]!==void 0&&N!=="hasErrorBoundary";M?tn(!M,"Route property "+N+" is not a supported property to be returned from a lazy route function. This property will be ignored."):U?tn(!U,`Route "${l.id}" has a static property "${N}" defined but its lazy function is also returning a value for this property. The lazy route property "${N}" will be ignored.`):w[N]=V}Object.assign(l,w),Object.assign(l,{...i(l),lazy:void 0})})();return i0.set(l,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let c=Object.keys(n.lazy),f=[],m;for(let y of c){if(a&&a.includes(y))continue;let v=jA({key:y,route:n,manifest:t,mapRouteProperties:i});v&&(f.push(v),y===e&&(m=v))}let p=f.length>0?Promise.all(f).then(()=>{}):void 0;return p==null||p.catch(()=>{}),m==null||m.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:m}}async function s0(n){let e=n.matches.filter(a=>a.shouldLoad),t={};return(await Promise.all(e.map(a=>a.resolve()))).forEach((a,l)=>{t[e[l].route.id]=a}),t}async function yN(n){return n.matches.some(e=>e.route.middleware)?UA(n,()=>s0(n)):s0(n)}function UA(n,e){return _N(n,e,i=>{if(DN(i))throw i;return i},RN,t);function t(i,a,l){if(l)return Promise.resolve(Object.assign(l.value,{[a]:{type:"error",result:i}}));{let{matches:c}=n,f=Math.min(Math.max(c.findIndex(p=>p.route.id===a),0),Math.max(c.findIndex(p=>p.shouldCallHandler()),0)),m=pa(c,c[f].route.id).route.id;return Promise.resolve({[m]:{type:"error",result:i}})}}}async function _N(n,e,t,i,a){let{matches:l,request:c,params:f,context:m,unstable_pattern:p}=n,y=l.flatMap(T=>T.route.middleware?T.route.middleware.map(w=>[T.route.id,w]):[]);return await zA({request:c,params:f,context:m,unstable_pattern:p},y,e,t,i,a)}async function zA(n,e,t,i,a,l,c=0){let{request:f}=n;if(f.signal.aborted)throw f.signal.reason??new Error(`Request aborted: ${f.method} ${f.url}`);let m=e[c];if(!m)return await t();let[p,y]=m,v,T=async()=>{if(v)throw new Error("You may only call `next()` once per middleware");try{return v={value:await zA(n,e,t,i,a,l,c+1)},v.value}catch(w){return v={value:await l(w,p,v)},v.value}};try{let w=await y(n,T),N=w!=null?i(w):void 0;return a(N)?N:v?N??v.value:(v={value:await T()},v.value)}catch(w){return await l(w,p,v)}}function BA(n,e,t,i,a){let l=jA({key:"middleware",route:i.route,manifest:e,mapRouteProperties:n}),c=gN(i.route,qn(t.method)?"action":"loader",e,n,a);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function yy(n,e,t,i,a,l,c,f,m=null,p){let y=!1,v=BA(n,e,t,a,l);return{...a,_lazyPromises:v,shouldLoad:f,shouldRevalidateArgs:m,shouldCallHandler(T){return y=!0,m?typeof p=="boolean"?Ec(a,{...m,defaultShouldRevalidate:p}):typeof T=="boolean"?Ec(a,{...m,defaultShouldRevalidate:T}):Ec(a,m):f},resolve(T){let{lazy:w,loader:N,middleware:V}=a.route,M=y||f||T&&!qn(t.method)&&(w||N),L=V&&V.length>0&&!N&&!w;return M&&(qn(t.method)||!L)?EN({request:t,unstable_pattern:i,match:a,lazyHandlerPromise:v==null?void 0:v.handler,lazyRoutePromise:v==null?void 0:v.route,handlerOverride:T,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Vl(n,e,t,i,a,l,c,f=null){return i.map(m=>m.route.id!==a.route.id?{...m,shouldLoad:!1,shouldRevalidateArgs:f,shouldCallHandler:()=>!1,_lazyPromises:BA(n,e,t,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:yy(n,e,t,Yc(i),m,l,c,!0,f))}async function vN(n,e,t,i,a,l){t.some(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware})&&await Promise.all(t.map(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware}));let c={request:e,unstable_pattern:Yc(t),params:t[0].params,context:a,matches:t},m=await n({...c,fetcherKey:i,runClientMiddleware:p=>{let y=c;return UA(y,()=>p({...y,fetcherKey:i,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(p=>{var y,v;return[(y=p._lazyPromises)==null?void 0:y.handler,(v=p._lazyPromises)==null?void 0:v.route]}))}catch{}return m}async function EN({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:i,lazyRoutePromise:a,handlerOverride:l,scopedContext:c}){let f,m,p=qn(n.method),y=p?"action":"loader",v=T=>{let w,N=new Promise((L,U)=>w=U);m=()=>w(),n.signal.addEventListener("abort",m);let V=L=>typeof T!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${y}" [routeId: ${t.route.id}]`)):T({request:n,unstable_pattern:e,params:t.params,context:c},...L!==void 0?[L]:[]),M=(async()=>{try{return{type:"data",result:await(l?l(U=>V(U)):V())}}catch(L){return{type:"error",result:L}}})();return Promise.race([M,N])};try{let T=p?t.route.action:t.route.loader;if(i||a)if(T){let w,[N]=await Promise.all([v(T).catch(V=>{w=V}),i,a]);if(w!==void 0)throw w;f=N}else{await i;let w=p?t.route.action:t.route.loader;if(w)[f]=await Promise.all([v(w),a]);else if(y==="action"){let N=new URL(n.url),V=N.pathname+N.search;throw Jr(405,{method:n.method,pathname:V,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(T)f=await v(T);else{let w=new URL(n.url),N=w.pathname+w.search;throw Jr(404,{pathname:N})}}catch(T){return{type:"error",result:T}}finally{m&&n.signal.removeEventListener("abort",m)}return f}async function TN(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function bN(n){var i,a,l,c,f;let{result:e,type:t}=n;if(n_(e)){let m;try{m=await TN(e)}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Kc(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:"data",data:m,statusCode:e.status,headers:e.headers}}return t==="error"?h0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:CN(e),statusCode:Oc(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Oc(e)?e.status:void 0}:h0(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function SN(n,e,t,i,a){let l=n.headers.get("Location");if(nt(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!e_(l)){let c=i.slice(0,i.findIndex(f=>f.route.id===t)+1);l=py(new URL(e.url),c,a,l),n.headers.set("Location",l)}return n}function a0(n,e,t,i){let a=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(e_(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(a.includes(c.protocol))throw new Error("Invalid redirect location");let f=ti(c.pathname,t)!=null;if(c.origin===e.origin&&f)return c.pathname+c.search+c.hash}try{let l=i.createURL(n);if(a.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function Cl(n,e,t,i){let a=n.createURL(HA(e)).toString(),l={signal:t};if(i&&qn(i.formMethod)){let{formMethod:c,formEncType:f}=i;l.method=c.toUpperCase(),f==="application/json"?(l.headers=new Headers({"Content-Type":f}),l.body=JSON.stringify(i.json)):f==="text/plain"?l.body=i.text:f==="application/x-www-form-urlencoded"&&i.formData?l.body=_y(i.formData):l.body=i.formData}return new Request(a,l)}function _y(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function o0(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function AN(n,e,t,i=!1,a=!1){let l={},c=null,f,m=!1,p={},y=t&&Pr(t[1])?t[1].error:void 0;return n.forEach(v=>{if(!(v.route.id in e))return;let T=v.route.id,w=e[T];if(nt(!go(w),"Cannot handle redirect results in processLoaderData"),Pr(w)){let N=w.error;if(y!==void 0&&(N=y,y=void 0),c=c||{},a)c[T]=N;else{let V=pa(n,T);c[V.route.id]==null&&(c[V.route.id]=N)}i||(l[T]=VA),m||(m=!0,f=Oc(w.error)?w.error.status:500),w.headers&&(p[T]=w.headers)}else l[T]=w.data,w.statusCode&&w.statusCode!==200&&!m&&(f=w.statusCode),w.headers&&(p[T]=w.headers)}),y!==void 0&&t&&(c={[t[0]]:y},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:f||200,loaderHeaders:p}}function l0(n,e,t,i,a,l){let{loaderData:c,errors:f}=AN(e,t,i);return a.filter(m=>!m.matches||m.matches.some(p=>p.shouldLoad)).forEach(m=>{let{key:p,match:y,controller:v}=m;if(v&&v.signal.aborted)return;let T=l[p];if(nt(T,"Did not find corresponding fetcher result"),Pr(T)){let w=pa(n.matches,y==null?void 0:y.route.id);f&&f[w.route.id]||(f={...f,[w.route.id]:T.error}),n.fetchers.delete(p)}else if(go(T))nt(!1,"Unhandled fetcher revalidation redirect");else{let w=ds(T.data);n.fetchers.set(p,w)}}),{loaderData:c,errors:f}}function u0(n,e,t,i){let a=Object.entries(e).filter(([,l])=>l!==VA).reduce((l,[c,f])=>(l[c]=f,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(a[c]=n[c]),i&&i.hasOwnProperty(c))break}return a}function c0(n){return n?Pr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function pa(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function Of(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Jr(n,{pathname:e,routeId:t,method:i,type:a,message:l}={}){let c="Unknown Server Error",f="Unknown @remix-run/router error";return n===400?(c="Bad Request",i&&e&&t?f=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:a==="invalid-body"&&(f="Unable to encode submission body")):n===403?(c="Forbidden",f=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",f=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",i&&e&&t?f=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:i&&(f=`Invalid request method "${i.toUpperCase()}"`)),new Kc(n||500,c,new Error(f),!0)}function Mf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,a]=e[t];if(go(a))return{key:i,result:a}}}function HA(n){let e=typeof n=="string"?xs(n):n;return zi({...e,hash:""})}function wN(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function CN(n){var e,t;return new Kc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function RN(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&IN(t))}function IN(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function xN(n){return n_(n.result)&&PA.has(n.result.status)}function Pr(n){return n.type==="error"}function go(n){return(n&&n.type)==="redirect"}function h0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function n_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function NN(n){return PA.has(n)}function DN(n){return n_(n)&&NN(n.status)&&n.headers.has("Location")}function ON(n){return lN.has(n.toUpperCase())}function qn(n){return aN.has(n.toUpperCase())}function r_(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Kf(n,e){let t=typeof e=="string"?xs(e).search:e.search;if(n[n.length-1].route.index&&r_(t||""))return n[n.length-1];let i=xA(n);return i[i.length-1]}function f0(n){let{formMethod:e,formAction:t,formEncType:i,text:a,formData:l,json:c}=n;if(!(!e||!t||!i)){if(a!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:a};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:c,text:void 0}}}function Fg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function MN(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function lc(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function PN(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ds(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function kN(n,e){try{let t=n.sessionStorage.getItem(kA);if(t){let i=JSON.parse(t);for(let[a,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(a,new Set(l||[]))}}catch{}}function VN(n,e){if(e.size>0){let t={};for(let[i,a]of e)t[i]=[...a];try{n.sessionStorage.setItem(kA,JSON.stringify(t))}catch(i){tn(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function d0(){let n,e,t=new Promise((i,a)=>{n=async l=>{i(l);try{await t}catch{}},e=async l=>{a(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Do=O.createContext(null);Do.displayName="DataRouter";var Qc=O.createContext(null);Qc.displayName="DataRouterState";var FA=O.createContext(!1);function LN(){return O.useContext(FA)}var i_=O.createContext({isTransitioning:!1});i_.displayName="ViewTransition";var qA=O.createContext(new Map);qA.displayName="Fetchers";var jN=O.createContext(null);jN.displayName="Await";var Lr=O.createContext(null);Lr.displayName="Navigation";var Yd=O.createContext(null);Yd.displayName="Location";var ni=O.createContext({outlet:null,matches:[],isDataRoute:!1});ni.displayName="Route";var s_=O.createContext(null);s_.displayName="RouteError";var GA="REACT_ROUTER_ERROR",UN="REDIRECT",zN="ROUTE_ERROR_RESPONSE";function BN(n){if(n.startsWith(`${GA}:${UN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function HN(n){if(n.startsWith(`${GA}:${zN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Kc(e.status,e.statusText,e.data)}catch{}}function FN(n,{relative:e}={}){nt(nu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=O.useContext(Lr),{hash:a,pathname:l,search:c}=Xc(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:ki([t,l])),i.createHref({pathname:f,search:c,hash:a})}function nu(){return O.useContext(Yd)!=null}function ri(){return nt(nu(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Yd).location}var $A="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KA(n){O.useContext(Lr).static||O.useLayoutEffect(n)}function Oo(){let{isDataRoute:n}=O.useContext(ni);return n?iD():qN()}function qN(){nt(nu(),"useNavigate() may be used only in the context of a <Router> component.");let n=O.useContext(Do),{basename:e,navigator:t}=O.useContext(Lr),{matches:i}=O.useContext(ni),{pathname:a}=ri(),l=JSON.stringify($d(i)),c=O.useRef(!1);return KA(()=>{c.current=!0}),O.useCallback((m,p={})=>{if(tn(c.current,$A),!c.current)return;if(typeof m=="number"){t.go(m);return}let y=Kd(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ki([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,l,a,n])}var GN=O.createContext(null);function $N(n){let e=O.useContext(ni).outlet;return O.useMemo(()=>e&&O.createElement(GN.Provider,{value:n},e),[e,n])}function Mo(){let{matches:n}=O.useContext(ni),e=n[n.length-1];return e?e.params:{}}function Xc(n,{relative:e}={}){let{matches:t}=O.useContext(ni),{pathname:i}=ri(),a=JSON.stringify($d(t));return O.useMemo(()=>Kd(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function KN(n,e,t,i,a){nt(nu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=O.useContext(Lr),{matches:c}=O.useContext(ni),f=c[c.length-1],m=f?f.params:{},p=f?f.pathname:"/",y=f?f.pathnameBase:"/",v=f&&f.route;{let U=v&&v.path||"";QA(p,!v||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let T=ri(),w;w=T;let N=w.pathname||"/",V=N;if(y!=="/"){let U=y.replace(/^\//,"").split("/");V="/"+N.replace(/^\//,"").split("/").slice(U.length).join("/")}let M=ma(n,{pathname:V});return tn(v||M!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),tn(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),JN(M&&M.map(U=>Object.assign({},U,{params:Object.assign({},m,U.params),pathname:ki([y,l.encodeLocation?l.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?y:ki([y,l.encodeLocation?l.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),c,t,i,a)}function YN(){let n=rD(),e=Oc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:l},"ErrorBoundary")," or"," ",O.createElement("code",{style:l},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:a},t):null,c)}var QN=O.createElement(YN,null),YA=class extends O.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=HN(n.digest);t&&(n=t)}let e=n!==void 0?O.createElement(ni.Provider,{value:this.props.routeContext},O.createElement(s_.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?O.createElement(XN,{error:n},e):e}};YA.contextType=FA;var qg=new WeakMap;function XN({children:n,error:e}){let{basename:t}=O.useContext(Lr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=BN(e.digest);if(i){let a=qg.get(e);if(a)throw a;let l=DA(i.location,t);if(NA&&!qg.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw qg.set(e,c),c}return O.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function WN({routeContext:n,match:e,children:t}){let i=O.useContext(Do);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(ni.Provider,{value:n},t)}function JN(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let y=l.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);nt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,m=-1;if(t)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=y),v.route.id){let{loaderData:T,errors:w}=t,N=v.route.loader&&!T.hasOwnProperty(v.route.id)&&(!w||w[v.route.id]===void 0);if(v.route.lazy||N){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let p=t&&i?(y,v)=>{var T,w;i(y,{location:t.location,params:((w=(T=t.matches)==null?void 0:T[0])==null?void 0:w.params)??{},unstable_pattern:Yc(t.matches),errorInfo:v})}:void 0;return l.reduceRight((y,v,T)=>{let w,N=!1,V=null,M=null;t&&(w=c&&v.route.id?c[v.route.id]:void 0,V=v.route.errorElement||QN,f&&(m<0&&T===0?(QA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,M=null):m===T&&(N=!0,M=v.route.hydrateFallbackElement||null)));let L=e.concat(l.slice(0,T+1)),U=()=>{let q;return w?q=V:N?q=M:v.route.Component?q=O.createElement(v.route.Component,null):v.route.element?q=v.route.element:q=y,O.createElement(WN,{match:v,routeContext:{outlet:y,matches:L,isDataRoute:t!=null},children:q})};return t&&(v.route.ErrorBoundary||v.route.errorElement||T===0)?O.createElement(YA,{location:t.location,revalidation:t.revalidation,component:V,error:w,children:U(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:p}):U()},null)}function a_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZN(n){let e=O.useContext(Do);return nt(e,a_(n)),e}function eD(n){let e=O.useContext(Qc);return nt(e,a_(n)),e}function tD(n){let e=O.useContext(ni);return nt(e,a_(n)),e}function o_(n){let e=tD(n),t=e.matches[e.matches.length-1];return nt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function nD(){return o_("useRouteId")}function rD(){var i;let n=O.useContext(s_),e=eD("useRouteError"),t=o_("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function iD(){let{router:n}=ZN("useNavigate"),e=o_("useNavigate"),t=O.useRef(!1);return KA(()=>{t.current=!0}),O.useCallback(async(a,l={})=>{tn(t.current,$A),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var m0={};function QA(n,e,t){!e&&!m0[n]&&(m0[n]=!0,tn(!1,t))}var p0={};function g0(n,e){!n&&!p0[e]&&(p0[e]=!0,console.warn(e))}var sD="useOptimistic",y0=WI[sD],aD=()=>{};function oD(n){return y0?y0(n):[n,aD]}function lD(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&tn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:O.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&tn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:O.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&tn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:O.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var uD=["HydrateFallback","hydrateFallbackElement"],cD=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function hD({router:n,flushSync:e,onError:t,unstable_useTransitions:i}){i=LN()||i;let[l,c]=O.useState(n.state),[f,m]=oD(l),[p,y]=O.useState(),[v,T]=O.useState({isTransitioning:!1}),[w,N]=O.useState(),[V,M]=O.useState(),[L,U]=O.useState(),q=O.useRef(new Map),te=O.useCallback((C,{deletedFetchers:R,newErrors:k,flushSync:P,viewTransitionOpts:j})=>{k&&t&&Object.values(k).forEach(le=>{var me;return t(le,{location:C.location,params:((me=C.matches[0])==null?void 0:me.params)??{},unstable_pattern:Yc(C.matches)})}),C.fetchers.forEach((le,me)=>{le.data!==void 0&&q.current.set(me,le.data)}),R.forEach(le=>q.current.delete(le)),g0(P===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let x=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(g0(j==null||x,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!j||!x){e&&P?e(()=>c(C)):i===!1?c(C):O.startTransition(()=>{i===!0&&m(le=>_0(le,C)),c(C)});return}if(e&&P){e(()=>{V&&(w==null||w.resolve(),V.skipTransition()),T({isTransitioning:!0,flushSync:!0,currentLocation:j.currentLocation,nextLocation:j.nextLocation})});let le=n.window.document.startViewTransition(()=>{e(()=>c(C))});le.finished.finally(()=>{e(()=>{N(void 0),M(void 0),y(void 0),T({isTransitioning:!1})})}),e(()=>M(le));return}V?(w==null||w.resolve(),V.skipTransition(),U({state:C,currentLocation:j.currentLocation,nextLocation:j.nextLocation})):(y(C),T({isTransitioning:!0,flushSync:!1,currentLocation:j.currentLocation,nextLocation:j.nextLocation}))},[n.window,e,V,w,i,m,t]);O.useLayoutEffect(()=>n.subscribe(te),[n,te]),O.useEffect(()=>{v.isTransitioning&&!v.flushSync&&N(new cD)},[v]),O.useEffect(()=>{if(w&&p&&n.window){let C=p,R=w.promise,k=n.window.document.startViewTransition(async()=>{i===!1?c(C):O.startTransition(()=>{i===!0&&m(P=>_0(P,C)),c(C)}),await R});k.finished.finally(()=>{N(void 0),M(void 0),y(void 0),T({isTransitioning:!1})}),M(k)}},[p,w,n.window,i,m]),O.useEffect(()=>{w&&p&&f.location.key===p.location.key&&w.resolve()},[w,V,f.location,p]),O.useEffect(()=>{!v.isTransitioning&&L&&(y(L.state),T({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}),U(void 0))},[v.isTransitioning,L]);let ee=O.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:C=>n.navigate(C),push:(C,R,k)=>n.navigate(C,{state:R,preventScrollReset:k==null?void 0:k.preventScrollReset}),replace:(C,R,k)=>n.navigate(C,{replace:!0,state:R,preventScrollReset:k==null?void 0:k.preventScrollReset})}),[n]),$=n.basename||"/",S=O.useMemo(()=>({router:n,navigator:ee,static:!1,basename:$,onError:t}),[n,ee,$,t]);return O.createElement(O.Fragment,null,O.createElement(Do.Provider,{value:S},O.createElement(Qc.Provider,{value:f},O.createElement(qA.Provider,{value:q.current},O.createElement(i_.Provider,{value:v},O.createElement(mD,{basename:$,location:f.location,navigationType:f.historyAction,navigator:ee,unstable_useTransitions:i},O.createElement(fD,{routes:n.routes,future:n.future,state:f,onError:t})))))),null)}function _0(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var fD=O.memo(dD);function dD({routes:n,future:e,state:t,onError:i}){return KN(n,void 0,t,i,e)}function Ta({to:n,replace:e,state:t,relative:i}){nt(nu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=O.useContext(Lr);tn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=O.useContext(ni),{pathname:c}=ri(),f=Oo(),m=Kd(n,$d(l),c,i==="path"),p=JSON.stringify(m);return O.useEffect(()=>{f(JSON.parse(p),{replace:e,state:t,relative:i})},[f,p,i,e,t]),null}function XA(n){return $N(n.context)}function mD({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){nt(!nu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),m=O.useMemo(()=>({basename:f,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[f,a,l,c]);typeof t=="string"&&(t=xs(t));let{pathname:p="/",search:y="",hash:v="",state:T=null,key:w="default"}=t,N=O.useMemo(()=>{let V=ti(p,f);return V==null?null:{location:{pathname:V,search:y,hash:v,state:T,key:w},navigationType:i}},[f,p,y,v,T,w,i]);return tn(N!=null,`<Router basename="${f}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:O.createElement(Lr.Provider,{value:m},O.createElement(Yd.Provider,{children:e,value:N}))}var Yf="get",Qf="application/x-www-form-urlencoded";function Qd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function pD(n){return Qd(n)&&n.tagName.toLowerCase()==="button"}function gD(n){return Qd(n)&&n.tagName.toLowerCase()==="form"}function yD(n){return Qd(n)&&n.tagName.toLowerCase()==="input"}function _D(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function vD(n,e){return n.button===0&&(!e||e==="_self")&&!_D(n)}function vy(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let i=n[t];return e.concat(Array.isArray(i)?i.map(a=>[t,a]):[[t,i]])},[]))}function ED(n,e){let t=vy(n);return e&&e.forEach((i,a)=>{t.has(a)||e.getAll(a).forEach(l=>{t.append(a,l)})}),t}var Pf=null;function TD(){if(Pf===null)try{new FormData(document.createElement("form"),0),Pf=!1}catch{Pf=!0}return Pf}var bD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gg(n){return n!=null&&!bD.has(n)?(tn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qf}"`),null):n}function SD(n,e){let t,i,a,l,c;if(gD(n)){let f=n.getAttribute("action");i=f?ti(f,e):null,t=n.getAttribute("method")||Yf,a=Gg(n.getAttribute("enctype"))||Qf,l=new FormData(n)}else if(pD(n)||yD(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?ti(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Yf,a=Gg(n.getAttribute("formenctype"))||Gg(f.getAttribute("enctype"))||Qf,l=new FormData(f,n),!TD()){let{name:p,type:y,value:v}=n;if(y==="image"){let T=p?`${p}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else p&&l.append(p,v)}}else{if(Qd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Yf,i=null,a=Qf,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function l_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function AD(n,e,t,i){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&ti(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function wD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function RD(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await wD(l,t);return c.links?c.links():[]}return[]}));return DD(i.flat(1).filter(CD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function v0(n,e,t,i,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,f=(m,p)=>{var y;return t[p].pathname!==m.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>c(m,p)||f(m,p)):l==="data"?e.filter((m,p)=>{var v;let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function ID(n,e,{includeHydrateFallback:t}={}){return xD(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function xD(n){return[...new Set(n)]}function ND(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function DD(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(ND(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function WA(){let n=O.useContext(Do);return l_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function OD(){let n=O.useContext(Qc);return l_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var u_=O.createContext(void 0);u_.displayName="FrameworkContext";function JA(){let n=O.useContext(u_);return l_(n,"You must render this element inside a <HydratedRouter> element"),n}function MD(n,e){let t=O.useContext(u_),[i,a]=O.useState(!1),[l,c]=O.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,T=O.useRef(null);O.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let V=L=>{L.forEach(U=>{c(U.isIntersecting)})},M=new IntersectionObserver(V,{threshold:.5});return T.current&&M.observe(T.current),()=>{M.disconnect()}}},[n]),O.useEffect(()=>{if(i){let V=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(V)}}},[i]);let w=()=>{a(!0)},N=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,T,{}]:[l,T,{onFocus:uc(f,w),onBlur:uc(m,N),onMouseEnter:uc(p,w),onMouseLeave:uc(y,N),onTouchStart:uc(v,w)}]:[!1,T,{}]}function uc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function PD({page:n,...e}){let{router:t}=WA(),i=O.useMemo(()=>ma(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?O.createElement(VD,{page:n,matches:i,...e}):null}function kD(n){let{manifest:e,routeModules:t}=JA(),[i,a]=O.useState([]);return O.useEffect(()=>{let l=!1;return RD(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function VD({page:n,matches:e,...t}){let i=ri(),{future:a,manifest:l,routeModules:c}=JA(),{basename:f}=WA(),{loaderData:m,matches:p}=OD(),y=O.useMemo(()=>v0(n,e,p,l,i,"data"),[n,e,p,l,i]),v=O.useMemo(()=>v0(n,e,p,l,i,"assets"),[n,e,p,l,i]),T=O.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let V=new Set,M=!1;if(e.forEach(U=>{var te;let q=l.routes[U.route.id];!q||!q.hasLoader||(!y.some(ee=>ee.route.id===U.route.id)&&U.route.id in m&&((te=c[U.route.id])!=null&&te.shouldRevalidate)||q.hasClientLoader?M=!0:V.add(U.route.id))}),V.size===0)return[];let L=AD(n,f,a.unstable_trailingSlashAwareDataRequests,"data");return M&&V.size>0&&L.searchParams.set("_routes",e.filter(U=>V.has(U.route.id)).map(U=>U.route.id).join(",")),[L.pathname+L.search]},[f,a.unstable_trailingSlashAwareDataRequests,m,i,l,y,e,n,c]),w=O.useMemo(()=>ID(v,l),[v,l]),N=kD(v);return O.createElement(O.Fragment,null,T.map(V=>O.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),w.map(V=>O.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),N.map(({key:V,link:M})=>O.createElement("link",{key:V,nonce:t.nonce,...M,crossOrigin:M.crossOrigin??t.crossOrigin})))}function LD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var jD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jD&&(window.__reactRouterVersion="7.13.0")}catch{}function UD(n,e){return fN({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:Ix({window:e==null?void 0:e.window}),hydrationData:zD(),routes:n,mapRouteProperties:lD,hydrationRouteProperties:uD,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function zD(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:BD(n.errors)}),n}function BD(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,a]of e)if(a&&a.__type==="RouteErrorResponse")t[i]=new Kc(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let l=window[a.__subType];if(typeof l=="function")try{let c=new l(a.message);c.stack="",t[i]=c}catch{}}if(t[i]==null){let l=new Error(a.message);l.stack="",t[i]=l}}else t[i]=a;return t}var ZA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ew=O.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:f,target:m,to:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:T,...w},N){let{basename:V,unstable_useTransitions:M}=O.useContext(Lr),L=typeof p=="string"&&ZA.test(p),U=DA(p,V);p=U.to;let q=FN(p,{relative:a}),[te,ee,$]=MD(i,w),S=GD(p,{replace:c,state:f,target:m,preventScrollReset:y,relative:a,viewTransition:v,unstable_defaultShouldRevalidate:T,unstable_useTransitions:M});function C(k){e&&e(k),k.defaultPrevented||S(k)}let R=O.createElement("a",{...w,...$,href:U.absoluteURL||q,onClick:U.isExternal||l?e:C,ref:LD(N,ee),target:m,"data-discover":!L&&t==="render"?"true":void 0});return te&&!L?O.createElement(O.Fragment,null,R,O.createElement(PD,{page:q})):R});ew.displayName="Link";var HD=O.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:f,children:m,...p},y){let v=Xc(c,{relative:p.relative}),T=ri(),w=O.useContext(Qc),{navigator:N,basename:V}=O.useContext(Lr),M=w!=null&&WD(v)&&f===!0,L=N.encodeLocation?N.encodeLocation(v).pathname:v.pathname,U=T.pathname,q=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(U=U.toLowerCase(),q=q?q.toLowerCase():null,L=L.toLowerCase()),q&&V&&(q=ti(q,V)||q);const te=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let ee=U===L||!a&&U.startsWith(L)&&U.charAt(te)==="/",$=q!=null&&(q===L||!a&&q.startsWith(L)&&q.charAt(L.length)==="/"),S={isActive:ee,isPending:$,isTransitioning:M},C=ee?e:void 0,R;typeof i=="function"?R=i(S):R=[i,ee?"active":null,$?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(S):l;return O.createElement(ew,{...p,"aria-current":C,className:R,ref:y,style:k,to:c,viewTransition:f},typeof m=="function"?m(S):m)});HD.displayName="NavLink";var FD=O.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=Yf,action:f,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:T,...w},N)=>{let{unstable_useTransitions:V}=O.useContext(Lr),M=QD(),L=XD(f,{relative:p}),U=c.toLowerCase()==="get"?"get":"post",q=typeof f=="string"&&ZA.test(f),te=ee=>{if(m&&m(ee),ee.defaultPrevented)return;ee.preventDefault();let $=ee.nativeEvent.submitter,S=($==null?void 0:$.getAttribute("formmethod"))||c,C=()=>M($||ee.currentTarget,{fetcherKey:e,method:S,navigate:t,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:T});V&&t!==!1?O.startTransition(()=>C()):C()};return O.createElement("form",{ref:N,method:U,action:L,onSubmit:i?m:te,...w,"data-discover":!q&&n==="render"?"true":void 0})});FD.displayName="Form";function qD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tw(n){let e=O.useContext(Do);return nt(e,qD(n)),e}function GD(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let p=Oo(),y=ri(),v=Xc(n,{relative:l});return O.useCallback(T=>{if(vD(T,e)){T.preventDefault();let w=t!==void 0?t:zi(y)===zi(v),N=()=>p(n,{replace:w,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});m?O.startTransition(()=>N()):N()}},[y,p,v,t,i,e,n,a,l,c,f,m])}function $D(n){tn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=O.useRef(vy(n)),t=O.useRef(!1),i=ri(),a=O.useMemo(()=>ED(i.search,t.current?null:e.current),[i.search]),l=Oo(),c=O.useCallback((f,m)=>{const p=vy(typeof f=="function"?f(new URLSearchParams(a)):f);t.current=!0,l("?"+p,m)},[l,a]);return[a,c]}var KD=0,YD=()=>`__${String(++KD)}__`;function QD(){let{router:n}=tw("useSubmit"),{basename:e}=O.useContext(Lr),t=nD(),i=n.fetch,a=n.navigate;return O.useCallback(async(l,c={})=>{let{action:f,method:m,encType:p,formData:y,body:v}=SD(l,e);if(c.navigate===!1){let T=c.fetcherKey||YD();await i(T,t,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:v,formMethod:c.method||m,formEncType:c.encType||p,flushSync:c.flushSync})}else await a(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:v,formMethod:c.method||m,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,e,t])}function XD(n,{relative:e}={}){let{basename:t}=O.useContext(Lr),i=O.useContext(ni);nt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Xc(n||".",{relative:e})},c=ri();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(y=>y==="")){f.delete("index"),m.filter(v=>v).forEach(v=>f.append("index",v));let y=f.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:ki([t,l.pathname])),zi(l)}function WD(n,{relative:e}={}){let t=O.useContext(i_);nt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=tw("useViewTransitionState"),a=Xc(n,{relative:e});if(!t.isTransitioning)return!1;let l=ti(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=ti(t.nextLocation.pathname,i)||t.nextLocation.pathname;return gd(a.pathname,c)!=null||gd(a.pathname,l)!=null}var nw=TA();function JD(n){return O.createElement(hD,{flushSync:nw.flushSync,...n})}const ZD=O.createContext(void 0),In=()=>bx(),Ue=wx.withTypes(),e2=({children:n})=>{const e=Ue(t=>t.auth.loading);return b.jsx(ZD.Provider,{value:{isLoading:e},children:n})},t2=()=>{};var E0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},n2=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],f=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},iw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,f=c?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,y=l>>2,v=(l&3)<<4|f>>4;let T=(f&15)<<2|p>>6,w=p&63;m||(w=64,c||(T=64)),i.push(t[y],t[v],t[T],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):n2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||p==null||v==null)throw new r2;const T=l<<2|f>>4;if(i.push(T),p!==64){const w=f<<4&240|p>>2;if(i.push(w),v!==64){const N=p<<6&192|v;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class r2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i2=function(n){const e=rw(n);return iw.encodeByteArray(e,!0)},yd=function(n){return i2(n).replace(/\./g,"")},sw=function(n){try{return iw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=()=>s2().__FIREBASE_DEFAULTS__,o2=()=>{if(typeof process>"u"||typeof E0>"u")return;const n=E0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},l2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sw(n[1]);return e&&JSON.parse(e)},Xd=()=>{try{return t2()||a2()||o2()||l2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aw=n=>{var e,t;return(t=(e=Xd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},u2=n=>{const e=aw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},ow=()=>{var n;return(n=Xd())==null?void 0:n.config},lw=n=>{var e;return(e=Xd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[yd(JSON.stringify(t)),yd(JSON.stringify(c)),""].join(".")}const Tc={};function f2(){const n={prod:[],emulator:[]};for(const e of Object.keys(Tc))Tc[e]?n.emulator.push(e):n.prod.push(e);return n}function d2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let T0=!1;function cw(n,e){if(typeof window>"u"||typeof document>"u"||!ru(window.location.host)||Tc[n]===e||Tc[n]||T0)return;Tc[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",l=f2().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,w){T.setAttribute("width","24"),T.setAttribute("id",w),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{T0=!0,c()},T}function y(T,w){T.setAttribute("id",w),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=d2(i),w=t("text"),N=document.getElementById(w)||document.createElement("span"),V=t("learnmore"),M=document.getElementById(V)||document.createElement("a"),L=t("preprendIcon"),U=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const q=T.element;f(q),y(M,V);const te=p();m(U,L),q.append(U,N,M,te),document.body.appendChild(q)}l?(N.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function m2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yn())}function p2(){var e;const n=(e=Xd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function v2(){const n=Yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function E2(){return!p2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T2(){try{return typeof indexedDB=="object"}catch{return!1}}function b2(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="FirebaseError";class Ns extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=S2,Object.setPrototypeOf(this,Ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?A2(l,i):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Ns(a,f,i)}}function A2(n,e){return n.replace(w2,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const w2=/\{\$([^}]+)}/g;function C2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ao(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(b0(l)&&b0(c)){if(!Ao(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function b0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function R2(n,e){const t=new I2(n,e);return t.subscribe.bind(t)}class I2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");x2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=$g),a.error===void 0&&(a.error=$g),a.complete===void 0&&(a.complete=$g);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function x2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function $g(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(n){return n&&n._delegate?n._delegate:n}class wo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new c2;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O2(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:D2(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D2(n){return n===mo?void 0:n}function O2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new N2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ut||(ut={}));const P2={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},k2=ut.INFO,V2={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},L2=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=V2[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c_{constructor(e){this.name=e,this._logLevel=k2,this._logHandler=L2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?P2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const j2=(n,e)=>e.some(t=>n instanceof t);let S0,A0;function U2(){return S0||(S0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function z2(){return A0||(A0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hw=new WeakMap,Ey=new WeakMap,fw=new WeakMap,Kg=new WeakMap,h_=new WeakMap;function B2(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ba(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&hw.set(t,n)}).catch(()=>{}),h_.set(e,n),e}function H2(n){if(Ey.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ey.set(n,e)}let Ty={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ey.get(n);if(e==="objectStoreNames")return n.objectStoreNames||fw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ba(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function F2(n){Ty=n(Ty)}function q2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Yg(this),e,...t);return fw.set(i,e.sort?e.sort():[e]),ba(i)}:z2().includes(n)?function(...e){return n.apply(Yg(this),e),ba(hw.get(this))}:function(...e){return ba(n.apply(Yg(this),e))}}function G2(n){return typeof n=="function"?q2(n):(n instanceof IDBTransaction&&H2(n),j2(n,U2())?new Proxy(n,Ty):n)}function ba(n){if(n instanceof IDBRequest)return B2(n);if(Kg.has(n))return Kg.get(n);const e=G2(n);return e!==n&&(Kg.set(n,e),h_.set(e,n)),e}const Yg=n=>h_.get(n);function $2(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),f=ba(c);return i&&c.addEventListener("upgradeneeded",m=>{i(ba(c.result),m.oldVersion,m.newVersion,ba(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const K2=["get","getKey","getAll","getAllKeys","count"],Y2=["put","add","delete","clear"],Qg=new Map;function w0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qg.get(e))return Qg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=Y2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||K2.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),a&&m.done]))[0]};return Qg.set(e,l),l}F2(n=>({...n,get:(e,t,i)=>w0(e,t)||n.get(e,t,i),has:(e,t)=>!!w0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(X2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function X2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const by="@firebase/app",C0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new c_("@firebase/app"),W2="@firebase/app-compat",J2="@firebase/analytics-compat",Z2="@firebase/analytics",eO="@firebase/app-check-compat",tO="@firebase/app-check",nO="@firebase/auth",rO="@firebase/auth-compat",iO="@firebase/database",sO="@firebase/data-connect",aO="@firebase/database-compat",oO="@firebase/functions",lO="@firebase/functions-compat",uO="@firebase/installations",cO="@firebase/installations-compat",hO="@firebase/messaging",fO="@firebase/messaging-compat",dO="@firebase/performance",mO="@firebase/performance-compat",pO="@firebase/remote-config",gO="@firebase/remote-config-compat",yO="@firebase/storage",_O="@firebase/storage-compat",vO="@firebase/firestore",EO="@firebase/ai",TO="@firebase/firestore-compat",bO="firebase",SO="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="[DEFAULT]",AO={[by]:"fire-core",[W2]:"fire-core-compat",[Z2]:"fire-analytics",[J2]:"fire-analytics-compat",[tO]:"fire-app-check",[eO]:"fire-app-check-compat",[nO]:"fire-auth",[rO]:"fire-auth-compat",[iO]:"fire-rtdb",[sO]:"fire-data-connect",[aO]:"fire-rtdb-compat",[oO]:"fire-fn",[lO]:"fire-fn-compat",[uO]:"fire-iid",[cO]:"fire-iid-compat",[hO]:"fire-fcm",[fO]:"fire-fcm-compat",[dO]:"fire-perf",[mO]:"fire-perf-compat",[pO]:"fire-rc",[gO]:"fire-rc-compat",[yO]:"fire-gcs",[_O]:"fire-gcs-compat",[vO]:"fire-fst",[TO]:"fire-fst-compat",[EO]:"fire-vertex","fire-js":"fire-js",[bO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Map,wO=new Map,Ay=new Map;function R0(n,e){try{n.container.addComponent(e)}catch(t){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Gl(n){const e=n.name;if(Ay.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;Ay.set(e,n);for(const t of _d.values())R0(t,n);for(const t of wO.values())R0(t,n);return!0}function f_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function fi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sa=new Wc("app","Firebase",CO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=SO;function dw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Sy,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Sa.create("bad-app-name",{appName:String(a)});if(t||(t=ow()),!t)throw Sa.create("no-options");const l=_d.get(a);if(l){if(Ao(t,l.options)&&Ao(i,l.config))return l;throw Sa.create("duplicate-app",{appName:a})}const c=new M2(a);for(const m of Ay.values())c.addComponent(m);const f=new RO(t,i,c);return _d.set(a,f),f}function mw(n=Sy){const e=_d.get(n);if(!e&&n===Sy&&ow())return dw();if(!e)throw Sa.create("no-app",{appName:n});return e}function Aa(n,e,t){let i=AO[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(c.join(" "));return}Gl(new wo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="firebase-heartbeat-database",xO=1,Mc="firebase-heartbeat-store";let Xg=null;function pw(){return Xg||(Xg=$2(IO,xO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Mc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sa.create("idb-open",{originalErrorMessage:n.message})})),Xg}async function NO(n){try{const t=(await pw()).transaction(Mc),i=await t.objectStore(Mc).get(gw(n));return await t.done,i}catch(e){if(e instanceof Ns)bs.warn(e.message);else{const t=Sa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bs.warn(t.message)}}}async function I0(n,e){try{const i=(await pw()).transaction(Mc,"readwrite");await i.objectStore(Mc).put(e,gw(n)),await i.done}catch(t){if(t instanceof Ns)bs.warn(t.message);else{const i=Sa.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});bs.warn(i.message)}}}function gw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=1024,OO=30;class MO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=x0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>OO){const c=VO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){bs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=x0(),{heartbeatsToSend:i,unsentEntries:a}=PO(this._heartbeatsCache.heartbeats),l=yd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return bs.warn(t),""}}}function x0(){return new Date().toISOString().substring(0,10)}function PO(n,e=DO){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),N0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),N0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class kO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T2()?b2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await NO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return I0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return I0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function N0(n){return yd(JSON.stringify({version:2,heartbeats:n})).length}function VO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(n){Gl(new wo("platform-logger",e=>new Q2(e),"PRIVATE")),Gl(new wo("heartbeat",e=>new MO(e),"PRIVATE")),Aa(by,C0,n),Aa(by,C0,"esm2020"),Aa("fire-js","")}LO("");var D0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wa,yw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,C){function R(){}R.prototype=C.prototype,S.F=C.prototype,S.prototype=new R,S.prototype.constructor=S,S.D=function(k,P,j){for(var x=Array(arguments.length-2),le=2;le<arguments.length;le++)x[le-2]=arguments[le];return C.prototype[P].apply(k,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,C,R){R||(R=0);const k=Array(16);if(typeof C=="string")for(var P=0;P<16;++P)k[P]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(P=0;P<16;++P)k[P]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=S.g[0],R=S.g[1],P=S.g[2];let j=S.g[3],x;x=C+(j^R&(P^j))+k[0]+3614090360&4294967295,C=R+(x<<7&4294967295|x>>>25),x=j+(P^C&(R^P))+k[1]+3905402710&4294967295,j=C+(x<<12&4294967295|x>>>20),x=P+(R^j&(C^R))+k[2]+606105819&4294967295,P=j+(x<<17&4294967295|x>>>15),x=R+(C^P&(j^C))+k[3]+3250441966&4294967295,R=P+(x<<22&4294967295|x>>>10),x=C+(j^R&(P^j))+k[4]+4118548399&4294967295,C=R+(x<<7&4294967295|x>>>25),x=j+(P^C&(R^P))+k[5]+1200080426&4294967295,j=C+(x<<12&4294967295|x>>>20),x=P+(R^j&(C^R))+k[6]+2821735955&4294967295,P=j+(x<<17&4294967295|x>>>15),x=R+(C^P&(j^C))+k[7]+4249261313&4294967295,R=P+(x<<22&4294967295|x>>>10),x=C+(j^R&(P^j))+k[8]+1770035416&4294967295,C=R+(x<<7&4294967295|x>>>25),x=j+(P^C&(R^P))+k[9]+2336552879&4294967295,j=C+(x<<12&4294967295|x>>>20),x=P+(R^j&(C^R))+k[10]+4294925233&4294967295,P=j+(x<<17&4294967295|x>>>15),x=R+(C^P&(j^C))+k[11]+2304563134&4294967295,R=P+(x<<22&4294967295|x>>>10),x=C+(j^R&(P^j))+k[12]+1804603682&4294967295,C=R+(x<<7&4294967295|x>>>25),x=j+(P^C&(R^P))+k[13]+4254626195&4294967295,j=C+(x<<12&4294967295|x>>>20),x=P+(R^j&(C^R))+k[14]+2792965006&4294967295,P=j+(x<<17&4294967295|x>>>15),x=R+(C^P&(j^C))+k[15]+1236535329&4294967295,R=P+(x<<22&4294967295|x>>>10),x=C+(P^j&(R^P))+k[1]+4129170786&4294967295,C=R+(x<<5&4294967295|x>>>27),x=j+(R^P&(C^R))+k[6]+3225465664&4294967295,j=C+(x<<9&4294967295|x>>>23),x=P+(C^R&(j^C))+k[11]+643717713&4294967295,P=j+(x<<14&4294967295|x>>>18),x=R+(j^C&(P^j))+k[0]+3921069994&4294967295,R=P+(x<<20&4294967295|x>>>12),x=C+(P^j&(R^P))+k[5]+3593408605&4294967295,C=R+(x<<5&4294967295|x>>>27),x=j+(R^P&(C^R))+k[10]+38016083&4294967295,j=C+(x<<9&4294967295|x>>>23),x=P+(C^R&(j^C))+k[15]+3634488961&4294967295,P=j+(x<<14&4294967295|x>>>18),x=R+(j^C&(P^j))+k[4]+3889429448&4294967295,R=P+(x<<20&4294967295|x>>>12),x=C+(P^j&(R^P))+k[9]+568446438&4294967295,C=R+(x<<5&4294967295|x>>>27),x=j+(R^P&(C^R))+k[14]+3275163606&4294967295,j=C+(x<<9&4294967295|x>>>23),x=P+(C^R&(j^C))+k[3]+4107603335&4294967295,P=j+(x<<14&4294967295|x>>>18),x=R+(j^C&(P^j))+k[8]+1163531501&4294967295,R=P+(x<<20&4294967295|x>>>12),x=C+(P^j&(R^P))+k[13]+2850285829&4294967295,C=R+(x<<5&4294967295|x>>>27),x=j+(R^P&(C^R))+k[2]+4243563512&4294967295,j=C+(x<<9&4294967295|x>>>23),x=P+(C^R&(j^C))+k[7]+1735328473&4294967295,P=j+(x<<14&4294967295|x>>>18),x=R+(j^C&(P^j))+k[12]+2368359562&4294967295,R=P+(x<<20&4294967295|x>>>12),x=C+(R^P^j)+k[5]+4294588738&4294967295,C=R+(x<<4&4294967295|x>>>28),x=j+(C^R^P)+k[8]+2272392833&4294967295,j=C+(x<<11&4294967295|x>>>21),x=P+(j^C^R)+k[11]+1839030562&4294967295,P=j+(x<<16&4294967295|x>>>16),x=R+(P^j^C)+k[14]+4259657740&4294967295,R=P+(x<<23&4294967295|x>>>9),x=C+(R^P^j)+k[1]+2763975236&4294967295,C=R+(x<<4&4294967295|x>>>28),x=j+(C^R^P)+k[4]+1272893353&4294967295,j=C+(x<<11&4294967295|x>>>21),x=P+(j^C^R)+k[7]+4139469664&4294967295,P=j+(x<<16&4294967295|x>>>16),x=R+(P^j^C)+k[10]+3200236656&4294967295,R=P+(x<<23&4294967295|x>>>9),x=C+(R^P^j)+k[13]+681279174&4294967295,C=R+(x<<4&4294967295|x>>>28),x=j+(C^R^P)+k[0]+3936430074&4294967295,j=C+(x<<11&4294967295|x>>>21),x=P+(j^C^R)+k[3]+3572445317&4294967295,P=j+(x<<16&4294967295|x>>>16),x=R+(P^j^C)+k[6]+76029189&4294967295,R=P+(x<<23&4294967295|x>>>9),x=C+(R^P^j)+k[9]+3654602809&4294967295,C=R+(x<<4&4294967295|x>>>28),x=j+(C^R^P)+k[12]+3873151461&4294967295,j=C+(x<<11&4294967295|x>>>21),x=P+(j^C^R)+k[15]+530742520&4294967295,P=j+(x<<16&4294967295|x>>>16),x=R+(P^j^C)+k[2]+3299628645&4294967295,R=P+(x<<23&4294967295|x>>>9),x=C+(P^(R|~j))+k[0]+4096336452&4294967295,C=R+(x<<6&4294967295|x>>>26),x=j+(R^(C|~P))+k[7]+1126891415&4294967295,j=C+(x<<10&4294967295|x>>>22),x=P+(C^(j|~R))+k[14]+2878612391&4294967295,P=j+(x<<15&4294967295|x>>>17),x=R+(j^(P|~C))+k[5]+4237533241&4294967295,R=P+(x<<21&4294967295|x>>>11),x=C+(P^(R|~j))+k[12]+1700485571&4294967295,C=R+(x<<6&4294967295|x>>>26),x=j+(R^(C|~P))+k[3]+2399980690&4294967295,j=C+(x<<10&4294967295|x>>>22),x=P+(C^(j|~R))+k[10]+4293915773&4294967295,P=j+(x<<15&4294967295|x>>>17),x=R+(j^(P|~C))+k[1]+2240044497&4294967295,R=P+(x<<21&4294967295|x>>>11),x=C+(P^(R|~j))+k[8]+1873313359&4294967295,C=R+(x<<6&4294967295|x>>>26),x=j+(R^(C|~P))+k[15]+4264355552&4294967295,j=C+(x<<10&4294967295|x>>>22),x=P+(C^(j|~R))+k[6]+2734768916&4294967295,P=j+(x<<15&4294967295|x>>>17),x=R+(j^(P|~C))+k[13]+1309151649&4294967295,R=P+(x<<21&4294967295|x>>>11),x=C+(P^(R|~j))+k[4]+4149444226&4294967295,C=R+(x<<6&4294967295|x>>>26),x=j+(R^(C|~P))+k[11]+3174756917&4294967295,j=C+(x<<10&4294967295|x>>>22),x=P+(C^(j|~R))+k[2]+718787259&4294967295,P=j+(x<<15&4294967295|x>>>17),x=R+(j^(P|~C))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(P+(x<<21&4294967295|x>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+j&4294967295}i.prototype.v=function(S,C){C===void 0&&(C=S.length);const R=C-this.blockSize,k=this.C;let P=this.h,j=0;for(;j<C;){if(P==0)for(;j<=R;)a(this,S,j),j+=this.blockSize;if(typeof S=="string"){for(;j<C;)if(k[P++]=S.charCodeAt(j++),P==this.blockSize){a(this,k),P=0;break}}else for(;j<C;)if(k[P++]=S[j++],P==this.blockSize){a(this,k),P=0;break}}this.h=P,this.o+=C},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;C=this.o*8;for(var R=S.length-8;R<S.length;++R)S[R]=C&255,C/=256;for(this.v(S),S=Array(16),C=0,R=0;R<4;++R)for(let k=0;k<32;k+=8)S[C++]=this.g[R]>>>k&255;return S};function l(S,C){var R=f;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=C(S)}function c(S,C){this.h=C;const R=[];let k=!0;for(let P=S.length-1;P>=0;P--){const j=S[P]|0;k&&j==C||(R[P]=j,k=!1)}this.g=R}var f={};function m(S){return-128<=S&&S<128?l(S,function(C){return new c([C|0],C<0?-1:0)}):new c([S|0],S<0?-1:0)}function p(S){if(isNaN(S)||!isFinite(S))return v;if(S<0)return M(p(-S));const C=[];let R=1;for(let k=0;S>=R;k++)C[k]=S/R|0,R*=4294967296;return new c(C,0)}function y(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return M(y(S.substring(1),C));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(C,8));let k=v;for(let j=0;j<S.length;j+=8){var P=Math.min(8,S.length-j);const x=parseInt(S.substring(j,j+P),C);P<8?(P=p(Math.pow(C,P)),k=k.j(P).add(p(x))):(k=k.j(R),k=k.add(p(x)))}return k}var v=m(0),T=m(1),w=m(16777216);n=c.prototype,n.m=function(){if(V(this))return-M(this).m();let S=0,C=1;for(let R=0;R<this.g.length;R++){const k=this.i(R);S+=(k>=0?k:4294967296+k)*C,C*=4294967296}return S},n.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N(this))return"0";if(V(this))return"-"+M(this).toString(S);const C=p(Math.pow(S,6));var R=this;let k="";for(;;){const P=te(R,C).g;R=L(R,P.j(C));let j=((R.g.length>0?R.g[0]:R.h)>>>0).toString(S);if(R=P,N(R))return j+k;for(;j.length<6;)j="0"+j;k=j+k}},n.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function N(S){if(S.h!=0)return!1;for(let C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function V(S){return S.h==-1}n.l=function(S){return S=L(this,S),V(S)?-1:N(S)?0:1};function M(S){const C=S.g.length,R=[];for(let k=0;k<C;k++)R[k]=~S.g[k];return new c(R,~S.h).add(T)}n.abs=function(){return V(this)?M(this):this},n.add=function(S){const C=Math.max(this.g.length,S.g.length),R=[];let k=0;for(let P=0;P<=C;P++){let j=k+(this.i(P)&65535)+(S.i(P)&65535),x=(j>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);k=x>>>16,j&=65535,x&=65535,R[P]=x<<16|j}return new c(R,R[R.length-1]&-2147483648?-1:0)};function L(S,C){return S.add(M(C))}n.j=function(S){if(N(this)||N(S))return v;if(V(this))return V(S)?M(this).j(M(S)):M(M(this).j(S));if(V(S))return M(this.j(M(S)));if(this.l(w)<0&&S.l(w)<0)return p(this.m()*S.m());const C=this.g.length+S.g.length,R=[];for(var k=0;k<2*C;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<S.g.length;P++){const j=this.i(k)>>>16,x=this.i(k)&65535,le=S.i(P)>>>16,me=S.i(P)&65535;R[2*k+2*P]+=x*me,U(R,2*k+2*P),R[2*k+2*P+1]+=j*me,U(R,2*k+2*P+1),R[2*k+2*P+1]+=x*le,U(R,2*k+2*P+1),R[2*k+2*P+2]+=j*le,U(R,2*k+2*P+2)}for(S=0;S<C;S++)R[S]=R[2*S+1]<<16|R[2*S];for(S=C;S<2*C;S++)R[S]=0;return new c(R,0)};function U(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function q(S,C){this.g=S,this.h=C}function te(S,C){if(N(C))throw Error("division by zero");if(N(S))return new q(v,v);if(V(S))return C=te(M(S),C),new q(M(C.g),M(C.h));if(V(C))return C=te(S,M(C)),new q(M(C.g),C.h);if(S.g.length>30){if(V(S)||V(C))throw Error("slowDivide_ only works with positive integers.");for(var R=T,k=C;k.l(S)<=0;)R=ee(R),k=ee(k);var P=$(R,1),j=$(k,1);for(k=$(k,2),R=$(R,2);!N(k);){var x=j.add(k);x.l(S)<=0&&(P=P.add(R),j=x),k=$(k,1),R=$(R,1)}return C=L(S,P.j(C)),new q(P,C)}for(P=v;S.l(C)>=0;){for(R=Math.max(1,Math.floor(S.m()/C.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),j=p(R),x=j.j(C);V(x)||x.l(S)>0;)R-=k,j=p(R),x=j.j(C);N(j)&&(j=T),P=P.add(j),S=L(S,x)}return new q(P,S)}n.B=function(S){return te(this,S).h},n.and=function(S){const C=Math.max(this.g.length,S.g.length),R=[];for(let k=0;k<C;k++)R[k]=this.i(k)&S.i(k);return new c(R,this.h&S.h)},n.or=function(S){const C=Math.max(this.g.length,S.g.length),R=[];for(let k=0;k<C;k++)R[k]=this.i(k)|S.i(k);return new c(R,this.h|S.h)},n.xor=function(S){const C=Math.max(this.g.length,S.g.length),R=[];for(let k=0;k<C;k++)R[k]=this.i(k)^S.i(k);return new c(R,this.h^S.h)};function ee(S){const C=S.g.length+1,R=[];for(let k=0;k<C;k++)R[k]=S.i(k)<<1|S.i(k-1)>>>31;return new c(R,S.h)}function $(S,C){const R=C>>5;C%=32;const k=S.g.length-R,P=[];for(let j=0;j<k;j++)P[j]=C>0?S.i(j+R)>>>C|S.i(j+R+1)<<32-C:S.i(j+R);return new c(P,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,yw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,wa=c}).apply(typeof D0<"u"?D0:typeof self<"u"?self:typeof window<"u"?window:{});var kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _w,pc,vw,Xf,wy,Ew,Tw,bw;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof kf=="object"&&kf];for(var _=0;_<h.length;++_){var A=h[_];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=t(this);function a(h,_){if(_)e:{var A=i;h=h.split(".");for(var D=0;D<h.length-1;D++){var Q=h[D];if(!(Q in A))break e;A=A[Q]}h=h[h.length-1],D=A[h],_=_(D),_!=D&&_!=null&&e(A,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var A=[],D;for(D in _)Object.prototype.hasOwnProperty.call(_,D)&&A.push([D,_[D]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,A){return h.call.apply(h.bind,arguments)}function p(h,_,A){return p=m,p.apply(null,arguments)}function y(h,_){var A=Array.prototype.slice.call(arguments,1);return function(){var D=A.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function v(h,_){function A(){}A.prototype=_.prototype,h.Z=_.prototype,h.prototype=new A,h.prototype.constructor=h,h.Ob=function(D,Q,ne){for(var Te=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)Te[Xe-2]=arguments[Xe];return _.prototype[Q].apply(D,Te)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const _=h.length;if(_>0){const A=Array(_);for(let D=0;D<_;D++)A[D]=h[D];return A}return[]}function N(h,_){for(let D=1;D<arguments.length;D++){const Q=arguments[D];var A=typeof Q;if(A=A!="object"?A:Q?Array.isArray(Q)?"array":A:"null",A=="array"||A=="object"&&typeof Q.length=="number"){A=h.length||0;const ne=Q.length||0;h.length=A+ne;for(let Te=0;Te<ne;Te++)h[A+Te]=Q[Te]}else h.push(Q)}}class V{constructor(_,A){this.i=_,this.j=A,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function M(h){c.setTimeout(()=>{throw h},0)}function L(){var h=S;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class U{constructor(){this.h=this.g=null}add(_,A){const D=q.get();D.set(_,A),this.h?this.h.next=D:this.g=D,this.h=D}}var q=new V(()=>new te,h=>h.reset());class te{constructor(){this.next=this.g=this.h=null}set(_,A){this.h=_,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,$=!1,S=new U,C=()=>{const h=Promise.resolve(void 0);ee=()=>{h.then(R)}};function R(){for(var h;h=L();){try{h.h.call(h.g)}catch(A){M(A)}var _=q;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}$=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const A=()=>{};c.addEventListener("test",A,_),c.removeEventListener("test",A,_)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function le(h,_){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}v(le,P),le.prototype.init=function(h,_){const A=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(A=="mouseover"?_=h.fromElement:A=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),G=0;function he(h,_,A,D,Q){this.listener=h,this.proxy=null,this.src=_,this.type=A,this.capture=!!D,this.ha=Q,this.key=++G,this.da=this.fa=!1}function pe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Pe(h,_,A){for(const D in h)_.call(A,h[D],D,h)}function Oe(h,_){for(const A in h)_.call(void 0,h[A],A,h)}function H(h){const _={};for(const A in h)_[A]=h[A];return _}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(h,_){let A,D;for(let Q=1;Q<arguments.length;Q++){D=arguments[Q];for(A in D)h[A]=D[A];for(let ne=0;ne<ie.length;ne++)A=ie[ne],Object.prototype.hasOwnProperty.call(D,A)&&(h[A]=D[A])}}function Ee(h){this.src=h,this.g={},this.h=0}Ee.prototype.add=function(h,_,A,D,Q){const ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);const Te=ve(h,_,D,Q);return Te>-1?(_=h[Te],A||(_.fa=!1)):(_=new he(_,this.src,ne,!!D,Q),_.fa=A,h.push(_)),_};function ue(h,_){const A=_.type;if(A in h.g){var D=h.g[A],Q=Array.prototype.indexOf.call(D,_,void 0),ne;(ne=Q>=0)&&Array.prototype.splice.call(D,Q,1),ne&&(pe(_),h.g[A].length==0&&(delete h.g[A],h.h--))}}function ve(h,_,A,D){for(let Q=0;Q<h.length;++Q){const ne=h[Q];if(!ne.da&&ne.listener==_&&ne.capture==!!A&&ne.ha==D)return Q}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),ke={};function je(h,_,A,D,Q){if(Array.isArray(_)){for(let ne=0;ne<_.length;ne++)je(h,_[ne],A,D,Q);return null}return A=ir(A),h&&h[me]?h.J(_,A,f(D)?!!D.capture:!1,Q):mt(h,_,A,!1,D,Q)}function mt(h,_,A,D,Q,ne){if(!_)throw Error("Invalid event type");const Te=f(Q)?!!Q.capture:!!Q;let Xe=Dt(h);if(Xe||(h[Ae]=Xe=new Ee(h)),A=Xe.add(_,A,D,Te,ne),A.proxy)return A;if(D=Et(),A.proxy=D,D.src=h,D.listener=A,h.addEventListener)j||(Q=Te),Q===void 0&&(Q=!1),h.addEventListener(_.toString(),D,Q);else if(h.attachEvent)h.attachEvent(Qe(_.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Et(){function h(A){return _.call(h.src,h.listener,A)}const _=$t;return h}function be(h,_,A,D,Q){if(Array.isArray(_))for(var ne=0;ne<_.length;ne++)be(h,_[ne],A,D,Q);else D=f(D)?!!D.capture:!!D,A=ir(A),h&&h[me]?(h=h.i,ne=String(_).toString(),ne in h.g&&(_=h.g[ne],A=ve(_,A,D,Q),A>-1&&(pe(_[A]),Array.prototype.splice.call(_,A,1),_.length==0&&(delete h.g[ne],h.h--)))):h&&(h=Dt(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ve(_,A,D,Q)),(A=h>-1?_[h]:null)&&Fe(A))}function Fe(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[me])ue(_.i,h);else{var A=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(A,D,h.capture):_.detachEvent?_.detachEvent(Qe(A),D):_.addListener&&_.removeListener&&_.removeListener(D),(A=Dt(_))?(ue(A,h),A.h==0&&(A.src=null,_[Ae]=null)):pe(h)}}}function Qe(h){return h in ke?ke[h]:ke[h]="on"+h}function $t(h,_){if(h.da)h=!0;else{_=new le(_,this);const A=h.listener,D=h.ha||h.src;h.fa&&Fe(h),h=A.call(D,_)}return h}function Dt(h){return h=h[Ae],h instanceof Ee?h:null}var Qn="__closure_events_fn_"+(Math.random()*1e9>>>0);function ir(h){return typeof h=="function"?h:(h[Qn]||(h[Qn]=function(_){return h.handleEvent(_)}),h[Qn])}function Ot(){k.call(this),this.i=new Ee(this),this.M=this,this.G=null}v(Ot,k),Ot.prototype[me]=!0,Ot.prototype.removeEventListener=function(h,_,A,D){be(this,h,_,A,D)};function Jt(h,_){var A,D=h.G;if(D)for(A=[];D;D=D.G)A.push(D);if(h=h.M,D=_.type||_,typeof _=="string")_=new P(_,h);else if(_ instanceof P)_.target=_.target||h;else{var Q=_;_=new P(D,h),ge(_,Q)}Q=!0;let ne,Te;if(A)for(Te=A.length-1;Te>=0;Te--)ne=_.g=A[Te],Q=zt(ne,D,!0,_)&&Q;if(ne=_.g=h,Q=zt(ne,D,!0,_)&&Q,Q=zt(ne,D,!1,_)&&Q,A)for(Te=0;Te<A.length;Te++)ne=_.g=A[Te],Q=zt(ne,D,!1,_)&&Q}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const A=h.g[_];for(let D=0;D<A.length;D++)pe(A[D]);delete h.g[_],h.h--}}this.G=null},Ot.prototype.J=function(h,_,A,D){return this.i.add(String(h),_,!1,A,D)},Ot.prototype.K=function(h,_,A,D){return this.i.add(String(h),_,!0,A,D)};function zt(h,_,A,D){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let Q=!0;for(let ne=0;ne<_.length;++ne){const Te=_[ne];if(Te&&!Te.da&&Te.capture==A){const Xe=Te.listener,on=Te.ha||Te.src;Te.fa&&ue(h.i,Te),Q=Xe.call(on,D)!==!1&&Q}}return Q&&!D.defaultPrevented}function Ur(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function Fi(h){h.g=Ur(()=>{h.g=null,h.i&&(h.i=!1,Fi(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Bt extends k{constructor(_,A){super(),this.m=_,this.l=A,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Fi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Er(h){k.call(this),this.h=h,this.g={}}v(Er,k);var Ds=[];function qi(h){Pe(h.g,function(_,A){this.g.hasOwnProperty(A)&&Fe(_)},h),h.g={}}Er.prototype.N=function(){Er.Z.N.call(this),qi(this)},Er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=c.JSON.stringify,Tr=c.JSON.parse,ja=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Lo(){}function Os(){}var br={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mt(){P.call(this,"d")}v(Mt,P);function Xn(){P.call(this,"c")}v(Xn,P);var Kt={},Ua=null;function Ms(){return Ua=Ua||new Ot}Kt.Ia="serverreachability";function za(h){P.call(this,Kt.Ia,h)}v(za,P);function Wn(h){const _=Ms();Jt(_,new za(_))}Kt.STAT_EVENT="statevent";function vi(h,_){P.call(this,Kt.STAT_EVENT,h),this.stat=_}v(vi,P);function Yt(h){const _=Ms();Jt(_,new vi(_,h))}Kt.Ja="timingevent";function zr(h,_){P.call(this,Kt.Ja,h),this.size=_}v(zr,P);function Sr(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function Ar(){this.g=!0}Ar.prototype.ua=function(){this.g=!1};function jo(h,_,A,D,Q,ne){h.info(function(){if(h.g)if(ne){var Te="",Xe=ne.split("&");for(let _t=0;_t<Xe.length;_t++){var on=Xe[_t].split("=");if(on.length>1){const Qt=on[0];on=on[1];const Fr=Qt.split("_");Te=Fr.length>=2&&Fr[1]=="type"?Te+(Qt+"="+on+"&"):Te+(Qt+"=redacted&")}}}else Te=null;else Te=ne;return"XMLHTTP REQ ("+D+") [attempt "+Q+"]: "+_+`
`+A+`
`+Te})}function Gi(h,_,A,D,Q,ne,Te){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Q+"]: "+_+`
`+A+`
`+ne+" "+Te})}function Jn(h,_,A,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+du(h,A)+(D?" "+D:"")})}function Ei(h,_){h.info(function(){return"TIMEOUT: "+_})}Ar.prototype.info=function(){};function du(h,_){if(!h.g)return _;if(!_)return null;try{const ne=JSON.parse(_);if(ne){for(h=0;h<ne.length;h++)if(Array.isArray(ne[h])){var A=ne[h];if(!(A.length<2)){var D=A[1];if(Array.isArray(D)&&!(D.length<1)){var Q=D[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let Te=1;Te<D.length;Te++)D[Te]=""}}}}return An(ne)}catch{return _}}var $i={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},z={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},K;function J(){}v(J,Lo),J.prototype.g=function(){return new XMLHttpRequest},K=new J;function de(h){return encodeURIComponent(String(h))}function ye(h){var _=1;h=h.split(":");const A=[];for(;_>0&&h.length;)A.push(h.shift()),_--;return h.length&&A.push(h.join(":")),A}function Ce(h,_,A,D){this.j=h,this.i=_,this.l=A,this.S=D||1,this.V=new Er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}var _e={},Se={};function Ie(h,_,A){h.M=1,h.A=Ba(Ct(_)),h.u=A,h.R=!0,Be(h,null)}function Be(h,_){h.F=Date.now(),wt(h),h.B=Ct(h.A);var A=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),zo(A.i,"t",D),h.C=0,A=h.j.L,h.h=new xe,h.g=Ah(h.j,A?_:null,!h.u),h.P>0&&(h.O=new Bt(p(h.Y,h,h.g),h.P)),_=h.V,A=h.g,D=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Ds[0]=Q.toString()),Q=Ds);for(let ne=0;ne<Q.length;ne++){const Te=je(A,Q[ne],D||_.handleEvent,!1,_.h||_);if(!Te)break;_.g[Te.key]=Te}_=h.J?H(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),Wn(),jo(h.i,h.v,h.B,h.l,h.S,h.u)}Ce.prototype.ba=function(h){h=h.target;const _=this.O;_&&ai(h)==3?_.j():this.Y(h)},Ce.prototype.Y=function(h){try{if(h==this.g)e:{const Xe=ai(this.g),on=this.g.ya(),_t=this.g.ca();if(!(Xe<3)&&(Xe!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||Xe!=4||on==7||(on==8||_t<=0?Wn(3):Wn(2)),Vt(this);var _=this.g.ca();this.X=_;var A=Me(this);if(this.o=_==200,Gi(this.i,this.v,this.B,this.l,this.S,Xe,_),this.o){if(this.U&&!this.L){t:{if(this.g){var D,Q=this.g;if((D=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(D)){var ne=D;break t}}ne=null}if(h=ne)Jn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wn(this,h);else{this.o=!1,this.m=3,Yt(12),Lt(this),Je(this);break e}}if(this.R){h=!0;let Qt;for(;!this.K&&this.C<A.length;)if(Qt=tt(this,A),Qt==Se){Xe==4&&(this.m=4,Yt(14),h=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==_e){this.m=4,Yt(15),Jn(this.i,this.l,A,"[Invalid Chunk]"),h=!1;break}else Jn(this.i,this.l,Qt,null),wn(this,Qt);if(Ge(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||A.length!=0||this.h.h||(this.m=1,Yt(16),h=!1),this.o=this.o&&h,!h)Jn(this.i,this.l,A,"[Invalid Chunked Response]"),Lt(this),Je(this);else if(A.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),bu(Te),Te.P=!0,Yt(11))}}else Jn(this.i,this.l,A,null),wn(this,A);Xe==4&&Lt(this),this.o&&!this.K&&(Xe==4?Eh(this.j,this):(this.o=!1,wt(this)))}else Yi(this.g),_==400&&A.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),Lt(this),Je(this)}}}catch{}finally{}};function Me(h){if(!Ge(h))return h.g.la();const _=xn(h.g);if(_==="")return"";let A="";const D=_.length,Q=ai(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Lt(h),Je(h),"";h.h.i=new c.TextDecoder}for(let ne=0;ne<D;ne++)h.h.h=!0,A+=h.h.i.decode(_[ne],{stream:!(Q&&ne==D-1)});return _.length=0,h.h.g+=A,h.C=0,h.h.g}function Ge(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function tt(h,_){var A=h.C,D=_.indexOf(`
`,A);return D==-1?Se:(A=Number(_.substring(A,D)),isNaN(A)?_e:(D+=1,D+A>_.length?Se:(_=_.slice(D,D+A),h.C=D+A,_)))}Ce.prototype.cancel=function(){this.K=!0,Lt(this)};function wt(h){h.T=Date.now()+h.H,Ht(h,h.H)}function Ht(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Sr(p(h.aa,h),_)}function Vt(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Ce.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ei(this.i,this.B),this.M!=2&&(Wn(),Yt(17)),Lt(this),this.m=2,Je(this)):Ht(this,this.T-h)};function Je(h){h.j.I==0||h.K||Eh(h.j,h)}function Lt(h){Vt(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,qi(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function wn(h,_){try{var A=h.j;if(A.I!=0&&(A.g==h||zn(A.h,h))){if(!h.L&&zn(A.h,h)&&A.I==3){try{var D=A.Ba.g.parse(_)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Q=D;if(Q[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<h.F)Go(A),Bs(A);else break e;Ya(A),Yt(18)}}else A.xa=Q[1],0<A.xa-A.K&&Q[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=Sr(p(A.Va,A),6e3));ar(A.h)<=1&&A.ta&&(A.ta=void 0)}else Ii(A,11)}else if((h.L||A.g==h)&&Go(A),!x(_))for(Q=A.Ba.g.parse(_),_=0;_<Q.length;_++){let _t=Q[_];const Qt=_t[0];if(!(Qt<=A.K))if(A.K=Qt,_t=_t[1],A.I==2)if(_t[0]=="c"){A.M=_t[1],A.ba=_t[2];const Fr=_t[3];Fr!=null&&(A.ka=Fr,A.j.info("VER="+A.ka));const xi=_t[4];xi!=null&&(A.za=xi,A.j.info("SVER="+A.za));const oi=_t[5];oi!=null&&typeof oi=="number"&&oi>0&&(D=1.5*oi,A.O=D,A.j.info("backChannelRequestTimeoutMs_="+D)),D=A;const li=h.g;if(li){const Qa=li.g?li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qa){var ne=D.h;ne.g||Qa.indexOf("spdy")==-1&&Qa.indexOf("quic")==-1&&Qa.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(wr(ne,ne.h),ne.h=null))}if(D.G){const $o=li.g?li.g.getResponseHeader("X-HTTP-Session-Id"):null;$o&&(D.wa=$o,yt(D.J,D.G,$o))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-h.F,A.j.info("Handshake RTT: "+A.T+"ms")),D=A;var Te=h;if(D.na=Sh(D,D.L?D.ba:null,D.W),Te.L){Ti(D.h,Te);var Xe=Te,on=D.O;on&&(Xe.H=on),Xe.D&&(Vt(Xe),wt(Xe)),D.g=Te}else _h(D);A.i.length>0&&Ri(A)}else _t[0]!="stop"&&_t[0]!="close"||Ii(A,7);else A.I==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?Ii(A,7):Eu(A):_t[0]!="noop"&&A.l&&A.l.qa(_t),A.A=0)}}Wn(4)}catch{}}var jt=class{constructor(h,_){this.g=h,this.map=_}};function sr(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Un(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ar(h){return h.h?1:h.g?h.g.size:0}function zn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function wr(h,_){h.g?h.g.add(_):h.h=_}function Ti(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}sr.prototype.cancel=function(){if(this.i=bi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function bi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const A of h.g.values())_=_.concat(A.G);return _}return w(h.i)}var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zt(h,_){if(h){h=h.split("&");for(let A=0;A<h.length;A++){const D=h[A].indexOf("=");let Q,ne=null;D>=0?(Q=h[A].substring(0,D),ne=h[A].substring(D+1)):Q=h[A],_(Q,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function hn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof hn?(this.l=h.l,Ze(this,h.j),this.o=h.o,this.g=h.g,Cr(this,h.u),this.h=h.h,Ps(this,gh(h.i)),this.m=h.m):h&&(_=String(h).match(rt))?(this.l=!1,Ze(this,_[1]||"",!0),this.o=Si(_[2]||""),this.g=Si(_[3]||"",!0),Cr(this,_[4]),this.h=Si(_[5]||"",!0),Ps(this,_[6]||"",!0),this.m=Si(_[7]||"")):(this.l=!1,this.i=new Vs(null,this.l))}hn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Ha(_,Uo,!0),":");var A=this.g;return(A||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Ha(_,Uo,!0),"@"),h.push(de(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&h.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&h.push("/"),h.push(Ha(A,A.charAt(0)=="/"?mu:dh,!0))),(A=this.i.toString())&&h.push("?",A),(A=this.m)&&h.push("#",Ha(A,mh)),h.join("")},hn.prototype.resolve=function(h){const _=Ct(this);let A=!!h.j;A?Ze(_,h.j):A=!!h.o,A?_.o=h.o:A=!!h.g,A?_.g=h.g:A=h.u!=null;var D=h.h;if(A)Cr(_,h.u);else if(A=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var Q=_.h.lastIndexOf("/");Q!=-1&&(D=_.h.slice(0,Q+1)+D)}if(Q=D,Q==".."||Q==".")D="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){D=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ne=[];for(let Te=0;Te<Q.length;){const Xe=Q[Te++];Xe=="."?D&&Te==Q.length&&ne.push(""):Xe==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),D&&Te==Q.length&&ne.push("")):(ne.push(Xe),D=!0)}D=ne.join("/")}else D=Q}return A?_.h=D:A=h.i.toString()!=="",A?Ps(_,gh(h.i)):A=!!h.m,A&&(_.m=h.m),_};function Ct(h){return new hn(h)}function Ze(h,_,A){h.j=A?Si(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Cr(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Ps(h,_,A){_ instanceof Vs?(h.i=_,Bo(h.i,h.l)):(A||(_=Ha(_,ks)),h.i=new Vs(_,h.l))}function yt(h,_,A){h.i.set(_,A)}function Ba(h){return yt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Si(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ha(h,_,A){return typeof h=="string"?(h=encodeURI(h).replace(_,or),A&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function or(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Uo=/[#\/\?@]/g,dh=/[#\?:]/g,mu=/[#\?]/g,ks=/[#\?@]/g,mh=/#/g;function Vs(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function lr(h){h.g||(h.g=new Map,h.h=0,h.i&&Zt(h.i,function(_,A){h.add(decodeURIComponent(_.replace(/\+/g," ")),A)}))}n=Vs.prototype,n.add=function(h,_){lr(this),this.i=null,h=Ls(this,h);let A=this.g.get(h);return A||this.g.set(h,A=[]),A.push(_),this.h+=1,this};function ph(h,_){lr(h),_=Ls(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function pu(h,_){return lr(h),_=Ls(h,_),h.g.has(_)}n.forEach=function(h,_){lr(this),this.g.forEach(function(A,D){A.forEach(function(Q){h.call(_,Q,D,this)},this)},this)};function gu(h,_){lr(h);let A=[];if(typeof _=="string")pu(h,_)&&(A=A.concat(h.g.get(Ls(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)A=A.concat(h[_]);return A}n.set=function(h,_){return lr(this),this.i=null,h=Ls(this,h),pu(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=gu(this,h),h.length>0?String(h[0]):_):_};function zo(h,_,A){ph(h,_),A.length>0&&(h.i=null,h.g.set(Ls(h,_),w(A)),h.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let D=0;D<_.length;D++){var A=_[D];const Q=de(A);A=gu(this,A);for(let ne=0;ne<A.length;ne++){let Te=Q;A[ne]!==""&&(Te+="="+de(A[ne])),h.push(Te)}}return this.i=h.join("&")};function gh(h){const _=new Vs;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Ls(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Bo(h,_){_&&!h.j&&(lr(h),h.i=null,h.g.forEach(function(A,D){const Q=D.toLowerCase();D!=Q&&(ph(this,D),zo(this,Q,A))},h)),h.j=_}function ii(h,_){const A=new Ar;if(c.Image){const D=new Image;D.onload=y(Br,A,"TestLoadImage: loaded",!0,_,D),D.onerror=y(Br,A,"TestLoadImage: error",!1,_,D),D.onabort=y(Br,A,"TestLoadImage: abort",!1,_,D),D.ontimeout=y(Br,A,"TestLoadImage: timeout",!1,_,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}function yu(h,_){const A=new Ar,D=new AbortController,Q=setTimeout(()=>{D.abort(),Br(A,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:D.signal}).then(ne=>{clearTimeout(Q),ne.ok?Br(A,"TestPingServer: ok",!0,_):Br(A,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Q),Br(A,"TestPingServer: error",!1,_)})}function Br(h,_,A,D,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),D(A)}catch{}}function js(){this.g=new ja}function Ai(h){this.i=h.Sb||null,this.h=h.ab||!1}v(Ai,Lo),Ai.prototype.g=function(){return new Fa(this.i,this.h)};function Fa(h,_){Ot.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Fa,Ot),n=Fa.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,si(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ho(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ho(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Us(this):si(this),this.readyState==3&&Ho(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Us(this))},n.Na=function(h){this.g&&(this.response=h,Us(this))},n.ga=function(){this.g&&Us(this)};function Us(h){h.readyState=4,h.l=null,h.j=null,h.B=null,si(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var A=_.next();!A.done;)A=A.value,h.push(A[0]+": "+A[1]),A=_.next();return h.join(`\r
`)};function si(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Hr(h){let _="";return Pe(h,function(A,D){_+=D,_+=":",_+=A,_+=`\r
`}),_}function qa(h,_,A){e:{for(D in A){var D=!1;break e}D=!0}D||(A=Hr(A),typeof h=="string"?A!=null&&de(A):yt(h,_,A))}function Rt(h){Ot.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Rt,Ot);var wi=/^https?$/i,_u=["POST","PUT"];n=Rt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,A,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():K.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ne){Ga(this,ne);return}if(h=A||"",A=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Q in D)A.set(Q,D[Q]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ne of D.keys())A.set(ne,D.get(ne));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(A.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(_u,_,void 0)>=0)||D||Q||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Te]of A)this.g.setRequestHeader(ne,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ne){Ga(this,ne)}};function Ga(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,vu(h),Ki(h)}function vu(h){h.A||(h.A=!0,Jt(h,"complete"),Jt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Jt(this,"complete"),Jt(this,"abort"),Ki(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),Rt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?$a(this):this.Xa())},n.Xa=function(){$a(this)};function $a(h){if(h.h&&typeof l<"u"){if(h.v&&ai(h)==4)setTimeout(h.Ca.bind(h),0);else if(Jt(h,"readystatechange"),ai(h)==4){h.h=!1;try{const ne=h.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var A;if(!(A=_)){var D;if(D=ne===0){let Te=String(h.D).match(rt)[1]||null;!Te&&c.self&&c.self.location&&(Te=c.self.location.protocol.slice(0,-1)),D=!wi.test(Te?Te.toLowerCase():"")}A=D}if(A)Jt(h,"complete"),Jt(h,"success");else{h.o=6;try{var Q=ai(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",vu(h)}}finally{Ki(h)}}}}function Ki(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const A=h.g;h.g=null,_||Jt(h,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ai(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ai(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Tr(_)}};function xn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(h){const _={};h=(h.g&&ai(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(x(h[D]))continue;var A=ye(h[D]);const Q=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ne=_[Q]||[];_[Q]=ne,ne.push(A)}Oe(_,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(h,_,A){return A&&A.internalChannelParams&&A.internalChannelParams[h]||_}function zs(h){this.za=0,this.i=[],this.j=new Ar,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ci("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ci("baseRetryDelayMs",5e3,h),this.Za=Ci("retryDelaySeedMs",1e4,h),this.Ta=Ci("forwardChannelMaxRetries",2,h),this.va=Ci("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new sr(h&&h.concurrentRequestLimit),this.Ba=new js,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=zs.prototype,n.ka=8,n.I=1,n.connect=function(h,_,A,D){Yt(0),this.W=h,this.H=_||{},A&&D!==void 0&&(this.H.OSID=A,this.H.OAID=D),this.F=this.X,this.J=Sh(this,null,this.W),Ri(this)};function Eu(h){if(Fo(h),h.I==3){var _=h.V++,A=Ct(h.J);if(yt(A,"SID",h.M),yt(A,"RID",_),yt(A,"TYPE","terminate"),Ka(h,A),_=new Ce(h,h.j,_),_.M=2,_.A=Ba(Ct(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!A&&c.Image&&(new Image().src=_.A,A=!0),A||(_.g=Ah(_.j,null),_.g.ea(_.A)),_.F=Date.now(),wt(_)}bh(h)}function Bs(h){h.g&&(bu(h),h.g.cancel(),h.g=null)}function Fo(h){Bs(h),h.v&&(c.clearTimeout(h.v),h.v=null),Go(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ri(h){if(!Un(h.h)&&!h.m){h.m=!0;var _=h.Ea;ee||C(),$||(ee(),$=!0),S.add(_,h),h.D=0}}function qo(h,_){return ar(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Sr(p(h.Ea,h,_),Th(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new Ce(this,this.j,h);let ne=this.o;if(this.U&&(ne?(ne=H(ne),ge(ne,this.U)):ne=this.U),this.u!==null||this.R||(Q.J=ne,ne=null),this.S)e:{for(var _=0,A=0;A<this.i.length;A++){t:{var D=this.i[A];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(_+=D,_>4096){_=A;break e}if(_===4096||A===this.i.length-1){_=A+1;break e}}_=1e3}else _=1e3;_=yh(this,Q,_),A=Ct(this.J),yt(A,"RID",h),yt(A,"CVER",22),this.G&&yt(A,"X-HTTP-Session-Id",this.G),Ka(this,A),ne&&(this.R?_="headers="+de(Hr(ne))+"&"+_:this.u&&qa(A,this.u,ne)),wr(this.h,Q),this.Ra&&yt(A,"TYPE","init"),this.S?(yt(A,"$req",_),yt(A,"SID","null"),Q.U=!0,Ie(Q,A,null)):Ie(Q,A,_),this.I=2}}else this.I==3&&(h?Tu(this,h):this.i.length==0||Un(this.h)||Tu(this))};function Tu(h,_){var A;_?A=_.l:A=h.V++;const D=Ct(h.J);yt(D,"SID",h.M),yt(D,"RID",A),yt(D,"AID",h.K),Ka(h,D),h.u&&h.o&&qa(D,h.u,h.o),A=new Ce(h,h.j,A,h.D+1),h.u===null&&(A.J=h.o),_&&(h.i=_.G.concat(h.i)),_=yh(h,A,1e3),A.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),wr(h.h,A),Ie(A,D,_)}function Ka(h,_){h.H&&Pe(h.H,function(A,D){yt(_,D,A)}),h.l&&Pe({},function(A,D){yt(_,D,A)})}function yh(h,_,A){A=Math.min(h.i.length,A);const D=h.l?p(h.l.Ka,h.l,h):null;e:{var Q=h.i;let Xe=-1;for(;;){const on=["count="+A];Xe==-1?A>0?(Xe=Q[0].g,on.push("ofs="+Xe)):Xe=0:on.push("ofs="+Xe);let _t=!0;for(let Qt=0;Qt<A;Qt++){var ne=Q[Qt].g;const Fr=Q[Qt].map;if(ne-=Xe,ne<0)Xe=Math.max(0,Q[Qt].g-100),_t=!1;else try{ne="req"+ne+"_"||"";try{var Te=Fr instanceof Map?Fr:Object.entries(Fr);for(const[xi,oi]of Te){let li=oi;f(oi)&&(li=An(oi)),on.push(ne+xi+"="+encodeURIComponent(li))}}catch(xi){throw on.push(ne+"type="+encodeURIComponent("_badmap")),xi}}catch{D&&D(Fr)}}if(_t){Te=on.join("&");break e}}Te=void 0}return h=h.i.splice(0,A),_.G=h,Te}function _h(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;ee||C(),$||(ee(),$=!0),S.add(_,h),h.A=0}}function Ya(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Sr(p(h.Da,h),Th(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,vh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Sr(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),Bs(this),vh(this))};function bu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function vh(h){h.g=new Ce(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Ct(h.na);yt(_,"RID","rpc"),yt(_,"SID",h.M),yt(_,"AID",h.K),yt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&yt(_,"TO",h.ia),yt(_,"TYPE","xmlhttp"),Ka(h,_),h.u&&h.o&&qa(_,h.u,h.o),h.O&&(h.g.H=h.O);var A=h.g;h=h.ba,A.M=1,A.A=Ba(Ct(_)),A.u=null,A.R=!0,Be(A,h)}n.Va=function(){this.C!=null&&(this.C=null,Bs(this),Ya(this),Yt(19))};function Go(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Eh(h,_){var A=null;if(h.g==_){Go(h),bu(h),h.g=null;var D=2}else if(zn(h.h,_))A=_.G,Ti(h.h,_),D=1;else return;if(h.I!=0){if(_.o)if(D==1){A=_.u?_.u.length:0,_=Date.now()-_.F;var Q=h.D;D=Ms(),Jt(D,new zr(D,A)),Ri(h)}else _h(h);else if(Q=_.m,Q==3||Q==0&&_.X>0||!(D==1&&qo(h,_)||D==2&&Ya(h)))switch(A&&A.length>0&&(_=h.h,_.i=_.i.concat(A)),Q){case 1:Ii(h,5);break;case 4:Ii(h,10);break;case 3:Ii(h,6);break;default:Ii(h,2)}}}function Th(h,_){let A=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(A*=2),A*_}function Ii(h,_){if(h.j.info("Error code "+_),_==2){var A=p(h.bb,h),D=h.Ua;const Q=!D;D=new hn(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ze(D,"https"),Ba(D),Q?ii(D.toString(),A):yu(D.toString(),A)}else Yt(2);h.I=0,h.l&&h.l.pa(_),bh(h),Fo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function bh(h){if(h.I=0,h.ja=[],h.l){const _=bi(h.h);(_.length!=0||h.i.length!=0)&&(N(h.ja,_),N(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function Sh(h,_,A){var D=A instanceof hn?Ct(A):new hn(A);if(D.g!="")_&&(D.g=_+"."+D.g),Cr(D,D.u);else{var Q=c.location;D=Q.protocol,_=_?_+"."+Q.hostname:Q.hostname,Q=+Q.port;const ne=new hn(null);D&&Ze(ne,D),_&&(ne.g=_),Q&&Cr(ne,Q),A&&(ne.h=A),D=ne}return A=h.G,_=h.wa,A&&_&&yt(D,A,_),yt(D,"VER",h.ka),Ka(h,D),D}function Ah(h,_,A){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new Rt(new Ai({ab:A})):new Rt(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function wh(){}n=wh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Hs(){}Hs.prototype.g=function(h,_){return new Zn(h,_)};function Zn(h,_){Ot.call(this),this.g=new zs(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!x(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Qi(this)}v(Zn,Ot),Zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){Eu(this.g)},Zn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var A={};A.__data__=h,h=A}else this.v&&(A={},A.__data__=An(h),h=A);_.i.push(new jt(_.Ya++,h)),_.I==3&&Ri(_)},Zn.prototype.N=function(){this.g.l=null,delete this.j,Eu(this.g),delete this.g,Zn.Z.N.call(this)};function Ch(h){Mt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const A in _){h=A;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}v(Ch,Mt);function Rh(){Xn.call(this),this.status=1}v(Rh,Xn);function Qi(h){this.g=h}v(Qi,wh),Qi.prototype.ra=function(){Jt(this.g,"a")},Qi.prototype.qa=function(h){Jt(this.g,new Ch(h))},Qi.prototype.pa=function(h){Jt(this.g,new Rh)},Qi.prototype.oa=function(){Jt(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,bw=function(){return new Hs},Tw=function(){return Ms()},Ew=Kt,wy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$i.NO_ERROR=0,$i.TIMEOUT=8,$i.HTTP_ERROR=6,Xf=$i,z.COMPLETE="complete",vw=z,Os.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,pc=Os,Rt.prototype.listenOnce=Rt.prototype.K,Rt.prototype.getLastError=Rt.prototype.Ha,Rt.prototype.getLastErrorCode=Rt.prototype.ya,Rt.prototype.getStatus=Rt.prototype.ca,Rt.prototype.getResponseJson=Rt.prototype.La,Rt.prototype.getResponseText=Rt.prototype.la,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Fa,_w=Rt}).apply(typeof kf<"u"?kf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gn.UNAUTHENTICATED=new Gn(null),Gn.GOOGLE_CREDENTIALS=new Gn("google-credentials-uid"),Gn.FIRST_PARTY=new Gn("first-party-uid"),Gn.MOCK_USER=new Gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su="12.8.0";function jO(n){su=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new c_("@firebase/firestore");function Rl(){return Co.logLevel}function Re(n,...e){if(Co.logLevel<=ut.DEBUG){const t=e.map(d_);Co.debug(`Firestore (${su}): ${n}`,...t)}}function Ss(n,...e){if(Co.logLevel<=ut.ERROR){const t=e.map(d_);Co.error(`Firestore (${su}): ${n}`,...t)}}function $l(n,...e){if(Co.logLevel<=ut.WARN){const t=e.map(d_);Co.warn(`Firestore (${su}): ${n}`,...t)}}function d_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Sw(n,i,t)}function Sw(n,e,t){let i=`FIRESTORE (${su}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ss(i),new Error(i)}function bt(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||Sw(e,a,i)}function Ye(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Ns{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gn.UNAUTHENTICATED)))}shutdown(){}}class zO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class BO{constructor(e){this.t=e,this.currentUser=Gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Es;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Es,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Es)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bt(typeof i.accessToken=="string",31837,{l:i}),new Aw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new Gn(e)}}class HO{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Gn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class FO{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new HO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class O0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){bt(this.o===void 0,3512);const i=l=>{l.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new O0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(bt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new O0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=GO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function ct(n,e){return n<e?-1:n>e?1:0}function Cy(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return Wg(a)===Wg(l)?ct(a,l):Wg(a)?1:-1}return ct(n.length,e.length)}const $O=55296,KO=57343;function Wg(n){const e=n.charCodeAt(0);return e>=$O&&e<=KO}function Kl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="__name__";class Pi{constructor(e,t,i){t===void 0?t=0:t>e.length&&He(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&He(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Pi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Pi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return ct(e.length,t.length)}static compareSegments(e,t){const i=Pi.isNumericId(e),a=Pi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Pi.extractNumericId(e).compare(Pi.extractNumericId(t)):Cy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wa.fromString(e.substring(4,e.length-2))}}class Ut extends Pi{construct(e,t,i){return new Ut(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Ut(t)}static emptyPath(){return new Ut([])}}const YO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ln extends Pi{construct(e,t,i){return new Ln(e,t,i)}static isValidIdentifier(e){return YO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M0}static keyField(){return new Ln([M0])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new we(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new we(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new we(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(i+=f,a++):(l(),a++)}if(l(),c)throw new we(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ln(t)}static emptyPath(){return new Ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Ut.fromString(e))}static fromName(e){return new Le(Ut.fromString(e).popFirst(5))}static empty(){return new Le(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(n,e,t){if(!t)throw new we(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QO(n,e,t,i){if(e===!0&&i===!0)throw new we(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function P0(n){if(!Le.isDocumentKey(n))throw new we(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function k0(n){if(Le.isDocumentKey(n))throw new we(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Cw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":He(12329,{type:typeof n})}function yr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wd(n);throw new we(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Zc(n,e){if(!Cw(n))throw new we(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new we(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=-62135596800,L0=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*L0);return new Gt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<V0)throw new we(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L0}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,Gt._jsonSchema))return new Gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-V0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:vn("string",Gt._jsonSchemaVersion),seconds:vn("number"),nanoseconds:vn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new Gt(0,0))}static max(){return new $e(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function XO(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=$e.fromTimestamp(i===1e9?new Gt(t+1,0):new Gt(t,i));return new Ia(a,Le.empty(),e)}function WO(n){return new Ia(n.readTime,n.key,Pc)}class Ia{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ia($e.min(),Le.empty(),Pc)}static max(){return new Ia($e.max(),Le.empty(),Pc)}}function JO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(n.documentKey,e.documentKey),t!==0?t:ct(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==ZO)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,i)=>{t(e)}))}static reject(e){return new fe(((t,i)=>{i(e)}))}static waitFor(e){return new fe(((t,i)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(m=>i(m)))})),c=!0,l===a&&t()}))}static or(e){let t=fe.resolve(!1);for(const i of e)t=t.next((a=>a?fe.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new fe(((i,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((y=>{c[p]=y,++f,f===l&&i(c)}),(y=>a(y)))}}))}static doWhile(e,t){return new fe(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function tM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ou(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Jd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=-1;function Zd(n){return n==null}function vd(n){return n===0&&1/n==-1/0}function nM(n){return typeof n=="number"&&Number.isInteger(n)&&!vd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="";function rM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=j0(e)),e=iM(n.get(t),e);return j0(e)}function iM(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Rw:t+="";break;default:t+=l}}return t}function j0(n){return n+Rw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Iw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t){this.comparator=e,this.root=t||Vn.EMPTY}insert(e,t){return new nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vf(this.root,e,this.comparator,!0)}}class Vf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Vn.RED,this.left=a??Vn.EMPTY,this.right=l??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Vn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Vn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new z0(this.data.getIterator())}getIteratorFrom(e){return new z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bn(this.comparator);return t.data=e,t}}class z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.fields=e,e.sort(Ln.comparator)}static empty(){return new kr([])}unionWith(e){let t=new bn(Ln.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new kr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new xw("Invalid base64 string: "+l):l}})(e);return new jn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new jn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jn.EMPTY_BYTE_STRING=new jn("");const sM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xa(n){if(bt(!!n,39018),typeof n=="string"){let e=0;const t=sM.exec(n);if(bt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:cn(n.seconds),nanos:cn(n.nanos)}}function cn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Na(n){return typeof n=="string"?jn.fromBase64String(n):jn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="server_timestamp",Dw="__type__",Ow="__previous_value__",Mw="__local_write_time__";function g_(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Dw])==null?void 0:i.stringValue)===Nw}function em(n){const e=n.mapValue.fields[Ow];return g_(e)?em(e):e}function kc(n){const e=xa(n.mapValue.fields[Mw].timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,t,i,a,l,c,f,m,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y,this.apiKey=v}}const Ed="(default)";class Vc{constructor(e,t){this.projectId=e,this.database=t||Ed}static empty(){return new Vc("","")}get isDefaultDatabase(){return this.database===Ed}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}function oM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new we(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="__type__",lM="__max__",Lf={mapValue:{}},kw="__vector__",Td="value";function Da(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?g_(n)?4:cM(n)?9007199254740991:uM(n)?10:11:He(28295,{value:n})}function Bi(n,e){if(n===e)return!0;const t=Da(n);if(t!==Da(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return kc(n).isEqual(kc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=xa(a.timestampValue),f=xa(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Na(a.bytesValue).isEqual(Na(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return cn(a.geoPointValue.latitude)===cn(l.geoPointValue.latitude)&&cn(a.geoPointValue.longitude)===cn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return cn(a.integerValue)===cn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=cn(a.doubleValue),f=cn(l.doubleValue);return c===f?vd(c)===vd(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return Kl(n.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(U0(c)!==U0(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Bi(c[m],f[m])))return!1;return!0})(n,e);default:return He(52216,{left:n})}}function Lc(n,e){return(n.values||[]).find((t=>Bi(t,e)))!==void 0}function Yl(n,e){if(n===e)return 0;const t=Da(n),i=Da(e);if(t!==i)return ct(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ct(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=cn(l.integerValue||l.doubleValue),m=cn(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return B0(n.timestampValue,e.timestampValue);case 4:return B0(kc(n),kc(e));case 5:return Cy(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=Na(l),m=Na(c);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let p=0;p<f.length&&p<m.length;p++){const y=ct(f[p],m[p]);if(y!==0)return y}return ct(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=ct(cn(l.latitude),cn(c.latitude));return f!==0?f:ct(cn(l.longitude),cn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return H0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var T,w,N,V;const f=l.fields||{},m=c.fields||{},p=(T=f[Td])==null?void 0:T.arrayValue,y=(w=m[Td])==null?void 0:w.arrayValue,v=ct(((N=p==null?void 0:p.values)==null?void 0:N.length)||0,((V=y==null?void 0:y.values)==null?void 0:V.length)||0);return v!==0?v:H0(p,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Lf.mapValue&&c===Lf.mapValue)return 0;if(l===Lf.mapValue)return 1;if(c===Lf.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),p=c.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const T=Cy(m[v],y[v]);if(T!==0)return T;const w=Yl(f[m[v]],p[y[v]]);if(w!==0)return w}return ct(m.length,y.length)})(n.mapValue,e.mapValue);default:throw He(23264,{he:t})}}function B0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ct(n,e);const t=xa(n),i=xa(e),a=ct(t.seconds,i.seconds);return a!==0?a:ct(t.nanos,i.nanos)}function H0(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Yl(t[a],i[a]);if(l)return l}return ct(t.length,i.length)}function Ql(n){return Ry(n)}function Ry(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=xa(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Na(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Ry(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Ry(t.fields[c])}`;return a+"}"})(n.mapValue):He(61005,{value:n})}function Wf(n){switch(Da(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=em(n);return e?16+Wf(e):16;case 5:return 2*n.stringValue.length;case 6:return Na(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Wf(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return Pa(i.fields,((l,c)=>{a+=l.length+Wf(c)})),a})(n.mapValue);default:throw He(13486,{value:n})}}function F0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Iy(n){return!!n&&"integerValue"in n}function y_(n){return!!n&&"arrayValue"in n}function q0(n){return!!n&&"nullValue"in n}function G0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jf(n){return!!n&&"mapValue"in n}function uM(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Pw])==null?void 0:i.stringValue)===kw}function bc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Pa(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=bc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bc(n.arrayValue.values[t]);return e}return{...n}}function cM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.value=e}static empty(){return new gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bc(t)}setAll(e){let t=Ln.emptyPath(),i={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=f.popLast()}c?i[f.lastSegment()]=bc(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Jf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Pa(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new gr(bc(this.value))}}function Vw(n){const e=[];return Pa(n.fields,((t,i)=>{const a=new Ln([t]);if(Jf(i)){const l=Vw(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,t,i,a,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new $n(e,0,$e.min(),$e.min(),$e.min(),gr.empty(),0)}static newFoundDocument(e,t,i,a){return new $n(e,1,t,$e.min(),i,a,0)}static newNoDocument(e,t){return new $n(e,2,t,$e.min(),$e.min(),gr.empty(),0)}static newUnknownDocument(e,t){return new $n(e,3,t,$e.min(),$e.min(),gr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,t){this.position=e,this.inclusive=t}}function $0(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=Le.comparator(Le.fromName(c.referenceValue),t.key):i=Yl(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function K0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t="asc"){this.field=e,this.dir=t}}function hM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{}class _n extends Lw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new dM(e,t,i):t==="array-contains"?new gM(e,i):t==="in"?new yM(e,i):t==="not-in"?new _M(e,i):t==="array-contains-any"?new vM(e,i):new _n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new mM(e,i):new pM(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Yl(t,this.value)):t!==null&&Da(this.value)===Da(t)&&this.matchesComparison(Yl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends Lw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new yi(e,t)}matches(e){return jw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jw(n){return n.op==="and"}function Uw(n){return fM(n)&&jw(n)}function fM(n){for(const e of n.filters)if(e instanceof yi)return!1;return!0}function xy(n){if(n instanceof _n)return n.field.canonicalString()+n.op.toString()+Ql(n.value);if(Uw(n))return n.filters.map((e=>xy(e))).join(",");{const e=n.filters.map((t=>xy(t))).join(",");return`${n.op}(${e})`}}function zw(n,e){return n instanceof _n?(function(i,a){return a instanceof _n&&i.op===a.op&&i.field.isEqual(a.field)&&Bi(i.value,a.value)})(n,e):n instanceof yi?(function(i,a){return a instanceof yi&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,f)=>l&&zw(c,a.filters[f])),!0):!1})(n,e):void He(19439)}function Bw(n){return n instanceof _n?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ql(t.value)}`})(n):n instanceof yi?(function(t){return t.op.toString()+" {"+t.getFilters().map(Bw).join(" ,")+"}"})(n):"Filter"}class dM extends _n{constructor(e,t,i){super(e,t,i),this.key=Le.fromName(i.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class mM extends _n{constructor(e,t){super(e,"in",t),this.keys=Hw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class pM extends _n{constructor(e,t){super(e,"not-in",t),this.keys=Hw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Hw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Le.fromName(i.referenceValue)))}class gM extends _n{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return y_(t)&&Lc(t.arrayValue,this.value)}}class yM extends _n{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Lc(this.value.arrayValue,t)}}class _M extends _n{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lc(this.value.arrayValue,t)}}class vM extends _n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!y_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Lc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,t=null,i=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Y0(n,e=null,t=[],i=[],a=null,l=null,c=null){return new EM(n,e,t,i,a,l,c)}function __(n){const e=Ye(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>xy(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Zd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ql(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ql(i))).join(",")),e.Te=t}return e.Te}function v_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!K0(n.startAt,e.startAt)&&K0(n.endAt,e.endAt)}function Ny(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t=null,i=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function TM(n,e,t,i,a,l,c,f){return new eh(n,e,t,i,a,l,c,f)}function tm(n){return new eh(n)}function Q0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bM(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Fw(n){return n.collectionGroup!==null}function Sc(n){const e=Ye(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new bn(Ln.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Sd(l,i))})),t.has(Ln.keyField().canonicalString())||e.Ie.push(new Sd(Ln.keyField(),i))}return e.Ie}function Vi(n){const e=Ye(n);return e.Ee||(e.Ee=SM(e,Sc(n))),e.Ee}function SM(n,e){if(n.limitType==="F")return Y0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Sd(a.field,l)}));const t=n.endAt?new bd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new bd(n.startAt.position,n.startAt.inclusive):null;return Y0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Dy(n,e){const t=n.filters.concat([e]);return new eh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Oy(n,e,t){return new eh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nm(n,e){return v_(Vi(n),Vi(e))&&n.limitType===e.limitType}function qw(n){return`${__(Vi(n))}|lt:${n.limitType}`}function Il(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>Bw(a))).join(", ")}]`),Zd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Ql(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Ql(a))).join(",")),`Target(${i})`})(Vi(n))}; limitType=${n.limitType})`}function rm(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Le.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of Sc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(c,f,m){const p=$0(c,f,m);return c.inclusive?p<=0:p<0})(i.startAt,Sc(i),a)||i.endAt&&!(function(c,f,m){const p=$0(c,f,m);return c.inclusive?p>=0:p>0})(i.endAt,Sc(i),a))})(n,e)}function AM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Gw(n){return(e,t)=>{let i=!1;for(const a of Sc(n)){const l=wM(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function wM(n,e,t){const i=n.field.isKeyField()?Le.comparator(e.key,t.key):(function(l,c,f){const m=c.data.field(l),p=f.data.field(l);return m!==null&&p!==null?Yl(m,p):He(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return He(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return Iw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=new nn(Le.comparator);function As(){return CM}const $w=new nn(Le.comparator);function gc(...n){let e=$w;for(const t of n)e=e.insert(t.key,t);return e}function Kw(n){let e=$w;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function yo(){return Ac()}function Yw(){return Ac()}function Ac(){return new Po((n=>n.toString()),((n,e)=>n.isEqual(e)))}const RM=new nn(Le.comparator),IM=new bn(Le.comparator);function ht(...n){let e=IM;for(const t of n)e=e.add(t);return e}const xM=new bn(ct);function NM(){return xM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vd(e)?"-0":e}}function Qw(n){return{integerValue:""+n}}function DM(n,e){return nM(e)?Qw(e):E_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this._=void 0}}function OM(n,e,t){return n instanceof jc?(function(a,l){const c={fields:{[Dw]:{stringValue:Nw},[Mw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&g_(l)&&(l=em(l)),l&&(c.fields[Ow]=l),{mapValue:c}})(t,e):n instanceof Uc?Ww(n,e):n instanceof zc?Jw(n,e):(function(a,l){const c=Xw(a,l),f=X0(c)+X0(a.Ae);return Iy(c)&&Iy(a.Ae)?Qw(f):E_(a.serializer,f)})(n,e)}function MM(n,e,t){return n instanceof Uc?Ww(n,e):n instanceof zc?Jw(n,e):t}function Xw(n,e){return n instanceof Ad?(function(i){return Iy(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class jc extends im{}class Uc extends im{constructor(e){super(),this.elements=e}}function Ww(n,e){const t=Zw(e);for(const i of n.elements)t.some((a=>Bi(a,i)))||t.push(i);return{arrayValue:{values:t}}}class zc extends im{constructor(e){super(),this.elements=e}}function Jw(n,e){let t=Zw(e);for(const i of n.elements)t=t.filter((a=>!Bi(a,i)));return{arrayValue:{values:t}}}class Ad extends im{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function X0(n){return cn(n.integerValue||n.doubleValue)}function Zw(n){return y_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,t){this.field=e,this.transform=t}}function kM(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof Uc&&a instanceof Uc||i instanceof zc&&a instanceof zc?Kl(i.elements,a.elements,Bi):i instanceof Ad&&a instanceof Ad?Bi(i.Ae,a.Ae):i instanceof jc&&a instanceof jc})(n.transform,e.transform)}class VM{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class sm{}function e1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new am(n.key,_r.none()):new th(n.key,n.data,_r.none());{const t=n.data,i=gr.empty();let a=new bn(Ln.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new ka(n.key,i,new kr(a.toArray()),_r.none())}}function LM(n,e,t){n instanceof th?(function(a,l,c){const f=a.value.clone(),m=J0(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof ka?(function(a,l,c){if(!Zf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=J0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(t1(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function wc(n,e,t,i){return n instanceof th?(function(l,c,f,m){if(!Zf(l.precondition,c))return f;const p=l.value.clone(),y=Z0(l.fieldTransforms,m,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof ka?(function(l,c,f,m){if(!Zf(l.precondition,c))return f;const p=Z0(l.fieldTransforms,m,c),y=c.data;return y.setAll(t1(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(l,c,f){return Zf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function jM(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=Xw(i.transform,a||null);l!=null&&(t===null&&(t=gr.empty()),t.set(i.field,l))}return t||null}function W0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Kl(i,a,((l,c)=>kM(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class th extends sm{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ka extends sm{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function t1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function J0(n,e,t){const i=new Map;bt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,f=e.data.field(l.field);i.set(l.field,MM(c,f,t[a]))}return i}function Z0(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,OM(l,c,e))}return i}class am extends sm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UM extends sm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&LM(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=wc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=wc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Yw();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=e1(c,f);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument($e.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ht())}isEqual(e){return this.batchId===e.batchId&&Kl(this.mutations,e.mutations,((t,i)=>W0(t,i)))&&Kl(this.baseMutations,e.baseMutations,((t,i)=>W0(t,i)))}}class T_{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){bt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return RM})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new T_(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,dt;function FM(n){switch(n){case oe.OK:return He(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return He(15467,{code:n})}}function n1(n){if(n===void 0)return Ss("GRPC error has no .code"),oe.UNKNOWN;switch(n){case gn.OK:return oe.OK;case gn.CANCELLED:return oe.CANCELLED;case gn.UNKNOWN:return oe.UNKNOWN;case gn.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case gn.INTERNAL:return oe.INTERNAL;case gn.UNAVAILABLE:return oe.UNAVAILABLE;case gn.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case gn.NOT_FOUND:return oe.NOT_FOUND;case gn.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case gn.ABORTED:return oe.ABORTED;case gn.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case gn.DATA_LOSS:return oe.DATA_LOSS;default:return He(39323,{code:n})}}(dt=gn||(gn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=new wa([4294967295,4294967295],0);function eS(n){const e=qM().encode(n),t=new yw;return t.update(e),new Uint8Array(t.digest())}function tS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new wa([t,i],0),new wa([a,l],0)]}class b_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new yc(`Invalid padding: ${t}`);if(i<0)throw new yc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new yc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new yc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wa.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(wa.fromNumber(i)));return a.compare(GM)===1&&(a=new wa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=eS(e),[i,a]=tS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new b_(l,a,t);return i.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=eS(e),[i,a]=tS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,nh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new om($e.min(),a,new nn(ct),As(),ht())}}class nh{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new nh(i,t,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class r1{constructor(e,t){this.targetId=e,this.Ce=t}}class i1{constructor(e,t,i=jn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class nS{constructor(){this.ve=0,this.Fe=rS(),this.Me=jn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ht(),t=ht(),i=ht();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:He(38017,{changeType:l})}})),new nh(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=rS()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class $M{constructor(e){this.Ge=e,this.ze=new Map,this.je=As(),this.He=jf(),this.Je=jf(),this.Ze=new nn(ct)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:He(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Ny(l))if(i===0){const c=new Le(l.path);this.et(t,c,$n.newNoDocument(c,$e.min()))}else bt(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=Na(i).toUint8Array()}catch(m){if(m instanceof xw)return $l("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new b_(c,a,l)}catch(m){return $l(m instanceof yc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Ny(f.target)){const m=new Le(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,$n.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let i=ht();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new om(e,t,this.Ze,this.je,i);return this.je=As(),this.He=jf(),this.Je=jf(),this.Ze=new nn(ct),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new nS,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new bn(ct),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new bn(ct),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function jf(){return new nn(Le.comparator)}function rS(){return new nn(Le.comparator)}const KM={asc:"ASCENDING",desc:"DESCENDING"},YM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QM={and:"AND",or:"OR"};class XM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function My(n,e){return n.useProto3Json||Zd(e)?e:{value:e}}function wd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function s1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function WM(n,e){return wd(n,e.toTimestamp())}function Li(n){return bt(!!n,49232),$e.fromTimestamp((function(t){const i=xa(t);return new Gt(i.seconds,i.nanos)})(n))}function S_(n,e){return Py(n,e).canonicalString()}function Py(n,e){const t=(function(a){return new Ut(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function a1(n){const e=Ut.fromString(n);return bt(h1(e),10190,{key:e.toString()}),e}function ky(n,e){return S_(n.databaseId,e.path)}function Jg(n,e){const t=a1(e);if(t.get(1)!==n.databaseId.projectId)throw new we(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le(l1(t))}function o1(n,e){return S_(n.databaseId,e)}function JM(n){const e=a1(n);return e.length===4?Ut.emptyPath():l1(e)}function Vy(n){return new Ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function l1(n){return bt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function iS(n,e,t){return{name:ky(n,e),fields:t.value.mapValue.fields}}function ZM(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:He(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(bt(y===void 0||typeof y=="string",58123),jn.fromBase64String(y||"")):(bt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),jn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(p){const y=p.code===void 0?oe.UNKNOWN:n1(p.code);return new we(y,p.message||"")})(c);t=new i1(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Jg(n,i.document.name),l=Li(i.document.updateTime),c=i.document.createTime?Li(i.document.createTime):$e.min(),f=new gr({mapValue:{fields:i.document.fields}}),m=$n.newFoundDocument(a,l,c,f),p=i.targetIds||[],y=i.removedTargetIds||[];t=new ed(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Jg(n,i.document),l=i.readTime?Li(i.readTime):$e.min(),c=$n.newNoDocument(a,l),f=i.removedTargetIds||[];t=new ed([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Jg(n,i.document),l=i.removedTargetIds||[];t=new ed([],l,a,null)}else{if(!("filter"in e))return He(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new HM(a,l),f=i.targetId;t=new r1(f,c)}}return t}function eP(n,e){let t;if(e instanceof th)t={update:iS(n,e.key,e.value)};else if(e instanceof am)t={delete:ky(n,e.key)};else if(e instanceof ka)t={update:iS(n,e.key,e.data),updateMask:uP(e.fieldMask)};else{if(!(e instanceof UM))return He(16599,{dt:e.type});t={verify:ky(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const f=c.transform;if(f instanceof jc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Uc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof zc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ad)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw He(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:WM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:He(27497)})(n,e.precondition)),t}function tP(n,e){return n&&n.length>0?(bt(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Li(a.updateTime):Li(l);return c.isEqual($e.min())&&(c=Li(l)),new VM(c,a.transformResults||[])})(t,e)))):[]}function nP(n,e){return{documents:[o1(n,e.path)]}}function rP(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=o1(n,a);const l=(function(p){if(p.length!==0)return c1(yi.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((y=>(function(T){return{field:xl(T.field),direction:aP(T.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=My(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function iP(n){let e=JM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){bt(i===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(v){const T=u1(v);return T instanceof yi&&Uw(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((T=>(function(N){return new Sd(Nl(N.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(T)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let T;return T=typeof v=="object"?v.value:v,Zd(T)?null:T})(t.limit));let m=null;t.startAt&&(m=(function(v){const T=!!v.before,w=v.values||[];return new bd(w,T)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const T=!v.before,w=v.values||[];return new bd(w,T)})(t.endAt)),TM(e,a,c,l,f,"F",m,p)}function sP(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function u1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Nl(t.unaryFilter.field);return _n.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Nl(t.unaryFilter.field);return _n.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Nl(t.unaryFilter.field);return _n.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Nl(t.unaryFilter.field);return _n.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}})(n):n.fieldFilter!==void 0?(function(t){return _n.create(Nl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return yi.create(t.compositeFilter.filters.map((i=>u1(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return He(1026)}})(t.compositeFilter.op))})(n):He(30097,{filter:n})}function aP(n){return KM[n]}function oP(n){return YM[n]}function lP(n){return QM[n]}function xl(n){return{fieldPath:n.canonicalString()}}function Nl(n){return Ln.fromServerFormat(n.fieldPath)}function c1(n){return n instanceof _n?(function(t){if(t.op==="=="){if(G0(t.value))return{unaryFilter:{field:xl(t.field),op:"IS_NAN"}};if(q0(t.value))return{unaryFilter:{field:xl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(G0(t.value))return{unaryFilter:{field:xl(t.field),op:"IS_NOT_NAN"}};if(q0(t.value))return{unaryFilter:{field:xl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xl(t.field),op:oP(t.op),value:t.value}}})(n):n instanceof yi?(function(t){const i=t.getFilters().map((a=>c1(a)));return i.length===1?i[0]:{compositeFilter:{op:lP(t.op),filters:i}}})(n):He(54877,{filter:n})}function uP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function h1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function f1(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t,i,a,l=$e.min(),c=$e.min(),f=jn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Ea(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.yt=e}}function hP(n){const e=iP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Oy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this.Sn=new dP}addToCollectionParentIndex(e,t){return this.Sn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Ia.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Ia.min())}updateCollectionGroup(e,t,i){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class dP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new bn(Ut.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new bn(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},d1=41943040;class pr{static withCacheSize(e){return new pr(e,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr.DEFAULT_COLLECTION_PERCENTILE=10,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pr.DEFAULT=new pr(d1,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pr.DISABLED=new pr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Xl(0)}static ar(){return new Xl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="LruGarbageCollector",mP=1048576;function oS([n,e],[t,i]){const a=ct(n,t);return a===0?ct(e,i):a}class pP{constructor(e){this.Pr=e,this.buffer=new bn(oS),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();oS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Re(aS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ou(t)?Re(aS,"Ignoring IndexedDB error during garbage collection: ",t):await au(t)}await this.Ar(3e5)}))}}class yP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(Jd.ce);const i=new pP(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(sS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sS):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,c,f,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(i=v,f=Date.now(),this.removeTargets(e,i,t)))).next((v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(p=Date.now(),Rl()<=ut.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${v} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function _P(n,e){return new yP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this.changes=new Po((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?fe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&wc(i.mutation,a,kr.empty(),Gt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ht()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ht()){const a=yo();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=gc();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=yo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ht())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,i,a){let l=As();const c=Ac(),f=(function(){return Ac()})();return t.forEach(((m,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof ka)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),wc(y.mutation,p,y.mutation.getFieldMask(),Gt.now())):c.set(p.key,kr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,y)=>c.set(p,y))),t.forEach(((p,y)=>f.set(p,new EP(y,c.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Ac();let a=new nn(((c,f)=>c-f)),l=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let y=i.get(m)||kr.empty();y=f.applyToLocalView(p,y),i.set(m,y);const v=(a.get(f.batchId)||ht()).add(m);a=a.insert(f.batchId,v)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,y=m.value,v=Yw();y.forEach((T=>{if(!l.has(T)){const w=e1(t.get(T),i.get(T));w!==null&&v.set(T,w),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return fe.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return bM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):fe.resolve(yo());let f=Pc,m=l;return c.next((p=>fe.forEach(p,((y,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),l.get(y)?fe.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{m=m.insert(y,T)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,ht()))).next((y=>({batchId:f,changes:Kw(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((i=>{let a=gc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=gc();return this.indexManager.getCollectionParents(e,l).next((f=>fe.forEach(f,(m=>{const p=(function(v,T){return new eh(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((y=>{y.forEach(((v,T)=>{c=c.insert(v,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((m,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,$n.newInvalidDocument(y)))}));let f=gc();return c.forEach(((m,p)=>{const y=l.get(m);y!==void 0&&wc(y.mutation,p,kr.empty(),Gt.now()),rm(t,p)&&(f=f.insert(m,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return fe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Li(a.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:hP(a.bundledQuery),readTime:Li(a.readTime)}})(t)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.overlays=new nn(Le.comparator),this.Lr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=yo();return fe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),fe.resolve()}getOverlaysForCollection(e,t,i){const a=yo(),l=t.length+1,c=new Le(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return fe.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new nn(((p,y)=>p-y));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=yo(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const f=yo(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,y)=>f.set(p,y))),!(f.size()>=a)););return fe.resolve(f)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new BM(t,i));let l=this.Lr.get(t);l===void 0&&(l=ht(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(){this.sessionToken=jn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.kr=new bn(Rn.Kr),this.qr=new bn(Rn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Rn(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Rn(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Le(new Ut([])),i=new Rn(t,e),a=new Rn(t,e+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Le(new Ut([])),i=new Rn(t,e),a=new Rn(t,e+1);let l=ht();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Rn(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Rn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Le.comparator(e.key,t.key)||ct(e.Hr,t.Hr)}static Ur(e,t){return ct(e.Hr,t.Hr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new bn(Rn.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new zM(l,t,i,a);this.mutationQueue.push(c);for(const f of a)this.Jr=this.Jr.add(new Rn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?p_:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Rn(t,0),a=new Rn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const f=this.Zr(c.Hr);l.push(f)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new bn(ct);return t.forEach((a=>{const l=new Rn(a,0),c=new Rn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{i=i.add(f.Hr)}))})),fe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Le.isDocumentKey(l)||(l=l.child(""));const c=new Rn(new Le(l),0);let f=new bn(ct);return this.Jr.forEachWhile((m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(f=f.add(m.Hr)),!0)}),c),fe.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){bt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return fe.forEach(t.mutations,(a=>{const l=new Rn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Rn(t,0),a=this.Jr.firstAfterOrEqual(i);return fe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.ti=e,this.docs=(function(){return new nn(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return fe.resolve(i?i.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let i=As();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():$n.newInvalidDocument(a))})),fe.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=As();const c=t.path,f=new Le(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||JO(WO(y),i)<=0||(a.has(y.key)||rm(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,i,a){He(9500)}ni(e,t){return fe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new RP(this)}getSize(e){return fe.resolve(this.size)}}class RP extends vP{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),fe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.persistence=e,this.ri=new Po((t=>__(t)),v_),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.ii=0,this.si=new A_,this.targetCount=0,this.oi=Xl._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),fe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Xl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.lr(t),fe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),fe.waitFor(l).next((()=>a))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return fe.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),fe.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return fe.resolve(i)}containsKey(e,t){return fe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t){this._i={},this.overlays={},this.ai=new Jd(0),this.ui=!1,this.ui=!0,this.ci=new AP,this.referenceDelegate=e(this),this.li=new IP(this),this.indexManager=new fP,this.remoteDocumentCache=(function(a){return new CP(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new cP(t),this.Pi=new bP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new wP(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Re("MemoryPersistence","Starting transaction:",e);const a=new xP(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return fe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class xP extends eM{constructor(e){super(),this.currentSequenceNumber=e}}class w_{constructor(e){this.persistence=e,this.Ri=new A_,this.Ai=null}static Vi(e){return new w_(e)}get di(){if(this.Ai)return this.Ai;throw He(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),fe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(i=>{const a=Le.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,$e.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Cd{constructor(e,t){this.persistence=e,this.fi=new Po((i=>rM(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=_P(this,t)}static Vi(e,t){return new Cd(e,t)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return fe.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?fe.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(i++,l.removeEntry(c,$e.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wf(e.data.value)),t}wr(e,t,i){return fe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return fe.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=ht(),a=ht();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new C_(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return E2()?8:tM(Yn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new NP;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(Rl()<=ut.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Il(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(Rl()<=ut.DEBUG&&Re("QueryEngine","Query:",Il(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(Rl()<=ut.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Il(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(t))):fe.resolve())}gs(e,t){if(Q0(t))return fe.resolve(null);let i=Vi(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Oy(t,null,"F"),i=Vi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=ht(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const p=this.bs(t,f);return this.Ss(t,p,c,m.readTime)?this.gs(e,Oy(t,null,"F")):this.Ds(e,p,t,m)}))))})))))}ps(e,t,i,a){return Q0(t)||a.isEqual($e.min())?fe.resolve(null):this.fs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,i,a)?fe.resolve(null):(Rl()<=ut.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Il(t)),this.Ds(e,c,t,XO(a,Pc)).next((f=>f)))}))}bs(e,t){let i=new bn(Gw(e));return t.forEach(((a,l)=>{rm(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return Rl()<=ut.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Il(t)),this.fs.getDocumentsMatchingQuery(e,t,Ia.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="LocalStore",OP=3e8;class MP{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new nn(ct),this.Fs=new Po((l=>__(l)),v_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function PP(n,e,t,i){return new MP(n,e,t,i)}async function p1(n,e){const t=Ye(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],f=[];let m=ht();for(const p of a){c.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){f.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next((p=>({Ns:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function kP(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,p,y){const v=p.batch,T=v.keys();let w=fe.resolve();return T.forEach((N=>{w=w.next((()=>y.getEntry(m,N))).next((V=>{const M=p.docVersions.get(N);bt(M!==null,48541),V.version.compareTo(M)<0&&(v.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),y.addEntry(V)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(m,v)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=ht();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function g1(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function VP(n,e){const t=Ye(n),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((y,v)=>{const T=a.get(v);if(!T)return;f.push(t.li.removeMatchingKeys(l,y.removedDocuments,v).next((()=>t.li.addMatchingKeys(l,y.addedDocuments,v))));let w=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?w=w.withResumeToken(jn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,i)),a=a.insert(v,w),(function(V,M,L){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=OP?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(T,w,y)&&f.push(t.li.updateTargetData(l,w))}));let m=As(),p=ht();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(LP(l,c,e.documentUpdates).next((y=>{m=y.Bs,p=y.Ls}))),!i.isEqual($e.min())){const y=t.li.getLastRemoteSnapshotVersion(l).next((v=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(y)}return fe.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.vs=a,l)))}function LP(n,e,t){let i=ht(),a=ht();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=As();return t.forEach(((f,m)=>{const p=l.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual($e.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):Re(R_,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)})),{Bs:c,Ls:a}}))}function jP(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=p_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function UP(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,fe.resolve(a)):t.li.allocateTargetId(i).next((c=>(a=new Ea(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Ly(n,e,t){const i=Ye(n),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!ou(c))throw c;Re(R_,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function lS(n,e,t){const i=Ye(n);let a=$e.min(),l=ht();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,p,y){const v=Ye(m),T=v.Fs.get(y);return T!==void 0?fe.resolve(v.vs.get(T)):v.li.getTargetData(p,y)})(i,c,Vi(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:$e.min(),t?l:ht()))).next((f=>(zP(i,AM(e),f),{documents:f,ks:l})))))}function zP(n,e,t){let i=n.Ms.get(e)||$e.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Ms.set(e,i)}class uS{constructor(){this.activeTargetIds=NM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BP{constructor(){this.vo=new uS,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new uS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="ConnectivityMonitor";class hS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Re(cS,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Re(cS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf=null;function jy(){return Uf===null?Uf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uf++,"0x"+Uf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="RestConnection",FP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class qP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===Ed?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=jy(),f=this.Qo(e,t.toUriEncodedString());Re(Zg,`Sending RPC '${e}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,a,l);const{host:p}=new URL(f),y=ru(p);return this.zo(e,f,m,i,y).then((v=>(Re(Zg,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw $l(Zg,`RPC '${e}' ${c} failed with error: `,v,"url: ",f,"request:",i),v}))}jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+su})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=FP[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="WebChannelConnection",cc=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Ll extends qP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ll.c_){const e=Tw();cc(e,Ew.STAT_EVENT,(t=>{t.stat===wy.PROXY?Re(Hn,"STAT_EVENT: detected buffering proxy"):t.stat===wy.NOPROXY&&Re(Hn,"STAT_EVENT: detected no buffering proxy")})),Ll.c_=!0}}zo(e,t,i,a,l){const c=jy();return new Promise(((f,m)=>{const p=new _w;p.setWithCredentials(!0),p.listenOnce(vw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Xf.NO_ERROR:const v=p.getResponseJson();Re(Hn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),f(v);break;case Xf.TIMEOUT:Re(Hn,`RPC '${e}' ${c} timed out`),m(new we(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Xf.HTTP_ERROR:const T=p.getStatus();if(Re(Hn,`RPC '${e}' ${c} failed with status:`,T,"response text:",p.getResponseText()),T>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const N=w==null?void 0:w.error;if(N&&N.status&&N.message){const V=(function(L){const U=L.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(U)>=0?U:oe.UNKNOWN})(N.status);m(new we(V,N.message))}else m(new we(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new we(oe.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Re(Hn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);Re(Hn,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",y,i,15)}))}T_(e,t,i){const a=jy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const p=l.join("");Re(Hn,`Creating RPC '${e}' stream ${a}: ${p}`,f);const y=c.createWebChannel(p,f);this.I_(y);let v=!1,T=!1;const w=new GP({Ho:N=>{T?Re(Hn,`Not sending because RPC '${e}' stream ${a} is closed:`,N):(v||(Re(Hn,`Opening RPC '${e}' stream ${a} transport.`),y.open(),v=!0),Re(Hn,`RPC '${e}' stream ${a} sending:`,N),y.send(N))},Jo:()=>y.close()});return cc(y,pc.EventType.OPEN,(()=>{T||(Re(Hn,`RPC '${e}' stream ${a} transport opened.`),w.i_())})),cc(y,pc.EventType.CLOSE,(()=>{T||(T=!0,Re(Hn,`RPC '${e}' stream ${a} transport closed`),w.o_(),this.E_(y))})),cc(y,pc.EventType.ERROR,(N=>{T||(T=!0,$l(Hn,`RPC '${e}' stream ${a} transport errored. Name:`,N.name,"Message:",N.message),w.o_(new we(oe.UNAVAILABLE,"The operation could not be completed")))})),cc(y,pc.EventType.MESSAGE,(N=>{var V;if(!T){const M=N.data[0];bt(!!M,16349);const L=M,U=(L==null?void 0:L.error)||((V=L[0])==null?void 0:V.error);if(U){Re(Hn,`RPC '${e}' stream ${a} received error:`,U);const q=U.status;let te=(function(S){const C=gn[S];if(C!==void 0)return n1(C)})(q),ee=U.message;te===void 0&&(te=oe.INTERNAL,ee="Unknown error status: "+q+" with message "+U.message),T=!0,w.o_(new we(te,ee)),y.close()}else Re(Hn,`RPC '${e}' stream ${a} received:`,M),w.__(M)}})),Ll.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return bw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(n){return new Ll(n)}function ey(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(n){return new XM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ll.c_=!1;class y1{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&Re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="PersistentStream";class _1{constructor(e,t,i,a,l,c,f,m){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new y1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Ss(t.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new we(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(fS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Re(fS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KP extends _1{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ZM(this.serializer,e),i=(function(l){if(!("targetChange"in l))return $e.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?$e.min():c.readTime?Li(c.readTime):$e.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Vy(this.serializer),t.addTarget=(function(l,c){let f;const m=c.target;if(f=Ny(m)?{documents:nP(l,m)}:{query:rP(l,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=s1(l,c.resumeToken);const p=My(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo($e.min())>0){f.readTime=wd(l,c.snapshotVersion.toTimestamp());const p=My(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const i=sP(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Vy(this.serializer),t.removeTarget=e,this.K_(t)}}class YP extends _1{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=tP(e.writeResults,e.commitTime),i=Li(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Vy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>eP(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{}class XP extends QP{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new we(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Py(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(oe.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,Py(t,i),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new we(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function WP(n,e,t,i){return new XP(n,e,t,i)}class JP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(t),this.aa=!1):Re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="RemoteStore";class ZP{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{ko(this)&&(Re(Ro,"Restarting streams for network reachability change."),await(async function(m){const p=Ye(m);p.Ea.add(4),await rh(p),p.Va.set("Unknown"),p.Ea.delete(4),await um(p)})(this))}))})),this.Va=new JP(i,a)}}async function um(n){if(ko(n))for(const e of n.Ra)await e(!0)}async function rh(n){for(const e of n.Ra)await e(!1)}function v1(n,e){const t=Ye(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),D_(t)?N_(t):lu(t).O_()&&x_(t,e))}function I_(n,e){const t=Ye(n),i=lu(t);t.Ia.delete(e),i.O_()&&E1(t,e),t.Ia.size===0&&(i.O_()?i.L_():ko(t)&&t.Va.set("Unknown"))}function x_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}lu(n).Z_(e)}function E1(n,e){n.da.$e(e),lu(n).X_(e)}function N_(n){n.da=new $M({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),lu(n).start(),n.Va.ua()}function D_(n){return ko(n)&&!lu(n).x_()&&n.Ia.size>0}function ko(n){return Ye(n).Ea.size===0}function T1(n){n.da=void 0}async function e4(n){n.Va.set("Online")}async function t4(n){n.Ia.forEach(((e,t)=>{x_(n,e)}))}async function n4(n,e){T1(n),D_(n)?(n.Va.ha(e),N_(n)):n.Va.set("Unknown")}async function r4(n,e,t){if(n.Va.set("Online"),e instanceof i1&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.da.removeTarget(f))})(n,e)}catch(i){Re(Ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Rd(n,i)}else if(e instanceof ed?n.da.Xe(e):e instanceof r1?n.da.st(e):n.da.tt(e),!t.isEqual($e.min()))try{const i=await g1(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(p);y&&l.Ia.set(p,y.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,p)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(jn.EMPTY_BYTE_STRING,y.snapshotVersion)),E1(l,m);const v=new Ea(y.target,m,p,y.sequenceNumber);x_(l,v)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){Re(Ro,"Failed to raise snapshot:",i),await Rd(n,i)}}async function Rd(n,e,t){if(!ou(e))throw e;n.Ea.add(1),await rh(n),n.Va.set("Offline"),t||(t=()=>g1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Re(Ro,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await um(n)}))}function b1(n,e){return e().catch((t=>Rd(n,t,e)))}async function cm(n){const e=Ye(n),t=Oa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:p_;for(;i4(e);)try{const a=await jP(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,s4(e,a)}catch(a){await Rd(e,a)}S1(e)&&A1(e)}function i4(n){return ko(n)&&n.Ta.length<10}function s4(n,e){n.Ta.push(e);const t=Oa(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function S1(n){return ko(n)&&!Oa(n).x_()&&n.Ta.length>0}function A1(n){Oa(n).start()}async function a4(n){Oa(n).ra()}async function o4(n){const e=Oa(n);for(const t of n.Ta)e.ea(t.mutations)}async function l4(n,e,t){const i=n.Ta.shift(),a=T_.from(i,e,t);await b1(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await cm(n)}async function u4(n,e){e&&Oa(n).Y_&&await(async function(i,a){if((function(c){return FM(c)&&c!==oe.ABORTED})(a.code)){const l=i.Ta.shift();Oa(i).B_(),await b1(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await cm(i)}})(n,e),S1(n)&&A1(n)}async function dS(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Re(Ro,"RemoteStore received new credentials");const i=ko(t);t.Ea.add(3),await rh(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await um(t)}async function c4(n,e){const t=Ye(n);e?(t.Ea.delete(2),await um(t)):e||(t.Ea.add(2),await rh(t),t.Va.set("Unknown"))}function lu(n){return n.ma||(n.ma=(function(t,i,a){const l=Ye(t);return l.sa(),new KP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:e4.bind(null,n),Yo:t4.bind(null,n),t_:n4.bind(null,n),J_:r4.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),D_(n)?N_(n):n.Va.set("Unknown")):(await n.ma.stop(),T1(n))}))),n.ma}function Oa(n){return n.fa||(n.fa=(function(t,i,a){const l=Ye(t);return l.sa(),new YP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:a4.bind(null,n),t_:u4.bind(null,n),ta:o4.bind(null,n),na:l4.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await cm(n)):(await n.fa.stop(),n.Ta.length>0&&(Re(Ro,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,f=new O_(e,t,c,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function M_(n,e){if(Ss("AsyncQueue",`${e}: ${n}`),ou(n))return new we(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{static emptySet(e){return new jl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Le.comparator(t.key,i.key):(t,i)=>Le.comparator(t.key,i.key),this.keyedMap=gc(),this.sortedSet=new nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new jl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.ga=new nn(Le.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):He(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Wl{constructor(e,t,i,a,l,c,f,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Wl(e,t,jl.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class f4{constructor(){this.queries=pS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Ye(t),l=a.queries;a.queries=pS(),l.forEach(((c,f)=>{for(const m of f.ba)m.onError(i)}))})(this,new we(oe.ABORTED,"Firestore shutting down"))}}function pS(){return new Po((n=>qw(n)),nm)}async function P_(n,e){const t=Ye(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new h4,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=M_(c,`Initialization of query '${Il(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&V_(t)}async function k_(n,e){const t=Ye(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function d4(n,e){const t=Ye(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(a)&&(i=!0);c.wa=a}}i&&V_(t)}function m4(n,e,t){const i=Ye(n),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function V_(n){n.Ca.forEach((e=>{e.next()}))}var Uy,gS;(gS=Uy||(Uy={})).Ma="default",gS.Cache="cache";class L_{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Wl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Uy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.key=e}}class C1{constructor(e){this.key=e}}class p4{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ht(),this.mutatedKeys=ht(),this.eu=Gw(e),this.tu=new jl(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new mS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,v)=>{const T=a.get(y),w=rm(this.query,v)?v:null,N=!!T&&this.mutatedKeys.has(T.key),V=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;T&&w?T.data.isEqual(w.data)?N!==V&&(i.track({type:3,doc:w}),M=!0):this.su(T,w)||(i.track({type:2,doc:w}),M=!0,(m&&this.eu(w,m)>0||p&&this.eu(w,p)<0)&&(f=!0)):!T&&w?(i.track({type:0,doc:w}),M=!0):T&&!w&&(i.track({type:1,doc:T}),M=!0,(m||p)&&(f=!0)),M&&(w?(c=c.add(w),l=V?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{tu:c,iu:i,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,v)=>(function(w,N){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Vt:M})}};return V(w)-V(N)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],m=this.Ya.size===0&&this.current&&!a?1:0,p=m!==this.Xa;return this.Xa=m,c.length!==0||p?{snapshot:new Wl(this.query,e.tu,l,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ht(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new C1(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new w1(i))})),t}cu(e){this.Za=e.ks,this.Ya=ht();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Wl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const j_="SyncEngine";class g4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class y4{constructor(e){this.key=e,this.hu=!1}}class _4{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Po((f=>qw(f)),nm),this.Iu=new Map,this.Eu=new Set,this.Ru=new nn(Le.comparator),this.Au=new Map,this.Vu=new A_,this.du={},this.mu=new Map,this.fu=Xl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function v4(n,e,t=!0){const i=O1(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await R1(i,e,t,!0),a}async function E4(n,e){const t=O1(n);await R1(t,e,!0,!1)}async function R1(n,e,t,i){const a=await UP(n.localStore,Vi(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await T4(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&v1(n.remoteStore,a),f}async function T4(n,e,t,i,a){n.pu=(v,T,w)=>(async function(V,M,L,U){let q=M.view.ru(L);q.Ss&&(q=await lS(V.localStore,M.query,!1).then((({documents:S})=>M.view.ru(S,q))));const te=U&&U.targetChanges.get(M.targetId),ee=U&&U.targetMismatches.get(M.targetId)!=null,$=M.view.applyChanges(q,V.isPrimaryClient,te,ee);return _S(V,M.targetId,$.au),$.snapshot})(n,v,T,w);const l=await lS(n.localStore,e,!0),c=new p4(e,l.ks),f=c.ru(l.documents),m=nh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),p=c.applyChanges(f,n.isPrimaryClient,m);_S(n,t,p.au);const y=new g4(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function b4(n,e,t){const i=Ye(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!nm(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Ly(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&I_(i.remoteStore,a.targetId),zy(i,a.targetId)})).catch(au)):(zy(i,a.targetId),await Ly(i.localStore,a.targetId,!0))}async function S4(n,e){const t=Ye(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),I_(t.remoteStore,i.targetId))}async function A4(n,e,t){const i=D4(n);try{const a=await(function(c,f){const m=Ye(c),p=Gt.now(),y=f.reduce(((w,N)=>w.add(N.key)),ht());let v,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let N=As(),V=ht();return m.xs.getEntries(w,y).next((M=>{N=M,N.forEach(((L,U)=>{U.isValidDocument()||(V=V.add(L))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,N))).next((M=>{v=M;const L=[];for(const U of f){const q=jM(U,v.get(U.key).overlayedDocument);q!=null&&L.push(new ka(U.key,q,Vw(q.value.mapValue),_r.exists(!0)))}return m.mutationQueue.addMutationBatch(w,p,L,f)})).next((M=>{T=M;const L=M.applyToLocalDocumentSet(v,V);return m.documentOverlayCache.saveOverlays(w,M.batchId,L)}))})).then((()=>({batchId:T.batchId,changes:Kw(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,f,m){let p=c.du[c.currentUser.toKey()];p||(p=new nn(ct)),p=p.insert(f,m),c.du[c.currentUser.toKey()]=p})(i,a.batchId,t),await ih(i,a.changes),await cm(i.remoteStore)}catch(a){const l=M_(a,"Failed to persist write");t.reject(l)}}async function I1(n,e){const t=Ye(n);try{const i=await VP(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(bt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?bt(c.hu,14607):a.removedDocuments.size>0&&(bt(c.hu,42227),c.hu=!1))})),await ih(t,i,e)}catch(i){await au(i)}}function yS(n,e,t){const i=Ye(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const m=Ye(c);m.onlineState=f;let p=!1;m.queries.forEach(((y,v)=>{for(const T of v.ba)T.va(f)&&(p=!0)})),p&&V_(m)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function w4(n,e,t){const i=Ye(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new nn(Le.comparator);c=c.insert(l,$n.newNoDocument(l,$e.min()));const f=ht().add(l),m=new om($e.min(),new Map,new nn(ct),c,f);await I1(i,m),i.Ru=i.Ru.remove(l),i.Au.delete(e),U_(i)}else await Ly(i.localStore,e,!1).then((()=>zy(i,e,t))).catch(au)}async function C4(n,e){const t=Ye(n),i=e.batch.batchId;try{const a=await kP(t.localStore,e);N1(t,i,null),x1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ih(t,a)}catch(a){await au(a)}}async function R4(n,e,t){const i=Ye(n);try{const a=await(function(c,f){const m=Ye(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return m.mutationQueue.lookupMutationBatch(p,f).next((v=>(bt(v!==null,37113),y=v.keys(),m.mutationQueue.removeMutationBatch(p,v)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>m.localDocuments.getDocuments(p,y)))}))})(i.localStore,e);N1(i,e,t),x1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ih(i,a)}catch(a){await au(a)}}function x1(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function N1(n,e,t){const i=Ye(n);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function zy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||D1(n,i)}))}function D1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(I_(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),U_(n))}function _S(n,e,t){for(const i of t)i instanceof w1?(n.Vu.addReference(i.key,e),I4(n,i)):i instanceof C1?(Re(j_,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||D1(n,i.key)):He(19791,{wu:i})}function I4(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(Re(j_,"New document in limbo: "+t),n.Eu.add(i),U_(n))}function U_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Le(Ut.fromString(e)),i=n.fu.next();n.Au.set(i,new y4(t)),n.Ru=n.Ru.insert(t,i),v1(n.remoteStore,new Ea(Vi(tm(t.path)),i,"TargetPurposeLimboResolution",Jd.ce))}}async function ih(n,e,t){const i=Ye(n),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{c.push(i.pu(m,e,t).then((p=>{var y;if((p||t)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){a.push(p);const v=C_.Es(m.targetId,p);l.push(v)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(m,p){const y=Ye(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>fe.forEach(p,(T=>fe.forEach(T.Ts,(w=>y.persistence.referenceDelegate.addReference(v,T.targetId,w))).next((()=>fe.forEach(T.Is,(w=>y.persistence.referenceDelegate.removeReference(v,T.targetId,w)))))))))}catch(v){if(!ou(v))throw v;Re(R_,"Failed to update sequence numbers: "+v)}for(const v of p){const T=v.targetId;if(!v.fromCache){const w=y.vs.get(T),N=w.snapshotVersion,V=w.withLastLimboFreeSnapshotVersion(N);y.vs=y.vs.insert(T,V)}}})(i.localStore,l))}async function x4(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Re(j_,"User change. New user:",e.toKey());const i=await p1(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new we(oe.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ih(t,i.Ns)}}function N4(n,e){const t=Ye(n),i=t.Au.get(e);if(i&&i.hu)return ht().add(i.key);{let a=ht();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function O1(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=I1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w4.bind(null,e),e.Pu.J_=d4.bind(null,e.eventManager),e.Pu.yu=m4.bind(null,e.eventManager),e}function D4(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R4.bind(null,e),e}class Id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return PP(this.persistence,new DP,e.initialUser,this.serializer)}Cu(e){return new m1(w_.Vi,this.serializer)}Du(e){return new BP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Id.provider={build:()=>new Id};class O4 extends Id{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){bt(this.persistence.referenceDelegate instanceof Cd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new gP(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?pr.withCacheSize(this.cacheSizeBytes):pr.DEFAULT;return new m1((i=>Cd.Vi(i,t)),this.serializer)}}class By{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=x4.bind(null,this.syncEngine),await c4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new f4})()}createDatastore(e){const t=lm(e.databaseInfo.databaseId),i=$P(e.databaseInfo);return WP(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,f){return new ZP(i,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>yS(this.syncEngine,t,0)),(function(){return hS.v()?new hS:new HP})())}createSyncEngine(e,t){return(function(a,l,c,f,m,p,y){const v=new _4(a,l,c,f,m,p);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Ye(a);Re(Ro,"RemoteStore shutting down."),l.Ea.add(5),await rh(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}By.provider={build:()=>new By};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="FirestoreClient";class M4{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=Gn.UNAUTHENTICATED,this.clientId=m_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Re(Ma,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Re(Ma,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=M_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ty(n,e){n.asyncQueue.verifyOperationInProgress(),Re(Ma,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await p1(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function vS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await P4(n);Re(Ma,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>dS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>dS(e.remoteStore,a))),n._onlineComponents=e}async function P4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(Ma,"Using user provided OfflineComponentProvider");try{await ty(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===oe.FAILED_PRECONDITION||a.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;$l("Error using user provided cache. Falling back to memory cache: "+t),await ty(n,new Id)}}else Re(Ma,"Using default OfflineComponentProvider"),await ty(n,new O4(void 0));return n._offlineComponents}async function M1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(Ma,"Using user provided OnlineComponentProvider"),await vS(n,n._uninitializedComponentsProvider._online)):(Re(Ma,"Using default OnlineComponentProvider"),await vS(n,new By))),n._onlineComponents}function k4(n){return M1(n).then((e=>e.syncEngine))}async function xd(n){const e=await M1(n),t=e.eventManager;return t.onListen=v4.bind(null,e.syncEngine),t.onUnlisten=b4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S4.bind(null,e.syncEngine),t}function V4(n,e,t,i){const a=new z_(i),l=new L_(e,a,t);return n.asyncQueue.enqueueAndForget((async()=>P_(await xd(n),l))),()=>{a.Nu(),n.asyncQueue.enqueueAndForget((async()=>k_(await xd(n),l)))}}function L4(n,e,t={}){const i=new Es;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,p){const y=new z_({next:T=>{y.Nu(),c.enqueueAndForget((()=>k_(l,v)));const w=T.docs.has(f);!w&&T.fromCache?p.reject(new we(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&T.fromCache&&m&&m.source==="server"?p.reject(new we(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),v=new L_(tm(f.path),y,{includeMetadataChanges:!0,Ka:!0});return P_(l,v)})(await xd(n),n.asyncQueue,e,t,i))),i.promise}function j4(n,e,t={}){const i=new Es;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,p){const y=new z_({next:T=>{y.Nu(),c.enqueueAndForget((()=>k_(l,v))),T.fromCache&&m.source==="server"?p.reject(new we(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),v=new L_(f,y,{includeMetadataChanges:!0,Ka:!0});return P_(l,v)})(await xd(n),n.asyncQueue,e,t,i))),i.promise}function U4(n,e){const t=new Es;return n.asyncQueue.enqueueAndForget((async()=>A4(await k4(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4="ComponentProvider",ES=new Map;function B4(n,e,t,i,a){return new aM(n,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,P1(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="firestore.googleapis.com",TS=!0;class bS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=k1,this.ssl=TS}else this.host=e.host,this.ssl=e.ssl??TS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=d1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mP)throw new we(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new we(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new we(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new we(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hm{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new UO;switch(i.type){case"firstParty":return new FO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new we(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=ES.get(t);i&&(Re(z4,"Removing Datastore"),ES.delete(t),i.terminate())})(this),Promise.resolve()}}function H4(n,e,t,i={}){var p;n=yr(n,hm);const a=ru(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;a&&(uw(`https://${f}`),cw("Firestore",!0)),l.host!==k1&&l.host!==f&&$l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:a,emulatorOptions:i};if(!Ao(m,c)&&(n._setSettings(m),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=Gn.MOCK_USER;else{y=h2(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new we(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Gn(T)}n._authCredentials=new zO(new Aw(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vo(this.firestore,e,this._query)}}class an{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}toJSON(){return{type:an._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Zc(t,an._jsonSchema))return new an(e,i||null,new Le(Ut.fromString(t.referencePath)))}}an._jsonSchemaVersion="firestore/documentReference/1.0",an._jsonSchema={type:vn("string",an._jsonSchemaVersion),referencePath:vn("string")};class Ca extends Vo{constructor(e,t,i){super(e,t,tm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new Le(e))}withConverter(e){return new Ca(this.firestore,e,this._path)}}function ws(n,e,...t){if(n=Sn(n),ww("collection","path",e),n instanceof hm){const i=Ut.fromString(e,...t);return k0(i),new Ca(n,null,i)}{if(!(n instanceof an||n instanceof Ca))throw new we(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ut.fromString(e,...t));return k0(i),new Ca(n.firestore,null,i)}}function Kn(n,e,...t){if(n=Sn(n),arguments.length===1&&(e=m_.newId()),ww("doc","path",e),n instanceof hm){const i=Ut.fromString(e,...t);return P0(i),new an(n,null,new Le(i))}{if(!(n instanceof an||n instanceof Ca))throw new we(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ut.fromString(e,...t));return P0(i),new an(n.firestore,n instanceof Ca?n.converter:null,new Le(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="AsyncQueue";class AS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new y1(this,"async_queue_retry"),this._c=()=>{const i=ey();i&&Re(SS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=ey();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ey();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Es;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ou(e))throw e;Re(SS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",wS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=O_.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&He(47125,{Pc:wS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function wS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Cs extends hm{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new AS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new AS(e),this._firestoreClient=void 0,await e}}}function F4(n,e){const t=typeof n=="object"?n:mw(),i=typeof n=="string"?n:Ed,a=f_(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=u2("firestore");l&&H4(a,...l)}return a}function sh(n){if(n._terminated)throw new we(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||q4(n),n._firestoreClient}function q4(n){var i,a,l,c;const e=n._freezeSettings(),t=B4(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(a=n._app)==null?void 0:a.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new M4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zr(jn.fromBase64String(e))}catch(t){throw new we(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zr(jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,Zr._jsonSchema))return Zr.fromBase64String(e.bytes)}}Zr._jsonSchemaVersion="firestore/bytes/1.0",Zr._jsonSchema={type:vn("string",Zr._jsonSchemaVersion),bytes:vn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ji._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,ji._jsonSchema))return new ji(e.latitude,e.longitude)}}ji._jsonSchemaVersion="firestore/geoPoint/1.0",ji._jsonSchema={type:vn("string",ji._jsonSchemaVersion),latitude:vn("number"),longitude:vn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new pi(e.vectorValues);throw new we(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:vn("string",pi._jsonSchemaVersion),vectorValues:vn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=/^__.*__$/;class $4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ka(e,this.data,this.fieldMask,t,this.fieldTransforms):new th(e,this.data,t,this.fieldTransforms)}}class V1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ka(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function L1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{dataSource:n})}}class B_{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new B_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Nd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(L1(this.dataSource)&&G4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class K4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||lm(e)}createContext(e,t,i,a=!1){return new B_({dataSource:e,methodName:t,targetDoc:i,path:Ln.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mm(n){const e=n._freezeSettings(),t=lm(n._databaseId);return new K4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function j1(n,e,t,i,a,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,a);F_("Data must be an object, but it was:",c,i);const f=B1(i,c);let m,p;if(l.merge)m=new kr(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const T=Jl(e,v,t);if(!c.contains(T))throw new we(oe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);q1(y,T)||y.push(T)}m=new kr(y),p=c.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,p=c.fieldTransforms;return new $4(new gr(f),m,p)}class pm extends dm{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pm}}class H_ extends dm{_toFieldTransform(e){return new PM(e.path,new jc)}isEqual(e){return e instanceof H_}}function U1(n,e,t,i){const a=n.createContext(1,e,t);F_("Data must be an object, but it was:",a,i);const l=[],c=gr.empty();Pa(i,((m,p)=>{const y=F1(e,m,t);p=Sn(p);const v=a.childContextForFieldPath(y);if(p instanceof pm)l.push(y);else{const T=ah(p,v);T!=null&&(l.push(y),c.set(y,T))}}));const f=new kr(l);return new V1(c,f,a.fieldTransforms)}function z1(n,e,t,i,a,l){const c=n.createContext(1,e,t),f=[Jl(e,i,t)],m=[a];if(l.length%2!=0)throw new we(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)f.push(Jl(e,l[T])),m.push(l[T+1]);const p=[],y=gr.empty();for(let T=f.length-1;T>=0;--T)if(!q1(p,f[T])){const w=f[T];let N=m[T];N=Sn(N);const V=c.childContextForFieldPath(w);if(N instanceof pm)p.push(w);else{const M=ah(N,V);M!=null&&(p.push(w),y.set(w,M))}}const v=new kr(p);return new V1(y,v,c.fieldTransforms)}function Y4(n,e,t,i=!1){return ah(t,n.createContext(i?4:3,e))}function ah(n,e){if(H1(n=Sn(n)))return F_("Unsupported field value:",e,n),B1(n,e);if(n instanceof dm)return(function(i,a){if(!L1(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const f of i){let m=ah(f,a.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=Sn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return DM(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Gt.fromDate(i);return{timestampValue:wd(a.serializer,l)}}if(i instanceof Gt){const l=new Gt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wd(a.serializer,l)}}if(i instanceof ji)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Zr)return{bytesValue:s1(a.serializer,i._byteString)};if(i instanceof an){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:S_(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof pi)return(function(c,f){const m=c instanceof pi?c.toArray():c;return{mapValue:{fields:{[Pw]:{stringValue:kw},[Td]:{arrayValue:{values:m.map((y=>{if(typeof y!="number")throw f.createError("VectorValues must only contain numeric values.");return E_(f.serializer,y)}))}}}}}})(i,a);if(f1(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Wd(i)}`)})(n,e)}function B1(n,e){const t={};return Iw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(n,((i,a)=>{const l=ah(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function H1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Gt||n instanceof ji||n instanceof Zr||n instanceof an||n instanceof dm||n instanceof pi||f1(n))}function F_(n,e,t){if(!H1(t)||!Cw(t)){const i=Wd(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Jl(n,e,t){if((e=Sn(e))instanceof fm)return e._internalPath;if(typeof e=="string")return F1(n,e);throw Nd("Field path arguments must be of type string or ",n,!1,void 0,t)}const Q4=new RegExp("[~\\*/\\[\\]]");function F1(n,e,t){if(e.search(Q4)>=0)throw Nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fm(...e.split("."))._internalPath}catch{throw Nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nd(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new we(oe.INVALID_ARGUMENT,f+n+m)}function q1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{convertValue(e,t="none"){switch(Da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Na(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Pa(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[Td].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>cn(c.doubleValue)));return new pi(t)}convertGeoPoint(e){return new ji(cn(e.latitude),cn(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=em(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(kc(e));default:return null}}convertTimestamp(e){const t=xa(e);return new Gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ut.fromString(e);bt(h1(i),9688,{name:e});const a=new Vc(i.get(1),i.get(3)),l=new Le(i.popFirst(5));return a.isEqual(t)||Ss(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends X4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,t)}}function W4(){return new H_("serverTimestamp")}const CS="@firebase/firestore",RS="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Jl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class J4 extends G1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class G_{}class Z4 extends G_{}function Va(n,e,...t){let i=[];e instanceof G_&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((m=>m instanceof $_)).length,f=l.filter((m=>m instanceof gm)).length;if(c>1||c>0&&f>0)throw new we(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class gm extends Z4{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new gm(e,t,i)}_apply(e){const t=this._parse(e);return K1(e._query,t),new Vo(e.firestore,e.converter,Dy(e._query,t))}_parse(e){const t=mm(e.firestore);return(function(l,c,f,m,p,y,v){let T;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new we(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){NS(v,y);const N=[];for(const V of v)N.push(xS(m,l,V));T={arrayValue:{values:N}}}else T=xS(m,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||NS(v,y),T=Y4(f,c,v,y==="in"||y==="not-in");return _n.create(p,y,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ym(n,e,t){const i=e,a=Jl("where",n);return gm._create(a,i,t)}class $_ extends G_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:yi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const m of f)K1(c,m),c=Dy(c,m)})(e._query,t),new Vo(e.firestore,e.converter,Dy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function xS(n,e,t){if(typeof(t=Sn(t))=="string"){if(t==="")throw new we(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fw(e)&&t.indexOf("/")!==-1)throw new we(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ut.fromString(t));if(!Le.isDocumentKey(i))throw new we(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return F0(n,new Le(i))}if(t instanceof an)return F0(n,t._key);throw new we(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wd(t)}.`)}function NS(n,e){if(!Array.isArray(n)||n.length===0)throw new we(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function K1(n,e){const t=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Y1(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class _c{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Eo extends G1{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Jl("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Eo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Eo._jsonSchema={type:vn("string",Eo._jsonSchemaVersion),bundleSource:vn("string","DocumentSnapshot"),bundleName:vn("string"),bundle:vn("string")};class td extends Eo{data(e={}){return super.data(e)}}class To{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new _c(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new td(this._firestore,this._userDataWriter,i.key,i,new _c(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const m=new td(a._firestore,a._userDataWriter,f.doc.key,f.doc,new _c(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new td(a._firestore,a._userDataWriter,f.doc.key,f.doc,new _c(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),y=c.indexOf(f.doc.key)),{type:ek(f.type),doc:m,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=To._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=m_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ek(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */To._jsonSchemaVersion="firestore/querySnapshot/1.0",To._jsonSchema={type:vn("string",To._jsonSchemaVersion),bundleSource:vn("string","QuerySnapshot"),bundleName:vn("string"),bundle:vn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mm(e)}set(e,t,i){this._verifyNotCommitted();const a=ny(e,this._firestore),l=Y1(a.converter,t,i),c=j1(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,_r.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=ny(e,this._firestore);let c;return c=typeof(t=Sn(t))=="string"||t instanceof fm?z1(this._dataReader,"WriteBatch.update",l._key,t,i,a):U1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,_r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ny(e,this._firestore);return this._mutations=this._mutations.concat(new am(t._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ny(n,e){if((n=Sn(n)).firestore!==e)throw new we(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(n){n=yr(n,an);const e=yr(n.firestore,Cs),t=sh(e);return L4(t,n._key).then((i=>X1(e,n,i)))}function uu(n){n=yr(n,Vo);const e=yr(n.firestore,Cs),t=sh(e),i=new q_(e);return $1(n._query),j4(t,n._query).then((a=>new To(e,i,n,a)))}function _m(n,e,t){n=yr(n,an);const i=yr(n.firestore,Cs),a=Y1(n.converter,e,t),l=mm(i);return vm(i,[j1(l,"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,_r.none())])}function Q1(n,e,t,...i){n=yr(n,an);const a=yr(n.firestore,Cs),l=mm(a);let c;return c=typeof(e=Sn(e))=="string"||e instanceof fm?z1(l,"updateDoc",n._key,e,t,i):U1(l,"updateDoc",n._key,e),vm(a,[c.toMutation(n._key,_r.exists(!0))])}function DS(n){return vm(yr(n.firestore,Cs),[new am(n._key,_r.none())])}function po(n,...e){var p,y,v;n=Sn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||IS(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(IS(e[i])){const T=e[i];e[i]=(p=T.next)==null?void 0:p.bind(T),e[i+1]=(y=T.error)==null?void 0:y.bind(T),e[i+2]=(v=T.complete)==null?void 0:v.bind(T)}let l,c,f;if(n instanceof an)c=yr(n.firestore,Cs),f=tm(n._key.path),l={next:T=>{e[i]&&e[i](X1(c,n,T))},error:e[i+1],complete:e[i+2]};else{const T=yr(n,Vo);c=yr(T.firestore,Cs),f=T._query;const w=new q_(c);l={next:N=>{e[i]&&e[i](new To(c,w,T,N))},error:e[i+1],complete:e[i+2]},$1(n._query)}const m=sh(c);return V4(m,f,a,l)}function vm(n,e){const t=sh(n);return U4(t,e)}function X1(n,e,t){const i=t.docs.get(e._key),a=new q_(n);return new Eo(n,a,e._key,i,new _c(t.hasPendingWrites,t.fromCache),e.converter)}function W1(n){return n=yr(n,Cs),sh(n),new tk(n,(e=>vm(n,e)))}(function(e,t=!0){jO(iu),Gl(new wo("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new Cs(new BO(i.getProvider("auth-internal")),new qO(c,i.getProvider("app-check-internal")),oM(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Aa(CS,RS,e),Aa(CS,RS,"esm2020")})();var nk="firebase",rk="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Aa(nk,rk,"app");function J1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ik=J1,Z1=new Wc("auth","Firebase",J1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=new c_("@firebase/auth");function sk(n,...e){Dd.logLevel<=ut.WARN&&Dd.warn(`Auth (${iu}): ${n}`,...e)}function nd(n,...e){Dd.logLevel<=ut.ERROR&&Dd.error(`Auth (${iu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(n,...e){throw Y_(n,...e)}function gi(n,...e){return Y_(n,...e)}function K_(n,e,t){const i={...ik(),[e]:t};return new Wc("auth","Firebase",i).create(e,{appName:n.name})}function bo(n){return K_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ak(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Hi(n,"argument-error"),K_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Y_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Z1.create(n,...e)}function qe(n,e,...t){if(!n)throw Y_(e,...t)}function ys(n){const e="INTERNAL ASSERTION FAILED: "+n;throw nd(e),new Error(e)}function Rs(n,e){n||ys(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function ok(){return OS()==="http:"||OS()==="https:"}function OS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ok()||y2()||"connection"in navigator)?navigator.onLine:!0}function uk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rs(t>e,"Short delay should be less than long delay!"),this.isMobile=m2()||_2()}get(){return lk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(n,e){Rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fk=new lh(3e4,6e4);function X_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function cu(n,e,t,i,a={}){return tC(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=Jc({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...l};return g2()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&ru(n.emulatorConfig.host)&&(p.credentials="include"),eC.fetch()(await nC(n,n.config.apiHost,t,f),p)})}async function tC(n,e,t){n._canInitEmulator=!1;const i={...ck,...e};try{const a=new mk(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw zf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw zf(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw zf(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw zf(n,"user-disabled",c);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw K_(n,y,p);Hi(n,y)}}catch(a){if(a instanceof Ns)throw a;Hi(n,"network-request-failed",{message:String(a)})}}async function dk(n,e,t,i,a={}){const l=await cu(n,e,t,i,a);return"mfaPendingCredential"in l&&Hi(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function nC(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?Q_(n.config,a):`${n.config.apiScheme}://${a}`;return hk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class mk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(gi(this.auth,"network-request-failed")),fk.get())})}}function zf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=gi(n,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(n,e){return cu(n,"POST","/v1/accounts:delete",e)}async function Od(n,e){return cu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gk(n,e=!1){const t=Sn(n),i=await t.getIdToken(e),a=W_(i);qe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Cc(ry(a.auth_time)),issuedAtTime:Cc(ry(a.iat)),expirationTime:Cc(ry(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function ry(n){return Number(n)*1e3}function W_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return nd("JWT malformed, contained fewer than 3 sections"),null;try{const a=sw(t);return a?JSON.parse(a):(nd("Failed to decode base64 JWT payload"),null)}catch(a){return nd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function MS(n){const e=W_(n);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ns&&yk(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function yk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cc(this.lastLoginAt),this.creationTime=Cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(n){var v;const e=n.auth,t=await n.getIdToken(),i=await Bc(n,Od(e,{idToken:t}));qe(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=(v=a.providerUserInfo)!=null&&v.length?rC(a.providerUserInfo):[],c=Ek(n.providerData,l),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(c!=null&&c.length),p=f?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Fy(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function vk(n){const e=Sn(n);await Md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ek(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function rC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(n,e){const t=await tC(n,{},async()=>{const i=Jc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await nC(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&ru(n.emulatorConfig.host)&&(m.credentials="include"),eC.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bk(n,e){return cu(n,"POST","/v2/accounts:revokeToken",X_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):MS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=MS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await Tk(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Ul;return i&&(qe(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(qe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(qe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ul,this.toJSON())}_performRefresh(){return ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(n,e){qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class mi{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new _k(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Fy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Bc(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return gk(this,e)}reload(){return vk(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Md(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fi(this.auth.app))return Promise.reject(bo(this.auth));const e=await this.getIdToken();return await Bc(this,pk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:T,isAnonymous:w,providerData:N,stsTokenManager:V}=t;qe(v&&V,e,"internal-error");const M=Ul.fromJSON(this.name,V);qe(typeof v=="string",e,"internal-error"),ha(i,e.name),ha(a,e.name),qe(typeof T=="boolean",e,"internal-error"),qe(typeof w=="boolean",e,"internal-error"),ha(l,e.name),ha(c,e.name),ha(f,e.name),ha(m,e.name),ha(p,e.name),ha(y,e.name);const L=new mi({uid:v,auth:e,email:a,emailVerified:T,displayName:i,isAnonymous:w,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:M,createdAt:p,lastLoginAt:y});return N&&Array.isArray(N)&&(L.providerData=N.map(U=>({...U}))),m&&(L._redirectEventId=m),L}static async _fromIdTokenResponse(e,t,i=!1){const a=new Ul;a.updateFromServerResponse(t);const l=new mi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Md(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];qe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?rC(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Ul;f.updateFromIdToken(i);const m=new mi({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Fy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=new Map;function _s(n){Rs(n instanceof Function,"Expected a class definition");let e=PS.get(n);return e?(Rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,PS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}iC.type="NONE";const kS=iC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(n,e,t){return`firebase:${n}:${e}:${t}`}class zl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=rd(this.userKey,a.apiKey,l),this.fullPersistenceKey=rd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Od(this.auth,{idToken:e}).catch(()=>{});return t?mi._fromGetAccountInfoResponse(this.auth,t,e):null}return mi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new zl(_s(kS),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||_s(kS);const c=rd(i,e.config.apiKey,e.name);let f=null;for(const p of t)try{const y=await p._get(c);if(y){let v;if(typeof y=="string"){const T=await Od(e,{idToken:y}).catch(()=>{});if(!T)break;v=await mi._fromGetAccountInfoResponse(e,T,y)}else v=mi._fromJSON(e,y);p!==l&&(f=v),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new zl(l,e,i):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new zl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cC(e))return"Blackberry";if(hC(e))return"Webos";if(aC(e))return"Safari";if((e.includes("chrome/")||oC(e))&&!e.includes("edge/"))return"Chrome";if(uC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function sC(n=Yn()){return/firefox\//i.test(n)}function aC(n=Yn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oC(n=Yn()){return/crios\//i.test(n)}function lC(n=Yn()){return/iemobile/i.test(n)}function uC(n=Yn()){return/android/i.test(n)}function cC(n=Yn()){return/blackberry/i.test(n)}function hC(n=Yn()){return/webos/i.test(n)}function J_(n=Yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Sk(n=Yn()){var e;return J_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Ak(){return v2()&&document.documentMode===10}function fC(n=Yn()){return J_(n)||uC(n)||hC(n)||cC(n)||/windows phone/i.test(n)||lC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(n,e=[]){let t;switch(n){case"Browser":t=VS(Yn());break;case"Worker":t=`${VS(Yn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${iu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(n,e={}){return cu(n,"GET","/v2/passwordPolicy",X_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=6;class Ik{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Rk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LS(this),this.idTokenSubscription=new LS(this),this.beforeStateQueue=new wk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_s(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await zl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Od(this,{idToken:e}),i=await mi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(fi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(i=m.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Md(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fi(this.app))return Promise.reject(bo(this));const t=e?Sn(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fi(this.app)?Promise.reject(bo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fi(this.app)?Promise.reject(bo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ck(this),t=new Ik(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await bk(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_s(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await zl.create(this,[_s(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(fi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&sk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Em(n){return Sn(n)}class LS{constructor(e){this.auth=e,this.observer=null,this.addObserver=R2(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nk(n){Z_=n}function Dk(n){return Z_.loadJS(n)}function Ok(){return Z_.gapiScript}function Mk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(n,e){const t=f_(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ao(l,e??{}))return a;Hi(a,"already-initialized")}return t.initialize({options:e})}function kk(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(_s);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Vk(n,e,t){const i=Em(n);qe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=mC(e),{host:c,port:f}=Lk(e),m=f===null?"":`:${f}`,p={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){qe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),qe(Ao(p,i.config.emulator)&&Ao(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,ru(c)?(uw(`${l}//${c}${m}`),cw("Auth",!0)):jk()}function mC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Lk(n){const e=mC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:jS(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:jS(c)}}}function jS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function jk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ys("not implemented")}_getIdTokenResponse(e){return ys("not implemented")}_linkToIdToken(e,t){return ys("not implemented")}_getReauthenticationResolver(e){return ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(n,e){return dk(n,"POST","/v1/accounts:signInWithIdp",X_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="http://localhost";class Io extends pC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Io(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Bl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Bl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bl(e,t)}buildRequest(){const e={requestUri:Uk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh extends ev{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga extends uh{constructor(){super("facebook.com")}static credential(e){return Io._fromParams({providerId:ga.PROVIDER_ID,signInMethod:ga.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ga.credentialFromTaggedObject(e)}static credentialFromError(e){return ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ga.credential(e.oauthAccessToken)}catch{return null}}}ga.FACEBOOK_SIGN_IN_METHOD="facebook.com";ga.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends uh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Io._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ps.credential(t,i)}catch{return null}}}ps.GOOGLE_SIGN_IN_METHOD="google.com";ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends uh{constructor(){super("github.com")}static credential(e){return Io._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ya.credential(e.oauthAccessToken)}catch{return null}}}ya.GITHUB_SIGN_IN_METHOD="github.com";ya.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends uh{constructor(){super("twitter.com")}static credential(e,t){return Io._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return _a.credential(t,i)}catch{return null}}}_a.TWITTER_SIGN_IN_METHOD="twitter.com";_a.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await mi._fromIdTokenResponse(e,i,a),c=US(i);return new Zl({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=US(i);return new Zl({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function US(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends Ns{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Pd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Pd(e,t,i,a)}}function gC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Pd._fromErrorAndOperation(n,l,e,i):l})}async function zk(n,e,t=!1){const i=await Bc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Zl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(n,e,t=!1){const{auth:i}=n;if(fi(i.app))return Promise.reject(bo(i));const a="reauthenticate";try{const l=await Bc(n,gC(i,a,e,n),t);qe(l.idToken,i,"internal-error");const c=W_(l.idToken);qe(c,i,"internal-error");const{sub:f}=c;return qe(n.uid===f,i,"user-mismatch"),Zl._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Hi(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(n,e,t=!1){if(fi(n.app))return Promise.reject(bo(n));const i="signIn",a=await gC(n,i,e),l=await Zl._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}function Fk(n,e,t,i){return Sn(n).onIdTokenChanged(e,t,i)}function qk(n,e,t){return Sn(n).beforeAuthStateChanged(e,t)}function Gk(n,e,t,i){return Sn(n).onAuthStateChanged(e,t,i)}const kd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kd,"1"),this.storage.removeItem(kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=1e3,Kk=10;class _C extends yC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);Ak()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Kk):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},$k)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_C.type="LOCAL";const Yk=_C;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC extends yC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vC.type="SESSION";const EC=vC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Tm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(c).map(async p=>p(t.origin,l)),m=await Qk(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const p=tv("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const T=v;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(T.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(){return window}function Wk(n){Ui().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(){return typeof Ui().WorkerGlobalScope<"u"&&typeof Ui().importScripts=="function"}async function Jk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zk(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function eV(){return TC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="firebaseLocalStorageDb",tV=1,Vd="firebaseLocalStorage",SC="fbase_key";class ch{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bm(n,e){return n.transaction([Vd],e?"readwrite":"readonly").objectStore(Vd)}function nV(){const n=indexedDB.deleteDatabase(bC);return new ch(n).toPromise()}function qy(){const n=indexedDB.open(bC,tV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Vd,{keyPath:SC})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Vd)?e(i):(i.close(),await nV(),e(await qy()))})})}async function zS(n,e,t){const i=bm(n,!0).put({[SC]:e,value:t});return new ch(i).toPromise()}async function rV(n,e){const t=bm(n,!1).get(e),i=await new ch(t).toPromise();return i===void 0?null:i.value}function BS(n,e){const t=bm(n,!0).delete(e);return new ch(t).toPromise()}const iV=800,sV=3;class AC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>sV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tm._getInstance(eV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Jk(),!this.activeServiceWorker)return;this.sender=new Xk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qy();return await zS(e,kd,"1"),await BS(e,kd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>zS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>rV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>BS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=bm(a,!1).getAll();return new ch(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AC.type="LOCAL";const aV=AC;new lh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(n,e){return e?_s(e):(qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv extends pC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oV(n){return Hk(n.auth,new nv(n),n.bypassAuthState)}function lV(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),Bk(t,new nv(n),n.bypassAuthState)}async function uV(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),zk(t,new nv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oV;case"linkViaPopup":case"linkViaRedirect":return uV;case"reauthViaPopup":case"reauthViaRedirect":return lV;default:Hi(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=new lh(2e3,1e4);async function hV(n,e,t){if(fi(n.app))return Promise.reject(gi(n,"operation-not-supported-in-this-environment"));const i=Em(n);ak(n,e,ev);const a=wC(i,t);return new _o(i,"signInViaPopup",e,a).executeNotNull()}class _o extends CC{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=tv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(gi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cV.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV="pendingRedirect",id=new Map;class dV extends CC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=id.get(this.auth._key());if(!e){try{const i=await mV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mV(n,e){const t=yV(e),i=gV(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function pV(n,e){id.set(n._key(),e)}function gV(n){return _s(n._redirectPersistence)}function yV(n){return rd(fV,n.config.apiKey,n.name)}async function _V(n,e,t=!1){if(fi(n.app))return Promise.reject(bo(n));const i=Em(n),a=wC(i,e),c=await new dV(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=600*1e3;class EV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!RC(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(gi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vV&&this.cachedEventUids.clear(),this.cachedEventUids.has(HS(e))}saveEventToCache(e){this.cachedEventUids.add(HS(e)),this.lastProcessedEventTime=Date.now()}}function HS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function RC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bV(n,e={}){return cu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AV=/^https?/;async function wV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await bV(n);for(const t of e)try{if(CV(t))return}catch{}Hi(n,"unauthorized-domain")}function CV(n){const e=Hy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!AV.test(t))return!1;if(SV.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=new lh(3e4,6e4);function FS(){const n=Ui().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function IV(n){return new Promise((e,t)=>{var a,l,c;function i(){FS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FS(),t(gi(n,"network-request-failed"))},timeout:RV.get()})}if((l=(a=Ui().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Ui().gapi)!=null&&c.load)i();else{const f=Mk("iframefcb");return Ui()[f]=()=>{gapi.load?i():t(gi(n,"network-request-failed"))},Dk(`${Ok()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw sd=null,e})}let sd=null;function xV(n){return sd=sd||IV(n),sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=new lh(5e3,15e3),DV="__/auth/iframe",OV="emulator/auth/iframe",MV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kV(n){const e=n.config;qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Q_(e,OV):`https://${n.config.authDomain}/${DV}`,i={apiKey:e.apiKey,appName:n.name,v:iu},a=PV.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Jc(i).slice(1)}`}async function VV(n){const e=await xV(n),t=Ui().gapi;return qe(t,n,"internal-error"),e.open({where:document.body,url:kV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MV,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=gi(n,"network-request-failed"),f=Ui().setTimeout(()=>{l(c)},NV.get());function m(){Ui().clearTimeout(f),a(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jV=500,UV=600,zV="_blank",BV="http://localhost";class qS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HV(n,e,t,i=jV,a=UV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...LV,width:i.toString(),height:a.toString(),top:l,left:c},p=Yn().toLowerCase();t&&(f=oC(p)?zV:t),sC(p)&&(e=e||BV,m.scrollbars="yes");const y=Object.entries(m).reduce((T,[w,N])=>`${T}${w}=${N},`,"");if(Sk(p)&&f!=="_self")return FV(e||"",f),new qS(null);const v=window.open(e||"",f,y);qe(v,n,"popup-blocked");try{v.focus()}catch{}return new qS(v)}function FV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV="__/auth/handler",GV="emulator/auth/handler",$V=encodeURIComponent("fac");async function GS(n,e,t,i,a,l){qe(n.config.authDomain,n,"auth-domain-config-required"),qe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:iu,eventId:a};if(e instanceof ev){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",C2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(e instanceof uh){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const m=await n._getAppCheckToken(),p=m?`#${$V}=${encodeURIComponent(m)}`:"";return`${KV(n)}?${Jc(f).slice(1)}${p}`}function KV({config:n}){return n.emulator?Q_(n,GV):`https://${n.authDomain}/${qV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="webStorageSupport";class YV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EC,this._completeRedirectFn=_V,this._overrideRedirectResult=pV}async _openPopup(e,t,i,a){var c;Rs((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await GS(e,t,i,Hy(),a);return HV(e,l,tv())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await GS(e,t,i,Hy(),a);return Wk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Rs(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await VV(e),i=new EV(e);return t.register("authEvent",a=>(qe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(iy,{type:iy},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[iy];l!==void 0&&t(!!l),Hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fC()||aC()||J_()}}const QV=YV;var $S="@firebase/auth",KS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JV(n){Gl(new wo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;qe(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dC(n)},p=new xk(i,a,l,m);return kk(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Gl(new wo("auth-internal",e=>{const t=Em(e.getProvider("auth").getImmediate());return(i=>new XV(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Aa($S,KS,WV(n)),Aa($S,KS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=300,eL=lw("authIdTokenMaxAge")||ZV;let YS=null;const tL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>eL)return;const a=t==null?void 0:t.token;YS!==a&&(YS=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function nL(n=mw()){const e=f_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Pk(n,{popupRedirectResolver:QV,persistence:[aV,Yk,EC]}),i=lw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=tL(l.toString());qk(t,c,()=>c(t.currentUser)),Fk(t,f=>c(f))}}const a=aw("auth");return a&&Vk(t,`http://${a}`),t}function rL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}Nk({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=gi("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",rL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JV("Browser");const iL={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function bl(n){const e=iL[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const sL={apiKey:bl("VITE_FIREBASE_API_KEY"),authDomain:bl("VITE_FIREBASE_AUTH_DOMAIN"),projectId:bl("VITE_FIREBASE_PROJECT_ID"),storageBucket:bl("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:bl("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:bl("VITE_FIREBASE_APP_ID")},IC=dw(sL),xo=nL(IC),aL=new ps,kt=F4(IC),xC=O.createContext(void 0),oL=({children:n})=>{const[e,t]=O.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),i=O.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);O.useEffect(()=>{i(e)},[e,i]);const a=O.useCallback(c=>{t(c),i(c);const f=xo.currentUser;if(f){const m=Kn(kt,"users",f.uid);Q1(m,{preferredTheme:c}).catch(p=>console.error("Error updating preferred theme in Firebase:",p))}},[i]),l=O.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return O.useEffect(()=>xo.onAuthStateChanged(async f=>{if(f){const m=Kn(kt,"users",f.uid),p=await oh(m);if(p.exists()&&p.data().preferredTheme){const y=p.data().preferredTheme;t(y),i(y)}}}),[i]),b.jsx(xC.Provider,{value:{theme:e,toggleTheme:l,setTheme:a},children:n})},lL="_spinner_5jyct_1",uL="_spinnerContainer_5jyct_19",QS={spinner:lL,spinnerContainer:uL},hu=({container:n=!0})=>{const e=b.jsx("div",{className:QS.spinner});return n?b.jsx("div",{className:QS.spinnerContainer,children:e}):e},cL="_loadingContainer_1n1m5_1",hL={loadingContainer:cL},eu=()=>b.jsx("div",{className:hL.loadingContainer,children:b.jsx(hu,{container:!1})}),fL=()=>{const n=Ue(i=>i.auth.firebaseUser),e=Ue(i=>i.auth.userData);return Ue(i=>i.auth.loading)?b.jsx(eu,{}):n?e?e.isApproved?b.jsx(Ta,{to:"/app/dashboard",replace:!0}):b.jsx(Ta,{to:"/guest",replace:!0}):b.jsx(eu,{}):b.jsx(Ta,{to:"/login",replace:!0})};function kn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var dL=typeof Symbol=="function"&&Symbol.observable||"@@observable",XS=dL,sy=()=>Math.random().toString(36).substring(7).split("").join("."),mL={INIT:`@@redux/INIT${sy()}`,REPLACE:`@@redux/REPLACE${sy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sy()}`},Ld=mL;function rv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function NC(n,e,t){if(typeof n!="function")throw new Error(kn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(kn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(kn(1));return t(NC)(n,e)}let i=n,a=e,l=new Map,c=l,f=0,m=!1;function p(){c===l&&(c=new Map,l.forEach((M,L)=>{c.set(L,M)}))}function y(){if(m)throw new Error(kn(3));return a}function v(M){if(typeof M!="function")throw new Error(kn(4));if(m)throw new Error(kn(5));let L=!0;p();const U=f++;return c.set(U,M),function(){if(L){if(m)throw new Error(kn(6));L=!1,p(),c.delete(U),l=null}}}function T(M){if(!rv(M))throw new Error(kn(7));if(typeof M.type>"u")throw new Error(kn(8));if(typeof M.type!="string")throw new Error(kn(17));if(m)throw new Error(kn(9));try{m=!0,a=i(a,M)}finally{m=!1}return(l=c).forEach(U=>{U()}),M}function w(M){if(typeof M!="function")throw new Error(kn(10));i=M,T({type:Ld.REPLACE})}function N(){const M=v;return{subscribe(L){if(typeof L!="object"||L===null)throw new Error(kn(11));function U(){const te=L;te.next&&te.next(y())}return U(),{unsubscribe:M(U)}},[XS](){return this}}}return T({type:Ld.INIT}),{dispatch:T,subscribe:v,getState:y,replaceReducer:w,[XS]:N}}function pL(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Ld.INIT})>"u")throw new Error(kn(12));if(typeof t(void 0,{type:Ld.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(kn(13))})}function gL(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const i=Object.keys(t);let a;try{pL(t)}catch(l){a=l}return function(c={},f){if(a)throw a;let m=!1;const p={};for(let y=0;y<i.length;y++){const v=i[y],T=t[v],w=c[v],N=T(w,f);if(typeof N>"u")throw f&&f.type,new Error(kn(14));p[v]=N,m=m||N!==w}return m=m||i.length!==Object.keys(c).length,m?p:c}}function jd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function yL(...n){return e=>(t,i)=>{const a=e(t,i);let l=()=>{throw new Error(kn(15))};const c={getState:a.getState,dispatch:(m,...p)=>l(m,...p)},f=n.map(m=>m(c));return l=jd(...f)(a.dispatch),{...a,dispatch:l}}}function _L(n){return rv(n)&&"type"in n&&typeof n.type=="string"}var DC=Symbol.for("immer-nothing"),WS=Symbol.for("immer-draftable"),nr=Symbol.for("immer-state");function di(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Vr=Object,tu=Vr.getPrototypeOf,Ud="constructor",Sm="prototype",Gy="configurable",zd="enumerable",ad="writable",Hc="value",Is=n=>!!n&&!!n[nr];function _i(n){var e;return n?OC(n)||wm(n)||!!n[WS]||!!((e=n[Ud])!=null&&e[WS])||Cm(n)||Rm(n):!1}var vL=Vr[Sm][Ud].toString(),JS=new WeakMap;function OC(n){if(!n||!iv(n))return!1;const e=tu(n);if(e===null||e===Vr[Sm])return!0;const t=Vr.hasOwnProperty.call(e,Ud)&&e[Ud];if(t===Object)return!0;if(!Dl(t))return!1;let i=JS.get(t);return i===void 0&&(i=Function.toString.call(t),JS.set(t,i)),i===vL}function Am(n,e,t=!0){hh(n)===0?(t?Reflect.ownKeys(n):Vr.keys(n)).forEach(a=>{e(a,n[a],n)}):n.forEach((i,a)=>e(a,i,n))}function hh(n){const e=n[nr];return e?e.type_:wm(n)?1:Cm(n)?2:Rm(n)?3:0}var ZS=(n,e,t=hh(n))=>t===2?n.has(e):Vr[Sm].hasOwnProperty.call(n,e),$y=(n,e,t=hh(n))=>t===2?n.get(e):n[e],Bd=(n,e,t,i=hh(n))=>{i===2?n.set(e,t):i===3?n.add(t):n[e]=t};function EL(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var wm=Array.isArray,Cm=n=>n instanceof Map,Rm=n=>n instanceof Set,iv=n=>typeof n=="object",Dl=n=>typeof n=="function",ay=n=>typeof n=="boolean";function TL(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var ms=n=>n.copy_||n.base_,sv=n=>n.modified_?n.copy_:n.base_;function Ky(n,e){if(Cm(n))return new Map(n);if(Rm(n))return new Set(n);if(wm(n))return Array[Sm].slice.call(n);const t=OC(n);if(e===!0||e==="class_only"&&!t){const i=Vr.getOwnPropertyDescriptors(n);delete i[nr];let a=Reflect.ownKeys(i);for(let l=0;l<a.length;l++){const c=a[l],f=i[c];f[ad]===!1&&(f[ad]=!0,f[Gy]=!0),(f.get||f.set)&&(i[c]={[Gy]:!0,[ad]:!0,[zd]:f[zd],[Hc]:n[c]})}return Vr.create(tu(n),i)}else{const i=tu(n);if(i!==null&&t)return{...n};const a=Vr.create(i);return Vr.assign(a,n)}}function av(n,e=!1){return Im(n)||Is(n)||!_i(n)||(hh(n)>1&&Vr.defineProperties(n,{set:Bf,add:Bf,clear:Bf,delete:Bf}),Vr.freeze(n),e&&Am(n,(t,i)=>{av(i,!0)},!1)),n}function bL(){di(2)}var Bf={[Hc]:bL};function Im(n){return n===null||!iv(n)?!0:Vr.isFrozen(n)}var Hd="MapSet",Yy="Patches",eA="ArrayMethods",MC={};function No(n){const e=MC[n];return e||di(0,n),e}var tA=n=>!!MC[n],Fc,PC=()=>Fc,SL=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:tA(Hd)?No(Hd):void 0,arrayMethodsPlugin_:tA(eA)?No(eA):void 0});function nA(n,e){e&&(n.patchPlugin_=No(Yy),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function Qy(n){Xy(n),n.drafts_.forEach(AL),n.drafts_=null}function Xy(n){n===Fc&&(Fc=n.parent_)}var rA=n=>Fc=SL(Fc,n);function AL(n){const e=n[nr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function iA(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[nr].modified_&&(Qy(e),di(4)),_i(n)&&(n=sA(e,n));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(t[nr].base_,n,e)}else n=sA(e,t);return wL(e,n,!0),Qy(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==DC?n:void 0}function sA(n,e){if(Im(e))return e;const t=e[nr];if(!t)return Fd(e,n.handledSet_,n);if(!xm(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:i}=t;if(i)for(;i.length>0;)i.pop()(n);LC(t,n)}return t.copy_}function wL(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&av(e,t)}function kC(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var xm=(n,e)=>n.scope_===e,CL=[];function VC(n,e,t,i){const a=ms(n),l=n.type_;if(i!==void 0&&$y(a,i,l)===e){Bd(a,i,t,l);return}if(!n.draftLocations_){const f=n.draftLocations_=new Map;Am(a,(m,p)=>{if(Is(p)){const y=f.get(p)||[];y.push(m),f.set(p,y)}})}const c=n.draftLocations_.get(e)??CL;for(const f of c)Bd(a,f,t,l)}function RL(n,e,t){n.callbacks_.push(function(a){var f;const l=e;if(!l||!xm(l,a))return;(f=a.mapSetPlugin_)==null||f.fixSetContents(l);const c=sv(l);VC(n,l.draft_??l,c,t),LC(l,a)})}function LC(n,e){var i;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((i=n.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const l=a.getPath(n);l&&a.generatePatches_(n,l,e)}kC(n)}}function IL(n,e,t){const{scope_:i}=n;if(Is(t)){const a=t[nr];xm(a,i)&&a.callbacks_.push(function(){od(n);const c=sv(a);VC(n,t,c,e)})}else _i(t)&&n.callbacks_.push(function(){const l=ms(n);n.type_===3?l.has(t)&&Fd(t,i.handledSet_,i):$y(l,e,n.type_)===t&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&Fd($y(n.copy_,e,n.type_),i.handledSet_,i)})}function Fd(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Is(n)||e.has(n)||!_i(n)||Im(n)||(e.add(n),Am(n,(i,a)=>{if(Is(a)){const l=a[nr];if(xm(l,t)){const c=sv(l);Bd(n,i,c,n.type_),kC(l)}}else _i(a)&&Fd(a,e,t)})),n}function xL(n,e){const t=wm(n),i={type_:t?1:0,scope_:e?e.scope_:PC(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=i,l=qd;t&&(a=[i],l=qc);const{revoke:c,proxy:f}=Proxy.revocable(a,l);return i.draft_=f,i.revoke_=c,[f,i]}var qd={get(n,e){if(e===nr)return n;let t=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const a=ms(n);if(!ZS(a,e,n.type_))return NL(n,a,e);const l=a[e];if(n.finalized_||!_i(l)||i&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&TL(e))return l;if(l===oy(n.base_,e)){od(n);const c=n.type_===1?+e:e,f=Jy(n.scope_,l,n,c);return n.copy_[c]=f}return l},has(n,e){return e in ms(n)},ownKeys(n){return Reflect.ownKeys(ms(n))},set(n,e,t){const i=jC(ms(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const a=oy(ms(n),e),l=a==null?void 0:a[nr];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(EL(t,a)&&(t!==void 0||ZS(n.base_,e,n.type_)))return!0;od(n),Wy(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),IL(n,e,t)),!0},deleteProperty(n,e){return od(n),oy(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),Wy(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=ms(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{[ad]:!0,[Gy]:n.type_!==1||e!=="length",[zd]:i[zd],[Hc]:t[e]}},defineProperty(){di(11)},getPrototypeOf(n){return tu(n.base_)},setPrototypeOf(){di(12)}},qc={};for(let n in qd){let e=qd[n];qc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}qc.deleteProperty=function(n,e){return qc.set.call(this,n,e,void 0)};qc.set=function(n,e,t){return qd.set.call(this,n[0],e,t,n[0])};function oy(n,e){const t=n[nr];return(t?ms(t):n)[e]}function NL(n,e,t){var a;const i=jC(e,t);return i?Hc in i?i[Hc]:(a=i.get)==null?void 0:a.call(n.draft_):void 0}function jC(n,e){if(!(e in n))return;let t=tu(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=tu(t)}}function Wy(n){n.modified_||(n.modified_=!0,n.parent_&&Wy(n.parent_))}function od(n){n.copy_||(n.assigned_=new Map,n.copy_=Ky(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var DL=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,i)=>{if(Dl(e)&&!Dl(t)){const l=t;t=e;const c=this;return function(m=l,...p){return c.produce(m,y=>t.call(this,y,...p))}}Dl(t)||di(6),i!==void 0&&!Dl(i)&&di(7);let a;if(_i(e)){const l=rA(this),c=Jy(l,e,void 0);let f=!0;try{a=t(c),f=!1}finally{f?Qy(l):Xy(l)}return nA(l,i),iA(a,l)}else if(!e||!iv(e)){if(a=t(e),a===void 0&&(a=e),a===DC&&(a=void 0),this.autoFreeze_&&av(a,!0),i){const l=[],c=[];No(Yy).generateReplacementPatches_(e,a,{patches_:l,inversePatches_:c}),i(l,c)}return a}else di(1,e)},this.produceWithPatches=(e,t)=>{if(Dl(e))return(c,...f)=>this.produceWithPatches(c,m=>e(m,...f));let i,a;return[this.produce(e,t,(c,f)=>{i=c,a=f}),i,a]},ay(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),ay(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),ay(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){_i(n)||di(8),Is(n)&&(n=OL(n));const e=rA(this),t=Jy(e,n,void 0);return t[nr].isManual_=!0,Xy(e),t}finishDraft(n,e){const t=n&&n[nr];(!t||!t.isManual_)&&di(9);const{scope_:i}=t;return nA(i,e),iA(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}t>-1&&(e=e.slice(t+1));const i=No(Yy).applyPatches_;return Is(n)?i(n,e):this.produce(n,a=>i(a,e))}};function Jy(n,e,t,i){const[a,l]=Cm(e)?No(Hd).proxyMap_(e,t):Rm(e)?No(Hd).proxySet_(e,t):xL(e,t);return((t==null?void 0:t.scope_)??PC()).drafts_.push(a),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=i,t&&i!==void 0?RL(t,l,i):l.callbacks_.push(function(m){var y;(y=m.mapSetPlugin_)==null||y.fixSetContents(l);const{patchPlugin_:p}=m;l.modified_&&p&&p.generatePatches_(l,[],m)}),a}function OL(n){return Is(n)||di(10,n),UC(n)}function UC(n){if(!_i(n)||Im(n))return n;const e=n[nr];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Ky(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=Ky(n,!0);return Am(t,(a,l)=>{Bd(t,a,UC(l))},i),e&&(e.finalized_=!1),t}var ML=new DL,zC=ML.produce;function BC(n){return({dispatch:t,getState:i})=>a=>l=>typeof l=="function"?l(t,i,n):a(l)}var PL=BC(),kL=BC,VL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jd:jd.apply(null,arguments)},LL=n=>n&&typeof n.match=="function";function Rc(n,e){function t(...i){if(e){let a=e(...i);if(!a)throw new Error(Ts(0));return{type:n,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>_L(i)&&i.type===n,t}var HC=class vc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,vc.prototype)}static get[Symbol.species](){return vc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new vc(...e[0].concat(this)):new vc(...e.concat(this))}};function aA(n){return _i(n)?zC(n,()=>{}):n}function Hf(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function jL(n){return typeof n=="boolean"}var UL=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=e??{};let c=new HC;return t&&(jL(t)?c.push(PL):c.push(kL(t.extraArgument))),c},zL="RTK_autoBatch",oA=n=>e=>{setTimeout(e,n)},BL=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let a=!0,l=!1,c=!1;const f=new Set,m=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:oA(10):n.type==="callback"?n.queueNotification:oA(n.timeout),p=()=>{c=!1,l&&(l=!1,f.forEach(y=>y()))};return Object.assign({},i,{subscribe(y){const v=()=>a&&y(),T=i.subscribe(v);return f.add(y),()=>{T(),f.delete(y)}},dispatch(y){var v;try{return a=!((v=y==null?void 0:y.meta)!=null&&v[zL]),l=!a,l&&(c||(c=!0,m(p))),i.dispatch(y)}finally{a=!0}}})},HL=n=>function(t){const{autoBatch:i=!0}=t??{};let a=new HC(n);return i&&a.push(BL(typeof i=="object"?i:void 0)),a};function FL(n){const e=UL(),{reducer:t=void 0,middleware:i,devTools:a=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let f;if(typeof t=="function")f=t;else if(rv(t))f=gL(t);else throw new Error(Ts(1));let m;typeof i=="function"?m=i(e):m=e();let p=jd;a&&(p=VL({trace:!1,...typeof a=="object"&&a}));const y=yL(...m),v=HL(y);let T=typeof c=="function"?c(v):v();const w=p(...T);return NC(f,l,w)}function FC(n){const e={},t=[];let i;const a={addCase(l,c){const f=typeof l=="string"?l:l.type;if(!f)throw new Error(Ts(28));if(f in e)throw new Error(Ts(29));return e[f]=c,a},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),a},addMatcher(l,c){return t.push({matcher:l,reducer:c}),a},addDefaultCase(l){return i=l,a}};return n(a),[e,t,i]}function qL(n){return typeof n=="function"}function GL(n,e){let[t,i,a]=FC(e),l;if(qL(n))l=()=>aA(n());else{const f=aA(n);l=()=>f}function c(f=l(),m){let p=[t[m.type],...i.filter(({matcher:y})=>y(m)).map(({reducer:y})=>y)];return p.filter(y=>!!y).length===0&&(p=[a]),p.reduce((y,v)=>{if(v)if(Is(y)){const w=v(y,m);return w===void 0?y:w}else{if(_i(y))return zC(y,T=>v(T,m));{const T=v(y,m);if(T===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return T}}return y},f)}return c.getInitialState=l,c}var $L=(n,e)=>LL(n)?n.match(e):n(e);function KL(...n){return e=>n.some(t=>$L(t,e))}var YL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",QL=(n=21)=>{let e="",t=n;for(;t--;)e+=YL[Math.random()*64|0];return e},XL=["name","message","stack","code"],ly=class{constructor(n,e){xg(this,"_type");this.payload=n,this.meta=e}},lA=class{constructor(n,e){xg(this,"_type");this.payload=n,this.meta=e}},WL=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of XL)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},uA="External signal was aborted",jr=(()=>{function n(e,t,i){const a=Rc(e+"/fulfilled",(m,p,y,v)=>({payload:m,meta:{...v||{},arg:y,requestId:p,requestStatus:"fulfilled"}})),l=Rc(e+"/pending",(m,p,y)=>({payload:void 0,meta:{...y||{},arg:p,requestId:m,requestStatus:"pending"}})),c=Rc(e+"/rejected",(m,p,y,v,T)=>({payload:v,error:(i&&i.serializeError||WL)(m||"Rejected"),meta:{...T||{},arg:y,requestId:p,rejectedWithValue:!!v,requestStatus:"rejected",aborted:(m==null?void 0:m.name)==="AbortError",condition:(m==null?void 0:m.name)==="ConditionError"}}));function f(m,{signal:p}={}){return(y,v,T)=>{const w=i!=null&&i.idGenerator?i.idGenerator(m):QL(),N=new AbortController;let V,M;function L(q){M=q,N.abort()}p&&(p.aborted?L(uA):p.addEventListener("abort",()=>L(uA),{once:!0}));const U=(async function(){var ee,$;let q;try{let S=(ee=i==null?void 0:i.condition)==null?void 0:ee.call(i,m,{getState:v,extra:T});if(ZL(S)&&(S=await S),S===!1||N.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const C=new Promise((R,k)=>{V=()=>{k({name:"AbortError",message:M||"Aborted"})},N.signal.addEventListener("abort",V,{once:!0})});y(l(w,m,($=i==null?void 0:i.getPendingMeta)==null?void 0:$.call(i,{requestId:w,arg:m},{getState:v,extra:T}))),q=await Promise.race([C,Promise.resolve(t(m,{dispatch:y,getState:v,extra:T,requestId:w,signal:N.signal,abort:L,rejectWithValue:(R,k)=>new ly(R,k),fulfillWithValue:(R,k)=>new lA(R,k)})).then(R=>{if(R instanceof ly)throw R;return R instanceof lA?a(R.payload,w,m,R.meta):a(R,w,m)})])}catch(S){q=S instanceof ly?c(null,w,m,S.payload,S.meta):c(S,w,m)}finally{V&&N.signal.removeEventListener("abort",V)}return i&&!i.dispatchConditionRejection&&c.match(q)&&q.meta.condition||y(q),q})();return Object.assign(U,{abort:L,requestId:w,arg:m,unwrap(){return U.then(JL)}})}}return Object.assign(f,{pending:l,rejected:c,fulfilled:a,settled:KL(c,a),typePrefix:e})}return n.withTypes=()=>n,n})();function JL(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function ZL(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var ej=Symbol.for("rtk-slice-createasyncthunk");function tj(n,e){return`${n}/${e}`}function nj({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[ej];return function(a){const{name:l,reducerPath:c=l}=a;if(!l)throw new Error(Ts(11));const f=(typeof a.reducers=="function"?a.reducers(ij()):a.reducers)||{},m=Object.keys(f),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(te,ee){const $=typeof te=="string"?te:te.type;if(!$)throw new Error(Ts(12));if($ in p.sliceCaseReducersByType)throw new Error(Ts(13));return p.sliceCaseReducersByType[$]=ee,y},addMatcher(te,ee){return p.sliceMatchers.push({matcher:te,reducer:ee}),y},exposeAction(te,ee){return p.actionCreators[te]=ee,y},exposeCaseReducer(te,ee){return p.sliceCaseReducersByName[te]=ee,y}};m.forEach(te=>{const ee=f[te],$={reducerName:te,type:tj(l,te),createNotation:typeof a.reducers=="function"};aj(ee)?lj($,ee,y,e):sj($,ee,y)});function v(){const[te={},ee=[],$=void 0]=typeof a.extraReducers=="function"?FC(a.extraReducers):[a.extraReducers],S={...te,...p.sliceCaseReducersByType};return GL(a.initialState,C=>{for(let R in S)C.addCase(R,S[R]);for(let R of p.sliceMatchers)C.addMatcher(R.matcher,R.reducer);for(let R of ee)C.addMatcher(R.matcher,R.reducer);$&&C.addDefaultCase($)})}const T=te=>te,w=new Map,N=new WeakMap;let V;function M(te,ee){return V||(V=v()),V(te,ee)}function L(){return V||(V=v()),V.getInitialState()}function U(te,ee=!1){function $(C){let R=C[te];return typeof R>"u"&&ee&&(R=Hf(N,$,L)),R}function S(C=T){const R=Hf(w,ee,()=>new WeakMap);return Hf(R,C,()=>{const k={};for(const[P,j]of Object.entries(a.selectors??{}))k[P]=rj(j,C,()=>Hf(N,C,L),ee);return k})}return{reducerPath:te,getSelectors:S,get selectors(){return S($)},selectSlice:$}}const q={name:l,reducer:M,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:L,...U(c),injectInto(te,{reducerPath:ee,...$}={}){const S=ee??c;return te.inject({reducerPath:S,reducer:M},$),{...q,...U(S,!0)}}};return q}}function rj(n,e,t,i){function a(l,...c){let f=e(l);return typeof f>"u"&&i&&(f=t()),n(f,...c)}return a.unwrapped=n,a}var La=nj();function ij(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function sj({type:n,reducerName:e,createNotation:t},i,a){let l,c;if("reducer"in i){if(t&&!oj(i))throw new Error(Ts(17));l=i.reducer,c=i.prepare}else l=i;a.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?Rc(n,c):Rc(n))}function aj(n){return n._reducerDefinitionType==="asyncThunk"}function oj(n){return n._reducerDefinitionType==="reducerWithPrepare"}function lj({type:n,reducerName:e},t,i,a){if(!a)throw new Error(Ts(18));const{payloadCreator:l,fulfilled:c,pending:f,rejected:m,settled:p,options:y}=t,v=a(n,l,y);i.exposeAction(e,v),c&&i.addCase(v.fulfilled,c),f&&i.addCase(v.pending,f),m&&i.addCase(v.rejected,m),p&&i.addMatcher(v.settled,p),i.exposeCaseReducer(e,{fulfilled:c||Ff,pending:f||Ff,rejected:m||Ff,settled:p||Ff})}function Ff(){}function Ts(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const uj={positions:[],loading:!1,error:null,fetched:!1,isDirty:!1},Hl=jr("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=Kn(kt,"metadata","positions"),i=await oh(t);if(i.exists()){const a=i.data();return Array.isArray(a.list)?a.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),ov=jr("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=Kn(kt,"metadata","positions");return await _m(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),qC=La({name:"positions",initialState:uj,reducers:{updatePositionCustomLabels:(n,e)=>{const{positionName:t,labels:i}=e.payload,a=n.positions.find(l=>l.name===t);a&&(a.customLabels=i,n.isDirty=!0)},resetPositionsDirty:n=>{n.isDirty=!1},setPositions:(n,e)=>{n.positions=e.payload,n.fetched=!0,n.loading=!1}},extraReducers:n=>{n.addCase(Hl.pending,e=>{e.loading=!0,e.error=null}).addCase(Hl.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(Hl.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(ov.fulfilled,(e,t)=>{e.positions=t.payload,e.isDirty=!1})}}),{updatePositionCustomLabels:qf,resetPositionsDirty:cj,setPositions:hj}=qC.actions,fj=qC.reducer,dj={teams:[],loading:!1,error:null,fetched:!1},Ic=jr("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=Kn(kt,"metadata","teams"),i=await oh(t);if(i.exists()){const a=i.data();return Array.isArray(a.list)?a.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),ld=jr("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=Kn(kt,"metadata","teams");return await _m(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),GC=La({name:"teams",initialState:dj,reducers:{clearError:n=>{n.error=null},setTeams:(n,e)=>{n.teams=e.payload,n.fetched=!0,n.loading=!1}},extraReducers:n=>{n.addCase(Ic.pending,e=>{e.loading=!0,e.error=null}).addCase(Ic.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(Ic.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(ld.pending,e=>{e.error=null}).addCase(ld.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(ld.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:vz,setTeams:mj}=GC.actions,pj=GC.reducer,gj=()=>{const n=In(),{firebaseUser:e,userData:t,loading:i}=Ue(m=>m.auth),{fetched:a,loading:l}=Ue(m=>m.teams),{fetched:c,loading:f}=Ue(m=>m.positions);return O.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!a&&!l&&n(Ic()),!c&&!f&&n(Hl()))},[n,e,t,a,l,c,f]),i||t!=null&&t.isApproved&&(!a||!c)?b.jsx(eu,{}):e?t?t.isApproved?b.jsx(XA,{}):b.jsx(Ta,{to:"/guest",replace:!0}):b.jsx(eu,{}):b.jsx(Ta,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=n=>{const e=_j(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=O.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:c,...f},m)=>O.createElement("svg",{ref:m,...vj,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:$C("lucide",a),...!l&&!Ej(f)&&{"aria-hidden":"true"},...f},[...c.map(([p,y])=>O.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=(n,e)=>{const t=O.forwardRef(({className:i,...a},l)=>O.createElement(Tj,{ref:l,iconNode:e,className:$C(`lucide-${yj(cA(n))}`,`lucide-${n}`,i),...a}));return t.displayName=cA(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Sj=rr("arrow-left",bj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wj=rr("arrow-right",Aj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],KC=rr("chevron-up",Cj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ij=rr("circle-check",Rj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Nj=rr("copy",xj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],YC=rr("corner-down-right",Dj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Mj=rr("layout-grid",Oj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],kj=rr("moon",Pj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Lj=rr("panel-left-close",Vj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],Uj=rr("panel-left-open",jj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fh=rr("plus",zj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Hj=rr("sun",Bj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],QC=rr("trash-2",Fj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Gj=rr("users",qj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lv=rr("x",$j),Kj=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},Yj={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:Kj(),lastVisitedPaths:{},rosterAllViewMode:"user",alertConfig:null,peekPositionName:null},XC=La({name:"ui",initialState:Yj,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setRosterAllViewMode:(n,e)=>{n.rosterAllViewMode=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:i}=e.payload;n.lastVisitedPaths[t]=i},toggleTeamExpansion:(n,e)=>{const t=e.payload,i=n.expandedTeams.indexOf(t);i>=0?n.expandedTeams.splice(i,1):n.expandedTeams.push(t)},expandTeam:(n,e)=>{const t=e.payload;n.expandedTeams.includes(t)||n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:i,userEmail:a}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][i]||(n.hiddenUsers[t][i]=[]);const l=n.hiddenUsers[t][i],c=l.indexOf(a);c>=0?l.splice(c,1):l.push(a),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))},showAlert:(n,e)=>{n.alertConfig=e.payload},hideAlert:n=>{n.alertConfig=null},setPeekPositionName:(n,e)=>{n.peekPositionName=e.payload}}}),{setMobileSidebarOpen:Ol,setDesktopSidebarExpanded:Qj,setRosterAllViewMode:hA,setLastVisitedPath:Xj,toggleTeamExpansion:Wj,expandTeam:Jj,toggleUserVisibility:Zj,showAlert:So,hideAlert:fA,setPeekPositionName:e3}=XC.actions,t3=XC.reducer,n3=()=>{const n=O.useContext(xC);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},r3="_themeToggleButton_1ugtj_1",i3={themeToggleButton:r3},Nm=({showText:n,className:e,iconClassName:t})=>{const{theme:i,toggleTheme:a}=n3();return b.jsxs("button",{className:`${i3.themeToggleButton} ${e||""}`,onClick:a,"aria-label":"Toggle theme",children:[b.jsx("span",{className:t||"",children:i==="dark"?b.jsx(Hj,{size:20}):b.jsx(kj,{size:20})}),n&&b.jsx("span",{children:"Toggle theme"})]})},s3={onlineUsers:[],error:null},WC=La({name:"presence",initialState:s3,reducers:{setOnlineUsers:(n,e)=>{n.onlineUsers=e.payload,n.error=null},setPresenceError:(n,e)=>{n.error=e.payload}}}),{setOnlineUsers:a3,setPresenceError:o3}=WC.actions,l3=WC.reducer,u3=()=>{try{const n="gig_roster_session_id";let e=sessionStorage.getItem(n);return e||(e=Math.random().toString(36).substring(2,10),sessionStorage.setItem(n,e)),e}catch{return Math.random().toString(36).substring(2,10)}},c3=()=>{try{const n="gig_roster_session_color";let e=sessionStorage.getItem(n);if(!e){const t=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F78FB3","#BB8FCE","#82E0AA","#F1948A","#85C1E9","#76D7C4","#F8C471","#C39BD3","#7FB3D5","#7DCEA0","#F0B27A","#5DADE2","#D7BDE2","#A9CCE3","#A3E4D7"],i=Math.floor(Math.random()*t.length);e=t[i],sessionStorage.setItem(n,e)}return e}catch{return"#FF6B6B"}},JC=u3(),h3=c3(),f3=6e4,d3=9e4,m3=(n,e)=>{const t=O.useRef(!1);O.useEffect(()=>{if(!(n!=null&&n.uid)||!(e!=null&&e.email))return;const i=`${n.uid}_${JC}`,a=Kn(kt,"presence",i);t.current||(t.current=!0,(async()=>{try{const y=new Date(Date.now()-6e5),v=Va(ws(kt,"presence"),ym("userUid","==",n.uid));(await uu(v)).forEach(w=>{var V,M;const N=((M=(V=w.data().lastSeen)==null?void 0:V.toDate)==null?void 0:M.call(V))||new Date(0);w.id!==i&&N<y&&DS(w.ref).catch(()=>{})})}catch{}})());const l=async()=>{if(!(!xo.currentUser||document.visibilityState!=="visible"))try{await _m(a,{uid:i,userUid:n.uid,name:e.name||n.displayName||"Anonymous",email:e.email,color:h3,lastSeen:W4()},{merge:!0})}catch(p){const y=p;y.code!=="unavailable"&&console.warn("[Presence] Heartbeat failed:",y.message)}},c=()=>{DS(a).catch(()=>{})};l();const f=setInterval(l,f3),m=()=>{document.visibilityState==="visible"?l():c()};return document.addEventListener("visibilitychange",m),window.addEventListener("beforeunload",c),()=>{clearInterval(f),document.removeEventListener("visibilitychange",m),window.removeEventListener("beforeunload",c),c()}},[n==null?void 0:n.uid,n==null?void 0:n.displayName,e==null?void 0:e.email,e==null?void 0:e.name])},p3=()=>{const n=In(),{firebaseUser:e}=Ue(a=>a.auth),t=e==null?void 0:e.uid,i=O.useRef([]);O.useEffect(()=>{if(!t)return;let a=null;const l=Va(ws(kt,"presence")),c=p=>{const y=Date.now(),v=y-d3,T=[];p.forEach(w=>{var V,M,L;if(!w||!w.name)return;const N=((M=(V=w.lastSeen)==null?void 0:V.toMillis)==null?void 0:M.call(V))||((L=w.lastSeen)==null?void 0:L.seconds)*1e3||y;N>v&&T.push({uid:w.uid,name:String(w.name),email:String(w.email||""),color:String(w.color||"#5c4eb1"),lastSeen:N})}),n(a3(T.sort((w,N)=>w.name.localeCompare(N.name))))},f=setTimeout(()=>{a=po(l,{next:p=>{const y=p.docs.map(v=>v.data());i.current=y,c(y)},error:p=>{console.error("[Presence] Listener failed:",p.message),n(o3(p.message))}})},1e3),m=setInterval(()=>{c(i.current)},3e4);return()=>{clearTimeout(f),a&&a(),clearInterval(m)}},[n,t])},g3=()=>Ue(n=>n.presence.onlineUsers),y3="_meTag_sc6t2_10",_3="_isMe_sc6t2_51",dA={meTag:y3,isMe:_3},Dm=({displayName:n,isMe:e})=>b.jsxs(O.Fragment,{children:[b.jsx("span",{className:e?dA.isMe:"",children:n}),e&&b.jsx("span",{className:dA.meTag,children:"Me"})]}),v3="_onlineUsersContainer_1vvxe_1",E3="_sidebarVariant_1vvxe_17",T3="_sidebarExpanded_1vvxe_22",b3="_onlineLabel_1vvxe_26",S3="_avatarStack_1vvxe_38",A3="_avatarCircle_1vvxe_44",w3="_moreCircle_1vvxe_66",C3="_userDropdown_1vvxe_72",R3="_dropdownDown_1vvxe_83",I3="_dropdownUp_1vvxe_88",x3="_dropdownTitle_1vvxe_93",N3="_userListScroll_1vvxe_103",D3="_userItem_1vvxe_108",O3="_userNameText_1vvxe_122",M3="_userAvatarSmall_1vvxe_129",P3="_pulse_1vvxe_142",Pn={onlineUsersContainer:v3,sidebarVariant:E3,sidebarExpanded:T3,onlineLabel:b3,avatarStack:S3,avatarCircle:A3,moreCircle:w3,userDropdown:C3,dropdownDown:R3,dropdownUp:I3,dropdownTitle:x3,userListScroll:N3,userItem:D3,userNameText:O3,userAvatarSmall:M3,pulse:P3},ZC=({variant:n="top-bar",showText:e=!1})=>{const t=g3(),{firebaseUser:i}=Ue(w=>w.auth),a=i?`${i.uid}_${JC}`:null,[l,c]=O.useState(!1),f=O.useRef(null);if(O.useEffect(()=>{const w=N=>{f.current&&!f.current.contains(N.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),!t||t.length===0)return null;const m=t.slice(0,3),p=t.length-3,y=w=>{if(!w||typeof w!="string")return"?";const N=w.trim().split(" ");return N.length===0?"?":N.map(V=>V[0]).join("").substring(0,2).toUpperCase()},v=[Pn.onlineUsersContainer,n==="sidebar"?Pn.sidebarVariant:"",e?Pn.sidebarExpanded:""].filter(Boolean).join(" "),T=[Pn.userDropdown,n==="sidebar"?Pn.dropdownUp:Pn.dropdownDown].filter(Boolean).join(" ");return b.jsxs("div",{className:v,ref:f,onClick:()=>c(!l),children:[e&&b.jsx("span",{className:Pn.onlineLabel,children:"Online"}),b.jsxs("div",{className:Pn.avatarStack,children:[p>0&&b.jsxs("div",{className:`${Pn.avatarCircle} ${Pn.moreCircle}`,children:["+",p]}),[...m].reverse().map(w=>b.jsx("div",{className:Pn.avatarCircle,title:w.name||"Unknown User",style:{backgroundColor:w.color,borderColor:"white"},children:y(w.name)},w.uid))]}),l&&b.jsxs("div",{className:T,children:[b.jsxs("div",{className:Pn.dropdownTitle,children:["Online Now (",t.length,")"]}),b.jsx("div",{className:Pn.userListScroll,children:t.map(w=>b.jsxs("div",{className:Pn.userItem,children:[b.jsx("div",{className:Pn.userAvatarSmall,style:{backgroundColor:w.color},children:y(w.name)}),b.jsx("span",{className:Pn.userNameText,children:b.jsx(Dm,{displayName:w.name||"Unknown User",isMe:w.uid===a})}),b.jsx("div",{className:Pn.pulse})]},w.uid))})]})]})},k3="_mobileHeader_lcvro_1",V3="_mobileHeaderPill_lcvro_18",L3="_mobileHeaderPillDisabled_lcvro_30",j3="_mobileHeaderPillActive_lcvro_34",U3="_mobileHeaderText_lcvro_45",z3="_mobileHeaderChevron_lcvro_53",B3="_rotate_lcvro_58",H3="_mobileHeaderActions_lcvro_62",F3="_mobileThemeToggle_lcvro_68",hs={mobileHeader:k3,mobileHeaderPill:V3,mobileHeaderPillDisabled:L3,mobileHeaderPillActive:j3,mobileHeaderText:U3,mobileHeaderChevron:z3,rotate:B3,mobileHeaderActions:H3,mobileThemeToggle:F3},q3=({title:n,hasSideNav:e=!0})=>{const t=In(),{isMobileSidebarOpen:i}=Ue(l=>l.ui),a=()=>{e&&t(Ol(!i))};return b.jsxs("header",{className:hs.mobileHeader,children:[b.jsxs("div",{className:`${hs.mobileHeaderPill} ${i?hs.mobileHeaderPillActive:""} ${e?"":hs.mobileHeaderPillDisabled}`,onClick:a,children:[b.jsx("span",{className:hs.mobileHeaderText,children:n}),e&&b.jsx(KC,{className:`${hs.mobileHeaderChevron} ${i?hs.rotate:""}`})]}),b.jsxs("div",{className:hs.mobileHeaderActions,children:[b.jsx(Nm,{className:hs.mobileThemeToggle}),b.jsx(ZC,{})]})]})};var Wt=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(Wt||{}),Pl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(Pl||{});const uv=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],mA=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],eR=n=>{const e=[];return Object.entries(n).forEach(([t,i])=>{i.forEach(a=>{e.push(`${t}|${a}`)})}),e},tR=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`},vs=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),G3={firebaseUser:null,userData:null,loading:!0,error:null},ud=jr("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=Kn(kt,"users",n),i=await oh(t);if(!i.exists()){const a="chris.sm.kang542@gmail.com",l=xo.currentUser,c=(l==null?void 0:l.email)===a,f={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await _m(t,f),f}return i.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),cd=jr("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const i=Kn(kt,"users",n),a={...e};return a.teamPositions&&(a.indexedAssignments=eR(a.teamPositions)),await Q1(i,a),a}catch(i){return t(i instanceof Error?i.message:"Failed to update profile")}}),nR=La({name:"auth",initialState:G3,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(ud.pending,e=>{e.loading=!0,e.error=null}).addCase(ud.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(ud.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(cd.pending,e=>{e.error=null}).addCase(cd.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(cd.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:$3,setUserData:rR,setLoading:Ez,logout:K3}=nR.actions,Y3=nR.reducer,Q3={entries:{},dirtyEntries:{},loading:!0,initialLoad:!1,saving:!1,error:null},uy=jr("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Va(ws(kt,"roster")),i=await uu(t),a={};return i.docs.forEach(l=>{const c=l.data(),f=c.updatedAt,m={...c,updatedAt:f&&typeof f=="object"&&"toMillis"in f?f.toMillis():f};a[l.id]={...m,id:l.id}}),a}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),xc=jr("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=W1(kt),i=Date.now(),a={};return Object.values(n).forEach(l=>{const c=Kn(kt,"roster",l.id),f={...l,updatedAt:i};t.set(c,f),a[l.id]=f}),await t.commit(),a}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),iR=La({name:"roster",initialState:Q3,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:i,userIdentifier:a,positionGroupNames:l,maxConflict:c}=e.payload,f=n.dirtyEntries[t]||n.entries[t];let m;f?m=JSON.parse(JSON.stringify(f)):m={id:t,date:t,teams:{},absence:{}},m.teams[i]||(m.teams[i]={});const p=m.teams[i][a]||[],y=l.findIndex(N=>p.includes(N)),v=y>=0?l[y]:null;let T=null;v===null?T=l[0]:y<l.length-1?T=l[y+1]:T=null;const w=p.filter(N=>!l.includes(N));if(T){if(m.absence[a]){n.error=`Cannot assign ${a} because they are marked as absent on ${t}.`;return}if(w.length<c)w.push(T);else{n.error=`User already has ${c} assignment(s) in this team.`;return}}w.length===0?delete m.teams[i][a]:m.teams[i][a]=w,n.dirtyEntries[t]=m},updateLocalEventName(n,e){const{date:t,eventName:i}=e.payload,a=n.dirtyEntries[t]||n.entries[t];let l;a?l=JSON.parse(JSON.stringify(a)):l={id:t,date:t,teams:{},absence:{}},l.eventName=i,n.dirtyEntries[t]=l},resetRosterEdits(n){n.dirtyEntries={},n.error=null},setRosterEntries(n,e){n.entries=e.payload,n.loading=!1,n.initialLoad=!0},setLoading(n,e){n.loading=e.payload},updateLocalAbsence(n,e){var m;const{date:t,userIdentifier:i,reason:a,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let f;c?f=JSON.parse(JSON.stringify(c)):f={id:t,date:t,teams:{},absence:{}},l?(f.absence[i]={reason:a??((m=f.absence[i])==null?void 0:m.reason)??""},Object.keys(f.teams).forEach(p=>{f.teams[p][i]&&delete f.teams[p][i]})):delete f.absence[i],n.dirtyEntries[t]=f}},extraReducers:n=>{n.addCase(uy.pending,e=>{e.loading=!0,e.error=null}).addCase(uy.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(uy.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(xc.pending,e=>{e.saving=!0,e.error=null}).addCase(xc.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(xc.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:Tz,updateLocalAssignment:sR,updateLocalEventName:X3,resetRosterEdits:aR,setRosterEntries:W3,setLoading:pA,updateLocalAbsence:cy}=iR.actions,J3=iR.reducer,Z3={allUsers:[],originalUsers:[],loading:!1,saving:!1,error:null},hy=jr("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=ws(kt,"users"),i=Va(t),a=await uu(i),l=[];return a.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,f)=>(c.name||"").localeCompare(f.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),hd=jr("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=W1(kt);n.forEach(i=>{const{id:a,...l}=i;l.teamPositions&&(l.indexedAssignments=eR(l.teamPositions)),t.update(Kn(kt,"users",a),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),oR=La({name:"userManagement",initialState:Z3,reducers:{updateUserField(n,e){const{id:t,field:i,value:a}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[i]=a)},toggleUserTeam(n,e){const{userId:t,teamName:i}=e.payload,a=n.allUsers.find(l=>l.id===t);if(a){const l=a.teams||[],c=l.includes(i)?l.filter(f=>f!==i):[...l,i];a.teams=c,a.teamPositions||(a.teamPositions={}),c.includes(i)?a.teamPositions[i]||(a.teamPositions[i]=[]):delete a.teamPositions[i]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:i,posName:a}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[i]||(l.teamPositions[i]=[]);const c=l.teamPositions[i],f=c.includes(a)?c.filter(m=>m!==a):[...c,a];l.teamPositions[i]=f}},moveUserTeam(n,e){const{userId:t,teamName:i,direction:a}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l&&l.teams){const c=l.teams.indexOf(i);if(c===-1)return;const f=a==="up"?c-1:c+1;if(f<0||f>=l.teams.length)return;const m=[...l.teams];[m[c],m[f]]=[m[f],m[c]],l.teams=m}},resetUserChanges(n){n.allUsers=JSON.parse(JSON.stringify(n.originalUsers))},setAllUsers(n,e){n.allUsers=e.payload,n.originalUsers=JSON.parse(JSON.stringify(e.payload)),n.loading=!1}},extraReducers:n=>{n.addCase(hy.pending,e=>{e.loading=!0,e.error=null}).addCase(hy.fulfilled,(e,t)=>{e.allUsers=t.payload,e.originalUsers=JSON.parse(JSON.stringify(t.payload)),e.loading=!1}).addCase(hy.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(hd.pending,e=>{e.saving=!0,e.error=null}).addCase(hd.fulfilled,e=>{e.saving=!1,e.originalUsers=JSON.parse(JSON.stringify(e.allUsers))}).addCase(hd.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:eU,toggleUserTeam:tU,toggleUserTeamPosition:nU,moveUserTeam:rU,resetUserChanges:iU,setAllUsers:sU}=oR.actions,aU=oR.reducer,oU=()=>{const n=In(),{firebaseUser:e,userData:t}=Ue(i=>i.auth);m3(e,t),p3(),O.useEffect(()=>{n(pA(!0));const i=Va(ws(kt,"roster")),a=po(i,{next:m=>{const p={};m.docs.forEach(y=>{const v=y.data(),T=v.updatedAt,w={...v,updatedAt:T&&typeof T=="object"&&"toMillis"in T?T.toMillis():T};p[y.id]={...w,id:y.id}}),n(W3(p))},error:m=>{console.error("Roster sync error:",m),n(pA(!1))}}),l=po(Kn(kt,"metadata","teams"),m=>{if(m.exists()){const p=m.data(),y=Array.isArray(p.list)?p.list.map(v=>({...v,maxConflict:v.maxConflict||1})):[];n(mj(y))}},m=>console.error("Teams sync error:",m)),c=po(Kn(kt,"metadata","positions"),m=>{if(m.exists()){const p=m.data(),y=Array.isArray(p.list)?p.list:[];n(hj(y))}},m=>console.error("Positions sync error:",m)),f=po(ws(kt,"users"),m=>{const p=[];m.forEach(v=>{p.push({...v.data(),id:v.id})});const y=p.sort((v,T)=>(v.name||"").localeCompare(T.name||""));n(sU(y))},m=>console.error("Users sync error:",m));return()=>{a(),l(),c(),f()}},[n]),O.useEffect(()=>{if(!(e!=null&&e.uid))return;const i=po(Kn(kt,"users",e.uid),a=>{a.exists()&&n(rR(a.data()))},a=>console.error("Profile sync error:",a));return()=>i()},[n,e==null?void 0:e.uid])},lU="_modalOverlay_ah937_1",uU="_modalContent_ah937_16",cU="_modalHeader_ah937_34",hU="_closeButton_ah937_48",fU="_modalBody_ah937_64",dU="_modalFooter_ah937_70",Sl={modalOverlay:lU,modalContent:uU,modalHeader:cU,closeButton:hU,modalBody:fU,modalFooter:dU},cv=({isOpen:n,onClose:e,title:t,children:i,footer:a})=>{if(O.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),!n)return null;const l=b.jsx("div",{className:Sl.modalOverlay,onClick:e,children:b.jsxs("div",{className:Sl.modalContent,onClick:c=>c.stopPropagation(),children:[b.jsxs("div",{className:Sl.modalHeader,children:[b.jsx("h2",{children:t}),b.jsx("button",{className:Sl.closeButton,onClick:e,"aria-label":"Close",children:b.jsx(lv,{size:24})})]}),b.jsx("div",{className:Sl.modalBody,children:i}),a&&b.jsx("div",{className:Sl.modalFooter,children:a})]})});return nw.createPortal(l,document.body)},mU="_confirmModalBody_17sxu_1",pU="_confirmModalMessage_17sxu_8",gU="_footer_17sxu_12",yU="_cancelButton_17sxu_19",_U="_confirmButton_17sxu_34",hc={confirmModalBody:mU,confirmModalMessage:pU,footer:gU,cancelButton:yU,confirmButton:_U},vU=()=>{const n=In(),{alertConfig:e}=Ue(l=>l.ui);if(!e)return null;const t=()=>{n(fA())},i=()=>{e.onConfirm&&e.onConfirm(),n(fA())},a=b.jsxs("div",{className:hc.footer,children:[e.showCancel!==!1&&b.jsx("button",{className:hc.cancelButton,onClick:t,children:e.cancelText||"Cancel"}),b.jsx("button",{className:hc.confirmButton,onClick:i,children:e.confirmText||"OK"})]});return b.jsx(cv,{isOpen:!!e,onClose:t,title:e.title,footer:a,children:b.jsx("div",{className:hc.confirmModalBody,children:b.jsx("div",{className:hc.confirmModalMessage,children:e.message})})})},EU="_bottomNavContainer_1c0tq_1",TU="_bottomNav_1c0tq_1",bU="_bottomNavBtn_1c0tq_18",SU="_bottomNavBtnActive_1c0tq_42",Gf={bottomNavContainer:EU,bottomNav:TU,bottomNavBtn:bU,bottomNavBtnActive:SU},AU=()=>{const n=Oo(),e=ri(),{lastVisitedPaths:t}=Ue(l=>l.ui),i=e.pathname.includes("/settings")?Wt.SETTINGS:e.pathname.includes("/dashboard")?Wt.DASHBOARD:Wt.ROSTER,a=l=>{if(i===l){l===Wt.DASHBOARD&&n("/app/dashboard");return}const c=t[l];n(c||`/app/${l}`)};return b.jsx("nav",{className:Gf.bottomNavContainer,children:b.jsx("div",{className:Gf.bottomNav,children:uv.map(l=>b.jsxs("button",{className:`${Gf.bottomNavBtn} ${i===l.id?Gf.bottomNavBtnActive:""}`,onClick:()=>a(l.id),children:[b.jsx("span",{children:l.icon}),b.jsx("span",{children:l.label})]},l.id))})})},wU="_sideNav_1youa_1",CU="_menuOpen_1youa_20",RU="_sidebarContent_1youa_26",IU="_tabletSidebarHeader_1youa_34",xU="_sideMenuList_1youa_38",NU="_sidenavMenuSubheading_1youa_43",DU="_sideNavItem_1youa_67",OU="_sideNavItemActive_1youa_95",MU="_sideEmoji_1youa_102",PU="_loading_1youa_109",kU="_sidebarToggleButton_1youa_116",VU="_sidebarFooter_1youa_117",LU="_sidebarCollapsed_1youa_173",jU="_adminOnlySectionWrapper_1youa_209",UU="_sidebarThemeToggle_1youa_239",zU="_sidebarThemeIcon_1youa_248",lt={sideNav:wU,menuOpen:CU,sidebarContent:RU,tabletSidebarHeader:IU,sideMenuList:xU,sidenavMenuSubheading:NU,sideNavItem:DU,sideNavItemActive:OU,sideEmoji:MU,loading:PU,sidebarToggleButton:kU,sidebarFooter:VU,sidebarCollapsed:LU,adminOnlySectionWrapper:jU,sidebarThemeToggle:UU,sidebarThemeIcon:zU},BU=()=>{var ee;const n=Oo(),e=ri(),{teamName:t,positionName:i,section:a}=Mo(),l=In(),{userData:c}=Ue($=>$.auth),{isDesktopSidebarExpanded:f,isMobileSidebarOpen:m,expandedTeams:p}=Ue($=>$.ui),{teams:y,fetched:v,loading:T}=Ue($=>$.teams),{fetched:w}=Ue($=>$.positions),N=e.pathname.includes("/settings")?Wt.SETTINGS:e.pathname.includes("/dashboard")?Wt.DASHBOARD:Wt.ROSTER,V=i||a,M=O.useRef(void 0);O.useEffect(()=>{t&&N===Wt.ROSTER&&t!==M.current&&l(Jj(t)),M.current=t},[t,N,l]),O.useEffect(()=>{v||l(Ic()),w||l(Hl())},[l,v,w]);const L=O.useCallback($=>{n($)},[n]),U=$=>{l(Wj($))},q=()=>{const $=uv.find(C=>C.id===N),S=$?$.label:"GIG ROSTER";return t&&V?`${t}  ${V}`:t||(V?`${S}  ${V}`:S)},te=[lt.sideNav,m?lt.menuOpen:"",f?"":lt.sidebarCollapsed].filter(Boolean).join(" ");return b.jsxs("aside",{className:te,children:[b.jsxs("div",{className:lt.sidebarContent,children:[b.jsxs("div",{className:lt.tabletSidebarHeader,children:[f&&b.jsx("h3",{children:q()}),b.jsx("button",{className:lt.sidebarToggleButton,onClick:()=>l(Qj(!f)),"aria-label":f?"Collapse sidebar":"Expand sidebar",children:f?b.jsx(Lj,{size:20}):b.jsx(Uj,{size:20})})]}),b.jsxs("nav",{className:lt.sideMenuList,children:[N===Wt.ROSTER&&T&&b.jsx("div",{className:`${lt.sideNavItem} ${lt.loading}`,children:"Loading teams..."}),N===Wt.ROSTER?(ee=c==null?void 0:c.teams)==null?void 0:ee.map($=>{var k,P;const S=y.find(j=>j.name===$);if(!S)return null;const C=c.teams.length===1,R=C||p.includes(S.name);return b.jsxs("div",{children:[!C&&b.jsxs("div",{className:`${lt.sidenavMenuSubheading} ${lt.sidenavMenuSubheadingClickable}`,style:{cursor:"pointer"},onClick:()=>{U(S.name),L(`/app/roster/${S.name}/All`)},children:[b.jsxs("div",{children:[S.emoji," ",f&&S.name]}),b.jsx("span",{className:lt.expandIcon,children:R?"":""})]}),R&&b.jsxs("div",{className:lt.sideNavSubItems,children:[b.jsxs("button",{className:`${lt.sideNavItem} ${lt.sideNavItemSub} ${V==="All"&&t===S.name?lt.sideNavItemActive:""}`,onClick:()=>{L(`/app/roster/${S.name}/All`),l(Ol(!1))},style:{borderLeft:V==="All"&&t===S.name?"4px solid var(--color-primary)":"4px solid transparent",backgroundColor:V==="All"&&t===S.name?"var(--background-toggle-on-transparent)":"transparent",color:V==="All"&&t===S.name?"var(--color-primary)":""},children:[b.jsx("span",{className:lt.sideEmoji,children:""})," ",f&&"All"]}),(P=(k=S.positions)==null?void 0:k.filter(j=>!j.parentId))==null?void 0:P.map(j=>{const x=V===j.name&&t===S.name;return b.jsxs("button",{className:`${lt.sideNavItem} ${lt.sideNavItemSub} ${x?lt.sideNavItemActive:""}`,onClick:()=>{L(`/app/roster/${S.name}/${j.name}`),l(Ol(!1))},style:{borderLeft:x?`4px solid ${j.colour}`:"4px solid transparent",backgroundColor:x?`${j.colour}15`:"transparent",color:x?j.colour:""},children:[b.jsx("span",{className:lt.sideEmoji,children:j.emoji})," ",f&&j.name]},j.name)}),S.allowAbsence!==!1&&b.jsxs("button",{className:`${lt.sideNavItem} ${lt.sideNavItemSub} ${V==="Absence"&&t===S.name?lt.sideNavItemActive:""}`,onClick:()=>{L(`/app/roster/${S.name}/Absence`),l(Ol(!1))},style:{borderLeft:V==="Absence"&&t===S.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:V==="Absence"&&t===S.name?"var(--background-toggle-off-transparent)":"transparent"},children:[b.jsx("span",{className:lt.sideEmoji,children:""})," ",f&&"Absence"]})]})]},S.name)}):mA.filter($=>!$.adminOnly).map($=>b.jsxs("button",{className:`${lt.sideNavItem} ${V===$.id?lt.sideNavItemActive:""}`,onClick:()=>{L(`/app/settings/${$.id}`),l(Ol(!1))},children:[b.jsx("span",{className:lt.sideEmoji,children:$.icon})," ",f&&$.label]},$.id))]})]}),(c==null?void 0:c.isAdmin)&&N===Wt.SETTINGS&&b.jsxs("div",{className:lt.adminOnlySectionWrapper,children:[b.jsx("div",{className:lt.sidenavMenuSubheading,children:f&&b.jsx("h4",{children:"Admin Only"})}),mA.filter($=>$.adminOnly).map($=>b.jsxs("button",{className:`${lt.sideNavItem} ${V===$.id?lt.sideNavItemActive:""}`,onClick:()=>{L(`/app/settings/${$.id}`),l(Ol(!1))},children:[b.jsx("span",{className:lt.sideEmoji,children:$.icon})," ",f&&$.label]},$.id))]}),b.jsxs("div",{className:lt.sidebarFooter,children:[b.jsx(Nm,{className:lt.sidebarThemeToggle,iconClassName:lt.sidebarThemeIcon}),b.jsx(ZC,{variant:"sidebar",showText:f})]})]})},HU="_layoutWrapper_ysxiy_1",FU="_innerWrapper_ysxiy_13",qU="_mainContent_ysxiy_21",Al={layoutWrapper:HU,innerWrapper:FU,mainContent:qU},GU=()=>{const n=In(),e=Oo(),t=ri(),i=Mo(),{userData:a}=Ue(M=>M.auth);oU();const{teams:l}=Ue(M=>M.teams),{isMobileSidebarOpen:c,isDesktopSidebarExpanded:f,lastVisitedPaths:m}=Ue(M=>M.ui),p=t.pathname.includes("/settings")?Wt.SETTINGS:t.pathname.includes("/dashboard")?Wt.DASHBOARD:Wt.ROSTER,{teamName:y,positionName:v,section:T}=i,w=v||T||null,N=p!==Wt.DASHBOARD;O.useEffect(()=>{const M=p===Wt.ROSTER&&!y,L=p===Wt.SETTINGS&&!w;if(t.pathname.startsWith("/app/")&&!M&&!L&&p!==Wt.DASHBOARD){const U=t.pathname+t.search;n(Xj({tabId:p,path:U}))}},[t.pathname,t.search,p,y,w,n]),O.useEffect(()=>{var q;const M=t.pathname==="/app"||t.pathname==="/app/",L=p===Wt.ROSTER&&!y,U=p===Wt.SETTINGS&&!w;if(M)e(m[Wt.DASHBOARD]||"/app/dashboard",{replace:!0});else if(L){const te=m[Wt.ROSTER];if(te)e(te,{replace:!0});else if((q=a==null?void 0:a.teams)!=null&&q[0]&&l.length>0){const ee=l.find($=>$.name===a.teams[0]);ee&&e(`/app/roster/${ee.name}/All`,{replace:!0})}}else if(U){const te=m[Wt.SETTINGS];e(te||`/app/settings/${Pl.PROFILE}`,{replace:!0})}},[p,y,w,a,l,e,t.pathname,t.search,m]);const V=()=>{const M=uv.find(U=>U.id===p),L=M?M.label:"GIG ROSTER";return y&&w?`${y}  ${w}`:y||(w?`${L}  ${w}`:L)};return b.jsxs("div",{className:`${Al.layoutWrapper} ${c?Al.menuOpen:""} ${f?Al.sidebarExpanded:Al.sidebarCollapsed}`,children:[N&&b.jsx(BU,{}),b.jsxs("div",{className:Al.innerWrapper,children:[b.jsx(q3,{title:V(),hasSideNav:N}),b.jsx("main",{className:Al.mainContent,children:b.jsx(XA,{})}),b.jsx(AU,{})]}),b.jsx(vU,{})]})},$U="_rosterSaveFooter_1ce1v_1",KU="_saveFooterContent_1ce1v_23",YU="_changesLabel_1ce1v_32",QU="_saveFooterActions_1ce1v_37",XU="_saveBtn_1ce1v_42",WU="_cancelBtn_1ce1v_57",JU="_sidebarCollapsed_1ce1v_77",ZU="_noSidebar_1ce1v_81",fa={rosterSaveFooter:$U,saveFooterContent:KU,changesLabel:YU,saveFooterActions:QU,saveBtn:XU,cancelBtn:WU,sidebarCollapsed:JU,noSidebar:ZU},fu=({label:n="You have unsaved changes",onSave:e,onCancel:t,isSaving:i,saveText:a="Save",discardText:l="Discard",hasSideNav:c=!0})=>{const{isDesktopSidebarExpanded:f}=Ue(p=>p.ui),m=[fa.rosterSaveFooter,c?"":fa.noSidebar,!f&&c?fa.sidebarCollapsed:""].filter(Boolean).join(" ");return b.jsx("div",{className:m,children:b.jsxs("div",{className:fa.saveFooterContent,children:[b.jsx("span",{className:fa.changesLabel,children:n}),b.jsxs("div",{className:fa.saveFooterActions,children:[b.jsx("button",{className:fa.cancelBtn,onClick:t,disabled:i,children:l}),b.jsx("button",{className:fa.saveBtn,onClick:e,disabled:i,children:i?"Saving...":a})]})]})})},fd=(n,e,t)=>{const i=[],a=new Date;a.setHours(0,0,0,0);const l=a.getFullYear(),c=e||l,f=t||l,m={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},p=n.map(w=>m[w]);let y;c===l?y=new Date(a):y=new Date(c,0,1),y.setHours(0,0,0,0);const v=new Date(f,11,31);v.setHours(23,59,59,999);const T=new Date(y);for(;T.getTime()<=v.getTime();)p.includes(T.getDay())&&i.push(new Date(T)),T.setDate(T.getDate()+1);return i.sort((w,N)=>w.getTime()-N.getTime()),i.map(w=>tR(w))},e6=(n,e,t=5)=>{const i=[],a=new Date(e);a.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(m=>l[m]),f=new Date(a);for(;i.length<t;){f.setDate(f.getDate()-1),c.includes(f.getDay())&&i.push(new Date(f));const m=new Date(a);if(m.setFullYear(m.getFullYear()-1),f<m)break}return i.map(m=>tR(m)).sort()},t6={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},dd=jr("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=ws(kt,"users"),i=Va(t,ym("teams","array-contains",n)),a=await uu(i),l=[];return a.forEach(c=>{l.push(c.data())}),l.sort((c,f)=>(c.name||"").localeCompare(f.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),md=jr("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:i})=>{if(!n||!e)return[];try{const c=i().positions.positions.filter(w=>w.parentId===e),m=[e,...c.map(w=>w.name)].map(w=>`${n}|${w}`),p=ws(kt,"users"),y=Va(p,ym("indexedAssignments","array-contains-any",m)),v=await uu(y),T=[];return v.forEach(w=>{T.push(w.data())}),T.sort((w,N)=>(w.name||"").localeCompare(N.name||""))}catch(a){return console.error("Error fetching users:",a),t("Failed to load users.")}}),pd=jr("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=Kn(kt,"metadata","teams"),i=await oh(t);if(i.exists()){const a=i.data();return(Array.isArray(a.list)?a.list.map(f=>({...f,preferredDays:f.preferredDays||[],positions:f.positions||[]})):[]).find(f=>f.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),lR=La({name:"rosterView",initialState:t6,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=e6(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=fd(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,i=fd(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...i]}}},extraReducers:n=>{n.addCase(md.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(md.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(md.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(dd.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(dd.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(dd.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(pd.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(pd.fulfilled,(e,t)=>{var i;e.currentTeamData=t.payload,(i=t.payload)!=null&&i.preferredDays&&(e.rosterDates=fd(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(pd.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:uR,resetToUpcomingDates:cR,loadNextYearDates:n6}=lR.actions,r6=lR.reducer,i6="_dashboardContainer_y5fm3_1",s6="_dashboardHeader_y5fm3_10",a6="_dashboardHeaderActions_y5fm3_24",o6="_clearPastBtn_y5fm3_32",l6="_eventNameContainer_y5fm3_48",u6="_dashboardEventNameInput_y5fm3_55",c6="_dashboardEventNameInputHasEvent_y5fm3_79",h6="_carouselOuterWrapper_y5fm3_90",f6="_eventsCarouselTrack_y5fm3_98",d6="_eventCardWrapper_y5fm3_112",m6="_peek_y5fm3_123",p6="_active_y5fm3_129",g6="_eventCardDate_y5fm3_135",y6="_dashboardTodayBadge_y5fm3_147",_6="_teamCardsContainer_y5fm3_158",v6="_teamEventCard_y5fm3_166",E6="_dashboardThemeToggle_y5fm3_174",T6="_teamEventHeader_y5fm3_178",b6="_teamCardEmoji_y5fm3_197",S6="_teamCardName_y5fm3_201",A6="_copyRosterBtn_y5fm3_205",w6="_copyRosterBtnSuccess_y5fm3_226",C6="_teamEventDetails_y5fm3_232",R6="_posAssignmentRow_y5fm3_238",I6="_posEmojiLabel_y5fm3_244",x6="_assignedNames_y5fm3_250",N6="_unassigned_y5fm3_256",D6="_meTag_y5fm3_264",O6="_carouselPagination_y5fm3_286",M6="_dashboardEmpty_y5fm3_295",Tt={dashboardContainer:i6,dashboardHeader:s6,dashboardHeaderActions:a6,clearPastBtn:o6,eventNameContainer:l6,dashboardEventNameInput:u6,dashboardEventNameInputHasEvent:c6,carouselOuterWrapper:h6,eventsCarouselTrack:f6,eventCardWrapper:d6,peek:m6,active:p6,eventCardDate:g6,dashboardTodayBadge:y6,teamCardsContainer:_6,teamEventCard:v6,dashboardThemeToggle:E6,teamEventHeader:T6,teamCardEmoji:b6,teamCardName:S6,copyRosterBtn:A6,copyRosterBtnSuccess:w6,teamEventDetails:C6,posAssignmentRow:R6,posEmojiLabel:I6,assignedNames:x6,unassigned:N6,meTag:D6,carouselPagination:O6,dashboardEmpty:M6},P6=()=>{const n=In(),[e,t]=$D(),i=e.get("date"),{userData:a}=Ue(ue=>ue.auth),{teams:l}=Ue(ue=>ue.teams),{entries:c,dirtyEntries:f,loading:m,initialLoad:p,saving:y}=Ue(ue=>ue.roster),{positions:v}=Ue(ue=>ue.positions),[T,w]=O.useState([]),[N,V]=O.useState(!1),[M,L]=O.useState(null),[U,q]=O.useState(0),[te,ee]=O.useState(0),[$,S]=O.useState(!1),C=O.useRef(null),R=O.useRef(!1),k=Object.keys(f).length>0;O.useEffect(()=>{const ue=C.current;if(!ue)return;const ve=new ResizeObserver(Ae=>{for(const ke of Ae){const je=ke.contentRect.width;je>0&&ee(je)}});return ve.observe(ue),()=>ve.disconnect()},[m,N,p]);const P=O.useMemo(()=>{const ue=vs();if(!(a!=null&&a.teams)||l.length===0)return[];const ve=l.filter(je=>a.teams.includes(je.name)),Ae=new Set;ve.forEach(je=>{fd(je.preferredDays).forEach(Et=>Ae.add(Et))});const ke=Array.from(Ae).sort();return i&&i<ue?[i]:ke.filter(je=>{const mt=je;if(i===mt)return!0;const Et=c[mt]||f[mt];return Et?ve.some(be=>{var Qe;const Fe=((Qe=Et.teams)==null?void 0:Qe[be.name])||{};return Object.values(Fe).some($t=>$t.length>0)}):!1})},[a,l,c,f,i]);O.useEffect(()=>{if(P.length===0||!C.current||m||te===0)return;const ue=C.current,ve=(Ae,ke)=>{const je=ue.offsetWidth||te;je!==0&&(ue.style.scrollSnapType="none",ue.scrollTo({left:je*Ae,behavior:ke?"smooth":"auto"}),setTimeout(()=>{ue&&(ue.style.scrollSnapType="x mandatory"),S(!0)},50),q(Ae),R.current=!0)};if(i){const Ae=P.findIndex(ke=>ke===i);if(Ae>=0){const ke=Math.round(ue.scrollLeft/(ue.offsetWidth||te||1));!R.current||ke!==Ae?requestAnimationFrame(()=>{ve(Ae,R.current)}):S(!0)}else S(!0)}else ue.scrollLeft!==0?ve(0,!0):S(!0),R.current=!0},[i,P,m,te]);const j=()=>{t({},{replace:!0})};O.useEffect(()=>{(async()=>{if(!(!(a!=null&&a.teams)||a.teams.length===0)){V(!0);try{const ve=ws(kt,"users"),Ae=Va(ve,ym("teams","array-contains-any",a.teams)),ke=await uu(Ae),je=[];ke.forEach(mt=>je.push(mt.data())),w(je)}catch(ve){console.error("Error fetching users for dashboard:",ve)}finally{V(!1)}}})()},[a==null?void 0:a.teams]);const x=O.useCallback(ue=>{if(!ue||!(a!=null&&a.teams)||l.length===0)return null;const ve=ue,Ae=f[ve]||c[ve],mt=l.filter(Et=>a.teams.includes(Et.name)).sort((Et,be)=>{const Fe=a.teams.indexOf(Et.name),Qe=a.teams.indexOf(be.name);return Fe-Qe}).map(Et=>{var Dt;const be=((Dt=Ae==null?void 0:Ae.teams)==null?void 0:Dt[Et.name])||{},Fe=[],Qe=Et.positions.map(Qn=>Qn.name);let $t=0;return Qe.forEach(Qn=>{const ir=v.find(zt=>zt.name===Qn),Ot=[];Object.entries(be).forEach(([zt,Ur])=>{if(Ur.includes(Qn)){const Fi=T.find(Bt=>Bt.email===zt);Fi?Ot.push(Fi):Ot.push({email:zt,name:zt}),$t++}});const Jt=[...Ot].sort((zt,Ur)=>ir!=null&&ir.sortByGender&&zt.gender!==Ur.gender?zt.gender==="Male"?-1:Ur.gender==="Male"?1:(zt.gender||"").localeCompare(Ur.gender||""):(zt.name||"").localeCompare(Ur.name||""));Fe.push({posName:Qn,emoji:(ir==null?void 0:ir.emoji)||"",assignedUsers:Jt.map(zt=>({name:zt.name||zt.email||"Unknown",isMe:zt.email===a.email}))})}),{teamName:Et.name,teamEmoji:Et.emoji,positions:Fe,hasAssignments:$t>0}}).filter(Et=>Et.hasAssignments);return mt.length>0?mt:null},[c,f,a,l,v,T]),le=(ue,ve,Ae,ke,je)=>{const Et=new Date(ue).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"});let be="";je&&(be+=` ${je} 
`),be+=`${Ae} ${ve}  ${Et}
`,ke.forEach(Fe=>{const Qe=Fe.assignedUsers.length>0?Fe.assignedUsers.map($t=>$t.name).join(", "):"-";be+=`${Fe.emoji}: ${Qe}
`}),navigator.clipboard.writeText(be).then(()=>{const Fe=`${ue}-${ve}`;L(Fe),setTimeout(()=>L(null),2e3)})},me=()=>{if(!C.current)return;const ue=C.current,ve=ue.offsetWidth,Ae=Math.round(ue.scrollLeft/ve);if(Ae!==U&&P[Ae]){q(Ae);const ke=P[Ae];if(i!==ke){const je=vs();Ae===0&&je===ke?t({},{replace:!0}):t({date:ke},{replace:!0})}}},G=(ue,ve)=>{n(X3({date:ue,eventName:ve}))},he=()=>{n(xc(f))},pe=()=>{n(aR())};if(m&&!p||N)return b.jsx(hu,{});if(P.length===0)return b.jsxs("div",{className:Tt.dashboardEmpty,children:[b.jsx("h2",{children:"No upcoming events found"}),b.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const Pe=P[U],Oe=vs(),H=Pe&&Pe<Oe,ie=H?"Previous Event":"Upcoming Events",ge=ue=>new Date(ue).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),Ee=(ue,ve=!1)=>{const Ae=x(ue);if(!Ae)return null;const ke=f[ue]||c[ue],je=ke==null?void 0:ke.eventName;return b.jsx("div",{className:Tt.teamCardsContainer,children:Ae.map(mt=>{const Et=M===`${ue}-${mt.teamName}`;return b.jsxs("div",{className:Tt.teamEventCard,children:[b.jsxs("div",{className:Tt.teamEventHeader,children:[b.jsxs("h3",{children:[b.jsx("span",{className:Tt.teamCardEmoji,children:mt.teamEmoji}),b.jsx("span",{className:Tt.teamCardName,children:mt.teamName})]}),!ve&&b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[b.jsx(Nm,{className:Tt.dashboardThemeToggle}),b.jsx("button",{className:`${Tt.copyRosterBtn} ${Et?Tt.copyRosterBtnSuccess:""}`,onClick:()=>le(ue,mt.teamName,mt.teamEmoji,mt.positions,je),title:"Copy to clipboard",children:Et?b.jsxs(b.Fragment,{children:[b.jsx(Ij,{size:16})," Copied"]}):b.jsxs(b.Fragment,{children:[b.jsx(Nj,{size:16})," Copy"]})})]})]}),b.jsx("div",{className:Tt.teamEventDetails,children:mt.positions.map(be=>b.jsxs("div",{className:Tt.posAssignmentRow,children:[b.jsx("span",{className:Tt.posEmojiLabel,title:be.posName,children:be.emoji}),b.jsx("span",{className:`${Tt.assignedNames} ${be.assignedUsers.length===0?Tt.unassigned:""}`,children:be.assignedUsers.length>0?be.assignedUsers.map((Fe,Qe)=>b.jsxs(O.Fragment,{children:[Fe.name,Fe.isMe&&b.jsx("span",{className:Tt.meTag,children:"Me"}),Qe<be.assignedUsers.length-1?", ":""]},`${Fe.name}-${Qe}`)):"Unassigned"})]},be.posName))})]},mt.teamName)})})};return b.jsxs("div",{className:Tt.dashboardContainer,children:[b.jsxs("div",{className:Tt.dashboardHeader,children:[b.jsx("h1",{children:ie}),b.jsx("div",{className:Tt.dashboardHeaderActions,children:H&&b.jsx("button",{className:Tt.clearPastBtn,onClick:j,children:"Reset to upcoming"})})]}),b.jsx("div",{className:Tt.carouselOuterWrapper,style:{opacity:$?1:0,transition:"opacity 0.3s ease-in-out"},children:b.jsx("div",{className:Tt.eventsCarouselTrack,ref:C,onScroll:me,children:P.map((ue,ve)=>{const Ae=ue,ke=f[Ae]||c[Ae],je=(ke==null?void 0:ke.eventName)||"";return b.jsxs("div",{className:`${Tt.eventCardWrapper} ${ve===U?Tt.active:Tt.peek}`,children:[b.jsx("div",{className:Tt.eventNameContainer,children:b.jsx("input",{type:"text",className:`${Tt.dashboardEventNameInput} ${je?Tt.dashboardEventNameInputHasEvent:""}`,placeholder:"Event name (e.g. Easter Sunday)",value:je,onChange:mt=>G(ue,mt.target.value),disabled:ve!==U})}),b.jsxs("div",{className:Tt.eventCardDate,children:[ge(ue),ue===Oe&&b.jsx("span",{className:Tt.dashboardTodayBadge,children:"TODAY"})]}),Ee(ue,ve!==U)]},ue)})})}),b.jsxs("div",{className:Tt.carouselPagination,children:[U+1," / ",P.length]}),k&&b.jsx(fu,{label:"Unsaved event labels",saveText:"Save Changes",onSave:he,onCancel:pe,isSaving:y,hasSideNav:!1})]})},k6="_button_4hh4s_1",V6="_primary_4hh4s_26",L6="_secondary_4hh4s_31",j6="_icon_4hh4s_42",U6="_small_4hh4s_48",$f={button:k6,primary:V6,secondary:L6,delete:"_delete_4hh4s_36",icon:j6,small:U6},tr=({variant:n="primary",size:e="medium",isIcon:t=!1,className:i="",children:a,...l})=>{const c=[$f.button,$f[n],e==="small"?$f.small:"",t?$f.icon:"",i].filter(Boolean).join(" ");return b.jsx("button",{className:c,...l,children:a})},z6="_pillGroup_ti99d_1",B6="_pillGroupNowrap_ti99d_9",H6="_pill_ti99d_1",F6="_pillActive_ti99d_35",q6="_pillDisabled_ti99d_40",G6="_pillText_ti99d_61",kl={pillGroup:z6,pillGroupNowrap:B6,pill:H6,pillActive:F6,pillDisabled:q6,pillText:G6},Fl=({children:n,nowrap:e})=>b.jsx("div",{className:`${kl.pillGroup} ${e?kl.pillGroupNowrap:""}`,children:n}),vr=({colour:n,isDropdown:e,isActive:t,isDisabled:i,minWidth:a,onClick:l,children:c})=>{const[f,m]=O.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),b.jsxs("div",{className:`${kl.pill} ${kl.pillText} ${t?kl.pillActive:""} ${i?kl.pillDisabled:""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:a?`${a}px`:"fit-content"},onClick:p=>{i||(m(y=>!y),l&&l(p))},children:[c,e&&b.jsx(KC,{style:{rotate:f?"90deg":"0"}})]})},$6="_settingsSection_5m9oe_1",K6="_sectionLabel_5m9oe_7",Y6="_subSectionGroup_5m9oe_17",Q6="_subSectionHeader_5m9oe_21",X6="_formGroup_5m9oe_31",W6="_summaryButton_5m9oe_35",J6="_summaryPrimary_5m9oe_57",Z6="_summarySeparator_5m9oe_66",e9="_summarySecondary_5m9oe_73",t9="_summaryEmoji_5m9oe_78",n9="_remainingCount_5m9oe_82",yn={settingsSection:$6,sectionLabel:K6,subSectionGroup:Y6,subSectionHeader:Q6,formGroup:X6,summaryButton:W6,summaryPrimary:J6,summarySeparator:Z6,summarySecondary:e9,summaryEmoji:t9,remainingCount:n9},hR=({selectedTeams:n,teamPositions:e,onToggleTeam:t,onTogglePosition:i,onMoveTeam:a,availableTeams:l,globalPositions:c})=>b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:yn.formGroup,children:[b.jsx("label",{className:yn.sectionLabel,children:"Teams"}),b.jsx(Fl,{children:l.map(f=>{const m=n.includes(f.name);return b.jsxs(vr,{onClick:()=>t(f.name),isActive:m,children:[b.jsx("span",{children:f.emoji})," ",f.name]},f.name)})})]}),n.length>0&&b.jsxs("div",{className:yn.settingsSection,children:[b.jsx("label",{className:yn.sectionLabel,children:"Positions per Team"}),n.map((f,m)=>{var v;const p=l.find(T=>T.name===f);if(!p)return null;const y=((v=p.positions)==null?void 0:v.filter(T=>!T.parentId))||[];return b.jsxs("div",{className:yn.subSectionGroup,children:[b.jsxs("div",{className:yn.subSectionHeader,style:{justifyContent:"space-between"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.emoji," ",p.name]}),a&&b.jsxs("div",{style:{display:"flex",gap:"4px"},children:[b.jsx(tr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(f,"up"),disabled:m===0,children:""}),b.jsx(tr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(f,"down"),disabled:m===n.length-1,children:""})]})]}),y.length>0?b.jsx(Fl,{children:y.map(T=>{var M;const w=c.find(L=>L.name===T.name),N=!!(w!=null&&w.isCustom),V=(M=e[f])==null?void 0:M.includes(T.name);return b.jsxs(vr,{onClick:()=>i(f,T.name),isActive:V,isDisabled:N,colour:T.colour,children:[b.jsx("span",{children:T.emoji})," ",T.name]},T.name)})}):b.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-dim)",margin:"8px 0"},children:"No assignable positions for this team."})]},f)})]})]}),r9="_formGroup_163vy_1",i9="_formInput_163vy_16",s9="_formSelect_163vy_52",a9="_colorInput_163vy_86",o9="_fieldHint_163vy_104",gs={formGroup:r9,formInput:i9,formSelect:s9,colorInput:a9,fieldHint:o9},l9="_profileCard_1qei9_1",u9="_profileReadonly_1qei9_11",c9="_actionContainer_1qei9_59",fy={profileCard:l9,profileReadonly:u9,actionContainer:c9},fR=({className:n})=>{const e=In(),{userData:t,firebaseUser:i}=Ue(M=>M.auth),{teams:a}=Ue(M=>M.teams),{positions:l}=Ue(M=>M.positions),[c,f]=O.useState({name:"",gender:"",isActive:!0,teams:[],teamPositions:{}}),[m,p]=O.useState("idle");O.useEffect(()=>{!t||m==="saving"||f(M=>!(M.name!==(t.name||"")||M.gender!==(t.gender||"")||M.isActive!==(t.isActive??!0)||JSON.stringify(M.teams)!==JSON.stringify(t.teams||[])||JSON.stringify(M.teamPositions)!==JSON.stringify(t.teamPositions||{}))||m==="idle"?{name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}}:M)},[t,m]);const y=O.useMemo(()=>{if(!t)return!1;const M={name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}};return JSON.stringify(c)!==JSON.stringify(M)},[c,t]),v=async()=>{if(i){p("saving");try{await e(cd({uid:i.uid,data:c})).unwrap(),p("success"),setTimeout(()=>p("idle"),2e3)}catch(M){console.error(M),p("idle")}}},T=()=>{t&&f({name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}})},w=M=>{f(L=>{const U=L.teams.includes(M),q=U?L.teams.filter(ee=>ee!==M):[...L.teams,M],te={...L.teamPositions};return U?delete te[M]:te[M]||(te[M]=[]),{...L,teams:q,teamPositions:te}})},N=(M,L)=>{f(U=>{const q=U.teamPositions[M]||[],te=q.includes(L)?q.filter(ee=>ee!==L):[...q,L];return{...U,teamPositions:{...U.teamPositions,[M]:te}}})},V=(M,L)=>{f(U=>{const q=U.teams.indexOf(M);if(q===-1)return U;const te=L==="up"?q-1:q+1;if(te<0||te>=U.teams.length)return U;const ee=[...U.teams];return[ee[q],ee[te]]=[ee[te],ee[q]],{...U,teams:ee}})};return t?b.jsxs("section",{className:`${fy.profileCard} ${n||""}`,children:[b.jsx("div",{className:fy.profileReadonly,children:b.jsxs("p",{children:[b.jsx("strong",{children:"Email:"})," ",t.email]})}),b.jsxs("div",{className:gs.formGroup,children:[b.jsx("label",{children:"Name"}),b.jsx("input",{type:"text",value:c.name,onChange:M=>f(L=>({...L,name:M.target.value})),className:gs.formInput})]}),b.jsxs("div",{className:gs.formGroup,children:[b.jsx("label",{children:"Gender"}),b.jsx(Fl,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(M=>b.jsx(vr,{colour:M.colour,onClick:()=>f(L=>({...L,gender:M.value})),isActive:c.gender===M.value,children:M.value},M.value))})]}),b.jsx(hR,{selectedTeams:c.teams,teamPositions:c.teamPositions,onToggleTeam:w,onTogglePosition:N,onMoveTeam:V,availableTeams:a,globalPositions:l}),b.jsxs("div",{className:gs.formGroup,children:[b.jsx("label",{children:"Availability Status"}),b.jsx(vr,{colour:c.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>f(M=>({...M,isActive:!M.isActive})),isActive:!0,children:c.isActive?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),b.jsx("p",{className:gs.fieldHint,children:"Turn off if you want to be hidden from the roster."})]}),b.jsx("div",{className:fy.actionContainer,children:b.jsx(tr,{variant:"delete",onClick:()=>xo.signOut(),children:"Logout"})}),y&&b.jsx(fu,{label:"Unsaved profile changes",saveText:"Update Profile",onSave:v,onCancel:T,isSaving:m==="saving"})]}):b.jsx("div",{children:"Loading profile..."})},h9="_guestContainer_1m4dd_1",f9="_profileCardOverride_1m4dd_14",d9="_guestHeader_1m4dd_21",m9="_brandTitle_1m4dd_28",p9="_guestThemeToggleContainer_1m4dd_32",g9="_pendingLabel_1m4dd_38",wl={guestContainer:h9,profileCardOverride:f9,guestHeader:d9,brandTitle:m9,guestThemeToggleContainer:p9,pendingLabel:g9},y9=()=>{const{userData:n,firebaseUser:e,loading:t}=Ue(i=>i.auth);return t?b.jsx(eu,{}):e?n?n.isApproved?b.jsx(Ta,{to:"/app",replace:!0}):b.jsxs("div",{className:wl.guestContainer,children:[b.jsxs("header",{className:wl.guestHeader,children:[b.jsx("h2",{className:wl.brandTitle,children:"God is Good"}),b.jsx("p",{className:wl.pendingLabel,children:"PENDING ADMIN APPROVAL"}),b.jsx("div",{className:wl.guestThemeToggleContainer,children:b.jsx(Nm,{})})]}),b.jsx(fR,{className:wl.profileCardOverride})]}):b.jsx(eu,{}):b.jsx(Ta,{to:"/login",replace:!0})},_9="_loginContainer_12x6v_1",v9="_loginHeader_12x6v_12",E9="_brandTitle_12x6v_16",T9="_brandSubtitle_12x6v_24",b9="_loginButtonContainer_12x6v_33",S9="_loginButton_12x6v_33",A9="_google_12x6v_57",ho={loginContainer:_9,loginHeader:v9,brandTitle:E9,brandSubtitle:T9,loginButtonContainer:b9,loginButton:S9,google:A9},w9=()=>{const{firebaseUser:n,loading:e}=Ue(i=>i.auth),t=()=>hV(xo,aL);return e?null:n?b.jsx(Ta,{to:"/",replace:!0}):b.jsxs("div",{className:ho.loginContainer,children:[b.jsxs("header",{className:ho.loginHeader,children:[b.jsx("h1",{className:ho.brandTitle,children:"God is Good"}),b.jsx("p",{className:ho.brandSubtitle,children:"Worship Team Roster"})]}),b.jsx("div",{className:ho.loginButtonContainer,children:b.jsxs("button",{onClick:t,className:`${ho.loginButton} ${ho.google}`,children:[b.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},Om=()=>{const n=In(),e=Oo(),{teamName:t,positionName:i}=Mo(),{userData:a}=Ue(be=>be.auth),{users:l,allTeamUsers:c,rosterDates:f,currentTeamData:m,loadingUsers:p,loadingTeam:y,loadingAllTeamUsers:v,error:T}=Ue(be=>be.rosterView),{entries:w,dirtyEntries:N,saving:V,loading:M,initialLoad:L,error:U}=Ue(be=>be.roster),{positions:q,isDirty:te}=Ue(be=>be.positions),{teams:ee}=Ue(be=>be.teams),{hiddenUsers:$,rosterAllViewMode:S,peekPositionName:C}=Ue(be=>be.ui),[R,k]=O.useState(null),P=O.useRef(null),j=Object.keys(N).length>0,x=j||te;O.useEffect(()=>{t&&(n(pd(t)),n(dd(t)))},[t,n]),O.useEffect(()=>{i&&t&&!["Absence","All"].includes(i)&&n(md({teamName:t,positionName:i}))},[i,t,n]),O.useEffect(()=>{const be=Fe=>{P.current&&!P.current.contains(Fe.target)&&k(null)};return document.addEventListener("mousedown",be),()=>document.removeEventListener("mousedown",be)},[]);const le=O.useCallback(be=>{!t||!i||n(Zj({teamName:t,positionName:i,userEmail:be}))},[n,t,i]),me=O.useCallback(()=>n(uR()),[n]),G=O.useCallback(()=>n(cR()),[n]),he=O.useCallback(()=>n(n6()),[n]),pe=O.useCallback(be=>{const Fe=be.split("T")[0],Qe=N[Fe]||w[Fe];return Qe?Object.values(Qe.teams).some($t=>Object.values($t).some(Dt=>Dt.length>0)):!1},[w,N]),Pe=O.useCallback(be=>{pe(be)&&e(`/app/dashboard?date=${be}`)},[pe,e]),Oe=O.useCallback(()=>{j&&n(xc(N)),te&&n(ov(q))},[n,N,q,j,te]),H=O.useCallback(()=>{j&&n(aR()),te&&(n(cj()),n(Hl())),k(null)},[n,j,te]),ie=O.useCallback((be,Fe)=>{const Qe=N[be]||w[be];return!!(Qe&&Qe.absence&&Qe.absence[Fe])},[N,w]),ge=O.useCallback((be,Fe)=>{var $t,Dt;const Qe=N[be]||w[be];return((Dt=($t=Qe==null?void 0:Qe.absence)==null?void 0:$t[Fe])==null?void 0:Dt.reason)||""},[N,w]),Ee=O.useCallback(be=>{if(!C||!t)return[];const Fe=be.split("T")[0],Qe=N[Fe]||w[Fe];return!Qe||!Qe.teams[t]?[]:Object.entries(Qe.teams[t]).filter(([,$t])=>$t.includes(C)).map(([$t])=>{const Dt=c.find(Qn=>Qn.email===$t);return(Dt==null?void 0:Dt.name)||$t})},[t,N,w,c,C]),ue=O.useMemo(()=>{var be;return!t||!i?[]:((be=$[t])==null?void 0:be[i])||[]},[$,t,i]),ve=O.useCallback(be=>{const Fe=vs(),Qe=be.split("T")[0];return Qe<Fe?"past-date":Qe===Fe?"today-date":"future-date"},[]),Ae=O.useMemo(()=>vs(),[]),ke=O.useMemo(()=>{const be=vs();return f.length>0&&f[0]<be},[f]),je=O.useMemo(()=>{const be=vs();return f.find(Fe=>Fe.split("T")[0]>=be)},[f]);return{dispatch:n,navigate:e,teamName:t,activePosition:i,userData:a,users:l,allTeamUsers:c,rosterDates:f,currentTeamData:m,entries:w,dirtyEntries:N,isSaving:V,allPositions:q,allTeams:ee,hiddenUsers:$,hiddenUserList:ue,rosterAllViewMode:S,focusedCell:R,setFocusedCell:k,hasDirtyChanges:x,handleToggleVisibility:le,handleLoadPrevious:me,handleResetDates:G,handleLoadNextYear:he,handleDateClick:Pe,handleSave:Oe,handleCancel:H,isUserAbsent:ie,getAbsenceReason:ge,getPeekAssignedUsers:Ee,isLoading:p||y||v||M&&!L,error:T||U,checkHasAssignments:pe,getRowClass:ve,todayKey:Ae,hasPastDates:ke,closestNextDate:je,containerRef:P}},C9="_topControls_edhcc_1",R9="_topControlsLeft_edhcc_14",I9="_viewToggleBar_edhcc_27",x9="_hiddenMembersBar_edhcc_38",N9="_hiddenMembersLabel_edhcc_50",D9="_hiddenMembersList_edhcc_58",O9="_toggleButtonGap_edhcc_64",M9="_unhideButton_edhcc_68",fs={topControls:C9,topControlsLeft:R9,viewToggleBar:I9,hiddenMembersBar:x9,hiddenMembersLabel:N9,hiddenMembersList:D9,toggleButtonGap:O9,unhideButton:M9},P9=({isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,allUsers:a,onToggleVisibility:l})=>{const c=In(),f=!e&&i.length>0;return!f&&!n?null:b.jsx("div",{className:fs.topControls,children:b.jsxs("div",{className:fs.topControlsLeft,children:[n&&b.jsxs("div",{className:fs.viewToggleBar,children:[b.jsxs(tr,{variant:t==="user"?"primary":"secondary",size:"small",onClick:()=>c(hA("user")),className:fs.toggleButtonGap,children:[b.jsx(Gj,{size:18})," ",b.jsx("span",{children:"User View"})]}),b.jsxs(tr,{variant:t==="position"?"primary":"secondary",size:"small",onClick:()=>c(hA("position")),className:fs.toggleButtonGap,children:[b.jsx(Mj,{size:18})," ",b.jsx("span",{children:"Position View"})]})]}),f&&b.jsxs("div",{className:fs.hiddenMembersBar,children:[b.jsx("span",{className:fs.hiddenMembersLabel,children:"Hidden Members:"}),b.jsx("div",{className:fs.hiddenMembersList,children:i.map(m=>{const p=a.find(y=>y.email===m);return b.jsxs(tr,{variant:"secondary",size:"small",onClick:()=>l(m),className:fs.unhideButton,children:[(p==null?void 0:p.name)||m," ",b.jsx(fh,{size:14})]},m)})})]})]})})},k9="_rosterTableWrapper_13wn3_1",V9="_rosterTableContainer_13wn3_9",L9="_rosterTable_13wn3_1",j9="_rosterTableError_13wn3_52",U9="_loadMoreFooter_13wn3_59",z9="_loadNextYearBtn_13wn3_68",da={rosterTableWrapper:k9,rosterTableContainer:V9,rosterTable:L9,rosterTableError:j9,loadMoreFooter:U9,loadNextYearBtn:z9},Mm=({isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,users:a,handleToggleVisibility:l,isLoading:c,error:f,hasDirtyChanges:m,isSaving:p,handleSave:y,handleCancel:v,renderHeader:T,children:w,onLoadNextYear:N,containerRef:V,focusedCell:M,setFocusedCell:L,rosterDates:U,colCount:q,onCellClick:te})=>(O.useEffect(()=>{const ee=$=>{const S=$.target;if(S.tagName==="INPUT"||S.tagName==="TEXTAREA")return;if($.key==="Escape"){$.preventDefault(),v();return}if(!M)return;const{row:C,col:R,table:k}=M,P=U.length;switch($.key){case"ArrowUp":$.preventDefault(),C>0&&L({row:C-1,col:R,table:k});break;case"ArrowDown":$.preventDefault(),C<P-1&&L({row:C+1,col:R,table:k});break;case"ArrowLeft":$.preventDefault(),R>0&&L({row:C,col:R-1,table:k});break;case"ArrowRight":$.preventDefault(),R<q-1&&L({row:C,col:R+1,table:k});break;case"Tab":$.preventDefault(),$.shiftKey?C>0&&L({row:C-1,col:R,table:k}):C<P-1&&L({row:C+1,col:R,table:k});break;case" ":$.preventDefault(),te&&te(C,R);break;case"Enter":m&&($.preventDefault(),y());break}};return window.addEventListener("keydown",ee),()=>window.removeEventListener("keydown",ee)},[M,U.length,q,te,y,v,m,L]),c?b.jsx(hu,{}):f?b.jsxs("div",{className:da.rosterTableError,children:["Error: ",f]}):b.jsxs("div",{ref:V,className:da.rosterTableWrapper,tabIndex:-1,children:[b.jsx(P9,{isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,allUsers:a,onToggleVisibility:l}),b.jsxs("div",{className:da.rosterSection,children:[b.jsx("div",{className:da.rosterTableContainer,children:b.jsxs("table",{className:`${da.rosterTable} ${e?da.absenceTable:""}`,children:[T(),b.jsx("tbody",{children:w})]})}),b.jsx("div",{className:da.loadMoreFooter,children:b.jsx("button",{className:da.loadNextYearBtn,onClick:N,children:"Load Next Year "})})]}),m&&b.jsx(fu,{onSave:y,onCancel:v,isSaving:p,saveText:"Save Roster"})]})),B9="_rosterTableHeaderCell_gmic9_1",H9="_stickyCol_gmic9_10",F9="_dateHeaderContent_gmic9_26",q9="_dateHeaderActions_gmic9_33",G9="_loadPrevBtn_gmic9_38",$9="_resetDatesBtn_gmic9_60",K9="_highlightedHeader_gmic9_70",Y9="_genderDividerCell_gmic9_75",Tn={rosterTableHeaderCell:B9,stickyCol:H9,dateHeaderContent:F9,dateHeaderActions:q9,loadPrevBtn:G9,resetDatesBtn:$9,highlightedHeader:K9,genderDividerCell:Y9},Q9="_peekHeader_12re3_1",X9="_peekSelector_12re3_9",W9="_peekCell_12re3_26",J9="_stickyRight_12re3_36",vo={peekHeader:Q9,peekSelector:X9,peekCell:W9,stickyRight:J9},Z9=O.memo(()=>{const n=In(),{positionName:e}=Mo(),{peekPositionName:t}=Ue(l=>l.ui),{currentTeamData:i}=Ue(l=>l.rosterView),a=O.useMemo(()=>i?i.positions.filter(l=>l.name!==e):[],[i,e]);return b.jsx("th",{className:`${vo.peekHeader} ${vo.stickyRight}`,children:b.jsxs("select",{className:vo.peekSelector,value:t||"",onChange:l=>n(e3(l.target.value||null)),children:[b.jsx("option",{value:"",children:"Peek Position..."}),a.map(l=>b.jsxs("option",{value:l.name,children:[l.emoji," ",l.name]},l.name))]})})}),Pm=O.memo(({showPeek:n,children:e})=>{const t=In(),{rosterDates:i}=Ue(f=>f.rosterView),a=O.useMemo(()=>{const f=vs();return i.length>0&&i[0]<f},[i]),l=()=>t(uR()),c=()=>t(cR());return b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:`${Tn.rosterTableHeaderCell} ${Tn.stickyCol}`,children:b.jsxs("div",{className:Tn.dateHeaderContent,children:["Date",b.jsxs("div",{className:Tn.dateHeaderActions,children:[b.jsx("button",{className:Tn.loadPrevBtn,onClick:l,title:"Load previous dates",children:""}),a&&b.jsx("button",{className:`${Tn.loadPrevBtn} ${Tn.resetDatesBtn}`,onClick:c,title:"Reset dates",children:""})]})]})}),e,n&&b.jsx(Z9,{})]})})}),e5=O.memo(({allTeamUsers:n,showPeek:e})=>b.jsxs(Pm,{showPeek:e,children:[n.map(t=>b.jsx("th",{className:Tn.rosterTableHeaderCell,children:t.name},t.email)),b.jsx("th",{className:`${Tn.genderDividerCell}`})]})),t5="_absentCell_x5xrn_1",n5="_absenceInputContainer_x5xrn_5",r5="_absenceReasonInput_x5xrn_24",i5="_removeAbsenceBtn_x5xrn_36",s5="_absenceRosterCell_x5xrn_57",fc={absentCell:t5,absenceInputContainer:n5,absenceReasonInput:r5,removeAbsenceBtn:i5,absenceRosterCell:s5},a5="_rosterCell_1ogb2_1",o5="_clickable_1ogb2_6",l5="_disabled_1ogb2_15",u5="_focused_1ogb2_21",c5="_highlightedCell_1ogb2_28",h5="_absentStrike_1ogb2_32",f5="_reasonPopover_1ogb2_38",d5="_popoverBottom_1ogb2_56",m5="_noReason_1ogb2_81",Fn={rosterCell:a5,clickable:o5,disabled:l5,focused:u5,highlightedCell:c5,absentStrike:h5,reasonPopover:f5,popoverBottom:d5,noReason:m5},Gc=O.memo(({type:n,rowIndex:e,isFocused:t,onFocus:i,absent:a,absenceReason:l,isAssignedOnClosestDate:c,content:f,onClick:m,handleAbsenceReasonChange:p,disabled:y})=>{const v=O.useRef(null);O.useEffect(()=>{t&&v.current&&(v.current.focus(),v.current.scrollIntoView({block:"nearest",inline:"nearest"}))},[t]);const T=[Fn.rosterCell,t?Fn.focused:"",c?Fn.highlightedCell:""];return n==="all-user"?b.jsxs("td",{ref:v,className:[...T,Fn.clickable,a?Fn.absentStrike:""].filter(Boolean).join(" "),tabIndex:0,onClick:m,onFocus:i,children:[a&&t&&b.jsx("div",{className:`${Fn.reasonPopover} ${e===0?Fn.popoverBottom:""}`,children:l||b.jsx("span",{className:Fn.noReason,children:"No reason provided"})}),a?b.jsx("span",{title:l,children:""}):f]}):n==="all-position"?b.jsx("td",{ref:v,className:T.filter(Boolean).join(" "),tabIndex:0,onFocus:i,children:f}):n==="roster-custom"?b.jsx("td",{ref:v,className:[...T,Fn.clickable].filter(Boolean).join(" "),onClick:m,tabIndex:0,onFocus:i,children:f}):n==="roster-user"?b.jsxs("td",{ref:v,className:[...T,y?Fn.disabled:Fn.clickable,a?Fn.absentStrike:""].filter(Boolean).join(" "),onClick:m,tabIndex:0,onFocus:i,children:[a&&t&&b.jsx("div",{className:`${Fn.reasonPopover} ${e===0?Fn.popoverBottom:""}`,children:l||b.jsx("span",{className:Fn.noReason,children:"No reason provided"})}),a?b.jsx("span",{title:l,children:""}):f]}):n==="absence"?b.jsx("td",{ref:v,className:[...T,Fn.clickable,fc.absenceRosterCell,a?fc.absentCell:""].filter(Boolean).join(" "),onClick:m,tabIndex:0,onFocus:i,title:l,children:a?b.jsxs("div",{className:fc.absenceInputContainer,children:[b.jsx("input",{type:"text",className:fc.absenceReasonInput,value:l,placeholder:"Reason...",maxLength:20,autoFocus:t,onClick:w=>w.stopPropagation(),onChange:w=>p==null?void 0:p(w.target.value)}),b.jsx("button",{className:fc.removeAbsenceBtn,onClick:w=>{w.stopPropagation(),m==null||m()},title:"Mark as present",children:b.jsx(lv,{size:14})})]}):""}):null}),p5=O.memo(({dateString:n})=>{const{teamName:e}=Mo(),{peekPositionName:t}=Ue(f=>f.ui),{entries:i,dirtyEntries:a}=Ue(f=>f.roster),{allTeamUsers:l}=Ue(f=>f.rosterView),c=O.useMemo(()=>{if(!t||!e)return[];const f=n.split("T")[0],m=a[f]||i[f];return!m||!m.teams[e]?[]:Object.entries(m.teams[e]).filter(([,p])=>p.includes(t)).map(([p])=>{const y=l.find(v=>v.email===p);return(y==null?void 0:y.name)||p})},[t,e,n,a,i,l]);return c.length===0?b.jsx("td",{className:`${vo.peekCell} ${vo.stickyRight}`}):b.jsx("td",{className:`${vo.peekCell} ${vo.stickyRight}`,children:c.join(", ")})}),g5="_stickyCol_bin2j_1",y5="_dateCell_bin2j_11",_5="_clickable_bin2j_19",v5="_dateCellContent_bin2j_31",E5="_specialEventDot_bin2j_39",T5="_rosterTodayDot_bin2j_50",b5="_pastDate_bin2j_61",S5="_noData_bin2j_65",A5="_closestNextDateRow_bin2j_77",w5="_todayDate_bin2j_78",mr={stickyCol:g5,dateCell:y5,clickable:_5,dateCellContent:v5,specialEventDot:E5,rosterTodayDot:T5,pastDate:b5,noData:S5,closestNextDateRow:A5,todayDate:w5},km=O.memo(({dateString:n,entries:e,dirtyEntries:t,onDateClick:i,closestNextDate:a,showPeek:l,children:c})=>{const f=O.useMemo(()=>vs(),[]),m=n.split("T")[0],p=m===f,y=m<f,v=t[m]||e[m],T=v==null?void 0:v.eventName,w=O.useMemo(()=>v?Object.values(v.teams).some(V=>Object.values(V).some(M=>M.length>0)):!1,[v]),N=[y?mr.pastDate:"",p?mr.todayDate:mr.futureDate,w?"":mr.noData,T?mr.specialEventRow:"",n===a?mr.closestNextDateRow:""].filter(Boolean).join(" ");return b.jsxs("tr",{className:N,children:[b.jsx("td",{className:`${mr.dateCell} ${mr.stickyCol} ${w?mr.clickable:""}`,onClick:()=>i(n),title:T,children:b.jsxs("div",{className:mr.dateCellContent,children:[T&&b.jsx("span",{className:mr.specialEventDot}),p&&b.jsx("span",{className:mr.rosterTodayDot,title:"Today"}),new Date(n.replace(/-/g,"/")).toLocaleDateString()]})}),c,l&&b.jsx(p5,{dateString:n})]})}),C5=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,allTeamUsers:m,handleAbsenceClick:p,handleAbsenceReasonChange:y,isUserAbsent:v,getAbsenceReason:T,showPeek:w})=>b.jsx(km,{dateString:n,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,showPeek:w,children:m.map((N,V)=>b.jsx(Gc,{type:"absence",dateString:n,rowIndex:e,colIndex:V,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===V&&(t==null?void 0:t.table)==="absence",onFocus:()=>i({row:e,col:V,table:"absence"}),absent:N.email?v(n,N.email):!1,absenceReason:N.email?T(n,N.email):"",onClick:()=>{N.email&&p(n,N.email,e,V)},handleAbsenceReasonChange:M=>{N.email&&y(n,N.email,M)}},N.email))})),R5=()=>{const n=Om(),{dispatch:e,allTeamUsers:t,rosterDates:i,dirtyEntries:a,entries:l,isSaving:c,hiddenUserList:f,closestNextDate:m}=n,p=O.useCallback((w,N,V,M)=>{n.setFocusedCell({row:V,col:M,table:"absence"});const L=n.isUserAbsent(w,N);if(!L){const U=w,q=a[U]||l[U],te=[];if(q&&Object.entries(q.teams).forEach(([ee,$])=>{$[N]&&$[N].length>0&&te.push(`${ee}: ${$[N].join(", ")}`)}),te.length>0){e(So({title:"Clear Existing Assignments?",message:`User is already assigned to:

${te.join(`
`)}

Marking them as absent will remove these assignments. Continue?`,confirmText:"Mark Absent",onConfirm:()=>{e(cy({date:w,userIdentifier:N,isAbsent:!0}))}}));return}}e(cy({date:w,userIdentifier:N,isAbsent:!L}))},[e,n,a,l]),y=O.useCallback((w,N)=>{const V=i[w],M=t[N];V&&(M!=null&&M.email)&&p(V,M.email,w,N)},[i,t,p]),v=O.useCallback((w,N,V)=>{e(cy({date:w,userIdentifier:N,reason:V,isAbsent:!0}))},[e]),T=()=>b.jsx(e5,{allTeamUsers:t,showPeek:!0});return b.jsx(Mm,{...n,isAllView:!1,isAbsenceView:!0,isSaving:c,hiddenUserList:f,renderHeader:T,onLoadNextYear:n.handleLoadNextYear,colCount:t.length,onCellClick:y,children:i.map((w,N)=>b.jsx(C5,{dateString:w,rowIndex:N,entries:l,dirtyEntries:a,closestNextDate:m,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,allTeamUsers:t,handleAbsenceClick:p,handleAbsenceReasonChange:v,isUserAbsent:n.isUserAbsent,getAbsenceReason:n.getAbsenceReason,showPeek:!0},w))})},I5="_allViewPositionHeader_ryktq_1",x5="_allViewPositionName_ryktq_8",N5="_clickableHeader_ryktq_14",dy={allViewPositionHeader:I5,allViewPositionName:x5,clickableHeader:N5},D5=O.memo(({rosterAllViewMode:n,allViewColumns:e,userData:t,currentTeamData:i,teamName:a,navigate:l})=>b.jsx(Pm,{children:n==="user"?e.map(c=>{const f=c.id===(t==null?void 0:t.email);return b.jsx("th",{className:`${Tn.rosterTableHeaderCell} ${f?Tn.isMe:""}`,children:b.jsx(Dm,{displayName:c.name,isMe:f})},c.id)}):((i==null?void 0:i.positions)||[]).map(c=>b.jsx("th",{className:`${Tn.rosterTableHeaderCell} ${dy.clickableHeader}`,onClick:()=>l(`/app/roster/${a}/${c.name}`),children:b.jsxs("div",{className:dy.allViewPositionHeader,children:[b.jsx("span",{children:c.emoji}),b.jsx("span",{className:dy.allViewPositionName,children:c.name})]})},c.name))})),O5=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,rosterAllViewMode:m,allViewColumns:p,currentTeamData:y,getAllViewUserCellContent:v,getAllViewPositionCellContent:T,getAssignmentsForIdentifier:w,navigate:N,teamName:V,isUserAbsent:M,getAbsenceReason:L})=>b.jsx(km,{dateString:n,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,children:m==="user"?p.map((U,q)=>b.jsx(Gc,{type:"all-user",dateString:n,rowIndex:e,colIndex:q,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===q&&(t==null?void 0:t.table)==="all",onFocus:()=>i({row:e,col:q,table:"all"}),absent:U.id?M(n,U.id):!1,absenceReason:U.id?L(n,U.id):"",content:U.id?v(n,U.id):null,onClick:()=>{const te=w(n,U.id);te.length>0&&N(`/app/roster/${V}/${te[0]}`)}},U.id)):((y==null?void 0:y.positions)||[]).map((U,q)=>b.jsx(Gc,{type:"all-position",dateString:n,rowIndex:e,colIndex:q,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===q&&(t==null?void 0:t.table)==="all",onFocus:()=>i({row:e,col:q,table:"all"}),content:T(n,U.name)},U.name))})),M5=()=>{const n=Om(),{teamName:e,allTeamUsers:t,currentTeamData:i,allPositions:a,rosterAllViewMode:l,userData:c,rosterDates:f,navigate:m,dirtyEntries:p,entries:y,isSaving:v,hiddenUserList:T,closestNextDate:w}=n,N=O.useMemo(()=>t.filter(ee=>{var S;return!ee.isActive||!e?!1:(((S=ee.teamPositions)==null?void 0:S[e])||[]).length>0}),[t,e]),V=O.useMemo(()=>{const ee=N.map(C=>({id:C.email||"",name:C.name||"",isUser:!0,gender:C.gender}));if(!i)return ee;const $=i.positions.map(C=>C.name),S=Array.from(new Set(a.filter(C=>$.includes(C.name)&&C.isCustom).flatMap(C=>C.customLabels||[]).map(C=>C.trim()).filter(C=>C!==""))).map(C=>({id:C,name:C,isUser:!1}));return[...ee,...S]},[N,i,a]),M=O.useCallback((ee,$)=>{const S=ee.split("T")[0],C=p[S]||y[S];if(!C||!e||!C.teams[e])return[];let R=C.teams[e][$]||[];if(R.length===0){const k=$.trim(),P=Object.keys(C.teams[e]).find(j=>j.trim()===k);P&&(R=C.teams[e][P])}return R},[p,y,e]),L=O.useCallback((ee,$)=>{const S=M(ee,$);return S.length===0?"":b.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"4px",flexWrap:"wrap"},children:S.map(C=>{const R=a.find(k=>k.name===C);return b.jsx("span",{onClick:k=>{k.stopPropagation(),m(`/app/roster/${e}/${C}`)},title:C,style:{cursor:"pointer"},children:(R==null?void 0:R.emoji)||""},C)})})},[M,a,m,e]),U=O.useCallback((ee,$)=>{const S=ee.split("T")[0],C=p[S]||y[S];if(!C||!e)return"";const R=Object.entries(C.teams[e]||{}).filter(([,k])=>k.includes($));return b.jsx("div",{style:{fontSize:"0.75rem"},children:R.map(([k],P)=>{const j=N.find(me=>me.email===k),x=k===(c==null?void 0:c.email),le=j?j.name:k;return b.jsxs("span",{children:[b.jsx(Dm,{displayName:le,isMe:x}),P<R.length-1?", ":""]},k)})})},[p,y,e,N,c]),q=O.useCallback((ee,$)=>{if(l!=="user")return;const S=f[ee],C=V[$];if(S&&(C!=null&&C.isUser)&&C.id){const R=M(S,C.id);R.length>0&&m(`/app/roster/${e}/${R[0]}`)}},[l,f,V,M,m,e]),te=()=>b.jsx(D5,{rosterAllViewMode:l,allViewColumns:V,userData:c,currentTeamData:i,teamName:e,navigate:m});return b.jsx(Mm,{...n,isAllView:!0,isAbsenceView:!1,isSaving:v,hiddenUserList:T,renderHeader:te,onLoadNextYear:n.handleLoadNextYear,colCount:l==="user"?V.length:(i==null?void 0:i.positions.length)||0,onCellClick:q,children:f.map((ee,$)=>b.jsx(O5,{dateString:ee,rowIndex:$,entries:y,dirtyEntries:p,closestNextDate:w,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,rosterAllViewMode:l,allViewColumns:V,currentTeamData:i,getAllViewUserCellContent:L,getAllViewPositionCellContent:U,getAssignmentsForIdentifier:M,navigate:m,teamName:e,isUserAbsent:n.isUserAbsent,getAbsenceReason:n.getAbsenceReason},ee))})},P5="_headerInput_k44bb_1",k5="_headerActions_k44bb_27",V5="_headerActionBtn_k44bb_34",L5="_removeHeaderBtn_k44bb_58",j5="_addColumnBtn_k44bb_63",fo={headerInput:P5,headerActions:k5,headerActionBtn:V5,removeHeaderBtn:L5,addColumnBtn:j5},U5=O.memo(({currentPosition:n,userData:e,handleUpdateCustomLabel:t,handleMoveCustomLabel:i,handleRemoveCustomLabel:a,handleAddCustomLabel:l,showPeek:c})=>b.jsxs(Pm,{showPeek:c,children:[((n==null?void 0:n.customLabels)||[]).map((f,m)=>{var p;return b.jsxs("th",{className:`${Tn.rosterTableHeaderCell}`,children:[b.jsx("input",{type:"text",className:fo.headerInput,value:f,placeholder:"New Heading...",readOnly:!(e!=null&&e.isAdmin),onChange:y=>t(m,y.target.value)}),(e==null?void 0:e.isAdmin)&&b.jsxs("div",{className:fo.headerActions,children:[b.jsx("button",{className:fo.headerActionBtn,onClick:()=>i(m,"left"),disabled:m===0,title:"Move Left",children:b.jsx(Sj,{size:12})}),b.jsx("button",{className:`${fo.headerActionBtn} ${fo.removeHeaderBtn}`,onClick:()=>a(m),title:"Remove Column",children:b.jsx(lv,{size:12})}),b.jsx("button",{className:fo.headerActionBtn,onClick:()=>i(m,"right"),disabled:m===(((p=n==null?void 0:n.customLabels)==null?void 0:p.length)||0)-1,title:"Move Right",children:b.jsx(wj,{size:12})})]})]},`custom-${m}`)}),(e==null?void 0:e.isAdmin)&&b.jsx("th",{className:`${Tn.rosterTableHeaderCell}`,children:b.jsx("button",{className:fo.addColumnBtn,onClick:l,title:"Add Column",children:b.jsx(fh,{size:16})})}),b.jsx("th",{className:`${Tn.genderDividerCell}`})]})),z5=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,currentPosition:m,handleCellClick:p,getCellContent:y,showPeek:v})=>b.jsx(km,{dateString:n,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,showPeek:v,children:((m==null?void 0:m.customLabels)||[]).map((T,w)=>b.jsx(Gc,{type:"roster-custom",dateString:n,rowIndex:e,colIndex:w,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===w&&(t==null?void 0:t.table)==="roster",onFocus:()=>i({row:e,col:w,table:"roster"}),content:T&&y(n,T),onClick:()=>{T&&p(n,T,e,w)}},`custom-cell-${w}`))})),B5=()=>{var ee;const n=Om(),{dispatch:e,teamName:t,activePosition:i,allPositions:a,userData:l,rosterDates:c,dirtyEntries:f,entries:m,isSaving:p,hiddenUserList:y,closestNextDate:v}=n,T=O.useMemo(()=>a.find($=>$.name===i),[a,i]),w=O.useCallback(($,S)=>{if(!T||!i)return;const C=[...T.customLabels||[]];C[$]=S,e(qf({positionName:i,labels:C}))},[e,T,i]),N=O.useCallback(($,S)=>{if(!T||!i)return;const C=[...T.customLabels||[]],R=S==="left"?$-1:$+1;if(R<0||R>=C.length)return;const k=C[$];C[$]=C[R],C[R]=k,e(qf({positionName:i,labels:C}))},[e,T,i]),V=O.useCallback($=>{if(!T||!i)return;const S=[...T.customLabels||[]];S.splice($,1),e(qf({positionName:i,labels:S}))},[e,T,i]),M=O.useCallback(()=>{if(!T||!i)return;const $=T.customLabels||[];e(qf({positionName:i,labels:[...$,""]}))},[e,T,i]),L=O.useCallback(($,S,C,R)=>{n.setFocusedCell({row:C,col:R,table:"roster"}),e(sR({date:$,teamName:t,userIdentifier:S,positionGroupNames:[i],maxConflict:99}))},[n,e,t,i]),U=O.useCallback(($,S)=>{var k;const C=c[$],R=(k=T==null?void 0:T.customLabels)==null?void 0:k[S];C&&R&&L(C,R,$,S)},[c,T,L]),q=O.useCallback(($,S)=>{var k;const C=f[$]||m[$];return!C||!t?"":(((k=C.teams[t])==null?void 0:k[S])||[]).length>0?(T==null?void 0:T.emoji)||"":""},[f,m,t,T]),te=()=>b.jsx(U5,{currentPosition:T,userData:l,handleUpdateCustomLabel:w,handleMoveCustomLabel:N,handleRemoveCustomLabel:V,handleAddCustomLabel:M,showPeek:!0});return b.jsx(Mm,{...n,isAllView:!1,isAbsenceView:!1,isSaving:p,hiddenUserList:y,renderHeader:te,onLoadNextYear:n.handleLoadNextYear,colCount:((ee=T==null?void 0:T.customLabels)==null?void 0:ee.length)||0,onCellClick:U,children:c.map(($,S)=>b.jsx(z5,{dateString:$,rowIndex:S,entries:m,dirtyEntries:f,closestNextDate:v,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,currentPosition:T,handleCellClick:L,getCellContent:q,showPeek:!0},$))})},H5="_genderLabel_ffjys_1",F5="_clickableHeader_ffjys_8",gA={genderLabel:H5,clickableHeader:F5},q5=O.memo(({sortedUsers:n,genderDividerIndex:e,assignedOnClosestDate:t,currentPosition:i,userData:a,onToggleVisibility:l,showPeek:c})=>b.jsxs(Pm,{showPeek:c,children:[n.map((f,m)=>{const p=!!(f.email&&f.email===(a==null?void 0:a.email));return b.jsxs(O.Fragment,{children:[e===m&&b.jsx("th",{className:`${Tn.genderDividerCell}`}),b.jsxs("th",{className:`${Tn.rosterTableHeaderCell} ${gA.clickableHeader} ${f.email&&t.includes(f.email)?Tn.highlightedHeader:""}`,onClick:()=>f.email&&l(f.email),title:"Click to hide member",children:[b.jsx(Dm,{displayName:f.name,isMe:p}),(i==null?void 0:i.sortByGender)&&b.jsxs("span",{className:gA.genderLabel,children:["(",f.gender==="Male"?"M":f.gender==="Female"?"F":"?",")"]})]})]},f.email)}),b.jsx("th",{className:`${Tn.genderDividerCell}`})]})),G5=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,handleCellClick:m,getCellContent:p,sortedUsers:y,genderDividerIndex:v,isCellDisabled:T,isUserAbsent:w,getAbsenceReason:N,assignedOnClosestDate:V,showPeek:M})=>b.jsxs(km,{dateString:n,entries:a,dirtyEntries:l,onDateClick:c,closestNextDate:f,showPeek:M,children:[y.map((L,U)=>b.jsxs(O.Fragment,{children:[v===U&&b.jsx("td",{className:mr.genderDividerCell}),b.jsx(Gc,{type:"roster-user",dateString:n,rowIndex:e,colIndex:U,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===U&&(t==null?void 0:t.table)==="roster",onFocus:()=>i({row:e,col:U,table:"roster"}),disabled:L.email?T(n,L.email):!1,absent:L.email?w(n,L.email):!1,absenceReason:L.email?N(n,L.email):"",isAssignedOnClosestDate:!!(n===f&&L.email&&V.includes(L.email)),content:L.email?p(n,L.email):null,onClick:()=>{L.email&&!T(n,L.email)&&m(n,L.email,e,U)}})]},L.email)),b.jsx("td",{className:mr.genderDividerCell})]})),$5=()=>{const n=Om(),{dispatch:e,teamName:t,activePosition:i,users:a,allPositions:l,allTeams:c,rosterDates:f,closestNextDate:m,dirtyEntries:p,entries:y,hiddenUserList:v,isSaving:T,userData:w}=n,N=O.useMemo(()=>l.find(S=>S.name===i),[l,i]),V=O.useMemo(()=>{const S=a.filter(C=>C.email&&!v.includes(C.email)&&C.isActive);return N!=null&&N.sortByGender?S.sort((C,R)=>C.gender===R.gender?(C.name||"").localeCompare(R.name||""):C.gender==="Male"?-1:R.gender==="Male"?1:(C.gender||"").localeCompare(R.gender||"")):S},[a,N,v]),M=O.useMemo(()=>{if(!(N!=null&&N.sortByGender)||V.length===0)return-1;const S=V.findIndex(C=>C.gender==="Female");return S>0&&S<V.length?S:-1},[N,V]),L=O.useMemo(()=>{if(!m||!t||!i)return[];const S=m.split("T")[0],C=p[S]||y[S];if(!C||!C.teams[t])return[];const R=l.filter(P=>P.parentId===i),k=[i,...R.map(P=>P.name)];return Object.entries(C.teams[t]).filter(([,P])=>P.some(j=>k.includes(j))).map(([P])=>P)},[m,t,i,p,y,l]),U=O.useCallback((S,C)=>{if(!t||!i)return!1;if(n.isUserAbsent(S,C))return!0;const R=p[S]||y[S],k=c.find(me=>me.name===t),P=(k==null?void 0:k.maxConflict)||1;if(!R||!R.teams[t]||!R.teams[t][C])return!1;const j=R.teams[t][C],x=l.filter(me=>me.parentId===i),le=[i,...x.map(me=>me.name)];return j.some(me=>le.includes(me))?!1:j.length>=P},[t,i,n,p,y,c,l]),q=O.useCallback((S,C,R,k)=>{if(U(S,C)){n.setFocusedCell({row:R,col:k,table:"roster"});return}n.setFocusedCell({row:R,col:k,table:"roster"});const P=c.find(me=>me.name===t),j=(P==null?void 0:P.maxConflict)||1,x=l.filter(me=>me.parentId===i),le=[i,...x.map(me=>me.name)];e(sR({date:S,teamName:t,userIdentifier:C,positionGroupNames:le,maxConflict:j}))},[U,n,c,t,i,l,e]),te=O.useCallback((S,C)=>{const R=f[S],k=V[C];R&&(k!=null&&k.email)&&q(R,k.email,S,C)},[f,V,q]),ee=O.useCallback((S,C)=>{var j;const R=p[S]||y[S];if(!R||!t)return"";const k=((j=R.teams[t])==null?void 0:j[C])||[],P=[];return Object.entries(R.teams).forEach(([x,le])=>{x!==t&&le[C]&&P.push({team:x,positions:le[C]})}),k.length===0&&P.length===0?"":b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"4px",flexWrap:"wrap"},children:[k.map(x=>{const le=l.find(me=>me.name===x);return b.jsx("span",{title:`${t}: ${x}`,children:(le==null?void 0:le.emoji)||""},x)}),P.map(x=>x.positions.map(le=>{const me=l.find(G=>G.name===le);return b.jsx("span",{title:`${x.team}: ${le}`,style:{opacity:.6},children:(me==null?void 0:me.emoji)||""},`${x.team}-${le}`)}))]})},[p,y,t,l]),$=()=>b.jsx(q5,{sortedUsers:V,genderDividerIndex:M,assignedOnClosestDate:L,currentPosition:N,userData:w,onToggleVisibility:n.handleToggleVisibility,showPeek:!0});return b.jsx(Mm,{...n,isAllView:!1,isAbsenceView:!1,isSaving:T,hiddenUserList:v,renderHeader:$,onLoadNextYear:n.handleLoadNextYear,colCount:V.length,onCellClick:te,children:f.map((S,C)=>b.jsx(G5,{dateString:S,rowIndex:C,entries:y,dirtyEntries:p,closestNextDate:m,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,handleCellClick:q,getCellContent:ee,sortedUsers:V,genderDividerIndex:M,isCellDisabled:U,isUserAbsent:n.isUserAbsent,getAbsenceReason:n.getAbsenceReason,assignedOnClosestDate:L,showPeek:!0},S))})},K5="_rosterPage_w8wy1_1",Y5={rosterPage:K5},Q5=()=>{const{positionName:n}=Mo(),{positions:e}=Ue(a=>a.positions),t=e.find(a=>a.name===n),i=()=>n==="All"?b.jsx(M5,{}):n==="Absence"?b.jsx(R5,{}):t!=null&&t.isCustom?b.jsx(B5,{}):b.jsx($5,{});return b.jsx("div",{className:Y5.rosterPage,children:i()})},X5="_appTableContainer_1wf07_1",W5="_appTable_1wf07_1",J5="_colorPickerGroup_1wf07_50",Z5="_stickyCol_1wf07_60",$c={appTableContainer:X5,appTable:W5,colorPickerGroup:J5,stickyCol:Z5},ez=({text:n,textAlign:e="left",width:t,minWidth:i})=>b.jsx("th",{className:$c.stickyCol,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:i?`${i}px`:"auto"},children:n}),en=({isSticky:n=!1,textAlign:e="left",className:t,children:i})=>b.jsx("td",{style:{textAlign:e,display:e==="center"?"table-cell":void 0},className:`${t||""} ${n?$c.stickyCol:""}
`,children:b.jsx("div",{style:{display:"flex",justifyContent:e==="center"?"center":e==="right"?"flex-end":"flex-start",alignItems:"center",gap:"8px",height:"100%"},children:i})}),ei=({name:n,value:e,placeholder:t,type:i="text",isSticky:a,isReadOnly:l=!1,isChild:c=!1,onChange:f})=>b.jsxs(en,{isSticky:a,children:[c&&b.jsx(YC,{}),b.jsx("input",{name:n,className:gs.formInput,type:i,placeholder:t,value:e,onChange:f,readOnly:l})]}),dR=({name:n,value:e,placeholder:t,onChange:i})=>b.jsxs(en,{className:$c.colorPickerGroup,children:[b.jsx("input",{name:n,type:"color",className:gs.colorInput,value:e||"#FFFFFF",onChange:i}),b.jsx("input",{name:n,className:gs.formInput,value:e,placeholder:t,onChange:i})]}),hv=({headers:n,children:e})=>b.jsx("div",{className:$c.appTableContainer,children:b.jsxs("table",{className:$c.appTable,children:[b.jsx("thead",{children:b.jsx("tr",{children:n.map((t,i)=>b.jsx(ez,{...t},i))})}),b.jsx("tbody",{children:e})]})}),tz=({position:n,index:e,onUpdate:t,onMove:i,onDelete:a,onAddChild:l,isFirst:c,isLast:f})=>b.jsxs("tr",{children:[b.jsx(ei,{name:`name-${e}`,value:n.name,onChange:m=>t(e,"name",m.target.value),isSticky:!0}),b.jsx(en,{textAlign:"center",children:n.parentId?b.jsx(YC,{}):b.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[b.jsx(tr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>i(e,"up"),disabled:c,children:""}),b.jsx(tr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>i(e,"down"),disabled:f,children:""})]})}),b.jsx(ei,{name:`emoji-${e}`,value:n.emoji,onChange:m=>t(e,"emoji",m.target.value)}),b.jsx(dR,{name:`colour-${e}`,value:n.colour,onChange:m=>t(e,"colour",m.target.value)}),b.jsx(en,{textAlign:"center",children:b.jsx(vr,{colour:n.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.sortByGender,onClick:()=>t(e,"sortByGender",!n.sortByGender),isDisabled:n.isCustom,children:n.sortByGender?"YES":"NO"})}),b.jsx(en,{textAlign:"center",children:b.jsx(vr,{colour:n.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.isCustom,onClick:()=>t(e,"isCustom",!n.isCustom),children:n.isCustom?"YES":"NO"})}),b.jsx(en,{textAlign:"center",children:!n.parentId&&b.jsxs(tr,{variant:"secondary",size:"small",onClick:()=>l(n.name),title:"Add Child Position",children:[b.jsx(fh,{size:14,style:{marginRight:"4px"}}),"Add"]})}),b.jsx(en,{textAlign:"center",children:b.jsxs(tr,{variant:"delete",size:"small",onClick:()=>a(e),children:[b.jsx(QC,{size:14,style:{marginRight:"4px"}}),"Delete"]})})]}),nz="_settingsContainer_w7sc3_1",rz="_managementWrapper_w7sc3_13",ql={settingsContainer:nz,managementWrapper:rz},my={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},iz=()=>{const n=In(),{positions:e,loading:t}=Ue(L=>L.positions),[i,a]=O.useState(e),[l,c]=O.useState(my),[f,m]=O.useState("idle"),p=O.useMemo(()=>{const L=U=>U.map(q=>({name:q.name||"",emoji:q.emoji||"",colour:q.colour||"",parentId:q.parentId||void 0,sortByGender:!!q.sortByGender,isCustom:!!q.isCustom}));return JSON.stringify(L(i))!==JSON.stringify(L(e))},[i,e]);O.useEffect(()=>{a(e)},[e]);const y=(L,U,q)=>{const te=[...i];te[L]={...te[L],[U]:q},a(te)},v=(L,U)=>{const q=[...i],te=q[L],ee=te.parentId,$=S=>{const C=q[S];if(!C)return{block:[],startIndex:-1,endIndex:-1};const R=[],k=[C],P=new Set;let j=S,x=S,le=0;for(;le<k.length;){const G=k[le++];P.has(G.name)||(P.add(G.name),R.push(G),q.forEach((he,pe)=>{he.parentId===G.name&&!P.has(he.name)&&(k.push(he),j=Math.min(j,pe),x=Math.max(x,pe))}))}return{block:R,startIndex:j,endIndex:x}};if(ee){const S=q.filter(le=>le.parentId===ee),R=S.findIndex(le=>le.name===te.name)+(U==="up"?-1:1);if(R<0||R>=S.length)return;const k=S[R],P=q.indexOf(te),j=q.indexOf(k);if(P===-1||j===-1)return;const x=[...q];x[P]=k,x[j]=te,a(x)}else{const S=$(L),{block:C,startIndex:R,endIndex:k}=S;if(!C||C.length===0)return;if(U==="up"){if(R===0)return;let P=R-1;for(;P>=0&&q[P].parentId;)P--;if(P<0)return;const j=$(P),{block:x,startIndex:le}=j;if(!x||x.length===0)return;const me=[...q.slice(0,le),...C,...x,...q.slice(k+1)].filter(Boolean);a(me)}else{if(k===q.length-1)return;let P=k+1;for(;P<q.length&&q[P].parentId;)P++;if(P>=q.length)return;const j=$(P),{block:x,startIndex:le}=j;if(!x||x.length===0)return;const me=[...q.slice(0,R),...x,...C,...q.slice(le+x.length)].filter(Boolean);a(me)}}},T=()=>{if(!l.name.trim()||!l.emoji.trim()){n(So({title:"Missing Information",message:"Please provide both an emoji and a name.",showCancel:!1}));return}a([...i,l]),c(my)},w=L=>{n(So({title:"Delete Position",message:"Delete this position? This will remove it from the global list, and any associated child positions.",confirmText:"Delete",onConfirm:()=>{const U=i[L];let q=i.filter((te,ee)=>ee!==L);U.parentId||(q=q.filter(te=>te.parentId!==U.name)),a(q)}}))},N=async()=>{m("saving");try{const L=i.map(U=>{const q={name:U.name||"",emoji:U.emoji||"",colour:U.colour||"",sortByGender:!!U.sortByGender,isCustom:!!U.isCustom,customLabels:U.customLabels||[]};return U.parentId&&(q.parentId=U.parentId),q});await n(ov(L)).unwrap(),m("success"),setTimeout(()=>m("idle"),2e3)}catch(L){console.error("Save Error:",L),n(So({title:"Save Error",message:"Error saving: "+(L instanceof Error?L.message:"Unknown error"),showCancel:!1})),m("idle")}},V=L=>{a(U=>{const q={...my,parentId:L},te=U.findIndex(S=>S.name===L);if(te===-1)return[...U,q];let ee=te;for(;ee+1<U.length&&U[ee+1].parentId===L;)ee++;return[...U.slice(0,ee+1),q,...U.slice(ee+1)]})},M=()=>{a(e)};return t?b.jsx(hu,{}):b.jsxs("div",{className:ql.managementWrapper,children:[b.jsxs(hv,{headers:[{text:"Name",minWidth:80,width:200,textAlign:"center"},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Colour",minWidth:100,textAlign:"center"},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Custom Headings",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[i.map((L,U)=>b.jsx(tz,{position:L,index:U,onUpdate:y,onMove:v,onDelete:w,onAddChild:V,isFirst:U===0,isLast:U===i.length-1},`${L.emoji}-${U}`)),b.jsxs("tr",{className:"pos-row-new",children:[b.jsx(ei,{name:"new-name",value:l.name,placeholder:"Position Name",onChange:L=>c({...l,name:L.target.value}),isSticky:!0}),b.jsx(en,{textAlign:"center",children:""}),b.jsx(ei,{name:"new-emoji",value:l.emoji,placeholder:"",onChange:L=>c({...l,emoji:L.target.value})}),b.jsx(dR,{name:"new-colour",value:l.colour,placeholder:"#FFFFFF",onChange:L=>c({...l,colour:L.target.value})}),b.jsx(en,{textAlign:"center",children:b.jsx(vr,{colour:l.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:l.sortByGender,onClick:()=>c({...l,sortByGender:!l.sortByGender}),isDisabled:l.isCustom,children:l.sortByGender?"YES":"NO"})}),b.jsx(en,{textAlign:"center",children:b.jsx(vr,{colour:l.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:l.isCustom,onClick:()=>c({...l,isCustom:!l.isCustom}),children:l.isCustom?"YES":"NO"})}),b.jsx(en,{textAlign:"center",children:b.jsxs(tr,{onClick:T,disabled:!l.name.trim()||!l.emoji.trim(),children:[b.jsx(fh,{size:16,style:{marginRight:"6px"}}),"Add"]})}),b.jsx(en,{textAlign:"center",children:""})]})]}),p&&b.jsx(fu,{label:"Unsaved position changes",saveText:"Save Positions",onSave:N,onCancel:M,isSaving:f==="saving"})]})},sz=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],mR=({isOpen:n,onClose:e,team:t,availablePositions:i,onTogglePosition:a,onToggleDay:l,onToggleAllowAbsence:c})=>{var f;return b.jsxs(cv,{isOpen:n,onClose:e,title:`Edit Team: ${t.name}`,children:[b.jsxs("div",{className:yn.formGroup,children:[b.jsx("label",{className:yn.sectionLabel,children:"Allowed Positions"}),b.jsx(Fl,{children:(f=i==null?void 0:i.filter(m=>!m.parentId))==null?void 0:f.map(m=>{var y;const p=(y=t.positions)==null?void 0:y.some(v=>v.name===m.name);return b.jsxs(vr,{colour:m.colour,isActive:p,onClick:()=>a(m),children:[m.emoji," ",m.name]},m.name)})})]}),b.jsxs("div",{className:yn.formGroup,children:[b.jsx("label",{className:yn.sectionLabel,children:"Preferred Days"}),b.jsx(Fl,{children:sz.map(m=>{var y;const p=(y=t.preferredDays)==null?void 0:y.includes(m);return b.jsx(vr,{isActive:p,onClick:()=>l(m),children:m},m)})})]}),b.jsxs("div",{className:yn.formGroup,children:[b.jsx("label",{className:yn.sectionLabel,children:"Feature Settings"}),b.jsx(Fl,{children:b.jsxs(vr,{isActive:t.allowAbsence!==!1,onClick:()=>c(t.allowAbsence===!1),colour:t.allowAbsence!==!1?"var(--color-success-dark)":"var(--color-text-dim)",children:["Allow Absence: ",t.allowAbsence!==!1?"YES":"NO"]})})]})]})},fv=({primaryText:n,secondaryText:e,onClick:t})=>b.jsxs("button",{className:yn.summaryButton,onClick:t,type:"button",children:[b.jsx("span",{className:yn.summaryPrimary,children:n}),e&&b.jsxs(b.Fragment,{children:[b.jsx("span",{className:yn.summarySeparator,children:""}),b.jsx("span",{className:yn.summarySecondary,children:e})]})]}),az=({team:n,teamIndex:e,availablePositions:t,onUpdate:i,onMove:a,onDelete:l,onTogglePosition:c,onToggleDay:f,onToggleAllowAbsence:m,isFirst:p,isLast:y})=>{var V;const[v,T]=O.useState(!1),w=()=>{if(!n.positions||n.positions.length===0)return"No positions";const M=n.positions.slice(0,3).map(U=>b.jsx("span",{className:yn.summaryEmoji,children:U.emoji},U.name)),L=n.positions.length-3;return b.jsxs(b.Fragment,{children:[M,L>0&&b.jsxs("span",{className:yn.remainingCount,children:["+",L]})]})},N=()=>!n.preferredDays||n.preferredDays.length===0?"No days":n.preferredDays.map(M=>M.substring(0,3)).join(", ");return b.jsxs(b.Fragment,{children:[b.jsxs("tr",{children:[b.jsx(ei,{name:`team-name-${e}`,value:n.name,onChange:M=>i(e,"name",M.target.value),isSticky:!0}),b.jsx(en,{children:b.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[b.jsx(tr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(e,"up"),disabled:p,children:""}),b.jsx(tr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(e,"down"),disabled:y,children:""})]})}),b.jsx(ei,{name:`team-emoji-${e}`,value:n.emoji,onChange:M=>i(e,"emoji",M.target.value)}),b.jsx(ei,{name:`team-maxConflict-${e}`,value:((V=n.maxConflict)==null?void 0:V.toString())||"1",type:"number",onChange:M=>i(e,"maxConflict",parseInt(M.target.value)||1)}),b.jsx(en,{children:b.jsx(fv,{primaryText:w(),secondaryText:N(),onClick:()=>T(!0)})}),b.jsx(en,{children:b.jsxs(tr,{variant:"delete",size:"small",onClick:()=>l(e),children:[b.jsx(QC,{size:14,style:{marginRight:"6px"}}),"Delete"]})})]}),b.jsx(mR,{isOpen:v,onClose:()=>T(!1),team:n,availablePositions:t,onTogglePosition:M=>c(e,M),onToggleDay:M=>f(e,M),onToggleAllowAbsence:M=>m(e,M)})]})},yA={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1,allowAbsence:!0},oz=()=>{var j;const n=In(),{teams:e,loading:t}=Ue(x=>x.teams),{positions:i,loading:a}=Ue(x=>x.positions),[l,c]=O.useState(e),[f,m]=O.useState(yA),[p,y]=O.useState("idle"),[v,T]=O.useState(!1),w=O.useMemo(()=>{const x=le=>le.map(me=>({name:me.name||"",emoji:me.emoji||"",positions:(me.positions||[]).map(G=>G.name).sort(),preferredDays:[...me.preferredDays||[]].sort(),maxConflict:me.maxConflict||1,allowAbsence:me.allowAbsence!==!1}));return JSON.stringify(x(l))!==JSON.stringify(x(e))},[l,e]);O.useEffect(()=>{c(e)},[e]);const N=(x,le,me)=>{const G=[...l];G[x]={...G[x],[le]:me},c(G)},V=(x,le)=>{const me=[...l],G=le==="up"?x-1:x+1;if(G<0||G>=me.length)return;const he=me[x];me[x]=me[G],me[G]=he,c(me)},M=(x,le)=>{const me=l.map((G,he)=>{if(he!==x)return G;const pe=G.positions||[],Pe=pe.find(Oe=>Oe.name===le.name)?pe.filter(Oe=>Oe.name!==le.name):[...pe,le];return{...G,positions:Pe}});c(me)},L=(x,le)=>{const me=l.map((G,he)=>{if(he!==x)return G;const pe=G.preferredDays||[],Pe=pe.includes(le)?pe.filter(Oe=>Oe!==le):[...pe,le];return{...G,preferredDays:Pe}});c(me)},U=(x,le)=>{const me=l.map((G,he)=>he!==x?G:{...G,allowAbsence:le});c(me)},q=x=>{const le=f.positions||[],me=le.some(G=>G.name===x.name)?le.filter(G=>G.name!==x.name):[...le,x];m({...f,positions:me})},te=x=>{const le=f.preferredDays||[],me=le.includes(x)?le.filter(G=>G!==x):[...le,x];m({...f,preferredDays:me})},ee=x=>{m({...f,allowAbsence:x})},$=()=>{if(!f.name.trim()||!f.emoji.trim()){n(So({title:"Missing Information",message:"Please provide both an emoji and a name for the team.",showCancel:!1}));return}c([...l,f]),m(yA)},S=x=>{n(So({title:"Delete Team",message:"Are you sure you want to delete this team?",confirmText:"Delete",onConfirm:()=>{c(l.filter((le,me)=>me!==x))}}))},C=async()=>{y("saving");try{const x=l.map(le=>({name:le.name||"",emoji:le.emoji||"",maxConflict:le.maxConflict||1,allowAbsence:le.allowAbsence!==!1,preferredDays:le.preferredDays||[],positions:(le.positions||[]).map(me=>({name:me.name||"",emoji:me.emoji||"",colour:me.colour||"",sortByGender:!!me.sortByGender,isCustom:!!me.isCustom,customLabels:me.customLabels||[],...me.parentId?{parentId:me.parentId}:{}}))}));await n(ld(x)).unwrap(),y("success"),setTimeout(()=>y("idle"),2e3)}catch(x){console.error("Save Error:",x),n(So({title:"Save Error",message:"Error saving: "+(x instanceof Error?x.message:"Unknown error"),showCancel:!1})),y("idle")}},R=()=>{c(e)};if(t||a)return b.jsx(hu,{});const k=()=>{if(!f.positions||f.positions.length===0)return"No positions";const x=f.positions.slice(0,3).map(me=>b.jsx("span",{className:ql.summaryEmoji,children:me.emoji},me.name)),le=f.positions.length-3;return b.jsxs(b.Fragment,{children:[x,le>0&&b.jsxs("span",{className:ql.remainingCount,children:["+",le]})]})},P=()=>!f.preferredDays||f.preferredDays.length===0?"No days":f.preferredDays.map(x=>x.substring(0,3)).join(", ");return b.jsxs("div",{className:ql.managementWrapper,children:[b.jsxs(hv,{headers:[{text:"Name",minWidth:100,width:120,textAlign:"center"},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Conflicts",width:60,textAlign:"center"},{text:"Config",minWidth:180,textAlign:"center"},{text:"",width:50}],children:[l.map((x,le)=>b.jsx(az,{team:x,teamIndex:le,availablePositions:i,onUpdate:N,onMove:V,onDelete:S,onTogglePosition:M,onToggleDay:L,onToggleAllowAbsence:U,isFirst:le===0,isLast:le===l.length-1},`${x.emoji}-${le}`)),b.jsxs("tr",{className:"team-row-new",children:[b.jsx(ei,{name:"new-team-name",value:f.name,placeholder:"Team Name",onChange:x=>m({...f,name:x.target.value}),isSticky:!0}),b.jsx(en,{children:""}),b.jsx(ei,{name:"new-team-emoji",value:f.emoji,placeholder:"",onChange:x=>m({...f,emoji:x.target.value})}),b.jsx(ei,{name:"new-team-maxConflict",value:((j=f.maxConflict)==null?void 0:j.toString())||"1",type:"number",onChange:x=>m({...f,maxConflict:parseInt(x.target.value)||1})}),b.jsx(en,{children:b.jsx(fv,{primaryText:k(),secondaryText:P(),onClick:()=>T(!0)})}),b.jsx(en,{children:b.jsxs(tr,{onClick:$,disabled:!f.name.trim()||!f.emoji.trim(),children:[b.jsx(fh,{size:16,style:{marginRight:"6px"}}),"Add"]})})]})]}),b.jsx(mR,{isOpen:v,onClose:()=>T(!1),team:f,availablePositions:i,onTogglePosition:q,onToggleDay:te,onToggleAllowAbsence:ee}),w&&b.jsx(fu,{label:"Unsaved team changes",saveText:"Save All Team Changes",onSave:C,onCancel:R,isSaving:p==="saving"})]})},lz=({isOpen:n,onClose:e,user:t,availableTeams:i})=>{const a=In(),{positions:l}=Ue(p=>p.positions),c=p=>{a(tU({userId:t.id,teamName:p}))},f=(p,y)=>{a(nU({userId:t.id,teamName:p,posName:y}))},m=(p,y)=>{a(rU({userId:t.id,teamName:p,direction:y}))};return b.jsx(cv,{isOpen:n,onClose:e,title:`Edit Assignments: ${t.name}`,children:b.jsx(hR,{selectedTeams:t.teams||[],teamPositions:t.teamPositions||{},onToggleTeam:c,onTogglePosition:f,onMoveTeam:m,availableTeams:i,globalPositions:l})})},uz=({user:n,availableTeams:e,adminEmail:t})=>{const i=In(),{positions:a}=Ue(y=>y.positions),[l,c]=O.useState(!1),f=(y,v)=>{i(eU({id:n.id,field:y,value:v}))},m=()=>{if(!n.teams||n.teams.length===0)return"No teams";const y=n.teams.map(w=>{const N=e.find(V=>V.name===w);return(N==null?void 0:N.emoji)||""}).filter(Boolean),v=y.slice(0,3).map((w,N)=>b.jsx("span",{className:yn.summaryEmoji,children:w},N)),T=y.length-3;return b.jsxs(b.Fragment,{children:[v,T>0&&b.jsxs("span",{className:yn.remainingCount,children:["+",T]})]})},p=()=>n.teamPositions?Object.entries(n.teamPositions).reduce((y,[,v])=>{const T=v.filter(w=>{const N=a.find(V=>V.name===w);return!(N!=null&&N.isCustom)});return y+T.length},0):0;return b.jsxs(b.Fragment,{children:[b.jsxs("tr",{children:[b.jsx(ei,{name:`name-${n.id}`,value:n.name||"",onChange:y=>f("name",y.target.value),isSticky:!0}),b.jsx(ei,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),b.jsx(en,{children:b.jsxs("select",{name:`gender-${n.id}`,className:gs.formSelect,value:n.gender,onChange:y=>f("gender",y.target.value),children:[b.jsx("option",{value:"",children:"-"}),b.jsx("option",{value:"Male",children:"Male"}),b.jsx("option",{value:"Female",children:"Female"})]})}),b.jsx(en,{children:b.jsx(fv,{primaryText:m(),secondaryText:`(${p()} pos)`,onClick:()=>c(!0)})}),b.jsx(en,{textAlign:"center",children:b.jsx(vr,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),b.jsx(en,{textAlign:"center",children:b.jsx(vr,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),b.jsx(en,{textAlign:"center",children:b.jsx(vr,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id),b.jsx(lz,{isOpen:l,onClose:()=>c(!1),user:n,availableTeams:e})]})},cz=()=>{const n=In(),{allUsers:e,originalUsers:t,loading:i,saving:a,error:l}=Ue(y=>y.userManagement),c=Ue(y=>y.teams.teams),f=O.useMemo(()=>{const y=v=>v.map(T=>({name:T.name||"",gender:T.gender||"",teams:[...T.teams||[]].sort(),teamPositions:Object.keys(T.teamPositions||{}).sort().reduce((w,N)=>{var V;return w[N]=[...((V=T.teamPositions)==null?void 0:V[N])||[]].sort(),w},{}),isActive:!!T.isActive,isApproved:!!T.isApproved,isAdmin:!!T.isAdmin}));return JSON.stringify(y(e))!==JSON.stringify(y(t))},[e,t]),m=()=>{n(hd(e))},p=()=>{n(iU())};return i?b.jsx(hu,{}):l?b.jsxs("div",{children:["Error: ",l]}):b.jsxs("div",{className:ql.managementWrapper,children:[b.jsx(hv,{headers:[{text:"Name",minWidth:70,width:100,textAlign:"center"},{text:"Email",minWidth:170,textAlign:"center"},{text:"Gender",minWidth:90,textAlign:"center"},{text:"Assignments",minWidth:150,textAlign:"center"},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(y=>b.jsx(uz,{user:y,availableTeams:c,adminEmail:"chris.sm.kang542@gmail.com"},y.id))}),f&&b.jsx(fu,{label:"Unsaved user changes",saveText:"Save All User Changes",onSave:m,onCancel:p,isSaving:a})]})},hz=()=>{const{userData:n}=Ue(t=>t.auth),{section:e}=Mo();return n?b.jsxs("div",{className:ql.settingsContainer,children:[e===Pl.PROFILE&&b.jsx(fR,{}),e===Pl.USER_MANAGEMENT&&(n.isAdmin?b.jsx(cz,{}):b.jsx("p",{children:"Access Denied"})),e===Pl.TEAMS&&(n.isAdmin?b.jsx(oz,{}):b.jsx("p",{children:"Access Denied"})),e===Pl.POSITIONS&&(n.isAdmin?b.jsx(iz,{}):b.jsx("p",{children:"Access Denied"}))]}):null},fz=[{path:"/",element:b.jsx(fL,{})},{path:"/login",element:b.jsx(w9,{})},{path:"/guest",element:b.jsx(y9,{})},{path:"/app",element:b.jsx(gj,{}),children:[{path:"",element:b.jsx(GU,{}),children:[{path:"dashboard",element:b.jsx(P6,{})},{path:"roster/:teamName?/:positionName?",element:b.jsx(Q5,{})},{path:"settings/:section?",element:b.jsx(hz,{})}]}]}];let _A=!1;const dz=n=>{if(!_A){_A=!0;let e;Gk(xo,t=>{if(t){n.dispatch($3(t)),n.dispatch(ud(t.uid));const i=Kn(kt,"users",t.uid);e=po(i,a=>{if(a.exists()){const l=a.data();n.dispatch(rR(l))}})}else n.dispatch(K3()),e&&e()})}return e=>t=>e(t)},mz=FL({reducer:{auth:Y3,positions:fj,presence:l3,roster:J3,rosterView:r6,teams:pj,ui:t3,userManagement:aU},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(dz)}),pz=UD(fz);ix.createRoot(document.getElementById("root")).render(b.jsx(EA.StrictMode,{children:b.jsx(vx,{store:mz,children:b.jsx(e2,{children:b.jsx(oL,{children:b.jsx(JD,{router:pz})})})})}));
